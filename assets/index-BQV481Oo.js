function oS(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const c=Object.getOwnPropertyDescriptor(i,a);c&&Object.defineProperty(e,a,c.get?c:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();var Ma=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function m2(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var g2={exports:{}},hh={},x2={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qc=Symbol.for("react.element"),aS=Symbol.for("react.portal"),lS=Symbol.for("react.fragment"),cS=Symbol.for("react.strict_mode"),uS=Symbol.for("react.profiler"),dS=Symbol.for("react.provider"),hS=Symbol.for("react.context"),fS=Symbol.for("react.forward_ref"),pS=Symbol.for("react.suspense"),mS=Symbol.for("react.memo"),gS=Symbol.for("react.lazy"),Km=Symbol.iterator;function xS(e){return e===null||typeof e!="object"?null:(e=Km&&e[Km]||e["@@iterator"],typeof e=="function"?e:null)}var y2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w2=Object.assign,v2={};function xl(e,t,n){this.props=e,this.context=t,this.refs=v2,this.updater=n||y2}xl.prototype.isReactComponent={};xl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};xl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _2(){}_2.prototype=xl.prototype;function Dp(e,t,n){this.props=e,this.context=t,this.refs=v2,this.updater=n||y2}var jp=Dp.prototype=new _2;jp.constructor=Dp;w2(jp,xl.prototype);jp.isPureReactComponent=!0;var Qm=Array.isArray,b2=Object.prototype.hasOwnProperty,Bp={current:null},C2={key:!0,ref:!0,__self:!0,__source:!0};function S2(e,t,n){var i,a={},c=null,f=null;if(t!=null)for(i in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(c=""+t.key),t)b2.call(t,i)&&!C2.hasOwnProperty(i)&&(a[i]=t[i]);var g=arguments.length-2;if(g===1)a.children=n;else if(1<g){for(var v=Array(g),y=0;y<g;y++)v[y]=arguments[y+2];a.children=v}if(e&&e.defaultProps)for(i in g=e.defaultProps,g)a[i]===void 0&&(a[i]=g[i]);return{$$typeof:qc,type:e,key:c,ref:f,props:a,_owner:Bp.current}}function yS(e,t){return{$$typeof:qc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Fp(e){return typeof e=="object"&&e!==null&&e.$$typeof===qc}function wS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var $m=/\/+/g;function cf(e,t){return typeof e=="object"&&e!==null&&e.key!=null?wS(""+e.key):t.toString(36)}function Xu(e,t,n,i,a){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(c){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case qc:case aS:f=!0}}if(f)return f=e,a=a(f),e=i===""?"."+cf(f,0):i,Qm(a)?(n="",e!=null&&(n=e.replace($m,"$&/")+"/"),Xu(a,t,n,"",function(y){return y})):a!=null&&(Fp(a)&&(a=yS(a,n+(!a.key||f&&f.key===a.key?"":(""+a.key).replace($m,"$&/")+"/")+e)),t.push(a)),1;if(f=0,i=i===""?".":i+":",Qm(e))for(var g=0;g<e.length;g++){c=e[g];var v=i+cf(c,g);f+=Xu(c,t,n,v,a)}else if(v=xS(e),typeof v=="function")for(e=v.call(e),g=0;!(c=e.next()).done;)c=c.value,v=i+cf(c,g++),f+=Xu(c,t,n,v,a);else if(c==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function _u(e,t,n){if(e==null)return e;var i=[],a=0;return Xu(e,i,"","",function(c){return t.call(n,c,a++)}),i}function vS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Or={current:null},qu={transition:null},_S={ReactCurrentDispatcher:Or,ReactCurrentBatchConfig:qu,ReactCurrentOwner:Bp};function A2(){throw Error("act(...) is not supported in production builds of React.")}Pt.Children={map:_u,forEach:function(e,t,n){_u(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return _u(e,function(){t++}),t},toArray:function(e){return _u(e,function(t){return t})||[]},only:function(e){if(!Fp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Pt.Component=xl;Pt.Fragment=lS;Pt.Profiler=uS;Pt.PureComponent=Dp;Pt.StrictMode=cS;Pt.Suspense=pS;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_S;Pt.act=A2;Pt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=w2({},e.props),a=e.key,c=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(c=t.ref,f=Bp.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var g=e.type.defaultProps;for(v in t)b2.call(t,v)&&!C2.hasOwnProperty(v)&&(i[v]=t[v]===void 0&&g!==void 0?g[v]:t[v])}var v=arguments.length-2;if(v===1)i.children=n;else if(1<v){g=Array(v);for(var y=0;y<v;y++)g[y]=arguments[y+2];i.children=g}return{$$typeof:qc,type:e.type,key:a,ref:c,props:i,_owner:f}};Pt.createContext=function(e){return e={$$typeof:hS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:dS,_context:e},e.Consumer=e};Pt.createElement=S2;Pt.createFactory=function(e){var t=S2.bind(null,e);return t.type=e,t};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(e){return{$$typeof:fS,render:e}};Pt.isValidElement=Fp;Pt.lazy=function(e){return{$$typeof:gS,_payload:{_status:-1,_result:e},_init:vS}};Pt.memo=function(e,t){return{$$typeof:mS,type:e,compare:t===void 0?null:t}};Pt.startTransition=function(e){var t=qu.transition;qu.transition={};try{e()}finally{qu.transition=t}};Pt.unstable_act=A2;Pt.useCallback=function(e,t){return Or.current.useCallback(e,t)};Pt.useContext=function(e){return Or.current.useContext(e)};Pt.useDebugValue=function(){};Pt.useDeferredValue=function(e){return Or.current.useDeferredValue(e)};Pt.useEffect=function(e,t){return Or.current.useEffect(e,t)};Pt.useId=function(){return Or.current.useId()};Pt.useImperativeHandle=function(e,t,n){return Or.current.useImperativeHandle(e,t,n)};Pt.useInsertionEffect=function(e,t){return Or.current.useInsertionEffect(e,t)};Pt.useLayoutEffect=function(e,t){return Or.current.useLayoutEffect(e,t)};Pt.useMemo=function(e,t){return Or.current.useMemo(e,t)};Pt.useReducer=function(e,t,n){return Or.current.useReducer(e,t,n)};Pt.useRef=function(e){return Or.current.useRef(e)};Pt.useState=function(e){return Or.current.useState(e)};Pt.useSyncExternalStore=function(e,t,n){return Or.current.useSyncExternalStore(e,t,n)};Pt.useTransition=function(){return Or.current.useTransition()};Pt.version="18.3.1";x2.exports=Pt;var O=x2.exports;const ca=m2(O),bS=oS({__proto__:null,default:ca},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CS=O,SS=Symbol.for("react.element"),AS=Symbol.for("react.fragment"),ES=Object.prototype.hasOwnProperty,NS=CS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TS={key:!0,ref:!0,__self:!0,__source:!0};function E2(e,t,n){var i,a={},c=null,f=null;n!==void 0&&(c=""+n),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(f=t.ref);for(i in t)ES.call(t,i)&&!TS.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:SS,type:e,key:c,ref:f,props:a,_owner:NS.current}}hh.Fragment=AS;hh.jsx=E2;hh.jsxs=E2;g2.exports=hh;var m=g2.exports,o0={},N2={exports:{}},ai={},T2={exports:{}},I2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ie,Ae){var ve=ie.length;ie.push(Ae);e:for(;0<ve;){var xe=ve-1>>>1,Le=ie[xe];if(0<a(Le,Ae))ie[xe]=Ae,ie[ve]=Le,ve=xe;else break e}}function n(ie){return ie.length===0?null:ie[0]}function i(ie){if(ie.length===0)return null;var Ae=ie[0],ve=ie.pop();if(ve!==Ae){ie[0]=ve;e:for(var xe=0,Le=ie.length,Ke=Le>>>1;xe<Ke;){var Fe=2*(xe+1)-1,ne=ie[Fe],ae=Fe+1,je=ie[ae];if(0>a(ne,ve))ae<Le&&0>a(je,ne)?(ie[xe]=je,ie[ae]=ve,xe=ae):(ie[xe]=ne,ie[Fe]=ve,xe=Fe);else if(ae<Le&&0>a(je,ve))ie[xe]=je,ie[ae]=ve,xe=ae;else break e}}return Ae}function a(ie,Ae){var ve=ie.sortIndex-Ae.sortIndex;return ve!==0?ve:ie.id-Ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var f=Date,g=f.now();e.unstable_now=function(){return f.now()-g}}var v=[],y=[],C=1,b=null,T=3,I=!1,z=!1,R=!1,B=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(ie){for(var Ae=n(y);Ae!==null;){if(Ae.callback===null)i(y);else if(Ae.startTime<=ie)i(y),Ae.sortIndex=Ae.expirationTime,t(v,Ae);else break;Ae=n(y)}}function G(ie){if(R=!1,k(ie),!z)if(n(v)!==null)z=!0,le(K);else{var Ae=n(y);Ae!==null&&ke(G,Ae.startTime-ie)}}function K(ie,Ae){z=!1,R&&(R=!1,F(ee),ee=-1),I=!0;var ve=T;try{for(k(Ae),b=n(v);b!==null&&(!(b.expirationTime>Ae)||ie&&!$());){var xe=b.callback;if(typeof xe=="function"){b.callback=null,T=b.priorityLevel;var Le=xe(b.expirationTime<=Ae);Ae=e.unstable_now(),typeof Le=="function"?b.callback=Le:b===n(v)&&i(v),k(Ae)}else i(v);b=n(v)}if(b!==null)var Ke=!0;else{var Fe=n(y);Fe!==null&&ke(G,Fe.startTime-Ae),Ke=!1}return Ke}finally{b=null,T=ve,I=!1}}var q=!1,Y=null,ee=-1,M=5,H=-1;function $(){return!(e.unstable_now()-H<M)}function se(){if(Y!==null){var ie=e.unstable_now();H=ie;var Ae=!0;try{Ae=Y(!0,ie)}finally{Ae?be():(q=!1,Y=null)}}else q=!1}var be;if(typeof P=="function")be=function(){P(se)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,oe=Ne.port2;Ne.port1.onmessage=se,be=function(){oe.postMessage(null)}}else be=function(){B(se,0)};function le(ie){Y=ie,q||(q=!0,be())}function ke(ie,Ae){ee=B(function(){ie(e.unstable_now())},Ae)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ie){ie.callback=null},e.unstable_continueExecution=function(){z||I||(z=!0,le(K))},e.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ie?Math.floor(1e3/ie):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return n(v)},e.unstable_next=function(ie){switch(T){case 1:case 2:case 3:var Ae=3;break;default:Ae=T}var ve=T;T=Ae;try{return ie()}finally{T=ve}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ie,Ae){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ve=T;T=ie;try{return Ae()}finally{T=ve}},e.unstable_scheduleCallback=function(ie,Ae,ve){var xe=e.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?xe+ve:xe):ve=xe,ie){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=ve+Le,ie={id:C++,callback:Ae,priorityLevel:ie,startTime:ve,expirationTime:Le,sortIndex:-1},ve>xe?(ie.sortIndex=ve,t(y,ie),n(v)===null&&ie===n(y)&&(R?(F(ee),ee=-1):R=!0,ke(G,ve-xe))):(ie.sortIndex=Le,t(v,ie),z||I||(z=!0,le(K))),ie},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(ie){var Ae=T;return function(){var ve=T;T=Ae;try{return ie.apply(this,arguments)}finally{T=ve}}}})(I2);T2.exports=I2;var IS=T2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kS=O,si=IS;function Oe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var k2=new Set,_c={};function ga(e,t){sl(e,t),sl(e+"Capture",t)}function sl(e,t){for(_c[e]=t,e=0;e<t.length;e++)k2.add(t[e])}var Es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),a0=Object.prototype.hasOwnProperty,MS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jm={},eg={};function RS(e){return a0.call(eg,e)?!0:a0.call(Jm,e)?!1:MS.test(e)?eg[e]=!0:(Jm[e]=!0,!1)}function OS(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function LS(e,t,n,i){if(t===null||typeof t>"u"||OS(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Lr(e,t,n,i,a,c,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=c,this.removeEmptyString=f}var cr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){cr[e]=new Lr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];cr[t]=new Lr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){cr[e]=new Lr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){cr[e]=new Lr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){cr[e]=new Lr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){cr[e]=new Lr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){cr[e]=new Lr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){cr[e]=new Lr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){cr[e]=new Lr(e,5,!1,e.toLowerCase(),null,!1,!1)});var zp=/[\-:]([a-z])/g;function Up(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(zp,Up);cr[t]=new Lr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(zp,Up);cr[t]=new Lr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(zp,Up);cr[t]=new Lr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){cr[e]=new Lr(e,1,!1,e.toLowerCase(),null,!1,!1)});cr.xlinkHref=new Lr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){cr[e]=new Lr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Vp(e,t,n,i){var a=cr.hasOwnProperty(t)?cr[t]:null;(a!==null?a.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(LS(t,n,a,i)&&(n=null),i||a===null?RS(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,i=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var Ps=kS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bu=Symbol.for("react.element"),Oa=Symbol.for("react.portal"),La=Symbol.for("react.fragment"),Hp=Symbol.for("react.strict_mode"),l0=Symbol.for("react.profiler"),M2=Symbol.for("react.provider"),R2=Symbol.for("react.context"),Wp=Symbol.for("react.forward_ref"),c0=Symbol.for("react.suspense"),u0=Symbol.for("react.suspense_list"),Gp=Symbol.for("react.memo"),Ks=Symbol.for("react.lazy"),O2=Symbol.for("react.offscreen"),tg=Symbol.iterator;function Fl(e){return e===null||typeof e!="object"?null:(e=tg&&e[tg]||e["@@iterator"],typeof e=="function"?e:null)}var Tn=Object.assign,uf;function $l(e){if(uf===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);uf=t&&t[1]||""}return`
`+uf+e}var df=!1;function hf(e,t){if(!e||df)return"";df=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(y){var i=y}Reflect.construct(e,[],t)}else{try{t.call()}catch(y){i=y}e.call(t.prototype)}else{try{throw Error()}catch(y){i=y}e()}}catch(y){if(y&&i&&typeof y.stack=="string"){for(var a=y.stack.split(`
`),c=i.stack.split(`
`),f=a.length-1,g=c.length-1;1<=f&&0<=g&&a[f]!==c[g];)g--;for(;1<=f&&0<=g;f--,g--)if(a[f]!==c[g]){if(f!==1||g!==1)do if(f--,g--,0>g||a[f]!==c[g]){var v=`
`+a[f].replace(" at new "," at ");return e.displayName&&v.includes("<anonymous>")&&(v=v.replace("<anonymous>",e.displayName)),v}while(1<=f&&0<=g);break}}}finally{df=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?$l(e):""}function PS(e){switch(e.tag){case 5:return $l(e.type);case 16:return $l("Lazy");case 13:return $l("Suspense");case 19:return $l("SuspenseList");case 0:case 2:case 15:return e=hf(e.type,!1),e;case 11:return e=hf(e.type.render,!1),e;case 1:return e=hf(e.type,!0),e;default:return""}}function d0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case La:return"Fragment";case Oa:return"Portal";case l0:return"Profiler";case Hp:return"StrictMode";case c0:return"Suspense";case u0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case R2:return(e.displayName||"Context")+".Consumer";case M2:return(e._context.displayName||"Context")+".Provider";case Wp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Gp:return t=e.displayName||null,t!==null?t:d0(e.type)||"Memo";case Ks:t=e._payload,e=e._init;try{return d0(e(t))}catch{}}return null}function DS(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return d0(t);case 8:return t===Hp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _o(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function L2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function jS(e){var t=L2(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,c=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(f){i=""+f,c.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Cu(e){e._valueTracker||(e._valueTracker=jS(e))}function P2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=L2(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function pd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function h0(e,t){var n=t.checked;return Tn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ng(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=_o(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function D2(e,t){t=t.checked,t!=null&&Vp(e,"checked",t,!1)}function f0(e,t){D2(e,t);var n=_o(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?p0(e,t.type,n):t.hasOwnProperty("defaultValue")&&p0(e,t.type,_o(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function p0(e,t,n){(t!=="number"||pd(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Jl=Array.isArray;function Ja(e,t,n,i){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&i&&(e[n].defaultSelected=!0)}else{for(n=""+_o(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function m0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Oe(91));return Tn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ig(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Oe(92));if(Jl(n)){if(1<n.length)throw Error(Oe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:_o(n)}}function j2(e,t){var n=_o(t.value),i=_o(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function sg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function B2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function g0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?B2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Su,F2=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Su=Su||document.createElement("div"),Su.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Su.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function bc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ic={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BS=["Webkit","ms","Moz","O"];Object.keys(ic).forEach(function(e){BS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ic[t]=ic[e]})});function z2(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ic.hasOwnProperty(e)&&ic[e]?(""+t).trim():t+"px"}function U2(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,a=z2(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,a):e[n]=a}}var FS=Tn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function x0(e,t){if(t){if(FS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Oe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Oe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Oe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Oe(62))}}function y0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var w0=null;function Zp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var v0=null,el=null,tl=null;function og(e){if(e=$c(e)){if(typeof v0!="function")throw Error(Oe(280));var t=e.stateNode;t&&(t=xh(t),v0(e.stateNode,e.type,t))}}function V2(e){el?tl?tl.push(e):tl=[e]:el=e}function H2(){if(el){var e=el,t=tl;if(tl=el=null,og(e),t)for(e=0;e<t.length;e++)og(t[e])}}function W2(e,t){return e(t)}function G2(){}var ff=!1;function Z2(e,t,n){if(ff)return e(t,n);ff=!0;try{return W2(e,t,n)}finally{ff=!1,(el!==null||tl!==null)&&(G2(),H2())}}function Cc(e,t){var n=e.stateNode;if(n===null)return null;var i=xh(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Oe(231,t,typeof n));return n}var _0=!1;if(Es)try{var zl={};Object.defineProperty(zl,"passive",{get:function(){_0=!0}}),window.addEventListener("test",zl,zl),window.removeEventListener("test",zl,zl)}catch{_0=!1}function zS(e,t,n,i,a,c,f,g,v){var y=Array.prototype.slice.call(arguments,3);try{t.apply(n,y)}catch(C){this.onError(C)}}var sc=!1,md=null,gd=!1,b0=null,US={onError:function(e){sc=!0,md=e}};function VS(e,t,n,i,a,c,f,g,v){sc=!1,md=null,zS.apply(US,arguments)}function HS(e,t,n,i,a,c,f,g,v){if(VS.apply(this,arguments),sc){if(sc){var y=md;sc=!1,md=null}else throw Error(Oe(198));gd||(gd=!0,b0=y)}}function xa(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Y2(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ag(e){if(xa(e)!==e)throw Error(Oe(188))}function WS(e){var t=e.alternate;if(!t){if(t=xa(e),t===null)throw Error(Oe(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(a===null)break;var c=a.alternate;if(c===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===n)return ag(a),e;if(c===i)return ag(a),t;c=c.sibling}throw Error(Oe(188))}if(n.return!==i.return)n=a,i=c;else{for(var f=!1,g=a.child;g;){if(g===n){f=!0,n=a,i=c;break}if(g===i){f=!0,i=a,n=c;break}g=g.sibling}if(!f){for(g=c.child;g;){if(g===n){f=!0,n=c,i=a;break}if(g===i){f=!0,i=c,n=a;break}g=g.sibling}if(!f)throw Error(Oe(189))}}if(n.alternate!==i)throw Error(Oe(190))}if(n.tag!==3)throw Error(Oe(188));return n.stateNode.current===n?e:t}function X2(e){return e=WS(e),e!==null?q2(e):null}function q2(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=q2(e);if(t!==null)return t;e=e.sibling}return null}var K2=si.unstable_scheduleCallback,lg=si.unstable_cancelCallback,GS=si.unstable_shouldYield,ZS=si.unstable_requestPaint,Ln=si.unstable_now,YS=si.unstable_getCurrentPriorityLevel,Yp=si.unstable_ImmediatePriority,Q2=si.unstable_UserBlockingPriority,xd=si.unstable_NormalPriority,XS=si.unstable_LowPriority,$2=si.unstable_IdlePriority,fh=null,rs=null;function qS(e){if(rs&&typeof rs.onCommitFiberRoot=="function")try{rs.onCommitFiberRoot(fh,e,void 0,(e.current.flags&128)===128)}catch{}}var Vi=Math.clz32?Math.clz32:$S,KS=Math.log,QS=Math.LN2;function $S(e){return e>>>=0,e===0?32:31-(KS(e)/QS|0)|0}var Au=64,Eu=4194304;function ec(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function yd(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,a=e.suspendedLanes,c=e.pingedLanes,f=n&268435455;if(f!==0){var g=f&~a;g!==0?i=ec(g):(c&=f,c!==0&&(i=ec(c)))}else f=n&~a,f!==0?i=ec(f):c!==0&&(i=ec(c));if(i===0)return 0;if(t!==0&&t!==i&&!(t&a)&&(a=i&-i,c=t&-t,a>=c||a===16&&(c&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-Vi(t),a=1<<n,i|=e[n],t&=~a;return i}function JS(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function e3(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,c=e.pendingLanes;0<c;){var f=31-Vi(c),g=1<<f,v=a[f];v===-1?(!(g&n)||g&i)&&(a[f]=JS(g,t)):v<=t&&(e.expiredLanes|=g),c&=~g}}function C0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function J2(){var e=Au;return Au<<=1,!(Au&4194240)&&(Au=64),e}function pf(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Kc(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Vi(t),e[t]=n}function t3(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Vi(n),c=1<<a;t[a]=0,i[a]=-1,e[a]=-1,n&=~c}}function Xp(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Vi(n),a=1<<i;a&t|e[i]&t&&(e[i]|=t),n&=~a}}var nn=0;function ew(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var tw,qp,nw,rw,iw,S0=!1,Nu=[],ao=null,lo=null,co=null,Sc=new Map,Ac=new Map,to=[],n3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cg(e,t){switch(e){case"focusin":case"focusout":ao=null;break;case"dragenter":case"dragleave":lo=null;break;case"mouseover":case"mouseout":co=null;break;case"pointerover":case"pointerout":Sc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ac.delete(t.pointerId)}}function Ul(e,t,n,i,a,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:c,targetContainers:[a]},t!==null&&(t=$c(t),t!==null&&qp(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function r3(e,t,n,i,a){switch(t){case"focusin":return ao=Ul(ao,e,t,n,i,a),!0;case"dragenter":return lo=Ul(lo,e,t,n,i,a),!0;case"mouseover":return co=Ul(co,e,t,n,i,a),!0;case"pointerover":var c=a.pointerId;return Sc.set(c,Ul(Sc.get(c)||null,e,t,n,i,a)),!0;case"gotpointercapture":return c=a.pointerId,Ac.set(c,Ul(Ac.get(c)||null,e,t,n,i,a)),!0}return!1}function sw(e){var t=$o(e.target);if(t!==null){var n=xa(t);if(n!==null){if(t=n.tag,t===13){if(t=Y2(n),t!==null){e.blockedOn=t,iw(e.priority,function(){nw(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ku(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=A0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);w0=i,n.target.dispatchEvent(i),w0=null}else return t=$c(n),t!==null&&qp(t),e.blockedOn=n,!1;t.shift()}return!0}function ug(e,t,n){Ku(e)&&n.delete(t)}function i3(){S0=!1,ao!==null&&Ku(ao)&&(ao=null),lo!==null&&Ku(lo)&&(lo=null),co!==null&&Ku(co)&&(co=null),Sc.forEach(ug),Ac.forEach(ug)}function Vl(e,t){e.blockedOn===t&&(e.blockedOn=null,S0||(S0=!0,si.unstable_scheduleCallback(si.unstable_NormalPriority,i3)))}function Ec(e){function t(a){return Vl(a,e)}if(0<Nu.length){Vl(Nu[0],e);for(var n=1;n<Nu.length;n++){var i=Nu[n];i.blockedOn===e&&(i.blockedOn=null)}}for(ao!==null&&Vl(ao,e),lo!==null&&Vl(lo,e),co!==null&&Vl(co,e),Sc.forEach(t),Ac.forEach(t),n=0;n<to.length;n++)i=to[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<to.length&&(n=to[0],n.blockedOn===null);)sw(n),n.blockedOn===null&&to.shift()}var nl=Ps.ReactCurrentBatchConfig,wd=!0;function s3(e,t,n,i){var a=nn,c=nl.transition;nl.transition=null;try{nn=1,Kp(e,t,n,i)}finally{nn=a,nl.transition=c}}function o3(e,t,n,i){var a=nn,c=nl.transition;nl.transition=null;try{nn=4,Kp(e,t,n,i)}finally{nn=a,nl.transition=c}}function Kp(e,t,n,i){if(wd){var a=A0(e,t,n,i);if(a===null)Sf(e,t,i,vd,n),cg(e,i);else if(r3(a,e,t,n,i))i.stopPropagation();else if(cg(e,i),t&4&&-1<n3.indexOf(e)){for(;a!==null;){var c=$c(a);if(c!==null&&tw(c),c=A0(e,t,n,i),c===null&&Sf(e,t,i,vd,n),c===a)break;a=c}a!==null&&i.stopPropagation()}else Sf(e,t,i,null,n)}}var vd=null;function A0(e,t,n,i){if(vd=null,e=Zp(i),e=$o(e),e!==null)if(t=xa(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Y2(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vd=e,null}function ow(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YS()){case Yp:return 1;case Q2:return 4;case xd:case XS:return 16;case $2:return 536870912;default:return 16}default:return 16}}var io=null,Qp=null,Qu=null;function aw(){if(Qu)return Qu;var e,t=Qp,n=t.length,i,a="value"in io?io.value:io.textContent,c=a.length;for(e=0;e<n&&t[e]===a[e];e++);var f=n-e;for(i=1;i<=f&&t[n-i]===a[c-i];i++);return Qu=a.slice(e,1<i?1-i:void 0)}function $u(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Tu(){return!0}function dg(){return!1}function li(e){function t(n,i,a,c,f){this._reactName=n,this._targetInst=a,this.type=i,this.nativeEvent=c,this.target=f,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(n=e[g],this[g]=n?n(c):c[g]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Tu:dg,this.isPropagationStopped=dg,this}return Tn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Tu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Tu)},persist:function(){},isPersistent:Tu}),t}var yl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$p=li(yl),Qc=Tn({},yl,{view:0,detail:0}),a3=li(Qc),mf,gf,Hl,ph=Tn({},Qc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hl&&(Hl&&e.type==="mousemove"?(mf=e.screenX-Hl.screenX,gf=e.screenY-Hl.screenY):gf=mf=0,Hl=e),mf)},movementY:function(e){return"movementY"in e?e.movementY:gf}}),hg=li(ph),l3=Tn({},ph,{dataTransfer:0}),c3=li(l3),u3=Tn({},Qc,{relatedTarget:0}),xf=li(u3),d3=Tn({},yl,{animationName:0,elapsedTime:0,pseudoElement:0}),h3=li(d3),f3=Tn({},yl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),p3=li(f3),m3=Tn({},yl,{data:0}),fg=li(m3),g3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},x3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function w3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=y3[e])?!!t[e]:!1}function Jp(){return w3}var v3=Tn({},Qc,{key:function(e){if(e.key){var t=g3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=$u(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?x3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jp,charCode:function(e){return e.type==="keypress"?$u(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$u(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_3=li(v3),b3=Tn({},ph,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pg=li(b3),C3=Tn({},Qc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jp}),S3=li(C3),A3=Tn({},yl,{propertyName:0,elapsedTime:0,pseudoElement:0}),E3=li(A3),N3=Tn({},ph,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),T3=li(N3),I3=[9,13,27,32],e1=Es&&"CompositionEvent"in window,oc=null;Es&&"documentMode"in document&&(oc=document.documentMode);var k3=Es&&"TextEvent"in window&&!oc,lw=Es&&(!e1||oc&&8<oc&&11>=oc),mg=" ",gg=!1;function cw(e,t){switch(e){case"keyup":return I3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uw(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pa=!1;function M3(e,t){switch(e){case"compositionend":return uw(t);case"keypress":return t.which!==32?null:(gg=!0,mg);case"textInput":return e=t.data,e===mg&&gg?null:e;default:return null}}function R3(e,t){if(Pa)return e==="compositionend"||!e1&&cw(e,t)?(e=aw(),Qu=Qp=io=null,Pa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lw&&t.locale!=="ko"?null:t.data;default:return null}}var O3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!O3[e.type]:t==="textarea"}function dw(e,t,n,i){V2(i),t=_d(t,"onChange"),0<t.length&&(n=new $p("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var ac=null,Nc=null;function L3(e){bw(e,0)}function mh(e){var t=Ba(e);if(P2(t))return e}function P3(e,t){if(e==="change")return t}var hw=!1;if(Es){var yf;if(Es){var wf="oninput"in document;if(!wf){var yg=document.createElement("div");yg.setAttribute("oninput","return;"),wf=typeof yg.oninput=="function"}yf=wf}else yf=!1;hw=yf&&(!document.documentMode||9<document.documentMode)}function wg(){ac&&(ac.detachEvent("onpropertychange",fw),Nc=ac=null)}function fw(e){if(e.propertyName==="value"&&mh(Nc)){var t=[];dw(t,Nc,e,Zp(e)),Z2(L3,t)}}function D3(e,t,n){e==="focusin"?(wg(),ac=t,Nc=n,ac.attachEvent("onpropertychange",fw)):e==="focusout"&&wg()}function j3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mh(Nc)}function B3(e,t){if(e==="click")return mh(t)}function F3(e,t){if(e==="input"||e==="change")return mh(t)}function z3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wi=typeof Object.is=="function"?Object.is:z3;function Tc(e,t){if(Wi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!a0.call(t,a)||!Wi(e[a],t[a]))return!1}return!0}function vg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _g(e,t){var n=vg(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vg(n)}}function pw(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?pw(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function mw(){for(var e=window,t=pd();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=pd(e.document)}return t}function t1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function U3(e){var t=mw(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&pw(n.ownerDocument.documentElement,n)){if(i!==null&&t1(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,c=Math.min(i.start,a);i=i.end===void 0?c:Math.min(i.end,a),!e.extend&&c>i&&(a=i,i=c,c=a),a=_g(n,c);var f=_g(n,i);a&&f&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),c>i?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var V3=Es&&"documentMode"in document&&11>=document.documentMode,Da=null,E0=null,lc=null,N0=!1;function bg(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;N0||Da==null||Da!==pd(i)||(i=Da,"selectionStart"in i&&t1(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),lc&&Tc(lc,i)||(lc=i,i=_d(E0,"onSelect"),0<i.length&&(t=new $p("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Da)))}function Iu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ja={animationend:Iu("Animation","AnimationEnd"),animationiteration:Iu("Animation","AnimationIteration"),animationstart:Iu("Animation","AnimationStart"),transitionend:Iu("Transition","TransitionEnd")},vf={},gw={};Es&&(gw=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);function gh(e){if(vf[e])return vf[e];if(!ja[e])return e;var t=ja[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in gw)return vf[e]=t[n];return e}var xw=gh("animationend"),yw=gh("animationiteration"),ww=gh("animationstart"),vw=gh("transitionend"),_w=new Map,Cg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Eo(e,t){_w.set(e,t),ga(t,[e])}for(var _f=0;_f<Cg.length;_f++){var bf=Cg[_f],H3=bf.toLowerCase(),W3=bf[0].toUpperCase()+bf.slice(1);Eo(H3,"on"+W3)}Eo(xw,"onAnimationEnd");Eo(yw,"onAnimationIteration");Eo(ww,"onAnimationStart");Eo("dblclick","onDoubleClick");Eo("focusin","onFocus");Eo("focusout","onBlur");Eo(vw,"onTransitionEnd");sl("onMouseEnter",["mouseout","mouseover"]);sl("onMouseLeave",["mouseout","mouseover"]);sl("onPointerEnter",["pointerout","pointerover"]);sl("onPointerLeave",["pointerout","pointerover"]);ga("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ga("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ga("onBeforeInput",["compositionend","keypress","textInput","paste"]);ga("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ga("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ga("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G3=new Set("cancel close invalid load scroll toggle".split(" ").concat(tc));function Sg(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,HS(i,t,void 0,e),e.currentTarget=null}function bw(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],a=i.event;i=i.listeners;e:{var c=void 0;if(t)for(var f=i.length-1;0<=f;f--){var g=i[f],v=g.instance,y=g.currentTarget;if(g=g.listener,v!==c&&a.isPropagationStopped())break e;Sg(a,g,y),c=v}else for(f=0;f<i.length;f++){if(g=i[f],v=g.instance,y=g.currentTarget,g=g.listener,v!==c&&a.isPropagationStopped())break e;Sg(a,g,y),c=v}}}if(gd)throw e=b0,gd=!1,b0=null,e}function gn(e,t){var n=t[R0];n===void 0&&(n=t[R0]=new Set);var i=e+"__bubble";n.has(i)||(Cw(t,e,2,!1),n.add(i))}function Cf(e,t,n){var i=0;t&&(i|=4),Cw(n,e,i,t)}var ku="_reactListening"+Math.random().toString(36).slice(2);function Ic(e){if(!e[ku]){e[ku]=!0,k2.forEach(function(n){n!=="selectionchange"&&(G3.has(n)||Cf(n,!1,e),Cf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ku]||(t[ku]=!0,Cf("selectionchange",!1,t))}}function Cw(e,t,n,i){switch(ow(t)){case 1:var a=s3;break;case 4:a=o3;break;default:a=Kp}n=a.bind(null,t,n,e),a=void 0,!_0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Sf(e,t,n,i,a){var c=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var g=i.stateNode.containerInfo;if(g===a||g.nodeType===8&&g.parentNode===a)break;if(f===4)for(f=i.return;f!==null;){var v=f.tag;if((v===3||v===4)&&(v=f.stateNode.containerInfo,v===a||v.nodeType===8&&v.parentNode===a))return;f=f.return}for(;g!==null;){if(f=$o(g),f===null)return;if(v=f.tag,v===5||v===6){i=c=f;continue e}g=g.parentNode}}i=i.return}Z2(function(){var y=c,C=Zp(n),b=[];e:{var T=_w.get(e);if(T!==void 0){var I=$p,z=e;switch(e){case"keypress":if($u(n)===0)break e;case"keydown":case"keyup":I=_3;break;case"focusin":z="focus",I=xf;break;case"focusout":z="blur",I=xf;break;case"beforeblur":case"afterblur":I=xf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=hg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=c3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=S3;break;case xw:case yw:case ww:I=h3;break;case vw:I=E3;break;case"scroll":I=a3;break;case"wheel":I=T3;break;case"copy":case"cut":case"paste":I=p3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=pg}var R=(t&4)!==0,B=!R&&e==="scroll",F=R?T!==null?T+"Capture":null:T;R=[];for(var P=y,k;P!==null;){k=P;var G=k.stateNode;if(k.tag===5&&G!==null&&(k=G,F!==null&&(G=Cc(P,F),G!=null&&R.push(kc(P,G,k)))),B)break;P=P.return}0<R.length&&(T=new I(T,z,null,n,C),b.push({event:T,listeners:R}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",T&&n!==w0&&(z=n.relatedTarget||n.fromElement)&&($o(z)||z[Ns]))break e;if((I||T)&&(T=C.window===C?C:(T=C.ownerDocument)?T.defaultView||T.parentWindow:window,I?(z=n.relatedTarget||n.toElement,I=y,z=z?$o(z):null,z!==null&&(B=xa(z),z!==B||z.tag!==5&&z.tag!==6)&&(z=null)):(I=null,z=y),I!==z)){if(R=hg,G="onMouseLeave",F="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(R=pg,G="onPointerLeave",F="onPointerEnter",P="pointer"),B=I==null?T:Ba(I),k=z==null?T:Ba(z),T=new R(G,P+"leave",I,n,C),T.target=B,T.relatedTarget=k,G=null,$o(C)===y&&(R=new R(F,P+"enter",z,n,C),R.target=k,R.relatedTarget=B,G=R),B=G,I&&z)t:{for(R=I,F=z,P=0,k=R;k;k=ka(k))P++;for(k=0,G=F;G;G=ka(G))k++;for(;0<P-k;)R=ka(R),P--;for(;0<k-P;)F=ka(F),k--;for(;P--;){if(R===F||F!==null&&R===F.alternate)break t;R=ka(R),F=ka(F)}R=null}else R=null;I!==null&&Ag(b,T,I,R,!1),z!==null&&B!==null&&Ag(b,B,z,R,!0)}}e:{if(T=y?Ba(y):window,I=T.nodeName&&T.nodeName.toLowerCase(),I==="select"||I==="input"&&T.type==="file")var K=P3;else if(xg(T))if(hw)K=F3;else{K=j3;var q=D3}else(I=T.nodeName)&&I.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(K=B3);if(K&&(K=K(e,y))){dw(b,K,n,C);break e}q&&q(e,T,y),e==="focusout"&&(q=T._wrapperState)&&q.controlled&&T.type==="number"&&p0(T,"number",T.value)}switch(q=y?Ba(y):window,e){case"focusin":(xg(q)||q.contentEditable==="true")&&(Da=q,E0=y,lc=null);break;case"focusout":lc=E0=Da=null;break;case"mousedown":N0=!0;break;case"contextmenu":case"mouseup":case"dragend":N0=!1,bg(b,n,C);break;case"selectionchange":if(V3)break;case"keydown":case"keyup":bg(b,n,C)}var Y;if(e1)e:{switch(e){case"compositionstart":var ee="onCompositionStart";break e;case"compositionend":ee="onCompositionEnd";break e;case"compositionupdate":ee="onCompositionUpdate";break e}ee=void 0}else Pa?cw(e,n)&&(ee="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ee="onCompositionStart");ee&&(lw&&n.locale!=="ko"&&(Pa||ee!=="onCompositionStart"?ee==="onCompositionEnd"&&Pa&&(Y=aw()):(io=C,Qp="value"in io?io.value:io.textContent,Pa=!0)),q=_d(y,ee),0<q.length&&(ee=new fg(ee,e,null,n,C),b.push({event:ee,listeners:q}),Y?ee.data=Y:(Y=uw(n),Y!==null&&(ee.data=Y)))),(Y=k3?M3(e,n):R3(e,n))&&(y=_d(y,"onBeforeInput"),0<y.length&&(C=new fg("onBeforeInput","beforeinput",null,n,C),b.push({event:C,listeners:y}),C.data=Y))}bw(b,t)})}function kc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function _d(e,t){for(var n=t+"Capture",i=[];e!==null;){var a=e,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=Cc(e,n),c!=null&&i.unshift(kc(e,c,a)),c=Cc(e,t),c!=null&&i.push(kc(e,c,a))),e=e.return}return i}function ka(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ag(e,t,n,i,a){for(var c=t._reactName,f=[];n!==null&&n!==i;){var g=n,v=g.alternate,y=g.stateNode;if(v!==null&&v===i)break;g.tag===5&&y!==null&&(g=y,a?(v=Cc(n,c),v!=null&&f.unshift(kc(n,v,g))):a||(v=Cc(n,c),v!=null&&f.push(kc(n,v,g)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var Z3=/\r\n?/g,Y3=/\u0000|\uFFFD/g;function Eg(e){return(typeof e=="string"?e:""+e).replace(Z3,`
`).replace(Y3,"")}function Mu(e,t,n){if(t=Eg(t),Eg(e)!==t&&n)throw Error(Oe(425))}function bd(){}var T0=null,I0=null;function k0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var M0=typeof setTimeout=="function"?setTimeout:void 0,X3=typeof clearTimeout=="function"?clearTimeout:void 0,Ng=typeof Promise=="function"?Promise:void 0,q3=typeof queueMicrotask=="function"?queueMicrotask:typeof Ng<"u"?function(e){return Ng.resolve(null).then(e).catch(K3)}:M0;function K3(e){setTimeout(function(){throw e})}function Af(e,t){var n=t,i=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(i===0){e.removeChild(a),Ec(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=a}while(n);Ec(t)}function uo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Tg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var wl=Math.random().toString(36).slice(2),ns="__reactFiber$"+wl,Mc="__reactProps$"+wl,Ns="__reactContainer$"+wl,R0="__reactEvents$"+wl,Q3="__reactListeners$"+wl,$3="__reactHandles$"+wl;function $o(e){var t=e[ns];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ns]||n[ns]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Tg(e);e!==null;){if(n=e[ns])return n;e=Tg(e)}return t}e=n,n=e.parentNode}return null}function $c(e){return e=e[ns]||e[Ns],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ba(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Oe(33))}function xh(e){return e[Mc]||null}var O0=[],Fa=-1;function No(e){return{current:e}}function xn(e){0>Fa||(e.current=O0[Fa],O0[Fa]=null,Fa--)}function dn(e,t){Fa++,O0[Fa]=e.current,e.current=t}var bo={},vr=No(bo),Ur=No(!1),ua=bo;function ol(e,t){var n=e.type.contextTypes;if(!n)return bo;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in n)a[c]=t[c];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Vr(e){return e=e.childContextTypes,e!=null}function Cd(){xn(Ur),xn(vr)}function Ig(e,t,n){if(vr.current!==bo)throw Error(Oe(168));dn(vr,t),dn(Ur,n)}function Sw(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var a in i)if(!(a in t))throw Error(Oe(108,DS(e)||"Unknown",a));return Tn({},n,i)}function Sd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||bo,ua=vr.current,dn(vr,e),dn(Ur,Ur.current),!0}function kg(e,t,n){var i=e.stateNode;if(!i)throw Error(Oe(169));n?(e=Sw(e,t,ua),i.__reactInternalMemoizedMergedChildContext=e,xn(Ur),xn(vr),dn(vr,e)):xn(Ur),dn(Ur,n)}var xs=null,yh=!1,Ef=!1;function Aw(e){xs===null?xs=[e]:xs.push(e)}function J3(e){yh=!0,Aw(e)}function To(){if(!Ef&&xs!==null){Ef=!0;var e=0,t=nn;try{var n=xs;for(nn=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}xs=null,yh=!1}catch(a){throw xs!==null&&(xs=xs.slice(e+1)),K2(Yp,To),a}finally{nn=t,Ef=!1}}return null}var za=[],Ua=0,Ad=null,Ed=0,Si=[],Ai=0,da=null,ys=1,ws="";function Zo(e,t){za[Ua++]=Ed,za[Ua++]=Ad,Ad=e,Ed=t}function Ew(e,t,n){Si[Ai++]=ys,Si[Ai++]=ws,Si[Ai++]=da,da=e;var i=ys;e=ws;var a=32-Vi(i)-1;i&=~(1<<a),n+=1;var c=32-Vi(t)+a;if(30<c){var f=a-a%5;c=(i&(1<<f)-1).toString(32),i>>=f,a-=f,ys=1<<32-Vi(t)+a|n<<a|i,ws=c+e}else ys=1<<c|n<<a|i,ws=e}function n1(e){e.return!==null&&(Zo(e,1),Ew(e,1,0))}function r1(e){for(;e===Ad;)Ad=za[--Ua],za[Ua]=null,Ed=za[--Ua],za[Ua]=null;for(;e===da;)da=Si[--Ai],Si[Ai]=null,ws=Si[--Ai],Si[Ai]=null,ys=Si[--Ai],Si[Ai]=null}var ii=null,ri=null,bn=!1,Ui=null;function Nw(e,t){var n=Ei(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Mg(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ii=e,ri=uo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ii=e,ri=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=da!==null?{id:ys,overflow:ws}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ei(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ii=e,ri=null,!0):!1;default:return!1}}function L0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function P0(e){if(bn){var t=ri;if(t){var n=t;if(!Mg(e,t)){if(L0(e))throw Error(Oe(418));t=uo(n.nextSibling);var i=ii;t&&Mg(e,t)?Nw(i,n):(e.flags=e.flags&-4097|2,bn=!1,ii=e)}}else{if(L0(e))throw Error(Oe(418));e.flags=e.flags&-4097|2,bn=!1,ii=e}}}function Rg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ii=e}function Ru(e){if(e!==ii)return!1;if(!bn)return Rg(e),bn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!k0(e.type,e.memoizedProps)),t&&(t=ri)){if(L0(e))throw Tw(),Error(Oe(418));for(;t;)Nw(e,t),t=uo(t.nextSibling)}if(Rg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Oe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ri=uo(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ri=null}}else ri=ii?uo(e.stateNode.nextSibling):null;return!0}function Tw(){for(var e=ri;e;)e=uo(e.nextSibling)}function al(){ri=ii=null,bn=!1}function i1(e){Ui===null?Ui=[e]:Ui.push(e)}var eA=Ps.ReactCurrentBatchConfig;function Wl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Oe(309));var i=n.stateNode}if(!i)throw Error(Oe(147,e));var a=i,c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(f){var g=a.refs;f===null?delete g[c]:g[c]=f},t._stringRef=c,t)}if(typeof e!="string")throw Error(Oe(284));if(!n._owner)throw Error(Oe(290,e))}return e}function Ou(e,t){throw e=Object.prototype.toString.call(t),Error(Oe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Og(e){var t=e._init;return t(e._payload)}function Iw(e){function t(F,P){if(e){var k=F.deletions;k===null?(F.deletions=[P],F.flags|=16):k.push(P)}}function n(F,P){if(!e)return null;for(;P!==null;)t(F,P),P=P.sibling;return null}function i(F,P){for(F=new Map;P!==null;)P.key!==null?F.set(P.key,P):F.set(P.index,P),P=P.sibling;return F}function a(F,P){return F=mo(F,P),F.index=0,F.sibling=null,F}function c(F,P,k){return F.index=k,e?(k=F.alternate,k!==null?(k=k.index,k<P?(F.flags|=2,P):k):(F.flags|=2,P)):(F.flags|=1048576,P)}function f(F){return e&&F.alternate===null&&(F.flags|=2),F}function g(F,P,k,G){return P===null||P.tag!==6?(P=Of(k,F.mode,G),P.return=F,P):(P=a(P,k),P.return=F,P)}function v(F,P,k,G){var K=k.type;return K===La?C(F,P,k.props.children,G,k.key):P!==null&&(P.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Ks&&Og(K)===P.type)?(G=a(P,k.props),G.ref=Wl(F,P,k),G.return=F,G):(G=sd(k.type,k.key,k.props,null,F.mode,G),G.ref=Wl(F,P,k),G.return=F,G)}function y(F,P,k,G){return P===null||P.tag!==4||P.stateNode.containerInfo!==k.containerInfo||P.stateNode.implementation!==k.implementation?(P=Lf(k,F.mode,G),P.return=F,P):(P=a(P,k.children||[]),P.return=F,P)}function C(F,P,k,G,K){return P===null||P.tag!==7?(P=ia(k,F.mode,G,K),P.return=F,P):(P=a(P,k),P.return=F,P)}function b(F,P,k){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Of(""+P,F.mode,k),P.return=F,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case bu:return k=sd(P.type,P.key,P.props,null,F.mode,k),k.ref=Wl(F,null,P),k.return=F,k;case Oa:return P=Lf(P,F.mode,k),P.return=F,P;case Ks:var G=P._init;return b(F,G(P._payload),k)}if(Jl(P)||Fl(P))return P=ia(P,F.mode,k,null),P.return=F,P;Ou(F,P)}return null}function T(F,P,k,G){var K=P!==null?P.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return K!==null?null:g(F,P,""+k,G);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case bu:return k.key===K?v(F,P,k,G):null;case Oa:return k.key===K?y(F,P,k,G):null;case Ks:return K=k._init,T(F,P,K(k._payload),G)}if(Jl(k)||Fl(k))return K!==null?null:C(F,P,k,G,null);Ou(F,k)}return null}function I(F,P,k,G,K){if(typeof G=="string"&&G!==""||typeof G=="number")return F=F.get(k)||null,g(P,F,""+G,K);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case bu:return F=F.get(G.key===null?k:G.key)||null,v(P,F,G,K);case Oa:return F=F.get(G.key===null?k:G.key)||null,y(P,F,G,K);case Ks:var q=G._init;return I(F,P,k,q(G._payload),K)}if(Jl(G)||Fl(G))return F=F.get(k)||null,C(P,F,G,K,null);Ou(P,G)}return null}function z(F,P,k,G){for(var K=null,q=null,Y=P,ee=P=0,M=null;Y!==null&&ee<k.length;ee++){Y.index>ee?(M=Y,Y=null):M=Y.sibling;var H=T(F,Y,k[ee],G);if(H===null){Y===null&&(Y=M);break}e&&Y&&H.alternate===null&&t(F,Y),P=c(H,P,ee),q===null?K=H:q.sibling=H,q=H,Y=M}if(ee===k.length)return n(F,Y),bn&&Zo(F,ee),K;if(Y===null){for(;ee<k.length;ee++)Y=b(F,k[ee],G),Y!==null&&(P=c(Y,P,ee),q===null?K=Y:q.sibling=Y,q=Y);return bn&&Zo(F,ee),K}for(Y=i(F,Y);ee<k.length;ee++)M=I(Y,F,ee,k[ee],G),M!==null&&(e&&M.alternate!==null&&Y.delete(M.key===null?ee:M.key),P=c(M,P,ee),q===null?K=M:q.sibling=M,q=M);return e&&Y.forEach(function($){return t(F,$)}),bn&&Zo(F,ee),K}function R(F,P,k,G){var K=Fl(k);if(typeof K!="function")throw Error(Oe(150));if(k=K.call(k),k==null)throw Error(Oe(151));for(var q=K=null,Y=P,ee=P=0,M=null,H=k.next();Y!==null&&!H.done;ee++,H=k.next()){Y.index>ee?(M=Y,Y=null):M=Y.sibling;var $=T(F,Y,H.value,G);if($===null){Y===null&&(Y=M);break}e&&Y&&$.alternate===null&&t(F,Y),P=c($,P,ee),q===null?K=$:q.sibling=$,q=$,Y=M}if(H.done)return n(F,Y),bn&&Zo(F,ee),K;if(Y===null){for(;!H.done;ee++,H=k.next())H=b(F,H.value,G),H!==null&&(P=c(H,P,ee),q===null?K=H:q.sibling=H,q=H);return bn&&Zo(F,ee),K}for(Y=i(F,Y);!H.done;ee++,H=k.next())H=I(Y,F,ee,H.value,G),H!==null&&(e&&H.alternate!==null&&Y.delete(H.key===null?ee:H.key),P=c(H,P,ee),q===null?K=H:q.sibling=H,q=H);return e&&Y.forEach(function(se){return t(F,se)}),bn&&Zo(F,ee),K}function B(F,P,k,G){if(typeof k=="object"&&k!==null&&k.type===La&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case bu:e:{for(var K=k.key,q=P;q!==null;){if(q.key===K){if(K=k.type,K===La){if(q.tag===7){n(F,q.sibling),P=a(q,k.props.children),P.return=F,F=P;break e}}else if(q.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Ks&&Og(K)===q.type){n(F,q.sibling),P=a(q,k.props),P.ref=Wl(F,q,k),P.return=F,F=P;break e}n(F,q);break}else t(F,q);q=q.sibling}k.type===La?(P=ia(k.props.children,F.mode,G,k.key),P.return=F,F=P):(G=sd(k.type,k.key,k.props,null,F.mode,G),G.ref=Wl(F,P,k),G.return=F,F=G)}return f(F);case Oa:e:{for(q=k.key;P!==null;){if(P.key===q)if(P.tag===4&&P.stateNode.containerInfo===k.containerInfo&&P.stateNode.implementation===k.implementation){n(F,P.sibling),P=a(P,k.children||[]),P.return=F,F=P;break e}else{n(F,P);break}else t(F,P);P=P.sibling}P=Lf(k,F.mode,G),P.return=F,F=P}return f(F);case Ks:return q=k._init,B(F,P,q(k._payload),G)}if(Jl(k))return z(F,P,k,G);if(Fl(k))return R(F,P,k,G);Ou(F,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,P!==null&&P.tag===6?(n(F,P.sibling),P=a(P,k),P.return=F,F=P):(n(F,P),P=Of(k,F.mode,G),P.return=F,F=P),f(F)):n(F,P)}return B}var ll=Iw(!0),kw=Iw(!1),Nd=No(null),Td=null,Va=null,s1=null;function o1(){s1=Va=Td=null}function a1(e){var t=Nd.current;xn(Nd),e._currentValue=t}function D0(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function rl(e,t){Td=e,s1=Va=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(zr=!0),e.firstContext=null)}function Ti(e){var t=e._currentValue;if(s1!==e)if(e={context:e,memoizedValue:t,next:null},Va===null){if(Td===null)throw Error(Oe(308));Va=e,Td.dependencies={lanes:0,firstContext:e}}else Va=Va.next=e;return t}var Jo=null;function l1(e){Jo===null?Jo=[e]:Jo.push(e)}function Mw(e,t,n,i){var a=t.interleaved;return a===null?(n.next=n,l1(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ts(e,i)}function Ts(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Qs=!1;function c1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Cs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ho(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Gt&2){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,Ts(e,n)}return a=i.interleaved,a===null?(t.next=t,l1(i)):(t.next=a.next,a.next=t),i.interleaved=t,Ts(e,n)}function Ju(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Xp(e,n)}}function Lg(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var a=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};c===null?a=c=f:c=c.next=f,n=n.next}while(n!==null);c===null?a=c=t:c=c.next=t}else a=c=t;n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Id(e,t,n,i){var a=e.updateQueue;Qs=!1;var c=a.firstBaseUpdate,f=a.lastBaseUpdate,g=a.shared.pending;if(g!==null){a.shared.pending=null;var v=g,y=v.next;v.next=null,f===null?c=y:f.next=y,f=v;var C=e.alternate;C!==null&&(C=C.updateQueue,g=C.lastBaseUpdate,g!==f&&(g===null?C.firstBaseUpdate=y:g.next=y,C.lastBaseUpdate=v))}if(c!==null){var b=a.baseState;f=0,C=y=v=null,g=c;do{var T=g.lane,I=g.eventTime;if((i&T)===T){C!==null&&(C=C.next={eventTime:I,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var z=e,R=g;switch(T=t,I=n,R.tag){case 1:if(z=R.payload,typeof z=="function"){b=z.call(I,b,T);break e}b=z;break e;case 3:z.flags=z.flags&-65537|128;case 0:if(z=R.payload,T=typeof z=="function"?z.call(I,b,T):z,T==null)break e;b=Tn({},b,T);break e;case 2:Qs=!0}}g.callback!==null&&g.lane!==0&&(e.flags|=64,T=a.effects,T===null?a.effects=[g]:T.push(g))}else I={eventTime:I,lane:T,tag:g.tag,payload:g.payload,callback:g.callback,next:null},C===null?(y=C=I,v=b):C=C.next=I,f|=T;if(g=g.next,g===null){if(g=a.shared.pending,g===null)break;T=g,g=T.next,T.next=null,a.lastBaseUpdate=T,a.shared.pending=null}}while(!0);if(C===null&&(v=b),a.baseState=v,a.firstBaseUpdate=y,a.lastBaseUpdate=C,t=a.shared.interleaved,t!==null){a=t;do f|=a.lane,a=a.next;while(a!==t)}else c===null&&(a.shared.lanes=0);fa|=f,e.lanes=f,e.memoizedState=b}}function Pg(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],a=i.callback;if(a!==null){if(i.callback=null,i=n,typeof a!="function")throw Error(Oe(191,a));a.call(i)}}}var Jc={},is=No(Jc),Rc=No(Jc),Oc=No(Jc);function ea(e){if(e===Jc)throw Error(Oe(174));return e}function u1(e,t){switch(dn(Oc,t),dn(Rc,e),dn(is,Jc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:g0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=g0(t,e)}xn(is),dn(is,t)}function cl(){xn(is),xn(Rc),xn(Oc)}function Ow(e){ea(Oc.current);var t=ea(is.current),n=g0(t,e.type);t!==n&&(dn(Rc,e),dn(is,n))}function d1(e){Rc.current===e&&(xn(is),xn(Rc))}var An=No(0);function kd(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Nf=[];function h1(){for(var e=0;e<Nf.length;e++)Nf[e]._workInProgressVersionPrimary=null;Nf.length=0}var ed=Ps.ReactCurrentDispatcher,Tf=Ps.ReactCurrentBatchConfig,ha=0,Nn=null,qn=null,ir=null,Md=!1,cc=!1,Lc=0,tA=0;function mr(){throw Error(Oe(321))}function f1(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Wi(e[n],t[n]))return!1;return!0}function p1(e,t,n,i,a,c){if(ha=c,Nn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ed.current=e===null||e.memoizedState===null?sA:oA,e=n(i,a),cc){c=0;do{if(cc=!1,Lc=0,25<=c)throw Error(Oe(301));c+=1,ir=qn=null,t.updateQueue=null,ed.current=aA,e=n(i,a)}while(cc)}if(ed.current=Rd,t=qn!==null&&qn.next!==null,ha=0,ir=qn=Nn=null,Md=!1,t)throw Error(Oe(300));return e}function m1(){var e=Lc!==0;return Lc=0,e}function es(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ir===null?Nn.memoizedState=ir=e:ir=ir.next=e,ir}function Ii(){if(qn===null){var e=Nn.alternate;e=e!==null?e.memoizedState:null}else e=qn.next;var t=ir===null?Nn.memoizedState:ir.next;if(t!==null)ir=t,qn=e;else{if(e===null)throw Error(Oe(310));qn=e,e={memoizedState:qn.memoizedState,baseState:qn.baseState,baseQueue:qn.baseQueue,queue:qn.queue,next:null},ir===null?Nn.memoizedState=ir=e:ir=ir.next=e}return ir}function Pc(e,t){return typeof t=="function"?t(e):t}function If(e){var t=Ii(),n=t.queue;if(n===null)throw Error(Oe(311));n.lastRenderedReducer=e;var i=qn,a=i.baseQueue,c=n.pending;if(c!==null){if(a!==null){var f=a.next;a.next=c.next,c.next=f}i.baseQueue=a=c,n.pending=null}if(a!==null){c=a.next,i=i.baseState;var g=f=null,v=null,y=c;do{var C=y.lane;if((ha&C)===C)v!==null&&(v=v.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),i=y.hasEagerState?y.eagerState:e(i,y.action);else{var b={lane:C,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};v===null?(g=v=b,f=i):v=v.next=b,Nn.lanes|=C,fa|=C}y=y.next}while(y!==null&&y!==c);v===null?f=i:v.next=g,Wi(i,t.memoizedState)||(zr=!0),t.memoizedState=i,t.baseState=f,t.baseQueue=v,n.lastRenderedState=i}if(e=n.interleaved,e!==null){a=e;do c=a.lane,Nn.lanes|=c,fa|=c,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function kf(e){var t=Ii(),n=t.queue;if(n===null)throw Error(Oe(311));n.lastRenderedReducer=e;var i=n.dispatch,a=n.pending,c=t.memoizedState;if(a!==null){n.pending=null;var f=a=a.next;do c=e(c,f.action),f=f.next;while(f!==a);Wi(c,t.memoizedState)||(zr=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),n.lastRenderedState=c}return[c,i]}function Lw(){}function Pw(e,t){var n=Nn,i=Ii(),a=t(),c=!Wi(i.memoizedState,a);if(c&&(i.memoizedState=a,zr=!0),i=i.queue,g1(Bw.bind(null,n,i,e),[e]),i.getSnapshot!==t||c||ir!==null&&ir.memoizedState.tag&1){if(n.flags|=2048,Dc(9,jw.bind(null,n,i,a,t),void 0,null),sr===null)throw Error(Oe(349));ha&30||Dw(n,t,a)}return a}function Dw(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Nn.updateQueue,t===null?(t={lastEffect:null,stores:null},Nn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function jw(e,t,n,i){t.value=n,t.getSnapshot=i,Fw(t)&&zw(e)}function Bw(e,t,n){return n(function(){Fw(t)&&zw(e)})}function Fw(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Wi(e,n)}catch{return!0}}function zw(e){var t=Ts(e,1);t!==null&&Hi(t,e,1,-1)}function Dg(e){var t=es();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pc,lastRenderedState:e},t.queue=e,e=e.dispatch=iA.bind(null,Nn,e),[t.memoizedState,e]}function Dc(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=Nn.updateQueue,t===null?(t={lastEffect:null,stores:null},Nn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function Uw(){return Ii().memoizedState}function td(e,t,n,i){var a=es();Nn.flags|=e,a.memoizedState=Dc(1|t,n,void 0,i===void 0?null:i)}function wh(e,t,n,i){var a=Ii();i=i===void 0?null:i;var c=void 0;if(qn!==null){var f=qn.memoizedState;if(c=f.destroy,i!==null&&f1(i,f.deps)){a.memoizedState=Dc(t,n,c,i);return}}Nn.flags|=e,a.memoizedState=Dc(1|t,n,c,i)}function jg(e,t){return td(8390656,8,e,t)}function g1(e,t){return wh(2048,8,e,t)}function Vw(e,t){return wh(4,2,e,t)}function Hw(e,t){return wh(4,4,e,t)}function Ww(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gw(e,t,n){return n=n!=null?n.concat([e]):null,wh(4,4,Ww.bind(null,t,e),n)}function x1(){}function Zw(e,t){var n=Ii();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&f1(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Yw(e,t){var n=Ii();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&f1(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Xw(e,t,n){return ha&21?(Wi(n,t)||(n=J2(),Nn.lanes|=n,fa|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,zr=!0),e.memoizedState=n)}function nA(e,t){var n=nn;nn=n!==0&&4>n?n:4,e(!0);var i=Tf.transition;Tf.transition={};try{e(!1),t()}finally{nn=n,Tf.transition=i}}function qw(){return Ii().memoizedState}function rA(e,t,n){var i=po(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Kw(e))Qw(t,n);else if(n=Mw(e,t,n,i),n!==null){var a=Rr();Hi(n,e,i,a),$w(n,t,i)}}function iA(e,t,n){var i=po(e),a={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Kw(e))Qw(t,a);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var f=t.lastRenderedState,g=c(f,n);if(a.hasEagerState=!0,a.eagerState=g,Wi(g,f)){var v=t.interleaved;v===null?(a.next=a,l1(t)):(a.next=v.next,v.next=a),t.interleaved=a;return}}catch{}finally{}n=Mw(e,t,a,i),n!==null&&(a=Rr(),Hi(n,e,i,a),$w(n,t,i))}}function Kw(e){var t=e.alternate;return e===Nn||t!==null&&t===Nn}function Qw(e,t){cc=Md=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $w(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Xp(e,n)}}var Rd={readContext:Ti,useCallback:mr,useContext:mr,useEffect:mr,useImperativeHandle:mr,useInsertionEffect:mr,useLayoutEffect:mr,useMemo:mr,useReducer:mr,useRef:mr,useState:mr,useDebugValue:mr,useDeferredValue:mr,useTransition:mr,useMutableSource:mr,useSyncExternalStore:mr,useId:mr,unstable_isNewReconciler:!1},sA={readContext:Ti,useCallback:function(e,t){return es().memoizedState=[e,t===void 0?null:t],e},useContext:Ti,useEffect:jg,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,td(4194308,4,Ww.bind(null,t,e),n)},useLayoutEffect:function(e,t){return td(4194308,4,e,t)},useInsertionEffect:function(e,t){return td(4,2,e,t)},useMemo:function(e,t){var n=es();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=es();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=rA.bind(null,Nn,e),[i.memoizedState,e]},useRef:function(e){var t=es();return e={current:e},t.memoizedState=e},useState:Dg,useDebugValue:x1,useDeferredValue:function(e){return es().memoizedState=e},useTransition:function(){var e=Dg(!1),t=e[0];return e=nA.bind(null,e[1]),es().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Nn,a=es();if(bn){if(n===void 0)throw Error(Oe(407));n=n()}else{if(n=t(),sr===null)throw Error(Oe(349));ha&30||Dw(i,t,n)}a.memoizedState=n;var c={value:n,getSnapshot:t};return a.queue=c,jg(Bw.bind(null,i,c,e),[e]),i.flags|=2048,Dc(9,jw.bind(null,i,c,n,t),void 0,null),n},useId:function(){var e=es(),t=sr.identifierPrefix;if(bn){var n=ws,i=ys;n=(i&~(1<<32-Vi(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=Lc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=tA++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oA={readContext:Ti,useCallback:Zw,useContext:Ti,useEffect:g1,useImperativeHandle:Gw,useInsertionEffect:Vw,useLayoutEffect:Hw,useMemo:Yw,useReducer:If,useRef:Uw,useState:function(){return If(Pc)},useDebugValue:x1,useDeferredValue:function(e){var t=Ii();return Xw(t,qn.memoizedState,e)},useTransition:function(){var e=If(Pc)[0],t=Ii().memoizedState;return[e,t]},useMutableSource:Lw,useSyncExternalStore:Pw,useId:qw,unstable_isNewReconciler:!1},aA={readContext:Ti,useCallback:Zw,useContext:Ti,useEffect:g1,useImperativeHandle:Gw,useInsertionEffect:Vw,useLayoutEffect:Hw,useMemo:Yw,useReducer:kf,useRef:Uw,useState:function(){return kf(Pc)},useDebugValue:x1,useDeferredValue:function(e){var t=Ii();return qn===null?t.memoizedState=e:Xw(t,qn.memoizedState,e)},useTransition:function(){var e=kf(Pc)[0],t=Ii().memoizedState;return[e,t]},useMutableSource:Lw,useSyncExternalStore:Pw,useId:qw,unstable_isNewReconciler:!1};function Di(e,t){if(e&&e.defaultProps){t=Tn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function j0(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Tn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var vh={isMounted:function(e){return(e=e._reactInternals)?xa(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Rr(),a=po(e),c=Cs(i,a);c.payload=t,n!=null&&(c.callback=n),t=ho(e,c,a),t!==null&&(Hi(t,e,a,i),Ju(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Rr(),a=po(e),c=Cs(i,a);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=ho(e,c,a),t!==null&&(Hi(t,e,a,i),Ju(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Rr(),i=po(e),a=Cs(n,i);a.tag=2,t!=null&&(a.callback=t),t=ho(e,a,i),t!==null&&(Hi(t,e,i,n),Ju(t,e,i))}};function Bg(e,t,n,i,a,c,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,c,f):t.prototype&&t.prototype.isPureReactComponent?!Tc(n,i)||!Tc(a,c):!0}function Jw(e,t,n){var i=!1,a=bo,c=t.contextType;return typeof c=="object"&&c!==null?c=Ti(c):(a=Vr(t)?ua:vr.current,i=t.contextTypes,c=(i=i!=null)?ol(e,a):bo),t=new t(n,c),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vh,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=c),t}function Fg(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&vh.enqueueReplaceState(t,t.state,null)}function B0(e,t,n,i){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},c1(e);var c=t.contextType;typeof c=="object"&&c!==null?a.context=Ti(c):(c=Vr(t)?ua:vr.current,a.context=ol(e,c)),a.state=e.memoizedState,c=t.getDerivedStateFromProps,typeof c=="function"&&(j0(e,t,c,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&vh.enqueueReplaceState(a,a.state,null),Id(e,n,a,i),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ul(e,t){try{var n="",i=t;do n+=PS(i),i=i.return;while(i);var a=n}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:t,stack:a,digest:null}}function Mf(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function F0(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var lA=typeof WeakMap=="function"?WeakMap:Map;function ev(e,t,n){n=Cs(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Ld||(Ld=!0,q0=i),F0(e,t)},n}function tv(e,t,n){n=Cs(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var a=t.value;n.payload=function(){return i(a)},n.callback=function(){F0(e,t)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(n.callback=function(){F0(e,t),typeof i!="function"&&(fo===null?fo=new Set([this]):fo.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),n}function zg(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new lA;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(n)||(a.add(n),e=bA.bind(null,e,t,n),t.then(e,e))}function Ug(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vg(e,t,n,i,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Cs(-1,1),t.tag=2,ho(n,t,1))),n.lanes|=1),e)}var cA=Ps.ReactCurrentOwner,zr=!1;function kr(e,t,n,i){t.child=e===null?kw(t,null,n,i):ll(t,e.child,n,i)}function Hg(e,t,n,i,a){n=n.render;var c=t.ref;return rl(t,a),i=p1(e,t,n,i,c,a),n=m1(),e!==null&&!zr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Is(e,t,a)):(bn&&n&&n1(t),t.flags|=1,kr(e,t,i,a),t.child)}function Wg(e,t,n,i,a){if(e===null){var c=n.type;return typeof c=="function"&&!A1(c)&&c.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=c,nv(e,t,c,i,a)):(e=sd(n.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!(e.lanes&a)){var f=c.memoizedProps;if(n=n.compare,n=n!==null?n:Tc,n(f,i)&&e.ref===t.ref)return Is(e,t,a)}return t.flags|=1,e=mo(c,i),e.ref=t.ref,e.return=t,t.child=e}function nv(e,t,n,i,a){if(e!==null){var c=e.memoizedProps;if(Tc(c,i)&&e.ref===t.ref)if(zr=!1,t.pendingProps=i=c,(e.lanes&a)!==0)e.flags&131072&&(zr=!0);else return t.lanes=e.lanes,Is(e,t,a)}return z0(e,t,n,i,a)}function rv(e,t,n){var i=t.pendingProps,a=i.children,c=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},dn(Wa,ei),ei|=n;else{if(!(n&1073741824))return e=c!==null?c.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,dn(Wa,ei),ei|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=c!==null?c.baseLanes:n,dn(Wa,ei),ei|=i}else c!==null?(i=c.baseLanes|n,t.memoizedState=null):i=n,dn(Wa,ei),ei|=i;return kr(e,t,a,n),t.child}function iv(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function z0(e,t,n,i,a){var c=Vr(n)?ua:vr.current;return c=ol(t,c),rl(t,a),n=p1(e,t,n,i,c,a),i=m1(),e!==null&&!zr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Is(e,t,a)):(bn&&i&&n1(t),t.flags|=1,kr(e,t,n,a),t.child)}function Gg(e,t,n,i,a){if(Vr(n)){var c=!0;Sd(t)}else c=!1;if(rl(t,a),t.stateNode===null)nd(e,t),Jw(t,n,i),B0(t,n,i,a),i=!0;else if(e===null){var f=t.stateNode,g=t.memoizedProps;f.props=g;var v=f.context,y=n.contextType;typeof y=="object"&&y!==null?y=Ti(y):(y=Vr(n)?ua:vr.current,y=ol(t,y));var C=n.getDerivedStateFromProps,b=typeof C=="function"||typeof f.getSnapshotBeforeUpdate=="function";b||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==i||v!==y)&&Fg(t,f,i,y),Qs=!1;var T=t.memoizedState;f.state=T,Id(t,i,f,a),v=t.memoizedState,g!==i||T!==v||Ur.current||Qs?(typeof C=="function"&&(j0(t,n,C,i),v=t.memoizedState),(g=Qs||Bg(t,n,g,i,T,v,y))?(b||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=v),f.props=i,f.state=v,f.context=y,i=g):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{f=t.stateNode,Rw(e,t),g=t.memoizedProps,y=t.type===t.elementType?g:Di(t.type,g),f.props=y,b=t.pendingProps,T=f.context,v=n.contextType,typeof v=="object"&&v!==null?v=Ti(v):(v=Vr(n)?ua:vr.current,v=ol(t,v));var I=n.getDerivedStateFromProps;(C=typeof I=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==b||T!==v)&&Fg(t,f,i,v),Qs=!1,T=t.memoizedState,f.state=T,Id(t,i,f,a);var z=t.memoizedState;g!==b||T!==z||Ur.current||Qs?(typeof I=="function"&&(j0(t,n,I,i),z=t.memoizedState),(y=Qs||Bg(t,n,y,i,T,z,v)||!1)?(C||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,z,v),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,z,v)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=z),f.props=i,f.state=z,f.context=v,i=y):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),i=!1)}return U0(e,t,n,i,c,a)}function U0(e,t,n,i,a,c){iv(e,t);var f=(t.flags&128)!==0;if(!i&&!f)return a&&kg(t,n,!1),Is(e,t,c);i=t.stateNode,cA.current=t;var g=f&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&f?(t.child=ll(t,e.child,null,c),t.child=ll(t,null,g,c)):kr(e,t,g,c),t.memoizedState=i.state,a&&kg(t,n,!0),t.child}function sv(e){var t=e.stateNode;t.pendingContext?Ig(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ig(e,t.context,!1),u1(e,t.containerInfo)}function Zg(e,t,n,i,a){return al(),i1(a),t.flags|=256,kr(e,t,n,i),t.child}var V0={dehydrated:null,treeContext:null,retryLane:0};function H0(e){return{baseLanes:e,cachePool:null,transitions:null}}function ov(e,t,n){var i=t.pendingProps,a=An.current,c=!1,f=(t.flags&128)!==0,g;if((g=f)||(g=e!==null&&e.memoizedState===null?!1:(a&2)!==0),g?(c=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),dn(An,a&1),e===null)return P0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=i.children,e=i.fallback,c?(i=t.mode,c=t.child,f={mode:"hidden",children:f},!(i&1)&&c!==null?(c.childLanes=0,c.pendingProps=f):c=Ch(f,i,0,null),e=ia(e,i,n,null),c.return=t,e.return=t,c.sibling=e,t.child=c,t.child.memoizedState=H0(n),t.memoizedState=V0,e):y1(t,f));if(a=e.memoizedState,a!==null&&(g=a.dehydrated,g!==null))return uA(e,t,f,i,g,a,n);if(c){c=i.fallback,f=t.mode,a=e.child,g=a.sibling;var v={mode:"hidden",children:i.children};return!(f&1)&&t.child!==a?(i=t.child,i.childLanes=0,i.pendingProps=v,t.deletions=null):(i=mo(a,v),i.subtreeFlags=a.subtreeFlags&14680064),g!==null?c=mo(g,c):(c=ia(c,f,n,null),c.flags|=2),c.return=t,i.return=t,i.sibling=c,t.child=i,i=c,c=t.child,f=e.child.memoizedState,f=f===null?H0(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},c.memoizedState=f,c.childLanes=e.childLanes&~n,t.memoizedState=V0,i}return c=e.child,e=c.sibling,i=mo(c,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function y1(e,t){return t=Ch({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Lu(e,t,n,i){return i!==null&&i1(i),ll(t,e.child,null,n),e=y1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function uA(e,t,n,i,a,c,f){if(n)return t.flags&256?(t.flags&=-257,i=Mf(Error(Oe(422))),Lu(e,t,f,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(c=i.fallback,a=t.mode,i=Ch({mode:"visible",children:i.children},a,0,null),c=ia(c,a,f,null),c.flags|=2,i.return=t,c.return=t,i.sibling=c,t.child=i,t.mode&1&&ll(t,e.child,null,f),t.child.memoizedState=H0(f),t.memoizedState=V0,c);if(!(t.mode&1))return Lu(e,t,f,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var g=i.dgst;return i=g,c=Error(Oe(419)),i=Mf(c,i,void 0),Lu(e,t,f,i)}if(g=(f&e.childLanes)!==0,zr||g){if(i=sr,i!==null){switch(f&-f){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|f)?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,Ts(e,a),Hi(i,e,a,-1))}return S1(),i=Mf(Error(Oe(421))),Lu(e,t,f,i)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=CA.bind(null,e),a._reactRetry=t,null):(e=c.treeContext,ri=uo(a.nextSibling),ii=t,bn=!0,Ui=null,e!==null&&(Si[Ai++]=ys,Si[Ai++]=ws,Si[Ai++]=da,ys=e.id,ws=e.overflow,da=t),t=y1(t,i.children),t.flags|=4096,t)}function Yg(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),D0(e.return,t,n)}function Rf(e,t,n,i,a){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=i,c.tail=n,c.tailMode=a)}function av(e,t,n){var i=t.pendingProps,a=i.revealOrder,c=i.tail;if(kr(e,t,i.children,n),i=An.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yg(e,n,t);else if(e.tag===19)Yg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(dn(An,i),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&kd(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Rf(t,!1,a,n,c);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&kd(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Rf(t,!0,n,null,c);break;case"together":Rf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function nd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Is(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),fa|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Oe(153));if(t.child!==null){for(e=t.child,n=mo(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=mo(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function dA(e,t,n){switch(t.tag){case 3:sv(t),al();break;case 5:Ow(t);break;case 1:Vr(t.type)&&Sd(t);break;case 4:u1(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,a=t.memoizedProps.value;dn(Nd,i._currentValue),i._currentValue=a;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(dn(An,An.current&1),t.flags|=128,null):n&t.child.childLanes?ov(e,t,n):(dn(An,An.current&1),e=Is(e,t,n),e!==null?e.sibling:null);dn(An,An.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return av(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),dn(An,An.current),i)break;return null;case 22:case 23:return t.lanes=0,rv(e,t,n)}return Is(e,t,n)}var lv,W0,cv,uv;lv=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};W0=function(){};cv=function(e,t,n,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,ea(is.current);var c=null;switch(n){case"input":a=h0(e,a),i=h0(e,i),c=[];break;case"select":a=Tn({},a,{value:void 0}),i=Tn({},i,{value:void 0}),c=[];break;case"textarea":a=m0(e,a),i=m0(e,i),c=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=bd)}x0(n,i);var f;n=null;for(y in a)if(!i.hasOwnProperty(y)&&a.hasOwnProperty(y)&&a[y]!=null)if(y==="style"){var g=a[y];for(f in g)g.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(_c.hasOwnProperty(y)?c||(c=[]):(c=c||[]).push(y,null));for(y in i){var v=i[y];if(g=a!=null?a[y]:void 0,i.hasOwnProperty(y)&&v!==g&&(v!=null||g!=null))if(y==="style")if(g){for(f in g)!g.hasOwnProperty(f)||v&&v.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in v)v.hasOwnProperty(f)&&g[f]!==v[f]&&(n||(n={}),n[f]=v[f])}else n||(c||(c=[]),c.push(y,n)),n=v;else y==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,g=g?g.__html:void 0,v!=null&&g!==v&&(c=c||[]).push(y,v)):y==="children"?typeof v!="string"&&typeof v!="number"||(c=c||[]).push(y,""+v):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(_c.hasOwnProperty(y)?(v!=null&&y==="onScroll"&&gn("scroll",e),c||g===v||(c=[])):(c=c||[]).push(y,v))}n&&(c=c||[]).push("style",n);var y=c;(t.updateQueue=y)&&(t.flags|=4)}};uv=function(e,t,n,i){n!==i&&(t.flags|=4)};function Gl(e,t){if(!bn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function gr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function hA(e,t,n){var i=t.pendingProps;switch(r1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gr(t),null;case 1:return Vr(t.type)&&Cd(),gr(t),null;case 3:return i=t.stateNode,cl(),xn(Ur),xn(vr),h1(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Ru(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ui!==null&&($0(Ui),Ui=null))),W0(e,t),gr(t),null;case 5:d1(t);var a=ea(Oc.current);if(n=t.type,e!==null&&t.stateNode!=null)cv(e,t,n,i,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Oe(166));return gr(t),null}if(e=ea(is.current),Ru(t)){i=t.stateNode,n=t.type;var c=t.memoizedProps;switch(i[ns]=t,i[Mc]=c,e=(t.mode&1)!==0,n){case"dialog":gn("cancel",i),gn("close",i);break;case"iframe":case"object":case"embed":gn("load",i);break;case"video":case"audio":for(a=0;a<tc.length;a++)gn(tc[a],i);break;case"source":gn("error",i);break;case"img":case"image":case"link":gn("error",i),gn("load",i);break;case"details":gn("toggle",i);break;case"input":ng(i,c),gn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!c.multiple},gn("invalid",i);break;case"textarea":ig(i,c),gn("invalid",i)}x0(n,c),a=null;for(var f in c)if(c.hasOwnProperty(f)){var g=c[f];f==="children"?typeof g=="string"?i.textContent!==g&&(c.suppressHydrationWarning!==!0&&Mu(i.textContent,g,e),a=["children",g]):typeof g=="number"&&i.textContent!==""+g&&(c.suppressHydrationWarning!==!0&&Mu(i.textContent,g,e),a=["children",""+g]):_c.hasOwnProperty(f)&&g!=null&&f==="onScroll"&&gn("scroll",i)}switch(n){case"input":Cu(i),rg(i,c,!0);break;case"textarea":Cu(i),sg(i);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(i.onclick=bd)}i=a,t.updateQueue=i,i!==null&&(t.flags|=4)}else{f=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=B2(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=f.createElement(n,{is:i.is}):(e=f.createElement(n),n==="select"&&(f=e,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):e=f.createElementNS(e,n),e[ns]=t,e[Mc]=i,lv(e,t,!1,!1),t.stateNode=e;e:{switch(f=y0(n,i),n){case"dialog":gn("cancel",e),gn("close",e),a=i;break;case"iframe":case"object":case"embed":gn("load",e),a=i;break;case"video":case"audio":for(a=0;a<tc.length;a++)gn(tc[a],e);a=i;break;case"source":gn("error",e),a=i;break;case"img":case"image":case"link":gn("error",e),gn("load",e),a=i;break;case"details":gn("toggle",e),a=i;break;case"input":ng(e,i),a=h0(e,i),gn("invalid",e);break;case"option":a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=Tn({},i,{value:void 0}),gn("invalid",e);break;case"textarea":ig(e,i),a=m0(e,i),gn("invalid",e);break;default:a=i}x0(n,a),g=a;for(c in g)if(g.hasOwnProperty(c)){var v=g[c];c==="style"?U2(e,v):c==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,v!=null&&F2(e,v)):c==="children"?typeof v=="string"?(n!=="textarea"||v!=="")&&bc(e,v):typeof v=="number"&&bc(e,""+v):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(_c.hasOwnProperty(c)?v!=null&&c==="onScroll"&&gn("scroll",e):v!=null&&Vp(e,c,v,f))}switch(n){case"input":Cu(e),rg(e,i,!1);break;case"textarea":Cu(e),sg(e);break;case"option":i.value!=null&&e.setAttribute("value",""+_o(i.value));break;case"select":e.multiple=!!i.multiple,c=i.value,c!=null?Ja(e,!!i.multiple,c,!1):i.defaultValue!=null&&Ja(e,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=bd)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gr(t),null;case 6:if(e&&t.stateNode!=null)uv(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Oe(166));if(n=ea(Oc.current),ea(is.current),Ru(t)){if(i=t.stateNode,n=t.memoizedProps,i[ns]=t,(c=i.nodeValue!==n)&&(e=ii,e!==null))switch(e.tag){case 3:Mu(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Mu(i.nodeValue,n,(e.mode&1)!==0)}c&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ns]=t,t.stateNode=i}return gr(t),null;case 13:if(xn(An),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(bn&&ri!==null&&t.mode&1&&!(t.flags&128))Tw(),al(),t.flags|=98560,c=!1;else if(c=Ru(t),i!==null&&i.dehydrated!==null){if(e===null){if(!c)throw Error(Oe(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(Oe(317));c[ns]=t}else al(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;gr(t),c=!1}else Ui!==null&&($0(Ui),Ui=null),c=!0;if(!c)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||An.current&1?Kn===0&&(Kn=3):S1())),t.updateQueue!==null&&(t.flags|=4),gr(t),null);case 4:return cl(),W0(e,t),e===null&&Ic(t.stateNode.containerInfo),gr(t),null;case 10:return a1(t.type._context),gr(t),null;case 17:return Vr(t.type)&&Cd(),gr(t),null;case 19:if(xn(An),c=t.memoizedState,c===null)return gr(t),null;if(i=(t.flags&128)!==0,f=c.rendering,f===null)if(i)Gl(c,!1);else{if(Kn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=kd(e),f!==null){for(t.flags|=128,Gl(c,!1),i=f.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)c=n,e=i,c.flags&=14680066,f=c.alternate,f===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=f.childLanes,c.lanes=f.lanes,c.child=f.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=f.memoizedProps,c.memoizedState=f.memoizedState,c.updateQueue=f.updateQueue,c.type=f.type,e=f.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return dn(An,An.current&1|2),t.child}e=e.sibling}c.tail!==null&&Ln()>dl&&(t.flags|=128,i=!0,Gl(c,!1),t.lanes=4194304)}else{if(!i)if(e=kd(f),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Gl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!bn)return gr(t),null}else 2*Ln()-c.renderingStartTime>dl&&n!==1073741824&&(t.flags|=128,i=!0,Gl(c,!1),t.lanes=4194304);c.isBackwards?(f.sibling=t.child,t.child=f):(n=c.last,n!==null?n.sibling=f:t.child=f,c.last=f)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Ln(),t.sibling=null,n=An.current,dn(An,i?n&1|2:n&1),t):(gr(t),null);case 22:case 23:return C1(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?ei&1073741824&&(gr(t),t.subtreeFlags&6&&(t.flags|=8192)):gr(t),null;case 24:return null;case 25:return null}throw Error(Oe(156,t.tag))}function fA(e,t){switch(r1(t),t.tag){case 1:return Vr(t.type)&&Cd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return cl(),xn(Ur),xn(vr),h1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return d1(t),null;case 13:if(xn(An),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Oe(340));al()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xn(An),null;case 4:return cl(),null;case 10:return a1(t.type._context),null;case 22:case 23:return C1(),null;case 24:return null;default:return null}}var Pu=!1,yr=!1,pA=typeof WeakSet=="function"?WeakSet:Set,Je=null;function Ha(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Mn(e,t,i)}else n.current=null}function G0(e,t,n){try{n()}catch(i){Mn(e,t,i)}}var Xg=!1;function mA(e,t){if(T0=wd,e=mw(),t1(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var a=i.anchorOffset,c=i.focusNode;i=i.focusOffset;try{n.nodeType,c.nodeType}catch{n=null;break e}var f=0,g=-1,v=-1,y=0,C=0,b=e,T=null;t:for(;;){for(var I;b!==n||a!==0&&b.nodeType!==3||(g=f+a),b!==c||i!==0&&b.nodeType!==3||(v=f+i),b.nodeType===3&&(f+=b.nodeValue.length),(I=b.firstChild)!==null;)T=b,b=I;for(;;){if(b===e)break t;if(T===n&&++y===a&&(g=f),T===c&&++C===i&&(v=f),(I=b.nextSibling)!==null)break;b=T,T=b.parentNode}b=I}n=g===-1||v===-1?null:{start:g,end:v}}else n=null}n=n||{start:0,end:0}}else n=null;for(I0={focusedElem:e,selectionRange:n},wd=!1,Je=t;Je!==null;)if(t=Je,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Je=e;else for(;Je!==null;){t=Je;try{var z=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(z!==null){var R=z.memoizedProps,B=z.memoizedState,F=t.stateNode,P=F.getSnapshotBeforeUpdate(t.elementType===t.type?R:Di(t.type,R),B);F.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var k=t.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Oe(163))}}catch(G){Mn(t,t.return,G)}if(e=t.sibling,e!==null){e.return=t.return,Je=e;break}Je=t.return}return z=Xg,Xg=!1,z}function uc(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var c=a.destroy;a.destroy=void 0,c!==void 0&&G0(t,n,c)}a=a.next}while(a!==i)}}function _h(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function Z0(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function dv(e){var t=e.alternate;t!==null&&(e.alternate=null,dv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ns],delete t[Mc],delete t[R0],delete t[Q3],delete t[$3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hv(e){return e.tag===5||e.tag===3||e.tag===4}function qg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Y0(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=bd));else if(i!==4&&(e=e.child,e!==null))for(Y0(e,t,n),e=e.sibling;e!==null;)Y0(e,t,n),e=e.sibling}function X0(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(X0(e,t,n),e=e.sibling;e!==null;)X0(e,t,n),e=e.sibling}var ar=null,Bi=!1;function Gs(e,t,n){for(n=n.child;n!==null;)fv(e,t,n),n=n.sibling}function fv(e,t,n){if(rs&&typeof rs.onCommitFiberUnmount=="function")try{rs.onCommitFiberUnmount(fh,n)}catch{}switch(n.tag){case 5:yr||Ha(n,t);case 6:var i=ar,a=Bi;ar=null,Gs(e,t,n),ar=i,Bi=a,ar!==null&&(Bi?(e=ar,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ar.removeChild(n.stateNode));break;case 18:ar!==null&&(Bi?(e=ar,n=n.stateNode,e.nodeType===8?Af(e.parentNode,n):e.nodeType===1&&Af(e,n),Ec(e)):Af(ar,n.stateNode));break;case 4:i=ar,a=Bi,ar=n.stateNode.containerInfo,Bi=!0,Gs(e,t,n),ar=i,Bi=a;break;case 0:case 11:case 14:case 15:if(!yr&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var c=a,f=c.destroy;c=c.tag,f!==void 0&&(c&2||c&4)&&G0(n,t,f),a=a.next}while(a!==i)}Gs(e,t,n);break;case 1:if(!yr&&(Ha(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(g){Mn(n,t,g)}Gs(e,t,n);break;case 21:Gs(e,t,n);break;case 22:n.mode&1?(yr=(i=yr)||n.memoizedState!==null,Gs(e,t,n),yr=i):Gs(e,t,n);break;default:Gs(e,t,n)}}function Kg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new pA),t.forEach(function(i){var a=SA.bind(null,e,i);n.has(i)||(n.add(i),i.then(a,a))})}}function Pi(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];try{var c=e,f=t,g=f;e:for(;g!==null;){switch(g.tag){case 5:ar=g.stateNode,Bi=!1;break e;case 3:ar=g.stateNode.containerInfo,Bi=!0;break e;case 4:ar=g.stateNode.containerInfo,Bi=!0;break e}g=g.return}if(ar===null)throw Error(Oe(160));fv(c,f,a),ar=null,Bi=!1;var v=a.alternate;v!==null&&(v.return=null),a.return=null}catch(y){Mn(a,t,y)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)pv(t,e),t=t.sibling}function pv(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pi(t,e),$i(e),i&4){try{uc(3,e,e.return),_h(3,e)}catch(R){Mn(e,e.return,R)}try{uc(5,e,e.return)}catch(R){Mn(e,e.return,R)}}break;case 1:Pi(t,e),$i(e),i&512&&n!==null&&Ha(n,n.return);break;case 5:if(Pi(t,e),$i(e),i&512&&n!==null&&Ha(n,n.return),e.flags&32){var a=e.stateNode;try{bc(a,"")}catch(R){Mn(e,e.return,R)}}if(i&4&&(a=e.stateNode,a!=null)){var c=e.memoizedProps,f=n!==null?n.memoizedProps:c,g=e.type,v=e.updateQueue;if(e.updateQueue=null,v!==null)try{g==="input"&&c.type==="radio"&&c.name!=null&&D2(a,c),y0(g,f);var y=y0(g,c);for(f=0;f<v.length;f+=2){var C=v[f],b=v[f+1];C==="style"?U2(a,b):C==="dangerouslySetInnerHTML"?F2(a,b):C==="children"?bc(a,b):Vp(a,C,b,y)}switch(g){case"input":f0(a,c);break;case"textarea":j2(a,c);break;case"select":var T=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var I=c.value;I!=null?Ja(a,!!c.multiple,I,!1):T!==!!c.multiple&&(c.defaultValue!=null?Ja(a,!!c.multiple,c.defaultValue,!0):Ja(a,!!c.multiple,c.multiple?[]:"",!1))}a[Mc]=c}catch(R){Mn(e,e.return,R)}}break;case 6:if(Pi(t,e),$i(e),i&4){if(e.stateNode===null)throw Error(Oe(162));a=e.stateNode,c=e.memoizedProps;try{a.nodeValue=c}catch(R){Mn(e,e.return,R)}}break;case 3:if(Pi(t,e),$i(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ec(t.containerInfo)}catch(R){Mn(e,e.return,R)}break;case 4:Pi(t,e),$i(e);break;case 13:Pi(t,e),$i(e),a=e.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(_1=Ln())),i&4&&Kg(e);break;case 22:if(C=n!==null&&n.memoizedState!==null,e.mode&1?(yr=(y=yr)||C,Pi(t,e),yr=y):Pi(t,e),$i(e),i&8192){if(y=e.memoizedState!==null,(e.stateNode.isHidden=y)&&!C&&e.mode&1)for(Je=e,C=e.child;C!==null;){for(b=Je=C;Je!==null;){switch(T=Je,I=T.child,T.tag){case 0:case 11:case 14:case 15:uc(4,T,T.return);break;case 1:Ha(T,T.return);var z=T.stateNode;if(typeof z.componentWillUnmount=="function"){i=T,n=T.return;try{t=i,z.props=t.memoizedProps,z.state=t.memoizedState,z.componentWillUnmount()}catch(R){Mn(i,n,R)}}break;case 5:Ha(T,T.return);break;case 22:if(T.memoizedState!==null){$g(b);continue}}I!==null?(I.return=T,Je=I):$g(b)}C=C.sibling}e:for(C=null,b=e;;){if(b.tag===5){if(C===null){C=b;try{a=b.stateNode,y?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(g=b.stateNode,v=b.memoizedProps.style,f=v!=null&&v.hasOwnProperty("display")?v.display:null,g.style.display=z2("display",f))}catch(R){Mn(e,e.return,R)}}}else if(b.tag===6){if(C===null)try{b.stateNode.nodeValue=y?"":b.memoizedProps}catch(R){Mn(e,e.return,R)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;C===b&&(C=null),b=b.return}C===b&&(C=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:Pi(t,e),$i(e),i&4&&Kg(e);break;case 21:break;default:Pi(t,e),$i(e)}}function $i(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(hv(n)){var i=n;break e}n=n.return}throw Error(Oe(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(bc(a,""),i.flags&=-33);var c=qg(e);X0(e,c,a);break;case 3:case 4:var f=i.stateNode.containerInfo,g=qg(e);Y0(e,g,f);break;default:throw Error(Oe(161))}}catch(v){Mn(e,e.return,v)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gA(e,t,n){Je=e,mv(e)}function mv(e,t,n){for(var i=(e.mode&1)!==0;Je!==null;){var a=Je,c=a.child;if(a.tag===22&&i){var f=a.memoizedState!==null||Pu;if(!f){var g=a.alternate,v=g!==null&&g.memoizedState!==null||yr;g=Pu;var y=yr;if(Pu=f,(yr=v)&&!y)for(Je=a;Je!==null;)f=Je,v=f.child,f.tag===22&&f.memoizedState!==null?Jg(a):v!==null?(v.return=f,Je=v):Jg(a);for(;c!==null;)Je=c,mv(c),c=c.sibling;Je=a,Pu=g,yr=y}Qg(e)}else a.subtreeFlags&8772&&c!==null?(c.return=a,Je=c):Qg(e)}}function Qg(e){for(;Je!==null;){var t=Je;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:yr||_h(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!yr)if(n===null)i.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Di(t.type,n.memoizedProps);i.componentDidUpdate(a,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var c=t.updateQueue;c!==null&&Pg(t,c,i);break;case 3:var f=t.updateQueue;if(f!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Pg(t,f,n)}break;case 5:var g=t.stateNode;if(n===null&&t.flags&4){n=g;var v=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":v.autoFocus&&n.focus();break;case"img":v.src&&(n.src=v.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var y=t.alternate;if(y!==null){var C=y.memoizedState;if(C!==null){var b=C.dehydrated;b!==null&&Ec(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Oe(163))}yr||t.flags&512&&Z0(t)}catch(T){Mn(t,t.return,T)}}if(t===e){Je=null;break}if(n=t.sibling,n!==null){n.return=t.return,Je=n;break}Je=t.return}}function $g(e){for(;Je!==null;){var t=Je;if(t===e){Je=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Je=n;break}Je=t.return}}function Jg(e){for(;Je!==null;){var t=Je;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{_h(4,t)}catch(v){Mn(t,n,v)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var a=t.return;try{i.componentDidMount()}catch(v){Mn(t,a,v)}}var c=t.return;try{Z0(t)}catch(v){Mn(t,c,v)}break;case 5:var f=t.return;try{Z0(t)}catch(v){Mn(t,f,v)}}}catch(v){Mn(t,t.return,v)}if(t===e){Je=null;break}var g=t.sibling;if(g!==null){g.return=t.return,Je=g;break}Je=t.return}}var xA=Math.ceil,Od=Ps.ReactCurrentDispatcher,w1=Ps.ReactCurrentOwner,Ni=Ps.ReactCurrentBatchConfig,Gt=0,sr=null,Un=null,lr=0,ei=0,Wa=No(0),Kn=0,jc=null,fa=0,bh=0,v1=0,dc=null,Fr=null,_1=0,dl=1/0,gs=null,Ld=!1,q0=null,fo=null,Du=!1,so=null,Pd=0,hc=0,K0=null,rd=-1,id=0;function Rr(){return Gt&6?Ln():rd!==-1?rd:rd=Ln()}function po(e){return e.mode&1?Gt&2&&lr!==0?lr&-lr:eA.transition!==null?(id===0&&(id=J2()),id):(e=nn,e!==0||(e=window.event,e=e===void 0?16:ow(e.type)),e):1}function Hi(e,t,n,i){if(50<hc)throw hc=0,K0=null,Error(Oe(185));Kc(e,n,i),(!(Gt&2)||e!==sr)&&(e===sr&&(!(Gt&2)&&(bh|=n),Kn===4&&no(e,lr)),Hr(e,i),n===1&&Gt===0&&!(t.mode&1)&&(dl=Ln()+500,yh&&To()))}function Hr(e,t){var n=e.callbackNode;e3(e,t);var i=yd(e,e===sr?lr:0);if(i===0)n!==null&&lg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&lg(n),t===1)e.tag===0?J3(ex.bind(null,e)):Aw(ex.bind(null,e)),q3(function(){!(Gt&6)&&To()}),n=null;else{switch(ew(i)){case 1:n=Yp;break;case 4:n=Q2;break;case 16:n=xd;break;case 536870912:n=$2;break;default:n=xd}n=Cv(n,gv.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function gv(e,t){if(rd=-1,id=0,Gt&6)throw Error(Oe(327));var n=e.callbackNode;if(il()&&e.callbackNode!==n)return null;var i=yd(e,e===sr?lr:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Dd(e,i);else{t=i;var a=Gt;Gt|=2;var c=yv();(sr!==e||lr!==t)&&(gs=null,dl=Ln()+500,ra(e,t));do try{vA();break}catch(g){xv(e,g)}while(!0);o1(),Od.current=c,Gt=a,Un!==null?t=0:(sr=null,lr=0,t=Kn)}if(t!==0){if(t===2&&(a=C0(e),a!==0&&(i=a,t=Q0(e,a))),t===1)throw n=jc,ra(e,0),no(e,i),Hr(e,Ln()),n;if(t===6)no(e,i);else{if(a=e.current.alternate,!(i&30)&&!yA(a)&&(t=Dd(e,i),t===2&&(c=C0(e),c!==0&&(i=c,t=Q0(e,c))),t===1))throw n=jc,ra(e,0),no(e,i),Hr(e,Ln()),n;switch(e.finishedWork=a,e.finishedLanes=i,t){case 0:case 1:throw Error(Oe(345));case 2:Yo(e,Fr,gs);break;case 3:if(no(e,i),(i&130023424)===i&&(t=_1+500-Ln(),10<t)){if(yd(e,0)!==0)break;if(a=e.suspendedLanes,(a&i)!==i){Rr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=M0(Yo.bind(null,e,Fr,gs),t);break}Yo(e,Fr,gs);break;case 4:if(no(e,i),(i&4194240)===i)break;for(t=e.eventTimes,a=-1;0<i;){var f=31-Vi(i);c=1<<f,f=t[f],f>a&&(a=f),i&=~c}if(i=a,i=Ln()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*xA(i/1960))-i,10<i){e.timeoutHandle=M0(Yo.bind(null,e,Fr,gs),i);break}Yo(e,Fr,gs);break;case 5:Yo(e,Fr,gs);break;default:throw Error(Oe(329))}}}return Hr(e,Ln()),e.callbackNode===n?gv.bind(null,e):null}function Q0(e,t){var n=dc;return e.current.memoizedState.isDehydrated&&(ra(e,t).flags|=256),e=Dd(e,t),e!==2&&(t=Fr,Fr=n,t!==null&&$0(t)),e}function $0(e){Fr===null?Fr=e:Fr.push.apply(Fr,e)}function yA(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var a=n[i],c=a.getSnapshot;a=a.value;try{if(!Wi(c(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function no(e,t){for(t&=~v1,t&=~bh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vi(t),i=1<<n;e[n]=-1,t&=~i}}function ex(e){if(Gt&6)throw Error(Oe(327));il();var t=yd(e,0);if(!(t&1))return Hr(e,Ln()),null;var n=Dd(e,t);if(e.tag!==0&&n===2){var i=C0(e);i!==0&&(t=i,n=Q0(e,i))}if(n===1)throw n=jc,ra(e,0),no(e,t),Hr(e,Ln()),n;if(n===6)throw Error(Oe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Yo(e,Fr,gs),Hr(e,Ln()),null}function b1(e,t){var n=Gt;Gt|=1;try{return e(t)}finally{Gt=n,Gt===0&&(dl=Ln()+500,yh&&To())}}function pa(e){so!==null&&so.tag===0&&!(Gt&6)&&il();var t=Gt;Gt|=1;var n=Ni.transition,i=nn;try{if(Ni.transition=null,nn=1,e)return e()}finally{nn=i,Ni.transition=n,Gt=t,!(Gt&6)&&To()}}function C1(){ei=Wa.current,xn(Wa)}function ra(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,X3(n)),Un!==null)for(n=Un.return;n!==null;){var i=n;switch(r1(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Cd();break;case 3:cl(),xn(Ur),xn(vr),h1();break;case 5:d1(i);break;case 4:cl();break;case 13:xn(An);break;case 19:xn(An);break;case 10:a1(i.type._context);break;case 22:case 23:C1()}n=n.return}if(sr=e,Un=e=mo(e.current,null),lr=ei=t,Kn=0,jc=null,v1=bh=fa=0,Fr=dc=null,Jo!==null){for(t=0;t<Jo.length;t++)if(n=Jo[t],i=n.interleaved,i!==null){n.interleaved=null;var a=i.next,c=n.pending;if(c!==null){var f=c.next;c.next=a,i.next=f}n.pending=i}Jo=null}return e}function xv(e,t){do{var n=Un;try{if(o1(),ed.current=Rd,Md){for(var i=Nn.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Md=!1}if(ha=0,ir=qn=Nn=null,cc=!1,Lc=0,w1.current=null,n===null||n.return===null){Kn=1,jc=t,Un=null;break}e:{var c=e,f=n.return,g=n,v=t;if(t=lr,g.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){var y=v,C=g,b=C.tag;if(!(C.mode&1)&&(b===0||b===11||b===15)){var T=C.alternate;T?(C.updateQueue=T.updateQueue,C.memoizedState=T.memoizedState,C.lanes=T.lanes):(C.updateQueue=null,C.memoizedState=null)}var I=Ug(f);if(I!==null){I.flags&=-257,Vg(I,f,g,c,t),I.mode&1&&zg(c,y,t),t=I,v=y;var z=t.updateQueue;if(z===null){var R=new Set;R.add(v),t.updateQueue=R}else z.add(v);break e}else{if(!(t&1)){zg(c,y,t),S1();break e}v=Error(Oe(426))}}else if(bn&&g.mode&1){var B=Ug(f);if(B!==null){!(B.flags&65536)&&(B.flags|=256),Vg(B,f,g,c,t),i1(ul(v,g));break e}}c=v=ul(v,g),Kn!==4&&(Kn=2),dc===null?dc=[c]:dc.push(c),c=f;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t;var F=ev(c,v,t);Lg(c,F);break e;case 1:g=v;var P=c.type,k=c.stateNode;if(!(c.flags&128)&&(typeof P.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(fo===null||!fo.has(k)))){c.flags|=65536,t&=-t,c.lanes|=t;var G=tv(c,g,t);Lg(c,G);break e}}c=c.return}while(c!==null)}vv(n)}catch(K){t=K,Un===n&&n!==null&&(Un=n=n.return);continue}break}while(!0)}function yv(){var e=Od.current;return Od.current=Rd,e===null?Rd:e}function S1(){(Kn===0||Kn===3||Kn===2)&&(Kn=4),sr===null||!(fa&268435455)&&!(bh&268435455)||no(sr,lr)}function Dd(e,t){var n=Gt;Gt|=2;var i=yv();(sr!==e||lr!==t)&&(gs=null,ra(e,t));do try{wA();break}catch(a){xv(e,a)}while(!0);if(o1(),Gt=n,Od.current=i,Un!==null)throw Error(Oe(261));return sr=null,lr=0,Kn}function wA(){for(;Un!==null;)wv(Un)}function vA(){for(;Un!==null&&!GS();)wv(Un)}function wv(e){var t=bv(e.alternate,e,ei);e.memoizedProps=e.pendingProps,t===null?vv(e):Un=t,w1.current=null}function vv(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=fA(n,t),n!==null){n.flags&=32767,Un=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Kn=6,Un=null;return}}else if(n=hA(n,t,ei),n!==null){Un=n;return}if(t=t.sibling,t!==null){Un=t;return}Un=t=e}while(t!==null);Kn===0&&(Kn=5)}function Yo(e,t,n){var i=nn,a=Ni.transition;try{Ni.transition=null,nn=1,_A(e,t,n,i)}finally{Ni.transition=a,nn=i}return null}function _A(e,t,n,i){do il();while(so!==null);if(Gt&6)throw Error(Oe(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Oe(177));e.callbackNode=null,e.callbackPriority=0;var c=n.lanes|n.childLanes;if(t3(e,c),e===sr&&(Un=sr=null,lr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Du||(Du=!0,Cv(xd,function(){return il(),null})),c=(n.flags&15990)!==0,n.subtreeFlags&15990||c){c=Ni.transition,Ni.transition=null;var f=nn;nn=1;var g=Gt;Gt|=4,w1.current=null,mA(e,n),pv(n,e),U3(I0),wd=!!T0,I0=T0=null,e.current=n,gA(n),ZS(),Gt=g,nn=f,Ni.transition=c}else e.current=n;if(Du&&(Du=!1,so=e,Pd=a),c=e.pendingLanes,c===0&&(fo=null),qS(n.stateNode),Hr(e,Ln()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],i(a.value,{componentStack:a.stack,digest:a.digest});if(Ld)throw Ld=!1,e=q0,q0=null,e;return Pd&1&&e.tag!==0&&il(),c=e.pendingLanes,c&1?e===K0?hc++:(hc=0,K0=e):hc=0,To(),null}function il(){if(so!==null){var e=ew(Pd),t=Ni.transition,n=nn;try{if(Ni.transition=null,nn=16>e?16:e,so===null)var i=!1;else{if(e=so,so=null,Pd=0,Gt&6)throw Error(Oe(331));var a=Gt;for(Gt|=4,Je=e.current;Je!==null;){var c=Je,f=c.child;if(Je.flags&16){var g=c.deletions;if(g!==null){for(var v=0;v<g.length;v++){var y=g[v];for(Je=y;Je!==null;){var C=Je;switch(C.tag){case 0:case 11:case 15:uc(8,C,c)}var b=C.child;if(b!==null)b.return=C,Je=b;else for(;Je!==null;){C=Je;var T=C.sibling,I=C.return;if(dv(C),C===y){Je=null;break}if(T!==null){T.return=I,Je=T;break}Je=I}}}var z=c.alternate;if(z!==null){var R=z.child;if(R!==null){z.child=null;do{var B=R.sibling;R.sibling=null,R=B}while(R!==null)}}Je=c}}if(c.subtreeFlags&2064&&f!==null)f.return=c,Je=f;else e:for(;Je!==null;){if(c=Je,c.flags&2048)switch(c.tag){case 0:case 11:case 15:uc(9,c,c.return)}var F=c.sibling;if(F!==null){F.return=c.return,Je=F;break e}Je=c.return}}var P=e.current;for(Je=P;Je!==null;){f=Je;var k=f.child;if(f.subtreeFlags&2064&&k!==null)k.return=f,Je=k;else e:for(f=P;Je!==null;){if(g=Je,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:_h(9,g)}}catch(K){Mn(g,g.return,K)}if(g===f){Je=null;break e}var G=g.sibling;if(G!==null){G.return=g.return,Je=G;break e}Je=g.return}}if(Gt=a,To(),rs&&typeof rs.onPostCommitFiberRoot=="function")try{rs.onPostCommitFiberRoot(fh,e)}catch{}i=!0}return i}finally{nn=n,Ni.transition=t}}return!1}function tx(e,t,n){t=ul(n,t),t=ev(e,t,1),e=ho(e,t,1),t=Rr(),e!==null&&(Kc(e,1,t),Hr(e,t))}function Mn(e,t,n){if(e.tag===3)tx(e,e,n);else for(;t!==null;){if(t.tag===3){tx(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(fo===null||!fo.has(i))){e=ul(n,e),e=tv(t,e,1),t=ho(t,e,1),e=Rr(),t!==null&&(Kc(t,1,e),Hr(t,e));break}}t=t.return}}function bA(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=Rr(),e.pingedLanes|=e.suspendedLanes&n,sr===e&&(lr&n)===n&&(Kn===4||Kn===3&&(lr&130023424)===lr&&500>Ln()-_1?ra(e,0):v1|=n),Hr(e,t)}function _v(e,t){t===0&&(e.mode&1?(t=Eu,Eu<<=1,!(Eu&130023424)&&(Eu=4194304)):t=1);var n=Rr();e=Ts(e,t),e!==null&&(Kc(e,t,n),Hr(e,n))}function CA(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),_v(e,n)}function SA(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Oe(314))}i!==null&&i.delete(t),_v(e,n)}var bv;bv=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ur.current)zr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return zr=!1,dA(e,t,n);zr=!!(e.flags&131072)}else zr=!1,bn&&t.flags&1048576&&Ew(t,Ed,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;nd(e,t),e=t.pendingProps;var a=ol(t,vr.current);rl(t,n),a=p1(null,t,i,e,a,n);var c=m1();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Vr(i)?(c=!0,Sd(t)):c=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,c1(t),a.updater=vh,t.stateNode=a,a._reactInternals=t,B0(t,i,e,n),t=U0(null,t,i,!0,c,n)):(t.tag=0,bn&&c&&n1(t),kr(null,t,a,n),t=t.child),t;case 16:i=t.elementType;e:{switch(nd(e,t),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=EA(i),e=Di(i,e),a){case 0:t=z0(null,t,i,e,n);break e;case 1:t=Gg(null,t,i,e,n);break e;case 11:t=Hg(null,t,i,e,n);break e;case 14:t=Wg(null,t,i,Di(i.type,e),n);break e}throw Error(Oe(306,i,""))}return t;case 0:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Di(i,a),z0(e,t,i,a,n);case 1:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Di(i,a),Gg(e,t,i,a,n);case 3:e:{if(sv(t),e===null)throw Error(Oe(387));i=t.pendingProps,c=t.memoizedState,a=c.element,Rw(e,t),Id(t,i,null,n);var f=t.memoizedState;if(i=f.element,c.isDehydrated)if(c={element:i,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){a=ul(Error(Oe(423)),t),t=Zg(e,t,i,n,a);break e}else if(i!==a){a=ul(Error(Oe(424)),t),t=Zg(e,t,i,n,a);break e}else for(ri=uo(t.stateNode.containerInfo.firstChild),ii=t,bn=!0,Ui=null,n=kw(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(al(),i===a){t=Is(e,t,n);break e}kr(e,t,i,n)}t=t.child}return t;case 5:return Ow(t),e===null&&P0(t),i=t.type,a=t.pendingProps,c=e!==null?e.memoizedProps:null,f=a.children,k0(i,a)?f=null:c!==null&&k0(i,c)&&(t.flags|=32),iv(e,t),kr(e,t,f,n),t.child;case 6:return e===null&&P0(t),null;case 13:return ov(e,t,n);case 4:return u1(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=ll(t,null,i,n):kr(e,t,i,n),t.child;case 11:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Di(i,a),Hg(e,t,i,a,n);case 7:return kr(e,t,t.pendingProps,n),t.child;case 8:return kr(e,t,t.pendingProps.children,n),t.child;case 12:return kr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,a=t.pendingProps,c=t.memoizedProps,f=a.value,dn(Nd,i._currentValue),i._currentValue=f,c!==null)if(Wi(c.value,f)){if(c.children===a.children&&!Ur.current){t=Is(e,t,n);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var g=c.dependencies;if(g!==null){f=c.child;for(var v=g.firstContext;v!==null;){if(v.context===i){if(c.tag===1){v=Cs(-1,n&-n),v.tag=2;var y=c.updateQueue;if(y!==null){y=y.shared;var C=y.pending;C===null?v.next=v:(v.next=C.next,C.next=v),y.pending=v}}c.lanes|=n,v=c.alternate,v!==null&&(v.lanes|=n),D0(c.return,n,t),g.lanes|=n;break}v=v.next}}else if(c.tag===10)f=c.type===t.type?null:c.child;else if(c.tag===18){if(f=c.return,f===null)throw Error(Oe(341));f.lanes|=n,g=f.alternate,g!==null&&(g.lanes|=n),D0(f,n,t),f=c.sibling}else f=c.child;if(f!==null)f.return=c;else for(f=c;f!==null;){if(f===t){f=null;break}if(c=f.sibling,c!==null){c.return=f.return,f=c;break}f=f.return}c=f}kr(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,i=t.pendingProps.children,rl(t,n),a=Ti(a),i=i(a),t.flags|=1,kr(e,t,i,n),t.child;case 14:return i=t.type,a=Di(i,t.pendingProps),a=Di(i.type,a),Wg(e,t,i,a,n);case 15:return nv(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Di(i,a),nd(e,t),t.tag=1,Vr(i)?(e=!0,Sd(t)):e=!1,rl(t,n),Jw(t,i,a),B0(t,i,a,n),U0(null,t,i,!0,e,n);case 19:return av(e,t,n);case 22:return rv(e,t,n)}throw Error(Oe(156,t.tag))};function Cv(e,t){return K2(e,t)}function AA(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ei(e,t,n,i){return new AA(e,t,n,i)}function A1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function EA(e){if(typeof e=="function")return A1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Wp)return 11;if(e===Gp)return 14}return 2}function mo(e,t){var n=e.alternate;return n===null?(n=Ei(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function sd(e,t,n,i,a,c){var f=2;if(i=e,typeof e=="function")A1(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case La:return ia(n.children,a,c,t);case Hp:f=8,a|=8;break;case l0:return e=Ei(12,n,t,a|2),e.elementType=l0,e.lanes=c,e;case c0:return e=Ei(13,n,t,a),e.elementType=c0,e.lanes=c,e;case u0:return e=Ei(19,n,t,a),e.elementType=u0,e.lanes=c,e;case O2:return Ch(n,a,c,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M2:f=10;break e;case R2:f=9;break e;case Wp:f=11;break e;case Gp:f=14;break e;case Ks:f=16,i=null;break e}throw Error(Oe(130,e==null?e:typeof e,""))}return t=Ei(f,n,t,a),t.elementType=e,t.type=i,t.lanes=c,t}function ia(e,t,n,i){return e=Ei(7,e,i,t),e.lanes=n,e}function Ch(e,t,n,i){return e=Ei(22,e,i,t),e.elementType=O2,e.lanes=n,e.stateNode={isHidden:!1},e}function Of(e,t,n){return e=Ei(6,e,null,t),e.lanes=n,e}function Lf(e,t,n){return t=Ei(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function NA(e,t,n,i,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pf(0),this.expirationTimes=pf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pf(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function E1(e,t,n,i,a,c,f,g,v){return e=new NA(e,t,n,g,v),t===1?(t=1,c===!0&&(t|=8)):t=0,c=Ei(3,null,null,t),e.current=c,c.stateNode=e,c.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},c1(c),e}function TA(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oa,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function Sv(e){if(!e)return bo;e=e._reactInternals;e:{if(xa(e)!==e||e.tag!==1)throw Error(Oe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Vr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Oe(171))}if(e.tag===1){var n=e.type;if(Vr(n))return Sw(e,n,t)}return t}function Av(e,t,n,i,a,c,f,g,v){return e=E1(n,i,!0,e,a,c,f,g,v),e.context=Sv(null),n=e.current,i=Rr(),a=po(n),c=Cs(i,a),c.callback=t??null,ho(n,c,a),e.current.lanes=a,Kc(e,a,i),Hr(e,i),e}function Sh(e,t,n,i){var a=t.current,c=Rr(),f=po(a);return n=Sv(n),t.context===null?t.context=n:t.pendingContext=n,t=Cs(c,f),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=ho(a,t,f),e!==null&&(Hi(e,a,f,c),Ju(e,a,f)),f}function jd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function nx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function N1(e,t){nx(e,t),(e=e.alternate)&&nx(e,t)}function IA(){return null}var Ev=typeof reportError=="function"?reportError:function(e){console.error(e)};function T1(e){this._internalRoot=e}Ah.prototype.render=T1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Oe(409));Sh(e,t,null,null)};Ah.prototype.unmount=T1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;pa(function(){Sh(null,e,null,null)}),t[Ns]=null}};function Ah(e){this._internalRoot=e}Ah.prototype.unstable_scheduleHydration=function(e){if(e){var t=rw();e={blockedOn:null,target:e,priority:t};for(var n=0;n<to.length&&t!==0&&t<to[n].priority;n++);to.splice(n,0,e),n===0&&sw(e)}};function I1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Eh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rx(){}function kA(e,t,n,i,a){if(a){if(typeof i=="function"){var c=i;i=function(){var y=jd(f);c.call(y)}}var f=Av(t,i,e,0,null,!1,!1,"",rx);return e._reactRootContainer=f,e[Ns]=f.current,Ic(e.nodeType===8?e.parentNode:e),pa(),f}for(;a=e.lastChild;)e.removeChild(a);if(typeof i=="function"){var g=i;i=function(){var y=jd(v);g.call(y)}}var v=E1(e,0,!1,null,null,!1,!1,"",rx);return e._reactRootContainer=v,e[Ns]=v.current,Ic(e.nodeType===8?e.parentNode:e),pa(function(){Sh(t,v,n,i)}),v}function Nh(e,t,n,i,a){var c=n._reactRootContainer;if(c){var f=c;if(typeof a=="function"){var g=a;a=function(){var v=jd(f);g.call(v)}}Sh(t,f,e,a)}else f=kA(n,t,e,a,i);return jd(f)}tw=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ec(t.pendingLanes);n!==0&&(Xp(t,n|1),Hr(t,Ln()),!(Gt&6)&&(dl=Ln()+500,To()))}break;case 13:pa(function(){var i=Ts(e,1);if(i!==null){var a=Rr();Hi(i,e,1,a)}}),N1(e,1)}};qp=function(e){if(e.tag===13){var t=Ts(e,134217728);if(t!==null){var n=Rr();Hi(t,e,134217728,n)}N1(e,134217728)}};nw=function(e){if(e.tag===13){var t=po(e),n=Ts(e,t);if(n!==null){var i=Rr();Hi(n,e,t,i)}N1(e,t)}};rw=function(){return nn};iw=function(e,t){var n=nn;try{return nn=e,t()}finally{nn=n}};v0=function(e,t,n){switch(t){case"input":if(f0(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var a=xh(i);if(!a)throw Error(Oe(90));P2(i),f0(i,a)}}}break;case"textarea":j2(e,n);break;case"select":t=n.value,t!=null&&Ja(e,!!n.multiple,t,!1)}};W2=b1;G2=pa;var MA={usingClientEntryPoint:!1,Events:[$c,Ba,xh,V2,H2,b1]},Zl={findFiberByHostInstance:$o,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RA={bundleType:Zl.bundleType,version:Zl.version,rendererPackageName:Zl.rendererPackageName,rendererConfig:Zl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=X2(e),e===null?null:e.stateNode},findFiberByHostInstance:Zl.findFiberByHostInstance||IA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ju.isDisabled&&ju.supportsFiber)try{fh=ju.inject(RA),rs=ju}catch{}}ai.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MA;ai.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!I1(t))throw Error(Oe(200));return TA(e,t,null,n)};ai.createRoot=function(e,t){if(!I1(e))throw Error(Oe(299));var n=!1,i="",a=Ev;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=E1(e,1,!1,null,null,n,!1,i,a),e[Ns]=t.current,Ic(e.nodeType===8?e.parentNode:e),new T1(t)};ai.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Oe(188)):(e=Object.keys(e).join(","),Error(Oe(268,e)));return e=X2(t),e=e===null?null:e.stateNode,e};ai.flushSync=function(e){return pa(e)};ai.hydrate=function(e,t,n){if(!Eh(t))throw Error(Oe(200));return Nh(null,e,t,!0,n)};ai.hydrateRoot=function(e,t,n){if(!I1(e))throw Error(Oe(405));var i=n!=null&&n.hydratedSources||null,a=!1,c="",f=Ev;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),t=Av(t,null,e,1,n??null,a,!1,c,f),e[Ns]=t.current,Ic(e),i)for(e=0;e<i.length;e++)n=i[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Ah(t)};ai.render=function(e,t,n){if(!Eh(t))throw Error(Oe(200));return Nh(null,e,t,!1,n)};ai.unmountComponentAtNode=function(e){if(!Eh(e))throw Error(Oe(40));return e._reactRootContainer?(pa(function(){Nh(null,null,e,!1,function(){e._reactRootContainer=null,e[Ns]=null})}),!0):!1};ai.unstable_batchedUpdates=b1;ai.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Eh(n))throw Error(Oe(200));if(e==null||e._reactInternals===void 0)throw Error(Oe(38));return Nh(e,t,n,!1,i)};ai.version="18.3.1-next-f1338f8080-20240426";function Nv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nv)}catch(e){console.error(e)}}Nv(),N2.exports=ai;var Tv=N2.exports,ix=Tv;o0.createRoot=ix.createRoot,o0.hydrateRoot=ix.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bc(){return Bc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Bc.apply(this,arguments)}var oo;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(oo||(oo={}));const sx="popstate";function OA(e){e===void 0&&(e={});function t(a,c){let{pathname:f="/",search:g="",hash:v=""}=ya(a.location.hash.substr(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),J0("",{pathname:f,search:g,hash:v},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(a,c){let f=a.document.querySelector("base"),g="";if(f&&f.getAttribute("href")){let v=a.location.href,y=v.indexOf("#");g=y===-1?v:v.slice(0,y)}return g+"#"+(typeof c=="string"?c:Bd(c))}function i(a,c){Th(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(c)+")")}return PA(t,n,i,e)}function Dn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Th(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function LA(){return Math.random().toString(36).substr(2,8)}function ox(e,t){return{usr:e.state,key:e.key,idx:t}}function J0(e,t,n,i){return n===void 0&&(n=null),Bc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ya(t):t,{state:n,key:t&&t.key||i||LA()})}function Bd(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function ya(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function PA(e,t,n,i){i===void 0&&(i={});let{window:a=document.defaultView,v5Compat:c=!1}=i,f=a.history,g=oo.Pop,v=null,y=C();y==null&&(y=0,f.replaceState(Bc({},f.state,{idx:y}),""));function C(){return(f.state||{idx:null}).idx}function b(){g=oo.Pop;let B=C(),F=B==null?null:B-y;y=B,v&&v({action:g,location:R.location,delta:F})}function T(B,F){g=oo.Push;let P=J0(R.location,B,F);n&&n(P,B),y=C()+1;let k=ox(P,y),G=R.createHref(P);try{f.pushState(k,"",G)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;a.location.assign(G)}c&&v&&v({action:g,location:R.location,delta:1})}function I(B,F){g=oo.Replace;let P=J0(R.location,B,F);n&&n(P,B),y=C();let k=ox(P,y),G=R.createHref(P);f.replaceState(k,"",G),c&&v&&v({action:g,location:R.location,delta:0})}function z(B){let F=a.location.origin!=="null"?a.location.origin:a.location.href,P=typeof B=="string"?B:Bd(B);return P=P.replace(/ $/,"%20"),Dn(F,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,F)}let R={get action(){return g},get location(){return e(a,f)},listen(B){if(v)throw new Error("A history only accepts one active listener");return a.addEventListener(sx,b),v=B,()=>{a.removeEventListener(sx,b),v=null}},createHref(B){return t(a,B)},createURL:z,encodeLocation(B){let F=z(B);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:T,replace:I,go(B){return f.go(B)}};return R}var ax;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ax||(ax={}));function DA(e,t,n){return n===void 0&&(n="/"),jA(e,t,n)}function jA(e,t,n,i){let a=typeof t=="string"?ya(t):t,c=k1(a.pathname||"/",n);if(c==null)return null;let f=Iv(e);BA(f);let g=null;for(let v=0;g==null&&v<f.length;++v){let y=KA(c);g=YA(f[v],y)}return g}function Iv(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let a=(c,f,g)=>{let v={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};v.relativePath.startsWith("/")&&(Dn(v.relativePath.startsWith(i),'Absolute route path "'+v.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),v.relativePath=v.relativePath.slice(i.length));let y=go([i,v.relativePath]),C=n.concat(v);c.children&&c.children.length>0&&(Dn(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),Iv(c.children,t,C,y)),!(c.path==null&&!c.index)&&t.push({path:y,score:GA(y,c.index),routesMeta:C})};return e.forEach((c,f)=>{var g;if(c.path===""||!((g=c.path)!=null&&g.includes("?")))a(c,f);else for(let v of kv(c.path))a(c,f,v)}),t}function kv(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,a=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return a?[c,""]:[c];let f=kv(i.join("/")),g=[];return g.push(...f.map(v=>v===""?c:[c,v].join("/"))),a&&g.push(...f),g.map(v=>e.startsWith("/")&&v===""?"/":v)}function BA(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:ZA(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const FA=/^:[\w-]+$/,zA=3,UA=2,VA=1,HA=10,WA=-2,lx=e=>e==="*";function GA(e,t){let n=e.split("/"),i=n.length;return n.some(lx)&&(i+=WA),t&&(i+=UA),n.filter(a=>!lx(a)).reduce((a,c)=>a+(FA.test(c)?zA:c===""?VA:HA),i)}function ZA(e,t){return e.length===t.length&&e.slice(0,-1).every((i,a)=>i===t[a])?e[e.length-1]-t[t.length-1]:0}function YA(e,t,n){let{routesMeta:i}=e,a={},c="/",f=[];for(let g=0;g<i.length;++g){let v=i[g],y=g===i.length-1,C=c==="/"?t:t.slice(c.length)||"/",b=XA({path:v.relativePath,caseSensitive:v.caseSensitive,end:y},C),T=v.route;if(!b)return null;Object.assign(a,b.params),f.push({params:a,pathname:go([c,b.pathname]),pathnameBase:tE(go([c,b.pathnameBase])),route:T}),b.pathnameBase!=="/"&&(c=go([c,b.pathnameBase]))}return f}function XA(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=qA(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let c=a[0],f=c.replace(/(.)\/+$/,"$1"),g=a.slice(1);return{params:i.reduce((y,C,b)=>{let{paramName:T,isOptional:I}=C;if(T==="*"){let R=g[b]||"";f=c.slice(0,c.length-R.length).replace(/(.)\/+$/,"$1")}const z=g[b];return I&&!z?y[T]=void 0:y[T]=(z||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:f,pattern:e}}function qA(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Th(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,g,v)=>(i.push({paramName:g,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function KA(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Th(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function k1(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}const QA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$A=e=>QA.test(e);function JA(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:a=""}=typeof e=="string"?ya(e):e,c;if(n)if($A(n))c=n;else{if(n.includes("//")){let f=n;n=n.replace(/\/\/+/g,"/"),Th(!1,"Pathnames cannot have embedded double slashes - normalizing "+(f+" -> "+n))}n.startsWith("/")?c=cx(n.substring(1),"/"):c=cx(n,t)}else c=t;return{pathname:c,search:nE(i),hash:rE(a)}}function cx(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Pf(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function eE(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function M1(e,t){let n=eE(e);return t?n.map((i,a)=>a===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function R1(e,t,n,i){i===void 0&&(i=!1);let a;typeof e=="string"?a=ya(e):(a=Bc({},e),Dn(!a.pathname||!a.pathname.includes("?"),Pf("?","pathname","search",a)),Dn(!a.pathname||!a.pathname.includes("#"),Pf("#","pathname","hash",a)),Dn(!a.search||!a.search.includes("#"),Pf("#","search","hash",a)));let c=e===""||a.pathname==="",f=c?"/":a.pathname,g;if(f==null)g=n;else{let b=t.length-1;if(!i&&f.startsWith("..")){let T=f.split("/");for(;T[0]==="..";)T.shift(),b-=1;a.pathname=T.join("/")}g=b>=0?t[b]:"/"}let v=JA(a,g),y=f&&f!=="/"&&f.endsWith("/"),C=(c||f===".")&&n.endsWith("/");return!v.pathname.endsWith("/")&&(y||C)&&(v.pathname+="/"),v}const go=e=>e.join("/").replace(/\/\/+/g,"/"),tE=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),nE=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,rE=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function iE(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Mv=["post","put","patch","delete"];new Set(Mv);const sE=["get",...Mv];new Set(sE);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fc(){return Fc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Fc.apply(this,arguments)}const O1=O.createContext(null),oE=O.createContext(null),Io=O.createContext(null),Ih=O.createContext(null),as=O.createContext({outlet:null,matches:[],isDataRoute:!1}),Rv=O.createContext(null);function aE(e,t){let{relative:n}=t===void 0?{}:t;vl()||Dn(!1);let{basename:i,navigator:a}=O.useContext(Io),{hash:c,pathname:f,search:g}=Lv(e,{relative:n}),v=f;return i!=="/"&&(v=f==="/"?i:go([i,f])),a.createHref({pathname:v,search:g,hash:c})}function vl(){return O.useContext(Ih)!=null}function ko(){return vl()||Dn(!1),O.useContext(Ih).location}function Ov(e){O.useContext(Io).static||O.useLayoutEffect(e)}function ur(){let{isDataRoute:e}=O.useContext(as);return e?bE():lE()}function lE(){vl()||Dn(!1);let e=O.useContext(O1),{basename:t,future:n,navigator:i}=O.useContext(Io),{matches:a}=O.useContext(as),{pathname:c}=ko(),f=JSON.stringify(M1(a,n.v7_relativeSplatPath)),g=O.useRef(!1);return Ov(()=>{g.current=!0}),O.useCallback(function(y,C){if(C===void 0&&(C={}),!g.current)return;if(typeof y=="number"){i.go(y);return}let b=R1(y,JSON.parse(f),c,C.relative==="path");e==null&&t!=="/"&&(b.pathname=b.pathname==="/"?t:go([t,b.pathname])),(C.replace?i.replace:i.push)(b,C.state,C)},[t,i,f,c,e])}const cE=O.createContext(null);function uE(e){let t=O.useContext(as).outlet;return t&&O.createElement(cE.Provider,{value:e},t)}function L1(){let{matches:e}=O.useContext(as),t=e[e.length-1];return t?t.params:{}}function Lv(e,t){let{relative:n}=t===void 0?{}:t,{future:i}=O.useContext(Io),{matches:a}=O.useContext(as),{pathname:c}=ko(),f=JSON.stringify(M1(a,i.v7_relativeSplatPath));return O.useMemo(()=>R1(e,JSON.parse(f),c,n==="path"),[e,f,c,n])}function dE(e,t){return hE(e,t)}function hE(e,t,n,i){vl()||Dn(!1);let{navigator:a}=O.useContext(Io),{matches:c}=O.useContext(as),f=c[c.length-1],g=f?f.params:{};f&&f.pathname;let v=f?f.pathnameBase:"/";f&&f.route;let y=ko(),C;if(t){var b;let B=typeof t=="string"?ya(t):t;v==="/"||(b=B.pathname)!=null&&b.startsWith(v)||Dn(!1),C=B}else C=y;let T=C.pathname||"/",I=T;if(v!=="/"){let B=v.replace(/^\//,"").split("/");I="/"+T.replace(/^\//,"").split("/").slice(B.length).join("/")}let z=DA(e,{pathname:I}),R=xE(z&&z.map(B=>Object.assign({},B,{params:Object.assign({},g,B.params),pathname:go([v,a.encodeLocation?a.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?v:go([v,a.encodeLocation?a.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),c,n,i);return t&&R?O.createElement(Ih.Provider,{value:{location:Fc({pathname:"/",search:"",hash:"",state:null,key:"default"},C),navigationType:oo.Pop}},R):R}function fE(){let e=_E(),t=iE(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},t),n?O.createElement("pre",{style:a},n):null,null)}const pE=O.createElement(fE,null);class mE extends O.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?O.createElement(as.Provider,{value:this.props.routeContext},O.createElement(Rv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function gE(e){let{routeContext:t,match:n,children:i}=e,a=O.useContext(O1);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(as.Provider,{value:t},i)}function xE(e,t,n,i){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),i===void 0&&(i=null),e==null){var c;if(!n)return null;if(n.errors)e=n.matches;else if((c=i)!=null&&c.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let f=e,g=(a=n)==null?void 0:a.errors;if(g!=null){let C=f.findIndex(b=>b.route.id&&(g==null?void 0:g[b.route.id])!==void 0);C>=0||Dn(!1),f=f.slice(0,Math.min(f.length,C+1))}let v=!1,y=-1;if(n&&i&&i.v7_partialHydration)for(let C=0;C<f.length;C++){let b=f[C];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(y=C),b.route.id){let{loaderData:T,errors:I}=n,z=b.route.loader&&T[b.route.id]===void 0&&(!I||I[b.route.id]===void 0);if(b.route.lazy||z){v=!0,y>=0?f=f.slice(0,y+1):f=[f[0]];break}}}return f.reduceRight((C,b,T)=>{let I,z=!1,R=null,B=null;n&&(I=g&&b.route.id?g[b.route.id]:void 0,R=b.route.errorElement||pE,v&&(y<0&&T===0?(CE("route-fallback"),z=!0,B=null):y===T&&(z=!0,B=b.route.hydrateFallbackElement||null)));let F=t.concat(f.slice(0,T+1)),P=()=>{let k;return I?k=R:z?k=B:b.route.Component?k=O.createElement(b.route.Component,null):b.route.element?k=b.route.element:k=C,O.createElement(gE,{match:b,routeContext:{outlet:C,matches:F,isDataRoute:n!=null},children:k})};return n&&(b.route.ErrorBoundary||b.route.errorElement||T===0)?O.createElement(mE,{location:n.location,revalidation:n.revalidation,component:R,error:I,children:P(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):P()},null)}var Pv=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Pv||{}),Dv=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Dv||{});function yE(e){let t=O.useContext(O1);return t||Dn(!1),t}function wE(e){let t=O.useContext(oE);return t||Dn(!1),t}function vE(e){let t=O.useContext(as);return t||Dn(!1),t}function jv(e){let t=vE(),n=t.matches[t.matches.length-1];return n.route.id||Dn(!1),n.route.id}function _E(){var e;let t=O.useContext(Rv),n=wE(),i=jv();return t!==void 0?t:(e=n.errors)==null?void 0:e[i]}function bE(){let{router:e}=yE(Pv.UseNavigateStable),t=jv(Dv.UseNavigateStable),n=O.useRef(!1);return Ov(()=>{n.current=!0}),O.useCallback(function(a,c){c===void 0&&(c={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Fc({fromRouteId:t},c)))},[e,t])}const ux={};function CE(e,t,n){ux[e]||(ux[e]=!0)}function SE(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function od(e){let{to:t,replace:n,state:i,relative:a}=e;vl()||Dn(!1);let{future:c,static:f}=O.useContext(Io),{matches:g}=O.useContext(as),{pathname:v}=ko(),y=ur(),C=R1(t,M1(g,c.v7_relativeSplatPath),v,a==="path"),b=JSON.stringify(C);return O.useEffect(()=>y(JSON.parse(b),{replace:n,state:i,relative:a}),[y,b,a,n,i]),null}function AE(e){return uE(e.context)}function Xn(e){Dn(!1)}function EE(e){let{basename:t="/",children:n=null,location:i,navigationType:a=oo.Pop,navigator:c,static:f=!1,future:g}=e;vl()&&Dn(!1);let v=t.replace(/^\/*/,"/"),y=O.useMemo(()=>({basename:v,navigator:c,static:f,future:Fc({v7_relativeSplatPath:!1},g)}),[v,g,c,f]);typeof i=="string"&&(i=ya(i));let{pathname:C="/",search:b="",hash:T="",state:I=null,key:z="default"}=i,R=O.useMemo(()=>{let B=k1(C,v);return B==null?null:{location:{pathname:B,search:b,hash:T,state:I,key:z},navigationType:a}},[v,C,b,T,I,z,a]);return R==null?null:O.createElement(Io.Provider,{value:y},O.createElement(Ih.Provider,{children:n,value:R}))}function NE(e){let{children:t,location:n}=e;return dE(ep(t),n)}new Promise(()=>{});function ep(e,t){t===void 0&&(t=[]);let n=[];return O.Children.forEach(e,(i,a)=>{if(!O.isValidElement(i))return;let c=[...t,a];if(i.type===O.Fragment){n.push.apply(n,ep(i.props.children,c));return}i.type!==Xn&&Dn(!1),!i.props.index||!i.props.children||Dn(!1);let f={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=ep(i.props.children,c)),n.push(f)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tp(){return tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},tp.apply(this,arguments)}function TE(e,t){if(e==null)return{};var n={},i=Object.keys(e),a,c;for(c=0;c<i.length;c++)a=i[c],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function IE(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function kE(e,t){return e.button===0&&(!t||t==="_self")&&!IE(e)}const ME=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],RE="6";try{window.__reactRouterVersion=RE}catch{}const OE="startTransition",dx=bS[OE];function LE(e){let{basename:t,children:n,future:i,window:a}=e,c=O.useRef();c.current==null&&(c.current=OA({window:a,v5Compat:!0}));let f=c.current,[g,v]=O.useState({action:f.action,location:f.location}),{v7_startTransition:y}=i||{},C=O.useCallback(b=>{y&&dx?dx(()=>v(b)):v(b)},[v,y]);return O.useLayoutEffect(()=>f.listen(C),[f,C]),O.useEffect(()=>SE(i),[i]),O.createElement(EE,{basename:t,children:n,location:g.location,navigationType:g.action,navigator:f,future:i})}const PE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",DE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jE=O.forwardRef(function(t,n){let{onClick:i,relative:a,reloadDocument:c,replace:f,state:g,target:v,to:y,preventScrollReset:C,viewTransition:b}=t,T=TE(t,ME),{basename:I}=O.useContext(Io),z,R=!1;if(typeof y=="string"&&DE.test(y)&&(z=y,PE))try{let k=new URL(window.location.href),G=y.startsWith("//")?new URL(k.protocol+y):new URL(y),K=k1(G.pathname,I);G.origin===k.origin&&K!=null?y=K+G.search+G.hash:R=!0}catch{}let B=aE(y,{relative:a}),F=BE(y,{replace:f,state:g,target:v,preventScrollReset:C,relative:a,viewTransition:b});function P(k){i&&i(k),k.defaultPrevented||F(k)}return O.createElement("a",tp({},T,{href:z||B,onClick:R||c?i:P,ref:n,target:v}))});var hx;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(hx||(hx={}));var fx;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(fx||(fx={}));function BE(e,t){let{target:n,replace:i,state:a,preventScrollReset:c,relative:f,viewTransition:g}=t===void 0?{}:t,v=ur(),y=ko(),C=Lv(e,{relative:f});return O.useCallback(b=>{if(kE(b,n)){b.preventDefault();let T=i!==void 0?i:Bd(y)===Bd(C);v(e,{replace:T,state:a,preventScrollReset:c,relative:f,viewTransition:g})}},[y,v,C,i,a,n,e,c,f,g])}const Bv=O.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),kh=O.createContext({}),Mh=O.createContext(null),Rh=typeof document<"u",P1=Rh?O.useLayoutEffect:O.useEffect,Fv=O.createContext({strict:!1}),D1=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),FE="framerAppearId",zv="data-"+D1(FE);function zE(e,t,n,i){const{visualElement:a}=O.useContext(kh),c=O.useContext(Fv),f=O.useContext(Mh),g=O.useContext(Bv).reducedMotion,v=O.useRef();i=i||c.renderer,!v.current&&i&&(v.current=i(e,{visualState:t,parent:a,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:g}));const y=v.current;O.useInsertionEffect(()=>{y&&y.update(n,f)});const C=O.useRef(!!(n[zv]&&!window.HandoffComplete));return P1(()=>{y&&(y.render(),C.current&&y.animationState&&y.animationState.animateChanges())}),O.useEffect(()=>{y&&(y.updateFeatures(),!C.current&&y.animationState&&y.animationState.animateChanges(),C.current&&(C.current=!1,window.HandoffComplete=!0))}),y}function Ga(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function UE(e,t,n){return O.useCallback(i=>{i&&e.mount&&e.mount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):Ga(n)&&(n.current=i))},[t])}function zc(e){return typeof e=="string"||Array.isArray(e)}function Oh(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const j1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],B1=["initial",...j1];function Lh(e){return Oh(e.animate)||B1.some(t=>zc(e[t]))}function Uv(e){return!!(Lh(e)||e.variants)}function VE(e,t){if(Lh(e)){const{initial:n,animate:i}=e;return{initial:n===!1||zc(n)?n:void 0,animate:zc(i)?i:void 0}}return e.inherit!==!1?t:{}}function HE(e){const{initial:t,animate:n}=VE(e,O.useContext(kh));return O.useMemo(()=>({initial:t,animate:n}),[px(t),px(n)])}function px(e){return Array.isArray(e)?e.join(" "):e}const mx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Uc={};for(const e in mx)Uc[e]={isEnabled:t=>mx[e].some(n=>!!t[n])};function WE(e){for(const t in e)Uc[t]={...Uc[t],...e[t]}}const F1=O.createContext({}),Vv=O.createContext({}),GE=Symbol.for("motionComponentSymbol");function ZE({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:i,Component:a}){e&&WE(e);function c(g,v){let y;const C={...O.useContext(Bv),...g,layoutId:YE(g)},{isStatic:b}=C,T=HE(g),I=i(g,b);if(!b&&Rh){T.visualElement=zE(a,I,C,t);const z=O.useContext(Vv),R=O.useContext(Fv).strict;T.visualElement&&(y=T.visualElement.loadFeatures(C,R,e,z))}return O.createElement(kh.Provider,{value:T},y&&T.visualElement?O.createElement(y,{visualElement:T.visualElement,...C}):null,n(a,g,UE(I,T.visualElement,v),I,b,T.visualElement))}const f=O.forwardRef(c);return f[GE]=a,f}function YE({layoutId:e}){const t=O.useContext(F1).id;return t&&e!==void 0?t+"-"+e:e}function XE(e){function t(i,a={}){return ZE(e(i,a))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(i,a)=>(n.has(a)||n.set(a,t(a)),n.get(a))})}const qE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function z1(e){return typeof e!="string"||e.includes("-")?!1:!!(qE.indexOf(e)>-1||/[A-Z]/.test(e))}const Fd={};function KE(e){Object.assign(Fd,e)}const eu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],wa=new Set(eu);function Hv(e,{layout:t,layoutId:n}){return wa.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Fd[e]||e==="opacity")}const Zr=e=>!!(e&&e.getVelocity),QE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$E=eu.length;function JE(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},i,a){let c="";for(let f=0;f<$E;f++){const g=eu[f];if(e[g]!==void 0){const v=QE[g]||g;c+=`${v}(${e[g]}) `}}return t&&!e.z&&(c+="translateZ(0)"),c=c.trim(),a?c=a(e,i?"":c):n&&i&&(c="none"),c}const Wv=e=>t=>typeof t=="string"&&t.startsWith(e),Gv=Wv("--"),np=Wv("var(--"),eN=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,tN=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Co=(e,t,n)=>Math.min(Math.max(n,e),t),va={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},fc={...va,transform:e=>Co(0,1,e)},Bu={...va,default:1},pc=e=>Math.round(e*1e5)/1e5,Ph=/(-)?([\d]*\.?[\d])+/g,Zv=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,nN=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function tu(e){return typeof e=="string"}const nu=e=>({test:t=>tu(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),qs=nu("deg"),ss=nu("%"),xt=nu("px"),rN=nu("vh"),iN=nu("vw"),gx={...ss,parse:e=>ss.parse(e)/100,transform:e=>ss.transform(e*100)},xx={...va,transform:Math.round},Yv={borderWidth:xt,borderTopWidth:xt,borderRightWidth:xt,borderBottomWidth:xt,borderLeftWidth:xt,borderRadius:xt,radius:xt,borderTopLeftRadius:xt,borderTopRightRadius:xt,borderBottomRightRadius:xt,borderBottomLeftRadius:xt,width:xt,maxWidth:xt,height:xt,maxHeight:xt,size:xt,top:xt,right:xt,bottom:xt,left:xt,padding:xt,paddingTop:xt,paddingRight:xt,paddingBottom:xt,paddingLeft:xt,margin:xt,marginTop:xt,marginRight:xt,marginBottom:xt,marginLeft:xt,rotate:qs,rotateX:qs,rotateY:qs,rotateZ:qs,scale:Bu,scaleX:Bu,scaleY:Bu,scaleZ:Bu,skew:qs,skewX:qs,skewY:qs,distance:xt,translateX:xt,translateY:xt,translateZ:xt,x:xt,y:xt,z:xt,perspective:xt,transformPerspective:xt,opacity:fc,originX:gx,originY:gx,originZ:xt,zIndex:xx,fillOpacity:fc,strokeOpacity:fc,numOctaves:xx};function U1(e,t,n,i){const{style:a,vars:c,transform:f,transformOrigin:g}=e;let v=!1,y=!1,C=!0;for(const b in t){const T=t[b];if(Gv(b)){c[b]=T;continue}const I=Yv[b],z=tN(T,I);if(wa.has(b)){if(v=!0,f[b]=z,!C)continue;T!==(I.default||0)&&(C=!1)}else b.startsWith("origin")?(y=!0,g[b]=z):a[b]=z}if(t.transform||(v||i?a.transform=JE(e.transform,n,C,i):a.transform&&(a.transform="none")),y){const{originX:b="50%",originY:T="50%",originZ:I=0}=g;a.transformOrigin=`${b} ${T} ${I}`}}const V1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Xv(e,t,n){for(const i in t)!Zr(t[i])&&!Hv(i,n)&&(e[i]=t[i])}function sN({transformTemplate:e},t,n){return O.useMemo(()=>{const i=V1();return U1(i,t,{enableHardwareAcceleration:!n},e),Object.assign({},i.vars,i.style)},[t])}function oN(e,t,n){const i=e.style||{},a={};return Xv(a,i,e),Object.assign(a,sN(e,t,n)),e.transformValues?e.transformValues(a):a}function aN(e,t,n){const i={},a=oN(e,t,n);return e.drag&&e.dragListener!==!1&&(i.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=a,i}const lN=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function zd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||lN.has(e)}let qv=e=>!zd(e);function cN(e){e&&(qv=t=>t.startsWith("on")?!zd(t):e(t))}try{cN(require("@emotion/is-prop-valid").default)}catch{}function uN(e,t,n){const i={};for(const a in e)a==="values"&&typeof e.values=="object"||(qv(a)||n===!0&&zd(a)||!t&&!zd(a)||e.draggable&&a.startsWith("onDrag"))&&(i[a]=e[a]);return i}function yx(e,t,n){return typeof e=="string"?e:xt.transform(t+n*e)}function dN(e,t,n){const i=yx(t,e.x,e.width),a=yx(n,e.y,e.height);return`${i} ${a}`}const hN={offset:"stroke-dashoffset",array:"stroke-dasharray"},fN={offset:"strokeDashoffset",array:"strokeDasharray"};function pN(e,t,n=1,i=0,a=!0){e.pathLength=1;const c=a?hN:fN;e[c.offset]=xt.transform(-i);const f=xt.transform(t),g=xt.transform(n);e[c.array]=`${f} ${g}`}function H1(e,{attrX:t,attrY:n,attrScale:i,originX:a,originY:c,pathLength:f,pathSpacing:g=1,pathOffset:v=0,...y},C,b,T){if(U1(e,y,C,T),b){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:I,style:z,dimensions:R}=e;I.transform&&(R&&(z.transform=I.transform),delete I.transform),R&&(a!==void 0||c!==void 0||z.transform)&&(z.transformOrigin=dN(R,a!==void 0?a:.5,c!==void 0?c:.5)),t!==void 0&&(I.x=t),n!==void 0&&(I.y=n),i!==void 0&&(I.scale=i),f!==void 0&&pN(I,f,g,v,!1)}const Kv=()=>({...V1(),attrs:{}}),W1=e=>typeof e=="string"&&e.toLowerCase()==="svg";function mN(e,t,n,i){const a=O.useMemo(()=>{const c=Kv();return H1(c,t,{enableHardwareAcceleration:!1},W1(i),e.transformTemplate),{...c.attrs,style:{...c.style}}},[t]);if(e.style){const c={};Xv(c,e.style,e),a.style={...c,...a.style}}return a}function gN(e=!1){return(n,i,a,{latestValues:c},f)=>{const v=(z1(n)?mN:aN)(i,c,f,n),C={...uN(i,typeof n=="string",e),...v,ref:a},{children:b}=i,T=O.useMemo(()=>Zr(b)?b.get():b,[b]);return O.createElement(n,{...C,children:T})}}function Qv(e,{style:t,vars:n},i,a){Object.assign(e.style,t,a&&a.getProjectionStyles(i));for(const c in n)e.style.setProperty(c,n[c])}const $v=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Jv(e,t,n,i){Qv(e,t,void 0,i);for(const a in t.attrs)e.setAttribute($v.has(a)?a:D1(a),t.attrs[a])}function G1(e,t){const{style:n}=e,i={};for(const a in n)(Zr(n[a])||t.style&&Zr(t.style[a])||Hv(a,e))&&(i[a]=n[a]);return i}function e_(e,t){const n=G1(e,t);for(const i in e)if(Zr(e[i])||Zr(t[i])){const a=eu.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[a]=e[i]}return n}function Z1(e,t,n,i={},a={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,i,a)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,i,a)),t}function t_(e){const t=O.useRef(null);return t.current===null&&(t.current=e()),t.current}const Ud=e=>Array.isArray(e),xN=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),yN=e=>Ud(e)?e[e.length-1]||0:e;function ad(e){const t=Zr(e)?e.get():e;return xN(t)?t.toValue():t}function wN({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},i,a,c){const f={latestValues:vN(i,a,c,e),renderState:t()};return n&&(f.mount=g=>n(i,g,f)),f}const n_=e=>(t,n)=>{const i=O.useContext(kh),a=O.useContext(Mh),c=()=>wN(e,t,i,a);return n?c():t_(c)};function vN(e,t,n,i){const a={},c=i(e,{});for(const T in c)a[T]=ad(c[T]);let{initial:f,animate:g}=e;const v=Lh(e),y=Uv(e);t&&y&&!v&&e.inherit!==!1&&(f===void 0&&(f=t.initial),g===void 0&&(g=t.animate));let C=n?n.initial===!1:!1;C=C||f===!1;const b=C?g:f;return b&&typeof b!="boolean"&&!Oh(b)&&(Array.isArray(b)?b:[b]).forEach(I=>{const z=Z1(e,I);if(!z)return;const{transitionEnd:R,transition:B,...F}=z;for(const P in F){let k=F[P];if(Array.isArray(k)){const G=C?k.length-1:0;k=k[G]}k!==null&&(a[P]=k)}for(const P in R)a[P]=R[P]}),a}const Pn=e=>e;class wx{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function _N(e){let t=new wx,n=new wx,i=0,a=!1,c=!1;const f=new WeakSet,g={schedule:(v,y=!1,C=!1)=>{const b=C&&a,T=b?t:n;return y&&f.add(v),T.add(v)&&b&&a&&(i=t.order.length),v},cancel:v=>{n.remove(v),f.delete(v)},process:v=>{if(a){c=!0;return}if(a=!0,[t,n]=[n,t],n.clear(),i=t.order.length,i)for(let y=0;y<i;y++){const C=t.order[y];C(v),f.has(C)&&(g.schedule(C),e())}a=!1,c&&(c=!1,g.process(v))}};return g}const Fu=["prepare","read","update","preRender","render","postRender"],bN=40;function CN(e,t){let n=!1,i=!0;const a={delta:0,timestamp:0,isProcessing:!1},c=Fu.reduce((b,T)=>(b[T]=_N(()=>n=!0),b),{}),f=b=>c[b].process(a),g=()=>{const b=performance.now();n=!1,a.delta=i?1e3/60:Math.max(Math.min(b-a.timestamp,bN),1),a.timestamp=b,a.isProcessing=!0,Fu.forEach(f),a.isProcessing=!1,n&&t&&(i=!1,e(g))},v=()=>{n=!0,i=!0,a.isProcessing||e(g)};return{schedule:Fu.reduce((b,T)=>{const I=c[T];return b[T]=(z,R=!1,B=!1)=>(n||v(),I.schedule(z,R,B)),b},{}),cancel:b=>Fu.forEach(T=>c[T].cancel(b)),state:a,steps:c}}const{schedule:hn,cancel:ks,state:xr,steps:Df}=CN(typeof requestAnimationFrame<"u"?requestAnimationFrame:Pn,!0),SN={useVisualState:n_({scrapeMotionValuesFromProps:e_,createRenderState:Kv,onMount:(e,t,{renderState:n,latestValues:i})=>{hn.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),hn.render(()=>{H1(n,i,{enableHardwareAcceleration:!1},W1(t.tagName),e.transformTemplate),Jv(t,n)})}})},AN={useVisualState:n_({scrapeMotionValuesFromProps:G1,createRenderState:V1})};function EN(e,{forwardMotionProps:t=!1},n,i){return{...z1(e)?SN:AN,preloadedFeatures:n,useRender:gN(t),createVisualElement:i,Component:e}}function vs(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}const r_=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Dh(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const NN=e=>t=>r_(t)&&e(t,Dh(t));function Ss(e,t,n,i){return vs(e,t,NN(n),i)}const TN=(e,t)=>n=>t(e(n)),xo=(...e)=>e.reduce(TN);function i_(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const vx=i_("dragHorizontal"),_x=i_("dragVertical");function s_(e){let t=!1;if(e==="y")t=_x();else if(e==="x")t=vx();else{const n=vx(),i=_x();n&&i?t=()=>{n(),i()}:(n&&n(),i&&i())}return t}function o_(){const e=s_(!0);return e?(e(),!1):!0}class Mo{constructor(t){this.isMounted=!1,this.node=t}update(){}}function bx(e,t){const n="pointer"+(t?"enter":"leave"),i="onHover"+(t?"Start":"End"),a=(c,f)=>{if(c.pointerType==="touch"||o_())return;const g=e.getProps();e.animationState&&g.whileHover&&e.animationState.setActive("whileHover",t),g[i]&&hn.update(()=>g[i](c,f))};return Ss(e.current,n,a,{passive:!e.getProps()[i]})}class IN extends Mo{mount(){this.unmount=xo(bx(this.node,!0),bx(this.node,!1))}unmount(){}}class kN extends Mo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xo(vs(this.node.current,"focus",()=>this.onFocus()),vs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const a_=(e,t)=>t?e===t?!0:a_(e,t.parentElement):!1;function jf(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Dh(n))}class MN extends Mo{constructor(){super(...arguments),this.removeStartListeners=Pn,this.removeEndListeners=Pn,this.removeAccessibleListeners=Pn,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),c=Ss(window,"pointerup",(g,v)=>{if(!this.checkPressEnd())return;const{onTap:y,onTapCancel:C,globalTapTarget:b}=this.node.getProps();hn.update(()=>{!b&&!a_(this.node.current,g.target)?C&&C(g,v):y&&y(g,v)})},{passive:!(i.onTap||i.onPointerUp)}),f=Ss(window,"pointercancel",(g,v)=>this.cancelPress(g,v),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=xo(c,f),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=c=>{if(c.key!=="Enter"||this.isPressing)return;const f=g=>{g.key!=="Enter"||!this.checkPressEnd()||jf("up",(v,y)=>{const{onTap:C}=this.node.getProps();C&&hn.update(()=>C(v,y))})};this.removeEndListeners(),this.removeEndListeners=vs(this.node.current,"keyup",f),jf("down",(g,v)=>{this.startPress(g,v)})},n=vs(this.node.current,"keydown",t),i=()=>{this.isPressing&&jf("cancel",(c,f)=>this.cancelPress(c,f))},a=vs(this.node.current,"blur",i);this.removeAccessibleListeners=xo(n,a)}}startPress(t,n){this.isPressing=!0;const{onTapStart:i,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&hn.update(()=>i(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!o_()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&hn.update(()=>i(t,n))}mount(){const t=this.node.getProps(),n=Ss(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),i=vs(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=xo(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const rp=new WeakMap,Bf=new WeakMap,RN=e=>{const t=rp.get(e.target);t&&t(e)},ON=e=>{e.forEach(RN)};function LN({root:e,...t}){const n=e||document;Bf.has(n)||Bf.set(n,{});const i=Bf.get(n),a=JSON.stringify(t);return i[a]||(i[a]=new IntersectionObserver(ON,{root:e,...t})),i[a]}function PN(e,t,n){const i=LN(t);return rp.set(e,n),i.observe(e),()=>{rp.delete(e),i.unobserve(e)}}const DN={some:0,all:1};class jN extends Mo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:a="some",once:c}=t,f={root:n?n.current:void 0,rootMargin:i,threshold:typeof a=="number"?a:DN[a]},g=v=>{const{isIntersecting:y}=v;if(this.isInView===y||(this.isInView=y,c&&!y&&this.hasEnteredView))return;y&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",y);const{onViewportEnter:C,onViewportLeave:b}=this.node.getProps(),T=y?C:b;T&&T(v)};return PN(this.node.current,f,g)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(BN(t,n))&&this.startObserver()}unmount(){}}function BN({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const FN={inView:{Feature:jN},tap:{Feature:MN},focus:{Feature:kN},hover:{Feature:IN}};function l_(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function zN(e){const t={};return e.values.forEach((n,i)=>t[i]=n.get()),t}function UN(e){const t={};return e.values.forEach((n,i)=>t[i]=n.getVelocity()),t}function jh(e,t,n){const i=e.getProps();return Z1(i,t,n!==void 0?n:i.custom,zN(e),UN(e))}let Y1=Pn;const sa=e=>e*1e3,As=e=>e/1e3,VN={current:!1},c_=e=>Array.isArray(e)&&typeof e[0]=="number";function u_(e){return!!(!e||typeof e=="string"&&d_[e]||c_(e)||Array.isArray(e)&&e.every(u_))}const nc=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,d_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:nc([0,.65,.55,1]),circOut:nc([.55,0,1,.45]),backIn:nc([.31,.01,.66,-.59]),backOut:nc([.33,1.53,.69,.99])};function h_(e){if(e)return c_(e)?nc(e):Array.isArray(e)?e.map(h_):d_[e]}function HN(e,t,n,{delay:i=0,duration:a,repeat:c=0,repeatType:f="loop",ease:g,times:v}={}){const y={[t]:n};v&&(y.offset=v);const C=h_(g);return Array.isArray(C)&&(y.easing=C),e.animate(y,{delay:i,duration:a,easing:Array.isArray(C)?"linear":C,fill:"both",iterations:c+1,direction:f==="reverse"?"alternate":"normal"})}function WN(e,{repeat:t,repeatType:n="loop"}){const i=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[i]}const f_=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,GN=1e-7,ZN=12;function YN(e,t,n,i,a){let c,f,g=0;do f=t+(n-t)/2,c=f_(f,i,a)-e,c>0?n=f:t=f;while(Math.abs(c)>GN&&++g<ZN);return f}function ru(e,t,n,i){if(e===t&&n===i)return Pn;const a=c=>YN(c,0,1,e,n);return c=>c===0||c===1?c:f_(a(c),t,i)}const XN=ru(.42,0,1,1),qN=ru(0,0,.58,1),p_=ru(.42,0,.58,1),KN=e=>Array.isArray(e)&&typeof e[0]!="number",m_=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,g_=e=>t=>1-e(1-t),X1=e=>1-Math.sin(Math.acos(e)),x_=g_(X1),QN=m_(X1),y_=ru(.33,1.53,.69,.99),q1=g_(y_),$N=m_(q1),JN=e=>(e*=2)<1?.5*q1(e):.5*(2-Math.pow(2,-10*(e-1))),e4={linear:Pn,easeIn:XN,easeInOut:p_,easeOut:qN,circIn:X1,circInOut:QN,circOut:x_,backIn:q1,backInOut:$N,backOut:y_,anticipate:JN},Cx=e=>{if(Array.isArray(e)){Y1(e.length===4);const[t,n,i,a]=e;return ru(t,n,i,a)}else if(typeof e=="string")return e4[e];return e},K1=(e,t)=>n=>!!(tu(n)&&nN.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),w_=(e,t,n)=>i=>{if(!tu(i))return i;const[a,c,f,g]=i.match(Ph);return{[e]:parseFloat(a),[t]:parseFloat(c),[n]:parseFloat(f),alpha:g!==void 0?parseFloat(g):1}},t4=e=>Co(0,255,e),Ff={...va,transform:e=>Math.round(t4(e))},ta={test:K1("rgb","red"),parse:w_("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+Ff.transform(e)+", "+Ff.transform(t)+", "+Ff.transform(n)+", "+pc(fc.transform(i))+")"};function n4(e){let t="",n="",i="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,i+=i,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:a?parseInt(a,16)/255:1}}const ip={test:K1("#"),parse:n4,transform:ta.transform},Za={test:K1("hsl","hue"),parse:w_("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+ss.transform(pc(t))+", "+ss.transform(pc(n))+", "+pc(fc.transform(i))+")"},Ir={test:e=>ta.test(e)||ip.test(e)||Za.test(e),parse:e=>ta.test(e)?ta.parse(e):Za.test(e)?Za.parse(e):ip.parse(e),transform:e=>tu(e)?e:e.hasOwnProperty("red")?ta.transform(e):Za.transform(e)},En=(e,t,n)=>-n*e+n*t+e;function zf(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function r4({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let a=0,c=0,f=0;if(!t)a=c=f=n;else{const g=n<.5?n*(1+t):n+t-n*t,v=2*n-g;a=zf(v,g,e+1/3),c=zf(v,g,e),f=zf(v,g,e-1/3)}return{red:Math.round(a*255),green:Math.round(c*255),blue:Math.round(f*255),alpha:i}}const Uf=(e,t,n)=>{const i=e*e;return Math.sqrt(Math.max(0,n*(t*t-i)+i))},i4=[ip,ta,Za],s4=e=>i4.find(t=>t.test(e));function Sx(e){const t=s4(e);let n=t.parse(e);return t===Za&&(n=r4(n)),n}const v_=(e,t)=>{const n=Sx(e),i=Sx(t),a={...n};return c=>(a.red=Uf(n.red,i.red,c),a.green=Uf(n.green,i.green,c),a.blue=Uf(n.blue,i.blue,c),a.alpha=En(n.alpha,i.alpha,c),ta.transform(a))};function o4(e){var t,n;return isNaN(e)&&tu(e)&&(((t=e.match(Ph))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(Zv))===null||n===void 0?void 0:n.length)||0)>0}const __={regex:eN,countKey:"Vars",token:"${v}",parse:Pn},b_={regex:Zv,countKey:"Colors",token:"${c}",parse:Ir.parse},C_={regex:Ph,countKey:"Numbers",token:"${n}",parse:va.parse};function Vf(e,{regex:t,countKey:n,token:i,parse:a}){const c=e.tokenised.match(t);c&&(e["num"+n]=c.length,e.tokenised=e.tokenised.replace(t,i),e.values.push(...c.map(a)))}function Vd(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Vf(n,__),Vf(n,b_),Vf(n,C_),n}function S_(e){return Vd(e).values}function A_(e){const{values:t,numColors:n,numVars:i,tokenised:a}=Vd(e),c=t.length;return f=>{let g=a;for(let v=0;v<c;v++)v<i?g=g.replace(__.token,f[v]):v<i+n?g=g.replace(b_.token,Ir.transform(f[v])):g=g.replace(C_.token,pc(f[v]));return g}}const a4=e=>typeof e=="number"?0:e;function l4(e){const t=S_(e);return A_(e)(t.map(a4))}const So={test:o4,parse:S_,createTransformer:A_,getAnimatableNone:l4},E_=(e,t)=>n=>`${n>0?t:e}`;function N_(e,t){return typeof e=="number"?n=>En(e,t,n):Ir.test(e)?v_(e,t):e.startsWith("var(")?E_(e,t):I_(e,t)}const T_=(e,t)=>{const n=[...e],i=n.length,a=e.map((c,f)=>N_(c,t[f]));return c=>{for(let f=0;f<i;f++)n[f]=a[f](c);return n}},c4=(e,t)=>{const n={...e,...t},i={};for(const a in n)e[a]!==void 0&&t[a]!==void 0&&(i[a]=N_(e[a],t[a]));return a=>{for(const c in i)n[c]=i[c](a);return n}},I_=(e,t)=>{const n=So.createTransformer(t),i=Vd(e),a=Vd(t);return i.numVars===a.numVars&&i.numColors===a.numColors&&i.numNumbers>=a.numNumbers?xo(T_(i.values,a.values),n):E_(e,t)},Vc=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i},Ax=(e,t)=>n=>En(e,t,n);function u4(e){return typeof e=="number"?Ax:typeof e=="string"?Ir.test(e)?v_:I_:Array.isArray(e)?T_:typeof e=="object"?c4:Ax}function d4(e,t,n){const i=[],a=n||u4(e[0]),c=e.length-1;for(let f=0;f<c;f++){let g=a(e[f],e[f+1]);if(t){const v=Array.isArray(t)?t[f]||Pn:t;g=xo(v,g)}i.push(g)}return i}function k_(e,t,{clamp:n=!0,ease:i,mixer:a}={}){const c=e.length;if(Y1(c===t.length),c===1)return()=>t[0];e[0]>e[c-1]&&(e=[...e].reverse(),t=[...t].reverse());const f=d4(t,i,a),g=f.length,v=y=>{let C=0;if(g>1)for(;C<e.length-2&&!(y<e[C+1]);C++);const b=Vc(e[C],e[C+1],y);return f[C](b)};return n?y=>v(Co(e[0],e[c-1],y)):v}function h4(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const a=Vc(0,t,i);e.push(En(n,1,a))}}function f4(e){const t=[0];return h4(t,e.length-1),t}function p4(e,t){return e.map(n=>n*t)}function m4(e,t){return e.map(()=>t||p_).splice(0,e.length-1)}function Hd({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const a=KN(i)?i.map(Cx):Cx(i),c={done:!1,value:t[0]},f=p4(n&&n.length===t.length?n:f4(t),e),g=k_(f,t,{ease:Array.isArray(a)?a:m4(t,a)});return{calculatedDuration:e,next:v=>(c.value=g(v),c.done=v>=e,c)}}function M_(e,t){return t?e*(1e3/t):0}const g4=5;function R_(e,t,n){const i=Math.max(t-g4,0);return M_(n-e(i),t-i)}const Hf=.001,x4=.01,y4=10,w4=.05,v4=1;function _4({duration:e=800,bounce:t=.25,velocity:n=0,mass:i=1}){let a,c,f=1-t;f=Co(w4,v4,f),e=Co(x4,y4,As(e)),f<1?(a=y=>{const C=y*f,b=C*e,T=C-n,I=sp(y,f),z=Math.exp(-b);return Hf-T/I*z},c=y=>{const b=y*f*e,T=b*n+n,I=Math.pow(f,2)*Math.pow(y,2)*e,z=Math.exp(-b),R=sp(Math.pow(y,2),f);return(-a(y)+Hf>0?-1:1)*((T-I)*z)/R}):(a=y=>{const C=Math.exp(-y*e),b=(y-n)*e+1;return-Hf+C*b},c=y=>{const C=Math.exp(-y*e),b=(n-y)*(e*e);return C*b});const g=5/e,v=C4(a,c,g);if(e=sa(e),isNaN(v))return{stiffness:100,damping:10,duration:e};{const y=Math.pow(v,2)*i;return{stiffness:y,damping:f*2*Math.sqrt(i*y),duration:e}}}const b4=12;function C4(e,t,n){let i=n;for(let a=1;a<b4;a++)i=i-e(i)/t(i);return i}function sp(e,t){return e*Math.sqrt(1-t*t)}const S4=["duration","bounce"],A4=["stiffness","damping","mass"];function Ex(e,t){return t.some(n=>e[n]!==void 0)}function E4(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Ex(e,A4)&&Ex(e,S4)){const n=_4(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function O_({keyframes:e,restDelta:t,restSpeed:n,...i}){const a=e[0],c=e[e.length-1],f={done:!1,value:a},{stiffness:g,damping:v,mass:y,duration:C,velocity:b,isResolvedFromDuration:T}=E4({...i,velocity:-As(i.velocity||0)}),I=b||0,z=v/(2*Math.sqrt(g*y)),R=c-a,B=As(Math.sqrt(g/y)),F=Math.abs(R)<5;n||(n=F?.01:2),t||(t=F?.005:.5);let P;if(z<1){const k=sp(B,z);P=G=>{const K=Math.exp(-z*B*G);return c-K*((I+z*B*R)/k*Math.sin(k*G)+R*Math.cos(k*G))}}else if(z===1)P=k=>c-Math.exp(-B*k)*(R+(I+B*R)*k);else{const k=B*Math.sqrt(z*z-1);P=G=>{const K=Math.exp(-z*B*G),q=Math.min(k*G,300);return c-K*((I+z*B*R)*Math.sinh(q)+k*R*Math.cosh(q))/k}}return{calculatedDuration:T&&C||null,next:k=>{const G=P(k);if(T)f.done=k>=C;else{let K=I;k!==0&&(z<1?K=R_(P,k,G):K=0);const q=Math.abs(K)<=n,Y=Math.abs(c-G)<=t;f.done=q&&Y}return f.value=f.done?c:G,f}}}function Nx({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:a=10,bounceStiffness:c=500,modifyTarget:f,min:g,max:v,restDelta:y=.5,restSpeed:C}){const b=e[0],T={done:!1,value:b},I=ee=>g!==void 0&&ee<g||v!==void 0&&ee>v,z=ee=>g===void 0?v:v===void 0||Math.abs(g-ee)<Math.abs(v-ee)?g:v;let R=n*t;const B=b+R,F=f===void 0?B:f(B);F!==B&&(R=F-b);const P=ee=>-R*Math.exp(-ee/i),k=ee=>F+P(ee),G=ee=>{const M=P(ee),H=k(ee);T.done=Math.abs(M)<=y,T.value=T.done?F:H};let K,q;const Y=ee=>{I(T.value)&&(K=ee,q=O_({keyframes:[T.value,z(T.value)],velocity:R_(k,ee,T.value),damping:a,stiffness:c,restDelta:y,restSpeed:C}))};return Y(0),{calculatedDuration:null,next:ee=>{let M=!1;return!q&&K===void 0&&(M=!0,G(ee),Y(ee)),K!==void 0&&ee>K?q.next(ee-K):(!M&&G(ee),T)}}}const N4=e=>{const t=({timestamp:n})=>e(n);return{start:()=>hn.update(t,!0),stop:()=>ks(t),now:()=>xr.isProcessing?xr.timestamp:performance.now()}},Tx=2e4;function Ix(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<Tx;)t+=n,i=e.next(t);return t>=Tx?1/0:t}const T4={decay:Nx,inertia:Nx,tween:Hd,keyframes:Hd,spring:O_};function Wd({autoplay:e=!0,delay:t=0,driver:n=N4,keyframes:i,type:a="keyframes",repeat:c=0,repeatDelay:f=0,repeatType:g="loop",onPlay:v,onStop:y,onComplete:C,onUpdate:b,...T}){let I=1,z=!1,R,B;const F=()=>{B=new Promise(xe=>{R=xe})};F();let P;const k=T4[a]||Hd;let G;k!==Hd&&typeof i[0]!="number"&&(G=k_([0,100],i,{clamp:!1}),i=[0,100]);const K=k({...T,keyframes:i});let q;g==="mirror"&&(q=k({...T,keyframes:[...i].reverse(),velocity:-(T.velocity||0)}));let Y="idle",ee=null,M=null,H=null;K.calculatedDuration===null&&c&&(K.calculatedDuration=Ix(K));const{calculatedDuration:$}=K;let se=1/0,be=1/0;$!==null&&(se=$+f,be=se*(c+1)-f);let Ne=0;const oe=xe=>{if(M===null)return;I>0&&(M=Math.min(M,xe)),I<0&&(M=Math.min(xe-be/I,M)),ee!==null?Ne=ee:Ne=Math.round(xe-M)*I;const Le=Ne-t*(I>=0?1:-1),Ke=I>=0?Le<0:Le>be;Ne=Math.max(Le,0),Y==="finished"&&ee===null&&(Ne=be);let Fe=Ne,ne=K;if(c){const Ue=Math.min(Ne,be)/se;let nt=Math.floor(Ue),Ze=Ue%1;!Ze&&Ue>=1&&(Ze=1),Ze===1&&nt--,nt=Math.min(nt,c+1),!!(nt%2)&&(g==="reverse"?(Ze=1-Ze,f&&(Ze-=f/se)):g==="mirror"&&(ne=q)),Fe=Co(0,1,Ze)*se}const ae=Ke?{done:!1,value:i[0]}:ne.next(Fe);G&&(ae.value=G(ae.value));let{done:je}=ae;!Ke&&$!==null&&(je=I>=0?Ne>=be:Ne<=0);const Qe=ee===null&&(Y==="finished"||Y==="running"&&je);return b&&b(ae.value),Qe&&ie(),ae},le=()=>{P&&P.stop(),P=void 0},ke=()=>{Y="idle",le(),R(),F(),M=H=null},ie=()=>{Y="finished",C&&C(),le(),R()},Ae=()=>{if(z)return;P||(P=n(oe));const xe=P.now();v&&v(),ee!==null?M=xe-ee:(!M||Y==="finished")&&(M=xe),Y==="finished"&&F(),H=M,ee=null,Y="running",P.start()};e&&Ae();const ve={then(xe,Le){return B.then(xe,Le)},get time(){return As(Ne)},set time(xe){xe=sa(xe),Ne=xe,ee!==null||!P||I===0?ee=xe:M=P.now()-xe/I},get duration(){const xe=K.calculatedDuration===null?Ix(K):K.calculatedDuration;return As(xe)},get speed(){return I},set speed(xe){xe===I||!P||(I=xe,ve.time=As(Ne))},get state(){return Y},play:Ae,pause:()=>{Y="paused",ee=Ne},stop:()=>{z=!0,Y!=="idle"&&(Y="idle",y&&y(),ke())},cancel:()=>{H!==null&&oe(H),ke()},complete:()=>{Y="finished"},sample:xe=>(M=0,oe(xe))};return ve}function I4(e){let t;return()=>(t===void 0&&(t=e()),t)}const k4=I4(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),M4=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),zu=10,R4=2e4,O4=(e,t)=>t.type==="spring"||e==="backgroundColor"||!u_(t.ease);function L4(e,t,{onUpdate:n,onComplete:i,...a}){if(!(k4()&&M4.has(t)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let f=!1,g,v,y=!1;const C=()=>{v=new Promise(k=>{g=k})};C();let{keyframes:b,duration:T=300,ease:I,times:z}=a;if(O4(t,a)){const k=Wd({...a,repeat:0,delay:0});let G={done:!1,value:b[0]};const K=[];let q=0;for(;!G.done&&q<R4;)G=k.sample(q),K.push(G.value),q+=zu;z=void 0,b=K,T=q-zu,I="linear"}const R=HN(e.owner.current,t,b,{...a,duration:T,ease:I,times:z}),B=()=>{y=!1,R.cancel()},F=()=>{y=!0,hn.update(B),g(),C()};return R.onfinish=()=>{y||(e.set(WN(b,a)),i&&i(),F())},{then(k,G){return v.then(k,G)},attachTimeline(k){return R.timeline=k,R.onfinish=null,Pn},get time(){return As(R.currentTime||0)},set time(k){R.currentTime=sa(k)},get speed(){return R.playbackRate},set speed(k){R.playbackRate=k},get duration(){return As(T)},play:()=>{f||(R.play(),ks(B))},pause:()=>R.pause(),stop:()=>{if(f=!0,R.playState==="idle")return;const{currentTime:k}=R;if(k){const G=Wd({...a,autoplay:!1});e.setWithVelocity(G.sample(k-zu).value,G.sample(k).value,zu)}F()},complete:()=>{y||R.finish()},cancel:F}}function P4({keyframes:e,delay:t,onUpdate:n,onComplete:i}){const a=()=>(n&&n(e[e.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Pn,pause:Pn,stop:Pn,then:c=>(c(),Promise.resolve()),cancel:Pn,complete:Pn});return t?Wd({keyframes:[0,1],duration:0,delay:t,onComplete:a}):a()}const D4={type:"spring",stiffness:500,damping:25,restSpeed:10},j4=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),B4={type:"keyframes",duration:.8},F4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},z4=(e,{keyframes:t})=>t.length>2?B4:wa.has(e)?e.startsWith("scale")?j4(t[1]):D4:F4,op=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(So.test(t)||t==="0")&&!t.startsWith("url(")),U4=new Set(["brightness","contrast","saturate","opacity"]);function V4(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(Ph)||[];if(!i)return e;const a=n.replace(i,"");let c=U4.has(t)?1:0;return i!==n&&(c*=100),t+"("+c+a+")"}const H4=/([a-z-]*)\(.*?\)/g,ap={...So,getAnimatableNone:e=>{const t=e.match(H4);return t?t.map(V4).join(" "):e}},W4={...Yv,color:Ir,backgroundColor:Ir,outlineColor:Ir,fill:Ir,stroke:Ir,borderColor:Ir,borderTopColor:Ir,borderRightColor:Ir,borderBottomColor:Ir,borderLeftColor:Ir,filter:ap,WebkitFilter:ap},Q1=e=>W4[e];function L_(e,t){let n=Q1(e);return n!==ap&&(n=So),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const P_=e=>/^0[^.\s]+$/.test(e);function G4(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||P_(e)}function Z4(e,t,n,i){const a=op(t,n);let c;Array.isArray(n)?c=[...n]:c=[null,n];const f=i.from!==void 0?i.from:e.get();let g;const v=[];for(let y=0;y<c.length;y++)c[y]===null&&(c[y]=y===0?f:c[y-1]),G4(c[y])&&v.push(y),typeof c[y]=="string"&&c[y]!=="none"&&c[y]!=="0"&&(g=c[y]);if(a&&v.length&&g)for(let y=0;y<v.length;y++){const C=v[y];c[C]=L_(t,g)}return c}function Y4({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:a,repeat:c,repeatType:f,repeatDelay:g,from:v,elapsed:y,...C}){return!!Object.keys(C).length}function $1(e,t){return e[t]||e.default||e}const X4={skipAnimations:!1},J1=(e,t,n,i={})=>a=>{const c=$1(i,e)||{},f=c.delay||i.delay||0;let{elapsed:g=0}=i;g=g-sa(f);const v=Z4(t,e,n,c),y=v[0],C=v[v.length-1],b=op(e,y),T=op(e,C);let I={keyframes:v,velocity:t.getVelocity(),ease:"easeOut",...c,delay:-g,onUpdate:z=>{t.set(z),c.onUpdate&&c.onUpdate(z)},onComplete:()=>{a(),c.onComplete&&c.onComplete()}};if(Y4(c)||(I={...I,...z4(e,I)}),I.duration&&(I.duration=sa(I.duration)),I.repeatDelay&&(I.repeatDelay=sa(I.repeatDelay)),!b||!T||VN.current||c.type===!1||X4.skipAnimations)return P4(I);if(!i.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const z=L4(t,e,I);if(z)return z}return Wd(I)};function Gd(e){return!!(Zr(e)&&e.add)}const D_=e=>/^\-?\d*\.?\d+$/.test(e);function em(e,t){e.indexOf(t)===-1&&e.push(t)}function tm(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class nm{constructor(){this.subscriptions=[]}add(t){return em(this.subscriptions,t),()=>tm(this.subscriptions,t)}notify(t,n,i){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,n,i);else for(let c=0;c<a;c++){const f=this.subscriptions[c];f&&f(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const q4=e=>!isNaN(parseFloat(e));class K4{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,a=!0)=>{this.prev=this.current,this.current=i;const{delta:c,timestamp:f}=xr;this.lastUpdated!==f&&(this.timeDelta=c,this.lastUpdated=f,hn.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>hn.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=q4(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new nm);const i=this.events[t].add(n);return t==="change"?()=>{i(),hn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,i){this.set(n),this.prev=t,this.timeDelta=i}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?M_(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function hl(e,t){return new K4(e,t)}const j_=e=>t=>t.test(e),Q4={test:e=>e==="auto",parse:e=>e},B_=[va,xt,ss,qs,iN,rN,Q4],Yl=e=>B_.find(j_(e)),$4=[...B_,Ir,So],J4=e=>$4.find(j_(e));function eT(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,hl(n))}function tT(e,t){const n=jh(e,t);let{transitionEnd:i={},transition:a={},...c}=n?e.makeTargetAnimatable(n,!1):{};c={...c,...i};for(const f in c){const g=yN(c[f]);eT(e,f,g)}}function nT(e,t,n){var i,a;const c=Object.keys(t).filter(g=>!e.hasValue(g)),f=c.length;if(f)for(let g=0;g<f;g++){const v=c[g],y=t[v];let C=null;Array.isArray(y)&&(C=y[0]),C===null&&(C=(a=(i=n[v])!==null&&i!==void 0?i:e.readValue(v))!==null&&a!==void 0?a:t[v]),C!=null&&(typeof C=="string"&&(D_(C)||P_(C))?C=parseFloat(C):!J4(C)&&So.test(y)&&(C=L_(v,y)),e.addValue(v,hl(C,{owner:e})),n[v]===void 0&&(n[v]=C),C!==null&&e.setBaseTarget(v,C))}}function rT(e,t){return t?(t[e]||t.default||t).from:void 0}function iT(e,t,n){const i={};for(const a in e){const c=rT(a,t);if(c!==void 0)i[a]=c;else{const f=n.getValue(a);f&&(i[a]=f.get())}}return i}function sT({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function oT(e,t){const n=e.get();if(Array.isArray(t)){for(let i=0;i<t.length;i++)if(t[i]!==n)return!0}else return n!==t}function F_(e,t,{delay:n=0,transitionOverride:i,type:a}={}){let{transition:c=e.getDefaultTransition(),transitionEnd:f,...g}=e.makeTargetAnimatable(t);const v=e.getValue("willChange");i&&(c=i);const y=[],C=a&&e.animationState&&e.animationState.getState()[a];for(const b in g){const T=e.getValue(b),I=g[b];if(!T||I===void 0||C&&sT(C,b))continue;const z={delay:n,elapsed:0,...$1(c||{},b)};if(window.HandoffAppearAnimations){const F=e.getProps()[zv];if(F){const P=window.HandoffAppearAnimations(F,b,T,hn);P!==null&&(z.elapsed=P,z.isHandoff=!0)}}let R=!z.isHandoff&&!oT(T,I);if(z.type==="spring"&&(T.getVelocity()||z.velocity)&&(R=!1),T.animation&&(R=!1),R)continue;T.start(J1(b,T,I,e.shouldReduceMotion&&wa.has(b)?{type:!1}:z));const B=T.animation;Gd(v)&&(v.add(b),B.then(()=>v.remove(b))),y.push(B)}return f&&Promise.all(y).then(()=>{f&&tT(e,f)}),y}function lp(e,t,n={}){const i=jh(e,t,n.custom);let{transition:a=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const c=i?()=>Promise.all(F_(e,i,n)):()=>Promise.resolve(),f=e.variantChildren&&e.variantChildren.size?(v=0)=>{const{delayChildren:y=0,staggerChildren:C,staggerDirection:b}=a;return aT(e,t,y+v,C,b,n)}:()=>Promise.resolve(),{when:g}=a;if(g){const[v,y]=g==="beforeChildren"?[c,f]:[f,c];return v().then(()=>y())}else return Promise.all([c(),f(n.delay)])}function aT(e,t,n=0,i=0,a=1,c){const f=[],g=(e.variantChildren.size-1)*i,v=a===1?(y=0)=>y*i:(y=0)=>g-y*i;return Array.from(e.variantChildren).sort(lT).forEach((y,C)=>{y.notify("AnimationStart",t),f.push(lp(y,t,{...c,delay:n+v(C)}).then(()=>y.notify("AnimationComplete",t)))}),Promise.all(f)}function lT(e,t){return e.sortNodePosition(t)}function cT(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const a=t.map(c=>lp(e,c,n));i=Promise.all(a)}else if(typeof t=="string")i=lp(e,t,n);else{const a=typeof t=="function"?jh(e,t,n.custom):t;i=Promise.all(F_(e,a,n))}return i.then(()=>e.notify("AnimationComplete",t))}const uT=[...j1].reverse(),dT=j1.length;function hT(e){return t=>Promise.all(t.map(({animation:n,options:i})=>cT(e,n,i)))}function fT(e){let t=hT(e);const n=mT();let i=!0;const a=(v,y)=>{const C=jh(e,y);if(C){const{transition:b,transitionEnd:T,...I}=C;v={...v,...I,...T}}return v};function c(v){t=v(e)}function f(v,y){const C=e.getProps(),b=e.getVariantContext(!0)||{},T=[],I=new Set;let z={},R=1/0;for(let F=0;F<dT;F++){const P=uT[F],k=n[P],G=C[P]!==void 0?C[P]:b[P],K=zc(G),q=P===y?k.isActive:null;q===!1&&(R=F);let Y=G===b[P]&&G!==C[P]&&K;if(Y&&i&&e.manuallyAnimateOnMount&&(Y=!1),k.protectedKeys={...z},!k.isActive&&q===null||!G&&!k.prevProp||Oh(G)||typeof G=="boolean")continue;let M=pT(k.prevProp,G)||P===y&&k.isActive&&!Y&&K||F>R&&K,H=!1;const $=Array.isArray(G)?G:[G];let se=$.reduce(a,{});q===!1&&(se={});const{prevResolvedValues:be={}}=k,Ne={...be,...se},oe=le=>{M=!0,I.has(le)&&(H=!0,I.delete(le)),k.needsAnimating[le]=!0};for(const le in Ne){const ke=se[le],ie=be[le];if(z.hasOwnProperty(le))continue;let Ae=!1;Ud(ke)&&Ud(ie)?Ae=!l_(ke,ie):Ae=ke!==ie,Ae?ke!==void 0?oe(le):I.add(le):ke!==void 0&&I.has(le)?oe(le):k.protectedKeys[le]=!0}k.prevProp=G,k.prevResolvedValues=se,k.isActive&&(z={...z,...se}),i&&e.blockInitialAnimation&&(M=!1),M&&(!Y||H)&&T.push(...$.map(le=>({animation:le,options:{type:P,...v}})))}if(I.size){const F={};I.forEach(P=>{const k=e.getBaseTarget(P);k!==void 0&&(F[P]=k)}),T.push({animation:F})}let B=!!T.length;return i&&(C.initial===!1||C.initial===C.animate)&&!e.manuallyAnimateOnMount&&(B=!1),i=!1,B?t(T):Promise.resolve()}function g(v,y,C){var b;if(n[v].isActive===y)return Promise.resolve();(b=e.variantChildren)===null||b===void 0||b.forEach(I=>{var z;return(z=I.animationState)===null||z===void 0?void 0:z.setActive(v,y)}),n[v].isActive=y;const T=f(C,v);for(const I in n)n[I].protectedKeys={};return T}return{animateChanges:f,setActive:g,setAnimateFunction:c,getState:()=>n}}function pT(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!l_(t,e):!1}function Wo(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function mT(){return{animate:Wo(!0),whileInView:Wo(),whileHover:Wo(),whileTap:Wo(),whileDrag:Wo(),whileFocus:Wo(),exit:Wo()}}class gT extends Mo{constructor(t){super(t),t.animationState||(t.animationState=fT(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Oh(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let xT=0;class yT extends Mo{constructor(){super(...arguments),this.id=xT++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const c=this.node.animationState.setActive("exit",!t,{custom:i??this.node.getProps().custom});n&&!t&&c.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const wT={animation:{Feature:gT},exit:{Feature:yT}},kx=(e,t)=>Math.abs(e-t);function vT(e,t){const n=kx(e.x,t.x),i=kx(e.y,t.y);return Math.sqrt(n**2+i**2)}class z_{constructor(t,n,{transformPagePoint:i,contextWindow:a,dragSnapToOrigin:c=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Gf(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,I=vT(b.offset,{x:0,y:0})>=3;if(!T&&!I)return;const{point:z}=b,{timestamp:R}=xr;this.history.push({...z,timestamp:R});const{onStart:B,onMove:F}=this.handlers;T||(B&&B(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),F&&F(this.lastMoveEvent,b)},this.handlePointerMove=(b,T)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=Wf(T,this.transformPagePoint),hn.update(this.updatePoint,!0)},this.handlePointerUp=(b,T)=>{this.end();const{onEnd:I,onSessionEnd:z,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const B=Gf(b.type==="pointercancel"?this.lastMoveEventInfo:Wf(T,this.transformPagePoint),this.history);this.startEvent&&I&&I(b,B),z&&z(b,B)},!r_(t))return;this.dragSnapToOrigin=c,this.handlers=n,this.transformPagePoint=i,this.contextWindow=a||window;const f=Dh(t),g=Wf(f,this.transformPagePoint),{point:v}=g,{timestamp:y}=xr;this.history=[{...v,timestamp:y}];const{onSessionStart:C}=n;C&&C(t,Gf(g,this.history)),this.removeListeners=xo(Ss(this.contextWindow,"pointermove",this.handlePointerMove),Ss(this.contextWindow,"pointerup",this.handlePointerUp),Ss(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ks(this.updatePoint)}}function Wf(e,t){return t?{point:t(e.point)}:e}function Mx(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Gf({point:e},t){return{point:e,delta:Mx(e,U_(t)),offset:Mx(e,_T(t)),velocity:bT(t,.1)}}function _T(e){return e[0]}function U_(e){return e[e.length-1]}function bT(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const a=U_(e);for(;n>=0&&(i=e[n],!(a.timestamp-i.timestamp>sa(t)));)n--;if(!i)return{x:0,y:0};const c=As(a.timestamp-i.timestamp);if(c===0)return{x:0,y:0};const f={x:(a.x-i.x)/c,y:(a.y-i.y)/c};return f.x===1/0&&(f.x=0),f.y===1/0&&(f.y=0),f}function oi(e){return e.max-e.min}function cp(e,t=0,n=.01){return Math.abs(e-t)<=n}function Rx(e,t,n,i=.5){e.origin=i,e.originPoint=En(t.min,t.max,e.origin),e.scale=oi(n)/oi(t),(cp(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=En(n.min,n.max,e.origin)-e.originPoint,(cp(e.translate)||isNaN(e.translate))&&(e.translate=0)}function mc(e,t,n,i){Rx(e.x,t.x,n.x,i?i.originX:void 0),Rx(e.y,t.y,n.y,i?i.originY:void 0)}function Ox(e,t,n){e.min=n.min+t.min,e.max=e.min+oi(t)}function CT(e,t,n){Ox(e.x,t.x,n.x),Ox(e.y,t.y,n.y)}function Lx(e,t,n){e.min=t.min-n.min,e.max=e.min+oi(t)}function gc(e,t,n){Lx(e.x,t.x,n.x),Lx(e.y,t.y,n.y)}function ST(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?En(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?En(n,e,i.max):Math.min(e,n)),e}function Px(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function AT(e,{top:t,left:n,bottom:i,right:a}){return{x:Px(e.x,n,a),y:Px(e.y,t,i)}}function Dx(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function ET(e,t){return{x:Dx(e.x,t.x),y:Dx(e.y,t.y)}}function NT(e,t){let n=.5;const i=oi(e),a=oi(t);return a>i?n=Vc(t.min,t.max-i,e.min):i>a&&(n=Vc(e.min,e.max-a,t.min)),Co(0,1,n)}function TT(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const up=.35;function IT(e=up){return e===!1?e=0:e===!0&&(e=up),{x:jx(e,"left","right"),y:jx(e,"top","bottom")}}function jx(e,t,n){return{min:Bx(e,t),max:Bx(e,n)}}function Bx(e,t){return typeof e=="number"?e:e[t]||0}const Fx=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ya=()=>({x:Fx(),y:Fx()}),zx=()=>({min:0,max:0}),zn=()=>({x:zx(),y:zx()});function _i(e){return[e("x"),e("y")]}function V_({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function kT({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function MT(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Zf(e){return e===void 0||e===1}function dp({scale:e,scaleX:t,scaleY:n}){return!Zf(e)||!Zf(t)||!Zf(n)}function Xo(e){return dp(e)||H_(e)||e.z||e.rotate||e.rotateX||e.rotateY}function H_(e){return Ux(e.x)||Ux(e.y)}function Ux(e){return e&&e!=="0%"}function Zd(e,t,n){const i=e-n,a=t*i;return n+a}function Vx(e,t,n,i,a){return a!==void 0&&(e=Zd(e,a,i)),Zd(e,n,i)+t}function hp(e,t=0,n=1,i,a){e.min=Vx(e.min,t,n,i,a),e.max=Vx(e.max,t,n,i,a)}function W_(e,{x:t,y:n}){hp(e.x,t.translate,t.scale,t.originPoint),hp(e.y,n.translate,n.scale,n.originPoint)}function RT(e,t,n,i=!1){const a=n.length;if(!a)return;t.x=t.y=1;let c,f;for(let g=0;g<a;g++){c=n[g],f=c.projectionDelta;const v=c.instance;v&&v.style&&v.style.display==="contents"||(i&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Xa(e,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),f&&(t.x*=f.x.scale,t.y*=f.y.scale,W_(e,f)),i&&Xo(c.latestValues)&&Xa(e,c.latestValues))}t.x=Hx(t.x),t.y=Hx(t.y)}function Hx(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function $s(e,t){e.min=e.min+t,e.max=e.max+t}function Wx(e,t,[n,i,a]){const c=t[a]!==void 0?t[a]:.5,f=En(e.min,e.max,c);hp(e,t[n],t[i],f,t.scale)}const OT=["x","scaleX","originX"],LT=["y","scaleY","originY"];function Xa(e,t){Wx(e.x,t,OT),Wx(e.y,t,LT)}function G_(e,t){return V_(MT(e.getBoundingClientRect(),t))}function PT(e,t,n){const i=G_(e,n),{scroll:a}=t;return a&&($s(i.x,a.offset.x),$s(i.y,a.offset.y)),i}const Z_=({current:e})=>e?e.ownerDocument.defaultView:null,DT=new WeakMap;class jT{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=zn(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=C=>{const{dragSnapToOrigin:b}=this.getProps();b?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Dh(C,"page").point)},c=(C,b)=>{const{drag:T,dragPropagation:I,onDragStart:z}=this.getProps();if(T&&!I&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=s_(T),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_i(B=>{let F=this.getAxisMotionValue(B).get()||0;if(ss.test(F)){const{projection:P}=this.visualElement;if(P&&P.layout){const k=P.layout.layoutBox[B];k&&(F=oi(k)*(parseFloat(F)/100))}}this.originPoint[B]=F}),z&&hn.update(()=>z(C,b),!1,!0);const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},f=(C,b)=>{const{dragPropagation:T,dragDirectionLock:I,onDirectionLock:z,onDrag:R}=this.getProps();if(!T&&!this.openGlobalLock)return;const{offset:B}=b;if(I&&this.currentDirection===null){this.currentDirection=BT(B),this.currentDirection!==null&&z&&z(this.currentDirection);return}this.updateAxis("x",b.point,B),this.updateAxis("y",b.point,B),this.visualElement.render(),R&&R(C,b)},g=(C,b)=>this.stop(C,b),v=()=>_i(C=>{var b;return this.getAnimationState(C)==="paused"&&((b=this.getAxisMotionValue(C).animation)===null||b===void 0?void 0:b.play())}),{dragSnapToOrigin:y}=this.getProps();this.panSession=new z_(t,{onSessionStart:a,onStart:c,onMove:f,onSessionEnd:g,resumeAnimation:v},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,contextWindow:Z_(this.visualElement)})}stop(t,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:c}=this.getProps();c&&hn.update(()=>c(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:a}=this.getProps();if(!i||!Uu(t,a,this.currentDirection))return;const c=this.getAxisMotionValue(t);let f=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(f=ST(f,this.constraints[t],this.elastic[t])),c.set(f)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:i}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,c=this.constraints;n&&Ga(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&a?this.constraints=AT(a.layoutBox,n):this.constraints=!1,this.elastic=IT(i),c!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&_i(f=>{this.getAxisMotionValue(f)&&(this.constraints[f]=TT(a.layoutBox[f],this.constraints[f]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Ga(t))return!1;const i=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const c=PT(i,a.root,this.visualElement.getTransformPagePoint());let f=ET(a.layout.layoutBox,c);if(n){const g=n(kT(f));this.hasMutatedConstraints=!!g,g&&(f=V_(g))}return f}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:a,dragTransition:c,dragSnapToOrigin:f,onDragTransitionEnd:g}=this.getProps(),v=this.constraints||{},y=_i(C=>{if(!Uu(C,n,this.currentDirection))return;let b=v&&v[C]||{};f&&(b={min:0,max:0});const T=a?200:1e6,I=a?40:1e7,z={type:"inertia",velocity:i?t[C]:0,bounceStiffness:T,bounceDamping:I,timeConstant:750,restDelta:1,restSpeed:10,...c,...b};return this.startAxisValueAnimation(C,z)});return Promise.all(y).then(g)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return i.start(J1(t,i,0,n))}stopAnimation(){_i(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){_i(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),i=this.visualElement.getProps(),a=i[n];return a||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){_i(n=>{const{drag:i}=this.getProps();if(!Uu(n,i,this.currentDirection))return;const{projection:a}=this.visualElement,c=this.getAxisMotionValue(n);if(a&&a.layout){const{min:f,max:g}=a.layout.layoutBox[n];c.set(t[n]-En(f,g,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Ga(n)||!i||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};_i(f=>{const g=this.getAxisMotionValue(f);if(g){const v=g.get();a[f]=NT({min:v,max:v},this.constraints[f])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),_i(f=>{if(!Uu(f,t,null))return;const g=this.getAxisMotionValue(f),{min:v,max:y}=this.constraints[f];g.set(En(v,y,a[f]))})}addListeners(){if(!this.visualElement.current)return;DT.set(this.visualElement,this);const t=this.visualElement.current,n=Ss(t,"pointerdown",v=>{const{drag:y,dragListener:C=!0}=this.getProps();y&&C&&this.start(v)}),i=()=>{const{dragConstraints:v}=this.getProps();Ga(v)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,c=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),i();const f=vs(window,"resize",()=>this.scalePositionWithinConstraints()),g=a.addEventListener("didUpdate",({delta:v,hasLayoutChanged:y})=>{this.isDragging&&y&&(_i(C=>{const b=this.getAxisMotionValue(C);b&&(this.originPoint[C]+=v[C].translate,b.set(b.get()+v[C].translate))}),this.visualElement.render())});return()=>{f(),n(),c(),g&&g()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:a=!1,dragConstraints:c=!1,dragElastic:f=up,dragMomentum:g=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:a,dragConstraints:c,dragElastic:f,dragMomentum:g}}}function Uu(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function BT(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class FT extends Mo{constructor(t){super(t),this.removeGroupControls=Pn,this.removeListeners=Pn,this.controls=new jT(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Pn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Gx=e=>(t,n)=>{e&&hn.update(()=>e(t,n))};class zT extends Mo{constructor(){super(...arguments),this.removePointerDownListener=Pn}onPointerDown(t){this.session=new z_(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Z_(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:a}=this.node.getProps();return{onSessionStart:Gx(t),onStart:Gx(n),onMove:i,onEnd:(c,f)=>{delete this.session,a&&hn.update(()=>a(c,f))}}}mount(){this.removePointerDownListener=Ss(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function UT(){const e=O.useContext(Mh);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,a=O.useId();return O.useEffect(()=>i(a),[]),!t&&n?[!1,()=>n&&n(a)]:[!0]}const ld={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Zx(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Xl={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(xt.test(e))e=parseFloat(e);else return e;const n=Zx(e,t.target.x),i=Zx(e,t.target.y);return`${n}% ${i}%`}},VT={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,a=So.parse(e);if(a.length>5)return i;const c=So.createTransformer(e),f=typeof a[0]!="number"?1:0,g=n.x.scale*t.x,v=n.y.scale*t.y;a[0+f]/=g,a[1+f]/=v;const y=En(g,v,.5);return typeof a[2+f]=="number"&&(a[2+f]/=y),typeof a[3+f]=="number"&&(a[3+f]/=y),c(a)}};class HT extends ca.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:a}=this.props,{projection:c}=t;KE(WT),c&&(n.group&&n.group.add(c),i&&i.register&&a&&i.register(c),c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),ld.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:a,isPresent:c}=this.props,f=i.projection;return f&&(f.isPresent=c,a||t.layoutDependency!==n||n===void 0?f.willUpdate():this.safeToRemove(),t.isPresent!==c&&(c?f.promote():f.relegate()||hn.postRender(()=>{const g=f.getStack();(!g||!g.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),i&&i.deregister&&i.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Y_(e){const[t,n]=UT(),i=O.useContext(F1);return ca.createElement(HT,{...e,layoutGroup:i,switchLayoutGroup:O.useContext(Vv),isPresent:t,safeToRemove:n})}const WT={borderRadius:{...Xl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Xl,borderTopRightRadius:Xl,borderBottomLeftRadius:Xl,borderBottomRightRadius:Xl,boxShadow:VT},X_=["TopLeft","TopRight","BottomLeft","BottomRight"],GT=X_.length,Yx=e=>typeof e=="string"?parseFloat(e):e,Xx=e=>typeof e=="number"||xt.test(e);function ZT(e,t,n,i,a,c){a?(e.opacity=En(0,n.opacity!==void 0?n.opacity:1,YT(i)),e.opacityExit=En(t.opacity!==void 0?t.opacity:1,0,XT(i))):c&&(e.opacity=En(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let f=0;f<GT;f++){const g=`border${X_[f]}Radius`;let v=qx(t,g),y=qx(n,g);if(v===void 0&&y===void 0)continue;v||(v=0),y||(y=0),v===0||y===0||Xx(v)===Xx(y)?(e[g]=Math.max(En(Yx(v),Yx(y),i),0),(ss.test(y)||ss.test(v))&&(e[g]+="%")):e[g]=y}(t.rotate||n.rotate)&&(e.rotate=En(t.rotate||0,n.rotate||0,i))}function qx(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const YT=q_(0,.5,x_),XT=q_(.5,.95,Pn);function q_(e,t,n){return i=>i<e?0:i>t?1:n(Vc(e,t,i))}function Kx(e,t){e.min=t.min,e.max=t.max}function yi(e,t){Kx(e.x,t.x),Kx(e.y,t.y)}function Qx(e,t,n,i,a){return e-=t,e=Zd(e,1/n,i),a!==void 0&&(e=Zd(e,1/a,i)),e}function qT(e,t=0,n=1,i=.5,a,c=e,f=e){if(ss.test(t)&&(t=parseFloat(t),t=En(f.min,f.max,t/100)-f.min),typeof t!="number")return;let g=En(c.min,c.max,i);e===c&&(g-=t),e.min=Qx(e.min,t,n,g,a),e.max=Qx(e.max,t,n,g,a)}function $x(e,t,[n,i,a],c,f){qT(e,t[n],t[i],t[a],t.scale,c,f)}const KT=["x","scaleX","originX"],QT=["y","scaleY","originY"];function Jx(e,t,n,i){$x(e.x,t,KT,n?n.x:void 0,i?i.x:void 0),$x(e.y,t,QT,n?n.y:void 0,i?i.y:void 0)}function ey(e){return e.translate===0&&e.scale===1}function K_(e){return ey(e.x)&&ey(e.y)}function $T(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function Q_(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function ty(e){return oi(e.x)/oi(e.y)}class JT{constructor(){this.members=[]}add(t){em(this.members,t),t.scheduleRender()}remove(t){if(tm(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(a=>t===a);if(n===0)return!1;let i;for(let a=n;a>=0;a--){const c=this.members[a];if(c.isPresent!==!1){i=c;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ny(e,t,n){let i="";const a=e.x.translate/t.x,c=e.y.translate/t.y;if((a||c)&&(i=`translate3d(${a}px, ${c}px, 0) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:v,rotateX:y,rotateY:C}=n;v&&(i+=`rotate(${v}deg) `),y&&(i+=`rotateX(${y}deg) `),C&&(i+=`rotateY(${C}deg) `)}const f=e.x.scale*t.x,g=e.y.scale*t.y;return(f!==1||g!==1)&&(i+=`scale(${f}, ${g})`),i||"none"}const eI=(e,t)=>e.depth-t.depth;class tI{constructor(){this.children=[],this.isDirty=!1}add(t){em(this.children,t),this.isDirty=!0}remove(t){tm(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(eI),this.isDirty=!1,this.children.forEach(t)}}function nI(e,t){const n=performance.now(),i=({timestamp:a})=>{const c=a-n;c>=t&&(ks(i),e(c-t))};return hn.read(i,!0),()=>ks(i)}function rI(e){window.MotionDebug&&window.MotionDebug.record(e)}function iI(e){return e instanceof SVGElement&&e.tagName!=="svg"}function sI(e,t,n){const i=Zr(e)?e:hl(e);return i.start(J1("",i,t,n)),i.animation}const ry=["","X","Y","Z"],oI={visibility:"hidden"},iy=1e3;let aI=0;const qo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function $_({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:a}){return class{constructor(f={},g=t==null?void 0:t()){this.id=aI++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,qo.totalNodes=qo.resolvedTargetDeltas=qo.recalculatedProjection=0,this.nodes.forEach(uI),this.nodes.forEach(mI),this.nodes.forEach(gI),this.nodes.forEach(dI),rI(qo)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=f,this.root=g?g.root||g:this,this.path=g?[...g.path,g]:[],this.parent=g,this.depth=g?g.depth+1:0;for(let v=0;v<this.path.length;v++)this.path[v].shouldResetTransform=!0;this.root===this&&(this.nodes=new tI)}addEventListener(f,g){return this.eventHandlers.has(f)||this.eventHandlers.set(f,new nm),this.eventHandlers.get(f).add(g)}notifyListeners(f,...g){const v=this.eventHandlers.get(f);v&&v.notify(...g)}hasListeners(f){return this.eventHandlers.has(f)}mount(f,g=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=iI(f),this.instance=f;const{layoutId:v,layout:y,visualElement:C}=this.options;if(C&&!C.current&&C.mount(f),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),g&&(y||v)&&(this.isLayoutDirty=!0),e){let b;const T=()=>this.root.updateBlockedByResize=!1;e(f,()=>{this.root.updateBlockedByResize=!0,b&&b(),b=nI(T,250),ld.hasAnimatedSinceResize&&(ld.hasAnimatedSinceResize=!1,this.nodes.forEach(oy))})}v&&this.root.registerSharedNode(v,this),this.options.animate!==!1&&C&&(v||y)&&this.addEventListener("didUpdate",({delta:b,hasLayoutChanged:T,hasRelativeTargetChanged:I,layout:z})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||C.getDefaultTransition()||_I,{onLayoutAnimationStart:B,onLayoutAnimationComplete:F}=C.getProps(),P=!this.targetLayout||!Q_(this.targetLayout,z)||I,k=!T&&I;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||k||T&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(b,k);const G={...$1(R,"layout"),onPlay:B,onComplete:F};(C.shouldReduceMotion||this.options.layoutRoot)&&(G.delay=0,G.type=!1),this.startAnimation(G)}else T||oy(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=z})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const f=this.getStack();f&&f.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ks(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xI),this.animationId++)}getTransformTemplate(){const{visualElement:f}=this.options;return f&&f.getProps().transformTemplate}willUpdate(f=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let C=0;C<this.path.length;C++){const b=this.path[C];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:g,layout:v}=this.options;if(g===void 0&&!v)return;const y=this.getTransformTemplate();this.prevTransformTemplateValue=y?y(this.latestValues,""):void 0,this.updateSnapshot(),f&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(sy);return}this.isUpdating||this.nodes.forEach(fI),this.isUpdating=!1,this.nodes.forEach(pI),this.nodes.forEach(lI),this.nodes.forEach(cI),this.clearAllSnapshots();const g=performance.now();xr.delta=Co(0,1e3/60,g-xr.timestamp),xr.timestamp=g,xr.isProcessing=!0,Df.update.process(xr),Df.preRender.process(xr),Df.render.process(xr),xr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(hI),this.sharedNodes.forEach(yI)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,hn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){hn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let v=0;v<this.path.length;v++)this.path[v].updateScroll();const f=this.layout;this.layout=this.measure(!1),this.layoutCorrected=zn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:g}=this.options;g&&g.notify("LayoutMeasure",this.layout.layoutBox,f?f.layoutBox:void 0)}updateScroll(f="measure"){let g=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===f&&(g=!1),g&&(this.scroll={animationId:this.root.animationId,phase:f,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!a)return;const f=this.isLayoutDirty||this.shouldResetTransform,g=this.projectionDelta&&!K_(this.projectionDelta),v=this.getTransformTemplate(),y=v?v(this.latestValues,""):void 0,C=y!==this.prevTransformTemplateValue;f&&(g||Xo(this.latestValues)||C)&&(a(this.instance,y),this.shouldResetTransform=!1,this.scheduleRender())}measure(f=!0){const g=this.measurePageBox();let v=this.removeElementScroll(g);return f&&(v=this.removeTransform(v)),bI(v),{animationId:this.root.animationId,measuredBox:g,layoutBox:v,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:f}=this.options;if(!f)return zn();const g=f.measureViewportBox(),{scroll:v}=this.root;return v&&($s(g.x,v.offset.x),$s(g.y,v.offset.y)),g}removeElementScroll(f){const g=zn();yi(g,f);for(let v=0;v<this.path.length;v++){const y=this.path[v],{scroll:C,options:b}=y;if(y!==this.root&&C&&b.layoutScroll){if(C.isRoot){yi(g,f);const{scroll:T}=this.root;T&&($s(g.x,-T.offset.x),$s(g.y,-T.offset.y))}$s(g.x,C.offset.x),$s(g.y,C.offset.y)}}return g}applyTransform(f,g=!1){const v=zn();yi(v,f);for(let y=0;y<this.path.length;y++){const C=this.path[y];!g&&C.options.layoutScroll&&C.scroll&&C!==C.root&&Xa(v,{x:-C.scroll.offset.x,y:-C.scroll.offset.y}),Xo(C.latestValues)&&Xa(v,C.latestValues)}return Xo(this.latestValues)&&Xa(v,this.latestValues),v}removeTransform(f){const g=zn();yi(g,f);for(let v=0;v<this.path.length;v++){const y=this.path[v];if(!y.instance||!Xo(y.latestValues))continue;dp(y.latestValues)&&y.updateSnapshot();const C=zn(),b=y.measurePageBox();yi(C,b),Jx(g,y.latestValues,y.snapshot?y.snapshot.layoutBox:void 0,C)}return Xo(this.latestValues)&&Jx(g,this.latestValues),g}setTargetDelta(f){this.targetDelta=f,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(f){this.options={...this.options,...f,crossfade:f.crossfade!==void 0?f.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(f=!1){var g;const v=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=v.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=v.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=v.isSharedProjectionDirty);const y=!!this.resumingFrom||this!==v;if(!(f||y&&this.isSharedProjectionDirty||this.isProjectionDirty||!((g=this.parent)===null||g===void 0)&&g.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:b,layoutId:T}=this.options;if(!(!this.layout||!(b||T))){if(this.resolvedRelativeTargetAt=xr.timestamp,!this.targetDelta&&!this.relativeTarget){const I=this.getClosestProjectingParent();I&&I.layout&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=zn(),this.relativeTargetOrigin=zn(),gc(this.relativeTargetOrigin,this.layout.layoutBox,I.layout.layoutBox),yi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=zn(),this.targetWithTransforms=zn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),CT(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):yi(this.target,this.layout.layoutBox),W_(this.target,this.targetDelta)):yi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const I=this.getClosestProjectingParent();I&&!!I.resumingFrom==!!this.resumingFrom&&!I.options.layoutScroll&&I.target&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=zn(),this.relativeTargetOrigin=zn(),gc(this.relativeTargetOrigin,this.target,I.target),yi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}qo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||dp(this.parent.latestValues)||H_(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var f;const g=this.getLead(),v=!!this.resumingFrom||this!==g;let y=!0;if((this.isProjectionDirty||!((f=this.parent)===null||f===void 0)&&f.isProjectionDirty)&&(y=!1),v&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(y=!1),this.resolvedRelativeTargetAt===xr.timestamp&&(y=!1),y)return;const{layout:C,layoutId:b}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(C||b))return;yi(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,I=this.treeScale.y;RT(this.layoutCorrected,this.treeScale,this.path,v),g.layout&&!g.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(g.target=g.layout.layoutBox);const{target:z}=g;if(!z){this.projectionTransform&&(this.projectionDelta=Ya(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ya(),this.projectionDeltaWithTransform=Ya());const R=this.projectionTransform;mc(this.projectionDelta,this.layoutCorrected,z,this.latestValues),this.projectionTransform=ny(this.projectionDelta,this.treeScale),(this.projectionTransform!==R||this.treeScale.x!==T||this.treeScale.y!==I)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",z)),qo.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(f=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),f){const g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(f,g=!1){const v=this.snapshot,y=v?v.latestValues:{},C={...this.latestValues},b=Ya();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!g;const T=zn(),I=v?v.source:void 0,z=this.layout?this.layout.source:void 0,R=I!==z,B=this.getStack(),F=!B||B.members.length<=1,P=!!(R&&!F&&this.options.crossfade===!0&&!this.path.some(vI));this.animationProgress=0;let k;this.mixTargetDelta=G=>{const K=G/1e3;ay(b.x,f.x,K),ay(b.y,f.y,K),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gc(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),wI(this.relativeTarget,this.relativeTargetOrigin,T,K),k&&$T(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=zn()),yi(k,this.relativeTarget)),R&&(this.animationValues=C,ZT(C,y,this.latestValues,K,P,F)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(f){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ks(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=hn.update(()=>{ld.hasAnimatedSinceResize=!0,this.currentAnimation=sI(0,iy,{...f,onUpdate:g=>{this.mixTargetDelta(g),f.onUpdate&&f.onUpdate(g)},onComplete:()=>{f.onComplete&&f.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const f=this.getStack();f&&f.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(iy),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const f=this.getLead();let{targetWithTransforms:g,target:v,layout:y,latestValues:C}=f;if(!(!g||!v||!y)){if(this!==f&&this.layout&&y&&J_(this.options.animationType,this.layout.layoutBox,y.layoutBox)){v=this.target||zn();const b=oi(this.layout.layoutBox.x);v.x.min=f.target.x.min,v.x.max=v.x.min+b;const T=oi(this.layout.layoutBox.y);v.y.min=f.target.y.min,v.y.max=v.y.min+T}yi(g,v),Xa(g,C),mc(this.projectionDeltaWithTransform,this.layoutCorrected,g,C)}}registerSharedNode(f,g){this.sharedNodes.has(f)||this.sharedNodes.set(f,new JT),this.sharedNodes.get(f).add(g);const y=g.options.initialPromotionConfig;g.promote({transition:y?y.transition:void 0,preserveFollowOpacity:y&&y.shouldPreserveFollowOpacity?y.shouldPreserveFollowOpacity(g):void 0})}isLead(){const f=this.getStack();return f?f.lead===this:!0}getLead(){var f;const{layoutId:g}=this.options;return g?((f=this.getStack())===null||f===void 0?void 0:f.lead)||this:this}getPrevLead(){var f;const{layoutId:g}=this.options;return g?(f=this.getStack())===null||f===void 0?void 0:f.prevLead:void 0}getStack(){const{layoutId:f}=this.options;if(f)return this.root.sharedNodes.get(f)}promote({needsReset:f,transition:g,preserveFollowOpacity:v}={}){const y=this.getStack();y&&y.promote(this,v),f&&(this.projectionDelta=void 0,this.needsReset=!0),g&&this.setOptions({transition:g})}relegate(){const f=this.getStack();return f?f.relegate(this):!1}resetRotation(){const{visualElement:f}=this.options;if(!f)return;let g=!1;const{latestValues:v}=f;if((v.rotate||v.rotateX||v.rotateY||v.rotateZ)&&(g=!0),!g)return;const y={};for(let C=0;C<ry.length;C++){const b="rotate"+ry[C];v[b]&&(y[b]=v[b],f.setStaticValue(b,0))}f.render();for(const C in y)f.setStaticValue(C,y[C]);f.scheduleRender()}getProjectionStyles(f){var g,v;if(!this.instance||this.isSVG)return;if(!this.isVisible)return oI;const y={visibility:""},C=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,y.opacity="",y.pointerEvents=ad(f==null?void 0:f.pointerEvents)||"",y.transform=C?C(this.latestValues,""):"none",y;const b=this.getLead();if(!this.projectionDelta||!this.layout||!b.target){const R={};return this.options.layoutId&&(R.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,R.pointerEvents=ad(f==null?void 0:f.pointerEvents)||""),this.hasProjected&&!Xo(this.latestValues)&&(R.transform=C?C({},""):"none",this.hasProjected=!1),R}const T=b.animationValues||b.latestValues;this.applyTransformsToTarget(),y.transform=ny(this.projectionDeltaWithTransform,this.treeScale,T),C&&(y.transform=C(T,y.transform));const{x:I,y:z}=this.projectionDelta;y.transformOrigin=`${I.origin*100}% ${z.origin*100}% 0`,b.animationValues?y.opacity=b===this?(v=(g=T.opacity)!==null&&g!==void 0?g:this.latestValues.opacity)!==null&&v!==void 0?v:1:this.preserveOpacity?this.latestValues.opacity:T.opacityExit:y.opacity=b===this?T.opacity!==void 0?T.opacity:"":T.opacityExit!==void 0?T.opacityExit:0;for(const R in Fd){if(T[R]===void 0)continue;const{correct:B,applyTo:F}=Fd[R],P=y.transform==="none"?T[R]:B(T[R],b);if(F){const k=F.length;for(let G=0;G<k;G++)y[F[G]]=P}else y[R]=P}return this.options.layoutId&&(y.pointerEvents=b===this?ad(f==null?void 0:f.pointerEvents)||"":"none"),y}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(f=>{var g;return(g=f.currentAnimation)===null||g===void 0?void 0:g.stop()}),this.root.nodes.forEach(sy),this.root.sharedNodes.clear()}}}function lI(e){e.updateLayout()}function cI(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:a}=e.layout,{animationType:c}=e.options,f=n.source!==e.layout.source;c==="size"?_i(b=>{const T=f?n.measuredBox[b]:n.layoutBox[b],I=oi(T);T.min=i[b].min,T.max=T.min+I}):J_(c,n.layoutBox,i)&&_i(b=>{const T=f?n.measuredBox[b]:n.layoutBox[b],I=oi(i[b]);T.max=T.min+I,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[b].max=e.relativeTarget[b].min+I)});const g=Ya();mc(g,i,n.layoutBox);const v=Ya();f?mc(v,e.applyTransform(a,!0),n.measuredBox):mc(v,i,n.layoutBox);const y=!K_(g);let C=!1;if(!e.resumeFrom){const b=e.getClosestProjectingParent();if(b&&!b.resumeFrom){const{snapshot:T,layout:I}=b;if(T&&I){const z=zn();gc(z,n.layoutBox,T.layoutBox);const R=zn();gc(R,i,I.layoutBox),Q_(z,R)||(C=!0),b.options.layoutRoot&&(e.relativeTarget=R,e.relativeTargetOrigin=z,e.relativeParent=b)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:v,layoutDelta:g,hasLayoutChanged:y,hasRelativeTargetChanged:C})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function uI(e){qo.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function dI(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function hI(e){e.clearSnapshot()}function sy(e){e.clearMeasurements()}function fI(e){e.isLayoutDirty=!1}function pI(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function oy(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function mI(e){e.resolveTargetDelta()}function gI(e){e.calcProjection()}function xI(e){e.resetRotation()}function yI(e){e.removeLeadSnapshot()}function ay(e,t,n){e.translate=En(t.translate,0,n),e.scale=En(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function ly(e,t,n,i){e.min=En(t.min,n.min,i),e.max=En(t.max,n.max,i)}function wI(e,t,n,i){ly(e.x,t.x,n.x,i),ly(e.y,t.y,n.y,i)}function vI(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const _I={duration:.45,ease:[.4,0,.1,1]},cy=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),uy=cy("applewebkit/")&&!cy("chrome/")?Math.round:Pn;function dy(e){e.min=uy(e.min),e.max=uy(e.max)}function bI(e){dy(e.x),dy(e.y)}function J_(e,t,n){return e==="position"||e==="preserve-aspect"&&!cp(ty(t),ty(n),.2)}const CI=$_({attachResizeListener:(e,t)=>vs(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Yf={current:void 0},eb=$_({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Yf.current){const e=new CI({});e.mount(window),e.setOptions({layoutScroll:!0}),Yf.current=e}return Yf.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),SI={pan:{Feature:zT},drag:{Feature:FT,ProjectionNode:eb,MeasureLayout:Y_}},AI=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function EI(e){const t=AI.exec(e);if(!t)return[,];const[,n,i]=t;return[n,i]}function fp(e,t,n=1){const[i,a]=EI(e);if(!i)return;const c=window.getComputedStyle(t).getPropertyValue(i);if(c){const f=c.trim();return D_(f)?parseFloat(f):f}else return np(a)?fp(a,t,n+1):a}function NI(e,{...t},n){const i=e.current;if(!(i instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(a=>{const c=a.get();if(!np(c))return;const f=fp(c,i);f&&a.set(f)});for(const a in t){const c=t[a];if(!np(c))continue;const f=fp(c,i);f&&(t[a]=f,n||(n={}),n[a]===void 0&&(n[a]=c))}return{target:t,transitionEnd:n}}const TI=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),tb=e=>TI.has(e),II=e=>Object.keys(e).some(tb),hy=e=>e===va||e===xt,fy=(e,t)=>parseFloat(e.split(", ")[t]),py=(e,t)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const a=i.match(/^matrix3d\((.+)\)$/);if(a)return fy(a[1],t);{const c=i.match(/^matrix\((.+)\)$/);return c?fy(c[1],e):0}},kI=new Set(["x","y","z"]),MI=eu.filter(e=>!kI.has(e));function RI(e){const t=[];return MI.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const fl={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:py(4,13),y:py(5,14)};fl.translateX=fl.x;fl.translateY=fl.y;const OI=(e,t,n)=>{const i=t.measureViewportBox(),a=t.current,c=getComputedStyle(a),{display:f}=c,g={};f==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(y=>{g[y]=fl[y](i,c)}),t.render();const v=t.measureViewportBox();return n.forEach(y=>{const C=t.getValue(y);C&&C.jump(g[y]),e[y]=fl[y](v,c)}),e},LI=(e,t,n={},i={})=>{t={...t},i={...i};const a=Object.keys(t).filter(tb);let c=[],f=!1;const g=[];if(a.forEach(v=>{const y=e.getValue(v);if(!e.hasValue(v))return;let C=n[v],b=Yl(C);const T=t[v];let I;if(Ud(T)){const z=T.length,R=T[0]===null?1:0;C=T[R],b=Yl(C);for(let B=R;B<z&&T[B]!==null;B++)I?Y1(Yl(T[B])===I):I=Yl(T[B])}else I=Yl(T);if(b!==I)if(hy(b)&&hy(I)){const z=y.get();typeof z=="string"&&y.set(parseFloat(z)),typeof T=="string"?t[v]=parseFloat(T):Array.isArray(T)&&I===xt&&(t[v]=T.map(parseFloat))}else b!=null&&b.transform&&(I!=null&&I.transform)&&(C===0||T===0)?C===0?y.set(I.transform(C)):t[v]=b.transform(T):(f||(c=RI(e),f=!0),g.push(v),i[v]=i[v]!==void 0?i[v]:t[v],y.jump(T))}),g.length){const v=g.indexOf("height")>=0?window.pageYOffset:null,y=OI(t,e,g);return c.length&&c.forEach(([C,b])=>{e.getValue(C).set(b)}),e.render(),Rh&&v!==null&&window.scrollTo({top:v}),{target:y,transitionEnd:i}}else return{target:t,transitionEnd:i}};function PI(e,t,n,i){return II(t)?LI(e,t,n,i):{target:t,transitionEnd:i}}const DI=(e,t,n,i)=>{const a=NI(e,t,i);return t=a.target,i=a.transitionEnd,PI(e,t,n,i)},pp={current:null},nb={current:!1};function jI(){if(nb.current=!0,!!Rh)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>pp.current=e.matches;e.addListener(t),t()}else pp.current=!1}function BI(e,t,n){const{willChange:i}=t;for(const a in t){const c=t[a],f=n[a];if(Zr(c))e.addValue(a,c),Gd(i)&&i.add(a);else if(Zr(f))e.addValue(a,hl(c,{owner:e})),Gd(i)&&i.remove(a);else if(f!==c)if(e.hasValue(a)){const g=e.getValue(a);!g.hasAnimated&&g.set(c)}else{const g=e.getStaticValue(a);e.addValue(a,hl(g!==void 0?g:c,{owner:e}))}}for(const a in n)t[a]===void 0&&e.removeValue(a);return t}const my=new WeakMap,rb=Object.keys(Uc),FI=rb.length,gy=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],zI=B1.length;class UI{constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:a,visualState:c},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>hn.render(this.render,!1,!0);const{latestValues:g,renderState:v}=c;this.latestValues=g,this.baseTarget={...g},this.initialValues=n.initial?{...g}:{},this.renderState=v,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=f,this.isControllingVariants=Lh(n),this.isVariantNode=Uv(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:y,...C}=this.scrapeMotionValuesFromProps(n,{});for(const b in C){const T=C[b];g[b]!==void 0&&Zr(T)&&(T.set(g[b],!1),Gd(y)&&y.add(b))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,my.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),nb.current||jI(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:pp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){my.delete(this.current),this.projection&&this.projection.unmount(),ks(this.notifyUpdate),ks(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const i=wa.has(t),a=n.on("change",f=>{this.latestValues[t]=f,this.props.onUpdate&&hn.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),c=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{a(),c()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},i,a,c){let f,g;for(let v=0;v<FI;v++){const y=rb[v],{isEnabled:C,Feature:b,ProjectionNode:T,MeasureLayout:I}=Uc[y];T&&(f=T),C(n)&&(!this.features[y]&&b&&(this.features[y]=new b(this)),I&&(g=I))}if((this.type==="html"||this.type==="svg")&&!this.projection&&f){this.projection=new f(this.latestValues,this.parent&&this.parent.projection);const{layoutId:v,layout:y,drag:C,dragConstraints:b,layoutScroll:T,layoutRoot:I}=n;this.projection.setOptions({layoutId:v,layout:y,alwaysMeasureLayout:!!C||b&&Ga(b),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof y=="string"?y:"both",initialPromotionConfig:c,layoutScroll:T,layoutRoot:I})}return g}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):zn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<gy.length;i++){const a=gy[i];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const c=t["on"+a];c&&(this.propEventSubscriptions[a]=this.on(a,c))}this.prevMotionValues=BI(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<zI;i++){const a=B1[i],c=this.props[a];(zc(c)||c===!1)&&(n[a]=c)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=hl(n,{owner:this}),this.addValue(t,i)),i}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:i}=this.props,a=typeof i=="string"||typeof i=="object"?(n=Z1(this.props,i))===null||n===void 0?void 0:n[t]:void 0;if(i&&a!==void 0)return a;const c=this.getBaseTargetFromProps(this.props,t);return c!==void 0&&!Zr(c)?c:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new nm),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class ib extends UI{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...i},{transformValues:a},c){let f=iT(i,t||{},this);if(a&&(n&&(n=a(n)),i&&(i=a(i)),f&&(f=a(f))),c){nT(this,i,f);const g=DI(this,i,f,n);n=g.transitionEnd,i=g.target}return{transition:t,transitionEnd:n,...i}}}function VI(e){return window.getComputedStyle(e)}class HI extends ib{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(wa.has(n)){const i=Q1(n);return i&&i.default||0}else{const i=VI(t),a=(Gv(n)?i.getPropertyValue(n):i[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:n}){return G_(t,n)}build(t,n,i,a){U1(t,n,i,a.transformTemplate)}scrapeMotionValuesFromProps(t,n){return G1(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Zr(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,i,a){Qv(t,n,i,a)}}class WI extends ib{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(wa.has(n)){const i=Q1(n);return i&&i.default||0}return n=$v.has(n)?n:D1(n),t.getAttribute(n)}measureInstanceViewportBox(){return zn()}scrapeMotionValuesFromProps(t,n){return e_(t,n)}build(t,n,i,a){H1(t,n,i,this.isSVGTag,a.transformTemplate)}renderInstance(t,n,i,a){Jv(t,n,i,a)}mount(t){this.isSVGTag=W1(t.tagName),super.mount(t)}}const GI=(e,t)=>z1(e)?new WI(t,{enableHardwareAcceleration:!1}):new HI(t,{enableHardwareAcceleration:!0}),ZI={layout:{ProjectionNode:eb,MeasureLayout:Y_}},YI={...wT,...FN,...SI,...ZI},st=XE((e,t)=>EN(e,t,YI,GI));function sb(){const e=O.useRef(!1);return P1(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function XI(){const e=sb(),[t,n]=O.useState(0),i=O.useCallback(()=>{e.current&&n(t+1)},[t]);return[O.useCallback(()=>hn.postRender(i),[i]),t]}class qI extends O.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function KI({children:e,isPresent:t}){const n=O.useId(),i=O.useRef(null),a=O.useRef({width:0,height:0,top:0,left:0});return O.useInsertionEffect(()=>{const{width:c,height:f,top:g,left:v}=a.current;if(t||!i.current||!c||!f)return;i.current.dataset.motionPopId=n;const y=document.createElement("style");return document.head.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${f}px !important;
            top: ${g}px !important;
            left: ${v}px !important;
          }
        `),()=>{document.head.removeChild(y)}},[t]),O.createElement(qI,{isPresent:t,childRef:i,sizeRef:a},O.cloneElement(e,{ref:i}))}const Xf=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:a,presenceAffectsLayout:c,mode:f})=>{const g=t_(QI),v=O.useId(),y=O.useMemo(()=>({id:v,initial:t,isPresent:n,custom:a,onExitComplete:C=>{g.set(C,!0);for(const b of g.values())if(!b)return;i&&i()},register:C=>(g.set(C,!1),()=>g.delete(C))}),c?void 0:[n]);return O.useMemo(()=>{g.forEach((C,b)=>g.set(b,!1))},[n]),O.useEffect(()=>{!n&&!g.size&&i&&i()},[n]),f==="popLayout"&&(e=O.createElement(KI,{isPresent:n},e)),O.createElement(Mh.Provider,{value:y},e)};function QI(){return new Map}function $I(e){return O.useEffect(()=>()=>e(),[])}const Ko=e=>e.key||"";function JI(e,t){e.forEach(n=>{const i=Ko(n);t.set(i,n)})}function e8(e){const t=[];return O.Children.forEach(e,n=>{O.isValidElement(n)&&t.push(n)}),t}const os=({children:e,custom:t,initial:n=!0,onExitComplete:i,exitBeforeEnter:a,presenceAffectsLayout:c=!0,mode:f="sync"})=>{const g=O.useContext(F1).forceRender||XI()[0],v=sb(),y=e8(e);let C=y;const b=O.useRef(new Map).current,T=O.useRef(C),I=O.useRef(new Map).current,z=O.useRef(!0);if(P1(()=>{z.current=!1,JI(y,I),T.current=C}),$I(()=>{z.current=!0,I.clear(),b.clear()}),z.current)return O.createElement(O.Fragment,null,C.map(P=>O.createElement(Xf,{key:Ko(P),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:c,mode:f},P)));C=[...C];const R=T.current.map(Ko),B=y.map(Ko),F=R.length;for(let P=0;P<F;P++){const k=R[P];B.indexOf(k)===-1&&!b.has(k)&&b.set(k,void 0)}return f==="wait"&&b.size&&(C=[]),b.forEach((P,k)=>{if(B.indexOf(k)!==-1)return;const G=I.get(k);if(!G)return;const K=R.indexOf(k);let q=P;if(!q){const Y=()=>{b.delete(k);const ee=Array.from(I.keys()).filter(M=>!B.includes(M));if(ee.forEach(M=>I.delete(M)),T.current=y.filter(M=>{const H=Ko(M);return H===k||ee.includes(H)}),!b.size){if(v.current===!1)return;g(),i&&i()}};q=O.createElement(Xf,{key:Ko(G),isPresent:!1,onExitComplete:Y,custom:t,presenceAffectsLayout:c,mode:f},G),b.set(k,q)}C.splice(K,0,q)}),C=C.map(P=>{const k=P.key;return b.has(k)?P:O.createElement(Xf,{key:Ko(P),isPresent:!0,presenceAffectsLayout:c,mode:f},P)}),O.createElement(O.Fragment,null,b.size?C:C.map(P=>O.cloneElement(P)))};var t8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const n8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),at=(e,t)=>{const n=O.forwardRef(({color:i="currentColor",size:a=24,strokeWidth:c=2,absoluteStrokeWidth:f,children:g,...v},y)=>O.createElement("svg",{ref:y,...t8,width:a,height:a,stroke:i,strokeWidth:f?Number(c)*24/Number(a):c,className:`lucide lucide-${n8(e)}`,...v},[...t.map(([C,b])=>O.createElement(C,b)),...(Array.isArray(g)?g:[g])||[]]));return n.displayName=`${e}`,n},ob=at("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),ab=at("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),r8=at("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ms=at("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Yd=at("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),lb=at("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Hc=at("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),cb=at("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),i8=at("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Bh=at("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),cd=at("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),ub=at("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),s8=at("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),yo=at("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Vu=at("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),o8=at("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]),a8=at("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),l8=at("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),c8=at("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),u8=at("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),d8=at("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),db=at("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),h8=at("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),f8=at("Keyboard",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2",key:"15u882"}],["path",{d:"M6 8h.001",key:"1ej0i3"}],["path",{d:"M10 8h.001",key:"1x2st2"}],["path",{d:"M14 8h.001",key:"1vkmyp"}],["path",{d:"M18 8h.001",key:"kfsenl"}],["path",{d:"M8 12h.001",key:"1sjpby"}],["path",{d:"M12 12h.001",key:"al75ts"}],["path",{d:"M16 12h.001",key:"931bgk"}],["path",{d:"M7 16h10",key:"wp8him"}]]),hb=at("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),fn=at("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),fb=at("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),p8=at("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),pb=at("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Rs=at("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),wo=at("MapPinned",[["path",{d:"M18 8c0 4.5-6 9-6 9s-6-4.5-6-9a6 6 0 0 1 12 0",key:"yrbn30"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.835 14H5a1 1 0 0 0-.9.7l-2 6c-.1.1-.1.2-.1.3 0 .6.4 1 1 1h18c.6 0 1-.4 1-1 0-.1 0-.2-.1-.3l-2-6a1 1 0 0 0-.9-.7h-3.835",key:"112zkj"}]]),mb=at("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]),m8=at("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Wc=at("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),g8=at("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),gb=at("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),xy=at("PackageSearch",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]),Os=at("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Xd=at("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),x8=at("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),xc=at("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Yr=at("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),yy=at("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),y8=at("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]),Ls=at("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),w8=at("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),xb=at("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),v8=at("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),_8=at("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),yb=at("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),wb=at("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),qd=at("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Kd=at("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),rm=at("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]),Qd=at("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),_a=at("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),vb=at("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),b8=at("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),ba=at("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_b=at("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),$d="Admin",im="Manager",Jd="Dispatcher",eh="Warehouse",qa="Driver",th="Support",nh="Finance",rh="Viewer",yc="Recipient",C8=[$d,im,Jd,eh,qa,th,nh,rh,yc],Zs="status-options:read",ji="stats:read",Br="shipments:read",ps="shipment:read",Ka="shipments:assign",Go="label:read",Qo="awb:update",Ci="logs:read:self",ro="logs:read:all",bi="notifications:read",Jr="chat:read",ms="chat:write",bb="drivers:sync",Js="postis:sync",vo="users:read",sm="users:write",S8={[$d]:new Set([Zs,ji,Br,ps,Ka,Go,Qo,ro,Ci,bi,Jr,ms,bb,Js,vo,sm]),[im]:new Set([Zs,ji,Br,ps,Ka,Go,Qo,ro,Ci,bi,Jr,ms,vo,Js]),[Jd]:new Set([Zs,ji,Br,ps,Ka,Go,Qo,ro,Ci,bi,Jr,ms,vo,Js]),[eh]:new Set([Zs,ji,Br,ps,Ka,Go,Qo,Ci,bi,Jr,ms,Js]),[qa]:new Set([Zs,ji,Br,ps,Go,Qo,Ci,bi,Jr,ms,Js]),[th]:new Set([Zs,ji,Br,ps,Go,ro,Ci,bi,Jr,ms,Js]),[nh]:new Set([Zs,ji,Br,ps,ro,Ci,bi,Jr,ms]),[rh]:new Set([Zs,ji,Br,ps,Go,Ci,bi,Jr,ms]),[yc]:new Set([Br,ps,bi,Jr,ms])},mp=e=>{const t=String(e||"").trim();if(!t)return t;const n=t.toUpperCase(),i={ADMIN:$d,ADMINISTRATOR:$d,MANAGER:im,DISPATCHER:Jd,DISPECER:Jd,WAREHOUSE:eh,DEPOZIT:eh,DRIVER:qa,CURIER:qa,SOFER:qa,OFER:qa,SUPPORT:th,SUPORT:th,FINANCE:nh,FINANCIAR:nh,VIEWER:rh,VIZUALIZATOR:rh,RECIPIENT:yc,CUSTOMER:yc,CLIENT:yc};if(i[n])return i[n];for(const a of C8)if(a.toUpperCase()===n)return a;return t},gp=e=>{const t=mp(e),n=S8[t];return n?Array.from(n).sort():[]},wy=e=>e?e instanceof Set?e:Array.isArray(e)?new Set(e.filter(Boolean)):new Set:new Set,Cb=e=>{const t=wy(e==null?void 0:e.permissions);if(t.size>0)return t.has(ro)&&t.add(Ci),t;const n=wy(gp(e==null?void 0:e.role));return n.has(ro)&&n.add(Ci),n},_n=(e,t)=>t?Cb(e).has(t):!0,A8=(e,t=[])=>{const n=Array.isArray(t)?t.filter(Boolean):[];if(n.length===0)return!0;const i=Cb(e);return n.every(a=>i.has(a))};function Sb(e,t){return function(){return e.apply(t,arguments)}}const{toString:E8}=Object.prototype,{getPrototypeOf:om}=Object,{iterator:Fh,toStringTag:Ab}=Symbol,zh=(e=>t=>{const n=E8.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Gi=e=>(e=e.toLowerCase(),t=>zh(t)===e),Uh=e=>t=>typeof t===e,{isArray:_l}=Array,pl=Uh("undefined");function iu(e){return e!==null&&!pl(e)&&e.constructor!==null&&!pl(e.constructor)&&Wr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Eb=Gi("ArrayBuffer");function N8(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Eb(e.buffer),t}const T8=Uh("string"),Wr=Uh("function"),Nb=Uh("number"),su=e=>e!==null&&typeof e=="object",I8=e=>e===!0||e===!1,ud=e=>{if(zh(e)!=="object")return!1;const t=om(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Ab in e)&&!(Fh in e)},k8=e=>{if(!su(e)||iu(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},M8=Gi("Date"),R8=Gi("File"),O8=Gi("Blob"),L8=Gi("FileList"),P8=e=>su(e)&&Wr(e.pipe),D8=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Wr(e.append)&&((t=zh(e))==="formdata"||t==="object"&&Wr(e.toString)&&e.toString()==="[object FormData]"))},j8=Gi("URLSearchParams"),[B8,F8,z8,U8]=["ReadableStream","Request","Response","Headers"].map(Gi),V8=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ou(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,a;if(typeof e!="object"&&(e=[e]),_l(e))for(i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else{if(iu(e))return;const c=n?Object.getOwnPropertyNames(e):Object.keys(e),f=c.length;let g;for(i=0;i<f;i++)g=c[i],t.call(null,e[g],g,e)}}function Tb(e,t){if(iu(e))return null;t=t.toLowerCase();const n=Object.keys(e);let i=n.length,a;for(;i-- >0;)if(a=n[i],t===a.toLowerCase())return a;return null}const na=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ib=e=>!pl(e)&&e!==na;function xp(){const{caseless:e,skipUndefined:t}=Ib(this)&&this||{},n={},i=(a,c)=>{if(c==="__proto__"||c==="constructor"||c==="prototype")return;const f=e&&Tb(n,c)||c;ud(n[f])&&ud(a)?n[f]=xp(n[f],a):ud(a)?n[f]=xp({},a):_l(a)?n[f]=a.slice():(!t||!pl(a))&&(n[f]=a)};for(let a=0,c=arguments.length;a<c;a++)arguments[a]&&ou(arguments[a],i);return n}const H8=(e,t,n,{allOwnKeys:i}={})=>(ou(t,(a,c)=>{n&&Wr(a)?Object.defineProperty(e,c,{value:Sb(a,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,c,{value:a,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:i}),e),W8=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),G8=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Z8=(e,t,n,i)=>{let a,c,f;const g={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),c=a.length;c-- >0;)f=a[c],(!i||i(f,e,t))&&!g[f]&&(t[f]=e[f],g[f]=!0);e=n!==!1&&om(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Y8=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},X8=e=>{if(!e)return null;if(_l(e))return e;let t=e.length;if(!Nb(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},q8=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&om(Uint8Array)),K8=(e,t)=>{const i=(e&&e[Fh]).call(e);let a;for(;(a=i.next())&&!a.done;){const c=a.value;t.call(e,c[0],c[1])}},Q8=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},$8=Gi("HTMLFormElement"),J8=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,a){return i.toUpperCase()+a}),vy=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),e5=Gi("RegExp"),kb=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};ou(n,(a,c)=>{let f;(f=t(a,c,e))!==!1&&(i[c]=f||a)}),Object.defineProperties(e,i)},t5=e=>{kb(e,(t,n)=>{if(Wr(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(Wr(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},n5=(e,t)=>{const n={},i=a=>{a.forEach(c=>{n[c]=!0})};return _l(e)?i(e):i(String(e).split(t)),n},r5=()=>{},i5=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function s5(e){return!!(e&&Wr(e.append)&&e[Ab]==="FormData"&&e[Fh])}const o5=e=>{const t=new Array(10),n=(i,a)=>{if(su(i)){if(t.indexOf(i)>=0)return;if(iu(i))return i;if(!("toJSON"in i)){t[a]=i;const c=_l(i)?[]:{};return ou(i,(f,g)=>{const v=n(f,a+1);!pl(v)&&(c[g]=v)}),t[a]=void 0,c}}return i};return n(e,0)},a5=Gi("AsyncFunction"),l5=e=>e&&(su(e)||Wr(e))&&Wr(e.then)&&Wr(e.catch),Mb=((e,t)=>e?setImmediate:t?((n,i)=>(na.addEventListener("message",({source:a,data:c})=>{a===na&&c===n&&i.length&&i.shift()()},!1),a=>{i.push(a),na.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Wr(na.postMessage)),c5=typeof queueMicrotask<"u"?queueMicrotask.bind(na):typeof process<"u"&&process.nextTick||Mb,u5=e=>e!=null&&Wr(e[Fh]),ye={isArray:_l,isArrayBuffer:Eb,isBuffer:iu,isFormData:D8,isArrayBufferView:N8,isString:T8,isNumber:Nb,isBoolean:I8,isObject:su,isPlainObject:ud,isEmptyObject:k8,isReadableStream:B8,isRequest:F8,isResponse:z8,isHeaders:U8,isUndefined:pl,isDate:M8,isFile:R8,isBlob:O8,isRegExp:e5,isFunction:Wr,isStream:P8,isURLSearchParams:j8,isTypedArray:q8,isFileList:L8,forEach:ou,merge:xp,extend:H8,trim:V8,stripBOM:W8,inherits:G8,toFlatObject:Z8,kindOf:zh,kindOfTest:Gi,endsWith:Y8,toArray:X8,forEachEntry:K8,matchAll:Q8,isHTMLForm:$8,hasOwnProperty:vy,hasOwnProp:vy,reduceDescriptors:kb,freezeMethods:t5,toObjectSet:n5,toCamelCase:J8,noop:r5,toFiniteNumber:i5,findKey:Tb,global:na,isContextDefined:Ib,isSpecCompliantForm:s5,toJSONObject:o5,isAsyncFn:a5,isThenable:l5,setImmediate:Mb,asap:c5,isIterable:u5};let vt=class Rb extends Error{static from(t,n,i,a,c,f){const g=new Rb(t.message,n||t.code,i,a,c);return g.cause=t,g.name=t.name,f&&Object.assign(g,f),g}constructor(t,n,i,a,c){super(t),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),i&&(this.config=i),a&&(this.request=a),c&&(this.response=c,this.status=c.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ye.toJSONObject(this.config),code:this.code,status:this.status}}};vt.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";vt.ERR_BAD_OPTION="ERR_BAD_OPTION";vt.ECONNABORTED="ECONNABORTED";vt.ETIMEDOUT="ETIMEDOUT";vt.ERR_NETWORK="ERR_NETWORK";vt.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";vt.ERR_DEPRECATED="ERR_DEPRECATED";vt.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";vt.ERR_BAD_REQUEST="ERR_BAD_REQUEST";vt.ERR_CANCELED="ERR_CANCELED";vt.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";vt.ERR_INVALID_URL="ERR_INVALID_URL";const d5=null;function yp(e){return ye.isPlainObject(e)||ye.isArray(e)}function Ob(e){return ye.endsWith(e,"[]")?e.slice(0,-2):e}function _y(e,t,n){return e?e.concat(t).map(function(a,c){return a=Ob(a),!n&&c?"["+a+"]":a}).join(n?".":""):t}function h5(e){return ye.isArray(e)&&!e.some(yp)}const f5=ye.toFlatObject(ye,{},null,function(t){return/^is[A-Z]/.test(t)});function Vh(e,t,n){if(!ye.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=ye.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,B){return!ye.isUndefined(B[R])});const i=n.metaTokens,a=n.visitor||C,c=n.dots,f=n.indexes,v=(n.Blob||typeof Blob<"u"&&Blob)&&ye.isSpecCompliantForm(t);if(!ye.isFunction(a))throw new TypeError("visitor must be a function");function y(z){if(z===null)return"";if(ye.isDate(z))return z.toISOString();if(ye.isBoolean(z))return z.toString();if(!v&&ye.isBlob(z))throw new vt("Blob is not supported. Use a Buffer instead.");return ye.isArrayBuffer(z)||ye.isTypedArray(z)?v&&typeof Blob=="function"?new Blob([z]):Buffer.from(z):z}function C(z,R,B){let F=z;if(z&&!B&&typeof z=="object"){if(ye.endsWith(R,"{}"))R=i?R:R.slice(0,-2),z=JSON.stringify(z);else if(ye.isArray(z)&&h5(z)||(ye.isFileList(z)||ye.endsWith(R,"[]"))&&(F=ye.toArray(z)))return R=Ob(R),F.forEach(function(k,G){!(ye.isUndefined(k)||k===null)&&t.append(f===!0?_y([R],G,c):f===null?R:R+"[]",y(k))}),!1}return yp(z)?!0:(t.append(_y(B,R,c),y(z)),!1)}const b=[],T=Object.assign(f5,{defaultVisitor:C,convertValue:y,isVisitable:yp});function I(z,R){if(!ye.isUndefined(z)){if(b.indexOf(z)!==-1)throw Error("Circular reference detected in "+R.join("."));b.push(z),ye.forEach(z,function(F,P){(!(ye.isUndefined(F)||F===null)&&a.call(t,F,ye.isString(P)?P.trim():P,R,T))===!0&&I(F,R?R.concat(P):[P])}),b.pop()}}if(!ye.isObject(e))throw new TypeError("data must be an object");return I(e),t}function by(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function am(e,t){this._pairs=[],e&&Vh(e,this,t)}const Lb=am.prototype;Lb.append=function(t,n){this._pairs.push([t,n])};Lb.toString=function(t){const n=t?function(i){return t.call(this,i,by)}:by;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function p5(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Pb(e,t,n){if(!t)return e;const i=n&&n.encode||p5,a=ye.isFunction(n)?{serialize:n}:n,c=a&&a.serialize;let f;if(c?f=c(t,a):f=ye.isURLSearchParams(t)?t.toString():new am(t,a).toString(i),f){const g=e.indexOf("#");g!==-1&&(e=e.slice(0,g)),e+=(e.indexOf("?")===-1?"?":"&")+f}return e}class Cy{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ye.forEach(this.handlers,function(i){i!==null&&t(i)})}}const lm={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},m5=typeof URLSearchParams<"u"?URLSearchParams:am,g5=typeof FormData<"u"?FormData:null,x5=typeof Blob<"u"?Blob:null,y5={isBrowser:!0,classes:{URLSearchParams:m5,FormData:g5,Blob:x5},protocols:["http","https","file","blob","url","data"]},cm=typeof window<"u"&&typeof document<"u",wp=typeof navigator=="object"&&navigator||void 0,w5=cm&&(!wp||["ReactNative","NativeScript","NS"].indexOf(wp.product)<0),v5=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_5=cm&&window.location.href||"http://localhost",b5=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:cm,hasStandardBrowserEnv:w5,hasStandardBrowserWebWorkerEnv:v5,navigator:wp,origin:_5},Symbol.toStringTag,{value:"Module"})),wr={...b5,...y5};function C5(e,t){return Vh(e,new wr.classes.URLSearchParams,{visitor:function(n,i,a,c){return wr.isNode&&ye.isBuffer(n)?(this.append(i,n.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)},...t})}function S5(e){return ye.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function A5(e){const t={},n=Object.keys(e);let i;const a=n.length;let c;for(i=0;i<a;i++)c=n[i],t[c]=e[c];return t}function Db(e){function t(n,i,a,c){let f=n[c++];if(f==="__proto__")return!0;const g=Number.isFinite(+f),v=c>=n.length;return f=!f&&ye.isArray(a)?a.length:f,v?(ye.hasOwnProp(a,f)?a[f]=[a[f],i]:a[f]=i,!g):((!a[f]||!ye.isObject(a[f]))&&(a[f]=[]),t(n,i,a[f],c)&&ye.isArray(a[f])&&(a[f]=A5(a[f])),!g)}if(ye.isFormData(e)&&ye.isFunction(e.entries)){const n={};return ye.forEachEntry(e,(i,a)=>{t(S5(i),a,n,0)}),n}return null}function E5(e,t,n){if(ye.isString(e))try{return(t||JSON.parse)(e),ye.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const au={transitional:lm,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const i=n.getContentType()||"",a=i.indexOf("application/json")>-1,c=ye.isObject(t);if(c&&ye.isHTMLForm(t)&&(t=new FormData(t)),ye.isFormData(t))return a?JSON.stringify(Db(t)):t;if(ye.isArrayBuffer(t)||ye.isBuffer(t)||ye.isStream(t)||ye.isFile(t)||ye.isBlob(t)||ye.isReadableStream(t))return t;if(ye.isArrayBufferView(t))return t.buffer;if(ye.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let g;if(c){if(i.indexOf("application/x-www-form-urlencoded")>-1)return C5(t,this.formSerializer).toString();if((g=ye.isFileList(t))||i.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return Vh(g?{"files[]":t}:t,v&&new v,this.formSerializer)}}return c||a?(n.setContentType("application/json",!1),E5(t)):t}],transformResponse:[function(t){const n=this.transitional||au.transitional,i=n&&n.forcedJSONParsing,a=this.responseType==="json";if(ye.isResponse(t)||ye.isReadableStream(t))return t;if(t&&ye.isString(t)&&(i&&!this.responseType||a)){const f=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(g){if(f)throw g.name==="SyntaxError"?vt.from(g,vt.ERR_BAD_RESPONSE,this,null,this.response):g}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wr.classes.FormData,Blob:wr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ye.forEach(["delete","get","head","post","put","patch"],e=>{au.headers[e]={}});const N5=ye.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),T5=e=>{const t={};let n,i,a;return e&&e.split(`
`).forEach(function(f){a=f.indexOf(":"),n=f.substring(0,a).trim().toLowerCase(),i=f.substring(a+1).trim(),!(!n||t[n]&&N5[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},Sy=Symbol("internals");function ql(e){return e&&String(e).trim().toLowerCase()}function dd(e){return e===!1||e==null?e:ye.isArray(e)?e.map(dd):String(e)}function I5(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const k5=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function qf(e,t,n,i,a){if(ye.isFunction(i))return i.call(this,t,n);if(a&&(t=n),!!ye.isString(t)){if(ye.isString(i))return t.indexOf(i)!==-1;if(ye.isRegExp(i))return i.test(t)}}function M5(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function R5(e,t){const n=ye.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(a,c,f){return this[i].call(this,t,a,c,f)},configurable:!0})})}let Gr=class{constructor(t){t&&this.set(t)}set(t,n,i){const a=this;function c(g,v,y){const C=ql(v);if(!C)throw new Error("header name must be a non-empty string");const b=ye.findKey(a,C);(!b||a[b]===void 0||y===!0||y===void 0&&a[b]!==!1)&&(a[b||v]=dd(g))}const f=(g,v)=>ye.forEach(g,(y,C)=>c(y,C,v));if(ye.isPlainObject(t)||t instanceof this.constructor)f(t,n);else if(ye.isString(t)&&(t=t.trim())&&!k5(t))f(T5(t),n);else if(ye.isObject(t)&&ye.isIterable(t)){let g={},v,y;for(const C of t){if(!ye.isArray(C))throw TypeError("Object iterator must return a key-value pair");g[y=C[0]]=(v=g[y])?ye.isArray(v)?[...v,C[1]]:[v,C[1]]:C[1]}f(g,n)}else t!=null&&c(n,t,i);return this}get(t,n){if(t=ql(t),t){const i=ye.findKey(this,t);if(i){const a=this[i];if(!n)return a;if(n===!0)return I5(a);if(ye.isFunction(n))return n.call(this,a,i);if(ye.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ql(t),t){const i=ye.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||qf(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let a=!1;function c(f){if(f=ql(f),f){const g=ye.findKey(i,f);g&&(!n||qf(i,i[g],g,n))&&(delete i[g],a=!0)}}return ye.isArray(t)?t.forEach(c):c(t),a}clear(t){const n=Object.keys(this);let i=n.length,a=!1;for(;i--;){const c=n[i];(!t||qf(this,this[c],c,t,!0))&&(delete this[c],a=!0)}return a}normalize(t){const n=this,i={};return ye.forEach(this,(a,c)=>{const f=ye.findKey(i,c);if(f){n[f]=dd(a),delete n[c];return}const g=t?M5(c):String(c).trim();g!==c&&delete n[c],n[g]=dd(a),i[g]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return ye.forEach(this,(i,a)=>{i!=null&&i!==!1&&(n[a]=t&&ye.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(a=>i.set(a)),i}static accessor(t){const i=(this[Sy]=this[Sy]={accessors:{}}).accessors,a=this.prototype;function c(f){const g=ql(f);i[g]||(R5(a,f),i[g]=!0)}return ye.isArray(t)?t.forEach(c):c(t),this}};Gr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ye.reduceDescriptors(Gr.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});ye.freezeMethods(Gr);function Kf(e,t){const n=this||au,i=t||n,a=Gr.from(i.headers);let c=i.data;return ye.forEach(e,function(g){c=g.call(n,c,a.normalize(),t?t.status:void 0)}),a.normalize(),c}function jb(e){return!!(e&&e.__CANCEL__)}let lu=class extends vt{constructor(t,n,i){super(t??"canceled",vt.ERR_CANCELED,n,i),this.name="CanceledError",this.__CANCEL__=!0}};function Bb(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new vt("Request failed with status code "+n.status,[vt.ERR_BAD_REQUEST,vt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function O5(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function L5(e,t){e=e||10;const n=new Array(e),i=new Array(e);let a=0,c=0,f;return t=t!==void 0?t:1e3,function(v){const y=Date.now(),C=i[c];f||(f=y),n[a]=v,i[a]=y;let b=c,T=0;for(;b!==a;)T+=n[b++],b=b%e;if(a=(a+1)%e,a===c&&(c=(c+1)%e),y-f<t)return;const I=C&&y-C;return I?Math.round(T*1e3/I):void 0}}function P5(e,t){let n=0,i=1e3/t,a,c;const f=(y,C=Date.now())=>{n=C,a=null,c&&(clearTimeout(c),c=null),e(...y)};return[(...y)=>{const C=Date.now(),b=C-n;b>=i?f(y,C):(a=y,c||(c=setTimeout(()=>{c=null,f(a)},i-b)))},()=>a&&f(a)]}const ih=(e,t,n=3)=>{let i=0;const a=L5(50,250);return P5(c=>{const f=c.loaded,g=c.lengthComputable?c.total:void 0,v=f-i,y=a(v),C=f<=g;i=f;const b={loaded:f,total:g,progress:g?f/g:void 0,bytes:v,rate:y||void 0,estimated:y&&g&&C?(g-f)/y:void 0,event:c,lengthComputable:g!=null,[t?"download":"upload"]:!0};e(b)},n)},Ay=(e,t)=>{const n=e!=null;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},Ey=e=>(...t)=>ye.asap(()=>e(...t)),D5=wr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,wr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(wr.origin),wr.navigator&&/(msie|trident)/i.test(wr.navigator.userAgent)):()=>!0,j5=wr.hasStandardBrowserEnv?{write(e,t,n,i,a,c,f){if(typeof document>"u")return;const g=[`${e}=${encodeURIComponent(t)}`];ye.isNumber(n)&&g.push(`expires=${new Date(n).toUTCString()}`),ye.isString(i)&&g.push(`path=${i}`),ye.isString(a)&&g.push(`domain=${a}`),c===!0&&g.push("secure"),ye.isString(f)&&g.push(`SameSite=${f}`),document.cookie=g.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function B5(e){return typeof e!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function F5(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Fb(e,t,n){let i=!B5(t);return e&&(i||n==!1)?F5(e,t):t}const Ny=e=>e instanceof Gr?{...e}:e;function ma(e,t){t=t||{};const n={};function i(y,C,b,T){return ye.isPlainObject(y)&&ye.isPlainObject(C)?ye.merge.call({caseless:T},y,C):ye.isPlainObject(C)?ye.merge({},C):ye.isArray(C)?C.slice():C}function a(y,C,b,T){if(ye.isUndefined(C)){if(!ye.isUndefined(y))return i(void 0,y,b,T)}else return i(y,C,b,T)}function c(y,C){if(!ye.isUndefined(C))return i(void 0,C)}function f(y,C){if(ye.isUndefined(C)){if(!ye.isUndefined(y))return i(void 0,y)}else return i(void 0,C)}function g(y,C,b){if(b in t)return i(y,C);if(b in e)return i(void 0,y)}const v={url:c,method:c,data:c,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:g,headers:(y,C,b)=>a(Ny(y),Ny(C),b,!0)};return ye.forEach(Object.keys({...e,...t}),function(C){if(C==="__proto__"||C==="constructor"||C==="prototype")return;const b=ye.hasOwnProp(v,C)?v[C]:a,T=b(e[C],t[C],C);ye.isUndefined(T)&&b!==g||(n[C]=T)}),n}const zb=e=>{const t=ma({},e);let{data:n,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:c,headers:f,auth:g}=t;if(t.headers=f=Gr.from(f),t.url=Pb(Fb(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),g&&f.set("Authorization","Basic "+btoa((g.username||"")+":"+(g.password?unescape(encodeURIComponent(g.password)):""))),ye.isFormData(n)){if(wr.hasStandardBrowserEnv||wr.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(ye.isFunction(n.getHeaders)){const v=n.getHeaders(),y=["content-type","content-length"];Object.entries(v).forEach(([C,b])=>{y.includes(C.toLowerCase())&&f.set(C,b)})}}if(wr.hasStandardBrowserEnv&&(i&&ye.isFunction(i)&&(i=i(t)),i||i!==!1&&D5(t.url))){const v=a&&c&&j5.read(c);v&&f.set(a,v)}return t},z5=typeof XMLHttpRequest<"u",U5=z5&&function(e){return new Promise(function(n,i){const a=zb(e);let c=a.data;const f=Gr.from(a.headers).normalize();let{responseType:g,onUploadProgress:v,onDownloadProgress:y}=a,C,b,T,I,z;function R(){I&&I(),z&&z(),a.cancelToken&&a.cancelToken.unsubscribe(C),a.signal&&a.signal.removeEventListener("abort",C)}let B=new XMLHttpRequest;B.open(a.method.toUpperCase(),a.url,!0),B.timeout=a.timeout;function F(){if(!B)return;const k=Gr.from("getAllResponseHeaders"in B&&B.getAllResponseHeaders()),K={data:!g||g==="text"||g==="json"?B.responseText:B.response,status:B.status,statusText:B.statusText,headers:k,config:e,request:B};Bb(function(Y){n(Y),R()},function(Y){i(Y),R()},K),B=null}"onloadend"in B?B.onloadend=F:B.onreadystatechange=function(){!B||B.readyState!==4||B.status===0&&!(B.responseURL&&B.responseURL.indexOf("file:")===0)||setTimeout(F)},B.onabort=function(){B&&(i(new vt("Request aborted",vt.ECONNABORTED,e,B)),B=null)},B.onerror=function(G){const K=G&&G.message?G.message:"Network Error",q=new vt(K,vt.ERR_NETWORK,e,B);q.event=G||null,i(q),B=null},B.ontimeout=function(){let G=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const K=a.transitional||lm;a.timeoutErrorMessage&&(G=a.timeoutErrorMessage),i(new vt(G,K.clarifyTimeoutError?vt.ETIMEDOUT:vt.ECONNABORTED,e,B)),B=null},c===void 0&&f.setContentType(null),"setRequestHeader"in B&&ye.forEach(f.toJSON(),function(G,K){B.setRequestHeader(K,G)}),ye.isUndefined(a.withCredentials)||(B.withCredentials=!!a.withCredentials),g&&g!=="json"&&(B.responseType=a.responseType),y&&([T,z]=ih(y,!0),B.addEventListener("progress",T)),v&&B.upload&&([b,I]=ih(v),B.upload.addEventListener("progress",b),B.upload.addEventListener("loadend",I)),(a.cancelToken||a.signal)&&(C=k=>{B&&(i(!k||k.type?new lu(null,e,B):k),B.abort(),B=null)},a.cancelToken&&a.cancelToken.subscribe(C),a.signal&&(a.signal.aborted?C():a.signal.addEventListener("abort",C)));const P=O5(a.url);if(P&&wr.protocols.indexOf(P)===-1){i(new vt("Unsupported protocol "+P+":",vt.ERR_BAD_REQUEST,e));return}B.send(c||null)})},V5=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let i=new AbortController,a;const c=function(y){if(!a){a=!0,g();const C=y instanceof Error?y:this.reason;i.abort(C instanceof vt?C:new lu(C instanceof Error?C.message:C))}};let f=t&&setTimeout(()=>{f=null,c(new vt(`timeout of ${t}ms exceeded`,vt.ETIMEDOUT))},t);const g=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(y=>{y.unsubscribe?y.unsubscribe(c):y.removeEventListener("abort",c)}),e=null)};e.forEach(y=>y.addEventListener("abort",c));const{signal:v}=i;return v.unsubscribe=()=>ye.asap(g),v}},H5=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let i=0,a;for(;i<n;)a=i+t,yield e.slice(i,a),i=a},W5=async function*(e,t){for await(const n of G5(e))yield*H5(n,t)},G5=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:i}=await t.read();if(n)break;yield i}}finally{await t.cancel()}},Ty=(e,t,n,i)=>{const a=W5(e,t);let c=0,f,g=v=>{f||(f=!0,i&&i(v))};return new ReadableStream({async pull(v){try{const{done:y,value:C}=await a.next();if(y){g(),v.close();return}let b=C.byteLength;if(n){let T=c+=b;n(T)}v.enqueue(new Uint8Array(C))}catch(y){throw g(y),y}},cancel(v){return g(v),a.return()}},{highWaterMark:2})},Iy=64*1024,{isFunction:Hu}=ye,Z5=(({Request:e,Response:t})=>({Request:e,Response:t}))(ye.global),{ReadableStream:ky,TextEncoder:My}=ye.global,Ry=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Y5=e=>{e=ye.merge.call({skipUndefined:!0},Z5,e);const{fetch:t,Request:n,Response:i}=e,a=t?Hu(t):typeof fetch=="function",c=Hu(n),f=Hu(i);if(!a)return!1;const g=a&&Hu(ky),v=a&&(typeof My=="function"?(z=>R=>z.encode(R))(new My):async z=>new Uint8Array(await new n(z).arrayBuffer())),y=c&&g&&Ry(()=>{let z=!1;const R=new n(wr.origin,{body:new ky,method:"POST",get duplex(){return z=!0,"half"}}).headers.has("Content-Type");return z&&!R}),C=f&&g&&Ry(()=>ye.isReadableStream(new i("").body)),b={stream:C&&(z=>z.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(z=>{!b[z]&&(b[z]=(R,B)=>{let F=R&&R[z];if(F)return F.call(R);throw new vt(`Response type '${z}' is not supported`,vt.ERR_NOT_SUPPORT,B)})});const T=async z=>{if(z==null)return 0;if(ye.isBlob(z))return z.size;if(ye.isSpecCompliantForm(z))return(await new n(wr.origin,{method:"POST",body:z}).arrayBuffer()).byteLength;if(ye.isArrayBufferView(z)||ye.isArrayBuffer(z))return z.byteLength;if(ye.isURLSearchParams(z)&&(z=z+""),ye.isString(z))return(await v(z)).byteLength},I=async(z,R)=>{const B=ye.toFiniteNumber(z.getContentLength());return B??T(R)};return async z=>{let{url:R,method:B,data:F,signal:P,cancelToken:k,timeout:G,onDownloadProgress:K,onUploadProgress:q,responseType:Y,headers:ee,withCredentials:M="same-origin",fetchOptions:H}=zb(z),$=t||fetch;Y=Y?(Y+"").toLowerCase():"text";let se=V5([P,k&&k.toAbortSignal()],G),be=null;const Ne=se&&se.unsubscribe&&(()=>{se.unsubscribe()});let oe;try{if(q&&y&&B!=="get"&&B!=="head"&&(oe=await I(ee,F))!==0){let xe=new n(R,{method:"POST",body:F,duplex:"half"}),Le;if(ye.isFormData(F)&&(Le=xe.headers.get("content-type"))&&ee.setContentType(Le),xe.body){const[Ke,Fe]=Ay(oe,ih(Ey(q)));F=Ty(xe.body,Iy,Ke,Fe)}}ye.isString(M)||(M=M?"include":"omit");const le=c&&"credentials"in n.prototype,ke={...H,signal:se,method:B.toUpperCase(),headers:ee.normalize().toJSON(),body:F,duplex:"half",credentials:le?M:void 0};be=c&&new n(R,ke);let ie=await(c?$(be,H):$(R,ke));const Ae=C&&(Y==="stream"||Y==="response");if(C&&(K||Ae&&Ne)){const xe={};["status","statusText","headers"].forEach(ne=>{xe[ne]=ie[ne]});const Le=ye.toFiniteNumber(ie.headers.get("content-length")),[Ke,Fe]=K&&Ay(Le,ih(Ey(K),!0))||[];ie=new i(Ty(ie.body,Iy,Ke,()=>{Fe&&Fe(),Ne&&Ne()}),xe)}Y=Y||"text";let ve=await b[ye.findKey(b,Y)||"text"](ie,z);return!Ae&&Ne&&Ne(),await new Promise((xe,Le)=>{Bb(xe,Le,{data:ve,headers:Gr.from(ie.headers),status:ie.status,statusText:ie.statusText,config:z,request:be})})}catch(le){throw Ne&&Ne(),le&&le.name==="TypeError"&&/Load failed|fetch/i.test(le.message)?Object.assign(new vt("Network Error",vt.ERR_NETWORK,z,be,le&&le.response),{cause:le.cause||le}):vt.from(le,le&&le.code,z,be,le&&le.response)}}},X5=new Map,Ub=e=>{let t=e&&e.env||{};const{fetch:n,Request:i,Response:a}=t,c=[i,a,n];let f=c.length,g=f,v,y,C=X5;for(;g--;)v=c[g],y=C.get(v),y===void 0&&C.set(v,y=g?new Map:Y5(t)),C=y;return y};Ub();const um={http:d5,xhr:U5,fetch:{get:Ub}};ye.forEach(um,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Oy=e=>`- ${e}`,q5=e=>ye.isFunction(e)||e===null||e===!1;function K5(e,t){e=ye.isArray(e)?e:[e];const{length:n}=e;let i,a;const c={};for(let f=0;f<n;f++){i=e[f];let g;if(a=i,!q5(i)&&(a=um[(g=String(i)).toLowerCase()],a===void 0))throw new vt(`Unknown adapter '${g}'`);if(a&&(ye.isFunction(a)||(a=a.get(t))))break;c[g||"#"+f]=a}if(!a){const f=Object.entries(c).map(([v,y])=>`adapter ${v} `+(y===!1?"is not supported by the environment":"is not available in the build"));let g=n?f.length>1?`since :
`+f.map(Oy).join(`
`):" "+Oy(f[0]):"as no adapter specified";throw new vt("There is no suitable adapter to dispatch the request "+g,"ERR_NOT_SUPPORT")}return a}const Vb={getAdapter:K5,adapters:um};function Qf(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new lu(null,e)}function Ly(e){return Qf(e),e.headers=Gr.from(e.headers),e.data=Kf.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Vb.getAdapter(e.adapter||au.adapter,e)(e).then(function(i){return Qf(e),i.data=Kf.call(e,e.transformResponse,i),i.headers=Gr.from(i.headers),i},function(i){return jb(i)||(Qf(e),i&&i.response&&(i.response.data=Kf.call(e,e.transformResponse,i.response),i.response.headers=Gr.from(i.response.headers))),Promise.reject(i)})}const Hb="1.13.5",Hh={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Hh[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const Py={};Hh.transitional=function(t,n,i){function a(c,f){return"[Axios v"+Hb+"] Transitional option '"+c+"'"+f+(i?". "+i:"")}return(c,f,g)=>{if(t===!1)throw new vt(a(f," has been removed"+(n?" in "+n:"")),vt.ERR_DEPRECATED);return n&&!Py[f]&&(Py[f]=!0,console.warn(a(f," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(c,f,g):!0}};Hh.spelling=function(t){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function Q5(e,t,n){if(typeof e!="object")throw new vt("options must be an object",vt.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let a=i.length;for(;a-- >0;){const c=i[a],f=t[c];if(f){const g=e[c],v=g===void 0||f(g,c,e);if(v!==!0)throw new vt("option "+c+" must be "+v,vt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new vt("Unknown option "+c,vt.ERR_BAD_OPTION)}}const hd={assertOptions:Q5,validators:Hh},wi=hd.validators;let oa=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Cy,response:new Cy}}async request(t,n){try{return await this._request(t,n)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const c=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?c&&!String(i.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+c):i.stack=c}catch{}}throw i}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ma(this.defaults,n);const{transitional:i,paramsSerializer:a,headers:c}=n;i!==void 0&&hd.assertOptions(i,{silentJSONParsing:wi.transitional(wi.boolean),forcedJSONParsing:wi.transitional(wi.boolean),clarifyTimeoutError:wi.transitional(wi.boolean),legacyInterceptorReqResOrdering:wi.transitional(wi.boolean)},!1),a!=null&&(ye.isFunction(a)?n.paramsSerializer={serialize:a}:hd.assertOptions(a,{encode:wi.function,serialize:wi.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),hd.assertOptions(n,{baseUrl:wi.spelling("baseURL"),withXsrfToken:wi.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let f=c&&ye.merge(c.common,c[n.method]);c&&ye.forEach(["delete","get","head","post","put","patch","common"],z=>{delete c[z]}),n.headers=Gr.concat(f,c);const g=[];let v=!0;this.interceptors.request.forEach(function(R){if(typeof R.runWhen=="function"&&R.runWhen(n)===!1)return;v=v&&R.synchronous;const B=n.transitional||lm;B&&B.legacyInterceptorReqResOrdering?g.unshift(R.fulfilled,R.rejected):g.push(R.fulfilled,R.rejected)});const y=[];this.interceptors.response.forEach(function(R){y.push(R.fulfilled,R.rejected)});let C,b=0,T;if(!v){const z=[Ly.bind(this),void 0];for(z.unshift(...g),z.push(...y),T=z.length,C=Promise.resolve(n);b<T;)C=C.then(z[b++],z[b++]);return C}T=g.length;let I=n;for(;b<T;){const z=g[b++],R=g[b++];try{I=z(I)}catch(B){R.call(this,B);break}}try{C=Ly.call(this,I)}catch(z){return Promise.reject(z)}for(b=0,T=y.length;b<T;)C=C.then(y[b++],y[b++]);return C}getUri(t){t=ma(this.defaults,t);const n=Fb(t.baseURL,t.url,t.allowAbsoluteUrls);return Pb(n,t.params,t.paramsSerializer)}};ye.forEach(["delete","get","head","options"],function(t){oa.prototype[t]=function(n,i){return this.request(ma(i||{},{method:t,url:n,data:(i||{}).data}))}});ye.forEach(["post","put","patch"],function(t){function n(i){return function(c,f,g){return this.request(ma(g||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:c,data:f}))}}oa.prototype[t]=n(),oa.prototype[t+"Form"]=n(!0)});let $5=class Wb{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(c){n=c});const i=this;this.promise.then(a=>{if(!i._listeners)return;let c=i._listeners.length;for(;c-- >0;)i._listeners[c](a);i._listeners=null}),this.promise.then=a=>{let c;const f=new Promise(g=>{i.subscribe(g),c=g}).then(a);return f.cancel=function(){i.unsubscribe(c)},f},t(function(c,f,g){i.reason||(i.reason=new lu(c,f,g),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=i=>{t.abort(i)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Wb(function(a){t=a}),cancel:t}}};function J5(e){return function(n){return e.apply(null,n)}}function ek(e){return ye.isObject(e)&&e.isAxiosError===!0}const vp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(vp).forEach(([e,t])=>{vp[t]=e});function Gb(e){const t=new oa(e),n=Sb(oa.prototype.request,t);return ye.extend(n,oa.prototype,t,{allOwnKeys:!0}),ye.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return Gb(ma(e,a))},n}const ot=Gb(au);ot.Axios=oa;ot.CanceledError=lu;ot.CancelToken=$5;ot.isCancel=jb;ot.VERSION=Hb;ot.toFormData=Vh;ot.AxiosError=vt;ot.Cancel=ot.CanceledError;ot.all=function(t){return Promise.all(t)};ot.spread=J5;ot.isAxiosError=ek;ot.mergeConfig=ma;ot.AxiosHeaders=Gr;ot.formToJSON=e=>Db(ye.isHTMLForm(e)?new FormData(e):e);ot.getAdapter=Vb.getAdapter;ot.HttpStatusCode=vp;ot.default=ot;const{Axios:MM,AxiosError:RM,CanceledError:OM,isCancel:LM,CancelToken:PM,VERSION:DM,all:jM,Cancel:BM,isAxiosError:FM,spread:zM,toFormData:UM,AxiosHeaders:VM,HttpStatusCode:HM,formToJSON:WM,getAdapter:GM,mergeConfig:ZM}=ot,tk=[{event_id:"1",label:"Expediere preluata de Curier",description:"Expediere preluata de Curier"},{event_id:"2",label:"Expeditie Livrata",description:"Expeditie Livrata"},{event_id:"3",label:"Refuzare colet",description:"Refuzare colet"},{event_id:"4",label:"Expeditie returnata",description:"Expeditie returnata"},{event_id:"5",label:"Expeditie anulata",description:"Expeditie anulata"},{event_id:"6",label:"Intrare in depozit",description:"Intrare in depozit"},{event_id:"7",label:"Livrare reprogramata",description:"Livrare reprogramata"},{event_id:"R3",label:"Ramburs transferat",description:"Ramburs transferat"}];tk.reduce((e,t)=>(e[t.event_id]=t.label,e),{});const nk=!1,$f="http://localhost:8000",_p="arynik_api_url_v1",Zb="arynik_data_source_v1",Yb="arynik_data_source_reason_v1",rc=e=>String(e||"").trim().replace(/\/+$/,""),dm=e=>{try{return localStorage.getItem(e)}catch{return null}},bp=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},rk=e=>{try{localStorage.removeItem(e)}catch{}},ik=(e,t)=>{if(!(typeof window>"u"))try{window.dispatchEvent(new CustomEvent("arynik:data-source",{detail:{source:e,reason:t}}))}catch{}},ml=(e,t="")=>{if(typeof window>"u")return;const n=String(e||"").trim()||"api";bp(Zb,n),bp(Yb,String(t||"").trim()),ik(n,String(t||"").trim())},Cp=()=>dm(Zb)||"api",Sp=()=>dm(Yb)||"",Tt=()=>{if(typeof window>"u")return rc($f);const t=new URLSearchParams(window.location.search).get("api"),n=dm(_p);return rc(t||n||$f)||rc($f)},Xb=e=>{const t=rc(e);t?bp(_p,t):rk(_p)},Zt=e=>e?{Authorization:`Bearer ${e}`}:{},Dy=e=>{const t=new TextEncoder().encode(String(e));let n="";return t.forEach(i=>{n+=String.fromCharCode(i)}),btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"")},sk=e=>`${Dy(JSON.stringify({alg:"none",typ:"JWT"}))}.${Dy(JSON.stringify(e))}.offline`,ok=e=>{const t=String(e).trim().toLowerCase();return t.includes("admin")?"Admin":t.includes("manager")?"Manager":t.replace(/\\D/g,"").length>=9?"Recipient":"Driver"},ak=(e,t)=>{if(e==="Driver"){const n=String(t).trim().toUpperCase();return/^D\\d{3,}$/i.test(n)?n:"D002"}if(e==="Recipient"){const n=String(t).replace(/\\D/g,"");return n?`R${n.slice(-15)}`:"R000"}return"D001"};async function lk(e,t){const n=Tt(),i=new URLSearchParams;i.append("username",e),i.append("password",t);try{const a=await ot.post(`${n}/login`,i,{headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:3e3});return ml("api","login"),a.data}catch(a){if(a&&a.response)throw a;console.warn("Login API unavailable; using snapshot/offline token.",a),ml("snapshot","login");const c=String(e||"").trim()||"offline",f=ok(c),g={sub:c,driver_id:ak(f,c),role:f,offline:!0,exp:Math.floor(Date.now()/1e3)+7*24*60*60};return{access_token:sk(g),token_type:"bearer",role:f}}}async function qb(e){const t=Tt();return(await ot.post(`${t}/recipient/signup`,e,{headers:{"Content-Type":"application/json"},timeout:7e3})).data}async function Kb(e){const t=Tt();return(await ot.get(`${t}/stats`,{headers:Zt(e)})).data}async function Ap(e){const t=Tt();return(await ot.get(`${t}/me`,{headers:Zt(e)})).data}async function Qb(){const e=Tt();return(await ot.get(`${e}/health`,{timeout:5e3})).data}async function $b(e,{scope:t="self",awb_limit:n=200}={}){const i=Tt();return(await ot.get(`${i}/analytics`,{params:{scope:t,awb_limit:n},headers:Zt(e)})).data}async function Jb(e){const t=Tt();return(await ot.get(`${t}/roles`,{headers:Zt(e),timeout:5e3})).data}async function hm(e){const t=Tt();return(await ot.get(`${t}/users`,{headers:Zt(e),timeout:7e3})).data}async function eC(e,t){const n=Tt();return(await ot.post(`${n}/users`,t,{headers:{...Zt(e),"Content-Type":"application/json"},timeout:7e3})).data}async function tC(e,t,n){const i=String(t||"").trim();if(!i)throw new Error("driver_id is required");const a=Tt();return(await ot.patch(`${a}/users/${encodeURIComponent(i)}`,n,{headers:{...Zt(e),"Content-Type":"application/json"},timeout:7e3})).data}async function nC(e){const t=Tt();return(await ot.post(`${t}/sync-drivers`,null,{headers:Zt(e),timeout:15e3})).data}async function sh(e){const t=Tt();return(await ot.get(`${t}/postis/sync/status`,{headers:Zt(e),timeout:15e3})).data}async function fm(e,{wait:t=!1,mode:n=void 0,missing_fields_limit:i=void 0}={}){const a=Tt();return(await ot.post(`${a}/postis/sync`,null,{params:{wait:t?1:void 0,mode:n?String(n):void 0,missing_fields_limit:Number.isFinite(Number(i))?Number(i):void 0},headers:Zt(e),timeout:t?10*60*1e3:15e3})).data}async function rC(e){const t=Tt();return(await ot.get(`${t}/status-options`,{headers:Zt(e)})).data}async function Wh(e,t){const n=Tt();return(await ot.post(`${n}/update-awb`,t,{headers:Zt(e)})).data}async function pm(e,t={}){const n=Tt();return(await ot.get(`${n}/logs`,{params:t,headers:Zt(e)})).data}async function cu(e){const t=Tt();try{const n=await ot.get(`${t}/shipments`,{headers:Zt(e),timeout:5e3});return ml("api","shipments"),n.data}catch(n){if(n&&n.response)throw n;console.warn("Backend API unavailable, attempting to load static snapshot...",n),ml("snapshot","shipments");try{const i="/arynik1/data/shipments.json".replace("//","/"),a=await ot.get(i);console.info("Loaded shipments from static snapshot.");let c=a.data;if(e)try{const g=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),v=decodeURIComponent(window.atob(g).split("").map(function(T){return"%"+("00"+T.charCodeAt(0).toString(16)).slice(-2)}).join("")),y=JSON.parse(v),C=y.role,b=y.driver_id;if(C==="Driver")console.info(`Offline RBAC: Filtering for Driver ${b}`),c=c.filter(T=>T.driver_id===b);else if(C==="Recipient"){const z=String(y.sub||"").trim().replace(/\\D/g,"").slice(-9);z&&(console.info("Offline RBAC: Filtering for Recipient phone"),c=c.filter(R=>String((R==null?void 0:R.recipient_phone)||"").replace(/\\D/g,"").endsWith(z)))}}catch(f){console.warn("Offline RBAC: Failed to decode token",f)}return c}catch(i){throw console.error("Failed to load both API and static snapshot",i),n}}}async function Gc(e,t,{refresh:n=!1}={}){const i=Tt(),a=String(t||"").trim();if(!a)throw new Error("awb is required");try{const c=await ot.get(`${i}/shipments/${encodeURIComponent(a)}`,{params:n?{refresh:!0}:{},headers:Zt(e),timeout:7e3});return ml("api","shipment"),c.data}catch(c){if(c&&c.response)throw c;console.warn("Backend shipment details unavailable, attempting static snapshot...",c),ml("snapshot","shipment");try{const f="/arynik1/data/shipments.json".replace("//","/"),g=await ot.get(f),y=(Array.isArray(g.data)?g.data:[]).find(C=>String((C==null?void 0:C.awb)||"").toUpperCase()===a.toUpperCase());if(y)return y}catch{}throw c}}async function mm(e,t,n){const i=Tt(),a=String(t||"").trim();if(!a)throw new Error("awb is required");const c=String(n||"").trim();if(!c)throw new Error("driver_id is required");return(await ot.post(`${i}/shipments/${encodeURIComponent(a)}/allocate`,{driver_id:c},{headers:{...Zt(e),"Content-Type":"application/json"},timeout:7e3})).data}async function gm(e,{limit:t=50,unread_only:n=!1}={}){const i=Tt();return(await ot.get(`${i}/notifications`,{params:{limit:t,unread_only:n},headers:Zt(e),timeout:7e3})).data}async function oh(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("notification_id is required");const i=Tt();return(await ot.post(`${i}/notifications/${encodeURIComponent(String(n))}/read`,null,{headers:Zt(e),timeout:7e3})).data}async function iC(e,t){const n=Tt();return(await ot.post(`${n}/update-location`,t,{headers:{...Zt(e),"Content-Type":"application/json"},timeout:7e3})).data}async function xm(e,t){const n=Tt();return(await ot.post(`${n}/tracking/requests`,t,{headers:{...Zt(e),"Content-Type":"application/json"},timeout:7e3})).data}async function sC(e,{limit:t=20}={}){const n=Tt();return(await ot.get(`${n}/tracking/requests/inbox`,{params:{limit:t},headers:Zt(e),timeout:7e3})).data}async function oC(e,{limit:t=10}={}){const n=Tt();return(await ot.get(`${n}/tracking/requests/active`,{params:{limit:t},headers:Zt(e),timeout:7e3})).data}async function aC(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("request_id is required");const i=Tt();return(await ot.get(`${i}/tracking/requests/${encodeURIComponent(String(n))}`,{headers:Zt(e),timeout:7e3})).data}async function lC(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("request_id is required");const i=Tt();return(await ot.get(`${i}/tracking/requests/${encodeURIComponent(String(n))}/latest`,{headers:Zt(e),timeout:7e3})).data}async function cC(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("request_id is required");const i=Tt();return(await ot.post(`${i}/tracking/requests/${encodeURIComponent(String(n))}/accept`,null,{headers:Zt(e),timeout:7e3})).data}async function uC(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("request_id is required");const i=Tt();return(await ot.post(`${i}/tracking/requests/${encodeURIComponent(String(n))}/deny`,null,{headers:Zt(e),timeout:7e3})).data}async function ym(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("request_id is required");const i=Tt();return(await ot.post(`${i}/tracking/requests/${encodeURIComponent(String(n))}/stop`,null,{headers:Zt(e),timeout:7e3})).data}async function dC(e,{limit:t=50,awb:n=null}={}){const i=Tt();return(await ot.get(`${i}/chat/threads`,{params:{limit:t,awb:n||void 0},headers:Zt(e),timeout:7e3})).data}async function wm(e,{awb:t}={}){const n=String(t||"").trim().toUpperCase();if(!n)throw new Error("awb is required");const i=Tt();return(await ot.post(`${i}/chat/threads`,{awb:n},{headers:{...Zt(e),"Content-Type":"application/json"},timeout:7e3})).data}async function hC(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("thread_id is required");const i=Tt();return(await ot.get(`${i}/chat/threads/${encodeURIComponent(String(n))}`,{headers:Zt(e),timeout:7e3})).data}async function fC(e,t,{limit:n=50,before_id:i=null}={}){const a=Number(t);if(!Number.isFinite(a))throw new Error("thread_id is required");const c=Tt();return(await ot.get(`${c}/chat/threads/${encodeURIComponent(String(a))}/messages`,{params:{limit:n,before_id:i??void 0},headers:Zt(e),timeout:7e3})).data}async function Ep(e,t,n){const i=Number(t);if(!Number.isFinite(i))throw new Error("thread_id is required");const a=Tt();return(await ot.post(`${a}/chat/threads/${encodeURIComponent(String(i))}/messages`,n,{headers:{...Zt(e),"Content-Type":"application/json"},timeout:7e3})).data}async function pC(e,t,{last_read_message_id:n=null}={}){const i=Number(t);if(!Number.isFinite(i))throw new Error("thread_id is required");const a=Tt();return(await ot.post(`${a}/chat/threads/${encodeURIComponent(String(i))}/read`,{last_read_message_id:n??void 0},{headers:{...Zt(e),"Content-Type":"application/json"},timeout:7e3})).data}const ck=Object.freeze(Object.defineProperty({__proto__:null,acceptTrackingRequest:cC,allocateShipment:mm,createTrackingRequest:xm,createUser:eC,denyTrackingRequest:uC,ensureChatThread:wm,getAnalytics:$b,getApiUrl:Tt,getChatThread:hC,getDataSource:Cp,getDataSourceReason:Sp,getHealth:Qb,getLogs:pm,getMe:Ap,getNotifications:gm,getPostisSyncStatus:sh,getRoles:Jb,getShipment:Gc,getShipments:cu,getStats:Kb,getStatusOptions:rC,getTrackingLatest:lC,getTrackingRequest:aC,isDemoMode:nk,listChatMessages:fC,listChatThreads:dC,listTrackingActive:oC,listTrackingInbox:sC,listUsers:hm,login:lk,markChatRead:pC,markNotificationRead:oh,recipientSignup:qb,sendChatMessage:Ep,setApiUrl:Xb,stopTrackingRequest:ym,syncDrivers:nC,triggerPostisSync:fm,updateAwb:Wh,updateLocation:iC,updateUser:tC},Symbol.toStringTag,{value:"Module"})),jy=e=>{try{const n=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(atob(n).split("").map(function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(i)}catch{return null}},mC=O.createContext(),uk=({children:e})=>{const[t,n]=O.useState(null),[i,a]=O.useState(!0);O.useEffect(()=>{let g=!1;return(async()=>{const v=localStorage.getItem("token");if(!v){g||a(!1);return}const y=jy(v);if(!y||!y.sub){console.warn("Invalid/undecodable token in localStorage; clearing it."),localStorage.removeItem("token"),g||a(!1);return}const C=mp(y.role),b={username:y.sub,driver_id:y.driver_id,role:C,token:v,permissions:gp(C)};g||n(b);try{const T=await Ap(v);!g&&T&&n(I=>({...I||b,...T,token:v,permissions:Array.isArray(T==null?void 0:T.permissions)?T.permissions:(I==null?void 0:I.permissions)||b.permissions}))}catch(T){console.warn("Failed to load /me; continuing with token payload only.",T)}finally{g||a(!1)}})(),()=>{g=!0}},[]);const c=async(g,v)=>{localStorage.setItem("token",g);const y=jy(g);if(!y||!y.sub){console.error("Login returned an invalid token; clearing it."),localStorage.removeItem("token"),n(null);return}const C=mp(v||y.role),b={username:y.sub,driver_id:y.driver_id,role:C,token:g,permissions:gp(C)};n(b);try{const T=await Ap(g);T&&n(I=>({...I||b,...T,token:g,permissions:Array.isArray(T==null?void 0:T.permissions)?T.permissions:(I==null?void 0:I.permissions)||b.permissions}))}catch(T){console.warn("Failed to load /me after login; continuing with token payload only.",T)}},f=()=>{localStorage.setItem("token",""),localStorage.removeItem("token"),n(null)};return m.jsx(mC.Provider,{value:{user:t,login:c,logout:f,loading:i},children:!i&&e})},or=()=>O.useContext(mC),dk=({to:e,onClick:t,icon:n,label:i,isActive:a})=>{const c=`relative flex flex-col items-center justify-center gap-1.5 px-3 py-3 rounded-2xl transition-all duration-300 ${a?"text-white":"text-slate-500 hover:text-slate-300"}`,f=m.jsxs(m.Fragment,{children:[a&&m.jsx(st.div,{layoutId:"nav-pill",className:"absolute inset-0 bg-gradient-to-t from-brand-blue/20 to-transparent rounded-2xl border-b-2 border-brand-blue shadow-[0_0_20px_rgba(59,130,246,0.5)]",transition:{type:"spring",stiffness:300,damping:30}}),m.jsx(n,{size:22,className:`relative z-10 transition-all duration-300 ${a?"scale-110 drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]":"scale-100"}`,strokeWidth:a?2.5:2}),m.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wide relative z-10 ${a?"text-white drop-shadow-md":"opacity-70"}`,children:i})]});return e?m.jsx(jE,{to:e,className:c,children:f}):m.jsx("button",{type:"button",onClick:t,className:c,"aria-label":i,children:f})};function hk({onOpenMenu:e}){const n=ko().pathname,{user:i}=or(),a=_n(i,Br),c=["Manager","Admin","Dispatcher","Driver"].includes(i==null?void 0:i.role),f=[{to:"/home",icon:db,label:"Home"},...a?[{to:"/shipments",icon:Os,label:"Track"}]:[],...c?[{to:"/routes",icon:wo,label:"Routes"}]:[],{onClick:e,icon:m8,label:"Menu"}];return m.jsx("nav",{className:"fixed bottom-[calc(1.5rem+env(safe-area-inset-bottom))] left-1/2 -translate-x-1/2 z-50 w-full max-w-sm px-4",children:m.jsxs("div",{className:"glass-strong rounded-[32px] border-iridescent shadow-2xl px-2 py-2 flex justify-around items-center relative backdrop-blur-2xl",children:[m.jsx("div",{className:"absolute inset-x-4 top-0 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"}),f.map(g=>m.jsx(dk,{to:g.to,onClick:g.onClick,icon:g.icon,label:g.label,isActive:g.to?n===g.to||g.to!=="/home"&&n.startsWith(g.to)||n==="/"&&g.to==="/home":!1},g.to||g.label))]})})}const Ji=({icon:e,label:t,description:n,onClick:i})=>m.jsxs("button",{type:"button",onClick:i,className:"w-full p-4 glass-light rounded-2xl border border-white/10 hover:border-white/20 hover:bg-white/5 transition-all flex items-center gap-4 text-left",children:[m.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-violet-500/25 to-purple-600/15 border border-white/10",children:m.jsx(e,{size:20,className:"text-violet-300"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-black text-white text-sm uppercase tracking-tight",children:t}),n?m.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:n}):null]})]});function fk({open:e,onClose:t}){const n=ur(),{user:i,logout:a}=or(),c=O.useMemo(()=>_n(i,Br),[i]),f=O.useMemo(()=>["Manager","Admin","Dispatcher","Driver"].includes(i==null?void 0:i.role),[i==null?void 0:i.role]),g=O.useMemo(()=>_n(i,vo),[i]),v=O.useMemo(()=>_n(i,ro),[i]),y=O.useMemo(()=>_n(i,Ci),[i]),C=O.useMemo(()=>_n(i,ji),[i]),b=O.useMemo(()=>_n(i,bi),[i]),T=O.useMemo(()=>_n(i,Jr),[i]);O.useEffect(()=>{if(!e)return;const G=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=G}},[e]);const I=G=>{n(G),t==null||t()},z=()=>{a(),t==null||t(),n("/login",{replace:!0})},R=(i==null?void 0:i.name)||(i==null?void 0:i.username)||"Driver",B=i!=null&&i.truck_plate?String(i.truck_plate).toUpperCase():null,F=(i==null?void 0:i.truck_phone)||null,P=String((i==null?void 0:i.role)||"")==="Recipient",k=P&&((i==null?void 0:i.phone_number)||(i==null?void 0:i.username))||null;return m.jsx(os,{children:e?m.jsxs(m.Fragment,{children:[m.jsx(st.div,{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[60]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t}),m.jsx(st.aside,{className:"fixed inset-y-0 right-0 w-full max-w-sm z-[61] p-4",initial:{x:60,opacity:0},animate:{x:0,opacity:1},exit:{x:60,opacity:0},transition:{type:"spring",stiffness:260,damping:28},"aria-label":"App menu",role:"dialog","aria-modal":"true",children:m.jsxs("div",{className:"h-full glass-strong rounded-[32px] border-iridescent shadow-2xl overflow-hidden flex flex-col",children:[m.jsxs("div",{className:"p-5 flex items-center justify-between border-b border-white/10",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Menu"}),m.jsx("div",{className:"text-lg font-black text-white mt-1",children:"Navigation"})]}),m.jsx("button",{type:"button",onClick:t,className:"w-11 h-11 rounded-2xl glass-light border border-white/10 flex items-center justify-center hover:bg-white/5 transition-all","aria-label":"Close menu",children:m.jsx(ba,{size:18,className:"text-slate-300"})})]}),m.jsx("div",{className:"p-5",children:m.jsxs("div",{className:"glass-light rounded-3xl border border-white/10 p-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center shadow-glow-md",children:m.jsx(_a,{size:22,className:"text-white"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("div",{className:"font-black text-white truncate",children:R}),m.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-0.5",children:[(i==null?void 0:i.role)||"Role","  ID: ",(i==null?void 0:i.driver_id)||"N/A"]})]})]}),m.jsx("div",{className:"mt-4 grid grid-cols-2 gap-3",children:P?m.jsxs("div",{className:"p-3 rounded-2xl bg-slate-900/40 border border-white/10 col-span-2",children:[m.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[m.jsx(Xd,{size:14}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Recipient Phone"})]}),m.jsx("div",{className:"text-sm font-black text-white mt-1 truncate",children:k||"--"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"p-3 rounded-2xl bg-slate-900/40 border border-white/10",children:[m.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[m.jsx(rm,{size:14}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Truck"})]}),m.jsx("div",{className:"text-sm font-black text-white mt-1 truncate",children:B||"Unassigned"})]}),m.jsxs("div",{className:"p-3 rounded-2xl bg-slate-900/40 border border-white/10",children:[m.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[m.jsx(Xd,{size:14}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Phone"})]}),m.jsx("div",{className:"text-sm font-black text-white mt-1 truncate",children:F||"--"})]})]})}),v?m.jsx("div",{className:"mt-3 text-[10px] text-emerald-400 font-black uppercase tracking-widest",children:"Analytics: ALL enabled"}):null]})}),m.jsxs("div",{className:"flex-1 px-5 pb-5 overflow-y-auto space-y-3",children:[m.jsx(Ji,{icon:db,label:"Home",description:"Scanner & quick actions",onClick:()=>I("/home")}),c?m.jsxs(m.Fragment,{children:[m.jsx(Ji,{icon:Os,label:"Shipments",description:"Track shipments",onClick:()=>I("/shipments")}),f?m.jsx(Ji,{icon:wo,label:"Routes",description:"Plan deliveries",onClick:()=>I("/routes")}):null]}):null,b?m.jsx(Ji,{icon:Hc,label:"Notifications",description:"Allocation updates",onClick:()=>I("/notifications")}):null,T?m.jsx(Ji,{icon:Wc,label:"Chat",description:"Recipient messaging",onClick:()=>I("/chat")}):null,y?m.jsx(Ji,{icon:d8,label:"History",description:"Logs & updates",onClick:()=>I("/history")}):null,c?m.jsx(Ji,{icon:cb,label:"Calendar",description:"Daily overview",onClick:()=>I("/calendar")}):null,C?m.jsx(Ji,{icon:lb,label:"Statistics",description:"Trucks, drivers, AWBs, ESCH",onClick:()=>I("/analytics")}):null,g?m.jsx(Ji,{icon:vb,label:"Users",description:"Create accounts & roles",onClick:()=>I("/users")}):null,m.jsx(Ji,{icon:xb,label:"Settings",description:"Account & API",onClick:()=>I("/settings")}),m.jsxs("button",{type:"button",onClick:z,className:"w-full p-4 rounded-2xl bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-400 hover:to-rose-500 text-white font-black uppercase tracking-wider shadow-lg flex items-center justify-center gap-3 transition-all",children:[m.jsx(pb,{size:18}),"Sign Out"]})]})]})})]}):null})}function pk(){const e=ur(),{user:t}=or(),n=(t==null?void 0:t.token)||localStorage.getItem("token"),[i,a]=O.useState(null),c=O.useRef(new Set);O.useEffect(()=>{if(!n)return;let C=!1;const b=async()=>{try{const I=await gm(n,{limit:50,unread_only:!0}).catch(()=>[]),R=(Array.isArray(I)?I:[]).filter(B=>{var F;return String(((F=B==null?void 0:B.data)==null?void 0:F.type)||"")==="chat_message"}).sort((B,F)=>new Date((F==null?void 0:F.created_at)||0)-new Date((B==null?void 0:B.created_at)||0));for(const B of R){const F=String((B==null?void 0:B.id)||"");if(F&&!c.current.has(F)){c.current.add(F),C||a(B);break}}}catch{}};b();const T=setInterval(b,12e3);return()=>{C=!0,clearInterval(T)}},[n]);const f=async()=>{const C=i==null?void 0:i.id;if(a(null),!(!C||!n))try{await oh(n,C)}catch{}},g=async()=>{var T;const C=(T=i==null?void 0:i.data)==null?void 0:T.thread_id,b=i==null?void 0:i.id;if(a(null),b&&n)try{await oh(n,b)}catch{}C&&e(`/chat/${encodeURIComponent(String(C))}`)};if(!i)return null;const v=String((i==null?void 0:i.body)||"").trim(),y=i!=null&&i.awb?String(i.awb).toUpperCase():null;return m.jsx("div",{className:"fixed bottom-[calc(9rem+env(safe-area-inset-bottom))] left-0 right-0 z-[69] px-4",children:m.jsx("div",{className:"max-w-xl mx-auto",children:m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-4 shadow-2xl flex items-start gap-3",children:[m.jsx("div",{className:"w-11 h-11 rounded-2xl bg-violet-500/15 border border-violet-500/20 flex items-center justify-center",children:m.jsx(Wc,{size:18,className:"text-violet-200"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"text-sm font-black text-white truncate",children:["New chat message",y?`  ${y}`:""]}),v?m.jsx("div",{className:"text-[11px] font-bold text-slate-300 mt-1 break-words",children:v}):null,m.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[m.jsx("button",{type:"button",onClick:g,className:"px-4 h-10 rounded-2xl border text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 transition-all bg-emerald-500/15 border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95",children:"Open"}),m.jsx("button",{type:"button",onClick:f,className:"w-10 h-10 rounded-2xl border flex items-center justify-center transition-all bg-slate-900/40 border-white/10 text-slate-300 hover:bg-white/5 active:scale-95",title:"Dismiss",children:m.jsx(ba,{size:18})})]})]})]})})})}function vm(e={}){const t=typeof e=="boolean"?e:(e==null?void 0:e.enabled)??!0,[n,i]=O.useState(null),[a,c]=O.useState(null);return O.useEffect(()=>{if(!t)return;if(!navigator.geolocation){c("Geolocation is not supported by your browser");return}const f=C=>{const{latitude:b,longitude:T,heading:I,speed:z}=C.coords;i({latitude:b,longitude:T,heading:I,speed:z})},g=C=>{c(C.message)},v={enableHighAccuracy:!0,timeout:5e3,maximumAge:0,...typeof e=="object"&&(e!=null&&e.options)?e.options:{}},y=navigator.geolocation.watchPosition(f,g,v);return()=>navigator.geolocation.clearWatch(y)},[t]),{location:n,error:a}}const By=e=>{try{return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}};function mk(){const{user:e}=or(),t=(e==null?void 0:e.token)||localStorage.getItem("token"),n=String((e==null?void 0:e.role)||"").trim(),[i,a]=O.useState([]),[c,f]=O.useState(null),[g,v]=O.useState(null),[y,C]=O.useState(""),b=n==="Driver"&&!!c,{location:T,error:I}=vm({enabled:b}),z=O.useMemo(()=>{if(!(c!=null&&c.expires_at))return null;const G=new Date(c.expires_at).getTime();return Number.isFinite(G)?G:null},[c==null?void 0:c.expires_at]);O.useEffect(()=>{if(n!=="Driver"||!t)return;let G=!1;const K=async()=>{try{const Y=await sC(t,{limit:20}).catch(()=>[]);G||a(Array.isArray(Y)?Y:[]);let ee=null;try{const M=await oC(t,{limit:5});ee=Array.isArray(M)?M:[]}catch{ee=null}if(G||ee===null)return;f(M=>M?ee.some($=>String($==null?void 0:$.id)===String(M==null?void 0:M.id))?M:null:ee[0]||null)}catch{}};K();const q=setInterval(K,1e4);return()=>{G=!0,clearInterval(q)}},[n,t]),O.useEffect(()=>{if(!z)return;const G=()=>{Date.now()>=z&&f(null)};G();const K=setInterval(G,1e3);return()=>clearInterval(K)},[z]);const R=O.useRef(0);O.useEffect(()=>{if(!b||!T||!t)return;const G=Date.now();if(G-R.current<8e3)return;R.current=G;const K={latitude:Number(T.latitude),longitude:Number(T.longitude)};!Number.isFinite(K.latitude)||!Number.isFinite(K.longitude)||(async()=>{var q,Y;try{await iC(t,K),C("")}catch(ee){C(String(((Y=(q=ee==null?void 0:ee.response)==null?void 0:q.data)==null?void 0:Y.detail)||(ee==null?void 0:ee.message)||"Failed to send location"))}})()},[b,T==null?void 0:T.latitude,T==null?void 0:T.longitude,t]);const B=O.useMemo(()=>{if(c)return null;const G=Array.isArray(i)?i:[];return G.length>0?G[0]:null},[i,c]),F=async()=>{var G,K;if(!(!(B!=null&&B.id)||!t)){v(B.id),C("");try{const q=await cC(t,B.id);f(q||null),a(Y=>Array.isArray(Y)?Y.filter(ee=>String(ee==null?void 0:ee.id)!==String(B.id)):Y)}catch(q){C(String(((K=(G=q==null?void 0:q.response)==null?void 0:G.data)==null?void 0:K.detail)||(q==null?void 0:q.message)||"Failed to accept request"))}finally{v(null)}}},P=async()=>{var G,K;if(!(!(B!=null&&B.id)||!t)){v(B.id),C("");try{await uC(t,B.id),a(q=>Array.isArray(q)?q.filter(Y=>String(Y==null?void 0:Y.id)!==String(B.id)):q)}catch(q){C(String(((K=(G=q==null?void 0:q.response)==null?void 0:G.data)==null?void 0:K.detail)||(q==null?void 0:q.message)||"Failed to deny request"))}finally{v(null)}}},k=async()=>{var G,K;if(!(!(c!=null&&c.id)||!t)){v(c.id),C("");try{await ym(t,c.id),f(null)}catch(q){C(String(((K=(G=q==null?void 0:q.response)==null?void 0:G.data)==null?void 0:K.detail)||(q==null?void 0:q.message)||"Failed to stop tracking"))}finally{v(null)}}};return n!=="Driver"||!B&&!c?null:m.jsx("div",{className:"fixed bottom-[calc(5rem+env(safe-area-inset-bottom))] left-0 right-0 z-[70] px-4",children:m.jsx("div",{className:"max-w-xl mx-auto",children:m.jsx("div",{className:"glass-strong rounded-3xl border-iridescent p-4 shadow-2xl",children:c?m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-11 h-11 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center",children:m.jsx(Rs,{size:18,className:"text-emerald-200"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsx("p",{className:"text-sm font-black text-white truncate",children:"Sharing live location"}),m.jsxs("button",{type:"button",onClick:k,disabled:String(g)===String(c.id),className:`px-3 py-2 rounded-2xl text-[10px] font-black uppercase tracking-widest border transition-all ${String(g)===String(c.id)?"opacity-60 cursor-not-allowed bg-slate-900/40 border-white/10 text-slate-400":"bg-rose-500/15 border-rose-500/20 text-rose-200 hover:bg-rose-500/20 active:scale-95"}`,title:"Stop sharing",children:[m.jsx(wb,{size:14,className:"inline-block mr-1 -mt-0.5"}),"Stop"]})]}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["Until ",c.expires_at?By(c.expires_at):"--",c.awb?`  AWB ${String(c.awb).toUpperCase()}`:""]}),I?m.jsxs("p",{className:"mt-2 text-[11px] font-bold text-amber-200",children:["Location error: ",I]}):null,y?m.jsx("p",{className:"mt-2 text-[11px] font-bold text-rose-200",children:y}):null]})]}):m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-11 h-11 rounded-2xl bg-violet-500/15 border border-violet-500/20 flex items-center justify-center",children:m.jsx(Rs,{size:18,className:"text-violet-200"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-sm font-black text-white truncate",children:"Location request"}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["Expires ",B!=null&&B.expires_at?By(B.expires_at):"--",B!=null&&B.awb?`  AWB ${String(B.awb).toUpperCase()}`:""]}),y?m.jsx("p",{className:"mt-2 text-[11px] font-bold text-rose-200",children:y}):null]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{type:"button",onClick:P,disabled:String(g)===String(B==null?void 0:B.id),className:`w-11 h-11 rounded-2xl border flex items-center justify-center transition-all ${String(g)===String(B==null?void 0:B.id)?"opacity-60 cursor-not-allowed bg-slate-900/40 border-white/10 text-slate-500":"bg-slate-900/40 border-white/10 text-slate-300 hover:bg-white/5 active:scale-95"}`,title:"Deny",children:m.jsx(ba,{size:18})}),m.jsxs("button",{type:"button",onClick:F,disabled:String(g)===String(B==null?void 0:B.id),className:`px-4 h-11 rounded-2xl border text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 transition-all ${String(g)===String(B==null?void 0:B.id)?"opacity-60 cursor-not-allowed bg-emerald-500/10 border-emerald-500/20 text-emerald-200":"bg-emerald-500/15 border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95"}`,title:"Start sharing",children:[String(g)===String(B==null?void 0:B.id)?m.jsx(fn,{size:16,className:"animate-spin"}):m.jsx(x8,{size:16}),"Share"]})]})]})})})})}function gk(){const e=ur(),[t,n]=O.useState(Cp()),[i,a]=O.useState(Sp());if(O.useEffect(()=>{const f=g=>{var C,b;const v=((C=g==null?void 0:g.detail)==null?void 0:C.source)||Cp(),y=((b=g==null?void 0:g.detail)==null?void 0:b.reason)||Sp();n(v),a(y)};return window.addEventListener("arynik:data-source",f),()=>window.removeEventListener("arynik:data-source",f)},[]),String(t||"").toLowerCase()!=="snapshot")return null;const c=(()=>{const f=String(i||"").trim().toLowerCase();return f?f==="login"?"Backend unreachable (login).":f==="shipments"?"Backend unreachable (shipments).":f==="shipment"?"Backend unreachable (details).":"Backend unreachable.":"Backend unreachable."})();return m.jsx("div",{className:"px-4 pt-3",children:m.jsxs("div",{className:"glass-strong rounded-3xl border border-amber-500/25 bg-amber-500/10 p-4 flex items-start gap-3",children:[m.jsx("div",{className:"w-10 h-10 rounded-2xl bg-amber-500/15 border border-amber-500/20 flex items-center justify-center flex-shrink-0",children:m.jsx(r8,{size:18,className:"text-amber-300"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[10px] uppercase tracking-[0.2em] font-black text-amber-200/90",children:"Offline Snapshot Mode"}),m.jsxs("p",{className:"text-xs font-bold text-amber-100 mt-1",children:[c," Live Postis sync and full AWB info require the backend API."]}),m.jsx("p",{className:"text-[10px] font-bold text-amber-200/70 mt-2",children:"Fix: Menu  Settings  API URL (must be HTTPS on GitHub Pages)."})]}),m.jsxs("button",{type:"button",onClick:()=>e("/settings"),className:"px-3 py-2 rounded-2xl bg-amber-500/15 border border-amber-500/25 text-amber-100 text-[10px] font-black uppercase tracking-widest active:scale-95 transition-all flex items-center gap-2",title:"Open Settings",children:[m.jsx(xb,{size:14}),"Settings"]})]})})}function xk(){const[e,t]=O.useState(!1);return m.jsxs("div",{className:"min-h-screen pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[" ",m.jsxs("div",{className:"max-w-xl mx-auto",children:[m.jsx(gk,{}),m.jsx(AE,{context:{openMenu:()=>t(!0)}})]}),m.jsx(hk,{onOpenMenu:()=>t(!0)}),m.jsx(fk,{open:e,onClose:()=>t(!1)}),m.jsx(pk,{}),m.jsx(mk,{})]})}function yk(){const[e,t]=O.useState(null),[n,i]=O.useState(!0);O.useEffect(()=>{(async()=>{try{const v=localStorage.getItem("token"),y=await Kb(v);t(y)}catch(v){console.error("Failed to fetch stats",v)}finally{i(!1)}})()},[]);const a=(g,v=2e3)=>{const[y,C]=O.useState(0);return O.useEffect(()=>{let b=0;const T=g/(v/16),I=setInterval(()=>{b+=T,b>=g?(C(g),clearInterval(I)):C(Math.floor(b))},16);return()=>clearInterval(I)},[g,v]),y},c=a((e==null?void 0:e.today_count)||0),f=a((e==null?void 0:e.total_count)||0);return n?m.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-pulse",children:[m.jsx("div",{className:"h-24 glass-strong rounded-3xl border-iridescent opacity-50"}),m.jsx("div",{className:"h-24 glass-strong rounded-3xl border-iridescent opacity-50"})]}):m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"glass-strong p-5 rounded-3xl shadow-xl shadow-brand-blue/20 border-iridescent flex flex-col justify-between relative overflow-hidden group",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-blue/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),m.jsx("div",{className:"absolute -right-4 -top-4 opacity-10 scale-150 group-hover:rotate-12 transition-transform duration-500",children:m.jsx(Bh,{size:80,className:"text-brand-blue"})}),m.jsxs("div",{className:"relative z-10 flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-1.5 bg-brand-blue/20 rounded-lg",children:m.jsx(Kd,{size:16,className:"text-brand-blue"})}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Today"})]}),m.jsxs("div",{className:"relative z-10",children:[m.jsx("span",{className:"text-3xl font-black text-white",children:c}),m.jsx("p",{className:"text-[10px] font-bold text-slate-400",children:"Success Syncs"})]})]}),m.jsxs("div",{className:"glass-strong p-5 rounded-3xl shadow-sm border-iridescent flex flex-col justify-between relative overflow-hidden group",children:[m.jsx("div",{className:"absolute -right-4 -top-4 opacity-5 scale-150 text-slate-400 group-hover:rotate-12 transition-transform duration-500",children:m.jsx(ob,{size:80})}),m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-1.5 bg-slate-700/50 rounded-lg text-slate-400",children:m.jsx(Os,{size:16})}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"All Time"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-3xl font-black text-white",children:f}),m.jsx("p",{className:"text-[10px] font-bold text-slate-400",children:"Total Updates"})]})]})]})}var $e;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})($e||($e={}));var Fy=new Map([[$e.QR_CODE,"QR_CODE"],[$e.AZTEC,"AZTEC"],[$e.CODABAR,"CODABAR"],[$e.CODE_39,"CODE_39"],[$e.CODE_93,"CODE_93"],[$e.CODE_128,"CODE_128"],[$e.DATA_MATRIX,"DATA_MATRIX"],[$e.MAXICODE,"MAXICODE"],[$e.ITF,"ITF"],[$e.EAN_13,"EAN_13"],[$e.EAN_8,"EAN_8"],[$e.PDF_417,"PDF_417"],[$e.RSS_14,"RSS_14"],[$e.RSS_EXPANDED,"RSS_EXPANDED"],[$e.UPC_A,"UPC_A"],[$e.UPC_E,"UPC_E"],[$e.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),zy;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(zy||(zy={}));function wk(e){return Object.values($e).includes(e)}var Ao;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Ao||(Ao={}));var Fi=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Ao.SCAN_TYPE_CAMERA,Ao.SCAN_TYPE_FILE],e}(),gC=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Fy.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,Fy.get(t))},e}(),Uy=function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),Np;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Np||(Np={}));var xC=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:Np.UNKWOWN_ERROR}},e}(),yC=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function ts(e){return typeof e>"u"||e===null}function vk(e,t,n){return e>n?n:e<t?t:e}var Qa=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),tn=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),Vy=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),wC=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var i=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],c=new Set(a),f=Object.keys(t),g=0,v=f;g<v.length;g++){var y=v[g];if(c.has(y))return n.logError("".concat(y," is not supported videoConstaints."),!0),!1}return!0},e}(),Tp={exports:{}};(function(e,t){(function(n,i){i(t)})(Ma,function(n){function i(D){return D==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,r){D.__proto__=r}||function(D,r){for(var s in r)r.hasOwnProperty(s)&&(D[s]=r[s])};function c(D,r){a(D,r);function s(){this.constructor=D}D.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function f(D,r){var s=Object.setPrototypeOf;s?s(D,r):D.__proto__=r}function g(D,r){r===void 0&&(r=D.constructor);var s=Error.captureStackTrace;s&&s(D,r)}var v=function(D){c(r,D);function r(s){var l=this.constructor,u=D.call(this,s)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),f(u,l.prototype),g(u),u}return r}(Error);class y extends v{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}y.kind="Exception";class C extends y{}C.kind="ArgumentException";class b extends y{}b.kind="IllegalArgumentException";class T{constructor(r){if(this.binarizer=r,r===null)throw new b("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,l,u){const d=this.binarizer.getLuminanceSource().crop(r,s,l,u);return new T(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new T(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new T(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class I extends y{static getChecksumInstance(){return new I}}I.kind="ChecksumException";class z{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class R{static arraycopy(r,s,l,u,d){for(;d--;)l[u++]=r[s++]}static currentTimeMillis(){return Date.now()}}class B extends y{}B.kind="IndexOutOfBoundsException";class F extends B{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}F.kind="ArrayIndexOutOfBoundsException";class P{static fill(r,s){for(let l=0,u=r.length;l<u;l++)r[l]=s}static fillWithin(r,s,l,u){P.rangeCheck(r.length,s,l);for(let d=s;d<l;d++)r[d]=u}static rangeCheck(r,s,l){if(s>l)throw new b("fromIndex("+s+") > toIndex("+l+")");if(s<0)throw new F(s);if(l>r)throw new F(l)}static asList(...r){return r}static create(r,s,l){return Array.from({length:r}).map(d=>Array.from({length:s}).fill(l))}static createInt32Array(r,s,l){return Array.from({length:r}).map(d=>Int32Array.from({length:s}).fill(l))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let l=0,u=r.length;l<u;l++)if(r[l]!==s[l])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const l of r)s=31*s+l;return s}static fillUint8Array(r,s){for(let l=0;l!==r.length;l++)r[l]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const l=new Uint8Array(s);return l.set(r),l}return r.slice(0,s)}static copyOfRange(r,s,l){const u=l-s,d=new Int32Array(u);return R.arraycopy(r,s,d,0,u),d}static binarySearch(r,s,l){l===void 0&&(l=P.numberComparator);let u=0,d=r.length-1;for(;u<=d;){const p=d+u>>1,x=l(s,r[p]);if(x>0)u=p+1;else if(x<0)d=p-1;else return p}return-u-1}static numberComparator(r,s){return r-s}}class k{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let l=31;return s=r<<16,s!==0&&(l-=16,r=s),s=r<<8,s!==0&&(l-=8,r=s),s=r<<4,s!==0&&(l-=4,r=s),s=r<<2,s!==0&&(l-=2,r=s),l-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}k.MIN_VALUE_32_BITS=-2147483648,k.MAX_VALUE=Number.MAX_SAFE_INTEGER;class G{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=G.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=G.makeArray(r);R.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const l=this.bits;let u=Math.floor(r/32),d=l[u];d&=~((1<<(r&31))-1);const p=l.length;for(;d===0;){if(++u===p)return s;d=l[u]}const x=u*32+k.numberOfTrailingZeros(d);return x>s?s:x}getNextUnset(r){const s=this.size;if(r>=s)return s;const l=this.bits;let u=Math.floor(r/32),d=~l[u];d&=~((1<<(r&31))-1);const p=l.length;for(;d===0;){if(++u===p)return s;d=~l[u]}const x=u*32+k.numberOfTrailingZeros(d);return x>s?s:x}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new b;if(s===r)return;s--;const l=Math.floor(r/32),u=Math.floor(s/32),d=this.bits;for(let p=l;p<=u;p++){const x=p>l?0:r&31,S=(2<<(p<u?31:s&31))-(1<<x);d[p]|=S}}clear(){const r=this.bits.length,s=this.bits;for(let l=0;l<r;l++)s[l]=0}isRange(r,s,l){if(s<r||r<0||s>this.size)throw new b;if(s===r)return!0;s--;const u=Math.floor(r/32),d=Math.floor(s/32),p=this.bits;for(let x=u;x<=d;x++){const _=x>u?0:r&31,E=(2<<(x<d?31:s&31))-(1<<_)&4294967295;if((p[x]&E)!==(l?E:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new b("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let l=s;l>0;l--)this.appendBit((r>>l-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let l=0;l<s;l++)this.appendBit(r.get(l))}xor(r){if(this.size!==r.size)throw new b("Sizes don't match");const s=this.bits;for(let l=0,u=s.length;l<u;l++)s[l]^=r.bits[l]}toBytes(r,s,l,u){for(let d=0;d<u;d++){let p=0;for(let x=0;x<8;x++)this.get(r)&&(p|=1<<7-x),r++;s[l+d]=p}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),l=s+1,u=this.bits;for(let d=0;d<l;d++){let p=u[d];p=p>>1&1431655765|(p&1431655765)<<1,p=p>>2&858993459|(p&858993459)<<2,p=p>>4&252645135|(p&252645135)<<4,p=p>>8&16711935|(p&16711935)<<8,p=p>>16&65535|(p&65535)<<16,r[s-d]=p}if(this.size!==l*32){const d=l*32-this.size;let p=r[0]>>>d;for(let x=1;x<l;x++){const _=r[x];p|=_<<32-d,r[x-1]=p,p=_>>>d}r[l-1]=p}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof G))return!1;const s=r;return this.size===s.size&&P.equals(this.bits,s.bits)}hashCode(){return 31*this.size+P.hashCode(this.bits)}toString(){let r="";for(let s=0,l=this.size;s<l;s++)s&7||(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new G(this.size,this.bits.slice())}}var K;(function(D){D[D.OTHER=0]="OTHER",D[D.PURE_BARCODE=1]="PURE_BARCODE",D[D.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",D[D.TRY_HARDER=3]="TRY_HARDER",D[D.CHARACTER_SET=4]="CHARACTER_SET",D[D.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",D[D.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",D[D.ASSUME_GS1=7]="ASSUME_GS1",D[D.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",D[D.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",D[D.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(K||(K={}));var q=K;class Y extends y{static getFormatInstance(){return new Y}}Y.kind="FormatException";var ee;(function(D){D[D.Cp437=0]="Cp437",D[D.ISO8859_1=1]="ISO8859_1",D[D.ISO8859_2=2]="ISO8859_2",D[D.ISO8859_3=3]="ISO8859_3",D[D.ISO8859_4=4]="ISO8859_4",D[D.ISO8859_5=5]="ISO8859_5",D[D.ISO8859_6=6]="ISO8859_6",D[D.ISO8859_7=7]="ISO8859_7",D[D.ISO8859_8=8]="ISO8859_8",D[D.ISO8859_9=9]="ISO8859_9",D[D.ISO8859_10=10]="ISO8859_10",D[D.ISO8859_11=11]="ISO8859_11",D[D.ISO8859_13=12]="ISO8859_13",D[D.ISO8859_14=13]="ISO8859_14",D[D.ISO8859_15=14]="ISO8859_15",D[D.ISO8859_16=15]="ISO8859_16",D[D.SJIS=16]="SJIS",D[D.Cp1250=17]="Cp1250",D[D.Cp1251=18]="Cp1251",D[D.Cp1252=19]="Cp1252",D[D.Cp1256=20]="Cp1256",D[D.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",D[D.UTF8=22]="UTF8",D[D.ASCII=23]="ASCII",D[D.Big5=24]="Big5",D[D.GB18030=25]="GB18030",D[D.EUC_KR=26]="EUC_KR"})(ee||(ee={}));class M{constructor(r,s,l,...u){this.valueIdentifier=r,this.name=l,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=u,M.VALUE_IDENTIFIER_TO_ECI.set(r,this),M.NAME_TO_ECI.set(l,this);const d=this.values;for(let p=0,x=d.length;p!==x;p++){const _=d[p];M.VALUES_TO_ECI.set(_,this)}for(const p of u)M.NAME_TO_ECI.set(p,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new Y("incorect value");const s=M.VALUES_TO_ECI.get(r);if(s===void 0)throw new Y("incorect value");return s}static getCharacterSetECIByName(r){const s=M.NAME_TO_ECI.get(r);if(s===void 0)throw new Y("incorect value");return s}equals(r){if(!(r instanceof M))return!1;const s=r;return this.getName()===s.getName()}}M.VALUE_IDENTIFIER_TO_ECI=new Map,M.VALUES_TO_ECI=new Map,M.NAME_TO_ECI=new Map,M.Cp437=new M(ee.Cp437,Int32Array.from([0,2]),"Cp437"),M.ISO8859_1=new M(ee.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),M.ISO8859_2=new M(ee.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),M.ISO8859_3=new M(ee.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),M.ISO8859_4=new M(ee.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),M.ISO8859_5=new M(ee.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),M.ISO8859_6=new M(ee.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),M.ISO8859_7=new M(ee.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),M.ISO8859_8=new M(ee.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),M.ISO8859_9=new M(ee.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),M.ISO8859_10=new M(ee.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),M.ISO8859_11=new M(ee.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),M.ISO8859_13=new M(ee.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),M.ISO8859_14=new M(ee.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),M.ISO8859_15=new M(ee.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),M.ISO8859_16=new M(ee.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),M.SJIS=new M(ee.SJIS,20,"SJIS","Shift_JIS"),M.Cp1250=new M(ee.Cp1250,21,"Cp1250","windows-1250"),M.Cp1251=new M(ee.Cp1251,22,"Cp1251","windows-1251"),M.Cp1252=new M(ee.Cp1252,23,"Cp1252","windows-1252"),M.Cp1256=new M(ee.Cp1256,24,"Cp1256","windows-1256"),M.UnicodeBigUnmarked=new M(ee.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),M.UTF8=new M(ee.UTF8,26,"UTF8","UTF-8"),M.ASCII=new M(ee.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),M.Big5=new M(ee.Big5,28,"Big5"),M.GB18030=new M(ee.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),M.EUC_KR=new M(ee.EUC_KR,30,"EUC_KR","EUC-KR");class H extends y{}H.kind="UnsupportedOperationException";class ${static decode(r,s){const l=this.encodingName(s);return this.customDecoder?this.customDecoder(r,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(r,l):new TextDecoder(l).decode(r)}static shouldDecodeOnFallback(r){return!$.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const l=this.encodingName(s);return this.customEncoder?this.customEncoder(r,l):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof M?r:M.getCharacterSetECIByName(r)}static decodeFallback(r,s){const l=this.encodingCharacterSet(s);if($.isDecodeFallbackSupported(l)){let u="";for(let d=0,p=r.length;d<p;d++){let x=r[d].toString(16);x.length<2&&(x="0"+x),u+="%"+x}return decodeURIComponent(u)}if(l.equals(M.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new H(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(M.UTF8)||r.equals(M.ISO8859_1)||r.equals(M.ASCII)}static encodeFallback(r){const l=btoa(unescape(encodeURIComponent(r))).split(""),u=[];for(let d=0;d<l.length;d++)u.push(l[d].charCodeAt(0));return new Uint8Array(u)}}class se{static castAsNonUtf8Char(r,s=null){const l=s?s.getName():this.ISO88591;return $.decode(new Uint8Array([r]),l)}static guessEncoding(r,s){if(s!=null&&s.get(q.CHARACTER_SET)!==void 0)return s.get(q.CHARACTER_SET).toString();const l=r.length;let u=!0,d=!0,p=!0,x=0,_=0,S=0,E=0,j=0,U=0,X=0,te=0,re=0,ce=0,fe=0;const Me=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let Re=0;Re<l&&(u||d||p);Re++){const Ie=r[Re]&255;p&&(x>0?Ie&128?x--:p=!1:Ie&128&&(Ie&64?(x++,Ie&32?(x++,Ie&16?(x++,Ie&8?p=!1:E++):S++):_++):p=!1)),u&&(Ie>127&&Ie<160?u=!1:Ie>159&&(Ie<192||Ie===215||Ie===247)&&fe++),d&&(j>0?Ie<64||Ie===127||Ie>252?d=!1:j--:Ie===128||Ie===160||Ie>239?d=!1:Ie>160&&Ie<224?(U++,te=0,X++,X>re&&(re=X)):Ie>127?(j++,X=0,te++,te>ce&&(ce=te)):(X=0,te=0))}return p&&x>0&&(p=!1),d&&j>0&&(d=!1),p&&(Me||_+S+E>0)?se.UTF8:d&&(se.ASSUME_SHIFT_JIS||re>=3||ce>=3)?se.SHIFT_JIS:u&&d?re===2&&U===2||fe*10>=l?se.SHIFT_JIS:se.ISO88591:u?se.ISO88591:d?se.SHIFT_JIS:p?se.UTF8:se.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let l=-1;function u(p,x,_,S,E,j){if(p==="%%")return"%";if(s[++l]===void 0)return;p=S?parseInt(S.substr(1)):void 0;let U=E?parseInt(E.substr(1)):void 0,X;switch(j){case"s":X=s[l];break;case"c":X=s[l][0];break;case"f":X=parseFloat(s[l]).toFixed(p);break;case"p":X=parseFloat(s[l]).toPrecision(p);break;case"e":X=parseFloat(s[l]).toExponential(p);break;case"x":X=parseInt(s[l]).toString(U||16);break;case"d":X=parseFloat(parseInt(s[l],U||10).toPrecision(p)).toFixed(0);break}X=typeof X=="object"?JSON.stringify(X):(+X).toString(U);let te=parseInt(_),re=_&&_[0]+""=="0"?"0":" ";for(;X.length<te;)X=x!==void 0?X+re:re+X;return X}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,u)}static getBytes(r,s){return $.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}se.SHIFT_JIS=M.SJIS.getName(),se.GB2312="GB2312",se.ISO88591=M.ISO8859_1.getName(),se.EUC_JP="EUC_JP",se.UTF8=M.UTF8.getName(),se.PLATFORM_DEFAULT_ENCODING=se.UTF8,se.ASSUME_SHIFT_JIS=!1;class be{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=se.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,l){for(let u=s;s<s+l;u++)this.append(r[u]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class Ne{constructor(r,s,l,u){if(this.width=r,this.height=s,this.rowSize=l,this.bits=u,s==null&&(s=r),this.height=s,r<1||s<1)throw new b("Both dimensions must be greater than 0");l==null&&(l=Math.floor((r+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,l=r[0].length,u=new Ne(l,s);for(let d=0;d<s;d++){const p=r[d];for(let x=0;x<l;x++)p[x]&&u.set(x,d)}return u}static parseFromString(r,s,l){if(r===null)throw new b("stringRepresentation cannot be null");const u=new Array(r.length);let d=0,p=0,x=-1,_=0,S=0;for(;S<r.length;)if(r.charAt(S)===`
`||r.charAt(S)==="\r"){if(d>p){if(x===-1)x=d-p;else if(d-p!==x)throw new b("row lengths do not match");p=d,_++}S++}else if(r.substring(S,S+s.length)===s)S+=s.length,u[d]=!0,d++;else if(r.substring(S,S+l.length)===l)S+=l.length,u[d]=!1,d++;else throw new b("illegal character encountered: "+r.substring(S));if(d>p){if(x===-1)x=d-p;else if(d-p!==x)throw new b("row lengths do not match");_++}const E=new Ne(x,_);for(let j=0;j<d;j++)u[j]&&E.set(Math.floor(j%x),Math.floor(j/x));return E}get(r,s){const l=s*this.rowSize+Math.floor(r/32);return(this.bits[l]>>>(r&31)&1)!==0}set(r,s){const l=s*this.rowSize+Math.floor(r/32);this.bits[l]|=1<<(r&31)&4294967295}unset(r,s){const l=s*this.rowSize+Math.floor(r/32);this.bits[l]&=~(1<<(r&31)&4294967295)}flip(r,s){const l=s*this.rowSize+Math.floor(r/32);this.bits[l]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new b("input matrix dimensions do not match");const s=new G(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let d=0,p=this.height;d<p;d++){const x=d*l,_=r.getRow(d,s).getBitArray();for(let S=0;S<l;S++)u[x+S]^=_[S]}}clear(){const r=this.bits,s=r.length;for(let l=0;l<s;l++)r[l]=0}setRegion(r,s,l,u){if(s<0||r<0)throw new b("Left and top must be nonnegative");if(u<1||l<1)throw new b("Height and width must be at least 1");const d=r+l,p=s+u;if(p>this.height||d>this.width)throw new b("The region must fit inside the matrix");const x=this.rowSize,_=this.bits;for(let S=s;S<p;S++){const E=S*x;for(let j=r;j<d;j++)_[E+Math.floor(j/32)]|=1<<(j&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new G(this.width):s.clear();const l=this.rowSize,u=this.bits,d=r*l;for(let p=0;p<l;p++)s.setBulk(p*32,u[d+p]);return s}setRow(r,s){R.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let l=new G(r),u=new G(r);for(let d=0,p=Math.floor((s+1)/2);d<p;d++)l=this.getRow(d,l),u=this.getRow(s-1-d,u),l.reverse(),u.reverse(),this.setRow(d,u),this.setRow(s-1-d,l)}getEnclosingRectangle(){const r=this.width,s=this.height,l=this.rowSize,u=this.bits;let d=r,p=s,x=-1,_=-1;for(let S=0;S<s;S++)for(let E=0;E<l;E++){const j=u[S*l+E];if(j!==0){if(S<p&&(p=S),S>_&&(_=S),E*32<d){let U=0;for(;!(j<<31-U&4294967295);)U++;E*32+U<d&&(d=E*32+U)}if(E*32+31>x){let U=31;for(;!(j>>>U);)U--;E*32+U>x&&(x=E*32+U)}}}return x<d||_<p?null:Int32Array.from([d,p,x-d+1,_-p+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let l=0;for(;l<s.length&&s[l]===0;)l++;if(l===s.length)return null;const u=l/r;let d=l%r*32;const p=s[l];let x=0;for(;!(p<<31-x&4294967295);)x++;return d+=x,Int32Array.from([d,u])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let l=s.length-1;for(;l>=0&&s[l]===0;)l--;if(l<0)return null;const u=Math.floor(l/r);let d=Math.floor(l%r)*32;const p=s[l];let x=31;for(;!(p>>>x);)x--;return d+=x,Int32Array.from([d,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof Ne))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&P.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+P.hashCode(this.bits),r}toString(r="X ",s="  ",l=`
`){return this.buildToString(r,s,l)}buildToString(r,s,l){let u=new be;for(let d=0,p=this.height;d<p;d++){for(let x=0,_=this.width;x<_;x++)u.append(this.get(x,d)?r:s);u.append(l)}return u.toString()}clone(){return new Ne(this.width,this.height,this.rowSize,this.bits.slice())}}class oe extends y{static getNotFoundInstance(){return new oe}}oe.kind="NotFoundException";class le extends z{constructor(r){super(r),this.luminances=le.EMPTY,this.buckets=new Int32Array(le.LUMINANCE_BUCKETS)}getBlackRow(r,s){const l=this.getLuminanceSource(),u=l.getWidth();s==null||s.getSize()<u?s=new G(u):s.clear(),this.initArrays(u);const d=l.getRow(r,this.luminances),p=this.buckets;for(let _=0;_<u;_++)p[(d[_]&255)>>le.LUMINANCE_SHIFT]++;const x=le.estimateBlackPoint(p);if(u<3)for(let _=0;_<u;_++)(d[_]&255)<x&&s.set(_);else{let _=d[0]&255,S=d[1]&255;for(let E=1;E<u-1;E++){const j=d[E+1]&255;(S*4-_-j)/2<x&&s.set(E),_=S,S=j}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),l=r.getHeight(),u=new Ne(s,l);this.initArrays(s);const d=this.buckets;for(let _=1;_<5;_++){const S=Math.floor(l*_/5),E=r.getRow(S,this.luminances),j=Math.floor(s*4/5);for(let U=Math.floor(s/5);U<j;U++){const X=E[U]&255;d[X>>le.LUMINANCE_SHIFT]++}}const p=le.estimateBlackPoint(d),x=r.getMatrix();for(let _=0;_<l;_++){const S=_*s;for(let E=0;E<s;E++)(x[S+E]&255)<p&&u.set(E,_)}return u}createBinarizer(r){return new le(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let l=0;l<le.LUMINANCE_BUCKETS;l++)s[l]=0}static estimateBlackPoint(r){const s=r.length;let l=0,u=0,d=0;for(let E=0;E<s;E++)r[E]>d&&(u=E,d=r[E]),r[E]>l&&(l=r[E]);let p=0,x=0;for(let E=0;E<s;E++){const j=E-u,U=r[E]*j*j;U>x&&(p=E,x=U)}if(u>p){const E=u;u=p,p=E}if(p-u<=s/16)throw new oe;let _=p-1,S=-1;for(let E=p-1;E>u;E--){const j=E-u,U=j*j*(p-E)*(l-r[E]);U>S&&(_=E,S=U)}return _<<le.LUMINANCE_SHIFT}}le.LUMINANCE_BITS=5,le.LUMINANCE_SHIFT=8-le.LUMINANCE_BITS,le.LUMINANCE_BUCKETS=1<<le.LUMINANCE_BITS,le.EMPTY=Uint8ClampedArray.from([0]);class ke extends le{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),l=r.getHeight();if(s>=ke.MINIMUM_DIMENSION&&l>=ke.MINIMUM_DIMENSION){const u=r.getMatrix();let d=s>>ke.BLOCK_SIZE_POWER;s&ke.BLOCK_SIZE_MASK&&d++;let p=l>>ke.BLOCK_SIZE_POWER;l&ke.BLOCK_SIZE_MASK&&p++;const x=ke.calculateBlackPoints(u,d,p,s,l),_=new Ne(s,l);ke.calculateThresholdForBlock(u,d,p,s,l,x,_),this.matrix=_}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new ke(r)}static calculateThresholdForBlock(r,s,l,u,d,p,x){const _=d-ke.BLOCK_SIZE,S=u-ke.BLOCK_SIZE;for(let E=0;E<l;E++){let j=E<<ke.BLOCK_SIZE_POWER;j>_&&(j=_);const U=ke.cap(E,2,l-3);for(let X=0;X<s;X++){let te=X<<ke.BLOCK_SIZE_POWER;te>S&&(te=S);const re=ke.cap(X,2,s-3);let ce=0;for(let Me=-2;Me<=2;Me++){const Re=p[U+Me];ce+=Re[re-2]+Re[re-1]+Re[re]+Re[re+1]+Re[re+2]}const fe=ce/25;ke.thresholdBlock(r,te,j,fe,u,x)}}}static cap(r,s,l){return r<s?s:r>l?l:r}static thresholdBlock(r,s,l,u,d,p){for(let x=0,_=l*d+s;x<ke.BLOCK_SIZE;x++,_+=d)for(let S=0;S<ke.BLOCK_SIZE;S++)(r[_+S]&255)<=u&&p.set(s+S,l+x)}static calculateBlackPoints(r,s,l,u,d){const p=d-ke.BLOCK_SIZE,x=u-ke.BLOCK_SIZE,_=new Array(l);for(let S=0;S<l;S++){_[S]=new Int32Array(s);let E=S<<ke.BLOCK_SIZE_POWER;E>p&&(E=p);for(let j=0;j<s;j++){let U=j<<ke.BLOCK_SIZE_POWER;U>x&&(U=x);let X=0,te=255,re=0;for(let fe=0,Me=E*u+U;fe<ke.BLOCK_SIZE;fe++,Me+=u){for(let Re=0;Re<ke.BLOCK_SIZE;Re++){const Ie=r[Me+Re]&255;X+=Ie,Ie<te&&(te=Ie),Ie>re&&(re=Ie)}if(re-te>ke.MIN_DYNAMIC_RANGE)for(fe++,Me+=u;fe<ke.BLOCK_SIZE;fe++,Me+=u)for(let Re=0;Re<ke.BLOCK_SIZE;Re++)X+=r[Me+Re]&255}let ce=X>>ke.BLOCK_SIZE_POWER*2;if(re-te<=ke.MIN_DYNAMIC_RANGE&&(ce=te/2,S>0&&j>0)){const fe=(_[S-1][j]+2*_[S][j-1]+_[S-1][j-1])/4;te<fe&&(ce=fe)}_[S][j]=ce}}return _}}ke.BLOCK_SIZE_POWER=3,ke.BLOCK_SIZE=1<<ke.BLOCK_SIZE_POWER,ke.BLOCK_SIZE_MASK=ke.BLOCK_SIZE-1,ke.MINIMUM_DIMENSION=ke.BLOCK_SIZE*5,ke.MIN_DYNAMIC_RANGE=24;class ie{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,l,u){throw new H("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new H("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new H("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new be;for(let l=0;l<this.height;l++){const u=this.getRow(l,r);for(let d=0;d<this.width;d++){const p=u[d]&255;let x;p<64?x="#":p<128?x="+":p<192?x=".":x=" ",s.append(x)}s.append(`
`)}return s.toString()}}class Ae extends ie{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const l=this.delegate.getRow(r,s),u=this.getWidth();for(let d=0;d<u;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(s);for(let u=0;u<s;u++)l[u]=255-(r[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,l,u){return new Ae(this.delegate.crop(r,s,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ae(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ae(this.delegate.rotateCounterClockwise45())}}class ve extends ie{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=ve.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return ve.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,l){const u=new Uint8ClampedArray(s*l);for(let d=0,p=0,x=r.length;d<x;d+=4,p++){let _;if(r[d+3]===0)_=255;else{const E=r[d],j=r[d+1],U=r[d+2];_=306*E+601*j+117*U+512>>10}u[p]=_}return u}getRow(r,s){if(r<0||r>=this.getHeight())throw new b("Requested row is outside the image: "+r);const l=this.getWidth(),u=r*l;return s===null?s=this.buffer.slice(u,u+l):(s.length<l&&(s=new Uint8ClampedArray(l)),s.set(this.buffer.slice(u,u+l))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,l,u){return super.crop(r,s,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),l=s.getContext("2d"),u=r*ve.DEGREE_TO_RADIANS,d=this.canvas.width,p=this.canvas.height,x=Math.ceil(Math.abs(Math.cos(u))*d+Math.abs(Math.sin(u))*p),_=Math.ceil(Math.abs(Math.sin(u))*d+Math.abs(Math.cos(u))*p);return s.width=x,s.height=_,l.translate(x/2,_/2),l.rotate(u),l.drawImage(this.canvas,d/-2,p/-2),this.buffer=ve.makeBufferFromCanvasImageData(s),this}invert(){return new Ae(this)}}ve.DEGREE_TO_RADIANS=Math.PI/180;class xe{constructor(r,s,l){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Le=(globalThis||Ma||self||window||void 0)&&(globalThis||Ma||self||window||void 0).__awaiter||function(D,r,s,l){function u(d){return d instanceof s?d:new s(function(p){p(d)})}return new(s||(s=Promise))(function(d,p){function x(E){try{S(l.next(E))}catch(j){p(j)}}function _(E){try{S(l.throw(E))}catch(j){p(j)}}function S(E){E.done?d(E.value):u(E.value).then(x,_)}S((l=l.apply(D,r||[])).next())})};class Ke{constructor(r,s=500,l){this.reader=r,this.timeBetweenScansMillis=s,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Le(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const l of r){const u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;const d=l.deviceId||l.id,p=l.label||`Video device ${s.length+1}`,x=l.groupId,_={deviceId:d,label:p,kind:u,groupId:x};s.push(_)}return s})}getVideoInputDevices(){return Le(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new xe(s.deviceId,s.label))})}findDeviceById(r){return Le(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(l=>l.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return Le(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return Le(this,void 0,void 0,function*(){this.reset();let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeOnceFromConstraints(u,s)})}decodeOnceFromConstraints(r,s){return Le(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(l,s)})}decodeOnceFromStream(r,s){return Le(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(r,s,l){return Le(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,l)})}decodeFromVideoDevice(r,s,l){return Le(this,void 0,void 0,function*(){let u;r?u={deviceId:{exact:r}}:u={facingMode:"environment"};const d={video:u};return yield this.decodeFromConstraints(d,s,l)})}decodeFromConstraints(r,s,l){return Le(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(u,s,l)})}decodeFromStream(r,s,l){return Le(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return Le(this,void 0,void 0,function*(){const l=this.prepareVideoElement(s);return this.addVideoSource(l,r),this.videoElement=l,this.stream=r,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(r){return new Promise((s,l)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Le(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const l=document.getElementById(r);if(!l)throw new C(`element with id '${r}' not found`);if(l.nodeName.toLowerCase()!==s.toLowerCase())throw new C(`element with id '${r}' must be an ${s} element`);return l}decodeFromImage(r,s){if(!r&&!s)throw new C("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new C("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,l){if(r===void 0&&s===void 0)throw new C("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,l):this.decodeFromVideoElementContinuously(r,l)}decodeFromImageElement(r){if(!r)throw new C("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let l;return this.isImageLoaded(s)?l=this.decodeOnce(s,!1,!0):l=this._decodeOnLoadImage(s),l}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const l=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(l,s)}_decodeFromVideoElementSetup(r){if(!r)throw new C("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new C("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const l=this._decodeOnLoadImage(s);return s.src=r,l}decodeFromVideoUrl(r){if(!r)throw new C("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),l=this.decodeFromVideoElement(s);return s.src=r,l}decodeFromVideoUrlContinuously(r,s){if(!r)throw new C("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,s);return l.src=r,u}_decodeOnLoadImage(r){return new Promise((s,l)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,l),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Le(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return Le(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,l=!0){this._stopAsyncDecode=!1;const u=(d,p)=>{if(this._stopAsyncDecode){p(new oe("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const x=this.decode(r);d(x)}catch(x){const _=s&&x instanceof oe,E=(x instanceof I||x instanceof Y)&&l;if(_||E)return setTimeout(u,this._timeBetweenDecodingAttempts,d,p);p(x)}};return new Promise((d,p)=>u(d,p))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(r);s(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){s(null,u);const d=u instanceof I||u instanceof Y,p=u instanceof oe;(d||p)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,l){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,l=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),l=new ve(s),u=new ke(l);return new T(u)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let l,u;return typeof r<"u"&&(r instanceof HTMLVideoElement?(l=r.videoWidth,u=r.videoHeight):r instanceof HTMLImageElement&&(l=r.naturalWidth||r.width,u=r.naturalHeight||r.height)),s.style.width=l+"px",s.style.height=u+"px",s.width=l,s.height=u,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class Fe{constructor(r,s,l=s==null?0:8*s.length,u,d,p=R.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=l,this.resultPoints=u,this.format=d,this.timestamp=p,this.text=r,this.rawBytes=s,l==null?this.numBits=s==null?0:8*s.length:this.numBits=l,this.resultPoints=u,this.format=d,this.resultMetadata=null,p==null?this.timestamp=R.currentTimeMillis():this.timestamp=p}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const l=new Array(s.length+r.length);R.arraycopy(s,0,l,0,s.length),R.arraycopy(r,0,l,s.length,r.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ne;(function(D){D[D.AZTEC=0]="AZTEC",D[D.CODABAR=1]="CODABAR",D[D.CODE_39=2]="CODE_39",D[D.CODE_93=3]="CODE_93",D[D.CODE_128=4]="CODE_128",D[D.DATA_MATRIX=5]="DATA_MATRIX",D[D.EAN_8=6]="EAN_8",D[D.EAN_13=7]="EAN_13",D[D.ITF=8]="ITF",D[D.MAXICODE=9]="MAXICODE",D[D.PDF_417=10]="PDF_417",D[D.QR_CODE=11]="QR_CODE",D[D.RSS_14=12]="RSS_14",D[D.RSS_EXPANDED=13]="RSS_EXPANDED",D[D.UPC_A=14]="UPC_A",D[D.UPC_E=15]="UPC_E",D[D.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ne||(ne={}));var ae=ne,je;(function(D){D[D.OTHER=0]="OTHER",D[D.ORIENTATION=1]="ORIENTATION",D[D.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",D[D.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",D[D.ISSUE_NUMBER=4]="ISSUE_NUMBER",D[D.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",D[D.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",D[D.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",D[D.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",D[D.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",D[D.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(je||(je={}));var Qe=je;class Ue{constructor(r,s,l,u,d=-1,p=-1){this.rawBytes=r,this.text=s,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=p,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class nt{exp(r){return this.expTable[r]}log(r){if(r===0)throw new b;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class Ze{constructor(r,s){if(s.length===0)throw new b;this.field=r;const l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),R.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let l;if(r===1){l=0;for(let p=0,x=s.length;p!==x;p++){const _=s[p];l=nt.addOrSubtract(l,_)}return l}l=s[0];const u=s.length,d=this.field;for(let p=1;p<u;p++)l=nt.addOrSubtract(d.multiply(r,l),s[p]);return l}addOrSubtract(r){if(!this.field.equals(r.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,l=r.coefficients;if(s.length>l.length){const p=s;s=l,l=p}let u=new Int32Array(l.length);const d=l.length-s.length;R.arraycopy(l,0,u,0,d);for(let p=d;p<l.length;p++)u[p]=nt.addOrSubtract(s[p-d],l[p]);return new Ze(this.field,u)}multiply(r){if(!this.field.equals(r.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,l=s.length,u=r.coefficients,d=u.length,p=new Int32Array(l+d-1),x=this.field;for(let _=0;_<l;_++){const S=s[_];for(let E=0;E<d;E++)p[_+E]=nt.addOrSubtract(p[_+E],x.multiply(S,u[E]))}return new Ze(x,p)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,l=this.field,u=new Int32Array(s),d=this.coefficients;for(let p=0;p<s;p++)u[p]=l.multiply(d[p],r);return new Ze(l,u)}multiplyByMonomial(r,s){if(r<0)throw new b;if(s===0)return this.field.getZero();const l=this.coefficients,u=l.length,d=new Int32Array(u+r),p=this.field;for(let x=0;x<u;x++)d[x]=p.multiply(l[x],s);return new Ze(p,d)}divide(r){if(!this.field.equals(r.field))throw new b("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new b("Divide by 0");const s=this.field;let l=s.getZero(),u=this;const d=r.getCoefficient(r.getDegree()),p=s.inverse(d);for(;u.getDegree()>=r.getDegree()&&!u.isZero();){const x=u.getDegree()-r.getDegree(),_=s.multiply(u.getCoefficient(u.getDegree()),p),S=r.multiplyByMonomial(x,_),E=s.buildMonomial(x,_);l=l.addOrSubtract(E),u=u.addOrSubtract(S)}return[l,u]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);if(l!==0){if(l<0?(r+=" - ",l=-l):r.length>0&&(r+=" + "),s===0||l!==1){const u=this.field.log(l);u===0?r+="1":u===1?r+="a":(r+="a^",r+=u)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class Rt extends y{}Rt.kind="ArithmeticException";class tt extends nt{constructor(r,s,l){super(),this.primitive=r,this.size=s,this.generatorBase=l;const u=new Int32Array(s);let d=1;for(let x=0;x<s;x++)u[x]=d,d*=2,d>=s&&(d^=r,d&=s-1);this.expTable=u;const p=new Int32Array(s);for(let x=0;x<s-1;x++)p[u[x]]=x;this.logTable=p,this.zero=new Ze(this,Int32Array.from([0])),this.one=new Ze(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new b;if(s===0)return this.zero;const l=new Int32Array(r+1);return l[0]=s,new Ze(this,l)}inverse(r){if(r===0)throw new Rt;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+k.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}tt.AZTEC_DATA_12=new tt(4201,4096,1),tt.AZTEC_DATA_10=new tt(1033,1024,1),tt.AZTEC_DATA_6=new tt(67,64,1),tt.AZTEC_PARAM=new tt(19,16,1),tt.QR_CODE_FIELD_256=new tt(285,256,0),tt.DATA_MATRIX_FIELD_256=new tt(301,256,1),tt.AZTEC_DATA_8=tt.DATA_MATRIX_FIELD_256,tt.MAXICODE_FIELD_64=tt.AZTEC_DATA_6;class yt extends y{}yt.kind="ReedSolomonException";class Xt extends y{}Xt.kind="IllegalStateException";class Vn{constructor(r){this.field=r}decode(r,s){const l=this.field,u=new Ze(l,r),d=new Int32Array(s);let p=!0;for(let X=0;X<s;X++){const te=u.evaluateAt(l.exp(X+l.getGeneratorBase()));d[d.length-1-X]=te,te!==0&&(p=!1)}if(p)return;const x=new Ze(l,d),_=this.runEuclideanAlgorithm(l.buildMonomial(s,1),x,s),S=_[0],E=_[1],j=this.findErrorLocations(S),U=this.findErrorMagnitudes(E,j);for(let X=0;X<j.length;X++){const te=r.length-1-l.log(j[X]);if(te<0)throw new yt("Bad error location");r[te]=tt.addOrSubtract(r[te],U[X])}}runEuclideanAlgorithm(r,s,l){if(r.getDegree()<s.getDegree()){const X=r;r=s,s=X}const u=this.field;let d=r,p=s,x=u.getZero(),_=u.getOne();for(;p.getDegree()>=(l/2|0);){let X=d,te=x;if(d=p,x=_,d.isZero())throw new yt("r_{i-1} was zero");p=X;let re=u.getZero();const ce=d.getCoefficient(d.getDegree()),fe=u.inverse(ce);for(;p.getDegree()>=d.getDegree()&&!p.isZero();){const Me=p.getDegree()-d.getDegree(),Re=u.multiply(p.getCoefficient(p.getDegree()),fe);re=re.addOrSubtract(u.buildMonomial(Me,Re)),p=p.addOrSubtract(d.multiplyByMonomial(Me,Re))}if(_=re.multiply(x).addOrSubtract(te),p.getDegree()>=d.getDegree())throw new Xt("Division algorithm failed to reduce polynomial?")}const S=_.getCoefficient(0);if(S===0)throw new yt("sigmaTilde(0) was zero");const E=u.inverse(S),j=_.multiplyScalar(E),U=p.multiplyScalar(E);return[j,U]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const l=new Int32Array(s);let u=0;const d=this.field;for(let p=1;p<d.getSize()&&u<s;p++)r.evaluateAt(p)===0&&(l[u]=d.inverse(p),u++);if(u!==s)throw new yt("Error locator degree does not match number of roots");return l}findErrorMagnitudes(r,s){const l=s.length,u=new Int32Array(l),d=this.field;for(let p=0;p<l;p++){const x=d.inverse(s[p]);let _=1;for(let S=0;S<l;S++)if(p!==S){const E=d.multiply(s[S],x),j=E&1?E&-2:E|1;_=d.multiply(_,j)}u[p]=d.multiply(r.evaluateAt(x),d.inverse(_)),d.getGeneratorBase()!==0&&(u[p]=d.multiply(u[p],x))}return u}}var ut;(function(D){D[D.UPPER=0]="UPPER",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.DIGIT=3]="DIGIT",D[D.PUNCT=4]="PUNCT",D[D.BINARY=5]="BINARY"})(ut||(ut={}));class ht{decode(r){this.ddata=r;let s=r.getBits(),l=this.extractBits(s),u=this.correctBits(l),d=ht.convertBoolArrayToByteArray(u),p=ht.getEncodedData(u),x=new Ue(d,p,null,null);return x.setNumBits(u.length),x}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,l=ut.UPPER,u=ut.UPPER,d="",p=0;for(;p<s;)if(u===ut.BINARY){if(s-p<5)break;let x=ht.readCode(r,p,5);if(p+=5,x===0){if(s-p<11)break;x=ht.readCode(r,p,11)+31,p+=11}for(let _=0;_<x;_++){if(s-p<8){p=s;break}const S=ht.readCode(r,p,8);d+=se.castAsNonUtf8Char(S),p+=8}u=l}else{let x=u===ut.DIGIT?4:5;if(s-p<x)break;let _=ht.readCode(r,p,x);p+=x;let S=ht.getCharacter(u,_);S.startsWith("CTRL_")?(l=u,u=ht.getTable(S.charAt(5)),S.charAt(6)==="L"&&(l=u)):(d+=S,u=l)}return d}static getTable(r){switch(r){case"L":return ut.LOWER;case"P":return ut.PUNCT;case"M":return ut.MIXED;case"D":return ut.DIGIT;case"B":return ut.BINARY;case"U":default:return ut.UPPER}}static getCharacter(r,s){switch(r){case ut.UPPER:return ht.UPPER_TABLE[s];case ut.LOWER:return ht.LOWER_TABLE[s];case ut.MIXED:return ht.MIXED_TABLE[s];case ut.PUNCT:return ht.PUNCT_TABLE[s];case ut.DIGIT:return ht.DIGIT_TABLE[s];default:throw new Xt("Bad table")}}correctBits(r){let s,l;this.ddata.getNbLayers()<=2?(l=6,s=tt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,s=tt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,s=tt.AZTEC_DATA_10):(l=12,s=tt.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),d=r.length/l;if(d<u)throw new Y;let p=r.length%l,x=new Int32Array(d);for(let U=0;U<d;U++,p+=l)x[U]=ht.readCode(r,p,l);try{new Vn(s).decode(x,d-u)}catch(U){throw new Y(U)}let _=(1<<l)-1,S=0;for(let U=0;U<u;U++){let X=x[U];if(X===0||X===_)throw new Y;(X===1||X===_-1)&&S++}let E=new Array(u*l-S),j=0;for(let U=0;U<u;U++){let X=x[U];if(X===1||X===_-1)E.fill(X>1,j,j+l-1),j+=l-1;else for(let te=l-1;te>=0;--te)E[j++]=(X&1<<te)!==0}return E}extractBits(r){let s=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(s?11:14)+l*4,d=new Int32Array(u),p=new Array(this.totalBitsInLayer(l,s));if(s)for(let x=0;x<d.length;x++)d[x]=x;else{let x=u+1+2*k.truncDivision(k.truncDivision(u,2)-1,15),_=u/2,S=k.truncDivision(x,2);for(let E=0;E<_;E++){let j=E+k.truncDivision(E,15);d[_-E-1]=S-j-1,d[_+E]=S+j+1}}for(let x=0,_=0;x<l;x++){let S=(l-x)*4+(s?9:12),E=x*2,j=u-1-E;for(let U=0;U<S;U++){let X=U*2;for(let te=0;te<2;te++)p[_+X+te]=r.get(d[E+te],d[E+U]),p[_+2*S+X+te]=r.get(d[E+U],d[j-te]),p[_+4*S+X+te]=r.get(d[j-te],d[j-U]),p[_+6*S+X+te]=r.get(d[j-U],d[E+te])}_+=S*8}return p}static readCode(r,s,l){let u=0;for(let d=s;d<s+l;d++)u<<=1,r[d]&&(u|=1);return u}static readByte(r,s){let l=r.length-s;return l>=8?ht.readCode(r,s,8):ht.readCode(r,s,l)<<8-l}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let l=0;l<s.length;l++)s[l]=ht.readByte(r,8*l);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}ht.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ht.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ht.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ht.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ht.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ft{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,l,u){const d=r-l,p=s-u;return Math.sqrt(d*d+p*p)}static sum(r){let s=0;for(let l=0,u=r.length;l!==u;l++){const d=r[l];s+=d}return s}}class _r{static floatToIntBits(r){return r}}_r.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ye{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof Ye){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*_r.floatToIntBits(this.x)+_r.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),l=this.distance(r[1],r[2]),u=this.distance(r[0],r[2]);let d,p,x;if(l>=s&&l>=u?(p=r[0],d=r[1],x=r[2]):u>=l&&u>=s?(p=r[1],d=r[0],x=r[2]):(p=r[2],d=r[0],x=r[1]),this.crossProductZ(d,p,x)<0){const _=d;d=x,x=_}r[0]=d,r[1]=p,r[2]=x}static distance(r,s){return ft.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,l){const u=s.x,d=s.y;return(l.x-u)*(r.y-d)-(l.y-d)*(r.x-u)}}class St{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class qt extends St{constructor(r,s,l,u,d){super(r,s),this.compact=l,this.nbDatablocks=u,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class _t{constructor(r,s,l,u){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=_t.INIT_SIZE),l==null&&(l=r.getWidth()/2|0),u==null&&(u=r.getHeight()/2|0);const d=s/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=u-d,this.downInit=u+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new oe}detect(){let r=this.leftInit,s=this.rightInit,l=this.upInit,u=this.downInit,d=!1,p=!0,x=!1,_=!1,S=!1,E=!1,j=!1;const U=this.width,X=this.height;for(;p;){p=!1;let te=!0;for(;(te||!_)&&s<U;)te=this.containsBlackPoint(l,u,s,!1),te?(s++,p=!0,_=!0):_||s++;if(s>=U){d=!0;break}let re=!0;for(;(re||!S)&&u<X;)re=this.containsBlackPoint(r,s,u,!0),re?(u++,p=!0,S=!0):S||u++;if(u>=X){d=!0;break}let ce=!0;for(;(ce||!E)&&r>=0;)ce=this.containsBlackPoint(l,u,r,!1),ce?(r--,p=!0,E=!0):E||r--;if(r<0){d=!0;break}let fe=!0;for(;(fe||!j)&&l>=0;)fe=this.containsBlackPoint(r,s,l,!0),fe?(l--,p=!0,j=!0):j||l--;if(l<0){d=!0;break}p&&(x=!0)}if(!d&&x){const te=s-r;let re=null;for(let Re=1;re===null&&Re<te;Re++)re=this.getBlackPointOnSegment(r,u-Re,r+Re,u);if(re==null)throw new oe;let ce=null;for(let Re=1;ce===null&&Re<te;Re++)ce=this.getBlackPointOnSegment(r,l+Re,r+Re,l);if(ce==null)throw new oe;let fe=null;for(let Re=1;fe===null&&Re<te;Re++)fe=this.getBlackPointOnSegment(s,l+Re,s-Re,l);if(fe==null)throw new oe;let Me=null;for(let Re=1;Me===null&&Re<te;Re++)Me=this.getBlackPointOnSegment(s,u-Re,s-Re,u);if(Me==null)throw new oe;return this.centerEdges(Me,re,fe,ce)}else throw new oe}getBlackPointOnSegment(r,s,l,u){const d=ft.round(ft.distance(r,s,l,u)),p=(l-r)/d,x=(u-s)/d,_=this.image;for(let S=0;S<d;S++){const E=ft.round(r+S*p),j=ft.round(s+S*x);if(_.get(E,j))return new Ye(E,j)}return null}centerEdges(r,s,l,u){const d=r.getX(),p=r.getY(),x=s.getX(),_=s.getY(),S=l.getX(),E=l.getY(),j=u.getX(),U=u.getY(),X=_t.CORR;return d<this.width/2?[new Ye(j-X,U+X),new Ye(x+X,_+X),new Ye(S-X,E-X),new Ye(d+X,p-X)]:[new Ye(j+X,U+X),new Ye(x+X,_-X),new Ye(S-X,E+X),new Ye(d-X,p-X)]}containsBlackPoint(r,s,l,u){const d=this.image;if(u){for(let p=r;p<=s;p++)if(d.get(p,l))return!0}else for(let p=r;p<=s;p++)if(d.get(l,p))return!0;return!1}}_t.INIT_SIZE=10,_t.CORR=1;class Dt{static checkAndNudgePoints(r,s){const l=r.getWidth(),u=r.getHeight();let d=!0;for(let p=0;p<s.length&&d;p+=2){const x=Math.floor(s[p]),_=Math.floor(s[p+1]);if(x<-1||x>l||_<-1||_>u)throw new oe;d=!1,x===-1?(s[p]=0,d=!0):x===l&&(s[p]=l-1,d=!0),_===-1?(s[p+1]=0,d=!0):_===u&&(s[p+1]=u-1,d=!0)}d=!0;for(let p=s.length-2;p>=0&&d;p-=2){const x=Math.floor(s[p]),_=Math.floor(s[p+1]);if(x<-1||x>l||_<-1||_>u)throw new oe;d=!1,x===-1?(s[p]=0,d=!0):x===l&&(s[p]=l-1,d=!0),_===-1?(s[p+1]=0,d=!0):_===u&&(s[p+1]=u-1,d=!0)}}}class Kt{constructor(r,s,l,u,d,p,x,_,S){this.a11=r,this.a21=s,this.a31=l,this.a12=u,this.a22=d,this.a32=p,this.a13=x,this.a23=_,this.a33=S}static quadrilateralToQuadrilateral(r,s,l,u,d,p,x,_,S,E,j,U,X,te,re,ce){const fe=Kt.quadrilateralToSquare(r,s,l,u,d,p,x,_);return Kt.squareToQuadrilateral(S,E,j,U,X,te,re,ce).times(fe)}transformPoints(r){const s=r.length,l=this.a11,u=this.a12,d=this.a13,p=this.a21,x=this.a22,_=this.a23,S=this.a31,E=this.a32,j=this.a33;for(let U=0;U<s;U+=2){const X=r[U],te=r[U+1],re=d*X+_*te+j;r[U]=(l*X+p*te+S)/re,r[U+1]=(u*X+x*te+E)/re}}transformPointsWithValues(r,s){const l=this.a11,u=this.a12,d=this.a13,p=this.a21,x=this.a22,_=this.a23,S=this.a31,E=this.a32,j=this.a33,U=r.length;for(let X=0;X<U;X++){const te=r[X],re=s[X],ce=d*te+_*re+j;r[X]=(l*te+p*re+S)/ce,s[X]=(u*te+x*re+E)/ce}}static squareToQuadrilateral(r,s,l,u,d,p,x,_){const S=r-l+d-x,E=s-u+p-_;if(S===0&&E===0)return new Kt(l-r,d-l,r,u-s,p-u,s,0,0,1);{const j=l-d,U=x-d,X=u-p,te=_-p,re=j*te-U*X,ce=(S*te-U*E)/re,fe=(j*E-S*X)/re;return new Kt(l-r+ce*l,x-r+fe*x,r,u-s+ce*u,_-s+fe*_,s,ce,fe,1)}}static quadrilateralToSquare(r,s,l,u,d,p,x,_){return Kt.squareToQuadrilateral(r,s,l,u,d,p,x,_).buildAdjoint()}buildAdjoint(){return new Kt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new Kt(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class Hn extends Dt{sampleGrid(r,s,l,u,d,p,x,_,S,E,j,U,X,te,re,ce,fe,Me,Re){const Ie=Kt.quadrilateralToQuadrilateral(u,d,p,x,_,S,E,j,U,X,te,re,ce,fe,Me,Re);return this.sampleGridWithTransform(r,s,l,Ie)}sampleGridWithTransform(r,s,l,u){if(s<=0||l<=0)throw new oe;const d=new Ne(s,l),p=new Float32Array(2*s);for(let x=0;x<l;x++){const _=p.length,S=x+.5;for(let E=0;E<_;E+=2)p[E]=E/2+.5,p[E+1]=S;u.transformPoints(p),Dt.checkAndNudgePoints(r,p);try{for(let E=0;E<_;E+=2)r.get(Math.floor(p[E]),Math.floor(p[E+1]))&&d.set(E/2,x)}catch{throw new oe}}return d}}class rn{static setGridSampler(r){rn.gridSampler=r}static getInstance(){return rn.gridSampler}}rn.gridSampler=new Hn;class W{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new Ye(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class we{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),l=this.getBullsEyeCorners(s);if(r){let p=l[0];l[0]=l[2],l[2]=p}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new qt(u,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new oe;let s=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(l,s);let u=0;for(let p=0;p<4;p++){let x=l[(this.shift+p)%4];this.compact?(u<<=7,u+=x>>1&127):(u<<=10,u+=(x>>2&992)+(x>>1&31))}let d=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(r,s){let l=0;r.forEach((u,d,p)=>{let x=(u>>s-2<<1)+(u&1);l=(l<<3)+x}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(k.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new oe}getCorrectedParameterData(r,s){let l,u;s?(l=7,u=2):(l=10,u=4);let d=l-u,p=new Int32Array(l);for(let _=l-1;_>=0;--_)p[_]=r&15,r>>=4;try{new Vn(tt.AZTEC_PARAM).decode(p,d)}catch{throw new oe}let x=0;for(let _=0;_<u;_++)x=(x<<4)+p[_];return x}getBullsEyeCorners(r){let s=r,l=r,u=r,d=r,p=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let j=this.getFirstDifferent(s,p,1,-1),U=this.getFirstDifferent(l,p,1,1),X=this.getFirstDifferent(u,p,-1,1),te=this.getFirstDifferent(d,p,-1,-1);if(this.nbCenterLayers>2){let re=this.distancePoint(te,j)*this.nbCenterLayers/(this.distancePoint(d,s)*(this.nbCenterLayers+2));if(re<.75||re>1.25||!this.isWhiteOrBlackRectangle(j,U,X,te))break}s=j,l=U,u=X,d=te,p=!p}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new oe;this.compact=this.nbCenterLayers===5;let x=new Ye(s.getX()+.5,s.getY()-.5),_=new Ye(l.getX()+.5,l.getY()+.5),S=new Ye(u.getX()-.5,u.getY()+.5),E=new Ye(d.getX()-.5,d.getY()-.5);return this.expandSquare([x,_,S,E],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,l,u;try{let x=new _t(this.image).detect();r=x[0],s=x[1],l=x[2],u=x[3]}catch{let _=this.image.getWidth()/2,S=this.image.getHeight()/2;r=this.getFirstDifferent(new W(_+7,S-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new W(_+7,S+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new W(_-7,S+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new W(_-7,S-7),!1,-1,-1).toResultPoint()}let d=ft.round((r.getX()+u.getX()+s.getX()+l.getX())/4),p=ft.round((r.getY()+u.getY()+s.getY()+l.getY())/4);try{let x=new _t(this.image,15,d,p).detect();r=x[0],s=x[1],l=x[2],u=x[3]}catch{r=this.getFirstDifferent(new W(d+7,p-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new W(d+7,p+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new W(d-7,p+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new W(d-7,p-7),!1,-1,-1).toResultPoint()}return d=ft.round((r.getX()+u.getX()+s.getX()+l.getX())/4),p=ft.round((r.getY()+u.getY()+s.getY()+l.getY())/4),new W(d,p)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,l,u,d){let p=rn.getInstance(),x=this.getDimension(),_=x/2-this.nbCenterLayers,S=x/2+this.nbCenterLayers;return p.sampleGrid(r,x,x,_,_,S,_,S,S,_,S,s.getX(),s.getY(),l.getX(),l.getY(),u.getX(),u.getY(),d.getX(),d.getY())}sampleLine(r,s,l){let u=0,d=this.distanceResultPoint(r,s),p=d/l,x=r.getX(),_=r.getY(),S=p*(s.getX()-r.getX())/d,E=p*(s.getY()-r.getY())/d;for(let j=0;j<l;j++)this.image.get(ft.round(x+j*S),ft.round(_+j*E))&&(u|=1<<l-j-1);return u}isWhiteOrBlackRectangle(r,s,l,u){let d=3;r=new W(r.getX()-d,r.getY()+d),s=new W(s.getX()-d,s.getY()-d),l=new W(l.getX()+d,l.getY()-d),u=new W(u.getX()+d,u.getY()+d);let p=this.getColor(u,r);if(p===0)return!1;let x=this.getColor(r,s);return x!==p||(x=this.getColor(s,l),x!==p)?!1:(x=this.getColor(l,u),x===p)}getColor(r,s){let l=this.distancePoint(r,s),u=(s.getX()-r.getX())/l,d=(s.getY()-r.getY())/l,p=0,x=r.getX(),_=r.getY(),S=this.image.get(r.getX(),r.getY()),E=Math.ceil(l);for(let U=0;U<E;U++)x+=u,_+=d,this.image.get(ft.round(x),ft.round(_))!==S&&p++;let j=p/l;return j>.1&&j<.9?0:j<=.1===S?1:-1}getFirstDifferent(r,s,l,u){let d=r.getX()+l,p=r.getY()+u;for(;this.isValid(d,p)&&this.image.get(d,p)===s;)d+=l,p+=u;for(d-=l,p-=u;this.isValid(d,p)&&this.image.get(d,p)===s;)d+=l;for(d-=l;this.isValid(d,p)&&this.image.get(d,p)===s;)p+=u;return p-=u,new W(d,p)}expandSquare(r,s,l){let u=l/(2*s),d=r[0].getX()-r[2].getX(),p=r[0].getY()-r[2].getY(),x=(r[0].getX()+r[2].getX())/2,_=(r[0].getY()+r[2].getY())/2,S=new Ye(x+u*d,_+u*p),E=new Ye(x-u*d,_-u*p);d=r[1].getX()-r[3].getX(),p=r[1].getY()-r[3].getY(),x=(r[1].getX()+r[3].getX())/2,_=(r[1].getY()+r[3].getY())/2;let j=new Ye(x+u*d,_+u*p),U=new Ye(x-u*d,_-u*p);return[S,j,E,U]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=ft.round(r.getX()),l=ft.round(r.getY());return this.isValid(s,l)}distancePoint(r,s){return ft.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return ft.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(k.truncDivision(this.nbLayers-4,8)+1)+15}}class Ce{decode(r,s=null){let l=null,u=new we(r.getBlackMatrix()),d=null,p=null;try{let E=u.detectMirror(!1);d=E.getPoints(),this.reportFoundResultPoints(s,d),p=new ht().decode(E)}catch(E){l=E}if(p==null)try{let E=u.detectMirror(!0);d=E.getPoints(),this.reportFoundResultPoints(s,d),p=new ht().decode(E)}catch(E){throw l??E}let x=new Fe(p.getText(),p.getRawBytes(),p.getNumBits(),d,ae.AZTEC,R.currentTimeMillis()),_=p.getByteSegments();_!=null&&x.putMetadata(Qe.BYTE_SEGMENTS,_);let S=p.getECLevel();return S!=null&&x.putMetadata(Qe.ERROR_CORRECTION_LEVEL,S),x}reportFoundResultPoints(r,s){if(r!=null){let l=r.get(q.NEED_RESULT_POINT_CALLBACK);l!=null&&s.forEach((u,d,p)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class Pe extends Ke{constructor(r=500){super(new Ce,r)}}class he{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(q.TRY_HARDER)===!0&&r.isRotateSupported()){const d=r.rotateCounterClockwise(),p=this.doDecode(d,s),x=p.getResultMetadata();let _=270;x!==null&&x.get(Qe.ORIENTATION)===!0&&(_=_+x.get(Qe.ORIENTATION)%360),p.putMetadata(Qe.ORIENTATION,_);const S=p.getResultPoints();if(S!==null){const E=d.getHeight();for(let j=0;j<S.length;j++)S[j]=new Ye(E-S[j].getY()-1,S[j].getX())}return p}else throw new oe}}reset(){}doDecode(r,s){const l=r.getWidth(),u=r.getHeight();let d=new G(l);const p=s&&s.get(q.TRY_HARDER)===!0,x=Math.max(1,u>>(p?8:5));let _;p?_=u:_=15;const S=Math.trunc(u/2);for(let E=0;E<_;E++){const j=Math.trunc((E+1)/2),U=(E&1)===0,X=S+x*(U?j:-j);if(X<0||X>=u)break;try{d=r.getBlackRow(X,d)}catch{continue}for(let te=0;te<2;te++){if(te===1&&(d.reverse(),s&&s.get(q.NEED_RESULT_POINT_CALLBACK)===!0)){const re=new Map;s.forEach((ce,fe)=>re.set(fe,ce)),re.delete(q.NEED_RESULT_POINT_CALLBACK),s=re}try{const re=this.decodeRow(X,d,s);if(te===1){re.putMetadata(Qe.ORIENTATION,180);const ce=re.getResultPoints();ce!==null&&(ce[0]=new Ye(l-ce[0].getX()-1,ce[0].getY()),ce[1]=new Ye(l-ce[1].getX()-1,ce[1].getY()))}return re}catch{}}}throw new oe}static recordPattern(r,s,l){const u=l.length;for(let S=0;S<u;S++)l[S]=0;const d=r.getSize();if(s>=d)throw new oe;let p=!r.get(s),x=0,_=s;for(;_<d;){if(r.get(_)!==p)l[x]++;else{if(++x===u)break;l[x]=1,p=!p}_++}if(!(x===u||x===u-1&&_===d))throw new oe}static recordPatternInReverse(r,s,l){let u=l.length,d=r.get(s);for(;s>0&&u>=0;)r.get(--s)!==d&&(u--,d=!d);if(u>=0)throw new oe;he.recordPattern(r,s+1,l)}static patternMatchVariance(r,s,l){const u=r.length;let d=0,p=0;for(let S=0;S<u;S++)d+=r[S],p+=s[S];if(d<p)return Number.POSITIVE_INFINITY;const x=d/p;l*=x;let _=0;for(let S=0;S<u;S++){const E=r[S],j=s[S]*x,U=E>j?E-j:j-E;if(U>l)return Number.POSITIVE_INFINITY;_+=U}return _/d}}class pe extends he{static findStartPattern(r){const s=r.getSize(),l=r.getNextSet(0);let u=0,d=Int32Array.from([0,0,0,0,0,0]),p=l,x=!1;const _=6;for(let S=l;S<s;S++)if(r.get(S)!==x)d[u]++;else{if(u===_-1){let E=pe.MAX_AVG_VARIANCE,j=-1;for(let U=pe.CODE_START_A;U<=pe.CODE_START_C;U++){const X=he.patternMatchVariance(d,pe.CODE_PATTERNS[U],pe.MAX_INDIVIDUAL_VARIANCE);X<E&&(E=X,j=U)}if(j>=0&&r.isRange(Math.max(0,p-(S-p)/2),p,!1))return Int32Array.from([p,S,j]);p+=d[0]+d[1],d=d.slice(2,d.length-1),d[u-1]=0,d[u]=0,u--}else u++;d[u]=1,x=!x}throw new oe}static decodeCode(r,s,l){he.recordPattern(r,l,s);let u=pe.MAX_AVG_VARIANCE,d=-1;for(let p=0;p<pe.CODE_PATTERNS.length;p++){const x=pe.CODE_PATTERNS[p],_=this.patternMatchVariance(s,x,pe.MAX_INDIVIDUAL_VARIANCE);_<u&&(u=_,d=p)}if(d>=0)return d;throw new oe}decodeRow(r,s,l){const u=l&&l.get(q.ASSUME_GS1)===!0,d=pe.findStartPattern(s),p=d[2];let x=0;const _=new Uint8Array(20);_[x++]=p;let S;switch(p){case pe.CODE_START_A:S=pe.CODE_CODE_A;break;case pe.CODE_START_B:S=pe.CODE_CODE_B;break;case pe.CODE_START_C:S=pe.CODE_CODE_C;break;default:throw new Y}let E=!1,j=!1,U="",X=d[0],te=d[1];const re=Int32Array.from([0,0,0,0,0,0]);let ce=0,fe=0,Me=p,Re=0,Ie=!0,kt=!1,Ct=!1;for(;!E;){const gi=j;switch(j=!1,ce=fe,fe=pe.decodeCode(s,re,te),_[x++]=fe,fe!==pe.CODE_STOP&&(Ie=!0),fe!==pe.CODE_STOP&&(Re++,Me+=Re*fe),X=te,te+=re.reduce((af,Ws)=>af+Ws,0),fe){case pe.CODE_START_A:case pe.CODE_START_B:case pe.CODE_START_C:throw new Y}switch(S){case pe.CODE_CODE_A:if(fe<64)Ct===kt?U+=String.fromCharCode(32+fe):U+=String.fromCharCode(32+fe+128),Ct=!1;else if(fe<96)Ct===kt?U+=String.fromCharCode(fe-64):U+=String.fromCharCode(fe+64),Ct=!1;else switch(fe!==pe.CODE_STOP&&(Ie=!1),fe){case pe.CODE_FNC_1:u&&(U.length===0?U+="]C1":U+="");break;case pe.CODE_FNC_2:case pe.CODE_FNC_3:break;case pe.CODE_FNC_4_A:!kt&&Ct?(kt=!0,Ct=!1):kt&&Ct?(kt=!1,Ct=!1):Ct=!0;break;case pe.CODE_SHIFT:j=!0,S=pe.CODE_CODE_B;break;case pe.CODE_CODE_B:S=pe.CODE_CODE_B;break;case pe.CODE_CODE_C:S=pe.CODE_CODE_C;break;case pe.CODE_STOP:E=!0;break}break;case pe.CODE_CODE_B:if(fe<96)Ct===kt?U+=String.fromCharCode(32+fe):U+=String.fromCharCode(32+fe+128),Ct=!1;else switch(fe!==pe.CODE_STOP&&(Ie=!1),fe){case pe.CODE_FNC_1:u&&(U.length===0?U+="]C1":U+="");break;case pe.CODE_FNC_2:case pe.CODE_FNC_3:break;case pe.CODE_FNC_4_B:!kt&&Ct?(kt=!0,Ct=!1):kt&&Ct?(kt=!1,Ct=!1):Ct=!0;break;case pe.CODE_SHIFT:j=!0,S=pe.CODE_CODE_A;break;case pe.CODE_CODE_A:S=pe.CODE_CODE_A;break;case pe.CODE_CODE_C:S=pe.CODE_CODE_C;break;case pe.CODE_STOP:E=!0;break}break;case pe.CODE_CODE_C:if(fe<100)fe<10&&(U+="0"),U+=fe;else switch(fe!==pe.CODE_STOP&&(Ie=!1),fe){case pe.CODE_FNC_1:u&&(U.length===0?U+="]C1":U+="");break;case pe.CODE_CODE_A:S=pe.CODE_CODE_A;break;case pe.CODE_CODE_B:S=pe.CODE_CODE_B;break;case pe.CODE_STOP:E=!0;break}break}gi&&(S=S===pe.CODE_CODE_A?pe.CODE_CODE_B:pe.CODE_CODE_A)}const mn=te-X;if(te=s.getNextUnset(te),!s.isRange(te,Math.min(s.getSize(),te+(te-X)/2),!1))throw new oe;if(Me-=Re*ce,Me%103!==ce)throw new I;const hr=U.length;if(hr===0)throw new oe;hr>0&&Ie&&(S===pe.CODE_CODE_C?U=U.substring(0,hr-2):U=U.substring(0,hr-1));const fr=(d[1]+d[0])/2,Yt=X+mn/2,Yn=_.length,pr=new Uint8Array(Yn);for(let gi=0;gi<Yn;gi++)pr[gi]=_[gi];const Hs=[new Ye(fr,r),new Ye(Yt,r)];return new Fe(U,pr,0,Hs,ae.CODE_128,new Date().getTime())}}pe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],pe.MAX_AVG_VARIANCE=.25,pe.MAX_INDIVIDUAL_VARIANCE=.7,pe.CODE_SHIFT=98,pe.CODE_CODE_C=99,pe.CODE_CODE_B=100,pe.CODE_CODE_A=101,pe.CODE_FNC_1=102,pe.CODE_FNC_2=97,pe.CODE_FNC_3=96,pe.CODE_FNC_4_A=101,pe.CODE_FNC_4_B=100,pe.CODE_START_A=103,pe.CODE_START_B=104,pe.CODE_START_C=105,pe.CODE_STOP=106;class Be extends he{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let d=Be.findAsteriskPattern(s,u),p=s.getNextSet(d[1]),x=s.getSize(),_,S;do{Be.recordPattern(s,p,u);let re=Be.toNarrowWidePattern(u);if(re<0)throw new oe;_=Be.patternToChar(re),this.decodeRowResult+=_,S=p;for(let ce of u)p+=ce;p=s.getNextSet(p)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let E=0;for(let re of u)E+=re;let j=p-S-E;if(p!==x&&j*2<E)throw new oe;if(this.usingCheckDigit){let re=this.decodeRowResult.length-1,ce=0;for(let fe=0;fe<re;fe++)ce+=Be.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(fe));if(this.decodeRowResult.charAt(re)!==Be.ALPHABET_STRING.charAt(ce%43))throw new I;this.decodeRowResult=this.decodeRowResult.substring(0,re)}if(this.decodeRowResult.length===0)throw new oe;let U;this.extendedMode?U=Be.decodeExtended(this.decodeRowResult):U=this.decodeRowResult;let X=(d[1]+d[0])/2,te=S+E/2;return new Fe(U,null,0,[new Ye(X,r),new Ye(te,r)],ae.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let l=r.getSize(),u=r.getNextSet(0),d=0,p=u,x=!1,_=s.length;for(let S=u;S<l;S++)if(r.get(S)!==x)s[d]++;else{if(d===_-1){if(this.toNarrowWidePattern(s)===Be.ASTERISK_ENCODING&&r.isRange(Math.max(0,p-Math.floor((S-p)/2)),p,!1))return[p,S];p+=s[0]+s[1],s.copyWithin(0,2,2+d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,x=!x}throw new oe}static toNarrowWidePattern(r){let s=r.length,l=0,u;do{let d=2147483647;for(let _ of r)_<d&&_>l&&(d=_);l=d,u=0;let p=0,x=0;for(let _=0;_<s;_++){let S=r[_];S>l&&(x|=1<<s-1-_,u++,p+=S)}if(u===3){for(let _=0;_<s&&u>0;_++){let S=r[_];if(S>l&&(u--,S*2>=p))return-1}return x}}while(u>3);return-1}static patternToChar(r){for(let s=0;s<Be.CHARACTER_ENCODINGS.length;s++)if(Be.CHARACTER_ENCODINGS[s]===r)return Be.ALPHABET_STRING.charAt(s);if(r===Be.ASTERISK_ENCODING)return"*";throw new oe}static decodeExtended(r){let s=r.length,l="";for(let u=0;u<s;u++){let d=r.charAt(u);if(d==="+"||d==="$"||d==="%"||d==="/"){let p=r.charAt(u+1),x="\0";switch(d){case"+":if(p>="A"&&p<="Z")x=String.fromCharCode(p.charCodeAt(0)+32);else throw new Y;break;case"$":if(p>="A"&&p<="Z")x=String.fromCharCode(p.charCodeAt(0)-64);else throw new Y;break;case"%":if(p>="A"&&p<="E")x=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")x=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")x=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")x=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")x="\0";else if(p==="V")x="@";else if(p==="W")x="`";else if(p==="X"||p==="Y"||p==="Z")x="";else throw new Y;break;case"/":if(p>="A"&&p<="O")x=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")x=":";else throw new Y;break}l+=x,u++}else l+=d}return l}}Be.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Be.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Be.ASTERISK_ENCODING=148;class We extends he{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,l){let u=this.decodeStart(s),d=this.decodeEnd(s),p=new be;We.decodeMiddle(s,u[1],d[0],p);let x=p.toString(),_=null;l!=null&&(_=l.get(q.ALLOWED_LENGTHS)),_==null&&(_=We.DEFAULT_ALLOWED_LENGTHS);let S=x.length,E=!1,j=0;for(let te of _){if(S===te){E=!0;break}te>j&&(j=te)}if(!E&&S>j&&(E=!0),!E)throw new Y;const U=[new Ye(u[1],r),new Ye(d[0],r)];return new Fe(x,null,0,U,ae.ITF,new Date().getTime())}static decodeMiddle(r,s,l,u){let d=new Int32Array(10),p=new Int32Array(5),x=new Int32Array(5);for(d.fill(0),p.fill(0),x.fill(0);s<l;){he.recordPattern(r,s,d);for(let S=0;S<5;S++){let E=2*S;p[S]=d[E],x[S]=d[E+1]}let _=We.decodeDigit(p);u.append(_.toString()),_=this.decodeDigit(x),u.append(_.toString()),d.forEach(function(S){s+=S})}}decodeStart(r){let s=We.skipWhiteSpace(r),l=We.findGuardPattern(r,s,We.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(r,l[0]),l}validateQuietZone(r,s){let l=this.narrowLineWidth*10;l=l<s?l:s;for(let u=s-1;l>0&&u>=0&&!r.get(u);u--)l--;if(l!==0)throw new oe}static skipWhiteSpace(r){const s=r.getSize(),l=r.getNextSet(0);if(l===s)throw new oe;return l}decodeEnd(r){r.reverse();try{let s=We.skipWhiteSpace(r),l;try{l=We.findGuardPattern(r,s,We.END_PATTERN_REVERSED[0])}catch(d){d instanceof oe&&(l=We.findGuardPattern(r,s,We.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,l[0]);let u=l[0];return l[0]=r.getSize()-l[1],l[1]=r.getSize()-u,l}finally{r.reverse()}}static findGuardPattern(r,s,l){let u=l.length,d=new Int32Array(u),p=r.getSize(),x=!1,_=0,S=s;d.fill(0);for(let E=s;E<p;E++)if(r.get(E)!==x)d[_]++;else{if(_===u-1){if(he.patternMatchVariance(d,l,We.MAX_INDIVIDUAL_VARIANCE)<We.MAX_AVG_VARIANCE)return[S,E];S+=d[0]+d[1],R.arraycopy(d,2,d,0,_-1),d[_-1]=0,d[_]=0,_--}else _++;d[_]=1,x=!x}throw new oe}static decodeDigit(r){let s=We.MAX_AVG_VARIANCE,l=-1,u=We.PATTERNS.length;for(let d=0;d<u;d++){let p=We.PATTERNS[d],x=he.patternMatchVariance(r,p,We.MAX_INDIVIDUAL_VARIANCE);x<s?(s=x,l=d):x===s&&(l=-1)}if(l>=0)return l%10;throw new oe}}We.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],We.MAX_AVG_VARIANCE=.38,We.MAX_INDIVIDUAL_VARIANCE=.5,We.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],We.START_PATTERN=Int32Array.from([1,1,1,1]),We.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class ct extends he{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,l,u=0,d=Int32Array.from([0,0,0]);for(;!s;){d=Int32Array.from([0,0,0]),l=ct.findGuardPattern(r,u,!1,this.START_END_PATTERN,d);let p=l[0];u=l[1];let x=p-(u-p);x>=0&&(s=r.isRange(x,p,!1))}return l}static checkChecksum(r){return ct.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let l=parseInt(r.charAt(s-1),10);return ct.getStandardUPCEANChecksum(r.substring(0,s-1))===l}static getStandardUPCEANChecksum(r){let s=r.length,l=0;for(let u=s-1;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new Y;l+=d}l*=3;for(let u=s-2;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new Y;l+=d}return(1e3-l)%10}static decodeEnd(r,s){return ct.findGuardPattern(r,s,!1,ct.START_END_PATTERN,new Int32Array(ct.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,l,u){return this.findGuardPattern(r,s,l,u,new Int32Array(u.length))}static findGuardPattern(r,s,l,u,d){let p=r.getSize();s=l?r.getNextUnset(s):r.getNextSet(s);let x=0,_=s,S=u.length,E=l;for(let j=s;j<p;j++)if(r.get(j)!==E)d[x]++;else{if(x===S-1){if(he.patternMatchVariance(d,u,ct.MAX_INDIVIDUAL_VARIANCE)<ct.MAX_AVG_VARIANCE)return Int32Array.from([_,j]);_+=d[0]+d[1];let U=d.slice(2,d.length-1);for(let X=0;X<x-1;X++)d[X]=U[X];d[x-1]=0,d[x]=0,x--}else x++;d[x]=1,E=!E}throw new oe}static decodeDigit(r,s,l,u){this.recordPattern(r,l,s);let d=this.MAX_AVG_VARIANCE,p=-1,x=u.length;for(let _=0;_<x;_++){let S=u[_],E=he.patternMatchVariance(s,S,ct.MAX_INDIVIDUAL_VARIANCE);E<d&&(d=E,p=_)}if(p>=0)return p;throw new oe}}ct.MAX_AVG_VARIANCE=.48,ct.MAX_INDIVIDUAL_VARIANCE=.7,ct.START_END_PATTERN=Int32Array.from([1,1,1]),ct.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),ct.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ct.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Qn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(s,l,u),p=u.toString(),x=Qn.parseExtensionString(p),_=[new Ye((l[0]+l[1])/2,r),new Ye(d,r)],S=new Fe(p,null,0,_,ae.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&S.putAllMetadata(x),S}decodeMiddle(r,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p=s[1],x=0;for(let S=0;S<5&&p<d;S++){let E=ct.decodeDigit(r,u,p,ct.L_AND_G_PATTERNS);l+=String.fromCharCode(48+E%10);for(let j of u)p+=j;E>=10&&(x|=1<<4-S),S!==4&&(p=r.getNextSet(p),p=r.getNextUnset(p))}if(l.length!==5)throw new oe;let _=this.determineCheckDigit(x);if(Qn.extensionChecksum(l.toString())!==_)throw new oe;return p}static extensionChecksum(r){let s=r.length,l=0;for(let u=s-2;u>=0;u-=2)l+=r.charAt(u).charCodeAt(0)-48;l*=3;for(let u=s-1;u>=0;u-=2)l+=r.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new oe}static parseExtensionString(r){if(r.length!==5)return null;let s=Qn.parseExtension5String(r);return s==null?null:new Map([[Qe.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let l=parseInt(r.substring(1)),u=(l/100).toString(),d=l%100,p=d<10?"0"+d:d.toString();return s+u+"."+p}}class Bt{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(s,l,u),p=u.toString(),x=Bt.parseExtensionString(p),_=[new Ye((l[0]+l[1])/2,r),new Ye(d,r)],S=new Fe(p,null,0,_,ae.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&S.putAllMetadata(x),S}decodeMiddle(r,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p=s[1],x=0;for(let _=0;_<2&&p<d;_++){let S=ct.decodeDigit(r,u,p,ct.L_AND_G_PATTERNS);l+=String.fromCharCode(48+S%10);for(let E of u)p+=E;S>=10&&(x|=1<<1-_),_!==1&&(p=r.getNextSet(p),p=r.getNextUnset(p))}if(l.length!==2)throw new oe;if(parseInt(l.toString())%4!==x)throw new oe;return p}static parseExtensionString(r){return r.length!==2?null:new Map([[Qe.ISSUE_NUMBER,parseInt(r)]])}}class yn{static decodeRow(r,s,l){let u=ct.findGuardPattern(s,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Qn().decodeRow(r,s,u)}catch{return new Bt().decodeRow(r,s,u)}}}yn.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class mt extends ct{constructor(){super(),this.decodeRowStringBuffer="",mt.L_AND_G_PATTERNS=mt.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=mt.L_PATTERNS[r-10],l=new Int32Array(s.length);for(let u=0;u<s.length;u++)l[u]=s[s.length-u-1];mt.L_AND_G_PATTERNS[r]=l}}decodeRow(r,s,l){let u=mt.findStartGuardPattern(s),d=l==null?null:l.get(q.NEED_RESULT_POINT_CALLBACK);if(d!=null){const Ie=new Ye((u[0]+u[1])/2,r);d.foundPossibleResultPoint(Ie)}let p=this.decodeMiddle(s,u,this.decodeRowStringBuffer),x=p.rowOffset,_=p.resultString;if(d!=null){const Ie=new Ye(x,r);d.foundPossibleResultPoint(Ie)}let S=this.decodeEnd(s,x);if(d!=null){const Ie=new Ye((S[0]+S[1])/2,r);d.foundPossibleResultPoint(Ie)}let E=S[1],j=E+(E-S[0]);if(j>=s.getSize()||!s.isRange(E,j,!1))throw new oe;let U=_.toString();if(U.length<8)throw new Y;if(!mt.checkChecksum(U))throw new I;let X=(u[1]+u[0])/2,te=(S[1]+S[0])/2,re=this.getBarcodeFormat(),ce=[new Ye(X,r),new Ye(te,r)],fe=new Fe(U,null,0,ce,re,new Date().getTime()),Me=0;try{let Ie=yn.decodeRow(r,s,S[1]);fe.putMetadata(Qe.UPC_EAN_EXTENSION,Ie.getText()),fe.putAllMetadata(Ie.getResultMetadata()),fe.addResultPoints(Ie.getResultPoints()),Me=Ie.getText().length}catch{}let Re=l==null?null:l.get(q.ALLOWED_EAN_EXTENSIONS);if(Re!=null){let Ie=!1;for(let kt in Re)if(Me.toString()===kt){Ie=!0;break}if(!Ie)throw new oe}return fe}decodeEnd(r,s){return mt.findGuardPattern(r,s,!1,mt.START_END_PATTERN,new Int32Array(mt.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return mt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let l=parseInt(r.charAt(s-1),10);return mt.getStandardUPCEANChecksum(r.substring(0,s-1))===l}static getStandardUPCEANChecksum(r){let s=r.length,l=0;for(let u=s-1;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new Y;l+=d}l*=3;for(let u=s-2;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new Y;l+=d}return(1e3-l)%10}}class Jt extends mt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p=s[1],x=0;for(let S=0;S<6&&p<d;S++){let E=mt.decodeDigit(r,u,p,mt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+E%10);for(let j of u)p+=j;E>=10&&(x|=1<<5-S)}l=Jt.determineFirstDigit(l,x),p=mt.findGuardPattern(r,p,!0,mt.MIDDLE_PATTERN,new Int32Array(mt.MIDDLE_PATTERN.length).fill(0))[1];for(let S=0;S<6&&p<d;S++){let E=mt.decodeDigit(r,u,p,mt.L_PATTERNS);l+=String.fromCharCode(48+E);for(let j of u)p+=j}return{rowOffset:p,resultString:l}}getBarcodeFormat(){return ae.EAN_13}static determineFirstDigit(r,s){for(let l=0;l<10;l++)if(s===this.FIRST_DIGIT_ENCODINGS[l])return r=String.fromCharCode(48+l)+r,r;throw new oe}}Jt.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class $n extends mt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,l){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p=s[1];for(let _=0;_<4&&p<d;_++){let S=mt.decodeDigit(r,u,p,mt.L_PATTERNS);l+=String.fromCharCode(48+S);for(let E of u)p+=E}p=mt.findGuardPattern(r,p,!0,mt.MIDDLE_PATTERN,new Int32Array(mt.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<4&&p<d;_++){let S=mt.decodeDigit(r,u,p,mt.L_PATTERNS);l+=String.fromCharCode(48+S);for(let E of u)p+=E}return{rowOffset:p,resultString:l}}getBarcodeFormat(){return ae.EAN_8}}class J extends mt{constructor(){super(...arguments),this.ean13Reader=new Jt}getBarcodeFormat(){return ae.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,l))}decodeMiddle(r,s,l){return this.ean13Reader.decodeMiddle(r,s,l)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let l=new Fe(s.substring(1),null,null,r.getResultPoints(),ae.UPC_A);return r.getResultMetadata()!=null&&l.putAllMetadata(r.getResultMetadata()),l}else throw new oe}reset(){this.ean13Reader.reset()}}class _e extends mt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,l){const u=this.decodeMiddleCounters.map(S=>S);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const d=r.getSize();let p=s[1],x=0;for(let S=0;S<6&&p<d;S++){const E=_e.decodeDigit(r,u,p,_e.L_AND_G_PATTERNS);l+=String.fromCharCode(48+E%10);for(let j of u)p+=j;E>=10&&(x|=1<<5-S)}let _=_e.determineNumSysAndCheckDigit(l,x);return{rowOffset:p,resultString:_}}decodeEnd(r,s){return _e.findGuardPatternWithoutCounters(r,s,!0,_e.MIDDLE_END_PATTERN)}checkChecksum(r){return mt.checkChecksum(_e.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let d=String.fromCharCode(48+l),p=String.fromCharCode(48+u);return d+r+p}throw oe.getNotFoundInstance()}getBarcodeFormat(){return ae.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new be;l.append(r.charAt(0));let u=s[5];switch(u){case 0:case 1:case 2:l.appendChars(s,0,2),l.append(u),l.append("0000"),l.appendChars(s,2,3);break;case 3:l.appendChars(s,0,3),l.append("00000"),l.appendChars(s,3,2);break;case 4:l.appendChars(s,0,4),l.append("00000"),l.append(s[4]);break;default:l.appendChars(s,0,5),l.append("0000"),l.append(u);break}return r.length>=8&&l.append(r.charAt(7)),l.toString()}}_e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),_e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Se extends he{constructor(r){super();let s=r==null?null:r.get(q.POSSIBLE_FORMATS),l=[];i(s)?(l.push(new Jt),l.push(new J),l.push(new $n),l.push(new _e)):(s.indexOf(ae.EAN_13)>-1&&l.push(new Jt),s.indexOf(ae.UPC_A)>-1&&l.push(new J),s.indexOf(ae.EAN_8)>-1&&l.push(new $n),s.indexOf(ae.UPC_E)>-1&&l.push(new _e)),this.readers=l}decodeRow(r,s,l){for(let u of this.readers)try{const d=u.decodeRow(r,s,l),p=d.getBarcodeFormat()===ae.EAN_13&&d.getText().charAt(0)==="0",x=l==null?null:l.get(q.POSSIBLE_FORMATS),_=x==null||x.includes(ae.UPC_A);if(p&&_){const S=d.getRawBytes(),E=new Fe(d.getText().substring(1),S,S?S.length:null,d.getResultPoints(),ae.UPC_A);return E.putAllMetadata(d.getResultMetadata()),E}return d}catch{}throw new oe}reset(){for(let r of this.readers)r.reset()}}class ze extends he{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let l=0;l<s.length;l++)if(he.patternMatchVariance(r,s[l],ze.MAX_INDIVIDUAL_VARIANCE)<ze.MAX_AVG_VARIANCE)return l;throw new oe}static count(r){return ft.sum(new Int32Array(r))}static increment(r,s){let l=0,u=s[0];for(let d=1;d<r.length;d++)s[d]>u&&(u=s[d],l=d);r[l]++}static decrement(r,s){let l=0,u=s[0];for(let d=1;d<r.length;d++)s[d]<u&&(u=s[d],l=d);r[l]--}static isFinderPattern(r){let s=r[0]+r[1],l=s+r[2]+r[3],u=s/l;if(u>=ze.MIN_FINDER_PATTERN_RATIO&&u<=ze.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let x of r)x>p&&(p=x),x<d&&(d=x);return p<10*d}return!1}}ze.MAX_AVG_VARIANCE=.2,ze.MAX_INDIVIDUAL_VARIANCE=.45,ze.MIN_FINDER_PATTERN_RATIO=9.5/12,ze.MAX_FINDER_PATTERN_RATIO=12.5/14;class qe{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof qe))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class pt{constructor(r,s,l,u,d){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new Ye(l,d)),this.resultPoints.push(new Ye(u,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof pt))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class it{constructor(){}static getRSSvalue(r,s,l){let u=0;for(let _ of r)u+=_;let d=0,p=0,x=r.length;for(let _=0;_<x-1;_++){let S;for(S=1,p|=1<<_;S<r[_];S++,p&=~(1<<_)){let E=it.combins(u-S-1,x-_-2);if(l&&p===0&&u-S-(x-_-1)>=x-_-1&&(E-=it.combins(u-S-(x-_),x-_-2)),x-_-1>1){let j=0;for(let U=u-S-(x-_-2);U>s;U--)j+=it.combins(u-S-U-1,x-_-3);E-=j*(x-1-_)}else u-S>s&&E--;d+=E}u-=S}return d}static combins(r,s){let l,u;r-s>s?(u=s,l=r-s):(u=r-s,l=s);let d=1,p=1;for(let x=r;x>l;x--)d*=x,p<=u&&(d/=p,p++);for(;p<=u;)d/=p,p++;return d}}class In{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let l=12*s,u=new G(l),d=0,x=r[0].getRightChar().getValue();for(let _=11;_>=0;--_)x&1<<_&&u.set(d),d++;for(let _=1;_<r.length;++_){let S=r[_],E=S.getLeftChar().getValue();for(let j=11;j>=0;--j)E&1<<j&&u.set(d),d++;if(S.getRightChar()!=null){let j=S.getRightChar().getValue();for(let U=11;U>=0;--U)j&1<<U&&u.set(d),d++}}return u}}class Ut{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ht{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class At extends Ht{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===At.FNC1}}At.FNC1="$";class Ve extends Ht{constructor(r,s,l){super(r),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Ft extends Ht{constructor(r,s,l){if(super(r),s<0||s>10||l<0||l>10)throw new Y;this.firstDigit=s,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Ft.FNC1}isSecondDigitFNC1(){return this.secondDigit===Ft.FNC1}isAnyFNC1(){return this.firstDigit===Ft.FNC1||this.secondDigit===Ft.FNC1}}Ft.FNC1=10;class De{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new oe;let s=r.substring(0,2);for(let d of De.TWO_DIGIT_DATA_LENGTH)if(d[0]===s)return d[1]===De.VARIABLE_LENGTH?De.processVariableAI(2,d[2],r):De.processFixedAI(2,d[1],r);if(r.length<3)throw new oe;let l=r.substring(0,3);for(let d of De.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===De.VARIABLE_LENGTH?De.processVariableAI(3,d[2],r):De.processFixedAI(3,d[1],r);for(let d of De.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===De.VARIABLE_LENGTH?De.processVariableAI(4,d[2],r):De.processFixedAI(4,d[1],r);if(r.length<4)throw new oe;let u=r.substring(0,4);for(let d of De.FOUR_DIGIT_DATA_LENGTH)if(d[0]===u)return d[1]===De.VARIABLE_LENGTH?De.processVariableAI(4,d[2],r):De.processFixedAI(4,d[1],r);throw new oe}static processFixedAI(r,s,l){if(l.length<r)throw new oe;let u=l.substring(0,r);if(l.length<r+s)throw new oe;let d=l.substring(r,r+s),p=l.substring(r+s),x="("+u+")"+d,_=De.parseFieldsInGeneralPurpose(p);return _==null?x:x+_}static processVariableAI(r,s,l){let u=l.substring(0,r),d;l.length<r+s?d=l.length:d=r+s;let p=l.substring(r,d),x=l.substring(d),_="("+u+")"+p,S=De.parseFieldsInGeneralPurpose(x);return S==null?_:_+S}}De.VARIABLE_LENGTH=[],De.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",De.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",De.VARIABLE_LENGTH,20],["22",De.VARIABLE_LENGTH,29],["30",De.VARIABLE_LENGTH,8],["37",De.VARIABLE_LENGTH,8],["90",De.VARIABLE_LENGTH,30],["91",De.VARIABLE_LENGTH,30],["92",De.VARIABLE_LENGTH,30],["93",De.VARIABLE_LENGTH,30],["94",De.VARIABLE_LENGTH,30],["95",De.VARIABLE_LENGTH,30],["96",De.VARIABLE_LENGTH,30],["97",De.VARIABLE_LENGTH,3],["98",De.VARIABLE_LENGTH,30],["99",De.VARIABLE_LENGTH,30]],De.THREE_DIGIT_DATA_LENGTH=[["240",De.VARIABLE_LENGTH,30],["241",De.VARIABLE_LENGTH,30],["242",De.VARIABLE_LENGTH,6],["250",De.VARIABLE_LENGTH,30],["251",De.VARIABLE_LENGTH,30],["253",De.VARIABLE_LENGTH,17],["254",De.VARIABLE_LENGTH,20],["400",De.VARIABLE_LENGTH,30],["401",De.VARIABLE_LENGTH,30],["402",17],["403",De.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",De.VARIABLE_LENGTH,20],["421",De.VARIABLE_LENGTH,15],["422",3],["423",De.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],De.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",De.VARIABLE_LENGTH,15],["391",De.VARIABLE_LENGTH,18],["392",De.VARIABLE_LENGTH,15],["393",De.VARIABLE_LENGTH,18],["703",De.VARIABLE_LENGTH,30]],De.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",De.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",De.VARIABLE_LENGTH,20],["8003",De.VARIABLE_LENGTH,30],["8004",De.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",De.VARIABLE_LENGTH,30],["8008",De.VARIABLE_LENGTH,12],["8018",18],["8020",De.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",De.VARIABLE_LENGTH,70],["8200",De.VARIABLE_LENGTH,70]];class br{constructor(r){this.buffer=new be,this.information=r}decodeAllCodes(r,s){let l=s,u=null;do{let d=this.decodeGeneralPurposeField(l,u),p=De.parseFieldsInGeneralPurpose(d.getNewString());if(p!=null&&r.append(p),d.isRemaining()?u=""+d.getRemainingValue():u=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(r,4);return d===0?new Ft(this.information.getSize(),Ft.FNC1,Ft.FNC1):new Ft(this.information.getSize(),d-1,Ft.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),l=(s-8)/11,u=(s-8)%11;return new Ft(r+7,l,u)}extractNumericValueFromBitArray(r,s){return br.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,l){let u=0;for(let d=0;d<l;++d)r.get(s+d)&&(u|=1<<l-d-1);return u}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Ve(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Ve(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let l=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(l!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new Ve(this.current.getPosition(),this.buffer.toString()):s=new Ve(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new Ut(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new Ve(this.current.getPosition(),this.buffer.toString());return new Ut(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ut(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Ve(this.current.getPosition(),this.buffer.toString());return new Ut(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ut(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Ve(this.current.getPosition(),this.buffer.toString());return new Ut(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ut(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<116)return!0;if(r+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(r,8);return u>=232&&u<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new At(r+5,At.FNC1);if(s>=5&&s<15)return new At(r+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<90)return new At(r+7,""+(l+1));if(l>=90&&l<116)return new At(r+7,""+(l+7));let u=this.extractNumericValueFromBitArray(r,8),d;switch(u){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new Y}return new At(r+8,d)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,6);return l>=16&&l<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new At(r+5,At.FNC1);if(s>=5&&s<15)return new At(r+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(r,6);if(l>=32&&l<58)return new At(r+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new Xt("Decoding invalid alphanumeric value: "+l)}return new At(r+6,u)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class ci{constructor(r){this.information=r,this.generalDecoder=new br(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class wn extends ci{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let l=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,l)}encodeCompressedGtinWithoutAI(r,s,l){for(let u=0;u<4;++u){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*u,10);d/100===0&&r.append("0"),d/10===0&&r.append("0"),r.append(d)}wn.appendCheckDigit(r,l)}static appendCheckDigit(r,s){let l=0;for(let u=0;u<13;u++){let d=r.charAt(u+s).charCodeAt(0)-48;l+=u&1?d:3*d}l=10-l%10,l===10&&(l=0),r.append(l)}}wn.GTIN_SIZE=40;class Ot extends wn{constructor(r){super(r)}parseInformation(){let r=new be;r.append("(01)");let s=r.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(Ot.HEADER_SIZE,4);return r.append(l),this.encodeCompressedGtinWithoutAI(r,Ot.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,Ot.HEADER_SIZE+44)}}Ot.HEADER_SIZE=4;class Pr extends ci{constructor(r){super(r)}parseInformation(){let r=new be;return this.getGeneralDecoder().decodeAllCodes(r,Pr.HEADER_SIZE)}}Pr.HEADER_SIZE=5;class Lo extends wn{constructor(r){super(r)}encodeCompressedWeight(r,s,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s,l);this.addWeightCode(r,u);let d=this.checkWeight(u),p=1e5;for(let x=0;x<5;++x)d/p===0&&r.append("0"),p/=10;r.append(d)}}class ui extends Lo{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=ui.HEADER_SIZE+Lo.GTIN_SIZE+ui.WEIGHT_SIZE)throw new oe;let r=new be;return this.encodeCompressedGtin(r,ui.HEADER_SIZE),this.encodeCompressedWeight(r,ui.HEADER_SIZE+Lo.GTIN_SIZE,ui.WEIGHT_SIZE),r.toString()}}ui.HEADER_SIZE=5,ui.WEIGHT_SIZE=15;class $h extends ui{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class Jh extends ui{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class di extends wn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<di.HEADER_SIZE+wn.GTIN_SIZE)throw new oe;let r=new be;this.encodeCompressedGtin(r,di.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(di.HEADER_SIZE+wn.GTIN_SIZE,di.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(di.HEADER_SIZE+wn.GTIN_SIZE+di.LAST_DIGIT_SIZE,null);return r.append(l.getNewString()),r.toString()}}di.HEADER_SIZE=8,di.LAST_DIGIT_SIZE=2;class Jn extends wn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Jn.HEADER_SIZE+wn.GTIN_SIZE)throw new oe;let r=new be;this.encodeCompressedGtin(r,Jn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Jn.HEADER_SIZE+wn.GTIN_SIZE,Jn.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(Jn.HEADER_SIZE+wn.GTIN_SIZE+Jn.LAST_DIGIT_SIZE,Jn.FIRST_THREE_DIGITS_SIZE);l/100==0&&r.append("0"),l/10==0&&r.append("0"),r.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField(Jn.HEADER_SIZE+wn.GTIN_SIZE+Jn.LAST_DIGIT_SIZE+Jn.FIRST_THREE_DIGITS_SIZE,null);return r.append(u.getNewString()),r.toString()}}Jn.HEADER_SIZE=8,Jn.LAST_DIGIT_SIZE=2,Jn.FIRST_THREE_DIGITS_SIZE=10;class ln extends Lo{constructor(r,s,l){super(r),this.dateCode=l,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=ln.HEADER_SIZE+ln.GTIN_SIZE+ln.WEIGHT_SIZE+ln.DATE_SIZE)throw new oe;let r=new be;return this.encodeCompressedGtin(r,ln.HEADER_SIZE),this.encodeCompressedWeight(r,ln.HEADER_SIZE+ln.GTIN_SIZE,ln.WEIGHT_SIZE),this.encodeCompressedDate(r,ln.HEADER_SIZE+ln.GTIN_SIZE+ln.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,ln.DATE_SIZE);if(l==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let u=l%32;l/=32;let d=l%12+1;l/=12;let p=l;p/10==0&&r.append("0"),r.append(p),d/10==0&&r.append("0"),r.append(d),u/10==0&&r.append("0"),r.append(u)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}ln.HEADER_SIZE=8,ln.WEIGHT_SIZE=20,ln.DATE_SIZE=16;function Po(D){try{if(D.get(1))return new Ot(D);if(!D.get(2))return new Pr(D);switch(br.extractNumericValueFromBitArray(D,1,4)){case 4:return new $h(D);case 5:return new Jh(D)}switch(br.extractNumericValueFromBitArray(D,1,5)){case 12:return new di(D);case 13:return new Jn(D)}switch(br.extractNumericValueFromBitArray(D,1,7)){case 56:return new ln(D,"310","11");case 57:return new ln(D,"320","11");case 58:return new ln(D,"310","13");case 59:return new ln(D,"320","13");case 60:return new ln(D,"310","15");case 61:return new ln(D,"320","15");case 62:return new ln(D,"310","17");case 63:return new ln(D,"320","17")}}catch(r){throw console.log(r),new Xt("unknown decoder: "+D)}}class Zi{constructor(r,s,l,u){this.leftchar=r,this.rightchar=s,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof Zi?Zi.equalsOrNull(r.leftchar,s.leftchar)&&Zi.equalsOrNull(r.rightchar,s.rightchar)&&Zi.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:Zi.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Sl{constructor(r,s,l){this.pairs=r,this.rowNumber=s,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof Sl?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let l;return r.forEach((u,d)=>{s.forEach(p=>{u.getLeftChar().getValue()===p.getLeftChar().getValue()&&u.getRightChar().getValue()===p.getRightChar().getValue()&&u.getFinderPatter().getValue()===p.getFinderPatter().getValue()&&(l=!0)})}),l}}class Ee extends ze{constructor(r){super(...arguments),this.pairs=new Array(Ee.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,l){this.pairs.length=0,this.startFromEven=!1;try{return Ee.constructResult(this.decodeRow2pairs(r,s))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,Ee.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(d){if(d instanceof oe){if(!this.pairs.length)throw new oe;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(r,!1),u){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new oe}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let l=s;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let p of r)this.pairs.push(p.getPairs());if(this.pairs.push(u.getPairs()),!Ee.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(r);d.push(u);try{return this.checkRows(d,l+1)}catch(p){this.verbose&&console.log(p)}}throw new oe}static isValidSequence(r){for(let s of Ee.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let l=!0;for(let u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!=s[u]){l=!1;break}if(l)return!0}return!1}storeRow(r,s){let l=0,u=!1,d=!1;for(;l<this.rows.length;){let p=this.rows[l];if(p.getRowNumber()>r){d=p.isEquivalent(this.pairs);break}u=p.isEquivalent(this.pairs),l++}d||u||Ee.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Sl(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let l of s)if(l.getPairs().length!==r.length){for(let u of l.getPairs())for(let d of r)if(Zi.equals(u,d))break}}static isPartialRow(r,s){for(let l of s){let u=!0;for(let d of r){let p=!1;for(let x of l.getPairs())if(d.equals(x)){p=!0;break}if(!p){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=In.buildBitArray(r),u=Po(s).parseInformation(),d=r[0].getFinderPattern().getResultPoints(),p=r[r.length-1].getFinderPattern().getResultPoints(),x=[d[0],d[1],p[0],p[1]];return new Fe(u,null,null,x,ae.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),l=r.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),d=2;for(let x=1;x<this.pairs.size();++x){let _=this.pairs.get(x);u+=_.getLeftChar().getChecksumPortion(),d++;let S=_.getRightChar();S!=null&&(u+=S.getChecksumPortion(),d++)}return u%=211,211*(d-4)+u==s.getValue()}static getNextSecondBar(r,s){let l;return r.get(s)?(l=r.getNextUnset(s),l=r.getNextSet(l)):(l=r.getNextSet(s),l=r.getNextUnset(l)),l}retrieveNextPair(r,s,l){let u=s.length%2==0;this.startFromEven&&(u=!u);let d,p=!0,x=-1;do this.findNextPair(r,s,x),d=this.parseFoundFinderPattern(r,l,u),d==null?x=Ee.getNextSecondBar(r,this.startEnd[0]):p=!1;while(p);let _=this.decodeDataCharacter(r,d,u,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new oe;let S;try{S=this.decodeDataCharacter(r,d,u,!1)}catch(E){S=null,this.verbose&&console.log(E)}return new Zi(_,S,d,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p;l>=0?p=l:this.isEmptyPair(s)?p=0:p=s[s.length-1].getFinderPattern().getStartEnd()[1];let x=s.length%2!=0;this.startFromEven&&(x=!x);let _=!1;for(;p<d&&(_=!r.get(p),!!_);)p++;let S=0,E=p;for(let j=p;j<d;j++)if(r.get(j)!=_)u[S]++;else{if(S==3){if(x&&Ee.reverseCounters(u),Ee.isFinderPattern(u)){this.startEnd[0]=E,this.startEnd[1]=j;return}x&&Ee.reverseCounters(u),E+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,S--}else S++;u[S]=1,_=!_}throw new oe}static reverseCounters(r){let s=r.length;for(let l=0;l<s/2;++l){let u=r[l];r[l]=r[s-l-1],r[s-l-1]=u}}parseFoundFinderPattern(r,s,l){let u,d,p;if(l){let S=this.startEnd[0]-1;for(;S>=0&&!r.get(S);)S--;S++,u=this.startEnd[0]-S,d=S,p=this.startEnd[1]}else d=this.startEnd[0],p=r.getNextUnset(this.startEnd[1]+1),u=p-this.startEnd[1];let x=this.getDecodeFinderCounters();R.arraycopy(x,0,x,1,x.length-1),x[0]=u;let _;try{_=this.parseFinderValue(x,Ee.FINDER_PATTERNS)}catch{return null}return new pt(_,[d,p],d,p,s)}decodeDataCharacter(r,s,l,u){let d=this.getDataCharacterCounters();for(let Yt=0;Yt<d.length;Yt++)d[Yt]=0;if(u)Ee.recordPatternInReverse(r,s.getStartEnd()[0],d);else{Ee.recordPattern(r,s.getStartEnd()[1],d);for(let Yt=0,Yn=d.length-1;Yt<Yn;Yt++,Yn--){let pr=d[Yt];d[Yt]=d[Yn],d[Yn]=pr}}let p=17,x=ft.sum(new Int32Array(d))/p,_=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(x-_)/_>.3)throw new oe;let S=this.getOddCounts(),E=this.getEvenCounts(),j=this.getOddRoundingErrors(),U=this.getEvenRoundingErrors();for(let Yt=0;Yt<d.length;Yt++){let Yn=1*d[Yt]/x,pr=Yn+.5;if(pr<1){if(Yn<.3)throw new oe;pr=1}else if(pr>8){if(Yn>8.7)throw new oe;pr=8}let Hs=Yt/2;Yt&1?(E[Hs]=pr,U[Hs]=Yn-pr):(S[Hs]=pr,j[Hs]=Yn-pr)}this.adjustOddEvenCounts(p);let X=4*s.getValue()+(l?0:2)+(u?0:1)-1,te=0,re=0;for(let Yt=S.length-1;Yt>=0;Yt--){if(Ee.isNotA1left(s,l,u)){let Yn=Ee.WEIGHTS[X][2*Yt];re+=S[Yt]*Yn}te+=S[Yt]}let ce=0;for(let Yt=E.length-1;Yt>=0;Yt--)if(Ee.isNotA1left(s,l,u)){let Yn=Ee.WEIGHTS[X][2*Yt+1];ce+=E[Yt]*Yn}let fe=re+ce;if(te&1||te>13||te<4)throw new oe;let Me=(13-te)/2,Re=Ee.SYMBOL_WIDEST[Me],Ie=9-Re,kt=it.getRSSvalue(S,Re,!0),Ct=it.getRSSvalue(E,Ie,!1),mn=Ee.EVEN_TOTAL_SUBSET[Me],hr=Ee.GSUM[Me],fr=kt*mn+Ct+hr;return new qe(fr,fe)}static isNotA1left(r,s,l){return!(r.getValue()==0&&s&&l)}adjustOddEvenCounts(r){let s=ft.sum(new Int32Array(this.getOddCounts())),l=ft.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1;s>13?d=!0:s<4&&(u=!0);let p=!1,x=!1;l>13?x=!0:l<4&&(p=!0);let _=s+l-r,S=(s&1)==1,E=(l&1)==0;if(_==1)if(S){if(E)throw new oe;d=!0}else{if(!E)throw new oe;x=!0}else if(_==-1)if(S){if(E)throw new oe;u=!0}else{if(!E)throw new oe;p=!0}else if(_==0){if(S){if(!E)throw new oe;s<l?(u=!0,x=!0):(d=!0,p=!0)}else if(E)throw new oe}else throw new oe;if(u){if(d)throw new oe;Ee.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Ee.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(x)throw new oe;Ee.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&Ee.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ee.SYMBOL_WIDEST=[7,5,4,3,1],Ee.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ee.GSUM=[0,348,1388,2948,3988],Ee.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ee.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ee.FINDER_PAT_A=0,Ee.FINDER_PAT_B=1,Ee.FINDER_PAT_C=2,Ee.FINDER_PAT_D=3,Ee.FINDER_PAT_E=4,Ee.FINDER_PAT_F=5,Ee.FINDER_PATTERN_SEQUENCES=[[Ee.FINDER_PAT_A,Ee.FINDER_PAT_A],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_B,Ee.FINDER_PAT_B],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_C,Ee.FINDER_PAT_B,Ee.FINDER_PAT_D],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_E,Ee.FINDER_PAT_B,Ee.FINDER_PAT_D,Ee.FINDER_PAT_C],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_E,Ee.FINDER_PAT_B,Ee.FINDER_PAT_D,Ee.FINDER_PAT_D,Ee.FINDER_PAT_F],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_E,Ee.FINDER_PAT_B,Ee.FINDER_PAT_D,Ee.FINDER_PAT_E,Ee.FINDER_PAT_F,Ee.FINDER_PAT_F],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_A,Ee.FINDER_PAT_B,Ee.FINDER_PAT_B,Ee.FINDER_PAT_C,Ee.FINDER_PAT_C,Ee.FINDER_PAT_D,Ee.FINDER_PAT_D],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_A,Ee.FINDER_PAT_B,Ee.FINDER_PAT_B,Ee.FINDER_PAT_C,Ee.FINDER_PAT_C,Ee.FINDER_PAT_D,Ee.FINDER_PAT_E,Ee.FINDER_PAT_E],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_A,Ee.FINDER_PAT_B,Ee.FINDER_PAT_B,Ee.FINDER_PAT_C,Ee.FINDER_PAT_C,Ee.FINDER_PAT_D,Ee.FINDER_PAT_E,Ee.FINDER_PAT_F,Ee.FINDER_PAT_F],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_A,Ee.FINDER_PAT_B,Ee.FINDER_PAT_B,Ee.FINDER_PAT_C,Ee.FINDER_PAT_D,Ee.FINDER_PAT_D,Ee.FINDER_PAT_E,Ee.FINDER_PAT_E,Ee.FINDER_PAT_F,Ee.FINDER_PAT_F]],Ee.MAX_PAIRS=11;class ef extends qe{constructor(r,s,l){super(r,s),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class vn extends ze{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,l){const u=this.decodePair(s,!1,r,l);vn.addOrTally(this.possibleLeftPairs,u),s.reverse();let d=this.decodePair(s,!0,r,l);vn.addOrTally(this.possibleRightPairs,d),s.reverse();for(let p of this.possibleLeftPairs)if(p.getCount()>1){for(let x of this.possibleRightPairs)if(x.getCount()>1&&vn.checkChecksum(p,x))return vn.constructResult(p,x)}throw new oe}static addOrTally(r,s){if(s==null)return;let l=!1;for(let u of r)if(u.getValue()===s.getValue()){u.incrementCount(),l=!0;break}l||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let l=4537077*r.getValue()+s.getValue(),u=new String(l).toString(),d=new be;for(let S=13-u.length;S>0;S--)d.append("0");d.append(u);let p=0;for(let S=0;S<13;S++){let E=d.charAt(S).charCodeAt(0)-48;p+=S&1?E:3*E}p=10-p%10,p===10&&(p=0),d.append(p.toString());let x=r.getFinderPattern().getResultPoints(),_=s.getFinderPattern().getResultPoints();return new Fe(d.toString(),null,0,[x[0],x[1],_[0],_[1]],ae.RSS_14,new Date().getTime())}static checkChecksum(r,s){let l=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,u=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(r,s,l,u){try{let d=this.findFinderPattern(r,s),p=this.parseFoundFinderPattern(r,l,s,d),x=u==null?null:u.get(q.NEED_RESULT_POINT_CALLBACK);if(x!=null){let E=(d[0]+d[1])/2;s&&(E=r.getSize()-1-E),x.foundPossibleResultPoint(new Ye(E,l))}let _=this.decodeDataCharacter(r,p,!0),S=this.decodeDataCharacter(r,p,!1);return new ef(1597*_.getValue()+S.getValue(),_.getChecksumPortion()+4*S.getChecksumPortion(),p)}catch{return null}}decodeDataCharacter(r,s,l){let u=this.getDataCharacterCounters();for(let ce=0;ce<u.length;ce++)u[ce]=0;if(l)he.recordPatternInReverse(r,s.getStartEnd()[0],u);else{he.recordPattern(r,s.getStartEnd()[1]+1,u);for(let ce=0,fe=u.length-1;ce<fe;ce++,fe--){let Me=u[ce];u[ce]=u[fe],u[fe]=Me}}let d=l?16:15,p=ft.sum(new Int32Array(u))/d,x=this.getOddCounts(),_=this.getEvenCounts(),S=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let ce=0;ce<u.length;ce++){let fe=u[ce]/p,Me=Math.floor(fe+.5);Me<1?Me=1:Me>8&&(Me=8);let Re=Math.floor(ce/2);ce&1?(_[Re]=Me,E[Re]=fe-Me):(x[Re]=Me,S[Re]=fe-Me)}this.adjustOddEvenCounts(l,d);let j=0,U=0;for(let ce=x.length-1;ce>=0;ce--)U*=9,U+=x[ce],j+=x[ce];let X=0,te=0;for(let ce=_.length-1;ce>=0;ce--)X*=9,X+=_[ce],te+=_[ce];let re=U+3*X;if(l){if(j&1||j>12||j<4)throw new oe;let ce=(12-j)/2,fe=vn.OUTSIDE_ODD_WIDEST[ce],Me=9-fe,Re=it.getRSSvalue(x,fe,!1),Ie=it.getRSSvalue(_,Me,!0),kt=vn.OUTSIDE_EVEN_TOTAL_SUBSET[ce],Ct=vn.OUTSIDE_GSUM[ce];return new qe(Re*kt+Ie+Ct,re)}else{if(te&1||te>10||te<4)throw new oe;let ce=(10-te)/2,fe=vn.INSIDE_ODD_WIDEST[ce],Me=9-fe,Re=it.getRSSvalue(x,fe,!0),Ie=it.getRSSvalue(_,Me,!1),kt=vn.INSIDE_ODD_TOTAL_SUBSET[ce],Ct=vn.INSIDE_GSUM[ce];return new qe(Ie*kt+Re+Ct,re)}}findFinderPattern(r,s){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=r.getSize(),d=!1,p=0;for(;p<u&&(d=!r.get(p),s!==d);)p++;let x=0,_=p;for(let S=p;S<u;S++)if(r.get(S)!==d)l[x]++;else{if(x===3){if(ze.isFinderPattern(l))return[_,S];_+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,x--}else x++;l[x]=1,d=!d}throw new oe}parseFoundFinderPattern(r,s,l,u){let d=r.get(u[0]),p=u[0]-1;for(;p>=0&&d!==r.get(p);)p--;p++;const x=u[0]-p,_=this.getDecodeFinderCounters(),S=new Int32Array(_.length);R.arraycopy(_,0,S,1,_.length-1),S[0]=x;const E=this.parseFinderValue(S,vn.FINDER_PATTERNS);let j=p,U=u[1];return l&&(j=r.getSize()-1-j,U=r.getSize()-1-U),new pt(E,[p,u[1]],j,U,s)}adjustOddEvenCounts(r,s){let l=ft.sum(new Int32Array(this.getOddCounts())),u=ft.sum(new Int32Array(this.getEvenCounts())),d=!1,p=!1,x=!1,_=!1;r?(l>12?p=!0:l<4&&(d=!0),u>12?_=!0:u<4&&(x=!0)):(l>11?p=!0:l<5&&(d=!0),u>10?_=!0:u<4&&(x=!0));let S=l+u-s,E=(l&1)===(r?1:0),j=(u&1)===1;if(S===1)if(E){if(j)throw new oe;p=!0}else{if(!j)throw new oe;_=!0}else if(S===-1)if(E){if(j)throw new oe;d=!0}else{if(!j)throw new oe;x=!0}else if(S===0){if(E){if(!j)throw new oe;l<u?(d=!0,_=!0):(p=!0,x=!0)}else if(j)throw new oe}else throw new oe;if(d){if(p)throw new oe;ze.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&ze.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(_)throw new oe;ze.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&ze.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}vn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],vn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],vn.OUTSIDE_GSUM=[0,161,961,2015,2715],vn.INSIDE_GSUM=[0,336,1036,1516],vn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],vn.INSIDE_ODD_WIDEST=[2,4,6,8],vn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Yi extends he{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const l=r?r.get(q.POSSIBLE_FORMATS):null,u=r&&r.get(q.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(ae.EAN_13)||l.includes(ae.UPC_A)||l.includes(ae.EAN_8)||l.includes(ae.UPC_E))&&this.readers.push(new Se(r)),l.includes(ae.CODE_39)&&this.readers.push(new Be(u)),l.includes(ae.CODE_128)&&this.readers.push(new pe),l.includes(ae.ITF)&&this.readers.push(new We),l.includes(ae.RSS_14)&&this.readers.push(new vn),l.includes(ae.RSS_EXPANDED)&&this.readers.push(new Ee(this.verbose))):(this.readers.push(new Se(r)),this.readers.push(new Be),this.readers.push(new Se(r)),this.readers.push(new pe),this.readers.push(new We),this.readers.push(new vn),this.readers.push(new Ee(this.verbose)))}decodeRow(r,s,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(r,s,l)}catch{}throw new oe}reset(){this.readers.forEach(r=>r.reset())}}class Do extends Ke{constructor(r=500,s){super(new Yi(s),r,s)}}class Wt{constructor(r,s,l){this.ecCodewords=r,this.ecBlocks=[s],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Vt{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Nt{constructor(r,s,l,u,d,p){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=d,this.ecBlocks=p;let x=0;const _=p.getECCodewords(),S=p.getECBlocks();for(let E of S)x+=E.getCount()*(E.getDataCodewords()+_);this.totalCodewords=x}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if(r&1||s&1)throw new Y;for(let l of Nt.VERSIONS)if(l.symbolSizeRows===r&&l.symbolSizeColumns===s)return l;throw new Y}toString(){return""+this.versionNumber}static buildVersions(){return[new Nt(1,10,10,8,8,new Wt(5,new Vt(1,3))),new Nt(2,12,12,10,10,new Wt(7,new Vt(1,5))),new Nt(3,14,14,12,12,new Wt(10,new Vt(1,8))),new Nt(4,16,16,14,14,new Wt(12,new Vt(1,12))),new Nt(5,18,18,16,16,new Wt(14,new Vt(1,18))),new Nt(6,20,20,18,18,new Wt(18,new Vt(1,22))),new Nt(7,22,22,20,20,new Wt(20,new Vt(1,30))),new Nt(8,24,24,22,22,new Wt(24,new Vt(1,36))),new Nt(9,26,26,24,24,new Wt(28,new Vt(1,44))),new Nt(10,32,32,14,14,new Wt(36,new Vt(1,62))),new Nt(11,36,36,16,16,new Wt(42,new Vt(1,86))),new Nt(12,40,40,18,18,new Wt(48,new Vt(1,114))),new Nt(13,44,44,20,20,new Wt(56,new Vt(1,144))),new Nt(14,48,48,22,22,new Wt(68,new Vt(1,174))),new Nt(15,52,52,24,24,new Wt(42,new Vt(2,102))),new Nt(16,64,64,14,14,new Wt(56,new Vt(2,140))),new Nt(17,72,72,16,16,new Wt(36,new Vt(4,92))),new Nt(18,80,80,18,18,new Wt(48,new Vt(4,114))),new Nt(19,88,88,20,20,new Wt(56,new Vt(4,144))),new Nt(20,96,96,22,22,new Wt(68,new Vt(4,174))),new Nt(21,104,104,24,24,new Wt(56,new Vt(6,136))),new Nt(22,120,120,18,18,new Wt(68,new Vt(6,175))),new Nt(23,132,132,20,20,new Wt(62,new Vt(8,163))),new Nt(24,144,144,22,22,new Wt(62,new Vt(8,156),new Vt(2,155))),new Nt(25,8,18,6,16,new Wt(7,new Vt(1,5))),new Nt(26,8,32,6,14,new Wt(11,new Vt(1,10))),new Nt(27,12,26,10,24,new Wt(14,new Vt(1,16))),new Nt(28,12,36,10,16,new Wt(18,new Vt(1,22))),new Nt(29,16,36,14,16,new Wt(24,new Vt(1,32))),new Nt(30,16,48,14,22,new Wt(28,new Vt(1,49)))]}}Nt.VERSIONS=Nt.buildVersions();class jt{constructor(r){const s=r.getHeight();if(s<8||s>144||s&1)throw new Y;this.version=jt.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new Ne(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),l=r.getWidth();return Nt.getVersionForDimensions(s,l)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,l=4,u=0;const d=this.mappingBitMatrix.getHeight(),p=this.mappingBitMatrix.getWidth();let x=!1,_=!1,S=!1,E=!1;do if(l===d&&u===0&&!x)r[s++]=this.readCorner1(d,p)&255,l-=2,u+=2,x=!0;else if(l===d-2&&u===0&&p&3&&!_)r[s++]=this.readCorner2(d,p)&255,l-=2,u+=2,_=!0;else if(l===d+4&&u===2&&!(p&7)&&!S)r[s++]=this.readCorner3(d,p)&255,l-=2,u+=2,S=!0;else if(l===d-2&&u===0&&(p&7)===4&&!E)r[s++]=this.readCorner4(d,p)&255,l-=2,u+=2,E=!0;else{do l<d&&u>=0&&!this.readMappingMatrix.get(u,l)&&(r[s++]=this.readUtah(l,u,d,p)&255),l-=2,u+=2;while(l>=0&&u<p);l+=1,u+=3;do l>=0&&u<p&&!this.readMappingMatrix.get(u,l)&&(r[s++]=this.readUtah(l,u,d,p)&255),l+=2,u-=2;while(l<d&&u>=0);l+=3,u+=1}while(l<d||u<p);if(s!==this.version.getTotalCodewords())throw new Y;return r}readModule(r,s,l,u){return r<0&&(r+=l,s+=4-(l+4&7)),s<0&&(s+=u,r+=4-(u+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,l,u){let d=0;return this.readModule(r-2,s-2,l,u)&&(d|=1),d<<=1,this.readModule(r-2,s-1,l,u)&&(d|=1),d<<=1,this.readModule(r-1,s-2,l,u)&&(d|=1),d<<=1,this.readModule(r-1,s-1,l,u)&&(d|=1),d<<=1,this.readModule(r-1,s,l,u)&&(d|=1),d<<=1,this.readModule(r,s-2,l,u)&&(d|=1),d<<=1,this.readModule(r,s-1,l,u)&&(d|=1),d<<=1,this.readModule(r,s,l,u)&&(d|=1),d}readCorner1(r,s){let l=0;return this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,1,r,s)&&(l|=1),l<<=1,this.readModule(r-1,2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l<<=1,this.readModule(2,s-1,r,s)&&(l|=1),l<<=1,this.readModule(3,s-1,r,s)&&(l|=1),l}readCorner2(r,s){let l=0;return this.readModule(r-3,0,r,s)&&(l|=1),l<<=1,this.readModule(r-2,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(0,s-4,r,s)&&(l|=1),l<<=1,this.readModule(0,s-3,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l}readCorner3(r,s){let l=0;return this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,s-1,r,s)&&(l|=1),l<<=1,this.readModule(0,s-3,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-3,r,s)&&(l|=1),l<<=1,this.readModule(1,s-2,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l}readCorner4(r,s){let l=0;return this.readModule(r-3,0,r,s)&&(l|=1),l<<=1,this.readModule(r-2,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l<<=1,this.readModule(2,s-1,r,s)&&(l|=1),l<<=1,this.readModule(3,s-1,r,s)&&(l|=1),l}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new b("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),p=s/u|0,x=l/d|0,_=p*u,S=x*d,E=new Ne(S,_);for(let j=0;j<p;++j){const U=j*u;for(let X=0;X<x;++X){const te=X*d;for(let re=0;re<u;++re){const ce=j*(u+2)+1+re,fe=U+re;for(let Me=0;Me<d;++Me){const Re=X*(d+2)+1+Me;if(r.get(Re,ce)){const Ie=te+Me;E.set(Ie,fe)}}}}}return E}}class on{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const l=s.getECBlocks();let u=0;const d=l.getECBlocks();for(let re of d)u+=re.getCount();const p=new Array(u);let x=0;for(let re of d)for(let ce=0;ce<re.getCount();ce++){const fe=re.getDataCodewords(),Me=l.getECCodewords()+fe;p[x++]=new on(fe,new Uint8Array(Me))}const S=p[0].codewords.length-l.getECCodewords(),E=S-1;let j=0;for(let re=0;re<E;re++)for(let ce=0;ce<x;ce++)p[ce].codewords[re]=r[j++];const U=s.getVersionNumber()===24,X=U?8:x;for(let re=0;re<X;re++)p[re].codewords[S-1]=r[j++];const te=p[0].codewords.length;for(let re=S;re<te;re++)for(let ce=0;ce<x;ce++){const fe=U?(ce+8)%x:ce,Me=U&&fe>7?re-1:re;p[fe].codewords[Me]=r[j++]}if(j!==r.length)throw new b;return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ds{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new b(""+r);let s=0,l=this.bitOffset,u=this.byteOffset;const d=this.bytes;if(l>0){const p=8-l,x=r<p?r:p,_=p-x,S=255>>8-x<<_;s=(d[u]&S)>>_,r-=x,l+=x,l===8&&(l=0,u++)}if(r>0){for(;r>=8;)s=s<<8|d[u]&255,u++,r-=8;if(r>0){const p=8-r,x=255>>p<<p;s=s<<r|(d[u]&x)>>p,l+=r}}return this.bitOffset=l,this.byteOffset=u,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var cn;(function(D){D[D.PAD_ENCODE=0]="PAD_ENCODE",D[D.ASCII_ENCODE=1]="ASCII_ENCODE",D[D.C40_ENCODE=2]="C40_ENCODE",D[D.TEXT_ENCODE=3]="TEXT_ENCODE",D[D.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",D[D.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",D[D.BASE256_ENCODE=6]="BASE256_ENCODE"})(cn||(cn={}));class Cr{static decode(r){const s=new Ds(r),l=new be,u=new be,d=new Array;let p=cn.ASCII_ENCODE;do if(p===cn.ASCII_ENCODE)p=this.decodeAsciiSegment(s,l,u);else{switch(p){case cn.C40_ENCODE:this.decodeC40Segment(s,l);break;case cn.TEXT_ENCODE:this.decodeTextSegment(s,l);break;case cn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,l);break;case cn.EDIFACT_ENCODE:this.decodeEdifactSegment(s,l);break;case cn.BASE256_ENCODE:this.decodeBase256Segment(s,l,d);break;default:throw new Y}p=cn.ASCII_ENCODE}while(p!==cn.PAD_ENCODE&&s.available()>0);return u.length()>0&&l.append(u.toString()),new Ue(r,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(r,s,l){let u=!1;do{let d=r.readBits(8);if(d===0)throw new Y;if(d<=128)return u&&(d+=128),s.append(String.fromCharCode(d-1)),cn.ASCII_ENCODE;if(d===129)return cn.PAD_ENCODE;if(d<=229){const p=d-130;p<10&&s.append("0"),s.append(""+p)}else switch(d){case 230:return cn.C40_ENCODE;case 231:return cn.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:s.append("[)>05"),l.insert(0,"");break;case 237:s.append("[)>06"),l.insert(0,"");break;case 238:return cn.ANSIX12_ENCODE;case 239:return cn.TEXT_ENCODE;case 240:return cn.EDIFACT_ENCODE;case 241:break;default:if(d!==254||r.available()!==0)throw new Y;break}}while(r.available()>0);return cn.ASCII_ENCODE}static decodeC40Segment(r,s){let l=!1;const u=[];let d=0;do{if(r.available()===8)return;const p=r.readBits(8);if(p===254)return;this.parseTwoBytes(p,r.readBits(8),u);for(let x=0;x<3;x++){const _=u[x];switch(d){case 0:if(_<3)d=_+1;else if(_<this.C40_BASIC_SET_CHARS.length){const S=this.C40_BASIC_SET_CHARS[_];l?(s.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):s.append(S)}else throw new Y;break;case 1:l?(s.append(String.fromCharCode(_+128)),l=!1):s.append(String.fromCharCode(_)),d=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length){const S=this.C40_SHIFT2_SET_CHARS[_];l?(s.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):s.append(S)}else switch(_){case 27:s.append("");break;case 30:l=!0;break;default:throw new Y}d=0;break;case 3:l?(s.append(String.fromCharCode(_+224)),l=!1):s.append(String.fromCharCode(_+96)),d=0;break;default:throw new Y}}}while(r.available()>0)}static decodeTextSegment(r,s){let l=!1,u=[],d=0;do{if(r.available()===8)return;const p=r.readBits(8);if(p===254)return;this.parseTwoBytes(p,r.readBits(8),u);for(let x=0;x<3;x++){const _=u[x];switch(d){case 0:if(_<3)d=_+1;else if(_<this.TEXT_BASIC_SET_CHARS.length){const S=this.TEXT_BASIC_SET_CHARS[_];l?(s.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):s.append(S)}else throw new Y;break;case 1:l?(s.append(String.fromCharCode(_+128)),l=!1):s.append(String.fromCharCode(_)),d=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length){const S=this.TEXT_SHIFT2_SET_CHARS[_];l?(s.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):s.append(S)}else switch(_){case 27:s.append("");break;case 30:l=!0;break;default:throw new Y}d=0;break;case 3:if(_<this.TEXT_SHIFT3_SET_CHARS.length){const S=this.TEXT_SHIFT3_SET_CHARS[_];l?(s.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):s.append(S),d=0}else throw new Y;break;default:throw new Y}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const l=[];do{if(r.available()===8)return;const u=r.readBits(8);if(u===254)return;this.parseTwoBytes(u,r.readBits(8),l);for(let d=0;d<3;d++){const p=l[d];switch(p){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(p<14)s.append(String.fromCharCode(p+44));else if(p<40)s.append(String.fromCharCode(p+51));else throw new Y;break}}}while(r.available()>0)}static parseTwoBytes(r,s,l){let u=(r<<8)+s-1,d=Math.floor(u/1600);l[0]=d,u-=d*1600,d=Math.floor(u/40),l[1]=d,l[2]=u-d*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let l=0;l<4;l++){let u=r.readBits(6);if(u===31){const d=8-r.getBitOffset();d!==8&&r.readBits(d);return}u&32||(u|=64),s.append(String.fromCharCode(u))}}while(r.available()>0)}static decodeBase256Segment(r,s,l){let u=1+r.getByteOffset();const d=this.unrandomize255State(r.readBits(8),u++);let p;if(d===0?p=r.available()/8|0:d<250?p=d:p=250*(d-249)+this.unrandomize255State(r.readBits(8),u++),p<0)throw new Y;const x=new Uint8Array(p);for(let _=0;_<p;_++){if(r.available()<8)throw new Y;x[_]=this.unrandomize255State(r.readBits(8),u++)}l.push(x);try{s.append($.decode(x,se.ISO88591))}catch(_){throw new Xt("Platform does not support required encoding: "+_.message)}}static unrandomize255State(r,s){const l=149*s%255+1,u=r-l;return u>=0?u:u+256}}Cr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Cr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Cr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Cr.TEXT_SHIFT2_SET_CHARS=Cr.C40_SHIFT2_SET_CHARS,Cr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Al{constructor(){this.rsDecoder=new Vn(tt.DATA_MATRIX_FIELD_256)}decode(r){const s=new jt(r),l=s.getVersion(),u=s.readCodewords(),d=on.getDataBlocks(u,l);let p=0;for(let S of d)p+=S.getNumDataCodewords();const x=new Uint8Array(p),_=d.length;for(let S=0;S<_;S++){const E=d[S],j=E.getCodewords(),U=E.getNumDataCodewords();this.correctErrors(j,U);for(let X=0;X<U;X++)x[X*_+S]=j[X]}return Cr.decode(x)}correctErrors(r,s){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-s)}catch{throw new I}for(let u=0;u<s;u++)r[u]=l[u]}}class rt{constructor(r){this.image=r,this.rectangleDetector=new _t(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new oe;s=this.shiftToModuleCenter(s);const l=s[0],u=s[1],d=s[2],p=s[3];let x=this.transitionsBetween(l,p)+1,_=this.transitionsBetween(d,p)+1;(x&1)===1&&(x+=1),(_&1)===1&&(_+=1),4*x<7*_&&4*_<7*x&&(x=_=Math.max(x,_));let S=rt.sampleGrid(this.image,l,u,d,p,x,_);return new St(S,[l,u,d,p])}static shiftPoint(r,s,l){let u=(s.getX()-r.getX())/(l+1),d=(s.getY()-r.getY())/(l+1);return new Ye(r.getX()+u,r.getY()+d)}static moveAway(r,s,l){let u=r.getX(),d=r.getY();return u<s?u-=1:u+=1,d<l?d-=1:d+=1,new Ye(u,d)}detectSolid1(r){let s=r[0],l=r[1],u=r[3],d=r[2],p=this.transitionsBetween(s,l),x=this.transitionsBetween(l,u),_=this.transitionsBetween(u,d),S=this.transitionsBetween(d,s),E=p,j=[d,s,l,u];return E>x&&(E=x,j[0]=s,j[1]=l,j[2]=u,j[3]=d),E>_&&(E=_,j[0]=l,j[1]=u,j[2]=d,j[3]=s),E>S&&(j[0]=u,j[1]=d,j[2]=s,j[3]=l),j}detectSolid2(r){let s=r[0],l=r[1],u=r[2],d=r[3],p=this.transitionsBetween(s,d),x=rt.shiftPoint(l,u,(p+1)*4),_=rt.shiftPoint(u,l,(p+1)*4),S=this.transitionsBetween(x,s),E=this.transitionsBetween(_,d);return S<E?(r[0]=s,r[1]=l,r[2]=u,r[3]=d):(r[0]=l,r[1]=u,r[2]=d,r[3]=s),r}correctTopRight(r){let s=r[0],l=r[1],u=r[2],d=r[3],p=this.transitionsBetween(s,d),x=this.transitionsBetween(l,d),_=rt.shiftPoint(s,l,(x+1)*4),S=rt.shiftPoint(u,l,(p+1)*4);p=this.transitionsBetween(_,d),x=this.transitionsBetween(S,d);let E=new Ye(d.getX()+(u.getX()-l.getX())/(p+1),d.getY()+(u.getY()-l.getY())/(p+1)),j=new Ye(d.getX()+(s.getX()-l.getX())/(x+1),d.getY()+(s.getY()-l.getY())/(x+1));if(!this.isValid(E))return this.isValid(j)?j:null;if(!this.isValid(j))return E;let U=this.transitionsBetween(_,E)+this.transitionsBetween(S,E),X=this.transitionsBetween(_,j)+this.transitionsBetween(S,j);return U>X?E:j}shiftToModuleCenter(r){let s=r[0],l=r[1],u=r[2],d=r[3],p=this.transitionsBetween(s,d)+1,x=this.transitionsBetween(u,d)+1,_=rt.shiftPoint(s,l,x*4),S=rt.shiftPoint(u,l,p*4);p=this.transitionsBetween(_,d)+1,x=this.transitionsBetween(S,d)+1,(p&1)===1&&(p+=1),(x&1)===1&&(x+=1);let E=(s.getX()+l.getX()+u.getX()+d.getX())/4,j=(s.getY()+l.getY()+u.getY()+d.getY())/4;s=rt.moveAway(s,E,j),l=rt.moveAway(l,E,j),u=rt.moveAway(u,E,j),d=rt.moveAway(d,E,j);let U,X;return _=rt.shiftPoint(s,l,x*4),_=rt.shiftPoint(_,d,p*4),U=rt.shiftPoint(l,s,x*4),U=rt.shiftPoint(U,u,p*4),S=rt.shiftPoint(u,d,x*4),S=rt.shiftPoint(S,l,p*4),X=rt.shiftPoint(d,u,x*4),X=rt.shiftPoint(X,s,p*4),[_,U,S,X]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,l,u,d,p,x){return rn.getInstance().sampleGrid(r,p,x,.5,.5,p-.5,.5,p-.5,x-.5,.5,x-.5,s.getX(),s.getY(),d.getX(),d.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(r,s){let l=Math.trunc(r.getX()),u=Math.trunc(r.getY()),d=Math.trunc(s.getX()),p=Math.trunc(s.getY()),x=Math.abs(p-u)>Math.abs(d-l);if(x){let re=l;l=u,u=re,re=d,d=p,p=re}let _=Math.abs(d-l),S=Math.abs(p-u),E=-_/2,j=u<p?1:-1,U=l<d?1:-1,X=0,te=this.image.get(x?u:l,x?l:u);for(let re=l,ce=u;re!==d;re+=U){let fe=this.image.get(x?ce:re,x?re:ce);if(fe!==te&&(X++,te=fe),E+=S,E>0){if(ce===p)break;ce+=j,E-=_}}return X}}class Qt{constructor(){this.decoder=new Al}decode(r,s=null){let l,u;if(s!=null&&s.has(q.PURE_BARCODE)){const S=Qt.extractPureBits(r.getBlackMatrix());l=this.decoder.decode(S),u=Qt.NO_POINTS}else{const S=new rt(r.getBlackMatrix()).detect();l=this.decoder.decode(S.getBits()),u=S.getPoints()}const d=l.getRawBytes(),p=new Fe(l.getText(),d,8*d.length,u,ae.DATA_MATRIX,R.currentTimeMillis()),x=l.getByteSegments();x!=null&&p.putMetadata(Qe.BYTE_SEGMENTS,x);const _=l.getECLevel();return _!=null&&p.putMetadata(Qe.ERROR_CORRECTION_LEVEL,_),p}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(s==null||l==null)throw new oe;const u=this.moduleSize(s,r);let d=s[1];const p=l[1];let x=s[0];const S=(l[0]-x+1)/u,E=(p-d+1)/u;if(S<=0||E<=0)throw new oe;const j=u/2;d+=j,x+=j;const U=new Ne(S,E);for(let X=0;X<E;X++){const te=d+X*u;for(let re=0;re<S;re++)r.get(x+re*u,te)&&U.set(re,X)}return U}static moduleSize(r,s){const l=s.getWidth();let u=r[0];const d=r[1];for(;u<l&&s.get(u,d);)u++;if(u===l)throw new oe;const p=u-r[0];if(p===0)throw new oe;return p}}Qt.NO_POINTS=[];class El extends Ke{constructor(r=500){super(new Qt,r)}}var ki;(function(D){D[D.L=0]="L",D[D.M=1]="M",D[D.Q=2]="Q",D[D.H=3]="H"})(ki||(ki={}));class It{constructor(r,s,l){this.value=r,this.stringValue=s,this.bits=l,It.FOR_BITS.set(l,this),It.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return It.L;case"M":return It.M;case"Q":return It.Q;case"H":return It.H;default:throw new C(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof It))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=It.FOR_BITS.size)throw new b;return It.FOR_BITS.get(r)}}It.FOR_BITS=new Map,It.FOR_VALUE=new Map,It.L=new It(ki.L,"L",1),It.M=new It(ki.M,"M",0),It.Q=new It(ki.Q,"Q",3),It.H=new It(ki.H,"H",2);class er{constructor(r){this.errorCorrectionLevel=It.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return k.bitCount(r^s)}static decodeFormatInformation(r,s){const l=er.doDecodeFormatInformation(r,s);return l!==null?l:er.doDecodeFormatInformation(r^er.FORMAT_INFO_MASK_QR,s^er.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let l=Number.MAX_SAFE_INTEGER,u=0;for(const d of er.FORMAT_INFO_DECODE_LOOKUP){const p=d[0];if(p===r||p===s)return new er(d[1]);let x=er.numBitsDiffering(r,p);x<l&&(u=d[1],l=x),r!==s&&(x=er.numBitsDiffering(s,p),x<l&&(u=d[1],l=x))}return l<=3?new er(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof er))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}er.FORMAT_INFO_MASK_QR=21522,er.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ue{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const l of s)r+=l.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Z{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class He{constructor(r,s,...l){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=l;let u=0;const d=l[0].getECCodewordsPerBlock(),p=l[0].getECBlocks();for(const x of p)u+=x.getCount()*(x.getDataCodewords()+d);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new Y;try{return this.getVersionForNumber((r-17)/4)}catch{throw new Y}}static getVersionForNumber(r){if(r<1||r>40)throw new b;return He.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<He.VERSION_DECODE_INFO.length;u++){const d=He.VERSION_DECODE_INFO[u];if(d===r)return He.getVersionForNumber(u+7);const p=er.numBitsDiffering(r,d);p<s&&(l=u+7,s=p)}return s<=3?He.getVersionForNumber(l):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new Ne(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){const d=this.alignmentPatternCenters[u]-2;for(let p=0;p<l;p++)u===0&&(p===0||p===l-1)||u===l-1&&p===0||s.setRegion(this.alignmentPatternCenters[p]-2,d,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}He.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),He.VERSIONS=[new He(1,new Int32Array(0),new ue(7,new Z(1,19)),new ue(10,new Z(1,16)),new ue(13,new Z(1,13)),new ue(17,new Z(1,9))),new He(2,Int32Array.from([6,18]),new ue(10,new Z(1,34)),new ue(16,new Z(1,28)),new ue(22,new Z(1,22)),new ue(28,new Z(1,16))),new He(3,Int32Array.from([6,22]),new ue(15,new Z(1,55)),new ue(26,new Z(1,44)),new ue(18,new Z(2,17)),new ue(22,new Z(2,13))),new He(4,Int32Array.from([6,26]),new ue(20,new Z(1,80)),new ue(18,new Z(2,32)),new ue(26,new Z(2,24)),new ue(16,new Z(4,9))),new He(5,Int32Array.from([6,30]),new ue(26,new Z(1,108)),new ue(24,new Z(2,43)),new ue(18,new Z(2,15),new Z(2,16)),new ue(22,new Z(2,11),new Z(2,12))),new He(6,Int32Array.from([6,34]),new ue(18,new Z(2,68)),new ue(16,new Z(4,27)),new ue(24,new Z(4,19)),new ue(28,new Z(4,15))),new He(7,Int32Array.from([6,22,38]),new ue(20,new Z(2,78)),new ue(18,new Z(4,31)),new ue(18,new Z(2,14),new Z(4,15)),new ue(26,new Z(4,13),new Z(1,14))),new He(8,Int32Array.from([6,24,42]),new ue(24,new Z(2,97)),new ue(22,new Z(2,38),new Z(2,39)),new ue(22,new Z(4,18),new Z(2,19)),new ue(26,new Z(4,14),new Z(2,15))),new He(9,Int32Array.from([6,26,46]),new ue(30,new Z(2,116)),new ue(22,new Z(3,36),new Z(2,37)),new ue(20,new Z(4,16),new Z(4,17)),new ue(24,new Z(4,12),new Z(4,13))),new He(10,Int32Array.from([6,28,50]),new ue(18,new Z(2,68),new Z(2,69)),new ue(26,new Z(4,43),new Z(1,44)),new ue(24,new Z(6,19),new Z(2,20)),new ue(28,new Z(6,15),new Z(2,16))),new He(11,Int32Array.from([6,30,54]),new ue(20,new Z(4,81)),new ue(30,new Z(1,50),new Z(4,51)),new ue(28,new Z(4,22),new Z(4,23)),new ue(24,new Z(3,12),new Z(8,13))),new He(12,Int32Array.from([6,32,58]),new ue(24,new Z(2,92),new Z(2,93)),new ue(22,new Z(6,36),new Z(2,37)),new ue(26,new Z(4,20),new Z(6,21)),new ue(28,new Z(7,14),new Z(4,15))),new He(13,Int32Array.from([6,34,62]),new ue(26,new Z(4,107)),new ue(22,new Z(8,37),new Z(1,38)),new ue(24,new Z(8,20),new Z(4,21)),new ue(22,new Z(12,11),new Z(4,12))),new He(14,Int32Array.from([6,26,46,66]),new ue(30,new Z(3,115),new Z(1,116)),new ue(24,new Z(4,40),new Z(5,41)),new ue(20,new Z(11,16),new Z(5,17)),new ue(24,new Z(11,12),new Z(5,13))),new He(15,Int32Array.from([6,26,48,70]),new ue(22,new Z(5,87),new Z(1,88)),new ue(24,new Z(5,41),new Z(5,42)),new ue(30,new Z(5,24),new Z(7,25)),new ue(24,new Z(11,12),new Z(7,13))),new He(16,Int32Array.from([6,26,50,74]),new ue(24,new Z(5,98),new Z(1,99)),new ue(28,new Z(7,45),new Z(3,46)),new ue(24,new Z(15,19),new Z(2,20)),new ue(30,new Z(3,15),new Z(13,16))),new He(17,Int32Array.from([6,30,54,78]),new ue(28,new Z(1,107),new Z(5,108)),new ue(28,new Z(10,46),new Z(1,47)),new ue(28,new Z(1,22),new Z(15,23)),new ue(28,new Z(2,14),new Z(17,15))),new He(18,Int32Array.from([6,30,56,82]),new ue(30,new Z(5,120),new Z(1,121)),new ue(26,new Z(9,43),new Z(4,44)),new ue(28,new Z(17,22),new Z(1,23)),new ue(28,new Z(2,14),new Z(19,15))),new He(19,Int32Array.from([6,30,58,86]),new ue(28,new Z(3,113),new Z(4,114)),new ue(26,new Z(3,44),new Z(11,45)),new ue(26,new Z(17,21),new Z(4,22)),new ue(26,new Z(9,13),new Z(16,14))),new He(20,Int32Array.from([6,34,62,90]),new ue(28,new Z(3,107),new Z(5,108)),new ue(26,new Z(3,41),new Z(13,42)),new ue(30,new Z(15,24),new Z(5,25)),new ue(28,new Z(15,15),new Z(10,16))),new He(21,Int32Array.from([6,28,50,72,94]),new ue(28,new Z(4,116),new Z(4,117)),new ue(26,new Z(17,42)),new ue(28,new Z(17,22),new Z(6,23)),new ue(30,new Z(19,16),new Z(6,17))),new He(22,Int32Array.from([6,26,50,74,98]),new ue(28,new Z(2,111),new Z(7,112)),new ue(28,new Z(17,46)),new ue(30,new Z(7,24),new Z(16,25)),new ue(24,new Z(34,13))),new He(23,Int32Array.from([6,30,54,78,102]),new ue(30,new Z(4,121),new Z(5,122)),new ue(28,new Z(4,47),new Z(14,48)),new ue(30,new Z(11,24),new Z(14,25)),new ue(30,new Z(16,15),new Z(14,16))),new He(24,Int32Array.from([6,28,54,80,106]),new ue(30,new Z(6,117),new Z(4,118)),new ue(28,new Z(6,45),new Z(14,46)),new ue(30,new Z(11,24),new Z(16,25)),new ue(30,new Z(30,16),new Z(2,17))),new He(25,Int32Array.from([6,32,58,84,110]),new ue(26,new Z(8,106),new Z(4,107)),new ue(28,new Z(8,47),new Z(13,48)),new ue(30,new Z(7,24),new Z(22,25)),new ue(30,new Z(22,15),new Z(13,16))),new He(26,Int32Array.from([6,30,58,86,114]),new ue(28,new Z(10,114),new Z(2,115)),new ue(28,new Z(19,46),new Z(4,47)),new ue(28,new Z(28,22),new Z(6,23)),new ue(30,new Z(33,16),new Z(4,17))),new He(27,Int32Array.from([6,34,62,90,118]),new ue(30,new Z(8,122),new Z(4,123)),new ue(28,new Z(22,45),new Z(3,46)),new ue(30,new Z(8,23),new Z(26,24)),new ue(30,new Z(12,15),new Z(28,16))),new He(28,Int32Array.from([6,26,50,74,98,122]),new ue(30,new Z(3,117),new Z(10,118)),new ue(28,new Z(3,45),new Z(23,46)),new ue(30,new Z(4,24),new Z(31,25)),new ue(30,new Z(11,15),new Z(31,16))),new He(29,Int32Array.from([6,30,54,78,102,126]),new ue(30,new Z(7,116),new Z(7,117)),new ue(28,new Z(21,45),new Z(7,46)),new ue(30,new Z(1,23),new Z(37,24)),new ue(30,new Z(19,15),new Z(26,16))),new He(30,Int32Array.from([6,26,52,78,104,130]),new ue(30,new Z(5,115),new Z(10,116)),new ue(28,new Z(19,47),new Z(10,48)),new ue(30,new Z(15,24),new Z(25,25)),new ue(30,new Z(23,15),new Z(25,16))),new He(31,Int32Array.from([6,30,56,82,108,134]),new ue(30,new Z(13,115),new Z(3,116)),new ue(28,new Z(2,46),new Z(29,47)),new ue(30,new Z(42,24),new Z(1,25)),new ue(30,new Z(23,15),new Z(28,16))),new He(32,Int32Array.from([6,34,60,86,112,138]),new ue(30,new Z(17,115)),new ue(28,new Z(10,46),new Z(23,47)),new ue(30,new Z(10,24),new Z(35,25)),new ue(30,new Z(19,15),new Z(35,16))),new He(33,Int32Array.from([6,30,58,86,114,142]),new ue(30,new Z(17,115),new Z(1,116)),new ue(28,new Z(14,46),new Z(21,47)),new ue(30,new Z(29,24),new Z(19,25)),new ue(30,new Z(11,15),new Z(46,16))),new He(34,Int32Array.from([6,34,62,90,118,146]),new ue(30,new Z(13,115),new Z(6,116)),new ue(28,new Z(14,46),new Z(23,47)),new ue(30,new Z(44,24),new Z(7,25)),new ue(30,new Z(59,16),new Z(1,17))),new He(35,Int32Array.from([6,30,54,78,102,126,150]),new ue(30,new Z(12,121),new Z(7,122)),new ue(28,new Z(12,47),new Z(26,48)),new ue(30,new Z(39,24),new Z(14,25)),new ue(30,new Z(22,15),new Z(41,16))),new He(36,Int32Array.from([6,24,50,76,102,128,154]),new ue(30,new Z(6,121),new Z(14,122)),new ue(28,new Z(6,47),new Z(34,48)),new ue(30,new Z(46,24),new Z(10,25)),new ue(30,new Z(2,15),new Z(64,16))),new He(37,Int32Array.from([6,28,54,80,106,132,158]),new ue(30,new Z(17,122),new Z(4,123)),new ue(28,new Z(29,46),new Z(14,47)),new ue(30,new Z(49,24),new Z(10,25)),new ue(30,new Z(24,15),new Z(46,16))),new He(38,Int32Array.from([6,32,58,84,110,136,162]),new ue(30,new Z(4,122),new Z(18,123)),new ue(28,new Z(13,46),new Z(32,47)),new ue(30,new Z(48,24),new Z(14,25)),new ue(30,new Z(42,15),new Z(32,16))),new He(39,Int32Array.from([6,26,54,82,110,138,166]),new ue(30,new Z(20,117),new Z(4,118)),new ue(28,new Z(40,47),new Z(7,48)),new ue(30,new Z(43,24),new Z(22,25)),new ue(30,new Z(10,15),new Z(67,16))),new He(40,Int32Array.from([6,30,58,86,114,142,170]),new ue(30,new Z(19,118),new Z(6,119)),new ue(28,new Z(18,47),new Z(31,48)),new ue(30,new Z(34,24),new Z(34,25)),new ue(30,new Z(20,15),new Z(61,16)))];var un;(function(D){D[D.DATA_MASK_000=0]="DATA_MASK_000",D[D.DATA_MASK_001=1]="DATA_MASK_001",D[D.DATA_MASK_010=2]="DATA_MASK_010",D[D.DATA_MASK_011=3]="DATA_MASK_011",D[D.DATA_MASK_100=4]="DATA_MASK_100",D[D.DATA_MASK_101=5]="DATA_MASK_101",D[D.DATA_MASK_110=6]="DATA_MASK_110",D[D.DATA_MASK_111=7]="DATA_MASK_111"})(un||(un={}));class tr{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let l=0;l<s;l++)for(let u=0;u<s;u++)this.isMasked(l,u)&&r.flip(u,l)}}tr.values=new Map([[un.DATA_MASK_000,new tr(un.DATA_MASK_000,(D,r)=>(D+r&1)===0)],[un.DATA_MASK_001,new tr(un.DATA_MASK_001,(D,r)=>(D&1)===0)],[un.DATA_MASK_010,new tr(un.DATA_MASK_010,(D,r)=>r%3===0)],[un.DATA_MASK_011,new tr(un.DATA_MASK_011,(D,r)=>(D+r)%3===0)],[un.DATA_MASK_100,new tr(un.DATA_MASK_100,(D,r)=>(Math.floor(D/2)+Math.floor(r/3)&1)===0)],[un.DATA_MASK_101,new tr(un.DATA_MASK_101,(D,r)=>D*r%6===0)],[un.DATA_MASK_110,new tr(un.DATA_MASK_110,(D,r)=>D*r%6<3)],[un.DATA_MASK_111,new tr(un.DATA_MASK_111,(D,r)=>(D+r+D*r%3&1)===0)]]);class jo{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new Y;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let d=0;d<6;d++)r=this.copyBit(d,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let d=5;d>=0;d--)r=this.copyBit(8,d,r);const s=this.bitMatrix.getHeight();let l=0;const u=s-7;for(let d=s-1;d>=u;d--)l=this.copyBit(8,d,l);for(let d=s-8;d<s;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=er.decodeFormatInformation(r,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Y}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return He.getVersionForNumber(s);let l=0;const u=r-11;for(let p=5;p>=0;p--)for(let x=r-9;x>=u;x--)l=this.copyBit(x,p,l);let d=He.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;l=0;for(let p=5;p>=0;p--)for(let x=r-9;x>=u;x--)l=this.copyBit(p,x,l);if(d=He.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;throw new Y}copyBit(r,s,l){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?l<<1|1:l<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),l=tr.values.get(r.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);const d=s.buildFunctionPattern();let p=!0;const x=new Uint8Array(s.getTotalCodewords());let _=0,S=0,E=0;for(let j=u-1;j>0;j-=2){j===6&&j--;for(let U=0;U<u;U++){const X=p?u-1-U:U;for(let te=0;te<2;te++)d.get(j-te,X)||(E++,S<<=1,this.bitMatrix.get(j-te,X)&&(S|=1),E===8&&(x[_++]=S,E=0,S=0))}p=!p}if(_!==s.getTotalCodewords())throw new Y;return x}remask(){if(this.parsedFormatInfo===null)return;const r=tr.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,l=r.getWidth();s<l;s++)for(let u=s+1,d=r.getHeight();u<d;u++)r.get(s,u)!==r.get(u,s)&&(r.flip(u,s),r.flip(s,u))}}class Bo{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,l){if(r.length!==s.getTotalCodewords())throw new b;const u=s.getECBlocksForLevel(l);let d=0;const p=u.getECBlocks();for(const te of p)d+=te.getCount();const x=new Array(d);let _=0;for(const te of p)for(let re=0;re<te.getCount();re++){const ce=te.getDataCodewords(),fe=u.getECCodewordsPerBlock()+ce;x[_++]=new Bo(ce,new Uint8Array(fe))}const S=x[0].codewords.length;let E=x.length-1;for(;E>=0&&x[E].codewords.length!==S;)E--;E++;const j=S-u.getECCodewordsPerBlock();let U=0;for(let te=0;te<j;te++)for(let re=0;re<_;re++)x[re].codewords[te]=r[U++];for(let te=E;te<_;te++)x[te].codewords[j]=r[U++];const X=x[0].codewords.length;for(let te=j;te<X;te++)for(let re=0;re<_;re++){const ce=re<E?te:te+1;x[re].codewords[ce]=r[U++]}return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var nr;(function(D){D[D.TERMINATOR=0]="TERMINATOR",D[D.NUMERIC=1]="NUMERIC",D[D.ALPHANUMERIC=2]="ALPHANUMERIC",D[D.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",D[D.BYTE=4]="BYTE",D[D.ECI=5]="ECI",D[D.KANJI=6]="KANJI",D[D.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",D[D.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",D[D.HANZI=9]="HANZI"})(nr||(nr={}));class lt{constructor(r,s,l,u){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=l,this.bits=u,lt.FOR_BITS.set(u,this),lt.FOR_VALUE.set(r,this)}static forBits(r){const s=lt.FOR_BITS.get(r);if(s===void 0)throw new b;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let l;return s<=9?l=0:s<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof lt))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}lt.FOR_BITS=new Map,lt.FOR_VALUE=new Map,lt.TERMINATOR=new lt(nr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),lt.NUMERIC=new lt(nr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),lt.ALPHANUMERIC=new lt(nr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),lt.STRUCTURED_APPEND=new lt(nr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),lt.BYTE=new lt(nr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),lt.ECI=new lt(nr.ECI,"ECI",Int32Array.from([0,0,0]),7),lt.KANJI=new lt(nr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),lt.FNC1_FIRST_POSITION=new lt(nr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),lt.FNC1_SECOND_POSITION=new lt(nr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),lt.HANZI=new lt(nr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class an{static decode(r,s,l,u){const d=new Ds(r);let p=new be;const x=new Array;let _=-1,S=-1;try{let E=null,j=!1,U;do{if(d.available()<4)U=lt.TERMINATOR;else{const X=d.readBits(4);U=lt.forBits(X)}switch(U){case lt.TERMINATOR:break;case lt.FNC1_FIRST_POSITION:case lt.FNC1_SECOND_POSITION:j=!0;break;case lt.STRUCTURED_APPEND:if(d.available()<16)throw new Y;_=d.readBits(8),S=d.readBits(8);break;case lt.ECI:const X=an.parseECIValue(d);if(E=M.getCharacterSetECIByValue(X),E===null)throw new Y;break;case lt.HANZI:const te=d.readBits(4),re=d.readBits(U.getCharacterCountBits(s));te===an.GB2312_SUBSET&&an.decodeHanziSegment(d,p,re);break;default:const ce=d.readBits(U.getCharacterCountBits(s));switch(U){case lt.NUMERIC:an.decodeNumericSegment(d,p,ce);break;case lt.ALPHANUMERIC:an.decodeAlphanumericSegment(d,p,ce,j);break;case lt.BYTE:an.decodeByteSegment(d,p,ce,E,x,u);break;case lt.KANJI:an.decodeKanjiSegment(d,p,ce);break;default:throw new Y}break}}while(U!==lt.TERMINATOR)}catch{throw new Y}return new Ue(r,p.toString(),x.length===0?null:x,l===null?null:l.toString(),_,S)}static decodeHanziSegment(r,s,l){if(l*13>r.available())throw new Y;const u=new Uint8Array(2*l);let d=0;for(;l>0;){const p=r.readBits(13);let x=p/96<<8&4294967295|p%96;x<959?x+=41377:x+=42657,u[d]=x>>8&255,u[d+1]=x&255,d+=2,l--}try{s.append($.decode(u,se.GB2312))}catch(p){throw new Y(p)}}static decodeKanjiSegment(r,s,l){if(l*13>r.available())throw new Y;const u=new Uint8Array(2*l);let d=0;for(;l>0;){const p=r.readBits(13);let x=p/192<<8&4294967295|p%192;x<7936?x+=33088:x+=49472,u[d]=x>>8,u[d+1]=x,d+=2,l--}try{s.append($.decode(u,se.SHIFT_JIS))}catch(p){throw new Y(p)}}static decodeByteSegment(r,s,l,u,d,p){if(8*l>r.available())throw new Y;const x=new Uint8Array(l);for(let S=0;S<l;S++)x[S]=r.readBits(8);let _;u===null?_=se.guessEncoding(x,p):_=u.getName();try{s.append($.decode(x,_))}catch(S){throw new Y(S)}d.push(x)}static toAlphaNumericChar(r){if(r>=an.ALPHANUMERIC_CHARS.length)throw new Y;return an.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,l,u){const d=s.length();for(;l>1;){if(r.available()<11)throw new Y;const p=r.readBits(11);s.append(an.toAlphaNumericChar(Math.floor(p/45))),s.append(an.toAlphaNumericChar(p%45)),l-=2}if(l===1){if(r.available()<6)throw new Y;s.append(an.toAlphaNumericChar(r.readBits(6)))}if(u)for(let p=d;p<s.length();p++)s.charAt(p)==="%"&&(p<s.length()-1&&s.charAt(p+1)==="%"?s.deleteCharAt(p+1):s.setCharAt(p,""))}static decodeNumericSegment(r,s,l){for(;l>=3;){if(r.available()<10)throw new Y;const u=r.readBits(10);if(u>=1e3)throw new Y;s.append(an.toAlphaNumericChar(Math.floor(u/100))),s.append(an.toAlphaNumericChar(Math.floor(u/10)%10)),s.append(an.toAlphaNumericChar(u%10)),l-=3}if(l===2){if(r.available()<7)throw new Y;const u=r.readBits(7);if(u>=100)throw new Y;s.append(an.toAlphaNumericChar(Math.floor(u/10))),s.append(an.toAlphaNumericChar(u%10))}else if(l===1){if(r.available()<4)throw new Y;const u=r.readBits(4);if(u>=10)throw new Y;s.append(an.toAlphaNumericChar(u))}}static parseECIValue(r){const s=r.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const l=r.readBits(8);return(s&63)<<8&4294967295|l}if((s&224)===192){const l=r.readBits(16);return(s&31)<<16&4294967295|l}throw new Y}}an.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",an.GB2312_SUBSET=1;class Fo{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class Nl{constructor(){this.rsDecoder=new Vn(tt.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(Ne.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const l=new jo(r);let u=null;try{return this.decodeBitMatrixParser(l,s)}catch(d){u=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,s);return d.setOther(new Fo(!0)),d}catch(d){throw u!==null?u:d}}decodeBitMatrixParser(r,s){const l=r.readVersion(),u=r.readFormatInformation().getErrorCorrectionLevel(),d=r.readCodewords(),p=Bo.getDataBlocks(d,l,u);let x=0;for(const E of p)x+=E.getNumDataCodewords();const _=new Uint8Array(x);let S=0;for(const E of p){const j=E.getCodewords(),U=E.getNumDataCodewords();this.correctErrors(j,U);for(let X=0;X<U;X++)_[S++]=j[X]}return an.decode(_,l,u,s)}correctErrors(r,s){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-s)}catch{throw new I}for(let u=0;u<s;u++)r[u]=l[u]}}class zo extends Ye{constructor(r,s,l){super(r,s),this.estimatedModuleSize=l}aboutEquals(r,s,l){if(Math.abs(s-this.getY())<=r&&Math.abs(l-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,s,l){const u=(this.getX()+s)/2,d=(this.getY()+r)/2,p=(this.estimatedModuleSize+l)/2;return new zo(u,d,p)}}class ls{constructor(r,s,l,u,d,p,x){this.image=r,this.startX=s,this.startY=l,this.width=u,this.height=d,this.moduleSize=p,this.resultPointCallback=x,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,l=this.width,u=r+l,d=this.startY+s/2,p=new Int32Array(3),x=this.image;for(let _=0;_<s;_++){const S=d+(_&1?-Math.floor((_+1)/2):Math.floor((_+1)/2));p[0]=0,p[1]=0,p[2]=0;let E=r;for(;E<u&&!x.get(E,S);)E++;let j=0;for(;E<u;){if(x.get(E,S))if(j===1)p[1]++;else if(j===2){if(this.foundPatternCross(p)){const U=this.handlePossibleCenter(p,S,E);if(U!==null)return U}p[0]=p[2],p[1]=1,p[2]=0,j=1}else p[++j]++;else j===1&&j++,p[j]++;E++}if(this.foundPatternCross(p)){const U=this.handlePossibleCenter(p,S,u);if(U!==null)return U}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new oe}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,l=s/2;for(let u=0;u<3;u++)if(Math.abs(s-r[u])>=l)return!1;return!0}crossCheckVertical(r,s,l,u){const d=this.image,p=d.getHeight(),x=this.crossCheckStateCount;x[0]=0,x[1]=0,x[2]=0;let _=r;for(;_>=0&&d.get(s,_)&&x[1]<=l;)x[1]++,_--;if(_<0||x[1]>l)return NaN;for(;_>=0&&!d.get(s,_)&&x[0]<=l;)x[0]++,_--;if(x[0]>l)return NaN;for(_=r+1;_<p&&d.get(s,_)&&x[1]<=l;)x[1]++,_++;if(_===p||x[1]>l)return NaN;for(;_<p&&!d.get(s,_)&&x[2]<=l;)x[2]++,_++;if(x[2]>l)return NaN;const S=x[0]+x[1]+x[2];return 5*Math.abs(S-u)>=2*u?NaN:this.foundPatternCross(x)?ls.centerFromEnd(x,_):NaN}handlePossibleCenter(r,s,l){const u=r[0]+r[1]+r[2],d=ls.centerFromEnd(r,l),p=this.crossCheckVertical(s,d,2*r[1],u);if(!isNaN(p)){const x=(r[0]+r[1]+r[2])/3;for(const S of this.possibleCenters)if(S.aboutEquals(x,p,d))return S.combineEstimate(p,d,x);const _=new zo(d,p,x);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null}}class Ca extends Ye{constructor(r,s,l,u){super(r,s),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,l){if(Math.abs(s-this.getY())<=r&&Math.abs(l-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,s,l){const u=this.count+1,d=(this.count*this.getX()+s)/u,p=(this.count*this.getY()+r)/u,x=(this.count*this.estimatedModuleSize+l)/u;return new Ca(d,p,x,u)}}class Tl{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class jn{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(q.TRY_HARDER)!==void 0,l=r!=null&&r.get(q.PURE_BARCODE)!==void 0,u=this.image,d=u.getHeight(),p=u.getWidth();let x=Math.floor(3*d/(4*jn.MAX_MODULES));(x<jn.MIN_SKIP||s)&&(x=jn.MIN_SKIP);let _=!1;const S=new Int32Array(5);for(let j=x-1;j<d&&!_;j+=x){S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0;let U=0;for(let X=0;X<p;X++)if(u.get(X,j))(U&1)===1&&U++,S[U]++;else if(U&1)S[U]++;else if(U===4)if(jn.foundPatternCross(S)){if(this.handlePossibleCenter(S,j,X,l)===!0)if(x=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{const re=this.findRowSkip();re>S[2]&&(j+=re-S[2]-x,X=p-1)}else{S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,U=3;continue}U=0,S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0}else S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,U=3;else S[++U]++;jn.foundPatternCross(S)&&this.handlePossibleCenter(S,j,p,l)===!0&&(x=S[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}const E=this.selectBestPatterns();return Ye.orderBestPatterns(E),new Tl(E)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let d=0;d<5;d++){const p=r[d];if(p===0)return!1;s+=p}if(s<7)return!1;const l=s/7,u=l/2;return Math.abs(l-r[0])<u&&Math.abs(l-r[1])<u&&Math.abs(3*l-r[2])<3*u&&Math.abs(l-r[3])<u&&Math.abs(l-r[4])<u}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,l,u){const d=this.getCrossCheckStateCount();let p=0;const x=this.image;for(;r>=p&&s>=p&&x.get(s-p,r-p);)d[2]++,p++;if(r<p||s<p)return!1;for(;r>=p&&s>=p&&!x.get(s-p,r-p)&&d[1]<=l;)d[1]++,p++;if(r<p||s<p||d[1]>l)return!1;for(;r>=p&&s>=p&&x.get(s-p,r-p)&&d[0]<=l;)d[0]++,p++;if(d[0]>l)return!1;const _=x.getHeight(),S=x.getWidth();for(p=1;r+p<_&&s+p<S&&x.get(s+p,r+p);)d[2]++,p++;if(r+p>=_||s+p>=S)return!1;for(;r+p<_&&s+p<S&&!x.get(s+p,r+p)&&d[3]<l;)d[3]++,p++;if(r+p>=_||s+p>=S||d[3]>=l)return!1;for(;r+p<_&&s+p<S&&x.get(s+p,r+p)&&d[4]<l;)d[4]++,p++;if(d[4]>=l)return!1;const E=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(E-u)<2*u&&jn.foundPatternCross(d)}crossCheckVertical(r,s,l,u){const d=this.image,p=d.getHeight(),x=this.getCrossCheckStateCount();let _=r;for(;_>=0&&d.get(s,_);)x[2]++,_--;if(_<0)return NaN;for(;_>=0&&!d.get(s,_)&&x[1]<=l;)x[1]++,_--;if(_<0||x[1]>l)return NaN;for(;_>=0&&d.get(s,_)&&x[0]<=l;)x[0]++,_--;if(x[0]>l)return NaN;for(_=r+1;_<p&&d.get(s,_);)x[2]++,_++;if(_===p)return NaN;for(;_<p&&!d.get(s,_)&&x[3]<l;)x[3]++,_++;if(_===p||x[3]>=l)return NaN;for(;_<p&&d.get(s,_)&&x[4]<l;)x[4]++,_++;if(x[4]>=l)return NaN;const S=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(S-u)>=2*u?NaN:jn.foundPatternCross(x)?jn.centerFromEnd(x,_):NaN}crossCheckHorizontal(r,s,l,u){const d=this.image,p=d.getWidth(),x=this.getCrossCheckStateCount();let _=r;for(;_>=0&&d.get(_,s);)x[2]++,_--;if(_<0)return NaN;for(;_>=0&&!d.get(_,s)&&x[1]<=l;)x[1]++,_--;if(_<0||x[1]>l)return NaN;for(;_>=0&&d.get(_,s)&&x[0]<=l;)x[0]++,_--;if(x[0]>l)return NaN;for(_=r+1;_<p&&d.get(_,s);)x[2]++,_++;if(_===p)return NaN;for(;_<p&&!d.get(_,s)&&x[3]<l;)x[3]++,_++;if(_===p||x[3]>=l)return NaN;for(;_<p&&d.get(_,s)&&x[4]<l;)x[4]++,_++;if(x[4]>=l)return NaN;const S=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(S-u)>=u?NaN:jn.foundPatternCross(x)?jn.centerFromEnd(x,_):NaN}handlePossibleCenter(r,s,l,u){const d=r[0]+r[1]+r[2]+r[3]+r[4];let p=jn.centerFromEnd(r,l),x=this.crossCheckVertical(s,Math.floor(p),r[2],d);if(!isNaN(x)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(x),r[2],d),!isNaN(p)&&(!u||this.crossCheckDiagonal(Math.floor(x),Math.floor(p),r[2],d)))){const _=d/7;let S=!1;const E=this.possibleCenters;for(let j=0,U=E.length;j<U;j++){const X=E[j];if(X.aboutEquals(_,x,p)){E[j]=X.combineEstimate(x,p,_),S=!0;break}}if(!S){const j=new Ca(p,x,_);E.push(j),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(j)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const l of this.possibleCenters)if(l.getCount()>=jn.CENTER_QUORUM)if(s==null)s=l;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-l.getX())-Math.abs(s.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const l=this.possibleCenters.length;for(const p of this.possibleCenters)p.getCount()>=jn.CENTER_QUORUM&&(r++,s+=p.getEstimatedModuleSize());if(r<3)return!1;const u=s/l;let d=0;for(const p of this.possibleCenters)d+=Math.abs(p.getEstimatedModuleSize()-u);return d<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new oe;const s=this.possibleCenters;let l;if(r>3){let u=0,d=0;for(const _ of this.possibleCenters){const S=_.getEstimatedModuleSize();u+=S,d+=S*S}l=u/r;let p=Math.sqrt(d/r-l*l);s.sort((_,S)=>{const E=Math.abs(S.getEstimatedModuleSize()-l),j=Math.abs(_.getEstimatedModuleSize()-l);return E<j?-1:E>j?1:0});const x=Math.max(.2*l,p);for(let _=0;_<s.length&&s.length>3;_++){const S=s[_];Math.abs(S.getEstimatedModuleSize()-l)>x&&(s.splice(_,1),_--)}}if(s.length>3){let u=0;for(const d of s)u+=d.getEstimatedModuleSize();l=u/s.length,s.sort((d,p)=>{if(p.getCount()===d.getCount()){const x=Math.abs(p.getEstimatedModuleSize()-l),_=Math.abs(d.getEstimatedModuleSize()-l);return x<_?1:x>_?-1:0}else return p.getCount()-d.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}jn.CENTER_QUORUM=2,jn.MIN_SKIP=3,jn.MAX_MODULES=57;class wt{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(q.NEED_RESULT_POINT_CALLBACK);const l=new jn(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(l)}processFinderPatternInfo(r){const s=r.getTopLeft(),l=r.getTopRight(),u=r.getBottomLeft(),d=this.calculateModuleSize(s,l,u);if(d<1)throw new oe("No pattern found in proccess finder.");const p=wt.computeDimension(s,l,u,d),x=He.getProvisionalVersionForDimension(p),_=x.getDimensionForVersion()-7;let S=null;if(x.getAlignmentPatternCenters().length>0){const X=l.getX()-s.getX()+u.getX(),te=l.getY()-s.getY()+u.getY(),re=1-3/_,ce=Math.floor(s.getX()+re*(X-s.getX())),fe=Math.floor(s.getY()+re*(te-s.getY()));for(let Me=4;Me<=16;Me<<=1)try{S=this.findAlignmentInRegion(d,ce,fe,Me);break}catch(Re){if(!(Re instanceof oe))throw Re}}const E=wt.createTransform(s,l,u,S,p),j=wt.sampleGrid(this.image,E,p);let U;return S===null?U=[u,s,l]:U=[u,s,l,S],new St(j,U)}static createTransform(r,s,l,u,d){const p=d-3.5;let x,_,S,E;return u!==null?(x=u.getX(),_=u.getY(),S=p-3,E=S):(x=s.getX()-r.getX()+l.getX(),_=s.getY()-r.getY()+l.getY(),S=p,E=p),Kt.quadrilateralToQuadrilateral(3.5,3.5,p,3.5,S,E,3.5,p,r.getX(),r.getY(),s.getX(),s.getY(),x,_,l.getX(),l.getY())}static sampleGrid(r,s,l){return rn.getInstance().sampleGridWithTransform(r,l,l,s)}static computeDimension(r,s,l,u){const d=ft.round(Ye.distance(r,s)/u),p=ft.round(Ye.distance(r,l)/u);let x=Math.floor((d+p)/2)+7;switch(x&3){case 0:x++;break;case 2:x--;break;case 3:throw new oe("Dimensions could be not found.")}return x}calculateModuleSize(r,s,l){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,l))/2}calculateModuleSizeOneWay(r,s){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,l,u){let d=this.sizeOfBlackWhiteBlackRun(r,s,l,u),p=1,x=r-(l-r);x<0?(p=r/(r-x),x=0):x>=this.image.getWidth()&&(p=(this.image.getWidth()-1-r)/(x-r),x=this.image.getWidth()-1);let _=Math.floor(s-(u-s)*p);return p=1,_<0?(p=s/(s-_),_=0):_>=this.image.getHeight()&&(p=(this.image.getHeight()-1-s)/(_-s),_=this.image.getHeight()-1),x=Math.floor(r+(x-r)*p),d+=this.sizeOfBlackWhiteBlackRun(r,s,x,_),d-1}sizeOfBlackWhiteBlackRun(r,s,l,u){const d=Math.abs(u-s)>Math.abs(l-r);if(d){let X=r;r=s,s=X,X=l,l=u,u=X}const p=Math.abs(l-r),x=Math.abs(u-s);let _=-p/2;const S=r<l?1:-1,E=s<u?1:-1;let j=0;const U=l+S;for(let X=r,te=s;X!==U;X+=S){const re=d?te:X,ce=d?X:te;if(j===1===this.image.get(re,ce)){if(j===2)return ft.distance(X,te,r,s);j++}if(_+=x,_>0){if(te===u)break;te+=E,_-=p}}return j===2?ft.distance(l+S,u,r,s):NaN}findAlignmentInRegion(r,s,l,u){const d=Math.floor(u*r),p=Math.max(0,s-d),x=Math.min(this.image.getWidth()-1,s+d);if(x-p<r*3)throw new oe("Alignment top exceeds estimated module size.");const _=Math.max(0,l-d),S=Math.min(this.image.getHeight()-1,l+d);if(S-_<r*3)throw new oe("Alignment bottom exceeds estimated module size.");return new ls(this.image,p,_,x-p,S-_,r,this.resultPointCallback).find()}}class Wn{constructor(){this.decoder=new Nl}getDecoder(){return this.decoder}decode(r,s){let l,u;if(s!=null&&s.get(q.PURE_BARCODE)!==void 0){const _=Wn.extractPureBits(r.getBlackMatrix());l=this.decoder.decodeBitMatrix(_,s),u=Wn.NO_POINTS}else{const _=new wt(r.getBlackMatrix()).detect(s);l=this.decoder.decodeBitMatrix(_.getBits(),s),u=_.getPoints()}l.getOther()instanceof Fo&&l.getOther().applyMirroredCorrection(u);const d=new Fe(l.getText(),l.getRawBytes(),void 0,u,ae.QR_CODE,void 0),p=l.getByteSegments();p!==null&&d.putMetadata(Qe.BYTE_SEGMENTS,p);const x=l.getECLevel();return x!==null&&d.putMetadata(Qe.ERROR_CORRECTION_LEVEL,x),l.hasStructuredAppend()&&(d.putMetadata(Qe.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(Qe.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(s===null||l===null)throw new oe;const u=this.moduleSize(s,r);let d=s[1],p=l[1],x=s[0],_=l[0];if(x>=_||d>=p)throw new oe;if(p-d!==_-x&&(_=x+(p-d),_>=r.getWidth()))throw new oe;const S=Math.round((_-x+1)/u),E=Math.round((p-d+1)/u);if(S<=0||E<=0)throw new oe;if(E!==S)throw new oe;const j=Math.floor(u/2);d+=j,x+=j;const U=x+Math.floor((S-1)*u)-_;if(U>0){if(U>j)throw new oe;x-=U}const X=d+Math.floor((E-1)*u)-p;if(X>0){if(X>j)throw new oe;d-=X}const te=new Ne(S,E);for(let re=0;re<E;re++){const ce=d+Math.floor(re*u);for(let fe=0;fe<S;fe++)r.get(x+Math.floor(fe*u),ce)&&te.set(fe,re)}return te}static moduleSize(r,s){const l=s.getHeight(),u=s.getWidth();let d=r[0],p=r[1],x=!0,_=0;for(;d<u&&p<l;){if(x!==s.get(d,p)){if(++_===5)break;x=!x}d++,p++}if(d===u||p===l)throw new oe;return(d-r[0])/7}}Wn.NO_POINTS=new Array;class Ge{PDF417Common(){}static getBitCountSum(r){return ft.sum(r)}static toIntArray(r){if(r==null||!r.length)return Ge.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let l=0;for(const u of r)s[l++]=u;return s}static getCodeword(r){const s=P.binarySearch(Ge.SYMBOL_TABLE,r&262143);return s<0?-1:(Ge.CODEWORD_TABLE[s]-1)%Ge.NUMBER_OF_CODEWORDS}}Ge.NUMBER_OF_CODEWORDS=929,Ge.MAX_CODEWORDS_IN_BARCODE=Ge.NUMBER_OF_CODEWORDS-1,Ge.MIN_ROWS_IN_BARCODE=3,Ge.MAX_ROWS_IN_BARCODE=90,Ge.MODULES_IN_CODEWORD=17,Ge.MODULES_IN_STOP_PATTERN=18,Ge.BARS_IN_MODULE=8,Ge.EMPTY_INT_ARRAY=new Int32Array([]),Ge.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ge.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class du{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class bt{static detectMultiple(r,s,l){let u=r.getBlackMatrix(),d=bt.detect(l,u);return d.length||(u=u.clone(),u.rotate180(),d=bt.detect(l,u)),new du(u,d)}static detect(r,s){const l=new Array;let u=0,d=0,p=!1;for(;u<s.getHeight();){const x=bt.findVertices(s,u,d);if(x[0]==null&&x[3]==null){if(!p)break;p=!1,d=0;for(const _ of l)_[1]!=null&&(u=Math.trunc(Math.max(u,_[1].getY()))),_[3]!=null&&(u=Math.max(u,Math.trunc(_[3].getY())));u+=bt.ROW_STEP;continue}if(p=!0,l.push(x),!r)break;x[2]!=null?(d=Math.trunc(x[2].getX()),u=Math.trunc(x[2].getY())):(d=Math.trunc(x[4].getX()),u=Math.trunc(x[4].getY()))}return l}static findVertices(r,s,l){const u=r.getHeight(),d=r.getWidth(),p=new Array(8);return bt.copyToResult(p,bt.findRowsWithPattern(r,u,d,s,l,bt.START_PATTERN),bt.INDEXES_START_PATTERN),p[4]!=null&&(l=Math.trunc(p[4].getX()),s=Math.trunc(p[4].getY())),bt.copyToResult(p,bt.findRowsWithPattern(r,u,d,s,l,bt.STOP_PATTERN),bt.INDEXES_STOP_PATTERN),p}static copyToResult(r,s,l){for(let u=0;u<l.length;u++)r[l[u]]=s[u]}static findRowsWithPattern(r,s,l,u,d,p){const x=new Array(4);let _=!1;const S=new Int32Array(p.length);for(;u<s;u+=bt.ROW_STEP){let j=bt.findGuardPattern(r,d,u,l,!1,p,S);if(j!=null){for(;u>0;){const U=bt.findGuardPattern(r,d,--u,l,!1,p,S);if(U!=null)j=U;else{u++;break}}x[0]=new Ye(j[0],u),x[1]=new Ye(j[1],u),_=!0;break}}let E=u+1;if(_){let j=0,U=Int32Array.from([Math.trunc(x[0].getX()),Math.trunc(x[1].getX())]);for(;E<s;E++){const X=bt.findGuardPattern(r,U[0],E,l,!1,p,S);if(X!=null&&Math.abs(U[0]-X[0])<bt.MAX_PATTERN_DRIFT&&Math.abs(U[1]-X[1])<bt.MAX_PATTERN_DRIFT)U=X,j=0;else{if(j>bt.SKIPPED_ROW_COUNT_MAX)break;j++}}E-=j+1,x[2]=new Ye(U[0],E),x[3]=new Ye(U[1],E)}return E-u<bt.BARCODE_MIN_HEIGHT&&P.fill(x,null),x}static findGuardPattern(r,s,l,u,d,p,x){P.fillWithin(x,0,x.length,0);let _=s,S=0;for(;r.get(_,l)&&_>0&&S++<bt.MAX_PIXEL_DRIFT;)_--;let E=_,j=0,U=p.length;for(let X=d;E<u;E++)if(r.get(E,l)!==X)x[j]++;else{if(j===U-1){if(bt.patternMatchVariance(x,p,bt.MAX_INDIVIDUAL_VARIANCE)<bt.MAX_AVG_VARIANCE)return new Int32Array([_,E]);_+=x[0]+x[1],R.arraycopy(x,2,x,0,j-1),x[j-1]=0,x[j]=0,j--}else j++;x[j]=1,X=!X}return j===U-1&&bt.patternMatchVariance(x,p,bt.MAX_INDIVIDUAL_VARIANCE)<bt.MAX_AVG_VARIANCE?new Int32Array([_,E-1]):null}static patternMatchVariance(r,s,l){let u=r.length,d=0,p=0;for(let S=0;S<u;S++)d+=r[S],p+=s[S];if(d<p)return 1/0;let x=d/p;l*=x;let _=0;for(let S=0;S<u;S++){let E=r[S],j=s[S]*x,U=E>j?E-j:j-E;if(U>l)return 1/0;_+=U}return _/d}}bt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),bt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),bt.MAX_AVG_VARIANCE=.42,bt.MAX_INDIVIDUAL_VARIANCE=.8,bt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),bt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),bt.MAX_PIXEL_DRIFT=3,bt.MAX_PATTERN_DRIFT=5,bt.SKIPPED_ROW_COUNT_MAX=25,bt.ROW_STEP=5,bt.BARCODE_MIN_HEIGHT=10;class Rn{constructor(r,s){if(s.length===0)throw new b;this.field=r;let l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),R.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let u=0;for(let d of this.coefficients)u=this.field.add(u,d);return u}let s=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)s=this.field.add(this.field.multiply(r,s),this.coefficients[u]);return s}add(r){if(!this.field.equals(r.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,l=r.coefficients;if(s.length>l.length){let p=s;s=l,l=p}let u=new Int32Array(l.length),d=l.length-s.length;R.arraycopy(l,0,u,0,d);for(let p=d;p<l.length;p++)u[p]=this.field.add(s[p-d],l[p]);return new Rn(this.field,u)}subtract(r){if(!this.field.equals(r.field))throw new b("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof Rn?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new Rn(this.field,new Int32Array([0]));let s=this.coefficients,l=s.length,u=r.coefficients,d=u.length,p=new Int32Array(l+d-1);for(let x=0;x<l;x++){let _=s[x];for(let S=0;S<d;S++)p[x+S]=this.field.add(p[x+S],this.field.multiply(_,u[S]))}return new Rn(this.field,p)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let l=0;l<r;l++)s[l]=this.field.subtract(0,this.coefficients[l]);return new Rn(this.field,s)}multiplyScalar(r){if(r===0)return new Rn(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,l=new Int32Array(s);for(let u=0;u<s;u++)l[u]=this.field.multiply(this.coefficients[u],r);return new Rn(this.field,l)}multiplyByMonomial(r,s){if(r<0)throw new b;if(s===0)return new Rn(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+r);for(let d=0;d<l;d++)u[d]=this.field.multiply(this.coefficients[d],s);return new Rn(this.field,u)}toString(){let r=new be;for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);l!==0&&(l<0?(r.append(" - "),l=-l):r.length()>0&&r.append(" + "),(s===0||l!==1)&&r.append(l),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class Il{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new b;return this.logTable[r]}inverse(r){if(r===0)throw new Rt;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class Mi extends Il{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let l=1;for(let u=0;u<r;u++)this.expTable[u]=l,l=l*s%r;for(let u=0;u<r-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new Rn(this,new Int32Array([0])),this.one=new Rn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new b;if(s===0)return this.zero;let l=new Int32Array(r+1);return l[0]=s,new Rn(this,l)}}Mi.PDF417_GF=new Mi(Ge.NUMBER_OF_CODEWORDS,3);class Sa{constructor(){this.field=Mi.PDF417_GF}decode(r,s,l){let u=new Rn(this.field,r),d=new Int32Array(s),p=!1;for(let te=s;te>0;te--){let re=u.evaluateAt(this.field.exp(te));d[s-te]=re,re!==0&&(p=!0)}if(!p)return 0;let x=this.field.getOne();if(l!=null)for(const te of l){let re=this.field.exp(r.length-1-te),ce=new Rn(this.field,new Int32Array([this.field.subtract(0,re),1]));x=x.multiply(ce)}let _=new Rn(this.field,d),S=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),_,s),E=S[0],j=S[1],U=this.findErrorLocations(E),X=this.findErrorMagnitudes(j,E,U);for(let te=0;te<U.length;te++){let re=r.length-1-this.field.log(U[te]);if(re<0)throw I.getChecksumInstance();r[re]=this.field.subtract(r[re],X[te])}return U.length}runEuclideanAlgorithm(r,s,l){if(r.getDegree()<s.getDegree()){let U=r;r=s,s=U}let u=r,d=s,p=this.field.getZero(),x=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let U=u,X=p;if(u=d,p=x,u.isZero())throw I.getChecksumInstance();d=U;let te=this.field.getZero(),re=u.getCoefficient(u.getDegree()),ce=this.field.inverse(re);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){let fe=d.getDegree()-u.getDegree(),Me=this.field.multiply(d.getCoefficient(d.getDegree()),ce);te=te.add(this.field.buildMonomial(fe,Me)),d=d.subtract(u.multiplyByMonomial(fe,Me))}x=te.multiply(p).subtract(X).negative()}let _=x.getCoefficient(0);if(_===0)throw I.getChecksumInstance();let S=this.field.inverse(_),E=x.multiply(S),j=d.multiply(S);return[E,j]}findErrorLocations(r){let s=r.getDegree(),l=new Int32Array(s),u=0;for(let d=1;d<this.field.getSize()&&u<s;d++)r.evaluateAt(d)===0&&(l[u]=this.field.inverse(d),u++);if(u!==s)throw I.getChecksumInstance();return l}findErrorMagnitudes(r,s,l){let u=s.getDegree(),d=new Int32Array(u);for(let S=1;S<=u;S++)d[u-S]=this.field.multiply(S,s.getCoefficient(S));let p=new Rn(this.field,d),x=l.length,_=new Int32Array(x);for(let S=0;S<x;S++){let E=this.field.inverse(l[S]),j=this.field.subtract(0,r.evaluateAt(E)),U=this.field.inverse(p.evaluateAt(E));_[S]=this.field.multiply(j,U)}return _}}class Xr{constructor(r,s,l,u,d){r instanceof Xr?this.constructor_2(r):this.constructor_1(r,s,l,u,d)}constructor_1(r,s,l,u,d){const p=s==null||l==null,x=u==null||d==null;if(p&&x)throw new oe;p?(s=new Ye(0,u.getY()),l=new Ye(0,d.getY())):x&&(u=new Ye(r.getWidth()-1,s.getY()),d=new Ye(r.getWidth()-1,l.getY())),this.image=r,this.topLeft=s,this.bottomLeft=l,this.topRight=u,this.bottomRight=d,this.minX=Math.trunc(Math.min(s.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),d.getX())),this.minY=Math.trunc(Math.min(s.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new Xr(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,l){let u=this.topLeft,d=this.bottomLeft,p=this.topRight,x=this.bottomRight;if(r>0){let _=l?this.topLeft:this.topRight,S=Math.trunc(_.getY()-r);S<0&&(S=0);let E=new Ye(_.getX(),S);l?u=E:p=E}if(s>0){let _=l?this.bottomLeft:this.bottomRight,S=Math.trunc(_.getY()+s);S>=this.image.getHeight()&&(S=this.image.getHeight()-1);let E=new Ye(_.getX(),S);l?d=E:x=E}return new Xr(this.image,u,d,p,x)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Gn{constructor(r,s,l,u){this.columnCount=r,this.errorCorrectionLevel=u,this.rowCountUpperPart=s,this.rowCountLowerPart=l,this.rowCount=s+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class qr{constructor(){this.buffer=""}static form(r,s){let l=-1;function u(p,x,_,S,E,j){if(p==="%%")return"%";if(s[++l]===void 0)return;p=S?parseInt(S.substr(1)):void 0;let U=E?parseInt(E.substr(1)):void 0,X;switch(j){case"s":X=s[l];break;case"c":X=s[l][0];break;case"f":X=parseFloat(s[l]).toFixed(p);break;case"p":X=parseFloat(s[l]).toPrecision(p);break;case"e":X=parseFloat(s[l]).toExponential(p);break;case"x":X=parseInt(s[l]).toString(U||16);break;case"d":X=parseFloat(parseInt(s[l],U||10).toPrecision(p)).toFixed(0);break}X=typeof X=="object"?JSON.stringify(X):(+X).toString(U);let te=parseInt(_),re=_&&_[0]+""=="0"?"0":" ";for(;X.length<te;)X=x!==void 0?X+re:re+X;return X}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,u)}format(r,...s){this.buffer+=qr.form(r,s)}toString(){return this.buffer}}class js{constructor(r){this.boundingBox=new Xr(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let l=1;l<js.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(r)-l;if(u>=0&&(s=this.codewords[u],s!=null)||(u=this.imageRowToCodewordIndex(r)+l,u<this.codewords.length&&(s=this.codewords[u],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new qr;let s=0;for(const l of this.codewords){if(l==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,l.getRowNumber(),l.getValue())}return r.toString()}}js.MAX_NEARBY_DISTANCE=5;class Bs{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[l,u]of this.values.entries()){const d={getKey:()=>l,getValue:()=>u};d.getValue()>r?(r=d.getValue(),s=[],s.push(d.getKey())):d.getValue()===r&&s.push(d.getKey())}return Ge.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class hu extends js{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),x=this.imageRowToCodewordIndex(Math.trunc(d.getY())),_=-1,S=1,E=0;for(let j=p;j<x;j++){if(s[j]==null)continue;let U=s[j],X=U.getRowNumber()-_;if(X===0)E++;else if(X===1)S=Math.max(S,E),E=1,_=U.getRowNumber();else if(X<0||U.getRowNumber()>=r.getRowCount()||X>j)s[j]=null;else{let te;S>2?te=(S-2)*X:te=X;let re=te>=j;for(let ce=1;ce<=te&&!re;ce++)re=s[j-ce]!=null;re?s[j]=null:(_=U.getRowNumber(),E=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=s.length)continue;s[u]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),l=this._isLeft?s.getTopLeft():s.getTopRight(),u=this._isLeft?s.getBottomLeft():s.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),x=this.getCodewords(),_=-1;for(let S=d;S<p;S++){if(x[S]==null)continue;let E=x[S];E.setRowNumberAsRowIndicatorColumn();let j=E.getRowNumber()-_;j===0||(j===1?_=E.getRowNumber():E.getRowNumber()>=r.getRowCount()?x[S]=null:_=E.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new Bs,l=new Bs,u=new Bs,d=new Bs;for(let x of r){if(x==null)continue;x.setRowNumberAsRowIndicatorColumn();let _=x.getValue()%30,S=x.getRowNumber();switch(this._isLeft||(S+=2),S%3){case 0:l.setValue(_*3+1);break;case 1:d.setValue(_/3),u.setValue(_%3);break;case 2:s.setValue(_+1);break}}if(s.getValue().length===0||l.getValue().length===0||u.getValue().length===0||d.getValue().length===0||s.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<Ge.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>Ge.MAX_ROWS_IN_BARCODE)return null;let p=new Gn(s.getValue()[0],l.getValue()[0],u.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(r,p),p}removeIncorrectCodewords(r,s){for(let l=0;l<r.length;l++){let u=r[l];if(r[l]==null)continue;let d=u.getValue()%30,p=u.getRowNumber();if(p>s.getRowCount()){r[l]=null;continue}switch(this._isLeft||(p+=2),p%3){case 0:d*3+1!==s.getRowCountUpperPart()&&(r[l]=null);break;case 1:(Math.trunc(d/3)!==s.getErrorCorrectionLevel()||d%3!==s.getRowCountLowerPart())&&(r[l]=null);break;case 2:d+1!==s.getColumnCount()&&(r[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Fs{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Ge.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let l=this.detectionResultColumns[s].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(s,u,l))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<r.length;l++)if(r[l]!=null&&s[l]!=null&&r[l].getRowNumber()===s[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let d=this.detectionResultColumns[u].getCodewords()[l];d!=null&&(d.setRowNumber(r[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),d=0;for(let p=this.barcodeColumnCount+1;p>0&&d<this.ADJUST_ROW_NUMBER_SKIP;p--){let x=this.detectionResultColumns[p].getCodewords()[l];x!=null&&(d=Fs.adjustRowNumberIfValid(u,d,x),x.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),d=0;for(let p=1;p<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;p++){let x=this.detectionResultColumns[p].getCodewords()[l];x!=null&&(d=Fs.adjustRowNumberIfValid(u,d,x),x.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(r)?(l.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,l){if(!this.detectionResultColumns[r-1])return;let u=l[s],d=this.detectionResultColumns[r-1].getCodewords(),p=d;this.detectionResultColumns[r+1]!=null&&(p=this.detectionResultColumns[r+1].getCodewords());let x=new Array(14);x[2]=d[s],x[3]=p[s],s>0&&(x[0]=l[s-1],x[4]=d[s-1],x[5]=p[s-1]),s>1&&(x[8]=l[s-2],x[10]=d[s-2],x[11]=p[s-2]),s<l.length-1&&(x[1]=l[s+1],x[6]=d[s+1],x[7]=p[s+1]),s<l.length-2&&(x[9]=l[s+2],x[12]=d[s+2],x[13]=p[s+2]);for(let _ of x)if(Fs.adjustRowNumber(u,_))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new qr;for(let l=0;l<r.getCodewords().length;l++){s.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){s.format("    |   ");continue}let d=this.detectionResultColumns[u].getCodewords()[l];if(d==null){s.format("    |   ");continue}s.format(" %3d|%3d",d.getRowNumber(),d.getValue())}s.format("%n")}return s.toString()}}class cs{constructor(r,s,l,u){this.rowNumber=cs.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==cs.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}cs.BARCODE_ROW_UNKNOWN=-1;class dr{static initialize(){for(let r=0;r<Ge.SYMBOL_TABLE.length;r++){let s=Ge.SYMBOL_TABLE[r],l=s&1;for(let u=0;u<Ge.BARS_IN_MODULE;u++){let d=0;for(;(s&1)===l;)d+=1,s>>=1;l=s&1,dr.RATIOS_TABLE[r]||(dr.RATIOS_TABLE[r]=new Array(Ge.BARS_IN_MODULE)),dr.RATIOS_TABLE[r][Ge.BARS_IN_MODULE-u-1]=Math.fround(d/Ge.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=dr.getDecodedCodewordValue(dr.sampleBitCounts(r));return s!==-1?s:dr.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=ft.sum(r),l=new Int32Array(Ge.BARS_IN_MODULE),u=0,d=0;for(let p=0;p<Ge.MODULES_IN_CODEWORD;p++){let x=s/(2*Ge.MODULES_IN_CODEWORD)+p*s/Ge.MODULES_IN_CODEWORD;d+r[u]<=x&&(d+=r[u],u++),l[u]++}return l}static getDecodedCodewordValue(r){let s=dr.getBitValue(r);return Ge.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let l=0;l<r.length;l++)for(let u=0;u<r[l];u++)s=s<<1|(l%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=ft.sum(r),l=new Array(Ge.BARS_IN_MODULE);if(s>1)for(let p=0;p<l.length;p++)l[p]=Math.fround(r[p]/s);let u=_r.MAX_VALUE,d=-1;this.bSymbolTableReady||dr.initialize();for(let p=0;p<dr.RATIOS_TABLE.length;p++){let x=0,_=dr.RATIOS_TABLE[p];for(let S=0;S<Ge.BARS_IN_MODULE;S++){let E=Math.fround(_[S]-l[S]);if(x+=Math.fround(E*E),x>=u)break}x<u&&(u=x,d=Ge.SYMBOL_TABLE[p])}return d}}dr.bSymbolTableReady=!1,dr.RATIOS_TABLE=new Array(Ge.SYMBOL_TABLE.length).map(D=>new Array(Ge.BARS_IN_MODULE));class kl{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class Lt{static parseLong(r,s=void 0){return parseInt(r,s)}}class fu extends y{}fu.kind="NullPointerException";class Kr{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,l){if(r==null)throw new fu;if(s<0||s>r.length||l<0||s+l>r.length||s+l<0)throw new B;if(l===0)return;for(let u=0;u<l;u++)this.write(r[s+u])}flush(){}close(){}}class Uo extends y{}class pu extends Kr{constructor(r=32){if(super(),this.count=0,r<0)throw new b("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let l=this.buf.length<<1;if(l-r<0&&(l=r),l<0){if(r<0)throw new Uo;l=k.MAX_VALUE}this.buf=P.copyOfUint8Array(this.buf,l)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,l){if(s<0||s>r.length||l<0||s+l-r.length>0)throw new B;this.ensureCapacity(this.count+l),R.arraycopy(r,s,this.buf,this.count,l),this.count+=l}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return P.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var $t;(function(D){D[D.ALPHA=0]="ALPHA",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.PUNCT=3]="PUNCT",D[D.ALPHA_SHIFT=4]="ALPHA_SHIFT",D[D.PUNCT_SHIFT=5]="PUNCT_SHIFT"})($t||($t={}));function Aa(){if(typeof window<"u")return window.BigInt||null;if(typeof Ma<"u")return Ma.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ea;function Ri(D){if(typeof Ea>"u"&&(Ea=Aa()),Ea===null)throw new Error("BigInt is not supported!");return Ea(D)}function tf(){let D=[];D[0]=Ri(1);let r=Ri(900);D[1]=r;for(let s=2;s<16;s++)D[s]=D[s-1]*r;return D}class me{static decode(r,s){let l=new be(""),u=M.ISO8859_1;l.enableDecoding(u);let d=1,p=r[d++],x=new kl;for(;d<r[0];){switch(p){case me.TEXT_COMPACTION_MODE_LATCH:d=me.textCompaction(r,d,l);break;case me.BYTE_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:d=me.byteCompaction(p,r,u,d,l);break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[d++]);break;case me.NUMERIC_COMPACTION_MODE_LATCH:d=me.numericCompaction(r,d,l);break;case me.ECI_CHARSET:M.getCharacterSetECIByValue(r[d++]);break;case me.ECI_GENERAL_PURPOSE:d+=2;break;case me.ECI_USER_DEFINED:d++;break;case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=me.decodeMacroBlock(r,d,x);break;case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:throw new Y;default:d--,d=me.textCompaction(r,d,l);break}if(d<r.length)p=r[d++];else throw Y.getFormatInstance()}if(l.length()===0)throw Y.getFormatInstance();let _=new Ue(null,l.toString(),null,s);return _.setOther(x),_}static decodeMacroBlock(r,s,l){if(s+me.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw Y.getFormatInstance();let u=new Int32Array(me.NUMBER_OF_SEQUENCE_CODEWORDS);for(let x=0;x<me.NUMBER_OF_SEQUENCE_CODEWORDS;x++,s++)u[x]=r[s];l.setSegmentIndex(k.parseInt(me.decodeBase900toBase10(u,me.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new be;s=me.textCompaction(r,s,d),l.setFileId(d.toString());let p=-1;for(r[s]===me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(p=s+1);s<r[0];)switch(r[s]){case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case me.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let x=new be;s=me.textCompaction(r,s+1,x),l.setFileName(x.toString());break;case me.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let _=new be;s=me.textCompaction(r,s+1,_),l.setSender(_.toString());break;case me.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let S=new be;s=me.textCompaction(r,s+1,S),l.setAddressee(S.toString());break;case me.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let E=new be;s=me.numericCompaction(r,s+1,E),l.setSegmentCount(k.parseInt(E.toString()));break;case me.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let j=new be;s=me.numericCompaction(r,s+1,j),l.setTimestamp(Lt.parseLong(j.toString()));break;case me.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let U=new be;s=me.numericCompaction(r,s+1,U),l.setChecksum(k.parseInt(U.toString()));break;case me.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let X=new be;s=me.numericCompaction(r,s+1,X),l.setFileSize(Lt.parseLong(X.toString()));break;default:throw Y.getFormatInstance()}break;case me.MACRO_PDF417_TERMINATOR:s++,l.setLastSegment(!0);break;default:throw Y.getFormatInstance()}if(p!==-1){let x=s-p;l.isLastSegment()&&x--,l.setOptionalData(P.copyOfRange(r,p,p+x))}return s}static textCompaction(r,s,l){let u=new Int32Array((r[0]-s)*2),d=new Int32Array((r[0]-s)*2),p=0,x=!1;for(;s<r[0]&&!x;){let _=r[s++];if(_<me.TEXT_COMPACTION_MODE_LATCH)u[p]=_/30,u[p+1]=_%30,p+=2;else switch(_){case me.TEXT_COMPACTION_MODE_LATCH:u[p++]=me.TEXT_COMPACTION_MODE_LATCH;break;case me.BYTE_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.NUMERIC_COMPACTION_MODE_LATCH:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:s--,x=!0;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[p]=me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=r[s++],d[p]=_,p++;break}}return me.decodeTextCompaction(u,d,p,l),s}static decodeTextCompaction(r,s,l,u){let d=$t.ALPHA,p=$t.ALPHA,x=0;for(;x<l;){let _=r[x],S="";switch(d){case $t.ALPHA:if(_<26)S=String.fromCharCode(65+_);else switch(_){case 26:S=" ";break;case me.LL:d=$t.LOWER;break;case me.ML:d=$t.MIXED;break;case me.PS:p=d,d=$t.PUNCT_SHIFT;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[x]);break;case me.TEXT_COMPACTION_MODE_LATCH:d=$t.ALPHA;break}break;case $t.LOWER:if(_<26)S=String.fromCharCode(97+_);else switch(_){case 26:S=" ";break;case me.AS:p=d,d=$t.ALPHA_SHIFT;break;case me.ML:d=$t.MIXED;break;case me.PS:p=d,d=$t.PUNCT_SHIFT;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[x]);break;case me.TEXT_COMPACTION_MODE_LATCH:d=$t.ALPHA;break}break;case $t.MIXED:if(_<me.PL)S=me.MIXED_CHARS[_];else switch(_){case me.PL:d=$t.PUNCT;break;case 26:S=" ";break;case me.LL:d=$t.LOWER;break;case me.AL:d=$t.ALPHA;break;case me.PS:p=d,d=$t.PUNCT_SHIFT;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[x]);break;case me.TEXT_COMPACTION_MODE_LATCH:d=$t.ALPHA;break}break;case $t.PUNCT:if(_<me.PAL)S=me.PUNCT_CHARS[_];else switch(_){case me.PAL:d=$t.ALPHA;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[x]);break;case me.TEXT_COMPACTION_MODE_LATCH:d=$t.ALPHA;break}break;case $t.ALPHA_SHIFT:if(d=p,_<26)S=String.fromCharCode(65+_);else switch(_){case 26:S=" ";break;case me.TEXT_COMPACTION_MODE_LATCH:d=$t.ALPHA;break}break;case $t.PUNCT_SHIFT:if(d=p,_<me.PAL)S=me.PUNCT_CHARS[_];else switch(_){case me.PAL:d=$t.ALPHA;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[x]);break;case me.TEXT_COMPACTION_MODE_LATCH:d=$t.ALPHA;break}break}S!==""&&u.append(S),x++}}static byteCompaction(r,s,l,u,d){let p=new pu,x=0,_=0,S=!1;switch(r){case me.BYTE_COMPACTION_MODE_LATCH:let E=new Int32Array(6),j=s[u++];for(;u<s[0]&&!S;)switch(E[x++]=j,_=900*_+j,j=s[u++],j){case me.TEXT_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH:case me.NUMERIC_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:u--,S=!0;break;default:if(x%5===0&&x>0){for(let U=0;U<6;++U)p.write(Number(Ri(_)>>Ri(8*(5-U))));_=0,x=0}break}u===s[0]&&j<me.TEXT_COMPACTION_MODE_LATCH&&(E[x++]=j);for(let U=0;U<x;U++)p.write(E[U]);break;case me.BYTE_COMPACTION_MODE_LATCH_6:for(;u<s[0]&&!S;){let U=s[u++];if(U<me.TEXT_COMPACTION_MODE_LATCH)x++,_=900*_+U;else switch(U){case me.TEXT_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH:case me.NUMERIC_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:u--,S=!0;break}if(x%5===0&&x>0){for(let X=0;X<6;++X)p.write(Number(Ri(_)>>Ri(8*(5-X))));_=0,x=0}}break}return d.append($.decode(p.toByteArray(),l)),u}static numericCompaction(r,s,l){let u=0,d=!1,p=new Int32Array(me.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!d;){let x=r[s++];if(s===r[0]&&(d=!0),x<me.TEXT_COMPACTION_MODE_LATCH)p[u]=x,u++;else switch(x){case me.TEXT_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:s--,d=!0;break}(u%me.MAX_NUMERIC_CODEWORDS===0||x===me.NUMERIC_COMPACTION_MODE_LATCH||d)&&u>0&&(l.append(me.decodeBase900toBase10(p,u)),u=0)}return s}static decodeBase900toBase10(r,s){let l=Ri(0);for(let d=0;d<s;d++)l+=me.EXP900[s-d-1]*Ri(r[d]);let u=l.toString();if(u.charAt(0)!=="1")throw new Y;return u.substring(1)}}me.TEXT_COMPACTION_MODE_LATCH=900,me.BYTE_COMPACTION_MODE_LATCH=901,me.NUMERIC_COMPACTION_MODE_LATCH=902,me.BYTE_COMPACTION_MODE_LATCH_6=924,me.ECI_USER_DEFINED=925,me.ECI_GENERAL_PURPOSE=926,me.ECI_CHARSET=927,me.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,me.MACRO_PDF417_TERMINATOR=922,me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,me.MAX_NUMERIC_CODEWORDS=15,me.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,me.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,me.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,me.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,me.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,me.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,me.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,me.PL=25,me.LL=27,me.AS=27,me.ML=28,me.AL=28,me.PS=29,me.PAL=29,me.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,me.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",me.EXP900=Aa()?tf():[],me.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Et{constructor(){}static decode(r,s,l,u,d,p,x){let _=new Xr(r,s,l,u,d),S=null,E=null,j;for(let te=!0;;te=!1){if(s!=null&&(S=Et.getRowIndicatorColumn(r,_,s,!0,p,x)),u!=null&&(E=Et.getRowIndicatorColumn(r,_,u,!1,p,x)),j=Et.merge(S,E),j==null)throw oe.getNotFoundInstance();let re=j.getBoundingBox();if(te&&re!=null&&(re.getMinY()<_.getMinY()||re.getMaxY()>_.getMaxY()))_=re;else break}j.setBoundingBox(_);let U=j.getBarcodeColumnCount()+1;j.setDetectionResultColumn(0,S),j.setDetectionResultColumn(U,E);let X=S!=null;for(let te=1;te<=U;te++){let re=X?te:U-te;if(j.getDetectionResultColumn(re)!==void 0)continue;let ce;re===0||re===U?ce=new hu(_,re===0):ce=new js(_),j.setDetectionResultColumn(re,ce);let fe=-1,Me=fe;for(let Re=_.getMinY();Re<=_.getMaxY();Re++){if(fe=Et.getStartColumn(j,re,Re,X),fe<0||fe>_.getMaxX()){if(Me===-1)continue;fe=Me}let Ie=Et.detectCodeword(r,_.getMinX(),_.getMaxX(),X,fe,Re,p,x);Ie!=null&&(ce.setCodeword(Re,Ie),Me=fe,p=Math.min(p,Ie.getWidth()),x=Math.max(x,Ie.getWidth()))}}return Et.createDecoderResult(j)}static merge(r,s){if(r==null&&s==null)return null;let l=Et.getBarcodeMetadata(r,s);if(l==null)return null;let u=Xr.merge(Et.adjustBoundingBox(r),Et.adjustBoundingBox(s));return new Fs(l,u)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let l=Et.getMax(s),u=0;for(let x of s)if(u+=l-x,x>0)break;let d=r.getCodewords();for(let x=0;u>0&&d[x]==null;x++)u--;let p=0;for(let x=s.length-1;x>=0&&(p+=l-s[x],!(s[x]>0));x--);for(let x=d.length-1;p>0&&d[x]==null;x--)p--;return r.getBoundingBox().addMissingRows(u,p,r.isLeft())}static getMax(r){let s=-1;for(let l of r)s=Math.max(s,l);return s}static getBarcodeMetadata(r,s){let l;if(r==null||(l=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let u;return s==null||(u=s.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(r,s,l,u,d,p){let x=new hu(s,u);for(let _=0;_<2;_++){let S=_===0?1:-1,E=Math.trunc(Math.trunc(l.getX()));for(let j=Math.trunc(Math.trunc(l.getY()));j<=s.getMaxY()&&j>=s.getMinY();j+=S){let U=Et.detectCodeword(r,0,r.getWidth(),u,E,j,d,p);U!=null&&(x.setCodeword(j,U),u?E=U.getStartX():E=U.getEndX())}}return x}static adjustCodewordCount(r,s){let l=s[0][1],u=l.getValue(),d=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-Et.getNumberOfECCodeWords(r.getBarcodeECLevel());if(u.length===0){if(d<1||d>Ge.MAX_CODEWORDS_IN_BARCODE)throw oe.getNotFoundInstance();l.setValue(d)}else u[0]!==d&&l.setValue(d)}static createDecoderResult(r){let s=Et.createBarcodeMatrix(r);Et.adjustCodewordCount(r,s);let l=new Array,u=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),d=[],p=new Array;for(let _=0;_<r.getBarcodeRowCount();_++)for(let S=0;S<r.getBarcodeColumnCount();S++){let E=s[_][S+1].getValue(),j=_*r.getBarcodeColumnCount()+S;E.length===0?l.push(j):E.length===1?u[j]=E[0]:(p.push(j),d.push(E))}let x=new Array(d.length);for(let _=0;_<x.length;_++)x[_]=d[_];return Et.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),u,Ge.toIntArray(l),Ge.toIntArray(p),x)}static createDecoderResultFromAmbiguousValues(r,s,l,u,d){let p=new Int32Array(u.length),x=100;for(;x-- >0;){for(let _=0;_<p.length;_++)s[u[_]]=d[_][p[_]];try{return Et.decodeCodewords(s,r,l)}catch(_){if(!(_ instanceof I))throw _}if(p.length===0)throw I.getChecksumInstance();for(let _=0;_<p.length;_++)if(p[_]<d[_].length-1){p[_]++;break}else if(p[_]=0,_===p.length-1)throw I.getChecksumInstance()}throw I.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let u=0;u<s.length;u++)for(let d=0;d<s[u].length;d++)s[u][d]=new Bs;let l=0;for(let u of r.getDetectionResultColumns()){if(u!=null){for(let d of u.getCodewords())if(d!=null){let p=d.getRowNumber();if(p>=0){if(p>=s.length)continue;s[p][l].setValue(d.getValue())}}}l++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,l,u){let d=u?1:-1,p=null;if(Et.isValidBarcodeColumn(r,s-d)&&(p=r.getDetectionResultColumn(s-d).getCodeword(l)),p!=null)return u?p.getEndX():p.getStartX();if(p=r.getDetectionResultColumn(s).getCodewordNearby(l),p!=null)return u?p.getStartX():p.getEndX();if(Et.isValidBarcodeColumn(r,s-d)&&(p=r.getDetectionResultColumn(s-d).getCodewordNearby(l)),p!=null)return u?p.getEndX():p.getStartX();let x=0;for(;Et.isValidBarcodeColumn(r,s-d);){s-=d;for(let _ of r.getDetectionResultColumn(s).getCodewords())if(_!=null)return(u?_.getEndX():_.getStartX())+d*x*(_.getEndX()-_.getStartX());x++}return u?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,l,u,d,p,x,_){d=Et.adjustCodewordStartColumn(r,s,l,u,d,p);let S=Et.getModuleBitCount(r,s,l,u,d,p);if(S==null)return null;let E,j=ft.sum(S);if(u)E=d+j;else{for(let te=0;te<S.length/2;te++){let re=S[te];S[te]=S[S.length-1-te],S[S.length-1-te]=re}E=d,d=E-j}if(!Et.checkCodewordSkew(j,x,_))return null;let U=dr.getDecodedValue(S),X=Ge.getCodeword(U);return X===-1?null:new cs(d,E,Et.getCodewordBucketNumber(U),X)}static getModuleBitCount(r,s,l,u,d,p){let x=d,_=new Int32Array(8),S=0,E=u?1:-1,j=u;for(;(u?x<l:x>=s)&&S<_.length;)r.get(x,p)===j?(_[S]++,x+=E):(S++,j=!j);return S===_.length||x===(u?l:s)&&S===_.length-1?_:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,l,u,d,p){let x=d,_=u?-1:1;for(let S=0;S<2;S++){for(;(u?x>=s:x<l)&&u===r.get(x,p);){if(Math.abs(d-x)>Et.CODEWORD_SKEW_SIZE)return d;x+=_}_=-_,u=!u}return x}static checkCodewordSkew(r,s,l){return s-Et.CODEWORD_SKEW_SIZE<=r&&r<=l+Et.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,l){if(r.length===0)throw Y.getFormatInstance();let u=1<<s+1,d=Et.correctErrors(r,l,u);Et.verifyCodewordCount(r,u);let p=me.decode(r,""+s);return p.setErrorsCorrected(d),p.setErasures(l.length),p}static correctErrors(r,s,l){if(s!=null&&s.length>l/2+Et.MAX_ERRORS||l<0||l>Et.MAX_EC_CODEWORDS)throw I.getChecksumInstance();return Et.errorCorrection.decode(r,l,s)}static verifyCodewordCount(r,s){if(r.length<4)throw Y.getFormatInstance();let l=r[0];if(l>r.length)throw Y.getFormatInstance();if(l===0)if(s<r.length)r[0]=r.length-s;else throw Y.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),l=0,u=s.length-1;for(;!((r&1)!==l&&(l=r&1,u--,u<0));)s[u]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return Et.getCodewordBucketNumber(Et.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new qr;for(let l=0;l<r.length;l++){s.format("Row %2d: ",l);for(let u=0;u<r[l].length;u++){let d=r[l][u];d.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}s.format("%n")}return s.toString()}}Et.CODEWORD_SKEW_SIZE=2,Et.MAX_ERRORS=3,Et.MAX_EC_CODEWORDS=512,Et.errorCorrection=new Sa;class Zn{decode(r,s=null){let l=Zn.decode(r,s,!1);if(l==null||l.length===0||l[0]==null)throw oe.getNotFoundInstance();return l[0]}decodeMultiple(r,s=null){try{return Zn.decode(r,s,!0)}catch(l){throw l instanceof Y||l instanceof I?oe.getNotFoundInstance():l}}static decode(r,s,l){const u=new Array,d=bt.detectMultiple(r,s,l);for(const p of d.getPoints()){const x=Et.decode(d.getBits(),p[4],p[5],p[6],p[7],Zn.getMinCodewordWidth(p),Zn.getMaxCodewordWidth(p)),_=new Fe(x.getText(),x.getRawBytes(),void 0,p,ae.PDF_417);_.putMetadata(Qe.ERROR_CORRECTION_LEVEL,x.getECLevel());const S=x.getOther();S!=null&&_.putMetadata(Qe.PDF417_EXTRA_METADATA,S),u.push(_)}return u.map(p=>p)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?k.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Zn.getMaxWidth(r[0],r[4]),Zn.getMaxWidth(r[6],r[2])*Ge.MODULES_IN_CODEWORD/Ge.MODULES_IN_STOP_PATTERN),Math.max(Zn.getMaxWidth(r[1],r[5]),Zn.getMaxWidth(r[7],r[3])*Ge.MODULES_IN_CODEWORD/Ge.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Zn.getMinWidth(r[0],r[4]),Zn.getMinWidth(r[6],r[2])*Ge.MODULES_IN_CODEWORD/Ge.MODULES_IN_STOP_PATTERN),Math.min(Zn.getMinWidth(r[1],r[5]),Zn.getMinWidth(r[7],r[3])*Ge.MODULES_IN_CODEWORD/Ge.MODULES_IN_STOP_PATTERN)))}reset(){}}class Sr extends y{}Sr.kind="ReaderException";class mu{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!i(r)&&r.get(q.TRY_HARDER)===!0,l=i(r)?null:r.get(q.POSSIBLE_FORMATS),u=new Array;if(!i(l)){const d=l.some(p=>p===ae.UPC_A||p===ae.UPC_E||p===ae.EAN_13||p===ae.EAN_8||p===ae.CODABAR||p===ae.CODE_39||p===ae.CODE_93||p===ae.CODE_128||p===ae.ITF||p===ae.RSS_14||p===ae.RSS_EXPANDED);d&&!s&&u.push(new Yi(r,this.verbose)),l.includes(ae.QR_CODE)&&u.push(new Wn),l.includes(ae.DATA_MATRIX)&&u.push(new Qt),l.includes(ae.AZTEC)&&u.push(new Ce),l.includes(ae.PDF_417)&&u.push(new Zn),d&&s&&u.push(new Yi(r,this.verbose))}u.length===0&&(s||u.push(new Yi(r,this.verbose)),u.push(new Wn),u.push(new Qt),u.push(new Ce),u.push(new Zn),s&&u.push(new Yi(r,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new Sr("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(l){if(l instanceof Sr)continue}throw new oe("No MultiFormat Readers were able to detect the code.")}}class gu extends Ke{constructor(r=null,s=500){const l=new mu;l.setHints(r),super(l,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class Xi extends Ke{constructor(r=500){super(new Zn,r)}}class xu extends Ke{constructor(r=500){super(new Wn,r)}}var Na;(function(D){D[D.ERROR_CORRECTION=0]="ERROR_CORRECTION",D[D.CHARACTER_SET=1]="CHARACTER_SET",D[D.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",D[D.MIN_SIZE=3]="MIN_SIZE",D[D.MAX_SIZE=4]="MAX_SIZE",D[D.MARGIN=5]="MARGIN",D[D.PDF417_COMPACT=6]="PDF417_COMPACT",D[D.PDF417_COMPACTION=7]="PDF417_COMPACTION",D[D.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",D[D.AZTEC_LAYERS=9]="AZTEC_LAYERS",D[D.QR_VERSION=10]="QR_VERSION"})(Na||(Na={}));var Cn=Na;class Ml{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new Ze(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let l=s[s.length-1];const u=this.field;for(let d=s.length;d<=r;d++){const p=l.multiply(new Ze(u,Int32Array.from([1,u.exp(d-1+u.getGeneratorBase())])));s.push(p),l=p}}return s[r]}encode(r,s){if(s===0)throw new b("No error correction bytes");const l=r.length-s;if(l<=0)throw new b("No data bytes provided");const u=this.buildGenerator(s),d=new Int32Array(l);R.arraycopy(r,0,d,0,l);let p=new Ze(this.field,d);p=p.multiplyByMonomial(s,1);const _=p.divide(u)[1].getCoefficients(),S=s-_.length;for(let E=0;E<S;E++)r[l+E]=0;R.arraycopy(_,0,r,l+S,_.length)}}class pn{constructor(){}static applyMaskPenaltyRule1(r){return pn.applyMaskPenaltyRule1Internal(r,!0)+pn.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const l=r.getArray(),u=r.getWidth(),d=r.getHeight();for(let p=0;p<d-1;p++){const x=l[p];for(let _=0;_<u-1;_++){const S=x[_];S===x[_+1]&&S===l[p+1][_]&&S===l[p+1][_+1]&&s++}}return pn.N2*s}static applyMaskPenaltyRule3(r){let s=0;const l=r.getArray(),u=r.getWidth(),d=r.getHeight();for(let p=0;p<d;p++)for(let x=0;x<u;x++){const _=l[p];x+6<u&&_[x]===1&&_[x+1]===0&&_[x+2]===1&&_[x+3]===1&&_[x+4]===1&&_[x+5]===0&&_[x+6]===1&&(pn.isWhiteHorizontal(_,x-4,x)||pn.isWhiteHorizontal(_,x+7,x+11))&&s++,p+6<d&&l[p][x]===1&&l[p+1][x]===0&&l[p+2][x]===1&&l[p+3][x]===1&&l[p+4][x]===1&&l[p+5][x]===0&&l[p+6][x]===1&&(pn.isWhiteVertical(l,x,p-4,p)||pn.isWhiteVertical(l,x,p+7,p+11))&&s++}return s*pn.N3}static isWhiteHorizontal(r,s,l){s=Math.max(s,0),l=Math.min(l,r.length);for(let u=s;u<l;u++)if(r[u]===1)return!1;return!0}static isWhiteVertical(r,s,l,u){l=Math.max(l,0),u=Math.min(u,r.length);for(let d=l;d<u;d++)if(r[d][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const l=r.getArray(),u=r.getWidth(),d=r.getHeight();for(let _=0;_<d;_++){const S=l[_];for(let E=0;E<u;E++)S[E]===1&&s++}const p=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-p)*10/p)*pn.N4}static getDataMaskBit(r,s,l){let u,d;switch(r){case 0:u=l+s&1;break;case 1:u=l&1;break;case 2:u=s%3;break;case 3:u=(l+s)%3;break;case 4:u=Math.floor(l/2)+Math.floor(s/3)&1;break;case 5:d=l*s,u=(d&1)+d%3;break;case 6:d=l*s,u=(d&1)+d%3&1;break;case 7:d=l*s,u=d%3+(l+s&1)&1;break;default:throw new b("Invalid mask pattern: "+r)}return u===0}static applyMaskPenaltyRule1Internal(r,s){let l=0;const u=s?r.getHeight():r.getWidth(),d=s?r.getWidth():r.getHeight(),p=r.getArray();for(let x=0;x<u;x++){let _=0,S=-1;for(let E=0;E<d;E++){const j=s?p[x][E]:p[E][x];j===S?_++:(_>=5&&(l+=pn.N1+(_-5)),_=1,S=j)}_>=5&&(l+=pn.N1+(_-5))}return l}}pn.N1=3,pn.N2=3,pn.N3=40,pn.N4=10;class Vo{constructor(r,s){this.width=r,this.height=s;const l=new Array(s);for(let u=0;u!==s;u++)l[u]=new Uint8Array(r);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,l){this.bytes[s][r]=l}setBoolean(r,s,l){this.bytes[s][r]=l?1:0}clear(r){for(const s of this.bytes)P.fill(s,r)}equals(r){if(!(r instanceof Vo))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let l=0,u=this.height;l<u;++l){const d=this.bytes[l],p=s.bytes[l];for(let x=0,_=this.width;x<_;++x)if(d[x]!==p[x])return!1}return!0}toString(){const r=new be;for(let s=0,l=this.height;s<l;++s){const u=this.bytes[s];for(let d=0,p=this.width;d<p;++d)switch(u[d]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class us{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new be;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<us.NUM_MASK_PATTERNS}}us.NUM_MASK_PATTERNS=8;class en extends y{}en.kind="WriterException";class dt{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,l,u,d){dt.clearMatrix(d),dt.embedBasicPatterns(l,d),dt.embedTypeInfo(s,u,d),dt.maybeEmbedVersionInfo(l,d),dt.embedDataBits(r,u,d)}static embedBasicPatterns(r,s){dt.embedPositionDetectionPatternsAndSeparators(s),dt.embedDarkDotAtLeftBottomCorner(s),dt.maybeEmbedPositionAdjustmentPatterns(r,s),dt.embedTimingPatterns(s)}static embedTypeInfo(r,s,l){const u=new G;dt.makeTypeInfoBits(r,s,u);for(let d=0,p=u.getSize();d<p;++d){const x=u.get(u.getSize()-1-d),_=dt.TYPE_INFO_COORDINATES[d],S=_[0],E=_[1];if(l.setBoolean(S,E,x),d<8){const j=l.getWidth()-d-1;l.setBoolean(j,8,x)}else{const U=l.getHeight()-7+(d-8);l.setBoolean(8,U,x)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const l=new G;dt.makeVersionInfoBits(r,l);let u=6*3-1;for(let d=0;d<6;++d)for(let p=0;p<3;++p){const x=l.get(u);u--,s.setBoolean(d,s.getHeight()-11+p,x),s.setBoolean(s.getHeight()-11+p,d,x)}}static embedDataBits(r,s,l){let u=0,d=-1,p=l.getWidth()-1,x=l.getHeight()-1;for(;p>0;){for(p===6&&(p-=1);x>=0&&x<l.getHeight();){for(let _=0;_<2;++_){const S=p-_;if(!dt.isEmpty(l.get(S,x)))continue;let E;u<r.getSize()?(E=r.get(u),++u):E=!1,s!==255&&pn.getDataMaskBit(s,S,x)&&(E=!E),l.setBoolean(S,x,E)}x+=d}d=-d,x+=d,p-=2}if(u!==r.getSize())throw new en("Not all bits consumed: "+u+"/"+r.getSize())}static findMSBSet(r){return 32-k.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new b("0 polynomial");const l=dt.findMSBSet(s);for(r<<=l-1;dt.findMSBSet(r)>=l;)r^=s<<dt.findMSBSet(r)-l;return r}static makeTypeInfoBits(r,s,l){if(!us.isValidMaskPattern(s))throw new en("Invalid mask pattern");const u=r.getBits()<<3|s;l.appendBits(u,5);const d=dt.calculateBCHCode(u,dt.TYPE_INFO_POLY);l.appendBits(d,10);const p=new G;if(p.appendBits(dt.TYPE_INFO_MASK_PATTERN,15),l.xor(p),l.getSize()!==15)throw new en("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const l=dt.calculateBCHCode(r.getVersionNumber(),dt.VERSION_INFO_POLY);if(s.appendBits(l,12),s.getSize()!==18)throw new en("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const l=(s+1)%2;dt.isEmpty(r.get(s,6))&&r.setNumber(s,6,l),dt.isEmpty(r.get(6,s))&&r.setNumber(6,s,l)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new en;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,l){for(let u=0;u<8;++u){if(!dt.isEmpty(l.get(r+u,s)))throw new en;l.setNumber(r+u,s,0)}}static embedVerticalSeparationPattern(r,s,l){for(let u=0;u<7;++u){if(!dt.isEmpty(l.get(r,s+u)))throw new en;l.setNumber(r,s+u,0)}}static embedPositionAdjustmentPattern(r,s,l){for(let u=0;u<5;++u){const d=dt.POSITION_ADJUSTMENT_PATTERN[u];for(let p=0;p<5;++p)l.setNumber(r+p,s+u,d[p])}}static embedPositionDetectionPattern(r,s,l){for(let u=0;u<7;++u){const d=dt.POSITION_DETECTION_PATTERN[u];for(let p=0;p<7;++p)l.setNumber(r+p,s+u,d[p])}}static embedPositionDetectionPatternsAndSeparators(r){const s=dt.POSITION_DETECTION_PATTERN[0].length;dt.embedPositionDetectionPattern(0,0,r),dt.embedPositionDetectionPattern(r.getWidth()-s,0,r),dt.embedPositionDetectionPattern(0,r.getWidth()-s,r);const l=8;dt.embedHorizontalSeparationPattern(0,l-1,r),dt.embedHorizontalSeparationPattern(r.getWidth()-l,l-1,r),dt.embedHorizontalSeparationPattern(0,r.getWidth()-l,r);const u=7;dt.embedVerticalSeparationPattern(u,0,r),dt.embedVerticalSeparationPattern(r.getHeight()-u-1,0,r),dt.embedVerticalSeparationPattern(u,r.getHeight()-u,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const l=r.getVersionNumber()-1,u=dt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,p=u.length;d!==p;d++){const x=u[d];if(x>=0)for(let _=0;_!==p;_++){const S=u[_];S>=0&&dt.isEmpty(s.get(S,x))&&dt.embedPositionAdjustmentPattern(S-2,x-2,s)}}}}dt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),dt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),dt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),dt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),dt.VERSION_INFO_POLY=7973,dt.TYPE_INFO_POLY=1335,dt.TYPE_INFO_MASK_PATTERN=21522;class nf{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class sn{constructor(){}static calculateMaskPenalty(r){return pn.applyMaskPenaltyRule1(r)+pn.applyMaskPenaltyRule2(r)+pn.applyMaskPenaltyRule3(r)+pn.applyMaskPenaltyRule4(r)}static encode(r,s,l=null){let u=sn.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get(Cn.CHARACTER_SET)!==void 0;d&&(u=l.get(Cn.CHARACTER_SET).toString());const p=this.chooseMode(r,u),x=new G;if(p===lt.BYTE&&(d||sn.DEFAULT_BYTE_MODE_ENCODING!==u)){const Re=M.getCharacterSetECIByName(u);Re!==void 0&&this.appendECI(Re,x)}this.appendModeInfo(p,x);const _=new G;this.appendBytes(r,p,_,u);let S;if(l!==null&&l.get(Cn.QR_VERSION)!==void 0){const Re=Number.parseInt(l.get(Cn.QR_VERSION).toString(),10);S=He.getVersionForNumber(Re);const Ie=this.calculateBitsNeeded(p,x,_,S);if(!this.willFit(Ie,S,s))throw new en("Data too big for requested version")}else S=this.recommendVersion(s,p,x,_);const E=new G;E.appendBitArray(x);const j=p===lt.BYTE?_.getSizeInBytes():r.length;this.appendLengthInfo(j,S,p,E),E.appendBitArray(_);const U=S.getECBlocksForLevel(s),X=S.getTotalCodewords()-U.getTotalECCodewords();this.terminateBits(X,E);const te=this.interleaveWithECBytes(E,S.getTotalCodewords(),X,U.getNumBlocks()),re=new us;re.setECLevel(s),re.setMode(p),re.setVersion(S);const ce=S.getDimensionForVersion(),fe=new Vo(ce,ce),Me=this.chooseMaskPattern(te,s,S,fe);return re.setMaskPattern(Me),dt.buildMatrix(te,s,S,Me,fe),re.setMatrix(fe),re}static recommendVersion(r,s,l,u){const d=this.calculateBitsNeeded(s,l,u,He.getVersionForNumber(1)),p=this.chooseVersion(d,r),x=this.calculateBitsNeeded(s,l,u,p);return this.chooseVersion(x,r)}static calculateBitsNeeded(r,s,l,u){return s.getSize()+r.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(r){return r<sn.ALPHANUMERIC_TABLE.length?sn.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if(M.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return lt.KANJI;let l=!1,u=!1;for(let d=0,p=r.length;d<p;++d){const x=r.charAt(d);if(sn.isDigit(x))l=!0;else if(this.getAlphanumericCode(x.charCodeAt(0))!==-1)u=!0;else return lt.BYTE}return u?lt.ALPHANUMERIC:l?lt.NUMERIC:lt.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=$.encode(r,M.SJIS)}catch{return!1}const l=s.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){const d=s[u]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(r,s,l,u){let d=Number.MAX_SAFE_INTEGER,p=-1;for(let x=0;x<us.NUM_MASK_PATTERNS;x++){dt.buildMatrix(r,s,l,x,u);let _=this.calculateMaskPenalty(u);_<d&&(d=_,p=x)}return p}static chooseVersion(r,s){for(let l=1;l<=40;l++){const u=He.getVersionForNumber(l);if(sn.willFit(r,u,s))return u}throw new en("Data too big")}static willFit(r,s,l){const u=s.getTotalCodewords(),p=s.getECBlocksForLevel(l).getTotalECCodewords(),x=u-p,_=(r+7)/8;return x>=_}static terminateBits(r,s){const l=r*8;if(s.getSize()>l)throw new en("data bits cannot fit in the QR Code"+s.getSize()+" > "+l);for(let p=0;p<4&&s.getSize()<l;++p)s.appendBit(!1);const u=s.getSize()&7;if(u>0)for(let p=u;p<8;p++)s.appendBit(!1);const d=r-s.getSizeInBytes();for(let p=0;p<d;++p)s.appendBits(p&1?17:236,8);if(s.getSize()!==l)throw new en("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,l,u,d,p){if(u>=l)throw new en("Block ID too large");const x=r%l,_=l-x,S=Math.floor(r/l),E=S+1,j=Math.floor(s/l),U=j+1,X=S-j,te=E-U;if(X!==te)throw new en("EC bytes mismatch");if(l!==_+x)throw new en("RS blocks mismatch");if(r!==(j+X)*_+(U+te)*x)throw new en("Total bytes mismatch");u<_?(d[0]=j,p[0]=X):(d[0]=U,p[0]=te)}static interleaveWithECBytes(r,s,l,u){if(r.getSizeInBytes()!==l)throw new en("Number of bits and data bytes does not match");let d=0,p=0,x=0;const _=new Array;for(let E=0;E<u;++E){const j=new Int32Array(1),U=new Int32Array(1);sn.getNumDataBytesAndNumECBytesForBlockID(s,l,u,E,j,U);const X=j[0],te=new Uint8Array(X);r.toBytes(8*d,te,0,X);const re=sn.generateECBytes(te,U[0]);_.push(new nf(te,re)),p=Math.max(p,X),x=Math.max(x,re.length),d+=j[0]}if(l!==d)throw new en("Data bytes does not match offset");const S=new G;for(let E=0;E<p;++E)for(const j of _){const U=j.getDataBytes();E<U.length&&S.appendBits(U[E],8)}for(let E=0;E<x;++E)for(const j of _){const U=j.getErrorCorrectionBytes();E<U.length&&S.appendBits(U[E],8)}if(s!==S.getSizeInBytes())throw new en("Interleaving error: "+s+" and "+S.getSizeInBytes()+" differ.");return S}static generateECBytes(r,s){const l=r.length,u=new Int32Array(l+s);for(let p=0;p<l;p++)u[p]=r[p]&255;new Ml(tt.QR_CODE_FIELD_256).encode(u,s);const d=new Uint8Array(s);for(let p=0;p<s;p++)d[p]=u[l+p];return d}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,l,u){const d=l.getCharacterCountBits(s);if(r>=1<<d)throw new en(r+" is bigger than "+((1<<d)-1));u.appendBits(r,d)}static appendBytes(r,s,l,u){switch(s){case lt.NUMERIC:sn.appendNumericBytes(r,l);break;case lt.ALPHANUMERIC:sn.appendAlphanumericBytes(r,l);break;case lt.BYTE:sn.append8BitBytes(r,l,u);break;case lt.KANJI:sn.appendKanjiBytes(r,l);break;default:throw new en("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=sn.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const l=r.length;let u=0;for(;u<l;){const d=sn.getDigit(r.charAt(u));if(u+2<l){const p=sn.getDigit(r.charAt(u+1)),x=sn.getDigit(r.charAt(u+2));s.appendBits(d*100+p*10+x,10),u+=3}else if(u+1<l){const p=sn.getDigit(r.charAt(u+1));s.appendBits(d*10+p,7),u+=2}else s.appendBits(d,4),u++}}static appendAlphanumericBytes(r,s){const l=r.length;let u=0;for(;u<l;){const d=sn.getAlphanumericCode(r.charCodeAt(u));if(d===-1)throw new en;if(u+1<l){const p=sn.getAlphanumericCode(r.charCodeAt(u+1));if(p===-1)throw new en;s.appendBits(d*45+p,11),u+=2}else s.appendBits(d,6),u++}}static append8BitBytes(r,s,l){let u;try{u=$.encode(r,l)}catch(d){throw new en(d)}for(let d=0,p=u.length;d!==p;d++){const x=u[d];s.appendBits(x,8)}}static appendKanjiBytes(r,s){let l;try{l=$.encode(r,M.SJIS)}catch(d){throw new en(d)}const u=l.length;for(let d=0;d<u;d+=2){const p=l[d]&255,x=l[d+1]&255,_=p<<8&4294967295|x;let S=-1;if(_>=33088&&_<=40956?S=_-33088:_>=57408&&_<=60351&&(S=_-49472),S===-1)throw new en("Invalid byte sequence");const E=(S>>8)*192+(S&255);s.appendBits(E,13)}}static appendECI(r,s){s.appendBits(lt.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}sn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),sn.DEFAULT_BYTE_MODE_ENCODING=M.UTF8.getName();class qi{write(r,s,l,u=null){if(r.length===0)throw new b("Found empty contents");if(s<0||l<0)throw new b("Requested dimensions are too small: "+s+"x"+l);let d=It.L,p=qi.QUIET_ZONE_SIZE;u!==null&&(u.get(Cn.ERROR_CORRECTION)!==void 0&&(d=It.fromString(u.get(Cn.ERROR_CORRECTION).toString())),u.get(Cn.MARGIN)!==void 0&&(p=Number.parseInt(u.get(Cn.MARGIN).toString(),10)));const x=sn.encode(r,d,u);return this.renderResult(x,s,l,p)}writeToDom(r,s,l,u,d=null){typeof r=="string"&&(r=document.querySelector(r));const p=this.write(s,l,u,d);r&&r.appendChild(p)}renderResult(r,s,l,u){const d=r.getMatrix();if(d===null)throw new Xt;const p=d.getWidth(),x=d.getHeight(),_=p+u*2,S=x+u*2,E=Math.max(s,_),j=Math.max(l,S),U=Math.min(Math.floor(E/_),Math.floor(j/S)),X=Math.floor((E-p*U)/2),te=Math.floor((j-x*U)/2),re=this.createSVGElement(E,j);for(let ce=0,fe=te;ce<x;ce++,fe+=U)for(let Me=0,Re=X;Me<p;Me++,Re+=U)if(d.get(Me,ce)===1){const Ie=this.createSvgRectElement(Re,fe,U,U);re.appendChild(Ie)}return re}createSVGElement(r,s){const l=document.createElementNS(qi.SVG_NS,"svg");return l.setAttributeNS(null,"height",r.toString()),l.setAttributeNS(null,"width",s.toString()),l}createSvgRectElement(r,s,l,u){const d=document.createElementNS(qi.SVG_NS,"rect");return d.setAttributeNS(null,"x",r.toString()),d.setAttributeNS(null,"y",s.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",u.toString()),d.setAttributeNS(null,"fill","#000000"),d}}qi.QUIET_ZONE_SIZE=4,qi.SVG_NS="http://www.w3.org/2000/svg";class Oi{encode(r,s,l,u,d){if(r.length===0)throw new b("Found empty contents");if(s!==ae.QR_CODE)throw new b("Can only encode QR_CODE, but got "+s);if(l<0||u<0)throw new b(`Requested dimensions are too small: ${l}x${u}`);let p=It.L,x=Oi.QUIET_ZONE_SIZE;d!==null&&(d.get(Cn.ERROR_CORRECTION)!==void 0&&(p=It.fromString(d.get(Cn.ERROR_CORRECTION).toString())),d.get(Cn.MARGIN)!==void 0&&(x=Number.parseInt(d.get(Cn.MARGIN).toString(),10)));const _=sn.encode(r,p,d);return Oi.renderResult(_,l,u,x)}static renderResult(r,s,l,u){const d=r.getMatrix();if(d===null)throw new Xt;const p=d.getWidth(),x=d.getHeight(),_=p+u*2,S=x+u*2,E=Math.max(s,_),j=Math.max(l,S),U=Math.min(Math.floor(E/_),Math.floor(j/S)),X=Math.floor((E-p*U)/2),te=Math.floor((j-x*U)/2),re=new Ne(E,j);for(let ce=0,fe=te;ce<x;ce++,fe+=U)for(let Me=0,Re=X;Me<p;Me++,Re+=U)d.get(Me,ce)===1&&re.setRegion(Re,fe,U,U);return re}}Oi.QUIET_ZONE_SIZE=4;class ds{encode(r,s,l,u,d){let p;switch(s){case ae.QR_CODE:p=new Oi;break;default:throw new b("No encoder available for format "+s)}return p.encode(r,s,l,u,d)}}class hi extends ie{constructor(r,s,l,u,d,p,x,_){if(super(p,x),this.yuvData=r,this.dataWidth=s,this.dataHeight=l,this.left=u,this.top=d,u+p>s||d+x>l)throw new b("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(p,x)}getRow(r,s){if(r<0||r>=this.getHeight())throw new b("Requested row is outside the image: "+r);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(r+this.top)*this.dataWidth+this.left;return R.arraycopy(this.yuvData,u,s,0,l),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const l=r*s,u=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return R.arraycopy(this.yuvData,d,u,0,l),u;for(let p=0;p<s;p++){const x=p*r;R.arraycopy(this.yuvData,d,u,x,r),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,s,l,u){return new hi(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,l,u,!1)}renderThumbnail(){const r=this.getWidth()/hi.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/hi.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(r*s),u=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let p=0;p<s;p++){const x=p*r;for(let _=0;_<r;_++){const S=u[d+_*hi.THUMBNAIL_SCALE_FACTOR]&255;l[x+_]=4278190080|S*65793}d+=this.dataWidth*hi.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/hi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/hi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const l=this.yuvData;for(let u=0,d=this.top*this.dataWidth+this.left;u<s;u++,d+=this.dataWidth){const p=d+r/2;for(let x=d,_=d+r-1;x<p;x++,_--){const S=l[x];l[x]=l[_],l[_]=S}}}invert(){return new Ae(this)}}hi.THUMBNAIL_SCALE_FACTOR=2;class hs extends ie{constructor(r,s,l,u,d,p,x){if(super(s,l),this.dataWidth=u,this.dataHeight=d,this.left=p,this.top=x,r.BYTES_PER_ELEMENT===4){const _=s*l,S=new Uint8ClampedArray(_);for(let E=0;E<_;E++){const j=r[E],U=j>>16&255,X=j>>7&510,te=j&255;S[E]=(U+X+te)/4&255}this.luminances=S}else this.luminances=r;if(u===void 0&&(this.dataWidth=s),d===void 0&&(this.dataHeight=l),p===void 0&&(this.left=0),x===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+l>this.dataHeight)throw new b("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new b("Requested row is outside the image: "+r);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(r+this.top)*this.dataWidth+this.left;return R.arraycopy(this.luminances,u,s,0,l),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const l=r*s,u=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return R.arraycopy(this.luminances,d,u,0,l),u;for(let p=0;p<s;p++){const x=p*r;R.arraycopy(this.luminances,d,u,x,r),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,s,l,u){return new hs(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new Ae(this)}}class Ar extends M{static forName(r){return this.getCharacterSetECIByName(r)}}class Ta{}Ta.ISO_8859_1=M.ISO8859_1;class Rl{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class yu{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class Ol{constructor(r){this.previous=r}getPrevious(){return this.previous}}class Ki extends Ol{constructor(r,s,l){super(r),this.value=s,this.bitCount=l}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new Ki(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ki(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+k.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class Ll extends Ki{constructor(r,s,l){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=l}appendTo(r,s){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):l===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+l],8)}addBinaryShift(r,s){return new Ll(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function rf(D,r,s){return new Ll(D,r,s)}function zs(D,r,s){return new Ki(D,r,s)}const sf=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Bn=0,Li=1,Dr=2,fi=3,pi=4,Us=new Ki(null,0,0),Pl=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Ho(D){for(let r of D)P.fill(r,-1);return D[Bn][pi]=0,D[Li][pi]=0,D[Li][Bn]=28,D[fi][pi]=0,D[Dr][pi]=0,D[Dr][Bn]=15,D}const Dl=Ho(P.createInt32Array(6,6));class Er{constructor(r,s,l,u){this.token=r,this.mode=s,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let l=this.bitCount,u=this.token;if(r!==this.mode){let p=Pl[this.mode][r];u=zs(u,p&65535,p>>16),l+=p>>16}let d=r===Dr?4:5;return u=zs(u,s,d),new Er(u,r,0,l+d)}shiftAndAppend(r,s){let l=this.token,u=this.mode===Dr?4:5;return l=zs(l,Dl[this.mode][r],u),l=zs(l,s,5),new Er(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(r){let s=this.token,l=this.mode,u=this.bitCount;if(this.mode===pi||this.mode===Dr){let x=Pl[l][Bn];s=zs(s,x&65535,x>>16),u+=x>>16,l=Bn}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,p=new Er(s,l,this.binaryShiftByteCount+1,u+d);return p.binaryShiftByteCount===2078&&(p=p.endBinaryShift(r+1)),p}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=rf(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new Er(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(Pl[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=Er.calculateBinaryShiftCost(r)-Er.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let u=this.endBinaryShift(r.length).token;u!==null;u=u.getPrevious())s.unshift(u);let l=new G;for(const u of s)u.appendTo(l,r);return l}toString(){return se.format("%s bits=%d bytes=%d",sf[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}Er.INITIAL_STATE=new Er(Us,Bn,0,0);function of(D){const r=se.getCharCode(" "),s=se.getCharCode("."),l=se.getCharCode(",");D[Bn][r]=1;const u=se.getCharCode("Z"),d=se.getCharCode("A");for(let U=d;U<=u;U++)D[Bn][U]=U-d+2;D[Li][r]=1;const p=se.getCharCode("z"),x=se.getCharCode("a");for(let U=x;U<=p;U++)D[Li][U]=U-x+2;D[Dr][r]=1;const _=se.getCharCode("9"),S=se.getCharCode("0");for(let U=S;U<=_;U++)D[Dr][U]=U-S+2;D[Dr][l]=12,D[Dr][s]=13;const E=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let U=0;U<E.length;U++)D[fi][se.getCharCode(E[U])]=U;const j=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let U=0;U<j.length;U++)se.getCharCode(j[U])>0&&(D[pi][se.getCharCode(j[U])]=U);return D}const mi=of(P.createInt32Array(5,256));class Qi{constructor(r){this.text=r}encode(){const r=se.getCharCode(" "),s=se.getCharCode(`
`);let l=yu.singletonList(Er.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let p,x=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case se.getCharCode("\r"):p=x===s?2:0;break;case se.getCharCode("."):p=x===r?3:0;break;case se.getCharCode(","):p=x===r?4:0;break;case se.getCharCode(":"):p=x===r?5:0;break;default:p=0}p>0?(l=Qi.updateStateListForPair(l,d,p),d++):l=this.updateStateListForChar(l,d)}return yu.min(l,(d,p)=>d.getBitCount()-p.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const l=[];for(let u of r)this.updateStateForChar(u,s,l);return Qi.simplifyStates(l)}updateStateForChar(r,s,l){let u=this.text[s]&255,d=mi[r.getMode()][u]>0,p=null;for(let x=0;x<=pi;x++){let _=mi[x][u];if(_>0){if(p==null&&(p=r.endBinaryShift(s)),!d||x===r.getMode()||x===Dr){const S=p.latchAndAppend(x,_);l.push(S)}if(!d&&Dl[r.getMode()][x]>=0){const S=p.shiftAndAppend(x,_);l.push(S)}}}if(r.getBinaryShiftByteCount()>0||mi[r.getMode()][u]===0){let x=r.addBinaryShiftChar(s);l.push(x)}}static updateStateListForPair(r,s,l){const u=[];for(let d of r)this.updateStateForPair(d,s,l,u);return this.simplifyStates(u)}static updateStateForPair(r,s,l,u){let d=r.endBinaryShift(s);if(u.push(d.latchAndAppend(pi,l)),r.getMode()!==pi&&u.push(d.shiftAndAppend(pi,l)),l===3||l===4){let p=d.latchAndAppend(Dr,16-l).latchAndAppend(Dr,1);u.push(p)}if(r.getBinaryShiftByteCount()>0){let p=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);u.push(p)}}static simplifyStates(r){let s=[];for(const l of r){let u=!0;for(const d of s){if(d.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(d)&&(s=s.filter(p=>p!==d))}u&&s.push(l)}return s}}class zt{constructor(){}static encodeBytes(r){return zt.encode(r,zt.DEFAULT_EC_PERCENT,zt.DEFAULT_AZTEC_LAYERS)}static encode(r,s,l){let u=new Qi(r).encode(),d=k.truncDivision(u.getSize()*s,100)+11,p=u.getSize()+d,x,_,S,E,j;if(l!==zt.DEFAULT_AZTEC_LAYERS){if(x=l<0,_=Math.abs(l),_>(x?zt.MAX_NB_BITS_COMPACT:zt.MAX_NB_BITS))throw new b(se.format("Illegal value %s for layers",l));S=zt.totalBitsInLayer(_,x),E=zt.WORD_SIZE[_];let Ie=S-S%E;if(j=zt.stuffBits(u,E),j.getSize()+d>Ie)throw new b("Data to large for user specified layer");if(x&&j.getSize()>E*64)throw new b("Data to large for user specified layer")}else{E=0,j=null;for(let Ie=0;;Ie++){if(Ie>zt.MAX_NB_BITS)throw new b("Data too large for an Aztec code");if(x=Ie<=3,_=x?Ie+1:Ie,S=zt.totalBitsInLayer(_,x),p>S)continue;(j==null||E!==zt.WORD_SIZE[_])&&(E=zt.WORD_SIZE[_],j=zt.stuffBits(u,E));let kt=S-S%E;if(!(x&&j.getSize()>E*64)&&j.getSize()+d<=kt)break}}let U=zt.generateCheckWords(j,S,E),X=j.getSize()/E,te=zt.generateModeMessage(x,_,X),re=(x?11:14)+_*4,ce=new Int32Array(re),fe;if(x){fe=re;for(let Ie=0;Ie<ce.length;Ie++)ce[Ie]=Ie}else{fe=re+1+2*k.truncDivision(k.truncDivision(re,2)-1,15);let Ie=k.truncDivision(re,2),kt=k.truncDivision(fe,2);for(let Ct=0;Ct<Ie;Ct++){let mn=Ct+k.truncDivision(Ct,15);ce[Ie-Ct-1]=kt-mn-1,ce[Ie+Ct]=kt+mn+1}}let Me=new Ne(fe);for(let Ie=0,kt=0;Ie<_;Ie++){let Ct=(_-Ie)*4+(x?9:12);for(let mn=0;mn<Ct;mn++){let hr=mn*2;for(let fr=0;fr<2;fr++)U.get(kt+hr+fr)&&Me.set(ce[Ie*2+fr],ce[Ie*2+mn]),U.get(kt+Ct*2+hr+fr)&&Me.set(ce[Ie*2+mn],ce[re-1-Ie*2-fr]),U.get(kt+Ct*4+hr+fr)&&Me.set(ce[re-1-Ie*2-fr],ce[re-1-Ie*2-mn]),U.get(kt+Ct*6+hr+fr)&&Me.set(ce[re-1-Ie*2-mn],ce[Ie*2+fr])}kt+=Ct*8}if(zt.drawModeMessage(Me,x,fe,te),x)zt.drawBullsEye(Me,k.truncDivision(fe,2),5);else{zt.drawBullsEye(Me,k.truncDivision(fe,2),7);for(let Ie=0,kt=0;Ie<k.truncDivision(re,2)-1;Ie+=15,kt+=16)for(let Ct=k.truncDivision(fe,2)&1;Ct<fe;Ct+=2)Me.set(k.truncDivision(fe,2)-kt,Ct),Me.set(k.truncDivision(fe,2)+kt,Ct),Me.set(Ct,k.truncDivision(fe,2)-kt),Me.set(Ct,k.truncDivision(fe,2)+kt)}let Re=new Rl;return Re.setCompact(x),Re.setSize(fe),Re.setLayers(_),Re.setCodeWords(X),Re.setMatrix(Me),Re}static drawBullsEye(r,s,l){for(let u=0;u<l;u+=2)for(let d=s-u;d<=s+u;d++)r.set(d,s-u),r.set(d,s+u),r.set(s-u,d),r.set(s+u,d);r.set(s-l,s-l),r.set(s-l+1,s-l),r.set(s-l,s-l+1),r.set(s+l,s-l),r.set(s+l,s-l+1),r.set(s+l,s+l-1)}static generateModeMessage(r,s,l){let u=new G;return r?(u.appendBits(s-1,2),u.appendBits(l-1,6),u=zt.generateCheckWords(u,28,4)):(u.appendBits(s-1,5),u.appendBits(l-1,11),u=zt.generateCheckWords(u,40,4)),u}static drawModeMessage(r,s,l,u){let d=k.truncDivision(l,2);if(s)for(let p=0;p<7;p++){let x=d-3+p;u.get(p)&&r.set(x,d-5),u.get(p+7)&&r.set(d+5,x),u.get(20-p)&&r.set(x,d+5),u.get(27-p)&&r.set(d-5,x)}else for(let p=0;p<10;p++){let x=d-5+p+k.truncDivision(p,5);u.get(p)&&r.set(x,d-7),u.get(p+10)&&r.set(d+7,x),u.get(29-p)&&r.set(x,d+7),u.get(39-p)&&r.set(d-7,x)}}static generateCheckWords(r,s,l){let u=r.getSize()/l,d=new Ml(zt.getGF(l)),p=k.truncDivision(s,l),x=zt.bitsToWords(r,l,p);d.encode(x,p-u);let _=s%l,S=new G;S.appendBits(0,_);for(const E of Array.from(x))S.appendBits(E,l);return S}static bitsToWords(r,s,l){let u=new Int32Array(l),d,p;for(d=0,p=r.getSize()/s;d<p;d++){let x=0;for(let _=0;_<s;_++)x|=r.get(d*s+_)?1<<s-_-1:0;u[d]=x}return u}static getGF(r){switch(r){case 4:return tt.AZTEC_PARAM;case 6:return tt.AZTEC_DATA_6;case 8:return tt.AZTEC_DATA_8;case 10:return tt.AZTEC_DATA_10;case 12:return tt.AZTEC_DATA_12;default:throw new b("Unsupported word size "+r)}}static stuffBits(r,s){let l=new G,u=r.getSize(),d=(1<<s)-2;for(let p=0;p<u;p+=s){let x=0;for(let _=0;_<s;_++)(p+_>=u||r.get(p+_))&&(x|=1<<s-1-_);(x&d)===d?(l.appendBits(x&d,s),p--):x&d?l.appendBits(x,s):(l.appendBits(x|1,s),p--)}return l}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}zt.DEFAULT_EC_PERCENT=33,zt.DEFAULT_AZTEC_LAYERS=0,zt.MAX_NB_BITS=32,zt.MAX_NB_BITS_COMPACT=4,zt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Vs{encode(r,s,l,u){return this.encodeWithHints(r,s,l,u,null)}encodeWithHints(r,s,l,u,d){let p=Ta.ISO_8859_1,x=zt.DEFAULT_EC_PERCENT,_=zt.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(Cn.CHARACTER_SET)&&(p=Ar.forName(d.get(Cn.CHARACTER_SET).toString())),d.has(Cn.ERROR_CORRECTION)&&(x=k.parseInt(d.get(Cn.ERROR_CORRECTION).toString())),d.has(Cn.AZTEC_LAYERS)&&(_=k.parseInt(d.get(Cn.AZTEC_LAYERS).toString()))),Vs.encodeLayers(r,s,l,u,p,x,_)}static encodeLayers(r,s,l,u,d,p,x){if(s!==ae.AZTEC)throw new b("Can only encode AZTEC, but got "+s);let _=zt.encode(se.getBytes(r,d),p,x);return Vs.renderResult(_,l,u)}static renderResult(r,s,l){let u=r.getMatrix();if(u==null)throw new Xt;let d=u.getWidth(),p=u.getHeight(),x=Math.max(s,d),_=Math.max(l,p),S=Math.min(x/d,_/p),E=(x-d*S)/2,j=(_-p*S)/2,U=new Ne(x,_);for(let X=0,te=j;X<p;X++,te+=S)for(let re=0,ce=E;re<d;re++,ce+=S)u.get(re,X)&&U.setRegion(ce,te,S,S);return U}}n.AbstractExpandedDecoder=ci,n.ArgumentException=C,n.ArithmeticException=Rt,n.AztecCode=Rl,n.AztecCodeReader=Ce,n.AztecCodeWriter=Vs,n.AztecDecoder=ht,n.AztecDetector=we,n.AztecDetectorResult=qt,n.AztecEncoder=zt,n.AztecHighLevelEncoder=Qi,n.AztecPoint=W,n.BarcodeFormat=ae,n.Binarizer=z,n.BinaryBitmap=T,n.BitArray=G,n.BitMatrix=Ne,n.BitSource=Ds,n.BrowserAztecCodeReader=Pe,n.BrowserBarcodeReader=Do,n.BrowserCodeReader=Ke,n.BrowserDatamatrixCodeReader=El,n.BrowserMultiFormatReader=gu,n.BrowserPDF417Reader=Xi,n.BrowserQRCodeReader=xu,n.BrowserQRCodeSvgWriter=qi,n.CharacterSetECI=M,n.ChecksumException=I,n.Code128Reader=pe,n.Code39Reader=Be,n.DataMatrixDecodedBitStreamParser=Cr,n.DataMatrixReader=Qt,n.DecodeHintType=q,n.DecoderResult=Ue,n.DefaultGridSampler=Hn,n.DetectorResult=St,n.EAN13Reader=Jt,n.EncodeHintType=Cn,n.Exception=y,n.FormatException=Y,n.GenericGF=tt,n.GenericGFPoly=Ze,n.GlobalHistogramBinarizer=le,n.GridSampler=Dt,n.GridSamplerInstance=rn,n.HTMLCanvasElementLuminanceSource=ve,n.HybridBinarizer=ke,n.ITFReader=We,n.IllegalArgumentException=b,n.IllegalStateException=Xt,n.InvertedLuminanceSource=Ae,n.LuminanceSource=ie,n.MathUtils=ft,n.MultiFormatOneDReader=Yi,n.MultiFormatReader=mu,n.MultiFormatWriter=ds,n.NotFoundException=oe,n.OneDReader=he,n.PDF417DecodedBitStreamParser=me,n.PDF417DecoderErrorCorrection=Sa,n.PDF417Reader=Zn,n.PDF417ResultMetadata=kl,n.PerspectiveTransform=Kt,n.PlanarYUVLuminanceSource=hi,n.QRCodeByteMatrix=Vo,n.QRCodeDataMask=tr,n.QRCodeDecodedBitStreamParser=an,n.QRCodeDecoderErrorCorrectionLevel=It,n.QRCodeDecoderFormatInformation=er,n.QRCodeEncoder=sn,n.QRCodeEncoderQRCode=us,n.QRCodeMaskUtil=pn,n.QRCodeMatrixUtil=dt,n.QRCodeMode=lt,n.QRCodeReader=Wn,n.QRCodeVersion=He,n.QRCodeWriter=Oi,n.RGBLuminanceSource=hs,n.RSS14Reader=vn,n.RSSExpandedReader=Ee,n.ReaderException=Sr,n.ReedSolomonDecoder=Vn,n.ReedSolomonEncoder=Ml,n.ReedSolomonException=yt,n.Result=Fe,n.ResultMetadataType=Qe,n.ResultPoint=Ye,n.StringUtils=se,n.UnsupportedOperationException=H,n.VideoInputDevice=xe,n.WhiteRectangleDetector=_t,n.WriterException=en,n.ZXingArrays=P,n.ZXingCharset=Ar,n.ZXingInteger=k,n.ZXingStandardCharsets=Ta,n.ZXingStringBuilder=be,n.ZXingStringEncoding=$,n.ZXingSystem=R,n.createAbstractExpandedDecoder=Po,Object.defineProperty(n,"__esModule",{value:!0})})})(Tp,Tp.exports);var Sn=Tp.exports;const _k=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var Hy=function(){function e(t,n,i){if(this.formatMap=new Map([[$e.QR_CODE,Sn.BarcodeFormat.QR_CODE],[$e.AZTEC,Sn.BarcodeFormat.AZTEC],[$e.CODABAR,Sn.BarcodeFormat.CODABAR],[$e.CODE_39,Sn.BarcodeFormat.CODE_39],[$e.CODE_93,Sn.BarcodeFormat.CODE_93],[$e.CODE_128,Sn.BarcodeFormat.CODE_128],[$e.DATA_MATRIX,Sn.BarcodeFormat.DATA_MATRIX],[$e.MAXICODE,Sn.BarcodeFormat.MAXICODE],[$e.ITF,Sn.BarcodeFormat.ITF],[$e.EAN_13,Sn.BarcodeFormat.EAN_13],[$e.EAN_8,Sn.BarcodeFormat.EAN_8],[$e.PDF_417,Sn.BarcodeFormat.PDF_417],[$e.RSS_14,Sn.BarcodeFormat.RSS_14],[$e.RSS_EXPANDED,Sn.BarcodeFormat.RSS_EXPANDED],[$e.UPC_A,Sn.BarcodeFormat.UPC_A],[$e.UPC_E,Sn.BarcodeFormat.UPC_E],[$e.UPC_EAN_EXTENSION,Sn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!_k)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var a=this.createZXingFormats(t),c=new Map;c.set(Sn.DecodeHintType.POSSIBLE_FORMATS,a),c.set(Sn.DecodeHintType.TRY_HARDER,!1),this.hints=c}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(i,a){try{i(n.decode(t))}catch(c){a(c)}})},e.prototype.decode=function(t){var n=new Sn.MultiFormatReader(this.verbose,this.hints),i=new Sn.HTMLCanvasElementLuminanceSource(t),a=new Sn.BinaryBitmap(new Sn.HybridBinarizer(i)),c=n.decode(a);return{text:c.text,format:gC.create(this.toHtml5QrcodeSupportedFormats(c.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,a){t.set(n,i)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],i=0,a=t;i<a.length;i++){var c=a[i];this.formatMap.has(c)?n.push(this.formatMap.get(c)):this.logger.logError("".concat(c," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),bk=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(C){try{y(i.next(C))}catch(b){f(b)}}function v(C){try{y(i.throw(C))}catch(b){f(b)}}function y(C){C.done?c(C.value):a(C.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},Ck=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(C){return v([y,C])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Wy=function(){function e(t,n,i){if(this.formatMap=new Map([[$e.QR_CODE,"qr_code"],[$e.AZTEC,"aztec"],[$e.CODABAR,"codabar"],[$e.CODE_39,"code_39"],[$e.CODE_93,"code_93"],[$e.CODE_128,"code_128"],[$e.DATA_MATRIX,"data_matrix"],[$e.ITF,"itf"],[$e.EAN_13,"ean_13"],[$e.EAN_8,"ean_8"],[$e.PDF_417,"pdf417"],[$e.UPC_A,"upc_a"],[$e.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return bk(this,void 0,void 0,function(){var n,i;return Ck(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=a.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:gC.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,i=0,a=0,c=t;a<c.length;a++){var f=c[a],g=f.boundingBox.width*f.boundingBox.height;g>i&&(i=g,n=f)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],i=0,a=t;i<a.length;i++){var c=a[i];this.formatMap.has(c)?n.push(this.formatMap.get(c)):this.logger.warn("".concat(c," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,a){t.set(n,i)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),Gy=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(C){try{y(i.next(C))}catch(b){f(b)}}function v(C){try{y(i.throw(C))}catch(b){f(b)}}function y(C){C.done?c(C.value):a(C.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},Zy=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(C){return v([y,C])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Sk=function(){function e(t,n,i,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&Wy.isSupported()?(this.primaryDecoder=new Wy(t,i,a),this.secondaryDecoder=new Hy(t,i,a)):this.primaryDecoder=new Hy(t,i,a)}return e.prototype.decodeAsync=function(t){return Gy(this,void 0,void 0,function(){var n;return Zy(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return Gy(this,void 0,void 0,function(){var n,i;return Zy(this,function(a){switch(a.label){case 0:n=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,a.sent()];case 3:if(i=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,i=this.executionResults;n<i.length;n++){var a=i[n];t+=a}var c=t/this.executionResults.length;console.log("".concat(c," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),_m=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),ah=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(C){try{y(i.next(C))}catch(b){f(b)}}function v(C){try{y(i.throw(C))}catch(b){f(b)}}function y(C){C.done?c(C.value):a(C.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},lh=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(C){return v([y,C])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},vC=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var i={advanced:[n]};return this.track.applyConstraints(i)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e}(),Ak=function(e){_m(t,e);function t(n,i){return e.call(this,n,i)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var i={};i[this.name]=n;var a={advanced:[i]};return this.track.applyConstraints(a)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(vC),Ek=function(e){_m(t,e);function t(n){return e.call(this,"zoom",n)||this}return t}(Ak),Nk=function(e){_m(t,e);function t(n){return e.call(this,"torch",n)||this}return t}(vC),Tk=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new Ek(this.track)},e.prototype.torchFeature=function(){return new Nk(this.track)},e}(),Ik=function(){function e(t,n,i){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=t.surface.clientWidth,a=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(i,a),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,i,a){return ah(this,void 0,void 0,function(){var c,f;return lh(this,function(g){switch(g.label){case 0:return c=new e(t,n,a),i.aspectRatio?(f={aspectRatio:i.aspectRatio},[4,c.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:g.sent(),g.label=2;case 2:return c.setupSurface(),[2,c]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,i=function(){setTimeout(t,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return ah(this,void 0,void 0,function(){return lh(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,i){var a=t.mediaStream.getVideoTracks(),c=a.length,f=0;t.mediaStream.getVideoTracks().forEach(function(g){t.mediaStream.removeTrack(g),g.stop(),++f,f>=c&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new Tk(this.getFirstTrackOrFail())},e}(),kk=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,i){return ah(this,void 0,void 0,function(){return lh(this,function(a){return[2,Ik.create(t,this.mediaStream,n,i)]})})},e.create=function(t){return ah(this,void 0,void 0,function(){var n,i;return lh(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=a.sent(),[2,new e(i)]}})})},e}(),Yy=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(C){try{y(i.next(C))}catch(b){f(b)}}function v(C){try{y(i.throw(C))}catch(b){f(b)}}function y(C){C.done?c(C.value):a(C.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},Xy=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(C){return v([y,C])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Mk=function(){function e(){}return e.failIfNotSupported=function(){return Yy(this,void 0,void 0,function(){return Xy(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return Yy(this,void 0,void 0,function(){return Xy(this,function(n){return[2,kk.create(t)]})})},e}(),Rk=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(C){try{y(i.next(C))}catch(b){f(b)}}function v(C){try{y(i.throw(C))}catch(b){f(b)}}function y(C){C.done?c(C.value):a(C.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},Ok=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(C){return v([y,C])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Lk=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Qa.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Qa.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return Rk(this,void 0,void 0,function(){var t,n,i,a,c,f,g;return Ok(this,function(v){switch(v.label){case 0:return t=function(y){for(var C=y.getVideoTracks(),b=0,T=C;b<T.length;b++){var I=T[b];I.enabled=!1,I.stop(),y.removeTrack(I)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=v.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=v.sent(),a=[],c=0,f=i;c<f.length;c++)g=f[c],g.kind==="videoinput"&&a.push({id:g.deviceId,label:g.label});return t(n),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var i=function(c){for(var f=[],g=0,v=c;g<v.length;g++){var y=v[g];y.kind==="video"&&f.push({id:y.id,label:y.label})}t(f)},a=MediaStreamTrack;a.getSources(i)})},e}(),kn;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(kn||(kn={}));var Pk=function(){function e(){this.state=kn.NOT_STARTED,this.onGoingTransactionNewState=kn.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===kn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=kn.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===kn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=kn.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==kn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case kn.UNKNOWN:throw"Transition from unknown is not allowed";case kn.NOT_STARTED:this.failIfNewStateIs(t,[kn.PAUSED]);break;case kn.SCANNING:break;case kn.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var i=0,a=n;i<a.length;i++){var c=a[i];if(t===c)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),Dk=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===kn.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==kn.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===kn.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===kn.PAUSED},e}(),jk=function(){function e(){}return e.create=function(){return new Dk(new Pk)},e}(),Bk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Qr=function(e){Bk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(Fi),Fk=function(){function e(t,n){this.logger=n,this.fps=Qr.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Qr.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?wC.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!ts(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),qy=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new yC(this.verbose),this.qrcode=new Sk(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=jk.create()}return e.prototype.start=function(t,n,i,a){var c=this;if(!t)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;a?f=a:f=this.verbose?this.logger.log:function(){};var g=Fk.create(n,this.logger);this.clearElement();var v=!1;g.videoConstraints&&(g.isMediaStreamConstraintsValid()?v=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var y=v,C=document.getElementById(this.elementId);C.clientWidth?C.clientWidth:Qr.DEFAULT_WIDTH,C.style.position="relative",this.shouldScan=!0,this.element=C;var b=this,T=this.stateManagerProxy.startTransition(kn.SCANNING);return new Promise(function(I,z){var R=y?g.videoConstraints:b.createVideoConstraints(t);if(!R){T.cancel(),z("videoConstraints should be defined");return}var B={};(!y||g.aspectRatio)&&(B.aspectRatio=g.aspectRatio);var F={onRenderSurfaceReady:function(P,k){b.setupUi(P,k,g),b.isScanning=!0,b.foreverScan(g,i,f)}};Mk.failIfNotSupported().then(function(P){P.create(R).then(function(k){return k.render(c.element,B,F).then(function(G){b.renderedCamera=G,T.execute(),I(null)}).catch(function(G){T.cancel(),z(G)})}).catch(function(k){T.cancel(),z(Qa.errorGettingUserMedia(k))})}).catch(function(P){T.cancel(),z(Qa.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(kn.PAUSED),this.showPausedState(),(ts(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(kn.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(kn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(t.element){var c=document.getElementById(Qr.SHADED_REGION_ELEMENT_ID);c&&t.element.removeChild(c)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),i(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),n.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(i){return i.decodedText})},e.prototype.scanFileV2=function(t,n){var i=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ts(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,c){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(t);var f=new Image;f.onload=function(){var g=f.width,v=f.height,y=document.getElementById(i.elementId),C=y.clientWidth?y.clientWidth:Qr.DEFAULT_WIDTH,b=Math.max(y.clientHeight?y.clientHeight:v,Qr.FILE_SCAN_MIN_HEIGHT),T=i.computeCanvasDrawConfig(g,v,C,b);if(n){var I=i.createCanvasElement(C,b,"qr-canvas-visible");I.style.display="inline-block",y.appendChild(I);var z=I.getContext("2d");if(!z)throw"Unable to get 2d context from canvas";z.canvas.width=C,z.canvas.height=b,z.drawImage(f,0,0,g,v,T.x,T.y,T.width,T.height)}var R=Qr.FILE_SCAN_HIDDEN_CANVAS_PADDING,B=Math.max(f.width,T.width),F=Math.max(f.height,T.height),P=B+2*R,k=F+2*R,G=i.createCanvasElement(P,k);y.appendChild(G);var K=G.getContext("2d");if(!K)throw"Unable to get 2d context from canvas";K.canvas.width=P,K.canvas.height=k,K.drawImage(f,0,0,g,v,R,R,B,F);try{i.qrcode.decodeRobustlyAsync(G).then(function(q){a(Uy.createFromQrcodeResult(q))}).catch(c)}catch(q){c("QR code parse error, error = ".concat(q))}},f.onerror=c,f.onabort=c,f.onstalled=c,f.onsuspend=c,f.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return Lk.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!wC.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[$e.QR_CODE,$e.AZTEC,$e.CODABAR,$e.CODE_39,$e.CODE_93,$e.CODE_128,$e.DATA_MATRIX,$e.MAXICODE,$e.ITF,$e.EAN_13,$e.EAN_8,$e.PDF_417,$e.RSS_14,$e.RSS_EXPANDED,$e.UPC_A,$e.UPC_E,$e.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],a=0,c=t.formatsToSupport;a<c.length;a++){var f=c[a];wk(f)?i.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(ts(t))return!0;if(!ts(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(ts(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return ts(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,i){var a=this,c=i.qrbox;this.validateQrboxConfig(c);var f=this.toQrdimensions(t,n,c),g=function(y){if(y<Qr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Qr.MIN_QR_BOX_SIZE,"px.")},v=function(y){return y>t&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),y=t),y};g(f.width),g(f.height),f.width=v(f.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(t,n)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return i},e.prototype.setupUi=function(t,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,i);var a=ts(i.qrbox)?{width:t,height:n}:i.qrbox;this.validateQrboxConfig(a);var c=this.toQrdimensions(t,n,a);c.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=i.isShadedBoxEnabled()&&c.height<=n,g={x:0,y:0,width:t,height:n},v=f?this.getShadedRegionBounds(t,n,c):g,y=this.createCanvasElement(v.width,v.height),C={willReadFrequently:!0},b=y.getContext("2d",C);b.canvas.width=v.width,b.canvas.height=v.height,this.element.append(y),f&&this.possiblyInsertShadingElement(this.element,t,n,c),this.createScannerPausedUiElement(this.element),this.qrRegion=v,this.context=b,this.canvasElement=y},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=Qa.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return t(a.text,Uy.createFromQrcodeResult(a)),i.possiblyUpdateShaders(!0),!0}).catch(function(a){i.possiblyUpdateShaders(!1);var c=Qa.codeParseError(a);return n(c,xC.createFrom(c)),!1})},e.prototype.foreverScan=function(t,n,i){var a=this;if(this.shouldScan&&this.renderedCamera){var c=this.renderedCamera.getSurface(),f=c.videoWidth/c.clientWidth,g=c.videoHeight/c.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var v=this.qrRegion.width*f,y=this.qrRegion.height*g,C=this.qrRegion.x*f,b=this.qrRegion.y*g;this.context.drawImage(c,C,b,v,y,0,0,this.qrRegion.width,this.qrRegion.height);var T=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(t,n,i)},a.getTimeoutFps(t.fps))};this.scanContext(n,i).then(function(I){!I&&t.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(n,i).finally(function(){T()})):T()}).catch(function(I){a.logger.logError("Error happend while scanning context",I),T()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",i="deviceId",a={user:!0,environment:!0},c="exact",f=function(z){if(z in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(z,"'")},g=Object.keys(t);if(g.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(g.length," keys");var v=Object.keys(t)[0];if(v!==n&&v!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(v===n){var y=t.facingMode;if(typeof y=="string"){if(f(y))return{facingMode:y}}else if(typeof y=="object")if(c in y){if(f(y["".concat(c)]))return{facingMode:{exact:y["".concat(c)]}}}else throw"'facingMode' should be string or object with"+" ".concat(c," as key.");else{var C=typeof y;throw"Invalid type of 'facingMode' = ".concat(C)}}else{var b=t.deviceId;if(typeof b=="string")return{deviceId:b};if(typeof b=="object"){if(c in b)return{deviceId:{exact:b["".concat(c)]}};throw"'deviceId' should be string or object with"+" ".concat(c," as key.")}else{var T=typeof b;throw"Invalid type of 'deviceId' = ".concat(T)}}}var I=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(I)},e.prototype.computeCanvasDrawConfig=function(t,n,i,a){if(t<=i&&n<=a){var c=(i-t)/2,f=(a-n)/2;return{x:c,y:f,width:t,height:n}}else{var g=t,v=n;return t>i&&(n=i/t*n,t=i),n>a&&(t=a/n*t,n=a),this.logger.log("Image downsampled from "+"".concat(g,"X").concat(v)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,i,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Qr.BORDER_SHADER_MATCH_COLOR:Qr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,i){var a=t,c=n,f=document.createElement("canvas");return f.style.width="".concat(a,"px"),f.style.height="".concat(c,"px"),f.style.display="none",f.id=ts(i)?"qr-canvas":i,f},e.prototype.getShadedRegionBounds=function(t,n,i){if(i.width>t||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},e.prototype.possiblyInsertShadingElement=function(t,n,i,a){if(!(n-a.width<1||i-a.height<1)){var c=document.createElement("div");c.style.position="absolute";var f=(n-a.width)/2,g=(i-a.height)/2;if(c.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderTop="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderBottom="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),c.style.boxSizing="border-box",c.style.top="0px",c.style.bottom="0px",c.style.left="0px",c.style.right="0px",c.id="".concat(Qr.SHADED_REGION_ELEMENT_ID),n-a.width<11||i-a.height<11)this.hasBorderShaders=!1;else{var v=5,y=40;this.insertShaderBorders(c,y,v,-v,null,0,!0),this.insertShaderBorders(c,y,v,-v,null,0,!1),this.insertShaderBorders(c,y,v,null,-v,0,!0),this.insertShaderBorders(c,y,v,null,-v,0,!1),this.insertShaderBorders(c,v,y+v,-v,null,-v,!0),this.insertShaderBorders(c,v,y+v,null,-v,-v,!0),this.insertShaderBorders(c,v,y+v,-v,null,-v,!1),this.insertShaderBorders(c,v,y+v,null,-v,-v,!1),this.hasBorderShaders=!0}t.append(c)}},e.prototype.insertShaderBorders=function(t,n,i,a,c,f,g){var v=document.createElement("div");v.style.position="absolute",v.style.backgroundColor=Qr.BORDER_SHADER_DEFAULT_COLOR,v.style.width="".concat(n,"px"),v.style.height="".concat(i,"px"),a!==null&&(v.style.top="".concat(a,"px")),c!==null&&(v.style.bottom="".concat(c,"px")),g?v.style.left="".concat(f,"px"):v.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(v),t.appendChild(v)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),bm="data:image/svg+xml;base64,",zk=bm+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Uk=bm+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Ky=bm+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",Vk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Qy=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),Hk=function(){function e(){this.data=Qy.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=Qy.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),Wk=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Vy.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var i=document.createElement("br"),a=document.createElement("br");this.infoDiv.appendChild(i),this.infoDiv.appendChild(a);var c=document.createElement("a");c.innerText=Vy.reportIssues(),c.href="https://github.com/mebjas/html5-qrcode/issues",c.target="new",c.style.color="white",this.infoDiv.appendChild(c),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),Gk=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Ky,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(i){return n.onHoverIn()},this.infoIcon.onmouseout=function(i){return n.onHoverOut()},this.infoIcon.onclick=function(i){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=Vk,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Ky,this.infoIcon.style.opacity="0.6")},e}(),Zk=function(){function e(){var t=this;this.infoDiv=new Wk,this.infoIcon=new Gk(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}(),Yk=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(C){try{y(i.next(C))}catch(b){f(b)}}function v(C){try{y(i.throw(C))}catch(b){f(b)}}function y(C){C.done?c(C.value):a(C.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},Xk=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(C){return v([y,C])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},$y=function(){function e(){}return e.hasPermissions=function(){return Yk(this,void 0,void 0,function(){var t,n,i,a;return Xk(this,function(c){switch(c.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=c.sent(),n=0,i=t;n<i.length;n++)if(a=i[n],a.kind==="videoinput"&&a.label)return[2,!0];return[2,!1]}})})},e}(),Ys=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var i=n[t];if(e.isCameraScanType(i))return!0}return!1},e.isCameraScanType=function(t){return t===Ao.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===Ao.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return Fi.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Fi.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var i=0,a=t;i<a.length;i++){var c=a[i];if(!Fi.DEFAULT_SUPPORTED_SCAN_TYPE.includes(c))throw"Unsupported scan type ".concat(c)}return t},e}(),ni=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),_s=function(){function e(){}return e.createElement=function(t,n){var i=document.createElement(t);return i.id=n,i.classList.add(ni.ALL_ELEMENT_CLASS),t==="button"&&i.setAttribute("type","button"),i},e}(),_C=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(C){try{y(i.next(C))}catch(b){f(b)}}function v(C){try{y(i.throw(C))}catch(b){f(b)}}function y(C){C.done?c(C.value):a(C.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},bC=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(C){return v([y,C])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Jy=function(){function e(t,n,i){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=i}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return _C(this,void 0,void 0,function(){var t,n;return bC(this,function(i){switch(i.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return i.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=i.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?tn.torchOffButton():tn.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var i=t?tn.torchOnFailedMessage():tn.torchOffFailedMessage();n&&(i+="; Error = "+n),this.onTorchActionFailureCallback(i)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),qk=function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=_s.createElement("button",ni.TORCH_BUTTON_ID),this.torchController=new Jy(t,this,n)}return e.prototype.render=function(t,n){var i=this;this.torchButton.innerText=tn.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var a=this;this.torchButton.addEventListener("click",function(c){return _C(i,void 0,void 0,function(){return bC(this,function(f){switch(f.label){case 0:return[4,a.torchController.flipState()];case 1:return f.sent(),a.torchController.isTorchEnabled()?(a.torchButton.classList.remove(ni.TORCH_BUTTON_CLASS_TORCH_OFF),a.torchButton.classList.add(ni.TORCH_BUTTON_CLASS_TORCH_ON)):(a.torchButton.classList.remove(ni.TORCH_BUTTON_CLASS_TORCH_ON),a.torchButton.classList.add(ni.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new Jy(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=tn.torchOnButton(),this.torchController.reset()},e.create=function(t,n,i,a){var c=new e(n,a);return c.render(t,i),c},e}(),Kk=function(){function e(t,n,i){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var a=document.createElement("label");a.setAttribute("for",this.getFileScanInputId()),a.style.display="inline-block",this.fileBasedScanRegion.appendChild(a),this.fileSelectionButton=_s.createElement("button",ni.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(g){a.click()}),a.append(this.fileSelectionButton),this.fileScanInput=_s.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",a.appendChild(this.fileScanInput);var c=this;this.fileScanInput.addEventListener("change",function(g){if(!(g==null||g.target==null)){var v=g.target;if(!(v.files&&v.files.length===0)){var y=v.files,C=y[0],b=C.name;c.setImageNameToButton(b),i(C)}}});var f=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(f),this.fileBasedScanRegion.addEventListener("dragenter",function(g){c.fileBasedScanRegion.style.border=c.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(g){c.fileBasedScanRegion.style.border=c.fileBasedScanRegionDefaultBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(g){c.fileBasedScanRegion.style.border=c.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(g){g.stopPropagation(),g.preventDefault(),c.fileBasedScanRegion.style.border=c.fileBasedScanRegionDefaultBorder();var v=g.dataTransfer;if(v){var y=v.files;if(!y||y.length===0)return;for(var C=!1,b=0;b<y.length;++b){var T=y.item(b);if(T){var I=/image.*/;if(T.type.match(I)){C=!0;var z=T.name;c.setImageNameToButton(z),i(T),f.innerText=tn.dragAndDropMessage();break}}}C||(f.innerText=tn.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=tn.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var n=20;if(t.length>n){var i=t.substring(0,8),a=t.length,c=t.substring(a-8,a);t="".concat(i,"....").concat(c)}var f=tn.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=f},e.prototype.setInitialValueToButton=function(){var t=tn.fileSelectionChooseImage()+" - "+tn.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,i){var a=new e(t,n,i);return a},e}(),Qk=function(){function e(t){this.selectElement=_s.createElement("select",ni.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var i=this.cameras.length;if(i===0)throw new Error("No cameras found");if(i===1)n.style.display="none";else{var a=tn.selectCamera();n.innerText="".concat(a," (").concat(this.cameras.length,")  ")}for(var c=1,f=0,g=this.cameras;f<g.length;f++){var v=g[f],y=v.id,C=v.label==null?y:v.label;(!C||C==="")&&(C=[tn.anonymousCameraPrefix(),c++].join(" "));var b=document.createElement("option");b.value=y,b.innerText=C,this.options.push(b),this.selectElement.appendChild(b)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,i=this.options;n<i.length;n++){var a=i[n];if(a.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var i=new e(n);return i.render(t),i},e}(),$k=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=_s.createElement("input",ni.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var i=tn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(i),this.rangeText.style.marginRight="10px";var a=this;this.rangeInput.addEventListener("input",function(){return a.onValueChange()}),this.rangeInput.addEventListener("change",function(){return a.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=tn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,i,a){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=a.toString(),this.rangeInput.value=i.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var i=new e;return i.render(t,n),i},e}(),$r;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})($r||($r={}));function Jk(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function e6(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var t6=function(){function e(t,n,i){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=i===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new Ys(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new yC(this.verbose),this.persistedDataManager=new Hk,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var i=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(c,f){if(t)t(c,f);else{if(i.lastMatchFound===c)return;i.lastMatchFound=c,i.setHeaderMessage(tn.lastMatch(c),$r.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(c,f){n&&n(c,f)};var a=document.getElementById(this.elementId);if(!a)throw"HTML Element with id=".concat(this.elementId," not found");a.innerHTML="",this.createBasicLayout(a),this.html5Qrcode=new qy(this.getScanRegionId(),e6(this.config,this.verbose))},e.prototype.pause=function(t){(ts(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var i=document.getElementById(t.elementId);i&&(i.innerHTML="",t.resetBasicLayout(i))};return this.html5Qrcode?new Promise(function(i,a){if(!t.html5Qrcode){i();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(c){if(!t.html5Qrcode){i();return}t.html5Qrcode.clear(),n(),i()}).catch(function(c){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",c),a(c)}):(t.html5Qrcode.clear(),n(),i())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=Fi.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!Fi.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=Fi.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=Fi.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:Fi.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Fi.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Fi.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),i=this.getScanRegionId();n.id=i,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),Ys.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var a=document.createElement("div"),c=this.getDashboardId();a.id=c,a.style.width="100%",t.appendChild(a),this.setupInitialDashboard(a)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n);var i=new Zk;i.renderInto(n);var a=document.createElement("div");a.id=this.getHeaderMessageContainerId(),a.style.display="none",a.style.textAlign="center",a.style.fontSize="14px",a.style.padding="2px 10px",a.style.margin="4px",a.style.borderTop="1px solid #f6f6f6",n.appendChild(a)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,i){var a=this;a.showHideScanTypeSwapLink(!1),a.setHeaderMessage(tn.cameraPermissionRequesting());var c=function(){i||a.createPermissionButton(t,n)};qy.getCameras().then(function(f){a.persistedDataManager.setHasPermission(!0),a.showHideScanTypeSwapLink(!0),a.resetHeaderMessage(),f&&f.length>0?(t.removeChild(n),a.renderCameraSelection(f)):(a.setHeaderMessage(tn.noCameraFound(),$r.STATUS_WARNING),c())}).catch(function(f){a.persistedDataManager.setHasPermission(!1),i?i.disabled=!1:c(),a.setHeaderMessage(f,$r.STATUS_WARNING),a.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var i=this,a=_s.createElement("button",this.getCameraPermissionButtonId());a.innerText=tn.cameraPermissionTitle(),a.addEventListener("click",function(){a.disabled=!0,i.createCameraListUi(t,n,a)}),n.appendChild(a)},e.prototype.createPermissionsUi=function(t,n){var i=this;if(Ys.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){$y.hasPermissions().then(function(a){a?i.createCameraListUi(t,n):(i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,n))}).catch(function(a){i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,n)});return}this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var i=document.createElement("div");i.id=this.getDashboardSectionCameraScanRegionId(),i.style.display=Ys.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(i);var a=document.createElement("div");a.style.textAlign="center",i.appendChild(a),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(i,a),this.renderFileScanUi(n)},e.prototype.renderFileScanUi=function(t){var n=Ys.isFileScanType(this.currentScanType),i=this,a=function(c){if(!i.html5Qrcode)throw"html5Qrcode not defined";Ys.isFileScanType(i.currentScanType)&&(i.setHeaderMessage(tn.loadingImage()),i.html5Qrcode.scanFileV2(c,!0).then(function(f){i.resetHeaderMessage(),i.qrCodeSuccessCallback(f.decodedText,f)}).catch(function(f){i.setHeaderMessage(f,$r.STATUS_WARNING),i.qrCodeErrorCallback(f,xC.createFrom(f))}))};this.fileSelectionUi=Kk.create(t,n,a)},e.prototype.renderCameraSelection=function(t){var n=this,i=this,a=document.getElementById(this.getDashboardSectionCameraScanRegionId());a.style.textAlign="center";var c=$k.create(a,!1),f=function(R){var B=R.zoomFeature();if(B.isSupported()){c.setOnCameraZoomValueChangeCallback(function(P){B.apply(P)});var F=1;n.config.defaultZoomValueIfSupported&&(F=n.config.defaultZoomValueIfSupported),F=vk(F,B.min(),B.max()),c.setValues(B.min(),B.max(),F,B.step()),c.show()}},g=Qk.create(a,t),v=document.createElement("span"),y=_s.createElement("button",ni.CAMERA_START_BUTTON_ID);y.innerText=tn.scanButtonStartScanningText(),v.appendChild(y);var C=_s.createElement("button",ni.CAMERA_STOP_BUTTON_ID);C.innerText=tn.scanButtonStopScanningText(),C.style.display="none",C.disabled=!0,v.appendChild(C);var b,T=function(R){if(!R.torchFeature().isSupported()){b&&b.hide();return}b?b.updateTorchCapability(R.torchFeature()):b=qk.create(v,R.torchFeature(),{display:"none",marginLeft:"5px"},function(B){i.setHeaderMessage(B,$r.STATUS_WARNING)}),b.show()};a.appendChild(v);var I=function(R){R||(y.style.display="none"),y.innerText=tn.scanButtonStartScanningText(),y.style.opacity="1",y.disabled=!1,R&&(y.style.display="inline-block")};if(y.addEventListener("click",function(R){y.innerText=tn.scanButtonScanningStarting(),g.disable(),y.disabled=!0,y.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!1),i.resetHeaderMessage();var B=g.getValue();i.persistedDataManager.setLastUsedCameraId(B),i.html5Qrcode.start(B,Jk(i.config),i.qrCodeSuccessCallback,i.qrCodeErrorCallback).then(function(F){C.disabled=!1,C.style.display="inline-block",I(!1);var P=i.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&T(P),n.config.showZoomSliderIfSupported===!0&&f(P)}).catch(function(F){i.showHideScanTypeSwapLink(!0),g.enable(),I(!0),i.setHeaderMessage(F,$r.STATUS_WARNING)})}),g.hasSingleItem()&&y.click(),C.addEventListener("click",function(R){if(!i.html5Qrcode)throw"html5Qrcode not defined";C.disabled=!0,i.html5Qrcode.stop().then(function(B){n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!0),g.enable(),y.disabled=!1,C.style.display="none",y.style.display="inline-block",b&&(b.reset(),b.hide()),c.removeOnCameraZoomValueChangeCallback(),c.hide(),i.insertCameraScanImageToScanRegion()}).catch(function(B){C.disabled=!1,i.setHeaderMessage(B,$r.STATUS_WARNING)})}),i.persistedDataManager.getLastUsedCameraId()){var z=i.persistedDataManager.getLastUsedCameraId();g.hasValue(z)?(g.setValue(z),y.click()):i.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=tn.textIfCameraScanSelected(),i=tn.textIfFileScanSelected(),a=document.getElementById(this.getDashboardSectionId()),c=document.createElement("div");c.style.textAlign="center";var f=_s.createElement("span",this.getDashboardSectionSwapLinkId());f.style.textDecoration="underline",f.style.cursor="pointer",f.innerText=Ys.isCameraScanType(this.currentScanType)?n:i,f.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,Ys.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),f.innerText=i,t.currentScanType=Ao.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),f.innerText=n,t.currentScanType=Ao.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),c.appendChild(f),a.appendChild(c)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){$y.hasPermissions().then(function(i){if(i){var a=document.getElementById(n.getCameraPermissionButtonId());if(!a)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";a.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(i){n.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=$r.STATUS_DEFAULT);var i=this.getHeaderMessageDiv();switch(i.innerText=t,i.style.display="block",n){case $r.STATUS_SUCCESS:i.style.background="rgba(106, 175, 80, 0.26)",i.style.color="#477735";break;case $r.STATUS_WARNING:i.style.background="rgba(203, 36, 49, 0.14)",i.style.color="#cb2431";break;case $r.STATUS_DEFAULT:default:i.style.background="rgba(0, 0, 0, 0)",i.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=zk,this.cameraScanImage.alt=tn.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Uk,this.fileScanImage.alt=tn.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return ni.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return ni.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();function n6({onScan:e,onClose:t}){const[n,i]=O.useState(""),[a,c]=O.useState("camera");O.useEffect(()=>{if(a==="camera"){const g=new t6("reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1,videoConstraints:{facingMode:{ideal:"environment"}}});return g.render(v=>{g.clear(),e(v)},v=>{}),()=>{g.clear()}}},[a,e]);const f=g=>{g.preventDefault(),n.trim()&&e(n.trim())};return m.jsxs("div",{className:"fixed inset-0 bg-black/90 z-50 flex flex-col pt-safe",children:[m.jsxs("div",{className:"flex justify-between items-center p-4 text-white",children:[m.jsx("h2",{className:"text-lg font-bold",children:"Scan AWB Barcode"}),m.jsx("button",{onClick:t,className:"p-2",children:m.jsx(ba,{})})]}),m.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:a==="camera"?m.jsx("div",{id:"reader",className:"w-full max-w-sm rounded-xl overflow-hidden bg-gray-800 border-2 border-primary-500"}):m.jsxs("form",{onSubmit:f,className:"w-full max-w-sm space-y-4",children:[m.jsx("input",{autoFocus:!0,className:"w-full p-4 rounded-xl bg-gray-800 text-white border border-gray-700 outline-none focus:border-primary-500 text-center text-2xl tracking-widest",placeholder:"ENTER AWB #",value:n,onChange:g=>i(g.target.value.toUpperCase())}),m.jsx("button",{className:"w-full py-4 bg-primary-600 text-white rounded-xl font-bold",children:"Submit Manually"})]})}),m.jsxs("div",{className:"p-8 flex justify-center gap-4",children:[m.jsxs("button",{onClick:()=>c("camera"),className:`p-4 rounded-full flex items-center gap-2 ${a==="camera"?"bg-primary-600 text-white":"bg-gray-800 text-gray-400"}`,children:[m.jsx(i8,{size:24})," ",m.jsx("span",{children:"Camera"})]}),m.jsxs("button",{onClick:()=>c("manual"),className:`p-4 rounded-full flex items-center gap-2 ${a==="manual"?"bg-primary-600 text-white":"bg-gray-800 text-gray-400"}`,children:[m.jsx(f8,{size:24})," ",m.jsx("span",{children:"Manual"})]})]})]})}function bl(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function r6(e,t){let n;const i=()=>{if(n)return n;const a=indexedDB.open(e);return a.onupgradeneeded=()=>a.result.createObjectStore(t),n=bl(a),n.then(c=>{c.onclose=()=>n=void 0},()=>{}),n};return(a,c)=>i().then(f=>c(f.transaction(t,a).objectStore(t)))}let Jf;function Gh(){return Jf||(Jf=r6("keyval-store","keyval")),Jf}function i6(e,t=Gh()){return t("readonly",n=>bl(n.get(e)))}function CC(e,t,n=Gh()){return n("readwrite",i=>(i.put(t,e),bl(i.transaction)))}function s6(e,t=Gh()){return t("readwrite",n=>(n.delete(e),bl(n.transaction)))}function o6(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},bl(e.transaction)}function SC(e=Gh()){return e("readonly",t=>{if(t.getAllKeys)return bl(t.getAllKeys());const n=[];return o6(t,i=>n.push(i.key)).then(()=>n)})}const Cm=async(e,t,n={})=>{const i=`${e}-${t}-${Date.now()}`,a={id:i,awb:e,event_id:t,payload:n,timestamp:new Date().toISOString(),status:"pending"};return await CC(`queue-${i}`,a),a},Sm=async()=>{const t=(await SC()).filter(i=>i.startsWith("queue-"));return(await Promise.all(t.map(i=>i6(i)))).sort((i,a)=>new Date(a.timestamp)-new Date(i.timestamp))},AC=async e=>{const n=(await Sm()).filter(i=>i.status==="pending");for(const i of n)try{await Wh(e,{awb:i.awb,event_id:i.event_id,timestamp:i.timestamp,payload:i.payload}),i.status="synced",await CC(`queue-${i.id}`,i)}catch(a){console.error("Sync failed for item",i.id,a)}},a6=async()=>{const e=await SC(),t=(Array.isArray(e)?e:[]).filter(n=>String(n).startsWith("queue-"));return await Promise.all(t.map(n=>s6(n))),t.length},l6=Object.freeze(Object.defineProperty({__proto__:null,clearQueue:a6,getQueue:Sm,queueItem:Cm,syncQueue:AC},Symbol.toStringTag,{value:"Module"})),$a=e=>String(e||"").trim().toUpperCase().replace(/\s+/g,"").replace(/[^A-Z0-9]/g,""),e2=e=>{const t=$a(e);if(!t)return{normalized:"",candidates:[],coreCandidate:null,parcelSuffixCandidate:null};const n=[t],i=t.slice(-3),a=t.slice(0,-3);return/[A-Z]/.test(t)&&t.length>=11&&/^\d{3}$/.test(i)&&i!=="000"&&a&&a!==t?(n.push(a),{normalized:t,candidates:n,coreCandidate:a,parcelSuffixCandidate:i}):{normalized:t,candidates:n,coreCandidate:null,parcelSuffixCandidate:null}};function c6({awb:e,onBack:t,onComplete:n}){var be,Ne,oe,le,ke,ie,Ae,ve,xe,Le,Ke,Fe,ne,ae,je,Qe,Ue,nt,Ze,Rt,tt,yt,Xt,Vn,ut,ht,ft,_r,Ye;const[i,a]=O.useState([]),[c,f]=O.useState(null),[g,v]=O.useState(!0),[y,C]=O.useState(!0),[b,T]=O.useState(null),[I,z]=O.useState(""),[R,B]=O.useState(null),[F,P]=O.useState(null),[k,G]=O.useState(!1),[K,q]=O.useState(""),[Y,ee]=O.useState(""),M=(()=>{if(!b)return null;const St=Number(b.number_of_parcels);if(Number.isFinite(St)&&St>0)return St;const qt=(b==null?void 0:b.raw_data)||{},_t=Number((qt==null?void 0:qt.numberOfDistinctBarcodes)??(qt==null?void 0:qt.numberOfParcels)??1);return Number.isFinite(_t)&&_t>0?_t:1})();O.useEffect(()=>{let St=!1;const qt=localStorage.getItem("token"),_t=e2(e);return z(_t.normalized),B(_t.normalized||null),P(null),v(!0),q(""),rC(qt).then(Dt=>{St||a(Dt)}).catch(()=>{St||q("Failed to load status options")}).finally(()=>{St||v(!1)}),C(!0),ee(""),T(null),(async()=>{var Hn,rn;let Dt=null;for(const W of _t.candidates)try{const we=await Gc(qt,W,{refresh:!0});if(St)return;T(we);const Ce=$a((we==null?void 0:we.awb)||"")||W;B(Ce||W),_t.coreCandidate&&_t.parcelSuffixCandidate&&_t.normalized&&Ce&&_t.normalized===`${_t.coreCandidate}${_t.parcelSuffixCandidate}`&&Ce===_t.coreCandidate?P(Number(_t.parcelSuffixCandidate)):P(null);return}catch(we){Dt=we;continue}if(St)return;const Kt=(rn=(Hn=Dt==null?void 0:Dt.response)==null?void 0:Hn.data)==null?void 0:rn.detail;ee(Kt?String(Kt):"Failed to load shipment details")})().finally(()=>{St||C(!1)}),()=>{St=!0}},[e]);const H=async()=>{var St,qt;C(!0),ee("");try{const _t=localStorage.getItem("token"),Dt=e2(e);let Kt=null;for(const Hn of Dt.candidates)try{const rn=await Gc(_t,Hn,{refresh:!0});T(rn);const W=$a((rn==null?void 0:rn.awb)||"")||Hn;B(W||Hn),Dt.coreCandidate&&Dt.parcelSuffixCandidate&&Dt.normalized&&W&&Dt.normalized===`${Dt.coreCandidate}${Dt.parcelSuffixCandidate}`&&W===Dt.coreCandidate?P(Number(Dt.parcelSuffixCandidate)):P(null),Kt=null;break}catch(rn){Kt=rn}if(Kt)throw Kt}catch(_t){const Dt=(qt=(St=_t==null?void 0:_t.response)==null?void 0:St.data)==null?void 0:qt.detail;ee(Dt?String(Dt):"Failed to load shipment details")}finally{C(!1)}},$=(St,qt="RON")=>{if(St==null||St==="")return"--";const _t=Number(St);return Number.isFinite(_t)?`${_t.toFixed(2)} ${String(qt||"RON").toUpperCase()}`:"--"},se=async()=>{var St,qt,_t,Dt,Kt,Hn,rn,W;if(c){G(!0);try{const we=localStorage.getItem("token"),Ce=R||$a(e),Pe=(b==null?void 0:b.locality)||((qt=(St=b==null?void 0:b.raw_data)==null?void 0:St.recipientLocation)==null?void 0:qt.locality)||((Dt=(_t=b==null?void 0:b.raw_data)==null?void 0:_t.recipientLocation)==null?void 0:Dt.localityName)||"",he={};Pe&&(he.locality=Pe),Number.isInteger(F)&&F>0&&(he.parcel_index=F),Number.isFinite(M)&&M>0&&(he.parcels_total=M),I&&Ce&&I!==Ce&&(he.scanned_identifier=I);const pe=Object.keys(he).length?he:void 0;await Wh(we,{awb:Ce,event_id:c,timestamp:new Date().toISOString(),payload:pe}),n("SUCCESS",{awb:Ce,parcel_index:he.parcel_index,parcels_total:he.parcels_total})}catch{const we=(b==null?void 0:b.locality)||((Hn=(Kt=b==null?void 0:b.raw_data)==null?void 0:Kt.recipientLocation)==null?void 0:Hn.locality)||((W=(rn=b==null?void 0:b.raw_data)==null?void 0:rn.recipientLocation)==null?void 0:W.localityName)||"",Ce=R||$a(e),Pe={};we&&(Pe.locality=we),Number.isInteger(F)&&F>0&&(Pe.parcel_index=F),Number.isFinite(M)&&M>0&&(Pe.parcels_total=M),I&&Ce&&I!==Ce&&(Pe.scanned_identifier=I);const he=Object.keys(Pe).length?Pe:void 0;await Cm(Ce,c,he||{}),n("QUEUED",{awb:Ce,parcel_index:Pe.parcel_index,parcels_total:Pe.parcels_total})}finally{G(!1)}}};return m.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[m.jsxs("div",{className:"p-4 flex items-center gap-4 bg-white dark:bg-gray-800 shadow-sm",children:[m.jsx("button",{onClick:t,className:"p-2 -ml-2 text-gray-600",children:m.jsx(Ms,{})}),m.jsxs("div",{children:[m.jsx("h1",{className:"font-bold text-gray-900 dark:text-white",children:"Update AWB"}),m.jsxs("p",{className:"text-xs text-primary-600 font-mono tracking-wider",children:[R||I||e,Number.isInteger(F)&&F>0?m.jsxs("span",{className:"ml-2 text-[10px] font-black uppercase tracking-widest text-primary-600",children:["Parcel ",F,Number.isFinite(M)&&M>0?`/${M}`:""]}):null]}),I&&R&&I!==R?m.jsxs("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-mono mt-1",children:["Scanned: ",I]}):null]})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[m.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Shipment"}),m.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white truncate",children:y?"Loading details...":(b==null?void 0:b.recipient_name)||"--"})]}),m.jsx("button",{type:"button",onClick:H,disabled:y,className:"p-2 rounded-xl border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 disabled:opacity-50",title:"Refresh shipment details","aria-label":"Refresh shipment details",children:m.jsx(Yr,{size:16,className:y?"animate-spin":""})})]}),Y?m.jsx("div",{className:"mt-3 p-3 bg-amber-100 text-amber-800 rounded-xl text-xs font-bold",children:Y}):null,b?m.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"col-span-2",children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Address"}),m.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-200",children:b.delivery_address||b.locality||"--"})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Phone"}),m.jsx("p",{className:"text-sm font-mono text-gray-900 dark:text-white truncate",children:b.recipient_phone||"--"})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Content"}),m.jsx("p",{className:"text-sm text-gray-900 dark:text-white truncate",children:b.content_description||((be=b==null?void 0:b.raw_data)==null?void 0:be.contentDescription)||((Ne=b==null?void 0:b.raw_data)==null?void 0:Ne.contents)||((oe=b==null?void 0:b.raw_data)==null?void 0:oe.content)||((le=b==null?void 0:b.raw_data)==null?void 0:le.packingList)||((ke=b==null?void 0:b.raw_data)==null?void 0:ke.packingListNumber)||((ie=b==null?void 0:b.raw_data)==null?void 0:ie.packingListId)||((Ae=b==null?void 0:b.raw_data)==null?void 0:Ae.packing_list)||((ve=b==null?void 0:b.raw_data)==null?void 0:ve.packing_list_number)||((xe=b==null?void 0:b.raw_data)==null?void 0:xe.packing_list_id)||((Le=b==null?void 0:b.raw_data)==null?void 0:Le.packageContent)||((Ke=b==null?void 0:b.raw_data)==null?void 0:Ke.shipmentContent)||((Fe=b==null?void 0:b.raw_data)==null?void 0:Fe.goodsDescription)||((ae=(ne=b==null?void 0:b.raw_data)==null?void 0:ne.additionalServices)==null?void 0:ae.contentDescription)||((Qe=(je=b==null?void 0:b.raw_data)==null?void 0:je.additionalServices)==null?void 0:Qe.contents)||((nt=(Ue=b==null?void 0:b.raw_data)==null?void 0:Ue.additionalServices)==null?void 0:nt.content)||((Rt=(Ze=b==null?void 0:b.raw_data)==null?void 0:Ze.additionalServices)==null?void 0:Rt.packingList)||((yt=(tt=b==null?void 0:b.raw_data)==null?void 0:tt.additionalServices)==null?void 0:yt.packingListNumber)||((Vn=(Xt=b==null?void 0:b.raw_data)==null?void 0:Xt.additionalServices)==null?void 0:Vn.packingListId)||((ht=(ut=b==null?void 0:b.raw_data)==null?void 0:ut.productCategory)==null?void 0:ht.name)||(typeof((ft=b==null?void 0:b.raw_data)==null?void 0:ft.productCategory)=="string"?b.raw_data.productCategory:"")||"--"})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"COD"}),m.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:$(b.cod_amount,b.currency||"RON")})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Parcels"}),m.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:Number.isFinite(Number(b.number_of_parcels))?Number(b.number_of_parcels):((_r=b==null?void 0:b.raw_data)==null?void 0:_r.numberOfDistinctBarcodes)||((Ye=b==null?void 0:b.raw_data)==null?void 0:Ye.numberOfParcels)||1})]}),Number.isInteger(F)&&F>0?m.jsxs("div",{children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Parcel"}),m.jsxs("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[F,Number.isFinite(M)&&M>0?`/${M}`:""]})]}):null]}):null]}),g?m.jsx("div",{className:"flex justify-center p-8",children:m.jsx(fn,{className:"animate-spin text-primary-500"})}):K?m.jsxs("div",{className:"p-4 bg-red-100 text-red-700 rounded-xl flex items-center gap-3",children:[m.jsx(ab,{size:20})," ",K]}):i.map(St=>m.jsxs("button",{onClick:()=>f(St.event_id),className:`w-full p-4 rounded-2xl text-left border-2 transition-all ${c===St.event_id?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-white dark:border-gray-800 bg-white dark:bg-gray-800"}`,children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:St.label}),c===St.event_id&&m.jsx(ub,{className:"text-primary-500",size:20})]}),m.jsx("p",{className:"text-sm text-gray-500",children:St.description})]},St.event_id))]}),m.jsx("div",{className:"p-4 bg-white dark:bg-gray-800 shadow-up",children:m.jsx("button",{disabled:!c||k,onClick:se,className:"w-full py-4 bg-primary-600 disabled:opacity-50 text-white rounded-xl font-bold flex items-center justify-center gap-2",children:k?m.jsx(fn,{className:"animate-spin"}):"Confirm Status Update"})})]})}function t2(){const[e,t]=O.useState(!1),[n,i]=O.useState(null),[a,c]=O.useState(null),[f,g]=O.useState(""),v=ur(),{user:y}=or();O.useEffect(()=>{const G=localStorage.getItem("token");G&&AC(G);const K=new Date().getHours();K<12?g("Good Morning"):K<18?g("Good Afternoon"):g("Good Evening")},[]);const C=G=>{const K=$a(G);K&&(i(K),t(!1))},b=(G,K=null)=>{const q=String((K==null?void 0:K.awb)||n||"").trim().toUpperCase(),Y=Number(K==null?void 0:K.parcel_index),ee=Number.isFinite(Y)&&Y>0?Y:null,M=Number(K==null?void 0:K.parcels_total),H=Number.isFinite(M)&&M>0?M:null;c({awb:q||n,outcome:G,parcel_index:ee,parcels_total:H}),i(null),setTimeout(()=>c(null),3e3)};if(n)return m.jsx(c6,{awb:n,onBack:()=>i(null),onComplete:b});const T=_n(y,Qo),I=_n(y,Br),z=_n(y,vo),R=_n(y,ji),B=_n(y,bi),F=String((y==null?void 0:y.role)||"")==="Recipient",P={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},k={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return m.jsxs(st.div,{initial:"hidden",animate:"visible",exit:{opacity:0,y:-20},variants:P,className:"flex flex-col min-h-screen relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-violet-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"0s"}}),m.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"3s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-glow-md animate-float",children:m.jsx("span",{className:"text-white font-black italic tracking-tighter text-xl",children:"AN"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-lg font-black text-gradient leading-none",children:"AryNik"}),m.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[m.jsxs("span",{className:"relative flex h-2 w-2",children:[m.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),m.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]}),m.jsx("span",{className:"text-[10px] font-bold text-emerald-400 uppercase tracking-widest",children:"Online"})]})]})]}),m.jsx("button",{type:"button",onClick:()=>v("/settings"),className:"w-10 h-10 rounded-full glass-light flex items-center justify-center border border-white/10 hover:bg-white/10 transition-colors","aria-label":"Account",title:"Account",children:m.jsx(_a,{size:18,className:"text-violet-300"})})]}),m.jsxs("main",{className:"flex-1 p-6 space-y-8 pb-32 relative z-10",children:[m.jsxs(st.div,{variants:k,children:[m.jsx("h2",{className:"text-3xl font-black text-white mb-1",children:f}),m.jsxs("p",{className:"text-slate-400 font-medium",children:[(y==null?void 0:y.name)||(y==null?void 0:y.username)||"Driver","  ",F?"Recipient Tracking":y!=null&&y.truck_plate?`Truck ${String(y.truck_plate).toUpperCase()}`:"Truck Unassigned"]}),!F&&(y!=null&&y.truck_phone)?m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-1",children:["Truck phone: ",y.truck_phone]}):null,F?m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-1",children:["Login: ",(y==null?void 0:y.username)||"--"]}):null]}),R?m.jsx(st.div,{variants:k,children:m.jsx(yk,{})}):null,a&&m.jsxs(st.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`p-4 rounded-2xl flex items-center gap-4 shadow-lg ${a.outcome==="SUCCESS"?"bg-gradient-to-r from-emerald-500 to-emerald-600 shadow-emerald-500/20":"bg-gradient-to-r from-violet-500 to-purple-600 shadow-violet-500/20"}`,children:[m.jsx("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-sm",children:m.jsx(cd,{size:20,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("span",{className:"font-black text-sm uppercase tracking-wide text-white",children:["Update ",a.outcome==="SUCCESS"?"Confirmed":"Queued"]}),m.jsxs("p",{className:"text-xs font-bold text-white/80",children:[a.awb,Number.isFinite(a.parcel_index)&&a.parcel_index>0?m.jsxs("span",{className:"ml-2 text-[10px] font-black uppercase tracking-widest text-white/80",children:["Parcel ",a.parcel_index,Number.isFinite(a.parcels_total)&&a.parcels_total>0?`/${a.parcels_total}`:""]}):null]})]})]}),m.jsxs(st.div,{variants:k,className:"space-y-4",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Quick Actions"}),T?m.jsxs(st.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(!0),className:"w-full py-12 bg-gradient-to-br from-violet-600 via-purple-600 to-violet-700 rounded-[32px] shadow-glow-lg flex flex-col items-center justify-center text-white space-y-5 relative overflow-hidden group",children:[m.jsx("div",{className:"absolute inset-0 shimmer opacity-30"}),m.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-white/10 rounded-full blur-3xl -ml-12 -mb-12"}),m.jsx("div",{className:"p-6 bg-white/10 rounded-3xl backdrop-blur-sm border border-white/20 group-hover:scale-110 group-hover:rotate-3 transition-all duration-500 shadow-inner-glow",children:m.jsx(y8,{size:52,strokeWidth:1.5,className:"animate-glow"})}),m.jsxs("div",{className:"text-center relative z-10",children:[m.jsx("h2",{className:"text-2xl font-black uppercase tracking-tight",children:"Scan Package"}),m.jsxs("p",{className:"text-violet-100 text-xs font-bold opacity-90 uppercase tracking-widest mt-1 flex items-center justify-center gap-2",children:[m.jsx(_b,{size:12}),"Tap to open scanner"]})]})]}):m.jsxs(st.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v("/shipments"),className:"w-full py-10 bg-gradient-to-br from-emerald-600 via-emerald-700 to-emerald-800 rounded-[32px] shadow-glow-lg flex flex-col items-center justify-center text-white space-y-4 relative overflow-hidden group",disabled:!I,children:[m.jsx("div",{className:"absolute inset-0 shimmer opacity-25"}),m.jsx("div",{className:"p-5 bg-white/10 rounded-3xl backdrop-blur-sm border border-white/20 group-hover:scale-110 group-hover:-rotate-2 transition-all duration-500 shadow-inner-glow",children:m.jsx(Ls,{size:44,strokeWidth:1.5})}),m.jsxs("div",{className:"text-center relative z-10",children:[m.jsx("h2",{className:"text-xl font-black uppercase tracking-tight",children:"Browse Shipments"}),m.jsxs("p",{className:"text-emerald-100 text-xs font-bold opacity-90 uppercase tracking-widest mt-1 flex items-center justify-center gap-2",children:[m.jsx(Kd,{size:12}),"View tracking list"]})]})]}),I&&m.jsxs(st.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v("/shipments"),className:"w-full p-5 glass-strong rounded-[28px] shadow-lg flex items-center gap-4 text-left group border-iridescent",children:[m.jsx("div",{className:"p-4 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-[20px] group-hover:shadow-glow-sm transition-all duration-300",children:m.jsx(Ls,{size:24,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("h3",{className:"font-black text-white uppercase text-sm tracking-tight flex items-center gap-2",children:["Search Shipments",m.jsx("span",{className:"text-[8px] bg-emerald-500/20 text-emerald-400 px-2 py-0.5 rounded-full font-bold",children:"LIVE"})]}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-0.5 flex items-center gap-1",children:[m.jsx(Kd,{size:10}),"Real-time tracking"]})]}),m.jsx("div",{className:"w-10 h-10 rounded-full glass-light flex items-center justify-center group-hover:translate-x-1 transition-transform border border-white/10",children:m.jsx(yo,{className:"text-slate-400",size:18})})]}),B&&m.jsxs(st.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v("/notifications"),className:"w-full p-5 glass-strong rounded-[28px] shadow-lg flex items-center gap-4 text-left group border-iridescent",children:[m.jsx("div",{className:"p-4 bg-gradient-to-br from-amber-500 to-orange-600 rounded-[20px] group-hover:shadow-glow-sm transition-all duration-300",children:m.jsx(Hc,{size:24,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"font-black text-white uppercase text-sm tracking-tight",children:"Notifications"}),m.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-0.5",children:"Allocation updates"})]}),m.jsx("div",{className:"w-10 h-10 rounded-full glass-light flex items-center justify-center group-hover:translate-x-1 transition-transform border border-white/10",children:m.jsx(yo,{className:"text-slate-400",size:18})})]}),z&&m.jsxs(st.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v("/users"),className:"w-full p-5 glass-strong rounded-[28px] shadow-lg flex items-center gap-4 text-left group border-iridescent",children:[m.jsx("div",{className:"p-4 bg-gradient-to-br from-violet-500 to-purple-600 rounded-[20px] group-hover:shadow-glow-sm transition-all duration-300",children:m.jsx(Qd,{size:24,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("h3",{className:"font-black text-white uppercase text-sm tracking-tight flex items-center gap-2",children:["Manage Users",m.jsx("span",{className:"text-[8px] bg-violet-500/20 text-violet-300 px-2 py-0.5 rounded-full font-bold",children:"RBAC"})]}),m.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-0.5",children:"Create accounts and set roles"})]}),m.jsx("div",{className:"w-10 h-10 rounded-full glass-light flex items-center justify-center group-hover:translate-x-1 transition-transform border border-white/10",children:m.jsx(yo,{className:"text-slate-400",size:18})})]})]})]}),e&&m.jsx(n6,{onScan:C,onClose:()=>t(!1)})]})}const u6="modulepreload",d6=function(e){return"/arynik1/"+e},n2={},EC=function(t,n,i){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),g=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));a=Promise.allSettled(n.map(v=>{if(v=d6(v),v in n2)return;n2[v]=!0;const y=v.endsWith(".css"),C=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${C}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":u6,y||(b.as="script"),b.crossOrigin="",b.href=v,g&&b.setAttribute("nonce",g),document.head.appendChild(b),y)return new Promise((T,I)=>{b.addEventListener("load",T),b.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${v}`)))})}))}function c(f){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=f,window.dispatchEvent(g),!g.defaultPrevented)throw f}return a.then(f=>{for(const g of f||[])g.status==="rejected"&&c(g.reason);return t().catch(c)})};function h6(){const[e,t]=O.useState(""),[n,i]=O.useState(""),[a,c]=O.useState(!1),[f,g]=O.useState(""),{login:v}=or(),y=ur(),C=async b=>{var T,I;b.preventDefault(),g(""),c(!0);try{const{login:z}=await EC(async()=>{const{login:B}=await Promise.resolve().then(()=>ck);return{login:B}},void 0),R=await z(e,n);if(R&&R.access_token)await v(R.access_token,R.role),y("/");else throw new Error("Invalid response from server")}catch(z){console.error("Login error:",z),g(((I=(T=z.response)==null?void 0:T.data)==null?void 0:I.detail)||z.message||"Invalid credentials. Please try again.")}finally{c(!1)}};return m.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center p-4",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-600/20 via-purple-600/10 to-pink-600/20 animate-pulse-slow"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-blue-600/10 via-transparent to-emerald-600/10"}),[...Array(20)].map((b,T)=>m.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*8}s`,animationDuration:`${8+Math.random()*4}s`}},T)),m.jsx("div",{className:"absolute top-10 left-20 w-72 h-72 bg-violet-500/30 rounded-full blur-3xl animate-float",style:{animationDelay:"0s"}}),m.jsx("div",{className:"absolute bottom-20 right-10 w-80 h-80 bg-pink-500/20 rounded-full blur-3xl animate-float",style:{animationDelay:"4s"}}),m.jsx("div",{className:"absolute top-40 right-40 w-60 h-60 bg-blue-500/20 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"relative z-10 w-full max-w-md animate-scale-in",children:[m.jsxs("div",{className:"text-center mb-8 animate-slide-down",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-violet-500 to-purple-600 rounded-3xl shadow-glow-md mb-4 animate-float",children:m.jsx(yb,{className:"w-10 h-10 text-white"})}),m.jsx("h1",{className:"text-4xl font-black text-gradient mb-2 tracking-tight",children:"AryNik Driver"}),m.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Welcome back, let's get started"})]}),m.jsxs("form",{onSubmit:C,className:"glass-strong rounded-3xl p-8 border-iridescent space-y-6 relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"}),m.jsxs("div",{className:"relative",children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(_a,{size:14,className:"text-violet-400"}),"Username"]}),m.jsx("input",{type:"text",value:e,onChange:b=>t(b.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-violet-500/50 focus:ring-2 focus:ring-violet-500/20 transition-all duration-300",placeholder:"Enter your username",required:!0,autoFocus:!0})]}),m.jsxs("div",{className:"relative",children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(fb,{size:14,className:"text-violet-400"}),"Password"]}),m.jsx("input",{type:"password",value:n,onChange:b=>i(b.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-violet-500/50 focus:ring-2 focus:ring-violet-500/20 transition-all duration-300",placeholder:"Enter your password",required:!0})]}),f&&m.jsx("div",{className:"bg-rose-500/10 border border-rose-500/30 text-rose-400 px-4 py-3 rounded-xl text-sm font-medium animate-slide-down",children:f}),m.jsx("button",{type:"submit",disabled:a,className:"btn-premium w-full py-4 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-glow-md hover:shadow-glow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 text-sm uppercase tracking-wider magnetic",children:a?m.jsxs(m.Fragment,{children:[m.jsx(fn,{className:"animate-spin",size:20}),"Authenticating..."]}):m.jsxs(m.Fragment,{children:[m.jsx(p8,{size:20}),"Login to Dashboard"]})}),m.jsxs("p",{className:"text-center text-xs text-slate-500 mt-4",children:["Demo: ",m.jsx("span",{className:"text-violet-400 font-mono",children:"demo / demo"})]}),m.jsx("button",{type:"button",onClick:()=>y("/signup"),className:"w-full py-3 rounded-xl bg-emerald-500/10 border border-emerald-500/20 text-emerald-200 font-black uppercase tracking-wider text-xs hover:bg-emerald-500/15 transition-all",children:"Recipient: Create tracking account"})]}),m.jsx("p",{className:"text-center text-xs text-slate-600 mt-6",children:"Secure driver authentication  AryNik  2026"})]})]})}function f6(){const e=ur(),{login:t}=or(),[n,i]=O.useState(""),[a,c]=O.useState(""),[f,g]=O.useState(""),[v,y]=O.useState(""),[C,b]=O.useState(!1),[T,I]=O.useState(""),z=async R=>{var B,F;R.preventDefault(),I(""),b(!0);try{const P=await qb({awb:String(n||"").trim(),phone:String(a||"").trim(),password:String(f||""),name:String(v||"").trim()||void 0});if(P!=null&&P.access_token)await t(P.access_token,P.role),e("/shipments",{replace:!0});else throw new Error("Invalid response from server")}catch(P){I(((F=(B=P==null?void 0:P.response)==null?void 0:B.data)==null?void 0:F.detail)||(P==null?void 0:P.message)||"Failed to create account")}finally{b(!1)}};return m.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center p-4",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-600/15 via-slate-950 to-violet-600/10"}),m.jsx("div",{className:"absolute top-10 left-10 w-72 h-72 bg-emerald-500/20 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-20 right-10 w-80 h-80 bg-violet-500/15 rounded-full blur-3xl animate-float",style:{animationDelay:"3s"}}),m.jsxs("div",{className:"relative z-10 w-full max-w-md",children:[m.jsxs("button",{type:"button",onClick:()=>e("/login"),className:"mb-4 inline-flex items-center gap-2 text-slate-300 hover:text-white text-xs font-black uppercase tracking-widest",children:[m.jsx(Ms,{size:16}),"Back to login"]}),m.jsxs("div",{className:"glass-strong rounded-3xl p-8 border-iridescent space-y-6 relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-emerald-500 to-emerald-700 rounded-3xl shadow-glow-md mb-4",children:m.jsx(xy,{className:"w-8 h-8 text-white"})}),m.jsx("h1",{className:"text-2xl font-black text-white tracking-tight",children:"Track Your Delivery"}),m.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider mt-2",children:"Create an account using your AWB"})]}),m.jsxs("form",{onSubmit:z,className:"space-y-4 relative",children:[m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(xy,{size:14,className:"text-emerald-400"}),"AWB"]}),m.jsx("input",{value:n,onChange:R=>i(R.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 font-mono",placeholder:"e.g. AWB1234567",required:!0,autoFocus:!0})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(Xd,{size:14,className:"text-emerald-400"}),"WhatsApp Number"]}),m.jsx("input",{value:a,onChange:R=>c(R.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300",placeholder:"+40 712 345 678",required:!0})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(fb,{size:14,className:"text-emerald-400"}),"Password"]}),m.jsx("input",{type:"password",value:f,onChange:R=>g(R.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300",placeholder:"Choose a password",required:!0})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(_a,{size:14,className:"text-emerald-400"}),"Name (Optional)"]}),m.jsx("input",{value:v,onChange:R=>y(R.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300",placeholder:"Your name"})]}),T&&m.jsx("div",{className:"bg-rose-500/10 border border-rose-500/30 text-rose-400 px-4 py-3 rounded-xl text-sm font-medium",children:T}),m.jsx("button",{type:"submit",disabled:C,className:"btn-premium w-full py-4 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white font-bold rounded-xl shadow-glow-md hover:shadow-glow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 text-sm uppercase tracking-wider",children:C?m.jsxs(m.Fragment,{children:[m.jsx(fn,{className:"animate-spin",size:20}),"Creating..."]}):"Create Account"})]}),m.jsx("p",{className:"text-center text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:"Already have an account? Use your phone number as username on the login screen."})]})]})]})}function p6(){const[e,t]=O.useState([]),[n,i]=O.useState(!0),[a,c]=O.useState(!1),[f,g]=O.useState("delivered"),v=ur(),y=async(k=!1)=>{k?c(!0):i(!0);try{const G=await Sm();let K=[];try{const ee=localStorage.getItem("token");K=(await pm(ee,{limit:2e3})).map(H=>({...H,id:H.id,status:"synced",label:H.event_id}))}catch{console.log("Could not fetch server logs, showing local only")}let q=new Map;try{const ee=localStorage.getItem("token"),M=await cu(ee);(Array.isArray(M)?M:[]).forEach(H=>{const $=String((H==null?void 0:H.awb)||"").toUpperCase();$&&q.set($,H)})}catch{}const Y=[...G,...K].sort((ee,M)=>new Date(M.timestamp)-new Date(ee.timestamp));t(Y.map(ee=>{const M=String((ee==null?void 0:ee.awb)||"").toUpperCase(),H=q.get(M),$=(H==null?void 0:H.raw_data)||{},se=($==null?void 0:$.client)||($==null?void 0:$.clientData)||{},be=($==null?void 0:$.senderLocation)||{},Ne=String((H==null?void 0:H.sender_shop_name)||(se==null?void 0:se.name)||(se==null?void 0:se.clientName)||(be==null?void 0:be.name)||(be==null?void 0:be.shopName)||"").trim()||null,oe=(ee!=null&&ee.payload?ee.payload.parcels_total:void 0)??(ee==null?void 0:ee.parcels_total)??(H==null?void 0:H.number_of_parcels)??($==null?void 0:$.numberOfDistinctBarcodes)??($==null?void 0:$.numberOfParcels),le=Number(oe),ke=Number.isFinite(le)&&le>0?Math.trunc(le):null;return{...ee,payment_amount:(H==null?void 0:H.payment_amount)??(H==null?void 0:H.shipping_cost)??(H==null?void 0:H.estimated_shipping_cost)??null,currency:(H==null?void 0:H.currency)||"RON",client_name:Ne,parcels_total:ke}}))}finally{i(!1),c(!1)}};O.useEffect(()=>{y()},[]);const C=k=>k==="synced"?{bg:"bg-emerald-500/20",text:"text-emerald-400",border:"border-emerald-500/30",icon:cd,label:"Synced"}:{bg:"bg-violet-500/20",text:"text-violet-400",border:"border-violet-500/30",icon:Vu,label:"Pending"},b=e.filter(k=>k.status==="synced").length,T=e.filter(k=>k.status!=="synced").length,I=e.filter(k=>k.status==="synced"&&String(k.event_id||"")==="2"),z=I.length,R=I.reduce((k,G)=>{const K=Number(G==null?void 0:G.payment_amount);return Number.isFinite(K)?k+K:k},0),B=f==="delivered"?e.filter(k=>String(k.event_id||"")==="2"):e,F={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},P={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0}};return m.jsxs(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-20 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"px-4 py-4 flex items-center justify-between glass-strong sticky top-0 z-30 backdrop-blur-xl border-b border-white/10 animate-slide-down",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("button",{onClick:()=>v(-1),className:"p-2 -ml-2 rounded-xl glass-light text-slate-300 hover:text-white transition-colors border border-white/10",children:m.jsx(Ms,{size:20})}),m.jsxs("div",{children:[m.jsx("h1",{className:"font-black text-lg text-gradient tracking-tight",children:"Update History"}),m.jsx("p",{className:"text-xs text-slate-500 font-medium mt-0.5",children:"Recent activity timeline"})]})]}),m.jsx("button",{onClick:()=>y(!0),className:`p-2.5 rounded-xl glass-light hover:bg-violet-500/20 text-violet-400 transition-all border border-white/10 ${a?"animate-spin":""}`,children:m.jsx(Yr,{size:20})})]}),m.jsxs("div",{className:"p-4 space-y-3 relative z-10",children:[m.jsxs("div",{className:"flex glass-strong p-1 rounded-xl border border-white/10 w-fit",children:[m.jsx("button",{onClick:()=>g("delivered"),className:`px-3 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${f==="delivered"?"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:"Delivered"}),m.jsx("button",{onClick:()=>g("all"),className:`px-3 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${f==="all"?"bg-gradient-to-r from-violet-600 to-purple-600 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:"All"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs(st.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"glass-strong p-4 rounded-2xl border-iridescent",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:m.jsx(cd,{size:14,className:"text-emerald-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Synced"})]}),m.jsx("p",{className:"text-2xl font-black text-gradient-blue",children:b})]}),m.jsxs(st.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},className:"glass-strong p-4 rounded-2xl border-iridescent",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-2 bg-violet-500/20 rounded-lg",children:m.jsx(Vu,{size:14,className:"text-violet-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Pending"})]}),m.jsx("p",{className:"text-2xl font-black text-gradient-purple",children:T})]}),m.jsxs(st.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"glass-strong p-4 rounded-2xl border-iridescent",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:m.jsx(cd,{size:14,className:"text-emerald-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Delivered"})]}),m.jsx("p",{className:"text-2xl font-black text-gradient-blue",children:z})]}),m.jsxs(st.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"glass-strong p-4 rounded-2xl border-iridescent",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-2 bg-amber-500/20 rounded-lg",children:m.jsx(a8,{size:14,className:"text-amber-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Pay (RON)"})]}),m.jsx("p",{className:"text-2xl font-black text-gradient-purple",children:R.toFixed(2)})]})]})]}),m.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-32 relative z-10",children:n?m.jsxs("div",{className:"text-center py-20",children:[m.jsxs("div",{className:"relative inline-block",children:[m.jsx("div",{className:"absolute inset-0 bg-violet-500/20 blur-xl rounded-full animate-pulse"}),m.jsx(Os,{className:"animate-spin relative z-10 text-violet-400 mx-auto",size:48})]}),m.jsx("p",{className:"mt-6 text-sm font-bold text-slate-500 uppercase tracking-wide",children:"Loading history..."})]}):B.length===0?m.jsxs(st.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(Vu,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No recent updates"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Your activity will appear here"})]}):m.jsx(st.div,{variants:F,initial:"hidden",animate:"visible",className:"space-y-3 py-2",children:B.map((k,G)=>{var se;const K=C(k.status),q=K.icon,Y=Number(k==null?void 0:k.payment_amount),ee=Number.isFinite(k==null?void 0:k.parcels_total)&&k.parcels_total>0?k.parcels_total:null,M=((se=k==null?void 0:k.payload)==null?void 0:se.parcel_index)??(k==null?void 0:k.parcel_index),H=Number(M),$=Number.isFinite(H)&&H>0?Math.trunc(H):null;return m.jsxs(st.div,{variants:P,className:"glass-strong p-5 rounded-2xl border border-white/10 relative overflow-hidden group hover:border-violet-500/30 transition-all",children:[G<e.length-1&&m.jsx("div",{className:"absolute left-11 top-full w-0.5 h-3 bg-gradient-to-b from-white/10 to-transparent"}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx("div",{className:`flex-shrink-0 w-12 h-12 ${K.bg} rounded-2xl flex items-center justify-center border ${K.border}`,children:m.jsx(q,{size:20,className:K.text,strokeWidth:2.5})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex justify-between items-start mb-2",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs font-mono text-slate-500 tracking-wider",children:k.awb}),$?m.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mt-1",children:["Parcel ",$,ee?`/${ee}`:""]}):null,m.jsx("h3",{className:"font-bold text-white mt-1",children:k.event_id||k.label}),k.client_name&&m.jsx("p",{className:"text-[10px] text-slate-400 font-bold mt-1 truncate",children:k.client_name})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[Number.isFinite(Y)&&m.jsxs("span",{className:"text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border bg-amber-500/15 text-amber-300 border-amber-500/20",children:[Y.toFixed(2)," ",String((k==null?void 0:k.currency)||"RON").toUpperCase()]}),m.jsx("span",{className:`text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border ${K.bg} ${K.text} ${K.border}`,children:K.label})]})]}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-medium flex items-center gap-1.5",children:[m.jsx(Vu,{size:10}),new Date(k.timestamp).toLocaleString()]}),k.error_message&&m.jsxs("div",{className:"mt-3 px-3 py-2 bg-red-500/10 border border-red-500/20 rounded-xl flex items-start gap-2",children:[m.jsx(ab,{size:14,className:"text-red-400 mt-0.5 flex-shrink-0"}),m.jsx("p",{className:"text-xs text-red-400 font-medium",children:k.error_message})]})]})]})]},G)})})})]})}const NC="arynik_warehouse_origin_v1",r2=e=>{const t=Number(e);return!Number.isFinite(t)||Math.abs(t)<1e-4?null:t},Ra={lat:r2(void 0)??46.5667,lon:r2(void 0)??26.9167,label:"Warehouse (Bacau)"},m6=e=>{try{return localStorage.getItem(e)}catch{return null}},g6=(e,t)=>{try{return localStorage.setItem(e,t),!0}catch{return!1}},TC=(e,t)=>Number.isFinite(Number(e))&&Number.isFinite(Number(t))&&Math.abs(Number(e))>1e-4&&Math.abs(Number(t))>1e-4,Zc=()=>{if(typeof window>"u")return Ra;const e=m6(NC);if(!e)return Ra;try{const t=JSON.parse(e),n=Number(t==null?void 0:t.lat),i=Number(t==null?void 0:t.lon);return TC(n,i)?{lat:n,lon:i,label:String((t==null?void 0:t.label)||Ra.label||"Warehouse")}:Ra}catch{return Ra}},x6=({lat:e,lon:t,label:n}={})=>{const i=Number(e),a=Number(t);return TC(i,a)?g6(NC,JSON.stringify({lat:i,lon:a,label:String(n||Ra.label||"Warehouse"),ts:Date.now()})):!1};function y6(){const{user:e,logout:t}=or(),n=ur(),[i,a]=O.useState(Tt()),[c,f]=O.useState(()=>{const Ue=Zc();return{label:String((Ue==null?void 0:Ue.label)||""),lat:String((Ue==null?void 0:Ue.lat)??""),lon:String((Ue==null?void 0:Ue.lon)??"")}}),[g,v]=O.useState(""),[y,C]=O.useState(!1),[b,T]=O.useState(""),[I,z]=O.useState(!1),[R,B]=O.useState(""),[F,P]=O.useState(null),[k,G]=O.useState(!1),[K,q]=O.useState(""),[Y,ee]=O.useState(!1),[M,H]=O.useState(""),[$,se]=O.useState(null),be=_n(e,vo),Ne=_n(e,Js),oe=_n(e,bb),le=()=>{t(),n("/login",{replace:!0})},ke=()=>{Xb(i),window.location.reload()},ie=async()=>{var Ue,nt;ee(!0),H(""),se(null);try{const Ze=await Qb();se(Ze||null),H(Ze!=null&&Ze.ok?"Backend reachable.":"Backend responded.")}catch(Ze){const Rt=((nt=(Ue=Ze==null?void 0:Ze.response)==null?void 0:Ue.data)==null?void 0:nt.detail)||(Ze==null?void 0:Ze.message)||"Backend unreachable.";H(String(Rt))}finally{ee(!1),setTimeout(()=>H(""),9e3)}},Ae=()=>{const Ue=x6({label:c.label,lat:c.lat,lon:c.lon});v(Ue?"Warehouse origin saved.":"Invalid warehouse coordinates."),setTimeout(()=>v(""),2500)},ve=async()=>{var tt;if(!window.confirm(`Clear cached data on this device?

This removes:
- Offline queue (pending updates)
- Local route allocations
- Geocode cache
- Service worker caches

You will stay signed in.`))return;C(!0),T("");let nt=0,Ze=0;try{const{clearQueue:yt}=await EC(async()=>{const{clearQueue:Xt}=await Promise.resolve().then(()=>l6);return{clearQueue:Xt}},void 0);nt=await yt()}catch{}if(["arynik_geocode_cache_v1","arynik_routes_v1","arynik_demo_logs_v1","arynik_demo_shipments_v1","arynik_last_vehicle_plate_v1","arynik_warehouse_origin_v1"].forEach(yt=>{try{localStorage.removeItem(yt)}catch{}}),typeof window<"u"&&"caches"in window)try{const yt=await caches.keys();await Promise.all(yt.map(Xt=>caches.delete(Xt))),Ze=yt.length}catch{}if((tt=navigator==null?void 0:navigator.serviceWorker)!=null&&tt.getRegistrations)try{const yt=await navigator.serviceWorker.getRegistrations();await Promise.all(yt.map(Xt=>Xt.unregister()))}catch{}T(`Cleared ${Ze} cache(s) and ${nt} queued update(s). Reloading...`),setTimeout(()=>{window.location.reload()},600)},xe=async()=>{const Ue=e==null?void 0:e.token;if(!Ue)return null;try{const nt=await sh(Ue);return P(nt),nt}catch{return null}},Le=async()=>{var Ze,Rt,tt;if(!window.confirm(`Sync shipments with Postis now?

This will run a FULL backfill (cost/content/address/raw payload) into the server database.
It may take several minutes.`))return;const nt=e==null?void 0:e.token;if(!nt){B("Not signed in."),setTimeout(()=>B(""),4e3);return}z(!0),B("");try{const yt=await fm(nt,{mode:"full"});P(yt);const Xt=!!(yt!=null&&yt.started);B(Xt?"Postis sync started.":"Postis sync is already running.");const Vn=Date.now()+8*60*1e3;for(;Date.now()<Vn;){await new Promise(ft=>setTimeout(ft,2500));const ht=await xe();if(!(ht!=null&&ht.running))break}const ut=await xe();if(ut!=null&&ut.running)B("Postis sync is still running in the background.");else if(ut!=null&&ut.last_error)B(`Postis sync failed: ${ut.last_error}`);else if(ut!=null&&ut.last_stats){const ht=ut.last_stats;B(`Postis sync done. List: ${ht.upserted_list}  Details: ${ht.upserted_details}.`)}else B("Postis sync done.")}catch(yt){if(Number((Ze=yt==null?void 0:yt.response)==null?void 0:Ze.status)===405){const Vn=Tt();B(`Sync failed (HTTP 405). Your API URL is not a backend server (likely GitHub Pages). Set Backend API URL above to your FastAPI backend (/docs). Current: ${Vn}`);return}const Xt=((tt=(Rt=yt==null?void 0:yt.response)==null?void 0:Rt.data)==null?void 0:tt.detail)||(yt==null?void 0:yt.message)||"Failed to sync with Postis.";B(String(Xt))}finally{z(!1),setTimeout(()=>B(""),9e3)}},Ke=async()=>{var Ze,Rt;if(!window.confirm(`Sync users/drivers from Google Sheet now?

This updates driver names, roles, trucks, and phones in the server database.`))return;const nt=e==null?void 0:e.token;if(!nt){q("Not signed in."),setTimeout(()=>q(""),4e3);return}G(!0),q("");try{await nC(nt),q("Drivers synced.")}catch(tt){const yt=((Rt=(Ze=tt==null?void 0:tt.response)==null?void 0:Ze.data)==null?void 0:Rt.detail)||(tt==null?void 0:tt.message)||"Failed to sync drivers.";q(String(yt))}finally{G(!1),setTimeout(()=>q(""),9e3)}};O.useEffect(()=>{let Ue=!1;if(Ne)return(async()=>{const nt=await xe();if(Ue||!(nt!=null&&nt.running))return;const Ze=Date.now()+60*1e3;for(;!Ue&&Date.now()<Ze;){await new Promise(tt=>setTimeout(tt,2500));const Rt=await xe();if(!(Rt!=null&&Rt.running))break}})(),()=>{Ue=!0}},[Ne]);const Fe=[{title:"Preferences",items:[{icon:Hc,label:"Notifications",value:"Enabled",color:"violet"},{icon:c8,label:"Language",value:"English",color:"emerald"},{icon:g8,label:"Dark Mode",value:"Auto",color:"amber"}]},{title:"Account",items:[{icon:_8,label:"Security",value:null,color:"violet"},...be?[{icon:Qd,label:"Manage Users",value:null,color:"emerald",onClick:()=>n("/users")}]:[],...oe?[{icon:vb,label:"Sync Drivers",value:k?"Working":null,color:"violet",onClick:()=>{k||Ke()},disabled:k,loading:k}]:[],...Ne?[{icon:Yr,label:"Sync with Postis (Full)",value:I||F!=null&&F.running?"Running":null,color:"emerald",onClick:()=>{I||F!=null&&F.running||Le()},disabled:I||(F==null?void 0:F.running),loading:I||(F==null?void 0:F.running)}]:[],{icon:qd,label:"Clear Cache",value:y?"Working":null,color:"slate",onClick:()=>{y||ve()},disabled:y,loading:y},{icon:h8,label:"App Info",value:"v1.0.0",color:"slate"}]}],ne=Ue=>{const nt={violet:"bg-violet-500/20",emerald:"bg-emerald-500/20",amber:"bg-amber-500/20",slate:"bg-slate-500/20"};return nt[Ue]||nt.slate},ae=Ue=>{const nt={violet:"text-violet-400",emerald:"text-emerald-400",amber:"text-amber-400",slate:"text-slate-400"};return nt[Ue]||nt.slate},je={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},Qe={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return m.jsxs(st.div,{initial:"hidden",animate:"visible",exit:{opacity:0,y:-20},variants:je,className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-600 via-purple-600 to-violet-700"}),m.jsx("div",{className:"absolute inset-0 shimmer opacity-20"}),m.jsxs("header",{className:"relative z-10 px-6 pt-6 pb-4",children:[m.jsx("h1",{className:"text-xl font-black text-white uppercase tracking-tight mb-1",children:"Settings"}),m.jsx("p",{className:"text-sm text-violet-100 font-medium",children:"Manage your preferences"})]}),m.jsxs("div",{className:"relative z-10 px-8 pb-8 flex flex-col items-center",children:[m.jsx(st.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:15},className:"w-28 h-28 bg-gradient-to-br from-white/20 to-white/10 backdrop-blur-xl rounded-[32px] shadow-2xl flex items-center justify-center text-white mb-5 border-4 border-white/30 animate-float",children:m.jsx(_a,{size:56,strokeWidth:1.5})}),m.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight mb-2",children:(e==null?void 0:e.username)||"Driver"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-[10px] font-black bg-white/20 backdrop-blur-sm text-white px-3 py-1.5 rounded-full uppercase tracking-widest border border-white/30",children:(e==null?void 0:e.role)||"Carrier"}),m.jsxs("span",{className:"text-[10px] font-bold text-violet-200 uppercase tracking-widest",children:["ID: ",(e==null?void 0:e.driver_id)||"N/A"]})]})]})]}),m.jsxs("div",{className:"flex-1 p-4 space-y-6 pb-32 relative z-10 -mt-6",children:[m.jsxs(st.div,{variants:Qe,className:"space-y-3",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Connection"}),m.jsxs("div",{className:"glass-strong rounded-2xl overflow-hidden border-iridescent p-4 space-y-3",children:[m.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"API Base URL"}),m.jsx("input",{value:i,onChange:Ue=>a(Ue.target.value),placeholder:"https://YOUR-BACKEND",className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-violet-500/50 focus:ring-2 focus:ring-violet-500/20 transition-all duration-300 text-sm font-medium"}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-medium leading-relaxed",children:["Tip: on GitHub Pages (HTTPS), your backend must be HTTPS. You can also set via URL: ",m.jsx("span",{className:"font-mono text-slate-400",children:"?api=https://YOUR-BACKEND"})]}),m.jsx("button",{onClick:ke,className:"w-full btn-premium py-3 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white rounded-xl font-bold shadow-lg hover:shadow-glow-md transition-all text-sm uppercase tracking-wider",children:"Apply API URL"}),m.jsxs("button",{type:"button",onClick:ie,disabled:Y,className:"w-full btn-premium py-3 bg-slate-900/50 hover:bg-slate-900/70 text-white rounded-xl font-bold border border-white/10 transition-all text-sm uppercase tracking-wider flex items-center justify-center gap-2 disabled:opacity-60 disabled:cursor-not-allowed",children:[Y?m.jsx(fn,{className:"animate-spin",size:18}):m.jsx(Yr,{size:18}),"Test Connection"]}),M?m.jsx("div",{className:"glass-light p-3 rounded-xl border border-white/10 text-slate-200 text-xs font-bold",children:M}):null,$?m.jsxs("div",{className:"glass-light p-3 rounded-xl border border-white/10 text-slate-300 text-[10px] font-bold space-y-1",children:[m.jsxs("div",{children:[$!=null&&$.ok?"OK":"Response","  ",String(($==null?void 0:$.time)||"")]}),m.jsxs("div",{children:["Postis configured: ",$!=null&&$.postis_configured?"YES":"NO"]})]}):null]})]}),m.jsxs(st.div,{variants:Qe,className:"space-y-3",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Warehouse"}),m.jsxs("div",{className:"glass-strong rounded-2xl overflow-hidden border-iridescent p-4 space-y-3",children:[m.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Routing Origin (Used For KM/Routes)"}),m.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[m.jsx("input",{value:c.label,onChange:Ue=>f(nt=>({...nt,label:Ue.target.value})),placeholder:"Warehouse (Bacau)",className:"col-span-3 px-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium"}),m.jsx("input",{value:c.lat,onChange:Ue=>f(nt=>({...nt,lat:Ue.target.value})),placeholder:"Latitude",className:"px-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium font-mono"}),m.jsx("input",{value:c.lon,onChange:Ue=>f(nt=>({...nt,lon:Ue.target.value})),placeholder:"Longitude",className:"px-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium font-mono"}),m.jsx("button",{onClick:Ae,className:"btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white rounded-xl font-bold shadow-lg hover:shadow-glow-md transition-all text-sm uppercase tracking-wider",children:"Save Warehouse"})]}),g&&m.jsx("div",{className:"glass-light p-3 rounded-xl border border-emerald-500/20 text-emerald-200 text-xs font-bold",children:g}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium leading-relaxed",children:"Driver GPS is still shown on the map, but routing always starts from this warehouse origin."})]})]}),Fe.map((Ue,nt)=>m.jsxs(st.div,{variants:Qe,className:"space-y-3",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:Ue.title}),m.jsx("div",{className:"glass-strong rounded-2xl overflow-hidden border-iridescent",children:Ue.items.map((Ze,Rt)=>{const tt=Ze.icon;return m.jsxs("button",{type:"button",onClick:()=>Ze.onClick&&Ze.onClick(),disabled:!!Ze.disabled,className:`w-full p-4 flex items-center gap-4 hover:bg-white/5 transition-all group ${Rt<Ue.items.length-1?"border-b border-white/5":""}`,children:[m.jsx("div",{className:`p-3 ${ne(Ze.color)} rounded-xl group-hover:scale-110 transition-transform`,children:Ze.loading?m.jsx(fn,{className:"animate-spin text-slate-400",size:20,strokeWidth:2}):m.jsx(tt,{className:ae(Ze.color),size:20,strokeWidth:2})}),m.jsx("span",{className:"flex-1 text-left font-bold text-white",children:Ze.label}),Ze.value&&m.jsx("span",{className:"text-xs text-slate-400 font-medium",children:Ze.value}),m.jsx(yo,{className:"text-slate-500 group-hover:text-violet-400 group-hover:translate-x-1 transition-all",size:18})]},Rt)})})]},nt)),b&&m.jsx(st.div,{variants:Qe,className:"glass-strong p-4 rounded-2xl border border-emerald-500/20 text-emerald-200 text-xs font-bold",children:b}),R&&m.jsx(st.div,{variants:Qe,className:"glass-strong p-4 rounded-2xl border border-emerald-500/20 text-emerald-200 text-xs font-bold",children:R}),K&&m.jsx(st.div,{variants:Qe,className:"glass-strong p-4 rounded-2xl border border-emerald-500/20 text-emerald-200 text-xs font-bold",children:K}),m.jsxs(st.div,{variants:Qe,className:"glass-strong p-5 rounded-2xl border-iridescent relative overflow-hidden group",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/10 to-amber-600/5 opacity-0 group-hover:opacity-100 transition-opacity"}),m.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[m.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl shadow-glow-sm",children:m.jsx(yb,{size:24,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"font-black text-white text-sm",children:"Premium Features"}),m.jsx("p",{className:"text-[10px] text-slate-400 font-medium mt-1",children:"Unlock advanced analytics & insights"})]}),m.jsx(yo,{className:"text-amber-400",size:20})]})]}),m.jsxs(st.button,{variants:Qe,onClick:le,whileTap:{scale:.98},className:"w-full btn-premium py-4 bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-400 hover:to-rose-500 text-white rounded-2xl font-bold flex items-center justify-center gap-2 shadow-lg hover:shadow-glow-md transition-all",children:[m.jsx(pb,{size:20,strokeWidth:2.5}),"Sign Out"]})]}),m.jsxs(st.div,{variants:Qe,className:"p-6 text-center relative z-10",children:[m.jsx("p",{className:"text-[10px] text-slate-500 font-medium",children:"Powered by Postis Bridge"}),m.jsx("p",{className:"text-[9px] text-slate-600 font-medium mt-1",children:" 2025 AryNik Driver App"})]})]})}const IC="arynik_geocode_cache_v1",w6=1100;let i2=0,s2=Promise.resolve(),Xs=null,Ip=!1,e0=null;const Wu=new Map,o2=5e3,v6=250,_6=e=>{try{return localStorage.getItem(e)}catch{return null}},b6=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},C6=e=>new Promise(t=>setTimeout(t,e)),Am=()=>{if(Xs)return Xs;const e=_6(IC);if(!e)return Xs={},Xs;try{const t=JSON.parse(e);return Xs=t&&typeof t=="object"?t:{},Xs}catch{return Xs={},Xs}},S6=e=>{const t=Object.entries(e||{});if(t.length<=o2)return;t.sort((i,a)=>{var c,f;return Number(((c=i==null?void 0:i[1])==null?void 0:c.ts)||0)-Number(((f=a==null?void 0:a[1])==null?void 0:f.ts)||0)});const n=t.length-o2;for(let i=0;i<n;i+=1)delete e[t[i][0]]},A6=()=>{e0||(e0=setTimeout(()=>{if(e0=null,!Ip)return;Ip=!1;const e=Am();try{S6(e),b6(IC,JSON.stringify(e||{}))}catch{}},v6))},a2=(e,t)=>{const n=Am();n[e]=t,Ip=!0,A6()},E6=e=>{const t=Am(),n=t?t[e]:null;return n&&typeof n=="object"?n:null},Yc=e=>{const t=String(e||"").trim();if(!t)return null;const n=E6(t);if(!n)return null;if(n.lat===null&&n.lon===null)return{lat:null,lon:null,display_name:n.display_name||t,ts:n.ts||0};const i=Number(n.lat),a=Number(n.lon);return!Number.isFinite(i)||!Number.isFinite(a)?null:{...n,lat:i,lon:a}},N6=(e,{timeoutMs:t=15e3}={})=>new Promise((n,i)=>{const a=`__arynik_jsonp_${Date.now()}_${Math.floor(Math.random()*1e5)}`,c=document.createElement("script"),f=setTimeout(()=>{g(),i(new Error("Geocode timeout"))},t),g=()=>{clearTimeout(f);try{delete window[a]}catch{window[a]=void 0}c&&c.parentNode&&c.parentNode.removeChild(c)};window[a]=v=>{g(),n(v)},c.onerror=()=>{g(),i(new Error("Geocode network error"))},c.async=!0,c.src=`${e}${e.includes("?")?"&":"?"}json_callback=${encodeURIComponent(a)}`,document.body.appendChild(c)}),T6=e=>{const t=async()=>{const i=w6-(Date.now()-i2);return i>0&&await C6(i),i2=Date.now(),e()},n=s2.then(t,t);return s2=n.catch(()=>{}),n},ch=async e=>{const t=String(e||"").trim();if(!t)return null;const n=Yc(t);if(n){if(Number.isFinite(n.lat)&&Number.isFinite(n.lon))return n;if(n.lat===null&&n.lon===null)return null}if(Wu.has(t))return Wu.get(t);const i=(async()=>{const c=`https://nominatim.openstreetmap.org/search?format=json&limit=1&q=${encodeURIComponent(t)}`;try{const f=await T6(()=>N6(c)),g=Array.isArray(f)?f[0]:null,v=g?Number(g.lat):NaN,y=g?Number(g.lon):NaN;if(!Number.isFinite(v)||!Number.isFinite(y))return a2(t,{lat:null,lon:null,display_name:t,ts:Date.now()}),null;const C={lat:v,lon:y,display_name:g.display_name||t,ts:Date.now()};return a2(t,C),C}catch(f){return console.warn("Geocode failed",f),null}})();Wu.set(t,i);try{return await i}finally{Wu.delete(t)}},kC="https://router.project-osrm.org/route/v1/driving";async function I6(e,t){if(!e||!t)return null;try{const n=`${kC}/${e.lon},${e.lat};${t.lon},${t.lat}?overview=full&geometries=geojson`,i=await ot.get(n);return i.data.code==="Ok"&&i.data.routes.length>0?i.data.routes[0].geometry:null}catch(n){return console.error("Error fetching route:",n),null}}async function k6(e){const t=Array.isArray(e)?e.filter(Boolean):[];if(t.length<2)return null;const n=t.map(i=>`${i.lon},${i.lat}`).join(";");try{const i=`${kC}/${n}?overview=full&geometries=geojson&steps=false`,a=await ot.get(i);if(a.data.code==="Ok"&&a.data.routes.length>0){const c=a.data.routes[0]||{};return{geometry:c.geometry||null,distance_m:Number.isFinite(Number(c.distance))?Number(c.distance):0,duration_s:Number.isFinite(Number(c.duration))?Number(c.duration):0}}return null}catch(i){return console.error("Error fetching multi-route:",i),null}}const et=e=>{const t=Number(e);return Number.isFinite(t)&&Math.abs(t)>1e-4},MC=e=>{if(e==null)return"";if(typeof e=="string"||typeof e=="number")return String(e);if(typeof e=="object"){const t=(e==null?void 0:e.name)||(e==null?void 0:e.label)||(e==null?void 0:e.value)||(e==null?void 0:e.countyName)||(e==null?void 0:e.localityName)||(e==null?void 0:e.cityName)||(e==null?void 0:e.regionName)||(e==null?void 0:e.county)||(e==null?void 0:e.locality)||(e==null?void 0:e.city)||(e==null?void 0:e.region);return t&&(typeof t=="string"||typeof t=="number")?String(t):t&&typeof t=="object"?MC(t):""}return String(e)},t0=e=>MC(e).trim().replace(/[_-]+/g," ").replace(/\\s+/g," ").trim(),aa=e=>{var c,f,g,v,y,C;const t=t0(e==null?void 0:e.delivery_address),n=t0((e==null?void 0:e.locality)||((f=(c=e==null?void 0:e.raw_data)==null?void 0:c.recipientLocation)==null?void 0:f.locality)),i=t0((e==null?void 0:e.county)||((v=(g=e==null?void 0:e.raw_data)==null?void 0:g.recipientLocation)==null?void 0:v.county)||((C=(y=e==null?void 0:e.raw_data)==null?void 0:y.recipientLocation)==null?void 0:C.countyName)),a=[];return t&&a.push(t),n&&!t.toLowerCase().includes(n.toLowerCase())&&a.push(n),i&&!a.some(b=>b.toLowerCase().includes(i.toLowerCase()))&&a.push(i),a.push("Romania"),a.filter(Boolean).join(", ")};function RC(e,t){const n=O.useRef(t);O.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}const M6=1;function R6(e){return Object.freeze({__version:M6,map:e})}function OC(e,t){return Object.freeze({...e,...t})}const LC=O.createContext(null),PC=LC.Provider;function Zh(){const e=O.useContext(LC);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function DC(e){function t(n,i){const{instance:a,context:c}=e(n).current;return O.useImperativeHandle(i,()=>a),n.children==null?null:ca.createElement(PC,{value:c},n.children)}return O.forwardRef(t)}function O6(e){function t(n,i){const[a,c]=O.useState(!1),{instance:f}=e(n,c).current;O.useImperativeHandle(i,()=>f),O.useEffect(function(){a&&f.update()},[f,a,n.children]);const g=f._contentNode;return g?Tv.createPortal(n.children,g):null}return O.forwardRef(t)}function L6(e){function t(n,i){const{instance:a}=e(n).current;return O.useImperativeHandle(i,()=>a),null}return O.forwardRef(t)}function Em(e,t){const n=O.useRef();O.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function Yh(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function P6(e,t){return function(i,a){const c=Zh(),f=e(Yh(i,c),c);return RC(c.map,i.attribution),Em(f.current,i.eventHandlers),t(f.current,c,i,a),f}}var kp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,i){i(t)})(Ma,function(n){var i="1.9.4";function a(o){var h,w,A,N;for(w=1,A=arguments.length;w<A;w++){N=arguments[w];for(h in N)o[h]=N[h]}return o}var c=Object.create||function(){function o(){}return function(h){return o.prototype=h,new o}}();function f(o,h){var w=Array.prototype.slice;if(o.bind)return o.bind.apply(o,w.call(arguments,1));var A=w.call(arguments,2);return function(){return o.apply(h,A.length?A.concat(w.call(arguments)):arguments)}}var g=0;function v(o){return"_leaflet_id"in o||(o._leaflet_id=++g),o._leaflet_id}function y(o,h,w){var A,N,V,Q;return Q=function(){A=!1,N&&(V.apply(w,N),N=!1)},V=function(){A?N=arguments:(o.apply(w,arguments),setTimeout(Q,h),A=!0)},V}function C(o,h,w){var A=h[1],N=h[0],V=A-N;return o===A&&w?o:((o-N)%V+V)%V+N}function b(){return!1}function T(o,h){if(h===!1)return o;var w=Math.pow(10,h===void 0?6:h);return Math.round(o*w)/w}function I(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function z(o){return I(o).split(/\s+/)}function R(o,h){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?c(o.options):{});for(var w in h)o.options[w]=h[w];return o.options}function B(o,h,w){var A=[];for(var N in o)A.push(encodeURIComponent(w?N.toUpperCase():N)+"="+encodeURIComponent(o[N]));return(!h||h.indexOf("?")===-1?"?":"&")+A.join("&")}var F=/\{ *([\w_ -]+) *\}/g;function P(o,h){return o.replace(F,function(w,A){var N=h[A];if(N===void 0)throw new Error("No value provided for variable "+w);return typeof N=="function"&&(N=N(h)),N})}var k=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function G(o,h){for(var w=0;w<o.length;w++)if(o[w]===h)return w;return-1}var K="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function q(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var Y=0;function ee(o){var h=+new Date,w=Math.max(0,16-(h-Y));return Y=h+w,window.setTimeout(o,w)}var M=window.requestAnimationFrame||q("RequestAnimationFrame")||ee,H=window.cancelAnimationFrame||q("CancelAnimationFrame")||q("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function $(o,h,w){if(w&&M===ee)o.call(h);else return M.call(window,f(o,h))}function se(o){o&&H.call(window,o)}var be={__proto__:null,extend:a,create:c,bind:f,get lastId(){return g},stamp:v,throttle:y,wrapNum:C,falseFn:b,formatNum:T,trim:I,splitWords:z,setOptions:R,getParamString:B,template:P,isArray:k,indexOf:G,emptyImageUrl:K,requestFn:M,cancelFn:H,requestAnimFrame:$,cancelAnimFrame:se};function Ne(){}Ne.extend=function(o){var h=function(){R(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},w=h.__super__=this.prototype,A=c(w);A.constructor=h,h.prototype=A;for(var N in this)Object.prototype.hasOwnProperty.call(this,N)&&N!=="prototype"&&N!=="__super__"&&(h[N]=this[N]);return o.statics&&a(h,o.statics),o.includes&&(oe(o.includes),a.apply(null,[A].concat(o.includes))),a(A,o),delete A.statics,delete A.includes,A.options&&(A.options=w.options?c(w.options):{},a(A.options,o.options)),A._initHooks=[],A.callInitHooks=function(){if(!this._initHooksCalled){w.callInitHooks&&w.callInitHooks.call(this),this._initHooksCalled=!0;for(var V=0,Q=A._initHooks.length;V<Q;V++)A._initHooks[V].call(this)}},h},Ne.include=function(o){var h=this.prototype.options;return a(this.prototype,o),o.options&&(this.prototype.options=h,this.mergeOptions(o.options)),this},Ne.mergeOptions=function(o){return a(this.prototype.options,o),this},Ne.addInitHook=function(o){var h=Array.prototype.slice.call(arguments,1),w=typeof o=="function"?o:function(){this[o].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(w),this};function oe(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=k(o)?o:[o];for(var h=0;h<o.length;h++)o[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var le={on:function(o,h,w){if(typeof o=="object")for(var A in o)this._on(A,o[A],h);else{o=z(o);for(var N=0,V=o.length;N<V;N++)this._on(o[N],h,w)}return this},off:function(o,h,w){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var A in o)this._off(A,o[A],h);else{o=z(o);for(var N=arguments.length===1,V=0,Q=o.length;V<Q;V++)N?this._off(o[V]):this._off(o[V],h,w)}return this},_on:function(o,h,w,A){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(o,h,w)===!1){w===this&&(w=void 0);var N={fn:h,ctx:w};A&&(N.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(N)}},_off:function(o,h,w){var A,N,V;if(this._events&&(A=this._events[o],!!A)){if(arguments.length===1){if(this._firingCount)for(N=0,V=A.length;N<V;N++)A[N].fn=b;delete this._events[o];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var Q=this._listens(o,h,w);if(Q!==!1){var de=A[Q];this._firingCount&&(de.fn=b,this._events[o]=A=A.slice()),A.splice(Q,1)}}},fire:function(o,h,w){if(!this.listens(o,w))return this;var A=a({},h,{type:o,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var N=this._events[o];if(N){this._firingCount=this._firingCount+1||1;for(var V=0,Q=N.length;V<Q;V++){var de=N[V],ge=de.fn;de.once&&this.off(o,ge,de.ctx),ge.call(de.ctx||this,A)}this._firingCount--}}return w&&this._propagateEvent(A),this},listens:function(o,h,w,A){typeof o!="string"&&console.warn('"string" type argument expected');var N=h;typeof h!="function"&&(A=!!h,N=void 0,w=void 0);var V=this._events&&this._events[o];if(V&&V.length&&this._listens(o,N,w)!==!1)return!0;if(A){for(var Q in this._eventParents)if(this._eventParents[Q].listens(o,h,w,A))return!0}return!1},_listens:function(o,h,w){if(!this._events)return!1;var A=this._events[o]||[];if(!h)return!!A.length;w===this&&(w=void 0);for(var N=0,V=A.length;N<V;N++)if(A[N].fn===h&&A[N].ctx===w)return N;return!1},once:function(o,h,w){if(typeof o=="object")for(var A in o)this._on(A,o[A],h,!0);else{o=z(o);for(var N=0,V=o.length;N<V;N++)this._on(o[N],h,w,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[v(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[v(o)],this},_propagateEvent:function(o){for(var h in this._eventParents)this._eventParents[h].fire(o.type,a({layer:o.target,propagatedFrom:o.target},o),!0)}};le.addEventListener=le.on,le.removeEventListener=le.clearAllEventListeners=le.off,le.addOneTimeEventListener=le.once,le.fireEvent=le.fire,le.hasEventListeners=le.listens;var ke=Ne.extend(le);function ie(o,h,w){this.x=w?Math.round(o):o,this.y=w?Math.round(h):h}var Ae=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};ie.prototype={clone:function(){return new ie(this.x,this.y)},add:function(o){return this.clone()._add(ve(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(ve(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new ie(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new ie(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ae(this.x),this.y=Ae(this.y),this},distanceTo:function(o){o=ve(o);var h=o.x-this.x,w=o.y-this.y;return Math.sqrt(h*h+w*w)},equals:function(o){return o=ve(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=ve(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function ve(o,h,w){return o instanceof ie?o:k(o)?new ie(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new ie(o.x,o.y):new ie(o,h,w)}function xe(o,h){if(o)for(var w=h?[o,h]:o,A=0,N=w.length;A<N;A++)this.extend(w[A])}xe.prototype={extend:function(o){var h,w;if(!o)return this;if(o instanceof ie||typeof o[0]=="number"||"x"in o)h=w=ve(o);else if(o=Le(o),h=o.min,w=o.max,!h||!w)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=w.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(w.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(w.y,this.max.y)),this},getCenter:function(o){return ve((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return ve(this.min.x,this.max.y)},getTopRight:function(){return ve(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var h,w;return typeof o[0]=="number"||o instanceof ie?o=ve(o):o=Le(o),o instanceof xe?(h=o.min,w=o.max):h=w=o,h.x>=this.min.x&&w.x<=this.max.x&&h.y>=this.min.y&&w.y<=this.max.y},intersects:function(o){o=Le(o);var h=this.min,w=this.max,A=o.min,N=o.max,V=N.x>=h.x&&A.x<=w.x,Q=N.y>=h.y&&A.y<=w.y;return V&&Q},overlaps:function(o){o=Le(o);var h=this.min,w=this.max,A=o.min,N=o.max,V=N.x>h.x&&A.x<w.x,Q=N.y>h.y&&A.y<w.y;return V&&Q},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var h=this.min,w=this.max,A=Math.abs(h.x-w.x)*o,N=Math.abs(h.y-w.y)*o;return Le(ve(h.x-A,h.y-N),ve(w.x+A,w.y+N))},equals:function(o){return o?(o=Le(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function Le(o,h){return!o||o instanceof xe?o:new xe(o,h)}function Ke(o,h){if(o)for(var w=h?[o,h]:o,A=0,N=w.length;A<N;A++)this.extend(w[A])}Ke.prototype={extend:function(o){var h=this._southWest,w=this._northEast,A,N;if(o instanceof ne)A=o,N=o;else if(o instanceof Ke){if(A=o._southWest,N=o._northEast,!A||!N)return this}else return o?this.extend(ae(o)||Fe(o)):this;return!h&&!w?(this._southWest=new ne(A.lat,A.lng),this._northEast=new ne(N.lat,N.lng)):(h.lat=Math.min(A.lat,h.lat),h.lng=Math.min(A.lng,h.lng),w.lat=Math.max(N.lat,w.lat),w.lng=Math.max(N.lng,w.lng)),this},pad:function(o){var h=this._southWest,w=this._northEast,A=Math.abs(h.lat-w.lat)*o,N=Math.abs(h.lng-w.lng)*o;return new Ke(new ne(h.lat-A,h.lng-N),new ne(w.lat+A,w.lng+N))},getCenter:function(){return new ne((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ne(this.getNorth(),this.getWest())},getSouthEast:function(){return new ne(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof ne||"lat"in o?o=ae(o):o=Fe(o);var h=this._southWest,w=this._northEast,A,N;return o instanceof Ke?(A=o.getSouthWest(),N=o.getNorthEast()):A=N=o,A.lat>=h.lat&&N.lat<=w.lat&&A.lng>=h.lng&&N.lng<=w.lng},intersects:function(o){o=Fe(o);var h=this._southWest,w=this._northEast,A=o.getSouthWest(),N=o.getNorthEast(),V=N.lat>=h.lat&&A.lat<=w.lat,Q=N.lng>=h.lng&&A.lng<=w.lng;return V&&Q},overlaps:function(o){o=Fe(o);var h=this._southWest,w=this._northEast,A=o.getSouthWest(),N=o.getNorthEast(),V=N.lat>h.lat&&A.lat<w.lat,Q=N.lng>h.lng&&A.lng<w.lng;return V&&Q},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,h){return o?(o=Fe(o),this._southWest.equals(o.getSouthWest(),h)&&this._northEast.equals(o.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Fe(o,h){return o instanceof Ke?o:new Ke(o,h)}function ne(o,h,w){if(isNaN(o)||isNaN(h))throw new Error("Invalid LatLng object: ("+o+", "+h+")");this.lat=+o,this.lng=+h,w!==void 0&&(this.alt=+w)}ne.prototype={equals:function(o,h){if(!o)return!1;o=ae(o);var w=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return w<=(h===void 0?1e-9:h)},toString:function(o){return"LatLng("+T(this.lat,o)+", "+T(this.lng,o)+")"},distanceTo:function(o){return Qe.distance(this,ae(o))},wrap:function(){return Qe.wrapLatLng(this)},toBounds:function(o){var h=180*o/40075017,w=h/Math.cos(Math.PI/180*this.lat);return Fe([this.lat-h,this.lng-w],[this.lat+h,this.lng+w])},clone:function(){return new ne(this.lat,this.lng,this.alt)}};function ae(o,h,w){return o instanceof ne?o:k(o)&&typeof o[0]!="object"?o.length===3?new ne(o[0],o[1],o[2]):o.length===2?new ne(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new ne(o.lat,"lng"in o?o.lng:o.lon,o.alt):h===void 0?null:new ne(o,h,w)}var je={latLngToPoint:function(o,h){var w=this.projection.project(o),A=this.scale(h);return this.transformation._transform(w,A)},pointToLatLng:function(o,h){var w=this.scale(h),A=this.transformation.untransform(o,w);return this.projection.unproject(A)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var h=this.projection.bounds,w=this.scale(o),A=this.transformation.transform(h.min,w),N=this.transformation.transform(h.max,w);return new xe(A,N)},infinite:!1,wrapLatLng:function(o){var h=this.wrapLng?C(o.lng,this.wrapLng,!0):o.lng,w=this.wrapLat?C(o.lat,this.wrapLat,!0):o.lat,A=o.alt;return new ne(w,h,A)},wrapLatLngBounds:function(o){var h=o.getCenter(),w=this.wrapLatLng(h),A=h.lat-w.lat,N=h.lng-w.lng;if(A===0&&N===0)return o;var V=o.getSouthWest(),Q=o.getNorthEast(),de=new ne(V.lat-A,V.lng-N),ge=new ne(Q.lat-A,Q.lng-N);return new Ke(de,ge)}},Qe=a({},je,{wrapLng:[-180,180],R:6371e3,distance:function(o,h){var w=Math.PI/180,A=o.lat*w,N=h.lat*w,V=Math.sin((h.lat-o.lat)*w/2),Q=Math.sin((h.lng-o.lng)*w/2),de=V*V+Math.cos(A)*Math.cos(N)*Q*Q,ge=2*Math.atan2(Math.sqrt(de),Math.sqrt(1-de));return this.R*ge}}),Ue=6378137,nt={R:Ue,MAX_LATITUDE:85.0511287798,project:function(o){var h=Math.PI/180,w=this.MAX_LATITUDE,A=Math.max(Math.min(w,o.lat),-w),N=Math.sin(A*h);return new ie(this.R*o.lng*h,this.R*Math.log((1+N)/(1-N))/2)},unproject:function(o){var h=180/Math.PI;return new ne((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*h,o.x*h/this.R)},bounds:function(){var o=Ue*Math.PI;return new xe([-o,-o],[o,o])}()};function Ze(o,h,w,A){if(k(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=h,this._c=w,this._d=A}Ze.prototype={transform:function(o,h){return this._transform(o.clone(),h)},_transform:function(o,h){return h=h||1,o.x=h*(this._a*o.x+this._b),o.y=h*(this._c*o.y+this._d),o},untransform:function(o,h){return h=h||1,new ie((o.x/h-this._b)/this._a,(o.y/h-this._d)/this._c)}};function Rt(o,h,w,A){return new Ze(o,h,w,A)}var tt=a({},Qe,{code:"EPSG:3857",projection:nt,transformation:function(){var o=.5/(Math.PI*nt.R);return Rt(o,.5,-o,.5)}()}),yt=a({},tt,{code:"EPSG:900913"});function Xt(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Vn(o,h){var w="",A,N,V,Q,de,ge;for(A=0,V=o.length;A<V;A++){for(de=o[A],N=0,Q=de.length;N<Q;N++)ge=de[N],w+=(N?"L":"M")+ge.x+" "+ge.y;w+=h?Ve.svg?"z":"x":""}return w||"M0 0"}var ut=document.documentElement.style,ht="ActiveXObject"in window,ft=ht&&!document.addEventListener,_r="msLaunchUri"in navigator&&!("documentMode"in document),Ye=At("webkit"),St=At("android"),qt=At("android 2")||At("android 3"),_t=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Dt=St&&At("Google")&&_t<537&&!("AudioNode"in window),Kt=!!window.opera,Hn=!_r&&At("chrome"),rn=At("gecko")&&!Ye&&!Kt&&!ht,W=!Hn&&At("safari"),we=At("phantom"),Ce="OTransition"in ut,Pe=navigator.platform.indexOf("Win")===0,he=ht&&"transition"in ut,pe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!qt,Be="MozPerspective"in ut,We=!window.L_DISABLE_3D&&(he||pe||Be)&&!Ce&&!we,ct=typeof orientation<"u"||At("mobile"),Qn=ct&&Ye,Bt=ct&&pe,yn=!window.PointerEvent&&window.MSPointerEvent,mt=!!(window.PointerEvent||yn),Jt="ontouchstart"in window||!!window.TouchEvent,$n=!window.L_NO_TOUCH&&(Jt||mt),J=ct&&Kt,_e=ct&&rn,Se=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ze=function(){var o=!1;try{var h=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",b,h),window.removeEventListener("testPassiveEventSupport",b,h)}catch{}return o}(),qe=function(){return!!document.createElement("canvas").getContext}(),pt=!!(document.createElementNS&&Xt("svg").createSVGRect),it=!!pt&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),In=!pt&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var h=o.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),Ut=navigator.platform.indexOf("Mac")===0,Ht=navigator.platform.indexOf("Linux")===0;function At(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Ve={ie:ht,ielt9:ft,edge:_r,webkit:Ye,android:St,android23:qt,androidStock:Dt,opera:Kt,chrome:Hn,gecko:rn,safari:W,phantom:we,opera12:Ce,win:Pe,ie3d:he,webkit3d:pe,gecko3d:Be,any3d:We,mobile:ct,mobileWebkit:Qn,mobileWebkit3d:Bt,msPointer:yn,pointer:mt,touch:$n,touchNative:Jt,mobileOpera:J,mobileGecko:_e,retina:Se,passiveEvents:ze,canvas:qe,svg:pt,vml:In,inlineSvg:it,mac:Ut,linux:Ht},Ft=Ve.msPointer?"MSPointerDown":"pointerdown",De=Ve.msPointer?"MSPointerMove":"pointermove",br=Ve.msPointer?"MSPointerUp":"pointerup",ci=Ve.msPointer?"MSPointerCancel":"pointercancel",wn={touchstart:Ft,touchmove:De,touchend:br,touchcancel:ci},Ot={touchstart:Zi,touchmove:Po,touchend:Po,touchcancel:Po},Pr={},Lo=!1;function ui(o,h,w){return h==="touchstart"&&ln(),Ot[h]?(w=Ot[h].bind(this,w),o.addEventListener(wn[h],w,!1),w):(console.warn("wrong event specified:",h),b)}function $h(o,h,w){if(!wn[h]){console.warn("wrong event specified:",h);return}o.removeEventListener(wn[h],w,!1)}function Jh(o){Pr[o.pointerId]=o}function di(o){Pr[o.pointerId]&&(Pr[o.pointerId]=o)}function Jn(o){delete Pr[o.pointerId]}function ln(){Lo||(document.addEventListener(Ft,Jh,!0),document.addEventListener(De,di,!0),document.addEventListener(br,Jn,!0),document.addEventListener(ci,Jn,!0),Lo=!0)}function Po(o,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var w in Pr)h.touches.push(Pr[w]);h.changedTouches=[h],o(h)}}function Zi(o,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&Gn(h),Po(o,h)}function Sl(o){var h={},w,A;for(A in o)w=o[A],h[A]=w&&w.bind?w.bind(o):w;return o=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var Ee=200;function ef(o,h){o.addEventListener("dblclick",h);var w=0,A;function N(V){if(V.detail!==1){A=V.detail;return}if(!(V.pointerType==="mouse"||V.sourceCapabilities&&!V.sourceCapabilities.firesTouchEvents)){var Q=js(V);if(!(Q.some(function(ge){return ge instanceof HTMLLabelElement&&ge.attributes.for})&&!Q.some(function(ge){return ge instanceof HTMLInputElement||ge instanceof HTMLSelectElement}))){var de=Date.now();de-w<=Ee?(A++,A===2&&h(Sl(V))):A=1,w=de}}}return o.addEventListener("click",N),{dblclick:h,simDblclick:N}}function vn(o,h){o.removeEventListener("dblclick",h.dblclick),o.removeEventListener("click",h.simDblclick)}var Yi=ue(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Do=ue(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Wt=Do==="webkitTransition"||Do==="OTransition"?Do+"End":"transitionend";function Vt(o){return typeof o=="string"?document.getElementById(o):o}function Nt(o,h){var w=o.style[h]||o.currentStyle&&o.currentStyle[h];if((!w||w==="auto")&&document.defaultView){var A=document.defaultView.getComputedStyle(o,null);w=A?A[h]:null}return w==="auto"?null:w}function jt(o,h,w){var A=document.createElement(o);return A.className=h||"",w&&w.appendChild(A),A}function on(o){var h=o.parentNode;h&&h.removeChild(o)}function Ds(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function cn(o){var h=o.parentNode;h&&h.lastChild!==o&&h.appendChild(o)}function Cr(o){var h=o.parentNode;h&&h.firstChild!==o&&h.insertBefore(o,h.firstChild)}function Al(o,h){if(o.classList!==void 0)return o.classList.contains(h);var w=ki(o);return w.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(w)}function rt(o,h){if(o.classList!==void 0)for(var w=z(h),A=0,N=w.length;A<N;A++)o.classList.add(w[A]);else if(!Al(o,h)){var V=ki(o);El(o,(V?V+" ":"")+h)}}function Qt(o,h){o.classList!==void 0?o.classList.remove(h):El(o,I((" "+ki(o)+" ").replace(" "+h+" "," ")))}function El(o,h){o.className.baseVal===void 0?o.className=h:o.className.baseVal=h}function ki(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function It(o,h){"opacity"in o.style?o.style.opacity=h:"filter"in o.style&&er(o,h)}function er(o,h){var w=!1,A="DXImageTransform.Microsoft.Alpha";try{w=o.filters.item(A)}catch{if(h===1)return}h=Math.round(h*100),w?(w.Enabled=h!==100,w.Opacity=h):o.style.filter+=" progid:"+A+"(opacity="+h+")"}function ue(o){for(var h=document.documentElement.style,w=0;w<o.length;w++)if(o[w]in h)return o[w];return!1}function Z(o,h,w){var A=h||new ie(0,0);o.style[Yi]=(Ve.ie3d?"translate("+A.x+"px,"+A.y+"px)":"translate3d("+A.x+"px,"+A.y+"px,0)")+(w?" scale("+w+")":"")}function He(o,h){o._leaflet_pos=h,Ve.any3d?Z(o,h):(o.style.left=h.x+"px",o.style.top=h.y+"px")}function un(o){return o._leaflet_pos||new ie(0,0)}var tr,jo,Bo;if("onselectstart"in document)tr=function(){wt(window,"selectstart",Gn)},jo=function(){Ge(window,"selectstart",Gn)};else{var nr=ue(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);tr=function(){if(nr){var o=document.documentElement.style;Bo=o[nr],o[nr]="none"}},jo=function(){nr&&(document.documentElement.style[nr]=Bo,Bo=void 0)}}function lt(){wt(window,"dragstart",Gn)}function an(){Ge(window,"dragstart",Gn)}var Fo,Nl;function zo(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(ls(),Fo=o,Nl=o.style.outlineStyle,o.style.outlineStyle="none",wt(window,"keydown",ls))}function ls(){Fo&&(Fo.style.outlineStyle=Nl,Fo=void 0,Nl=void 0,Ge(window,"keydown",ls))}function Ca(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function Tl(o){var h=o.getBoundingClientRect();return{x:h.width/o.offsetWidth||1,y:h.height/o.offsetHeight||1,boundingClientRect:h}}var jn={__proto__:null,TRANSFORM:Yi,TRANSITION:Do,TRANSITION_END:Wt,get:Vt,getStyle:Nt,create:jt,remove:on,empty:Ds,toFront:cn,toBack:Cr,hasClass:Al,addClass:rt,removeClass:Qt,setClass:El,getClass:ki,setOpacity:It,testProp:ue,setTransform:Z,setPosition:He,getPosition:un,get disableTextSelection(){return tr},get enableTextSelection(){return jo},disableImageDrag:lt,enableImageDrag:an,preventOutline:zo,restoreOutline:ls,getSizedParentNode:Ca,getScale:Tl};function wt(o,h,w,A){if(h&&typeof h=="object")for(var N in h)Rn(o,N,h[N],w);else{h=z(h);for(var V=0,Q=h.length;V<Q;V++)Rn(o,h[V],w,A)}return this}var Wn="_leaflet_events";function Ge(o,h,w,A){if(arguments.length===1)du(o),delete o[Wn];else if(h&&typeof h=="object")for(var N in h)Il(o,N,h[N],w);else if(h=z(h),arguments.length===2)du(o,function(de){return G(h,de)!==-1});else for(var V=0,Q=h.length;V<Q;V++)Il(o,h[V],w,A);return this}function du(o,h){for(var w in o[Wn]){var A=w.split(/\d/)[0];(!h||h(A))&&Il(o,A,null,null,w)}}var bt={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Rn(o,h,w,A){var N=h+v(w)+(A?"_"+v(A):"");if(o[Wn]&&o[Wn][N])return this;var V=function(de){return w.call(A||o,de||window.event)},Q=V;!Ve.touchNative&&Ve.pointer&&h.indexOf("touch")===0?V=ui(o,h,V):Ve.touch&&h==="dblclick"?V=ef(o,V):"addEventListener"in o?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?o.addEventListener(bt[h]||h,V,Ve.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(V=function(de){de=de||window.event,cs(o,de)&&Q(de)},o.addEventListener(bt[h],V,!1)):o.addEventListener(h,Q,!1):o.attachEvent("on"+h,V),o[Wn]=o[Wn]||{},o[Wn][N]=V}function Il(o,h,w,A,N){N=N||h+v(w)+(A?"_"+v(A):"");var V=o[Wn]&&o[Wn][N];if(!V)return this;!Ve.touchNative&&Ve.pointer&&h.indexOf("touch")===0?$h(o,h,V):Ve.touch&&h==="dblclick"?vn(o,V):"removeEventListener"in o?o.removeEventListener(bt[h]||h,V,!1):o.detachEvent("on"+h,V),o[Wn][N]=null}function Mi(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Sa(o){return Rn(o,"wheel",Mi),this}function Xr(o){return wt(o,"mousedown touchstart dblclick contextmenu",Mi),o._leaflet_disable_click=!0,this}function Gn(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function qr(o){return Gn(o),Mi(o),this}function js(o){if(o.composedPath)return o.composedPath();for(var h=[],w=o.target;w;)h.push(w),w=w.parentNode;return h}function Bs(o,h){if(!h)return new ie(o.clientX,o.clientY);var w=Tl(h),A=w.boundingClientRect;return new ie((o.clientX-A.left)/w.x-h.clientLeft,(o.clientY-A.top)/w.y-h.clientTop)}var hu=Ve.linux&&Ve.chrome?window.devicePixelRatio:Ve.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Fs(o){return Ve.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/hu:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function cs(o,h){var w=h.relatedTarget;if(!w)return!0;try{for(;w&&w!==o;)w=w.parentNode}catch{return!1}return w!==o}var dr={__proto__:null,on:wt,off:Ge,stopPropagation:Mi,disableScrollPropagation:Sa,disableClickPropagation:Xr,preventDefault:Gn,stop:qr,getPropagationPath:js,getMousePosition:Bs,getWheelDelta:Fs,isExternalTarget:cs,addListener:wt,removeListener:Ge},kl=ke.extend({run:function(o,h,w,A){this.stop(),this._el=o,this._inProgress=!0,this._duration=w||.25,this._easeOutPower=1/Math.max(A||.5,.2),this._startPos=un(o),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=$(this._animate,this),this._step()},_step:function(o){var h=+new Date-this._startTime,w=this._duration*1e3;h<w?this._runFrame(this._easeOut(h/w),o):(this._runFrame(1),this._complete())},_runFrame:function(o,h){var w=this._startPos.add(this._offset.multiplyBy(o));h&&w._round(),He(this._el,w),this.fire("step")},_complete:function(){se(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),Lt=ke.extend({options:{crs:tt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,h){h=R(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(ae(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Do&&Ve.any3d&&!Ve.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),wt(this._proxy,Wt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,h,w){if(h=h===void 0?this._zoom:this._limitZoom(h),o=this._limitCenter(ae(o),h,this.options.maxBounds),w=w||{},this._stop(),this._loaded&&!w.reset&&w!==!0){w.animate!==void 0&&(w.zoom=a({animate:w.animate},w.zoom),w.pan=a({animate:w.animate,duration:w.duration},w.pan));var A=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,h,w.zoom):this._tryAnimatedPan(o,w.pan);if(A)return clearTimeout(this._sizeTimer),this}return this._resetView(o,h,w.pan&&w.pan.noMoveStart),this},setZoom:function(o,h){return this._loaded?this.setView(this.getCenter(),o,{zoom:h}):(this._zoom=o,this)},zoomIn:function(o,h){return o=o||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,h)},zoomOut:function(o,h){return o=o||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,h)},setZoomAround:function(o,h,w){var A=this.getZoomScale(h),N=this.getSize().divideBy(2),V=o instanceof ie?o:this.latLngToContainerPoint(o),Q=V.subtract(N).multiplyBy(1-1/A),de=this.containerPointToLatLng(N.add(Q));return this.setView(de,h,{zoom:w})},_getBoundsCenterZoom:function(o,h){h=h||{},o=o.getBounds?o.getBounds():Fe(o);var w=ve(h.paddingTopLeft||h.padding||[0,0]),A=ve(h.paddingBottomRight||h.padding||[0,0]),N=this.getBoundsZoom(o,!1,w.add(A));if(N=typeof h.maxZoom=="number"?Math.min(h.maxZoom,N):N,N===1/0)return{center:o.getCenter(),zoom:N};var V=A.subtract(w).divideBy(2),Q=this.project(o.getSouthWest(),N),de=this.project(o.getNorthEast(),N),ge=this.unproject(Q.add(de).divideBy(2).add(V),N);return{center:ge,zoom:N}},fitBounds:function(o,h){if(o=Fe(o),!o.isValid())throw new Error("Bounds are not valid.");var w=this._getBoundsCenterZoom(o,h);return this.setView(w.center,w.zoom,h)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,h){return this.setView(o,this._zoom,{pan:h})},panBy:function(o,h){if(o=ve(o).round(),h=h||{},!o.x&&!o.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new kl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){rt(this._mapPane,"leaflet-pan-anim");var w=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,w,h.duration||.25,h.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,h,w){if(w=w||{},w.animate===!1||!Ve.any3d)return this.setView(o,h,w);this._stop();var A=this.project(this.getCenter()),N=this.project(o),V=this.getSize(),Q=this._zoom;o=ae(o),h=h===void 0?Q:h;var de=Math.max(V.x,V.y),ge=de*this.getZoomScale(Q,h),Te=N.distanceTo(A)||1,Xe=1.42,gt=Xe*Xe;function Mt(Fn){var vu=Fn?-1:1,nS=Fn?ge:de,rS=ge*ge-de*de+vu*gt*gt*Te*Te,iS=2*nS*gt*Te,lf=rS/iS,qm=Math.sqrt(lf*lf+1)-lf,sS=qm<1e-9?-18:Math.log(qm);return sS}function Nr(Fn){return(Math.exp(Fn)-Math.exp(-Fn))/2}function rr(Fn){return(Math.exp(Fn)+Math.exp(-Fn))/2}function xi(Fn){return Nr(Fn)/rr(Fn)}var jr=Mt(0);function Ia(Fn){return de*(rr(jr)/rr(jr+Xe*Fn))}function $C(Fn){return de*(rr(jr)*xi(jr+Xe*Fn)-Nr(jr))/gt}function JC(Fn){return 1-Math.pow(1-Fn,1.5)}var eS=Date.now(),Ym=(Mt(1)-jr)/Xe,tS=w.duration?1e3*w.duration:1e3*Ym*.8;function Xm(){var Fn=(Date.now()-eS)/tS,vu=JC(Fn)*Ym;Fn<=1?(this._flyToFrame=$(Xm,this),this._move(this.unproject(A.add(N.subtract(A).multiplyBy($C(vu)/Te)),Q),this.getScaleZoom(de/Ia(vu),Q),{flyTo:!0})):this._move(o,h)._moveEnd(!0)}return this._moveStart(!0,w.noMoveStart),Xm.call(this),this},flyToBounds:function(o,h){var w=this._getBoundsCenterZoom(o,h);return this.flyTo(w.center,w.zoom,h)},setMaxBounds:function(o){return o=Fe(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var h=this.options.minZoom;return this.options.minZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var h=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,h){this._enforcingBounds=!0;var w=this.getCenter(),A=this._limitCenter(w,this._zoom,Fe(o));return w.equals(A)||this.panTo(A,h),this._enforcingBounds=!1,this},panInside:function(o,h){h=h||{};var w=ve(h.paddingTopLeft||h.padding||[0,0]),A=ve(h.paddingBottomRight||h.padding||[0,0]),N=this.project(this.getCenter()),V=this.project(o),Q=this.getPixelBounds(),de=Le([Q.min.add(w),Q.max.subtract(A)]),ge=de.getSize();if(!de.contains(V)){this._enforcingBounds=!0;var Te=V.subtract(de.getCenter()),Xe=de.extend(V).getSize().subtract(ge);N.x+=Te.x<0?-Xe.x:Xe.x,N.y+=Te.y<0?-Xe.y:Xe.y,this.panTo(this.unproject(N),h),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=a({animate:!1,pan:!0},o===!0?{animate:!0}:o);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var w=this.getSize(),A=h.divideBy(2).round(),N=w.divideBy(2).round(),V=A.subtract(N);return!V.x&&!V.y?this:(o.animate&&o.pan?this.panBy(V):(o.pan&&this._rawPanBy(V),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:w}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=a({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=f(this._handleGeolocationResponse,this),w=f(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,w,o):navigator.geolocation.getCurrentPosition(h,w,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var h=o.code,w=o.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+w+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var h=o.coords.latitude,w=o.coords.longitude,A=new ne(h,w),N=A.toBounds(o.coords.accuracy*2),V=this._locateOptions;if(V.setView){var Q=this.getBoundsZoom(N);this.setView(A,V.maxZoom?Math.min(Q,V.maxZoom):Q)}var de={latlng:A,bounds:N,timestamp:o.timestamp};for(var ge in o.coords)typeof o.coords[ge]=="number"&&(de[ge]=o.coords[ge]);this.fire("locationfound",de)}},addHandler:function(o,h){if(!h)return this;var w=this[o]=new h(this);return this._handlers.push(w),this.options[o]&&w.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),on(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(se(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)on(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,h){var w="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),A=jt("div",w,h||this._mapPane);return o&&(this._panes[o]=A),A},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),h=this.unproject(o.getBottomLeft()),w=this.unproject(o.getTopRight());return new Ke(h,w)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,h,w){o=Fe(o),w=ve(w||[0,0]);var A=this.getZoom()||0,N=this.getMinZoom(),V=this.getMaxZoom(),Q=o.getNorthWest(),de=o.getSouthEast(),ge=this.getSize().subtract(w),Te=Le(this.project(de,A),this.project(Q,A)).getSize(),Xe=Ve.any3d?this.options.zoomSnap:1,gt=ge.x/Te.x,Mt=ge.y/Te.y,Nr=h?Math.max(gt,Mt):Math.min(gt,Mt);return A=this.getScaleZoom(Nr,A),Xe&&(A=Math.round(A/(Xe/100))*(Xe/100),A=h?Math.ceil(A/Xe)*Xe:Math.floor(A/Xe)*Xe),Math.max(N,Math.min(V,A))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ie(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,h){var w=this._getTopLeftPoint(o,h);return new xe(w,w.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,h){var w=this.options.crs;return h=h===void 0?this._zoom:h,w.scale(o)/w.scale(h)},getScaleZoom:function(o,h){var w=this.options.crs;h=h===void 0?this._zoom:h;var A=w.zoom(o*w.scale(h));return isNaN(A)?1/0:A},project:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(ae(o),h)},unproject:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(ve(o),h)},layerPointToLatLng:function(o){var h=ve(o).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(o){var h=this.project(ae(o))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(ae(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(Fe(o))},distance:function(o,h){return this.options.crs.distance(ae(o),ae(h))},containerPointToLayerPoint:function(o){return ve(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return ve(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var h=this.containerPointToLayerPoint(ve(o));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ae(o)))},mouseEventToContainerPoint:function(o){return Bs(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var h=this._container=Vt(o);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");wt(h,"scroll",this._onScroll,this),this._containerId=v(h)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ve.any3d,rt(o,"leaflet-container"+(Ve.touch?" leaflet-touch":"")+(Ve.retina?" leaflet-retina":"")+(Ve.ielt9?" leaflet-oldie":"")+(Ve.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=Nt(o,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),He(this._mapPane,new ie(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(rt(o.markerPane,"leaflet-zoom-hide"),rt(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,h,w){He(this._mapPane,new ie(0,0));var A=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var N=this._zoom!==h;this._moveStart(N,w)._move(o,h)._moveEnd(N),this.fire("viewreset"),A&&this.fire("load")},_moveStart:function(o,h){return o&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(o,h,w,A){h===void 0&&(h=this._zoom);var N=this._zoom!==h;return this._zoom=h,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),A?w&&w.pinch&&this.fire("zoom",w):((N||w&&w.pinch)&&this.fire("zoom",w),this.fire("move",w)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return se(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){He(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[v(this._container)]=this;var h=o?Ge:wt;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),Ve.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){se(this._resizeRequest),this._resizeRequest=$(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,h){for(var w=[],A,N=h==="mouseout"||h==="mouseover",V=o.target||o.srcElement,Q=!1;V;){if(A=this._targets[v(V)],A&&(h==="click"||h==="preclick")&&this._draggableMoved(A)){Q=!0;break}if(A&&A.listens(h,!0)&&(N&&!cs(V,o)||(w.push(A),N))||V===this._container)break;V=V.parentNode}return!w.length&&!Q&&!N&&this.listens(h,!0)&&(w=[this]),w},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var h=o.target||o.srcElement;if(!(!this._loaded||h._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(h))){var w=o.type;w==="mousedown"&&zo(h),this._fireDOMEvent(o,w)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,h,w){if(o.type==="click"){var A=a({},o);A.type="preclick",this._fireDOMEvent(A,A.type,w)}var N=this._findEventTargets(o,h);if(w){for(var V=[],Q=0;Q<w.length;Q++)w[Q].listens(h,!0)&&V.push(w[Q]);N=V.concat(N)}if(N.length){h==="contextmenu"&&Gn(o);var de=N[0],ge={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var Te=de.getLatLng&&(!de._radius||de._radius<=10);ge.containerPoint=Te?this.latLngToContainerPoint(de.getLatLng()):this.mouseEventToContainerPoint(o),ge.layerPoint=this.containerPointToLayerPoint(ge.containerPoint),ge.latlng=Te?de.getLatLng():this.layerPointToLatLng(ge.layerPoint)}for(Q=0;Q<N.length;Q++)if(N[Q].fire(h,ge,!0),ge.originalEvent._stopped||N[Q].options.bubblingMouseEvents===!1&&G(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,h=this._handlers.length;o<h;o++)this._handlers[o].disable()},whenReady:function(o,h){return this._loaded?o.call(h||this,{target:this}):this.on("load",o,h),this},_getMapPanePos:function(){return un(this._mapPane)||new ie(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,h){var w=o&&h!==void 0?this._getNewPixelOrigin(o,h):this.getPixelOrigin();return w.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,h){var w=this.getSize()._divideBy(2);return this.project(o,h)._subtract(w)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,h,w){var A=this._getNewPixelOrigin(w,h);return this.project(o,h)._subtract(A)},_latLngBoundsToNewLayerBounds:function(o,h,w){var A=this._getNewPixelOrigin(w,h);return Le([this.project(o.getSouthWest(),h)._subtract(A),this.project(o.getNorthWest(),h)._subtract(A),this.project(o.getSouthEast(),h)._subtract(A),this.project(o.getNorthEast(),h)._subtract(A)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,h,w){if(!w)return o;var A=this.project(o,h),N=this.getSize().divideBy(2),V=new xe(A.subtract(N),A.add(N)),Q=this._getBoundsOffset(V,w,h);return Math.abs(Q.x)<=1&&Math.abs(Q.y)<=1?o:this.unproject(A.add(Q),h)},_limitOffset:function(o,h){if(!h)return o;var w=this.getPixelBounds(),A=new xe(w.min.add(o),w.max.add(o));return o.add(this._getBoundsOffset(A,h))},_getBoundsOffset:function(o,h,w){var A=Le(this.project(h.getNorthEast(),w),this.project(h.getSouthWest(),w)),N=A.min.subtract(o.min),V=A.max.subtract(o.max),Q=this._rebound(N.x,-V.x),de=this._rebound(N.y,-V.y);return new ie(Q,de)},_rebound:function(o,h){return o+h>0?Math.round(o-h)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(h))},_limitZoom:function(o){var h=this.getMinZoom(),w=this.getMaxZoom(),A=Ve.any3d?this.options.zoomSnap:1;return A&&(o=Math.round(o/A)*A),Math.max(h,Math.min(w,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Qt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,h){var w=this._getCenterOffset(o)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(w)?!1:(this.panBy(w,h),!0)},_createAnimProxy:function(){var o=this._proxy=jt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(h){var w=Yi,A=this._proxy.style[w];Z(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),A===this._proxy.style[w]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){on(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),h=this.getZoom();Z(this._proxy,this.project(o,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,h,w){if(this._animatingZoom)return!0;if(w=w||{},!this._zoomAnimated||w.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var A=this.getZoomScale(h),N=this._getCenterOffset(o)._divideBy(1-1/A);return w.animate!==!0&&!this.getSize().contains(N)?!1:($(function(){this._moveStart(!0,w.noMoveStart||!1)._animateZoom(o,h,!0)},this),!0)},_animateZoom:function(o,h,w,A){this._mapPane&&(w&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=h,rt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:h,noUpdate:A}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Qt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function fu(o,h){return new Lt(o,h)}var Kr=Ne.extend({options:{position:"topright"},initialize:function(o){R(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var h=this._map;return h&&h.removeControl(this),this.options.position=o,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var h=this._container=this.onAdd(o),w=this.getPosition(),A=o._controlCorners[w];return rt(h,"leaflet-control"),w.indexOf("bottom")!==-1?A.insertBefore(h,A.firstChild):A.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(on(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),Uo=function(o){return new Kr(o)};Lt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},h="leaflet-",w=this._controlContainer=jt("div",h+"control-container",this._container);function A(N,V){var Q=h+N+" "+h+V;o[N+V]=jt("div",Q,w)}A("top","left"),A("top","right"),A("bottom","left"),A("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)on(this._controlCorners[o]);on(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var pu=Kr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,h,w,A){return w<A?-1:A<w?1:0}},initialize:function(o,h,w){R(this,w),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var A in o)this._addLayer(o[A],A);for(A in h)this._addLayer(h[A],A,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return Kr.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,h){return this._addLayer(o,h),this._map?this._update():this},addOverlay:function(o,h){return this._addLayer(o,h,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var h=this._getLayer(v(o));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){rt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(rt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Qt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Qt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",h=this._container=jt("div",o),w=this.options.collapsed;h.setAttribute("aria-haspopup",!0),Xr(h),Sa(h);var A=this._section=jt("section",o+"-list");w&&(this._map.on("click",this.collapse,this),wt(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var N=this._layersLink=jt("a",o+"-toggle",h);N.href="#",N.title="Layers",N.setAttribute("role","button"),wt(N,{keydown:function(V){V.keyCode===13&&this._expandSafely()},click:function(V){Gn(V),this._expandSafely()}},this),w||this.expand(),this._baseLayersList=jt("div",o+"-base",A),this._separator=jt("div",o+"-separator",A),this._overlaysList=jt("div",o+"-overlays",A),h.appendChild(A)},_getLayer:function(o){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&v(this._layers[h].layer)===o)return this._layers[h]},_addLayer:function(o,h,w){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:h,overlay:w}),this.options.sortLayers&&this._layers.sort(f(function(A,N){return this.options.sortFunction(A.layer,N.layer,A.name,N.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ds(this._baseLayersList),Ds(this._overlaysList),this._layerControlInputs=[];var o,h,w,A,N=0;for(w=0;w<this._layers.length;w++)A=this._layers[w],this._addItem(A),h=h||A.overlay,o=o||!A.overlay,N+=A.overlay?0:1;return this.options.hideSingleBase&&(o=o&&N>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=h&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var h=this._getLayer(v(o.target)),w=h.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;w&&this._map.fire(w,h)},_createRadioElement:function(o,h){var w='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(h?' checked="checked"':"")+"/>",A=document.createElement("div");return A.innerHTML=w,A.firstChild},_addItem:function(o){var h=document.createElement("label"),w=this._map.hasLayer(o.layer),A;o.overlay?(A=document.createElement("input"),A.type="checkbox",A.className="leaflet-control-layers-selector",A.defaultChecked=w):A=this._createRadioElement("leaflet-base-layers_"+v(this),w),this._layerControlInputs.push(A),A.layerId=v(o.layer),wt(A,"click",this._onInputClick,this);var N=document.createElement("span");N.innerHTML=" "+o.name;var V=document.createElement("span");h.appendChild(V),V.appendChild(A),V.appendChild(N);var Q=o.overlay?this._overlaysList:this._baseLayersList;return Q.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,h,w,A=[],N=[];this._handlingClick=!0;for(var V=o.length-1;V>=0;V--)h=o[V],w=this._getLayer(h.layerId).layer,h.checked?A.push(w):h.checked||N.push(w);for(V=0;V<N.length;V++)this._map.hasLayer(N[V])&&this._map.removeLayer(N[V]);for(V=0;V<A.length;V++)this._map.hasLayer(A[V])||this._map.addLayer(A[V]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,h,w,A=this._map.getZoom(),N=o.length-1;N>=0;N--)h=o[N],w=this._getLayer(h.layerId).layer,h.disabled=w.options.minZoom!==void 0&&A<w.options.minZoom||w.options.maxZoom!==void 0&&A>w.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,wt(o,"click",Gn),this.expand();var h=this;setTimeout(function(){Ge(o,"click",Gn),h._preventClick=!1})}}),$t=function(o,h,w){return new pu(o,h,w)},Aa=Kr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var h="leaflet-control-zoom",w=jt("div",h+" leaflet-bar"),A=this.options;return this._zoomInButton=this._createButton(A.zoomInText,A.zoomInTitle,h+"-in",w,this._zoomIn),this._zoomOutButton=this._createButton(A.zoomOutText,A.zoomOutTitle,h+"-out",w,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),w},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,h,w,A,N){var V=jt("a",w,A);return V.innerHTML=o,V.href="#",V.title=h,V.setAttribute("role","button"),V.setAttribute("aria-label",h),Xr(V),wt(V,"click",qr),wt(V,"click",N,this),wt(V,"click",this._refocusOnMap,this),V},_updateDisabled:function(){var o=this._map,h="leaflet-disabled";Qt(this._zoomInButton,h),Qt(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(rt(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(rt(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});Lt.mergeOptions({zoomControl:!0}),Lt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Aa,this.addControl(this.zoomControl))});var Ea=function(o){return new Aa(o)},Ri=Kr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var h="leaflet-control-scale",w=jt("div",h),A=this.options;return this._addScales(A,h+"-line",w),o.on(A.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),w},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,h,w){o.metric&&(this._mScale=jt("div",h,w)),o.imperial&&(this._iScale=jt("div",h,w))},_update:function(){var o=this._map,h=o.getSize().y/2,w=o.distance(o.containerPointToLatLng([0,h]),o.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(w)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var h=this._getRoundNum(o),w=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,w,h/o)},_updateImperial:function(o){var h=o*3.2808399,w,A,N;h>5280?(w=h/5280,A=this._getRoundNum(w),this._updateScale(this._iScale,A+" mi",A/w)):(N=this._getRoundNum(h),this._updateScale(this._iScale,N+" ft",N/h))},_updateScale:function(o,h,w){o.style.width=Math.round(this.options.maxWidth*w)+"px",o.innerHTML=h},_getRoundNum:function(o){var h=Math.pow(10,(Math.floor(o)+"").length-1),w=o/h;return w=w>=10?10:w>=5?5:w>=3?3:w>=2?2:1,h*w}}),tf=function(o){return new Ri(o)},me='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Et=Kr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ve.inlineSvg?me+" ":"")+"Leaflet</a>"},initialize:function(o){R(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=jt("div","leaflet-control-attribution"),Xr(this._container);for(var h in o._layers)o._layers[h].getAttribution&&this.addAttribution(o._layers[h].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var h in this._attributions)this._attributions[h]&&o.push(h);var w=[];this.options.prefix&&w.push(this.options.prefix),o.length&&w.push(o.join(", ")),this._container.innerHTML=w.join(' <span aria-hidden="true">|</span> ')}}});Lt.mergeOptions({attributionControl:!0}),Lt.addInitHook(function(){this.options.attributionControl&&new Et().addTo(this)});var Zn=function(o){return new Et(o)};Kr.Layers=pu,Kr.Zoom=Aa,Kr.Scale=Ri,Kr.Attribution=Et,Uo.layers=$t,Uo.zoom=Ea,Uo.scale=tf,Uo.attribution=Zn;var Sr=Ne.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Sr.addTo=function(o,h){return o.addHandler(h,this),this};var mu={Events:le},gu=Ve.touch?"touchstart mousedown":"mousedown",Xi=ke.extend({options:{clickTolerance:3},initialize:function(o,h,w,A){R(this,A),this._element=o,this._dragStartTarget=h||o,this._preventOutline=w},enable:function(){this._enabled||(wt(this._dragStartTarget,gu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Xi._dragging===this&&this.finishDrag(!0),Ge(this._dragStartTarget,gu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Al(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){Xi._dragging===this&&this.finishDrag();return}if(!(Xi._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(Xi._dragging=this,this._preventOutline&&zo(this._element),lt(),tr(),!this._moving)){this.fire("down");var h=o.touches?o.touches[0]:o,w=Ca(this._element);this._startPoint=new ie(h.clientX,h.clientY),this._startPos=un(this._element),this._parentScale=Tl(w);var A=o.type==="mousedown";wt(document,A?"mousemove":"touchmove",this._onMove,this),wt(document,A?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var h=o.touches&&o.touches.length===1?o.touches[0]:o,w=new ie(h.clientX,h.clientY)._subtract(this._startPoint);!w.x&&!w.y||Math.abs(w.x)+Math.abs(w.y)<this.options.clickTolerance||(w.x/=this._parentScale.x,w.y/=this._parentScale.y,Gn(o),this._moved||(this.fire("dragstart"),this._moved=!0,rt(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),rt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(w),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),He(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Qt(document.body,"leaflet-dragging"),this._lastTarget&&(Qt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ge(document,"mousemove touchmove",this._onMove,this),Ge(document,"mouseup touchend touchcancel",this._onUp,this),an(),jo();var h=this._moved&&this._moving;this._moving=!1,Xi._dragging=!1,h&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function xu(o,h,w){var A,N=[1,4,2,8],V,Q,de,ge,Te,Xe,gt,Mt;for(V=0,Xe=o.length;V<Xe;V++)o[V]._code=ds(o[V],h);for(de=0;de<4;de++){for(gt=N[de],A=[],V=0,Xe=o.length,Q=Xe-1;V<Xe;Q=V++)ge=o[V],Te=o[Q],ge._code&gt?Te._code&gt||(Mt=Oi(Te,ge,gt,h,w),Mt._code=ds(Mt,h),A.push(Mt)):(Te._code&gt&&(Mt=Oi(Te,ge,gt,h,w),Mt._code=ds(Mt,h),A.push(Mt)),A.push(ge));o=A}return o}function Na(o,h){var w,A,N,V,Q,de,ge,Te,Xe;if(!o||o.length===0)throw new Error("latlngs not passed");Ar(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var gt=ae([0,0]),Mt=Fe(o),Nr=Mt.getNorthWest().distanceTo(Mt.getSouthWest())*Mt.getNorthEast().distanceTo(Mt.getNorthWest());Nr<1700&&(gt=Cn(o));var rr=o.length,xi=[];for(w=0;w<rr;w++){var jr=ae(o[w]);xi.push(h.project(ae([jr.lat-gt.lat,jr.lng-gt.lng])))}for(de=ge=Te=0,w=0,A=rr-1;w<rr;A=w++)N=xi[w],V=xi[A],Q=N.y*V.x-V.y*N.x,ge+=(N.x+V.x)*Q,Te+=(N.y+V.y)*Q,de+=Q*3;de===0?Xe=xi[0]:Xe=[ge/de,Te/de];var Ia=h.unproject(ve(Xe));return ae([Ia.lat+gt.lat,Ia.lng+gt.lng])}function Cn(o){for(var h=0,w=0,A=0,N=0;N<o.length;N++){var V=ae(o[N]);h+=V.lat,w+=V.lng,A++}return ae([h/A,w/A])}var Ml={__proto__:null,clipPolygon:xu,polygonCenter:Na,centroid:Cn};function pn(o,h){if(!h||!o.length)return o.slice();var w=h*h;return o=nf(o,w),o=en(o,w),o}function Vo(o,h,w){return Math.sqrt(hs(o,h,w,!0))}function us(o,h,w){return hs(o,h,w)}function en(o,h){var w=o.length,A=typeof Uint8Array<"u"?Uint8Array:Array,N=new A(w);N[0]=N[w-1]=1,dt(o,N,h,0,w-1);var V,Q=[];for(V=0;V<w;V++)N[V]&&Q.push(o[V]);return Q}function dt(o,h,w,A,N){var V=0,Q,de,ge;for(de=A+1;de<=N-1;de++)ge=hs(o[de],o[A],o[N],!0),ge>V&&(Q=de,V=ge);V>w&&(h[Q]=1,dt(o,h,w,A,Q),dt(o,h,w,Q,N))}function nf(o,h){for(var w=[o[0]],A=1,N=0,V=o.length;A<V;A++)hi(o[A],o[N])>h&&(w.push(o[A]),N=A);return N<V-1&&w.push(o[V-1]),w}var sn;function qi(o,h,w,A,N){var V=A?sn:ds(o,w),Q=ds(h,w),de,ge,Te;for(sn=Q;;){if(!(V|Q))return[o,h];if(V&Q)return!1;de=V||Q,ge=Oi(o,h,de,w,N),Te=ds(ge,w),de===V?(o=ge,V=Te):(h=ge,Q=Te)}}function Oi(o,h,w,A,N){var V=h.x-o.x,Q=h.y-o.y,de=A.min,ge=A.max,Te,Xe;return w&8?(Te=o.x+V*(ge.y-o.y)/Q,Xe=ge.y):w&4?(Te=o.x+V*(de.y-o.y)/Q,Xe=de.y):w&2?(Te=ge.x,Xe=o.y+Q*(ge.x-o.x)/V):w&1&&(Te=de.x,Xe=o.y+Q*(de.x-o.x)/V),new ie(Te,Xe,N)}function ds(o,h){var w=0;return o.x<h.min.x?w|=1:o.x>h.max.x&&(w|=2),o.y<h.min.y?w|=4:o.y>h.max.y&&(w|=8),w}function hi(o,h){var w=h.x-o.x,A=h.y-o.y;return w*w+A*A}function hs(o,h,w,A){var N=h.x,V=h.y,Q=w.x-N,de=w.y-V,ge=Q*Q+de*de,Te;return ge>0&&(Te=((o.x-N)*Q+(o.y-V)*de)/ge,Te>1?(N=w.x,V=w.y):Te>0&&(N+=Q*Te,V+=de*Te)),Q=o.x-N,de=o.y-V,A?Q*Q+de*de:new ie(N,V)}function Ar(o){return!k(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function Ta(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ar(o)}function Rl(o,h){var w,A,N,V,Q,de,ge,Te;if(!o||o.length===0)throw new Error("latlngs not passed");Ar(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Xe=ae([0,0]),gt=Fe(o),Mt=gt.getNorthWest().distanceTo(gt.getSouthWest())*gt.getNorthEast().distanceTo(gt.getNorthWest());Mt<1700&&(Xe=Cn(o));var Nr=o.length,rr=[];for(w=0;w<Nr;w++){var xi=ae(o[w]);rr.push(h.project(ae([xi.lat-Xe.lat,xi.lng-Xe.lng])))}for(w=0,A=0;w<Nr-1;w++)A+=rr[w].distanceTo(rr[w+1])/2;if(A===0)Te=rr[0];else for(w=0,V=0;w<Nr-1;w++)if(Q=rr[w],de=rr[w+1],N=Q.distanceTo(de),V+=N,V>A){ge=(V-A)/N,Te=[de.x-ge*(de.x-Q.x),de.y-ge*(de.y-Q.y)];break}var jr=h.unproject(ve(Te));return ae([jr.lat+Xe.lat,jr.lng+Xe.lng])}var yu={__proto__:null,simplify:pn,pointToSegmentDistance:Vo,closestPointOnSegment:us,clipSegment:qi,_getEdgeIntersection:Oi,_getBitCode:ds,_sqClosestPointOnSegment:hs,isFlat:Ar,_flat:Ta,polylineCenter:Rl},Ol={project:function(o){return new ie(o.lng,o.lat)},unproject:function(o){return new ne(o.y,o.x)},bounds:new xe([-180,-90],[180,90])},Ki={R:6378137,R_MINOR:6356752314245179e-9,bounds:new xe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var h=Math.PI/180,w=this.R,A=o.lat*h,N=this.R_MINOR/w,V=Math.sqrt(1-N*N),Q=V*Math.sin(A),de=Math.tan(Math.PI/4-A/2)/Math.pow((1-Q)/(1+Q),V/2);return A=-w*Math.log(Math.max(de,1e-10)),new ie(o.lng*h*w,A)},unproject:function(o){for(var h=180/Math.PI,w=this.R,A=this.R_MINOR/w,N=Math.sqrt(1-A*A),V=Math.exp(-o.y/w),Q=Math.PI/2-2*Math.atan(V),de=0,ge=.1,Te;de<15&&Math.abs(ge)>1e-7;de++)Te=N*Math.sin(Q),Te=Math.pow((1-Te)/(1+Te),N/2),ge=Math.PI/2-2*Math.atan(V*Te)-Q,Q+=ge;return new ne(Q*h,o.x*h/w)}},Ll={__proto__:null,LonLat:Ol,Mercator:Ki,SphericalMercator:nt},rf=a({},Qe,{code:"EPSG:3395",projection:Ki,transformation:function(){var o=.5/(Math.PI*Ki.R);return Rt(o,.5,-o,.5)}()}),zs=a({},Qe,{code:"EPSG:4326",projection:Ol,transformation:Rt(1/180,1,-1/180,.5)}),sf=a({},je,{projection:Ol,transformation:Rt(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,h){var w=h.lng-o.lng,A=h.lat-o.lat;return Math.sqrt(w*w+A*A)},infinite:!0});je.Earth=Qe,je.EPSG3395=rf,je.EPSG3857=tt,je.EPSG900913=yt,je.EPSG4326=zs,je.Simple=sf;var Bn=ke.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[v(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[v(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var h=o.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var w=this.getEvents();h.on(w,this),this.once("remove",function(){h.off(w,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});Lt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var h=v(o);return this._layers[h]?this:(this._layers[h]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var h=v(o);return this._layers[h]?(this._loaded&&o.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return v(o)in this._layers},eachLayer:function(o,h){for(var w in this._layers)o.call(h,this._layers[w]);return this},_addLayers:function(o){o=o?k(o)?o:[o]:[];for(var h=0,w=o.length;h<w;h++)this.addLayer(o[h])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[v(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var h=v(o);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,h=-1/0,w=this._getZoomSpan();for(var A in this._zoomBoundLayers){var N=this._zoomBoundLayers[A].options;o=N.minZoom===void 0?o:Math.min(o,N.minZoom),h=N.maxZoom===void 0?h:Math.max(h,N.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=o===1/0?void 0:o,w!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Li=Bn.extend({initialize:function(o,h){R(this,h),this._layers={};var w,A;if(o)for(w=0,A=o.length;w<A;w++)this.addLayer(o[w])},addLayer:function(o){var h=this.getLayerId(o);return this._layers[h]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var h=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(o){var h=typeof o=="number"?o:this.getLayerId(o);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var h=Array.prototype.slice.call(arguments,1),w,A;for(w in this._layers)A=this._layers[w],A[o]&&A[o].apply(A,h);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,h){for(var w in this._layers)o.call(h,this._layers[w]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return v(o)}}),Dr=function(o,h){return new Li(o,h)},fi=Li.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),Li.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),Li.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new Ke;for(var h in this._layers){var w=this._layers[h];o.extend(w.getBounds?w.getBounds():w.getLatLng())}return o}}),pi=function(o,h){return new fi(o,h)},Us=Ne.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){R(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,h){var w=this._getIconUrl(o);if(!w){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var A=this._createImg(w,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(A,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(A.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),A},_setIconStyles:function(o,h){var w=this.options,A=w[h+"Size"];typeof A=="number"&&(A=[A,A]);var N=ve(A),V=ve(h==="shadow"&&w.shadowAnchor||w.iconAnchor||N&&N.divideBy(2,!0));o.className="leaflet-marker-"+h+" "+(w.className||""),V&&(o.style.marginLeft=-V.x+"px",o.style.marginTop=-V.y+"px"),N&&(o.style.width=N.x+"px",o.style.height=N.y+"px")},_createImg:function(o,h){return h=h||document.createElement("img"),h.src=o,h},_getIconUrl:function(o){return Ve.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function Pl(o){return new Us(o)}var Ho=Us.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof Ho.imagePath!="string"&&(Ho.imagePath=this._detectIconPath()),(this.options.imagePath||Ho.imagePath)+Us.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var h=function(w,A,N){var V=A.exec(w);return V&&V[N]};return o=h(o,/^url\((['"])?(.+)\1\)$/,2),o&&h(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=jt("div","leaflet-default-icon-path",document.body),h=Nt(o,"background-image")||Nt(o,"backgroundImage");if(document.body.removeChild(o),h=this._stripUrl(h),h)return h;var w=document.querySelector('link[href$="leaflet.css"]');return w?w.href.substring(0,w.href.length-11-1):""}}),Dl=Sr.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new Xi(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),rt(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Qt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var h=this._marker,w=h._map,A=this._marker.options.autoPanSpeed,N=this._marker.options.autoPanPadding,V=un(h._icon),Q=w.getPixelBounds(),de=w.getPixelOrigin(),ge=Le(Q.min._subtract(de).add(N),Q.max._subtract(de).subtract(N));if(!ge.contains(V)){var Te=ve((Math.max(ge.max.x,V.x)-ge.max.x)/(Q.max.x-ge.max.x)-(Math.min(ge.min.x,V.x)-ge.min.x)/(Q.min.x-ge.min.x),(Math.max(ge.max.y,V.y)-ge.max.y)/(Q.max.y-ge.max.y)-(Math.min(ge.min.y,V.y)-ge.min.y)/(Q.min.y-ge.min.y)).multiplyBy(A);w.panBy(Te,{animate:!1}),this._draggable._newPos._add(Te),this._draggable._startPos._add(Te),He(h._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=$(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(se(this._panRequest),this._panRequest=$(this._adjustPan.bind(this,o)))},_onDrag:function(o){var h=this._marker,w=h._shadow,A=un(h._icon),N=h._map.layerPointToLatLng(A);w&&He(w,A),h._latlng=N,o.latlng=N,o.oldLatLng=this._oldLatLng,h.fire("move",o).fire("drag",o)},_onDragEnd:function(o){se(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),Er=Bn.extend({options:{icon:new Ho,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,h){R(this,h),this._latlng=ae(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var h=this._latlng;return this._latlng=ae(o),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),w=o.icon.createIcon(this._icon),A=!1;w!==this._icon&&(this._icon&&this._removeIcon(),A=!0,o.title&&(w.title=o.title),w.tagName==="IMG"&&(w.alt=o.alt||"")),rt(w,h),o.keyboard&&(w.tabIndex="0",w.setAttribute("role","button")),this._icon=w,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&wt(w,"focus",this._panOnFocus,this);var N=o.icon.createShadow(this._shadow),V=!1;N!==this._shadow&&(this._removeShadow(),V=!0),N&&(rt(N,h),N.alt=""),this._shadow=N,o.opacity<1&&this._updateOpacity(),A&&this.getPane().appendChild(this._icon),this._initInteraction(),N&&V&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ge(this._icon,"focus",this._panOnFocus,this),on(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&on(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&He(this._icon,o),this._shadow&&He(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(rt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Dl)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Dl(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&It(this._icon,o),this._shadow&&It(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var h=this.options.icon.options,w=h.iconSize?ve(h.iconSize):ve(0,0),A=h.iconAnchor?ve(h.iconAnchor):ve(0,0);o.panInside(this._latlng,{paddingTopLeft:A,paddingBottomRight:w.subtract(A)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function of(o,h){return new Er(o,h)}var mi=Bn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return R(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Qi=mi.extend({options:{fill:!0,radius:10},initialize:function(o,h){R(this,h),this._latlng=ae(o),this._radius=this.options.radius},setLatLng:function(o){var h=this._latlng;return this._latlng=ae(o),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var h=o&&o.radius||this._radius;return mi.prototype.setStyle.call(this,o),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,h=this._radiusY||o,w=this._clickTolerance(),A=[o+w,h+w];this._pxBounds=new xe(this._point.subtract(A),this._point.add(A))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function zt(o,h){return new Qi(o,h)}var Vs=Qi.extend({initialize:function(o,h,w){if(typeof h=="number"&&(h=a({},w,{radius:h})),R(this,h),this._latlng=ae(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new Ke(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:mi.prototype.setStyle,_project:function(){var o=this._latlng.lng,h=this._latlng.lat,w=this._map,A=w.options.crs;if(A.distance===Qe.distance){var N=Math.PI/180,V=this._mRadius/Qe.R/N,Q=w.project([h+V,o]),de=w.project([h-V,o]),ge=Q.add(de).divideBy(2),Te=w.unproject(ge).lat,Xe=Math.acos((Math.cos(V*N)-Math.sin(h*N)*Math.sin(Te*N))/(Math.cos(h*N)*Math.cos(Te*N)))/N;(isNaN(Xe)||Xe===0)&&(Xe=V/Math.cos(Math.PI/180*h)),this._point=ge.subtract(w.getPixelOrigin()),this._radius=isNaN(Xe)?0:ge.x-w.project([Te,o-Xe]).x,this._radiusY=ge.y-Q.y}else{var gt=A.unproject(A.project(this._latlng).subtract([this._mRadius,0]));this._point=w.latLngToLayerPoint(this._latlng),this._radius=this._point.x-w.latLngToLayerPoint(gt).x}this._updateBounds()}});function D(o,h,w){return new Vs(o,h,w)}var r=mi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,h){R(this,h),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var h=1/0,w=null,A=hs,N,V,Q=0,de=this._parts.length;Q<de;Q++)for(var ge=this._parts[Q],Te=1,Xe=ge.length;Te<Xe;Te++){N=ge[Te-1],V=ge[Te];var gt=A(o,N,V,!0);gt<h&&(h=gt,w=A(o,N,V))}return w&&(w.distance=Math.sqrt(h)),w},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Rl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,h){return h=h||this._defaultShape(),o=ae(o),h.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new Ke,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return Ar(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var h=[],w=Ar(o),A=0,N=o.length;A<N;A++)w?(h[A]=ae(o[A]),this._bounds.extend(h[A])):h[A]=this._convertLatLngs(o[A]);return h},_project:function(){var o=new xe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),h=new ie(o,o);this._rawPxBounds&&(this._pxBounds=new xe([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(o,h,w){var A=o[0]instanceof ne,N=o.length,V,Q;if(A){for(Q=[],V=0;V<N;V++)Q[V]=this._map.latLngToLayerPoint(o[V]),w.extend(Q[V]);h.push(Q)}else for(V=0;V<N;V++)this._projectLatlngs(o[V],h,w)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,w,A,N,V,Q,de,ge;for(w=0,N=0,V=this._rings.length;w<V;w++)for(ge=this._rings[w],A=0,Q=ge.length;A<Q-1;A++)de=qi(ge[A],ge[A+1],o,A,!0),de&&(h[N]=h[N]||[],h[N].push(de[0]),(de[1]!==ge[A+1]||A===Q-2)&&(h[N].push(de[1]),N++))}},_simplifyPoints:function(){for(var o=this._parts,h=this.options.smoothFactor,w=0,A=o.length;w<A;w++)o[w]=pn(o[w],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,h){var w,A,N,V,Q,de,ge=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(w=0,V=this._parts.length;w<V;w++)for(de=this._parts[w],A=0,Q=de.length,N=Q-1;A<Q;N=A++)if(!(!h&&A===0)&&Vo(o,de[N],de[A])<=ge)return!0;return!1}});function s(o,h){return new r(o,h)}r._flat=Ta;var l=r.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Na(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var h=r.prototype._convertLatLngs.call(this,o),w=h.length;return w>=2&&h[0]instanceof ne&&h[0].equals(h[w-1])&&h.pop(),h},_setLatLngs:function(o){r.prototype._setLatLngs.call(this,o),Ar(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ar(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,h=this.options.weight,w=new ie(h,h);if(o=new xe(o.min.subtract(w),o.max.add(w)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var A=0,N=this._rings.length,V;A<N;A++)V=xu(this._rings[A],o,!0),V.length&&this._parts.push(V)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var h=!1,w,A,N,V,Q,de,ge,Te;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(V=0,ge=this._parts.length;V<ge;V++)for(w=this._parts[V],Q=0,Te=w.length,de=Te-1;Q<Te;de=Q++)A=w[Q],N=w[de],A.y>o.y!=N.y>o.y&&o.x<(N.x-A.x)*(o.y-A.y)/(N.y-A.y)+A.x&&(h=!h);return h||r.prototype._containsPoint.call(this,o,!0)}});function u(o,h){return new l(o,h)}var d=fi.extend({initialize:function(o,h){R(this,h),this._layers={},o&&this.addData(o)},addData:function(o){var h=k(o)?o:o.features,w,A,N;if(h){for(w=0,A=h.length;w<A;w++)N=h[w],(N.geometries||N.geometry||N.features||N.coordinates)&&this.addData(N);return this}var V=this.options;if(V.filter&&!V.filter(o))return this;var Q=p(o,V);return Q?(Q.feature=X(o),Q.defaultOptions=Q.options,this.resetStyle(Q),V.onEachFeature&&V.onEachFeature(o,Q),this.addLayer(Q)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=a({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(h){this._setLayerStyle(h,o)},this)},_setLayerStyle:function(o,h){o.setStyle&&(typeof h=="function"&&(h=h(o.feature)),o.setStyle(h))}});function p(o,h){var w=o.type==="Feature"?o.geometry:o,A=w?w.coordinates:null,N=[],V=h&&h.pointToLayer,Q=h&&h.coordsToLatLng||_,de,ge,Te,Xe;if(!A&&!w)return null;switch(w.type){case"Point":return de=Q(A),x(V,o,de,h);case"MultiPoint":for(Te=0,Xe=A.length;Te<Xe;Te++)de=Q(A[Te]),N.push(x(V,o,de,h));return new fi(N);case"LineString":case"MultiLineString":return ge=S(A,w.type==="LineString"?0:1,Q),new r(ge,h);case"Polygon":case"MultiPolygon":return ge=S(A,w.type==="Polygon"?1:2,Q),new l(ge,h);case"GeometryCollection":for(Te=0,Xe=w.geometries.length;Te<Xe;Te++){var gt=p({geometry:w.geometries[Te],type:"Feature",properties:o.properties},h);gt&&N.push(gt)}return new fi(N);case"FeatureCollection":for(Te=0,Xe=w.features.length;Te<Xe;Te++){var Mt=p(w.features[Te],h);Mt&&N.push(Mt)}return new fi(N);default:throw new Error("Invalid GeoJSON object.")}}function x(o,h,w,A){return o?o(h,w):new Er(w,A&&A.markersInheritOptions&&A)}function _(o){return new ne(o[1],o[0],o[2])}function S(o,h,w){for(var A=[],N=0,V=o.length,Q;N<V;N++)Q=h?S(o[N],h-1,w):(w||_)(o[N]),A.push(Q);return A}function E(o,h){return o=ae(o),o.alt!==void 0?[T(o.lng,h),T(o.lat,h),T(o.alt,h)]:[T(o.lng,h),T(o.lat,h)]}function j(o,h,w,A){for(var N=[],V=0,Q=o.length;V<Q;V++)N.push(h?j(o[V],Ar(o[V])?0:h-1,w,A):E(o[V],A));return!h&&w&&N.length>0&&N.push(N[0].slice()),N}function U(o,h){return o.feature?a({},o.feature,{geometry:h}):X(h)}function X(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var te={toGeoJSON:function(o){return U(this,{type:"Point",coordinates:E(this.getLatLng(),o)})}};Er.include(te),Vs.include(te),Qi.include(te),r.include({toGeoJSON:function(o){var h=!Ar(this._latlngs),w=j(this._latlngs,h?1:0,!1,o);return U(this,{type:(h?"Multi":"")+"LineString",coordinates:w})}}),l.include({toGeoJSON:function(o){var h=!Ar(this._latlngs),w=h&&!Ar(this._latlngs[0]),A=j(this._latlngs,w?2:h?1:0,!0,o);return h||(A=[A]),U(this,{type:(w?"Multi":"")+"Polygon",coordinates:A})}}),Li.include({toMultiPoint:function(o){var h=[];return this.eachLayer(function(w){h.push(w.toGeoJSON(o).geometry.coordinates)}),U(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(o){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(o);var w=h==="GeometryCollection",A=[];return this.eachLayer(function(N){if(N.toGeoJSON){var V=N.toGeoJSON(o);if(w)A.push(V.geometry);else{var Q=X(V);Q.type==="FeatureCollection"?A.push.apply(A,Q.features):A.push(Q)}}}),w?U(this,{geometries:A,type:"GeometryCollection"}):{type:"FeatureCollection",features:A}}});function re(o,h){return new d(o,h)}var ce=re,fe=Bn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,h,w){this._url=o,this._bounds=Fe(h),R(this,w)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(rt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){on(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&cn(this._image),this},bringToBack:function(){return this._map&&Cr(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=Fe(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",h=this._image=o?this._url:jt("img");if(rt(h,"leaflet-image-layer"),this._zoomAnimated&&rt(h,"leaflet-zoom-animated"),this.options.className&&rt(h,this.options.className),h.onselectstart=b,h.onmousemove=b,h.onload=f(this.fire,this,"load"),h.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(o){var h=this._map.getZoomScale(o.zoom),w=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;Z(this._image,w,h)},_reset:function(){var o=this._image,h=new xe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),w=h.getSize();He(o,h.min),o.style.width=w.x+"px",o.style.height=w.y+"px"},_updateOpacity:function(){It(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),Me=function(o,h,w){return new fe(o,h,w)},Re=fe.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",h=this._image=o?this._url:jt("video");if(rt(h,"leaflet-image-layer"),this._zoomAnimated&&rt(h,"leaflet-zoom-animated"),this.options.className&&rt(h,this.options.className),h.onselectstart=b,h.onmousemove=b,h.onloadeddata=f(this.fire,this,"load"),o){for(var w=h.getElementsByTagName("source"),A=[],N=0;N<w.length;N++)A.push(w[N].src);this._url=w.length>0?A:[h.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var V=0;V<this._url.length;V++){var Q=jt("source");Q.src=this._url[V],h.appendChild(Q)}}});function Ie(o,h,w){return new Re(o,h,w)}var kt=fe.extend({_initImage:function(){var o=this._image=this._url;rt(o,"leaflet-image-layer"),this._zoomAnimated&&rt(o,"leaflet-zoom-animated"),this.options.className&&rt(o,this.options.className),o.onselectstart=b,o.onmousemove=b}});function Ct(o,h,w){return new kt(o,h,w)}var mn=Bn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,h){o&&(o instanceof ne||k(o))?(this._latlng=ae(o),R(this,h)):(R(this,o),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&It(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&It(this._container,1),this.bringToFront(),this.options.interactive&&(rt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(It(this._container,0),this._removeTimeout=setTimeout(f(on,void 0,this._container),200)):on(this._container),this.options.interactive&&(Qt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=ae(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&cn(this._container),this},bringToBack:function(){return this._map&&Cr(this._container),this},_prepareOpen:function(o){var h=this._source;if(!h._map)return!1;if(h instanceof fi){h=null;var w=this._source._layers;for(var A in w)if(w[A]._map){h=w[A];break}if(!h)return!1;this._source=h}if(!o)if(h.getCenter)o=h.getCenter();else if(h.getLatLng)o=h.getLatLng();else if(h.getBounds)o=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")o.innerHTML=h;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),h=ve(this.options.offset),w=this._getAnchor();this._zoomAnimated?He(this._container,o.add(w)):h=h.add(o).add(w);var A=this._containerBottom=-h.y,N=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=A+"px",this._container.style.left=N+"px"}},_getAnchor:function(){return[0,0]}});Lt.include({_initOverlay:function(o,h,w,A){var N=h;return N instanceof o||(N=new o(A).setContent(h)),w&&N.setLatLng(w),N}}),Bn.include({_initOverlay:function(o,h,w,A){var N=w;return N instanceof o?(R(N,A),N._source=this):(N=h&&!A?h:new o(A,this),N.setContent(w)),N}});var hr=mn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,mn.prototype.openOn.call(this,o)},onAdd:function(o){mn.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof mi||this._source.on("preclick",Mi))},onRemove:function(o){mn.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof mi||this._source.off("preclick",Mi))},getEvents:function(){var o=mn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",h=this._container=jt("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),w=this._wrapper=jt("div",o+"-content-wrapper",h);if(this._contentNode=jt("div",o+"-content",w),Xr(h),Sa(this._contentNode),wt(h,"contextmenu",Mi),this._tipContainer=jt("div",o+"-tip-container",h),this._tip=jt("div",o+"-tip",this._tipContainer),this.options.closeButton){var A=this._closeButton=jt("a",o+"-close-button",h);A.setAttribute("role","button"),A.setAttribute("aria-label","Close popup"),A.href="#close",A.innerHTML='<span aria-hidden="true">&#215;</span>',wt(A,"click",function(N){Gn(N),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,h=o.style;h.width="",h.whiteSpace="nowrap";var w=o.offsetWidth;w=Math.min(w,this.options.maxWidth),w=Math.max(w,this.options.minWidth),h.width=w+1+"px",h.whiteSpace="",h.height="";var A=o.offsetHeight,N=this.options.maxHeight,V="leaflet-popup-scrolled";N&&A>N?(h.height=N+"px",rt(o,V)):Qt(o,V),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),w=this._getAnchor();He(this._container,h.add(w))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,h=parseInt(Nt(this._container,"marginBottom"),10)||0,w=this._container.offsetHeight+h,A=this._containerWidth,N=new ie(this._containerLeft,-w-this._containerBottom);N._add(un(this._container));var V=o.layerPointToContainerPoint(N),Q=ve(this.options.autoPanPadding),de=ve(this.options.autoPanPaddingTopLeft||Q),ge=ve(this.options.autoPanPaddingBottomRight||Q),Te=o.getSize(),Xe=0,gt=0;V.x+A+ge.x>Te.x&&(Xe=V.x+A-Te.x+ge.x),V.x-Xe-de.x<0&&(Xe=V.x-de.x),V.y+w+ge.y>Te.y&&(gt=V.y+w-Te.y+ge.y),V.y-gt-de.y<0&&(gt=V.y-de.y),(Xe||gt)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([Xe,gt]))}},_getAnchor:function(){return ve(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),fr=function(o,h){return new hr(o,h)};Lt.mergeOptions({closePopupOnClick:!0}),Lt.include({openPopup:function(o,h,w){return this._initOverlay(hr,o,h,w).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),Bn.include({bindPopup:function(o,h){return this._popup=this._initOverlay(hr,this._popup,o,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof fi||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){qr(o);var h=o.layer||o.target;if(this._popup._source===h&&!(h instanceof mi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=h,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var Yt=mn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){mn.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){mn.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=mn.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",h=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=jt("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var h,w,A=this._map,N=this._container,V=A.latLngToContainerPoint(A.getCenter()),Q=A.layerPointToContainerPoint(o),de=this.options.direction,ge=N.offsetWidth,Te=N.offsetHeight,Xe=ve(this.options.offset),gt=this._getAnchor();de==="top"?(h=ge/2,w=Te):de==="bottom"?(h=ge/2,w=0):de==="center"?(h=ge/2,w=Te/2):de==="right"?(h=0,w=Te/2):de==="left"?(h=ge,w=Te/2):Q.x<V.x?(de="right",h=0,w=Te/2):(de="left",h=ge+(Xe.x+gt.x)*2,w=Te/2),o=o.subtract(ve(h,w,!0)).add(Xe).add(gt),Qt(N,"leaflet-tooltip-right"),Qt(N,"leaflet-tooltip-left"),Qt(N,"leaflet-tooltip-top"),Qt(N,"leaflet-tooltip-bottom"),rt(N,"leaflet-tooltip-"+de),He(N,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&It(this._container,o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(h)},_getAnchor:function(){return ve(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Yn=function(o,h){return new Yt(o,h)};Lt.include({openTooltip:function(o,h,w){return this._initOverlay(Yt,o,h,w).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),Bn.include({bindTooltip:function(o,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Yt,this._tooltip,o,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var h=o?"off":"on",w={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?w.add=this._openTooltip:(w.mouseover=this._openTooltip,w.mouseout=this.closeTooltip,w.click=this._openTooltip,this._map?this._addFocusListeners():w.add=this._addFocusListeners),this._tooltip.options.sticky&&(w.mousemove=this._moveTooltip),this[h](w),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof fi||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&(wt(h,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),wt(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var h=o.latlng,w,A;this._tooltip.options.sticky&&o.originalEvent&&(w=this._map.mouseEventToContainerPoint(o.originalEvent),A=this._map.containerPointToLayerPoint(w),h=this._map.layerPointToLatLng(A)),this._tooltip.setLatLng(h)}});var pr=Us.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var h=o&&o.tagName==="DIV"?o:document.createElement("div"),w=this.options;if(w.html instanceof Element?(Ds(h),h.appendChild(w.html)):h.innerHTML=w.html!==!1?w.html:"",w.bgPos){var A=ve(w.bgPos);h.style.backgroundPosition=-A.x+"px "+-A.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function Hs(o){return new pr(o)}Us.Default=Ho;var gi=Bn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ve.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){R(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),on(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(cn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Cr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=y(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof ie?o:new ie(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var h=this.getPane().children,w=-o(-1/0,1/0),A=0,N=h.length,V;A<N;A++)V=h[A].style.zIndex,h[A]!==this._container&&V&&(w=o(w,+V));isFinite(w)&&(this.options.zIndex=w+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ve.ielt9){It(this._container,this.options.opacity);var o=+new Date,h=!1,w=!1;for(var A in this._tiles){var N=this._tiles[A];if(!(!N.current||!N.loaded)){var V=Math.min(1,(o-N.loaded)/200);It(N.el,V),V<1?h=!0:(N.active?w=!0:this._onOpaqueTile(N),N.active=!0)}}w&&!this._noPrune&&this._pruneTiles(),h&&(se(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this))}},_onOpaqueTile:b,_initContainer:function(){this._container||(this._container=jt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,h=this.options.maxZoom;if(o!==void 0){for(var w in this._levels)w=Number(w),this._levels[w].el.children.length||w===o?(this._levels[w].el.style.zIndex=h-Math.abs(o-w),this._onUpdateLevel(w)):(on(this._levels[w].el),this._removeTilesAtZoom(w),this._onRemoveLevel(w),delete this._levels[w]);var A=this._levels[o],N=this._map;return A||(A=this._levels[o]={},A.el=jt("div","leaflet-tile-container leaflet-zoom-animated",this._container),A.el.style.zIndex=h,A.origin=N.project(N.unproject(N.getPixelOrigin()),o).round(),A.zoom=o,this._setZoomTransform(A,N.getCenter(),N.getZoom()),b(A.el.offsetWidth),this._onCreateLevel(A)),this._level=A,A}},_onUpdateLevel:b,_onRemoveLevel:b,_onCreateLevel:b,_pruneTiles:function(){if(this._map){var o,h,w=this._map.getZoom();if(w>this.options.maxZoom||w<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)h=this._tiles[o],h.retain=h.current;for(o in this._tiles)if(h=this._tiles[o],h.current&&!h.active){var A=h.coords;this._retainParent(A.x,A.y,A.z,A.z-5)||this._retainChildren(A.x,A.y,A.z,A.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var h in this._tiles)this._tiles[h].coords.z===o&&this._removeTile(h)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)on(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,h,w,A){var N=Math.floor(o/2),V=Math.floor(h/2),Q=w-1,de=new ie(+N,+V);de.z=+Q;var ge=this._tileCoordsToKey(de),Te=this._tiles[ge];return Te&&Te.active?(Te.retain=!0,!0):(Te&&Te.loaded&&(Te.retain=!0),Q>A?this._retainParent(N,V,Q,A):!1)},_retainChildren:function(o,h,w,A){for(var N=2*o;N<2*o+2;N++)for(var V=2*h;V<2*h+2;V++){var Q=new ie(N,V);Q.z=w+1;var de=this._tileCoordsToKey(Q),ge=this._tiles[de];if(ge&&ge.active){ge.retain=!0;continue}else ge&&ge.loaded&&(ge.retain=!0);w+1<A&&this._retainChildren(N,V,w+1,A)}},_resetView:function(o){var h=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var h=this.options;return h.minNativeZoom!==void 0&&o<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<o?h.maxNativeZoom:o},_setView:function(o,h,w,A){var N=Math.round(h);this.options.maxZoom!==void 0&&N>this.options.maxZoom||this.options.minZoom!==void 0&&N<this.options.minZoom?N=void 0:N=this._clampZoom(N);var V=this.options.updateWhenZooming&&N!==this._tileZoom;(!A||V)&&(this._tileZoom=N,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),N!==void 0&&this._update(o),w||this._pruneTiles(),this._noPrune=!!w),this._setZoomTransforms(o,h)},_setZoomTransforms:function(o,h){for(var w in this._levels)this._setZoomTransform(this._levels[w],o,h)},_setZoomTransform:function(o,h,w){var A=this._map.getZoomScale(w,o.zoom),N=o.origin.multiplyBy(A).subtract(this._map._getNewPixelOrigin(h,w)).round();Ve.any3d?Z(o.el,N,A):He(o.el,N)},_resetGrid:function(){var o=this._map,h=o.options.crs,w=this._tileSize=this.getTileSize(),A=this._tileZoom,N=this._map.getPixelWorldBounds(this._tileZoom);N&&(this._globalTileRange=this._pxBoundsToTileRange(N)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,h.wrapLng[0]],A).x/w.x),Math.ceil(o.project([0,h.wrapLng[1]],A).x/w.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([h.wrapLat[0],0],A).y/w.x),Math.ceil(o.project([h.wrapLat[1],0],A).y/w.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var h=this._map,w=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),A=h.getZoomScale(w,this._tileZoom),N=h.project(o,this._tileZoom).floor(),V=h.getSize().divideBy(A*2);return new xe(N.subtract(V),N.add(V))},_update:function(o){var h=this._map;if(h){var w=this._clampZoom(h.getZoom());if(o===void 0&&(o=h.getCenter()),this._tileZoom!==void 0){var A=this._getTiledPixelBounds(o),N=this._pxBoundsToTileRange(A),V=N.getCenter(),Q=[],de=this.options.keepBuffer,ge=new xe(N.getBottomLeft().subtract([de,-de]),N.getTopRight().add([de,-de]));if(!(isFinite(N.min.x)&&isFinite(N.min.y)&&isFinite(N.max.x)&&isFinite(N.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Te in this._tiles){var Xe=this._tiles[Te].coords;(Xe.z!==this._tileZoom||!ge.contains(new ie(Xe.x,Xe.y)))&&(this._tiles[Te].current=!1)}if(Math.abs(w-this._tileZoom)>1){this._setView(o,w);return}for(var gt=N.min.y;gt<=N.max.y;gt++)for(var Mt=N.min.x;Mt<=N.max.x;Mt++){var Nr=new ie(Mt,gt);if(Nr.z=this._tileZoom,!!this._isValidTile(Nr)){var rr=this._tiles[this._tileCoordsToKey(Nr)];rr?rr.current=!0:Q.push(Nr)}}if(Q.sort(function(jr,Ia){return jr.distanceTo(V)-Ia.distanceTo(V)}),Q.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var xi=document.createDocumentFragment();for(Mt=0;Mt<Q.length;Mt++)this._addTile(Q[Mt],xi);this._level.el.appendChild(xi)}}}},_isValidTile:function(o){var h=this._map.options.crs;if(!h.infinite){var w=this._globalTileRange;if(!h.wrapLng&&(o.x<w.min.x||o.x>w.max.x)||!h.wrapLat&&(o.y<w.min.y||o.y>w.max.y))return!1}if(!this.options.bounds)return!0;var A=this._tileCoordsToBounds(o);return Fe(this.options.bounds).overlaps(A)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var h=this._map,w=this.getTileSize(),A=o.scaleBy(w),N=A.add(w),V=h.unproject(A,o.z),Q=h.unproject(N,o.z);return[V,Q]},_tileCoordsToBounds:function(o){var h=this._tileCoordsToNwSe(o),w=new Ke(h[0],h[1]);return this.options.noWrap||(w=this._map.wrapLatLngBounds(w)),w},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var h=o.split(":"),w=new ie(+h[0],+h[1]);return w.z=+h[2],w},_removeTile:function(o){var h=this._tiles[o];h&&(on(h.el),delete this._tiles[o],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){rt(o,"leaflet-tile");var h=this.getTileSize();o.style.width=h.x+"px",o.style.height=h.y+"px",o.onselectstart=b,o.onmousemove=b,Ve.ielt9&&this.options.opacity<1&&It(o,this.options.opacity)},_addTile:function(o,h){var w=this._getTilePos(o),A=this._tileCoordsToKey(o),N=this.createTile(this._wrapCoords(o),f(this._tileReady,this,o));this._initTile(N),this.createTile.length<2&&$(f(this._tileReady,this,o,null,N)),He(N,w),this._tiles[A]={el:N,coords:o,current:!0},h.appendChild(N),this.fire("tileloadstart",{tile:N,coords:o})},_tileReady:function(o,h,w){h&&this.fire("tileerror",{error:h,tile:w,coords:o});var A=this._tileCoordsToKey(o);w=this._tiles[A],w&&(w.loaded=+new Date,this._map._fadeAnimated?(It(w.el,0),se(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this)):(w.active=!0,this._pruneTiles()),h||(rt(w.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:w.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ve.ielt9||!this._map._fadeAnimated?$(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var h=new ie(this._wrapX?C(o.x,this._wrapX):o.x,this._wrapY?C(o.y,this._wrapY):o.y);return h.z=o.z,h},_pxBoundsToTileRange:function(o){var h=this.getTileSize();return new xe(o.min.unscaleBy(h).floor(),o.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function af(o){return new gi(o)}var Ws=gi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,h){this._url=o,h=R(this,h),h.detectRetina&&Ve.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,h){return this._url===o&&h===void 0&&(h=!0),this._url=o,h||this.redraw(),this},createTile:function(o,h){var w=document.createElement("img");return wt(w,"load",f(this._tileOnLoad,this,h,w)),wt(w,"error",f(this._tileOnError,this,h,w)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(w.referrerPolicy=this.options.referrerPolicy),w.alt="",w.src=this.getTileUrl(o),w},getTileUrl:function(o){var h={r:Ve.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var w=this._globalTileRange.max.y-o.y;this.options.tms&&(h.y=w),h["-y"]=w}return P(this._url,a(h,this.options))},_tileOnLoad:function(o,h){Ve.ielt9?setTimeout(f(o,this,null,h),0):o(null,h)},_tileOnError:function(o,h,w){var A=this.options.errorTileUrl;A&&h.getAttribute("src")!==A&&(h.src=A),o(w,h)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,h=this.options.maxZoom,w=this.options.zoomReverse,A=this.options.zoomOffset;return w&&(o=h-o),o+A},_getSubdomain:function(o){var h=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var o,h;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(h=this._tiles[o].el,h.onload=b,h.onerror=b,!h.complete)){h.src=K;var w=this._tiles[o].coords;on(h),delete this._tiles[o],this.fire("tileabort",{tile:h,coords:w})}},_removeTile:function(o){var h=this._tiles[o];if(h)return h.el.setAttribute("src",K),gi.prototype._removeTile.call(this,o)},_tileReady:function(o,h,w){if(!(!this._map||w&&w.getAttribute("src")===K))return gi.prototype._tileReady.call(this,o,h,w)}});function Lm(o,h){return new Ws(o,h)}var Pm=Ws.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,h){this._url=o;var w=a({},this.defaultWmsParams);for(var A in h)A in this.options||(w[A]=h[A]);h=R(this,h);var N=h.detectRetina&&Ve.retina?2:1,V=this.getTileSize();w.width=V.x*N,w.height=V.y*N,this.wmsParams=w},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,Ws.prototype.onAdd.call(this,o)},getTileUrl:function(o){var h=this._tileCoordsToNwSe(o),w=this._crs,A=Le(w.project(h[0]),w.project(h[1])),N=A.min,V=A.max,Q=(this._wmsVersion>=1.3&&this._crs===zs?[N.y,N.x,V.y,V.x]:[N.x,N.y,V.x,V.y]).join(","),de=Ws.prototype.getTileUrl.call(this,o);return de+B(this.wmsParams,de,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Q},setParams:function(o,h){return a(this.wmsParams,o),h||this.redraw(),this}});function YC(o,h){return new Pm(o,h)}Ws.WMS=Pm,Lm.wms=YC;var fs=Bn.extend({options:{padding:.1},initialize:function(o){R(this,o),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),rt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,h){var w=this._map.getZoomScale(h,this._zoom),A=this._map.getSize().multiplyBy(.5+this.options.padding),N=this._map.project(this._center,h),V=A.multiplyBy(-w).add(N).subtract(this._map._getNewPixelOrigin(o,h));Ve.any3d?Z(this._container,V,w):He(this._container,V)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,h=this._map.getSize(),w=this._map.containerPointToLayerPoint(h.multiplyBy(-o)).round();this._bounds=new xe(w,w.add(h.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Dm=fs.extend({options:{tolerance:0},getEvents:function(){var o=fs.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){fs.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");wt(o,"mousemove",this._onMouseMove,this),wt(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),wt(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){se(this._redrawRequest),delete this._ctx,on(this._container),Ge(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var h in this._layers)o=this._layers[h],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fs.prototype._update.call(this);var o=this._bounds,h=this._container,w=o.getSize(),A=Ve.retina?2:1;He(h,o.min),h.width=A*w.x,h.height=A*w.y,h.style.width=w.x+"px",h.style.height=w.y+"px",Ve.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){fs.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[v(o)]=o;var h=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var h=o._order,w=h.next,A=h.prev;w?w.prev=A:this._drawLast=A,A?A.next=w:this._drawFirst=w,delete o._order,delete this._layers[v(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var h=o.options.dashArray.split(/[, ]+/),w=[],A,N;for(N=0;N<h.length;N++){if(A=Number(h[N]),isNaN(A))return;w.push(A)}o.options._dashArray=w}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||$(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var h=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new xe,this._redrawBounds.extend(o._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(o._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var h=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,h=this._redrawBounds;if(this._ctx.save(),h){var w=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,w.x,w.y),this._ctx.clip()}this._drawing=!0;for(var A=this._drawFirst;A;A=A.next)o=A.layer,(!h||o._pxBounds&&o._pxBounds.intersects(h))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,h){if(this._drawing){var w,A,N,V,Q=o._parts,de=Q.length,ge=this._ctx;if(de){for(ge.beginPath(),w=0;w<de;w++){for(A=0,N=Q[w].length;A<N;A++)V=Q[w][A],ge[A?"lineTo":"moveTo"](V.x,V.y);h&&ge.closePath()}this._fillStroke(ge,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var h=o._point,w=this._ctx,A=Math.max(Math.round(o._radius),1),N=(Math.max(Math.round(o._radiusY),1)||A)/A;N!==1&&(w.save(),w.scale(1,N)),w.beginPath(),w.arc(h.x,h.y/N,A,0,Math.PI*2,!1),N!==1&&w.restore(),this._fillStroke(w,o)}},_fillStroke:function(o,h){var w=h.options;w.fill&&(o.globalAlpha=w.fillOpacity,o.fillStyle=w.fillColor||w.color,o.fill(w.fillRule||"evenodd")),w.stroke&&w.weight!==0&&(o.setLineDash&&o.setLineDash(h.options&&h.options._dashArray||[]),o.globalAlpha=w.opacity,o.lineWidth=w.weight,o.strokeStyle=w.color,o.lineCap=w.lineCap,o.lineJoin=w.lineJoin,o.stroke())},_onClick:function(o){for(var h=this._map.mouseEventToLayerPoint(o),w,A,N=this._drawFirst;N;N=N.next)w=N.layer,w.options.interactive&&w._containsPoint(h)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(w))&&(A=w);this._fireEvent(A?[A]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,h)}},_handleMouseOut:function(o){var h=this._hoveredLayer;h&&(Qt(this._container,"leaflet-interactive"),this._fireEvent([h],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,h){if(!this._mouseHoverThrottled){for(var w,A,N=this._drawFirst;N;N=N.next)w=N.layer,w.options.interactive&&w._containsPoint(h)&&(A=w);A!==this._hoveredLayer&&(this._handleMouseOut(o),A&&(rt(this._container,"leaflet-interactive"),this._fireEvent([A],o,"mouseover"),this._hoveredLayer=A)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,h,w){this._map._fireDOMEvent(h,w||h.type,o)},_bringToFront:function(o){var h=o._order;if(h){var w=h.next,A=h.prev;if(w)w.prev=A;else return;A?A.next=w:w&&(this._drawFirst=w),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(o)}},_bringToBack:function(o){var h=o._order;if(h){var w=h.next,A=h.prev;if(A)A.next=w;else return;w?w.prev=A:A&&(this._drawLast=A),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(o)}}});function jm(o){return Ve.canvas?new Dm(o):null}var jl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),XC={_initContainer:function(){this._container=jt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(fs.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var h=o._container=jl("shape");rt(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",o._path=jl("path"),h.appendChild(o._path),this._updateStyle(o),this._layers[v(o)]=o},_addPath:function(o){var h=o._container;this._container.appendChild(h),o.options.interactive&&o.addInteractiveTarget(h)},_removePath:function(o){var h=o._container;on(h),o.removeInteractiveTarget(h),delete this._layers[v(o)]},_updateStyle:function(o){var h=o._stroke,w=o._fill,A=o.options,N=o._container;N.stroked=!!A.stroke,N.filled=!!A.fill,A.stroke?(h||(h=o._stroke=jl("stroke")),N.appendChild(h),h.weight=A.weight+"px",h.color=A.color,h.opacity=A.opacity,A.dashArray?h.dashStyle=k(A.dashArray)?A.dashArray.join(" "):A.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=A.lineCap.replace("butt","flat"),h.joinstyle=A.lineJoin):h&&(N.removeChild(h),o._stroke=null),A.fill?(w||(w=o._fill=jl("fill")),N.appendChild(w),w.color=A.fillColor||A.color,w.opacity=A.fillOpacity):w&&(N.removeChild(w),o._fill=null)},_updateCircle:function(o){var h=o._point.round(),w=Math.round(o._radius),A=Math.round(o._radiusY||w);this._setPath(o,o._empty()?"M0 0":"AL "+h.x+","+h.y+" "+w+","+A+" 0,"+65535*360)},_setPath:function(o,h){o._path.v=h},_bringToFront:function(o){cn(o._container)},_bringToBack:function(o){Cr(o._container)}},wu=Ve.vml?jl:Xt,Bl=fs.extend({_initContainer:function(){this._container=wu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=wu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){on(this._container),Ge(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fs.prototype._update.call(this);var o=this._bounds,h=o.getSize(),w=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,w.setAttribute("width",h.x),w.setAttribute("height",h.y)),He(w,o.min),w.setAttribute("viewBox",[o.min.x,o.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(o){var h=o._path=wu("path");o.options.className&&rt(h,o.options.className),o.options.interactive&&rt(h,"leaflet-interactive"),this._updateStyle(o),this._layers[v(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){on(o._path),o.removeInteractiveTarget(o._path),delete this._layers[v(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var h=o._path,w=o.options;h&&(w.stroke?(h.setAttribute("stroke",w.color),h.setAttribute("stroke-opacity",w.opacity),h.setAttribute("stroke-width",w.weight),h.setAttribute("stroke-linecap",w.lineCap),h.setAttribute("stroke-linejoin",w.lineJoin),w.dashArray?h.setAttribute("stroke-dasharray",w.dashArray):h.removeAttribute("stroke-dasharray"),w.dashOffset?h.setAttribute("stroke-dashoffset",w.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),w.fill?(h.setAttribute("fill",w.fillColor||w.color),h.setAttribute("fill-opacity",w.fillOpacity),h.setAttribute("fill-rule",w.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(o,h){this._setPath(o,Vn(o._parts,h))},_updateCircle:function(o){var h=o._point,w=Math.max(Math.round(o._radius),1),A=Math.max(Math.round(o._radiusY),1)||w,N="a"+w+","+A+" 0 1,0 ",V=o._empty()?"M0 0":"M"+(h.x-w)+","+h.y+N+w*2+",0 "+N+-w*2+",0 ";this._setPath(o,V)},_setPath:function(o,h){o._path.setAttribute("d",h)},_bringToFront:function(o){cn(o._path)},_bringToBack:function(o){Cr(o._path)}});Ve.vml&&Bl.include(XC);function Bm(o){return Ve.svg||Ve.vml?new Bl(o):null}Lt.include({getRenderer:function(o){var h=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var h=this._paneRenderers[o];return h===void 0&&(h=this._createRenderer({pane:o}),this._paneRenderers[o]=h),h},_createRenderer:function(o){return this.options.preferCanvas&&jm(o)||Bm(o)}});var Fm=l.extend({initialize:function(o,h){l.prototype.initialize.call(this,this._boundsToLatLngs(o),h)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=Fe(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function qC(o,h){return new Fm(o,h)}Bl.create=wu,Bl.pointsToPath=Vn,d.geometryToLayer=p,d.coordsToLatLng=_,d.coordsToLatLngs=S,d.latLngToCoords=E,d.latLngsToCoords=j,d.getFeature=U,d.asFeature=X,Lt.mergeOptions({boxZoom:!0});var zm=Sr.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){wt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ge(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){on(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),tr(),lt(),this._startPoint=this._map.mouseEventToContainerPoint(o),wt(document,{contextmenu:qr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=jt("div","leaflet-zoom-box",this._container),rt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var h=new xe(this._point,this._startPoint),w=h.getSize();He(this._box,h.min),this._box.style.width=w.x+"px",this._box.style.height=w.y+"px"},_finish:function(){this._moved&&(on(this._box),Qt(this._container,"leaflet-crosshair")),jo(),an(),Ge(document,{contextmenu:qr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var h=new Ke(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Lt.addInitHook("addHandler","boxZoom",zm),Lt.mergeOptions({doubleClickZoom:!0});var Um=Sr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var h=this._map,w=h.getZoom(),A=h.options.zoomDelta,N=o.originalEvent.shiftKey?w-A:w+A;h.options.doubleClickZoom==="center"?h.setZoom(N):h.setZoomAround(o.containerPoint,N)}});Lt.addInitHook("addHandler","doubleClickZoom",Um),Lt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Vm=Sr.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new Xi(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}rt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Qt(this._map._container,"leaflet-grab"),Qt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=Fe(this._map.options.maxBounds);this._offsetLimit=Le(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var h=this._lastTime=+new Date,w=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(w),this._times.push(h),this._prunePositions(h)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,h){return o-(o-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;o.x<h.min.x&&(o.x=this._viscousLimit(o.x,h.min.x)),o.y<h.min.y&&(o.y=this._viscousLimit(o.y,h.min.y)),o.x>h.max.x&&(o.x=this._viscousLimit(o.x,h.max.x)),o.y>h.max.y&&(o.y=this._viscousLimit(o.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,h=Math.round(o/2),w=this._initialWorldOffset,A=this._draggable._newPos.x,N=(A-h+w)%o+h-w,V=(A+h+w)%o-h-w,Q=Math.abs(N+w)<Math.abs(V+w)?N:V;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Q},_onDragEnd:function(o){var h=this._map,w=h.options,A=!w.inertia||o.noInertia||this._times.length<2;if(h.fire("dragend",o),A)h.fire("moveend");else{this._prunePositions(+new Date);var N=this._lastPos.subtract(this._positions[0]),V=(this._lastTime-this._times[0])/1e3,Q=w.easeLinearity,de=N.multiplyBy(Q/V),ge=de.distanceTo([0,0]),Te=Math.min(w.inertiaMaxSpeed,ge),Xe=de.multiplyBy(Te/ge),gt=Te/(w.inertiaDeceleration*Q),Mt=Xe.multiplyBy(-gt/2).round();!Mt.x&&!Mt.y?h.fire("moveend"):(Mt=h._limitOffset(Mt,h.options.maxBounds),$(function(){h.panBy(Mt,{duration:gt,easeLinearity:Q,noMoveStart:!0,animate:!0})}))}}});Lt.addInitHook("addHandler","dragging",Vm),Lt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Hm=Sr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),wt(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ge(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,h=document.documentElement,w=o.scrollTop||h.scrollTop,A=o.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(A,w)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var h=this._panKeys={},w=this.keyCodes,A,N;for(A=0,N=w.left.length;A<N;A++)h[w.left[A]]=[-1*o,0];for(A=0,N=w.right.length;A<N;A++)h[w.right[A]]=[o,0];for(A=0,N=w.down.length;A<N;A++)h[w.down[A]]=[0,o];for(A=0,N=w.up.length;A<N;A++)h[w.up[A]]=[0,-1*o]},_setZoomDelta:function(o){var h=this._zoomKeys={},w=this.keyCodes,A,N;for(A=0,N=w.zoomIn.length;A<N;A++)h[w.zoomIn[A]]=o;for(A=0,N=w.zoomOut.length;A<N;A++)h[w.zoomOut[A]]=-o},_addHooks:function(){wt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ge(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var h=o.keyCode,w=this._map,A;if(h in this._panKeys){if(!w._panAnim||!w._panAnim._inProgress)if(A=this._panKeys[h],o.shiftKey&&(A=ve(A).multiplyBy(3)),w.options.maxBounds&&(A=w._limitOffset(ve(A),w.options.maxBounds)),w.options.worldCopyJump){var N=w.wrapLatLng(w.unproject(w.project(w.getCenter()).add(A)));w.panTo(N)}else w.panBy(A)}else if(h in this._zoomKeys)w.setZoom(w.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&w._popup&&w._popup.options.closeOnEscapeKey)w.closePopup();else return;qr(o)}}});Lt.addInitHook("addHandler","keyboard",Hm),Lt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Wm=Sr.extend({addHooks:function(){wt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ge(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var h=Fs(o),w=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var A=Math.max(w-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),A),qr(o)},_performZoom:function(){var o=this._map,h=o.getZoom(),w=this._map.options.zoomSnap||0;o._stop();var A=this._delta/(this._map.options.wheelPxPerZoomLevel*4),N=4*Math.log(2/(1+Math.exp(-Math.abs(A))))/Math.LN2,V=w?Math.ceil(N/w)*w:N,Q=o._limitZoom(h+(this._delta>0?V:-V))-h;this._delta=0,this._startTime=null,Q&&(o.options.scrollWheelZoom==="center"?o.setZoom(h+Q):o.setZoomAround(this._lastMousePos,h+Q))}});Lt.addInitHook("addHandler","scrollWheelZoom",Wm);var KC=600;Lt.mergeOptions({tapHold:Ve.touchNative&&Ve.safari&&Ve.mobile,tapTolerance:15});var Gm=Sr.extend({addHooks:function(){wt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ge(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var h=o.touches[0];this._startPos=this._newPos=new ie(h.clientX,h.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(wt(document,"touchend",Gn),wt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),KC),wt(document,"touchend touchcancel contextmenu",this._cancel,this),wt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){Ge(document,"touchend",Gn),Ge(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),Ge(document,"touchend touchcancel contextmenu",this._cancel,this),Ge(document,"touchmove",this._onMove,this)},_onMove:function(o){var h=o.touches[0];this._newPos=new ie(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,h){var w=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});w._simulated=!0,h.target.dispatchEvent(w)}});Lt.addInitHook("addHandler","tapHold",Gm),Lt.mergeOptions({touchZoom:Ve.touch,bounceAtZoomLimits:!0});var Zm=Sr.extend({addHooks:function(){rt(this._map._container,"leaflet-touch-zoom"),wt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Qt(this._map._container,"leaflet-touch-zoom"),Ge(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var h=this._map;if(!(!o.touches||o.touches.length!==2||h._animatingZoom||this._zooming)){var w=h.mouseEventToContainerPoint(o.touches[0]),A=h.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(w.add(A)._divideBy(2))),this._startDist=w.distanceTo(A),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),wt(document,"touchmove",this._onTouchMove,this),wt(document,"touchend touchcancel",this._onTouchEnd,this),Gn(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var h=this._map,w=h.mouseEventToContainerPoint(o.touches[0]),A=h.mouseEventToContainerPoint(o.touches[1]),N=w.distanceTo(A)/this._startDist;if(this._zoom=h.getScaleZoom(N,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&N<1||this._zoom>h.getMaxZoom()&&N>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,N===1)return}else{var V=w._add(A)._divideBy(2)._subtract(this._centerPoint);if(N===1&&V.x===0&&V.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(V),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),se(this._animRequest);var Q=f(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=$(Q,this,!0),Gn(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,se(this._animRequest),Ge(document,"touchmove",this._onTouchMove,this),Ge(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Lt.addInitHook("addHandler","touchZoom",Zm),Lt.BoxZoom=zm,Lt.DoubleClickZoom=Um,Lt.Drag=Vm,Lt.Keyboard=Hm,Lt.ScrollWheelZoom=Wm,Lt.TapHold=Gm,Lt.TouchZoom=Zm,n.Bounds=xe,n.Browser=Ve,n.CRS=je,n.Canvas=Dm,n.Circle=Vs,n.CircleMarker=Qi,n.Class=Ne,n.Control=Kr,n.DivIcon=pr,n.DivOverlay=mn,n.DomEvent=dr,n.DomUtil=jn,n.Draggable=Xi,n.Evented=ke,n.FeatureGroup=fi,n.GeoJSON=d,n.GridLayer=gi,n.Handler=Sr,n.Icon=Us,n.ImageOverlay=fe,n.LatLng=ne,n.LatLngBounds=Ke,n.Layer=Bn,n.LayerGroup=Li,n.LineUtil=yu,n.Map=Lt,n.Marker=Er,n.Mixin=mu,n.Path=mi,n.Point=ie,n.PolyUtil=Ml,n.Polygon=l,n.Polyline=r,n.Popup=hr,n.PosAnimation=kl,n.Projection=Ll,n.Rectangle=Fm,n.Renderer=fs,n.SVG=Bl,n.SVGOverlay=kt,n.TileLayer=Ws,n.Tooltip=Yt,n.Transformation=Ze,n.Util=be,n.VideoOverlay=Re,n.bind=f,n.bounds=Le,n.canvas=jm,n.circle=D,n.circleMarker=zt,n.control=Uo,n.divIcon=Hs,n.extend=a,n.featureGroup=pi,n.geoJSON=re,n.geoJson=ce,n.gridLayer=af,n.icon=Pl,n.imageOverlay=Me,n.latLng=ae,n.latLngBounds=Fe,n.layerGroup=Dr,n.map=fu,n.marker=of,n.point=ve,n.polygon=u,n.polyline=s,n.popup=fr,n.rectangle=qC,n.setOptions=R,n.stamp=v,n.svg=Bm,n.svgOverlay=Ct,n.tileLayer=Lm,n.tooltip=Yn,n.transformation=Rt,n.version=i,n.videoOverlay=Ie;var QC=window.L;n.noConflict=function(){return window.L=QC,this},window.L=n})})(kp,kp.exports);var Cl=kp.exports;const Ro=m2(Cl);function Xh(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function qh(e,t){return t==null?function(i,a){const c=O.useRef();return c.current||(c.current=e(i,a)),c}:function(i,a){const c=O.useRef();c.current||(c.current=e(i,a));const f=O.useRef(i),{instance:g}=c.current;return O.useEffect(function(){f.current!==i&&(t(g,i,f.current),f.current=i)},[g,i,a]),c}}function jC(e,t){O.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var c;(c=t.layerContainer)==null||c.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function BC(e){return function(n){const i=Zh(),a=e(Yh(n,i),i);return RC(i.map,n.attribution),Em(a.current,n.eventHandlers),jC(a.current,i),a}}function D6(e,t){const n=O.useRef();O.useEffect(function(){if(t.pathOptions!==n.current){const a=t.pathOptions??{};e.instance.setStyle(a),n.current=a}},[e,t])}function j6(e){return function(n){const i=Zh(),a=e(Yh(n,i),i);return Em(a.current,n.eventHandlers),jC(a.current,i),D6(a.current,n),a}}function B6(e,t){const n=qh(e,t),i=BC(n);return DC(i)}function F6(e,t){const n=qh(e),i=P6(n,t);return O6(i)}function z6(e,t){const n=qh(e,t),i=j6(n);return DC(i)}function U6(e,t){const n=qh(e,t),i=BC(n);return L6(i)}function V6(e,t,n){const{opacity:i,zIndex:a}=t;i!=null&&i!==n.opacity&&e.setOpacity(i),a!=null&&a!==n.zIndex&&e.setZIndex(a)}function Kh(){return Zh().map}function H6(e){const t=Kh();return O.useEffect(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}function Mp(){return Mp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Mp.apply(this,arguments)}function W6({bounds:e,boundsOptions:t,center:n,children:i,className:a,id:c,placeholder:f,style:g,whenReady:v,zoom:y,...C},b){const[T]=O.useState({className:a,id:c,style:g}),[I,z]=O.useState(null);O.useImperativeHandle(b,()=>(I==null?void 0:I.map)??null,[I]);const R=O.useCallback(F=>{if(F!==null&&I===null){const P=new Cl.Map(F,C);n!=null&&y!=null?P.setView(n,y):e!=null&&P.fitBounds(e,t),v!=null&&P.whenReady(v),z(R6(P))}},[]);O.useEffect(()=>()=>{I==null||I.map.remove()},[I]);const B=I?ca.createElement(PC,{value:I},i):f??null;return ca.createElement("div",Mp({},T,{ref:R}),B)}const FC=O.forwardRef(W6),fd=B6(function({position:t,...n},i){const a=new Cl.Marker(t,n);return Xh(a,OC(i,{overlayContainer:a}))},function(t,n,i){n.position!==i.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),G6=z6(function({positions:t,...n},i){const a=new Cl.Polyline(t,n);return Xh(a,OC(i,{overlayContainer:a}))},function(t,n,i){n.positions!==i.positions&&t.setLatLngs(n.positions)}),n0=F6(function(t,n){const i=new Cl.Popup(t,n.overlayContainer);return Xh(i,n)},function(t,n,{position:i},a){O.useEffect(function(){const{instance:f}=t;function g(y){y.popup===f&&(f.update(),a(!0))}function v(y){y.popup===f&&a(!1)}return n.map.on({popupopen:g,popupclose:v}),n.overlayContainer==null?(i!=null&&f.setLatLng(i),f.openOn(n.map)):n.overlayContainer.bindPopup(f),function(){var C;n.map.off({popupopen:g,popupclose:v}),(C=n.overlayContainer)==null||C.unbindPopup(),n.map.removeLayer(f)}},[t,n,a,i])}),zC=U6(function({url:t,...n},i){const a=new Cl.TileLayer(t,Yh(n,i));return Xh(a,i)},function(t,n,i){V6(t,n,i);const{url:a}=n;a!=null&&a!==i.url&&t.setUrl(a)});delete Ro.Icon.Default.prototype._getIconUrl;Ro.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Nm=e=>new Ro.DivIcon({className:"custom-icon",html:`<div style="background-color: ${e}; width: 24px; height: 24px; border-radius: 50%; border: 2px solid white; box-shadow: 0 4px 6px rgba(0,0,0,0.1);"></div>`,iconSize:[24,24],iconAnchor:[12,12]}),r0=new Map,Z6=(e,t)=>{const n=Number(e);if(!Number.isFinite(n)||n<=0)return Nm(t);const i=`${n}:${t}`;if(r0.has(i))return r0.get(i);const a=new Ro.DivIcon({className:"stop-number-icon",html:`<div style="background-color: ${t}; width: 28px; height: 28px; border-radius: 9999px; border: 2px solid white; box-shadow: 0 6px 10px rgba(0,0,0,0.25); display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 14px; color: white; line-height: 1;">${n}</div>`,iconSize:[28,28],iconAnchor:[14,14]});return r0.set(i,a),a},Y6=new Ro.DivIcon({className:"truck-icon",html:`<div style="background-color: #0052cc; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 2px solid white; box-shadow: 0 4px 6px rgba(0,0,0,0.2);">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle></svg>
    </div>`,iconSize:[32,32],iconAnchor:[16,16]}),X6=Nm("#8b5cf6");function q6({center:e}){const t=Kh();return O.useEffect(()=>{e&&t.setView(e,t.getZoom())},[e,t]),null}function K6({points:e}){const t=Kh();return O.useEffect(()=>{if(!t)return;const n=Array.isArray(e)?e.filter(Boolean):[];if(n.length!==0)try{const i=Ro.latLngBounds(n);t.fitBounds(i,{padding:[30,30]})}catch{}},[e,t]),null}function Tm({shipments:e,routeGeometry:t,currentLocation:n,originLocation:i,showStopNumbers:a=!1,currentLocationLabel:c="You are here"}){const g=n?[n.lat,n.lon]:i?[i.lat,i.lon]:[44.4268,26.1025],[v,y]=O.useState([]);O.useEffect(()=>{if(t&&t.coordinates){const I=t.coordinates.map(z=>[z[1],z[0]]);y(I)}},[t]);const C=(e||[]).map(I=>{var P,k,G,K;const z=(I==null?void 0:I.latitude)??((k=(P=I==null?void 0:I.raw_data)==null?void 0:P.recipientLocation)==null?void 0:k.latitude),R=(I==null?void 0:I.longitude)??((K=(G=I==null?void 0:I.raw_data)==null?void 0:G.recipientLocation)==null?void 0:K.longitude),B=Number(z),F=Number(R);return!Number.isFinite(B)||!Number.isFinite(F)||Math.abs(B)<1e-4&&Math.abs(F)<1e-4?null:[B,F]}).filter(Boolean),b=new Map;a&&(Array.isArray(e)?e:[]).forEach((I,z)=>{const R=String((I==null?void 0:I.awb)||"").toUpperCase();R&&b.set(R,z+1)});const T=[...n?[[n.lat,n.lon]]:[],...i?[[i.lat,i.lon]]:[],...C,...v];return m.jsxs("div",{className:"h-[400px] w-full rounded-3xl overflow-hidden shadow-inner border border-white/20 relative z-0",children:[m.jsxs(FC,{center:g,zoom:13,style:{height:"100%",width:"100%"},zoomControl:!1,children:[m.jsx(zC,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors  <a href="https://carto.com/attributions">CARTO</a>'}),m.jsx(q6,{center:g}),m.jsx(K6,{points:T}),n&&m.jsx(fd,{position:[n.lat,n.lon],icon:Y6,children:m.jsx(n0,{children:m.jsx("div",{className:"font-sans font-bold text-brand-600",children:c||"You are here"})})}),i&&m.jsx(fd,{position:[i.lat,i.lon],icon:X6,children:m.jsx(n0,{children:m.jsx("div",{className:"font-sans font-bold text-slate-800",children:i.label||"Warehouse"})})}),e.map(I=>{var G,K,q,Y;const z=Number((I==null?void 0:I.latitude)??((K=(G=I==null?void 0:I.raw_data)==null?void 0:G.recipientLocation)==null?void 0:K.latitude)),R=Number((I==null?void 0:I.longitude)??((Y=(q=I==null?void 0:I.raw_data)==null?void 0:q.recipientLocation)==null?void 0:Y.longitude));if(!Number.isFinite(z)||!Number.isFinite(R)||Math.abs(z)<1e-4&&Math.abs(R)<1e-4)return null;const B=String((I==null?void 0:I.awb)||"").toUpperCase(),F=I.status==="Delivered",P=F?"#22c55e":"#f59e0b",k=a?b.get(B):null;return m.jsx(fd,{position:[z,R],icon:a?Z6(k,P):Nm(P),children:m.jsx(n0,{className:"glass-popup",children:m.jsxs("div",{className:"p-1 min-w-[150px]",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:`w-2 h-2 rounded-full ${F?"bg-green-500":"bg-amber-500"}`}),m.jsxs("span",{className:"text-xs font-black uppercase text-slate-500 tracking-wider",children:[a&&k?`Stop ${k}  `:"",B]})]}),m.jsx("p",{className:"font-bold text-slate-800 text-sm mb-1",children:I.recipient_name}),m.jsx("p",{className:"text-xs text-slate-500 truncate",children:I.delivery_address})]})})},B||I.awb)}),v.length>0&&m.jsx(G6,{positions:v,color:"#4c9aff",weight:4,opacity:.8,dashArray:"10, 10"})]}),m.jsx("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2 z-[1000]",children:m.jsx("button",{className:"glass-strong p-3 rounded-xl text-white hover:text-brand-400 hover:border-brand-500/50 transition-all shadow-lg active:scale-95",onClick:I=>{I.stopPropagation()},children:m.jsx(gb,{size:20})})})]})}const ti=(e,t)=>{const n=y=>y*Math.PI/180,a=n(Number(t.lat)-Number(e.lat)),c=n(Number(t.lon)-Number(e.lon)),f=n(Number(e.lat)),g=n(Number(t.lat)),v=Math.sin(a/2)**2+Math.cos(f)*Math.cos(g)*Math.sin(c/2)**2;return 2*6371*Math.asin(Math.sqrt(v))},Q6=(e,t,n)=>{const i=Array.isArray(t)?t:[];if(!e||!n)return{index:i.length,delta_km:Number.POSITIVE_INFINITY};let a=0,c=Number.POSITIVE_INFINITY;for(let f=0;f<=i.length;f+=1){const g=f===0?e:i[f-1],v=f===i.length?e:i[f],y=ti(g,n)+ti(n,v)-ti(g,v);y<c&&(c=y,a=f)}return{index:a,delta_km:c}},Rp=(e,t,{max_passes:n=2}={})=>{const i=Array.isArray(t)?t.filter(Boolean).slice():[];if(!e||i.length<2)return i;const a=i.slice(),c=[];let f=e;for(;a.length;){a.sort((v,y)=>ti(f,v)-ti(f,y));const g=a.shift();c.push(g),f=g}for(let g=0;g<Math.max(1,Number(n)||1);g+=1){let v=!1;for(let y=0;y<c.length-1;y+=1){const C=y===0?e:c[y-1];for(let b=y+1;b<c.length;b+=1){const T=b===c.length-1?e:c[b+1],I=c[y],z=c[b];if(ti(C,z)+ti(I,T)-ti(C,I)-ti(z,T)<-1e-6){for(let B=y,F=b;B<F;B+=1,F-=1){const P=c[B];c[B]=c[F],c[F]=P}v=!0}}}if(!v)break}return c},UC="arynik_routes_v1",uh=(e,t)=>Number.isFinite(Number(e))&&Number.isFinite(Number(t))&&Math.abs(Number(e))>1e-4&&Math.abs(Number(t))>1e-4,$6=e=>{var g,v,y,C,b,T,I,z,R,B;const t=(e==null?void 0:e.latitude)??((v=(g=e==null?void 0:e.raw_data)==null?void 0:g.recipientLocation)==null?void 0:v.latitude)??((C=(y=e==null?void 0:e.raw_data)==null?void 0:y.recipientLocation)==null?void 0:C.lat),n=(e==null?void 0:e.longitude)??((T=(b=e==null?void 0:e.raw_data)==null?void 0:b.recipientLocation)==null?void 0:T.longitude)??((z=(I=e==null?void 0:e.raw_data)==null?void 0:I.recipientLocation)==null?void 0:z.lon)??((B=(R=e==null?void 0:e.raw_data)==null?void 0:R.recipientLocation)==null?void 0:B.lng),i=Number(t),a=Number(n);if(uh(i,a))return{lat:i,lon:a};const c=aa(e);if(String(c||"").trim().toLowerCase()==="romania")return null;const f=Yc(c);return f&&uh(f.lat,f.lon)?{lat:Number(f.lat),lon:Number(f.lon)}:null},J6=e=>{try{return localStorage.getItem(e)}catch{return null}},eM=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},bs=()=>new Date().toISOString(),Im=()=>new Date().toISOString().slice(0,10),VC=()=>{try{return crypto.randomUUID()}catch{return`route-${Date.now()}-${Math.floor(Math.random()*1e5)}`}},zi=e=>String(e||"").trim().toUpperCase(),km=e=>String(e||"").trim().toUpperCase()||null,Qh=e=>String(e||"").trim().toUpperCase()||null,gl=e=>String(e||"").trim()||null,HC=e=>{try{return String(e||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"")}catch{return String(e||"")}},Mm=e=>{if(e==null)return"";if(typeof e=="string"||typeof e=="number")return String(e);if(typeof e=="object"){const t=(e==null?void 0:e.name)||(e==null?void 0:e.label)||(e==null?void 0:e.value)||(e==null?void 0:e.countyName)||(e==null?void 0:e.localityName)||(e==null?void 0:e.cityName)||(e==null?void 0:e.regionName)||(e==null?void 0:e.county)||(e==null?void 0:e.locality)||(e==null?void 0:e.city)||(e==null?void 0:e.region);return t&&(typeof t=="string"||typeof t=="number")?String(t):t&&typeof t=="object"?Mm(t):""}return String(e)},Mr=e=>HC(Mm(e)).trim().replace(/[_-]+/g," ").replace(/\s+/g," ").toLowerCase(),Oo=()=>{const e=J6(UC);if(!e)return[];try{const t=JSON.parse(e);if(Array.isArray(t))return t}catch{}return[]},uu=e=>{const t=Array.isArray(e)?e:[];return eM(UC,JSON.stringify(t)),t},la=[{name:"Bacau",code:"BC",aliases:["bacau","bacu","bc"],seed:{lat:46.5667,lon:26.9167}},{name:"Iasi",code:"IS",aliases:["iasi","iai","is"],seed:{lat:47.1585,lon:27.6014}},{name:"Neamt",code:"NT",aliases:["neamt","neam","nt"],seed:{lat:46.9274,lon:26.37}},{name:"Galati",code:"GL",aliases:["galati","galai","gl"],seed:{lat:45.4353,lon:28.008}},{name:"Botosani",code:"BT",aliases:["botosani","botoani","bt"],seed:{lat:47.7486,lon:26.6694}},{name:"Suceava",code:"SV",aliases:["suceava","sv"],seed:{lat:47.6514,lon:26.2556}},{name:"Vaslui",code:"VS",aliases:["vaslui","vs"],seed:{lat:46.6407,lon:27.7276}}],tM=e=>{var a,c,f,g,v,y,C,b,T,I;const t=(e==null?void 0:e.county)||((c=(a=e==null?void 0:e.raw_data)==null?void 0:a.recipientLocation)==null?void 0:c.county)||((g=(f=e==null?void 0:e.raw_data)==null?void 0:f.recipientLocation)==null?void 0:g.countyName)||((y=(v=e==null?void 0:e.raw_data)==null?void 0:v.recipientLocation)==null?void 0:y.region)||((b=(C=e==null?void 0:e.raw_data)==null?void 0:C.recipientLocation)==null?void 0:b.regionName)||((T=e==null?void 0:e.raw_data)==null?void 0:T.county)||((I=e==null?void 0:e.raw_data)==null?void 0:I.countyName),n=Mm(t).trim(),i=Mr(n);if(!i)return null;for(const z of la){const R=Array.isArray(z.aliases)?z.aliases:[];for(const B of R){const F=Mr(B);if(F&&(i===F||i.includes(` ${F} `)||i.startsWith(`${F} `)||i.endsWith(` ${F}`)||i.includes(F)))return z.name}if(Mr(z.name)===i)return z.name}return n||null},nM=e=>{const t=HC(String((e==null?void 0:e.status)||"")).trim().toLowerCase();return t?!(t.includes("delivered")||t.includes("livrat")||t.includes("return")||t.includes("returnat")||t.includes("returnata")||t.includes("anulat")||t.includes("anulata")||t.includes("cancel")||t.includes("refuz")):!0},wc=()=>Oo().filter(Boolean).sort((e,t)=>String(t.updated_at||"").localeCompare(String(e.updated_at||""))),Rm=e=>Oo().find(t=>t&&t.id===e)||null,WC=({name:e,driver_id:t,driver_name:n,helper_name:i,vehicle_plate:a,date:c,county:f,kind:g,region:v}={})=>{const y=Oo(),C={id:VC(),name:String(e||"").trim()||"New Route",driver_id:km(t),driver_name:gl(n),vehicle_plate:Qh(a),helper_name:gl(i),date:c?String(c):Im(),kind:g?String(g):void 0,region:v?String(v):void 0,county:f?String(f):void 0,awbs:[],created_at:bs(),updated_at:bs()};return y.unshift(C),uu(y),C},eo=(e,t={})=>{const n=Oo(),i=n.findIndex(C=>C&&C.id===e);if(i===-1)return null;const a=n[i]||{},c=Object.prototype.hasOwnProperty.call(t,"driver_id")?km(t.driver_id):a.driver_id??null,f=Object.prototype.hasOwnProperty.call(t,"vehicle_plate")?Qh(t.vehicle_plate):a.vehicle_plate??null,g=Object.prototype.hasOwnProperty.call(t,"driver_name")?gl(t.driver_name):a.driver_name??null,v=Object.prototype.hasOwnProperty.call(t,"helper_name")?gl(t.helper_name):a.helper_name??null,y={...a,...t,id:a.id,driver_id:c,vehicle_plate:f,driver_name:g,helper_name:v,updated_at:bs()};return n[i]=y,uu(n),y},GC=e=>{const t=Qh(e==null?void 0:e.vehicle_plate),n=gl(e==null?void 0:e.driver_name)||String((e==null?void 0:e.driver_id)||"").trim()||null,i=gl(e==null?void 0:e.helper_name),a=[];t&&a.push(t),n&&a.push(n);let c=a.join(" - ");return i&&(c=c?`${c} + ${i}`:i),c||""},Xc=e=>{const t=GC(e);return t||String((e==null?void 0:e.name)||(e==null?void 0:e.county)||"").trim()||"Route"},rM=e=>{const t=Oo().filter(n=>n&&n.id!==e);return uu(t),!0},iM=(e,t)=>{const n=zi(t),i=Rm(e);if(!i)return null;const a=Array.isArray(i.awbs)?i.awbs:[];return eo(e,{awbs:a.filter(c=>c!==n)})},l2=(e,t)=>{if(!Rm(e))return null;const i=(Array.isArray(t)?t:[]).map(zi).filter(Boolean);return eo(e,{awbs:i})},sM=e=>{const t=zi(e);return t&&Oo().find(a=>Array.isArray(a==null?void 0:a.awbs)&&a.awbs.includes(t))||null},c2=e=>{const t=String(e||"").trim()||Im(),n=new Set(la.map(i=>Mr(i.name)));return wc().filter(i=>String((i==null?void 0:i.date)||"")===t).filter(i=>String((i==null?void 0:i.kind)||"").toLowerCase()==="county"||String((i==null?void 0:i.region)||"").toLowerCase()==="moldova").filter(i=>{const a=Mr((i==null?void 0:i.county)||(i==null?void 0:i.name));return a&&n.has(a)}).sort((i,a)=>Mr((i==null?void 0:i.county)||(i==null?void 0:i.name)).localeCompare(Mr((a==null?void 0:a.county)||(a==null?void 0:a.name))))},Op=(e,t,{scopeDate:n=!0}={})=>{const i=zi(t);if(!i)return null;const a=Oo(),c=a.findIndex(C=>C&&C.id===e);if(c===-1)return null;const f=a[c],g=String((f==null?void 0:f.date)||""),v=Array.isArray(f==null?void 0:f.awbs)?f.awbs:[];let y=!1;for(let C=0;C<a.length;C+=1){const b=a[C];!b||!Array.isArray(b.awbs)||b.awbs.length===0||C!==c&&(n&&g&&String(b.date||"")!==g||b.awbs.includes(i)&&(a[C]={...b,awbs:b.awbs.filter(T=>T!==i),updated_at:bs()},y=!0))}return v.includes(i)||(a[c]={...f,awbs:[...v,i],updated_at:bs()},y=!0),y&&uu(a),a[c]},Lp=({date:e,shipments:t,driver_id:n}={})=>{const i=String(e||"").trim()||Im(),a=Array.isArray(t)?t:[],c=Oo(),f=new Map(la.map(M=>[Mr(M.name),M])),g=new Map(la.map(M=>[Mr(M.name),M==null?void 0:M.seed]).filter(M=>{var H,$;return M[0]&&uh((H=M[1])==null?void 0:H.lat,($=M[1])==null?void 0:$.lon)}).map(([M,H])=>[M,{lat:Number(H.lat),lon:Number(H.lon)}])),v=new Map;for(const M of c){if(!M||String(M.date||"")!==i)continue;const H=Mr(M.county||M.name);H&&f.has(H)&&v.set(H,M)}let y=0;const C=[];for(const M of la){const H=Mr(M.name);let $=v.get(H);if($){let se=!1;String($.kind||"").toLowerCase()!=="county"&&($.kind="county",se=!0),String($.region||"").toLowerCase()!=="moldova"&&($.region="Moldova",se=!0),$.county||($.county=M.name,se=!0),se&&($.updated_at=bs())}else{const se=c.find(be=>be&&Mr(be.county||be.name)===H&&(be.vehicle_plate||be.driver_id));$={id:VC(),name:M.name,driver_id:km((se==null?void 0:se.driver_id)||n),driver_name:(se==null?void 0:se.driver_name)||null,vehicle_plate:Qh(se==null?void 0:se.vehicle_plate)||null,helper_name:(se==null?void 0:se.helper_name)||null,date:i,kind:"county",region:"Moldova",county:M.name,awbs:[],created_at:bs(),updated_at:bs()},c.unshift($),v.set(H,$),y+=1}C.push($)}const b=new Set;for(const M of c)M&&String(M.date||"")===i&&(Array.isArray(M.awbs)?M.awbs:[]).forEach(H=>{const $=zi(H);$&&b.add($)});const T=new Map;for(const M of a){const H=zi(M==null?void 0:M.awb);if(!H)continue;const $=$6(M);$&&T.set(H,$)}const I=Zc(),z=uh(I==null?void 0:I.lat,I==null?void 0:I.lon)?{lat:Number(I.lat),lon:Number(I.lon)}:null,R=new Map;for(const M of C){const H=Mr((M==null?void 0:M.county)||(M==null?void 0:M.name)),$=(Array.isArray(M==null?void 0:M.awbs)?M.awbs:[]).map(zi).filter(Boolean),se=[];for(const be of $){const Ne=T.get(be);Ne&&se.push({awb:be,lat:Ne.lat,lon:Ne.lon})}R.set(M.id,{route:M,county_key:H,seed:g.get(H)||null,stops:z?Rp(z,se):se,appended:[],touched:!1})}let B=0,F=0,P=0,k=0,G=0,K=0;const q=new Set,Y=[],ee=[];for(const M of a){if(!nM(M))continue;B+=1;const H=zi(M==null?void 0:M.awb);if(!H)continue;const $=tM(M);if(!$){G+=1;continue}const se=Mr($),be=f.get(se);if(!be){K+=1;continue}if(F+=1,b.has(H)){k+=1;continue}const Ne=T.get(H)||null;if(z&&Ne){Y.push({awb:H,lat:Ne.lat,lon:Ne.lon});continue}ee.push({awb:H,county_key:Mr(be.name)})}if(z&&Y.length>0){Y.sort((H,$)=>ti(z,$)-ti(z,H));const M=.25;for(const H of Y){if(b.has(H.awb))continue;let $=null;for(const se of R.values()){const{index:be,delta_km:Ne}=Q6(z,se.stops,H);if(!Number.isFinite(Ne))continue;const oe=se.seed?ti(se.seed,H):Number.POSITIVE_INFINITY,le=se.stops.length;if(!$){$={state:se,index:be,delta_km:Ne,seedDist:oe,load:le};continue}if(Ne<$.delta_km-M){$={state:se,index:be,delta_km:Ne,seedDist:oe,load:le};continue}if(Math.abs(Ne-$.delta_km)<=M){if(oe<$.seedDist-1e-6){$={state:se,index:be,delta_km:Ne,seedDist:oe,load:le};continue}if(Math.abs(oe-$.seedDist)<=1e-6&&le<$.load){$={state:se,index:be,delta_km:Ne,seedDist:oe,load:le};continue}}}$&&($.state.stops.splice($.index,0,H),$.state.touched=!0,b.add(H.awb),P+=1)}}for(const M of ee){if(b.has(M.awb))continue;const H=v.get(M.county_key);if(!H)continue;const $=R.get(H.id);$&&($.appended.push(M.awb),$.touched=!0,b.add(M.awb),P+=1)}for(const M of R.values()){if(!M.touched)continue;const H=M.route,$=(Array.isArray(H.awbs)?H.awbs:[]).map(zi).filter(Boolean),be=(z?Rp(z,M.stops):M.stops).map(Ae=>zi(Ae==null?void 0:Ae.awb)).filter(Boolean),Ne=[],oe=new Set,le=Ae=>{const ve=zi(Ae);!ve||oe.has(ve)||(Ne.push(ve),oe.add(ve))};be.forEach(le),M.appended.forEach(le),$.forEach(le);const ke=JSON.stringify($),ie=JSON.stringify(Ne);ke!==ie&&(H.awbs=Ne,H.updated_at=bs(),q.add(H.id))}return(y||q.size>0||P)&&uu(c),{date:i,created_routes:y,allocated_awbs:P,deliverable_total:B,deliverable_in_moldova:F,already_assigned:k,missing_county:G,outside_region:K,routes:C}},oM=200;function aM(){const[e,t]=O.useState([]),[n,i]=O.useState(!0),[a,c]=O.useState(""),[f,g]=O.useState(null),[v,y]=O.useState("list"),[C,b]=O.useState(null),[T,I]=O.useState({}),z=O.useRef({}),[R,B]=O.useState({active:!1,done:0,total:0,current:""}),[F,P]=O.useState({open:!1,awb:null}),[k,G]=O.useState([]),[K,q]=O.useState(""),[Y,ee]=O.useState({}),[M,H]=O.useState({}),[$,se]=O.useState({}),[be,Ne]=O.useState({}),oe=ur(),{user:le}=or(),{location:ke}=vm(),ie=_n(le,Qo),Ae=_n(le,Ka),ve=_n(le,Jr),xe=["Manager","Admin","Dispatcher","Driver"].includes(le==null?void 0:le.role),Le=["Admin","Manager","Dispatcher","Support","Recipient"].includes(String((le==null?void 0:le.role)||"").trim()),Ke=async()=>{i(!0);try{const W=le.token,we=await cu(W);t(we)}catch(W){console.error("Failed to fetch shipments",W)}finally{i(!1)}};O.useEffect(()=>{Ke()},[]),O.useEffect(()=>{G(wc())},[]);const Fe=(W,we="RON")=>{const Ce=Number(W);return Number.isFinite(Ce)?`${Ce.toFixed(2)} ${String(we||"RON").toUpperCase()}`:"--"},ne=W=>{const we=(W==null?void 0:W.raw_data)||{},Ce=(we==null?void 0:we.courier)??(we==null?void 0:we.carrier)??null,Pe=ct=>String(ct||"").trim();if(typeof Ce=="string")return Pe(Ce);const he=Ce&&typeof Ce=="object"?Ce:{},pe=Pe((he==null?void 0:he.courierId)||(he==null?void 0:he.carrierId)||(he==null?void 0:he.carrierCode)||(he==null?void 0:he.code)||(he==null?void 0:he.id)||(we==null?void 0:we.courierId)||(we==null?void 0:we.carrierId)||(we==null?void 0:we.carrierCode)),Be=Pe((he==null?void 0:he.courierName)||(he==null?void 0:he.carrierName)||(he==null?void 0:he.name)||(he==null?void 0:he.label)||(we==null?void 0:we.courierName)||(we==null?void 0:we.carrierName)),We=[];return pe&&We.push(pe),Be&&Be.toLowerCase()!==pe.toLowerCase()&&We.push(Be),We.join(" ")},ae=W=>{const we=(W==null?void 0:W.raw_data)||{},Ce=(we==null?void 0:we.additionalServices)||(we==null?void 0:we.additional_services)||{},Pe=Be=>Be===!0||Be===1||Be==="1"||String(Be||"").trim().toLowerCase()==="true",he=[];Pe(Ce==null?void 0:Ce.openPackage)&&he.push("Open"),Pe(Ce==null?void 0:Ce.priority)&&he.push("Priority"),Pe(Ce==null?void 0:Ce.insurance)&&he.push("Insured"),Pe(Ce==null?void 0:Ce.oversized)&&he.push("Oversized"),Pe(Ce==null?void 0:Ce.morning)&&he.push("Morning"),Pe(Ce==null?void 0:Ce.saturday)&&he.push("Saturday");const pe=String((Ce==null?void 0:Ce.options)||"").trim();return pe&&he.push(pe),he.length?`Srv: ${he.join(", ")}`:""},je=(W,{max:we=3}={})=>{const Ce=(W==null?void 0:W.raw_data)||{},Pe=[Ce==null?void 0:Ce.parcels,Ce==null?void 0:Ce.Parcels,Ce==null?void 0:Ce.packages,Ce==null?void 0:Ce.Packages,Ce==null?void 0:Ce.shipmentParcels,Ce==null?void 0:Ce.shipment_parcels];let he=null;for(const Be of Pe)if(Array.isArray(Be)&&Be.length){he=Be;break}if(!Array.isArray(he))return[];const pe=[];for(const Be of he){if(pe.length>=we)break;if(typeof Be=="string"){const ct=Be.trim();ct&&pe.push(ct);continue}if(!Be||typeof Be!="object")continue;const We=String((Be==null?void 0:Be.barCode)||(Be==null?void 0:Be.barcode)||(Be==null?void 0:Be.bar_code)||(Be==null?void 0:Be.code)||(Be==null?void 0:Be.id)||"").trim();We&&pe.push(We)}return pe},Qe=W=>{const we=(W==null?void 0:W.raw_data)||{},Ce=(we==null?void 0:we.client)||(we==null?void 0:we.clientData)||{},Pe=(we==null?void 0:we.senderLocation)||{},he=(W==null?void 0:W.sender_shop_name)||(Ce==null?void 0:Ce.name)||(Ce==null?void 0:Ce.clientName)||(Pe==null?void 0:Pe.name)||(Pe==null?void 0:Pe.shopName)||"";return String(he||"").trim()},Ue=async(W,{refresh:we=!0}={})=>{const Ce=String(W||"").toUpperCase();if(Ce){ee(Pe=>({...Pe,[Ce]:!0}));try{const Pe=le==null?void 0:le.token,he=await Gc(Pe,Ce,{refresh:we});t(pe=>(Array.isArray(pe)?pe:[]).map(Be=>String((Be==null?void 0:Be.awb)||"").toUpperCase()===Ce?{...Be,...he}:Be))}catch(Pe){console.warn("Failed to load shipment details",Pe),q(`Failed to load details for ${Ce}`),setTimeout(()=>q(""),2500)}finally{ee(Pe=>({...Pe,[Ce]:!1}))}}},nt=async W=>{var he,pe,Be,We;if(!ie)return;const we=String((W==null?void 0:W.awb)||"").toUpperCase();if(!we)return;const Ce=(W==null?void 0:W.locality)||((pe=(he=W==null?void 0:W.raw_data)==null?void 0:he.recipientLocation)==null?void 0:pe.locality)||((We=(Be=W==null?void 0:W.raw_data)==null?void 0:Be.recipientLocation)==null?void 0:We.localityName)||"",Pe=Ce?{locality:Ce}:{};H(ct=>({...ct,[we]:!0}));try{const ct=le==null?void 0:le.token;await Wh(ct,{awb:we,event_id:"2",timestamp:new Date().toISOString(),payload:Pe}),t(Qn=>(Array.isArray(Qn)?Qn:[]).map(Bt=>String((Bt==null?void 0:Bt.awb)||"").toUpperCase()===we?{...Bt,status:"Delivered"}:Bt)),q(`Marked ${we} as Delivered`),setTimeout(()=>q(""),2500),Ue(we,{refresh:!0})}catch{try{await Cm(we,"2",Pe),q(`Queued Delivered for ${we}`),setTimeout(()=>q(""),2500)}catch{q(`Failed to mark Delivered for ${we}`),setTimeout(()=>q(""),2500)}}finally{H(ct=>({...ct,[we]:!1}))}},Ze=async W=>{var Ce,Pe;if(!Le)return;const we=String(W||"").trim().toUpperCase();if(!(!we||!(le!=null&&le.token))){se(he=>({...he||{},[we]:!0})),q("");try{const he=await xm(le.token,{awb:we,duration_sec:1800}),pe=he==null?void 0:he.id;pe?oe(`/tracking/${encodeURIComponent(String(pe))}`):(q("Tracking request created."),setTimeout(()=>q(""),2500))}catch(he){const pe=((Pe=(Ce=he==null?void 0:he.response)==null?void 0:Ce.data)==null?void 0:Pe.detail)||(he==null?void 0:he.message)||"Failed to request tracking";q(String(pe)),setTimeout(()=>q(""),3e3)}finally{se(he=>({...he||{},[we]:!1}))}}},Rt=async W=>{var Ce,Pe;if(!ve)return;const we=String(W||"").trim().toUpperCase();if(!(!we||!(le!=null&&le.token))){Ne(he=>({...he||{},[we]:!0})),q("");try{const he=await wm(le.token,{awb:we});he!=null&&he.id?oe(`/chat/${encodeURIComponent(String(he.id))}`):(q("Chat unavailable."),setTimeout(()=>q(""),2500))}catch(he){const pe=((Pe=(Ce=he==null?void 0:he.response)==null?void 0:Ce.data)==null?void 0:Pe.detail)||(he==null?void 0:he.message)||"Failed to open chat";q(String(pe)),setTimeout(()=>q(""),3e3)}finally{Ne(he=>({...he||{},[we]:!1}))}}},tt=ke?{lat:ke.latitude,lon:ke.longitude}:null;O.useEffect(()=>{z.current=T},[T]);const yt=async W=>{var Be;const we=String((W==null?void 0:W.awb)||"").toUpperCase(),Ce=aa(W);let Pe=Number(W==null?void 0:W.latitude),he=Number(W==null?void 0:W.longitude);if(y("map"),b(null),!et(Pe)||!et(he)){const We=(Be=z.current)==null?void 0:Be[we];We&&(!We.q||We.q===Ce)&&et(We.lat)&&et(We.lon)&&(Pe=Number(We.lat),he=Number(We.lon))}if(!et(Pe)||!et(he)){const We=Yc(Ce);We&&et(We.lat)&&et(We.lon)&&(Pe=Number(We.lat),he=Number(We.lon),we&&I(ct=>({...ct,[we]:{lat:Pe,lon:he,ts:Date.now(),source:"cache",q:Ce}})))}if(!et(Pe)||!et(he)){const We=await ch(Ce);We&&et(We.lat)&&et(We.lon)&&(Pe=Number(We.lat),he=Number(We.lon),we&&I(ct=>({...ct,[we]:{lat:Pe,lon:he,ts:Date.now(),source:"geocode",q:Ce}})))}const pe=Zc();if(pe&&et(pe.lat)&&et(pe.lon)&&et(Pe)&&et(he)){const We=await I6({lat:pe.lat,lon:pe.lon},{lat:Pe,lon:he});b(We)}else b(null)},Xt=W=>{if(xe){try{Lp({date:new Date().toISOString().slice(0,10),shipments:[],driver_id:(le==null?void 0:le.driver_id)||null})}catch{}G(wc()),P({open:!0,awb:String(W||"").toUpperCase()})}},Vn=async W=>{var Pe,he;const we=F.awb;if(!we)return;if(Op(W,we,{scopeDate:!0})){const pe=wc().find(Be=>Be.id===W);if(q(`Assigned ${we} to ${(pe==null?void 0:pe.name)||"route"}${pe!=null&&pe.vehicle_plate?` (${pe.vehicle_plate})`:""}`),setTimeout(()=>q(""),2500),Ae){const Be=String((pe==null?void 0:pe.driver_id)||"").trim();if(!Be)q("Route has no driver assigned; allocation not sent."),setTimeout(()=>q(""),3e3);else try{await mm(le==null?void 0:le.token,we,Be),q(`Allocated ${we} to ${Be} and notified recipient.`),setTimeout(()=>q(""),3e3)}catch(We){console.warn("Allocation API failed",We);const ct=(he=(Pe=We==null?void 0:We.response)==null?void 0:Pe.data)==null?void 0:he.detail;q(ct?`Allocation failed: ${ct}`:"Allocated locally only (API failed)."),setTimeout(()=>q(""),3e3)}}}P({open:!1,awb:null})},ut=()=>{const W=F.awb;if(!W)return;let we="";try{we=localStorage.getItem("arynik_last_vehicle_plate_v1")||""}catch{}const Ce=WC({name:`Route ${new Date().toLocaleDateString()}`,driver_id:(le==null?void 0:le.driver_id)||null,driver_name:(le==null?void 0:le.name)||null,helper_name:(le==null?void 0:le.helper_name)||null,vehicle_plate:String(we||"").trim().toUpperCase()||null,date:new Date().toISOString().slice(0,10)});Op(Ce.id,W,{scopeDate:!0}),P({open:!1,awb:null}),q(`Created route and assigned ${W}`),setTimeout(()=>q(""),2500),oe(`/routes/${Ce.id}`)},ht=e.filter(W=>{var we,Ce;return((we=W.awb)==null?void 0:we.toLowerCase().includes(a.toLowerCase()))||W.recipient_name&&((Ce=W.recipient_name)==null?void 0:Ce.toLowerCase().includes(a.toLowerCase()))}),ft=O.useMemo(()=>ht.slice(0,oM),[ht]),_r=O.useMemo(()=>ft.map(W=>String((W==null?void 0:W.awb)||"").toUpperCase()).join("|"),[ft]);O.useEffect(()=>{if(v!=="map"||!ft||ft.length===0)return;let W=!1;return(async()=>{const we=ft.length,Ce=z.current||{},Pe={},he=[];let pe=0;for(const Bt of ft){if(W)return;const yn=String((Bt==null?void 0:Bt.awb)||"").toUpperCase();if(!yn){pe+=1;continue}const mt=aa(Bt);if(et(Bt==null?void 0:Bt.latitude)&&et(Bt==null?void 0:Bt.longitude)){Pe[yn]={lat:Number(Bt.latitude),lon:Number(Bt.longitude),ts:Date.now(),source:"shipment",q:mt},pe+=1;continue}const Jt=Ce[yn];if(Jt&&(!Jt.q||Jt.q===mt)&&et(Jt.lat)&&et(Jt.lon)){Jt.q||(Pe[yn]={...Jt,q:mt}),pe+=1;continue}const $n=Yc(mt);if($n){et($n.lat)&&et($n.lon)&&(Pe[yn]={lat:Number($n.lat),lon:Number($n.lon),ts:Number($n.ts||Date.now()),source:"cache",q:mt}),pe+=1;continue}he.push({awb:yn,query:mt})}if(W)return;if(Object.keys(Pe).length>0&&I(Bt=>({...Bt,...Pe})),he.length===0){B({active:!1,done:we,total:we,current:""});return}B({active:!0,done:pe,total:we,current:""});let Be={},We=0,ct=Date.now();const Qn=()=>{if(W||Object.keys(Be).length===0)return;const Bt=Be;Be={},We=0,ct=Date.now(),I(yn=>({...yn,...Bt}))};for(const Bt of he){if(W)return;const{awb:yn,query:mt}=Bt;B({active:!0,done:pe,total:we,current:yn});const Jt=await ch(mt);Jt&&et(Jt.lat)&&et(Jt.lon)&&yn&&(Be[yn]={lat:Number(Jt.lat),lon:Number(Jt.lon),ts:Date.now(),source:"geocode",q:mt},We+=1),pe+=1;const $n=Date.now()-ct;(We>=5||$n>300)&&Qn()}Qn(),!W&&B({active:!1,done:pe,total:we,current:""})})(),()=>{W=!0}},[v,_r]);const Ye=O.useMemo(()=>{if(v!=="map")return ht;const W=T||{};return ht.map(we=>{const Ce=String((we==null?void 0:we.awb)||"").toUpperCase(),Pe=W[Ce],he=aa(we);return Pe&&(!Pe.q||Pe.q===he)&&et(Pe.lat)&&et(Pe.lon)?{...we,latitude:Number(Pe.lat),longitude:Number(Pe.lon)}:we})},[v,ht,T]),St=20,[qt,_t]=O.useState(1);O.useEffect(()=>{_t(1)},[a,v]);const Dt=Math.ceil(ht.length/St),Kt=v==="list"?ht.slice((qt-1)*St,qt*St):ht,Hn=W=>W==="Delivered"?"from-emerald-500 to-emerald-600":W==="In Transit"?"from-blue-500 to-blue-600":"from-amber-500 to-amber-600",rn=W=>W==="Delivered"?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":W==="In Transit"?"bg-blue-500/20 text-blue-400 border-blue-500/30":"bg-amber-500/20 text-amber-400 border-amber-500/30";return m.jsxs(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-20 right-0 w-72 h-72 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"sticky top-0 z-40 glass-strong backdrop-blur-xl border-b border-white/10 pb-2 shadow-sm",children:[m.jsxs("div",{className:"p-4 flex items-center gap-4",children:[m.jsx("button",{onClick:()=>oe(-1),className:"p-2 -ml-2 rounded-xl glass-light text-slate-300 hover:text-white transition-colors border border-white/10",children:m.jsx(Ms,{})}),m.jsx("h1",{className:"flex-1 font-black text-xl text-gradient tracking-tight",children:"Shipments"}),m.jsxs("div",{className:"flex glass-strong p-1 rounded-xl border border-white/10",children:[m.jsx("button",{onClick:()=>y("list"),className:`p-2 rounded-lg transition-all ${v==="list"?"bg-gradient-to-r from-violet-600 to-purple-600 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:m.jsx(hb,{size:20})}),m.jsx("button",{onClick:()=>y("map"),className:`p-2 rounded-lg transition-all ${v==="map"?"bg-gradient-to-r from-violet-600 to-purple-600 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:m.jsx(mb,{size:20})})]}),m.jsx("button",{onClick:Ke,className:`p-2 rounded-xl glass-light hover:bg-violet-500/20 text-violet-400 transition-all border border-white/10 ${n?"animate-spin":""}`,children:m.jsx(Yr,{size:20})})]}),m.jsx("div",{className:"px-4 pb-2",children:m.jsxs("div",{className:"relative group",children:[m.jsx(Ls,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-violet-400 transition-colors z-10",size:18}),m.jsx("input",{type:"text",placeholder:"Search AWB, Client...",className:"w-full pl-12 pr-4 py-3.5 glass-strong rounded-2xl outline-none focus:ring-2 focus:ring-violet-500/30 border border-white/10 text-sm font-medium text-white placeholder-slate-500 transition-all",value:a,onChange:W=>c(W.target.value)})]})})]}),m.jsx("div",{className:"flex-1 p-4 space-y-3 pb-32 relative z-10",children:m.jsxs(os,{mode:"wait",children:[K&&m.jsx(st.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"glass-strong p-4 rounded-2xl border border-emerald-500/20 text-emerald-300 text-xs font-bold",children:K}),n&&e.length===0?m.jsxs(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-violet-500/20 blur-xl rounded-full animate-pulse"}),m.jsx(fn,{className:"animate-spin relative z-10 text-violet-400",size:48})]}),m.jsx("p",{className:"mt-6 font-bold text-xs uppercase tracking-widest text-slate-500",children:"Syncing Data..."})]}):ht.length===0?m.jsxs(st.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(Os,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No shipments found"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Try adjusting your search"})]}):v==="map"?m.jsxs(st.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"h-[70vh] w-full rounded-3xl overflow-hidden border-iridescent shadow-2xl relative",children:[m.jsx(Tm,{shipments:Ye,currentLocation:tt,originLocation:Zc(),routeGeometry:C}),R.active&&m.jsxs("div",{className:"absolute top-4 left-4 glass-strong rounded-2xl border border-white/10 px-4 py-3 text-white text-xs font-bold shadow-lg",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(fn,{className:"animate-spin text-violet-300",size:14}),m.jsx("span",{className:"uppercase tracking-widest text-[10px] text-slate-300",children:"Geocoding"})]}),m.jsxs("div",{className:"mt-1 text-[10px] text-slate-400 font-black uppercase tracking-wider",children:[R.done,"/",R.total," ",R.current?`(${R.current})`:""]}),m.jsx("div",{className:"mt-2 h-1.5 w-48 bg-white/10 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-gradient-to-r from-violet-500 to-purple-500",style:{width:`${Math.min(100,Math.round(R.done/Math.max(1,R.total)*100))}%`}})}),m.jsx("div",{className:"mt-2 text-[9px] text-slate-500 font-bold",children:"Tip: search a city/awb first to reduce requests."})]})]}):m.jsxs("div",{className:"space-y-3",children:[Kt.map((W,we)=>{var Ce,Pe,he,pe,Be,We,ct,Qn,Bt,yn,mt,Jt,$n,J,_e,Se,ze,qe,pt,it,In,Ut,Ht,At,Ve,Ft,De,br,ci,wn;return m.jsxs(st.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:we*.05},className:`glass-strong rounded-3xl overflow-hidden transition-all duration-300 border border-white/10 ${f===we?"ring-2 ring-violet-500/30 shadow-glow-sm":""}`,children:[m.jsxs("div",{onClick:()=>{const Ot=f===we?null:we;g(Ot),Ot!==null&&Ue(W.awb,{refresh:!1})},className:"p-5 flex items-center gap-4 cursor-pointer relative",children:[m.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shadow-sm bg-gradient-to-br ${Hn(W.status)}`,children:m.jsx(Os,{size:24,strokeWidth:2,className:"text-white"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[m.jsx("h3",{className:"font-mono text-[10px] font-black uppercase tracking-widest text-slate-500",children:W.awb}),m.jsxs("div",{className:"flex items-center gap-2",children:[(()=>{const Ot=sM(W.awb);return Ot?m.jsx("span",{className:"text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border bg-emerald-500/15 text-emerald-300 border-emerald-500/20",children:Xc(Ot)}):null})(),m.jsx("span",{className:`text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border ${rn(W.status)}`,children:W.status||"Active"})]})]}),m.jsx("p",{className:"text-sm font-bold text-white truncate leading-tight mb-2",children:W.recipient_name}),m.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400",children:[m.jsx(Rs,{size:11,strokeWidth:2.5}),m.jsx("p",{className:"text-[10px] font-medium truncate",children:W.delivery_address||W.locality||"No Address"})]})]}),m.jsx(yo,{className:`text-slate-500 transition-transform duration-300 ${f===we?"rotate-90 text-violet-400":""}`,size:20})]}),m.jsx(os,{children:f===we&&m.jsx(st.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},children:m.jsxs("div",{className:"p-5 space-y-4 bg-black/20 border-t border-white/5",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"glass-light p-4 rounded-2xl flex items-center gap-3 border border-white/10",children:[m.jsx("div",{className:"p-2 bg-violet-500/20 rounded-xl",children:m.jsx(Xd,{size:16,className:"text-violet-400"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-0.5",children:"Contact"}),m.jsx("p",{className:"text-xs font-bold text-white truncate",children:W.recipient_phone||"--"})]})]}),m.jsxs("div",{className:"glass-light p-4 rounded-2xl flex items-center gap-3 border border-white/10",children:[m.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl",children:m.jsx(_a,{size:16,className:"text-emerald-400"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-0.5",children:"Recipient"}),m.jsx("p",{className:"text-xs font-bold text-white truncate",children:W.recipient_name})]})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Packages"}),m.jsx("p",{className:"text-sm font-black text-white",children:Number.isFinite(Number(W.number_of_parcels))?Number(W.number_of_parcels):((Ce=W==null?void 0:W.raw_data)==null?void 0:Ce.numberOfDistinctBarcodes)||((Pe=W==null?void 0:W.raw_data)==null?void 0:Pe.numberOfParcels)||1})]}),m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Payment"}),m.jsx("p",{className:"text-sm font-black text-white",children:Fe(W.payment_amount??W.shipping_cost??W.estimated_shipping_cost,W.currency||((he=W==null?void 0:W.raw_data)==null?void 0:he.currency)||"RON")}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold mt-1 truncate",children:(()=>{const Ot=[];return Number.isFinite(Number(W.shipping_cost))&&Ot.push(`Cost: ${Fe(W.shipping_cost,W.currency||"RON")}`),Number.isFinite(Number(W.estimated_shipping_cost))&&(Number(W.shipping_cost)===Number(W.estimated_shipping_cost)||Ot.push(`Est: ${Fe(W.estimated_shipping_cost,W.currency||"RON")}`)),Ot.length?Ot.join("  "):"Not loaded"})()})]}),m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"COD"}),m.jsx("p",{className:"text-sm font-black text-white",children:Fe(W.cod_amount,W.currency||"RON")})]}),m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Declared"}),m.jsx("p",{className:"text-sm font-black text-white",children:Fe(W.declared_value,W.currency||"RON")})]}),m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10 col-span-2",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Content"}),m.jsx("p",{className:"text-xs font-bold text-white truncate",children:W.content_description||((pe=W==null?void 0:W.raw_data)==null?void 0:pe.contentDescription)||((Be=W==null?void 0:W.raw_data)==null?void 0:Be.contents)||((We=W==null?void 0:W.raw_data)==null?void 0:We.content)||((ct=W==null?void 0:W.raw_data)==null?void 0:ct.packingList)||((Qn=W==null?void 0:W.raw_data)==null?void 0:Qn.packingListNumber)||((Bt=W==null?void 0:W.raw_data)==null?void 0:Bt.packingListId)||((yn=W==null?void 0:W.raw_data)==null?void 0:yn.packing_list)||((mt=W==null?void 0:W.raw_data)==null?void 0:mt.packing_list_number)||((Jt=W==null?void 0:W.raw_data)==null?void 0:Jt.packing_list_id)||(($n=W==null?void 0:W.raw_data)==null?void 0:$n.packageContent)||((J=W==null?void 0:W.raw_data)==null?void 0:J.shipmentContent)||((_e=W==null?void 0:W.raw_data)==null?void 0:_e.goodsDescription)||((ze=(Se=W==null?void 0:W.raw_data)==null?void 0:Se.additionalServices)==null?void 0:ze.contentDescription)||((pt=(qe=W==null?void 0:W.raw_data)==null?void 0:qe.additionalServices)==null?void 0:pt.contents)||((In=(it=W==null?void 0:W.raw_data)==null?void 0:it.additionalServices)==null?void 0:In.content)||((Ht=(Ut=W==null?void 0:W.raw_data)==null?void 0:Ut.additionalServices)==null?void 0:Ht.packingList)||((Ve=(At=W==null?void 0:W.raw_data)==null?void 0:At.additionalServices)==null?void 0:Ve.packingListNumber)||((De=(Ft=W==null?void 0:W.raw_data)==null?void 0:Ft.additionalServices)==null?void 0:De.packingListId)||((ci=(br=W==null?void 0:W.raw_data)==null?void 0:br.productCategory)==null?void 0:ci.name)||(typeof((wn=W==null?void 0:W.raw_data)==null?void 0:wn.productCategory)=="string"?W.raw_data.productCategory:"")||"--"}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold mt-1 truncate",children:[W.dimensions?`Dims: ${W.dimensions}`:"",W.weight?`  W: ${Number(W.weight).toFixed(2)} kg`:"",W.volumetric_weight?`  Vol: ${Number(W.volumetric_weight).toFixed(2)} kg`:""]}),(()=>{const Ot=je(W,{max:2});return Ot.length?m.jsx("p",{className:"text-[10px] text-slate-500 font-bold mt-1 truncate",children:`Barcode: ${Ot.join("  ")}`}):null})(),W.delivery_instructions?m.jsx("p",{className:"text-[10px] text-slate-500 font-bold mt-1 truncate",children:`Instr: ${String(W.delivery_instructions)}`}):null,W.processing_status||W.send_type?m.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:[W.processing_status?`Proc: ${W.processing_status}`:"",W.send_type?`${W.processing_status?"  ":""}Type: ${W.send_type}`:""]}):null,m.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:[W.shipment_reference?`Ref: ${W.shipment_reference}`:"",W.client_order_id?`  Order: ${W.client_order_id}`:""]}),m.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:[Qe(W)?`Client: ${Qe(W)}`:"",W.source_channel?`${Qe(W)?"  ":""}Channel: ${W.source_channel}`:""]}),ne(W)||ae(W)?m.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:[ne(W)?`Carrier: ${ne(W)}`:"",ae(W)?`${ne(W)?"  ":""}${ae(W)}`:""]}):null]})]}),Array.isArray(W.tracking_history)&&W.tracking_history.length>0&&m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-2",children:"History"}),m.jsx("div",{className:"space-y-2",children:W.tracking_history.slice(0,4).map((Ot,Pr)=>m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsx("p",{className:"text-[11px] font-bold text-slate-200 truncate",children:(Ot==null?void 0:Ot.eventDescription)||(Ot==null?void 0:Ot.statusDescription)||"Update"}),m.jsx("p",{className:"text-[10px] font-bold text-slate-500 whitespace-nowrap",children:Ot!=null&&Ot.eventDate?new Date(Ot.eventDate).toLocaleString():""})]},Pr))})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("button",{onClick:()=>Ue(W.awb,{refresh:!0}),className:`w-full btn-premium py-3 bg-gradient-to-r from-slate-700 to-slate-800 hover:from-slate-600 hover:to-slate-700 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm ${Y[String((W==null?void 0:W.awb)||"").toUpperCase()]?"opacity-70 cursor-not-allowed":""}`,disabled:Y[String((W==null?void 0:W.awb)||"").toUpperCase()],title:"Fetch full details + history from Postis",children:[m.jsx(Yr,{size:16,className:Y[String((W==null?void 0:W.awb)||"").toUpperCase()]?"animate-spin":""}),"Details"]}),ie?m.jsxs("button",{onClick:()=>nt(W),className:`w-full btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm ${M[String((W==null?void 0:W.awb)||"").toUpperCase()]?"opacity-70 cursor-not-allowed":""}`,disabled:M[String((W==null?void 0:W.awb)||"").toUpperCase()]||String((W==null?void 0:W.status)||"").toLowerCase()==="delivered",title:"Mark as Delivered",children:[m.jsx(Bh,{size:16}),"Delivered"]}):m.jsx("div",{className:"w-full glass-light rounded-xl border border-white/10 flex items-center justify-center text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Read-only"})]}),m.jsxs("button",{onClick:()=>yt(W),className:"w-full btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm",children:[m.jsx(gb,{size:16}),"View on Map"]}),Le&&String((W==null?void 0:W.driver_id)||"").trim()?m.jsxs("button",{onClick:()=>Ze(W.awb),disabled:!!$[String((W==null?void 0:W.awb)||"").toUpperCase()],className:`w-full btn-premium py-3 bg-gradient-to-r from-sky-600 to-indigo-700 hover:from-sky-500 hover:to-indigo-600 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm ${$[String((W==null?void 0:W.awb)||"").toUpperCase()]?"opacity-70 cursor-not-allowed":""}`,title:"Request driver live location",children:[$[String((W==null?void 0:W.awb)||"").toUpperCase()]?m.jsx(fn,{size:16,className:"animate-spin"}):m.jsx(Rs,{size:16}),"Track Driver"]}):null,ve?m.jsxs("button",{onClick:()=>Rt(W.awb),disabled:!!be[String((W==null?void 0:W.awb)||"").toUpperCase()],className:`w-full btn-premium py-3 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm ${be[String((W==null?void 0:W.awb)||"").toUpperCase()]?"opacity-70 cursor-not-allowed":""}`,title:"Open chat",children:[be[String((W==null?void 0:W.awb)||"").toUpperCase()]?m.jsx(fn,{size:16,className:"animate-spin"}):m.jsx(Wc,{size:16}),"Chat"]}):null,xe?m.jsxs("button",{onClick:()=>Xt(W.awb),className:"w-full btn-premium py-3 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm",children:[m.jsx(wo,{size:16}),Ae?"Allocate to Truck":"Assign to Route"]}):null]})})})]},W.awb||we)}),Dt>1&&m.jsxs("div",{className:"flex items-center justify-between pt-4 glass-strong rounded-2xl p-4 border border-white/10",children:[m.jsx("button",{onClick:()=>_t(W=>Math.max(1,W-1)),disabled:qt===1,className:"p-2 rounded-xl hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-white",children:m.jsx(Ms,{size:20})}),m.jsxs("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:["Page ",qt," of ",Dt]}),m.jsx("button",{onClick:()=>_t(W=>Math.min(Dt,W+1)),disabled:qt===Dt,className:"p-2 rounded-xl hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-white",children:m.jsx(yo,{size:20})})]})]})]})}),m.jsx(os,{children:F.open&&m.jsx(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-end justify-center bg-black/60 backdrop-blur-sm p-4",onClick:()=>P({open:!1,awb:null}),children:m.jsxs(st.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},exit:{y:30,opacity:0},className:"w-full max-w-md glass-strong rounded-3xl border-iridescent p-5 space-y-4",onClick:W=>W.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Assign AWB"}),m.jsx("p",{className:"text-sm font-bold text-white font-mono mt-1",children:F.awb})]}),m.jsx("button",{onClick:ut,className:"px-4 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-300 text-[10px] font-black uppercase tracking-widest active:scale-95 transition-all",children:"Create Route"})]}),m.jsx("div",{className:"space-y-2 max-h-[45vh] overflow-y-auto",children:k.length===0?m.jsx("p",{className:"text-xs text-slate-500",children:"No routes yet. Tap Create Route."}):k.map(W=>m.jsxs("button",{onClick:()=>Vn(W.id),className:"w-full p-4 rounded-2xl border border-white/10 hover:border-emerald-500/30 transition-all text-left glass-light flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-sm font-bold text-white truncate",children:Xc(W)}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1",children:[W.date,"  ",Array.isArray(W.awbs)?W.awbs.length:0," stops",W.vehicle_plate?`  ${W.vehicle_plate}`:""]})]}),m.jsx("span",{className:"text-[10px] font-black text-emerald-300 uppercase tracking-wide",children:"Select"})]},W.id))})]})})})]})}function lM(){const[e,t]=O.useState(new Date),[n,i]=O.useState({}),[a,c]=O.useState(!0),f=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),g=new Date(e.getFullYear(),e.getMonth(),1).getDay(),v=()=>t(new Date(e.getFullYear(),e.getMonth()-1,1)),y=()=>t(new Date(e.getFullYear(),e.getMonth()+1,1)),C=e.toLocaleString("default",{month:"long"}),b=e.getFullYear();O.useEffect(()=>{(async()=>{c(!0);try{const B=localStorage.getItem("token"),F=new Date(e.getFullYear(),e.getMonth(),1).toISOString(),P=new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59).toISOString(),G=(await pm(B,{start_date:F,end_date:P,limit:2e3})).reduce((K,q)=>{const Y=new Date(q.timestamp).getDate();return K[Y]||(K[Y]=[]),K[Y].push(q),K},{});i(G)}catch(B){console.error("Failed to fetch monthly deliveries",B)}finally{c(!1)}})()},[e]);const T=[];for(let R=0;R<g;R+=1)T.push(m.jsx("div",{className:"h-24"},`empty-${R}`));for(let R=1;R<=f;R+=1){const B=n[R]||[],F=B.length>0,P=R===new Date().getDate()&&e.getMonth()===new Date().getMonth()&&e.getFullYear()===new Date().getFullYear();T.push(m.jsxs("div",{className:`h-24 border-t border-white/5 p-2 relative flex flex-col items-center justify-center gap-1 transition-all duration-300 hover:bg-white/5 cursor-pointer group ${P?"bg-violet-500/10 border-violet-500/30":""}`,children:[m.jsx("span",{className:`text-xs font-black absolute top-2 right-2 transition-all ${P?"text-violet-400":"text-slate-500 group-hover:text-violet-300"}`,children:R}),F&&m.jsxs("div",{className:"flex flex-col items-center animate-scale-in",children:[m.jsx("div",{className:"p-2 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl text-white shadow-glow-sm",children:m.jsx(Os,{size:16,strokeWidth:2.5})}),m.jsxs("span",{className:"text-[9px] font-black text-emerald-400 uppercase mt-1.5 tracking-wide",children:[B.length," AWB"]})]})]},R))}const I=Object.values(n).flat().length,z=I>0?(I/new Date().getDate()).toFixed(1):0;return m.jsxs("div",{className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-xl font-black text-gradient tracking-tight",children:"Delivery Calendar"}),m.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"Track your monthly performance"})]}),m.jsx("div",{className:"w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10",children:m.jsx(cb,{size:20,className:"text-violet-400"})})]}),m.jsxs("div",{className:"flex-1 p-4 pb-32 space-y-6 relative z-10",children:[m.jsxs("div",{className:"glass-strong rounded-[32px] shadow-2xl border-iridescent overflow-hidden animate-scale-in",children:[m.jsxs("div",{className:"p-6 flex items-center justify-between bg-gradient-to-r from-violet-600 via-purple-600 to-violet-700 text-white relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 shimmer opacity-20"}),m.jsx("button",{onClick:v,className:"p-2.5 hover:bg-white/20 rounded-xl transition-all active:scale-95 relative z-10 magnetic",children:m.jsx(s8,{size:20,strokeWidth:2.5})}),m.jsxs("h2",{className:"text-lg font-black uppercase tracking-widest relative z-10",children:[C," ",b]}),m.jsx("button",{onClick:y,className:"p-2.5 hover:bg-white/20 rounded-xl transition-all active:scale-95 relative z-10 magnetic",children:m.jsx(yo,{size:20,strokeWidth:2.5})})]}),m.jsxs("div",{className:"grid grid-cols-7 text-center py-4 bg-black/20 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:[m.jsx("div",{children:"Sun"}),m.jsx("div",{children:"Mon"}),m.jsx("div",{children:"Tue"}),m.jsx("div",{children:"Wed"}),m.jsx("div",{children:"Thu"}),m.jsx("div",{children:"Fri"}),m.jsx("div",{children:"Sat"})]}),m.jsxs("div",{className:"grid grid-cols-7 relative min-h-[400px]",children:[a&&m.jsx("div",{className:"absolute inset-0 glass-strong z-10 flex items-center justify-center backdrop-blur-sm",children:m.jsxs("div",{className:"text-center",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-violet-500/20 blur-xl rounded-full animate-pulse"}),m.jsx(fn,{className:"animate-spin relative z-10 text-violet-400",size:48})]}),m.jsx("p",{className:"mt-6 font-bold text-xs uppercase tracking-widest text-slate-500",children:"Loading..."})]})}),T]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Monthly Insights"}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"glass-strong p-5 rounded-2xl border-iridescent animate-scale-in",style:{animationDelay:"0.1s"},children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("div",{className:"p-2 bg-violet-500/20 rounded-lg",children:m.jsx(Os,{size:16,className:"text-violet-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Total"})]}),m.jsx("p",{className:"text-3xl font-black text-gradient-purple",children:I}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium mt-1",children:"Deliveries"})]}),m.jsxs("div",{className:"glass-strong p-5 rounded-2xl border-iridescent animate-scale-in",style:{animationDelay:"0.2s"},children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:m.jsx(Kd,{size:16,className:"text-emerald-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Average"})]}),m.jsx("p",{className:"text-3xl font-black text-gradient-blue",children:z}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium mt-1",children:"Per Day"})]})]}),m.jsxs("div",{className:"glass-strong p-5 rounded-2xl border-iridescent flex items-center gap-4 animate-scale-in",style:{animationDelay:"0.3s"},children:[m.jsx("div",{className:"p-4 bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl shadow-glow-sm",children:m.jsx(_b,{size:24,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:"text-sm font-black text-white",children:"Active Month"}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-medium uppercase tracking-wide mt-1",children:[I," shipments processed in ",C]})]})]})]})]})]})}const u2=e=>{try{return String(e||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim().toLowerCase()}catch{return String(e||"").trim().toLowerCase()}};function cM(){const e=ur(),{user:t}=or(),n=_n(t,Js),[i,a]=O.useState([]),[c,f]=O.useState(""),[g,v]=O.useState(new Date().toISOString().slice(0,10)),[y,C]=O.useState(()=>{try{return localStorage.getItem("arynik_last_vehicle_plate_v1")||""}catch{return""}}),[b,T]=O.useState([]),[I,z]=O.useState(!1),[R,B]=O.useState(""),[F,P]=O.useState(!1),k=()=>a(wc()),G=()=>T(c2(g));O.useEffect(()=>{k()},[]),O.useEffect(()=>{try{const H=c2(g);(!H||H.length<la.length)&&Lp({date:g,shipments:[],driver_id:(t==null?void 0:t.driver_id)||null})}catch{}k(),G()},[g]);const K=()=>{const $=String(c||"").trim()||`Route ${new Date().toLocaleDateString()}`,se=String(y||"").trim().toUpperCase(),be=WC({name:$,driver_id:(t==null?void 0:t.driver_id)||null,driver_name:(t==null?void 0:t.name)||null,helper_name:(t==null?void 0:t.helper_name)||null,vehicle_plate:se||null,date:g});if(f(""),se)try{localStorage.setItem("arynik_last_vehicle_plate_v1",se)}catch{}k(),e(`/routes/${be.id}`)},q=async()=>{z(!0),B("");try{const H=t==null?void 0:t.token,$=await cu(H),se=Lp({date:g,shipments:$,driver_id:(t==null?void 0:t.driver_id)||null});B(`Created ${se.created_routes} routes  Allocated ${se.allocated_awbs} AWBs  Moldova deliverables: ${se.deliverable_in_moldova}`+(se.missing_county?`  Missing county: ${se.missing_county}`:"")+(se.outside_region?`  Outside region: ${se.outside_region}`:""))}catch(H){console.warn("Daily route generation failed",H),B("Failed to generate daily routes (check API / shipment sync).")}finally{z(!1),k(),G()}},Y=async()=>{var be,Ne,oe;if(!n||F)return;const H=Tt();if(H.includes("github.io")){B(`API URL is set to GitHub Pages (${H}). Go to Settings and set it to your backend API (FastAPI /docs).`);return}if(!window.confirm(`Sync shipments with Postis now?

This will run a FULL backfill (cost/content/address/raw payload) into the server database.
It may take several minutes.`))return;const se=t==null?void 0:t.token;if(!se){B("Not signed in.");return}P(!0),B("");try{const le=await fm(se,{mode:"full"}),ke=!!(le!=null&&le.started);B(ke?"Postis sync started. Wait 1-3 minutes, then press Generate.":"Postis sync is already running.");const ie=Date.now()+20*1e3;for(;Date.now()<ie;){await new Promise(xe=>setTimeout(xe,2500));const ve=await sh(se);if(!(ve!=null&&ve.running))break}const Ae=await sh(se);Ae!=null&&Ae.last_error&&B(`Postis sync failed: ${Ae.last_error}`)}catch(le){if(Number((be=le==null?void 0:le.response)==null?void 0:be.status)===405){const ie=Tt();B(`Sync failed (HTTP 405). Your API URL is not a backend server (likely GitHub Pages). Set Backend API URL in Settings to your FastAPI backend (/docs). Current: ${ie}`);return}const ke=((oe=(Ne=le==null?void 0:le.response)==null?void 0:Ne.data)==null?void 0:oe.detail)||(le==null?void 0:le.message)||"Failed to sync with Postis.";B(String(ke))}finally{P(!1)}},ee=H=>{window.confirm("Delete this route?")&&(rM(H),k())},M=O.useMemo(()=>{const H=new Map;return(Array.isArray(b)?b:[]).forEach($=>{const se=u2(($==null?void 0:$.county)||($==null?void 0:$.name));se&&H.set(se,$)}),H},[b]);return m.jsxs(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-violet-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-xl font-black text-gradient tracking-tight",children:"Routes"}),m.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"Create routes and allocate AWBs"})]}),m.jsx("div",{className:"w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10",children:m.jsx(wo,{size:20,className:"text-emerald-400"})})]}),m.jsxs("div",{className:"flex-1 p-4 pb-32 space-y-6 relative z-10",children:[m.jsxs("div",{className:"glass-strong p-5 rounded-3xl border-iridescent space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Daily Routes (Moldova)"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1 truncate",children:"Bacau, Iasi, Neamt, Galati, Botosani, Suceava, Vaslui"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"date",value:g,onChange:H=>v(H.target.value),className:"px-3 py-2 bg-slate-900/50 border border-slate-700/50 rounded-2xl text-white focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-xs font-bold"}),n?m.jsxs("button",{onClick:Y,disabled:F,className:`px-3 py-2 rounded-2xl bg-slate-900/40 border border-white/10 text-slate-200 text-[10px] font-black uppercase tracking-widest active:scale-95 transition-all flex items-center gap-2 ${F?"opacity-60 cursor-not-allowed":"hover:bg-white/5"}`,title:"Sync shipment details from Postis",children:[m.jsx(Yr,{size:14,className:F?"animate-spin":""}),"Sync"]}):null,m.jsxs("button",{onClick:q,disabled:I,className:`px-4 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 text-[10px] font-black uppercase tracking-widest active:scale-95 transition-all flex items-center gap-2 ${I?"opacity-60 cursor-not-allowed":""}`,title:"Create the 7 county routes and auto-allocate deliverable AWBs",children:[m.jsx(Yr,{size:14,className:I?"animate-spin":""}),"Generate"]})]})]}),R&&m.jsx("div",{className:"glass-light p-4 rounded-2xl border border-emerald-500/20 text-emerald-200 text-xs font-bold",children:R}),m.jsx("div",{className:"grid grid-cols-2 gap-3",children:la.map(H=>{const $=M.get(u2(H.name)),se=Array.isArray($==null?void 0:$.awbs)?$.awbs.length:0,be=$?GC($):"";return m.jsxs("button",{onClick:()=>$&&e(`/routes/${$.id}`),disabled:!$,className:`p-4 rounded-3xl border transition-all text-left flex items-center justify-between gap-3 ${$?"glass-strong border-white/10 hover:border-emerald-500/30":"bg-slate-900/30 border-slate-800/50 opacity-60 cursor-not-allowed"}`,title:$?"Open route":"Generate routes first",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-white font-black truncate",children:H.name}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1",children:[g,"  ",se," stops"]}),be&&m.jsx("p",{className:"text-[10px] text-emerald-200 font-black uppercase tracking-wide mt-1 truncate",children:be})]}),m.jsx("div",{className:`w-10 h-10 rounded-2xl flex items-center justify-center border ${$?"bg-emerald-500/15 border-emerald-500/20 text-emerald-300":"bg-slate-800/30 border-white/5 text-slate-500"}`,children:m.jsx(Yd,{size:18})})]},H.code)})})]}),m.jsxs("div",{className:"glass-strong p-5 rounded-3xl border-iridescent space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"New Route"}),m.jsxs("span",{className:"text-[10px] font-bold text-slate-500",children:["Driver: ",m.jsx("span",{className:"text-slate-300 font-mono",children:(t==null?void 0:t.name)||(t==null?void 0:t.driver_id)||"N/A"})]})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[m.jsx("input",{value:c,onChange:H=>f(H.target.value),placeholder:"Route label (optional)",className:"col-span-2 px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-2xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium"}),m.jsx("input",{type:"date",value:g,onChange:H=>v(H.target.value),className:"px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-2xl text-white focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium"}),m.jsx("input",{value:y,onChange:H=>C(H.target.value),placeholder:"Vehicle plate (ex: BC75ARI)",className:"col-span-3 px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-2xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium font-mono tracking-wider"})]}),m.jsxs("button",{onClick:K,className:"w-full btn-premium py-4 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white rounded-2xl font-bold shadow-lg hover:shadow-glow-md transition-all flex items-center justify-center gap-2",children:[m.jsx(xc,{size:18}),"Create Route"]})]}),i.length===0?m.jsxs("div",{className:"text-center py-16 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(wo,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No routes yet"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Create your first route above"})]}):m.jsxs("div",{className:"space-y-3",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Your Routes"}),i.map(H=>m.jsx("div",{className:"glass-strong p-5 rounded-3xl border border-white/10 hover:border-emerald-500/30 transition-all group",children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-emerald-600 to-emerald-700 flex items-center justify-center shadow-glow-sm",children:m.jsx(wo,{size:18,className:"text-white"})}),m.jsx("div",{className:"flex-1 min-w-0",children:m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-white font-black truncate",children:Xc(H)}),String((H==null?void 0:H.county)||(H==null?void 0:H.name)||"").trim()&&String((H==null?void 0:H.county)||(H==null?void 0:H.name)||"").trim()!==Xc(H)&&m.jsx("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-wide mt-1 truncate",children:String((H==null?void 0:H.county)||(H==null?void 0:H.name)||"").trim()}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1",children:[H.date||"No date","  ",Array.isArray(H.awbs)?H.awbs.length:0," stops",H.vehicle_plate?`  ${H.vehicle_plate}`:""]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>ee(H.id),className:"p-2 rounded-xl glass-light border border-white/10 text-rose-400 hover:bg-rose-500/10 active:scale-95 transition-all",title:"Delete route",children:m.jsx(qd,{size:18})}),m.jsx("button",{onClick:()=>e(`/routes/${H.id}`),className:"p-2 rounded-xl glass-light border border-white/10 text-emerald-400 hover:bg-emerald-500/10 active:scale-95 transition-all",title:"Open route",children:m.jsx(Yd,{size:18})})]})]})})]})},H.id))]})]})]})}const ZC="arynik_helpers_v1",uM=e=>{try{return localStorage.getItem(e)}catch{return null}},dM=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},Om=e=>{const t=String(e||"").trim();return t?t.replace(/\s+/g," "):""},dh=e=>Om(e).toLowerCase(),Pp=()=>{const e=uM(ZC);if(!e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t.map(Om).filter(Boolean).filter((n,i,a)=>a.findIndex(c=>dh(c)===dh(n))===i).sort((n,i)=>n.localeCompare(i,void 0,{sensitivity:"base"})):[]}catch{return[]}},hM=e=>{const t=Om(e);if(!t)return Pp();const n=Pp();if(n.some(c=>dh(c)===dh(t)))return n;const a=[...n,t].sort((c,f)=>c.localeCompare(f,void 0,{sensitivity:"base"}));return dM(ZC,JSON.stringify(a)),a},fM=(e,t,n)=>{const i=Array.isArray(e)?e.slice():[],a=String(t||"").trim().toUpperCase(),c=String(n||"").trim().toUpperCase();if(!a||!c)return i;const f=i.findIndex(C=>String(C||"").toUpperCase()===a),g=i.findIndex(C=>String(C||"").toUpperCase()===c);if(f===-1||g===-1||f===g)return i;const[v]=i.splice(f,1),y=f<g?Math.max(0,g-1):g;return i.splice(y,0,v),i},pM=({open:e,title:t,children:n,onClose:i})=>m.jsx(os,{children:e&&m.jsx(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[70] flex items-end justify-center bg-black/70 backdrop-blur-sm p-4",onClick:i,children:m.jsxs(st.div,{initial:{y:24,opacity:0},animate:{y:0,opacity:1},exit:{y:24,opacity:0},className:"w-full max-w-md glass-strong rounded-3xl border-iridescent p-5 space-y-4",onClick:a=>a.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsx("div",{className:"min-w-0",children:m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:t})}),m.jsx("button",{type:"button",onClick:i,className:"p-2 rounded-2xl glass-light border border-white/10 text-slate-300 hover:text-white active:scale-95 transition-all","aria-label":"Close",children:m.jsx(ba,{size:18})})]}),n]})})});function mM(){const{routeId:e}=L1(),t=ur(),{user:n}=or(),i=_n(n,Ka),a=O.useMemo(()=>_n(n,vo),[n]),c=O.useMemo(()=>_n(n,sm),[n]),{location:f}=vm(),[g,v]=O.useState(null),[y,C]=O.useState([]),[b,T]=O.useState(!0),[I,z]=O.useState(""),[R,B]=O.useState(""),[F,P]=O.useState("list"),[k,G]=O.useState(""),[K,q]=O.useState(""),[Y,ee]=O.useState(""),[M,H]=O.useState([]),[$,se]=O.useState(!1),[be,Ne]=O.useState(()=>Pp()),[oe,le]=O.useState(!1),[ke,ie]=O.useState(""),[Ae,ve]=O.useState(""),[xe,Le]=O.useState({}),[Ke,Fe]=O.useState({active:!1,done:0,total:0,current:""}),[ne,ae]=O.useState(null),[je,Qe]=O.useState({distance_km:null,duration_min:null}),[Ue,nt]=O.useState(null),[Ze,Rt]=O.useState({active:!1,dragging:"",over:""}),tt=O.useRef({active:!1,dragging:"",over:"",pointer_id:null,last_over:""}),yt=O.useRef(null),Xt=O.useRef(null),Vn=f?{lat:f.latitude,lon:f.longitude}:null,ut=Zc();O.useEffect(()=>{Xt.current=g},[g]);const ht=(J,_e="RON")=>{const Se=Number(J);return Number.isFinite(Se)?`${Se.toFixed(2)} ${String(_e||"RON").toUpperCase()}`:"--"};O.useEffect(()=>{const J=Rm(e);v(J)},[e]),O.useEffect(()=>{G(String((g==null?void 0:g.vehicle_plate)||"").toUpperCase()),q(String((g==null?void 0:g.driver_name)||"").trim()),ee(String((g==null?void 0:g.helper_name)||"").trim())},[g==null?void 0:g.vehicle_plate,g==null?void 0:g.driver_name,g==null?void 0:g.helper_name,g==null?void 0:g.id]),O.useEffect(()=>{if(!a)return;let J=!1;return(async()=>{se(!0);try{const _e=n==null?void 0:n.token,Se=await hm(_e);J||H(Array.isArray(Se)?Se:[])}catch(_e){console.warn("Failed to load users list",_e),J||H([])}finally{J||se(!1)}})(),()=>{J=!0}},[a,n==null?void 0:n.token]);const ft=O.useMemo(()=>{const J=new Map;return(Array.isArray(M)?M:[]).forEach(_e=>{const Se=String((_e==null?void 0:_e.driver_id)||"").trim().toUpperCase();Se&&J.set(Se,_e)}),J},[M]),_r=O.useMemo(()=>(Array.isArray(M)?M:[]).filter(J=>String((J==null?void 0:J.role)||"").trim().toLowerCase()==="driver"&&(J==null?void 0:J.active)!==!1).slice().sort((J,_e)=>String((J==null?void 0:J.driver_id)||"").localeCompare(String((_e==null?void 0:_e.driver_id)||""))),[M]),Ye=O.useMemo(()=>{const J=new Set,_e=[],Se=ze=>{const qe=String(ze||"").trim().replace(/\s+/g," ");if(!qe)return;const pt=qe.toLowerCase();J.has(pt)||(J.add(pt),_e.push(qe))};return(Array.isArray(be)?be:[]).forEach(Se),(Array.isArray(M)?M:[]).forEach(ze=>Se(ze==null?void 0:ze.helper_name)),Se(Y),_e.sort((ze,qe)=>ze.localeCompare(qe,void 0,{sensitivity:"base"}))},[be,M,Y]),St=()=>{if(!g)return;const J=String(k||"").trim().toUpperCase(),_e=eo(g.id,{vehicle_plate:J||null});if(_e&&v(_e),J)try{localStorage.setItem("arynik_last_vehicle_plate_v1",J)}catch{}},qt=()=>{if(!g)return;const J=String(K||"").trim(),_e=eo(g.id,{driver_name:J||null});_e&&v(_e)},_t=()=>{if(!g)return;const J=String(Y||"").trim(),_e=eo(g.id,{helper_name:J||null});_e&&v(_e)},Dt=J=>{if(!g)return;const _e=String(J||"").trim();ee(_e);const Se=eo(g.id,{helper_name:_e||null});Se&&v(Se)},Kt=J=>{if(!g)return;const _e=String(J||"").trim().toUpperCase(),Se=_e?ft.get(_e):null,ze={driver_id:_e||null,driver_name:((Se==null?void 0:Se.name)||"").trim()||null};!g.vehicle_plate&&(Se!=null&&Se.truck_plate)&&(ze.vehicle_plate=String(Se.truck_plate).trim().toUpperCase()),!g.helper_name&&(Se!=null&&Se.helper_name)&&(ze.helper_name=String(Se.helper_name).trim());const qe=eo(g.id,ze);qe&&v(qe)},Hn=()=>{const J=String(ke||"").trim();if(!J){ve("Helper name is required.");return}const _e=hM(J);Ne(_e),le(!1),ie(""),ve(""),Dt(J)};O.useEffect(()=>{if(!g||ft.size===0)return;const J=String((g==null?void 0:g.driver_id)||"").trim().toUpperCase();if(!J)return;const _e=ft.get(J);if(!_e)return;const Se={},ze=String((_e==null?void 0:_e.name)||"").trim(),qe=String((_e==null?void 0:_e.helper_name)||"").trim(),pt=String((_e==null?void 0:_e.truck_plate)||"").trim().toUpperCase();if(ze&&!String((g==null?void 0:g.driver_name)||"").trim()&&(Se.driver_name=ze),qe&&!String((g==null?void 0:g.helper_name)||"").trim()&&(Se.helper_name=qe),pt&&!String((g==null?void 0:g.vehicle_plate)||"").trim()&&(Se.vehicle_plate=pt),Object.keys(Se).length===0)return;const it=eo(g.id,Se);it&&v(it)},[g==null?void 0:g.id,g==null?void 0:g.driver_id,ft]);const rn=async()=>{T(!0);try{const J=n==null?void 0:n.token,_e=await cu(J);C(Array.isArray(_e)?_e:[])}catch(J){console.warn("Failed to load shipments",J),C([])}finally{T(!1)}};O.useEffect(()=>{rn()},[]);const W=O.useMemo(()=>{const J=new Map;return y.forEach(_e=>{_e!=null&&_e.awb&&J.set(String(_e.awb).toUpperCase(),_e)}),J},[y]),we=Array.isArray(g==null?void 0:g.awbs)?g.awbs:[],Ce=O.useRef(we);O.useEffect(()=>{Ce.current=we,tt.current.active&&(tt.current={active:!1,dragging:"",over:"",pointer_id:null,last_over:""},Rt({active:!1,dragging:"",over:""}),nt(null),yt.current=null)},[we.join("|")]);const Pe=Ue!==null?Ue:we,he=O.useMemo(()=>Pe.map(J=>{const _e=W.get(String(J).toUpperCase());return _e||{awb:J,status:"Unknown",recipient_name:"Unknown",delivery_address:"",locality:""}}),[Pe,W]),pe=O.useMemo(()=>he.map(J=>{const _e=String((J==null?void 0:J.awb)||"").toUpperCase(),Se=aa(J),ze=xe[_e],qe=ze&&(!ze.q||ze.q===Se)&&et(ze.lat)&&et(ze.lon),pt=et(J==null?void 0:J.latitude)?Number(J.latitude):qe?Number(ze.lat):null,it=et(J==null?void 0:J.longitude)?Number(J.longitude):qe?Number(ze.lon):null;return{...J,latitude:Number.isFinite(pt)?pt:null,longitude:Number.isFinite(it)?it:null}}),[he,xe]),Be=O.useMemo(()=>{const J=String(I||"").trim().toLowerCase();if(!J)return[];const _e=new Set(Pe.map(Se=>String(Se).toUpperCase()));return y.filter(Se=>{const ze=String((Se==null?void 0:Se.awb)||"").toLowerCase(),qe=String((Se==null?void 0:Se.recipient_name)||"").toLowerCase();return(ze.includes(J)||qe.includes(J))&&!_e.has(String((Se==null?void 0:Se.awb)||"").toUpperCase())}).slice(0,30)},[I,y,Pe]),We=async J=>{if(!g)return;const _e=Op(g.id,J,{scopeDate:!0});if(v(_e),B(""),z(""),_e&&i){const Se=String((_e==null?void 0:_e.driver_id)||"").trim();if(!Se)return;try{await mm(n==null?void 0:n.token,J,Se)}catch(ze){console.warn("Allocation API failed",ze)}}},ct=J=>{if(!g)return;const _e=iM(g.id,J);v(_e)};O.useEffect(()=>{yt.current=Ue},[Ue]);const Qn=(J,_e)=>{var qe;if(!g)return;const Se=String(J||"").trim().toUpperCase();if(!Se||tt.current.active)return;if(_e){try{_e.preventDefault()}catch{}try{_e.stopPropagation()}catch{}}const ze=Array.isArray(Pe)?Pe.slice():[];nt(ze),yt.current=ze,tt.current={active:!0,dragging:Se,over:Se,pointer_id:(_e==null?void 0:_e.pointerId)??null,last_over:Se},Rt({active:!0,dragging:Se,over:Se});try{(qe=_e==null?void 0:_e.currentTarget)!=null&&qe.setPointerCapture&&Number.isFinite(Number(_e.pointerId))&&_e.currentTarget.setPointerCapture(_e.pointerId)}catch{}},Bt=()=>{if(!tt.current.active)return;const J=yt.current,_e=Ce.current,Se=Xt.current;if(tt.current={active:!1,dragging:"",over:"",pointer_id:null,last_over:""},Rt({active:!1,dragging:"",over:""}),!Se||!Se.id){nt(null),yt.current=null;return}if(!Array.isArray(J)||!Array.isArray(_e)||J.join("|")===_e.join("|")){nt(null),yt.current=null;return}const ze=l2(Se.id,J);ze&&v(ze)};O.useEffect(()=>{if(!Ze.active)return;const J=Se=>{const ze=tt.current;if(!ze.active||ze.pointer_id!==null&&Se.pointerId!==ze.pointer_id)return;const qe=document.elementFromPoint(Se.clientX,Se.clientY),pt=qe&&qe.closest?qe.closest("[data-stop-awb]"):null,it=pt?String(pt.getAttribute("data-stop-awb")||"").trim().toUpperCase():"";it&&it!==ze.dragging&&it!==ze.last_over&&(ze.last_over=it,ze.over=it,Rt(In=>In.over===it?In:{...In,over:it}),nt(In=>{const Ut=Array.isArray(In)?In:Ce.current||[],Ht=fM(Ut,ze.dragging,it);return yt.current=Ht,Ht}))},_e=()=>Bt();return window.addEventListener("pointermove",J),window.addEventListener("pointerup",_e),window.addEventListener("pointercancel",_e),()=>{window.removeEventListener("pointermove",J),window.removeEventListener("pointerup",_e),window.removeEventListener("pointercancel",_e)}},[Ze.active]),O.useEffect(()=>{Ue!==null&&Array.isArray(Ue)&&Ue.join("|")===we.join("|")&&(nt(null),yt.current=null)},[we.join("|")]);const yn=async()=>{if(!he||he.length===0)return;const J=he.length,_e=xe||{},Se={},ze=[];let qe=0;for(const Ht of he){const At=String((Ht==null?void 0:Ht.awb)||"").toUpperCase();if(!At){qe+=1;continue}const Ve=aa(Ht);if(et(Ht==null?void 0:Ht.latitude)&&et(Ht==null?void 0:Ht.longitude)){Se[At]={lat:Number(Ht.latitude),lon:Number(Ht.longitude),ts:Date.now(),source:"shipment",q:Ve},qe+=1;continue}const Ft=_e[At];if(Ft&&(!Ft.q||Ft.q===Ve)&&et(Ft.lat)&&et(Ft.lon)){Ft.q||(Se[At]={...Ft,q:Ve}),qe+=1;continue}const De=Yc(Ve);if(De){et(De.lat)&&et(De.lon)&&(Se[At]={lat:Number(De.lat),lon:Number(De.lon),ts:Number(De.ts||Date.now()),source:"cache",q:Ve}),qe+=1;continue}ze.push({awb:At,query:Ve})}if(Object.keys(Se).length>0&&Le(Ht=>({...Ht,...Se})),ze.length===0){Fe({active:!1,done:J,total:J,current:""});return}Fe({active:!0,done:qe,total:J,current:""});let pt={},it=0,In=Date.now();const Ut=()=>{if(Object.keys(pt).length===0)return;const Ht=pt;pt={},it=0,In=Date.now(),Le(At=>({...At,...Ht}))};for(const Ht of ze){const{awb:At,query:Ve}=Ht;Fe({active:!0,done:qe,total:J,current:At});const Ft=await ch(Ve);Ft&&et(Ft.lat)&&et(Ft.lon)&&(pt[At]={lat:Number(Ft.lat),lon:Number(Ft.lon),ts:Date.now(),source:"geocode",q:Ve},it+=1),qe+=1;const De=Date.now()-In;(it>=3||De>300)&&Ut()}Ut(),Fe({active:!1,done:qe,total:J,current:""})},mt=async J=>{const _e=Array.isArray(J)?J:[],Se=[],ze=ut&&et(ut.lat)&&et(ut.lon)?{lat:Number(ut.lat),lon:Number(ut.lon)}:null;if(ze&&Se.push(ze),_e.forEach(Ut=>{et(Ut==null?void 0:Ut.latitude)&&et(Ut==null?void 0:Ut.longitude)&&Se.push({lat:Number(Ut.latitude),lon:Number(Ut.longitude)})}),ze&&Se.length>1&&Se.push(ze),Se.length<2){ae(null),Qe({distance_km:null,duration_min:null});return}const qe=await k6(Se);qe!=null&&qe.geometry?ae(qe.geometry):ae(null);const pt=Number((qe==null?void 0:qe.distance_m)||0),it=Number((qe==null?void 0:qe.duration_s)||0);if(pt>0){Qe({distance_km:Math.round(pt/1e3*10)/10,duration_min:it>0?Math.round(it/60):null});return}let In=0;for(let Ut=0;Ut<Se.length-1;Ut+=1)In+=ti(Se[Ut],Se[Ut+1]);Qe({distance_km:Math.round(In*10)/10,duration_min:null})};O.useEffect(()=>{F==="map"&&(async()=>await yn())()},[F,we.join("|")]),O.useEffect(()=>{F==="map"&&(Ke.active||Ze.active||mt(pe))},[F,Ke.active,Ze.active,JSON.stringify(pe.map(J=>[J.awb,J.latitude,J.longitude]))]);const Jt=()=>{if(!g)return;const J=pe.map(it=>({awb:String((it==null?void 0:it.awb)||"").toUpperCase(),lat:Number(it==null?void 0:it.latitude),lon:Number(it==null?void 0:it.longitude)})).filter(it=>it.awb&&et(it.lat)&&et(it.lon));if(J.length<2)return;const _e=ut&&et(ut.lat)&&et(ut.lon)?{lat:Number(ut.lat),lon:Number(ut.lon)}:{lat:J[0].lat,lon:J[0].lon},ze=Rp(_e,J).map(it=>it.awb),qe=we.filter(it=>!ze.includes(String(it).toUpperCase())),pt=l2(g.id,[...ze,...qe]);v(pt)},$n=()=>{const J=pe.filter(pt=>et(pt==null?void 0:pt.latitude)&&et(pt==null?void 0:pt.longitude)).map(pt=>`${Number(pt.latitude)},${Number(pt.longitude)}`);if(J.length===0)return;const _e=ut&&et(ut.lat)&&et(ut.lon),Se=_e?`${Number(ut.lat)},${Number(ut.lon)}`:J[0],ze=_e&&J.length<=23,qe=new URL("https://www.google.com/maps/dir/");if(qe.searchParams.set("api","1"),qe.searchParams.set("origin",Se),ze)qe.searchParams.set("destination",Se),qe.searchParams.set("waypoints",J.join("|"));else{const pt=J[J.length-1];qe.searchParams.set("destination",pt);const it=_e?J.slice(0,-1):J.slice(1,-1);it.length>0&&qe.searchParams.set("waypoints",it.join("|"))}window.open(qe.toString(),"_blank","noopener,noreferrer")};return g?m.jsxs(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-violet-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"sticky top-0 z-40 glass-strong backdrop-blur-xl border-b border-white/10 pb-2 shadow-sm",children:[m.jsxs("div",{className:"p-4 flex items-center gap-4",children:[m.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-xl glass-light text-slate-300 hover:text-white transition-colors border border-white/10",children:m.jsx(Ms,{})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h1",{className:"font-black text-xl text-gradient tracking-tight truncate",children:Xc(g)}),m.jsxs("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wide mt-1",children:[g.date,"  ",we.length," stops",g.county?`  ${g.county}`:g.name?`  ${g.name}`:""]})]}),m.jsxs("div",{className:"flex glass-strong p-1 rounded-xl border border-white/10",children:[m.jsx("button",{onClick:()=>P("list"),className:`p-2 rounded-lg transition-all ${F==="list"?"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:m.jsx(hb,{size:20})}),m.jsx("button",{onClick:()=>P("map"),className:`p-2 rounded-lg transition-all ${F==="map"?"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:m.jsx(mb,{size:20})})]})]}),m.jsxs("div",{className:"px-4 pb-2 space-y-3",children:[m.jsxs("div",{className:"glass-strong rounded-2xl border border-white/10 p-4 space-y-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center",children:m.jsx(rm,{size:18,className:"text-emerald-300"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[9px] uppercase font-black text-slate-500 tracking-[0.2em]",children:"Truck & Crew"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold mt-1 truncate",children:"Route title = plate + driver (+ helper)"})]}),$&&m.jsx("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide",children:"Loading..."})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("div",{className:"glass-light rounded-2xl border border-white/10 p-3",children:[m.jsx("p",{className:"text-[9px] uppercase font-black text-slate-500 tracking-[0.2em] mb-1",children:"Plate"}),m.jsx("input",{value:k,onChange:J=>G(J.target.value.toUpperCase()),onBlur:St,placeholder:"BC75ARI",className:"w-full bg-transparent outline-none text-white font-mono text-sm tracking-wider placeholder-slate-600"})]}),m.jsxs("div",{className:"glass-light rounded-2xl border border-white/10 p-3",children:[m.jsx("p",{className:"text-[9px] uppercase font-black text-slate-500 tracking-[0.2em] mb-1",children:"Driver"}),a?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("select",{value:String((g==null?void 0:g.driver_id)||"").trim().toUpperCase(),onChange:J=>Kt(J.target.value),className:"w-full bg-transparent outline-none text-white text-xs font-bold",children:[m.jsx("option",{value:"",children:"Unassigned"}),(()=>{const J=String((g==null?void 0:g.driver_id)||"").trim().toUpperCase(),_e=J&&_r.some(Se=>String((Se==null?void 0:Se.driver_id)||"").trim().toUpperCase()===J);return J&&!_e?m.jsx("option",{value:J,children:J}):null})(),_r.map(J=>m.jsxs("option",{value:String(J.driver_id||"").trim().toUpperCase(),children:[String(J.driver_id||"").trim().toUpperCase(),"  ",String(J.name||"").trim()||"Unnamed"]},J.driver_id))]}),c&&m.jsx("button",{type:"button",onClick:()=>t(`/users?create=1&role=Driver&returnTo=${encodeURIComponent(`/routes/${e}`)}`),className:"p-2 rounded-xl glass-strong border border-white/10 text-emerald-300 hover:bg-emerald-500/10 active:scale-95 transition-all",title:"Add driver","aria-label":"Add driver",children:m.jsx(xc,{size:16})})]}):m.jsx("input",{value:K,onChange:J=>q(J.target.value),onBlur:qt,placeholder:g!=null&&g.driver_id?`Driver name (for ${g.driver_id})`:"Driver name",className:"w-full bg-transparent outline-none text-white text-sm font-bold placeholder-slate-600"})]}),m.jsxs("div",{className:"glass-light rounded-2xl border border-white/10 p-3 col-span-2",children:[m.jsx("p",{className:"text-[9px] uppercase font-black text-slate-500 tracking-[0.2em] mb-1",children:"Helper"}),a?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("select",{value:String(Y||"").trim(),onChange:J=>Dt(J.target.value),className:"w-full bg-transparent outline-none text-white text-xs font-bold",children:[m.jsx("option",{value:"",children:"Unassigned"}),(()=>{const J=String(Y||"").trim(),_e=J&&Ye.some(Se=>String(Se||"").trim().toLowerCase()===J.toLowerCase());return J&&!_e?m.jsx("option",{value:J,children:J}):null})(),Ye.map(J=>m.jsx("option",{value:J,children:J},String(J).toLowerCase()))]}),c&&m.jsx("button",{type:"button",onClick:()=>{le(!0),ie(""),ve("")},className:"p-2 rounded-xl glass-strong border border-white/10 text-emerald-300 hover:bg-emerald-500/10 active:scale-95 transition-all",title:"Add helper","aria-label":"Add helper",children:m.jsx(xc,{size:16})})]}):m.jsx("input",{value:Y,onChange:J=>ee(J.target.value),onBlur:_t,placeholder:"Helper name (optional)",className:"w-full bg-transparent outline-none text-white text-sm font-bold placeholder-slate-600"})]})]})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[m.jsx("input",{value:R,onChange:J=>B(J.target.value),placeholder:"Add AWB...",className:"col-span-2 w-full px-4 py-3.5 glass-strong rounded-2xl outline-none focus:ring-2 focus:ring-emerald-500/30 border border-white/10 text-sm font-medium text-white placeholder-slate-500 transition-all"}),m.jsxs("button",{onClick:()=>We(R),className:"btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white rounded-2xl font-bold shadow-lg hover:shadow-glow-md transition-all flex items-center justify-center gap-2",children:[m.jsx(xc,{size:18}),"Add"]})]}),m.jsxs("div",{className:"relative group",children:[m.jsx(Ls,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-emerald-400 transition-colors z-10",size:18}),m.jsx("input",{type:"text",placeholder:"Search shipments to add...",className:"w-full pl-12 pr-4 py-3.5 glass-strong rounded-2xl outline-none focus:ring-2 focus:ring-emerald-500/30 border border-white/10 text-sm font-medium text-white placeholder-slate-500 transition-all",value:I,onChange:J=>z(J.target.value)})]}),I&&Be.length>0&&m.jsx("div",{className:"glass-strong rounded-2xl border border-white/10 overflow-hidden",children:Be.map(J=>m.jsxs("button",{onClick:()=>We(J.awb),className:"w-full p-4 flex items-center gap-3 hover:bg-white/5 transition-all text-left border-b border-white/5 last:border-b-0",children:[m.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center",children:m.jsx(wo,{size:16,className:"text-emerald-400"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[10px] font-mono font-black text-slate-500 uppercase tracking-widest truncate",children:J.awb}),m.jsx("p",{className:"text-sm font-bold text-white truncate",children:J.recipient_name||"Unknown"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate",children:J.delivery_address||J.locality||""})]}),m.jsx("span",{className:"text-[10px] font-black text-emerald-400 uppercase tracking-wide",children:"Add"})]},J.awb))})]})]}),m.jsx("div",{className:"flex-1 p-4 space-y-3 pb-32 relative z-10",children:F==="map"?m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"glass-strong rounded-2xl border border-white/10 p-4 flex items-center justify-between gap-2",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Route Map"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate",children:Ke.active?`Geocoding ${Ke.done}/${Ke.total} (${Ke.current})`:'Tap "Optimize" for a quick route order'}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-bold mt-1",children:[je.distance_km?`~${je.distance_km} km`:"Distance: N/A",je.duration_min?`  ~${je.duration_min} min`:""]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:yn,className:`p-2 rounded-xl glass-light border border-white/10 text-emerald-400 hover:bg-emerald-500/10 active:scale-95 transition-all ${Ke.active?"opacity-60 cursor-not-allowed":""}`,disabled:Ke.active,title:"Geocode stops",children:m.jsx(Yr,{size:18,className:Ke.active?"animate-spin":""})}),m.jsx("button",{onClick:Jt,className:"p-2 rounded-xl glass-light border border-white/10 text-amber-400 hover:bg-amber-500/10 active:scale-95 transition-all",title:"Optimize order",children:m.jsx(b8,{size:18})}),m.jsx("button",{onClick:$n,className:"p-2 rounded-xl glass-light border border-white/10 text-slate-200 hover:bg-white/10 active:scale-95 transition-all",title:"Open in Google Maps",children:m.jsx(l8,{size:18})})]})]}),m.jsx("div",{className:"h-[70vh] w-full rounded-3xl overflow-hidden border-iridescent shadow-2xl",children:m.jsx(Tm,{shipments:pe,currentLocation:Vn,originLocation:ut,routeGeometry:ne,showStopNumbers:!0})}),m.jsxs("div",{className:"glass-strong rounded-2xl border border-white/10 p-4",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Stops"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate",children:"Drag the handle to reorder stops. Numbers on the map update automatically."})]}),Ze.active&&m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-amber-300",children:"Reordering"})]}),m.jsx("div",{className:"mt-3 space-y-2 max-h-[32vh] overflow-y-auto",children:he.map((J,_e)=>{const Se=String((J==null?void 0:J.awb)||"").toUpperCase(),ze=Ze.active&&Ze.dragging===Se,qe=Ze.active&&Ze.over===Se;return m.jsxs("div",{"data-stop-awb":Se,className:`glass-light rounded-2xl border p-3 flex items-center gap-3 ${qe?"border-emerald-500/40":"border-white/10"} ${ze?"opacity-70":""}`,children:[m.jsx("button",{type:"button",className:"p-2 rounded-xl glass-strong border border-white/10 text-slate-200 active:scale-95 transition-all cursor-grab touch-none",onPointerDown:pt=>Qn(Se,pt),title:"Drag to reorder","aria-label":"Drag to reorder",children:m.jsx(u8,{size:18})}),m.jsx("div",{className:"w-9 h-9 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center text-emerald-300 font-black",children:_e+1}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[10px] font-mono font-black text-slate-500 uppercase tracking-widest truncate",children:Se}),m.jsx("p",{className:"text-sm font-bold text-white truncate mt-1",children:J.recipient_name||"Unknown"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate mt-1",children:J.delivery_address||J.locality||""})]}),m.jsx("button",{onClick:()=>ct(Se),className:"p-2 rounded-xl glass-light border border-white/10 text-rose-400 hover:bg-rose-500/10 active:scale-95 transition-all",title:"Remove from route",children:m.jsx(qd,{size:18})})]},Se||_e)})})]})]}):m.jsx(os,{mode:"wait",children:he.length===0?m.jsxs(st.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(wo,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No stops yet"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Add an AWB above to allocate it to this route"})]}):m.jsx("div",{className:"space-y-3",children:he.map((J,_e)=>{var Se,ze;return m.jsx(st.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:_e*.02},className:"glass-strong p-5 rounded-3xl border border-white/10",children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center text-emerald-400 font-black",children:_e+1}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[10px] font-mono font-black text-slate-500 uppercase tracking-widest truncate",children:J.awb}),m.jsx("p",{className:"text-sm font-bold text-white truncate mt-1",children:J.recipient_name||"Unknown"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate mt-1",children:J.delivery_address||J.locality||""}),(()=>{var it,In,Ut,Ht,At,Ve,Ft,De,br,ci,wn,Ot;const qe=J.content_description||((it=J==null?void 0:J.raw_data)==null?void 0:it.contentDescription)||((In=J==null?void 0:J.raw_data)==null?void 0:In.contents)||((Ut=J==null?void 0:J.raw_data)==null?void 0:Ut.content)||((Ht=J==null?void 0:J.raw_data)==null?void 0:Ht.packingList)||((At=J==null?void 0:J.raw_data)==null?void 0:At.packingListNumber)||((Ve=J==null?void 0:J.raw_data)==null?void 0:Ve.packingListId)||((De=(Ft=J==null?void 0:J.raw_data)==null?void 0:Ft.additionalServices)==null?void 0:De.packingList)||((ci=(br=J==null?void 0:J.raw_data)==null?void 0:br.additionalServices)==null?void 0:ci.packingListNumber)||((Ot=(wn=J==null?void 0:J.raw_data)==null?void 0:wn.additionalServices)==null?void 0:Ot.packingListId)||"",pt=String(qe||"").trim();return pt?m.jsx("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:pt}):null})(),m.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:[Number.isFinite(Number(J==null?void 0:J.number_of_parcels))?Number(J.number_of_parcels):((Se=J==null?void 0:J.raw_data)==null?void 0:Se.numberOfDistinctBarcodes)||((ze=J==null?void 0:J.raw_data)==null?void 0:ze.numberOfParcels)||1," ","pkg  ",ht(J.payment_amount??J.shipping_cost??J.estimated_shipping_cost,J.currency||"RON")]})]}),m.jsx("button",{onClick:()=>ct(J.awb),className:"p-2 rounded-xl glass-light border border-white/10 text-rose-400 hover:bg-rose-500/10 active:scale-95 transition-all",title:"Remove from route",children:m.jsx(qd,{size:18})})]})},`${J.awb}-${_e}`)})})})}),m.jsx(pM,{open:oe,title:"Add Helper",onClose:()=>le(!1),children:m.jsxs("div",{className:"space-y-3",children:[m.jsx("input",{value:ke,onChange:J=>{ie(J.target.value),ve("")},placeholder:"Helper name (ex: Andrei Popescu)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"}),Ae&&m.jsx("div",{className:"text-xs font-bold text-rose-200",children:Ae}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{type:"button",onClick:()=>le(!1),className:"flex-1 px-4 py-3 rounded-2xl glass-light border border-white/10 text-slate-200 text-xs font-black uppercase tracking-widest hover:bg-white/10 active:scale-[0.99] transition-all",children:"Cancel"}),m.jsx("button",{type:"button",onClick:Hn,className:"flex-1 px-4 py-3 rounded-2xl bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white text-xs font-black uppercase tracking-widest active:scale-[0.99] transition-all",children:"Add"})]})]})})]}):m.jsx("div",{className:"min-h-screen flex items-center justify-center text-slate-400",children:"Route not found."})}const Kl=(e,t)=>{const n=Number(e)||0,i=Number(t)||0;return i?Math.round(n/i*100):0},Ql=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString()},Tr=(e,t)=>String(e||"").toLowerCase().includes(t),On=({label:e,value:t,tone:n="slate"})=>{const i={slate:"bg-slate-500/15 text-slate-300 border-white/10",emerald:"bg-emerald-500/15 text-emerald-300 border-emerald-400/20",rose:"bg-rose-500/15 text-rose-300 border-rose-400/20",violet:"bg-violet-500/15 text-violet-300 border-violet-400/20",amber:"bg-amber-500/15 text-amber-200 border-amber-400/20"};return m.jsxs("div",{className:`px-3 py-2 rounded-2xl border ${i[n]||i.slate}`,children:[m.jsx("div",{className:"text-[9px] font-black uppercase tracking-widest opacity-80",children:e}),m.jsx("div",{className:"text-sm font-black mt-0.5",children:t})]})},Gu=({active:e,icon:t,label:n,onClick:i})=>m.jsxs("button",{type:"button",onClick:i,className:`flex-1 p-3 rounded-2xl border transition-all flex items-center justify-center gap-2 ${e?"bg-gradient-to-br from-violet-600/30 to-purple-600/10 border-violet-400/30 text-white":"bg-slate-900/30 border-white/10 text-slate-300 hover:bg-white/5"}`,children:[m.jsx(t,{size:16,className:e?"text-violet-200":"text-slate-400"}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:n})]});function gM(){const{user:e}=or(),t=(e==null?void 0:e.token)||localStorage.getItem("token"),n=O.useMemo(()=>["Admin","Manager","Dispatcher","Support","Finance"].includes(e==null?void 0:e.role),[e==null?void 0:e.role]),[i,a]=O.useState(n?"all":"self"),[c,f]=O.useState("trucks"),[g,v]=O.useState(""),[y,C]=O.useState(null),[b,T]=O.useState(!0),[I,z]=O.useState("");O.useEffect(()=>{n||a("self")},[n]);const R=async()=>{var M,H;T(!0),z("");try{const $=await $b(t,{scope:i});C($)}catch($){const se=((H=(M=$==null?void 0:$.response)==null?void 0:M.data)==null?void 0:H.detail)||($==null?void 0:$.message)||"Failed to load analytics";z(String(se))}finally{T(!1)}};O.useEffect(()=>{R()},[t,i]);const B=O.useMemo(()=>String(g||"").trim().toLowerCase(),[g]),F=O.useMemo(()=>{const M=Array.isArray(y==null?void 0:y.trucks)?y.trucks:[];return B?M.filter(H=>Tr(H==null?void 0:H.truck_plate,B)||Tr(H==null?void 0:H.truck_phone,B)||Array.isArray(H==null?void 0:H.drivers)&&H.drivers.some($=>Tr($==null?void 0:$.name,B)||Tr($==null?void 0:$.driver_id,B))):M},[y==null?void 0:y.trucks,B]),P=O.useMemo(()=>{const M=Array.isArray(y==null?void 0:y.drivers)?y.drivers:[];return B?M.filter(H=>Tr(H==null?void 0:H.name,B)||Tr(H==null?void 0:H.driver_id,B)||Tr(H==null?void 0:H.truck_plate,B)||Tr(H==null?void 0:H.truck_phone,B)||Tr(H==null?void 0:H.role,B)):M},[y==null?void 0:y.drivers,B]),k=O.useMemo(()=>{const M=Array.isArray(y==null?void 0:y.awbs)?y.awbs:[];return B?M.filter(H=>Tr(H==null?void 0:H.awb,B)||Tr(H==null?void 0:H.status,B)||Tr(H==null?void 0:H.driver_id,B)):M},[y==null?void 0:y.awbs,B]),G=O.useMemo(()=>{const M=Array.isArray(y==null?void 0:y.events)?y.events:[];return B?M.filter(H=>Tr(H==null?void 0:H.event_id,B)||Tr(H==null?void 0:H.label,B)||Tr(H==null?void 0:H.description,B)):M},[y==null?void 0:y.events,B]),K=(y==null?void 0:y.totals)||{},q=Number(K==null?void 0:K.updates_total)||0,Y=Number(K==null?void 0:K.updates_success)||0,ee=Number(K==null?void 0:K.shipments_total)||0;return m.jsxs(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,y:-20},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-glow-md",children:m.jsx(lb,{size:20,className:"text-white"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-lg font-black text-white leading-none",children:"Statistics"}),m.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mt-1",children:y!=null&&y.generated_at?`Updated ${Ql(y.generated_at)}`:"Mobile analytics"})]})]}),m.jsx("button",{type:"button",onClick:R,className:"w-11 h-11 rounded-2xl glass-light border border-white/10 flex items-center justify-center hover:bg-white/5 transition-all","aria-label":"Refresh analytics",children:m.jsx(Yr,{size:18,className:b?"animate-spin text-slate-300":"text-slate-300"})})]}),m.jsxs("div",{className:"mt-5 flex items-center gap-3",children:[m.jsx(On,{label:"Shipments",value:ee,tone:"violet"}),m.jsx(On,{label:"Updates",value:q,tone:"slate"}),m.jsx(On,{label:"Success",value:`${Kl(Y,q)}%`,tone:"emerald"})]}),m.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[m.jsx("div",{className:"flex-1",children:m.jsxs("div",{className:"relative",children:[m.jsx(Ls,{size:16,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500"}),m.jsx("input",{value:g,onChange:M=>v(M.target.value),placeholder:"Search truck, driver, AWB, ESCH...",className:"w-full pl-11 pr-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-500 focus:outline-none focus:border-violet-500/40 focus:ring-2 focus:ring-violet-500/20 transition-all text-sm font-medium"})]})}),n?m.jsxs("div",{className:"p-1 rounded-2xl bg-slate-900/40 border border-white/10 flex",children:[m.jsx("button",{type:"button",onClick:()=>a("self"),className:`px-3 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${i==="self"?"bg-white/10 text-white":"text-slate-400 hover:text-slate-200"}`,children:"My"}),m.jsx("button",{type:"button",onClick:()=>a("all"),className:`px-3 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${i==="all"?"bg-white/10 text-white":"text-slate-400 hover:text-slate-200"}`,children:"All"})]}):null]}),m.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[m.jsx(Gu,{active:c==="trucks",icon:rm,label:"Trucks",onClick:()=>f("trucks")}),m.jsx(Gu,{active:c==="drivers",icon:_a,label:"Drivers",onClick:()=>f("drivers")}),m.jsx(Gu,{active:c==="awbs",icon:Os,label:"AWB",onClick:()=>f("awbs")}),m.jsx(Gu,{active:c==="events",icon:ob,label:"ESCH",onClick:()=>f("events")})]})]}),m.jsx("main",{className:"flex-1 p-6 pb-32 relative z-10",children:m.jsx(os,{mode:"wait",children:b?m.jsxs(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"glass-strong rounded-3xl border-iridescent p-8 flex items-center justify-center gap-3",children:[m.jsx(fn,{className:"animate-spin text-violet-300",size:20}),m.jsx("span",{className:"text-sm font-black text-white uppercase tracking-wider",children:"Loading analytics"})]},"loading"):I?m.jsx(st.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"bg-rose-500/10 border border-rose-500/30 text-rose-300 px-6 py-5 rounded-3xl font-bold",children:I},"error"):m.jsxs(st.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4",children:[c==="trucks"?m.jsx(m.Fragment,{children:F.length===0?m.jsx("div",{className:"text-slate-400 font-bold text-sm",children:"No trucks found."}):F.map(M=>{const H=Number(M==null?void 0:M.updates_total)||0,$=Number(M==null?void 0:M.updates_success)||0,se=(M==null?void 0:M.shipments_by_bucket)||{};return m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-5",children:[m.jsxs("div",{className:"flex items-start justify-between gap-4",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Truck"}),m.jsx("div",{className:"text-xl font-black text-white truncate mt-1",children:(M==null?void 0:M.truck_plate)||"Unassigned"}),m.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["Phone: ",(M==null?void 0:M.truck_phone)||"--","  Drivers: ",Array.isArray(M==null?void 0:M.drivers)?M.drivers.length:0]})]}),m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("div",{className:"p-3 rounded-2xl bg-emerald-500/10 border border-emerald-400/20",children:m.jsx(Bh,{size:18,className:"text-emerald-300"})})})]}),m.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[m.jsx(On,{label:"Shipments",value:(M==null?void 0:M.shipments_total)||0,tone:"violet"}),m.jsx(On,{label:"Delivered",value:(se==null?void 0:se.delivered)||0,tone:"emerald"}),m.jsx(On,{label:"Active",value:(se==null?void 0:se.active)||0,tone:"amber"})]}),m.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-3",children:[m.jsx(On,{label:"Updates",value:H,tone:"slate"}),m.jsx(On,{label:"Success",value:`${Kl($,H)}%`,tone:"emerald"}),m.jsx(On,{label:"Last",value:M!=null&&M.last_update?Ql(M.last_update):"--",tone:"slate"})]})]},(M==null?void 0:M.truck_plate)||"unassigned")})}):null,c==="drivers"?m.jsx(m.Fragment,{children:P.length===0?m.jsx("div",{className:"text-slate-400 font-bold text-sm",children:"No drivers found."}):P.map(M=>{const H=Number(M==null?void 0:M.updates_total)||0,$=Number(M==null?void 0:M.updates_success)||0,se=(M==null?void 0:M.shipments_by_bucket)||{};return m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-5",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Driver"}),m.jsx("div",{className:"text-xl font-black text-white truncate mt-1",children:(M==null?void 0:M.name)||(M==null?void 0:M.username)||(M==null?void 0:M.driver_id)}),m.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["ID: ",M==null?void 0:M.driver_id,"  ",(M==null?void 0:M.role)||"Role","  Truck: ",(M==null?void 0:M.truck_plate)||"--"]})]})}),m.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[m.jsx(On,{label:"Shipments",value:(M==null?void 0:M.shipments_total)||0,tone:"violet"}),m.jsx(On,{label:"Delivered",value:(se==null?void 0:se.delivered)||0,tone:"emerald"}),m.jsx(On,{label:"Active",value:(se==null?void 0:se.active)||0,tone:"amber"})]}),m.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-3",children:[m.jsx(On,{label:"Updates",value:H,tone:"slate"}),m.jsx(On,{label:"Success",value:`${Kl($,H)}%`,tone:"emerald"}),m.jsx(On,{label:"Last",value:M!=null&&M.last_update?Ql(M.last_update):"--",tone:"slate"})]}),m.jsxs("div",{className:"mt-3 text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["Last login: ",M!=null&&M.last_login?Ql(M.last_login):"--","  Truck phone: ",(M==null?void 0:M.truck_phone)||"--"]})]},M==null?void 0:M.driver_id)})}):null,c==="awbs"?m.jsx(m.Fragment,{children:k.length===0?m.jsx("div",{className:"text-slate-400 font-bold text-sm",children:"No AWBs found."}):k.map(M=>{const H=Number(M==null?void 0:M.updates_total)||0,$=Number(M==null?void 0:M.updates_success)||0;return m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-5",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"AWB"}),m.jsx("div",{className:"text-lg font-black text-white truncate mt-1",children:M==null?void 0:M.awb}),m.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["Status: ",(M==null?void 0:M.status)||"--","  Driver: ",(M==null?void 0:M.driver_id)||"--"]})]})}),m.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[m.jsx(On,{label:"Updates",value:H,tone:"slate"}),m.jsx(On,{label:"Success",value:`${Kl($,H)}%`,tone:"emerald"}),m.jsx(On,{label:"Last",value:M!=null&&M.last_update?Ql(M.last_update):"--",tone:"slate"})]}),m.jsxs("div",{className:"mt-3 text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["ESCH: ",(M==null?void 0:M.last_event_id)||"--","  Outcome: ",(M==null?void 0:M.last_outcome)||"--"]})]},M==null?void 0:M.awb)})}):null,c==="events"?m.jsx(m.Fragment,{children:G.length===0?m.jsx("div",{className:"text-slate-400 font-bold text-sm",children:"No ESCH events found."}):G.map(M=>{const H=Number(M==null?void 0:M.total)||0,$=Number(M==null?void 0:M.success)||0;return m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-5",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"ESCH"}),m.jsxs("div",{className:"text-lg font-black text-white truncate mt-1",children:[M==null?void 0:M.event_id," ",M!=null&&M.label?` ${M.label}`:""]}),M!=null&&M.description?m.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:M.description}):null]})}),m.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[m.jsx(On,{label:"Total",value:H,tone:"slate"}),m.jsx(On,{label:"Success",value:`${Kl($,H)}%`,tone:"emerald"}),m.jsx(On,{label:"Failed",value:Number(M==null?void 0:M.failed)||0,tone:"rose"})]})]},M==null?void 0:M.event_id)})}):null]},c)})})]})}function xM(){const{user:e}=or(),t=(e==null?void 0:e.token)||localStorage.getItem("token"),[n,i]=O.useState([]),[a,c]=O.useState(!0),[f,g]=O.useState(null),[v,y]=O.useState(""),C=O.useMemo(()=>Array.isArray(n)?n.filter(I=>!(I!=null&&I.read_at)).length:0,[n]),b=async()=>{var I,z;c(!0),y("");try{const R=await gm(t,{limit:100,unread_only:!1});i(Array.isArray(R)?R:[])}catch(R){y(String(((z=(I=R==null?void 0:R.response)==null?void 0:I.data)==null?void 0:z.detail)||(R==null?void 0:R.message)||"Failed to load notifications")),i([])}finally{c(!1)}};O.useEffect(()=>{b()},[]);const T=async I=>{var R,B;const z=I;if(z){g(z);try{const F=await oh(t,z);i(P=>Array.isArray(P)?P.map(k=>String(k==null?void 0:k.id)===String(z)?F:k):P)}catch(F){y(String(((B=(R=F==null?void 0:F.response)==null?void 0:R.data)==null?void 0:B.detail)||(F==null?void 0:F.message)||"Failed to mark read"))}finally{g(null)}}};return m.jsxs(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsxs("h1",{className:"text-xl font-black text-gradient tracking-tight flex items-center gap-2",children:[m.jsx(Hc,{size:18,className:"text-violet-300"}),"Notifications"]}),m.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1 truncate",children:[C," unread"]})]}),m.jsx("button",{type:"button",onClick:b,className:`w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10 text-slate-200 hover:bg-white/5 active:scale-95 transition-all ${a?"opacity-60 cursor-not-allowed":""}`,disabled:a,"aria-label":"Refresh",children:m.jsx(Yr,{size:18,className:a?"animate-spin":""})})]}),m.jsxs("main",{className:"flex-1 p-4 pb-32 space-y-3 relative z-10",children:[v?m.jsx("div",{className:"glass-strong p-4 rounded-2xl border border-rose-500/30 text-rose-300 text-sm font-bold",children:v}):null,a?m.jsxs("div",{className:"glass-strong p-6 rounded-3xl border border-white/10 flex items-center gap-3 text-slate-300",children:[m.jsx(fn,{className:"animate-spin",size:18}),m.jsx("span",{className:"text-sm font-bold",children:"Loading..."})]}):null,!a&&(!n||n.length===0)?m.jsxs("div",{className:"text-center py-16 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(Hc,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No notifications yet"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Allocation updates will appear here"})]}):null,!a&&Array.isArray(n)?n.map(I=>{const z=!(I!=null&&I.read_at);return m.jsx("div",{className:`glass-strong p-5 rounded-3xl border transition-all ${z?"border-emerald-500/30":"border-white/10 opacity-90"}`,children:m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-sm font-black text-white truncate",children:I.title||"Notification"}),m.jsx("p",{className:"text-xs text-slate-300 font-medium mt-1 break-words",children:I.body||""}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-2",children:[I.created_at?new Date(I.created_at).toLocaleString():"",I.awb?`  ${String(I.awb).toUpperCase()}`:""]})]}),z?m.jsx("button",{type:"button",onClick:()=>T(I.id),disabled:String(f)===String(I.id),className:`p-2 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95 transition-all ${String(f)===String(I.id)?"opacity-60 cursor-not-allowed":""}`,title:"Mark as read",children:m.jsx(ub,{size:18})}):null]})},I.id)}):null]})]})}const vc="Driver",Zu=()=>({driver_id:"",name:"",username:"",password:"",role:vc,active:!0,truck_plate:"",phone_number:"",helper_name:""}),i0=e=>String(e||"").trim()||vc,d2=({open:e,title:t,children:n,onClose:i})=>m.jsx(os,{children:e&&m.jsx(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-end justify-center bg-black/70 backdrop-blur-sm p-4",onClick:i,children:m.jsxs(st.div,{initial:{y:24,opacity:0},animate:{y:0,opacity:1},exit:{y:24,opacity:0},className:"w-full max-w-md glass-strong rounded-3xl border-iridescent p-5 space-y-4",onClick:a=>a.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsx("div",{className:"min-w-0",children:m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:t})}),m.jsx("button",{type:"button",onClick:i,className:"p-2 rounded-2xl glass-light border border-white/10 text-slate-300 hover:text-white active:scale-95 transition-all","aria-label":"Close",children:m.jsx(ba,{size:18})})]}),n]})})});function yM(){const e=ur(),t=ko(),{user:n}=or(),i=(n==null?void 0:n.token)||localStorage.getItem("token"),a=O.useMemo(()=>_n(n,sm),[n]),c=O.useMemo(()=>["Admin","Manager","Dispatcher","Support"].includes(String((n==null?void 0:n.role)||"").trim()),[n==null?void 0:n.role]),f=O.useRef(!1),g=O.useMemo(()=>{const ne=new URLSearchParams(t.search),ae=String(ne.get("returnTo")||"").trim();return ae.startsWith("/")?ae:""},[t.search]),[v,y]=O.useState(!0),[C,b]=O.useState(!1),[T,I]=O.useState(""),[z,R]=O.useState(""),[B,F]=O.useState(""),[P,k]=O.useState([]),[G,K]=O.useState([]),[q,Y]=O.useState(""),[ee,M]=O.useState(!1),[H,$]=O.useState(Zu),[se,be]=O.useState(!1),[Ne,oe]=O.useState(null),[le,ke]=O.useState({name:"",username:"",password:"",role:vc,active:!0,truck_plate:"",phone_number:"",helper_name:""}),ie=async()=>{var ne,ae;y(!0),I("");try{const[je,Qe]=await Promise.all([Jb(i).catch(()=>null),hm(i)]),Ue=Array.isArray(je)?je:[];k(Ue),K(Array.isArray(Qe)?Qe:[])}catch(je){const Qe=((ae=(ne=je==null?void 0:je.response)==null?void 0:ne.data)==null?void 0:ae.detail)||(je==null?void 0:je.message)||"Failed to load users";I(String(Qe))}finally{y(!1)}};O.useEffect(()=>{ie()},[]),O.useEffect(()=>{if(f.current)return;const ne=new URLSearchParams(t.search);if(!["1","true","yes","on"].includes(String(ne.get("create")||"").toLowerCase())){f.current=!0;return}if(!a){f.current=!0;return}const je=String(ne.get("role")||"").trim();$(Qe=>({...Zu(),role:je||Qe.role||vc})),M(!0),f.current=!0},[t.search,a]);const Ae=O.useMemo(()=>P.length>0?P.map(ne=>ne==null?void 0:ne.role).filter(Boolean):[vc,"Admin","Manager","Dispatcher","Warehouse","Support","Finance","Viewer","Recipient"],[P]),ve=O.useMemo(()=>{const ne=String(q||"").trim().toLowerCase(),ae=Array.isArray(G)?G:[];return ne?ae.filter(je=>String((je==null?void 0:je.driver_id)||"").toLowerCase().includes(ne)||String((je==null?void 0:je.username)||"").toLowerCase().includes(ne)||String((je==null?void 0:je.name)||"").toLowerCase().includes(ne)||String((je==null?void 0:je.role)||"").toLowerCase().includes(ne)):ae},[G,q]),xe=ne=>{ne&&(oe(ne),ke({name:String((ne==null?void 0:ne.name)||""),username:String((ne==null?void 0:ne.username)||""),password:"",role:i0(ne==null?void 0:ne.role),active:!!(ne!=null&&ne.active),truck_plate:String((ne==null?void 0:ne.truck_plate)||""),phone_number:String((ne==null?void 0:ne.phone_number)||""),helper_name:String((ne==null?void 0:ne.helper_name)||"")}),be(!0))},Le=async()=>{var ne,ae;b(!0),I(""),R("");try{const je={driver_id:String(H.driver_id||"").trim(),name:String(H.name||"").trim(),username:String(H.username||"").trim(),password:String(H.password||""),role:i0(H.role),active:!!H.active,truck_plate:String(H.truck_plate||"").trim(),phone_number:String(H.phone_number||"").trim(),helper_name:String(H.helper_name||"").trim()};if(!je.driver_id||!je.username||!je.name||!je.password){I("driver_id, name, username and password are required.");return}await eC(i,je),R("Account created."),M(!1),$(Zu()),await ie()}catch(je){const Qe=((ae=(ne=je==null?void 0:je.response)==null?void 0:ne.data)==null?void 0:ae.detail)||(je==null?void 0:je.message)||"Failed to create user";I(String(Qe))}finally{b(!1)}},Ke=async()=>{var ne,ae;if(Ne!=null&&Ne.driver_id){b(!0),I(""),R("");try{const je={name:String(le.name||"").trim(),username:String(le.username||"").trim(),role:i0(le.role),active:!!le.active,truck_plate:String(le.truck_plate||"").trim(),phone_number:String(le.phone_number||"").trim(),helper_name:String(le.helper_name||"").trim()},Qe=String(le.password||"").trim();Qe&&(je.password=Qe),await tC(i,Ne.driver_id,je),R("Account updated."),be(!1),oe(null),await ie()}catch(je){const Qe=((ae=(ne=je==null?void 0:je.response)==null?void 0:ne.data)==null?void 0:ae.detail)||(je==null?void 0:je.message)||"Failed to update user";I(String(Qe))}finally{b(!1)}}},Fe=async ne=>{var je,Qe;if(!c)return;const ae=String((ne==null?void 0:ne.driver_id)||"").trim().toUpperCase();if(!(!ae||!i)){F(ae),I(""),R("");try{const Ue=await xm(i,{driver_id:ae,duration_sec:1800}),nt=Ue==null?void 0:Ue.id;if(nt){e(`/tracking/${encodeURIComponent(String(nt))}`);return}R("Tracking request created.")}catch(Ue){const nt=((Qe=(je=Ue==null?void 0:Ue.response)==null?void 0:je.data)==null?void 0:Qe.detail)||(Ue==null?void 0:Ue.message)||"Failed to request tracking";I(String(nt))}finally{F("")}}};return m.jsxs(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"sticky top-0 z-40 glass-strong backdrop-blur-xl border-b border-white/10 pb-2 shadow-sm",children:[m.jsxs("div",{className:"p-4 flex items-center gap-4",children:[m.jsx("button",{onClick:()=>e(g||-1),className:"p-2 -ml-2 rounded-xl glass-light text-slate-300 hover:text-white transition-colors border border-white/10","aria-label":"Back",children:m.jsx(Ms,{})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h1",{className:"font-black text-xl text-gradient tracking-tight truncate",children:"Users"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1 truncate",children:a?"Create and manage accounts":"Read-only access"})]}),m.jsx("button",{onClick:ie,className:`p-2 rounded-xl glass-light hover:bg-violet-500/20 text-violet-400 transition-all border border-white/10 ${v?"animate-spin":""}`,title:"Refresh",children:m.jsx(Yr,{size:20})}),m.jsx("button",{onClick:()=>{M(!0),$(Zu())},disabled:!a,className:`p-2 rounded-xl glass-light border border-white/10 transition-all ${a?"text-emerald-300 hover:bg-emerald-500/10 active:scale-95":"text-slate-600 cursor-not-allowed opacity-60"}`,title:a?"Create account":"Not allowed","aria-label":"Create account",children:m.jsx(xc,{size:20})})]}),m.jsx("div",{className:"px-4 pb-3",children:m.jsxs("div",{className:"relative group",children:[m.jsx(Ls,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-violet-400 transition-colors z-10",size:18}),m.jsx("input",{type:"text",placeholder:"Search driver_id, username, name, role...",className:"w-full pl-12 pr-4 py-3.5 glass-strong rounded-2xl outline-none focus:ring-2 focus:ring-violet-500/30 border border-white/10 text-sm font-medium text-white placeholder-slate-500 transition-all",value:q,onChange:ne=>Y(ne.target.value)})]})})]}),m.jsxs("div",{className:"flex-1 p-4 pb-32 relative z-10 space-y-3",children:[T&&m.jsxs("div",{className:"glass-strong rounded-2xl border border-rose-500/20 p-4 text-rose-200 text-xs font-bold flex items-center gap-3",children:[m.jsx(v8,{size:16,className:"text-rose-300"}),m.jsx("span",{className:"flex-1",children:T})]}),z&&m.jsxs("div",{className:"glass-strong rounded-2xl border border-emerald-500/20 p-4 text-emerald-200 text-xs font-bold flex items-center gap-3",children:[m.jsx(Bh,{size:16,className:"text-emerald-300"}),m.jsx("span",{className:"flex-1",children:z})]}),v?m.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-violet-500/20 blur-xl rounded-full animate-pulse"}),m.jsx(fn,{className:"animate-spin relative z-10 text-violet-400",size:48})]}),m.jsx("p",{className:"mt-6 font-bold text-xs uppercase tracking-widest text-slate-500",children:"Loading users..."})]}):ve.length===0?m.jsxs("div",{className:"text-center py-20 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(Qd,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No users"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Try changing your search"})]}):m.jsx("div",{className:"space-y-3",children:ve.map(ne=>m.jsx("div",{className:"glass-strong p-5 rounded-3xl border border-white/10 hover:border-violet-500/25 transition-all",children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-2xl bg-violet-500/15 border border-violet-500/20 flex items-center justify-center",children:m.jsx(Qd,{size:20,className:"text-violet-300"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center justify-between gap-2",children:[m.jsx("p",{className:"text-sm font-black text-white truncate",children:(ne==null?void 0:ne.name)||(ne==null?void 0:ne.username)||(ne==null?void 0:ne.driver_id)}),m.jsx("span",{className:`text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border ${ne!=null&&ne.active?"bg-emerald-500/15 text-emerald-300 border-emerald-500/20":"bg-rose-500/15 text-rose-200 border-rose-500/20"}`,children:ne!=null&&ne.active?"Active":"Inactive"})]}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1 truncate",children:[m.jsx("span",{className:"font-mono text-slate-300",children:ne==null?void 0:ne.driver_id}),"  ",m.jsx("span",{className:"font-mono",children:ne==null?void 0:ne.username}),"  ",(ne==null?void 0:ne.role)||""]}),(ne==null?void 0:ne.last_login)&&m.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:["Last login: ",new Date(ne.last_login).toLocaleString()]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[c&&String((ne==null?void 0:ne.role)||"")!=="Recipient"?m.jsxs("button",{type:"button",onClick:()=>Fe(ne),disabled:String(B)===String(String((ne==null?void 0:ne.driver_id)||"").trim().toUpperCase()),className:`px-3 py-2 rounded-2xl border text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2 ${String(B)===String(String((ne==null?void 0:ne.driver_id)||"").trim().toUpperCase())?"bg-emerald-500/10 border-emerald-500/20 text-emerald-200 opacity-70 cursor-not-allowed":"bg-emerald-500/15 border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95"}`,title:"Request live location",children:[String(B)===String(String((ne==null?void 0:ne.driver_id)||"").trim().toUpperCase())?m.jsx(fn,{size:14,className:"animate-spin"}):m.jsx(Rs,{size:14}),"Track"]}):null,m.jsx("button",{type:"button",onClick:()=>xe(ne),disabled:!a,className:`px-4 py-2 rounded-2xl border text-[10px] font-black uppercase tracking-widest transition-all ${a?"bg-white/5 border-white/10 text-slate-200 hover:bg-white/10 active:scale-95":"bg-slate-900/30 border-white/5 text-slate-600 cursor-not-allowed opacity-60"}`,title:a?"Edit":"Not allowed",children:"Edit"})]})]})},(ne==null?void 0:ne.driver_id)||(ne==null?void 0:ne.id)))})]}),m.jsx(d2,{open:ee,title:"Create Account",onClose:()=>{C||M(!1)},children:m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsx("input",{value:H.driver_id,onChange:ne=>$(ae=>({...ae,driver_id:ne.target.value})),placeholder:"driver_id (ex: D004)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30 font-mono"}),m.jsx("input",{value:H.username,onChange:ne=>$(ae=>({...ae,username:ne.target.value})),placeholder:"username",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"})]}),m.jsx("input",{value:H.name,onChange:ne=>$(ae=>({...ae,name:ne.target.value})),placeholder:"Full name",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"}),m.jsx("input",{value:H.password,onChange:ne=>$(ae=>({...ae,password:ne.target.value})),placeholder:"Temporary password",type:"password",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsx("select",{value:H.role,onChange:ne=>$(ae=>({...ae,role:ne.target.value})),className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white outline-none focus:ring-2 focus:ring-emerald-500/30",children:Ae.map(ne=>m.jsx("option",{value:ne,children:ne},ne))}),m.jsxs("label",{className:"flex items-center gap-2 px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white select-none",children:[m.jsx("input",{type:"checkbox",checked:H.active,onChange:ne=>$(ae=>({...ae,active:ne.target.checked}))}),m.jsx("span",{className:"text-xs font-bold",children:"Active"})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsx("input",{value:H.truck_plate,onChange:ne=>$(ae=>({...ae,truck_plate:ne.target.value})),placeholder:"Truck plate (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30 font-mono"}),m.jsx("input",{value:H.phone_number,onChange:ne=>$(ae=>({...ae,phone_number:ne.target.value})),placeholder:"Truck phone (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"})]}),m.jsx("input",{value:H.helper_name,onChange:ne=>$(ae=>({...ae,helper_name:ne.target.value})),placeholder:"Default helper name (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"}),m.jsxs("button",{type:"button",onClick:Le,disabled:!a||C,className:`w-full btn-premium py-4 rounded-2xl font-black uppercase tracking-widest flex items-center justify-center gap-2 shadow-lg transition-all ${!a||C?"bg-slate-800/40 text-slate-500 cursor-not-allowed opacity-70":"bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white active:scale-[0.99]"}`,children:[C?m.jsx(fn,{className:"animate-spin",size:18}):m.jsx(yy,{size:18}),"Create"]})]})}),m.jsx(d2,{open:se,title:`Edit Account  ${(Ne==null?void 0:Ne.driver_id)||""}`,onClose:()=>{C||be(!1)},children:m.jsxs("div",{className:"space-y-3",children:[m.jsx("input",{value:le.name,onChange:ne=>ke(ae=>({...ae,name:ne.target.value})),placeholder:"Full name",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"}),m.jsx("input",{value:le.username,onChange:ne=>ke(ae=>({...ae,username:ne.target.value})),placeholder:"username",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"}),m.jsx("input",{value:le.password,onChange:ne=>ke(ae=>({...ae,password:ne.target.value})),placeholder:"New password (optional)",type:"password",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsx("select",{value:le.role,onChange:ne=>ke(ae=>({...ae,role:ne.target.value})),className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white outline-none focus:ring-2 focus:ring-violet-500/30",children:Ae.map(ne=>m.jsx("option",{value:ne,children:ne},ne))}),m.jsxs("label",{className:"flex items-center gap-2 px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white select-none",children:[m.jsx("input",{type:"checkbox",checked:le.active,onChange:ne=>ke(ae=>({...ae,active:ne.target.checked}))}),m.jsx("span",{className:"text-xs font-bold",children:"Active"})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsx("input",{value:le.truck_plate,onChange:ne=>ke(ae=>({...ae,truck_plate:ne.target.value})),placeholder:"Truck plate (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30 font-mono"}),m.jsx("input",{value:le.phone_number,onChange:ne=>ke(ae=>({...ae,phone_number:ne.target.value})),placeholder:"Truck phone (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"})]}),m.jsx("input",{value:le.helper_name,onChange:ne=>ke(ae=>({...ae,helper_name:ne.target.value})),placeholder:"Default helper name (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"}),m.jsxs("button",{type:"button",onClick:Ke,disabled:!a||C,className:`w-full btn-premium py-4 rounded-2xl font-black uppercase tracking-widest flex items-center justify-center gap-2 shadow-lg transition-all ${!a||C?"bg-slate-800/40 text-slate-500 cursor-not-allowed opacity-70":"bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white active:scale-[0.99]"}`,children:[C?m.jsx(fn,{className:"animate-spin",size:18}):m.jsx(yy,{size:18}),"Save Changes"]})]})})]})}const Yu=e=>{try{return new Date(e).toLocaleString()}catch{return""}};function wM(){const e=ur(),{requestId:t}=L1(),{user:n}=or(),i=(n==null?void 0:n.token)||localStorage.getItem("token"),[a,c]=O.useState(null),[f,g]=O.useState(null),[v,y]=O.useState(!0),[C,b]=O.useState(!1),[T,I]=O.useState(""),[z,R]=O.useState(""),B=O.useMemo(()=>{const G=String((n==null?void 0:n.driver_id)||"").trim();return!G||!(a!=null&&a.id)?!1:G===String((a==null?void 0:a.created_by_user_id)||"").trim()||G===String((a==null?void 0:a.target_driver_id)||"").trim()},[n==null?void 0:n.driver_id,a==null?void 0:a.id,a==null?void 0:a.created_by_user_id,a==null?void 0:a.target_driver_id]),F=async({withDetails:G=!0}={})=>{var K,q,Y,ee;if(i){I("");try{let M=a;if(G){const H=await aC(i,t);c(H),M=H}try{const H=await lC(i,t);g(H),R("")}catch(H){const $=String(((q=(K=H==null?void 0:H.response)==null?void 0:K.data)==null?void 0:q.detail)||(H==null?void 0:H.message)||"");g(null);const se=String((M==null?void 0:M.status)||"").trim();se==="Pending"?R("Waiting for driver to accept..."):se==="Denied"?R("Driver denied the request."):se==="Stopped"?R("Tracking was stopped."):se==="Accepted"&&$.toLowerCase().includes("no location")?R("Waiting for first GPS update..."):R($||"No location yet")}}catch(M){I(String(((ee=(Y=M==null?void 0:M.response)==null?void 0:Y.data)==null?void 0:ee.detail)||(M==null?void 0:M.message)||"Failed to load tracking")),c(null),g(null)}finally{y(!1)}}};O.useEffect(()=>{y(!0),F({withDetails:!0})},[t,i]),O.useEffect(()=>{if(!i)return;const G=setInterval(()=>F({withDetails:!1}),5e3),K=setInterval(()=>F({withDetails:!0}),2e4);return()=>{clearInterval(G),clearInterval(K)}},[t,i]);const P=async()=>{var G,K;if(!(!B||!(a!=null&&a.id)||!i)){b(!0),I("");try{const q=await ym(i,a.id);c(q||a)}catch(q){I(String(((K=(G=q==null?void 0:q.response)==null?void 0:G.data)==null?void 0:K.detail)||(q==null?void 0:q.message)||"Failed to stop tracking"))}finally{b(!1)}}},k=f?{lat:Number(f.latitude),lon:Number(f.longitude)}:null;return m.jsxs(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{className:"min-w-0 flex items-center gap-3",children:[m.jsx("button",{type:"button",onClick:()=>e(-1),className:"w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10 text-slate-200 hover:bg-white/5 active:scale-95 transition-all","aria-label":"Back",children:m.jsx(Ms,{size:18})}),m.jsxs("div",{className:"min-w-0",children:[m.jsxs("h1",{className:"text-xl font-black text-gradient tracking-tight flex items-center gap-2",children:[m.jsx(Rs,{size:18,className:"text-emerald-300"}),"Live Tracking"]}),m.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1 truncate",children:["Request #",t]})]})]}),m.jsx("button",{type:"button",onClick:()=>F({withDetails:!0}),className:`w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10 text-slate-200 hover:bg-white/5 active:scale-95 transition-all ${v?"opacity-60 cursor-not-allowed":""}`,disabled:v,"aria-label":"Refresh",children:m.jsx(Yr,{size:18,className:v?"animate-spin":""})})]}),m.jsxs("main",{className:"flex-1 p-4 pb-32 space-y-3 relative z-10",children:[T?m.jsx("div",{className:"glass-strong p-4 rounded-2xl border border-rose-500/30 text-rose-300 text-sm font-bold",children:T}):null,v?m.jsxs("div",{className:"glass-strong p-6 rounded-3xl border border-white/10 flex items-center gap-3 text-slate-300",children:[m.jsx(fn,{className:"animate-spin",size:18}),m.jsx("span",{className:"text-sm font-bold",children:"Loading..."})]}):null,a?m.jsxs("div",{className:"glass-strong p-5 rounded-3xl border border-white/10 space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-xs text-slate-500 font-black uppercase tracking-widest",children:"Status"}),m.jsx("p",{className:"text-sm font-black text-white truncate",children:String(a.status||"")})]}),B&&String(a.status||"")==="Accepted"?m.jsxs("button",{type:"button",onClick:P,disabled:C,className:`px-4 py-2 rounded-2xl text-[10px] font-black uppercase tracking-widest border transition-all ${C?"opacity-60 cursor-not-allowed bg-slate-900/40 border-white/10 text-slate-400":"bg-rose-500/15 border-rose-500/20 text-rose-200 hover:bg-rose-500/20 active:scale-95"}`,title:"Stop tracking",children:[C?m.jsx(fn,{size:14,className:"animate-spin inline-block mr-1 -mt-0.5"}):m.jsx(wb,{size:14,className:"inline-block mr-1 -mt-0.5"}),"Stop"]}):null]}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["Created: ",a.created_at?Yu(a.created_at):"--",a.awb?`  AWB ${String(a.awb).toUpperCase()}`:""]}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["Driver: ",a.target_driver_name?String(a.target_driver_name).trim():String(a.target_driver_id||"--"),a.target_truck_plate?`  Truck ${String(a.target_truck_plate).toUpperCase()}`:"",a.target_truck_phone?`  Phone ${a.target_truck_phone}`:""]}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["Expires: ",a.expires_at?Yu(a.expires_at):"--",a.last_location_at?`  Last update ${Yu(a.last_location_at)}`:""]})]}):null,m.jsxs("div",{className:"glass-strong p-4 rounded-3xl border border-white/10",children:[m.jsx(Tm,{shipments:[],routeGeometry:null,currentLocation:k,originLocation:null,showStopNumbers:!1,currentLocationLabel:"Truck location"}),m.jsx("div",{className:"mt-3 text-xs text-slate-300 font-bold",children:f!=null&&f.timestamp?`Last GPS: ${Yu(f.timestamp)}`:z||"Waiting for driver location..."})]})]})]})}const h2=e=>{try{return new Date(e).toLocaleString()}catch{return""}};function vM(){const e=ur(),{user:t}=or(),n=(t==null?void 0:t.token)||localStorage.getItem("token"),[i,a]=O.useState([]),[c,f]=O.useState(!0),[g,v]=O.useState(""),[y,C]=O.useState(""),[b,T]=O.useState(!1),I=O.useMemo(()=>(Array.isArray(i)?i:[]).reduce((B,F)=>B+(Number(F==null?void 0:F.unread_count)||0),0),[i]),z=async()=>{var B,F;if(n){f(!0),v("");try{const P=await dC(n,{limit:100});a(Array.isArray(P)?P:[])}catch(P){a([]),v(String(((F=(B=P==null?void 0:P.response)==null?void 0:B.data)==null?void 0:F.detail)||(P==null?void 0:P.message)||"Failed to load chat"))}finally{f(!1)}}};O.useEffect(()=>{if(z(),!n)return;const B=setInterval(()=>z(),15e3);return()=>clearInterval(B)},[n]);const R=async()=>{var F,P;if(!n)return;const B=String(y||"").trim().toUpperCase();if(B){T(!0),v("");try{const k=await wm(n,{awb:B});k!=null&&k.id?e(`/chat/${encodeURIComponent(String(k.id))}`):v("Failed to open chat")}catch(k){v(String(((P=(F=k==null?void 0:k.response)==null?void 0:F.data)==null?void 0:P.detail)||(k==null?void 0:k.message)||"Failed to open chat"))}finally{T(!1)}}};return m.jsxs(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsxs("h1",{className:"text-xl font-black text-gradient tracking-tight flex items-center gap-2",children:[m.jsx(Wc,{size:18,className:"text-violet-300"}),"Chat"]}),m.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1 truncate",children:[I," unread"]})]}),m.jsx("button",{type:"button",onClick:z,className:`w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10 text-slate-200 hover:bg-white/5 active:scale-95 transition-all ${c?"opacity-60 cursor-not-allowed":""}`,disabled:c,"aria-label":"Refresh",children:m.jsx(Yr,{size:18,className:c?"animate-spin":""})})]}),m.jsxs("main",{className:"flex-1 p-4 pb-32 space-y-3 relative z-10",children:[g?m.jsx("div",{className:"glass-strong p-4 rounded-2xl border border-rose-500/30 text-rose-300 text-sm font-bold",children:g}):null,m.jsxs("div",{className:"glass-strong p-4 rounded-3xl border border-white/10 space-y-3",children:[m.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Open chat by AWB"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:"flex-1 flex items-center gap-2 glass-light rounded-2xl border border-white/10 px-3 py-3",children:[m.jsx(Ls,{size:16,className:"text-slate-500"}),m.jsx("input",{value:y,onChange:B=>C(B.target.value),placeholder:"Enter AWB (e.g. AWB123...)",className:"w-full bg-transparent outline-none text-sm font-bold text-white placeholder:text-slate-600"})]}),m.jsx("button",{type:"button",onClick:R,disabled:b,className:`w-12 h-12 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95 transition-all flex items-center justify-center ${b?"opacity-60 cursor-not-allowed":""}`,title:"Open",children:b?m.jsx(fn,{size:18,className:"animate-spin"}):m.jsx(Yd,{size:18})})]}),m.jsx("div",{className:"text-[11px] font-bold text-slate-400",children:"Tip: recipients can also open chat from the shipment details screen, then pin the delivery location."})]}),c?m.jsxs("div",{className:"glass-strong p-6 rounded-3xl border border-white/10 flex items-center gap-3 text-slate-300",children:[m.jsx(fn,{className:"animate-spin",size:18}),m.jsx("span",{className:"text-sm font-bold",children:"Loading..."})]}):null,!c&&(!i||i.length===0)?m.jsxs("div",{className:"text-center py-16 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(Wc,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No conversations yet"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Open a chat by AWB to start messaging"})]}):null,!c&&Array.isArray(i)?i.map(B=>{const F=Number(B==null?void 0:B.unread_count)||0;return m.jsx("button",{type:"button",onClick:()=>e(`/chat/${encodeURIComponent(String(B.id))}`),className:"w-full text-left glass-strong p-5 rounded-3xl border border-white/10 hover:bg-white/5 transition-all",children:m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-sm font-black text-white truncate",children:B!=null&&B.awb?String(B.awb).toUpperCase():(B==null?void 0:B.subject)||"Chat"}),m.jsx("p",{className:"text-xs text-slate-300 font-medium mt-1 break-words",children:String((B==null?void 0:B.last_message_preview)||"No messages yet")}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-2",children:B!=null&&B.last_message_at?`Last: ${h2(B.last_message_at)}`:B!=null&&B.created_at?`Created: ${h2(B.created_at)}`:""})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[F>0?m.jsx("div",{className:"px-2.5 py-1 rounded-full bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 text-[10px] font-black uppercase tracking-widest",children:F}):null,m.jsx("div",{className:"w-10 h-10 rounded-2xl glass-light border border-white/10 flex items-center justify-center text-slate-400",children:m.jsx(Yd,{size:18})})]})]})},B.id)}):null]})]})}delete Ro.Icon.Default.prototype._getIconUrl;Ro.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const s0=e=>{try{return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}},f2=e=>{try{return new Date(e).toLocaleDateString()}catch{return""}},p2=(e,t)=>{const n=Number(e),i=Number(t);return!Number.isFinite(n)||!Number.isFinite(i)?null:`https://www.openstreetmap.org/?mlat=${encodeURIComponent(String(n))}&mlon=${encodeURIComponent(String(i))}#map=18/${encodeURIComponent(String(n))}/${encodeURIComponent(String(i))}`},_M=({onPick:e})=>(H6({click(t){e==null||e({lat:t.latlng.lat,lon:t.latlng.lng,source:"map"})}}),null),bM=({center:e})=>{const t=Kh();return O.useEffect(()=>{if(e)try{t.setView(e,t.getZoom())}catch{}},[e,t]),null};function CM({open:e,onClose:t,shipment:n,onConfirm:i}){const[a,c]=O.useState(""),[f,g]=O.useState(""),[v,y]=O.useState(null),[C,b]=O.useState("manual"),[T,I]=O.useState(!1),[z,R]=O.useState(!1),[B,F]=O.useState(""),P=O.useMemo(()=>aa(n),[n]),k=O.useMemo(()=>{var se;const Y=(n==null?void 0:n.recipient_pin)||((se=n==null?void 0:n.raw_data)==null?void 0:se.recipientPin)||null,ee=Number((Y==null?void 0:Y.latitude)??(Y==null?void 0:Y.lat)),M=Number((Y==null?void 0:Y.longitude)??(Y==null?void 0:Y.lon)??(Y==null?void 0:Y.lng));if(et(ee)&&et(M))return{lat:ee,lon:M};const H=Number(n==null?void 0:n.latitude),$=Number(n==null?void 0:n.longitude);return et(H)&&et($)?{lat:H,lon:$}:{lat:44.4268,lon:26.1025}},[n]);O.useEffect(()=>{e&&(c(P),g(""),y(k),b("extracted"),F(""))},[e,P,k]);const G=async()=>{I(!0),F("");try{if(!navigator.geolocation)throw new Error("Geolocation is not supported");const Y=await new Promise((H,$)=>{navigator.geolocation.getCurrentPosition(se=>H(se.coords),se=>$(new Error((se==null?void 0:se.message)||"GPS error")),{enableHighAccuracy:!0,timeout:8e3,maximumAge:0})}),ee=Number(Y==null?void 0:Y.latitude),M=Number(Y==null?void 0:Y.longitude);if(!et(ee)||!et(M))throw new Error("Invalid GPS coordinates");y({lat:ee,lon:M}),b("gps")}catch(Y){F(String((Y==null?void 0:Y.message)||"Failed to detect GPS"))}finally{I(!1)}},K=async()=>{const Y=String(a||"").trim();if(Y){R(!0),F("");try{const ee=await ch(Y);if(!ee||!et(ee.lat)||!et(ee.lon))throw new Error("Address not found");y({lat:Number(ee.lat),lon:Number(ee.lon)}),b("geocode")}catch(ee){F(String((ee==null?void 0:ee.message)||"Search failed"))}finally{R(!1)}}},q=()=>{if(!v||!et(v.lat)||!et(v.lon)){F("Pick a valid location");return}i==null||i({latitude:Number(v.lat),longitude:Number(v.lon),source:C||"manual",address:String(a||"").trim()||null,note:String(f||"").trim()||null})};return m.jsx(os,{children:e?m.jsx(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[80] flex items-end justify-center bg-black/60 backdrop-blur-sm p-4",onClick:t,children:m.jsxs(st.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},exit:{y:30,opacity:0},className:"w-full max-w-md glass-strong rounded-3xl border-iridescent p-5 space-y-4",onClick:Y=>Y.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Pin delivery location"}),m.jsx("p",{className:"text-sm font-black text-white truncate",children:n!=null&&n.awb?String(n.awb).toUpperCase():"Shipment"})]}),m.jsx("button",{type:"button",onClick:t,className:"w-11 h-11 rounded-2xl glass-light border border-white/10 flex items-center justify-center hover:bg-white/5 transition-all","aria-label":"Close",children:m.jsx(ba,{size:18,className:"text-slate-300"})})]}),B?m.jsx("div",{className:"glass-light p-3 rounded-2xl border border-rose-500/30 text-rose-200 text-xs font-bold",children:B}):null,m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:"flex-1 flex items-center gap-2 glass-light rounded-2xl border border-white/10 px-3 py-3",children:[m.jsx(Ls,{size:16,className:"text-slate-500"}),m.jsx("input",{value:a,onChange:Y=>c(Y.target.value),placeholder:"Search address",className:"w-full bg-transparent outline-none text-sm font-bold text-white placeholder:text-slate-600"})]}),m.jsx("button",{type:"button",onClick:K,disabled:z,className:`w-12 h-12 rounded-2xl bg-violet-500/15 border border-violet-500/20 text-violet-200 hover:bg-violet-500/20 active:scale-95 transition-all flex items-center justify-center ${z?"opacity-60 cursor-not-allowed":""}`,title:"Search",children:z?m.jsx(fn,{size:18,className:"animate-spin"}):m.jsx(Ls,{size:18})}),m.jsx("button",{type:"button",onClick:G,disabled:T,className:`w-12 h-12 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95 transition-all flex items-center justify-center ${T?"opacity-60 cursor-not-allowed":""}`,title:"Use GPS",children:T?m.jsx(fn,{size:18,className:"animate-spin"}):m.jsx(o8,{size:18})})]}),m.jsx("div",{className:"text-[11px] font-bold text-slate-400",children:"Move the marker to the exact place where the truck should deliver."})]}),m.jsx("div",{className:"h-[260px] w-full rounded-3xl overflow-hidden shadow-inner border border-white/20",children:m.jsxs(FC,{center:[(v==null?void 0:v.lat)||k.lat,(v==null?void 0:v.lon)||k.lon],zoom:16,style:{height:"100%",width:"100%"},zoomControl:!1,children:[m.jsx(zC,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors  <a href="https://carto.com/attributions">CARTO</a>'}),m.jsx(bM,{center:[(v==null?void 0:v.lat)||k.lat,(v==null?void 0:v.lon)||k.lon]}),m.jsx(_M,{onPick:Y=>{y({lat:Y.lat,lon:Y.lon}),b(Y.source||"map")}}),v?m.jsx(fd,{position:[v.lat,v.lon],draggable:!0,eventHandlers:{dragend:Y=>{var ee,M;try{const H=(M=(ee=Y==null?void 0:Y.target)==null?void 0:ee.getLatLng)==null?void 0:M.call(ee),$=Number(H==null?void 0:H.lat),se=Number(H==null?void 0:H.lng);if(!Number.isFinite($)||!Number.isFinite(se))return;y({lat:$,lon:se}),b("drag")}catch{}}}}):null]})}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"glass-light p-3 rounded-2xl border border-white/10",children:[m.jsx("div",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Latitude"}),m.jsx("div",{className:"text-sm font-black text-white font-mono truncate",children:v?String(Number(v.lat).toFixed(6)):"--"})]}),m.jsxs("div",{className:"glass-light p-3 rounded-2xl border border-white/10",children:[m.jsx("div",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Longitude"}),m.jsx("div",{className:"text-sm font-black text-white font-mono truncate",children:v?String(Number(v.lon).toFixed(6)):"--"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Note (optional)"}),m.jsx("textarea",{value:f,onChange:Y=>g(Y.target.value),rows:2,placeholder:"Gate code, building entrance, landmark...",className:"w-full glass-light rounded-2xl border border-white/10 p-3 text-sm font-bold text-white placeholder:text-slate-600 outline-none"})]}),m.jsxs("button",{type:"button",onClick:q,className:"w-full btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm",children:[m.jsx(Rs,{size:16}),"Send pinned location"]}),m.jsxs("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["Source: ",String(C||"manual")]})]})}):null})}function SM(){var ke;const e=ur(),{threadId:t}=L1(),{user:n}=or(),i=(n==null?void 0:n.token)||localStorage.getItem("token"),a=String((n==null?void 0:n.driver_id)||"").trim(),c=String((n==null?void 0:n.role)||"")==="Recipient",[f,g]=O.useState(null),[v,y]=O.useState(null),[C,b]=O.useState([]),[T,I]=O.useState(!0),[z,R]=O.useState(""),[B,F]=O.useState(""),[P,k]=O.useState(!1),[G,K]=O.useState(!1),q=O.useRef(null),Y=O.useMemo(()=>{const ie=Array.isArray(C)?C:[],Ae=ie.length?ie[ie.length-1]:null;return Ae!=null&&Ae.id?Number(Ae.id):0},[C]),ee=()=>{var ie,Ae;try{(Ae=(ie=q.current)==null?void 0:ie.scrollIntoView)==null||Ae.call(ie,{behavior:"smooth"})}catch{}},M=async({withThread:ie=!1}={})=>{var Ae,ve;if(i){R("");try{if(ie){const Fe=await hC(i,t);if(g(Fe),Fe!=null&&Fe.awb)try{const ne=await Gc(i,Fe.awb,{refresh:!1});y(ne||null)}catch{y(null)}else y(null)}const xe=await fC(i,t,{limit:80}),Le=Array.isArray(xe)?xe:[];b(Le);const Ke=Le.length?Le[Le.length-1]:null;Ke!=null&&Ke.id&&await pC(i,t,{last_read_message_id:Number(Ke.id)}).catch(()=>{})}catch(xe){R(String(((ve=(Ae=xe==null?void 0:xe.response)==null?void 0:Ae.data)==null?void 0:ve.detail)||(xe==null?void 0:xe.message)||"Failed to load chat"))}finally{I(!1)}}};O.useEffect(()=>{I(!0),M({withThread:!0})},[t,i]),O.useEffect(()=>{if(!i)return;const ie=setInterval(()=>M({withThread:!1}),5e3),Ae=setInterval(()=>M({withThread:!0}),3e4);return()=>{clearInterval(ie),clearInterval(Ae)}},[t,i]),O.useEffect(()=>{ee()},[Y]);const H=async()=>{var Ae,ve;if(!i)return;const ie=String(B||"").trim();if(ie){k(!0),R("");try{const xe=await Ep(i,t,{message_type:"text",text:ie});F(""),b(Le=>[...Array.isArray(Le)?Le:[],xe].filter(Boolean)),ee()}catch(xe){R(String(((ve=(Ae=xe==null?void 0:xe.response)==null?void 0:Ae.data)==null?void 0:ve.detail)||(xe==null?void 0:xe.message)||"Failed to send"))}finally{k(!1)}}},$=async({latitude:ie,longitude:Ae,source:ve,address:xe,note:Le})=>{var Ke,Fe;if(i){k(!0),R("");try{const ne=await Ep(i,t,{message_type:"location",text:null,data:{latitude:ie,longitude:Ae,source:ve,address:xe,note:Le}});K(!1),b(ae=>[...Array.isArray(ae)?ae:[],ne].filter(Boolean)),ee()}catch(ne){R(String(((Fe=(Ke=ne==null?void 0:ne.response)==null?void 0:Ke.data)==null?void 0:Fe.detail)||(ne==null?void 0:ne.message)||"Failed to send location"))}finally{k(!1)}}},se=f!=null&&f.awb?String(f.awb).toUpperCase():`Thread #${String(t)}`,be=(v==null?void 0:v.recipient_pin)||((ke=v==null?void 0:v.raw_data)==null?void 0:ke.recipientPin)||null,Ne=Number((be==null?void 0:be.latitude)??(be==null?void 0:be.lat)),oe=Number((be==null?void 0:be.longitude)??(be==null?void 0:be.lon)??(be==null?void 0:be.lng)),le=et(Ne)&&et(oe)?p2(Ne,oe):null;return m.jsxs(st.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{className:"min-w-0 flex items-center gap-3",children:[m.jsx("button",{type:"button",onClick:()=>e(-1),className:"w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10 text-slate-200 hover:bg-white/5 active:scale-95 transition-all","aria-label":"Back",children:m.jsx(Ms,{size:18})}),m.jsxs("div",{className:"min-w-0",children:[m.jsx("h1",{className:"text-lg font-black text-white truncate",children:se}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-1 truncate",children:f!=null&&f.last_message_at?`Last message ${s0(f.last_message_at)}`:f!=null&&f.created_at?`Created ${f2(f.created_at)}`:""})]})]}),c?m.jsxs("button",{type:"button",onClick:()=>K(!0),className:"px-4 h-11 rounded-2xl border text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 transition-all bg-emerald-500/15 border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95",title:"Pin delivery location",children:[m.jsx(Rs,{size:16}),"Pin"]}):null]}),m.jsxs("main",{className:"flex-1 p-4 pb-32 space-y-3 relative z-10",children:[z?m.jsx("div",{className:"glass-strong p-4 rounded-2xl border border-rose-500/30 text-rose-300 text-sm font-bold",children:z}):null,le?m.jsx("div",{className:"glass-strong p-4 rounded-3xl border border-emerald-500/20",children:m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Current pinned location"}),m.jsxs("div",{className:"text-sm font-black text-white font-mono truncate",children:[Number(Ne).toFixed(6),", ",Number(oe).toFixed(6)]}),be!=null&&be.note?m.jsx("div",{className:"text-xs font-bold text-slate-300 mt-1 break-words",children:String(be.note)}):null,be!=null&&be.updated_at?m.jsxs("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-2",children:["Updated ",s0(be.updated_at)," ",f2(be.updated_at)]}):null]}),m.jsx("a",{href:le,target:"_blank",rel:"noreferrer",className:"px-3 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 text-[10px] font-black uppercase tracking-widest hover:bg-emerald-500/20 active:scale-95 transition-all whitespace-nowrap",title:"Open in OpenStreetMap",children:"Open map"})]})}):null,T?m.jsxs("div",{className:"glass-strong p-6 rounded-3xl border border-white/10 flex items-center gap-3 text-slate-300",children:[m.jsx(fn,{className:"animate-spin",size:18}),m.jsx("span",{className:"text-sm font-bold",children:"Loading..."})]}):null,m.jsxs("div",{className:"space-y-2",children:[(Array.isArray(C)?C:[]).map(ie=>{const Ae=String((ie==null?void 0:ie.sender_user_id)||"").trim()===a,ve=String((ie==null?void 0:ie.message_type)||"text").toLowerCase(),xe=ie!=null&&ie.data&&typeof ie.data=="object"?ie.data:null,Le=Number((xe==null?void 0:xe.latitude)??(xe==null?void 0:xe.lat)),Ke=Number((xe==null?void 0:xe.longitude)??(xe==null?void 0:xe.lon)??(xe==null?void 0:xe.lng)),Fe=ve==="location"&&et(Le)&&et(Ke)?p2(Le,Ke):null;return m.jsx("div",{className:`flex ${Ae?"justify-end":"justify-start"}`,children:m.jsxs("div",{className:`max-w-[85%] rounded-3xl border px-4 py-3 ${Ae?"bg-sky-500/15 border-sky-500/20 text-white":"glass-strong border-white/10 text-slate-100"}`,children:[m.jsxs("div",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 flex items-center justify-between gap-3",children:[m.jsx("span",{className:"truncate",children:Ae?"You":(ie==null?void 0:ie.sender_role)||"User"}),m.jsx("span",{className:"whitespace-nowrap",children:ie!=null&&ie.created_at?s0(ie.created_at):""})]}),ve==="location"?m.jsxs("div",{className:"mt-2 space-y-2",children:[m.jsxs("div",{className:"text-sm font-black flex items-center gap-2",children:[m.jsx(Rs,{size:16,className:"text-emerald-300"}),"Pinned location"]}),Fe?m.jsx("a",{href:Fe,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 text-[10px] font-black uppercase tracking-widest hover:bg-emerald-500/20 active:scale-95 transition-all",children:"Open map"}):null,m.jsx("div",{className:"text-xs font-bold text-slate-200 font-mono",children:et(Le)&&et(Ke)?`${Le.toFixed(6)}, ${Ke.toFixed(6)}`:"Coordinates unavailable"}),xe!=null&&xe.note?m.jsx("div",{className:"text-xs font-bold text-slate-200 break-words",children:String(xe.note)}):null]}):m.jsx("div",{className:"mt-2 text-sm font-bold break-words",children:String((ie==null?void 0:ie.text)||"")})]})},ie==null?void 0:ie.id)}),m.jsx("div",{ref:q})]})]}),m.jsx("div",{className:"fixed bottom-[calc(5rem+env(safe-area-inset-bottom))] left-0 right-0 z-[70] px-4",children:m.jsx("div",{className:"max-w-xl mx-auto",children:m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-3 shadow-2xl flex items-center gap-2",children:[m.jsx("input",{value:B,onChange:ie=>F(ie.target.value),placeholder:"Type a message...",className:"flex-1 bg-transparent outline-none text-sm font-bold text-white placeholder:text-slate-600 px-3 py-3",onKeyDown:ie=>{ie.key==="Enter"&&!ie.shiftKey&&(ie.preventDefault(),H())}}),m.jsx("button",{type:"button",onClick:H,disabled:P,className:`w-12 h-12 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95 transition-all flex items-center justify-center ${P?"opacity-60 cursor-not-allowed":""}`,title:"Send",children:P?m.jsx(fn,{size:18,className:"animate-spin"}):m.jsx(w8,{size:18})})]})})}),m.jsx(CM,{open:G,onClose:()=>K(!1),shipment:v||{awb:f==null?void 0:f.awb},onConfirm:$})]})}const vi=({children:e,allowedRoles:t,allowedPermissions:n})=>{const{user:i,loading:a}=or();return a?m.jsx("div",{children:"Loading..."}):i?t&&!t.includes(i.role)?m.jsx(od,{to:"/",replace:!0}):n&&!A8(i,n)?m.jsx(od,{to:"/",replace:!0}):e:m.jsx(od,{to:"/login",replace:!0})};function AM(){return m.jsx(LE,{children:m.jsx(EM,{})})}const EM=()=>{const e=ko();return m.jsx(os,{mode:"wait",children:m.jsxs(NE,{location:e,children:[m.jsx(Xn,{path:"/login",element:m.jsx(h6,{})}),m.jsx(Xn,{path:"/signup",element:m.jsx(f6,{})}),m.jsxs(Xn,{element:m.jsx(vi,{children:m.jsx(xk,{})}),children:[m.jsx(Xn,{path:"/",element:m.jsx(t2,{})}),m.jsx(Xn,{path:"/home",element:m.jsx(t2,{})}),m.jsx(Xn,{path:"/history",element:m.jsx(vi,{allowedPermissions:[Ci],children:m.jsx(p6,{})})}),m.jsx(Xn,{path:"/shipments",element:m.jsx(vi,{allowedPermissions:[Br],children:m.jsx(aM,{})})}),m.jsx(Xn,{path:"/routes",element:m.jsx(vi,{allowedRoles:["Manager","Admin","Dispatcher","Driver"],children:m.jsx(cM,{})})}),m.jsx(Xn,{path:"/routes/:routeId",element:m.jsx(vi,{allowedRoles:["Manager","Admin","Dispatcher","Driver"],children:m.jsx(mM,{})})}),m.jsx(Xn,{path:"/users",element:m.jsx(vi,{allowedPermissions:[vo],children:m.jsx(yM,{})})}),m.jsx(Xn,{path:"/notifications",element:m.jsx(vi,{allowedPermissions:[bi],children:m.jsx(xM,{})})}),m.jsx(Xn,{path:"/chat",element:m.jsx(vi,{allowedPermissions:[Jr],children:m.jsx(vM,{})})}),m.jsx(Xn,{path:"/chat/:threadId",element:m.jsx(vi,{allowedPermissions:[Jr],children:m.jsx(SM,{})})}),m.jsx(Xn,{path:"/tracking/:requestId",element:m.jsx(vi,{children:m.jsx(wM,{})})}),m.jsx(Xn,{path:"/settings",element:m.jsx(y6,{})}),m.jsx(Xn,{path:"/calendar",element:m.jsx(vi,{allowedPermissions:[Br],children:m.jsx(lM,{})})}),m.jsx(Xn,{path:"/analytics",element:m.jsx(vi,{allowedPermissions:[ji],children:m.jsx(gM,{})})})]}),m.jsx(Xn,{path:"*",element:m.jsx(od,{to:"/",replace:!0})})]},e.pathname)})};o0.createRoot(document.getElementById("root")).render(m.jsx(ca.StrictMode,{children:m.jsx(uk,{children:m.jsx(AM,{})})}));
