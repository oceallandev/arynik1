function HC(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const c=Object.getOwnPropertyDescriptor(i,a);c&&Object.defineProperty(e,a,c.get?c:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();var ka=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ky(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Qy={exports:{}},eh={},$y={exports:{}},Mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zc=Symbol.for("react.element"),WC=Symbol.for("react.portal"),ZC=Symbol.for("react.fragment"),GC=Symbol.for("react.strict_mode"),YC=Symbol.for("react.profiler"),XC=Symbol.for("react.provider"),qC=Symbol.for("react.context"),KC=Symbol.for("react.forward_ref"),QC=Symbol.for("react.suspense"),$C=Symbol.for("react.memo"),JC=Symbol.for("react.lazy"),Mm=Symbol.iterator;function eS(e){return e===null||typeof e!="object"?null:(e=Mm&&e[Mm]||e["@@iterator"],typeof e=="function"?e:null)}var Jy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},e2=Object.assign,t2={};function pl(e,t,n){this.props=e,this.context=t,this.refs=t2,this.updater=n||Jy}pl.prototype.isReactComponent={};pl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};pl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function n2(){}n2.prototype=pl.prototype;function _p(e,t,n){this.props=e,this.context=t,this.refs=t2,this.updater=n||Jy}var bp=_p.prototype=new n2;bp.constructor=_p;e2(bp,pl.prototype);bp.isPureReactComponent=!0;var Rm=Array.isArray,r2=Object.prototype.hasOwnProperty,Cp={current:null},i2={key:!0,ref:!0,__self:!0,__source:!0};function s2(e,t,n){var i,a={},c=null,f=null;if(t!=null)for(i in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(c=""+t.key),t)r2.call(t,i)&&!i2.hasOwnProperty(i)&&(a[i]=t[i]);var g=arguments.length-2;if(g===1)a.children=n;else if(1<g){for(var v=Array(g),y=0;y<g;y++)v[y]=arguments[y+2];a.children=v}if(e&&e.defaultProps)for(i in g=e.defaultProps,g)a[i]===void 0&&(a[i]=g[i]);return{$$typeof:Zc,type:e,key:c,ref:f,props:a,_owner:Cp.current}}function tS(e,t){return{$$typeof:Zc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Sp(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zc}function nS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Om=/\/+/g;function Kh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?nS(""+e.key):t.toString(36)}function Wu(e,t,n,i,a){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(c){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case Zc:case WC:f=!0}}if(f)return f=e,a=a(f),e=i===""?"."+Kh(f,0):i,Rm(a)?(n="",e!=null&&(n=e.replace(Om,"$&/")+"/"),Wu(a,t,n,"",function(y){return y})):a!=null&&(Sp(a)&&(a=tS(a,n+(!a.key||f&&f.key===a.key?"":(""+a.key).replace(Om,"$&/")+"/")+e)),t.push(a)),1;if(f=0,i=i===""?".":i+":",Rm(e))for(var g=0;g<e.length;g++){c=e[g];var v=i+Kh(c,g);f+=Wu(c,t,n,v,a)}else if(v=eS(e),typeof v=="function")for(e=v.call(e),g=0;!(c=e.next()).done;)c=c.value,v=i+Kh(c,g++),f+=Wu(c,t,n,v,a);else if(c==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function xu(e,t,n){if(e==null)return e;var i=[],a=0;return Wu(e,i,"","",function(c){return t.call(n,c,a++)}),i}function rS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Tr={current:null},Zu={transition:null},iS={ReactCurrentDispatcher:Tr,ReactCurrentBatchConfig:Zu,ReactCurrentOwner:Cp};function o2(){throw Error("act(...) is not supported in production builds of React.")}Mt.Children={map:xu,forEach:function(e,t,n){xu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return xu(e,function(){t++}),t},toArray:function(e){return xu(e,function(t){return t})||[]},only:function(e){if(!Sp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Mt.Component=pl;Mt.Fragment=ZC;Mt.Profiler=YC;Mt.PureComponent=_p;Mt.StrictMode=GC;Mt.Suspense=QC;Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iS;Mt.act=o2;Mt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=e2({},e.props),a=e.key,c=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(c=t.ref,f=Cp.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var g=e.type.defaultProps;for(v in t)r2.call(t,v)&&!i2.hasOwnProperty(v)&&(i[v]=t[v]===void 0&&g!==void 0?g[v]:t[v])}var v=arguments.length-2;if(v===1)i.children=n;else if(1<v){g=Array(v);for(var y=0;y<v;y++)g[y]=arguments[y+2];i.children=g}return{$$typeof:Zc,type:e.type,key:a,ref:c,props:i,_owner:f}};Mt.createContext=function(e){return e={$$typeof:qC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:XC,_context:e},e.Consumer=e};Mt.createElement=s2;Mt.createFactory=function(e){var t=s2.bind(null,e);return t.type=e,t};Mt.createRef=function(){return{current:null}};Mt.forwardRef=function(e){return{$$typeof:KC,render:e}};Mt.isValidElement=Sp;Mt.lazy=function(e){return{$$typeof:JC,_payload:{_status:-1,_result:e},_init:rS}};Mt.memo=function(e,t){return{$$typeof:$C,type:e,compare:t===void 0?null:t}};Mt.startTransition=function(e){var t=Zu.transition;Zu.transition={};try{e()}finally{Zu.transition=t}};Mt.unstable_act=o2;Mt.useCallback=function(e,t){return Tr.current.useCallback(e,t)};Mt.useContext=function(e){return Tr.current.useContext(e)};Mt.useDebugValue=function(){};Mt.useDeferredValue=function(e){return Tr.current.useDeferredValue(e)};Mt.useEffect=function(e,t){return Tr.current.useEffect(e,t)};Mt.useId=function(){return Tr.current.useId()};Mt.useImperativeHandle=function(e,t,n){return Tr.current.useImperativeHandle(e,t,n)};Mt.useInsertionEffect=function(e,t){return Tr.current.useInsertionEffect(e,t)};Mt.useLayoutEffect=function(e,t){return Tr.current.useLayoutEffect(e,t)};Mt.useMemo=function(e,t){return Tr.current.useMemo(e,t)};Mt.useReducer=function(e,t,n){return Tr.current.useReducer(e,t,n)};Mt.useRef=function(e){return Tr.current.useRef(e)};Mt.useState=function(e){return Tr.current.useState(e)};Mt.useSyncExternalStore=function(e,t,n){return Tr.current.useSyncExternalStore(e,t,n)};Mt.useTransition=function(){return Tr.current.useTransition()};Mt.version="18.3.1";$y.exports=Mt;var j=$y.exports;const aa=Ky(j),sS=HC({__proto__:null,default:aa},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oS=j,aS=Symbol.for("react.element"),lS=Symbol.for("react.fragment"),cS=Object.prototype.hasOwnProperty,uS=oS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dS={key:!0,ref:!0,__self:!0,__source:!0};function a2(e,t,n){var i,a={},c=null,f=null;n!==void 0&&(c=""+n),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(f=t.ref);for(i in t)cS.call(t,i)&&!dS.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:aS,type:e,key:c,ref:f,props:a,_owner:uS.current}}eh.Fragment=lS;eh.jsx=a2;eh.jsxs=a2;Qy.exports=eh;var m=Qy.exports,Xf={},l2={exports:{}},ei={},c2={exports:{}},u2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ne,Se){var ye=ne.length;ne.push(Se);e:for(;0<ye;){var ge=ye-1>>>1,Me=ne[ge];if(0<a(Me,Se))ne[ge]=Se,ne[ye]=Me,ye=ge;else break e}}function n(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var Se=ne[0],ye=ne.pop();if(ye!==Se){ne[0]=ye;e:for(var ge=0,Me=ne.length,qe=Me>>>1;ge<qe;){var De=2*(ge+1)-1,ee=ne[De],oe=De+1,Le=ne[oe];if(0>a(ee,ye))oe<Me&&0>a(Le,ee)?(ne[ge]=Le,ne[oe]=ye,ge=oe):(ne[ge]=ee,ne[De]=ye,ge=De);else if(oe<Me&&0>a(Le,ye))ne[ge]=Le,ne[oe]=ye,ge=oe;else break e}}return Se}function a(ne,Se){var ye=ne.sortIndex-Se.sortIndex;return ye!==0?ye:ne.id-Se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var f=Date,g=f.now();e.unstable_now=function(){return f.now()-g}}var v=[],y=[],C=1,b=null,T=3,I=!1,F=!1,R=!1,B=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(ne){for(var Se=n(y);Se!==null;){if(Se.callback===null)i(y);else if(Se.startTime<=ne)i(y),Se.sortIndex=Se.expirationTime,t(v,Se);else break;Se=n(y)}}function W(ne){if(R=!1,k(ne),!F)if(n(v)!==null)F=!0,de(Q);else{var Se=n(y);Se!==null&&ke(W,Se.startTime-ne)}}function Q(ne,Se){F=!1,R&&(R=!1,z(q),q=-1),I=!0;var ye=T;try{for(k(Se),b=n(v);b!==null&&(!(b.expirationTime>Se)||ne&&!ie());){var ge=b.callback;if(typeof ge=="function"){b.callback=null,T=b.priorityLevel;var Me=ge(b.expirationTime<=Se);Se=e.unstable_now(),typeof Me=="function"?b.callback=Me:b===n(v)&&i(v),k(Se)}else i(v);b=n(v)}if(b!==null)var qe=!0;else{var De=n(y);De!==null&&ke(W,De.startTime-Se),qe=!1}return qe}finally{b=null,T=ye,I=!1}}var G=!1,H=null,q=-1,M=5,X=-1;function ie(){return!(e.unstable_now()-X<M)}function se(){if(H!==null){var ne=e.unstable_now();X=ne;var Se=!0;try{Se=H(!0,ne)}finally{Se?ve():(G=!1,H=null)}}else G=!1}var ve;if(typeof O=="function")ve=function(){O(se)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,ae=Ee.port2;Ee.port1.onmessage=se,ve=function(){ae.postMessage(null)}}else ve=function(){B(se,0)};function de(ne){H=ne,G||(G=!0,ve())}function ke(ne,Se){q=B(function(){ne(e.unstable_now())},Se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ne){ne.callback=null},e.unstable_continueExecution=function(){F||I||(F=!0,de(Q))},e.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ne?Math.floor(1e3/ne):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return n(v)},e.unstable_next=function(ne){switch(T){case 1:case 2:case 3:var Se=3;break;default:Se=T}var ye=T;T=Se;try{return ne()}finally{T=ye}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ne,Se){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ye=T;T=ne;try{return Se()}finally{T=ye}},e.unstable_scheduleCallback=function(ne,Se,ye){var ge=e.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?ge+ye:ge):ye=ge,ne){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=ye+Me,ne={id:C++,callback:Se,priorityLevel:ne,startTime:ye,expirationTime:Me,sortIndex:-1},ye>ge?(ne.sortIndex=ye,t(y,ne),n(v)===null&&ne===n(y)&&(R?(z(q),q=-1):R=!0,ke(W,ye-ge))):(ne.sortIndex=Me,t(v,ne),F||I||(F=!0,de(Q))),ne},e.unstable_shouldYield=ie,e.unstable_wrapCallback=function(ne){var Se=T;return function(){var ye=T;T=Se;try{return ne.apply(this,arguments)}finally{T=ye}}}})(u2);c2.exports=u2;var hS=c2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fS=j,$r=hS;function Ie(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d2=new Set,xc={};function pa(e,t){rl(e,t),rl(e+"Capture",t)}function rl(e,t){for(xc[e]=t,e=0;e<t.length;e++)d2.add(t[e])}var As=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qf=Object.prototype.hasOwnProperty,pS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Lm={},Pm={};function mS(e){return qf.call(Pm,e)?!0:qf.call(Lm,e)?!1:pS.test(e)?Pm[e]=!0:(Lm[e]=!0,!1)}function gS(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function xS(e,t,n,i){if(t===null||typeof t>"u"||gS(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ir(e,t,n,i,a,c,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=c,this.removeEmptyString=f}var nr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){nr[e]=new Ir(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];nr[t]=new Ir(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){nr[e]=new Ir(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){nr[e]=new Ir(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){nr[e]=new Ir(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){nr[e]=new Ir(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){nr[e]=new Ir(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){nr[e]=new Ir(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){nr[e]=new Ir(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ap=/[\-:]([a-z])/g;function Ep(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ap,Ep);nr[t]=new Ir(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ap,Ep);nr[t]=new Ir(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ap,Ep);nr[t]=new Ir(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){nr[e]=new Ir(e,1,!1,e.toLowerCase(),null,!1,!1)});nr.xlinkHref=new Ir("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){nr[e]=new Ir(e,1,!1,e.toLowerCase(),null,!0,!0)});function Np(e,t,n,i){var a=nr.hasOwnProperty(t)?nr[t]:null;(a!==null?a.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(xS(t,n,a,i)&&(n=null),i||a===null?mS(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,i=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var Ls=fS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yu=Symbol.for("react.element"),Ra=Symbol.for("react.portal"),Oa=Symbol.for("react.fragment"),Tp=Symbol.for("react.strict_mode"),Kf=Symbol.for("react.profiler"),h2=Symbol.for("react.provider"),f2=Symbol.for("react.context"),Ip=Symbol.for("react.forward_ref"),Qf=Symbol.for("react.suspense"),$f=Symbol.for("react.suspense_list"),kp=Symbol.for("react.memo"),qs=Symbol.for("react.lazy"),p2=Symbol.for("react.offscreen"),Dm=Symbol.iterator;function Dl(e){return e===null||typeof e!="object"?null:(e=Dm&&e[Dm]||e["@@iterator"],typeof e=="function"?e:null)}var bn=Object.assign,Qh;function ql(e){if(Qh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Qh=t&&t[1]||""}return`
`+Qh+e}var $h=!1;function Jh(e,t){if(!e||$h)return"";$h=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(y){var i=y}Reflect.construct(e,[],t)}else{try{t.call()}catch(y){i=y}e.call(t.prototype)}else{try{throw Error()}catch(y){i=y}e()}}catch(y){if(y&&i&&typeof y.stack=="string"){for(var a=y.stack.split(`
`),c=i.stack.split(`
`),f=a.length-1,g=c.length-1;1<=f&&0<=g&&a[f]!==c[g];)g--;for(;1<=f&&0<=g;f--,g--)if(a[f]!==c[g]){if(f!==1||g!==1)do if(f--,g--,0>g||a[f]!==c[g]){var v=`
`+a[f].replace(" at new "," at ");return e.displayName&&v.includes("<anonymous>")&&(v=v.replace("<anonymous>",e.displayName)),v}while(1<=f&&0<=g);break}}}finally{$h=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ql(e):""}function yS(e){switch(e.tag){case 5:return ql(e.type);case 16:return ql("Lazy");case 13:return ql("Suspense");case 19:return ql("SuspenseList");case 0:case 2:case 15:return e=Jh(e.type,!1),e;case 11:return e=Jh(e.type.render,!1),e;case 1:return e=Jh(e.type,!0),e;default:return""}}function Jf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Oa:return"Fragment";case Ra:return"Portal";case Kf:return"Profiler";case Tp:return"StrictMode";case Qf:return"Suspense";case $f:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case f2:return(e.displayName||"Context")+".Consumer";case h2:return(e._context.displayName||"Context")+".Provider";case Ip:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case kp:return t=e.displayName||null,t!==null?t:Jf(e.type)||"Memo";case qs:t=e._payload,e=e._init;try{return Jf(e(t))}catch{}}return null}function wS(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jf(t);case 8:return t===Tp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function wo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function m2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function vS(e){var t=m2(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,c=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(f){i=""+f,c.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wu(e){e._valueTracker||(e._valueTracker=vS(e))}function g2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=m2(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function ud(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function e0(e,t){var n=t.checked;return bn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function jm(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=wo(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function x2(e,t){t=t.checked,t!=null&&Np(e,"checked",t,!1)}function t0(e,t){x2(e,t);var n=wo(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?n0(e,t.type,n):t.hasOwnProperty("defaultValue")&&n0(e,t.type,wo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Bm(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function n0(e,t,n){(t!=="number"||ud(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Kl=Array.isArray;function Qa(e,t,n,i){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&i&&(e[n].defaultSelected=!0)}else{for(n=""+wo(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function r0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ie(91));return bn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Fm(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ie(92));if(Kl(n)){if(1<n.length)throw Error(Ie(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:wo(n)}}function y2(e,t){var n=wo(t.value),i=wo(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function zm(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function w2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function i0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?w2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var vu,v2=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(vu=vu||document.createElement("div"),vu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=vu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function yc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var tc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_S=["Webkit","ms","Moz","O"];Object.keys(tc).forEach(function(e){_S.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),tc[t]=tc[e]})});function _2(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||tc.hasOwnProperty(e)&&tc[e]?(""+t).trim():t+"px"}function b2(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,a=_2(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,a):e[n]=a}}var bS=bn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function s0(e,t){if(t){if(bS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ie(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ie(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ie(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ie(62))}}function o0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var a0=null;function Mp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var l0=null,$a=null,Ja=null;function Um(e){if(e=Xc(e)){if(typeof l0!="function")throw Error(Ie(280));var t=e.stateNode;t&&(t=sh(t),l0(e.stateNode,e.type,t))}}function C2(e){$a?Ja?Ja.push(e):Ja=[e]:$a=e}function S2(){if($a){var e=$a,t=Ja;if(Ja=$a=null,Um(e),t)for(e=0;e<t.length;e++)Um(t[e])}}function A2(e,t){return e(t)}function E2(){}var ef=!1;function N2(e,t,n){if(ef)return e(t,n);ef=!0;try{return A2(e,t,n)}finally{ef=!1,($a!==null||Ja!==null)&&(E2(),S2())}}function wc(e,t){var n=e.stateNode;if(n===null)return null;var i=sh(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ie(231,t,typeof n));return n}var c0=!1;if(As)try{var jl={};Object.defineProperty(jl,"passive",{get:function(){c0=!0}}),window.addEventListener("test",jl,jl),window.removeEventListener("test",jl,jl)}catch{c0=!1}function CS(e,t,n,i,a,c,f,g,v){var y=Array.prototype.slice.call(arguments,3);try{t.apply(n,y)}catch(C){this.onError(C)}}var nc=!1,dd=null,hd=!1,u0=null,SS={onError:function(e){nc=!0,dd=e}};function AS(e,t,n,i,a,c,f,g,v){nc=!1,dd=null,CS.apply(SS,arguments)}function ES(e,t,n,i,a,c,f,g,v){if(AS.apply(this,arguments),nc){if(nc){var y=dd;nc=!1,dd=null}else throw Error(Ie(198));hd||(hd=!0,u0=y)}}function ma(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function T2(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Vm(e){if(ma(e)!==e)throw Error(Ie(188))}function NS(e){var t=e.alternate;if(!t){if(t=ma(e),t===null)throw Error(Ie(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(a===null)break;var c=a.alternate;if(c===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===n)return Vm(a),e;if(c===i)return Vm(a),t;c=c.sibling}throw Error(Ie(188))}if(n.return!==i.return)n=a,i=c;else{for(var f=!1,g=a.child;g;){if(g===n){f=!0,n=a,i=c;break}if(g===i){f=!0,i=a,n=c;break}g=g.sibling}if(!f){for(g=c.child;g;){if(g===n){f=!0,n=c,i=a;break}if(g===i){f=!0,i=c,n=a;break}g=g.sibling}if(!f)throw Error(Ie(189))}}if(n.alternate!==i)throw Error(Ie(190))}if(n.tag!==3)throw Error(Ie(188));return n.stateNode.current===n?e:t}function I2(e){return e=NS(e),e!==null?k2(e):null}function k2(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=k2(e);if(t!==null)return t;e=e.sibling}return null}var M2=$r.unstable_scheduleCallback,Hm=$r.unstable_cancelCallback,TS=$r.unstable_shouldYield,IS=$r.unstable_requestPaint,In=$r.unstable_now,kS=$r.unstable_getCurrentPriorityLevel,Rp=$r.unstable_ImmediatePriority,R2=$r.unstable_UserBlockingPriority,fd=$r.unstable_NormalPriority,MS=$r.unstable_LowPriority,O2=$r.unstable_IdlePriority,th=null,$i=null;function RS(e){if($i&&typeof $i.onCommitFiberRoot=="function")try{$i.onCommitFiberRoot(th,e,void 0,(e.current.flags&128)===128)}catch{}}var Pi=Math.clz32?Math.clz32:PS,OS=Math.log,LS=Math.LN2;function PS(e){return e>>>=0,e===0?32:31-(OS(e)/LS|0)|0}var _u=64,bu=4194304;function Ql(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pd(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,a=e.suspendedLanes,c=e.pingedLanes,f=n&268435455;if(f!==0){var g=f&~a;g!==0?i=Ql(g):(c&=f,c!==0&&(i=Ql(c)))}else f=n&~a,f!==0?i=Ql(f):c!==0&&(i=Ql(c));if(i===0)return 0;if(t!==0&&t!==i&&!(t&a)&&(a=i&-i,c=t&-t,a>=c||a===16&&(c&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-Pi(t),a=1<<n,i|=e[n],t&=~a;return i}function DS(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jS(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,c=e.pendingLanes;0<c;){var f=31-Pi(c),g=1<<f,v=a[f];v===-1?(!(g&n)||g&i)&&(a[f]=DS(g,t)):v<=t&&(e.expiredLanes|=g),c&=~g}}function d0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function L2(){var e=_u;return _u<<=1,!(_u&4194240)&&(_u=64),e}function tf(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Gc(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Pi(t),e[t]=n}function BS(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Pi(n),c=1<<a;t[a]=0,i[a]=-1,e[a]=-1,n&=~c}}function Op(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Pi(n),a=1<<i;a&t|e[i]&t&&(e[i]|=t),n&=~a}}var Kt=0;function P2(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var D2,Lp,j2,B2,F2,h0=!1,Cu=[],so=null,oo=null,ao=null,vc=new Map,_c=new Map,Js=[],FS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wm(e,t){switch(e){case"focusin":case"focusout":so=null;break;case"dragenter":case"dragleave":oo=null;break;case"mouseover":case"mouseout":ao=null;break;case"pointerover":case"pointerout":vc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_c.delete(t.pointerId)}}function Bl(e,t,n,i,a,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:c,targetContainers:[a]},t!==null&&(t=Xc(t),t!==null&&Lp(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function zS(e,t,n,i,a){switch(t){case"focusin":return so=Bl(so,e,t,n,i,a),!0;case"dragenter":return oo=Bl(oo,e,t,n,i,a),!0;case"mouseover":return ao=Bl(ao,e,t,n,i,a),!0;case"pointerover":var c=a.pointerId;return vc.set(c,Bl(vc.get(c)||null,e,t,n,i,a)),!0;case"gotpointercapture":return c=a.pointerId,_c.set(c,Bl(_c.get(c)||null,e,t,n,i,a)),!0}return!1}function z2(e){var t=Ko(e.target);if(t!==null){var n=ma(t);if(n!==null){if(t=n.tag,t===13){if(t=T2(n),t!==null){e.blockedOn=t,F2(e.priority,function(){j2(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=f0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);a0=i,n.target.dispatchEvent(i),a0=null}else return t=Xc(n),t!==null&&Lp(t),e.blockedOn=n,!1;t.shift()}return!0}function Zm(e,t,n){Gu(e)&&n.delete(t)}function US(){h0=!1,so!==null&&Gu(so)&&(so=null),oo!==null&&Gu(oo)&&(oo=null),ao!==null&&Gu(ao)&&(ao=null),vc.forEach(Zm),_c.forEach(Zm)}function Fl(e,t){e.blockedOn===t&&(e.blockedOn=null,h0||(h0=!0,$r.unstable_scheduleCallback($r.unstable_NormalPriority,US)))}function bc(e){function t(a){return Fl(a,e)}if(0<Cu.length){Fl(Cu[0],e);for(var n=1;n<Cu.length;n++){var i=Cu[n];i.blockedOn===e&&(i.blockedOn=null)}}for(so!==null&&Fl(so,e),oo!==null&&Fl(oo,e),ao!==null&&Fl(ao,e),vc.forEach(t),_c.forEach(t),n=0;n<Js.length;n++)i=Js[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<Js.length&&(n=Js[0],n.blockedOn===null);)z2(n),n.blockedOn===null&&Js.shift()}var el=Ls.ReactCurrentBatchConfig,md=!0;function VS(e,t,n,i){var a=Kt,c=el.transition;el.transition=null;try{Kt=1,Pp(e,t,n,i)}finally{Kt=a,el.transition=c}}function HS(e,t,n,i){var a=Kt,c=el.transition;el.transition=null;try{Kt=4,Pp(e,t,n,i)}finally{Kt=a,el.transition=c}}function Pp(e,t,n,i){if(md){var a=f0(e,t,n,i);if(a===null)hf(e,t,i,gd,n),Wm(e,i);else if(zS(a,e,t,n,i))i.stopPropagation();else if(Wm(e,i),t&4&&-1<FS.indexOf(e)){for(;a!==null;){var c=Xc(a);if(c!==null&&D2(c),c=f0(e,t,n,i),c===null&&hf(e,t,i,gd,n),c===a)break;a=c}a!==null&&i.stopPropagation()}else hf(e,t,i,null,n)}}var gd=null;function f0(e,t,n,i){if(gd=null,e=Mp(i),e=Ko(e),e!==null)if(t=ma(e),t===null)e=null;else if(n=t.tag,n===13){if(e=T2(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return gd=e,null}function U2(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kS()){case Rp:return 1;case R2:return 4;case fd:case MS:return 16;case O2:return 536870912;default:return 16}default:return 16}}var no=null,Dp=null,Yu=null;function V2(){if(Yu)return Yu;var e,t=Dp,n=t.length,i,a="value"in no?no.value:no.textContent,c=a.length;for(e=0;e<n&&t[e]===a[e];e++);var f=n-e;for(i=1;i<=f&&t[n-i]===a[c-i];i++);return Yu=a.slice(e,1<i?1-i:void 0)}function Xu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Su(){return!0}function Gm(){return!1}function ti(e){function t(n,i,a,c,f){this._reactName=n,this._targetInst=a,this.type=i,this.nativeEvent=c,this.target=f,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(n=e[g],this[g]=n?n(c):c[g]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Su:Gm,this.isPropagationStopped=Gm,this}return bn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Su)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Su)},persist:function(){},isPersistent:Su}),t}var ml={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jp=ti(ml),Yc=bn({},ml,{view:0,detail:0}),WS=ti(Yc),nf,rf,zl,nh=bn({},Yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zl&&(zl&&e.type==="mousemove"?(nf=e.screenX-zl.screenX,rf=e.screenY-zl.screenY):rf=nf=0,zl=e),nf)},movementY:function(e){return"movementY"in e?e.movementY:rf}}),Ym=ti(nh),ZS=bn({},nh,{dataTransfer:0}),GS=ti(ZS),YS=bn({},Yc,{relatedTarget:0}),sf=ti(YS),XS=bn({},ml,{animationName:0,elapsedTime:0,pseudoElement:0}),qS=ti(XS),KS=bn({},ml,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),QS=ti(KS),$S=bn({},ml,{data:0}),Xm=ti($S),JS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},e3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=t3[e])?!!t[e]:!1}function Bp(){return n3}var r3=bn({},Yc,{key:function(e){if(e.key){var t=JS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?e3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bp,charCode:function(e){return e.type==="keypress"?Xu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),i3=ti(r3),s3=bn({},nh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qm=ti(s3),o3=bn({},Yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bp}),a3=ti(o3),l3=bn({},ml,{propertyName:0,elapsedTime:0,pseudoElement:0}),c3=ti(l3),u3=bn({},nh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),d3=ti(u3),h3=[9,13,27,32],Fp=As&&"CompositionEvent"in window,rc=null;As&&"documentMode"in document&&(rc=document.documentMode);var f3=As&&"TextEvent"in window&&!rc,H2=As&&(!Fp||rc&&8<rc&&11>=rc),Km=" ",Qm=!1;function W2(e,t){switch(e){case"keyup":return h3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var La=!1;function p3(e,t){switch(e){case"compositionend":return Z2(t);case"keypress":return t.which!==32?null:(Qm=!0,Km);case"textInput":return e=t.data,e===Km&&Qm?null:e;default:return null}}function m3(e,t){if(La)return e==="compositionend"||!Fp&&W2(e,t)?(e=V2(),Yu=Dp=no=null,La=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return H2&&t.locale!=="ko"?null:t.data;default:return null}}var g3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $m(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!g3[e.type]:t==="textarea"}function G2(e,t,n,i){C2(i),t=xd(t,"onChange"),0<t.length&&(n=new jp("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var ic=null,Cc=null;function x3(e){rw(e,0)}function rh(e){var t=ja(e);if(g2(t))return e}function y3(e,t){if(e==="change")return t}var Y2=!1;if(As){var of;if(As){var af="oninput"in document;if(!af){var Jm=document.createElement("div");Jm.setAttribute("oninput","return;"),af=typeof Jm.oninput=="function"}of=af}else of=!1;Y2=of&&(!document.documentMode||9<document.documentMode)}function eg(){ic&&(ic.detachEvent("onpropertychange",X2),Cc=ic=null)}function X2(e){if(e.propertyName==="value"&&rh(Cc)){var t=[];G2(t,Cc,e,Mp(e)),N2(x3,t)}}function w3(e,t,n){e==="focusin"?(eg(),ic=t,Cc=n,ic.attachEvent("onpropertychange",X2)):e==="focusout"&&eg()}function v3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rh(Cc)}function _3(e,t){if(e==="click")return rh(t)}function b3(e,t){if(e==="input"||e==="change")return rh(t)}function C3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ji=typeof Object.is=="function"?Object.is:C3;function Sc(e,t){if(ji(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!qf.call(t,a)||!ji(e[a],t[a]))return!1}return!0}function tg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ng(e,t){var n=tg(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tg(n)}}function q2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?q2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function K2(){for(var e=window,t=ud();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ud(e.document)}return t}function zp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function S3(e){var t=K2(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&q2(n.ownerDocument.documentElement,n)){if(i!==null&&zp(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,c=Math.min(i.start,a);i=i.end===void 0?c:Math.min(i.end,a),!e.extend&&c>i&&(a=i,i=c,c=a),a=ng(n,c);var f=ng(n,i);a&&f&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),c>i?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var A3=As&&"documentMode"in document&&11>=document.documentMode,Pa=null,p0=null,sc=null,m0=!1;function rg(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;m0||Pa==null||Pa!==ud(i)||(i=Pa,"selectionStart"in i&&zp(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),sc&&Sc(sc,i)||(sc=i,i=xd(p0,"onSelect"),0<i.length&&(t=new jp("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Pa)))}function Au(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Da={animationend:Au("Animation","AnimationEnd"),animationiteration:Au("Animation","AnimationIteration"),animationstart:Au("Animation","AnimationStart"),transitionend:Au("Transition","TransitionEnd")},lf={},Q2={};As&&(Q2=document.createElement("div").style,"AnimationEvent"in window||(delete Da.animationend.animation,delete Da.animationiteration.animation,delete Da.animationstart.animation),"TransitionEvent"in window||delete Da.transitionend.transition);function ih(e){if(lf[e])return lf[e];if(!Da[e])return e;var t=Da[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Q2)return lf[e]=t[n];return e}var $2=ih("animationend"),J2=ih("animationiteration"),ew=ih("animationstart"),tw=ih("transitionend"),nw=new Map,ig="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function So(e,t){nw.set(e,t),pa(t,[e])}for(var cf=0;cf<ig.length;cf++){var uf=ig[cf],E3=uf.toLowerCase(),N3=uf[0].toUpperCase()+uf.slice(1);So(E3,"on"+N3)}So($2,"onAnimationEnd");So(J2,"onAnimationIteration");So(ew,"onAnimationStart");So("dblclick","onDoubleClick");So("focusin","onFocus");So("focusout","onBlur");So(tw,"onTransitionEnd");rl("onMouseEnter",["mouseout","mouseover"]);rl("onMouseLeave",["mouseout","mouseover"]);rl("onPointerEnter",["pointerout","pointerover"]);rl("onPointerLeave",["pointerout","pointerover"]);pa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pa("onBeforeInput",["compositionend","keypress","textInput","paste"]);pa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T3=new Set("cancel close invalid load scroll toggle".split(" ").concat($l));function sg(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,ES(i,t,void 0,e),e.currentTarget=null}function rw(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],a=i.event;i=i.listeners;e:{var c=void 0;if(t)for(var f=i.length-1;0<=f;f--){var g=i[f],v=g.instance,y=g.currentTarget;if(g=g.listener,v!==c&&a.isPropagationStopped())break e;sg(a,g,y),c=v}else for(f=0;f<i.length;f++){if(g=i[f],v=g.instance,y=g.currentTarget,g=g.listener,v!==c&&a.isPropagationStopped())break e;sg(a,g,y),c=v}}}if(hd)throw e=u0,hd=!1,u0=null,e}function dn(e,t){var n=t[v0];n===void 0&&(n=t[v0]=new Set);var i=e+"__bubble";n.has(i)||(iw(t,e,2,!1),n.add(i))}function df(e,t,n){var i=0;t&&(i|=4),iw(n,e,i,t)}var Eu="_reactListening"+Math.random().toString(36).slice(2);function Ac(e){if(!e[Eu]){e[Eu]=!0,d2.forEach(function(n){n!=="selectionchange"&&(T3.has(n)||df(n,!1,e),df(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Eu]||(t[Eu]=!0,df("selectionchange",!1,t))}}function iw(e,t,n,i){switch(U2(t)){case 1:var a=VS;break;case 4:a=HS;break;default:a=Pp}n=a.bind(null,t,n,e),a=void 0,!c0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function hf(e,t,n,i,a){var c=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var g=i.stateNode.containerInfo;if(g===a||g.nodeType===8&&g.parentNode===a)break;if(f===4)for(f=i.return;f!==null;){var v=f.tag;if((v===3||v===4)&&(v=f.stateNode.containerInfo,v===a||v.nodeType===8&&v.parentNode===a))return;f=f.return}for(;g!==null;){if(f=Ko(g),f===null)return;if(v=f.tag,v===5||v===6){i=c=f;continue e}g=g.parentNode}}i=i.return}N2(function(){var y=c,C=Mp(n),b=[];e:{var T=nw.get(e);if(T!==void 0){var I=jp,F=e;switch(e){case"keypress":if(Xu(n)===0)break e;case"keydown":case"keyup":I=i3;break;case"focusin":F="focus",I=sf;break;case"focusout":F="blur",I=sf;break;case"beforeblur":case"afterblur":I=sf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Ym;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=GS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=a3;break;case $2:case J2:case ew:I=qS;break;case tw:I=c3;break;case"scroll":I=WS;break;case"wheel":I=d3;break;case"copy":case"cut":case"paste":I=QS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=qm}var R=(t&4)!==0,B=!R&&e==="scroll",z=R?T!==null?T+"Capture":null:T;R=[];for(var O=y,k;O!==null;){k=O;var W=k.stateNode;if(k.tag===5&&W!==null&&(k=W,z!==null&&(W=wc(O,z),W!=null&&R.push(Ec(O,W,k)))),B)break;O=O.return}0<R.length&&(T=new I(T,F,null,n,C),b.push({event:T,listeners:R}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",T&&n!==a0&&(F=n.relatedTarget||n.fromElement)&&(Ko(F)||F[Es]))break e;if((I||T)&&(T=C.window===C?C:(T=C.ownerDocument)?T.defaultView||T.parentWindow:window,I?(F=n.relatedTarget||n.toElement,I=y,F=F?Ko(F):null,F!==null&&(B=ma(F),F!==B||F.tag!==5&&F.tag!==6)&&(F=null)):(I=null,F=y),I!==F)){if(R=Ym,W="onMouseLeave",z="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(R=qm,W="onPointerLeave",z="onPointerEnter",O="pointer"),B=I==null?T:ja(I),k=F==null?T:ja(F),T=new R(W,O+"leave",I,n,C),T.target=B,T.relatedTarget=k,W=null,Ko(C)===y&&(R=new R(z,O+"enter",F,n,C),R.target=k,R.relatedTarget=B,W=R),B=W,I&&F)t:{for(R=I,z=F,O=0,k=R;k;k=Ia(k))O++;for(k=0,W=z;W;W=Ia(W))k++;for(;0<O-k;)R=Ia(R),O--;for(;0<k-O;)z=Ia(z),k--;for(;O--;){if(R===z||z!==null&&R===z.alternate)break t;R=Ia(R),z=Ia(z)}R=null}else R=null;I!==null&&og(b,T,I,R,!1),F!==null&&B!==null&&og(b,B,F,R,!0)}}e:{if(T=y?ja(y):window,I=T.nodeName&&T.nodeName.toLowerCase(),I==="select"||I==="input"&&T.type==="file")var Q=y3;else if($m(T))if(Y2)Q=b3;else{Q=v3;var G=w3}else(I=T.nodeName)&&I.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(Q=_3);if(Q&&(Q=Q(e,y))){G2(b,Q,n,C);break e}G&&G(e,T,y),e==="focusout"&&(G=T._wrapperState)&&G.controlled&&T.type==="number"&&n0(T,"number",T.value)}switch(G=y?ja(y):window,e){case"focusin":($m(G)||G.contentEditable==="true")&&(Pa=G,p0=y,sc=null);break;case"focusout":sc=p0=Pa=null;break;case"mousedown":m0=!0;break;case"contextmenu":case"mouseup":case"dragend":m0=!1,rg(b,n,C);break;case"selectionchange":if(A3)break;case"keydown":case"keyup":rg(b,n,C)}var H;if(Fp)e:{switch(e){case"compositionstart":var q="onCompositionStart";break e;case"compositionend":q="onCompositionEnd";break e;case"compositionupdate":q="onCompositionUpdate";break e}q=void 0}else La?W2(e,n)&&(q="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(q="onCompositionStart");q&&(H2&&n.locale!=="ko"&&(La||q!=="onCompositionStart"?q==="onCompositionEnd"&&La&&(H=V2()):(no=C,Dp="value"in no?no.value:no.textContent,La=!0)),G=xd(y,q),0<G.length&&(q=new Xm(q,e,null,n,C),b.push({event:q,listeners:G}),H?q.data=H:(H=Z2(n),H!==null&&(q.data=H)))),(H=f3?p3(e,n):m3(e,n))&&(y=xd(y,"onBeforeInput"),0<y.length&&(C=new Xm("onBeforeInput","beforeinput",null,n,C),b.push({event:C,listeners:y}),C.data=H))}rw(b,t)})}function Ec(e,t,n){return{instance:e,listener:t,currentTarget:n}}function xd(e,t){for(var n=t+"Capture",i=[];e!==null;){var a=e,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=wc(e,n),c!=null&&i.unshift(Ec(e,c,a)),c=wc(e,t),c!=null&&i.push(Ec(e,c,a))),e=e.return}return i}function Ia(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function og(e,t,n,i,a){for(var c=t._reactName,f=[];n!==null&&n!==i;){var g=n,v=g.alternate,y=g.stateNode;if(v!==null&&v===i)break;g.tag===5&&y!==null&&(g=y,a?(v=wc(n,c),v!=null&&f.unshift(Ec(n,v,g))):a||(v=wc(n,c),v!=null&&f.push(Ec(n,v,g)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var I3=/\r\n?/g,k3=/\u0000|\uFFFD/g;function ag(e){return(typeof e=="string"?e:""+e).replace(I3,`
`).replace(k3,"")}function Nu(e,t,n){if(t=ag(t),ag(e)!==t&&n)throw Error(Ie(425))}function yd(){}var g0=null,x0=null;function y0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var w0=typeof setTimeout=="function"?setTimeout:void 0,M3=typeof clearTimeout=="function"?clearTimeout:void 0,lg=typeof Promise=="function"?Promise:void 0,R3=typeof queueMicrotask=="function"?queueMicrotask:typeof lg<"u"?function(e){return lg.resolve(null).then(e).catch(O3)}:w0;function O3(e){setTimeout(function(){throw e})}function ff(e,t){var n=t,i=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(i===0){e.removeChild(a),bc(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=a}while(n);bc(t)}function lo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function cg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var gl=Math.random().toString(36).slice(2),Qi="__reactFiber$"+gl,Nc="__reactProps$"+gl,Es="__reactContainer$"+gl,v0="__reactEvents$"+gl,L3="__reactListeners$"+gl,P3="__reactHandles$"+gl;function Ko(e){var t=e[Qi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Es]||n[Qi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=cg(e);e!==null;){if(n=e[Qi])return n;e=cg(e)}return t}e=n,n=e.parentNode}return null}function Xc(e){return e=e[Qi]||e[Es],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ja(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ie(33))}function sh(e){return e[Nc]||null}var _0=[],Ba=-1;function Ao(e){return{current:e}}function hn(e){0>Ba||(e.current=_0[Ba],_0[Ba]=null,Ba--)}function an(e,t){Ba++,_0[Ba]=e.current,e.current=t}var vo={},pr=Ao(vo),Pr=Ao(!1),la=vo;function il(e,t){var n=e.type.contextTypes;if(!n)return vo;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in n)a[c]=t[c];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Dr(e){return e=e.childContextTypes,e!=null}function wd(){hn(Pr),hn(pr)}function ug(e,t,n){if(pr.current!==vo)throw Error(Ie(168));an(pr,t),an(Pr,n)}function sw(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var a in i)if(!(a in t))throw Error(Ie(108,wS(e)||"Unknown",a));return bn({},n,i)}function vd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vo,la=pr.current,an(pr,e),an(Pr,Pr.current),!0}function dg(e,t,n){var i=e.stateNode;if(!i)throw Error(Ie(169));n?(e=sw(e,t,la),i.__reactInternalMemoizedMergedChildContext=e,hn(Pr),hn(pr),an(pr,e)):hn(Pr),an(Pr,n)}var gs=null,oh=!1,pf=!1;function ow(e){gs===null?gs=[e]:gs.push(e)}function D3(e){oh=!0,ow(e)}function Eo(){if(!pf&&gs!==null){pf=!0;var e=0,t=Kt;try{var n=gs;for(Kt=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}gs=null,oh=!1}catch(a){throw gs!==null&&(gs=gs.slice(e+1)),M2(Rp,Eo),a}finally{Kt=t,pf=!1}}return null}var Fa=[],za=0,_d=null,bd=0,gi=[],xi=0,ca=null,xs=1,ys="";function Wo(e,t){Fa[za++]=bd,Fa[za++]=_d,_d=e,bd=t}function aw(e,t,n){gi[xi++]=xs,gi[xi++]=ys,gi[xi++]=ca,ca=e;var i=xs;e=ys;var a=32-Pi(i)-1;i&=~(1<<a),n+=1;var c=32-Pi(t)+a;if(30<c){var f=a-a%5;c=(i&(1<<f)-1).toString(32),i>>=f,a-=f,xs=1<<32-Pi(t)+a|n<<a|i,ys=c+e}else xs=1<<c|n<<a|i,ys=e}function Up(e){e.return!==null&&(Wo(e,1),aw(e,1,0))}function Vp(e){for(;e===_d;)_d=Fa[--za],Fa[za]=null,bd=Fa[--za],Fa[za]=null;for(;e===ca;)ca=gi[--xi],gi[xi]=null,ys=gi[--xi],gi[xi]=null,xs=gi[--xi],gi[xi]=null}var Qr=null,Kr=null,gn=!1,Li=null;function lw(e,t){var n=yi(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function hg(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Qr=e,Kr=lo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Qr=e,Kr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ca!==null?{id:xs,overflow:ys}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=yi(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Qr=e,Kr=null,!0):!1;default:return!1}}function b0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function C0(e){if(gn){var t=Kr;if(t){var n=t;if(!hg(e,t)){if(b0(e))throw Error(Ie(418));t=lo(n.nextSibling);var i=Qr;t&&hg(e,t)?lw(i,n):(e.flags=e.flags&-4097|2,gn=!1,Qr=e)}}else{if(b0(e))throw Error(Ie(418));e.flags=e.flags&-4097|2,gn=!1,Qr=e}}}function fg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qr=e}function Tu(e){if(e!==Qr)return!1;if(!gn)return fg(e),gn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!y0(e.type,e.memoizedProps)),t&&(t=Kr)){if(b0(e))throw cw(),Error(Ie(418));for(;t;)lw(e,t),t=lo(t.nextSibling)}if(fg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ie(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Kr=lo(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Kr=null}}else Kr=Qr?lo(e.stateNode.nextSibling):null;return!0}function cw(){for(var e=Kr;e;)e=lo(e.nextSibling)}function sl(){Kr=Qr=null,gn=!1}function Hp(e){Li===null?Li=[e]:Li.push(e)}var j3=Ls.ReactCurrentBatchConfig;function Ul(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ie(309));var i=n.stateNode}if(!i)throw Error(Ie(147,e));var a=i,c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(f){var g=a.refs;f===null?delete g[c]:g[c]=f},t._stringRef=c,t)}if(typeof e!="string")throw Error(Ie(284));if(!n._owner)throw Error(Ie(290,e))}return e}function Iu(e,t){throw e=Object.prototype.toString.call(t),Error(Ie(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pg(e){var t=e._init;return t(e._payload)}function uw(e){function t(z,O){if(e){var k=z.deletions;k===null?(z.deletions=[O],z.flags|=16):k.push(O)}}function n(z,O){if(!e)return null;for(;O!==null;)t(z,O),O=O.sibling;return null}function i(z,O){for(z=new Map;O!==null;)O.key!==null?z.set(O.key,O):z.set(O.index,O),O=O.sibling;return z}function a(z,O){return z=fo(z,O),z.index=0,z.sibling=null,z}function c(z,O,k){return z.index=k,e?(k=z.alternate,k!==null?(k=k.index,k<O?(z.flags|=2,O):k):(z.flags|=2,O)):(z.flags|=1048576,O)}function f(z){return e&&z.alternate===null&&(z.flags|=2),z}function g(z,O,k,W){return O===null||O.tag!==6?(O=_f(k,z.mode,W),O.return=z,O):(O=a(O,k),O.return=z,O)}function v(z,O,k,W){var Q=k.type;return Q===Oa?C(z,O,k.props.children,W,k.key):O!==null&&(O.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===qs&&pg(Q)===O.type)?(W=a(O,k.props),W.ref=Ul(z,O,k),W.return=z,W):(W=td(k.type,k.key,k.props,null,z.mode,W),W.ref=Ul(z,O,k),W.return=z,W)}function y(z,O,k,W){return O===null||O.tag!==4||O.stateNode.containerInfo!==k.containerInfo||O.stateNode.implementation!==k.implementation?(O=bf(k,z.mode,W),O.return=z,O):(O=a(O,k.children||[]),O.return=z,O)}function C(z,O,k,W,Q){return O===null||O.tag!==7?(O=na(k,z.mode,W,Q),O.return=z,O):(O=a(O,k),O.return=z,O)}function b(z,O,k){if(typeof O=="string"&&O!==""||typeof O=="number")return O=_f(""+O,z.mode,k),O.return=z,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case yu:return k=td(O.type,O.key,O.props,null,z.mode,k),k.ref=Ul(z,null,O),k.return=z,k;case Ra:return O=bf(O,z.mode,k),O.return=z,O;case qs:var W=O._init;return b(z,W(O._payload),k)}if(Kl(O)||Dl(O))return O=na(O,z.mode,k,null),O.return=z,O;Iu(z,O)}return null}function T(z,O,k,W){var Q=O!==null?O.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return Q!==null?null:g(z,O,""+k,W);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case yu:return k.key===Q?v(z,O,k,W):null;case Ra:return k.key===Q?y(z,O,k,W):null;case qs:return Q=k._init,T(z,O,Q(k._payload),W)}if(Kl(k)||Dl(k))return Q!==null?null:C(z,O,k,W,null);Iu(z,k)}return null}function I(z,O,k,W,Q){if(typeof W=="string"&&W!==""||typeof W=="number")return z=z.get(k)||null,g(O,z,""+W,Q);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case yu:return z=z.get(W.key===null?k:W.key)||null,v(O,z,W,Q);case Ra:return z=z.get(W.key===null?k:W.key)||null,y(O,z,W,Q);case qs:var G=W._init;return I(z,O,k,G(W._payload),Q)}if(Kl(W)||Dl(W))return z=z.get(k)||null,C(O,z,W,Q,null);Iu(O,W)}return null}function F(z,O,k,W){for(var Q=null,G=null,H=O,q=O=0,M=null;H!==null&&q<k.length;q++){H.index>q?(M=H,H=null):M=H.sibling;var X=T(z,H,k[q],W);if(X===null){H===null&&(H=M);break}e&&H&&X.alternate===null&&t(z,H),O=c(X,O,q),G===null?Q=X:G.sibling=X,G=X,H=M}if(q===k.length)return n(z,H),gn&&Wo(z,q),Q;if(H===null){for(;q<k.length;q++)H=b(z,k[q],W),H!==null&&(O=c(H,O,q),G===null?Q=H:G.sibling=H,G=H);return gn&&Wo(z,q),Q}for(H=i(z,H);q<k.length;q++)M=I(H,z,q,k[q],W),M!==null&&(e&&M.alternate!==null&&H.delete(M.key===null?q:M.key),O=c(M,O,q),G===null?Q=M:G.sibling=M,G=M);return e&&H.forEach(function(ie){return t(z,ie)}),gn&&Wo(z,q),Q}function R(z,O,k,W){var Q=Dl(k);if(typeof Q!="function")throw Error(Ie(150));if(k=Q.call(k),k==null)throw Error(Ie(151));for(var G=Q=null,H=O,q=O=0,M=null,X=k.next();H!==null&&!X.done;q++,X=k.next()){H.index>q?(M=H,H=null):M=H.sibling;var ie=T(z,H,X.value,W);if(ie===null){H===null&&(H=M);break}e&&H&&ie.alternate===null&&t(z,H),O=c(ie,O,q),G===null?Q=ie:G.sibling=ie,G=ie,H=M}if(X.done)return n(z,H),gn&&Wo(z,q),Q;if(H===null){for(;!X.done;q++,X=k.next())X=b(z,X.value,W),X!==null&&(O=c(X,O,q),G===null?Q=X:G.sibling=X,G=X);return gn&&Wo(z,q),Q}for(H=i(z,H);!X.done;q++,X=k.next())X=I(H,z,q,X.value,W),X!==null&&(e&&X.alternate!==null&&H.delete(X.key===null?q:X.key),O=c(X,O,q),G===null?Q=X:G.sibling=X,G=X);return e&&H.forEach(function(se){return t(z,se)}),gn&&Wo(z,q),Q}function B(z,O,k,W){if(typeof k=="object"&&k!==null&&k.type===Oa&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case yu:e:{for(var Q=k.key,G=O;G!==null;){if(G.key===Q){if(Q=k.type,Q===Oa){if(G.tag===7){n(z,G.sibling),O=a(G,k.props.children),O.return=z,z=O;break e}}else if(G.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===qs&&pg(Q)===G.type){n(z,G.sibling),O=a(G,k.props),O.ref=Ul(z,G,k),O.return=z,z=O;break e}n(z,G);break}else t(z,G);G=G.sibling}k.type===Oa?(O=na(k.props.children,z.mode,W,k.key),O.return=z,z=O):(W=td(k.type,k.key,k.props,null,z.mode,W),W.ref=Ul(z,O,k),W.return=z,z=W)}return f(z);case Ra:e:{for(G=k.key;O!==null;){if(O.key===G)if(O.tag===4&&O.stateNode.containerInfo===k.containerInfo&&O.stateNode.implementation===k.implementation){n(z,O.sibling),O=a(O,k.children||[]),O.return=z,z=O;break e}else{n(z,O);break}else t(z,O);O=O.sibling}O=bf(k,z.mode,W),O.return=z,z=O}return f(z);case qs:return G=k._init,B(z,O,G(k._payload),W)}if(Kl(k))return F(z,O,k,W);if(Dl(k))return R(z,O,k,W);Iu(z,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,O!==null&&O.tag===6?(n(z,O.sibling),O=a(O,k),O.return=z,z=O):(n(z,O),O=_f(k,z.mode,W),O.return=z,z=O),f(z)):n(z,O)}return B}var ol=uw(!0),dw=uw(!1),Cd=Ao(null),Sd=null,Ua=null,Wp=null;function Zp(){Wp=Ua=Sd=null}function Gp(e){var t=Cd.current;hn(Cd),e._currentValue=t}function S0(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function tl(e,t){Sd=e,Wp=Ua=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Lr=!0),e.firstContext=null)}function vi(e){var t=e._currentValue;if(Wp!==e)if(e={context:e,memoizedValue:t,next:null},Ua===null){if(Sd===null)throw Error(Ie(308));Ua=e,Sd.dependencies={lanes:0,firstContext:e}}else Ua=Ua.next=e;return t}var Qo=null;function Yp(e){Qo===null?Qo=[e]:Qo.push(e)}function hw(e,t,n,i){var a=t.interleaved;return a===null?(n.next=n,Yp(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ns(e,i)}function Ns(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ks=!1;function Xp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function co(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,zt&2){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,Ns(e,n)}return a=i.interleaved,a===null?(t.next=t,Yp(i)):(t.next=a.next,a.next=t),i.interleaved=t,Ns(e,n)}function qu(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Op(e,n)}}function mg(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var a=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};c===null?a=c=f:c=c.next=f,n=n.next}while(n!==null);c===null?a=c=t:c=c.next=t}else a=c=t;n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ad(e,t,n,i){var a=e.updateQueue;Ks=!1;var c=a.firstBaseUpdate,f=a.lastBaseUpdate,g=a.shared.pending;if(g!==null){a.shared.pending=null;var v=g,y=v.next;v.next=null,f===null?c=y:f.next=y,f=v;var C=e.alternate;C!==null&&(C=C.updateQueue,g=C.lastBaseUpdate,g!==f&&(g===null?C.firstBaseUpdate=y:g.next=y,C.lastBaseUpdate=v))}if(c!==null){var b=a.baseState;f=0,C=y=v=null,g=c;do{var T=g.lane,I=g.eventTime;if((i&T)===T){C!==null&&(C=C.next={eventTime:I,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var F=e,R=g;switch(T=t,I=n,R.tag){case 1:if(F=R.payload,typeof F=="function"){b=F.call(I,b,T);break e}b=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=R.payload,T=typeof F=="function"?F.call(I,b,T):F,T==null)break e;b=bn({},b,T);break e;case 2:Ks=!0}}g.callback!==null&&g.lane!==0&&(e.flags|=64,T=a.effects,T===null?a.effects=[g]:T.push(g))}else I={eventTime:I,lane:T,tag:g.tag,payload:g.payload,callback:g.callback,next:null},C===null?(y=C=I,v=b):C=C.next=I,f|=T;if(g=g.next,g===null){if(g=a.shared.pending,g===null)break;T=g,g=T.next,T.next=null,a.lastBaseUpdate=T,a.shared.pending=null}}while(!0);if(C===null&&(v=b),a.baseState=v,a.firstBaseUpdate=y,a.lastBaseUpdate=C,t=a.shared.interleaved,t!==null){a=t;do f|=a.lane,a=a.next;while(a!==t)}else c===null&&(a.shared.lanes=0);da|=f,e.lanes=f,e.memoizedState=b}}function gg(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],a=i.callback;if(a!==null){if(i.callback=null,i=n,typeof a!="function")throw Error(Ie(191,a));a.call(i)}}}var qc={},Ji=Ao(qc),Tc=Ao(qc),Ic=Ao(qc);function $o(e){if(e===qc)throw Error(Ie(174));return e}function qp(e,t){switch(an(Ic,t),an(Tc,e),an(Ji,qc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:i0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=i0(t,e)}hn(Ji),an(Ji,t)}function al(){hn(Ji),hn(Tc),hn(Ic)}function pw(e){$o(Ic.current);var t=$o(Ji.current),n=i0(t,e.type);t!==n&&(an(Tc,e),an(Ji,n))}function Kp(e){Tc.current===e&&(hn(Ji),hn(Tc))}var wn=Ao(0);function Ed(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var mf=[];function Qp(){for(var e=0;e<mf.length;e++)mf[e]._workInProgressVersionPrimary=null;mf.length=0}var Ku=Ls.ReactCurrentDispatcher,gf=Ls.ReactCurrentBatchConfig,ua=0,_n=null,Hn=null,Qn=null,Nd=!1,oc=!1,kc=0,B3=0;function cr(){throw Error(Ie(321))}function $p(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ji(e[n],t[n]))return!1;return!0}function Jp(e,t,n,i,a,c){if(ua=c,_n=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ku.current=e===null||e.memoizedState===null?V3:H3,e=n(i,a),oc){c=0;do{if(oc=!1,kc=0,25<=c)throw Error(Ie(301));c+=1,Qn=Hn=null,t.updateQueue=null,Ku.current=W3,e=n(i,a)}while(oc)}if(Ku.current=Td,t=Hn!==null&&Hn.next!==null,ua=0,Qn=Hn=_n=null,Nd=!1,t)throw Error(Ie(300));return e}function e1(){var e=kc!==0;return kc=0,e}function qi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qn===null?_n.memoizedState=Qn=e:Qn=Qn.next=e,Qn}function _i(){if(Hn===null){var e=_n.alternate;e=e!==null?e.memoizedState:null}else e=Hn.next;var t=Qn===null?_n.memoizedState:Qn.next;if(t!==null)Qn=t,Hn=e;else{if(e===null)throw Error(Ie(310));Hn=e,e={memoizedState:Hn.memoizedState,baseState:Hn.baseState,baseQueue:Hn.baseQueue,queue:Hn.queue,next:null},Qn===null?_n.memoizedState=Qn=e:Qn=Qn.next=e}return Qn}function Mc(e,t){return typeof t=="function"?t(e):t}function xf(e){var t=_i(),n=t.queue;if(n===null)throw Error(Ie(311));n.lastRenderedReducer=e;var i=Hn,a=i.baseQueue,c=n.pending;if(c!==null){if(a!==null){var f=a.next;a.next=c.next,c.next=f}i.baseQueue=a=c,n.pending=null}if(a!==null){c=a.next,i=i.baseState;var g=f=null,v=null,y=c;do{var C=y.lane;if((ua&C)===C)v!==null&&(v=v.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),i=y.hasEagerState?y.eagerState:e(i,y.action);else{var b={lane:C,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};v===null?(g=v=b,f=i):v=v.next=b,_n.lanes|=C,da|=C}y=y.next}while(y!==null&&y!==c);v===null?f=i:v.next=g,ji(i,t.memoizedState)||(Lr=!0),t.memoizedState=i,t.baseState=f,t.baseQueue=v,n.lastRenderedState=i}if(e=n.interleaved,e!==null){a=e;do c=a.lane,_n.lanes|=c,da|=c,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function yf(e){var t=_i(),n=t.queue;if(n===null)throw Error(Ie(311));n.lastRenderedReducer=e;var i=n.dispatch,a=n.pending,c=t.memoizedState;if(a!==null){n.pending=null;var f=a=a.next;do c=e(c,f.action),f=f.next;while(f!==a);ji(c,t.memoizedState)||(Lr=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),n.lastRenderedState=c}return[c,i]}function mw(){}function gw(e,t){var n=_n,i=_i(),a=t(),c=!ji(i.memoizedState,a);if(c&&(i.memoizedState=a,Lr=!0),i=i.queue,t1(ww.bind(null,n,i,e),[e]),i.getSnapshot!==t||c||Qn!==null&&Qn.memoizedState.tag&1){if(n.flags|=2048,Rc(9,yw.bind(null,n,i,a,t),void 0,null),$n===null)throw Error(Ie(349));ua&30||xw(n,t,a)}return a}function xw(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=_n.updateQueue,t===null?(t={lastEffect:null,stores:null},_n.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function yw(e,t,n,i){t.value=n,t.getSnapshot=i,vw(t)&&_w(e)}function ww(e,t,n){return n(function(){vw(t)&&_w(e)})}function vw(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ji(e,n)}catch{return!0}}function _w(e){var t=Ns(e,1);t!==null&&Di(t,e,1,-1)}function xg(e){var t=qi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mc,lastRenderedState:e},t.queue=e,e=e.dispatch=U3.bind(null,_n,e),[t.memoizedState,e]}function Rc(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=_n.updateQueue,t===null?(t={lastEffect:null,stores:null},_n.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function bw(){return _i().memoizedState}function Qu(e,t,n,i){var a=qi();_n.flags|=e,a.memoizedState=Rc(1|t,n,void 0,i===void 0?null:i)}function ah(e,t,n,i){var a=_i();i=i===void 0?null:i;var c=void 0;if(Hn!==null){var f=Hn.memoizedState;if(c=f.destroy,i!==null&&$p(i,f.deps)){a.memoizedState=Rc(t,n,c,i);return}}_n.flags|=e,a.memoizedState=Rc(1|t,n,c,i)}function yg(e,t){return Qu(8390656,8,e,t)}function t1(e,t){return ah(2048,8,e,t)}function Cw(e,t){return ah(4,2,e,t)}function Sw(e,t){return ah(4,4,e,t)}function Aw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ew(e,t,n){return n=n!=null?n.concat([e]):null,ah(4,4,Aw.bind(null,t,e),n)}function n1(){}function Nw(e,t){var n=_i();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&$p(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Tw(e,t){var n=_i();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&$p(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Iw(e,t,n){return ua&21?(ji(n,t)||(n=L2(),_n.lanes|=n,da|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Lr=!0),e.memoizedState=n)}function F3(e,t){var n=Kt;Kt=n!==0&&4>n?n:4,e(!0);var i=gf.transition;gf.transition={};try{e(!1),t()}finally{Kt=n,gf.transition=i}}function kw(){return _i().memoizedState}function z3(e,t,n){var i=ho(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Mw(e))Rw(t,n);else if(n=hw(e,t,n,i),n!==null){var a=Nr();Di(n,e,i,a),Ow(n,t,i)}}function U3(e,t,n){var i=ho(e),a={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mw(e))Rw(t,a);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var f=t.lastRenderedState,g=c(f,n);if(a.hasEagerState=!0,a.eagerState=g,ji(g,f)){var v=t.interleaved;v===null?(a.next=a,Yp(t)):(a.next=v.next,v.next=a),t.interleaved=a;return}}catch{}finally{}n=hw(e,t,a,i),n!==null&&(a=Nr(),Di(n,e,i,a),Ow(n,t,i))}}function Mw(e){var t=e.alternate;return e===_n||t!==null&&t===_n}function Rw(e,t){oc=Nd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ow(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Op(e,n)}}var Td={readContext:vi,useCallback:cr,useContext:cr,useEffect:cr,useImperativeHandle:cr,useInsertionEffect:cr,useLayoutEffect:cr,useMemo:cr,useReducer:cr,useRef:cr,useState:cr,useDebugValue:cr,useDeferredValue:cr,useTransition:cr,useMutableSource:cr,useSyncExternalStore:cr,useId:cr,unstable_isNewReconciler:!1},V3={readContext:vi,useCallback:function(e,t){return qi().memoizedState=[e,t===void 0?null:t],e},useContext:vi,useEffect:yg,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Qu(4194308,4,Aw.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Qu(4194308,4,e,t)},useInsertionEffect:function(e,t){return Qu(4,2,e,t)},useMemo:function(e,t){var n=qi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=qi();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=z3.bind(null,_n,e),[i.memoizedState,e]},useRef:function(e){var t=qi();return e={current:e},t.memoizedState=e},useState:xg,useDebugValue:n1,useDeferredValue:function(e){return qi().memoizedState=e},useTransition:function(){var e=xg(!1),t=e[0];return e=F3.bind(null,e[1]),qi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=_n,a=qi();if(gn){if(n===void 0)throw Error(Ie(407));n=n()}else{if(n=t(),$n===null)throw Error(Ie(349));ua&30||xw(i,t,n)}a.memoizedState=n;var c={value:n,getSnapshot:t};return a.queue=c,yg(ww.bind(null,i,c,e),[e]),i.flags|=2048,Rc(9,yw.bind(null,i,c,n,t),void 0,null),n},useId:function(){var e=qi(),t=$n.identifierPrefix;if(gn){var n=ys,i=xs;n=(i&~(1<<32-Pi(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=kc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=B3++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},H3={readContext:vi,useCallback:Nw,useContext:vi,useEffect:t1,useImperativeHandle:Ew,useInsertionEffect:Cw,useLayoutEffect:Sw,useMemo:Tw,useReducer:xf,useRef:bw,useState:function(){return xf(Mc)},useDebugValue:n1,useDeferredValue:function(e){var t=_i();return Iw(t,Hn.memoizedState,e)},useTransition:function(){var e=xf(Mc)[0],t=_i().memoizedState;return[e,t]},useMutableSource:mw,useSyncExternalStore:gw,useId:kw,unstable_isNewReconciler:!1},W3={readContext:vi,useCallback:Nw,useContext:vi,useEffect:t1,useImperativeHandle:Ew,useInsertionEffect:Cw,useLayoutEffect:Sw,useMemo:Tw,useReducer:yf,useRef:bw,useState:function(){return yf(Mc)},useDebugValue:n1,useDeferredValue:function(e){var t=_i();return Hn===null?t.memoizedState=e:Iw(t,Hn.memoizedState,e)},useTransition:function(){var e=yf(Mc)[0],t=_i().memoizedState;return[e,t]},useMutableSource:mw,useSyncExternalStore:gw,useId:kw,unstable_isNewReconciler:!1};function Ii(e,t){if(e&&e.defaultProps){t=bn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function A0(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:bn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var lh={isMounted:function(e){return(e=e._reactInternals)?ma(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Nr(),a=ho(e),c=bs(i,a);c.payload=t,n!=null&&(c.callback=n),t=co(e,c,a),t!==null&&(Di(t,e,a,i),qu(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Nr(),a=ho(e),c=bs(i,a);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=co(e,c,a),t!==null&&(Di(t,e,a,i),qu(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Nr(),i=ho(e),a=bs(n,i);a.tag=2,t!=null&&(a.callback=t),t=co(e,a,i),t!==null&&(Di(t,e,i,n),qu(t,e,i))}};function wg(e,t,n,i,a,c,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,c,f):t.prototype&&t.prototype.isPureReactComponent?!Sc(n,i)||!Sc(a,c):!0}function Lw(e,t,n){var i=!1,a=vo,c=t.contextType;return typeof c=="object"&&c!==null?c=vi(c):(a=Dr(t)?la:pr.current,i=t.contextTypes,c=(i=i!=null)?il(e,a):vo),t=new t(n,c),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=lh,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=c),t}function vg(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&lh.enqueueReplaceState(t,t.state,null)}function E0(e,t,n,i){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Xp(e);var c=t.contextType;typeof c=="object"&&c!==null?a.context=vi(c):(c=Dr(t)?la:pr.current,a.context=il(e,c)),a.state=e.memoizedState,c=t.getDerivedStateFromProps,typeof c=="function"&&(A0(e,t,c,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&lh.enqueueReplaceState(a,a.state,null),Ad(e,n,a,i),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ll(e,t){try{var n="",i=t;do n+=yS(i),i=i.return;while(i);var a=n}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:t,stack:a,digest:null}}function wf(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function N0(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Z3=typeof WeakMap=="function"?WeakMap:Map;function Pw(e,t,n){n=bs(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){kd||(kd=!0,j0=i),N0(e,t)},n}function Dw(e,t,n){n=bs(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var a=t.value;n.payload=function(){return i(a)},n.callback=function(){N0(e,t)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(n.callback=function(){N0(e,t),typeof i!="function"&&(uo===null?uo=new Set([this]):uo.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),n}function _g(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Z3;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(n)||(a.add(n),e=sA.bind(null,e,t,n),t.then(e,e))}function bg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Cg(e,t,n,i,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=bs(-1,1),t.tag=2,co(n,t,1))),n.lanes|=1),e)}var G3=Ls.ReactCurrentOwner,Lr=!1;function Ar(e,t,n,i){t.child=e===null?dw(t,null,n,i):ol(t,e.child,n,i)}function Sg(e,t,n,i,a){n=n.render;var c=t.ref;return tl(t,a),i=Jp(e,t,n,i,c,a),n=e1(),e!==null&&!Lr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ts(e,t,a)):(gn&&n&&Up(t),t.flags|=1,Ar(e,t,i,a),t.child)}function Ag(e,t,n,i,a){if(e===null){var c=n.type;return typeof c=="function"&&!u1(c)&&c.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=c,jw(e,t,c,i,a)):(e=td(n.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!(e.lanes&a)){var f=c.memoizedProps;if(n=n.compare,n=n!==null?n:Sc,n(f,i)&&e.ref===t.ref)return Ts(e,t,a)}return t.flags|=1,e=fo(c,i),e.ref=t.ref,e.return=t,t.child=e}function jw(e,t,n,i,a){if(e!==null){var c=e.memoizedProps;if(Sc(c,i)&&e.ref===t.ref)if(Lr=!1,t.pendingProps=i=c,(e.lanes&a)!==0)e.flags&131072&&(Lr=!0);else return t.lanes=e.lanes,Ts(e,t,a)}return T0(e,t,n,i,a)}function Bw(e,t,n){var i=t.pendingProps,a=i.children,c=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},an(Ha,Yr),Yr|=n;else{if(!(n&1073741824))return e=c!==null?c.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,an(Ha,Yr),Yr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=c!==null?c.baseLanes:n,an(Ha,Yr),Yr|=i}else c!==null?(i=c.baseLanes|n,t.memoizedState=null):i=n,an(Ha,Yr),Yr|=i;return Ar(e,t,a,n),t.child}function Fw(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function T0(e,t,n,i,a){var c=Dr(n)?la:pr.current;return c=il(t,c),tl(t,a),n=Jp(e,t,n,i,c,a),i=e1(),e!==null&&!Lr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ts(e,t,a)):(gn&&i&&Up(t),t.flags|=1,Ar(e,t,n,a),t.child)}function Eg(e,t,n,i,a){if(Dr(n)){var c=!0;vd(t)}else c=!1;if(tl(t,a),t.stateNode===null)$u(e,t),Lw(t,n,i),E0(t,n,i,a),i=!0;else if(e===null){var f=t.stateNode,g=t.memoizedProps;f.props=g;var v=f.context,y=n.contextType;typeof y=="object"&&y!==null?y=vi(y):(y=Dr(n)?la:pr.current,y=il(t,y));var C=n.getDerivedStateFromProps,b=typeof C=="function"||typeof f.getSnapshotBeforeUpdate=="function";b||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==i||v!==y)&&vg(t,f,i,y),Ks=!1;var T=t.memoizedState;f.state=T,Ad(t,i,f,a),v=t.memoizedState,g!==i||T!==v||Pr.current||Ks?(typeof C=="function"&&(A0(t,n,C,i),v=t.memoizedState),(g=Ks||wg(t,n,g,i,T,v,y))?(b||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=v),f.props=i,f.state=v,f.context=y,i=g):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{f=t.stateNode,fw(e,t),g=t.memoizedProps,y=t.type===t.elementType?g:Ii(t.type,g),f.props=y,b=t.pendingProps,T=f.context,v=n.contextType,typeof v=="object"&&v!==null?v=vi(v):(v=Dr(n)?la:pr.current,v=il(t,v));var I=n.getDerivedStateFromProps;(C=typeof I=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==b||T!==v)&&vg(t,f,i,v),Ks=!1,T=t.memoizedState,f.state=T,Ad(t,i,f,a);var F=t.memoizedState;g!==b||T!==F||Pr.current||Ks?(typeof I=="function"&&(A0(t,n,I,i),F=t.memoizedState),(y=Ks||wg(t,n,y,i,T,F,v)||!1)?(C||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,F,v),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,F,v)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=F),f.props=i,f.state=F,f.context=v,i=y):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),i=!1)}return I0(e,t,n,i,c,a)}function I0(e,t,n,i,a,c){Fw(e,t);var f=(t.flags&128)!==0;if(!i&&!f)return a&&dg(t,n,!1),Ts(e,t,c);i=t.stateNode,G3.current=t;var g=f&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&f?(t.child=ol(t,e.child,null,c),t.child=ol(t,null,g,c)):Ar(e,t,g,c),t.memoizedState=i.state,a&&dg(t,n,!0),t.child}function zw(e){var t=e.stateNode;t.pendingContext?ug(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ug(e,t.context,!1),qp(e,t.containerInfo)}function Ng(e,t,n,i,a){return sl(),Hp(a),t.flags|=256,Ar(e,t,n,i),t.child}var k0={dehydrated:null,treeContext:null,retryLane:0};function M0(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uw(e,t,n){var i=t.pendingProps,a=wn.current,c=!1,f=(t.flags&128)!==0,g;if((g=f)||(g=e!==null&&e.memoizedState===null?!1:(a&2)!==0),g?(c=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),an(wn,a&1),e===null)return C0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=i.children,e=i.fallback,c?(i=t.mode,c=t.child,f={mode:"hidden",children:f},!(i&1)&&c!==null?(c.childLanes=0,c.pendingProps=f):c=dh(f,i,0,null),e=na(e,i,n,null),c.return=t,e.return=t,c.sibling=e,t.child=c,t.child.memoizedState=M0(n),t.memoizedState=k0,e):r1(t,f));if(a=e.memoizedState,a!==null&&(g=a.dehydrated,g!==null))return Y3(e,t,f,i,g,a,n);if(c){c=i.fallback,f=t.mode,a=e.child,g=a.sibling;var v={mode:"hidden",children:i.children};return!(f&1)&&t.child!==a?(i=t.child,i.childLanes=0,i.pendingProps=v,t.deletions=null):(i=fo(a,v),i.subtreeFlags=a.subtreeFlags&14680064),g!==null?c=fo(g,c):(c=na(c,f,n,null),c.flags|=2),c.return=t,i.return=t,i.sibling=c,t.child=i,i=c,c=t.child,f=e.child.memoizedState,f=f===null?M0(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},c.memoizedState=f,c.childLanes=e.childLanes&~n,t.memoizedState=k0,i}return c=e.child,e=c.sibling,i=fo(c,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function r1(e,t){return t=dh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ku(e,t,n,i){return i!==null&&Hp(i),ol(t,e.child,null,n),e=r1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Y3(e,t,n,i,a,c,f){if(n)return t.flags&256?(t.flags&=-257,i=wf(Error(Ie(422))),ku(e,t,f,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(c=i.fallback,a=t.mode,i=dh({mode:"visible",children:i.children},a,0,null),c=na(c,a,f,null),c.flags|=2,i.return=t,c.return=t,i.sibling=c,t.child=i,t.mode&1&&ol(t,e.child,null,f),t.child.memoizedState=M0(f),t.memoizedState=k0,c);if(!(t.mode&1))return ku(e,t,f,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var g=i.dgst;return i=g,c=Error(Ie(419)),i=wf(c,i,void 0),ku(e,t,f,i)}if(g=(f&e.childLanes)!==0,Lr||g){if(i=$n,i!==null){switch(f&-f){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|f)?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,Ns(e,a),Di(i,e,a,-1))}return c1(),i=wf(Error(Ie(421))),ku(e,t,f,i)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=oA.bind(null,e),a._reactRetry=t,null):(e=c.treeContext,Kr=lo(a.nextSibling),Qr=t,gn=!0,Li=null,e!==null&&(gi[xi++]=xs,gi[xi++]=ys,gi[xi++]=ca,xs=e.id,ys=e.overflow,ca=t),t=r1(t,i.children),t.flags|=4096,t)}function Tg(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),S0(e.return,t,n)}function vf(e,t,n,i,a){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=i,c.tail=n,c.tailMode=a)}function Vw(e,t,n){var i=t.pendingProps,a=i.revealOrder,c=i.tail;if(Ar(e,t,i.children,n),i=wn.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Tg(e,n,t);else if(e.tag===19)Tg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(an(wn,i),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Ed(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),vf(t,!1,a,n,c);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ed(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}vf(t,!0,n,null,c);break;case"together":vf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $u(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ts(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),da|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ie(153));if(t.child!==null){for(e=t.child,n=fo(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=fo(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function X3(e,t,n){switch(t.tag){case 3:zw(t),sl();break;case 5:pw(t);break;case 1:Dr(t.type)&&vd(t);break;case 4:qp(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,a=t.memoizedProps.value;an(Cd,i._currentValue),i._currentValue=a;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(an(wn,wn.current&1),t.flags|=128,null):n&t.child.childLanes?Uw(e,t,n):(an(wn,wn.current&1),e=Ts(e,t,n),e!==null?e.sibling:null);an(wn,wn.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return Vw(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),an(wn,wn.current),i)break;return null;case 22:case 23:return t.lanes=0,Bw(e,t,n)}return Ts(e,t,n)}var Hw,R0,Ww,Zw;Hw=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};R0=function(){};Ww=function(e,t,n,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,$o(Ji.current);var c=null;switch(n){case"input":a=e0(e,a),i=e0(e,i),c=[];break;case"select":a=bn({},a,{value:void 0}),i=bn({},i,{value:void 0}),c=[];break;case"textarea":a=r0(e,a),i=r0(e,i),c=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=yd)}s0(n,i);var f;n=null;for(y in a)if(!i.hasOwnProperty(y)&&a.hasOwnProperty(y)&&a[y]!=null)if(y==="style"){var g=a[y];for(f in g)g.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(xc.hasOwnProperty(y)?c||(c=[]):(c=c||[]).push(y,null));for(y in i){var v=i[y];if(g=a!=null?a[y]:void 0,i.hasOwnProperty(y)&&v!==g&&(v!=null||g!=null))if(y==="style")if(g){for(f in g)!g.hasOwnProperty(f)||v&&v.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in v)v.hasOwnProperty(f)&&g[f]!==v[f]&&(n||(n={}),n[f]=v[f])}else n||(c||(c=[]),c.push(y,n)),n=v;else y==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,g=g?g.__html:void 0,v!=null&&g!==v&&(c=c||[]).push(y,v)):y==="children"?typeof v!="string"&&typeof v!="number"||(c=c||[]).push(y,""+v):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(xc.hasOwnProperty(y)?(v!=null&&y==="onScroll"&&dn("scroll",e),c||g===v||(c=[])):(c=c||[]).push(y,v))}n&&(c=c||[]).push("style",n);var y=c;(t.updateQueue=y)&&(t.flags|=4)}};Zw=function(e,t,n,i){n!==i&&(t.flags|=4)};function Vl(e,t){if(!gn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ur(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function q3(e,t,n){var i=t.pendingProps;switch(Vp(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ur(t),null;case 1:return Dr(t.type)&&wd(),ur(t),null;case 3:return i=t.stateNode,al(),hn(Pr),hn(pr),Qp(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Tu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Li!==null&&(z0(Li),Li=null))),R0(e,t),ur(t),null;case 5:Kp(t);var a=$o(Ic.current);if(n=t.type,e!==null&&t.stateNode!=null)Ww(e,t,n,i,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Ie(166));return ur(t),null}if(e=$o(Ji.current),Tu(t)){i=t.stateNode,n=t.type;var c=t.memoizedProps;switch(i[Qi]=t,i[Nc]=c,e=(t.mode&1)!==0,n){case"dialog":dn("cancel",i),dn("close",i);break;case"iframe":case"object":case"embed":dn("load",i);break;case"video":case"audio":for(a=0;a<$l.length;a++)dn($l[a],i);break;case"source":dn("error",i);break;case"img":case"image":case"link":dn("error",i),dn("load",i);break;case"details":dn("toggle",i);break;case"input":jm(i,c),dn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!c.multiple},dn("invalid",i);break;case"textarea":Fm(i,c),dn("invalid",i)}s0(n,c),a=null;for(var f in c)if(c.hasOwnProperty(f)){var g=c[f];f==="children"?typeof g=="string"?i.textContent!==g&&(c.suppressHydrationWarning!==!0&&Nu(i.textContent,g,e),a=["children",g]):typeof g=="number"&&i.textContent!==""+g&&(c.suppressHydrationWarning!==!0&&Nu(i.textContent,g,e),a=["children",""+g]):xc.hasOwnProperty(f)&&g!=null&&f==="onScroll"&&dn("scroll",i)}switch(n){case"input":wu(i),Bm(i,c,!0);break;case"textarea":wu(i),zm(i);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(i.onclick=yd)}i=a,t.updateQueue=i,i!==null&&(t.flags|=4)}else{f=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=w2(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=f.createElement(n,{is:i.is}):(e=f.createElement(n),n==="select"&&(f=e,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):e=f.createElementNS(e,n),e[Qi]=t,e[Nc]=i,Hw(e,t,!1,!1),t.stateNode=e;e:{switch(f=o0(n,i),n){case"dialog":dn("cancel",e),dn("close",e),a=i;break;case"iframe":case"object":case"embed":dn("load",e),a=i;break;case"video":case"audio":for(a=0;a<$l.length;a++)dn($l[a],e);a=i;break;case"source":dn("error",e),a=i;break;case"img":case"image":case"link":dn("error",e),dn("load",e),a=i;break;case"details":dn("toggle",e),a=i;break;case"input":jm(e,i),a=e0(e,i),dn("invalid",e);break;case"option":a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=bn({},i,{value:void 0}),dn("invalid",e);break;case"textarea":Fm(e,i),a=r0(e,i),dn("invalid",e);break;default:a=i}s0(n,a),g=a;for(c in g)if(g.hasOwnProperty(c)){var v=g[c];c==="style"?b2(e,v):c==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,v!=null&&v2(e,v)):c==="children"?typeof v=="string"?(n!=="textarea"||v!=="")&&yc(e,v):typeof v=="number"&&yc(e,""+v):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(xc.hasOwnProperty(c)?v!=null&&c==="onScroll"&&dn("scroll",e):v!=null&&Np(e,c,v,f))}switch(n){case"input":wu(e),Bm(e,i,!1);break;case"textarea":wu(e),zm(e);break;case"option":i.value!=null&&e.setAttribute("value",""+wo(i.value));break;case"select":e.multiple=!!i.multiple,c=i.value,c!=null?Qa(e,!!i.multiple,c,!1):i.defaultValue!=null&&Qa(e,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=yd)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ur(t),null;case 6:if(e&&t.stateNode!=null)Zw(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Ie(166));if(n=$o(Ic.current),$o(Ji.current),Tu(t)){if(i=t.stateNode,n=t.memoizedProps,i[Qi]=t,(c=i.nodeValue!==n)&&(e=Qr,e!==null))switch(e.tag){case 3:Nu(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Nu(i.nodeValue,n,(e.mode&1)!==0)}c&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Qi]=t,t.stateNode=i}return ur(t),null;case 13:if(hn(wn),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(gn&&Kr!==null&&t.mode&1&&!(t.flags&128))cw(),sl(),t.flags|=98560,c=!1;else if(c=Tu(t),i!==null&&i.dehydrated!==null){if(e===null){if(!c)throw Error(Ie(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(Ie(317));c[Qi]=t}else sl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ur(t),c=!1}else Li!==null&&(z0(Li),Li=null),c=!0;if(!c)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||wn.current&1?Wn===0&&(Wn=3):c1())),t.updateQueue!==null&&(t.flags|=4),ur(t),null);case 4:return al(),R0(e,t),e===null&&Ac(t.stateNode.containerInfo),ur(t),null;case 10:return Gp(t.type._context),ur(t),null;case 17:return Dr(t.type)&&wd(),ur(t),null;case 19:if(hn(wn),c=t.memoizedState,c===null)return ur(t),null;if(i=(t.flags&128)!==0,f=c.rendering,f===null)if(i)Vl(c,!1);else{if(Wn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=Ed(e),f!==null){for(t.flags|=128,Vl(c,!1),i=f.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)c=n,e=i,c.flags&=14680066,f=c.alternate,f===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=f.childLanes,c.lanes=f.lanes,c.child=f.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=f.memoizedProps,c.memoizedState=f.memoizedState,c.updateQueue=f.updateQueue,c.type=f.type,e=f.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return an(wn,wn.current&1|2),t.child}e=e.sibling}c.tail!==null&&In()>cl&&(t.flags|=128,i=!0,Vl(c,!1),t.lanes=4194304)}else{if(!i)if(e=Ed(f),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Vl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!gn)return ur(t),null}else 2*In()-c.renderingStartTime>cl&&n!==1073741824&&(t.flags|=128,i=!0,Vl(c,!1),t.lanes=4194304);c.isBackwards?(f.sibling=t.child,t.child=f):(n=c.last,n!==null?n.sibling=f:t.child=f,c.last=f)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=In(),t.sibling=null,n=wn.current,an(wn,i?n&1|2:n&1),t):(ur(t),null);case 22:case 23:return l1(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Yr&1073741824&&(ur(t),t.subtreeFlags&6&&(t.flags|=8192)):ur(t),null;case 24:return null;case 25:return null}throw Error(Ie(156,t.tag))}function K3(e,t){switch(Vp(t),t.tag){case 1:return Dr(t.type)&&wd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return al(),hn(Pr),hn(pr),Qp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Kp(t),null;case 13:if(hn(wn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ie(340));sl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return hn(wn),null;case 4:return al(),null;case 10:return Gp(t.type._context),null;case 22:case 23:return l1(),null;case 24:return null;default:return null}}var Mu=!1,hr=!1,Q3=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function Va(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){An(e,t,i)}else n.current=null}function O0(e,t,n){try{n()}catch(i){An(e,t,i)}}var Ig=!1;function $3(e,t){if(g0=md,e=K2(),zp(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var a=i.anchorOffset,c=i.focusNode;i=i.focusOffset;try{n.nodeType,c.nodeType}catch{n=null;break e}var f=0,g=-1,v=-1,y=0,C=0,b=e,T=null;t:for(;;){for(var I;b!==n||a!==0&&b.nodeType!==3||(g=f+a),b!==c||i!==0&&b.nodeType!==3||(v=f+i),b.nodeType===3&&(f+=b.nodeValue.length),(I=b.firstChild)!==null;)T=b,b=I;for(;;){if(b===e)break t;if(T===n&&++y===a&&(g=f),T===c&&++C===i&&(v=f),(I=b.nextSibling)!==null)break;b=T,T=b.parentNode}b=I}n=g===-1||v===-1?null:{start:g,end:v}}else n=null}n=n||{start:0,end:0}}else n=null;for(x0={focusedElem:e,selectionRange:n},md=!1,Ye=t;Ye!==null;)if(t=Ye,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ye=e;else for(;Ye!==null;){t=Ye;try{var F=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var R=F.memoizedProps,B=F.memoizedState,z=t.stateNode,O=z.getSnapshotBeforeUpdate(t.elementType===t.type?R:Ii(t.type,R),B);z.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var k=t.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ie(163))}}catch(W){An(t,t.return,W)}if(e=t.sibling,e!==null){e.return=t.return,Ye=e;break}Ye=t.return}return F=Ig,Ig=!1,F}function ac(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var c=a.destroy;a.destroy=void 0,c!==void 0&&O0(t,n,c)}a=a.next}while(a!==i)}}function ch(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function L0(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Gw(e){var t=e.alternate;t!==null&&(e.alternate=null,Gw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Qi],delete t[Nc],delete t[v0],delete t[L3],delete t[P3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Yw(e){return e.tag===5||e.tag===3||e.tag===4}function kg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Yw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function P0(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=yd));else if(i!==4&&(e=e.child,e!==null))for(P0(e,t,n),e=e.sibling;e!==null;)P0(e,t,n),e=e.sibling}function D0(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(D0(e,t,n),e=e.sibling;e!==null;)D0(e,t,n),e=e.sibling}var er=null,Mi=!1;function Ws(e,t,n){for(n=n.child;n!==null;)Xw(e,t,n),n=n.sibling}function Xw(e,t,n){if($i&&typeof $i.onCommitFiberUnmount=="function")try{$i.onCommitFiberUnmount(th,n)}catch{}switch(n.tag){case 5:hr||Va(n,t);case 6:var i=er,a=Mi;er=null,Ws(e,t,n),er=i,Mi=a,er!==null&&(Mi?(e=er,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):er.removeChild(n.stateNode));break;case 18:er!==null&&(Mi?(e=er,n=n.stateNode,e.nodeType===8?ff(e.parentNode,n):e.nodeType===1&&ff(e,n),bc(e)):ff(er,n.stateNode));break;case 4:i=er,a=Mi,er=n.stateNode.containerInfo,Mi=!0,Ws(e,t,n),er=i,Mi=a;break;case 0:case 11:case 14:case 15:if(!hr&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var c=a,f=c.destroy;c=c.tag,f!==void 0&&(c&2||c&4)&&O0(n,t,f),a=a.next}while(a!==i)}Ws(e,t,n);break;case 1:if(!hr&&(Va(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(g){An(n,t,g)}Ws(e,t,n);break;case 21:Ws(e,t,n);break;case 22:n.mode&1?(hr=(i=hr)||n.memoizedState!==null,Ws(e,t,n),hr=i):Ws(e,t,n);break;default:Ws(e,t,n)}}function Mg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Q3),t.forEach(function(i){var a=aA.bind(null,e,i);n.has(i)||(n.add(i),i.then(a,a))})}}function Ti(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];try{var c=e,f=t,g=f;e:for(;g!==null;){switch(g.tag){case 5:er=g.stateNode,Mi=!1;break e;case 3:er=g.stateNode.containerInfo,Mi=!0;break e;case 4:er=g.stateNode.containerInfo,Mi=!0;break e}g=g.return}if(er===null)throw Error(Ie(160));Xw(c,f,a),er=null,Mi=!1;var v=a.alternate;v!==null&&(v.return=null),a.return=null}catch(y){An(a,t,y)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)qw(t,e),t=t.sibling}function qw(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ti(t,e),Yi(e),i&4){try{ac(3,e,e.return),ch(3,e)}catch(R){An(e,e.return,R)}try{ac(5,e,e.return)}catch(R){An(e,e.return,R)}}break;case 1:Ti(t,e),Yi(e),i&512&&n!==null&&Va(n,n.return);break;case 5:if(Ti(t,e),Yi(e),i&512&&n!==null&&Va(n,n.return),e.flags&32){var a=e.stateNode;try{yc(a,"")}catch(R){An(e,e.return,R)}}if(i&4&&(a=e.stateNode,a!=null)){var c=e.memoizedProps,f=n!==null?n.memoizedProps:c,g=e.type,v=e.updateQueue;if(e.updateQueue=null,v!==null)try{g==="input"&&c.type==="radio"&&c.name!=null&&x2(a,c),o0(g,f);var y=o0(g,c);for(f=0;f<v.length;f+=2){var C=v[f],b=v[f+1];C==="style"?b2(a,b):C==="dangerouslySetInnerHTML"?v2(a,b):C==="children"?yc(a,b):Np(a,C,b,y)}switch(g){case"input":t0(a,c);break;case"textarea":y2(a,c);break;case"select":var T=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var I=c.value;I!=null?Qa(a,!!c.multiple,I,!1):T!==!!c.multiple&&(c.defaultValue!=null?Qa(a,!!c.multiple,c.defaultValue,!0):Qa(a,!!c.multiple,c.multiple?[]:"",!1))}a[Nc]=c}catch(R){An(e,e.return,R)}}break;case 6:if(Ti(t,e),Yi(e),i&4){if(e.stateNode===null)throw Error(Ie(162));a=e.stateNode,c=e.memoizedProps;try{a.nodeValue=c}catch(R){An(e,e.return,R)}}break;case 3:if(Ti(t,e),Yi(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{bc(t.containerInfo)}catch(R){An(e,e.return,R)}break;case 4:Ti(t,e),Yi(e);break;case 13:Ti(t,e),Yi(e),a=e.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(o1=In())),i&4&&Mg(e);break;case 22:if(C=n!==null&&n.memoizedState!==null,e.mode&1?(hr=(y=hr)||C,Ti(t,e),hr=y):Ti(t,e),Yi(e),i&8192){if(y=e.memoizedState!==null,(e.stateNode.isHidden=y)&&!C&&e.mode&1)for(Ye=e,C=e.child;C!==null;){for(b=Ye=C;Ye!==null;){switch(T=Ye,I=T.child,T.tag){case 0:case 11:case 14:case 15:ac(4,T,T.return);break;case 1:Va(T,T.return);var F=T.stateNode;if(typeof F.componentWillUnmount=="function"){i=T,n=T.return;try{t=i,F.props=t.memoizedProps,F.state=t.memoizedState,F.componentWillUnmount()}catch(R){An(i,n,R)}}break;case 5:Va(T,T.return);break;case 22:if(T.memoizedState!==null){Og(b);continue}}I!==null?(I.return=T,Ye=I):Og(b)}C=C.sibling}e:for(C=null,b=e;;){if(b.tag===5){if(C===null){C=b;try{a=b.stateNode,y?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(g=b.stateNode,v=b.memoizedProps.style,f=v!=null&&v.hasOwnProperty("display")?v.display:null,g.style.display=_2("display",f))}catch(R){An(e,e.return,R)}}}else if(b.tag===6){if(C===null)try{b.stateNode.nodeValue=y?"":b.memoizedProps}catch(R){An(e,e.return,R)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;C===b&&(C=null),b=b.return}C===b&&(C=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:Ti(t,e),Yi(e),i&4&&Mg(e);break;case 21:break;default:Ti(t,e),Yi(e)}}function Yi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Yw(n)){var i=n;break e}n=n.return}throw Error(Ie(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(yc(a,""),i.flags&=-33);var c=kg(e);D0(e,c,a);break;case 3:case 4:var f=i.stateNode.containerInfo,g=kg(e);P0(e,g,f);break;default:throw Error(Ie(161))}}catch(v){An(e,e.return,v)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function J3(e,t,n){Ye=e,Kw(e)}function Kw(e,t,n){for(var i=(e.mode&1)!==0;Ye!==null;){var a=Ye,c=a.child;if(a.tag===22&&i){var f=a.memoizedState!==null||Mu;if(!f){var g=a.alternate,v=g!==null&&g.memoizedState!==null||hr;g=Mu;var y=hr;if(Mu=f,(hr=v)&&!y)for(Ye=a;Ye!==null;)f=Ye,v=f.child,f.tag===22&&f.memoizedState!==null?Lg(a):v!==null?(v.return=f,Ye=v):Lg(a);for(;c!==null;)Ye=c,Kw(c),c=c.sibling;Ye=a,Mu=g,hr=y}Rg(e)}else a.subtreeFlags&8772&&c!==null?(c.return=a,Ye=c):Rg(e)}}function Rg(e){for(;Ye!==null;){var t=Ye;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:hr||ch(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!hr)if(n===null)i.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Ii(t.type,n.memoizedProps);i.componentDidUpdate(a,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var c=t.updateQueue;c!==null&&gg(t,c,i);break;case 3:var f=t.updateQueue;if(f!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}gg(t,f,n)}break;case 5:var g=t.stateNode;if(n===null&&t.flags&4){n=g;var v=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":v.autoFocus&&n.focus();break;case"img":v.src&&(n.src=v.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var y=t.alternate;if(y!==null){var C=y.memoizedState;if(C!==null){var b=C.dehydrated;b!==null&&bc(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ie(163))}hr||t.flags&512&&L0(t)}catch(T){An(t,t.return,T)}}if(t===e){Ye=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ye=n;break}Ye=t.return}}function Og(e){for(;Ye!==null;){var t=Ye;if(t===e){Ye=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ye=n;break}Ye=t.return}}function Lg(e){for(;Ye!==null;){var t=Ye;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ch(4,t)}catch(v){An(t,n,v)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var a=t.return;try{i.componentDidMount()}catch(v){An(t,a,v)}}var c=t.return;try{L0(t)}catch(v){An(t,c,v)}break;case 5:var f=t.return;try{L0(t)}catch(v){An(t,f,v)}}}catch(v){An(t,t.return,v)}if(t===e){Ye=null;break}var g=t.sibling;if(g!==null){g.return=t.return,Ye=g;break}Ye=t.return}}var eA=Math.ceil,Id=Ls.ReactCurrentDispatcher,i1=Ls.ReactCurrentOwner,wi=Ls.ReactCurrentBatchConfig,zt=0,$n=null,jn=null,tr=0,Yr=0,Ha=Ao(0),Wn=0,Oc=null,da=0,uh=0,s1=0,lc=null,Or=null,o1=0,cl=1/0,ms=null,kd=!1,j0=null,uo=null,Ru=!1,ro=null,Md=0,cc=0,B0=null,Ju=-1,ed=0;function Nr(){return zt&6?In():Ju!==-1?Ju:Ju=In()}function ho(e){return e.mode&1?zt&2&&tr!==0?tr&-tr:j3.transition!==null?(ed===0&&(ed=L2()),ed):(e=Kt,e!==0||(e=window.event,e=e===void 0?16:U2(e.type)),e):1}function Di(e,t,n,i){if(50<cc)throw cc=0,B0=null,Error(Ie(185));Gc(e,n,i),(!(zt&2)||e!==$n)&&(e===$n&&(!(zt&2)&&(uh|=n),Wn===4&&eo(e,tr)),jr(e,i),n===1&&zt===0&&!(t.mode&1)&&(cl=In()+500,oh&&Eo()))}function jr(e,t){var n=e.callbackNode;jS(e,t);var i=pd(e,e===$n?tr:0);if(i===0)n!==null&&Hm(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&Hm(n),t===1)e.tag===0?D3(Pg.bind(null,e)):ow(Pg.bind(null,e)),R3(function(){!(zt&6)&&Eo()}),n=null;else{switch(P2(i)){case 1:n=Rp;break;case 4:n=R2;break;case 16:n=fd;break;case 536870912:n=O2;break;default:n=fd}n=iv(n,Qw.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Qw(e,t){if(Ju=-1,ed=0,zt&6)throw Error(Ie(327));var n=e.callbackNode;if(nl()&&e.callbackNode!==n)return null;var i=pd(e,e===$n?tr:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Rd(e,i);else{t=i;var a=zt;zt|=2;var c=Jw();($n!==e||tr!==t)&&(ms=null,cl=In()+500,ta(e,t));do try{rA();break}catch(g){$w(e,g)}while(!0);Zp(),Id.current=c,zt=a,jn!==null?t=0:($n=null,tr=0,t=Wn)}if(t!==0){if(t===2&&(a=d0(e),a!==0&&(i=a,t=F0(e,a))),t===1)throw n=Oc,ta(e,0),eo(e,i),jr(e,In()),n;if(t===6)eo(e,i);else{if(a=e.current.alternate,!(i&30)&&!tA(a)&&(t=Rd(e,i),t===2&&(c=d0(e),c!==0&&(i=c,t=F0(e,c))),t===1))throw n=Oc,ta(e,0),eo(e,i),jr(e,In()),n;switch(e.finishedWork=a,e.finishedLanes=i,t){case 0:case 1:throw Error(Ie(345));case 2:Zo(e,Or,ms);break;case 3:if(eo(e,i),(i&130023424)===i&&(t=o1+500-In(),10<t)){if(pd(e,0)!==0)break;if(a=e.suspendedLanes,(a&i)!==i){Nr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=w0(Zo.bind(null,e,Or,ms),t);break}Zo(e,Or,ms);break;case 4:if(eo(e,i),(i&4194240)===i)break;for(t=e.eventTimes,a=-1;0<i;){var f=31-Pi(i);c=1<<f,f=t[f],f>a&&(a=f),i&=~c}if(i=a,i=In()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*eA(i/1960))-i,10<i){e.timeoutHandle=w0(Zo.bind(null,e,Or,ms),i);break}Zo(e,Or,ms);break;case 5:Zo(e,Or,ms);break;default:throw Error(Ie(329))}}}return jr(e,In()),e.callbackNode===n?Qw.bind(null,e):null}function F0(e,t){var n=lc;return e.current.memoizedState.isDehydrated&&(ta(e,t).flags|=256),e=Rd(e,t),e!==2&&(t=Or,Or=n,t!==null&&z0(t)),e}function z0(e){Or===null?Or=e:Or.push.apply(Or,e)}function tA(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var a=n[i],c=a.getSnapshot;a=a.value;try{if(!ji(c(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function eo(e,t){for(t&=~s1,t&=~uh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Pi(t),i=1<<n;e[n]=-1,t&=~i}}function Pg(e){if(zt&6)throw Error(Ie(327));nl();var t=pd(e,0);if(!(t&1))return jr(e,In()),null;var n=Rd(e,t);if(e.tag!==0&&n===2){var i=d0(e);i!==0&&(t=i,n=F0(e,i))}if(n===1)throw n=Oc,ta(e,0),eo(e,t),jr(e,In()),n;if(n===6)throw Error(Ie(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Zo(e,Or,ms),jr(e,In()),null}function a1(e,t){var n=zt;zt|=1;try{return e(t)}finally{zt=n,zt===0&&(cl=In()+500,oh&&Eo())}}function ha(e){ro!==null&&ro.tag===0&&!(zt&6)&&nl();var t=zt;zt|=1;var n=wi.transition,i=Kt;try{if(wi.transition=null,Kt=1,e)return e()}finally{Kt=i,wi.transition=n,zt=t,!(zt&6)&&Eo()}}function l1(){Yr=Ha.current,hn(Ha)}function ta(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,M3(n)),jn!==null)for(n=jn.return;n!==null;){var i=n;switch(Vp(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&wd();break;case 3:al(),hn(Pr),hn(pr),Qp();break;case 5:Kp(i);break;case 4:al();break;case 13:hn(wn);break;case 19:hn(wn);break;case 10:Gp(i.type._context);break;case 22:case 23:l1()}n=n.return}if($n=e,jn=e=fo(e.current,null),tr=Yr=t,Wn=0,Oc=null,s1=uh=da=0,Or=lc=null,Qo!==null){for(t=0;t<Qo.length;t++)if(n=Qo[t],i=n.interleaved,i!==null){n.interleaved=null;var a=i.next,c=n.pending;if(c!==null){var f=c.next;c.next=a,i.next=f}n.pending=i}Qo=null}return e}function $w(e,t){do{var n=jn;try{if(Zp(),Ku.current=Td,Nd){for(var i=_n.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Nd=!1}if(ua=0,Qn=Hn=_n=null,oc=!1,kc=0,i1.current=null,n===null||n.return===null){Wn=1,Oc=t,jn=null;break}e:{var c=e,f=n.return,g=n,v=t;if(t=tr,g.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){var y=v,C=g,b=C.tag;if(!(C.mode&1)&&(b===0||b===11||b===15)){var T=C.alternate;T?(C.updateQueue=T.updateQueue,C.memoizedState=T.memoizedState,C.lanes=T.lanes):(C.updateQueue=null,C.memoizedState=null)}var I=bg(f);if(I!==null){I.flags&=-257,Cg(I,f,g,c,t),I.mode&1&&_g(c,y,t),t=I,v=y;var F=t.updateQueue;if(F===null){var R=new Set;R.add(v),t.updateQueue=R}else F.add(v);break e}else{if(!(t&1)){_g(c,y,t),c1();break e}v=Error(Ie(426))}}else if(gn&&g.mode&1){var B=bg(f);if(B!==null){!(B.flags&65536)&&(B.flags|=256),Cg(B,f,g,c,t),Hp(ll(v,g));break e}}c=v=ll(v,g),Wn!==4&&(Wn=2),lc===null?lc=[c]:lc.push(c),c=f;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t;var z=Pw(c,v,t);mg(c,z);break e;case 1:g=v;var O=c.type,k=c.stateNode;if(!(c.flags&128)&&(typeof O.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(uo===null||!uo.has(k)))){c.flags|=65536,t&=-t,c.lanes|=t;var W=Dw(c,g,t);mg(c,W);break e}}c=c.return}while(c!==null)}tv(n)}catch(Q){t=Q,jn===n&&n!==null&&(jn=n=n.return);continue}break}while(!0)}function Jw(){var e=Id.current;return Id.current=Td,e===null?Td:e}function c1(){(Wn===0||Wn===3||Wn===2)&&(Wn=4),$n===null||!(da&268435455)&&!(uh&268435455)||eo($n,tr)}function Rd(e,t){var n=zt;zt|=2;var i=Jw();($n!==e||tr!==t)&&(ms=null,ta(e,t));do try{nA();break}catch(a){$w(e,a)}while(!0);if(Zp(),zt=n,Id.current=i,jn!==null)throw Error(Ie(261));return $n=null,tr=0,Wn}function nA(){for(;jn!==null;)ev(jn)}function rA(){for(;jn!==null&&!TS();)ev(jn)}function ev(e){var t=rv(e.alternate,e,Yr);e.memoizedProps=e.pendingProps,t===null?tv(e):jn=t,i1.current=null}function tv(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=K3(n,t),n!==null){n.flags&=32767,jn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Wn=6,jn=null;return}}else if(n=q3(n,t,Yr),n!==null){jn=n;return}if(t=t.sibling,t!==null){jn=t;return}jn=t=e}while(t!==null);Wn===0&&(Wn=5)}function Zo(e,t,n){var i=Kt,a=wi.transition;try{wi.transition=null,Kt=1,iA(e,t,n,i)}finally{wi.transition=a,Kt=i}return null}function iA(e,t,n,i){do nl();while(ro!==null);if(zt&6)throw Error(Ie(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ie(177));e.callbackNode=null,e.callbackPriority=0;var c=n.lanes|n.childLanes;if(BS(e,c),e===$n&&(jn=$n=null,tr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ru||(Ru=!0,iv(fd,function(){return nl(),null})),c=(n.flags&15990)!==0,n.subtreeFlags&15990||c){c=wi.transition,wi.transition=null;var f=Kt;Kt=1;var g=zt;zt|=4,i1.current=null,$3(e,n),qw(n,e),S3(x0),md=!!g0,x0=g0=null,e.current=n,J3(n),IS(),zt=g,Kt=f,wi.transition=c}else e.current=n;if(Ru&&(Ru=!1,ro=e,Md=a),c=e.pendingLanes,c===0&&(uo=null),RS(n.stateNode),jr(e,In()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],i(a.value,{componentStack:a.stack,digest:a.digest});if(kd)throw kd=!1,e=j0,j0=null,e;return Md&1&&e.tag!==0&&nl(),c=e.pendingLanes,c&1?e===B0?cc++:(cc=0,B0=e):cc=0,Eo(),null}function nl(){if(ro!==null){var e=P2(Md),t=wi.transition,n=Kt;try{if(wi.transition=null,Kt=16>e?16:e,ro===null)var i=!1;else{if(e=ro,ro=null,Md=0,zt&6)throw Error(Ie(331));var a=zt;for(zt|=4,Ye=e.current;Ye!==null;){var c=Ye,f=c.child;if(Ye.flags&16){var g=c.deletions;if(g!==null){for(var v=0;v<g.length;v++){var y=g[v];for(Ye=y;Ye!==null;){var C=Ye;switch(C.tag){case 0:case 11:case 15:ac(8,C,c)}var b=C.child;if(b!==null)b.return=C,Ye=b;else for(;Ye!==null;){C=Ye;var T=C.sibling,I=C.return;if(Gw(C),C===y){Ye=null;break}if(T!==null){T.return=I,Ye=T;break}Ye=I}}}var F=c.alternate;if(F!==null){var R=F.child;if(R!==null){F.child=null;do{var B=R.sibling;R.sibling=null,R=B}while(R!==null)}}Ye=c}}if(c.subtreeFlags&2064&&f!==null)f.return=c,Ye=f;else e:for(;Ye!==null;){if(c=Ye,c.flags&2048)switch(c.tag){case 0:case 11:case 15:ac(9,c,c.return)}var z=c.sibling;if(z!==null){z.return=c.return,Ye=z;break e}Ye=c.return}}var O=e.current;for(Ye=O;Ye!==null;){f=Ye;var k=f.child;if(f.subtreeFlags&2064&&k!==null)k.return=f,Ye=k;else e:for(f=O;Ye!==null;){if(g=Ye,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:ch(9,g)}}catch(Q){An(g,g.return,Q)}if(g===f){Ye=null;break e}var W=g.sibling;if(W!==null){W.return=g.return,Ye=W;break e}Ye=g.return}}if(zt=a,Eo(),$i&&typeof $i.onPostCommitFiberRoot=="function")try{$i.onPostCommitFiberRoot(th,e)}catch{}i=!0}return i}finally{Kt=n,wi.transition=t}}return!1}function Dg(e,t,n){t=ll(n,t),t=Pw(e,t,1),e=co(e,t,1),t=Nr(),e!==null&&(Gc(e,1,t),jr(e,t))}function An(e,t,n){if(e.tag===3)Dg(e,e,n);else for(;t!==null;){if(t.tag===3){Dg(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(uo===null||!uo.has(i))){e=ll(n,e),e=Dw(t,e,1),t=co(t,e,1),e=Nr(),t!==null&&(Gc(t,1,e),jr(t,e));break}}t=t.return}}function sA(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=Nr(),e.pingedLanes|=e.suspendedLanes&n,$n===e&&(tr&n)===n&&(Wn===4||Wn===3&&(tr&130023424)===tr&&500>In()-o1?ta(e,0):s1|=n),jr(e,t)}function nv(e,t){t===0&&(e.mode&1?(t=bu,bu<<=1,!(bu&130023424)&&(bu=4194304)):t=1);var n=Nr();e=Ns(e,t),e!==null&&(Gc(e,t,n),jr(e,n))}function oA(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),nv(e,n)}function aA(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Ie(314))}i!==null&&i.delete(t),nv(e,n)}var rv;rv=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pr.current)Lr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Lr=!1,X3(e,t,n);Lr=!!(e.flags&131072)}else Lr=!1,gn&&t.flags&1048576&&aw(t,bd,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;$u(e,t),e=t.pendingProps;var a=il(t,pr.current);tl(t,n),a=Jp(null,t,i,e,a,n);var c=e1();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Dr(i)?(c=!0,vd(t)):c=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Xp(t),a.updater=lh,t.stateNode=a,a._reactInternals=t,E0(t,i,e,n),t=I0(null,t,i,!0,c,n)):(t.tag=0,gn&&c&&Up(t),Ar(null,t,a,n),t=t.child),t;case 16:i=t.elementType;e:{switch($u(e,t),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=cA(i),e=Ii(i,e),a){case 0:t=T0(null,t,i,e,n);break e;case 1:t=Eg(null,t,i,e,n);break e;case 11:t=Sg(null,t,i,e,n);break e;case 14:t=Ag(null,t,i,Ii(i.type,e),n);break e}throw Error(Ie(306,i,""))}return t;case 0:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Ii(i,a),T0(e,t,i,a,n);case 1:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Ii(i,a),Eg(e,t,i,a,n);case 3:e:{if(zw(t),e===null)throw Error(Ie(387));i=t.pendingProps,c=t.memoizedState,a=c.element,fw(e,t),Ad(t,i,null,n);var f=t.memoizedState;if(i=f.element,c.isDehydrated)if(c={element:i,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){a=ll(Error(Ie(423)),t),t=Ng(e,t,i,n,a);break e}else if(i!==a){a=ll(Error(Ie(424)),t),t=Ng(e,t,i,n,a);break e}else for(Kr=lo(t.stateNode.containerInfo.firstChild),Qr=t,gn=!0,Li=null,n=dw(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(sl(),i===a){t=Ts(e,t,n);break e}Ar(e,t,i,n)}t=t.child}return t;case 5:return pw(t),e===null&&C0(t),i=t.type,a=t.pendingProps,c=e!==null?e.memoizedProps:null,f=a.children,y0(i,a)?f=null:c!==null&&y0(i,c)&&(t.flags|=32),Fw(e,t),Ar(e,t,f,n),t.child;case 6:return e===null&&C0(t),null;case 13:return Uw(e,t,n);case 4:return qp(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=ol(t,null,i,n):Ar(e,t,i,n),t.child;case 11:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Ii(i,a),Sg(e,t,i,a,n);case 7:return Ar(e,t,t.pendingProps,n),t.child;case 8:return Ar(e,t,t.pendingProps.children,n),t.child;case 12:return Ar(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,a=t.pendingProps,c=t.memoizedProps,f=a.value,an(Cd,i._currentValue),i._currentValue=f,c!==null)if(ji(c.value,f)){if(c.children===a.children&&!Pr.current){t=Ts(e,t,n);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var g=c.dependencies;if(g!==null){f=c.child;for(var v=g.firstContext;v!==null;){if(v.context===i){if(c.tag===1){v=bs(-1,n&-n),v.tag=2;var y=c.updateQueue;if(y!==null){y=y.shared;var C=y.pending;C===null?v.next=v:(v.next=C.next,C.next=v),y.pending=v}}c.lanes|=n,v=c.alternate,v!==null&&(v.lanes|=n),S0(c.return,n,t),g.lanes|=n;break}v=v.next}}else if(c.tag===10)f=c.type===t.type?null:c.child;else if(c.tag===18){if(f=c.return,f===null)throw Error(Ie(341));f.lanes|=n,g=f.alternate,g!==null&&(g.lanes|=n),S0(f,n,t),f=c.sibling}else f=c.child;if(f!==null)f.return=c;else for(f=c;f!==null;){if(f===t){f=null;break}if(c=f.sibling,c!==null){c.return=f.return,f=c;break}f=f.return}c=f}Ar(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,i=t.pendingProps.children,tl(t,n),a=vi(a),i=i(a),t.flags|=1,Ar(e,t,i,n),t.child;case 14:return i=t.type,a=Ii(i,t.pendingProps),a=Ii(i.type,a),Ag(e,t,i,a,n);case 15:return jw(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Ii(i,a),$u(e,t),t.tag=1,Dr(i)?(e=!0,vd(t)):e=!1,tl(t,n),Lw(t,i,a),E0(t,i,a,n),I0(null,t,i,!0,e,n);case 19:return Vw(e,t,n);case 22:return Bw(e,t,n)}throw Error(Ie(156,t.tag))};function iv(e,t){return M2(e,t)}function lA(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yi(e,t,n,i){return new lA(e,t,n,i)}function u1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cA(e){if(typeof e=="function")return u1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ip)return 11;if(e===kp)return 14}return 2}function fo(e,t){var n=e.alternate;return n===null?(n=yi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function td(e,t,n,i,a,c){var f=2;if(i=e,typeof e=="function")u1(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case Oa:return na(n.children,a,c,t);case Tp:f=8,a|=8;break;case Kf:return e=yi(12,n,t,a|2),e.elementType=Kf,e.lanes=c,e;case Qf:return e=yi(13,n,t,a),e.elementType=Qf,e.lanes=c,e;case $f:return e=yi(19,n,t,a),e.elementType=$f,e.lanes=c,e;case p2:return dh(n,a,c,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case h2:f=10;break e;case f2:f=9;break e;case Ip:f=11;break e;case kp:f=14;break e;case qs:f=16,i=null;break e}throw Error(Ie(130,e==null?e:typeof e,""))}return t=yi(f,n,t,a),t.elementType=e,t.type=i,t.lanes=c,t}function na(e,t,n,i){return e=yi(7,e,i,t),e.lanes=n,e}function dh(e,t,n,i){return e=yi(22,e,i,t),e.elementType=p2,e.lanes=n,e.stateNode={isHidden:!1},e}function _f(e,t,n){return e=yi(6,e,null,t),e.lanes=n,e}function bf(e,t,n){return t=yi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function uA(e,t,n,i,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tf(0),this.expirationTimes=tf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tf(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function d1(e,t,n,i,a,c,f,g,v){return e=new uA(e,t,n,g,v),t===1?(t=1,c===!0&&(t|=8)):t=0,c=yi(3,null,null,t),e.current=c,c.stateNode=e,c.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xp(c),e}function dA(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ra,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function sv(e){if(!e)return vo;e=e._reactInternals;e:{if(ma(e)!==e||e.tag!==1)throw Error(Ie(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Dr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ie(171))}if(e.tag===1){var n=e.type;if(Dr(n))return sw(e,n,t)}return t}function ov(e,t,n,i,a,c,f,g,v){return e=d1(n,i,!0,e,a,c,f,g,v),e.context=sv(null),n=e.current,i=Nr(),a=ho(n),c=bs(i,a),c.callback=t??null,co(n,c,a),e.current.lanes=a,Gc(e,a,i),jr(e,i),e}function hh(e,t,n,i){var a=t.current,c=Nr(),f=ho(a);return n=sv(n),t.context===null?t.context=n:t.pendingContext=n,t=bs(c,f),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=co(a,t,f),e!==null&&(Di(e,a,f,c),qu(e,a,f)),f}function Od(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function h1(e,t){jg(e,t),(e=e.alternate)&&jg(e,t)}function hA(){return null}var av=typeof reportError=="function"?reportError:function(e){console.error(e)};function f1(e){this._internalRoot=e}fh.prototype.render=f1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ie(409));hh(e,t,null,null)};fh.prototype.unmount=f1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ha(function(){hh(null,e,null,null)}),t[Es]=null}};function fh(e){this._internalRoot=e}fh.prototype.unstable_scheduleHydration=function(e){if(e){var t=B2();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Js.length&&t!==0&&t<Js[n].priority;n++);Js.splice(n,0,e),n===0&&z2(e)}};function p1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ph(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Bg(){}function fA(e,t,n,i,a){if(a){if(typeof i=="function"){var c=i;i=function(){var y=Od(f);c.call(y)}}var f=ov(t,i,e,0,null,!1,!1,"",Bg);return e._reactRootContainer=f,e[Es]=f.current,Ac(e.nodeType===8?e.parentNode:e),ha(),f}for(;a=e.lastChild;)e.removeChild(a);if(typeof i=="function"){var g=i;i=function(){var y=Od(v);g.call(y)}}var v=d1(e,0,!1,null,null,!1,!1,"",Bg);return e._reactRootContainer=v,e[Es]=v.current,Ac(e.nodeType===8?e.parentNode:e),ha(function(){hh(t,v,n,i)}),v}function mh(e,t,n,i,a){var c=n._reactRootContainer;if(c){var f=c;if(typeof a=="function"){var g=a;a=function(){var v=Od(f);g.call(v)}}hh(t,f,e,a)}else f=fA(n,t,e,a,i);return Od(f)}D2=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ql(t.pendingLanes);n!==0&&(Op(t,n|1),jr(t,In()),!(zt&6)&&(cl=In()+500,Eo()))}break;case 13:ha(function(){var i=Ns(e,1);if(i!==null){var a=Nr();Di(i,e,1,a)}}),h1(e,1)}};Lp=function(e){if(e.tag===13){var t=Ns(e,134217728);if(t!==null){var n=Nr();Di(t,e,134217728,n)}h1(e,134217728)}};j2=function(e){if(e.tag===13){var t=ho(e),n=Ns(e,t);if(n!==null){var i=Nr();Di(n,e,t,i)}h1(e,t)}};B2=function(){return Kt};F2=function(e,t){var n=Kt;try{return Kt=e,t()}finally{Kt=n}};l0=function(e,t,n){switch(t){case"input":if(t0(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var a=sh(i);if(!a)throw Error(Ie(90));g2(i),t0(i,a)}}}break;case"textarea":y2(e,n);break;case"select":t=n.value,t!=null&&Qa(e,!!n.multiple,t,!1)}};A2=a1;E2=ha;var pA={usingClientEntryPoint:!1,Events:[Xc,ja,sh,C2,S2,a1]},Hl={findFiberByHostInstance:Ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mA={bundleType:Hl.bundleType,version:Hl.version,rendererPackageName:Hl.rendererPackageName,rendererConfig:Hl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ls.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=I2(e),e===null?null:e.stateNode},findFiberByHostInstance:Hl.findFiberByHostInstance||hA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ou.isDisabled&&Ou.supportsFiber)try{th=Ou.inject(mA),$i=Ou}catch{}}ei.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pA;ei.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p1(t))throw Error(Ie(200));return dA(e,t,null,n)};ei.createRoot=function(e,t){if(!p1(e))throw Error(Ie(299));var n=!1,i="",a=av;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=d1(e,1,!1,null,null,n,!1,i,a),e[Es]=t.current,Ac(e.nodeType===8?e.parentNode:e),new f1(t)};ei.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ie(188)):(e=Object.keys(e).join(","),Error(Ie(268,e)));return e=I2(t),e=e===null?null:e.stateNode,e};ei.flushSync=function(e){return ha(e)};ei.hydrate=function(e,t,n){if(!ph(t))throw Error(Ie(200));return mh(null,e,t,!0,n)};ei.hydrateRoot=function(e,t,n){if(!p1(e))throw Error(Ie(405));var i=n!=null&&n.hydratedSources||null,a=!1,c="",f=av;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),t=ov(t,null,e,1,n??null,a,!1,c,f),e[Es]=t.current,Ac(e),i)for(e=0;e<i.length;e++)n=i[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new fh(t)};ei.render=function(e,t,n){if(!ph(t))throw Error(Ie(200));return mh(null,e,t,!1,n)};ei.unmountComponentAtNode=function(e){if(!ph(e))throw Error(Ie(40));return e._reactRootContainer?(ha(function(){mh(null,null,e,!1,function(){e._reactRootContainer=null,e[Es]=null})}),!0):!1};ei.unstable_batchedUpdates=a1;ei.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!ph(n))throw Error(Ie(200));if(e==null||e._reactInternals===void 0)throw Error(Ie(38));return mh(e,t,n,!1,i)};ei.version="18.3.1-next-f1338f8080-20240426";function lv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lv)}catch(e){console.error(e)}}lv(),l2.exports=ei;var cv=l2.exports,Fg=cv;Xf.createRoot=Fg.createRoot,Xf.hydrateRoot=Fg.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lc(){return Lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Lc.apply(this,arguments)}var io;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(io||(io={}));const zg="popstate";function gA(e){e===void 0&&(e={});function t(a,c){let{pathname:f="/",search:g="",hash:v=""}=ga(a.location.hash.substr(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),U0("",{pathname:f,search:g,hash:v},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(a,c){let f=a.document.querySelector("base"),g="";if(f&&f.getAttribute("href")){let v=a.location.href,y=v.indexOf("#");g=y===-1?v:v.slice(0,y)}return g+"#"+(typeof c=="string"?c:Ld(c))}function i(a,c){gh(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(c)+")")}return yA(t,n,i,e)}function Mn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function gh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xA(){return Math.random().toString(36).substr(2,8)}function Ug(e,t){return{usr:e.state,key:e.key,idx:t}}function U0(e,t,n,i){return n===void 0&&(n=null),Lc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ga(t):t,{state:n,key:t&&t.key||i||xA()})}function Ld(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function ga(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function yA(e,t,n,i){i===void 0&&(i={});let{window:a=document.defaultView,v5Compat:c=!1}=i,f=a.history,g=io.Pop,v=null,y=C();y==null&&(y=0,f.replaceState(Lc({},f.state,{idx:y}),""));function C(){return(f.state||{idx:null}).idx}function b(){g=io.Pop;let B=C(),z=B==null?null:B-y;y=B,v&&v({action:g,location:R.location,delta:z})}function T(B,z){g=io.Push;let O=U0(R.location,B,z);n&&n(O,B),y=C()+1;let k=Ug(O,y),W=R.createHref(O);try{f.pushState(k,"",W)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;a.location.assign(W)}c&&v&&v({action:g,location:R.location,delta:1})}function I(B,z){g=io.Replace;let O=U0(R.location,B,z);n&&n(O,B),y=C();let k=Ug(O,y),W=R.createHref(O);f.replaceState(k,"",W),c&&v&&v({action:g,location:R.location,delta:0})}function F(B){let z=a.location.origin!=="null"?a.location.origin:a.location.href,O=typeof B=="string"?B:Ld(B);return O=O.replace(/ $/,"%20"),Mn(z,"No window.location.(origin|href) available to create URL for href: "+O),new URL(O,z)}let R={get action(){return g},get location(){return e(a,f)},listen(B){if(v)throw new Error("A history only accepts one active listener");return a.addEventListener(zg,b),v=B,()=>{a.removeEventListener(zg,b),v=null}},createHref(B){return t(a,B)},createURL:F,encodeLocation(B){let z=F(B);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:T,replace:I,go(B){return f.go(B)}};return R}var Vg;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Vg||(Vg={}));function wA(e,t,n){return n===void 0&&(n="/"),vA(e,t,n)}function vA(e,t,n,i){let a=typeof t=="string"?ga(t):t,c=m1(a.pathname||"/",n);if(c==null)return null;let f=uv(e);_A(f);let g=null;for(let v=0;g==null&&v<f.length;++v){let y=OA(c);g=kA(f[v],y)}return g}function uv(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let a=(c,f,g)=>{let v={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};v.relativePath.startsWith("/")&&(Mn(v.relativePath.startsWith(i),'Absolute route path "'+v.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),v.relativePath=v.relativePath.slice(i.length));let y=po([i,v.relativePath]),C=n.concat(v);c.children&&c.children.length>0&&(Mn(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),uv(c.children,t,C,y)),!(c.path==null&&!c.index)&&t.push({path:y,score:TA(y,c.index),routesMeta:C})};return e.forEach((c,f)=>{var g;if(c.path===""||!((g=c.path)!=null&&g.includes("?")))a(c,f);else for(let v of dv(c.path))a(c,f,v)}),t}function dv(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,a=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return a?[c,""]:[c];let f=dv(i.join("/")),g=[];return g.push(...f.map(v=>v===""?c:[c,v].join("/"))),a&&g.push(...f),g.map(v=>e.startsWith("/")&&v===""?"/":v)}function _A(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:IA(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const bA=/^:[\w-]+$/,CA=3,SA=2,AA=1,EA=10,NA=-2,Hg=e=>e==="*";function TA(e,t){let n=e.split("/"),i=n.length;return n.some(Hg)&&(i+=NA),t&&(i+=SA),n.filter(a=>!Hg(a)).reduce((a,c)=>a+(bA.test(c)?CA:c===""?AA:EA),i)}function IA(e,t){return e.length===t.length&&e.slice(0,-1).every((i,a)=>i===t[a])?e[e.length-1]-t[t.length-1]:0}function kA(e,t,n){let{routesMeta:i}=e,a={},c="/",f=[];for(let g=0;g<i.length;++g){let v=i[g],y=g===i.length-1,C=c==="/"?t:t.slice(c.length)||"/",b=MA({path:v.relativePath,caseSensitive:v.caseSensitive,end:y},C),T=v.route;if(!b)return null;Object.assign(a,b.params),f.push({params:a,pathname:po([c,b.pathname]),pathnameBase:BA(po([c,b.pathnameBase])),route:T}),b.pathnameBase!=="/"&&(c=po([c,b.pathnameBase]))}return f}function MA(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=RA(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let c=a[0],f=c.replace(/(.)\/+$/,"$1"),g=a.slice(1);return{params:i.reduce((y,C,b)=>{let{paramName:T,isOptional:I}=C;if(T==="*"){let R=g[b]||"";f=c.slice(0,c.length-R.length).replace(/(.)\/+$/,"$1")}const F=g[b];return I&&!F?y[T]=void 0:y[T]=(F||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:f,pattern:e}}function RA(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),gh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,g,v)=>(i.push({paramName:g,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function OA(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return gh(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function m1(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}const LA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PA=e=>LA.test(e);function DA(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:a=""}=typeof e=="string"?ga(e):e,c;if(n)if(PA(n))c=n;else{if(n.includes("//")){let f=n;n=n.replace(/\/\/+/g,"/"),gh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(f+" -> "+n))}n.startsWith("/")?c=Wg(n.substring(1),"/"):c=Wg(n,t)}else c=t;return{pathname:c,search:FA(i),hash:zA(a)}}function Wg(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Cf(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jA(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function g1(e,t){let n=jA(e);return t?n.map((i,a)=>a===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function x1(e,t,n,i){i===void 0&&(i=!1);let a;typeof e=="string"?a=ga(e):(a=Lc({},e),Mn(!a.pathname||!a.pathname.includes("?"),Cf("?","pathname","search",a)),Mn(!a.pathname||!a.pathname.includes("#"),Cf("#","pathname","hash",a)),Mn(!a.search||!a.search.includes("#"),Cf("#","search","hash",a)));let c=e===""||a.pathname==="",f=c?"/":a.pathname,g;if(f==null)g=n;else{let b=t.length-1;if(!i&&f.startsWith("..")){let T=f.split("/");for(;T[0]==="..";)T.shift(),b-=1;a.pathname=T.join("/")}g=b>=0?t[b]:"/"}let v=DA(a,g),y=f&&f!=="/"&&f.endsWith("/"),C=(c||f===".")&&n.endsWith("/");return!v.pathname.endsWith("/")&&(y||C)&&(v.pathname+="/"),v}const po=e=>e.join("/").replace(/\/\/+/g,"/"),BA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),FA=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,zA=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function UA(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const hv=["post","put","patch","delete"];new Set(hv);const VA=["get",...hv];new Set(VA);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pc(){return Pc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Pc.apply(this,arguments)}const y1=j.createContext(null),HA=j.createContext(null),No=j.createContext(null),xh=j.createContext(null),ns=j.createContext({outlet:null,matches:[],isDataRoute:!1}),fv=j.createContext(null);function WA(e,t){let{relative:n}=t===void 0?{}:t;xl()||Mn(!1);let{basename:i,navigator:a}=j.useContext(No),{hash:c,pathname:f,search:g}=mv(e,{relative:n}),v=f;return i!=="/"&&(v=f==="/"?i:po([i,f])),a.createHref({pathname:v,search:g,hash:c})}function xl(){return j.useContext(xh)!=null}function To(){return xl()||Mn(!1),j.useContext(xh).location}function pv(e){j.useContext(No).static||j.useLayoutEffect(e)}function mr(){let{isDataRoute:e}=j.useContext(ns);return e?sE():ZA()}function ZA(){xl()||Mn(!1);let e=j.useContext(y1),{basename:t,future:n,navigator:i}=j.useContext(No),{matches:a}=j.useContext(ns),{pathname:c}=To(),f=JSON.stringify(g1(a,n.v7_relativeSplatPath)),g=j.useRef(!1);return pv(()=>{g.current=!0}),j.useCallback(function(y,C){if(C===void 0&&(C={}),!g.current)return;if(typeof y=="number"){i.go(y);return}let b=x1(y,JSON.parse(f),c,C.relative==="path");e==null&&t!=="/"&&(b.pathname=b.pathname==="/"?t:po([t,b.pathname])),(C.replace?i.replace:i.push)(b,C.state,C)},[t,i,f,c,e])}const GA=j.createContext(null);function YA(e){let t=j.useContext(ns).outlet;return t&&j.createElement(GA.Provider,{value:e},t)}function w1(){let{matches:e}=j.useContext(ns),t=e[e.length-1];return t?t.params:{}}function mv(e,t){let{relative:n}=t===void 0?{}:t,{future:i}=j.useContext(No),{matches:a}=j.useContext(ns),{pathname:c}=To(),f=JSON.stringify(g1(a,i.v7_relativeSplatPath));return j.useMemo(()=>x1(e,JSON.parse(f),c,n==="path"),[e,f,c,n])}function XA(e,t){return qA(e,t)}function qA(e,t,n,i){xl()||Mn(!1);let{navigator:a}=j.useContext(No),{matches:c}=j.useContext(ns),f=c[c.length-1],g=f?f.params:{};f&&f.pathname;let v=f?f.pathnameBase:"/";f&&f.route;let y=To(),C;if(t){var b;let B=typeof t=="string"?ga(t):t;v==="/"||(b=B.pathname)!=null&&b.startsWith(v)||Mn(!1),C=B}else C=y;let T=C.pathname||"/",I=T;if(v!=="/"){let B=v.replace(/^\//,"").split("/");I="/"+T.replace(/^\//,"").split("/").slice(B.length).join("/")}let F=wA(e,{pathname:I}),R=eE(F&&F.map(B=>Object.assign({},B,{params:Object.assign({},g,B.params),pathname:po([v,a.encodeLocation?a.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?v:po([v,a.encodeLocation?a.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),c,n,i);return t&&R?j.createElement(xh.Provider,{value:{location:Pc({pathname:"/",search:"",hash:"",state:null,key:"default"},C),navigationType:io.Pop}},R):R}function KA(){let e=iE(),t=UA(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),n?j.createElement("pre",{style:a},n):null,null)}const QA=j.createElement(KA,null);class $A extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?j.createElement(ns.Provider,{value:this.props.routeContext},j.createElement(fv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function JA(e){let{routeContext:t,match:n,children:i}=e,a=j.useContext(y1);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(ns.Provider,{value:t},i)}function eE(e,t,n,i){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),i===void 0&&(i=null),e==null){var c;if(!n)return null;if(n.errors)e=n.matches;else if((c=i)!=null&&c.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let f=e,g=(a=n)==null?void 0:a.errors;if(g!=null){let C=f.findIndex(b=>b.route.id&&(g==null?void 0:g[b.route.id])!==void 0);C>=0||Mn(!1),f=f.slice(0,Math.min(f.length,C+1))}let v=!1,y=-1;if(n&&i&&i.v7_partialHydration)for(let C=0;C<f.length;C++){let b=f[C];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(y=C),b.route.id){let{loaderData:T,errors:I}=n,F=b.route.loader&&T[b.route.id]===void 0&&(!I||I[b.route.id]===void 0);if(b.route.lazy||F){v=!0,y>=0?f=f.slice(0,y+1):f=[f[0]];break}}}return f.reduceRight((C,b,T)=>{let I,F=!1,R=null,B=null;n&&(I=g&&b.route.id?g[b.route.id]:void 0,R=b.route.errorElement||QA,v&&(y<0&&T===0?(oE("route-fallback"),F=!0,B=null):y===T&&(F=!0,B=b.route.hydrateFallbackElement||null)));let z=t.concat(f.slice(0,T+1)),O=()=>{let k;return I?k=R:F?k=B:b.route.Component?k=j.createElement(b.route.Component,null):b.route.element?k=b.route.element:k=C,j.createElement(JA,{match:b,routeContext:{outlet:C,matches:z,isDataRoute:n!=null},children:k})};return n&&(b.route.ErrorBoundary||b.route.errorElement||T===0)?j.createElement($A,{location:n.location,revalidation:n.revalidation,component:R,error:I,children:O(),routeContext:{outlet:null,matches:z,isDataRoute:!0}}):O()},null)}var gv=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(gv||{}),xv=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(xv||{});function tE(e){let t=j.useContext(y1);return t||Mn(!1),t}function nE(e){let t=j.useContext(HA);return t||Mn(!1),t}function rE(e){let t=j.useContext(ns);return t||Mn(!1),t}function yv(e){let t=rE(),n=t.matches[t.matches.length-1];return n.route.id||Mn(!1),n.route.id}function iE(){var e;let t=j.useContext(fv),n=nE(),i=yv();return t!==void 0?t:(e=n.errors)==null?void 0:e[i]}function sE(){let{router:e}=tE(gv.UseNavigateStable),t=yv(xv.UseNavigateStable),n=j.useRef(!1);return pv(()=>{n.current=!0}),j.useCallback(function(a,c){c===void 0&&(c={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Pc({fromRouteId:t},c)))},[e,t])}const Zg={};function oE(e,t,n){Zg[e]||(Zg[e]=!0)}function aE(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function nd(e){let{to:t,replace:n,state:i,relative:a}=e;xl()||Mn(!1);let{future:c,static:f}=j.useContext(No),{matches:g}=j.useContext(ns),{pathname:v}=To(),y=mr(),C=x1(t,g1(g,c.v7_relativeSplatPath),v,a==="path"),b=JSON.stringify(C);return j.useEffect(()=>y(JSON.parse(b),{replace:n,state:i,relative:a}),[y,b,a,n,i]),null}function lE(e){return YA(e.context)}function Vn(e){Mn(!1)}function cE(e){let{basename:t="/",children:n=null,location:i,navigationType:a=io.Pop,navigator:c,static:f=!1,future:g}=e;xl()&&Mn(!1);let v=t.replace(/^\/*/,"/"),y=j.useMemo(()=>({basename:v,navigator:c,static:f,future:Pc({v7_relativeSplatPath:!1},g)}),[v,g,c,f]);typeof i=="string"&&(i=ga(i));let{pathname:C="/",search:b="",hash:T="",state:I=null,key:F="default"}=i,R=j.useMemo(()=>{let B=m1(C,v);return B==null?null:{location:{pathname:B,search:b,hash:T,state:I,key:F},navigationType:a}},[v,C,b,T,I,F,a]);return R==null?null:j.createElement(No.Provider,{value:y},j.createElement(xh.Provider,{children:n,value:R}))}function uE(e){let{children:t,location:n}=e;return XA(V0(t),n)}new Promise(()=>{});function V0(e,t){t===void 0&&(t=[]);let n=[];return j.Children.forEach(e,(i,a)=>{if(!j.isValidElement(i))return;let c=[...t,a];if(i.type===j.Fragment){n.push.apply(n,V0(i.props.children,c));return}i.type!==Vn&&Mn(!1),!i.props.index||!i.props.children||Mn(!1);let f={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=V0(i.props.children,c)),n.push(f)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function H0(){return H0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},H0.apply(this,arguments)}function dE(e,t){if(e==null)return{};var n={},i=Object.keys(e),a,c;for(c=0;c<i.length;c++)a=i[c],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function hE(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function fE(e,t){return e.button===0&&(!t||t==="_self")&&!hE(e)}const pE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],mE="6";try{window.__reactRouterVersion=mE}catch{}const gE="startTransition",Gg=sS[gE];function xE(e){let{basename:t,children:n,future:i,window:a}=e,c=j.useRef();c.current==null&&(c.current=gA({window:a,v5Compat:!0}));let f=c.current,[g,v]=j.useState({action:f.action,location:f.location}),{v7_startTransition:y}=i||{},C=j.useCallback(b=>{y&&Gg?Gg(()=>v(b)):v(b)},[v,y]);return j.useLayoutEffect(()=>f.listen(C),[f,C]),j.useEffect(()=>aE(i),[i]),j.createElement(cE,{basename:t,children:n,location:g.location,navigationType:g.action,navigator:f,future:i})}const yE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vE=j.forwardRef(function(t,n){let{onClick:i,relative:a,reloadDocument:c,replace:f,state:g,target:v,to:y,preventScrollReset:C,viewTransition:b}=t,T=dE(t,pE),{basename:I}=j.useContext(No),F,R=!1;if(typeof y=="string"&&wE.test(y)&&(F=y,yE))try{let k=new URL(window.location.href),W=y.startsWith("//")?new URL(k.protocol+y):new URL(y),Q=m1(W.pathname,I);W.origin===k.origin&&Q!=null?y=Q+W.search+W.hash:R=!0}catch{}let B=WA(y,{relative:a}),z=_E(y,{replace:f,state:g,target:v,preventScrollReset:C,relative:a,viewTransition:b});function O(k){i&&i(k),k.defaultPrevented||z(k)}return j.createElement("a",H0({},T,{href:F||B,onClick:R||c?i:O,ref:n,target:v}))});var Yg;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Yg||(Yg={}));var Xg;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Xg||(Xg={}));function _E(e,t){let{target:n,replace:i,state:a,preventScrollReset:c,relative:f,viewTransition:g}=t===void 0?{}:t,v=mr(),y=To(),C=mv(e,{relative:f});return j.useCallback(b=>{if(fE(b,n)){b.preventDefault();let T=i!==void 0?i:Ld(y)===Ld(C);v(e,{replace:T,state:a,preventScrollReset:c,relative:f,viewTransition:g})}},[y,v,C,i,a,n,e,c,f,g])}const wv=j.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),yh=j.createContext({}),wh=j.createContext(null),vh=typeof document<"u",v1=vh?j.useLayoutEffect:j.useEffect,vv=j.createContext({strict:!1}),_1=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),bE="framerAppearId",_v="data-"+_1(bE);function CE(e,t,n,i){const{visualElement:a}=j.useContext(yh),c=j.useContext(vv),f=j.useContext(wh),g=j.useContext(wv).reducedMotion,v=j.useRef();i=i||c.renderer,!v.current&&i&&(v.current=i(e,{visualState:t,parent:a,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:g}));const y=v.current;j.useInsertionEffect(()=>{y&&y.update(n,f)});const C=j.useRef(!!(n[_v]&&!window.HandoffComplete));return v1(()=>{y&&(y.render(),C.current&&y.animationState&&y.animationState.animateChanges())}),j.useEffect(()=>{y&&(y.updateFeatures(),!C.current&&y.animationState&&y.animationState.animateChanges(),C.current&&(C.current=!1,window.HandoffComplete=!0))}),y}function Wa(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function SE(e,t,n){return j.useCallback(i=>{i&&e.mount&&e.mount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):Wa(n)&&(n.current=i))},[t])}function Dc(e){return typeof e=="string"||Array.isArray(e)}function _h(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const b1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],C1=["initial",...b1];function bh(e){return _h(e.animate)||C1.some(t=>Dc(e[t]))}function bv(e){return!!(bh(e)||e.variants)}function AE(e,t){if(bh(e)){const{initial:n,animate:i}=e;return{initial:n===!1||Dc(n)?n:void 0,animate:Dc(i)?i:void 0}}return e.inherit!==!1?t:{}}function EE(e){const{initial:t,animate:n}=AE(e,j.useContext(yh));return j.useMemo(()=>({initial:t,animate:n}),[qg(t),qg(n)])}function qg(e){return Array.isArray(e)?e.join(" "):e}const Kg={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jc={};for(const e in Kg)jc[e]={isEnabled:t=>Kg[e].some(n=>!!t[n])};function NE(e){for(const t in e)jc[t]={...jc[t],...e[t]}}const S1=j.createContext({}),Cv=j.createContext({}),TE=Symbol.for("motionComponentSymbol");function IE({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:i,Component:a}){e&&NE(e);function c(g,v){let y;const C={...j.useContext(wv),...g,layoutId:kE(g)},{isStatic:b}=C,T=EE(g),I=i(g,b);if(!b&&vh){T.visualElement=CE(a,I,C,t);const F=j.useContext(Cv),R=j.useContext(vv).strict;T.visualElement&&(y=T.visualElement.loadFeatures(C,R,e,F))}return j.createElement(yh.Provider,{value:T},y&&T.visualElement?j.createElement(y,{visualElement:T.visualElement,...C}):null,n(a,g,SE(I,T.visualElement,v),I,b,T.visualElement))}const f=j.forwardRef(c);return f[TE]=a,f}function kE({layoutId:e}){const t=j.useContext(S1).id;return t&&e!==void 0?t+"-"+e:e}function ME(e){function t(i,a={}){return IE(e(i,a))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(i,a)=>(n.has(a)||n.set(a,t(a)),n.get(a))})}const RE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function A1(e){return typeof e!="string"||e.includes("-")?!1:!!(RE.indexOf(e)>-1||/[A-Z]/.test(e))}const Pd={};function OE(e){Object.assign(Pd,e)}const Kc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],xa=new Set(Kc);function Sv(e,{layout:t,layoutId:n}){return xa.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Pd[e]||e==="opacity")}const zr=e=>!!(e&&e.getVelocity),LE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},PE=Kc.length;function DE(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},i,a){let c="";for(let f=0;f<PE;f++){const g=Kc[f];if(e[g]!==void 0){const v=LE[g]||g;c+=`${v}(${e[g]}) `}}return t&&!e.z&&(c+="translateZ(0)"),c=c.trim(),a?c=a(e,i?"":c):n&&i&&(c="none"),c}const Av=e=>t=>typeof t=="string"&&t.startsWith(e),Ev=Av("--"),W0=Av("var(--"),jE=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,BE=(e,t)=>t&&typeof e=="number"?t.transform(e):e,_o=(e,t,n)=>Math.min(Math.max(n,e),t),ya={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},uc={...ya,transform:e=>_o(0,1,e)},Lu={...ya,default:1},dc=e=>Math.round(e*1e5)/1e5,Ch=/(-)?([\d]*\.?[\d])+/g,Nv=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,FE=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Qc(e){return typeof e=="string"}const $c=e=>({test:t=>Qc(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Xs=$c("deg"),es=$c("%"),ft=$c("px"),zE=$c("vh"),UE=$c("vw"),Qg={...es,parse:e=>es.parse(e)/100,transform:e=>es.transform(e*100)},$g={...ya,transform:Math.round},Tv={borderWidth:ft,borderTopWidth:ft,borderRightWidth:ft,borderBottomWidth:ft,borderLeftWidth:ft,borderRadius:ft,radius:ft,borderTopLeftRadius:ft,borderTopRightRadius:ft,borderBottomRightRadius:ft,borderBottomLeftRadius:ft,width:ft,maxWidth:ft,height:ft,maxHeight:ft,size:ft,top:ft,right:ft,bottom:ft,left:ft,padding:ft,paddingTop:ft,paddingRight:ft,paddingBottom:ft,paddingLeft:ft,margin:ft,marginTop:ft,marginRight:ft,marginBottom:ft,marginLeft:ft,rotate:Xs,rotateX:Xs,rotateY:Xs,rotateZ:Xs,scale:Lu,scaleX:Lu,scaleY:Lu,scaleZ:Lu,skew:Xs,skewX:Xs,skewY:Xs,distance:ft,translateX:ft,translateY:ft,translateZ:ft,x:ft,y:ft,z:ft,perspective:ft,transformPerspective:ft,opacity:uc,originX:Qg,originY:Qg,originZ:ft,zIndex:$g,fillOpacity:uc,strokeOpacity:uc,numOctaves:$g};function E1(e,t,n,i){const{style:a,vars:c,transform:f,transformOrigin:g}=e;let v=!1,y=!1,C=!0;for(const b in t){const T=t[b];if(Ev(b)){c[b]=T;continue}const I=Tv[b],F=BE(T,I);if(xa.has(b)){if(v=!0,f[b]=F,!C)continue;T!==(I.default||0)&&(C=!1)}else b.startsWith("origin")?(y=!0,g[b]=F):a[b]=F}if(t.transform||(v||i?a.transform=DE(e.transform,n,C,i):a.transform&&(a.transform="none")),y){const{originX:b="50%",originY:T="50%",originZ:I=0}=g;a.transformOrigin=`${b} ${T} ${I}`}}const N1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Iv(e,t,n){for(const i in t)!zr(t[i])&&!Sv(i,n)&&(e[i]=t[i])}function VE({transformTemplate:e},t,n){return j.useMemo(()=>{const i=N1();return E1(i,t,{enableHardwareAcceleration:!n},e),Object.assign({},i.vars,i.style)},[t])}function HE(e,t,n){const i=e.style||{},a={};return Iv(a,i,e),Object.assign(a,VE(e,t,n)),e.transformValues?e.transformValues(a):a}function WE(e,t,n){const i={},a=HE(e,t,n);return e.drag&&e.dragListener!==!1&&(i.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=a,i}const ZE=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Dd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||ZE.has(e)}let kv=e=>!Dd(e);function GE(e){e&&(kv=t=>t.startsWith("on")?!Dd(t):e(t))}try{GE(require("@emotion/is-prop-valid").default)}catch{}function YE(e,t,n){const i={};for(const a in e)a==="values"&&typeof e.values=="object"||(kv(a)||n===!0&&Dd(a)||!t&&!Dd(a)||e.draggable&&a.startsWith("onDrag"))&&(i[a]=e[a]);return i}function Jg(e,t,n){return typeof e=="string"?e:ft.transform(t+n*e)}function XE(e,t,n){const i=Jg(t,e.x,e.width),a=Jg(n,e.y,e.height);return`${i} ${a}`}const qE={offset:"stroke-dashoffset",array:"stroke-dasharray"},KE={offset:"strokeDashoffset",array:"strokeDasharray"};function QE(e,t,n=1,i=0,a=!0){e.pathLength=1;const c=a?qE:KE;e[c.offset]=ft.transform(-i);const f=ft.transform(t),g=ft.transform(n);e[c.array]=`${f} ${g}`}function T1(e,{attrX:t,attrY:n,attrScale:i,originX:a,originY:c,pathLength:f,pathSpacing:g=1,pathOffset:v=0,...y},C,b,T){if(E1(e,y,C,T),b){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:I,style:F,dimensions:R}=e;I.transform&&(R&&(F.transform=I.transform),delete I.transform),R&&(a!==void 0||c!==void 0||F.transform)&&(F.transformOrigin=XE(R,a!==void 0?a:.5,c!==void 0?c:.5)),t!==void 0&&(I.x=t),n!==void 0&&(I.y=n),i!==void 0&&(I.scale=i),f!==void 0&&QE(I,f,g,v,!1)}const Mv=()=>({...N1(),attrs:{}}),I1=e=>typeof e=="string"&&e.toLowerCase()==="svg";function $E(e,t,n,i){const a=j.useMemo(()=>{const c=Mv();return T1(c,t,{enableHardwareAcceleration:!1},I1(i),e.transformTemplate),{...c.attrs,style:{...c.style}}},[t]);if(e.style){const c={};Iv(c,e.style,e),a.style={...c,...a.style}}return a}function JE(e=!1){return(n,i,a,{latestValues:c},f)=>{const v=(A1(n)?$E:WE)(i,c,f,n),C={...YE(i,typeof n=="string",e),...v,ref:a},{children:b}=i,T=j.useMemo(()=>zr(b)?b.get():b,[b]);return j.createElement(n,{...C,children:T})}}function Rv(e,{style:t,vars:n},i,a){Object.assign(e.style,t,a&&a.getProjectionStyles(i));for(const c in n)e.style.setProperty(c,n[c])}const Ov=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Lv(e,t,n,i){Rv(e,t,void 0,i);for(const a in t.attrs)e.setAttribute(Ov.has(a)?a:_1(a),t.attrs[a])}function k1(e,t){const{style:n}=e,i={};for(const a in n)(zr(n[a])||t.style&&zr(t.style[a])||Sv(a,e))&&(i[a]=n[a]);return i}function Pv(e,t){const n=k1(e,t);for(const i in e)if(zr(e[i])||zr(t[i])){const a=Kc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[a]=e[i]}return n}function M1(e,t,n,i={},a={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,i,a)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,i,a)),t}function Dv(e){const t=j.useRef(null);return t.current===null&&(t.current=e()),t.current}const jd=e=>Array.isArray(e),eN=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),tN=e=>jd(e)?e[e.length-1]||0:e;function rd(e){const t=zr(e)?e.get():e;return eN(t)?t.toValue():t}function nN({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},i,a,c){const f={latestValues:rN(i,a,c,e),renderState:t()};return n&&(f.mount=g=>n(i,g,f)),f}const jv=e=>(t,n)=>{const i=j.useContext(yh),a=j.useContext(wh),c=()=>nN(e,t,i,a);return n?c():Dv(c)};function rN(e,t,n,i){const a={},c=i(e,{});for(const T in c)a[T]=rd(c[T]);let{initial:f,animate:g}=e;const v=bh(e),y=bv(e);t&&y&&!v&&e.inherit!==!1&&(f===void 0&&(f=t.initial),g===void 0&&(g=t.animate));let C=n?n.initial===!1:!1;C=C||f===!1;const b=C?g:f;return b&&typeof b!="boolean"&&!_h(b)&&(Array.isArray(b)?b:[b]).forEach(I=>{const F=M1(e,I);if(!F)return;const{transitionEnd:R,transition:B,...z}=F;for(const O in z){let k=z[O];if(Array.isArray(k)){const W=C?k.length-1:0;k=k[W]}k!==null&&(a[O]=k)}for(const O in R)a[O]=R[O]}),a}const kn=e=>e;class ex{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function iN(e){let t=new ex,n=new ex,i=0,a=!1,c=!1;const f=new WeakSet,g={schedule:(v,y=!1,C=!1)=>{const b=C&&a,T=b?t:n;return y&&f.add(v),T.add(v)&&b&&a&&(i=t.order.length),v},cancel:v=>{n.remove(v),f.delete(v)},process:v=>{if(a){c=!0;return}if(a=!0,[t,n]=[n,t],n.clear(),i=t.order.length,i)for(let y=0;y<i;y++){const C=t.order[y];C(v),f.has(C)&&(g.schedule(C),e())}a=!1,c&&(c=!1,g.process(v))}};return g}const Pu=["prepare","read","update","preRender","render","postRender"],sN=40;function oN(e,t){let n=!1,i=!0;const a={delta:0,timestamp:0,isProcessing:!1},c=Pu.reduce((b,T)=>(b[T]=iN(()=>n=!0),b),{}),f=b=>c[b].process(a),g=()=>{const b=performance.now();n=!1,a.delta=i?1e3/60:Math.max(Math.min(b-a.timestamp,sN),1),a.timestamp=b,a.isProcessing=!0,Pu.forEach(f),a.isProcessing=!1,n&&t&&(i=!1,e(g))},v=()=>{n=!0,i=!0,a.isProcessing||e(g)};return{schedule:Pu.reduce((b,T)=>{const I=c[T];return b[T]=(F,R=!1,B=!1)=>(n||v(),I.schedule(F,R,B)),b},{}),cancel:b=>Pu.forEach(T=>c[T].cancel(b)),state:a,steps:c}}const{schedule:ln,cancel:Is,state:dr,steps:Sf}=oN(typeof requestAnimationFrame<"u"?requestAnimationFrame:kn,!0),aN={useVisualState:jv({scrapeMotionValuesFromProps:Pv,createRenderState:Mv,onMount:(e,t,{renderState:n,latestValues:i})=>{ln.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),ln.render(()=>{T1(n,i,{enableHardwareAcceleration:!1},I1(t.tagName),e.transformTemplate),Lv(t,n)})}})},lN={useVisualState:jv({scrapeMotionValuesFromProps:k1,createRenderState:N1})};function cN(e,{forwardMotionProps:t=!1},n,i){return{...A1(e)?aN:lN,preloadedFeatures:n,useRender:JE(t),createVisualElement:i,Component:e}}function ws(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}const Bv=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Sh(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const uN=e=>t=>Bv(t)&&e(t,Sh(t));function Cs(e,t,n,i){return ws(e,t,uN(n),i)}const dN=(e,t)=>n=>t(e(n)),mo=(...e)=>e.reduce(dN);function Fv(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const tx=Fv("dragHorizontal"),nx=Fv("dragVertical");function zv(e){let t=!1;if(e==="y")t=nx();else if(e==="x")t=tx();else{const n=tx(),i=nx();n&&i?t=()=>{n(),i()}:(n&&n(),i&&i())}return t}function Uv(){const e=zv(!0);return e?(e(),!1):!0}class Io{constructor(t){this.isMounted=!1,this.node=t}update(){}}function rx(e,t){const n="pointer"+(t?"enter":"leave"),i="onHover"+(t?"Start":"End"),a=(c,f)=>{if(c.pointerType==="touch"||Uv())return;const g=e.getProps();e.animationState&&g.whileHover&&e.animationState.setActive("whileHover",t),g[i]&&ln.update(()=>g[i](c,f))};return Cs(e.current,n,a,{passive:!e.getProps()[i]})}class hN extends Io{mount(){this.unmount=mo(rx(this.node,!0),rx(this.node,!1))}unmount(){}}class fN extends Io{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=mo(ws(this.node.current,"focus",()=>this.onFocus()),ws(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Vv=(e,t)=>t?e===t?!0:Vv(e,t.parentElement):!1;function Af(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Sh(n))}class pN extends Io{constructor(){super(...arguments),this.removeStartListeners=kn,this.removeEndListeners=kn,this.removeAccessibleListeners=kn,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),c=Cs(window,"pointerup",(g,v)=>{if(!this.checkPressEnd())return;const{onTap:y,onTapCancel:C,globalTapTarget:b}=this.node.getProps();ln.update(()=>{!b&&!Vv(this.node.current,g.target)?C&&C(g,v):y&&y(g,v)})},{passive:!(i.onTap||i.onPointerUp)}),f=Cs(window,"pointercancel",(g,v)=>this.cancelPress(g,v),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=mo(c,f),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=c=>{if(c.key!=="Enter"||this.isPressing)return;const f=g=>{g.key!=="Enter"||!this.checkPressEnd()||Af("up",(v,y)=>{const{onTap:C}=this.node.getProps();C&&ln.update(()=>C(v,y))})};this.removeEndListeners(),this.removeEndListeners=ws(this.node.current,"keyup",f),Af("down",(g,v)=>{this.startPress(g,v)})},n=ws(this.node.current,"keydown",t),i=()=>{this.isPressing&&Af("cancel",(c,f)=>this.cancelPress(c,f))},a=ws(this.node.current,"blur",i);this.removeAccessibleListeners=mo(n,a)}}startPress(t,n){this.isPressing=!0;const{onTapStart:i,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&ln.update(()=>i(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Uv()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&ln.update(()=>i(t,n))}mount(){const t=this.node.getProps(),n=Cs(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),i=ws(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=mo(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Z0=new WeakMap,Ef=new WeakMap,mN=e=>{const t=Z0.get(e.target);t&&t(e)},gN=e=>{e.forEach(mN)};function xN({root:e,...t}){const n=e||document;Ef.has(n)||Ef.set(n,{});const i=Ef.get(n),a=JSON.stringify(t);return i[a]||(i[a]=new IntersectionObserver(gN,{root:e,...t})),i[a]}function yN(e,t,n){const i=xN(t);return Z0.set(e,n),i.observe(e),()=>{Z0.delete(e),i.unobserve(e)}}const wN={some:0,all:1};class vN extends Io{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:a="some",once:c}=t,f={root:n?n.current:void 0,rootMargin:i,threshold:typeof a=="number"?a:wN[a]},g=v=>{const{isIntersecting:y}=v;if(this.isInView===y||(this.isInView=y,c&&!y&&this.hasEnteredView))return;y&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",y);const{onViewportEnter:C,onViewportLeave:b}=this.node.getProps(),T=y?C:b;T&&T(v)};return yN(this.node.current,f,g)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(_N(t,n))&&this.startObserver()}unmount(){}}function _N({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const bN={inView:{Feature:vN},tap:{Feature:pN},focus:{Feature:fN},hover:{Feature:hN}};function Hv(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function CN(e){const t={};return e.values.forEach((n,i)=>t[i]=n.get()),t}function SN(e){const t={};return e.values.forEach((n,i)=>t[i]=n.getVelocity()),t}function Ah(e,t,n){const i=e.getProps();return M1(i,t,n!==void 0?n:i.custom,CN(e),SN(e))}let R1=kn;const ra=e=>e*1e3,Ss=e=>e/1e3,AN={current:!1},Wv=e=>Array.isArray(e)&&typeof e[0]=="number";function Zv(e){return!!(!e||typeof e=="string"&&Gv[e]||Wv(e)||Array.isArray(e)&&e.every(Zv))}const Jl=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,Gv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Jl([0,.65,.55,1]),circOut:Jl([.55,0,1,.45]),backIn:Jl([.31,.01,.66,-.59]),backOut:Jl([.33,1.53,.69,.99])};function Yv(e){if(e)return Wv(e)?Jl(e):Array.isArray(e)?e.map(Yv):Gv[e]}function EN(e,t,n,{delay:i=0,duration:a,repeat:c=0,repeatType:f="loop",ease:g,times:v}={}){const y={[t]:n};v&&(y.offset=v);const C=Yv(g);return Array.isArray(C)&&(y.easing=C),e.animate(y,{delay:i,duration:a,easing:Array.isArray(C)?"linear":C,fill:"both",iterations:c+1,direction:f==="reverse"?"alternate":"normal"})}function NN(e,{repeat:t,repeatType:n="loop"}){const i=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[i]}const Xv=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,TN=1e-7,IN=12;function kN(e,t,n,i,a){let c,f,g=0;do f=t+(n-t)/2,c=Xv(f,i,a)-e,c>0?n=f:t=f;while(Math.abs(c)>TN&&++g<IN);return f}function Jc(e,t,n,i){if(e===t&&n===i)return kn;const a=c=>kN(c,0,1,e,n);return c=>c===0||c===1?c:Xv(a(c),t,i)}const MN=Jc(.42,0,1,1),RN=Jc(0,0,.58,1),qv=Jc(.42,0,.58,1),ON=e=>Array.isArray(e)&&typeof e[0]!="number",Kv=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Qv=e=>t=>1-e(1-t),O1=e=>1-Math.sin(Math.acos(e)),$v=Qv(O1),LN=Kv(O1),Jv=Jc(.33,1.53,.69,.99),L1=Qv(Jv),PN=Kv(L1),DN=e=>(e*=2)<1?.5*L1(e):.5*(2-Math.pow(2,-10*(e-1))),jN={linear:kn,easeIn:MN,easeInOut:qv,easeOut:RN,circIn:O1,circInOut:LN,circOut:$v,backIn:L1,backInOut:PN,backOut:Jv,anticipate:DN},ix=e=>{if(Array.isArray(e)){R1(e.length===4);const[t,n,i,a]=e;return Jc(t,n,i,a)}else if(typeof e=="string")return jN[e];return e},P1=(e,t)=>n=>!!(Qc(n)&&FE.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),e_=(e,t,n)=>i=>{if(!Qc(i))return i;const[a,c,f,g]=i.match(Ch);return{[e]:parseFloat(a),[t]:parseFloat(c),[n]:parseFloat(f),alpha:g!==void 0?parseFloat(g):1}},BN=e=>_o(0,255,e),Nf={...ya,transform:e=>Math.round(BN(e))},Jo={test:P1("rgb","red"),parse:e_("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+Nf.transform(e)+", "+Nf.transform(t)+", "+Nf.transform(n)+", "+dc(uc.transform(i))+")"};function FN(e){let t="",n="",i="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,i+=i,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:a?parseInt(a,16)/255:1}}const G0={test:P1("#"),parse:FN,transform:Jo.transform},Za={test:P1("hsl","hue"),parse:e_("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+es.transform(dc(t))+", "+es.transform(dc(n))+", "+dc(uc.transform(i))+")"},Sr={test:e=>Jo.test(e)||G0.test(e)||Za.test(e),parse:e=>Jo.test(e)?Jo.parse(e):Za.test(e)?Za.parse(e):G0.parse(e),transform:e=>Qc(e)?e:e.hasOwnProperty("red")?Jo.transform(e):Za.transform(e)},vn=(e,t,n)=>-n*e+n*t+e;function Tf(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function zN({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let a=0,c=0,f=0;if(!t)a=c=f=n;else{const g=n<.5?n*(1+t):n+t-n*t,v=2*n-g;a=Tf(v,g,e+1/3),c=Tf(v,g,e),f=Tf(v,g,e-1/3)}return{red:Math.round(a*255),green:Math.round(c*255),blue:Math.round(f*255),alpha:i}}const If=(e,t,n)=>{const i=e*e;return Math.sqrt(Math.max(0,n*(t*t-i)+i))},UN=[G0,Jo,Za],VN=e=>UN.find(t=>t.test(e));function sx(e){const t=VN(e);let n=t.parse(e);return t===Za&&(n=zN(n)),n}const t_=(e,t)=>{const n=sx(e),i=sx(t),a={...n};return c=>(a.red=If(n.red,i.red,c),a.green=If(n.green,i.green,c),a.blue=If(n.blue,i.blue,c),a.alpha=vn(n.alpha,i.alpha,c),Jo.transform(a))};function HN(e){var t,n;return isNaN(e)&&Qc(e)&&(((t=e.match(Ch))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(Nv))===null||n===void 0?void 0:n.length)||0)>0}const n_={regex:jE,countKey:"Vars",token:"${v}",parse:kn},r_={regex:Nv,countKey:"Colors",token:"${c}",parse:Sr.parse},i_={regex:Ch,countKey:"Numbers",token:"${n}",parse:ya.parse};function kf(e,{regex:t,countKey:n,token:i,parse:a}){const c=e.tokenised.match(t);c&&(e["num"+n]=c.length,e.tokenised=e.tokenised.replace(t,i),e.values.push(...c.map(a)))}function Bd(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&kf(n,n_),kf(n,r_),kf(n,i_),n}function s_(e){return Bd(e).values}function o_(e){const{values:t,numColors:n,numVars:i,tokenised:a}=Bd(e),c=t.length;return f=>{let g=a;for(let v=0;v<c;v++)v<i?g=g.replace(n_.token,f[v]):v<i+n?g=g.replace(r_.token,Sr.transform(f[v])):g=g.replace(i_.token,dc(f[v]));return g}}const WN=e=>typeof e=="number"?0:e;function ZN(e){const t=s_(e);return o_(e)(t.map(WN))}const bo={test:HN,parse:s_,createTransformer:o_,getAnimatableNone:ZN},a_=(e,t)=>n=>`${n>0?t:e}`;function l_(e,t){return typeof e=="number"?n=>vn(e,t,n):Sr.test(e)?t_(e,t):e.startsWith("var(")?a_(e,t):u_(e,t)}const c_=(e,t)=>{const n=[...e],i=n.length,a=e.map((c,f)=>l_(c,t[f]));return c=>{for(let f=0;f<i;f++)n[f]=a[f](c);return n}},GN=(e,t)=>{const n={...e,...t},i={};for(const a in n)e[a]!==void 0&&t[a]!==void 0&&(i[a]=l_(e[a],t[a]));return a=>{for(const c in i)n[c]=i[c](a);return n}},u_=(e,t)=>{const n=bo.createTransformer(t),i=Bd(e),a=Bd(t);return i.numVars===a.numVars&&i.numColors===a.numColors&&i.numNumbers>=a.numNumbers?mo(c_(i.values,a.values),n):a_(e,t)},Bc=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i},ox=(e,t)=>n=>vn(e,t,n);function YN(e){return typeof e=="number"?ox:typeof e=="string"?Sr.test(e)?t_:u_:Array.isArray(e)?c_:typeof e=="object"?GN:ox}function XN(e,t,n){const i=[],a=n||YN(e[0]),c=e.length-1;for(let f=0;f<c;f++){let g=a(e[f],e[f+1]);if(t){const v=Array.isArray(t)?t[f]||kn:t;g=mo(v,g)}i.push(g)}return i}function d_(e,t,{clamp:n=!0,ease:i,mixer:a}={}){const c=e.length;if(R1(c===t.length),c===1)return()=>t[0];e[0]>e[c-1]&&(e=[...e].reverse(),t=[...t].reverse());const f=XN(t,i,a),g=f.length,v=y=>{let C=0;if(g>1)for(;C<e.length-2&&!(y<e[C+1]);C++);const b=Bc(e[C],e[C+1],y);return f[C](b)};return n?y=>v(_o(e[0],e[c-1],y)):v}function qN(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const a=Bc(0,t,i);e.push(vn(n,1,a))}}function KN(e){const t=[0];return qN(t,e.length-1),t}function QN(e,t){return e.map(n=>n*t)}function $N(e,t){return e.map(()=>t||qv).splice(0,e.length-1)}function Fd({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const a=ON(i)?i.map(ix):ix(i),c={done:!1,value:t[0]},f=QN(n&&n.length===t.length?n:KN(t),e),g=d_(f,t,{ease:Array.isArray(a)?a:$N(t,a)});return{calculatedDuration:e,next:v=>(c.value=g(v),c.done=v>=e,c)}}function h_(e,t){return t?e*(1e3/t):0}const JN=5;function f_(e,t,n){const i=Math.max(t-JN,0);return h_(n-e(i),t-i)}const Mf=.001,e4=.01,t4=10,n4=.05,r4=1;function i4({duration:e=800,bounce:t=.25,velocity:n=0,mass:i=1}){let a,c,f=1-t;f=_o(n4,r4,f),e=_o(e4,t4,Ss(e)),f<1?(a=y=>{const C=y*f,b=C*e,T=C-n,I=Y0(y,f),F=Math.exp(-b);return Mf-T/I*F},c=y=>{const b=y*f*e,T=b*n+n,I=Math.pow(f,2)*Math.pow(y,2)*e,F=Math.exp(-b),R=Y0(Math.pow(y,2),f);return(-a(y)+Mf>0?-1:1)*((T-I)*F)/R}):(a=y=>{const C=Math.exp(-y*e),b=(y-n)*e+1;return-Mf+C*b},c=y=>{const C=Math.exp(-y*e),b=(n-y)*(e*e);return C*b});const g=5/e,v=o4(a,c,g);if(e=ra(e),isNaN(v))return{stiffness:100,damping:10,duration:e};{const y=Math.pow(v,2)*i;return{stiffness:y,damping:f*2*Math.sqrt(i*y),duration:e}}}const s4=12;function o4(e,t,n){let i=n;for(let a=1;a<s4;a++)i=i-e(i)/t(i);return i}function Y0(e,t){return e*Math.sqrt(1-t*t)}const a4=["duration","bounce"],l4=["stiffness","damping","mass"];function ax(e,t){return t.some(n=>e[n]!==void 0)}function c4(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!ax(e,l4)&&ax(e,a4)){const n=i4(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function p_({keyframes:e,restDelta:t,restSpeed:n,...i}){const a=e[0],c=e[e.length-1],f={done:!1,value:a},{stiffness:g,damping:v,mass:y,duration:C,velocity:b,isResolvedFromDuration:T}=c4({...i,velocity:-Ss(i.velocity||0)}),I=b||0,F=v/(2*Math.sqrt(g*y)),R=c-a,B=Ss(Math.sqrt(g/y)),z=Math.abs(R)<5;n||(n=z?.01:2),t||(t=z?.005:.5);let O;if(F<1){const k=Y0(B,F);O=W=>{const Q=Math.exp(-F*B*W);return c-Q*((I+F*B*R)/k*Math.sin(k*W)+R*Math.cos(k*W))}}else if(F===1)O=k=>c-Math.exp(-B*k)*(R+(I+B*R)*k);else{const k=B*Math.sqrt(F*F-1);O=W=>{const Q=Math.exp(-F*B*W),G=Math.min(k*W,300);return c-Q*((I+F*B*R)*Math.sinh(G)+k*R*Math.cosh(G))/k}}return{calculatedDuration:T&&C||null,next:k=>{const W=O(k);if(T)f.done=k>=C;else{let Q=I;k!==0&&(F<1?Q=f_(O,k,W):Q=0);const G=Math.abs(Q)<=n,H=Math.abs(c-W)<=t;f.done=G&&H}return f.value=f.done?c:W,f}}}function lx({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:a=10,bounceStiffness:c=500,modifyTarget:f,min:g,max:v,restDelta:y=.5,restSpeed:C}){const b=e[0],T={done:!1,value:b},I=q=>g!==void 0&&q<g||v!==void 0&&q>v,F=q=>g===void 0?v:v===void 0||Math.abs(g-q)<Math.abs(v-q)?g:v;let R=n*t;const B=b+R,z=f===void 0?B:f(B);z!==B&&(R=z-b);const O=q=>-R*Math.exp(-q/i),k=q=>z+O(q),W=q=>{const M=O(q),X=k(q);T.done=Math.abs(M)<=y,T.value=T.done?z:X};let Q,G;const H=q=>{I(T.value)&&(Q=q,G=p_({keyframes:[T.value,F(T.value)],velocity:f_(k,q,T.value),damping:a,stiffness:c,restDelta:y,restSpeed:C}))};return H(0),{calculatedDuration:null,next:q=>{let M=!1;return!G&&Q===void 0&&(M=!0,W(q),H(q)),Q!==void 0&&q>Q?G.next(q-Q):(!M&&W(q),T)}}}const u4=e=>{const t=({timestamp:n})=>e(n);return{start:()=>ln.update(t,!0),stop:()=>Is(t),now:()=>dr.isProcessing?dr.timestamp:performance.now()}},cx=2e4;function ux(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<cx;)t+=n,i=e.next(t);return t>=cx?1/0:t}const d4={decay:lx,inertia:lx,tween:Fd,keyframes:Fd,spring:p_};function zd({autoplay:e=!0,delay:t=0,driver:n=u4,keyframes:i,type:a="keyframes",repeat:c=0,repeatDelay:f=0,repeatType:g="loop",onPlay:v,onStop:y,onComplete:C,onUpdate:b,...T}){let I=1,F=!1,R,B;const z=()=>{B=new Promise(ge=>{R=ge})};z();let O;const k=d4[a]||Fd;let W;k!==Fd&&typeof i[0]!="number"&&(W=d_([0,100],i,{clamp:!1}),i=[0,100]);const Q=k({...T,keyframes:i});let G;g==="mirror"&&(G=k({...T,keyframes:[...i].reverse(),velocity:-(T.velocity||0)}));let H="idle",q=null,M=null,X=null;Q.calculatedDuration===null&&c&&(Q.calculatedDuration=ux(Q));const{calculatedDuration:ie}=Q;let se=1/0,ve=1/0;ie!==null&&(se=ie+f,ve=se*(c+1)-f);let Ee=0;const ae=ge=>{if(M===null)return;I>0&&(M=Math.min(M,ge)),I<0&&(M=Math.min(ge-ve/I,M)),q!==null?Ee=q:Ee=Math.round(ge-M)*I;const Me=Ee-t*(I>=0?1:-1),qe=I>=0?Me<0:Me>ve;Ee=Math.max(Me,0),H==="finished"&&q===null&&(Ee=ve);let De=Ee,ee=Q;if(c){const Nt=Math.min(Ee,ve)/se;let tt=Math.floor(Nt),ot=Nt%1;!ot&&Nt>=1&&(ot=1),ot===1&&tt--,tt=Math.min(tt,c+1),!!(tt%2)&&(g==="reverse"?(ot=1-ot,f&&(ot-=f/se)):g==="mirror"&&(ee=G)),De=_o(0,1,ot)*se}const oe=qe?{done:!1,value:i[0]}:ee.next(De);W&&(oe.value=W(oe.value));let{done:Le}=oe;!qe&&ie!==null&&(Le=I>=0?Ee>=ve:Ee<=0);const at=q===null&&(H==="finished"||H==="running"&&Le);return b&&b(oe.value),at&&ne(),oe},de=()=>{O&&O.stop(),O=void 0},ke=()=>{H="idle",de(),R(),z(),M=X=null},ne=()=>{H="finished",C&&C(),de(),R()},Se=()=>{if(F)return;O||(O=n(ae));const ge=O.now();v&&v(),q!==null?M=ge-q:(!M||H==="finished")&&(M=ge),H==="finished"&&z(),X=M,q=null,H="running",O.start()};e&&Se();const ye={then(ge,Me){return B.then(ge,Me)},get time(){return Ss(Ee)},set time(ge){ge=ra(ge),Ee=ge,q!==null||!O||I===0?q=ge:M=O.now()-ge/I},get duration(){const ge=Q.calculatedDuration===null?ux(Q):Q.calculatedDuration;return Ss(ge)},get speed(){return I},set speed(ge){ge===I||!O||(I=ge,ye.time=Ss(Ee))},get state(){return H},play:Se,pause:()=>{H="paused",q=Ee},stop:()=>{F=!0,H!=="idle"&&(H="idle",y&&y(),ke())},cancel:()=>{X!==null&&ae(X),ke()},complete:()=>{H="finished"},sample:ge=>(M=0,ae(ge))};return ye}function h4(e){let t;return()=>(t===void 0&&(t=e()),t)}const f4=h4(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),p4=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Du=10,m4=2e4,g4=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Zv(t.ease);function x4(e,t,{onUpdate:n,onComplete:i,...a}){if(!(f4()&&p4.has(t)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let f=!1,g,v,y=!1;const C=()=>{v=new Promise(k=>{g=k})};C();let{keyframes:b,duration:T=300,ease:I,times:F}=a;if(g4(t,a)){const k=zd({...a,repeat:0,delay:0});let W={done:!1,value:b[0]};const Q=[];let G=0;for(;!W.done&&G<m4;)W=k.sample(G),Q.push(W.value),G+=Du;F=void 0,b=Q,T=G-Du,I="linear"}const R=EN(e.owner.current,t,b,{...a,duration:T,ease:I,times:F}),B=()=>{y=!1,R.cancel()},z=()=>{y=!0,ln.update(B),g(),C()};return R.onfinish=()=>{y||(e.set(NN(b,a)),i&&i(),z())},{then(k,W){return v.then(k,W)},attachTimeline(k){return R.timeline=k,R.onfinish=null,kn},get time(){return Ss(R.currentTime||0)},set time(k){R.currentTime=ra(k)},get speed(){return R.playbackRate},set speed(k){R.playbackRate=k},get duration(){return Ss(T)},play:()=>{f||(R.play(),Is(B))},pause:()=>R.pause(),stop:()=>{if(f=!0,R.playState==="idle")return;const{currentTime:k}=R;if(k){const W=zd({...a,autoplay:!1});e.setWithVelocity(W.sample(k-Du).value,W.sample(k).value,Du)}z()},complete:()=>{y||R.finish()},cancel:z}}function y4({keyframes:e,delay:t,onUpdate:n,onComplete:i}){const a=()=>(n&&n(e[e.length-1]),i&&i(),{time:0,speed:1,duration:0,play:kn,pause:kn,stop:kn,then:c=>(c(),Promise.resolve()),cancel:kn,complete:kn});return t?zd({keyframes:[0,1],duration:0,delay:t,onComplete:a}):a()}const w4={type:"spring",stiffness:500,damping:25,restSpeed:10},v4=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),_4={type:"keyframes",duration:.8},b4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},C4=(e,{keyframes:t})=>t.length>2?_4:xa.has(e)?e.startsWith("scale")?v4(t[1]):w4:b4,X0=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(bo.test(t)||t==="0")&&!t.startsWith("url(")),S4=new Set(["brightness","contrast","saturate","opacity"]);function A4(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(Ch)||[];if(!i)return e;const a=n.replace(i,"");let c=S4.has(t)?1:0;return i!==n&&(c*=100),t+"("+c+a+")"}const E4=/([a-z-]*)\(.*?\)/g,q0={...bo,getAnimatableNone:e=>{const t=e.match(E4);return t?t.map(A4).join(" "):e}},N4={...Tv,color:Sr,backgroundColor:Sr,outlineColor:Sr,fill:Sr,stroke:Sr,borderColor:Sr,borderTopColor:Sr,borderRightColor:Sr,borderBottomColor:Sr,borderLeftColor:Sr,filter:q0,WebkitFilter:q0},D1=e=>N4[e];function m_(e,t){let n=D1(e);return n!==q0&&(n=bo),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const g_=e=>/^0[^.\s]+$/.test(e);function T4(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||g_(e)}function I4(e,t,n,i){const a=X0(t,n);let c;Array.isArray(n)?c=[...n]:c=[null,n];const f=i.from!==void 0?i.from:e.get();let g;const v=[];for(let y=0;y<c.length;y++)c[y]===null&&(c[y]=y===0?f:c[y-1]),T4(c[y])&&v.push(y),typeof c[y]=="string"&&c[y]!=="none"&&c[y]!=="0"&&(g=c[y]);if(a&&v.length&&g)for(let y=0;y<v.length;y++){const C=v[y];c[C]=m_(t,g)}return c}function k4({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:a,repeat:c,repeatType:f,repeatDelay:g,from:v,elapsed:y,...C}){return!!Object.keys(C).length}function j1(e,t){return e[t]||e.default||e}const M4={skipAnimations:!1},B1=(e,t,n,i={})=>a=>{const c=j1(i,e)||{},f=c.delay||i.delay||0;let{elapsed:g=0}=i;g=g-ra(f);const v=I4(t,e,n,c),y=v[0],C=v[v.length-1],b=X0(e,y),T=X0(e,C);let I={keyframes:v,velocity:t.getVelocity(),ease:"easeOut",...c,delay:-g,onUpdate:F=>{t.set(F),c.onUpdate&&c.onUpdate(F)},onComplete:()=>{a(),c.onComplete&&c.onComplete()}};if(k4(c)||(I={...I,...C4(e,I)}),I.duration&&(I.duration=ra(I.duration)),I.repeatDelay&&(I.repeatDelay=ra(I.repeatDelay)),!b||!T||AN.current||c.type===!1||M4.skipAnimations)return y4(I);if(!i.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const F=x4(t,e,I);if(F)return F}return zd(I)};function Ud(e){return!!(zr(e)&&e.add)}const x_=e=>/^\-?\d*\.?\d+$/.test(e);function F1(e,t){e.indexOf(t)===-1&&e.push(t)}function z1(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class U1{constructor(){this.subscriptions=[]}add(t){return F1(this.subscriptions,t),()=>z1(this.subscriptions,t)}notify(t,n,i){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,n,i);else for(let c=0;c<a;c++){const f=this.subscriptions[c];f&&f(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const R4=e=>!isNaN(parseFloat(e));class O4{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,a=!0)=>{this.prev=this.current,this.current=i;const{delta:c,timestamp:f}=dr;this.lastUpdated!==f&&(this.timeDelta=c,this.lastUpdated=f,ln.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ln.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=R4(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new U1);const i=this.events[t].add(n);return t==="change"?()=>{i(),ln.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,i){this.set(n),this.prev=t,this.timeDelta=i}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?h_(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ul(e,t){return new O4(e,t)}const y_=e=>t=>t.test(e),L4={test:e=>e==="auto",parse:e=>e},w_=[ya,ft,es,Xs,UE,zE,L4],Wl=e=>w_.find(y_(e)),P4=[...w_,Sr,bo],D4=e=>P4.find(y_(e));function j4(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ul(n))}function B4(e,t){const n=Ah(e,t);let{transitionEnd:i={},transition:a={},...c}=n?e.makeTargetAnimatable(n,!1):{};c={...c,...i};for(const f in c){const g=tN(c[f]);j4(e,f,g)}}function F4(e,t,n){var i,a;const c=Object.keys(t).filter(g=>!e.hasValue(g)),f=c.length;if(f)for(let g=0;g<f;g++){const v=c[g],y=t[v];let C=null;Array.isArray(y)&&(C=y[0]),C===null&&(C=(a=(i=n[v])!==null&&i!==void 0?i:e.readValue(v))!==null&&a!==void 0?a:t[v]),C!=null&&(typeof C=="string"&&(x_(C)||g_(C))?C=parseFloat(C):!D4(C)&&bo.test(y)&&(C=m_(v,y)),e.addValue(v,ul(C,{owner:e})),n[v]===void 0&&(n[v]=C),C!==null&&e.setBaseTarget(v,C))}}function z4(e,t){return t?(t[e]||t.default||t).from:void 0}function U4(e,t,n){const i={};for(const a in e){const c=z4(a,t);if(c!==void 0)i[a]=c;else{const f=n.getValue(a);f&&(i[a]=f.get())}}return i}function V4({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function H4(e,t){const n=e.get();if(Array.isArray(t)){for(let i=0;i<t.length;i++)if(t[i]!==n)return!0}else return n!==t}function v_(e,t,{delay:n=0,transitionOverride:i,type:a}={}){let{transition:c=e.getDefaultTransition(),transitionEnd:f,...g}=e.makeTargetAnimatable(t);const v=e.getValue("willChange");i&&(c=i);const y=[],C=a&&e.animationState&&e.animationState.getState()[a];for(const b in g){const T=e.getValue(b),I=g[b];if(!T||I===void 0||C&&V4(C,b))continue;const F={delay:n,elapsed:0,...j1(c||{},b)};if(window.HandoffAppearAnimations){const z=e.getProps()[_v];if(z){const O=window.HandoffAppearAnimations(z,b,T,ln);O!==null&&(F.elapsed=O,F.isHandoff=!0)}}let R=!F.isHandoff&&!H4(T,I);if(F.type==="spring"&&(T.getVelocity()||F.velocity)&&(R=!1),T.animation&&(R=!1),R)continue;T.start(B1(b,T,I,e.shouldReduceMotion&&xa.has(b)?{type:!1}:F));const B=T.animation;Ud(v)&&(v.add(b),B.then(()=>v.remove(b))),y.push(B)}return f&&Promise.all(y).then(()=>{f&&B4(e,f)}),y}function K0(e,t,n={}){const i=Ah(e,t,n.custom);let{transition:a=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const c=i?()=>Promise.all(v_(e,i,n)):()=>Promise.resolve(),f=e.variantChildren&&e.variantChildren.size?(v=0)=>{const{delayChildren:y=0,staggerChildren:C,staggerDirection:b}=a;return W4(e,t,y+v,C,b,n)}:()=>Promise.resolve(),{when:g}=a;if(g){const[v,y]=g==="beforeChildren"?[c,f]:[f,c];return v().then(()=>y())}else return Promise.all([c(),f(n.delay)])}function W4(e,t,n=0,i=0,a=1,c){const f=[],g=(e.variantChildren.size-1)*i,v=a===1?(y=0)=>y*i:(y=0)=>g-y*i;return Array.from(e.variantChildren).sort(Z4).forEach((y,C)=>{y.notify("AnimationStart",t),f.push(K0(y,t,{...c,delay:n+v(C)}).then(()=>y.notify("AnimationComplete",t)))}),Promise.all(f)}function Z4(e,t){return e.sortNodePosition(t)}function G4(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const a=t.map(c=>K0(e,c,n));i=Promise.all(a)}else if(typeof t=="string")i=K0(e,t,n);else{const a=typeof t=="function"?Ah(e,t,n.custom):t;i=Promise.all(v_(e,a,n))}return i.then(()=>e.notify("AnimationComplete",t))}const Y4=[...b1].reverse(),X4=b1.length;function q4(e){return t=>Promise.all(t.map(({animation:n,options:i})=>G4(e,n,i)))}function K4(e){let t=q4(e);const n=$4();let i=!0;const a=(v,y)=>{const C=Ah(e,y);if(C){const{transition:b,transitionEnd:T,...I}=C;v={...v,...I,...T}}return v};function c(v){t=v(e)}function f(v,y){const C=e.getProps(),b=e.getVariantContext(!0)||{},T=[],I=new Set;let F={},R=1/0;for(let z=0;z<X4;z++){const O=Y4[z],k=n[O],W=C[O]!==void 0?C[O]:b[O],Q=Dc(W),G=O===y?k.isActive:null;G===!1&&(R=z);let H=W===b[O]&&W!==C[O]&&Q;if(H&&i&&e.manuallyAnimateOnMount&&(H=!1),k.protectedKeys={...F},!k.isActive&&G===null||!W&&!k.prevProp||_h(W)||typeof W=="boolean")continue;let M=Q4(k.prevProp,W)||O===y&&k.isActive&&!H&&Q||z>R&&Q,X=!1;const ie=Array.isArray(W)?W:[W];let se=ie.reduce(a,{});G===!1&&(se={});const{prevResolvedValues:ve={}}=k,Ee={...ve,...se},ae=de=>{M=!0,I.has(de)&&(X=!0,I.delete(de)),k.needsAnimating[de]=!0};for(const de in Ee){const ke=se[de],ne=ve[de];if(F.hasOwnProperty(de))continue;let Se=!1;jd(ke)&&jd(ne)?Se=!Hv(ke,ne):Se=ke!==ne,Se?ke!==void 0?ae(de):I.add(de):ke!==void 0&&I.has(de)?ae(de):k.protectedKeys[de]=!0}k.prevProp=W,k.prevResolvedValues=se,k.isActive&&(F={...F,...se}),i&&e.blockInitialAnimation&&(M=!1),M&&(!H||X)&&T.push(...ie.map(de=>({animation:de,options:{type:O,...v}})))}if(I.size){const z={};I.forEach(O=>{const k=e.getBaseTarget(O);k!==void 0&&(z[O]=k)}),T.push({animation:z})}let B=!!T.length;return i&&(C.initial===!1||C.initial===C.animate)&&!e.manuallyAnimateOnMount&&(B=!1),i=!1,B?t(T):Promise.resolve()}function g(v,y,C){var b;if(n[v].isActive===y)return Promise.resolve();(b=e.variantChildren)===null||b===void 0||b.forEach(I=>{var F;return(F=I.animationState)===null||F===void 0?void 0:F.setActive(v,y)}),n[v].isActive=y;const T=f(C,v);for(const I in n)n[I].protectedKeys={};return T}return{animateChanges:f,setActive:g,setAnimateFunction:c,getState:()=>n}}function Q4(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Hv(t,e):!1}function Vo(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function $4(){return{animate:Vo(!0),whileInView:Vo(),whileHover:Vo(),whileTap:Vo(),whileDrag:Vo(),whileFocus:Vo(),exit:Vo()}}class J4 extends Io{constructor(t){super(t),t.animationState||(t.animationState=K4(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),_h(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let eT=0;class tT extends Io{constructor(){super(...arguments),this.id=eT++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const c=this.node.animationState.setActive("exit",!t,{custom:i??this.node.getProps().custom});n&&!t&&c.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const nT={animation:{Feature:J4},exit:{Feature:tT}},dx=(e,t)=>Math.abs(e-t);function rT(e,t){const n=dx(e.x,t.x),i=dx(e.y,t.y);return Math.sqrt(n**2+i**2)}class __{constructor(t,n,{transformPagePoint:i,contextWindow:a,dragSnapToOrigin:c=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Of(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,I=rT(b.offset,{x:0,y:0})>=3;if(!T&&!I)return;const{point:F}=b,{timestamp:R}=dr;this.history.push({...F,timestamp:R});const{onStart:B,onMove:z}=this.handlers;T||(B&&B(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,b)},this.handlePointerMove=(b,T)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=Rf(T,this.transformPagePoint),ln.update(this.updatePoint,!0)},this.handlePointerUp=(b,T)=>{this.end();const{onEnd:I,onSessionEnd:F,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const B=Of(b.type==="pointercancel"?this.lastMoveEventInfo:Rf(T,this.transformPagePoint),this.history);this.startEvent&&I&&I(b,B),F&&F(b,B)},!Bv(t))return;this.dragSnapToOrigin=c,this.handlers=n,this.transformPagePoint=i,this.contextWindow=a||window;const f=Sh(t),g=Rf(f,this.transformPagePoint),{point:v}=g,{timestamp:y}=dr;this.history=[{...v,timestamp:y}];const{onSessionStart:C}=n;C&&C(t,Of(g,this.history)),this.removeListeners=mo(Cs(this.contextWindow,"pointermove",this.handlePointerMove),Cs(this.contextWindow,"pointerup",this.handlePointerUp),Cs(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Is(this.updatePoint)}}function Rf(e,t){return t?{point:t(e.point)}:e}function hx(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Of({point:e},t){return{point:e,delta:hx(e,b_(t)),offset:hx(e,iT(t)),velocity:sT(t,.1)}}function iT(e){return e[0]}function b_(e){return e[e.length-1]}function sT(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const a=b_(e);for(;n>=0&&(i=e[n],!(a.timestamp-i.timestamp>ra(t)));)n--;if(!i)return{x:0,y:0};const c=Ss(a.timestamp-i.timestamp);if(c===0)return{x:0,y:0};const f={x:(a.x-i.x)/c,y:(a.y-i.y)/c};return f.x===1/0&&(f.x=0),f.y===1/0&&(f.y=0),f}function Jr(e){return e.max-e.min}function Q0(e,t=0,n=.01){return Math.abs(e-t)<=n}function fx(e,t,n,i=.5){e.origin=i,e.originPoint=vn(t.min,t.max,e.origin),e.scale=Jr(n)/Jr(t),(Q0(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=vn(n.min,n.max,e.origin)-e.originPoint,(Q0(e.translate)||isNaN(e.translate))&&(e.translate=0)}function hc(e,t,n,i){fx(e.x,t.x,n.x,i?i.originX:void 0),fx(e.y,t.y,n.y,i?i.originY:void 0)}function px(e,t,n){e.min=n.min+t.min,e.max=e.min+Jr(t)}function oT(e,t,n){px(e.x,t.x,n.x),px(e.y,t.y,n.y)}function mx(e,t,n){e.min=t.min-n.min,e.max=e.min+Jr(t)}function fc(e,t,n){mx(e.x,t.x,n.x),mx(e.y,t.y,n.y)}function aT(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?vn(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?vn(n,e,i.max):Math.min(e,n)),e}function gx(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function lT(e,{top:t,left:n,bottom:i,right:a}){return{x:gx(e.x,n,a),y:gx(e.y,t,i)}}function xx(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function cT(e,t){return{x:xx(e.x,t.x),y:xx(e.y,t.y)}}function uT(e,t){let n=.5;const i=Jr(e),a=Jr(t);return a>i?n=Bc(t.min,t.max-i,e.min):i>a&&(n=Bc(e.min,e.max-a,t.min)),_o(0,1,n)}function dT(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const $0=.35;function hT(e=$0){return e===!1?e=0:e===!0&&(e=$0),{x:yx(e,"left","right"),y:yx(e,"top","bottom")}}function yx(e,t,n){return{min:wx(e,t),max:wx(e,n)}}function wx(e,t){return typeof e=="number"?e:e[t]||0}const vx=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ga=()=>({x:vx(),y:vx()}),_x=()=>({min:0,max:0}),Dn=()=>({x:_x(),y:_x()});function fi(e){return[e("x"),e("y")]}function C_({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function fT({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function pT(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Lf(e){return e===void 0||e===1}function J0({scale:e,scaleX:t,scaleY:n}){return!Lf(e)||!Lf(t)||!Lf(n)}function Go(e){return J0(e)||S_(e)||e.z||e.rotate||e.rotateX||e.rotateY}function S_(e){return bx(e.x)||bx(e.y)}function bx(e){return e&&e!=="0%"}function Vd(e,t,n){const i=e-n,a=t*i;return n+a}function Cx(e,t,n,i,a){return a!==void 0&&(e=Vd(e,a,i)),Vd(e,n,i)+t}function ep(e,t=0,n=1,i,a){e.min=Cx(e.min,t,n,i,a),e.max=Cx(e.max,t,n,i,a)}function A_(e,{x:t,y:n}){ep(e.x,t.translate,t.scale,t.originPoint),ep(e.y,n.translate,n.scale,n.originPoint)}function mT(e,t,n,i=!1){const a=n.length;if(!a)return;t.x=t.y=1;let c,f;for(let g=0;g<a;g++){c=n[g],f=c.projectionDelta;const v=c.instance;v&&v.style&&v.style.display==="contents"||(i&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Ya(e,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),f&&(t.x*=f.x.scale,t.y*=f.y.scale,A_(e,f)),i&&Go(c.latestValues)&&Ya(e,c.latestValues))}t.x=Sx(t.x),t.y=Sx(t.y)}function Sx(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Qs(e,t){e.min=e.min+t,e.max=e.max+t}function Ax(e,t,[n,i,a]){const c=t[a]!==void 0?t[a]:.5,f=vn(e.min,e.max,c);ep(e,t[n],t[i],f,t.scale)}const gT=["x","scaleX","originX"],xT=["y","scaleY","originY"];function Ya(e,t){Ax(e.x,t,gT),Ax(e.y,t,xT)}function E_(e,t){return C_(pT(e.getBoundingClientRect(),t))}function yT(e,t,n){const i=E_(e,n),{scroll:a}=t;return a&&(Qs(i.x,a.offset.x),Qs(i.y,a.offset.y)),i}const N_=({current:e})=>e?e.ownerDocument.defaultView:null,wT=new WeakMap;class vT{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dn(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=C=>{const{dragSnapToOrigin:b}=this.getProps();b?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Sh(C,"page").point)},c=(C,b)=>{const{drag:T,dragPropagation:I,onDragStart:F}=this.getProps();if(T&&!I&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=zv(T),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fi(B=>{let z=this.getAxisMotionValue(B).get()||0;if(es.test(z)){const{projection:O}=this.visualElement;if(O&&O.layout){const k=O.layout.layoutBox[B];k&&(z=Jr(k)*(parseFloat(z)/100))}}this.originPoint[B]=z}),F&&ln.update(()=>F(C,b),!1,!0);const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},f=(C,b)=>{const{dragPropagation:T,dragDirectionLock:I,onDirectionLock:F,onDrag:R}=this.getProps();if(!T&&!this.openGlobalLock)return;const{offset:B}=b;if(I&&this.currentDirection===null){this.currentDirection=_T(B),this.currentDirection!==null&&F&&F(this.currentDirection);return}this.updateAxis("x",b.point,B),this.updateAxis("y",b.point,B),this.visualElement.render(),R&&R(C,b)},g=(C,b)=>this.stop(C,b),v=()=>fi(C=>{var b;return this.getAnimationState(C)==="paused"&&((b=this.getAxisMotionValue(C).animation)===null||b===void 0?void 0:b.play())}),{dragSnapToOrigin:y}=this.getProps();this.panSession=new __(t,{onSessionStart:a,onStart:c,onMove:f,onSessionEnd:g,resumeAnimation:v},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,contextWindow:N_(this.visualElement)})}stop(t,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:c}=this.getProps();c&&ln.update(()=>c(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:a}=this.getProps();if(!i||!ju(t,a,this.currentDirection))return;const c=this.getAxisMotionValue(t);let f=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(f=aT(f,this.constraints[t],this.elastic[t])),c.set(f)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:i}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,c=this.constraints;n&&Wa(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&a?this.constraints=lT(a.layoutBox,n):this.constraints=!1,this.elastic=hT(i),c!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&fi(f=>{this.getAxisMotionValue(f)&&(this.constraints[f]=dT(a.layoutBox[f],this.constraints[f]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Wa(t))return!1;const i=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const c=yT(i,a.root,this.visualElement.getTransformPagePoint());let f=cT(a.layout.layoutBox,c);if(n){const g=n(fT(f));this.hasMutatedConstraints=!!g,g&&(f=C_(g))}return f}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:a,dragTransition:c,dragSnapToOrigin:f,onDragTransitionEnd:g}=this.getProps(),v=this.constraints||{},y=fi(C=>{if(!ju(C,n,this.currentDirection))return;let b=v&&v[C]||{};f&&(b={min:0,max:0});const T=a?200:1e6,I=a?40:1e7,F={type:"inertia",velocity:i?t[C]:0,bounceStiffness:T,bounceDamping:I,timeConstant:750,restDelta:1,restSpeed:10,...c,...b};return this.startAxisValueAnimation(C,F)});return Promise.all(y).then(g)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return i.start(B1(t,i,0,n))}stopAnimation(){fi(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){fi(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),i=this.visualElement.getProps(),a=i[n];return a||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){fi(n=>{const{drag:i}=this.getProps();if(!ju(n,i,this.currentDirection))return;const{projection:a}=this.visualElement,c=this.getAxisMotionValue(n);if(a&&a.layout){const{min:f,max:g}=a.layout.layoutBox[n];c.set(t[n]-vn(f,g,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Wa(n)||!i||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};fi(f=>{const g=this.getAxisMotionValue(f);if(g){const v=g.get();a[f]=uT({min:v,max:v},this.constraints[f])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),fi(f=>{if(!ju(f,t,null))return;const g=this.getAxisMotionValue(f),{min:v,max:y}=this.constraints[f];g.set(vn(v,y,a[f]))})}addListeners(){if(!this.visualElement.current)return;wT.set(this.visualElement,this);const t=this.visualElement.current,n=Cs(t,"pointerdown",v=>{const{drag:y,dragListener:C=!0}=this.getProps();y&&C&&this.start(v)}),i=()=>{const{dragConstraints:v}=this.getProps();Wa(v)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,c=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),i();const f=ws(window,"resize",()=>this.scalePositionWithinConstraints()),g=a.addEventListener("didUpdate",({delta:v,hasLayoutChanged:y})=>{this.isDragging&&y&&(fi(C=>{const b=this.getAxisMotionValue(C);b&&(this.originPoint[C]+=v[C].translate,b.set(b.get()+v[C].translate))}),this.visualElement.render())});return()=>{f(),n(),c(),g&&g()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:a=!1,dragConstraints:c=!1,dragElastic:f=$0,dragMomentum:g=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:a,dragConstraints:c,dragElastic:f,dragMomentum:g}}}function ju(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function _T(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class bT extends Io{constructor(t){super(t),this.removeGroupControls=kn,this.removeListeners=kn,this.controls=new vT(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||kn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ex=e=>(t,n)=>{e&&ln.update(()=>e(t,n))};class CT extends Io{constructor(){super(...arguments),this.removePointerDownListener=kn}onPointerDown(t){this.session=new __(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:N_(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:a}=this.node.getProps();return{onSessionStart:Ex(t),onStart:Ex(n),onMove:i,onEnd:(c,f)=>{delete this.session,a&&ln.update(()=>a(c,f))}}}mount(){this.removePointerDownListener=Cs(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function ST(){const e=j.useContext(wh);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,a=j.useId();return j.useEffect(()=>i(a),[]),!t&&n?[!1,()=>n&&n(a)]:[!0]}const id={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Nx(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Zl={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ft.test(e))e=parseFloat(e);else return e;const n=Nx(e,t.target.x),i=Nx(e,t.target.y);return`${n}% ${i}%`}},AT={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,a=bo.parse(e);if(a.length>5)return i;const c=bo.createTransformer(e),f=typeof a[0]!="number"?1:0,g=n.x.scale*t.x,v=n.y.scale*t.y;a[0+f]/=g,a[1+f]/=v;const y=vn(g,v,.5);return typeof a[2+f]=="number"&&(a[2+f]/=y),typeof a[3+f]=="number"&&(a[3+f]/=y),c(a)}};class ET extends aa.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:a}=this.props,{projection:c}=t;OE(NT),c&&(n.group&&n.group.add(c),i&&i.register&&a&&i.register(c),c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),id.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:a,isPresent:c}=this.props,f=i.projection;return f&&(f.isPresent=c,a||t.layoutDependency!==n||n===void 0?f.willUpdate():this.safeToRemove(),t.isPresent!==c&&(c?f.promote():f.relegate()||ln.postRender(()=>{const g=f.getStack();(!g||!g.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),i&&i.deregister&&i.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function T_(e){const[t,n]=ST(),i=j.useContext(S1);return aa.createElement(ET,{...e,layoutGroup:i,switchLayoutGroup:j.useContext(Cv),isPresent:t,safeToRemove:n})}const NT={borderRadius:{...Zl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zl,borderTopRightRadius:Zl,borderBottomLeftRadius:Zl,borderBottomRightRadius:Zl,boxShadow:AT},I_=["TopLeft","TopRight","BottomLeft","BottomRight"],TT=I_.length,Tx=e=>typeof e=="string"?parseFloat(e):e,Ix=e=>typeof e=="number"||ft.test(e);function IT(e,t,n,i,a,c){a?(e.opacity=vn(0,n.opacity!==void 0?n.opacity:1,kT(i)),e.opacityExit=vn(t.opacity!==void 0?t.opacity:1,0,MT(i))):c&&(e.opacity=vn(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let f=0;f<TT;f++){const g=`border${I_[f]}Radius`;let v=kx(t,g),y=kx(n,g);if(v===void 0&&y===void 0)continue;v||(v=0),y||(y=0),v===0||y===0||Ix(v)===Ix(y)?(e[g]=Math.max(vn(Tx(v),Tx(y),i),0),(es.test(y)||es.test(v))&&(e[g]+="%")):e[g]=y}(t.rotate||n.rotate)&&(e.rotate=vn(t.rotate||0,n.rotate||0,i))}function kx(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const kT=k_(0,.5,$v),MT=k_(.5,.95,kn);function k_(e,t,n){return i=>i<e?0:i>t?1:n(Bc(e,t,i))}function Mx(e,t){e.min=t.min,e.max=t.max}function ui(e,t){Mx(e.x,t.x),Mx(e.y,t.y)}function Rx(e,t,n,i,a){return e-=t,e=Vd(e,1/n,i),a!==void 0&&(e=Vd(e,1/a,i)),e}function RT(e,t=0,n=1,i=.5,a,c=e,f=e){if(es.test(t)&&(t=parseFloat(t),t=vn(f.min,f.max,t/100)-f.min),typeof t!="number")return;let g=vn(c.min,c.max,i);e===c&&(g-=t),e.min=Rx(e.min,t,n,g,a),e.max=Rx(e.max,t,n,g,a)}function Ox(e,t,[n,i,a],c,f){RT(e,t[n],t[i],t[a],t.scale,c,f)}const OT=["x","scaleX","originX"],LT=["y","scaleY","originY"];function Lx(e,t,n,i){Ox(e.x,t,OT,n?n.x:void 0,i?i.x:void 0),Ox(e.y,t,LT,n?n.y:void 0,i?i.y:void 0)}function Px(e){return e.translate===0&&e.scale===1}function M_(e){return Px(e.x)&&Px(e.y)}function PT(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function R_(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Dx(e){return Jr(e.x)/Jr(e.y)}class DT{constructor(){this.members=[]}add(t){F1(this.members,t),t.scheduleRender()}remove(t){if(z1(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(a=>t===a);if(n===0)return!1;let i;for(let a=n;a>=0;a--){const c=this.members[a];if(c.isPresent!==!1){i=c;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jx(e,t,n){let i="";const a=e.x.translate/t.x,c=e.y.translate/t.y;if((a||c)&&(i=`translate3d(${a}px, ${c}px, 0) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:v,rotateX:y,rotateY:C}=n;v&&(i+=`rotate(${v}deg) `),y&&(i+=`rotateX(${y}deg) `),C&&(i+=`rotateY(${C}deg) `)}const f=e.x.scale*t.x,g=e.y.scale*t.y;return(f!==1||g!==1)&&(i+=`scale(${f}, ${g})`),i||"none"}const jT=(e,t)=>e.depth-t.depth;class BT{constructor(){this.children=[],this.isDirty=!1}add(t){F1(this.children,t),this.isDirty=!0}remove(t){z1(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(jT),this.isDirty=!1,this.children.forEach(t)}}function FT(e,t){const n=performance.now(),i=({timestamp:a})=>{const c=a-n;c>=t&&(Is(i),e(c-t))};return ln.read(i,!0),()=>Is(i)}function zT(e){window.MotionDebug&&window.MotionDebug.record(e)}function UT(e){return e instanceof SVGElement&&e.tagName!=="svg"}function VT(e,t,n){const i=zr(e)?e:ul(e);return i.start(B1("",i,t,n)),i.animation}const Bx=["","X","Y","Z"],HT={visibility:"hidden"},Fx=1e3;let WT=0;const Yo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function O_({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:a}){return class{constructor(f={},g=t==null?void 0:t()){this.id=WT++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Yo.totalNodes=Yo.resolvedTargetDeltas=Yo.recalculatedProjection=0,this.nodes.forEach(YT),this.nodes.forEach($T),this.nodes.forEach(JT),this.nodes.forEach(XT),zT(Yo)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=f,this.root=g?g.root||g:this,this.path=g?[...g.path,g]:[],this.parent=g,this.depth=g?g.depth+1:0;for(let v=0;v<this.path.length;v++)this.path[v].shouldResetTransform=!0;this.root===this&&(this.nodes=new BT)}addEventListener(f,g){return this.eventHandlers.has(f)||this.eventHandlers.set(f,new U1),this.eventHandlers.get(f).add(g)}notifyListeners(f,...g){const v=this.eventHandlers.get(f);v&&v.notify(...g)}hasListeners(f){return this.eventHandlers.has(f)}mount(f,g=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=UT(f),this.instance=f;const{layoutId:v,layout:y,visualElement:C}=this.options;if(C&&!C.current&&C.mount(f),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),g&&(y||v)&&(this.isLayoutDirty=!0),e){let b;const T=()=>this.root.updateBlockedByResize=!1;e(f,()=>{this.root.updateBlockedByResize=!0,b&&b(),b=FT(T,250),id.hasAnimatedSinceResize&&(id.hasAnimatedSinceResize=!1,this.nodes.forEach(Ux))})}v&&this.root.registerSharedNode(v,this),this.options.animate!==!1&&C&&(v||y)&&this.addEventListener("didUpdate",({delta:b,hasLayoutChanged:T,hasRelativeTargetChanged:I,layout:F})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||C.getDefaultTransition()||iI,{onLayoutAnimationStart:B,onLayoutAnimationComplete:z}=C.getProps(),O=!this.targetLayout||!R_(this.targetLayout,F)||I,k=!T&&I;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||k||T&&(O||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(b,k);const W={...j1(R,"layout"),onPlay:B,onComplete:z};(C.shouldReduceMotion||this.options.layoutRoot)&&(W.delay=0,W.type=!1),this.startAnimation(W)}else T||Ux(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=F})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const f=this.getStack();f&&f.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Is(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(eI),this.animationId++)}getTransformTemplate(){const{visualElement:f}=this.options;return f&&f.getProps().transformTemplate}willUpdate(f=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let C=0;C<this.path.length;C++){const b=this.path[C];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:g,layout:v}=this.options;if(g===void 0&&!v)return;const y=this.getTransformTemplate();this.prevTransformTemplateValue=y?y(this.latestValues,""):void 0,this.updateSnapshot(),f&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(zx);return}this.isUpdating||this.nodes.forEach(KT),this.isUpdating=!1,this.nodes.forEach(QT),this.nodes.forEach(ZT),this.nodes.forEach(GT),this.clearAllSnapshots();const g=performance.now();dr.delta=_o(0,1e3/60,g-dr.timestamp),dr.timestamp=g,dr.isProcessing=!0,Sf.update.process(dr),Sf.preRender.process(dr),Sf.render.process(dr),dr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(qT),this.sharedNodes.forEach(tI)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ln.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ln.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let v=0;v<this.path.length;v++)this.path[v].updateScroll();const f=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:g}=this.options;g&&g.notify("LayoutMeasure",this.layout.layoutBox,f?f.layoutBox:void 0)}updateScroll(f="measure"){let g=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===f&&(g=!1),g&&(this.scroll={animationId:this.root.animationId,phase:f,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!a)return;const f=this.isLayoutDirty||this.shouldResetTransform,g=this.projectionDelta&&!M_(this.projectionDelta),v=this.getTransformTemplate(),y=v?v(this.latestValues,""):void 0,C=y!==this.prevTransformTemplateValue;f&&(g||Go(this.latestValues)||C)&&(a(this.instance,y),this.shouldResetTransform=!1,this.scheduleRender())}measure(f=!0){const g=this.measurePageBox();let v=this.removeElementScroll(g);return f&&(v=this.removeTransform(v)),sI(v),{animationId:this.root.animationId,measuredBox:g,layoutBox:v,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:f}=this.options;if(!f)return Dn();const g=f.measureViewportBox(),{scroll:v}=this.root;return v&&(Qs(g.x,v.offset.x),Qs(g.y,v.offset.y)),g}removeElementScroll(f){const g=Dn();ui(g,f);for(let v=0;v<this.path.length;v++){const y=this.path[v],{scroll:C,options:b}=y;if(y!==this.root&&C&&b.layoutScroll){if(C.isRoot){ui(g,f);const{scroll:T}=this.root;T&&(Qs(g.x,-T.offset.x),Qs(g.y,-T.offset.y))}Qs(g.x,C.offset.x),Qs(g.y,C.offset.y)}}return g}applyTransform(f,g=!1){const v=Dn();ui(v,f);for(let y=0;y<this.path.length;y++){const C=this.path[y];!g&&C.options.layoutScroll&&C.scroll&&C!==C.root&&Ya(v,{x:-C.scroll.offset.x,y:-C.scroll.offset.y}),Go(C.latestValues)&&Ya(v,C.latestValues)}return Go(this.latestValues)&&Ya(v,this.latestValues),v}removeTransform(f){const g=Dn();ui(g,f);for(let v=0;v<this.path.length;v++){const y=this.path[v];if(!y.instance||!Go(y.latestValues))continue;J0(y.latestValues)&&y.updateSnapshot();const C=Dn(),b=y.measurePageBox();ui(C,b),Lx(g,y.latestValues,y.snapshot?y.snapshot.layoutBox:void 0,C)}return Go(this.latestValues)&&Lx(g,this.latestValues),g}setTargetDelta(f){this.targetDelta=f,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(f){this.options={...this.options,...f,crossfade:f.crossfade!==void 0?f.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==dr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(f=!1){var g;const v=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=v.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=v.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=v.isSharedProjectionDirty);const y=!!this.resumingFrom||this!==v;if(!(f||y&&this.isSharedProjectionDirty||this.isProjectionDirty||!((g=this.parent)===null||g===void 0)&&g.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:b,layoutId:T}=this.options;if(!(!this.layout||!(b||T))){if(this.resolvedRelativeTargetAt=dr.timestamp,!this.targetDelta&&!this.relativeTarget){const I=this.getClosestProjectingParent();I&&I.layout&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dn(),this.relativeTargetOrigin=Dn(),fc(this.relativeTargetOrigin,this.layout.layoutBox,I.layout.layoutBox),ui(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Dn(),this.targetWithTransforms=Dn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),oT(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ui(this.target,this.layout.layoutBox),A_(this.target,this.targetDelta)):ui(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const I=this.getClosestProjectingParent();I&&!!I.resumingFrom==!!this.resumingFrom&&!I.options.layoutScroll&&I.target&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dn(),this.relativeTargetOrigin=Dn(),fc(this.relativeTargetOrigin,this.target,I.target),ui(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Yo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||J0(this.parent.latestValues)||S_(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var f;const g=this.getLead(),v=!!this.resumingFrom||this!==g;let y=!0;if((this.isProjectionDirty||!((f=this.parent)===null||f===void 0)&&f.isProjectionDirty)&&(y=!1),v&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(y=!1),this.resolvedRelativeTargetAt===dr.timestamp&&(y=!1),y)return;const{layout:C,layoutId:b}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(C||b))return;ui(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,I=this.treeScale.y;mT(this.layoutCorrected,this.treeScale,this.path,v),g.layout&&!g.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(g.target=g.layout.layoutBox);const{target:F}=g;if(!F){this.projectionTransform&&(this.projectionDelta=Ga(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ga(),this.projectionDeltaWithTransform=Ga());const R=this.projectionTransform;hc(this.projectionDelta,this.layoutCorrected,F,this.latestValues),this.projectionTransform=jx(this.projectionDelta,this.treeScale),(this.projectionTransform!==R||this.treeScale.x!==T||this.treeScale.y!==I)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",F)),Yo.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(f=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),f){const g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(f,g=!1){const v=this.snapshot,y=v?v.latestValues:{},C={...this.latestValues},b=Ga();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!g;const T=Dn(),I=v?v.source:void 0,F=this.layout?this.layout.source:void 0,R=I!==F,B=this.getStack(),z=!B||B.members.length<=1,O=!!(R&&!z&&this.options.crossfade===!0&&!this.path.some(rI));this.animationProgress=0;let k;this.mixTargetDelta=W=>{const Q=W/1e3;Vx(b.x,f.x,Q),Vx(b.y,f.y,Q),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(fc(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),nI(this.relativeTarget,this.relativeTargetOrigin,T,Q),k&&PT(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=Dn()),ui(k,this.relativeTarget)),R&&(this.animationValues=C,IT(C,y,this.latestValues,Q,O,z)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(f){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Is(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ln.update(()=>{id.hasAnimatedSinceResize=!0,this.currentAnimation=VT(0,Fx,{...f,onUpdate:g=>{this.mixTargetDelta(g),f.onUpdate&&f.onUpdate(g)},onComplete:()=>{f.onComplete&&f.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const f=this.getStack();f&&f.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Fx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const f=this.getLead();let{targetWithTransforms:g,target:v,layout:y,latestValues:C}=f;if(!(!g||!v||!y)){if(this!==f&&this.layout&&y&&L_(this.options.animationType,this.layout.layoutBox,y.layoutBox)){v=this.target||Dn();const b=Jr(this.layout.layoutBox.x);v.x.min=f.target.x.min,v.x.max=v.x.min+b;const T=Jr(this.layout.layoutBox.y);v.y.min=f.target.y.min,v.y.max=v.y.min+T}ui(g,v),Ya(g,C),hc(this.projectionDeltaWithTransform,this.layoutCorrected,g,C)}}registerSharedNode(f,g){this.sharedNodes.has(f)||this.sharedNodes.set(f,new DT),this.sharedNodes.get(f).add(g);const y=g.options.initialPromotionConfig;g.promote({transition:y?y.transition:void 0,preserveFollowOpacity:y&&y.shouldPreserveFollowOpacity?y.shouldPreserveFollowOpacity(g):void 0})}isLead(){const f=this.getStack();return f?f.lead===this:!0}getLead(){var f;const{layoutId:g}=this.options;return g?((f=this.getStack())===null||f===void 0?void 0:f.lead)||this:this}getPrevLead(){var f;const{layoutId:g}=this.options;return g?(f=this.getStack())===null||f===void 0?void 0:f.prevLead:void 0}getStack(){const{layoutId:f}=this.options;if(f)return this.root.sharedNodes.get(f)}promote({needsReset:f,transition:g,preserveFollowOpacity:v}={}){const y=this.getStack();y&&y.promote(this,v),f&&(this.projectionDelta=void 0,this.needsReset=!0),g&&this.setOptions({transition:g})}relegate(){const f=this.getStack();return f?f.relegate(this):!1}resetRotation(){const{visualElement:f}=this.options;if(!f)return;let g=!1;const{latestValues:v}=f;if((v.rotate||v.rotateX||v.rotateY||v.rotateZ)&&(g=!0),!g)return;const y={};for(let C=0;C<Bx.length;C++){const b="rotate"+Bx[C];v[b]&&(y[b]=v[b],f.setStaticValue(b,0))}f.render();for(const C in y)f.setStaticValue(C,y[C]);f.scheduleRender()}getProjectionStyles(f){var g,v;if(!this.instance||this.isSVG)return;if(!this.isVisible)return HT;const y={visibility:""},C=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,y.opacity="",y.pointerEvents=rd(f==null?void 0:f.pointerEvents)||"",y.transform=C?C(this.latestValues,""):"none",y;const b=this.getLead();if(!this.projectionDelta||!this.layout||!b.target){const R={};return this.options.layoutId&&(R.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,R.pointerEvents=rd(f==null?void 0:f.pointerEvents)||""),this.hasProjected&&!Go(this.latestValues)&&(R.transform=C?C({},""):"none",this.hasProjected=!1),R}const T=b.animationValues||b.latestValues;this.applyTransformsToTarget(),y.transform=jx(this.projectionDeltaWithTransform,this.treeScale,T),C&&(y.transform=C(T,y.transform));const{x:I,y:F}=this.projectionDelta;y.transformOrigin=`${I.origin*100}% ${F.origin*100}% 0`,b.animationValues?y.opacity=b===this?(v=(g=T.opacity)!==null&&g!==void 0?g:this.latestValues.opacity)!==null&&v!==void 0?v:1:this.preserveOpacity?this.latestValues.opacity:T.opacityExit:y.opacity=b===this?T.opacity!==void 0?T.opacity:"":T.opacityExit!==void 0?T.opacityExit:0;for(const R in Pd){if(T[R]===void 0)continue;const{correct:B,applyTo:z}=Pd[R],O=y.transform==="none"?T[R]:B(T[R],b);if(z){const k=z.length;for(let W=0;W<k;W++)y[z[W]]=O}else y[R]=O}return this.options.layoutId&&(y.pointerEvents=b===this?rd(f==null?void 0:f.pointerEvents)||"":"none"),y}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(f=>{var g;return(g=f.currentAnimation)===null||g===void 0?void 0:g.stop()}),this.root.nodes.forEach(zx),this.root.sharedNodes.clear()}}}function ZT(e){e.updateLayout()}function GT(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:a}=e.layout,{animationType:c}=e.options,f=n.source!==e.layout.source;c==="size"?fi(b=>{const T=f?n.measuredBox[b]:n.layoutBox[b],I=Jr(T);T.min=i[b].min,T.max=T.min+I}):L_(c,n.layoutBox,i)&&fi(b=>{const T=f?n.measuredBox[b]:n.layoutBox[b],I=Jr(i[b]);T.max=T.min+I,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[b].max=e.relativeTarget[b].min+I)});const g=Ga();hc(g,i,n.layoutBox);const v=Ga();f?hc(v,e.applyTransform(a,!0),n.measuredBox):hc(v,i,n.layoutBox);const y=!M_(g);let C=!1;if(!e.resumeFrom){const b=e.getClosestProjectingParent();if(b&&!b.resumeFrom){const{snapshot:T,layout:I}=b;if(T&&I){const F=Dn();fc(F,n.layoutBox,T.layoutBox);const R=Dn();fc(R,i,I.layoutBox),R_(F,R)||(C=!0),b.options.layoutRoot&&(e.relativeTarget=R,e.relativeTargetOrigin=F,e.relativeParent=b)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:v,layoutDelta:g,hasLayoutChanged:y,hasRelativeTargetChanged:C})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function YT(e){Yo.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function XT(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function qT(e){e.clearSnapshot()}function zx(e){e.clearMeasurements()}function KT(e){e.isLayoutDirty=!1}function QT(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Ux(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function $T(e){e.resolveTargetDelta()}function JT(e){e.calcProjection()}function eI(e){e.resetRotation()}function tI(e){e.removeLeadSnapshot()}function Vx(e,t,n){e.translate=vn(t.translate,0,n),e.scale=vn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Hx(e,t,n,i){e.min=vn(t.min,n.min,i),e.max=vn(t.max,n.max,i)}function nI(e,t,n,i){Hx(e.x,t.x,n.x,i),Hx(e.y,t.y,n.y,i)}function rI(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const iI={duration:.45,ease:[.4,0,.1,1]},Wx=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Zx=Wx("applewebkit/")&&!Wx("chrome/")?Math.round:kn;function Gx(e){e.min=Zx(e.min),e.max=Zx(e.max)}function sI(e){Gx(e.x),Gx(e.y)}function L_(e,t,n){return e==="position"||e==="preserve-aspect"&&!Q0(Dx(t),Dx(n),.2)}const oI=O_({attachResizeListener:(e,t)=>ws(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Pf={current:void 0},P_=O_({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Pf.current){const e=new oI({});e.mount(window),e.setOptions({layoutScroll:!0}),Pf.current=e}return Pf.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),aI={pan:{Feature:CT},drag:{Feature:bT,ProjectionNode:P_,MeasureLayout:T_}},lI=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function cI(e){const t=lI.exec(e);if(!t)return[,];const[,n,i]=t;return[n,i]}function tp(e,t,n=1){const[i,a]=cI(e);if(!i)return;const c=window.getComputedStyle(t).getPropertyValue(i);if(c){const f=c.trim();return x_(f)?parseFloat(f):f}else return W0(a)?tp(a,t,n+1):a}function uI(e,{...t},n){const i=e.current;if(!(i instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(a=>{const c=a.get();if(!W0(c))return;const f=tp(c,i);f&&a.set(f)});for(const a in t){const c=t[a];if(!W0(c))continue;const f=tp(c,i);f&&(t[a]=f,n||(n={}),n[a]===void 0&&(n[a]=c))}return{target:t,transitionEnd:n}}const dI=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),D_=e=>dI.has(e),hI=e=>Object.keys(e).some(D_),Yx=e=>e===ya||e===ft,Xx=(e,t)=>parseFloat(e.split(", ")[t]),qx=(e,t)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const a=i.match(/^matrix3d\((.+)\)$/);if(a)return Xx(a[1],t);{const c=i.match(/^matrix\((.+)\)$/);return c?Xx(c[1],e):0}},fI=new Set(["x","y","z"]),pI=Kc.filter(e=>!fI.has(e));function mI(e){const t=[];return pI.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const dl={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:qx(4,13),y:qx(5,14)};dl.translateX=dl.x;dl.translateY=dl.y;const gI=(e,t,n)=>{const i=t.measureViewportBox(),a=t.current,c=getComputedStyle(a),{display:f}=c,g={};f==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(y=>{g[y]=dl[y](i,c)}),t.render();const v=t.measureViewportBox();return n.forEach(y=>{const C=t.getValue(y);C&&C.jump(g[y]),e[y]=dl[y](v,c)}),e},xI=(e,t,n={},i={})=>{t={...t},i={...i};const a=Object.keys(t).filter(D_);let c=[],f=!1;const g=[];if(a.forEach(v=>{const y=e.getValue(v);if(!e.hasValue(v))return;let C=n[v],b=Wl(C);const T=t[v];let I;if(jd(T)){const F=T.length,R=T[0]===null?1:0;C=T[R],b=Wl(C);for(let B=R;B<F&&T[B]!==null;B++)I?R1(Wl(T[B])===I):I=Wl(T[B])}else I=Wl(T);if(b!==I)if(Yx(b)&&Yx(I)){const F=y.get();typeof F=="string"&&y.set(parseFloat(F)),typeof T=="string"?t[v]=parseFloat(T):Array.isArray(T)&&I===ft&&(t[v]=T.map(parseFloat))}else b!=null&&b.transform&&(I!=null&&I.transform)&&(C===0||T===0)?C===0?y.set(I.transform(C)):t[v]=b.transform(T):(f||(c=mI(e),f=!0),g.push(v),i[v]=i[v]!==void 0?i[v]:t[v],y.jump(T))}),g.length){const v=g.indexOf("height")>=0?window.pageYOffset:null,y=gI(t,e,g);return c.length&&c.forEach(([C,b])=>{e.getValue(C).set(b)}),e.render(),vh&&v!==null&&window.scrollTo({top:v}),{target:y,transitionEnd:i}}else return{target:t,transitionEnd:i}};function yI(e,t,n,i){return hI(t)?xI(e,t,n,i):{target:t,transitionEnd:i}}const wI=(e,t,n,i)=>{const a=uI(e,t,i);return t=a.target,i=a.transitionEnd,yI(e,t,n,i)},np={current:null},j_={current:!1};function vI(){if(j_.current=!0,!!vh)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>np.current=e.matches;e.addListener(t),t()}else np.current=!1}function _I(e,t,n){const{willChange:i}=t;for(const a in t){const c=t[a],f=n[a];if(zr(c))e.addValue(a,c),Ud(i)&&i.add(a);else if(zr(f))e.addValue(a,ul(c,{owner:e})),Ud(i)&&i.remove(a);else if(f!==c)if(e.hasValue(a)){const g=e.getValue(a);!g.hasAnimated&&g.set(c)}else{const g=e.getStaticValue(a);e.addValue(a,ul(g!==void 0?g:c,{owner:e}))}}for(const a in n)t[a]===void 0&&e.removeValue(a);return t}const Kx=new WeakMap,B_=Object.keys(jc),bI=B_.length,Qx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],CI=C1.length;class SI{constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:a,visualState:c},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ln.render(this.render,!1,!0);const{latestValues:g,renderState:v}=c;this.latestValues=g,this.baseTarget={...g},this.initialValues=n.initial?{...g}:{},this.renderState=v,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=f,this.isControllingVariants=bh(n),this.isVariantNode=bv(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:y,...C}=this.scrapeMotionValuesFromProps(n,{});for(const b in C){const T=C[b];g[b]!==void 0&&zr(T)&&(T.set(g[b],!1),Ud(y)&&y.add(b))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,Kx.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),j_.current||vI(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:np.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Kx.delete(this.current),this.projection&&this.projection.unmount(),Is(this.notifyUpdate),Is(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const i=xa.has(t),a=n.on("change",f=>{this.latestValues[t]=f,this.props.onUpdate&&ln.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),c=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{a(),c()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},i,a,c){let f,g;for(let v=0;v<bI;v++){const y=B_[v],{isEnabled:C,Feature:b,ProjectionNode:T,MeasureLayout:I}=jc[y];T&&(f=T),C(n)&&(!this.features[y]&&b&&(this.features[y]=new b(this)),I&&(g=I))}if((this.type==="html"||this.type==="svg")&&!this.projection&&f){this.projection=new f(this.latestValues,this.parent&&this.parent.projection);const{layoutId:v,layout:y,drag:C,dragConstraints:b,layoutScroll:T,layoutRoot:I}=n;this.projection.setOptions({layoutId:v,layout:y,alwaysMeasureLayout:!!C||b&&Wa(b),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof y=="string"?y:"both",initialPromotionConfig:c,layoutScroll:T,layoutRoot:I})}return g}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<Qx.length;i++){const a=Qx[i];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const c=t["on"+a];c&&(this.propEventSubscriptions[a]=this.on(a,c))}this.prevMotionValues=_I(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<CI;i++){const a=C1[i],c=this.props[a];(Dc(c)||c===!1)&&(n[a]=c)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=ul(n,{owner:this}),this.addValue(t,i)),i}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:i}=this.props,a=typeof i=="string"||typeof i=="object"?(n=M1(this.props,i))===null||n===void 0?void 0:n[t]:void 0;if(i&&a!==void 0)return a;const c=this.getBaseTargetFromProps(this.props,t);return c!==void 0&&!zr(c)?c:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new U1),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class F_ extends SI{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...i},{transformValues:a},c){let f=U4(i,t||{},this);if(a&&(n&&(n=a(n)),i&&(i=a(i)),f&&(f=a(f))),c){F4(this,i,f);const g=wI(this,i,f,n);n=g.transitionEnd,i=g.target}return{transition:t,transitionEnd:n,...i}}}function AI(e){return window.getComputedStyle(e)}class EI extends F_{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(xa.has(n)){const i=D1(n);return i&&i.default||0}else{const i=AI(t),a=(Ev(n)?i.getPropertyValue(n):i[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:n}){return E_(t,n)}build(t,n,i,a){E1(t,n,i,a.transformTemplate)}scrapeMotionValuesFromProps(t,n){return k1(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;zr(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,i,a){Rv(t,n,i,a)}}class NI extends F_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(xa.has(n)){const i=D1(n);return i&&i.default||0}return n=Ov.has(n)?n:_1(n),t.getAttribute(n)}measureInstanceViewportBox(){return Dn()}scrapeMotionValuesFromProps(t,n){return Pv(t,n)}build(t,n,i,a){T1(t,n,i,this.isSVGTag,a.transformTemplate)}renderInstance(t,n,i,a){Lv(t,n,i,a)}mount(t){this.isSVGTag=I1(t.tagName),super.mount(t)}}const TI=(e,t)=>A1(e)?new NI(t,{enableHardwareAcceleration:!1}):new EI(t,{enableHardwareAcceleration:!0}),II={layout:{ProjectionNode:P_,MeasureLayout:T_}},kI={...nT,...bN,...aI,...II},rt=ME((e,t)=>cN(e,t,kI,TI));function z_(){const e=j.useRef(!1);return v1(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function MI(){const e=z_(),[t,n]=j.useState(0),i=j.useCallback(()=>{e.current&&n(t+1)},[t]);return[j.useCallback(()=>ln.postRender(i),[i]),t]}class RI extends j.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function OI({children:e,isPresent:t}){const n=j.useId(),i=j.useRef(null),a=j.useRef({width:0,height:0,top:0,left:0});return j.useInsertionEffect(()=>{const{width:c,height:f,top:g,left:v}=a.current;if(t||!i.current||!c||!f)return;i.current.dataset.motionPopId=n;const y=document.createElement("style");return document.head.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${f}px !important;
            top: ${g}px !important;
            left: ${v}px !important;
          }
        `),()=>{document.head.removeChild(y)}},[t]),j.createElement(RI,{isPresent:t,childRef:i,sizeRef:a},j.cloneElement(e,{ref:i}))}const Df=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:a,presenceAffectsLayout:c,mode:f})=>{const g=Dv(LI),v=j.useId(),y=j.useMemo(()=>({id:v,initial:t,isPresent:n,custom:a,onExitComplete:C=>{g.set(C,!0);for(const b of g.values())if(!b)return;i&&i()},register:C=>(g.set(C,!1),()=>g.delete(C))}),c?void 0:[n]);return j.useMemo(()=>{g.forEach((C,b)=>g.set(b,!1))},[n]),j.useEffect(()=>{!n&&!g.size&&i&&i()},[n]),f==="popLayout"&&(e=j.createElement(OI,{isPresent:n},e)),j.createElement(wh.Provider,{value:y},e)};function LI(){return new Map}function PI(e){return j.useEffect(()=>()=>e(),[])}const Xo=e=>e.key||"";function DI(e,t){e.forEach(n=>{const i=Xo(n);t.set(i,n)})}function jI(e){const t=[];return j.Children.forEach(e,n=>{j.isValidElement(n)&&t.push(n)}),t}const ts=({children:e,custom:t,initial:n=!0,onExitComplete:i,exitBeforeEnter:a,presenceAffectsLayout:c=!0,mode:f="sync"})=>{const g=j.useContext(S1).forceRender||MI()[0],v=z_(),y=jI(e);let C=y;const b=j.useRef(new Map).current,T=j.useRef(C),I=j.useRef(new Map).current,F=j.useRef(!0);if(v1(()=>{F.current=!1,DI(y,I),T.current=C}),PI(()=>{F.current=!0,I.clear(),b.clear()}),F.current)return j.createElement(j.Fragment,null,C.map(O=>j.createElement(Df,{key:Xo(O),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:c,mode:f},O)));C=[...C];const R=T.current.map(Xo),B=y.map(Xo),z=R.length;for(let O=0;O<z;O++){const k=R[O];B.indexOf(k)===-1&&!b.has(k)&&b.set(k,void 0)}return f==="wait"&&b.size&&(C=[]),b.forEach((O,k)=>{if(B.indexOf(k)!==-1)return;const W=I.get(k);if(!W)return;const Q=R.indexOf(k);let G=O;if(!G){const H=()=>{b.delete(k);const q=Array.from(I.keys()).filter(M=>!B.includes(M));if(q.forEach(M=>I.delete(M)),T.current=y.filter(M=>{const X=Xo(M);return X===k||q.includes(X)}),!b.size){if(v.current===!1)return;g(),i&&i()}};G=j.createElement(Df,{key:Xo(W),isPresent:!1,onExitComplete:H,custom:t,presenceAffectsLayout:c,mode:f},W),b.set(k,G)}C.splice(Q,0,G)}),C=C.map(O=>{const k=O.key;return b.has(k)?O:j.createElement(Df,{key:Xo(O),isPresent:!0,presenceAffectsLayout:c,mode:f},O)}),j.createElement(j.Fragment,null,b.size?C:C.map(O=>j.cloneElement(O)))};var BI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const FI=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),et=(e,t)=>{const n=j.forwardRef(({color:i="currentColor",size:a=24,strokeWidth:c=2,absoluteStrokeWidth:f,children:g,...v},y)=>j.createElement("svg",{ref:y,...BI,width:a,height:a,stroke:i,strokeWidth:f?Number(c)*24/Number(a):c,className:`lucide lucide-${FI(e)}`,...v},[...t.map(([C,b])=>j.createElement(C,b)),...(Array.isArray(g)?g:[g])||[]]));return n.displayName=`${e}`,n},U_=et("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),V_=et("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),ks=et("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Hd=et("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),H_=et("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Fc=et("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),W_=et("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),zI=et("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Eh=et("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),sd=et("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Z_=et("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),UI=et("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),go=et("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Bu=et("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),VI=et("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]),HI=et("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),WI=et("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),ZI=et("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),GI=et("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),YI=et("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),G_=et("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),XI=et("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),qI=et("Keyboard",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2",key:"15u882"}],["path",{d:"M6 8h.001",key:"1ej0i3"}],["path",{d:"M10 8h.001",key:"1x2st2"}],["path",{d:"M14 8h.001",key:"1vkmyp"}],["path",{d:"M18 8h.001",key:"kfsenl"}],["path",{d:"M8 12h.001",key:"1sjpby"}],["path",{d:"M12 12h.001",key:"al75ts"}],["path",{d:"M16 12h.001",key:"931bgk"}],["path",{d:"M7 16h10",key:"wp8him"}]]),Y_=et("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),fn=et("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),X_=et("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),KI=et("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),q_=et("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ms=et("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),xo=et("MapPinned",[["path",{d:"M18 8c0 4.5-6 9-6 9s-6-4.5-6-9a6 6 0 0 1 12 0",key:"yrbn30"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.835 14H5a1 1 0 0 0-.9.7l-2 6c-.1.1-.1.2-.1.3 0 .6.4 1 1 1h18c.6 0 1-.4 1-1 0-.1 0-.2-.1-.3l-2-6a1 1 0 0 0-.9-.7h-3.835",key:"112zkj"}]]),K_=et("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]),QI=et("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),zc=et("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),$I=et("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Q_=et("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),$x=et("PackageSearch",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]),Rs=et("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Wd=et("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),JI=et("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),pc=et("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Bi=et("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Jx=et("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),e8=et("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]),Os=et("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),t8=et("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),n8=et("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),r8=et("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),i8=et("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),$_=et("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),J_=et("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Zd=et("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Gd=et("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),V1=et("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]),rp=et("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),wa=et("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),eb=et("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),s8=et("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),va=et("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),tb=et("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),nb="Admin",rb="Manager",ib="Dispatcher",sb="Warehouse",ob="Driver",ab="Support",lb="Finance",cb="Viewer",ub="Recipient",o8=[nb,rb,ib,sb,ob,ab,lb,cb,ub],Zs="status-options:read",ki="stats:read",Rr="shipments:read",fs="shipment:read",Xa="shipments:assign",Ho="label:read",qo="awb:update",mi="logs:read:self",to="logs:read:all",pi="notifications:read",Gr="chat:read",ps="chat:write",a8="drivers:sync",yo="users:read",H1="users:write",l8={[nb]:new Set([Zs,ki,Rr,fs,Xa,Ho,qo,to,mi,pi,Gr,ps,a8,yo,H1]),[rb]:new Set([Zs,ki,Rr,fs,Xa,Ho,qo,to,mi,pi,Gr,ps,yo]),[ib]:new Set([Zs,ki,Rr,fs,Xa,Ho,qo,to,mi,pi,Gr,ps,yo]),[sb]:new Set([Zs,ki,Rr,fs,Xa,Ho,qo,mi,pi,Gr,ps]),[ob]:new Set([Zs,ki,Rr,fs,Ho,qo,mi,pi,Gr,ps]),[ab]:new Set([Zs,ki,Rr,fs,Ho,to,mi,pi,Gr,ps]),[lb]:new Set([Zs,ki,Rr,fs,to,mi,pi,Gr,ps]),[cb]:new Set([Zs,ki,Rr,fs,Ho,mi,pi,Gr,ps]),[ub]:new Set([Rr,fs,pi,Gr,ps])},c8=e=>{const t=String(e||"").trim();if(!t)return t;const n=t.toUpperCase();for(const i of o8)if(i.toUpperCase()===n)return i;return t},ip=e=>{const t=c8(e),n=l8[t];return n?Array.from(n).sort():[]},ey=e=>e?e instanceof Set?e:Array.isArray(e)?new Set(e.filter(Boolean)):new Set:new Set,db=e=>{const t=ey(e==null?void 0:e.permissions);if(t.size>0)return t.has(to)&&t.add(mi),t;const n=ey(ip(e==null?void 0:e.role));return n.has(to)&&n.add(mi),n},Tn=(e,t)=>t?db(e).has(t):!0,u8=(e,t=[])=>{const n=Array.isArray(t)?t.filter(Boolean):[];if(n.length===0)return!0;const i=db(e);return n.every(a=>i.has(a))};function hb(e,t){return function(){return e.apply(t,arguments)}}const{toString:d8}=Object.prototype,{getPrototypeOf:W1}=Object,{iterator:Nh,toStringTag:fb}=Symbol,Th=(e=>t=>{const n=d8.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Fi=e=>(e=e.toLowerCase(),t=>Th(t)===e),Ih=e=>t=>typeof t===e,{isArray:yl}=Array,hl=Ih("undefined");function eu(e){return e!==null&&!hl(e)&&e.constructor!==null&&!hl(e.constructor)&&Br(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const pb=Fi("ArrayBuffer");function h8(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&pb(e.buffer),t}const f8=Ih("string"),Br=Ih("function"),mb=Ih("number"),tu=e=>e!==null&&typeof e=="object",p8=e=>e===!0||e===!1,od=e=>{if(Th(e)!=="object")return!1;const t=W1(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(fb in e)&&!(Nh in e)},m8=e=>{if(!tu(e)||eu(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},g8=Fi("Date"),x8=Fi("File"),y8=Fi("Blob"),w8=Fi("FileList"),v8=e=>tu(e)&&Br(e.pipe),_8=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Br(e.append)&&((t=Th(e))==="formdata"||t==="object"&&Br(e.toString)&&e.toString()==="[object FormData]"))},b8=Fi("URLSearchParams"),[C8,S8,A8,E8]=["ReadableStream","Request","Response","Headers"].map(Fi),N8=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function nu(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,a;if(typeof e!="object"&&(e=[e]),yl(e))for(i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else{if(eu(e))return;const c=n?Object.getOwnPropertyNames(e):Object.keys(e),f=c.length;let g;for(i=0;i<f;i++)g=c[i],t.call(null,e[g],g,e)}}function gb(e,t){if(eu(e))return null;t=t.toLowerCase();const n=Object.keys(e);let i=n.length,a;for(;i-- >0;)if(a=n[i],t===a.toLowerCase())return a;return null}const ea=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,xb=e=>!hl(e)&&e!==ea;function sp(){const{caseless:e,skipUndefined:t}=xb(this)&&this||{},n={},i=(a,c)=>{if(c==="__proto__"||c==="constructor"||c==="prototype")return;const f=e&&gb(n,c)||c;od(n[f])&&od(a)?n[f]=sp(n[f],a):od(a)?n[f]=sp({},a):yl(a)?n[f]=a.slice():(!t||!hl(a))&&(n[f]=a)};for(let a=0,c=arguments.length;a<c;a++)arguments[a]&&nu(arguments[a],i);return n}const T8=(e,t,n,{allOwnKeys:i}={})=>(nu(t,(a,c)=>{n&&Br(a)?Object.defineProperty(e,c,{value:hb(a,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,c,{value:a,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:i}),e),I8=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),k8=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},M8=(e,t,n,i)=>{let a,c,f;const g={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),c=a.length;c-- >0;)f=a[c],(!i||i(f,e,t))&&!g[f]&&(t[f]=e[f],g[f]=!0);e=n!==!1&&W1(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},R8=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},O8=e=>{if(!e)return null;if(yl(e))return e;let t=e.length;if(!mb(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},L8=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&W1(Uint8Array)),P8=(e,t)=>{const i=(e&&e[Nh]).call(e);let a;for(;(a=i.next())&&!a.done;){const c=a.value;t.call(e,c[0],c[1])}},D8=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},j8=Fi("HTMLFormElement"),B8=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,a){return i.toUpperCase()+a}),ty=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),F8=Fi("RegExp"),yb=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};nu(n,(a,c)=>{let f;(f=t(a,c,e))!==!1&&(i[c]=f||a)}),Object.defineProperties(e,i)},z8=e=>{yb(e,(t,n)=>{if(Br(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(Br(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},U8=(e,t)=>{const n={},i=a=>{a.forEach(c=>{n[c]=!0})};return yl(e)?i(e):i(String(e).split(t)),n},V8=()=>{},H8=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function W8(e){return!!(e&&Br(e.append)&&e[fb]==="FormData"&&e[Nh])}const Z8=e=>{const t=new Array(10),n=(i,a)=>{if(tu(i)){if(t.indexOf(i)>=0)return;if(eu(i))return i;if(!("toJSON"in i)){t[a]=i;const c=yl(i)?[]:{};return nu(i,(f,g)=>{const v=n(f,a+1);!hl(v)&&(c[g]=v)}),t[a]=void 0,c}}return i};return n(e,0)},G8=Fi("AsyncFunction"),Y8=e=>e&&(tu(e)||Br(e))&&Br(e.then)&&Br(e.catch),wb=((e,t)=>e?setImmediate:t?((n,i)=>(ea.addEventListener("message",({source:a,data:c})=>{a===ea&&c===n&&i.length&&i.shift()()},!1),a=>{i.push(a),ea.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Br(ea.postMessage)),X8=typeof queueMicrotask<"u"?queueMicrotask.bind(ea):typeof process<"u"&&process.nextTick||wb,q8=e=>e!=null&&Br(e[Nh]),me={isArray:yl,isArrayBuffer:pb,isBuffer:eu,isFormData:_8,isArrayBufferView:h8,isString:f8,isNumber:mb,isBoolean:p8,isObject:tu,isPlainObject:od,isEmptyObject:m8,isReadableStream:C8,isRequest:S8,isResponse:A8,isHeaders:E8,isUndefined:hl,isDate:g8,isFile:x8,isBlob:y8,isRegExp:F8,isFunction:Br,isStream:v8,isURLSearchParams:b8,isTypedArray:L8,isFileList:w8,forEach:nu,merge:sp,extend:T8,trim:N8,stripBOM:I8,inherits:k8,toFlatObject:M8,kindOf:Th,kindOfTest:Fi,endsWith:R8,toArray:O8,forEachEntry:P8,matchAll:D8,isHTMLForm:j8,hasOwnProperty:ty,hasOwnProp:ty,reduceDescriptors:yb,freezeMethods:z8,toObjectSet:U8,toCamelCase:B8,noop:V8,toFiniteNumber:H8,findKey:gb,global:ea,isContextDefined:xb,isSpecCompliantForm:W8,toJSONObject:Z8,isAsyncFn:G8,isThenable:Y8,setImmediate:wb,asap:X8,isIterable:q8};let mt=class vb extends Error{static from(t,n,i,a,c,f){const g=new vb(t.message,n||t.code,i,a,c);return g.cause=t,g.name=t.name,f&&Object.assign(g,f),g}constructor(t,n,i,a,c){super(t),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),i&&(this.config=i),a&&(this.request=a),c&&(this.response=c,this.status=c.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:me.toJSONObject(this.config),code:this.code,status:this.status}}};mt.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";mt.ERR_BAD_OPTION="ERR_BAD_OPTION";mt.ECONNABORTED="ECONNABORTED";mt.ETIMEDOUT="ETIMEDOUT";mt.ERR_NETWORK="ERR_NETWORK";mt.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";mt.ERR_DEPRECATED="ERR_DEPRECATED";mt.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";mt.ERR_BAD_REQUEST="ERR_BAD_REQUEST";mt.ERR_CANCELED="ERR_CANCELED";mt.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";mt.ERR_INVALID_URL="ERR_INVALID_URL";const K8=null;function op(e){return me.isPlainObject(e)||me.isArray(e)}function _b(e){return me.endsWith(e,"[]")?e.slice(0,-2):e}function ny(e,t,n){return e?e.concat(t).map(function(a,c){return a=_b(a),!n&&c?"["+a+"]":a}).join(n?".":""):t}function Q8(e){return me.isArray(e)&&!e.some(op)}const $8=me.toFlatObject(me,{},null,function(t){return/^is[A-Z]/.test(t)});function kh(e,t,n){if(!me.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=me.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,B){return!me.isUndefined(B[R])});const i=n.metaTokens,a=n.visitor||C,c=n.dots,f=n.indexes,v=(n.Blob||typeof Blob<"u"&&Blob)&&me.isSpecCompliantForm(t);if(!me.isFunction(a))throw new TypeError("visitor must be a function");function y(F){if(F===null)return"";if(me.isDate(F))return F.toISOString();if(me.isBoolean(F))return F.toString();if(!v&&me.isBlob(F))throw new mt("Blob is not supported. Use a Buffer instead.");return me.isArrayBuffer(F)||me.isTypedArray(F)?v&&typeof Blob=="function"?new Blob([F]):Buffer.from(F):F}function C(F,R,B){let z=F;if(F&&!B&&typeof F=="object"){if(me.endsWith(R,"{}"))R=i?R:R.slice(0,-2),F=JSON.stringify(F);else if(me.isArray(F)&&Q8(F)||(me.isFileList(F)||me.endsWith(R,"[]"))&&(z=me.toArray(F)))return R=_b(R),z.forEach(function(k,W){!(me.isUndefined(k)||k===null)&&t.append(f===!0?ny([R],W,c):f===null?R:R+"[]",y(k))}),!1}return op(F)?!0:(t.append(ny(B,R,c),y(F)),!1)}const b=[],T=Object.assign($8,{defaultVisitor:C,convertValue:y,isVisitable:op});function I(F,R){if(!me.isUndefined(F)){if(b.indexOf(F)!==-1)throw Error("Circular reference detected in "+R.join("."));b.push(F),me.forEach(F,function(z,O){(!(me.isUndefined(z)||z===null)&&a.call(t,z,me.isString(O)?O.trim():O,R,T))===!0&&I(z,R?R.concat(O):[O])}),b.pop()}}if(!me.isObject(e))throw new TypeError("data must be an object");return I(e),t}function ry(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function Z1(e,t){this._pairs=[],e&&kh(e,this,t)}const bb=Z1.prototype;bb.append=function(t,n){this._pairs.push([t,n])};bb.toString=function(t){const n=t?function(i){return t.call(this,i,ry)}:ry;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function J8(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Cb(e,t,n){if(!t)return e;const i=n&&n.encode||J8,a=me.isFunction(n)?{serialize:n}:n,c=a&&a.serialize;let f;if(c?f=c(t,a):f=me.isURLSearchParams(t)?t.toString():new Z1(t,a).toString(i),f){const g=e.indexOf("#");g!==-1&&(e=e.slice(0,g)),e+=(e.indexOf("?")===-1?"?":"&")+f}return e}class iy{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){me.forEach(this.handlers,function(i){i!==null&&t(i)})}}const G1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},e5=typeof URLSearchParams<"u"?URLSearchParams:Z1,t5=typeof FormData<"u"?FormData:null,n5=typeof Blob<"u"?Blob:null,r5={isBrowser:!0,classes:{URLSearchParams:e5,FormData:t5,Blob:n5},protocols:["http","https","file","blob","url","data"]},Y1=typeof window<"u"&&typeof document<"u",ap=typeof navigator=="object"&&navigator||void 0,i5=Y1&&(!ap||["ReactNative","NativeScript","NS"].indexOf(ap.product)<0),s5=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",o5=Y1&&window.location.href||"http://localhost",a5=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Y1,hasStandardBrowserEnv:i5,hasStandardBrowserWebWorkerEnv:s5,navigator:ap,origin:o5},Symbol.toStringTag,{value:"Module"})),fr={...a5,...r5};function l5(e,t){return kh(e,new fr.classes.URLSearchParams,{visitor:function(n,i,a,c){return fr.isNode&&me.isBuffer(n)?(this.append(i,n.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)},...t})}function c5(e){return me.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function u5(e){const t={},n=Object.keys(e);let i;const a=n.length;let c;for(i=0;i<a;i++)c=n[i],t[c]=e[c];return t}function Sb(e){function t(n,i,a,c){let f=n[c++];if(f==="__proto__")return!0;const g=Number.isFinite(+f),v=c>=n.length;return f=!f&&me.isArray(a)?a.length:f,v?(me.hasOwnProp(a,f)?a[f]=[a[f],i]:a[f]=i,!g):((!a[f]||!me.isObject(a[f]))&&(a[f]=[]),t(n,i,a[f],c)&&me.isArray(a[f])&&(a[f]=u5(a[f])),!g)}if(me.isFormData(e)&&me.isFunction(e.entries)){const n={};return me.forEachEntry(e,(i,a)=>{t(c5(i),a,n,0)}),n}return null}function d5(e,t,n){if(me.isString(e))try{return(t||JSON.parse)(e),me.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const ru={transitional:G1,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const i=n.getContentType()||"",a=i.indexOf("application/json")>-1,c=me.isObject(t);if(c&&me.isHTMLForm(t)&&(t=new FormData(t)),me.isFormData(t))return a?JSON.stringify(Sb(t)):t;if(me.isArrayBuffer(t)||me.isBuffer(t)||me.isStream(t)||me.isFile(t)||me.isBlob(t)||me.isReadableStream(t))return t;if(me.isArrayBufferView(t))return t.buffer;if(me.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let g;if(c){if(i.indexOf("application/x-www-form-urlencoded")>-1)return l5(t,this.formSerializer).toString();if((g=me.isFileList(t))||i.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return kh(g?{"files[]":t}:t,v&&new v,this.formSerializer)}}return c||a?(n.setContentType("application/json",!1),d5(t)):t}],transformResponse:[function(t){const n=this.transitional||ru.transitional,i=n&&n.forcedJSONParsing,a=this.responseType==="json";if(me.isResponse(t)||me.isReadableStream(t))return t;if(t&&me.isString(t)&&(i&&!this.responseType||a)){const f=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(g){if(f)throw g.name==="SyntaxError"?mt.from(g,mt.ERR_BAD_RESPONSE,this,null,this.response):g}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fr.classes.FormData,Blob:fr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};me.forEach(["delete","get","head","post","put","patch"],e=>{ru.headers[e]={}});const h5=me.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),f5=e=>{const t={};let n,i,a;return e&&e.split(`
`).forEach(function(f){a=f.indexOf(":"),n=f.substring(0,a).trim().toLowerCase(),i=f.substring(a+1).trim(),!(!n||t[n]&&h5[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},sy=Symbol("internals");function Gl(e){return e&&String(e).trim().toLowerCase()}function ad(e){return e===!1||e==null?e:me.isArray(e)?e.map(ad):String(e)}function p5(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const m5=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function jf(e,t,n,i,a){if(me.isFunction(i))return i.call(this,t,n);if(a&&(t=n),!!me.isString(t)){if(me.isString(i))return t.indexOf(i)!==-1;if(me.isRegExp(i))return i.test(t)}}function g5(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function x5(e,t){const n=me.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(a,c,f){return this[i].call(this,t,a,c,f)},configurable:!0})})}let Fr=class{constructor(t){t&&this.set(t)}set(t,n,i){const a=this;function c(g,v,y){const C=Gl(v);if(!C)throw new Error("header name must be a non-empty string");const b=me.findKey(a,C);(!b||a[b]===void 0||y===!0||y===void 0&&a[b]!==!1)&&(a[b||v]=ad(g))}const f=(g,v)=>me.forEach(g,(y,C)=>c(y,C,v));if(me.isPlainObject(t)||t instanceof this.constructor)f(t,n);else if(me.isString(t)&&(t=t.trim())&&!m5(t))f(f5(t),n);else if(me.isObject(t)&&me.isIterable(t)){let g={},v,y;for(const C of t){if(!me.isArray(C))throw TypeError("Object iterator must return a key-value pair");g[y=C[0]]=(v=g[y])?me.isArray(v)?[...v,C[1]]:[v,C[1]]:C[1]}f(g,n)}else t!=null&&c(n,t,i);return this}get(t,n){if(t=Gl(t),t){const i=me.findKey(this,t);if(i){const a=this[i];if(!n)return a;if(n===!0)return p5(a);if(me.isFunction(n))return n.call(this,a,i);if(me.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Gl(t),t){const i=me.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||jf(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let a=!1;function c(f){if(f=Gl(f),f){const g=me.findKey(i,f);g&&(!n||jf(i,i[g],g,n))&&(delete i[g],a=!0)}}return me.isArray(t)?t.forEach(c):c(t),a}clear(t){const n=Object.keys(this);let i=n.length,a=!1;for(;i--;){const c=n[i];(!t||jf(this,this[c],c,t,!0))&&(delete this[c],a=!0)}return a}normalize(t){const n=this,i={};return me.forEach(this,(a,c)=>{const f=me.findKey(i,c);if(f){n[f]=ad(a),delete n[c];return}const g=t?g5(c):String(c).trim();g!==c&&delete n[c],n[g]=ad(a),i[g]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return me.forEach(this,(i,a)=>{i!=null&&i!==!1&&(n[a]=t&&me.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(a=>i.set(a)),i}static accessor(t){const i=(this[sy]=this[sy]={accessors:{}}).accessors,a=this.prototype;function c(f){const g=Gl(f);i[g]||(x5(a,f),i[g]=!0)}return me.isArray(t)?t.forEach(c):c(t),this}};Fr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);me.reduceDescriptors(Fr.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});me.freezeMethods(Fr);function Bf(e,t){const n=this||ru,i=t||n,a=Fr.from(i.headers);let c=i.data;return me.forEach(e,function(g){c=g.call(n,c,a.normalize(),t?t.status:void 0)}),a.normalize(),c}function Ab(e){return!!(e&&e.__CANCEL__)}let iu=class extends mt{constructor(t,n,i){super(t??"canceled",mt.ERR_CANCELED,n,i),this.name="CanceledError",this.__CANCEL__=!0}};function Eb(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new mt("Request failed with status code "+n.status,[mt.ERR_BAD_REQUEST,mt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function y5(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function w5(e,t){e=e||10;const n=new Array(e),i=new Array(e);let a=0,c=0,f;return t=t!==void 0?t:1e3,function(v){const y=Date.now(),C=i[c];f||(f=y),n[a]=v,i[a]=y;let b=c,T=0;for(;b!==a;)T+=n[b++],b=b%e;if(a=(a+1)%e,a===c&&(c=(c+1)%e),y-f<t)return;const I=C&&y-C;return I?Math.round(T*1e3/I):void 0}}function v5(e,t){let n=0,i=1e3/t,a,c;const f=(y,C=Date.now())=>{n=C,a=null,c&&(clearTimeout(c),c=null),e(...y)};return[(...y)=>{const C=Date.now(),b=C-n;b>=i?f(y,C):(a=y,c||(c=setTimeout(()=>{c=null,f(a)},i-b)))},()=>a&&f(a)]}const Yd=(e,t,n=3)=>{let i=0;const a=w5(50,250);return v5(c=>{const f=c.loaded,g=c.lengthComputable?c.total:void 0,v=f-i,y=a(v),C=f<=g;i=f;const b={loaded:f,total:g,progress:g?f/g:void 0,bytes:v,rate:y||void 0,estimated:y&&g&&C?(g-f)/y:void 0,event:c,lengthComputable:g!=null,[t?"download":"upload"]:!0};e(b)},n)},oy=(e,t)=>{const n=e!=null;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},ay=e=>(...t)=>me.asap(()=>e(...t)),_5=fr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,fr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(fr.origin),fr.navigator&&/(msie|trident)/i.test(fr.navigator.userAgent)):()=>!0,b5=fr.hasStandardBrowserEnv?{write(e,t,n,i,a,c,f){if(typeof document>"u")return;const g=[`${e}=${encodeURIComponent(t)}`];me.isNumber(n)&&g.push(`expires=${new Date(n).toUTCString()}`),me.isString(i)&&g.push(`path=${i}`),me.isString(a)&&g.push(`domain=${a}`),c===!0&&g.push("secure"),me.isString(f)&&g.push(`SameSite=${f}`),document.cookie=g.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function C5(e){return typeof e!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function S5(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Nb(e,t,n){let i=!C5(t);return e&&(i||n==!1)?S5(e,t):t}const ly=e=>e instanceof Fr?{...e}:e;function fa(e,t){t=t||{};const n={};function i(y,C,b,T){return me.isPlainObject(y)&&me.isPlainObject(C)?me.merge.call({caseless:T},y,C):me.isPlainObject(C)?me.merge({},C):me.isArray(C)?C.slice():C}function a(y,C,b,T){if(me.isUndefined(C)){if(!me.isUndefined(y))return i(void 0,y,b,T)}else return i(y,C,b,T)}function c(y,C){if(!me.isUndefined(C))return i(void 0,C)}function f(y,C){if(me.isUndefined(C)){if(!me.isUndefined(y))return i(void 0,y)}else return i(void 0,C)}function g(y,C,b){if(b in t)return i(y,C);if(b in e)return i(void 0,y)}const v={url:c,method:c,data:c,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:g,headers:(y,C,b)=>a(ly(y),ly(C),b,!0)};return me.forEach(Object.keys({...e,...t}),function(C){if(C==="__proto__"||C==="constructor"||C==="prototype")return;const b=me.hasOwnProp(v,C)?v[C]:a,T=b(e[C],t[C],C);me.isUndefined(T)&&b!==g||(n[C]=T)}),n}const Tb=e=>{const t=fa({},e);let{data:n,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:c,headers:f,auth:g}=t;if(t.headers=f=Fr.from(f),t.url=Cb(Nb(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),g&&f.set("Authorization","Basic "+btoa((g.username||"")+":"+(g.password?unescape(encodeURIComponent(g.password)):""))),me.isFormData(n)){if(fr.hasStandardBrowserEnv||fr.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(me.isFunction(n.getHeaders)){const v=n.getHeaders(),y=["content-type","content-length"];Object.entries(v).forEach(([C,b])=>{y.includes(C.toLowerCase())&&f.set(C,b)})}}if(fr.hasStandardBrowserEnv&&(i&&me.isFunction(i)&&(i=i(t)),i||i!==!1&&_5(t.url))){const v=a&&c&&b5.read(c);v&&f.set(a,v)}return t},A5=typeof XMLHttpRequest<"u",E5=A5&&function(e){return new Promise(function(n,i){const a=Tb(e);let c=a.data;const f=Fr.from(a.headers).normalize();let{responseType:g,onUploadProgress:v,onDownloadProgress:y}=a,C,b,T,I,F;function R(){I&&I(),F&&F(),a.cancelToken&&a.cancelToken.unsubscribe(C),a.signal&&a.signal.removeEventListener("abort",C)}let B=new XMLHttpRequest;B.open(a.method.toUpperCase(),a.url,!0),B.timeout=a.timeout;function z(){if(!B)return;const k=Fr.from("getAllResponseHeaders"in B&&B.getAllResponseHeaders()),Q={data:!g||g==="text"||g==="json"?B.responseText:B.response,status:B.status,statusText:B.statusText,headers:k,config:e,request:B};Eb(function(H){n(H),R()},function(H){i(H),R()},Q),B=null}"onloadend"in B?B.onloadend=z:B.onreadystatechange=function(){!B||B.readyState!==4||B.status===0&&!(B.responseURL&&B.responseURL.indexOf("file:")===0)||setTimeout(z)},B.onabort=function(){B&&(i(new mt("Request aborted",mt.ECONNABORTED,e,B)),B=null)},B.onerror=function(W){const Q=W&&W.message?W.message:"Network Error",G=new mt(Q,mt.ERR_NETWORK,e,B);G.event=W||null,i(G),B=null},B.ontimeout=function(){let W=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const Q=a.transitional||G1;a.timeoutErrorMessage&&(W=a.timeoutErrorMessage),i(new mt(W,Q.clarifyTimeoutError?mt.ETIMEDOUT:mt.ECONNABORTED,e,B)),B=null},c===void 0&&f.setContentType(null),"setRequestHeader"in B&&me.forEach(f.toJSON(),function(W,Q){B.setRequestHeader(Q,W)}),me.isUndefined(a.withCredentials)||(B.withCredentials=!!a.withCredentials),g&&g!=="json"&&(B.responseType=a.responseType),y&&([T,F]=Yd(y,!0),B.addEventListener("progress",T)),v&&B.upload&&([b,I]=Yd(v),B.upload.addEventListener("progress",b),B.upload.addEventListener("loadend",I)),(a.cancelToken||a.signal)&&(C=k=>{B&&(i(!k||k.type?new iu(null,e,B):k),B.abort(),B=null)},a.cancelToken&&a.cancelToken.subscribe(C),a.signal&&(a.signal.aborted?C():a.signal.addEventListener("abort",C)));const O=y5(a.url);if(O&&fr.protocols.indexOf(O)===-1){i(new mt("Unsupported protocol "+O+":",mt.ERR_BAD_REQUEST,e));return}B.send(c||null)})},N5=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let i=new AbortController,a;const c=function(y){if(!a){a=!0,g();const C=y instanceof Error?y:this.reason;i.abort(C instanceof mt?C:new iu(C instanceof Error?C.message:C))}};let f=t&&setTimeout(()=>{f=null,c(new mt(`timeout of ${t}ms exceeded`,mt.ETIMEDOUT))},t);const g=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(y=>{y.unsubscribe?y.unsubscribe(c):y.removeEventListener("abort",c)}),e=null)};e.forEach(y=>y.addEventListener("abort",c));const{signal:v}=i;return v.unsubscribe=()=>me.asap(g),v}},T5=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let i=0,a;for(;i<n;)a=i+t,yield e.slice(i,a),i=a},I5=async function*(e,t){for await(const n of k5(e))yield*T5(n,t)},k5=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:i}=await t.read();if(n)break;yield i}}finally{await t.cancel()}},cy=(e,t,n,i)=>{const a=I5(e,t);let c=0,f,g=v=>{f||(f=!0,i&&i(v))};return new ReadableStream({async pull(v){try{const{done:y,value:C}=await a.next();if(y){g(),v.close();return}let b=C.byteLength;if(n){let T=c+=b;n(T)}v.enqueue(new Uint8Array(C))}catch(y){throw g(y),y}},cancel(v){return g(v),a.return()}},{highWaterMark:2})},uy=64*1024,{isFunction:Fu}=me,M5=(({Request:e,Response:t})=>({Request:e,Response:t}))(me.global),{ReadableStream:dy,TextEncoder:hy}=me.global,fy=(e,...t)=>{try{return!!e(...t)}catch{return!1}},R5=e=>{e=me.merge.call({skipUndefined:!0},M5,e);const{fetch:t,Request:n,Response:i}=e,a=t?Fu(t):typeof fetch=="function",c=Fu(n),f=Fu(i);if(!a)return!1;const g=a&&Fu(dy),v=a&&(typeof hy=="function"?(F=>R=>F.encode(R))(new hy):async F=>new Uint8Array(await new n(F).arrayBuffer())),y=c&&g&&fy(()=>{let F=!1;const R=new n(fr.origin,{body:new dy,method:"POST",get duplex(){return F=!0,"half"}}).headers.has("Content-Type");return F&&!R}),C=f&&g&&fy(()=>me.isReadableStream(new i("").body)),b={stream:C&&(F=>F.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(F=>{!b[F]&&(b[F]=(R,B)=>{let z=R&&R[F];if(z)return z.call(R);throw new mt(`Response type '${F}' is not supported`,mt.ERR_NOT_SUPPORT,B)})});const T=async F=>{if(F==null)return 0;if(me.isBlob(F))return F.size;if(me.isSpecCompliantForm(F))return(await new n(fr.origin,{method:"POST",body:F}).arrayBuffer()).byteLength;if(me.isArrayBufferView(F)||me.isArrayBuffer(F))return F.byteLength;if(me.isURLSearchParams(F)&&(F=F+""),me.isString(F))return(await v(F)).byteLength},I=async(F,R)=>{const B=me.toFiniteNumber(F.getContentLength());return B??T(R)};return async F=>{let{url:R,method:B,data:z,signal:O,cancelToken:k,timeout:W,onDownloadProgress:Q,onUploadProgress:G,responseType:H,headers:q,withCredentials:M="same-origin",fetchOptions:X}=Tb(F),ie=t||fetch;H=H?(H+"").toLowerCase():"text";let se=N5([O,k&&k.toAbortSignal()],W),ve=null;const Ee=se&&se.unsubscribe&&(()=>{se.unsubscribe()});let ae;try{if(G&&y&&B!=="get"&&B!=="head"&&(ae=await I(q,z))!==0){let ge=new n(R,{method:"POST",body:z,duplex:"half"}),Me;if(me.isFormData(z)&&(Me=ge.headers.get("content-type"))&&q.setContentType(Me),ge.body){const[qe,De]=oy(ae,Yd(ay(G)));z=cy(ge.body,uy,qe,De)}}me.isString(M)||(M=M?"include":"omit");const de=c&&"credentials"in n.prototype,ke={...X,signal:se,method:B.toUpperCase(),headers:q.normalize().toJSON(),body:z,duplex:"half",credentials:de?M:void 0};ve=c&&new n(R,ke);let ne=await(c?ie(ve,X):ie(R,ke));const Se=C&&(H==="stream"||H==="response");if(C&&(Q||Se&&Ee)){const ge={};["status","statusText","headers"].forEach(ee=>{ge[ee]=ne[ee]});const Me=me.toFiniteNumber(ne.headers.get("content-length")),[qe,De]=Q&&oy(Me,Yd(ay(Q),!0))||[];ne=new i(cy(ne.body,uy,qe,()=>{De&&De(),Ee&&Ee()}),ge)}H=H||"text";let ye=await b[me.findKey(b,H)||"text"](ne,F);return!Se&&Ee&&Ee(),await new Promise((ge,Me)=>{Eb(ge,Me,{data:ye,headers:Fr.from(ne.headers),status:ne.status,statusText:ne.statusText,config:F,request:ve})})}catch(de){throw Ee&&Ee(),de&&de.name==="TypeError"&&/Load failed|fetch/i.test(de.message)?Object.assign(new mt("Network Error",mt.ERR_NETWORK,F,ve,de&&de.response),{cause:de.cause||de}):mt.from(de,de&&de.code,F,ve,de&&de.response)}}},O5=new Map,Ib=e=>{let t=e&&e.env||{};const{fetch:n,Request:i,Response:a}=t,c=[i,a,n];let f=c.length,g=f,v,y,C=O5;for(;g--;)v=c[g],y=C.get(v),y===void 0&&C.set(v,y=g?new Map:R5(t)),C=y;return y};Ib();const X1={http:K8,xhr:E5,fetch:{get:Ib}};me.forEach(X1,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const py=e=>`- ${e}`,L5=e=>me.isFunction(e)||e===null||e===!1;function P5(e,t){e=me.isArray(e)?e:[e];const{length:n}=e;let i,a;const c={};for(let f=0;f<n;f++){i=e[f];let g;if(a=i,!L5(i)&&(a=X1[(g=String(i)).toLowerCase()],a===void 0))throw new mt(`Unknown adapter '${g}'`);if(a&&(me.isFunction(a)||(a=a.get(t))))break;c[g||"#"+f]=a}if(!a){const f=Object.entries(c).map(([v,y])=>`adapter ${v} `+(y===!1?"is not supported by the environment":"is not available in the build"));let g=n?f.length>1?`since :
`+f.map(py).join(`
`):" "+py(f[0]):"as no adapter specified";throw new mt("There is no suitable adapter to dispatch the request "+g,"ERR_NOT_SUPPORT")}return a}const kb={getAdapter:P5,adapters:X1};function Ff(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new iu(null,e)}function my(e){return Ff(e),e.headers=Fr.from(e.headers),e.data=Bf.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),kb.getAdapter(e.adapter||ru.adapter,e)(e).then(function(i){return Ff(e),i.data=Bf.call(e,e.transformResponse,i),i.headers=Fr.from(i.headers),i},function(i){return Ab(i)||(Ff(e),i&&i.response&&(i.response.data=Bf.call(e,e.transformResponse,i.response),i.response.headers=Fr.from(i.response.headers))),Promise.reject(i)})}const Mb="1.13.5",Mh={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Mh[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const gy={};Mh.transitional=function(t,n,i){function a(c,f){return"[Axios v"+Mb+"] Transitional option '"+c+"'"+f+(i?". "+i:"")}return(c,f,g)=>{if(t===!1)throw new mt(a(f," has been removed"+(n?" in "+n:"")),mt.ERR_DEPRECATED);return n&&!gy[f]&&(gy[f]=!0,console.warn(a(f," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(c,f,g):!0}};Mh.spelling=function(t){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function D5(e,t,n){if(typeof e!="object")throw new mt("options must be an object",mt.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let a=i.length;for(;a-- >0;){const c=i[a],f=t[c];if(f){const g=e[c],v=g===void 0||f(g,c,e);if(v!==!0)throw new mt("option "+c+" must be "+v,mt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new mt("Unknown option "+c,mt.ERR_BAD_OPTION)}}const ld={assertOptions:D5,validators:Mh},di=ld.validators;let ia=class{constructor(t){this.defaults=t||{},this.interceptors={request:new iy,response:new iy}}async request(t,n){try{return await this._request(t,n)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const c=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?c&&!String(i.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+c):i.stack=c}catch{}}throw i}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=fa(this.defaults,n);const{transitional:i,paramsSerializer:a,headers:c}=n;i!==void 0&&ld.assertOptions(i,{silentJSONParsing:di.transitional(di.boolean),forcedJSONParsing:di.transitional(di.boolean),clarifyTimeoutError:di.transitional(di.boolean),legacyInterceptorReqResOrdering:di.transitional(di.boolean)},!1),a!=null&&(me.isFunction(a)?n.paramsSerializer={serialize:a}:ld.assertOptions(a,{encode:di.function,serialize:di.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ld.assertOptions(n,{baseUrl:di.spelling("baseURL"),withXsrfToken:di.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let f=c&&me.merge(c.common,c[n.method]);c&&me.forEach(["delete","get","head","post","put","patch","common"],F=>{delete c[F]}),n.headers=Fr.concat(f,c);const g=[];let v=!0;this.interceptors.request.forEach(function(R){if(typeof R.runWhen=="function"&&R.runWhen(n)===!1)return;v=v&&R.synchronous;const B=n.transitional||G1;B&&B.legacyInterceptorReqResOrdering?g.unshift(R.fulfilled,R.rejected):g.push(R.fulfilled,R.rejected)});const y=[];this.interceptors.response.forEach(function(R){y.push(R.fulfilled,R.rejected)});let C,b=0,T;if(!v){const F=[my.bind(this),void 0];for(F.unshift(...g),F.push(...y),T=F.length,C=Promise.resolve(n);b<T;)C=C.then(F[b++],F[b++]);return C}T=g.length;let I=n;for(;b<T;){const F=g[b++],R=g[b++];try{I=F(I)}catch(B){R.call(this,B);break}}try{C=my.call(this,I)}catch(F){return Promise.reject(F)}for(b=0,T=y.length;b<T;)C=C.then(y[b++],y[b++]);return C}getUri(t){t=fa(this.defaults,t);const n=Nb(t.baseURL,t.url,t.allowAbsoluteUrls);return Cb(n,t.params,t.paramsSerializer)}};me.forEach(["delete","get","head","options"],function(t){ia.prototype[t]=function(n,i){return this.request(fa(i||{},{method:t,url:n,data:(i||{}).data}))}});me.forEach(["post","put","patch"],function(t){function n(i){return function(c,f,g){return this.request(fa(g||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:c,data:f}))}}ia.prototype[t]=n(),ia.prototype[t+"Form"]=n(!0)});let j5=class Rb{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(c){n=c});const i=this;this.promise.then(a=>{if(!i._listeners)return;let c=i._listeners.length;for(;c-- >0;)i._listeners[c](a);i._listeners=null}),this.promise.then=a=>{let c;const f=new Promise(g=>{i.subscribe(g),c=g}).then(a);return f.cancel=function(){i.unsubscribe(c)},f},t(function(c,f,g){i.reason||(i.reason=new iu(c,f,g),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=i=>{t.abort(i)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Rb(function(a){t=a}),cancel:t}}};function B5(e){return function(n){return e.apply(null,n)}}function F5(e){return me.isObject(e)&&e.isAxiosError===!0}const lp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(lp).forEach(([e,t])=>{lp[t]=e});function Ob(e){const t=new ia(e),n=hb(ia.prototype.request,t);return me.extend(n,ia.prototype,t,{allOwnKeys:!0}),me.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return Ob(fa(e,a))},n}const st=Ob(ru);st.Axios=ia;st.CanceledError=iu;st.CancelToken=j5;st.isCancel=Ab;st.VERSION=Mb;st.toFormData=kh;st.AxiosError=mt;st.Cancel=st.CanceledError;st.all=function(t){return Promise.all(t)};st.spread=B5;st.isAxiosError=F5;st.mergeConfig=fa;st.AxiosHeaders=Fr;st.formToJSON=e=>Sb(me.isHTMLForm(e)?new FormData(e):e);st.getAdapter=kb.getAdapter;st.HttpStatusCode=lp;st.default=st;const{Axios:xM,AxiosError:yM,CanceledError:wM,isCancel:vM,CancelToken:_M,VERSION:bM,all:CM,Cancel:SM,isAxiosError:AM,spread:EM,toFormData:NM,AxiosHeaders:TM,HttpStatusCode:IM,formToJSON:kM,getAdapter:MM,mergeConfig:RM}=st,z5=[{event_id:"1",label:"Expediere preluata de Curier",description:"Expediere preluata de Curier"},{event_id:"2",label:"Expeditie Livrata",description:"Expeditie Livrata"},{event_id:"3",label:"Refuzare colet",description:"Refuzare colet"},{event_id:"4",label:"Expeditie returnata",description:"Expeditie returnata"},{event_id:"5",label:"Expeditie anulata",description:"Expeditie anulata"},{event_id:"6",label:"Intrare in depozit",description:"Intrare in depozit"},{event_id:"7",label:"Livrare reprogramata",description:"Livrare reprogramata"},{event_id:"R3",label:"Ramburs transferat",description:"Ramburs transferat"}];z5.reduce((e,t)=>(e[t.event_id]=t.label,e),{});const U5=!1,zf="http://localhost:8000",cp="arynik_api_url_v1",ec=e=>String(e||"").trim().replace(/\/+$/,""),V5=e=>{try{return localStorage.getItem(e)}catch{return null}},H5=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},W5=e=>{try{localStorage.removeItem(e)}catch{}},Dt=()=>{if(typeof window>"u")return ec(zf);const t=new URLSearchParams(window.location.search).get("api"),n=V5(cp);return ec(t||n||zf)||ec(zf)},Lb=e=>{const t=ec(e);t?H5(cp,t):W5(cp)},Vt=e=>e?{Authorization:`Bearer ${e}`}:{},xy=e=>{const t=new TextEncoder().encode(String(e));let n="";return t.forEach(i=>{n+=String.fromCharCode(i)}),btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"")},Z5=e=>`${xy(JSON.stringify({alg:"none",typ:"JWT"}))}.${xy(JSON.stringify(e))}.offline`,G5=e=>{const t=String(e).trim().toLowerCase();return t.includes("admin")?"Admin":t.includes("manager")?"Manager":t.replace(/\\D/g,"").length>=9?"Recipient":"Driver"},Y5=(e,t)=>{if(e==="Driver"){const n=String(t).trim().toUpperCase();return/^D\\d{3,}$/i.test(n)?n:"D002"}if(e==="Recipient"){const n=String(t).replace(/\\D/g,"");return n?`R${n.slice(-15)}`:"R000"}return"D001"};async function X5(e,t){const n=Dt(),i=new URLSearchParams;i.append("username",e),i.append("password",t);try{return(await st.post(`${n}/login`,i,{headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:3e3})).data}catch(a){if(a&&a.response)throw a;console.warn("Login API unavailable; using snapshot/offline token.",a);const c=String(e||"").trim()||"offline",f=G5(c),g={sub:c,driver_id:Y5(f,c),role:f,offline:!0,exp:Math.floor(Date.now()/1e3)+7*24*60*60};return{access_token:Z5(g),token_type:"bearer",role:f}}}async function Pb(e){const t=Dt();return(await st.post(`${t}/recipient/signup`,e,{headers:{"Content-Type":"application/json"},timeout:7e3})).data}async function Db(e){const t=Dt();return(await st.get(`${t}/stats`,{headers:Vt(e)})).data}async function up(e){const t=Dt();return(await st.get(`${t}/me`,{headers:Vt(e)})).data}async function jb(e,{scope:t="self",awb_limit:n=200}={}){const i=Dt();return(await st.get(`${i}/analytics`,{params:{scope:t,awb_limit:n},headers:Vt(e)})).data}async function Bb(e){const t=Dt();return(await st.get(`${t}/roles`,{headers:Vt(e),timeout:5e3})).data}async function q1(e){const t=Dt();return(await st.get(`${t}/users`,{headers:Vt(e),timeout:7e3})).data}async function Fb(e,t){const n=Dt();return(await st.post(`${n}/users`,t,{headers:{...Vt(e),"Content-Type":"application/json"},timeout:7e3})).data}async function zb(e,t,n){const i=String(t||"").trim();if(!i)throw new Error("driver_id is required");const a=Dt();return(await st.patch(`${a}/users/${encodeURIComponent(i)}`,n,{headers:{...Vt(e),"Content-Type":"application/json"},timeout:7e3})).data}async function q5(e){const t=Dt();return(await st.post(`${t}/sync-drivers`,null,{headers:Vt(e),timeout:15e3})).data}async function Ub(e){const t=Dt();return(await st.get(`${t}/status-options`,{headers:Vt(e)})).data}async function Rh(e,t){const n=Dt();return(await st.post(`${n}/update-awb`,t,{headers:Vt(e)})).data}async function K1(e,t={}){const n=Dt();return(await st.get(`${n}/logs`,{params:t,headers:Vt(e)})).data}async function su(e){const t=Dt();try{return(await st.get(`${t}/shipments`,{headers:Vt(e),timeout:5e3})).data}catch(n){console.warn("Backend API unavailable, attempting to load static snapshot...",n);try{const i="/arynik1/data/shipments.json".replace("//","/"),a=await st.get(i);console.info("Loaded shipments from static snapshot.");let c=a.data;if(e)try{const g=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),v=decodeURIComponent(window.atob(g).split("").map(function(T){return"%"+("00"+T.charCodeAt(0).toString(16)).slice(-2)}).join("")),y=JSON.parse(v),C=y.role,b=y.driver_id;if(C==="Driver")console.info(`Offline RBAC: Filtering for Driver ${b}`),c=c.filter(T=>T.driver_id===b);else if(C==="Recipient"){const F=String(y.sub||"").trim().replace(/\\D/g,"").slice(-9);F&&(console.info("Offline RBAC: Filtering for Recipient phone"),c=c.filter(R=>String((R==null?void 0:R.recipient_phone)||"").replace(/\\D/g,"").endsWith(F)))}}catch(f){console.warn("Offline RBAC: Failed to decode token",f)}return c}catch(i){throw console.error("Failed to load both API and static snapshot",i),n}}}async function Uc(e,t,{refresh:n=!1}={}){const i=Dt(),a=String(t||"").trim();if(!a)throw new Error("awb is required");try{return(await st.get(`${i}/shipments/${encodeURIComponent(a)}`,{params:n?{refresh:!0}:{},headers:Vt(e),timeout:7e3})).data}catch(c){console.warn("Backend shipment details unavailable, attempting static snapshot...",c);try{const f="/arynik1/data/shipments.json".replace("//","/"),g=await st.get(f),y=(Array.isArray(g.data)?g.data:[]).find(C=>String((C==null?void 0:C.awb)||"").toUpperCase()===a.toUpperCase());if(y)return y}catch{}throw c}}async function Q1(e,t,n){const i=Dt(),a=String(t||"").trim();if(!a)throw new Error("awb is required");const c=String(n||"").trim();if(!c)throw new Error("driver_id is required");return(await st.post(`${i}/shipments/${encodeURIComponent(a)}/allocate`,{driver_id:c},{headers:{...Vt(e),"Content-Type":"application/json"},timeout:7e3})).data}async function $1(e,{limit:t=50,unread_only:n=!1}={}){const i=Dt();return(await st.get(`${i}/notifications`,{params:{limit:t,unread_only:n},headers:Vt(e),timeout:7e3})).data}async function Xd(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("notification_id is required");const i=Dt();return(await st.post(`${i}/notifications/${encodeURIComponent(String(n))}/read`,null,{headers:Vt(e),timeout:7e3})).data}async function Vb(e,t){const n=Dt();return(await st.post(`${n}/update-location`,t,{headers:{...Vt(e),"Content-Type":"application/json"},timeout:7e3})).data}async function J1(e,t){const n=Dt();return(await st.post(`${n}/tracking/requests`,t,{headers:{...Vt(e),"Content-Type":"application/json"},timeout:7e3})).data}async function Hb(e,{limit:t=20}={}){const n=Dt();return(await st.get(`${n}/tracking/requests/inbox`,{params:{limit:t},headers:Vt(e),timeout:7e3})).data}async function Wb(e,{limit:t=10}={}){const n=Dt();return(await st.get(`${n}/tracking/requests/active`,{params:{limit:t},headers:Vt(e),timeout:7e3})).data}async function Zb(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("request_id is required");const i=Dt();return(await st.get(`${i}/tracking/requests/${encodeURIComponent(String(n))}`,{headers:Vt(e),timeout:7e3})).data}async function Gb(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("request_id is required");const i=Dt();return(await st.get(`${i}/tracking/requests/${encodeURIComponent(String(n))}/latest`,{headers:Vt(e),timeout:7e3})).data}async function Yb(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("request_id is required");const i=Dt();return(await st.post(`${i}/tracking/requests/${encodeURIComponent(String(n))}/accept`,null,{headers:Vt(e),timeout:7e3})).data}async function Xb(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("request_id is required");const i=Dt();return(await st.post(`${i}/tracking/requests/${encodeURIComponent(String(n))}/deny`,null,{headers:Vt(e),timeout:7e3})).data}async function em(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("request_id is required");const i=Dt();return(await st.post(`${i}/tracking/requests/${encodeURIComponent(String(n))}/stop`,null,{headers:Vt(e),timeout:7e3})).data}async function qb(e,{limit:t=50,awb:n=null}={}){const i=Dt();return(await st.get(`${i}/chat/threads`,{params:{limit:t,awb:n||void 0},headers:Vt(e),timeout:7e3})).data}async function tm(e,{awb:t}={}){const n=String(t||"").trim().toUpperCase();if(!n)throw new Error("awb is required");const i=Dt();return(await st.post(`${i}/chat/threads`,{awb:n},{headers:{...Vt(e),"Content-Type":"application/json"},timeout:7e3})).data}async function Kb(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("thread_id is required");const i=Dt();return(await st.get(`${i}/chat/threads/${encodeURIComponent(String(n))}`,{headers:Vt(e),timeout:7e3})).data}async function Qb(e,t,{limit:n=50,before_id:i=null}={}){const a=Number(t);if(!Number.isFinite(a))throw new Error("thread_id is required");const c=Dt();return(await st.get(`${c}/chat/threads/${encodeURIComponent(String(a))}/messages`,{params:{limit:n,before_id:i??void 0},headers:Vt(e),timeout:7e3})).data}async function dp(e,t,n){const i=Number(t);if(!Number.isFinite(i))throw new Error("thread_id is required");const a=Dt();return(await st.post(`${a}/chat/threads/${encodeURIComponent(String(i))}/messages`,n,{headers:{...Vt(e),"Content-Type":"application/json"},timeout:7e3})).data}async function $b(e,t,{last_read_message_id:n=null}={}){const i=Number(t);if(!Number.isFinite(i))throw new Error("thread_id is required");const a=Dt();return(await st.post(`${a}/chat/threads/${encodeURIComponent(String(i))}/read`,{last_read_message_id:n??void 0},{headers:{...Vt(e),"Content-Type":"application/json"},timeout:7e3})).data}const K5=Object.freeze(Object.defineProperty({__proto__:null,acceptTrackingRequest:Yb,allocateShipment:Q1,createTrackingRequest:J1,createUser:Fb,denyTrackingRequest:Xb,ensureChatThread:tm,getAnalytics:jb,getApiUrl:Dt,getChatThread:Kb,getLogs:K1,getMe:up,getNotifications:$1,getRoles:Bb,getShipment:Uc,getShipments:su,getStats:Db,getStatusOptions:Ub,getTrackingLatest:Gb,getTrackingRequest:Zb,isDemoMode:U5,listChatMessages:Qb,listChatThreads:qb,listTrackingActive:Wb,listTrackingInbox:Hb,listUsers:q1,login:X5,markChatRead:$b,markNotificationRead:Xd,recipientSignup:Pb,sendChatMessage:dp,setApiUrl:Lb,stopTrackingRequest:em,syncDrivers:q5,updateAwb:Rh,updateLocation:Vb,updateUser:zb},Symbol.toStringTag,{value:"Module"})),yy=e=>{try{const n=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(atob(n).split("").map(function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(i)}catch{return null}},Jb=j.createContext(),Q5=({children:e})=>{const[t,n]=j.useState(null),[i,a]=j.useState(!0);j.useEffect(()=>{let g=!1;return(async()=>{const v=localStorage.getItem("token");if(!v){g||a(!1);return}const y=yy(v);if(!y||!y.sub){console.warn("Invalid/undecodable token in localStorage; clearing it."),localStorage.removeItem("token"),g||a(!1);return}const C={username:y.sub,driver_id:y.driver_id,role:y.role,token:v,permissions:ip(y.role)};g||n(C);try{const b=await up(v);!g&&b&&n(T=>({...T||C,...b,token:v,permissions:Array.isArray(b==null?void 0:b.permissions)?b.permissions:(T==null?void 0:T.permissions)||C.permissions}))}catch(b){console.warn("Failed to load /me; continuing with token payload only.",b)}finally{g||a(!1)}})(),()=>{g=!0}},[]);const c=async(g,v)=>{localStorage.setItem("token",g);const y=yy(g);if(!y||!y.sub){console.error("Login returned an invalid token; clearing it."),localStorage.removeItem("token"),n(null);return}const C={username:y.sub,driver_id:y.driver_id,role:v||y.role,token:g,permissions:ip(v||y.role)};n(C);try{const b=await up(g);b&&n(T=>({...T||C,...b,token:g,permissions:Array.isArray(b==null?void 0:b.permissions)?b.permissions:(T==null?void 0:T.permissions)||C.permissions}))}catch(b){console.warn("Failed to load /me after login; continuing with token payload only.",b)}},f=()=>{localStorage.setItem("token",""),localStorage.removeItem("token"),n(null)};return m.jsx(Jb.Provider,{value:{user:t,login:c,logout:f,loading:i},children:!i&&e})},Jn=()=>j.useContext(Jb),$5=({to:e,onClick:t,icon:n,label:i,isActive:a})=>{const c=`relative flex flex-col items-center justify-center gap-1.5 px-3 py-3 rounded-2xl transition-all duration-300 ${a?"text-white":"text-slate-500 hover:text-slate-300"}`,f=m.jsxs(m.Fragment,{children:[a&&m.jsx(rt.div,{layoutId:"nav-pill",className:"absolute inset-0 bg-gradient-to-t from-brand-blue/20 to-transparent rounded-2xl border-b-2 border-brand-blue shadow-[0_0_20px_rgba(59,130,246,0.5)]",transition:{type:"spring",stiffness:300,damping:30}}),m.jsx(n,{size:22,className:`relative z-10 transition-all duration-300 ${a?"scale-110 drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]":"scale-100"}`,strokeWidth:a?2.5:2}),m.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wide relative z-10 ${a?"text-white drop-shadow-md":"opacity-70"}`,children:i})]});return e?m.jsx(vE,{to:e,className:c,children:f}):m.jsx("button",{type:"button",onClick:t,className:c,"aria-label":i,children:f})};function J5({onOpenMenu:e}){const n=To().pathname,{user:i}=Jn(),a=Tn(i,Rr),c=["Manager","Admin","Dispatcher","Driver"].includes(i==null?void 0:i.role),f=[{to:"/home",icon:G_,label:"Home"},...a?[{to:"/shipments",icon:Rs,label:"Track"}]:[],...c?[{to:"/routes",icon:xo,label:"Routes"}]:[],{onClick:e,icon:QI,label:"Menu"}];return m.jsx("nav",{className:"fixed bottom-[calc(1.5rem+env(safe-area-inset-bottom))] left-1/2 -translate-x-1/2 z-50 w-full max-w-sm px-4",children:m.jsxs("div",{className:"glass-strong rounded-[32px] border-iridescent shadow-2xl px-2 py-2 flex justify-around items-center relative backdrop-blur-2xl",children:[m.jsx("div",{className:"absolute inset-x-4 top-0 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"}),f.map(g=>m.jsx($5,{to:g.to,onClick:g.onClick,icon:g.icon,label:g.label,isActive:g.to?n===g.to||g.to!=="/home"&&n.startsWith(g.to)||n==="/"&&g.to==="/home":!1},g.to||g.label))]})})}const Xi=({icon:e,label:t,description:n,onClick:i})=>m.jsxs("button",{type:"button",onClick:i,className:"w-full p-4 glass-light rounded-2xl border border-white/10 hover:border-white/20 hover:bg-white/5 transition-all flex items-center gap-4 text-left",children:[m.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-violet-500/25 to-purple-600/15 border border-white/10",children:m.jsx(e,{size:20,className:"text-violet-300"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-black text-white text-sm uppercase tracking-tight",children:t}),n?m.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:n}):null]})]});function ek({open:e,onClose:t}){const n=mr(),{user:i,logout:a}=Jn(),c=j.useMemo(()=>Tn(i,Rr),[i]),f=j.useMemo(()=>["Manager","Admin","Dispatcher","Driver"].includes(i==null?void 0:i.role),[i==null?void 0:i.role]),g=j.useMemo(()=>Tn(i,yo),[i]),v=j.useMemo(()=>Tn(i,to),[i]),y=j.useMemo(()=>Tn(i,mi),[i]),C=j.useMemo(()=>Tn(i,ki),[i]),b=j.useMemo(()=>Tn(i,pi),[i]),T=j.useMemo(()=>Tn(i,Gr),[i]);j.useEffect(()=>{if(!e)return;const W=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=W}},[e]);const I=W=>{n(W),t==null||t()},F=()=>{a(),t==null||t(),n("/login",{replace:!0})},R=(i==null?void 0:i.name)||(i==null?void 0:i.username)||"Driver",B=i!=null&&i.truck_plate?String(i.truck_plate).toUpperCase():null,z=(i==null?void 0:i.truck_phone)||null,O=String((i==null?void 0:i.role)||"")==="Recipient",k=O&&((i==null?void 0:i.phone_number)||(i==null?void 0:i.username))||null;return m.jsx(ts,{children:e?m.jsxs(m.Fragment,{children:[m.jsx(rt.div,{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[60]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t}),m.jsx(rt.aside,{className:"fixed inset-y-0 right-0 w-full max-w-sm z-[61] p-4",initial:{x:60,opacity:0},animate:{x:0,opacity:1},exit:{x:60,opacity:0},transition:{type:"spring",stiffness:260,damping:28},"aria-label":"App menu",role:"dialog","aria-modal":"true",children:m.jsxs("div",{className:"h-full glass-strong rounded-[32px] border-iridescent shadow-2xl overflow-hidden flex flex-col",children:[m.jsxs("div",{className:"p-5 flex items-center justify-between border-b border-white/10",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Menu"}),m.jsx("div",{className:"text-lg font-black text-white mt-1",children:"Navigation"})]}),m.jsx("button",{type:"button",onClick:t,className:"w-11 h-11 rounded-2xl glass-light border border-white/10 flex items-center justify-center hover:bg-white/5 transition-all","aria-label":"Close menu",children:m.jsx(va,{size:18,className:"text-slate-300"})})]}),m.jsx("div",{className:"p-5",children:m.jsxs("div",{className:"glass-light rounded-3xl border border-white/10 p-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center shadow-glow-md",children:m.jsx(wa,{size:22,className:"text-white"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("div",{className:"font-black text-white truncate",children:R}),m.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-0.5",children:[(i==null?void 0:i.role)||"Role","  ID: ",(i==null?void 0:i.driver_id)||"N/A"]})]})]}),m.jsx("div",{className:"mt-4 grid grid-cols-2 gap-3",children:O?m.jsxs("div",{className:"p-3 rounded-2xl bg-slate-900/40 border border-white/10 col-span-2",children:[m.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[m.jsx(Wd,{size:14}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Recipient Phone"})]}),m.jsx("div",{className:"text-sm font-black text-white mt-1 truncate",children:k||"--"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"p-3 rounded-2xl bg-slate-900/40 border border-white/10",children:[m.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[m.jsx(V1,{size:14}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Truck"})]}),m.jsx("div",{className:"text-sm font-black text-white mt-1 truncate",children:B||"Unassigned"})]}),m.jsxs("div",{className:"p-3 rounded-2xl bg-slate-900/40 border border-white/10",children:[m.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[m.jsx(Wd,{size:14}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Phone"})]}),m.jsx("div",{className:"text-sm font-black text-white mt-1 truncate",children:z||"--"})]})]})}),v?m.jsx("div",{className:"mt-3 text-[10px] text-emerald-400 font-black uppercase tracking-widest",children:"Analytics: ALL enabled"}):null]})}),m.jsxs("div",{className:"flex-1 px-5 pb-5 overflow-y-auto space-y-3",children:[m.jsx(Xi,{icon:G_,label:"Home",description:"Scanner & quick actions",onClick:()=>I("/home")}),c?m.jsxs(m.Fragment,{children:[m.jsx(Xi,{icon:Rs,label:"Shipments",description:"Track shipments",onClick:()=>I("/shipments")}),f?m.jsx(Xi,{icon:xo,label:"Routes",description:"Plan deliveries",onClick:()=>I("/routes")}):null]}):null,b?m.jsx(Xi,{icon:Fc,label:"Notifications",description:"Allocation updates",onClick:()=>I("/notifications")}):null,T?m.jsx(Xi,{icon:zc,label:"Chat",description:"Recipient messaging",onClick:()=>I("/chat")}):null,y?m.jsx(Xi,{icon:YI,label:"History",description:"Logs & updates",onClick:()=>I("/history")}):null,c?m.jsx(Xi,{icon:W_,label:"Calendar",description:"Daily overview",onClick:()=>I("/calendar")}):null,C?m.jsx(Xi,{icon:H_,label:"Statistics",description:"Trucks, drivers, AWBs, ESCH",onClick:()=>I("/analytics")}):null,g?m.jsx(Xi,{icon:eb,label:"Users",description:"Create accounts & roles",onClick:()=>I("/users")}):null,m.jsx(Xi,{icon:n8,label:"Settings",description:"Account & API",onClick:()=>I("/settings")}),m.jsxs("button",{type:"button",onClick:F,className:"w-full p-4 rounded-2xl bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-400 hover:to-rose-500 text-white font-black uppercase tracking-wider shadow-lg flex items-center justify-center gap-3 transition-all",children:[m.jsx(q_,{size:18}),"Sign Out"]})]})]})})]}):null})}function tk(){const e=mr(),{user:t}=Jn(),n=(t==null?void 0:t.token)||localStorage.getItem("token"),[i,a]=j.useState(null),c=j.useRef(new Set);j.useEffect(()=>{if(!n)return;let C=!1;const b=async()=>{try{const I=await $1(n,{limit:50,unread_only:!0}).catch(()=>[]),R=(Array.isArray(I)?I:[]).filter(B=>{var z;return String(((z=B==null?void 0:B.data)==null?void 0:z.type)||"")==="chat_message"}).sort((B,z)=>new Date((z==null?void 0:z.created_at)||0)-new Date((B==null?void 0:B.created_at)||0));for(const B of R){const z=String((B==null?void 0:B.id)||"");if(z&&!c.current.has(z)){c.current.add(z),C||a(B);break}}}catch{}};b();const T=setInterval(b,12e3);return()=>{C=!0,clearInterval(T)}},[n]);const f=async()=>{const C=i==null?void 0:i.id;if(a(null),!(!C||!n))try{await Xd(n,C)}catch{}},g=async()=>{var T;const C=(T=i==null?void 0:i.data)==null?void 0:T.thread_id,b=i==null?void 0:i.id;if(a(null),b&&n)try{await Xd(n,b)}catch{}C&&e(`/chat/${encodeURIComponent(String(C))}`)};if(!i)return null;const v=String((i==null?void 0:i.body)||"").trim(),y=i!=null&&i.awb?String(i.awb).toUpperCase():null;return m.jsx("div",{className:"fixed bottom-[calc(9rem+env(safe-area-inset-bottom))] left-0 right-0 z-[69] px-4",children:m.jsx("div",{className:"max-w-xl mx-auto",children:m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-4 shadow-2xl flex items-start gap-3",children:[m.jsx("div",{className:"w-11 h-11 rounded-2xl bg-violet-500/15 border border-violet-500/20 flex items-center justify-center",children:m.jsx(zc,{size:18,className:"text-violet-200"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"text-sm font-black text-white truncate",children:["New chat message",y?`  ${y}`:""]}),v?m.jsx("div",{className:"text-[11px] font-bold text-slate-300 mt-1 break-words",children:v}):null,m.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[m.jsx("button",{type:"button",onClick:g,className:"px-4 h-10 rounded-2xl border text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 transition-all bg-emerald-500/15 border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95",children:"Open"}),m.jsx("button",{type:"button",onClick:f,className:"w-10 h-10 rounded-2xl border flex items-center justify-center transition-all bg-slate-900/40 border-white/10 text-slate-300 hover:bg-white/5 active:scale-95",title:"Dismiss",children:m.jsx(va,{size:18})})]})]})]})})})}function nm(e={}){const t=typeof e=="boolean"?e:(e==null?void 0:e.enabled)??!0,[n,i]=j.useState(null),[a,c]=j.useState(null);return j.useEffect(()=>{if(!t)return;if(!navigator.geolocation){c("Geolocation is not supported by your browser");return}const f=C=>{const{latitude:b,longitude:T,heading:I,speed:F}=C.coords;i({latitude:b,longitude:T,heading:I,speed:F})},g=C=>{c(C.message)},v={enableHighAccuracy:!0,timeout:5e3,maximumAge:0,...typeof e=="object"&&(e!=null&&e.options)?e.options:{}},y=navigator.geolocation.watchPosition(f,g,v);return()=>navigator.geolocation.clearWatch(y)},[t]),{location:n,error:a}}const wy=e=>{try{return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}};function nk(){const{user:e}=Jn(),t=(e==null?void 0:e.token)||localStorage.getItem("token"),n=String((e==null?void 0:e.role)||"").trim(),[i,a]=j.useState([]),[c,f]=j.useState(null),[g,v]=j.useState(null),[y,C]=j.useState(""),b=n==="Driver"&&!!c,{location:T,error:I}=nm({enabled:b}),F=j.useMemo(()=>{if(!(c!=null&&c.expires_at))return null;const W=new Date(c.expires_at).getTime();return Number.isFinite(W)?W:null},[c==null?void 0:c.expires_at]);j.useEffect(()=>{if(n!=="Driver"||!t)return;let W=!1;const Q=async()=>{try{const H=await Hb(t,{limit:20}).catch(()=>[]);W||a(Array.isArray(H)?H:[]);let q=null;try{const M=await Wb(t,{limit:5});q=Array.isArray(M)?M:[]}catch{q=null}if(W||q===null)return;f(M=>M?q.some(ie=>String(ie==null?void 0:ie.id)===String(M==null?void 0:M.id))?M:null:q[0]||null)}catch{}};Q();const G=setInterval(Q,1e4);return()=>{W=!0,clearInterval(G)}},[n,t]),j.useEffect(()=>{if(!F)return;const W=()=>{Date.now()>=F&&f(null)};W();const Q=setInterval(W,1e3);return()=>clearInterval(Q)},[F]);const R=j.useRef(0);j.useEffect(()=>{if(!b||!T||!t)return;const W=Date.now();if(W-R.current<8e3)return;R.current=W;const Q={latitude:Number(T.latitude),longitude:Number(T.longitude)};!Number.isFinite(Q.latitude)||!Number.isFinite(Q.longitude)||(async()=>{var G,H;try{await Vb(t,Q),C("")}catch(q){C(String(((H=(G=q==null?void 0:q.response)==null?void 0:G.data)==null?void 0:H.detail)||(q==null?void 0:q.message)||"Failed to send location"))}})()},[b,T==null?void 0:T.latitude,T==null?void 0:T.longitude,t]);const B=j.useMemo(()=>{if(c)return null;const W=Array.isArray(i)?i:[];return W.length>0?W[0]:null},[i,c]),z=async()=>{var W,Q;if(!(!(B!=null&&B.id)||!t)){v(B.id),C("");try{const G=await Yb(t,B.id);f(G||null),a(H=>Array.isArray(H)?H.filter(q=>String(q==null?void 0:q.id)!==String(B.id)):H)}catch(G){C(String(((Q=(W=G==null?void 0:G.response)==null?void 0:W.data)==null?void 0:Q.detail)||(G==null?void 0:G.message)||"Failed to accept request"))}finally{v(null)}}},O=async()=>{var W,Q;if(!(!(B!=null&&B.id)||!t)){v(B.id),C("");try{await Xb(t,B.id),a(G=>Array.isArray(G)?G.filter(H=>String(H==null?void 0:H.id)!==String(B.id)):G)}catch(G){C(String(((Q=(W=G==null?void 0:G.response)==null?void 0:W.data)==null?void 0:Q.detail)||(G==null?void 0:G.message)||"Failed to deny request"))}finally{v(null)}}},k=async()=>{var W,Q;if(!(!(c!=null&&c.id)||!t)){v(c.id),C("");try{await em(t,c.id),f(null)}catch(G){C(String(((Q=(W=G==null?void 0:G.response)==null?void 0:W.data)==null?void 0:Q.detail)||(G==null?void 0:G.message)||"Failed to stop tracking"))}finally{v(null)}}};return n!=="Driver"||!B&&!c?null:m.jsx("div",{className:"fixed bottom-[calc(5rem+env(safe-area-inset-bottom))] left-0 right-0 z-[70] px-4",children:m.jsx("div",{className:"max-w-xl mx-auto",children:m.jsx("div",{className:"glass-strong rounded-3xl border-iridescent p-4 shadow-2xl",children:c?m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-11 h-11 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center",children:m.jsx(Ms,{size:18,className:"text-emerald-200"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsx("p",{className:"text-sm font-black text-white truncate",children:"Sharing live location"}),m.jsxs("button",{type:"button",onClick:k,disabled:String(g)===String(c.id),className:`px-3 py-2 rounded-2xl text-[10px] font-black uppercase tracking-widest border transition-all ${String(g)===String(c.id)?"opacity-60 cursor-not-allowed bg-slate-900/40 border-white/10 text-slate-400":"bg-rose-500/15 border-rose-500/20 text-rose-200 hover:bg-rose-500/20 active:scale-95"}`,title:"Stop sharing",children:[m.jsx(J_,{size:14,className:"inline-block mr-1 -mt-0.5"}),"Stop"]})]}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["Until ",c.expires_at?wy(c.expires_at):"--",c.awb?`  AWB ${String(c.awb).toUpperCase()}`:""]}),I?m.jsxs("p",{className:"mt-2 text-[11px] font-bold text-amber-200",children:["Location error: ",I]}):null,y?m.jsx("p",{className:"mt-2 text-[11px] font-bold text-rose-200",children:y}):null]})]}):m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-11 h-11 rounded-2xl bg-violet-500/15 border border-violet-500/20 flex items-center justify-center",children:m.jsx(Ms,{size:18,className:"text-violet-200"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-sm font-black text-white truncate",children:"Location request"}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["Expires ",B!=null&&B.expires_at?wy(B.expires_at):"--",B!=null&&B.awb?`  AWB ${String(B.awb).toUpperCase()}`:""]}),y?m.jsx("p",{className:"mt-2 text-[11px] font-bold text-rose-200",children:y}):null]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{type:"button",onClick:O,disabled:String(g)===String(B==null?void 0:B.id),className:`w-11 h-11 rounded-2xl border flex items-center justify-center transition-all ${String(g)===String(B==null?void 0:B.id)?"opacity-60 cursor-not-allowed bg-slate-900/40 border-white/10 text-slate-500":"bg-slate-900/40 border-white/10 text-slate-300 hover:bg-white/5 active:scale-95"}`,title:"Deny",children:m.jsx(va,{size:18})}),m.jsxs("button",{type:"button",onClick:z,disabled:String(g)===String(B==null?void 0:B.id),className:`px-4 h-11 rounded-2xl border text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 transition-all ${String(g)===String(B==null?void 0:B.id)?"opacity-60 cursor-not-allowed bg-emerald-500/10 border-emerald-500/20 text-emerald-200":"bg-emerald-500/15 border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95"}`,title:"Start sharing",children:[String(g)===String(B==null?void 0:B.id)?m.jsx(fn,{size:16,className:"animate-spin"}):m.jsx(JI,{size:16}),"Share"]})]})]})})})})}function rk(){const[e,t]=j.useState(!1);return m.jsxs("div",{className:"min-h-screen pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[" ",m.jsx("div",{className:"max-w-xl mx-auto",children:m.jsx(lE,{context:{openMenu:()=>t(!0)}})}),m.jsx(J5,{onOpenMenu:()=>t(!0)}),m.jsx(ek,{open:e,onClose:()=>t(!1)}),m.jsx(tk,{}),m.jsx(nk,{})]})}function ik(){const[e,t]=j.useState(null),[n,i]=j.useState(!0);j.useEffect(()=>{(async()=>{try{const v=localStorage.getItem("token"),y=await Db(v);t(y)}catch(v){console.error("Failed to fetch stats",v)}finally{i(!1)}})()},[]);const a=(g,v=2e3)=>{const[y,C]=j.useState(0);return j.useEffect(()=>{let b=0;const T=g/(v/16),I=setInterval(()=>{b+=T,b>=g?(C(g),clearInterval(I)):C(Math.floor(b))},16);return()=>clearInterval(I)},[g,v]),y},c=a((e==null?void 0:e.today_count)||0),f=a((e==null?void 0:e.total_count)||0);return n?m.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-pulse",children:[m.jsx("div",{className:"h-24 glass-strong rounded-3xl border-iridescent opacity-50"}),m.jsx("div",{className:"h-24 glass-strong rounded-3xl border-iridescent opacity-50"})]}):m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"glass-strong p-5 rounded-3xl shadow-xl shadow-brand-blue/20 border-iridescent flex flex-col justify-between relative overflow-hidden group",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-blue/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),m.jsx("div",{className:"absolute -right-4 -top-4 opacity-10 scale-150 group-hover:rotate-12 transition-transform duration-500",children:m.jsx(Eh,{size:80,className:"text-brand-blue"})}),m.jsxs("div",{className:"relative z-10 flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-1.5 bg-brand-blue/20 rounded-lg",children:m.jsx(Gd,{size:16,className:"text-brand-blue"})}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Today"})]}),m.jsxs("div",{className:"relative z-10",children:[m.jsx("span",{className:"text-3xl font-black text-white",children:c}),m.jsx("p",{className:"text-[10px] font-bold text-slate-400",children:"Success Syncs"})]})]}),m.jsxs("div",{className:"glass-strong p-5 rounded-3xl shadow-sm border-iridescent flex flex-col justify-between relative overflow-hidden group",children:[m.jsx("div",{className:"absolute -right-4 -top-4 opacity-5 scale-150 text-slate-400 group-hover:rotate-12 transition-transform duration-500",children:m.jsx(U_,{size:80})}),m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-1.5 bg-slate-700/50 rounded-lg text-slate-400",children:m.jsx(Rs,{size:16})}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"All Time"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-3xl font-black text-white",children:f}),m.jsx("p",{className:"text-[10px] font-bold text-slate-400",children:"Total Updates"})]})]})]})}var Ge;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ge||(Ge={}));var vy=new Map([[Ge.QR_CODE,"QR_CODE"],[Ge.AZTEC,"AZTEC"],[Ge.CODABAR,"CODABAR"],[Ge.CODE_39,"CODE_39"],[Ge.CODE_93,"CODE_93"],[Ge.CODE_128,"CODE_128"],[Ge.DATA_MATRIX,"DATA_MATRIX"],[Ge.MAXICODE,"MAXICODE"],[Ge.ITF,"ITF"],[Ge.EAN_13,"EAN_13"],[Ge.EAN_8,"EAN_8"],[Ge.PDF_417,"PDF_417"],[Ge.RSS_14,"RSS_14"],[Ge.RSS_EXPANDED,"RSS_EXPANDED"],[Ge.UPC_A,"UPC_A"],[Ge.UPC_E,"UPC_E"],[Ge.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),_y;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(_y||(_y={}));function sk(e){return Object.values(Ge).includes(e)}var Co;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Co||(Co={}));var Ri=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Co.SCAN_TYPE_CAMERA,Co.SCAN_TYPE_FILE],e}(),eC=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!vy.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,vy.get(t))},e}(),by=function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),hp;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(hp||(hp={}));var tC=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:hp.UNKWOWN_ERROR}},e}(),nC=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Ki(e){return typeof e>"u"||e===null}function ok(e,t,n){return e>n?n:e<t?t:e}var qa=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),qt=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),Cy=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),rC=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var i=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],c=new Set(a),f=Object.keys(t),g=0,v=f;g<v.length;g++){var y=v[g];if(c.has(y))return n.logError("".concat(y," is not supported videoConstaints."),!0),!1}return!0},e}(),fp={exports:{}};(function(e,t){(function(n,i){i(t)})(ka,function(n){function i(P){return P==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,r){P.__proto__=r}||function(P,r){for(var s in r)r.hasOwnProperty(s)&&(P[s]=r[s])};function c(P,r){a(P,r);function s(){this.constructor=P}P.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function f(P,r){var s=Object.setPrototypeOf;s?s(P,r):P.__proto__=r}function g(P,r){r===void 0&&(r=P.constructor);var s=Error.captureStackTrace;s&&s(P,r)}var v=function(P){c(r,P);function r(s){var l=this.constructor,u=P.call(this,s)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),f(u,l.prototype),g(u),u}return r}(Error);class y extends v{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}y.kind="Exception";class C extends y{}C.kind="ArgumentException";class b extends y{}b.kind="IllegalArgumentException";class T{constructor(r){if(this.binarizer=r,r===null)throw new b("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,l,u){const d=this.binarizer.getLuminanceSource().crop(r,s,l,u);return new T(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new T(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new T(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class I extends y{static getChecksumInstance(){return new I}}I.kind="ChecksumException";class F{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class R{static arraycopy(r,s,l,u,d){for(;d--;)l[u++]=r[s++]}static currentTimeMillis(){return Date.now()}}class B extends y{}B.kind="IndexOutOfBoundsException";class z extends B{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}z.kind="ArrayIndexOutOfBoundsException";class O{static fill(r,s){for(let l=0,u=r.length;l<u;l++)r[l]=s}static fillWithin(r,s,l,u){O.rangeCheck(r.length,s,l);for(let d=s;d<l;d++)r[d]=u}static rangeCheck(r,s,l){if(s>l)throw new b("fromIndex("+s+") > toIndex("+l+")");if(s<0)throw new z(s);if(l>r)throw new z(l)}static asList(...r){return r}static create(r,s,l){return Array.from({length:r}).map(d=>Array.from({length:s}).fill(l))}static createInt32Array(r,s,l){return Array.from({length:r}).map(d=>Int32Array.from({length:s}).fill(l))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let l=0,u=r.length;l<u;l++)if(r[l]!==s[l])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const l of r)s=31*s+l;return s}static fillUint8Array(r,s){for(let l=0;l!==r.length;l++)r[l]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const l=new Uint8Array(s);return l.set(r),l}return r.slice(0,s)}static copyOfRange(r,s,l){const u=l-s,d=new Int32Array(u);return R.arraycopy(r,s,d,0,u),d}static binarySearch(r,s,l){l===void 0&&(l=O.numberComparator);let u=0,d=r.length-1;for(;u<=d;){const p=d+u>>1,x=l(s,r[p]);if(x>0)u=p+1;else if(x<0)d=p-1;else return p}return-u-1}static numberComparator(r,s){return r-s}}class k{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let l=31;return s=r<<16,s!==0&&(l-=16,r=s),s=r<<8,s!==0&&(l-=8,r=s),s=r<<4,s!==0&&(l-=4,r=s),s=r<<2,s!==0&&(l-=2,r=s),l-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}k.MIN_VALUE_32_BITS=-2147483648,k.MAX_VALUE=Number.MAX_SAFE_INTEGER;class W{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=W.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=W.makeArray(r);R.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const l=this.bits;let u=Math.floor(r/32),d=l[u];d&=~((1<<(r&31))-1);const p=l.length;for(;d===0;){if(++u===p)return s;d=l[u]}const x=u*32+k.numberOfTrailingZeros(d);return x>s?s:x}getNextUnset(r){const s=this.size;if(r>=s)return s;const l=this.bits;let u=Math.floor(r/32),d=~l[u];d&=~((1<<(r&31))-1);const p=l.length;for(;d===0;){if(++u===p)return s;d=~l[u]}const x=u*32+k.numberOfTrailingZeros(d);return x>s?s:x}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new b;if(s===r)return;s--;const l=Math.floor(r/32),u=Math.floor(s/32),d=this.bits;for(let p=l;p<=u;p++){const x=p>l?0:r&31,S=(2<<(p<u?31:s&31))-(1<<x);d[p]|=S}}clear(){const r=this.bits.length,s=this.bits;for(let l=0;l<r;l++)s[l]=0}isRange(r,s,l){if(s<r||r<0||s>this.size)throw new b;if(s===r)return!0;s--;const u=Math.floor(r/32),d=Math.floor(s/32),p=this.bits;for(let x=u;x<=d;x++){const _=x>u?0:r&31,E=(2<<(x<d?31:s&31))-(1<<_)&4294967295;if((p[x]&E)!==(l?E:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new b("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let l=s;l>0;l--)this.appendBit((r>>l-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let l=0;l<s;l++)this.appendBit(r.get(l))}xor(r){if(this.size!==r.size)throw new b("Sizes don't match");const s=this.bits;for(let l=0,u=s.length;l<u;l++)s[l]^=r.bits[l]}toBytes(r,s,l,u){for(let d=0;d<u;d++){let p=0;for(let x=0;x<8;x++)this.get(r)&&(p|=1<<7-x),r++;s[l+d]=p}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),l=s+1,u=this.bits;for(let d=0;d<l;d++){let p=u[d];p=p>>1&1431655765|(p&1431655765)<<1,p=p>>2&858993459|(p&858993459)<<2,p=p>>4&252645135|(p&252645135)<<4,p=p>>8&16711935|(p&16711935)<<8,p=p>>16&65535|(p&65535)<<16,r[s-d]=p}if(this.size!==l*32){const d=l*32-this.size;let p=r[0]>>>d;for(let x=1;x<l;x++){const _=r[x];p|=_<<32-d,r[x-1]=p,p=_>>>d}r[l-1]=p}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof W))return!1;const s=r;return this.size===s.size&&O.equals(this.bits,s.bits)}hashCode(){return 31*this.size+O.hashCode(this.bits)}toString(){let r="";for(let s=0,l=this.size;s<l;s++)s&7||(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new W(this.size,this.bits.slice())}}var Q;(function(P){P[P.OTHER=0]="OTHER",P[P.PURE_BARCODE=1]="PURE_BARCODE",P[P.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",P[P.TRY_HARDER=3]="TRY_HARDER",P[P.CHARACTER_SET=4]="CHARACTER_SET",P[P.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",P[P.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",P[P.ASSUME_GS1=7]="ASSUME_GS1",P[P.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",P[P.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",P[P.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Q||(Q={}));var G=Q;class H extends y{static getFormatInstance(){return new H}}H.kind="FormatException";var q;(function(P){P[P.Cp437=0]="Cp437",P[P.ISO8859_1=1]="ISO8859_1",P[P.ISO8859_2=2]="ISO8859_2",P[P.ISO8859_3=3]="ISO8859_3",P[P.ISO8859_4=4]="ISO8859_4",P[P.ISO8859_5=5]="ISO8859_5",P[P.ISO8859_6=6]="ISO8859_6",P[P.ISO8859_7=7]="ISO8859_7",P[P.ISO8859_8=8]="ISO8859_8",P[P.ISO8859_9=9]="ISO8859_9",P[P.ISO8859_10=10]="ISO8859_10",P[P.ISO8859_11=11]="ISO8859_11",P[P.ISO8859_13=12]="ISO8859_13",P[P.ISO8859_14=13]="ISO8859_14",P[P.ISO8859_15=14]="ISO8859_15",P[P.ISO8859_16=15]="ISO8859_16",P[P.SJIS=16]="SJIS",P[P.Cp1250=17]="Cp1250",P[P.Cp1251=18]="Cp1251",P[P.Cp1252=19]="Cp1252",P[P.Cp1256=20]="Cp1256",P[P.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",P[P.UTF8=22]="UTF8",P[P.ASCII=23]="ASCII",P[P.Big5=24]="Big5",P[P.GB18030=25]="GB18030",P[P.EUC_KR=26]="EUC_KR"})(q||(q={}));class M{constructor(r,s,l,...u){this.valueIdentifier=r,this.name=l,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=u,M.VALUE_IDENTIFIER_TO_ECI.set(r,this),M.NAME_TO_ECI.set(l,this);const d=this.values;for(let p=0,x=d.length;p!==x;p++){const _=d[p];M.VALUES_TO_ECI.set(_,this)}for(const p of u)M.NAME_TO_ECI.set(p,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new H("incorect value");const s=M.VALUES_TO_ECI.get(r);if(s===void 0)throw new H("incorect value");return s}static getCharacterSetECIByName(r){const s=M.NAME_TO_ECI.get(r);if(s===void 0)throw new H("incorect value");return s}equals(r){if(!(r instanceof M))return!1;const s=r;return this.getName()===s.getName()}}M.VALUE_IDENTIFIER_TO_ECI=new Map,M.VALUES_TO_ECI=new Map,M.NAME_TO_ECI=new Map,M.Cp437=new M(q.Cp437,Int32Array.from([0,2]),"Cp437"),M.ISO8859_1=new M(q.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),M.ISO8859_2=new M(q.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),M.ISO8859_3=new M(q.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),M.ISO8859_4=new M(q.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),M.ISO8859_5=new M(q.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),M.ISO8859_6=new M(q.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),M.ISO8859_7=new M(q.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),M.ISO8859_8=new M(q.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),M.ISO8859_9=new M(q.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),M.ISO8859_10=new M(q.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),M.ISO8859_11=new M(q.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),M.ISO8859_13=new M(q.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),M.ISO8859_14=new M(q.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),M.ISO8859_15=new M(q.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),M.ISO8859_16=new M(q.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),M.SJIS=new M(q.SJIS,20,"SJIS","Shift_JIS"),M.Cp1250=new M(q.Cp1250,21,"Cp1250","windows-1250"),M.Cp1251=new M(q.Cp1251,22,"Cp1251","windows-1251"),M.Cp1252=new M(q.Cp1252,23,"Cp1252","windows-1252"),M.Cp1256=new M(q.Cp1256,24,"Cp1256","windows-1256"),M.UnicodeBigUnmarked=new M(q.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),M.UTF8=new M(q.UTF8,26,"UTF8","UTF-8"),M.ASCII=new M(q.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),M.Big5=new M(q.Big5,28,"Big5"),M.GB18030=new M(q.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),M.EUC_KR=new M(q.EUC_KR,30,"EUC_KR","EUC-KR");class X extends y{}X.kind="UnsupportedOperationException";class ie{static decode(r,s){const l=this.encodingName(s);return this.customDecoder?this.customDecoder(r,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(r,l):new TextDecoder(l).decode(r)}static shouldDecodeOnFallback(r){return!ie.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const l=this.encodingName(s);return this.customEncoder?this.customEncoder(r,l):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof M?r:M.getCharacterSetECIByName(r)}static decodeFallback(r,s){const l=this.encodingCharacterSet(s);if(ie.isDecodeFallbackSupported(l)){let u="";for(let d=0,p=r.length;d<p;d++){let x=r[d].toString(16);x.length<2&&(x="0"+x),u+="%"+x}return decodeURIComponent(u)}if(l.equals(M.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new X(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(M.UTF8)||r.equals(M.ISO8859_1)||r.equals(M.ASCII)}static encodeFallback(r){const l=btoa(unescape(encodeURIComponent(r))).split(""),u=[];for(let d=0;d<l.length;d++)u.push(l[d].charCodeAt(0));return new Uint8Array(u)}}class se{static castAsNonUtf8Char(r,s=null){const l=s?s.getName():this.ISO88591;return ie.decode(new Uint8Array([r]),l)}static guessEncoding(r,s){if(s!=null&&s.get(G.CHARACTER_SET)!==void 0)return s.get(G.CHARACTER_SET).toString();const l=r.length;let u=!0,d=!0,p=!0,x=0,_=0,S=0,E=0,D=0,U=0,Y=0,J=0,te=0,le=0,he=0;const Ne=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let Te=0;Te<l&&(u||d||p);Te++){const Ae=r[Te]&255;p&&(x>0?Ae&128?x--:p=!1:Ae&128&&(Ae&64?(x++,Ae&32?(x++,Ae&16?(x++,Ae&8?p=!1:E++):S++):_++):p=!1)),u&&(Ae>127&&Ae<160?u=!1:Ae>159&&(Ae<192||Ae===215||Ae===247)&&he++),d&&(D>0?Ae<64||Ae===127||Ae>252?d=!1:D--:Ae===128||Ae===160||Ae>239?d=!1:Ae>160&&Ae<224?(U++,J=0,Y++,Y>te&&(te=Y)):Ae>127?(D++,Y=0,J++,J>le&&(le=J)):(Y=0,J=0))}return p&&x>0&&(p=!1),d&&D>0&&(d=!1),p&&(Ne||_+S+E>0)?se.UTF8:d&&(se.ASSUME_SHIFT_JIS||te>=3||le>=3)?se.SHIFT_JIS:u&&d?te===2&&U===2||he*10>=l?se.SHIFT_JIS:se.ISO88591:u?se.ISO88591:d?se.SHIFT_JIS:p?se.UTF8:se.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let l=-1;function u(p,x,_,S,E,D){if(p==="%%")return"%";if(s[++l]===void 0)return;p=S?parseInt(S.substr(1)):void 0;let U=E?parseInt(E.substr(1)):void 0,Y;switch(D){case"s":Y=s[l];break;case"c":Y=s[l][0];break;case"f":Y=parseFloat(s[l]).toFixed(p);break;case"p":Y=parseFloat(s[l]).toPrecision(p);break;case"e":Y=parseFloat(s[l]).toExponential(p);break;case"x":Y=parseInt(s[l]).toString(U||16);break;case"d":Y=parseFloat(parseInt(s[l],U||10).toPrecision(p)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString(U);let J=parseInt(_),te=_&&_[0]+""=="0"?"0":" ";for(;Y.length<J;)Y=x!==void 0?Y+te:te+Y;return Y}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,u)}static getBytes(r,s){return ie.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}se.SHIFT_JIS=M.SJIS.getName(),se.GB2312="GB2312",se.ISO88591=M.ISO8859_1.getName(),se.EUC_JP="EUC_JP",se.UTF8=M.UTF8.getName(),se.PLATFORM_DEFAULT_ENCODING=se.UTF8,se.ASSUME_SHIFT_JIS=!1;class ve{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=se.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,l){for(let u=s;s<s+l;u++)this.append(r[u]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class Ee{constructor(r,s,l,u){if(this.width=r,this.height=s,this.rowSize=l,this.bits=u,s==null&&(s=r),this.height=s,r<1||s<1)throw new b("Both dimensions must be greater than 0");l==null&&(l=Math.floor((r+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,l=r[0].length,u=new Ee(l,s);for(let d=0;d<s;d++){const p=r[d];for(let x=0;x<l;x++)p[x]&&u.set(x,d)}return u}static parseFromString(r,s,l){if(r===null)throw new b("stringRepresentation cannot be null");const u=new Array(r.length);let d=0,p=0,x=-1,_=0,S=0;for(;S<r.length;)if(r.charAt(S)===`
`||r.charAt(S)==="\r"){if(d>p){if(x===-1)x=d-p;else if(d-p!==x)throw new b("row lengths do not match");p=d,_++}S++}else if(r.substring(S,S+s.length)===s)S+=s.length,u[d]=!0,d++;else if(r.substring(S,S+l.length)===l)S+=l.length,u[d]=!1,d++;else throw new b("illegal character encountered: "+r.substring(S));if(d>p){if(x===-1)x=d-p;else if(d-p!==x)throw new b("row lengths do not match");_++}const E=new Ee(x,_);for(let D=0;D<d;D++)u[D]&&E.set(Math.floor(D%x),Math.floor(D/x));return E}get(r,s){const l=s*this.rowSize+Math.floor(r/32);return(this.bits[l]>>>(r&31)&1)!==0}set(r,s){const l=s*this.rowSize+Math.floor(r/32);this.bits[l]|=1<<(r&31)&4294967295}unset(r,s){const l=s*this.rowSize+Math.floor(r/32);this.bits[l]&=~(1<<(r&31)&4294967295)}flip(r,s){const l=s*this.rowSize+Math.floor(r/32);this.bits[l]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new b("input matrix dimensions do not match");const s=new W(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let d=0,p=this.height;d<p;d++){const x=d*l,_=r.getRow(d,s).getBitArray();for(let S=0;S<l;S++)u[x+S]^=_[S]}}clear(){const r=this.bits,s=r.length;for(let l=0;l<s;l++)r[l]=0}setRegion(r,s,l,u){if(s<0||r<0)throw new b("Left and top must be nonnegative");if(u<1||l<1)throw new b("Height and width must be at least 1");const d=r+l,p=s+u;if(p>this.height||d>this.width)throw new b("The region must fit inside the matrix");const x=this.rowSize,_=this.bits;for(let S=s;S<p;S++){const E=S*x;for(let D=r;D<d;D++)_[E+Math.floor(D/32)]|=1<<(D&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new W(this.width):s.clear();const l=this.rowSize,u=this.bits,d=r*l;for(let p=0;p<l;p++)s.setBulk(p*32,u[d+p]);return s}setRow(r,s){R.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let l=new W(r),u=new W(r);for(let d=0,p=Math.floor((s+1)/2);d<p;d++)l=this.getRow(d,l),u=this.getRow(s-1-d,u),l.reverse(),u.reverse(),this.setRow(d,u),this.setRow(s-1-d,l)}getEnclosingRectangle(){const r=this.width,s=this.height,l=this.rowSize,u=this.bits;let d=r,p=s,x=-1,_=-1;for(let S=0;S<s;S++)for(let E=0;E<l;E++){const D=u[S*l+E];if(D!==0){if(S<p&&(p=S),S>_&&(_=S),E*32<d){let U=0;for(;!(D<<31-U&4294967295);)U++;E*32+U<d&&(d=E*32+U)}if(E*32+31>x){let U=31;for(;!(D>>>U);)U--;E*32+U>x&&(x=E*32+U)}}}return x<d||_<p?null:Int32Array.from([d,p,x-d+1,_-p+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let l=0;for(;l<s.length&&s[l]===0;)l++;if(l===s.length)return null;const u=l/r;let d=l%r*32;const p=s[l];let x=0;for(;!(p<<31-x&4294967295);)x++;return d+=x,Int32Array.from([d,u])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let l=s.length-1;for(;l>=0&&s[l]===0;)l--;if(l<0)return null;const u=Math.floor(l/r);let d=Math.floor(l%r)*32;const p=s[l];let x=31;for(;!(p>>>x);)x--;return d+=x,Int32Array.from([d,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof Ee))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&O.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+O.hashCode(this.bits),r}toString(r="X ",s="  ",l=`
`){return this.buildToString(r,s,l)}buildToString(r,s,l){let u=new ve;for(let d=0,p=this.height;d<p;d++){for(let x=0,_=this.width;x<_;x++)u.append(this.get(x,d)?r:s);u.append(l)}return u.toString()}clone(){return new Ee(this.width,this.height,this.rowSize,this.bits.slice())}}class ae extends y{static getNotFoundInstance(){return new ae}}ae.kind="NotFoundException";class de extends F{constructor(r){super(r),this.luminances=de.EMPTY,this.buckets=new Int32Array(de.LUMINANCE_BUCKETS)}getBlackRow(r,s){const l=this.getLuminanceSource(),u=l.getWidth();s==null||s.getSize()<u?s=new W(u):s.clear(),this.initArrays(u);const d=l.getRow(r,this.luminances),p=this.buckets;for(let _=0;_<u;_++)p[(d[_]&255)>>de.LUMINANCE_SHIFT]++;const x=de.estimateBlackPoint(p);if(u<3)for(let _=0;_<u;_++)(d[_]&255)<x&&s.set(_);else{let _=d[0]&255,S=d[1]&255;for(let E=1;E<u-1;E++){const D=d[E+1]&255;(S*4-_-D)/2<x&&s.set(E),_=S,S=D}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),l=r.getHeight(),u=new Ee(s,l);this.initArrays(s);const d=this.buckets;for(let _=1;_<5;_++){const S=Math.floor(l*_/5),E=r.getRow(S,this.luminances),D=Math.floor(s*4/5);for(let U=Math.floor(s/5);U<D;U++){const Y=E[U]&255;d[Y>>de.LUMINANCE_SHIFT]++}}const p=de.estimateBlackPoint(d),x=r.getMatrix();for(let _=0;_<l;_++){const S=_*s;for(let E=0;E<s;E++)(x[S+E]&255)<p&&u.set(E,_)}return u}createBinarizer(r){return new de(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let l=0;l<de.LUMINANCE_BUCKETS;l++)s[l]=0}static estimateBlackPoint(r){const s=r.length;let l=0,u=0,d=0;for(let E=0;E<s;E++)r[E]>d&&(u=E,d=r[E]),r[E]>l&&(l=r[E]);let p=0,x=0;for(let E=0;E<s;E++){const D=E-u,U=r[E]*D*D;U>x&&(p=E,x=U)}if(u>p){const E=u;u=p,p=E}if(p-u<=s/16)throw new ae;let _=p-1,S=-1;for(let E=p-1;E>u;E--){const D=E-u,U=D*D*(p-E)*(l-r[E]);U>S&&(_=E,S=U)}return _<<de.LUMINANCE_SHIFT}}de.LUMINANCE_BITS=5,de.LUMINANCE_SHIFT=8-de.LUMINANCE_BITS,de.LUMINANCE_BUCKETS=1<<de.LUMINANCE_BITS,de.EMPTY=Uint8ClampedArray.from([0]);class ke extends de{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),l=r.getHeight();if(s>=ke.MINIMUM_DIMENSION&&l>=ke.MINIMUM_DIMENSION){const u=r.getMatrix();let d=s>>ke.BLOCK_SIZE_POWER;s&ke.BLOCK_SIZE_MASK&&d++;let p=l>>ke.BLOCK_SIZE_POWER;l&ke.BLOCK_SIZE_MASK&&p++;const x=ke.calculateBlackPoints(u,d,p,s,l),_=new Ee(s,l);ke.calculateThresholdForBlock(u,d,p,s,l,x,_),this.matrix=_}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new ke(r)}static calculateThresholdForBlock(r,s,l,u,d,p,x){const _=d-ke.BLOCK_SIZE,S=u-ke.BLOCK_SIZE;for(let E=0;E<l;E++){let D=E<<ke.BLOCK_SIZE_POWER;D>_&&(D=_);const U=ke.cap(E,2,l-3);for(let Y=0;Y<s;Y++){let J=Y<<ke.BLOCK_SIZE_POWER;J>S&&(J=S);const te=ke.cap(Y,2,s-3);let le=0;for(let Ne=-2;Ne<=2;Ne++){const Te=p[U+Ne];le+=Te[te-2]+Te[te-1]+Te[te]+Te[te+1]+Te[te+2]}const he=le/25;ke.thresholdBlock(r,J,D,he,u,x)}}}static cap(r,s,l){return r<s?s:r>l?l:r}static thresholdBlock(r,s,l,u,d,p){for(let x=0,_=l*d+s;x<ke.BLOCK_SIZE;x++,_+=d)for(let S=0;S<ke.BLOCK_SIZE;S++)(r[_+S]&255)<=u&&p.set(s+S,l+x)}static calculateBlackPoints(r,s,l,u,d){const p=d-ke.BLOCK_SIZE,x=u-ke.BLOCK_SIZE,_=new Array(l);for(let S=0;S<l;S++){_[S]=new Int32Array(s);let E=S<<ke.BLOCK_SIZE_POWER;E>p&&(E=p);for(let D=0;D<s;D++){let U=D<<ke.BLOCK_SIZE_POWER;U>x&&(U=x);let Y=0,J=255,te=0;for(let he=0,Ne=E*u+U;he<ke.BLOCK_SIZE;he++,Ne+=u){for(let Te=0;Te<ke.BLOCK_SIZE;Te++){const Ae=r[Ne+Te]&255;Y+=Ae,Ae<J&&(J=Ae),Ae>te&&(te=Ae)}if(te-J>ke.MIN_DYNAMIC_RANGE)for(he++,Ne+=u;he<ke.BLOCK_SIZE;he++,Ne+=u)for(let Te=0;Te<ke.BLOCK_SIZE;Te++)Y+=r[Ne+Te]&255}let le=Y>>ke.BLOCK_SIZE_POWER*2;if(te-J<=ke.MIN_DYNAMIC_RANGE&&(le=J/2,S>0&&D>0)){const he=(_[S-1][D]+2*_[S][D-1]+_[S-1][D-1])/4;J<he&&(le=he)}_[S][D]=le}}return _}}ke.BLOCK_SIZE_POWER=3,ke.BLOCK_SIZE=1<<ke.BLOCK_SIZE_POWER,ke.BLOCK_SIZE_MASK=ke.BLOCK_SIZE-1,ke.MINIMUM_DIMENSION=ke.BLOCK_SIZE*5,ke.MIN_DYNAMIC_RANGE=24;class ne{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,l,u){throw new X("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new X("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new X("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new ve;for(let l=0;l<this.height;l++){const u=this.getRow(l,r);for(let d=0;d<this.width;d++){const p=u[d]&255;let x;p<64?x="#":p<128?x="+":p<192?x=".":x=" ",s.append(x)}s.append(`
`)}return s.toString()}}class Se extends ne{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const l=this.delegate.getRow(r,s),u=this.getWidth();for(let d=0;d<u;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(s);for(let u=0;u<s;u++)l[u]=255-(r[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,l,u){return new Se(this.delegate.crop(r,s,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Se(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Se(this.delegate.rotateCounterClockwise45())}}class ye extends ne{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=ye.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return ye.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,l){const u=new Uint8ClampedArray(s*l);for(let d=0,p=0,x=r.length;d<x;d+=4,p++){let _;if(r[d+3]===0)_=255;else{const E=r[d],D=r[d+1],U=r[d+2];_=306*E+601*D+117*U+512>>10}u[p]=_}return u}getRow(r,s){if(r<0||r>=this.getHeight())throw new b("Requested row is outside the image: "+r);const l=this.getWidth(),u=r*l;return s===null?s=this.buffer.slice(u,u+l):(s.length<l&&(s=new Uint8ClampedArray(l)),s.set(this.buffer.slice(u,u+l))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,l,u){return super.crop(r,s,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),l=s.getContext("2d"),u=r*ye.DEGREE_TO_RADIANS,d=this.canvas.width,p=this.canvas.height,x=Math.ceil(Math.abs(Math.cos(u))*d+Math.abs(Math.sin(u))*p),_=Math.ceil(Math.abs(Math.sin(u))*d+Math.abs(Math.cos(u))*p);return s.width=x,s.height=_,l.translate(x/2,_/2),l.rotate(u),l.drawImage(this.canvas,d/-2,p/-2),this.buffer=ye.makeBufferFromCanvasImageData(s),this}invert(){return new Se(this)}}ye.DEGREE_TO_RADIANS=Math.PI/180;class ge{constructor(r,s,l){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Me=(globalThis||ka||self||window||void 0)&&(globalThis||ka||self||window||void 0).__awaiter||function(P,r,s,l){function u(d){return d instanceof s?d:new s(function(p){p(d)})}return new(s||(s=Promise))(function(d,p){function x(E){try{S(l.next(E))}catch(D){p(D)}}function _(E){try{S(l.throw(E))}catch(D){p(D)}}function S(E){E.done?d(E.value):u(E.value).then(x,_)}S((l=l.apply(P,r||[])).next())})};class qe{constructor(r,s=500,l){this.reader=r,this.timeBetweenScansMillis=s,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Me(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const l of r){const u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;const d=l.deviceId||l.id,p=l.label||`Video device ${s.length+1}`,x=l.groupId,_={deviceId:d,label:p,kind:u,groupId:x};s.push(_)}return s})}getVideoInputDevices(){return Me(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new ge(s.deviceId,s.label))})}findDeviceById(r){return Me(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(l=>l.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return Me(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return Me(this,void 0,void 0,function*(){this.reset();let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeOnceFromConstraints(u,s)})}decodeOnceFromConstraints(r,s){return Me(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(l,s)})}decodeOnceFromStream(r,s){return Me(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(r,s,l){return Me(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,l)})}decodeFromVideoDevice(r,s,l){return Me(this,void 0,void 0,function*(){let u;r?u={deviceId:{exact:r}}:u={facingMode:"environment"};const d={video:u};return yield this.decodeFromConstraints(d,s,l)})}decodeFromConstraints(r,s,l){return Me(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(u,s,l)})}decodeFromStream(r,s,l){return Me(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return Me(this,void 0,void 0,function*(){const l=this.prepareVideoElement(s);return this.addVideoSource(l,r),this.videoElement=l,this.stream=r,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(r){return new Promise((s,l)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Me(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const l=document.getElementById(r);if(!l)throw new C(`element with id '${r}' not found`);if(l.nodeName.toLowerCase()!==s.toLowerCase())throw new C(`element with id '${r}' must be an ${s} element`);return l}decodeFromImage(r,s){if(!r&&!s)throw new C("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new C("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,l){if(r===void 0&&s===void 0)throw new C("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,l):this.decodeFromVideoElementContinuously(r,l)}decodeFromImageElement(r){if(!r)throw new C("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let l;return this.isImageLoaded(s)?l=this.decodeOnce(s,!1,!0):l=this._decodeOnLoadImage(s),l}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const l=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(l,s)}_decodeFromVideoElementSetup(r){if(!r)throw new C("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new C("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const l=this._decodeOnLoadImage(s);return s.src=r,l}decodeFromVideoUrl(r){if(!r)throw new C("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),l=this.decodeFromVideoElement(s);return s.src=r,l}decodeFromVideoUrlContinuously(r,s){if(!r)throw new C("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,s);return l.src=r,u}_decodeOnLoadImage(r){return new Promise((s,l)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,l),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Me(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return Me(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,l=!0){this._stopAsyncDecode=!1;const u=(d,p)=>{if(this._stopAsyncDecode){p(new ae("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const x=this.decode(r);d(x)}catch(x){const _=s&&x instanceof ae,E=(x instanceof I||x instanceof H)&&l;if(_||E)return setTimeout(u,this._timeBetweenDecodingAttempts,d,p);p(x)}};return new Promise((d,p)=>u(d,p))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(r);s(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){s(null,u);const d=u instanceof I||u instanceof H,p=u instanceof ae;(d||p)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,l){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,l=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),l=new ye(s),u=new ke(l);return new T(u)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let l,u;return typeof r<"u"&&(r instanceof HTMLVideoElement?(l=r.videoWidth,u=r.videoHeight):r instanceof HTMLImageElement&&(l=r.naturalWidth||r.width,u=r.naturalHeight||r.height)),s.style.width=l+"px",s.style.height=u+"px",s.width=l,s.height=u,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class De{constructor(r,s,l=s==null?0:8*s.length,u,d,p=R.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=l,this.resultPoints=u,this.format=d,this.timestamp=p,this.text=r,this.rawBytes=s,l==null?this.numBits=s==null?0:8*s.length:this.numBits=l,this.resultPoints=u,this.format=d,this.resultMetadata=null,p==null?this.timestamp=R.currentTimeMillis():this.timestamp=p}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const l=new Array(s.length+r.length);R.arraycopy(s,0,l,0,s.length),R.arraycopy(r,0,l,s.length,r.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ee;(function(P){P[P.AZTEC=0]="AZTEC",P[P.CODABAR=1]="CODABAR",P[P.CODE_39=2]="CODE_39",P[P.CODE_93=3]="CODE_93",P[P.CODE_128=4]="CODE_128",P[P.DATA_MATRIX=5]="DATA_MATRIX",P[P.EAN_8=6]="EAN_8",P[P.EAN_13=7]="EAN_13",P[P.ITF=8]="ITF",P[P.MAXICODE=9]="MAXICODE",P[P.PDF_417=10]="PDF_417",P[P.QR_CODE=11]="QR_CODE",P[P.RSS_14=12]="RSS_14",P[P.RSS_EXPANDED=13]="RSS_EXPANDED",P[P.UPC_A=14]="UPC_A",P[P.UPC_E=15]="UPC_E",P[P.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ee||(ee={}));var oe=ee,Le;(function(P){P[P.OTHER=0]="OTHER",P[P.ORIENTATION=1]="ORIENTATION",P[P.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",P[P.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",P[P.ISSUE_NUMBER=4]="ISSUE_NUMBER",P[P.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",P[P.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",P[P.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",P[P.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",P[P.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",P[P.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Le||(Le={}));var at=Le;class Nt{constructor(r,s,l,u,d=-1,p=-1){this.rawBytes=r,this.text=s,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=p,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class tt{exp(r){return this.expTable[r]}log(r){if(r===0)throw new b;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class ot{constructor(r,s){if(s.length===0)throw new b;this.field=r;const l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),R.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let l;if(r===1){l=0;for(let p=0,x=s.length;p!==x;p++){const _=s[p];l=tt.addOrSubtract(l,_)}return l}l=s[0];const u=s.length,d=this.field;for(let p=1;p<u;p++)l=tt.addOrSubtract(d.multiply(r,l),s[p]);return l}addOrSubtract(r){if(!this.field.equals(r.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,l=r.coefficients;if(s.length>l.length){const p=s;s=l,l=p}let u=new Int32Array(l.length);const d=l.length-s.length;R.arraycopy(l,0,u,0,d);for(let p=d;p<l.length;p++)u[p]=tt.addOrSubtract(s[p-d],l[p]);return new ot(this.field,u)}multiply(r){if(!this.field.equals(r.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,l=s.length,u=r.coefficients,d=u.length,p=new Int32Array(l+d-1),x=this.field;for(let _=0;_<l;_++){const S=s[_];for(let E=0;E<d;E++)p[_+E]=tt.addOrSubtract(p[_+E],x.multiply(S,u[E]))}return new ot(x,p)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,l=this.field,u=new Int32Array(s),d=this.coefficients;for(let p=0;p<s;p++)u[p]=l.multiply(d[p],r);return new ot(l,u)}multiplyByMonomial(r,s){if(r<0)throw new b;if(s===0)return this.field.getZero();const l=this.coefficients,u=l.length,d=new Int32Array(u+r),p=this.field;for(let x=0;x<u;x++)d[x]=p.multiply(l[x],s);return new ot(p,d)}divide(r){if(!this.field.equals(r.field))throw new b("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new b("Divide by 0");const s=this.field;let l=s.getZero(),u=this;const d=r.getCoefficient(r.getDegree()),p=s.inverse(d);for(;u.getDegree()>=r.getDegree()&&!u.isZero();){const x=u.getDegree()-r.getDegree(),_=s.multiply(u.getCoefficient(u.getDegree()),p),S=r.multiplyByMonomial(x,_),E=s.buildMonomial(x,_);l=l.addOrSubtract(E),u=u.addOrSubtract(S)}return[l,u]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);if(l!==0){if(l<0?(r+=" - ",l=-l):r.length>0&&(r+=" + "),s===0||l!==1){const u=this.field.log(l);u===0?r+="1":u===1?r+="a":(r+="a^",r+=u)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class yt extends y{}yt.kind="ArithmeticException";class Ze extends tt{constructor(r,s,l){super(),this.primitive=r,this.size=s,this.generatorBase=l;const u=new Int32Array(s);let d=1;for(let x=0;x<s;x++)u[x]=d,d*=2,d>=s&&(d^=r,d&=s-1);this.expTable=u;const p=new Int32Array(s);for(let x=0;x<s-1;x++)p[u[x]]=x;this.logTable=p,this.zero=new ot(this,Int32Array.from([0])),this.one=new ot(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new b;if(s===0)return this.zero;const l=new Int32Array(r+1);return l[0]=s,new ot(this,l)}inverse(r){if(r===0)throw new yt;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+k.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}Ze.AZTEC_DATA_12=new Ze(4201,4096,1),Ze.AZTEC_DATA_10=new Ze(1033,1024,1),Ze.AZTEC_DATA_6=new Ze(67,64,1),Ze.AZTEC_PARAM=new Ze(19,16,1),Ze.QR_CODE_FIELD_256=new Ze(285,256,0),Ze.DATA_MATRIX_FIELD_256=new Ze(301,256,1),Ze.AZTEC_DATA_8=Ze.DATA_MATRIX_FIELD_256,Ze.MAXICODE_FIELD_64=Ze.AZTEC_DATA_6;class Ht extends y{}Ht.kind="ReedSolomonException";class Rt extends y{}Rt.kind="IllegalStateException";class Wt{constructor(r){this.field=r}decode(r,s){const l=this.field,u=new ot(l,r),d=new Int32Array(s);let p=!0;for(let Y=0;Y<s;Y++){const J=u.evaluateAt(l.exp(Y+l.getGeneratorBase()));d[d.length-1-Y]=J,J!==0&&(p=!1)}if(p)return;const x=new ot(l,d),_=this.runEuclideanAlgorithm(l.buildMonomial(s,1),x,s),S=_[0],E=_[1],D=this.findErrorLocations(S),U=this.findErrorMagnitudes(E,D);for(let Y=0;Y<D.length;Y++){const J=r.length-1-l.log(D[Y]);if(J<0)throw new Ht("Bad error location");r[J]=Ze.addOrSubtract(r[J],U[Y])}}runEuclideanAlgorithm(r,s,l){if(r.getDegree()<s.getDegree()){const Y=r;r=s,s=Y}const u=this.field;let d=r,p=s,x=u.getZero(),_=u.getOne();for(;p.getDegree()>=(l/2|0);){let Y=d,J=x;if(d=p,x=_,d.isZero())throw new Ht("r_{i-1} was zero");p=Y;let te=u.getZero();const le=d.getCoefficient(d.getDegree()),he=u.inverse(le);for(;p.getDegree()>=d.getDegree()&&!p.isZero();){const Ne=p.getDegree()-d.getDegree(),Te=u.multiply(p.getCoefficient(p.getDegree()),he);te=te.addOrSubtract(u.buildMonomial(Ne,Te)),p=p.addOrSubtract(d.multiplyByMonomial(Ne,Te))}if(_=te.multiply(x).addOrSubtract(J),p.getDegree()>=d.getDegree())throw new Rt("Division algorithm failed to reduce polynomial?")}const S=_.getCoefficient(0);if(S===0)throw new Ht("sigmaTilde(0) was zero");const E=u.inverse(S),D=_.multiplyScalar(E),U=p.multiplyScalar(E);return[D,U]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const l=new Int32Array(s);let u=0;const d=this.field;for(let p=1;p<d.getSize()&&u<s;p++)r.evaluateAt(p)===0&&(l[u]=d.inverse(p),u++);if(u!==s)throw new Ht("Error locator degree does not match number of roots");return l}findErrorMagnitudes(r,s){const l=s.length,u=new Int32Array(l),d=this.field;for(let p=0;p<l;p++){const x=d.inverse(s[p]);let _=1;for(let S=0;S<l;S++)if(p!==S){const E=d.multiply(s[S],x),D=E&1?E&-2:E|1;_=d.multiply(_,D)}u[p]=d.multiply(r.evaluateAt(x),d.inverse(_)),d.getGeneratorBase()!==0&&(u[p]=d.multiply(u[p],x))}return u}}var dt;(function(P){P[P.UPPER=0]="UPPER",P[P.LOWER=1]="LOWER",P[P.MIXED=2]="MIXED",P[P.DIGIT=3]="DIGIT",P[P.PUNCT=4]="PUNCT",P[P.BINARY=5]="BINARY"})(dt||(dt={}));class gt{decode(r){this.ddata=r;let s=r.getBits(),l=this.extractBits(s),u=this.correctBits(l),d=gt.convertBoolArrayToByteArray(u),p=gt.getEncodedData(u),x=new Nt(d,p,null,null);return x.setNumBits(u.length),x}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,l=dt.UPPER,u=dt.UPPER,d="",p=0;for(;p<s;)if(u===dt.BINARY){if(s-p<5)break;let x=gt.readCode(r,p,5);if(p+=5,x===0){if(s-p<11)break;x=gt.readCode(r,p,11)+31,p+=11}for(let _=0;_<x;_++){if(s-p<8){p=s;break}const S=gt.readCode(r,p,8);d+=se.castAsNonUtf8Char(S),p+=8}u=l}else{let x=u===dt.DIGIT?4:5;if(s-p<x)break;let _=gt.readCode(r,p,x);p+=x;let S=gt.getCharacter(u,_);S.startsWith("CTRL_")?(l=u,u=gt.getTable(S.charAt(5)),S.charAt(6)==="L"&&(l=u)):(d+=S,u=l)}return d}static getTable(r){switch(r){case"L":return dt.LOWER;case"P":return dt.PUNCT;case"M":return dt.MIXED;case"D":return dt.DIGIT;case"B":return dt.BINARY;case"U":default:return dt.UPPER}}static getCharacter(r,s){switch(r){case dt.UPPER:return gt.UPPER_TABLE[s];case dt.LOWER:return gt.LOWER_TABLE[s];case dt.MIXED:return gt.MIXED_TABLE[s];case dt.PUNCT:return gt.PUNCT_TABLE[s];case dt.DIGIT:return gt.DIGIT_TABLE[s];default:throw new Rt("Bad table")}}correctBits(r){let s,l;this.ddata.getNbLayers()<=2?(l=6,s=Ze.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,s=Ze.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,s=Ze.AZTEC_DATA_10):(l=12,s=Ze.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),d=r.length/l;if(d<u)throw new H;let p=r.length%l,x=new Int32Array(d);for(let U=0;U<d;U++,p+=l)x[U]=gt.readCode(r,p,l);try{new Wt(s).decode(x,d-u)}catch(U){throw new H(U)}let _=(1<<l)-1,S=0;for(let U=0;U<u;U++){let Y=x[U];if(Y===0||Y===_)throw new H;(Y===1||Y===_-1)&&S++}let E=new Array(u*l-S),D=0;for(let U=0;U<u;U++){let Y=x[U];if(Y===1||Y===_-1)E.fill(Y>1,D,D+l-1),D+=l-1;else for(let J=l-1;J>=0;--J)E[D++]=(Y&1<<J)!==0}return E}extractBits(r){let s=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(s?11:14)+l*4,d=new Int32Array(u),p=new Array(this.totalBitsInLayer(l,s));if(s)for(let x=0;x<d.length;x++)d[x]=x;else{let x=u+1+2*k.truncDivision(k.truncDivision(u,2)-1,15),_=u/2,S=k.truncDivision(x,2);for(let E=0;E<_;E++){let D=E+k.truncDivision(E,15);d[_-E-1]=S-D-1,d[_+E]=S+D+1}}for(let x=0,_=0;x<l;x++){let S=(l-x)*4+(s?9:12),E=x*2,D=u-1-E;for(let U=0;U<S;U++){let Y=U*2;for(let J=0;J<2;J++)p[_+Y+J]=r.get(d[E+J],d[E+U]),p[_+2*S+Y+J]=r.get(d[E+U],d[D-J]),p[_+4*S+Y+J]=r.get(d[D-J],d[D-U]),p[_+6*S+Y+J]=r.get(d[D-U],d[E+J])}_+=S*8}return p}static readCode(r,s,l){let u=0;for(let d=s;d<s+l;d++)u<<=1,r[d]&&(u|=1);return u}static readByte(r,s){let l=r.length-s;return l>=8?gt.readCode(r,s,8):gt.readCode(r,s,l)<<8-l}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let l=0;l<s.length;l++)s[l]=gt.readByte(r,8*l);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}gt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],gt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],gt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],gt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],gt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class nt{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,l,u){const d=r-l,p=s-u;return Math.sqrt(d*d+p*p)}static sum(r){let s=0;for(let l=0,u=r.length;l!==u;l++){const d=r[l];s+=d}return s}}class Qt{static floatToIntBits(r){return r}}Qt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Re{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof Re){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*Qt.floatToIntBits(this.x)+Qt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),l=this.distance(r[1],r[2]),u=this.distance(r[0],r[2]);let d,p,x;if(l>=s&&l>=u?(p=r[0],d=r[1],x=r[2]):u>=l&&u>=s?(p=r[1],d=r[0],x=r[2]):(p=r[2],d=r[0],x=r[1]),this.crossProductZ(d,p,x)<0){const _=d;d=x,x=_}r[0]=d,r[1]=p,r[2]=x}static distance(r,s){return nt.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,l){const u=s.x,d=s.y;return(l.x-u)*(r.y-d)-(l.y-d)*(r.x-u)}}class rr{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class rs extends rr{constructor(r,s,l,u,d){super(r,s),this.compact=l,this.nbDatablocks=u,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class gr{constructor(r,s,l,u){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=gr.INIT_SIZE),l==null&&(l=r.getWidth()/2|0),u==null&&(u=r.getHeight()/2|0);const d=s/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=u-d,this.downInit=u+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ae}detect(){let r=this.leftInit,s=this.rightInit,l=this.upInit,u=this.downInit,d=!1,p=!0,x=!1,_=!1,S=!1,E=!1,D=!1;const U=this.width,Y=this.height;for(;p;){p=!1;let J=!0;for(;(J||!_)&&s<U;)J=this.containsBlackPoint(l,u,s,!1),J?(s++,p=!0,_=!0):_||s++;if(s>=U){d=!0;break}let te=!0;for(;(te||!S)&&u<Y;)te=this.containsBlackPoint(r,s,u,!0),te?(u++,p=!0,S=!0):S||u++;if(u>=Y){d=!0;break}let le=!0;for(;(le||!E)&&r>=0;)le=this.containsBlackPoint(l,u,r,!1),le?(r--,p=!0,E=!0):E||r--;if(r<0){d=!0;break}let he=!0;for(;(he||!D)&&l>=0;)he=this.containsBlackPoint(r,s,l,!0),he?(l--,p=!0,D=!0):D||l--;if(l<0){d=!0;break}p&&(x=!0)}if(!d&&x){const J=s-r;let te=null;for(let Te=1;te===null&&Te<J;Te++)te=this.getBlackPointOnSegment(r,u-Te,r+Te,u);if(te==null)throw new ae;let le=null;for(let Te=1;le===null&&Te<J;Te++)le=this.getBlackPointOnSegment(r,l+Te,r+Te,l);if(le==null)throw new ae;let he=null;for(let Te=1;he===null&&Te<J;Te++)he=this.getBlackPointOnSegment(s,l+Te,s-Te,l);if(he==null)throw new ae;let Ne=null;for(let Te=1;Ne===null&&Te<J;Te++)Ne=this.getBlackPointOnSegment(s,u-Te,s-Te,u);if(Ne==null)throw new ae;return this.centerEdges(Ne,te,he,le)}else throw new ae}getBlackPointOnSegment(r,s,l,u){const d=nt.round(nt.distance(r,s,l,u)),p=(l-r)/d,x=(u-s)/d,_=this.image;for(let S=0;S<d;S++){const E=nt.round(r+S*p),D=nt.round(s+S*x);if(_.get(E,D))return new Re(E,D)}return null}centerEdges(r,s,l,u){const d=r.getX(),p=r.getY(),x=s.getX(),_=s.getY(),S=l.getX(),E=l.getY(),D=u.getX(),U=u.getY(),Y=gr.CORR;return d<this.width/2?[new Re(D-Y,U+Y),new Re(x+Y,_+Y),new Re(S-Y,E-Y),new Re(d+Y,p-Y)]:[new Re(D+Y,U+Y),new Re(x+Y,_-Y),new Re(S-Y,E+Y),new Re(d-Y,p-Y)]}containsBlackPoint(r,s,l,u){const d=this.image;if(u){for(let p=r;p<=s;p++)if(d.get(p,l))return!0}else for(let p=r;p<=s;p++)if(d.get(l,p))return!0;return!1}}gr.INIT_SIZE=10,gr.CORR=1;class zi{static checkAndNudgePoints(r,s){const l=r.getWidth(),u=r.getHeight();let d=!0;for(let p=0;p<s.length&&d;p+=2){const x=Math.floor(s[p]),_=Math.floor(s[p+1]);if(x<-1||x>l||_<-1||_>u)throw new ae;d=!1,x===-1?(s[p]=0,d=!0):x===l&&(s[p]=l-1,d=!0),_===-1?(s[p+1]=0,d=!0):_===u&&(s[p+1]=u-1,d=!0)}d=!0;for(let p=s.length-2;p>=0&&d;p-=2){const x=Math.floor(s[p]),_=Math.floor(s[p+1]);if(x<-1||x>l||_<-1||_>u)throw new ae;d=!1,x===-1?(s[p]=0,d=!0):x===l&&(s[p]=l-1,d=!0),_===-1?(s[p+1]=0,d=!0):_===u&&(s[p+1]=u-1,d=!0)}}}class K{constructor(r,s,l,u,d,p,x,_,S){this.a11=r,this.a21=s,this.a31=l,this.a12=u,this.a22=d,this.a32=p,this.a13=x,this.a23=_,this.a33=S}static quadrilateralToQuadrilateral(r,s,l,u,d,p,x,_,S,E,D,U,Y,J,te,le){const he=K.quadrilateralToSquare(r,s,l,u,d,p,x,_);return K.squareToQuadrilateral(S,E,D,U,Y,J,te,le).times(he)}transformPoints(r){const s=r.length,l=this.a11,u=this.a12,d=this.a13,p=this.a21,x=this.a22,_=this.a23,S=this.a31,E=this.a32,D=this.a33;for(let U=0;U<s;U+=2){const Y=r[U],J=r[U+1],te=d*Y+_*J+D;r[U]=(l*Y+p*J+S)/te,r[U+1]=(u*Y+x*J+E)/te}}transformPointsWithValues(r,s){const l=this.a11,u=this.a12,d=this.a13,p=this.a21,x=this.a22,_=this.a23,S=this.a31,E=this.a32,D=this.a33,U=r.length;for(let Y=0;Y<U;Y++){const J=r[Y],te=s[Y],le=d*J+_*te+D;r[Y]=(l*J+p*te+S)/le,s[Y]=(u*J+x*te+E)/le}}static squareToQuadrilateral(r,s,l,u,d,p,x,_){const S=r-l+d-x,E=s-u+p-_;if(S===0&&E===0)return new K(l-r,d-l,r,u-s,p-u,s,0,0,1);{const D=l-d,U=x-d,Y=u-p,J=_-p,te=D*J-U*Y,le=(S*J-U*E)/te,he=(D*E-S*Y)/te;return new K(l-r+le*l,x-r+he*x,r,u-s+le*u,_-s+he*_,s,le,he,1)}}static quadrilateralToSquare(r,s,l,u,d,p,x,_){return K.squareToQuadrilateral(r,s,l,u,d,p,x,_).buildAdjoint()}buildAdjoint(){return new K(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new K(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class Oe extends zi{sampleGrid(r,s,l,u,d,p,x,_,S,E,D,U,Y,J,te,le,he,Ne,Te){const Ae=K.quadrilateralToQuadrilateral(u,d,p,x,_,S,E,D,U,Y,J,te,le,he,Ne,Te);return this.sampleGridWithTransform(r,s,l,Ae)}sampleGridWithTransform(r,s,l,u){if(s<=0||l<=0)throw new ae;const d=new Ee(s,l),p=new Float32Array(2*s);for(let x=0;x<l;x++){const _=p.length,S=x+.5;for(let E=0;E<_;E+=2)p[E]=E/2+.5,p[E+1]=S;u.transformPoints(p),zi.checkAndNudgePoints(r,p);try{for(let E=0;E<_;E+=2)r.get(Math.floor(p[E]),Math.floor(p[E+1]))&&d.set(E/2,x)}catch{throw new ae}}return d}}class Je{static setGridSampler(r){Je.gridSampler=r}static getInstance(){return Je.gridSampler}}Je.gridSampler=new Oe;class Ue{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new Re(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Fe{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),l=this.getBullsEyeCorners(s);if(r){let p=l[0];l[0]=l[2],l[2]=p}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new rs(u,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new ae;let s=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(l,s);let u=0;for(let p=0;p<4;p++){let x=l[(this.shift+p)%4];this.compact?(u<<=7,u+=x>>1&127):(u<<=10,u+=(x>>2&992)+(x>>1&31))}let d=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(r,s){let l=0;r.forEach((u,d,p)=>{let x=(u>>s-2<<1)+(u&1);l=(l<<3)+x}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(k.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new ae}getCorrectedParameterData(r,s){let l,u;s?(l=7,u=2):(l=10,u=4);let d=l-u,p=new Int32Array(l);for(let _=l-1;_>=0;--_)p[_]=r&15,r>>=4;try{new Wt(Ze.AZTEC_PARAM).decode(p,d)}catch{throw new ae}let x=0;for(let _=0;_<u;_++)x=(x<<4)+p[_];return x}getBullsEyeCorners(r){let s=r,l=r,u=r,d=r,p=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let D=this.getFirstDifferent(s,p,1,-1),U=this.getFirstDifferent(l,p,1,1),Y=this.getFirstDifferent(u,p,-1,1),J=this.getFirstDifferent(d,p,-1,-1);if(this.nbCenterLayers>2){let te=this.distancePoint(J,D)*this.nbCenterLayers/(this.distancePoint(d,s)*(this.nbCenterLayers+2));if(te<.75||te>1.25||!this.isWhiteOrBlackRectangle(D,U,Y,J))break}s=D,l=U,u=Y,d=J,p=!p}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ae;this.compact=this.nbCenterLayers===5;let x=new Re(s.getX()+.5,s.getY()-.5),_=new Re(l.getX()+.5,l.getY()+.5),S=new Re(u.getX()-.5,u.getY()+.5),E=new Re(d.getX()-.5,d.getY()-.5);return this.expandSquare([x,_,S,E],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,l,u;try{let x=new gr(this.image).detect();r=x[0],s=x[1],l=x[2],u=x[3]}catch{let _=this.image.getWidth()/2,S=this.image.getHeight()/2;r=this.getFirstDifferent(new Ue(_+7,S-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Ue(_+7,S+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Ue(_-7,S+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Ue(_-7,S-7),!1,-1,-1).toResultPoint()}let d=nt.round((r.getX()+u.getX()+s.getX()+l.getX())/4),p=nt.round((r.getY()+u.getY()+s.getY()+l.getY())/4);try{let x=new gr(this.image,15,d,p).detect();r=x[0],s=x[1],l=x[2],u=x[3]}catch{r=this.getFirstDifferent(new Ue(d+7,p-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Ue(d+7,p+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Ue(d-7,p+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Ue(d-7,p-7),!1,-1,-1).toResultPoint()}return d=nt.round((r.getX()+u.getX()+s.getX()+l.getX())/4),p=nt.round((r.getY()+u.getY()+s.getY()+l.getY())/4),new Ue(d,p)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,l,u,d){let p=Je.getInstance(),x=this.getDimension(),_=x/2-this.nbCenterLayers,S=x/2+this.nbCenterLayers;return p.sampleGrid(r,x,x,_,_,S,_,S,S,_,S,s.getX(),s.getY(),l.getX(),l.getY(),u.getX(),u.getY(),d.getX(),d.getY())}sampleLine(r,s,l){let u=0,d=this.distanceResultPoint(r,s),p=d/l,x=r.getX(),_=r.getY(),S=p*(s.getX()-r.getX())/d,E=p*(s.getY()-r.getY())/d;for(let D=0;D<l;D++)this.image.get(nt.round(x+D*S),nt.round(_+D*E))&&(u|=1<<l-D-1);return u}isWhiteOrBlackRectangle(r,s,l,u){let d=3;r=new Ue(r.getX()-d,r.getY()+d),s=new Ue(s.getX()-d,s.getY()-d),l=new Ue(l.getX()+d,l.getY()-d),u=new Ue(u.getX()+d,u.getY()+d);let p=this.getColor(u,r);if(p===0)return!1;let x=this.getColor(r,s);return x!==p||(x=this.getColor(s,l),x!==p)?!1:(x=this.getColor(l,u),x===p)}getColor(r,s){let l=this.distancePoint(r,s),u=(s.getX()-r.getX())/l,d=(s.getY()-r.getY())/l,p=0,x=r.getX(),_=r.getY(),S=this.image.get(r.getX(),r.getY()),E=Math.ceil(l);for(let U=0;U<E;U++)x+=u,_+=d,this.image.get(nt.round(x),nt.round(_))!==S&&p++;let D=p/l;return D>.1&&D<.9?0:D<=.1===S?1:-1}getFirstDifferent(r,s,l,u){let d=r.getX()+l,p=r.getY()+u;for(;this.isValid(d,p)&&this.image.get(d,p)===s;)d+=l,p+=u;for(d-=l,p-=u;this.isValid(d,p)&&this.image.get(d,p)===s;)d+=l;for(d-=l;this.isValid(d,p)&&this.image.get(d,p)===s;)p+=u;return p-=u,new Ue(d,p)}expandSquare(r,s,l){let u=l/(2*s),d=r[0].getX()-r[2].getX(),p=r[0].getY()-r[2].getY(),x=(r[0].getX()+r[2].getX())/2,_=(r[0].getY()+r[2].getY())/2,S=new Re(x+u*d,_+u*p),E=new Re(x-u*d,_-u*p);d=r[1].getX()-r[3].getX(),p=r[1].getY()-r[3].getY(),x=(r[1].getX()+r[3].getX())/2,_=(r[1].getY()+r[3].getY())/2;let D=new Re(x+u*d,_+u*p),U=new Re(x-u*d,_-u*p);return[S,D,E,U]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=nt.round(r.getX()),l=nt.round(r.getY());return this.isValid(s,l)}distancePoint(r,s){return nt.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return nt.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(k.truncDivision(this.nbLayers-4,8)+1)+15}}class ut{decode(r,s=null){let l=null,u=new Fe(r.getBlackMatrix()),d=null,p=null;try{let E=u.detectMirror(!1);d=E.getPoints(),this.reportFoundResultPoints(s,d),p=new gt().decode(E)}catch(E){l=E}if(p==null)try{let E=u.detectMirror(!0);d=E.getPoints(),this.reportFoundResultPoints(s,d),p=new gt().decode(E)}catch(E){throw l??E}let x=new De(p.getText(),p.getRawBytes(),p.getNumBits(),d,oe.AZTEC,R.currentTimeMillis()),_=p.getByteSegments();_!=null&&x.putMetadata(at.BYTE_SEGMENTS,_);let S=p.getECLevel();return S!=null&&x.putMetadata(at.ERROR_CORRECTION_LEVEL,S),x}reportFoundResultPoints(r,s){if(r!=null){let l=r.get(G.NEED_RESULT_POINT_CALLBACK);l!=null&&s.forEach((u,d,p)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class Ot extends qe{constructor(r=500){super(new ut,r)}}class He{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(G.TRY_HARDER)===!0&&r.isRotateSupported()){const d=r.rotateCounterClockwise(),p=this.doDecode(d,s),x=p.getResultMetadata();let _=270;x!==null&&x.get(at.ORIENTATION)===!0&&(_=_+x.get(at.ORIENTATION)%360),p.putMetadata(at.ORIENTATION,_);const S=p.getResultPoints();if(S!==null){const E=d.getHeight();for(let D=0;D<S.length;D++)S[D]=new Re(E-S[D].getY()-1,S[D].getX())}return p}else throw new ae}}reset(){}doDecode(r,s){const l=r.getWidth(),u=r.getHeight();let d=new W(l);const p=s&&s.get(G.TRY_HARDER)===!0,x=Math.max(1,u>>(p?8:5));let _;p?_=u:_=15;const S=Math.trunc(u/2);for(let E=0;E<_;E++){const D=Math.trunc((E+1)/2),U=(E&1)===0,Y=S+x*(U?D:-D);if(Y<0||Y>=u)break;try{d=r.getBlackRow(Y,d)}catch{continue}for(let J=0;J<2;J++){if(J===1&&(d.reverse(),s&&s.get(G.NEED_RESULT_POINT_CALLBACK)===!0)){const te=new Map;s.forEach((le,he)=>te.set(he,le)),te.delete(G.NEED_RESULT_POINT_CALLBACK),s=te}try{const te=this.decodeRow(Y,d,s);if(J===1){te.putMetadata(at.ORIENTATION,180);const le=te.getResultPoints();le!==null&&(le[0]=new Re(l-le[0].getX()-1,le[0].getY()),le[1]=new Re(l-le[1].getX()-1,le[1].getY()))}return te}catch{}}}throw new ae}static recordPattern(r,s,l){const u=l.length;for(let S=0;S<u;S++)l[S]=0;const d=r.getSize();if(s>=d)throw new ae;let p=!r.get(s),x=0,_=s;for(;_<d;){if(r.get(_)!==p)l[x]++;else{if(++x===u)break;l[x]=1,p=!p}_++}if(!(x===u||x===u-1&&_===d))throw new ae}static recordPatternInReverse(r,s,l){let u=l.length,d=r.get(s);for(;s>0&&u>=0;)r.get(--s)!==d&&(u--,d=!d);if(u>=0)throw new ae;He.recordPattern(r,s+1,l)}static patternMatchVariance(r,s,l){const u=r.length;let d=0,p=0;for(let S=0;S<u;S++)d+=r[S],p+=s[S];if(d<p)return Number.POSITIVE_INFINITY;const x=d/p;l*=x;let _=0;for(let S=0;S<u;S++){const E=r[S],D=s[S]*x,U=E>D?E-D:D-E;if(U>l)return Number.POSITIVE_INFINITY;_+=U}return _/d}}class _e extends He{static findStartPattern(r){const s=r.getSize(),l=r.getNextSet(0);let u=0,d=Int32Array.from([0,0,0,0,0,0]),p=l,x=!1;const _=6;for(let S=l;S<s;S++)if(r.get(S)!==x)d[u]++;else{if(u===_-1){let E=_e.MAX_AVG_VARIANCE,D=-1;for(let U=_e.CODE_START_A;U<=_e.CODE_START_C;U++){const Y=He.patternMatchVariance(d,_e.CODE_PATTERNS[U],_e.MAX_INDIVIDUAL_VARIANCE);Y<E&&(E=Y,D=U)}if(D>=0&&r.isRange(Math.max(0,p-(S-p)/2),p,!1))return Int32Array.from([p,S,D]);p+=d[0]+d[1],d=d.slice(2,d.length-1),d[u-1]=0,d[u]=0,u--}else u++;d[u]=1,x=!x}throw new ae}static decodeCode(r,s,l){He.recordPattern(r,l,s);let u=_e.MAX_AVG_VARIANCE,d=-1;for(let p=0;p<_e.CODE_PATTERNS.length;p++){const x=_e.CODE_PATTERNS[p],_=this.patternMatchVariance(s,x,_e.MAX_INDIVIDUAL_VARIANCE);_<u&&(u=_,d=p)}if(d>=0)return d;throw new ae}decodeRow(r,s,l){const u=l&&l.get(G.ASSUME_GS1)===!0,d=_e.findStartPattern(s),p=d[2];let x=0;const _=new Uint8Array(20);_[x++]=p;let S;switch(p){case _e.CODE_START_A:S=_e.CODE_CODE_A;break;case _e.CODE_START_B:S=_e.CODE_CODE_B;break;case _e.CODE_START_C:S=_e.CODE_CODE_C;break;default:throw new H}let E=!1,D=!1,U="",Y=d[0],J=d[1];const te=Int32Array.from([0,0,0,0,0,0]);let le=0,he=0,Ne=p,Te=0,Ae=!0,Et=!1,_t=!1;for(;!E;){const li=D;switch(D=!1,le=he,he=_e.decodeCode(s,te,J),_[x++]=he,he!==_e.CODE_STOP&&(Ae=!0),he!==_e.CODE_STOP&&(Te++,Ne+=Te*he),Y=J,J+=te.reduce((Xh,Hs)=>Xh+Hs,0),he){case _e.CODE_START_A:case _e.CODE_START_B:case _e.CODE_START_C:throw new H}switch(S){case _e.CODE_CODE_A:if(he<64)_t===Et?U+=String.fromCharCode(32+he):U+=String.fromCharCode(32+he+128),_t=!1;else if(he<96)_t===Et?U+=String.fromCharCode(he-64):U+=String.fromCharCode(he+64),_t=!1;else switch(he!==_e.CODE_STOP&&(Ae=!1),he){case _e.CODE_FNC_1:u&&(U.length===0?U+="]C1":U+="");break;case _e.CODE_FNC_2:case _e.CODE_FNC_3:break;case _e.CODE_FNC_4_A:!Et&&_t?(Et=!0,_t=!1):Et&&_t?(Et=!1,_t=!1):_t=!0;break;case _e.CODE_SHIFT:D=!0,S=_e.CODE_CODE_B;break;case _e.CODE_CODE_B:S=_e.CODE_CODE_B;break;case _e.CODE_CODE_C:S=_e.CODE_CODE_C;break;case _e.CODE_STOP:E=!0;break}break;case _e.CODE_CODE_B:if(he<96)_t===Et?U+=String.fromCharCode(32+he):U+=String.fromCharCode(32+he+128),_t=!1;else switch(he!==_e.CODE_STOP&&(Ae=!1),he){case _e.CODE_FNC_1:u&&(U.length===0?U+="]C1":U+="");break;case _e.CODE_FNC_2:case _e.CODE_FNC_3:break;case _e.CODE_FNC_4_B:!Et&&_t?(Et=!0,_t=!1):Et&&_t?(Et=!1,_t=!1):_t=!0;break;case _e.CODE_SHIFT:D=!0,S=_e.CODE_CODE_A;break;case _e.CODE_CODE_A:S=_e.CODE_CODE_A;break;case _e.CODE_CODE_C:S=_e.CODE_CODE_C;break;case _e.CODE_STOP:E=!0;break}break;case _e.CODE_CODE_C:if(he<100)he<10&&(U+="0"),U+=he;else switch(he!==_e.CODE_STOP&&(Ae=!1),he){case _e.CODE_FNC_1:u&&(U.length===0?U+="]C1":U+="");break;case _e.CODE_CODE_A:S=_e.CODE_CODE_A;break;case _e.CODE_CODE_B:S=_e.CODE_CODE_B;break;case _e.CODE_STOP:E=!0;break}break}li&&(S=S===_e.CODE_CODE_A?_e.CODE_CODE_B:_e.CODE_CODE_A)}const un=J-Y;if(J=s.getNextUnset(J),!s.isRange(J,Math.min(s.getSize(),J+(J-Y)/2),!1))throw new ae;if(Ne-=Te*le,Ne%103!==le)throw new I;const or=U.length;if(or===0)throw new ae;or>0&&Ae&&(S===_e.CODE_CODE_C?U=U.substring(0,or-2):U=U.substring(0,or-1));const ar=(d[1]+d[0])/2,Ut=Y+un/2,Un=_.length,lr=new Uint8Array(Un);for(let li=0;li<Un;li++)lr[li]=_[li];const Vs=[new Re(ar,r),new Re(Ut,r)];return new De(U,lr,0,Vs,oe.CODE_128,new Date().getTime())}}_e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],_e.MAX_AVG_VARIANCE=.25,_e.MAX_INDIVIDUAL_VARIANCE=.7,_e.CODE_SHIFT=98,_e.CODE_CODE_C=99,_e.CODE_CODE_B=100,_e.CODE_CODE_A=101,_e.CODE_FNC_1=102,_e.CODE_FNC_2=97,_e.CODE_FNC_3=96,_e.CODE_FNC_4_A=101,_e.CODE_FNC_4_B=100,_e.CODE_START_A=103,_e.CODE_START_B=104,_e.CODE_START_C=105,_e.CODE_STOP=106;class jt extends He{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let d=jt.findAsteriskPattern(s,u),p=s.getNextSet(d[1]),x=s.getSize(),_,S;do{jt.recordPattern(s,p,u);let te=jt.toNarrowWidePattern(u);if(te<0)throw new ae;_=jt.patternToChar(te),this.decodeRowResult+=_,S=p;for(let le of u)p+=le;p=s.getNextSet(p)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let E=0;for(let te of u)E+=te;let D=p-S-E;if(p!==x&&D*2<E)throw new ae;if(this.usingCheckDigit){let te=this.decodeRowResult.length-1,le=0;for(let he=0;he<te;he++)le+=jt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(he));if(this.decodeRowResult.charAt(te)!==jt.ALPHABET_STRING.charAt(le%43))throw new I;this.decodeRowResult=this.decodeRowResult.substring(0,te)}if(this.decodeRowResult.length===0)throw new ae;let U;this.extendedMode?U=jt.decodeExtended(this.decodeRowResult):U=this.decodeRowResult;let Y=(d[1]+d[0])/2,J=S+E/2;return new De(U,null,0,[new Re(Y,r),new Re(J,r)],oe.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let l=r.getSize(),u=r.getNextSet(0),d=0,p=u,x=!1,_=s.length;for(let S=u;S<l;S++)if(r.get(S)!==x)s[d]++;else{if(d===_-1){if(this.toNarrowWidePattern(s)===jt.ASTERISK_ENCODING&&r.isRange(Math.max(0,p-Math.floor((S-p)/2)),p,!1))return[p,S];p+=s[0]+s[1],s.copyWithin(0,2,2+d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,x=!x}throw new ae}static toNarrowWidePattern(r){let s=r.length,l=0,u;do{let d=2147483647;for(let _ of r)_<d&&_>l&&(d=_);l=d,u=0;let p=0,x=0;for(let _=0;_<s;_++){let S=r[_];S>l&&(x|=1<<s-1-_,u++,p+=S)}if(u===3){for(let _=0;_<s&&u>0;_++){let S=r[_];if(S>l&&(u--,S*2>=p))return-1}return x}}while(u>3);return-1}static patternToChar(r){for(let s=0;s<jt.CHARACTER_ENCODINGS.length;s++)if(jt.CHARACTER_ENCODINGS[s]===r)return jt.ALPHABET_STRING.charAt(s);if(r===jt.ASTERISK_ENCODING)return"*";throw new ae}static decodeExtended(r){let s=r.length,l="";for(let u=0;u<s;u++){let d=r.charAt(u);if(d==="+"||d==="$"||d==="%"||d==="/"){let p=r.charAt(u+1),x="\0";switch(d){case"+":if(p>="A"&&p<="Z")x=String.fromCharCode(p.charCodeAt(0)+32);else throw new H;break;case"$":if(p>="A"&&p<="Z")x=String.fromCharCode(p.charCodeAt(0)-64);else throw new H;break;case"%":if(p>="A"&&p<="E")x=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")x=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")x=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")x=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")x="\0";else if(p==="V")x="@";else if(p==="W")x="`";else if(p==="X"||p==="Y"||p==="Z")x="";else throw new H;break;case"/":if(p>="A"&&p<="O")x=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")x=":";else throw new H;break}l+=x,u++}else l+=d}return l}}jt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",jt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],jt.ASTERISK_ENCODING=148;class $e extends He{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,l){let u=this.decodeStart(s),d=this.decodeEnd(s),p=new ve;$e.decodeMiddle(s,u[1],d[0],p);let x=p.toString(),_=null;l!=null&&(_=l.get(G.ALLOWED_LENGTHS)),_==null&&(_=$e.DEFAULT_ALLOWED_LENGTHS);let S=x.length,E=!1,D=0;for(let J of _){if(S===J){E=!0;break}J>D&&(D=J)}if(!E&&S>D&&(E=!0),!E)throw new H;const U=[new Re(u[1],r),new Re(d[0],r)];return new De(x,null,0,U,oe.ITF,new Date().getTime())}static decodeMiddle(r,s,l,u){let d=new Int32Array(10),p=new Int32Array(5),x=new Int32Array(5);for(d.fill(0),p.fill(0),x.fill(0);s<l;){He.recordPattern(r,s,d);for(let S=0;S<5;S++){let E=2*S;p[S]=d[E],x[S]=d[E+1]}let _=$e.decodeDigit(p);u.append(_.toString()),_=this.decodeDigit(x),u.append(_.toString()),d.forEach(function(S){s+=S})}}decodeStart(r){let s=$e.skipWhiteSpace(r),l=$e.findGuardPattern(r,s,$e.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(r,l[0]),l}validateQuietZone(r,s){let l=this.narrowLineWidth*10;l=l<s?l:s;for(let u=s-1;l>0&&u>=0&&!r.get(u);u--)l--;if(l!==0)throw new ae}static skipWhiteSpace(r){const s=r.getSize(),l=r.getNextSet(0);if(l===s)throw new ae;return l}decodeEnd(r){r.reverse();try{let s=$e.skipWhiteSpace(r),l;try{l=$e.findGuardPattern(r,s,$e.END_PATTERN_REVERSED[0])}catch(d){d instanceof ae&&(l=$e.findGuardPattern(r,s,$e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,l[0]);let u=l[0];return l[0]=r.getSize()-l[1],l[1]=r.getSize()-u,l}finally{r.reverse()}}static findGuardPattern(r,s,l){let u=l.length,d=new Int32Array(u),p=r.getSize(),x=!1,_=0,S=s;d.fill(0);for(let E=s;E<p;E++)if(r.get(E)!==x)d[_]++;else{if(_===u-1){if(He.patternMatchVariance(d,l,$e.MAX_INDIVIDUAL_VARIANCE)<$e.MAX_AVG_VARIANCE)return[S,E];S+=d[0]+d[1],R.arraycopy(d,2,d,0,_-1),d[_-1]=0,d[_]=0,_--}else _++;d[_]=1,x=!x}throw new ae}static decodeDigit(r){let s=$e.MAX_AVG_VARIANCE,l=-1,u=$e.PATTERNS.length;for(let d=0;d<u;d++){let p=$e.PATTERNS[d],x=He.patternMatchVariance(r,p,$e.MAX_INDIVIDUAL_VARIANCE);x<s?(s=x,l=d):x===s&&(l=-1)}if(l>=0)return l%10;throw new ae}}$e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],$e.MAX_AVG_VARIANCE=.38,$e.MAX_INDIVIDUAL_VARIANCE=.5,$e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],$e.START_PATTERN=Int32Array.from([1,1,1,1]),$e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class xt extends He{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,l,u=0,d=Int32Array.from([0,0,0]);for(;!s;){d=Int32Array.from([0,0,0]),l=xt.findGuardPattern(r,u,!1,this.START_END_PATTERN,d);let p=l[0];u=l[1];let x=p-(u-p);x>=0&&(s=r.isRange(x,p,!1))}return l}static checkChecksum(r){return xt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let l=parseInt(r.charAt(s-1),10);return xt.getStandardUPCEANChecksum(r.substring(0,s-1))===l}static getStandardUPCEANChecksum(r){let s=r.length,l=0;for(let u=s-1;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}l*=3;for(let u=s-2;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}return(1e3-l)%10}static decodeEnd(r,s){return xt.findGuardPattern(r,s,!1,xt.START_END_PATTERN,new Int32Array(xt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,l,u){return this.findGuardPattern(r,s,l,u,new Int32Array(u.length))}static findGuardPattern(r,s,l,u,d){let p=r.getSize();s=l?r.getNextUnset(s):r.getNextSet(s);let x=0,_=s,S=u.length,E=l;for(let D=s;D<p;D++)if(r.get(D)!==E)d[x]++;else{if(x===S-1){if(He.patternMatchVariance(d,u,xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return Int32Array.from([_,D]);_+=d[0]+d[1];let U=d.slice(2,d.length-1);for(let Y=0;Y<x-1;Y++)d[Y]=U[Y];d[x-1]=0,d[x]=0,x--}else x++;d[x]=1,E=!E}throw new ae}static decodeDigit(r,s,l,u){this.recordPattern(r,l,s);let d=this.MAX_AVG_VARIANCE,p=-1,x=u.length;for(let _=0;_<x;_++){let S=u[_],E=He.patternMatchVariance(s,S,xt.MAX_INDIVIDUAL_VARIANCE);E<d&&(d=E,p=_)}if(p>=0)return p;throw new ae}}xt.MAX_AVG_VARIANCE=.48,xt.MAX_INDIVIDUAL_VARIANCE=.7,xt.START_END_PATTERN=Int32Array.from([1,1,1]),xt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),xt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),xt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Cn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(s,l,u),p=u.toString(),x=Cn.parseExtensionString(p),_=[new Re((l[0]+l[1])/2,r),new Re(d,r)],S=new De(p,null,0,_,oe.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&S.putAllMetadata(x),S}decodeMiddle(r,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p=s[1],x=0;for(let S=0;S<5&&p<d;S++){let E=xt.decodeDigit(r,u,p,xt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+E%10);for(let D of u)p+=D;E>=10&&(x|=1<<4-S),S!==4&&(p=r.getNextSet(p),p=r.getNextUnset(p))}if(l.length!==5)throw new ae;let _=this.determineCheckDigit(x);if(Cn.extensionChecksum(l.toString())!==_)throw new ae;return p}static extensionChecksum(r){let s=r.length,l=0;for(let u=s-2;u>=0;u-=2)l+=r.charAt(u).charCodeAt(0)-48;l*=3;for(let u=s-1;u>=0;u-=2)l+=r.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new ae}static parseExtensionString(r){if(r.length!==5)return null;let s=Cn.parseExtension5String(r);return s==null?null:new Map([[at.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let l=parseInt(r.substring(1)),u=(l/100).toString(),d=l%100,p=d<10?"0"+d:d.toString();return s+u+"."+p}}class pn{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(s,l,u),p=u.toString(),x=pn.parseExtensionString(p),_=[new Re((l[0]+l[1])/2,r),new Re(d,r)],S=new De(p,null,0,_,oe.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&S.putAllMetadata(x),S}decodeMiddle(r,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p=s[1],x=0;for(let _=0;_<2&&p<d;_++){let S=xt.decodeDigit(r,u,p,xt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+S%10);for(let E of u)p+=E;S>=10&&(x|=1<<1-_),_!==1&&(p=r.getNextSet(p),p=r.getNextUnset(p))}if(l.length!==2)throw new ae;if(parseInt(l.toString())%4!==x)throw new ae;return p}static parseExtensionString(r){return r.length!==2?null:new Map([[at.ISSUE_NUMBER,parseInt(r)]])}}class Rn{static decodeRow(r,s,l){let u=xt.findGuardPattern(s,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Cn().decodeRow(r,s,u)}catch{return new pn().decodeRow(r,s,u)}}}Rn.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class St extends xt{constructor(){super(),this.decodeRowStringBuffer="",St.L_AND_G_PATTERNS=St.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=St.L_PATTERNS[r-10],l=new Int32Array(s.length);for(let u=0;u<s.length;u++)l[u]=s[s.length-u-1];St.L_AND_G_PATTERNS[r]=l}}decodeRow(r,s,l){let u=St.findStartGuardPattern(s),d=l==null?null:l.get(G.NEED_RESULT_POINT_CALLBACK);if(d!=null){const Ae=new Re((u[0]+u[1])/2,r);d.foundPossibleResultPoint(Ae)}let p=this.decodeMiddle(s,u,this.decodeRowStringBuffer),x=p.rowOffset,_=p.resultString;if(d!=null){const Ae=new Re(x,r);d.foundPossibleResultPoint(Ae)}let S=this.decodeEnd(s,x);if(d!=null){const Ae=new Re((S[0]+S[1])/2,r);d.foundPossibleResultPoint(Ae)}let E=S[1],D=E+(E-S[0]);if(D>=s.getSize()||!s.isRange(E,D,!1))throw new ae;let U=_.toString();if(U.length<8)throw new H;if(!St.checkChecksum(U))throw new I;let Y=(u[1]+u[0])/2,J=(S[1]+S[0])/2,te=this.getBarcodeFormat(),le=[new Re(Y,r),new Re(J,r)],he=new De(U,null,0,le,te,new Date().getTime()),Ne=0;try{let Ae=Rn.decodeRow(r,s,S[1]);he.putMetadata(at.UPC_EAN_EXTENSION,Ae.getText()),he.putAllMetadata(Ae.getResultMetadata()),he.addResultPoints(Ae.getResultPoints()),Ne=Ae.getText().length}catch{}let Te=l==null?null:l.get(G.ALLOWED_EAN_EXTENSIONS);if(Te!=null){let Ae=!1;for(let Et in Te)if(Ne.toString()===Et){Ae=!0;break}if(!Ae)throw new ae}return he}decodeEnd(r,s){return St.findGuardPattern(r,s,!1,St.START_END_PATTERN,new Int32Array(St.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return St.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let l=parseInt(r.charAt(s-1),10);return St.getStandardUPCEANChecksum(r.substring(0,s-1))===l}static getStandardUPCEANChecksum(r){let s=r.length,l=0;for(let u=s-1;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}l*=3;for(let u=s-2;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}return(1e3-l)%10}}class xr extends St{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p=s[1],x=0;for(let S=0;S<6&&p<d;S++){let E=St.decodeDigit(r,u,p,St.L_AND_G_PATTERNS);l+=String.fromCharCode(48+E%10);for(let D of u)p+=D;E>=10&&(x|=1<<5-S)}l=xr.determineFirstDigit(l,x),p=St.findGuardPattern(r,p,!0,St.MIDDLE_PATTERN,new Int32Array(St.MIDDLE_PATTERN.length).fill(0))[1];for(let S=0;S<6&&p<d;S++){let E=St.decodeDigit(r,u,p,St.L_PATTERNS);l+=String.fromCharCode(48+E);for(let D of u)p+=D}return{rowOffset:p,resultString:l}}getBarcodeFormat(){return oe.EAN_13}static determineFirstDigit(r,s){for(let l=0;l<10;l++)if(s===this.FIRST_DIGIT_ENCODINGS[l])return r=String.fromCharCode(48+l)+r,r;throw new ae}}xr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class is extends St{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,l){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p=s[1];for(let _=0;_<4&&p<d;_++){let S=St.decodeDigit(r,u,p,St.L_PATTERNS);l+=String.fromCharCode(48+S);for(let E of u)p+=E}p=St.findGuardPattern(r,p,!0,St.MIDDLE_PATTERN,new Int32Array(St.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<4&&p<d;_++){let S=St.decodeDigit(r,u,p,St.L_PATTERNS);l+=String.fromCharCode(48+S);for(let E of u)p+=E}return{rowOffset:p,resultString:l}}getBarcodeFormat(){return oe.EAN_8}}class re extends St{constructor(){super(...arguments),this.ean13Reader=new xr}getBarcodeFormat(){return oe.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,l))}decodeMiddle(r,s,l){return this.ean13Reader.decodeMiddle(r,s,l)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let l=new De(s.substring(1),null,null,r.getResultPoints(),oe.UPC_A);return r.getResultMetadata()!=null&&l.putAllMetadata(r.getResultMetadata()),l}else throw new ae}reset(){this.ean13Reader.reset()}}class xe extends St{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,l){const u=this.decodeMiddleCounters.map(S=>S);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const d=r.getSize();let p=s[1],x=0;for(let S=0;S<6&&p<d;S++){const E=xe.decodeDigit(r,u,p,xe.L_AND_G_PATTERNS);l+=String.fromCharCode(48+E%10);for(let D of u)p+=D;E>=10&&(x|=1<<5-S)}let _=xe.determineNumSysAndCheckDigit(l,x);return{rowOffset:p,resultString:_}}decodeEnd(r,s){return xe.findGuardPatternWithoutCounters(r,s,!0,xe.MIDDLE_END_PATTERN)}checkChecksum(r){return St.checkChecksum(xe.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let d=String.fromCharCode(48+l),p=String.fromCharCode(48+u);return d+r+p}throw ae.getNotFoundInstance()}getBarcodeFormat(){return oe.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new ve;l.append(r.charAt(0));let u=s[5];switch(u){case 0:case 1:case 2:l.appendChars(s,0,2),l.append(u),l.append("0000"),l.appendChars(s,2,3);break;case 3:l.appendChars(s,0,3),l.append("00000"),l.appendChars(s,3,2);break;case 4:l.appendChars(s,0,4),l.append("00000"),l.append(s[4]);break;default:l.appendChars(s,0,5),l.append("0000"),l.append(u);break}return r.length>=8&&l.append(r.charAt(7)),l.toString()}}xe.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),xe.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class we extends He{constructor(r){super();let s=r==null?null:r.get(G.POSSIBLE_FORMATS),l=[];i(s)?(l.push(new xr),l.push(new re),l.push(new is),l.push(new xe)):(s.indexOf(oe.EAN_13)>-1&&l.push(new xr),s.indexOf(oe.UPC_A)>-1&&l.push(new re),s.indexOf(oe.EAN_8)>-1&&l.push(new is),s.indexOf(oe.UPC_E)>-1&&l.push(new xe)),this.readers=l}decodeRow(r,s,l){for(let u of this.readers)try{const d=u.decodeRow(r,s,l),p=d.getBarcodeFormat()===oe.EAN_13&&d.getText().charAt(0)==="0",x=l==null?null:l.get(G.POSSIBLE_FORMATS),_=x==null||x.includes(oe.UPC_A);if(p&&_){const S=d.getRawBytes(),E=new De(d.getText().substring(1),S,S?S.length:null,d.getResultPoints(),oe.UPC_A);return E.putAllMetadata(d.getResultMetadata()),E}return d}catch{}throw new ae}reset(){for(let r of this.readers)r.reset()}}class Pe extends He{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let l=0;l<s.length;l++)if(He.patternMatchVariance(r,s[l],Pe.MAX_INDIVIDUAL_VARIANCE)<Pe.MAX_AVG_VARIANCE)return l;throw new ae}static count(r){return nt.sum(new Int32Array(r))}static increment(r,s){let l=0,u=s[0];for(let d=1;d<r.length;d++)s[d]>u&&(u=s[d],l=d);r[l]++}static decrement(r,s){let l=0,u=s[0];for(let d=1;d<r.length;d++)s[d]<u&&(u=s[d],l=d);r[l]--}static isFinderPattern(r){let s=r[0]+r[1],l=s+r[2]+r[3],u=s/l;if(u>=Pe.MIN_FINDER_PATTERN_RATIO&&u<=Pe.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let x of r)x>p&&(p=x),x<d&&(d=x);return p<10*d}return!1}}Pe.MAX_AVG_VARIANCE=.2,Pe.MAX_INDIVIDUAL_VARIANCE=.45,Pe.MIN_FINDER_PATTERN_RATIO=9.5/12,Pe.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ke{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof Ke))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class wt{constructor(r,s,l,u,d){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new Re(l,d)),this.resultPoints.push(new Re(u,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof wt))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class lt{constructor(){}static getRSSvalue(r,s,l){let u=0;for(let _ of r)u+=_;let d=0,p=0,x=r.length;for(let _=0;_<x-1;_++){let S;for(S=1,p|=1<<_;S<r[_];S++,p&=~(1<<_)){let E=lt.combins(u-S-1,x-_-2);if(l&&p===0&&u-S-(x-_-1)>=x-_-1&&(E-=lt.combins(u-S-(x-_),x-_-2)),x-_-1>1){let D=0;for(let U=u-S-(x-_-2);U>s;U--)D+=lt.combins(u-S-U-1,x-_-3);E-=D*(x-1-_)}else u-S>s&&E--;d+=E}u-=S}return d}static combins(r,s){let l,u;r-s>s?(u=s,l=r-s):(u=r-s,l=s);let d=1,p=1;for(let x=r;x>l;x--)d*=x,p<=u&&(d/=p,p++);for(;p<=u;)d/=p,p++;return d}}class ir{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let l=12*s,u=new W(l),d=0,x=r[0].getRightChar().getValue();for(let _=11;_>=0;--_)x&1<<_&&u.set(d),d++;for(let _=1;_<r.length;++_){let S=r[_],E=S.getLeftChar().getValue();for(let D=11;D>=0;--D)E&1<<D&&u.set(d),d++;if(S.getRightChar()!=null){let D=S.getRightChar().getValue();for(let U=11;U>=0;--U)D&1<<U&&u.set(d),d++}}return u}}class $t{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class en{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class It extends en{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===It.FNC1}}It.FNC1="$";class Ve extends en{constructor(r,s,l){super(r),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Yt extends en{constructor(r,s,l){if(super(r),s<0||s>10||l<0||l>10)throw new H;this.firstDigit=s,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Yt.FNC1}isSecondDigitFNC1(){return this.secondDigit===Yt.FNC1}isAnyFNC1(){return this.firstDigit===Yt.FNC1||this.secondDigit===Yt.FNC1}}Yt.FNC1=10;class je{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new ae;let s=r.substring(0,2);for(let d of je.TWO_DIGIT_DATA_LENGTH)if(d[0]===s)return d[1]===je.VARIABLE_LENGTH?je.processVariableAI(2,d[2],r):je.processFixedAI(2,d[1],r);if(r.length<3)throw new ae;let l=r.substring(0,3);for(let d of je.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===je.VARIABLE_LENGTH?je.processVariableAI(3,d[2],r):je.processFixedAI(3,d[1],r);for(let d of je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,d[2],r):je.processFixedAI(4,d[1],r);if(r.length<4)throw new ae;let u=r.substring(0,4);for(let d of je.FOUR_DIGIT_DATA_LENGTH)if(d[0]===u)return d[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,d[2],r):je.processFixedAI(4,d[1],r);throw new ae}static processFixedAI(r,s,l){if(l.length<r)throw new ae;let u=l.substring(0,r);if(l.length<r+s)throw new ae;let d=l.substring(r,r+s),p=l.substring(r+s),x="("+u+")"+d,_=je.parseFieldsInGeneralPurpose(p);return _==null?x:x+_}static processVariableAI(r,s,l){let u=l.substring(0,r),d;l.length<r+s?d=l.length:d=r+s;let p=l.substring(r,d),x=l.substring(d),_="("+u+")"+p,S=je.parseFieldsInGeneralPurpose(x);return S==null?_:_+S}}je.VARIABLE_LENGTH=[],je.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",je.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",je.VARIABLE_LENGTH,20],["22",je.VARIABLE_LENGTH,29],["30",je.VARIABLE_LENGTH,8],["37",je.VARIABLE_LENGTH,8],["90",je.VARIABLE_LENGTH,30],["91",je.VARIABLE_LENGTH,30],["92",je.VARIABLE_LENGTH,30],["93",je.VARIABLE_LENGTH,30],["94",je.VARIABLE_LENGTH,30],["95",je.VARIABLE_LENGTH,30],["96",je.VARIABLE_LENGTH,30],["97",je.VARIABLE_LENGTH,3],["98",je.VARIABLE_LENGTH,30],["99",je.VARIABLE_LENGTH,30]],je.THREE_DIGIT_DATA_LENGTH=[["240",je.VARIABLE_LENGTH,30],["241",je.VARIABLE_LENGTH,30],["242",je.VARIABLE_LENGTH,6],["250",je.VARIABLE_LENGTH,30],["251",je.VARIABLE_LENGTH,30],["253",je.VARIABLE_LENGTH,17],["254",je.VARIABLE_LENGTH,20],["400",je.VARIABLE_LENGTH,30],["401",je.VARIABLE_LENGTH,30],["402",17],["403",je.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",je.VARIABLE_LENGTH,20],["421",je.VARIABLE_LENGTH,15],["422",3],["423",je.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",je.VARIABLE_LENGTH,15],["391",je.VARIABLE_LENGTH,18],["392",je.VARIABLE_LENGTH,15],["393",je.VARIABLE_LENGTH,18],["703",je.VARIABLE_LENGTH,30]],je.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",je.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",je.VARIABLE_LENGTH,20],["8003",je.VARIABLE_LENGTH,30],["8004",je.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",je.VARIABLE_LENGTH,30],["8008",je.VARIABLE_LENGTH,12],["8018",18],["8020",je.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",je.VARIABLE_LENGTH,70],["8200",je.VARIABLE_LENGTH,70]];class ss{constructor(r){this.buffer=new ve,this.information=r}decodeAllCodes(r,s){let l=s,u=null;do{let d=this.decodeGeneralPurposeField(l,u),p=je.parseFieldsInGeneralPurpose(d.getNewString());if(p!=null&&r.append(p),d.isRemaining()?u=""+d.getRemainingValue():u=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(r,4);return d===0?new Yt(this.information.getSize(),Yt.FNC1,Yt.FNC1):new Yt(this.information.getSize(),d-1,Yt.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),l=(s-8)/11,u=(s-8)%11;return new Yt(r+7,l,u)}extractNumericValueFromBitArray(r,s){return ss.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,l){let u=0;for(let d=0;d<l;++d)r.get(s+d)&&(u|=1<<l-d-1);return u}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Ve(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Ve(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let l=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(l!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new Ve(this.current.getPosition(),this.buffer.toString()):s=new Ve(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new $t(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new Ve(this.current.getPosition(),this.buffer.toString());return new $t(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new $t(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Ve(this.current.getPosition(),this.buffer.toString());return new $t(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new $t(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Ve(this.current.getPosition(),this.buffer.toString());return new $t(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new $t(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<116)return!0;if(r+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(r,8);return u>=232&&u<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new It(r+5,It.FNC1);if(s>=5&&s<15)return new It(r+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<90)return new It(r+7,""+(l+1));if(l>=90&&l<116)return new It(r+7,""+(l+7));let u=this.extractNumericValueFromBitArray(r,8),d;switch(u){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new H}return new It(r+8,d)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,6);return l>=16&&l<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new It(r+5,It.FNC1);if(s>=5&&s<15)return new It(r+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(r,6);if(l>=32&&l<58)return new It(r+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new Rt("Decoding invalid alphanumeric value: "+l)}return new It(r+6,u)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class _a{constructor(r){this.information=r,this.generalDecoder=new ss(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Zn extends _a{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let l=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,l)}encodeCompressedGtinWithoutAI(r,s,l){for(let u=0;u<4;++u){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*u,10);d/100===0&&r.append("0"),d/10===0&&r.append("0"),r.append(d)}Zn.appendCheckDigit(r,l)}static appendCheckDigit(r,s){let l=0;for(let u=0;u<13;u++){let d=r.charAt(u+s).charCodeAt(0)-48;l+=u&1?d:3*d}l=10-l%10,l===10&&(l=0),r.append(l)}}Zn.GTIN_SIZE=40;class os extends Zn{constructor(r){super(r)}parseInformation(){let r=new ve;r.append("(01)");let s=r.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(os.HEADER_SIZE,4);return r.append(l),this.encodeCompressedGtinWithoutAI(r,os.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,os.HEADER_SIZE+44)}}os.HEADER_SIZE=4;class bi extends _a{constructor(r){super(r)}parseInformation(){let r=new ve;return this.getGeneralDecoder().decodeAllCodes(r,bi.HEADER_SIZE)}}bi.HEADER_SIZE=5;class Ro extends Zn{constructor(r){super(r)}encodeCompressedWeight(r,s,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s,l);this.addWeightCode(r,u);let d=this.checkWeight(u),p=1e5;for(let x=0;x<5;++x)d/p===0&&r.append("0"),p/=10;r.append(d)}}class ni extends Ro{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=ni.HEADER_SIZE+Ro.GTIN_SIZE+ni.WEIGHT_SIZE)throw new ae;let r=new ve;return this.encodeCompressedGtin(r,ni.HEADER_SIZE),this.encodeCompressedWeight(r,ni.HEADER_SIZE+Ro.GTIN_SIZE,ni.WEIGHT_SIZE),r.toString()}}ni.HEADER_SIZE=5,ni.WEIGHT_SIZE=15;class zh extends ni{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class Uh extends ni{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class ri extends Zn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<ri.HEADER_SIZE+Zn.GTIN_SIZE)throw new ae;let r=new ve;this.encodeCompressedGtin(r,ri.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(ri.HEADER_SIZE+Zn.GTIN_SIZE,ri.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(ri.HEADER_SIZE+Zn.GTIN_SIZE+ri.LAST_DIGIT_SIZE,null);return r.append(l.getNewString()),r.toString()}}ri.HEADER_SIZE=8,ri.LAST_DIGIT_SIZE=2;class Gn extends Zn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Gn.HEADER_SIZE+Zn.GTIN_SIZE)throw new ae;let r=new ve;this.encodeCompressedGtin(r,Gn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Gn.HEADER_SIZE+Zn.GTIN_SIZE,Gn.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(Gn.HEADER_SIZE+Zn.GTIN_SIZE+Gn.LAST_DIGIT_SIZE,Gn.FIRST_THREE_DIGITS_SIZE);l/100==0&&r.append("0"),l/10==0&&r.append("0"),r.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField(Gn.HEADER_SIZE+Zn.GTIN_SIZE+Gn.LAST_DIGIT_SIZE+Gn.FIRST_THREE_DIGITS_SIZE,null);return r.append(u.getNewString()),r.toString()}}Gn.HEADER_SIZE=8,Gn.LAST_DIGIT_SIZE=2,Gn.FIRST_THREE_DIGITS_SIZE=10;class rn extends Ro{constructor(r,s,l){super(r),this.dateCode=l,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=rn.HEADER_SIZE+rn.GTIN_SIZE+rn.WEIGHT_SIZE+rn.DATE_SIZE)throw new ae;let r=new ve;return this.encodeCompressedGtin(r,rn.HEADER_SIZE),this.encodeCompressedWeight(r,rn.HEADER_SIZE+rn.GTIN_SIZE,rn.WEIGHT_SIZE),this.encodeCompressedDate(r,rn.HEADER_SIZE+rn.GTIN_SIZE+rn.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,rn.DATE_SIZE);if(l==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let u=l%32;l/=32;let d=l%12+1;l/=12;let p=l;p/10==0&&r.append("0"),r.append(p),d/10==0&&r.append("0"),r.append(d),u/10==0&&r.append("0"),r.append(u)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}rn.HEADER_SIZE=8,rn.WEIGHT_SIZE=20,rn.DATE_SIZE=16;function Oo(P){try{if(P.get(1))return new os(P);if(!P.get(2))return new bi(P);switch(ss.extractNumericValueFromBitArray(P,1,4)){case 4:return new zh(P);case 5:return new Uh(P)}switch(ss.extractNumericValueFromBitArray(P,1,5)){case 12:return new ri(P);case 13:return new Gn(P)}switch(ss.extractNumericValueFromBitArray(P,1,7)){case 56:return new rn(P,"310","11");case 57:return new rn(P,"320","11");case 58:return new rn(P,"310","13");case 59:return new rn(P,"320","13");case 60:return new rn(P,"310","15");case 61:return new rn(P,"320","15");case 62:return new rn(P,"310","17");case 63:return new rn(P,"320","17")}}catch(r){throw console.log(r),new Rt("unknown decoder: "+P)}}class Ui{constructor(r,s,l,u){this.leftchar=r,this.rightchar=s,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof Ui?Ui.equalsOrNull(r.leftchar,s.leftchar)&&Ui.equalsOrNull(r.rightchar,s.rightchar)&&Ui.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:Ui.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class _l{constructor(r,s,l){this.pairs=r,this.rowNumber=s,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof _l?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let l;return r.forEach((u,d)=>{s.forEach(p=>{u.getLeftChar().getValue()===p.getLeftChar().getValue()&&u.getRightChar().getValue()===p.getRightChar().getValue()&&u.getFinderPatter().getValue()===p.getFinderPatter().getValue()&&(l=!0)})}),l}}class be extends Pe{constructor(r){super(...arguments),this.pairs=new Array(be.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,l){this.pairs.length=0,this.startFromEven=!1;try{return be.constructResult(this.decodeRow2pairs(r,s))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,be.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(d){if(d instanceof ae){if(!this.pairs.length)throw new ae;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(r,!1),u){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new ae}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let l=s;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let p of r)this.pairs.push(p.getPairs());if(this.pairs.push(u.getPairs()),!be.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(r);d.push(u);try{return this.checkRows(d,l+1)}catch(p){this.verbose&&console.log(p)}}throw new ae}static isValidSequence(r){for(let s of be.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let l=!0;for(let u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!=s[u]){l=!1;break}if(l)return!0}return!1}storeRow(r,s){let l=0,u=!1,d=!1;for(;l<this.rows.length;){let p=this.rows[l];if(p.getRowNumber()>r){d=p.isEquivalent(this.pairs);break}u=p.isEquivalent(this.pairs),l++}d||u||be.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new _l(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let l of s)if(l.getPairs().length!==r.length){for(let u of l.getPairs())for(let d of r)if(Ui.equals(u,d))break}}static isPartialRow(r,s){for(let l of s){let u=!0;for(let d of r){let p=!1;for(let x of l.getPairs())if(d.equals(x)){p=!0;break}if(!p){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=ir.buildBitArray(r),u=Oo(s).parseInformation(),d=r[0].getFinderPattern().getResultPoints(),p=r[r.length-1].getFinderPattern().getResultPoints(),x=[d[0],d[1],p[0],p[1]];return new De(u,null,null,x,oe.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),l=r.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),d=2;for(let x=1;x<this.pairs.size();++x){let _=this.pairs.get(x);u+=_.getLeftChar().getChecksumPortion(),d++;let S=_.getRightChar();S!=null&&(u+=S.getChecksumPortion(),d++)}return u%=211,211*(d-4)+u==s.getValue()}static getNextSecondBar(r,s){let l;return r.get(s)?(l=r.getNextUnset(s),l=r.getNextSet(l)):(l=r.getNextSet(s),l=r.getNextUnset(l)),l}retrieveNextPair(r,s,l){let u=s.length%2==0;this.startFromEven&&(u=!u);let d,p=!0,x=-1;do this.findNextPair(r,s,x),d=this.parseFoundFinderPattern(r,l,u),d==null?x=be.getNextSecondBar(r,this.startEnd[0]):p=!1;while(p);let _=this.decodeDataCharacter(r,d,u,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new ae;let S;try{S=this.decodeDataCharacter(r,d,u,!1)}catch(E){S=null,this.verbose&&console.log(E)}return new Ui(_,S,d,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p;l>=0?p=l:this.isEmptyPair(s)?p=0:p=s[s.length-1].getFinderPattern().getStartEnd()[1];let x=s.length%2!=0;this.startFromEven&&(x=!x);let _=!1;for(;p<d&&(_=!r.get(p),!!_);)p++;let S=0,E=p;for(let D=p;D<d;D++)if(r.get(D)!=_)u[S]++;else{if(S==3){if(x&&be.reverseCounters(u),be.isFinderPattern(u)){this.startEnd[0]=E,this.startEnd[1]=D;return}x&&be.reverseCounters(u),E+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,S--}else S++;u[S]=1,_=!_}throw new ae}static reverseCounters(r){let s=r.length;for(let l=0;l<s/2;++l){let u=r[l];r[l]=r[s-l-1],r[s-l-1]=u}}parseFoundFinderPattern(r,s,l){let u,d,p;if(l){let S=this.startEnd[0]-1;for(;S>=0&&!r.get(S);)S--;S++,u=this.startEnd[0]-S,d=S,p=this.startEnd[1]}else d=this.startEnd[0],p=r.getNextUnset(this.startEnd[1]+1),u=p-this.startEnd[1];let x=this.getDecodeFinderCounters();R.arraycopy(x,0,x,1,x.length-1),x[0]=u;let _;try{_=this.parseFinderValue(x,be.FINDER_PATTERNS)}catch{return null}return new wt(_,[d,p],d,p,s)}decodeDataCharacter(r,s,l,u){let d=this.getDataCharacterCounters();for(let Ut=0;Ut<d.length;Ut++)d[Ut]=0;if(u)be.recordPatternInReverse(r,s.getStartEnd()[0],d);else{be.recordPattern(r,s.getStartEnd()[1],d);for(let Ut=0,Un=d.length-1;Ut<Un;Ut++,Un--){let lr=d[Ut];d[Ut]=d[Un],d[Un]=lr}}let p=17,x=nt.sum(new Int32Array(d))/p,_=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(x-_)/_>.3)throw new ae;let S=this.getOddCounts(),E=this.getEvenCounts(),D=this.getOddRoundingErrors(),U=this.getEvenRoundingErrors();for(let Ut=0;Ut<d.length;Ut++){let Un=1*d[Ut]/x,lr=Un+.5;if(lr<1){if(Un<.3)throw new ae;lr=1}else if(lr>8){if(Un>8.7)throw new ae;lr=8}let Vs=Ut/2;Ut&1?(E[Vs]=lr,U[Vs]=Un-lr):(S[Vs]=lr,D[Vs]=Un-lr)}this.adjustOddEvenCounts(p);let Y=4*s.getValue()+(l?0:2)+(u?0:1)-1,J=0,te=0;for(let Ut=S.length-1;Ut>=0;Ut--){if(be.isNotA1left(s,l,u)){let Un=be.WEIGHTS[Y][2*Ut];te+=S[Ut]*Un}J+=S[Ut]}let le=0;for(let Ut=E.length-1;Ut>=0;Ut--)if(be.isNotA1left(s,l,u)){let Un=be.WEIGHTS[Y][2*Ut+1];le+=E[Ut]*Un}let he=te+le;if(J&1||J>13||J<4)throw new ae;let Ne=(13-J)/2,Te=be.SYMBOL_WIDEST[Ne],Ae=9-Te,Et=lt.getRSSvalue(S,Te,!0),_t=lt.getRSSvalue(E,Ae,!1),un=be.EVEN_TOTAL_SUBSET[Ne],or=be.GSUM[Ne],ar=Et*un+_t+or;return new Ke(ar,he)}static isNotA1left(r,s,l){return!(r.getValue()==0&&s&&l)}adjustOddEvenCounts(r){let s=nt.sum(new Int32Array(this.getOddCounts())),l=nt.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1;s>13?d=!0:s<4&&(u=!0);let p=!1,x=!1;l>13?x=!0:l<4&&(p=!0);let _=s+l-r,S=(s&1)==1,E=(l&1)==0;if(_==1)if(S){if(E)throw new ae;d=!0}else{if(!E)throw new ae;x=!0}else if(_==-1)if(S){if(E)throw new ae;u=!0}else{if(!E)throw new ae;p=!0}else if(_==0){if(S){if(!E)throw new ae;s<l?(u=!0,x=!0):(d=!0,p=!0)}else if(E)throw new ae}else throw new ae;if(u){if(d)throw new ae;be.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&be.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(x)throw new ae;be.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&be.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}be.SYMBOL_WIDEST=[7,5,4,3,1],be.EVEN_TOTAL_SUBSET=[4,20,52,104,204],be.GSUM=[0,348,1388,2948,3988],be.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],be.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],be.FINDER_PAT_A=0,be.FINDER_PAT_B=1,be.FINDER_PAT_C=2,be.FINDER_PAT_D=3,be.FINDER_PAT_E=4,be.FINDER_PAT_F=5,be.FINDER_PATTERN_SEQUENCES=[[be.FINDER_PAT_A,be.FINDER_PAT_A],[be.FINDER_PAT_A,be.FINDER_PAT_B,be.FINDER_PAT_B],[be.FINDER_PAT_A,be.FINDER_PAT_C,be.FINDER_PAT_B,be.FINDER_PAT_D],[be.FINDER_PAT_A,be.FINDER_PAT_E,be.FINDER_PAT_B,be.FINDER_PAT_D,be.FINDER_PAT_C],[be.FINDER_PAT_A,be.FINDER_PAT_E,be.FINDER_PAT_B,be.FINDER_PAT_D,be.FINDER_PAT_D,be.FINDER_PAT_F],[be.FINDER_PAT_A,be.FINDER_PAT_E,be.FINDER_PAT_B,be.FINDER_PAT_D,be.FINDER_PAT_E,be.FINDER_PAT_F,be.FINDER_PAT_F],[be.FINDER_PAT_A,be.FINDER_PAT_A,be.FINDER_PAT_B,be.FINDER_PAT_B,be.FINDER_PAT_C,be.FINDER_PAT_C,be.FINDER_PAT_D,be.FINDER_PAT_D],[be.FINDER_PAT_A,be.FINDER_PAT_A,be.FINDER_PAT_B,be.FINDER_PAT_B,be.FINDER_PAT_C,be.FINDER_PAT_C,be.FINDER_PAT_D,be.FINDER_PAT_E,be.FINDER_PAT_E],[be.FINDER_PAT_A,be.FINDER_PAT_A,be.FINDER_PAT_B,be.FINDER_PAT_B,be.FINDER_PAT_C,be.FINDER_PAT_C,be.FINDER_PAT_D,be.FINDER_PAT_E,be.FINDER_PAT_F,be.FINDER_PAT_F],[be.FINDER_PAT_A,be.FINDER_PAT_A,be.FINDER_PAT_B,be.FINDER_PAT_B,be.FINDER_PAT_C,be.FINDER_PAT_D,be.FINDER_PAT_D,be.FINDER_PAT_E,be.FINDER_PAT_E,be.FINDER_PAT_F,be.FINDER_PAT_F]],be.MAX_PAIRS=11;class Vh extends Ke{constructor(r,s,l){super(r,s),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class mn extends Pe{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,l){const u=this.decodePair(s,!1,r,l);mn.addOrTally(this.possibleLeftPairs,u),s.reverse();let d=this.decodePair(s,!0,r,l);mn.addOrTally(this.possibleRightPairs,d),s.reverse();for(let p of this.possibleLeftPairs)if(p.getCount()>1){for(let x of this.possibleRightPairs)if(x.getCount()>1&&mn.checkChecksum(p,x))return mn.constructResult(p,x)}throw new ae}static addOrTally(r,s){if(s==null)return;let l=!1;for(let u of r)if(u.getValue()===s.getValue()){u.incrementCount(),l=!0;break}l||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let l=4537077*r.getValue()+s.getValue(),u=new String(l).toString(),d=new ve;for(let S=13-u.length;S>0;S--)d.append("0");d.append(u);let p=0;for(let S=0;S<13;S++){let E=d.charAt(S).charCodeAt(0)-48;p+=S&1?E:3*E}p=10-p%10,p===10&&(p=0),d.append(p.toString());let x=r.getFinderPattern().getResultPoints(),_=s.getFinderPattern().getResultPoints();return new De(d.toString(),null,0,[x[0],x[1],_[0],_[1]],oe.RSS_14,new Date().getTime())}static checkChecksum(r,s){let l=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,u=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(r,s,l,u){try{let d=this.findFinderPattern(r,s),p=this.parseFoundFinderPattern(r,l,s,d),x=u==null?null:u.get(G.NEED_RESULT_POINT_CALLBACK);if(x!=null){let E=(d[0]+d[1])/2;s&&(E=r.getSize()-1-E),x.foundPossibleResultPoint(new Re(E,l))}let _=this.decodeDataCharacter(r,p,!0),S=this.decodeDataCharacter(r,p,!1);return new Vh(1597*_.getValue()+S.getValue(),_.getChecksumPortion()+4*S.getChecksumPortion(),p)}catch{return null}}decodeDataCharacter(r,s,l){let u=this.getDataCharacterCounters();for(let le=0;le<u.length;le++)u[le]=0;if(l)He.recordPatternInReverse(r,s.getStartEnd()[0],u);else{He.recordPattern(r,s.getStartEnd()[1]+1,u);for(let le=0,he=u.length-1;le<he;le++,he--){let Ne=u[le];u[le]=u[he],u[he]=Ne}}let d=l?16:15,p=nt.sum(new Int32Array(u))/d,x=this.getOddCounts(),_=this.getEvenCounts(),S=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let le=0;le<u.length;le++){let he=u[le]/p,Ne=Math.floor(he+.5);Ne<1?Ne=1:Ne>8&&(Ne=8);let Te=Math.floor(le/2);le&1?(_[Te]=Ne,E[Te]=he-Ne):(x[Te]=Ne,S[Te]=he-Ne)}this.adjustOddEvenCounts(l,d);let D=0,U=0;for(let le=x.length-1;le>=0;le--)U*=9,U+=x[le],D+=x[le];let Y=0,J=0;for(let le=_.length-1;le>=0;le--)Y*=9,Y+=_[le],J+=_[le];let te=U+3*Y;if(l){if(D&1||D>12||D<4)throw new ae;let le=(12-D)/2,he=mn.OUTSIDE_ODD_WIDEST[le],Ne=9-he,Te=lt.getRSSvalue(x,he,!1),Ae=lt.getRSSvalue(_,Ne,!0),Et=mn.OUTSIDE_EVEN_TOTAL_SUBSET[le],_t=mn.OUTSIDE_GSUM[le];return new Ke(Te*Et+Ae+_t,te)}else{if(J&1||J>10||J<4)throw new ae;let le=(10-J)/2,he=mn.INSIDE_ODD_WIDEST[le],Ne=9-he,Te=lt.getRSSvalue(x,he,!0),Ae=lt.getRSSvalue(_,Ne,!1),Et=mn.INSIDE_ODD_TOTAL_SUBSET[le],_t=mn.INSIDE_GSUM[le];return new Ke(Ae*Et+Te+_t,te)}}findFinderPattern(r,s){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=r.getSize(),d=!1,p=0;for(;p<u&&(d=!r.get(p),s!==d);)p++;let x=0,_=p;for(let S=p;S<u;S++)if(r.get(S)!==d)l[x]++;else{if(x===3){if(Pe.isFinderPattern(l))return[_,S];_+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,x--}else x++;l[x]=1,d=!d}throw new ae}parseFoundFinderPattern(r,s,l,u){let d=r.get(u[0]),p=u[0]-1;for(;p>=0&&d!==r.get(p);)p--;p++;const x=u[0]-p,_=this.getDecodeFinderCounters(),S=new Int32Array(_.length);R.arraycopy(_,0,S,1,_.length-1),S[0]=x;const E=this.parseFinderValue(S,mn.FINDER_PATTERNS);let D=p,U=u[1];return l&&(D=r.getSize()-1-D,U=r.getSize()-1-U),new wt(E,[p,u[1]],D,U,s)}adjustOddEvenCounts(r,s){let l=nt.sum(new Int32Array(this.getOddCounts())),u=nt.sum(new Int32Array(this.getEvenCounts())),d=!1,p=!1,x=!1,_=!1;r?(l>12?p=!0:l<4&&(d=!0),u>12?_=!0:u<4&&(x=!0)):(l>11?p=!0:l<5&&(d=!0),u>10?_=!0:u<4&&(x=!0));let S=l+u-s,E=(l&1)===(r?1:0),D=(u&1)===1;if(S===1)if(E){if(D)throw new ae;p=!0}else{if(!D)throw new ae;_=!0}else if(S===-1)if(E){if(D)throw new ae;d=!0}else{if(!D)throw new ae;x=!0}else if(S===0){if(E){if(!D)throw new ae;l<u?(d=!0,_=!0):(p=!0,x=!0)}else if(D)throw new ae}else throw new ae;if(d){if(p)throw new ae;Pe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&Pe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(_)throw new ae;Pe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&Pe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}mn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],mn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],mn.OUTSIDE_GSUM=[0,161,961,2015,2715],mn.INSIDE_GSUM=[0,336,1036,1516],mn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],mn.INSIDE_ODD_WIDEST=[2,4,6,8],mn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Vi extends He{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const l=r?r.get(G.POSSIBLE_FORMATS):null,u=r&&r.get(G.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(oe.EAN_13)||l.includes(oe.UPC_A)||l.includes(oe.EAN_8)||l.includes(oe.UPC_E))&&this.readers.push(new we(r)),l.includes(oe.CODE_39)&&this.readers.push(new jt(u)),l.includes(oe.CODE_128)&&this.readers.push(new _e),l.includes(oe.ITF)&&this.readers.push(new $e),l.includes(oe.RSS_14)&&this.readers.push(new mn),l.includes(oe.RSS_EXPANDED)&&this.readers.push(new be(this.verbose))):(this.readers.push(new we(r)),this.readers.push(new jt),this.readers.push(new we(r)),this.readers.push(new _e),this.readers.push(new $e),this.readers.push(new mn),this.readers.push(new be(this.verbose)))}decodeRow(r,s,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(r,s,l)}catch{}throw new ae}reset(){this.readers.forEach(r=>r.reset())}}class Lo extends qe{constructor(r=500,s){super(new Vi(s),r,s)}}class Ft{constructor(r,s,l){this.ecCodewords=r,this.ecBlocks=[s],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Bt{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ct{constructor(r,s,l,u,d,p){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=d,this.ecBlocks=p;let x=0;const _=p.getECCodewords(),S=p.getECBlocks();for(let E of S)x+=E.getCount()*(E.getDataCodewords()+_);this.totalCodewords=x}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if(r&1||s&1)throw new H;for(let l of Ct.VERSIONS)if(l.symbolSizeRows===r&&l.symbolSizeColumns===s)return l;throw new H}toString(){return""+this.versionNumber}static buildVersions(){return[new Ct(1,10,10,8,8,new Ft(5,new Bt(1,3))),new Ct(2,12,12,10,10,new Ft(7,new Bt(1,5))),new Ct(3,14,14,12,12,new Ft(10,new Bt(1,8))),new Ct(4,16,16,14,14,new Ft(12,new Bt(1,12))),new Ct(5,18,18,16,16,new Ft(14,new Bt(1,18))),new Ct(6,20,20,18,18,new Ft(18,new Bt(1,22))),new Ct(7,22,22,20,20,new Ft(20,new Bt(1,30))),new Ct(8,24,24,22,22,new Ft(24,new Bt(1,36))),new Ct(9,26,26,24,24,new Ft(28,new Bt(1,44))),new Ct(10,32,32,14,14,new Ft(36,new Bt(1,62))),new Ct(11,36,36,16,16,new Ft(42,new Bt(1,86))),new Ct(12,40,40,18,18,new Ft(48,new Bt(1,114))),new Ct(13,44,44,20,20,new Ft(56,new Bt(1,144))),new Ct(14,48,48,22,22,new Ft(68,new Bt(1,174))),new Ct(15,52,52,24,24,new Ft(42,new Bt(2,102))),new Ct(16,64,64,14,14,new Ft(56,new Bt(2,140))),new Ct(17,72,72,16,16,new Ft(36,new Bt(4,92))),new Ct(18,80,80,18,18,new Ft(48,new Bt(4,114))),new Ct(19,88,88,20,20,new Ft(56,new Bt(4,144))),new Ct(20,96,96,22,22,new Ft(68,new Bt(4,174))),new Ct(21,104,104,24,24,new Ft(56,new Bt(6,136))),new Ct(22,120,120,18,18,new Ft(68,new Bt(6,175))),new Ct(23,132,132,20,20,new Ft(62,new Bt(8,163))),new Ct(24,144,144,22,22,new Ft(62,new Bt(8,156),new Bt(2,155))),new Ct(25,8,18,6,16,new Ft(7,new Bt(1,5))),new Ct(26,8,32,6,14,new Ft(11,new Bt(1,10))),new Ct(27,12,26,10,24,new Ft(14,new Bt(1,16))),new Ct(28,12,36,10,16,new Ft(18,new Bt(1,22))),new Ct(29,16,36,14,16,new Ft(24,new Bt(1,32))),new Ct(30,16,48,14,22,new Ft(28,new Bt(1,49)))]}}Ct.VERSIONS=Ct.buildVersions();class Lt{constructor(r){const s=r.getHeight();if(s<8||s>144||s&1)throw new H;this.version=Lt.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new Ee(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),l=r.getWidth();return Ct.getVersionForDimensions(s,l)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,l=4,u=0;const d=this.mappingBitMatrix.getHeight(),p=this.mappingBitMatrix.getWidth();let x=!1,_=!1,S=!1,E=!1;do if(l===d&&u===0&&!x)r[s++]=this.readCorner1(d,p)&255,l-=2,u+=2,x=!0;else if(l===d-2&&u===0&&p&3&&!_)r[s++]=this.readCorner2(d,p)&255,l-=2,u+=2,_=!0;else if(l===d+4&&u===2&&!(p&7)&&!S)r[s++]=this.readCorner3(d,p)&255,l-=2,u+=2,S=!0;else if(l===d-2&&u===0&&(p&7)===4&&!E)r[s++]=this.readCorner4(d,p)&255,l-=2,u+=2,E=!0;else{do l<d&&u>=0&&!this.readMappingMatrix.get(u,l)&&(r[s++]=this.readUtah(l,u,d,p)&255),l-=2,u+=2;while(l>=0&&u<p);l+=1,u+=3;do l>=0&&u<p&&!this.readMappingMatrix.get(u,l)&&(r[s++]=this.readUtah(l,u,d,p)&255),l+=2,u-=2;while(l<d&&u>=0);l+=3,u+=1}while(l<d||u<p);if(s!==this.version.getTotalCodewords())throw new H;return r}readModule(r,s,l,u){return r<0&&(r+=l,s+=4-(l+4&7)),s<0&&(s+=u,r+=4-(u+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,l,u){let d=0;return this.readModule(r-2,s-2,l,u)&&(d|=1),d<<=1,this.readModule(r-2,s-1,l,u)&&(d|=1),d<<=1,this.readModule(r-1,s-2,l,u)&&(d|=1),d<<=1,this.readModule(r-1,s-1,l,u)&&(d|=1),d<<=1,this.readModule(r-1,s,l,u)&&(d|=1),d<<=1,this.readModule(r,s-2,l,u)&&(d|=1),d<<=1,this.readModule(r,s-1,l,u)&&(d|=1),d<<=1,this.readModule(r,s,l,u)&&(d|=1),d}readCorner1(r,s){let l=0;return this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,1,r,s)&&(l|=1),l<<=1,this.readModule(r-1,2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l<<=1,this.readModule(2,s-1,r,s)&&(l|=1),l<<=1,this.readModule(3,s-1,r,s)&&(l|=1),l}readCorner2(r,s){let l=0;return this.readModule(r-3,0,r,s)&&(l|=1),l<<=1,this.readModule(r-2,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(0,s-4,r,s)&&(l|=1),l<<=1,this.readModule(0,s-3,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l}readCorner3(r,s){let l=0;return this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,s-1,r,s)&&(l|=1),l<<=1,this.readModule(0,s-3,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-3,r,s)&&(l|=1),l<<=1,this.readModule(1,s-2,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l}readCorner4(r,s){let l=0;return this.readModule(r-3,0,r,s)&&(l|=1),l<<=1,this.readModule(r-2,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l<<=1,this.readModule(2,s-1,r,s)&&(l|=1),l<<=1,this.readModule(3,s-1,r,s)&&(l|=1),l}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new b("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),p=s/u|0,x=l/d|0,_=p*u,S=x*d,E=new Ee(S,_);for(let D=0;D<p;++D){const U=D*u;for(let Y=0;Y<x;++Y){const J=Y*d;for(let te=0;te<u;++te){const le=D*(u+2)+1+te,he=U+te;for(let Ne=0;Ne<d;++Ne){const Te=Y*(d+2)+1+Ne;if(r.get(Te,le)){const Ae=J+Ne;E.set(Ae,he)}}}}}return E}}class tn{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const l=s.getECBlocks();let u=0;const d=l.getECBlocks();for(let te of d)u+=te.getCount();const p=new Array(u);let x=0;for(let te of d)for(let le=0;le<te.getCount();le++){const he=te.getDataCodewords(),Ne=l.getECCodewords()+he;p[x++]=new tn(he,new Uint8Array(Ne))}const S=p[0].codewords.length-l.getECCodewords(),E=S-1;let D=0;for(let te=0;te<E;te++)for(let le=0;le<x;le++)p[le].codewords[te]=r[D++];const U=s.getVersionNumber()===24,Y=U?8:x;for(let te=0;te<Y;te++)p[te].codewords[S-1]=r[D++];const J=p[0].codewords.length;for(let te=S;te<J;te++)for(let le=0;le<x;le++){const he=U?(le+8)%x:le,Ne=U&&he>7?te-1:te;p[he].codewords[Ne]=r[D++]}if(D!==r.length)throw new b;return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ps{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new b(""+r);let s=0,l=this.bitOffset,u=this.byteOffset;const d=this.bytes;if(l>0){const p=8-l,x=r<p?r:p,_=p-x,S=255>>8-x<<_;s=(d[u]&S)>>_,r-=x,l+=x,l===8&&(l=0,u++)}if(r>0){for(;r>=8;)s=s<<8|d[u]&255,u++,r-=8;if(r>0){const p=8-r,x=255>>p<<p;s=s<<r|(d[u]&x)>>p,l+=r}}return this.bitOffset=l,this.byteOffset=u,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var sn;(function(P){P[P.PAD_ENCODE=0]="PAD_ENCODE",P[P.ASCII_ENCODE=1]="ASCII_ENCODE",P[P.C40_ENCODE=2]="C40_ENCODE",P[P.TEXT_ENCODE=3]="TEXT_ENCODE",P[P.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",P[P.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",P[P.BASE256_ENCODE=6]="BASE256_ENCODE"})(sn||(sn={}));class yr{static decode(r){const s=new Ps(r),l=new ve,u=new ve,d=new Array;let p=sn.ASCII_ENCODE;do if(p===sn.ASCII_ENCODE)p=this.decodeAsciiSegment(s,l,u);else{switch(p){case sn.C40_ENCODE:this.decodeC40Segment(s,l);break;case sn.TEXT_ENCODE:this.decodeTextSegment(s,l);break;case sn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,l);break;case sn.EDIFACT_ENCODE:this.decodeEdifactSegment(s,l);break;case sn.BASE256_ENCODE:this.decodeBase256Segment(s,l,d);break;default:throw new H}p=sn.ASCII_ENCODE}while(p!==sn.PAD_ENCODE&&s.available()>0);return u.length()>0&&l.append(u.toString()),new Nt(r,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(r,s,l){let u=!1;do{let d=r.readBits(8);if(d===0)throw new H;if(d<=128)return u&&(d+=128),s.append(String.fromCharCode(d-1)),sn.ASCII_ENCODE;if(d===129)return sn.PAD_ENCODE;if(d<=229){const p=d-130;p<10&&s.append("0"),s.append(""+p)}else switch(d){case 230:return sn.C40_ENCODE;case 231:return sn.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:s.append("[)>05"),l.insert(0,"");break;case 237:s.append("[)>06"),l.insert(0,"");break;case 238:return sn.ANSIX12_ENCODE;case 239:return sn.TEXT_ENCODE;case 240:return sn.EDIFACT_ENCODE;case 241:break;default:if(d!==254||r.available()!==0)throw new H;break}}while(r.available()>0);return sn.ASCII_ENCODE}static decodeC40Segment(r,s){let l=!1;const u=[];let d=0;do{if(r.available()===8)return;const p=r.readBits(8);if(p===254)return;this.parseTwoBytes(p,r.readBits(8),u);for(let x=0;x<3;x++){const _=u[x];switch(d){case 0:if(_<3)d=_+1;else if(_<this.C40_BASIC_SET_CHARS.length){const S=this.C40_BASIC_SET_CHARS[_];l?(s.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):s.append(S)}else throw new H;break;case 1:l?(s.append(String.fromCharCode(_+128)),l=!1):s.append(String.fromCharCode(_)),d=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length){const S=this.C40_SHIFT2_SET_CHARS[_];l?(s.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):s.append(S)}else switch(_){case 27:s.append("");break;case 30:l=!0;break;default:throw new H}d=0;break;case 3:l?(s.append(String.fromCharCode(_+224)),l=!1):s.append(String.fromCharCode(_+96)),d=0;break;default:throw new H}}}while(r.available()>0)}static decodeTextSegment(r,s){let l=!1,u=[],d=0;do{if(r.available()===8)return;const p=r.readBits(8);if(p===254)return;this.parseTwoBytes(p,r.readBits(8),u);for(let x=0;x<3;x++){const _=u[x];switch(d){case 0:if(_<3)d=_+1;else if(_<this.TEXT_BASIC_SET_CHARS.length){const S=this.TEXT_BASIC_SET_CHARS[_];l?(s.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):s.append(S)}else throw new H;break;case 1:l?(s.append(String.fromCharCode(_+128)),l=!1):s.append(String.fromCharCode(_)),d=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length){const S=this.TEXT_SHIFT2_SET_CHARS[_];l?(s.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):s.append(S)}else switch(_){case 27:s.append("");break;case 30:l=!0;break;default:throw new H}d=0;break;case 3:if(_<this.TEXT_SHIFT3_SET_CHARS.length){const S=this.TEXT_SHIFT3_SET_CHARS[_];l?(s.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):s.append(S),d=0}else throw new H;break;default:throw new H}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const l=[];do{if(r.available()===8)return;const u=r.readBits(8);if(u===254)return;this.parseTwoBytes(u,r.readBits(8),l);for(let d=0;d<3;d++){const p=l[d];switch(p){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(p<14)s.append(String.fromCharCode(p+44));else if(p<40)s.append(String.fromCharCode(p+51));else throw new H;break}}}while(r.available()>0)}static parseTwoBytes(r,s,l){let u=(r<<8)+s-1,d=Math.floor(u/1600);l[0]=d,u-=d*1600,d=Math.floor(u/40),l[1]=d,l[2]=u-d*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let l=0;l<4;l++){let u=r.readBits(6);if(u===31){const d=8-r.getBitOffset();d!==8&&r.readBits(d);return}u&32||(u|=64),s.append(String.fromCharCode(u))}}while(r.available()>0)}static decodeBase256Segment(r,s,l){let u=1+r.getByteOffset();const d=this.unrandomize255State(r.readBits(8),u++);let p;if(d===0?p=r.available()/8|0:d<250?p=d:p=250*(d-249)+this.unrandomize255State(r.readBits(8),u++),p<0)throw new H;const x=new Uint8Array(p);for(let _=0;_<p;_++){if(r.available()<8)throw new H;x[_]=this.unrandomize255State(r.readBits(8),u++)}l.push(x);try{s.append(ie.decode(x,se.ISO88591))}catch(_){throw new Rt("Platform does not support required encoding: "+_.message)}}static unrandomize255State(r,s){const l=149*s%255+1,u=r-l;return u>=0?u:u+256}}yr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],yr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],yr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],yr.TEXT_SHIFT2_SET_CHARS=yr.C40_SHIFT2_SET_CHARS,yr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class bl{constructor(){this.rsDecoder=new Wt(Ze.DATA_MATRIX_FIELD_256)}decode(r){const s=new Lt(r),l=s.getVersion(),u=s.readCodewords(),d=tn.getDataBlocks(u,l);let p=0;for(let S of d)p+=S.getNumDataCodewords();const x=new Uint8Array(p),_=d.length;for(let S=0;S<_;S++){const E=d[S],D=E.getCodewords(),U=E.getNumDataCodewords();this.correctErrors(D,U);for(let Y=0;Y<U;Y++)x[Y*_+S]=D[Y]}return yr.decode(x)}correctErrors(r,s){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-s)}catch{throw new I}for(let u=0;u<s;u++)r[u]=l[u]}}class Qe{constructor(r){this.image=r,this.rectangleDetector=new gr(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new ae;s=this.shiftToModuleCenter(s);const l=s[0],u=s[1],d=s[2],p=s[3];let x=this.transitionsBetween(l,p)+1,_=this.transitionsBetween(d,p)+1;(x&1)===1&&(x+=1),(_&1)===1&&(_+=1),4*x<7*_&&4*_<7*x&&(x=_=Math.max(x,_));let S=Qe.sampleGrid(this.image,l,u,d,p,x,_);return new rr(S,[l,u,d,p])}static shiftPoint(r,s,l){let u=(s.getX()-r.getX())/(l+1),d=(s.getY()-r.getY())/(l+1);return new Re(r.getX()+u,r.getY()+d)}static moveAway(r,s,l){let u=r.getX(),d=r.getY();return u<s?u-=1:u+=1,d<l?d-=1:d+=1,new Re(u,d)}detectSolid1(r){let s=r[0],l=r[1],u=r[3],d=r[2],p=this.transitionsBetween(s,l),x=this.transitionsBetween(l,u),_=this.transitionsBetween(u,d),S=this.transitionsBetween(d,s),E=p,D=[d,s,l,u];return E>x&&(E=x,D[0]=s,D[1]=l,D[2]=u,D[3]=d),E>_&&(E=_,D[0]=l,D[1]=u,D[2]=d,D[3]=s),E>S&&(D[0]=u,D[1]=d,D[2]=s,D[3]=l),D}detectSolid2(r){let s=r[0],l=r[1],u=r[2],d=r[3],p=this.transitionsBetween(s,d),x=Qe.shiftPoint(l,u,(p+1)*4),_=Qe.shiftPoint(u,l,(p+1)*4),S=this.transitionsBetween(x,s),E=this.transitionsBetween(_,d);return S<E?(r[0]=s,r[1]=l,r[2]=u,r[3]=d):(r[0]=l,r[1]=u,r[2]=d,r[3]=s),r}correctTopRight(r){let s=r[0],l=r[1],u=r[2],d=r[3],p=this.transitionsBetween(s,d),x=this.transitionsBetween(l,d),_=Qe.shiftPoint(s,l,(x+1)*4),S=Qe.shiftPoint(u,l,(p+1)*4);p=this.transitionsBetween(_,d),x=this.transitionsBetween(S,d);let E=new Re(d.getX()+(u.getX()-l.getX())/(p+1),d.getY()+(u.getY()-l.getY())/(p+1)),D=new Re(d.getX()+(s.getX()-l.getX())/(x+1),d.getY()+(s.getY()-l.getY())/(x+1));if(!this.isValid(E))return this.isValid(D)?D:null;if(!this.isValid(D))return E;let U=this.transitionsBetween(_,E)+this.transitionsBetween(S,E),Y=this.transitionsBetween(_,D)+this.transitionsBetween(S,D);return U>Y?E:D}shiftToModuleCenter(r){let s=r[0],l=r[1],u=r[2],d=r[3],p=this.transitionsBetween(s,d)+1,x=this.transitionsBetween(u,d)+1,_=Qe.shiftPoint(s,l,x*4),S=Qe.shiftPoint(u,l,p*4);p=this.transitionsBetween(_,d)+1,x=this.transitionsBetween(S,d)+1,(p&1)===1&&(p+=1),(x&1)===1&&(x+=1);let E=(s.getX()+l.getX()+u.getX()+d.getX())/4,D=(s.getY()+l.getY()+u.getY()+d.getY())/4;s=Qe.moveAway(s,E,D),l=Qe.moveAway(l,E,D),u=Qe.moveAway(u,E,D),d=Qe.moveAway(d,E,D);let U,Y;return _=Qe.shiftPoint(s,l,x*4),_=Qe.shiftPoint(_,d,p*4),U=Qe.shiftPoint(l,s,x*4),U=Qe.shiftPoint(U,u,p*4),S=Qe.shiftPoint(u,d,x*4),S=Qe.shiftPoint(S,l,p*4),Y=Qe.shiftPoint(d,u,x*4),Y=Qe.shiftPoint(Y,s,p*4),[_,U,S,Y]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,l,u,d,p,x){return Je.getInstance().sampleGrid(r,p,x,.5,.5,p-.5,.5,p-.5,x-.5,.5,x-.5,s.getX(),s.getY(),d.getX(),d.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(r,s){let l=Math.trunc(r.getX()),u=Math.trunc(r.getY()),d=Math.trunc(s.getX()),p=Math.trunc(s.getY()),x=Math.abs(p-u)>Math.abs(d-l);if(x){let te=l;l=u,u=te,te=d,d=p,p=te}let _=Math.abs(d-l),S=Math.abs(p-u),E=-_/2,D=u<p?1:-1,U=l<d?1:-1,Y=0,J=this.image.get(x?u:l,x?l:u);for(let te=l,le=u;te!==d;te+=U){let he=this.image.get(x?le:te,x?te:le);if(he!==J&&(Y++,J=he),E+=S,E>0){if(le===p)break;le+=D,E-=_}}return Y}}class Zt{constructor(){this.decoder=new bl}decode(r,s=null){let l,u;if(s!=null&&s.has(G.PURE_BARCODE)){const S=Zt.extractPureBits(r.getBlackMatrix());l=this.decoder.decode(S),u=Zt.NO_POINTS}else{const S=new Qe(r.getBlackMatrix()).detect();l=this.decoder.decode(S.getBits()),u=S.getPoints()}const d=l.getRawBytes(),p=new De(l.getText(),d,8*d.length,u,oe.DATA_MATRIX,R.currentTimeMillis()),x=l.getByteSegments();x!=null&&p.putMetadata(at.BYTE_SEGMENTS,x);const _=l.getECLevel();return _!=null&&p.putMetadata(at.ERROR_CORRECTION_LEVEL,_),p}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(s==null||l==null)throw new ae;const u=this.moduleSize(s,r);let d=s[1];const p=l[1];let x=s[0];const S=(l[0]-x+1)/u,E=(p-d+1)/u;if(S<=0||E<=0)throw new ae;const D=u/2;d+=D,x+=D;const U=new Ee(S,E);for(let Y=0;Y<E;Y++){const J=d+Y*u;for(let te=0;te<S;te++)r.get(x+te*u,J)&&U.set(te,Y)}return U}static moduleSize(r,s){const l=s.getWidth();let u=r[0];const d=r[1];for(;u<l&&s.get(u,d);)u++;if(u===l)throw new ae;const p=u-r[0];if(p===0)throw new ae;return p}}Zt.NO_POINTS=[];class Cl extends qe{constructor(r=500){super(new Zt,r)}}var Ci;(function(P){P[P.L=0]="L",P[P.M=1]="M",P[P.Q=2]="Q",P[P.H=3]="H"})(Ci||(Ci={}));class At{constructor(r,s,l){this.value=r,this.stringValue=s,this.bits=l,At.FOR_BITS.set(l,this),At.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return At.L;case"M":return At.M;case"Q":return At.Q;case"H":return At.H;default:throw new C(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof At))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=At.FOR_BITS.size)throw new b;return At.FOR_BITS.get(r)}}At.FOR_BITS=new Map,At.FOR_VALUE=new Map,At.L=new At(Ci.L,"L",1),At.M=new At(Ci.M,"M",0),At.Q=new At(Ci.Q,"Q",3),At.H=new At(Ci.H,"H",2);class Yn{constructor(r){this.errorCorrectionLevel=At.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return k.bitCount(r^s)}static decodeFormatInformation(r,s){const l=Yn.doDecodeFormatInformation(r,s);return l!==null?l:Yn.doDecodeFormatInformation(r^Yn.FORMAT_INFO_MASK_QR,s^Yn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let l=Number.MAX_SAFE_INTEGER,u=0;for(const d of Yn.FORMAT_INFO_DECODE_LOOKUP){const p=d[0];if(p===r||p===s)return new Yn(d[1]);let x=Yn.numBitsDiffering(r,p);x<l&&(u=d[1],l=x),r!==s&&(x=Yn.numBitsDiffering(s,p),x<l&&(u=d[1],l=x))}return l<=3?new Yn(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof Yn))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}Yn.FORMAT_INFO_MASK_QR=21522,Yn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ce{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const l of s)r+=l.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Z{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Be{constructor(r,s,...l){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=l;let u=0;const d=l[0].getECCodewordsPerBlock(),p=l[0].getECBlocks();for(const x of p)u+=x.getCount()*(x.getDataCodewords()+d);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new H;try{return this.getVersionForNumber((r-17)/4)}catch{throw new H}}static getVersionForNumber(r){if(r<1||r>40)throw new b;return Be.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<Be.VERSION_DECODE_INFO.length;u++){const d=Be.VERSION_DECODE_INFO[u];if(d===r)return Be.getVersionForNumber(u+7);const p=Yn.numBitsDiffering(r,d);p<s&&(l=u+7,s=p)}return s<=3?Be.getVersionForNumber(l):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new Ee(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){const d=this.alignmentPatternCenters[u]-2;for(let p=0;p<l;p++)u===0&&(p===0||p===l-1)||u===l-1&&p===0||s.setRegion(this.alignmentPatternCenters[p]-2,d,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}Be.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Be.VERSIONS=[new Be(1,new Int32Array(0),new ce(7,new Z(1,19)),new ce(10,new Z(1,16)),new ce(13,new Z(1,13)),new ce(17,new Z(1,9))),new Be(2,Int32Array.from([6,18]),new ce(10,new Z(1,34)),new ce(16,new Z(1,28)),new ce(22,new Z(1,22)),new ce(28,new Z(1,16))),new Be(3,Int32Array.from([6,22]),new ce(15,new Z(1,55)),new ce(26,new Z(1,44)),new ce(18,new Z(2,17)),new ce(22,new Z(2,13))),new Be(4,Int32Array.from([6,26]),new ce(20,new Z(1,80)),new ce(18,new Z(2,32)),new ce(26,new Z(2,24)),new ce(16,new Z(4,9))),new Be(5,Int32Array.from([6,30]),new ce(26,new Z(1,108)),new ce(24,new Z(2,43)),new ce(18,new Z(2,15),new Z(2,16)),new ce(22,new Z(2,11),new Z(2,12))),new Be(6,Int32Array.from([6,34]),new ce(18,new Z(2,68)),new ce(16,new Z(4,27)),new ce(24,new Z(4,19)),new ce(28,new Z(4,15))),new Be(7,Int32Array.from([6,22,38]),new ce(20,new Z(2,78)),new ce(18,new Z(4,31)),new ce(18,new Z(2,14),new Z(4,15)),new ce(26,new Z(4,13),new Z(1,14))),new Be(8,Int32Array.from([6,24,42]),new ce(24,new Z(2,97)),new ce(22,new Z(2,38),new Z(2,39)),new ce(22,new Z(4,18),new Z(2,19)),new ce(26,new Z(4,14),new Z(2,15))),new Be(9,Int32Array.from([6,26,46]),new ce(30,new Z(2,116)),new ce(22,new Z(3,36),new Z(2,37)),new ce(20,new Z(4,16),new Z(4,17)),new ce(24,new Z(4,12),new Z(4,13))),new Be(10,Int32Array.from([6,28,50]),new ce(18,new Z(2,68),new Z(2,69)),new ce(26,new Z(4,43),new Z(1,44)),new ce(24,new Z(6,19),new Z(2,20)),new ce(28,new Z(6,15),new Z(2,16))),new Be(11,Int32Array.from([6,30,54]),new ce(20,new Z(4,81)),new ce(30,new Z(1,50),new Z(4,51)),new ce(28,new Z(4,22),new Z(4,23)),new ce(24,new Z(3,12),new Z(8,13))),new Be(12,Int32Array.from([6,32,58]),new ce(24,new Z(2,92),new Z(2,93)),new ce(22,new Z(6,36),new Z(2,37)),new ce(26,new Z(4,20),new Z(6,21)),new ce(28,new Z(7,14),new Z(4,15))),new Be(13,Int32Array.from([6,34,62]),new ce(26,new Z(4,107)),new ce(22,new Z(8,37),new Z(1,38)),new ce(24,new Z(8,20),new Z(4,21)),new ce(22,new Z(12,11),new Z(4,12))),new Be(14,Int32Array.from([6,26,46,66]),new ce(30,new Z(3,115),new Z(1,116)),new ce(24,new Z(4,40),new Z(5,41)),new ce(20,new Z(11,16),new Z(5,17)),new ce(24,new Z(11,12),new Z(5,13))),new Be(15,Int32Array.from([6,26,48,70]),new ce(22,new Z(5,87),new Z(1,88)),new ce(24,new Z(5,41),new Z(5,42)),new ce(30,new Z(5,24),new Z(7,25)),new ce(24,new Z(11,12),new Z(7,13))),new Be(16,Int32Array.from([6,26,50,74]),new ce(24,new Z(5,98),new Z(1,99)),new ce(28,new Z(7,45),new Z(3,46)),new ce(24,new Z(15,19),new Z(2,20)),new ce(30,new Z(3,15),new Z(13,16))),new Be(17,Int32Array.from([6,30,54,78]),new ce(28,new Z(1,107),new Z(5,108)),new ce(28,new Z(10,46),new Z(1,47)),new ce(28,new Z(1,22),new Z(15,23)),new ce(28,new Z(2,14),new Z(17,15))),new Be(18,Int32Array.from([6,30,56,82]),new ce(30,new Z(5,120),new Z(1,121)),new ce(26,new Z(9,43),new Z(4,44)),new ce(28,new Z(17,22),new Z(1,23)),new ce(28,new Z(2,14),new Z(19,15))),new Be(19,Int32Array.from([6,30,58,86]),new ce(28,new Z(3,113),new Z(4,114)),new ce(26,new Z(3,44),new Z(11,45)),new ce(26,new Z(17,21),new Z(4,22)),new ce(26,new Z(9,13),new Z(16,14))),new Be(20,Int32Array.from([6,34,62,90]),new ce(28,new Z(3,107),new Z(5,108)),new ce(26,new Z(3,41),new Z(13,42)),new ce(30,new Z(15,24),new Z(5,25)),new ce(28,new Z(15,15),new Z(10,16))),new Be(21,Int32Array.from([6,28,50,72,94]),new ce(28,new Z(4,116),new Z(4,117)),new ce(26,new Z(17,42)),new ce(28,new Z(17,22),new Z(6,23)),new ce(30,new Z(19,16),new Z(6,17))),new Be(22,Int32Array.from([6,26,50,74,98]),new ce(28,new Z(2,111),new Z(7,112)),new ce(28,new Z(17,46)),new ce(30,new Z(7,24),new Z(16,25)),new ce(24,new Z(34,13))),new Be(23,Int32Array.from([6,30,54,78,102]),new ce(30,new Z(4,121),new Z(5,122)),new ce(28,new Z(4,47),new Z(14,48)),new ce(30,new Z(11,24),new Z(14,25)),new ce(30,new Z(16,15),new Z(14,16))),new Be(24,Int32Array.from([6,28,54,80,106]),new ce(30,new Z(6,117),new Z(4,118)),new ce(28,new Z(6,45),new Z(14,46)),new ce(30,new Z(11,24),new Z(16,25)),new ce(30,new Z(30,16),new Z(2,17))),new Be(25,Int32Array.from([6,32,58,84,110]),new ce(26,new Z(8,106),new Z(4,107)),new ce(28,new Z(8,47),new Z(13,48)),new ce(30,new Z(7,24),new Z(22,25)),new ce(30,new Z(22,15),new Z(13,16))),new Be(26,Int32Array.from([6,30,58,86,114]),new ce(28,new Z(10,114),new Z(2,115)),new ce(28,new Z(19,46),new Z(4,47)),new ce(28,new Z(28,22),new Z(6,23)),new ce(30,new Z(33,16),new Z(4,17))),new Be(27,Int32Array.from([6,34,62,90,118]),new ce(30,new Z(8,122),new Z(4,123)),new ce(28,new Z(22,45),new Z(3,46)),new ce(30,new Z(8,23),new Z(26,24)),new ce(30,new Z(12,15),new Z(28,16))),new Be(28,Int32Array.from([6,26,50,74,98,122]),new ce(30,new Z(3,117),new Z(10,118)),new ce(28,new Z(3,45),new Z(23,46)),new ce(30,new Z(4,24),new Z(31,25)),new ce(30,new Z(11,15),new Z(31,16))),new Be(29,Int32Array.from([6,30,54,78,102,126]),new ce(30,new Z(7,116),new Z(7,117)),new ce(28,new Z(21,45),new Z(7,46)),new ce(30,new Z(1,23),new Z(37,24)),new ce(30,new Z(19,15),new Z(26,16))),new Be(30,Int32Array.from([6,26,52,78,104,130]),new ce(30,new Z(5,115),new Z(10,116)),new ce(28,new Z(19,47),new Z(10,48)),new ce(30,new Z(15,24),new Z(25,25)),new ce(30,new Z(23,15),new Z(25,16))),new Be(31,Int32Array.from([6,30,56,82,108,134]),new ce(30,new Z(13,115),new Z(3,116)),new ce(28,new Z(2,46),new Z(29,47)),new ce(30,new Z(42,24),new Z(1,25)),new ce(30,new Z(23,15),new Z(28,16))),new Be(32,Int32Array.from([6,34,60,86,112,138]),new ce(30,new Z(17,115)),new ce(28,new Z(10,46),new Z(23,47)),new ce(30,new Z(10,24),new Z(35,25)),new ce(30,new Z(19,15),new Z(35,16))),new Be(33,Int32Array.from([6,30,58,86,114,142]),new ce(30,new Z(17,115),new Z(1,116)),new ce(28,new Z(14,46),new Z(21,47)),new ce(30,new Z(29,24),new Z(19,25)),new ce(30,new Z(11,15),new Z(46,16))),new Be(34,Int32Array.from([6,34,62,90,118,146]),new ce(30,new Z(13,115),new Z(6,116)),new ce(28,new Z(14,46),new Z(23,47)),new ce(30,new Z(44,24),new Z(7,25)),new ce(30,new Z(59,16),new Z(1,17))),new Be(35,Int32Array.from([6,30,54,78,102,126,150]),new ce(30,new Z(12,121),new Z(7,122)),new ce(28,new Z(12,47),new Z(26,48)),new ce(30,new Z(39,24),new Z(14,25)),new ce(30,new Z(22,15),new Z(41,16))),new Be(36,Int32Array.from([6,24,50,76,102,128,154]),new ce(30,new Z(6,121),new Z(14,122)),new ce(28,new Z(6,47),new Z(34,48)),new ce(30,new Z(46,24),new Z(10,25)),new ce(30,new Z(2,15),new Z(64,16))),new Be(37,Int32Array.from([6,28,54,80,106,132,158]),new ce(30,new Z(17,122),new Z(4,123)),new ce(28,new Z(29,46),new Z(14,47)),new ce(30,new Z(49,24),new Z(10,25)),new ce(30,new Z(24,15),new Z(46,16))),new Be(38,Int32Array.from([6,32,58,84,110,136,162]),new ce(30,new Z(4,122),new Z(18,123)),new ce(28,new Z(13,46),new Z(32,47)),new ce(30,new Z(48,24),new Z(14,25)),new ce(30,new Z(42,15),new Z(32,16))),new Be(39,Int32Array.from([6,26,54,82,110,138,166]),new ce(30,new Z(20,117),new Z(4,118)),new ce(28,new Z(40,47),new Z(7,48)),new ce(30,new Z(43,24),new Z(22,25)),new ce(30,new Z(10,15),new Z(67,16))),new Be(40,Int32Array.from([6,30,58,86,114,142,170]),new ce(30,new Z(19,118),new Z(6,119)),new ce(28,new Z(18,47),new Z(31,48)),new ce(30,new Z(34,24),new Z(34,25)),new ce(30,new Z(20,15),new Z(61,16)))];var on;(function(P){P[P.DATA_MASK_000=0]="DATA_MASK_000",P[P.DATA_MASK_001=1]="DATA_MASK_001",P[P.DATA_MASK_010=2]="DATA_MASK_010",P[P.DATA_MASK_011=3]="DATA_MASK_011",P[P.DATA_MASK_100=4]="DATA_MASK_100",P[P.DATA_MASK_101=5]="DATA_MASK_101",P[P.DATA_MASK_110=6]="DATA_MASK_110",P[P.DATA_MASK_111=7]="DATA_MASK_111"})(on||(on={}));class Xn{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let l=0;l<s;l++)for(let u=0;u<s;u++)this.isMasked(l,u)&&r.flip(u,l)}}Xn.values=new Map([[on.DATA_MASK_000,new Xn(on.DATA_MASK_000,(P,r)=>(P+r&1)===0)],[on.DATA_MASK_001,new Xn(on.DATA_MASK_001,(P,r)=>(P&1)===0)],[on.DATA_MASK_010,new Xn(on.DATA_MASK_010,(P,r)=>r%3===0)],[on.DATA_MASK_011,new Xn(on.DATA_MASK_011,(P,r)=>(P+r)%3===0)],[on.DATA_MASK_100,new Xn(on.DATA_MASK_100,(P,r)=>(Math.floor(P/2)+Math.floor(r/3)&1)===0)],[on.DATA_MASK_101,new Xn(on.DATA_MASK_101,(P,r)=>P*r%6===0)],[on.DATA_MASK_110,new Xn(on.DATA_MASK_110,(P,r)=>P*r%6<3)],[on.DATA_MASK_111,new Xn(on.DATA_MASK_111,(P,r)=>(P+r+P*r%3&1)===0)]]);class Po{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new H;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let d=0;d<6;d++)r=this.copyBit(d,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let d=5;d>=0;d--)r=this.copyBit(8,d,r);const s=this.bitMatrix.getHeight();let l=0;const u=s-7;for(let d=s-1;d>=u;d--)l=this.copyBit(8,d,l);for(let d=s-8;d<s;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=Yn.decodeFormatInformation(r,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new H}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return Be.getVersionForNumber(s);let l=0;const u=r-11;for(let p=5;p>=0;p--)for(let x=r-9;x>=u;x--)l=this.copyBit(x,p,l);let d=Be.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;l=0;for(let p=5;p>=0;p--)for(let x=r-9;x>=u;x--)l=this.copyBit(p,x,l);if(d=Be.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;throw new H}copyBit(r,s,l){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?l<<1|1:l<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),l=Xn.values.get(r.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);const d=s.buildFunctionPattern();let p=!0;const x=new Uint8Array(s.getTotalCodewords());let _=0,S=0,E=0;for(let D=u-1;D>0;D-=2){D===6&&D--;for(let U=0;U<u;U++){const Y=p?u-1-U:U;for(let J=0;J<2;J++)d.get(D-J,Y)||(E++,S<<=1,this.bitMatrix.get(D-J,Y)&&(S|=1),E===8&&(x[_++]=S,E=0,S=0))}p=!p}if(_!==s.getTotalCodewords())throw new H;return x}remask(){if(this.parsedFormatInfo===null)return;const r=Xn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,l=r.getWidth();s<l;s++)for(let u=s+1,d=r.getHeight();u<d;u++)r.get(s,u)!==r.get(u,s)&&(r.flip(u,s),r.flip(s,u))}}class Do{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,l){if(r.length!==s.getTotalCodewords())throw new b;const u=s.getECBlocksForLevel(l);let d=0;const p=u.getECBlocks();for(const J of p)d+=J.getCount();const x=new Array(d);let _=0;for(const J of p)for(let te=0;te<J.getCount();te++){const le=J.getDataCodewords(),he=u.getECCodewordsPerBlock()+le;x[_++]=new Do(le,new Uint8Array(he))}const S=x[0].codewords.length;let E=x.length-1;for(;E>=0&&x[E].codewords.length!==S;)E--;E++;const D=S-u.getECCodewordsPerBlock();let U=0;for(let J=0;J<D;J++)for(let te=0;te<_;te++)x[te].codewords[J]=r[U++];for(let J=E;J<_;J++)x[J].codewords[D]=r[U++];const Y=x[0].codewords.length;for(let J=D;J<Y;J++)for(let te=0;te<_;te++){const le=te<E?J:J+1;x[te].codewords[le]=r[U++]}return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var qn;(function(P){P[P.TERMINATOR=0]="TERMINATOR",P[P.NUMERIC=1]="NUMERIC",P[P.ALPHANUMERIC=2]="ALPHANUMERIC",P[P.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",P[P.BYTE=4]="BYTE",P[P.ECI=5]="ECI",P[P.KANJI=6]="KANJI",P[P.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",P[P.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",P[P.HANZI=9]="HANZI"})(qn||(qn={}));class it{constructor(r,s,l,u){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=l,this.bits=u,it.FOR_BITS.set(u,this),it.FOR_VALUE.set(r,this)}static forBits(r){const s=it.FOR_BITS.get(r);if(s===void 0)throw new b;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let l;return s<=9?l=0:s<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof it))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}it.FOR_BITS=new Map,it.FOR_VALUE=new Map,it.TERMINATOR=new it(qn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),it.NUMERIC=new it(qn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),it.ALPHANUMERIC=new it(qn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),it.STRUCTURED_APPEND=new it(qn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),it.BYTE=new it(qn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),it.ECI=new it(qn.ECI,"ECI",Int32Array.from([0,0,0]),7),it.KANJI=new it(qn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),it.FNC1_FIRST_POSITION=new it(qn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),it.FNC1_SECOND_POSITION=new it(qn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),it.HANZI=new it(qn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class nn{static decode(r,s,l,u){const d=new Ps(r);let p=new ve;const x=new Array;let _=-1,S=-1;try{let E=null,D=!1,U;do{if(d.available()<4)U=it.TERMINATOR;else{const Y=d.readBits(4);U=it.forBits(Y)}switch(U){case it.TERMINATOR:break;case it.FNC1_FIRST_POSITION:case it.FNC1_SECOND_POSITION:D=!0;break;case it.STRUCTURED_APPEND:if(d.available()<16)throw new H;_=d.readBits(8),S=d.readBits(8);break;case it.ECI:const Y=nn.parseECIValue(d);if(E=M.getCharacterSetECIByValue(Y),E===null)throw new H;break;case it.HANZI:const J=d.readBits(4),te=d.readBits(U.getCharacterCountBits(s));J===nn.GB2312_SUBSET&&nn.decodeHanziSegment(d,p,te);break;default:const le=d.readBits(U.getCharacterCountBits(s));switch(U){case it.NUMERIC:nn.decodeNumericSegment(d,p,le);break;case it.ALPHANUMERIC:nn.decodeAlphanumericSegment(d,p,le,D);break;case it.BYTE:nn.decodeByteSegment(d,p,le,E,x,u);break;case it.KANJI:nn.decodeKanjiSegment(d,p,le);break;default:throw new H}break}}while(U!==it.TERMINATOR)}catch{throw new H}return new Nt(r,p.toString(),x.length===0?null:x,l===null?null:l.toString(),_,S)}static decodeHanziSegment(r,s,l){if(l*13>r.available())throw new H;const u=new Uint8Array(2*l);let d=0;for(;l>0;){const p=r.readBits(13);let x=p/96<<8&4294967295|p%96;x<959?x+=41377:x+=42657,u[d]=x>>8&255,u[d+1]=x&255,d+=2,l--}try{s.append(ie.decode(u,se.GB2312))}catch(p){throw new H(p)}}static decodeKanjiSegment(r,s,l){if(l*13>r.available())throw new H;const u=new Uint8Array(2*l);let d=0;for(;l>0;){const p=r.readBits(13);let x=p/192<<8&4294967295|p%192;x<7936?x+=33088:x+=49472,u[d]=x>>8,u[d+1]=x,d+=2,l--}try{s.append(ie.decode(u,se.SHIFT_JIS))}catch(p){throw new H(p)}}static decodeByteSegment(r,s,l,u,d,p){if(8*l>r.available())throw new H;const x=new Uint8Array(l);for(let S=0;S<l;S++)x[S]=r.readBits(8);let _;u===null?_=se.guessEncoding(x,p):_=u.getName();try{s.append(ie.decode(x,_))}catch(S){throw new H(S)}d.push(x)}static toAlphaNumericChar(r){if(r>=nn.ALPHANUMERIC_CHARS.length)throw new H;return nn.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,l,u){const d=s.length();for(;l>1;){if(r.available()<11)throw new H;const p=r.readBits(11);s.append(nn.toAlphaNumericChar(Math.floor(p/45))),s.append(nn.toAlphaNumericChar(p%45)),l-=2}if(l===1){if(r.available()<6)throw new H;s.append(nn.toAlphaNumericChar(r.readBits(6)))}if(u)for(let p=d;p<s.length();p++)s.charAt(p)==="%"&&(p<s.length()-1&&s.charAt(p+1)==="%"?s.deleteCharAt(p+1):s.setCharAt(p,""))}static decodeNumericSegment(r,s,l){for(;l>=3;){if(r.available()<10)throw new H;const u=r.readBits(10);if(u>=1e3)throw new H;s.append(nn.toAlphaNumericChar(Math.floor(u/100))),s.append(nn.toAlphaNumericChar(Math.floor(u/10)%10)),s.append(nn.toAlphaNumericChar(u%10)),l-=3}if(l===2){if(r.available()<7)throw new H;const u=r.readBits(7);if(u>=100)throw new H;s.append(nn.toAlphaNumericChar(Math.floor(u/10))),s.append(nn.toAlphaNumericChar(u%10))}else if(l===1){if(r.available()<4)throw new H;const u=r.readBits(4);if(u>=10)throw new H;s.append(nn.toAlphaNumericChar(u))}}static parseECIValue(r){const s=r.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const l=r.readBits(8);return(s&63)<<8&4294967295|l}if((s&224)===192){const l=r.readBits(16);return(s&31)<<16&4294967295|l}throw new H}}nn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",nn.GB2312_SUBSET=1;class jo{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class Sl{constructor(){this.rsDecoder=new Wt(Ze.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(Ee.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const l=new Po(r);let u=null;try{return this.decodeBitMatrixParser(l,s)}catch(d){u=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,s);return d.setOther(new jo(!0)),d}catch(d){throw u!==null?u:d}}decodeBitMatrixParser(r,s){const l=r.readVersion(),u=r.readFormatInformation().getErrorCorrectionLevel(),d=r.readCodewords(),p=Do.getDataBlocks(d,l,u);let x=0;for(const E of p)x+=E.getNumDataCodewords();const _=new Uint8Array(x);let S=0;for(const E of p){const D=E.getCodewords(),U=E.getNumDataCodewords();this.correctErrors(D,U);for(let Y=0;Y<U;Y++)_[S++]=D[Y]}return nn.decode(_,l,u,s)}correctErrors(r,s){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-s)}catch{throw new I}for(let u=0;u<s;u++)r[u]=l[u]}}class Bo extends Re{constructor(r,s,l){super(r,s),this.estimatedModuleSize=l}aboutEquals(r,s,l){if(Math.abs(s-this.getY())<=r&&Math.abs(l-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,s,l){const u=(this.getX()+s)/2,d=(this.getY()+r)/2,p=(this.estimatedModuleSize+l)/2;return new Bo(u,d,p)}}class as{constructor(r,s,l,u,d,p,x){this.image=r,this.startX=s,this.startY=l,this.width=u,this.height=d,this.moduleSize=p,this.resultPointCallback=x,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,l=this.width,u=r+l,d=this.startY+s/2,p=new Int32Array(3),x=this.image;for(let _=0;_<s;_++){const S=d+(_&1?-Math.floor((_+1)/2):Math.floor((_+1)/2));p[0]=0,p[1]=0,p[2]=0;let E=r;for(;E<u&&!x.get(E,S);)E++;let D=0;for(;E<u;){if(x.get(E,S))if(D===1)p[1]++;else if(D===2){if(this.foundPatternCross(p)){const U=this.handlePossibleCenter(p,S,E);if(U!==null)return U}p[0]=p[2],p[1]=1,p[2]=0,D=1}else p[++D]++;else D===1&&D++,p[D]++;E++}if(this.foundPatternCross(p)){const U=this.handlePossibleCenter(p,S,u);if(U!==null)return U}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ae}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,l=s/2;for(let u=0;u<3;u++)if(Math.abs(s-r[u])>=l)return!1;return!0}crossCheckVertical(r,s,l,u){const d=this.image,p=d.getHeight(),x=this.crossCheckStateCount;x[0]=0,x[1]=0,x[2]=0;let _=r;for(;_>=0&&d.get(s,_)&&x[1]<=l;)x[1]++,_--;if(_<0||x[1]>l)return NaN;for(;_>=0&&!d.get(s,_)&&x[0]<=l;)x[0]++,_--;if(x[0]>l)return NaN;for(_=r+1;_<p&&d.get(s,_)&&x[1]<=l;)x[1]++,_++;if(_===p||x[1]>l)return NaN;for(;_<p&&!d.get(s,_)&&x[2]<=l;)x[2]++,_++;if(x[2]>l)return NaN;const S=x[0]+x[1]+x[2];return 5*Math.abs(S-u)>=2*u?NaN:this.foundPatternCross(x)?as.centerFromEnd(x,_):NaN}handlePossibleCenter(r,s,l){const u=r[0]+r[1]+r[2],d=as.centerFromEnd(r,l),p=this.crossCheckVertical(s,d,2*r[1],u);if(!isNaN(p)){const x=(r[0]+r[1]+r[2])/3;for(const S of this.possibleCenters)if(S.aboutEquals(x,p,d))return S.combineEstimate(p,d,x);const _=new Bo(d,p,x);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null}}class ba extends Re{constructor(r,s,l,u){super(r,s),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,l){if(Math.abs(s-this.getY())<=r&&Math.abs(l-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,s,l){const u=this.count+1,d=(this.count*this.getX()+s)/u,p=(this.count*this.getY()+r)/u,x=(this.count*this.estimatedModuleSize+l)/u;return new ba(d,p,x,u)}}class Al{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class On{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(G.TRY_HARDER)!==void 0,l=r!=null&&r.get(G.PURE_BARCODE)!==void 0,u=this.image,d=u.getHeight(),p=u.getWidth();let x=Math.floor(3*d/(4*On.MAX_MODULES));(x<On.MIN_SKIP||s)&&(x=On.MIN_SKIP);let _=!1;const S=new Int32Array(5);for(let D=x-1;D<d&&!_;D+=x){S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0;let U=0;for(let Y=0;Y<p;Y++)if(u.get(Y,D))(U&1)===1&&U++,S[U]++;else if(U&1)S[U]++;else if(U===4)if(On.foundPatternCross(S)){if(this.handlePossibleCenter(S,D,Y,l)===!0)if(x=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{const te=this.findRowSkip();te>S[2]&&(D+=te-S[2]-x,Y=p-1)}else{S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,U=3;continue}U=0,S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0}else S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,U=3;else S[++U]++;On.foundPatternCross(S)&&this.handlePossibleCenter(S,D,p,l)===!0&&(x=S[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}const E=this.selectBestPatterns();return Re.orderBestPatterns(E),new Al(E)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let d=0;d<5;d++){const p=r[d];if(p===0)return!1;s+=p}if(s<7)return!1;const l=s/7,u=l/2;return Math.abs(l-r[0])<u&&Math.abs(l-r[1])<u&&Math.abs(3*l-r[2])<3*u&&Math.abs(l-r[3])<u&&Math.abs(l-r[4])<u}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,l,u){const d=this.getCrossCheckStateCount();let p=0;const x=this.image;for(;r>=p&&s>=p&&x.get(s-p,r-p);)d[2]++,p++;if(r<p||s<p)return!1;for(;r>=p&&s>=p&&!x.get(s-p,r-p)&&d[1]<=l;)d[1]++,p++;if(r<p||s<p||d[1]>l)return!1;for(;r>=p&&s>=p&&x.get(s-p,r-p)&&d[0]<=l;)d[0]++,p++;if(d[0]>l)return!1;const _=x.getHeight(),S=x.getWidth();for(p=1;r+p<_&&s+p<S&&x.get(s+p,r+p);)d[2]++,p++;if(r+p>=_||s+p>=S)return!1;for(;r+p<_&&s+p<S&&!x.get(s+p,r+p)&&d[3]<l;)d[3]++,p++;if(r+p>=_||s+p>=S||d[3]>=l)return!1;for(;r+p<_&&s+p<S&&x.get(s+p,r+p)&&d[4]<l;)d[4]++,p++;if(d[4]>=l)return!1;const E=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(E-u)<2*u&&On.foundPatternCross(d)}crossCheckVertical(r,s,l,u){const d=this.image,p=d.getHeight(),x=this.getCrossCheckStateCount();let _=r;for(;_>=0&&d.get(s,_);)x[2]++,_--;if(_<0)return NaN;for(;_>=0&&!d.get(s,_)&&x[1]<=l;)x[1]++,_--;if(_<0||x[1]>l)return NaN;for(;_>=0&&d.get(s,_)&&x[0]<=l;)x[0]++,_--;if(x[0]>l)return NaN;for(_=r+1;_<p&&d.get(s,_);)x[2]++,_++;if(_===p)return NaN;for(;_<p&&!d.get(s,_)&&x[3]<l;)x[3]++,_++;if(_===p||x[3]>=l)return NaN;for(;_<p&&d.get(s,_)&&x[4]<l;)x[4]++,_++;if(x[4]>=l)return NaN;const S=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(S-u)>=2*u?NaN:On.foundPatternCross(x)?On.centerFromEnd(x,_):NaN}crossCheckHorizontal(r,s,l,u){const d=this.image,p=d.getWidth(),x=this.getCrossCheckStateCount();let _=r;for(;_>=0&&d.get(_,s);)x[2]++,_--;if(_<0)return NaN;for(;_>=0&&!d.get(_,s)&&x[1]<=l;)x[1]++,_--;if(_<0||x[1]>l)return NaN;for(;_>=0&&d.get(_,s)&&x[0]<=l;)x[0]++,_--;if(x[0]>l)return NaN;for(_=r+1;_<p&&d.get(_,s);)x[2]++,_++;if(_===p)return NaN;for(;_<p&&!d.get(_,s)&&x[3]<l;)x[3]++,_++;if(_===p||x[3]>=l)return NaN;for(;_<p&&d.get(_,s)&&x[4]<l;)x[4]++,_++;if(x[4]>=l)return NaN;const S=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(S-u)>=u?NaN:On.foundPatternCross(x)?On.centerFromEnd(x,_):NaN}handlePossibleCenter(r,s,l,u){const d=r[0]+r[1]+r[2]+r[3]+r[4];let p=On.centerFromEnd(r,l),x=this.crossCheckVertical(s,Math.floor(p),r[2],d);if(!isNaN(x)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(x),r[2],d),!isNaN(p)&&(!u||this.crossCheckDiagonal(Math.floor(x),Math.floor(p),r[2],d)))){const _=d/7;let S=!1;const E=this.possibleCenters;for(let D=0,U=E.length;D<U;D++){const Y=E[D];if(Y.aboutEquals(_,x,p)){E[D]=Y.combineEstimate(x,p,_),S=!0;break}}if(!S){const D=new ba(p,x,_);E.push(D),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(D)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const l of this.possibleCenters)if(l.getCount()>=On.CENTER_QUORUM)if(s==null)s=l;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-l.getX())-Math.abs(s.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const l=this.possibleCenters.length;for(const p of this.possibleCenters)p.getCount()>=On.CENTER_QUORUM&&(r++,s+=p.getEstimatedModuleSize());if(r<3)return!1;const u=s/l;let d=0;for(const p of this.possibleCenters)d+=Math.abs(p.getEstimatedModuleSize()-u);return d<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new ae;const s=this.possibleCenters;let l;if(r>3){let u=0,d=0;for(const _ of this.possibleCenters){const S=_.getEstimatedModuleSize();u+=S,d+=S*S}l=u/r;let p=Math.sqrt(d/r-l*l);s.sort((_,S)=>{const E=Math.abs(S.getEstimatedModuleSize()-l),D=Math.abs(_.getEstimatedModuleSize()-l);return E<D?-1:E>D?1:0});const x=Math.max(.2*l,p);for(let _=0;_<s.length&&s.length>3;_++){const S=s[_];Math.abs(S.getEstimatedModuleSize()-l)>x&&(s.splice(_,1),_--)}}if(s.length>3){let u=0;for(const d of s)u+=d.getEstimatedModuleSize();l=u/s.length,s.sort((d,p)=>{if(p.getCount()===d.getCount()){const x=Math.abs(p.getEstimatedModuleSize()-l),_=Math.abs(d.getEstimatedModuleSize()-l);return x<_?1:x>_?-1:0}else return p.getCount()-d.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}On.CENTER_QUORUM=2,On.MIN_SKIP=3,On.MAX_MODULES=57;class pt{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(G.NEED_RESULT_POINT_CALLBACK);const l=new On(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(l)}processFinderPatternInfo(r){const s=r.getTopLeft(),l=r.getTopRight(),u=r.getBottomLeft(),d=this.calculateModuleSize(s,l,u);if(d<1)throw new ae("No pattern found in proccess finder.");const p=pt.computeDimension(s,l,u,d),x=Be.getProvisionalVersionForDimension(p),_=x.getDimensionForVersion()-7;let S=null;if(x.getAlignmentPatternCenters().length>0){const Y=l.getX()-s.getX()+u.getX(),J=l.getY()-s.getY()+u.getY(),te=1-3/_,le=Math.floor(s.getX()+te*(Y-s.getX())),he=Math.floor(s.getY()+te*(J-s.getY()));for(let Ne=4;Ne<=16;Ne<<=1)try{S=this.findAlignmentInRegion(d,le,he,Ne);break}catch(Te){if(!(Te instanceof ae))throw Te}}const E=pt.createTransform(s,l,u,S,p),D=pt.sampleGrid(this.image,E,p);let U;return S===null?U=[u,s,l]:U=[u,s,l,S],new rr(D,U)}static createTransform(r,s,l,u,d){const p=d-3.5;let x,_,S,E;return u!==null?(x=u.getX(),_=u.getY(),S=p-3,E=S):(x=s.getX()-r.getX()+l.getX(),_=s.getY()-r.getY()+l.getY(),S=p,E=p),K.quadrilateralToQuadrilateral(3.5,3.5,p,3.5,S,E,3.5,p,r.getX(),r.getY(),s.getX(),s.getY(),x,_,l.getX(),l.getY())}static sampleGrid(r,s,l){return Je.getInstance().sampleGridWithTransform(r,l,l,s)}static computeDimension(r,s,l,u){const d=nt.round(Re.distance(r,s)/u),p=nt.round(Re.distance(r,l)/u);let x=Math.floor((d+p)/2)+7;switch(x&3){case 0:x++;break;case 2:x--;break;case 3:throw new ae("Dimensions could be not found.")}return x}calculateModuleSize(r,s,l){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,l))/2}calculateModuleSizeOneWay(r,s){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,l,u){let d=this.sizeOfBlackWhiteBlackRun(r,s,l,u),p=1,x=r-(l-r);x<0?(p=r/(r-x),x=0):x>=this.image.getWidth()&&(p=(this.image.getWidth()-1-r)/(x-r),x=this.image.getWidth()-1);let _=Math.floor(s-(u-s)*p);return p=1,_<0?(p=s/(s-_),_=0):_>=this.image.getHeight()&&(p=(this.image.getHeight()-1-s)/(_-s),_=this.image.getHeight()-1),x=Math.floor(r+(x-r)*p),d+=this.sizeOfBlackWhiteBlackRun(r,s,x,_),d-1}sizeOfBlackWhiteBlackRun(r,s,l,u){const d=Math.abs(u-s)>Math.abs(l-r);if(d){let Y=r;r=s,s=Y,Y=l,l=u,u=Y}const p=Math.abs(l-r),x=Math.abs(u-s);let _=-p/2;const S=r<l?1:-1,E=s<u?1:-1;let D=0;const U=l+S;for(let Y=r,J=s;Y!==U;Y+=S){const te=d?J:Y,le=d?Y:J;if(D===1===this.image.get(te,le)){if(D===2)return nt.distance(Y,J,r,s);D++}if(_+=x,_>0){if(J===u)break;J+=E,_-=p}}return D===2?nt.distance(l+S,u,r,s):NaN}findAlignmentInRegion(r,s,l,u){const d=Math.floor(u*r),p=Math.max(0,s-d),x=Math.min(this.image.getWidth()-1,s+d);if(x-p<r*3)throw new ae("Alignment top exceeds estimated module size.");const _=Math.max(0,l-d),S=Math.min(this.image.getHeight()-1,l+d);if(S-_<r*3)throw new ae("Alignment bottom exceeds estimated module size.");return new as(this.image,p,_,x-p,S-_,r,this.resultPointCallback).find()}}class Bn{constructor(){this.decoder=new Sl}getDecoder(){return this.decoder}decode(r,s){let l,u;if(s!=null&&s.get(G.PURE_BARCODE)!==void 0){const _=Bn.extractPureBits(r.getBlackMatrix());l=this.decoder.decodeBitMatrix(_,s),u=Bn.NO_POINTS}else{const _=new pt(r.getBlackMatrix()).detect(s);l=this.decoder.decodeBitMatrix(_.getBits(),s),u=_.getPoints()}l.getOther()instanceof jo&&l.getOther().applyMirroredCorrection(u);const d=new De(l.getText(),l.getRawBytes(),void 0,u,oe.QR_CODE,void 0),p=l.getByteSegments();p!==null&&d.putMetadata(at.BYTE_SEGMENTS,p);const x=l.getECLevel();return x!==null&&d.putMetadata(at.ERROR_CORRECTION_LEVEL,x),l.hasStructuredAppend()&&(d.putMetadata(at.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(at.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(s===null||l===null)throw new ae;const u=this.moduleSize(s,r);let d=s[1],p=l[1],x=s[0],_=l[0];if(x>=_||d>=p)throw new ae;if(p-d!==_-x&&(_=x+(p-d),_>=r.getWidth()))throw new ae;const S=Math.round((_-x+1)/u),E=Math.round((p-d+1)/u);if(S<=0||E<=0)throw new ae;if(E!==S)throw new ae;const D=Math.floor(u/2);d+=D,x+=D;const U=x+Math.floor((S-1)*u)-_;if(U>0){if(U>D)throw new ae;x-=U}const Y=d+Math.floor((E-1)*u)-p;if(Y>0){if(Y>D)throw new ae;d-=Y}const J=new Ee(S,E);for(let te=0;te<E;te++){const le=d+Math.floor(te*u);for(let he=0;he<S;he++)r.get(x+Math.floor(he*u),le)&&J.set(he,te)}return J}static moduleSize(r,s){const l=s.getHeight(),u=s.getWidth();let d=r[0],p=r[1],x=!0,_=0;for(;d<u&&p<l;){if(x!==s.get(d,p)){if(++_===5)break;x=!x}d++,p++}if(d===u||p===l)throw new ae;return(d-r[0])/7}}Bn.NO_POINTS=new Array;class ze{PDF417Common(){}static getBitCountSum(r){return nt.sum(r)}static toIntArray(r){if(r==null||!r.length)return ze.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let l=0;for(const u of r)s[l++]=u;return s}static getCodeword(r){const s=O.binarySearch(ze.SYMBOL_TABLE,r&262143);return s<0?-1:(ze.CODEWORD_TABLE[s]-1)%ze.NUMBER_OF_CODEWORDS}}ze.NUMBER_OF_CODEWORDS=929,ze.MAX_CODEWORDS_IN_BARCODE=ze.NUMBER_OF_CODEWORDS-1,ze.MIN_ROWS_IN_BARCODE=3,ze.MAX_ROWS_IN_BARCODE=90,ze.MODULES_IN_CODEWORD=17,ze.MODULES_IN_STOP_PATTERN=18,ze.BARS_IN_MODULE=8,ze.EMPTY_INT_ARRAY=new Int32Array([]),ze.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ze.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class au{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class vt{static detectMultiple(r,s,l){let u=r.getBlackMatrix(),d=vt.detect(l,u);return d.length||(u=u.clone(),u.rotate180(),d=vt.detect(l,u)),new au(u,d)}static detect(r,s){const l=new Array;let u=0,d=0,p=!1;for(;u<s.getHeight();){const x=vt.findVertices(s,u,d);if(x[0]==null&&x[3]==null){if(!p)break;p=!1,d=0;for(const _ of l)_[1]!=null&&(u=Math.trunc(Math.max(u,_[1].getY()))),_[3]!=null&&(u=Math.max(u,Math.trunc(_[3].getY())));u+=vt.ROW_STEP;continue}if(p=!0,l.push(x),!r)break;x[2]!=null?(d=Math.trunc(x[2].getX()),u=Math.trunc(x[2].getY())):(d=Math.trunc(x[4].getX()),u=Math.trunc(x[4].getY()))}return l}static findVertices(r,s,l){const u=r.getHeight(),d=r.getWidth(),p=new Array(8);return vt.copyToResult(p,vt.findRowsWithPattern(r,u,d,s,l,vt.START_PATTERN),vt.INDEXES_START_PATTERN),p[4]!=null&&(l=Math.trunc(p[4].getX()),s=Math.trunc(p[4].getY())),vt.copyToResult(p,vt.findRowsWithPattern(r,u,d,s,l,vt.STOP_PATTERN),vt.INDEXES_STOP_PATTERN),p}static copyToResult(r,s,l){for(let u=0;u<l.length;u++)r[l[u]]=s[u]}static findRowsWithPattern(r,s,l,u,d,p){const x=new Array(4);let _=!1;const S=new Int32Array(p.length);for(;u<s;u+=vt.ROW_STEP){let D=vt.findGuardPattern(r,d,u,l,!1,p,S);if(D!=null){for(;u>0;){const U=vt.findGuardPattern(r,d,--u,l,!1,p,S);if(U!=null)D=U;else{u++;break}}x[0]=new Re(D[0],u),x[1]=new Re(D[1],u),_=!0;break}}let E=u+1;if(_){let D=0,U=Int32Array.from([Math.trunc(x[0].getX()),Math.trunc(x[1].getX())]);for(;E<s;E++){const Y=vt.findGuardPattern(r,U[0],E,l,!1,p,S);if(Y!=null&&Math.abs(U[0]-Y[0])<vt.MAX_PATTERN_DRIFT&&Math.abs(U[1]-Y[1])<vt.MAX_PATTERN_DRIFT)U=Y,D=0;else{if(D>vt.SKIPPED_ROW_COUNT_MAX)break;D++}}E-=D+1,x[2]=new Re(U[0],E),x[3]=new Re(U[1],E)}return E-u<vt.BARCODE_MIN_HEIGHT&&O.fill(x,null),x}static findGuardPattern(r,s,l,u,d,p,x){O.fillWithin(x,0,x.length,0);let _=s,S=0;for(;r.get(_,l)&&_>0&&S++<vt.MAX_PIXEL_DRIFT;)_--;let E=_,D=0,U=p.length;for(let Y=d;E<u;E++)if(r.get(E,l)!==Y)x[D]++;else{if(D===U-1){if(vt.patternMatchVariance(x,p,vt.MAX_INDIVIDUAL_VARIANCE)<vt.MAX_AVG_VARIANCE)return new Int32Array([_,E]);_+=x[0]+x[1],R.arraycopy(x,2,x,0,D-1),x[D-1]=0,x[D]=0,D--}else D++;x[D]=1,Y=!Y}return D===U-1&&vt.patternMatchVariance(x,p,vt.MAX_INDIVIDUAL_VARIANCE)<vt.MAX_AVG_VARIANCE?new Int32Array([_,E-1]):null}static patternMatchVariance(r,s,l){let u=r.length,d=0,p=0;for(let S=0;S<u;S++)d+=r[S],p+=s[S];if(d<p)return 1/0;let x=d/p;l*=x;let _=0;for(let S=0;S<u;S++){let E=r[S],D=s[S]*x,U=E>D?E-D:D-E;if(U>l)return 1/0;_+=U}return _/d}}vt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),vt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),vt.MAX_AVG_VARIANCE=.42,vt.MAX_INDIVIDUAL_VARIANCE=.8,vt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),vt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),vt.MAX_PIXEL_DRIFT=3,vt.MAX_PATTERN_DRIFT=5,vt.SKIPPED_ROW_COUNT_MAX=25,vt.ROW_STEP=5,vt.BARCODE_MIN_HEIGHT=10;class En{constructor(r,s){if(s.length===0)throw new b;this.field=r;let l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),R.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let u=0;for(let d of this.coefficients)u=this.field.add(u,d);return u}let s=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)s=this.field.add(this.field.multiply(r,s),this.coefficients[u]);return s}add(r){if(!this.field.equals(r.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,l=r.coefficients;if(s.length>l.length){let p=s;s=l,l=p}let u=new Int32Array(l.length),d=l.length-s.length;R.arraycopy(l,0,u,0,d);for(let p=d;p<l.length;p++)u[p]=this.field.add(s[p-d],l[p]);return new En(this.field,u)}subtract(r){if(!this.field.equals(r.field))throw new b("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof En?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new En(this.field,new Int32Array([0]));let s=this.coefficients,l=s.length,u=r.coefficients,d=u.length,p=new Int32Array(l+d-1);for(let x=0;x<l;x++){let _=s[x];for(let S=0;S<d;S++)p[x+S]=this.field.add(p[x+S],this.field.multiply(_,u[S]))}return new En(this.field,p)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let l=0;l<r;l++)s[l]=this.field.subtract(0,this.coefficients[l]);return new En(this.field,s)}multiplyScalar(r){if(r===0)return new En(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,l=new Int32Array(s);for(let u=0;u<s;u++)l[u]=this.field.multiply(this.coefficients[u],r);return new En(this.field,l)}multiplyByMonomial(r,s){if(r<0)throw new b;if(s===0)return new En(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+r);for(let d=0;d<l;d++)u[d]=this.field.multiply(this.coefficients[d],s);return new En(this.field,u)}toString(){let r=new ve;for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);l!==0&&(l<0?(r.append(" - "),l=-l):r.length()>0&&r.append(" + "),(s===0||l!==1)&&r.append(l),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class El{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new b;return this.logTable[r]}inverse(r){if(r===0)throw new yt;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class Si extends El{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let l=1;for(let u=0;u<r;u++)this.expTable[u]=l,l=l*s%r;for(let u=0;u<r-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new En(this,new Int32Array([0])),this.one=new En(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new b;if(s===0)return this.zero;let l=new Int32Array(r+1);return l[0]=s,new En(this,l)}}Si.PDF417_GF=new Si(ze.NUMBER_OF_CODEWORDS,3);class Ca{constructor(){this.field=Si.PDF417_GF}decode(r,s,l){let u=new En(this.field,r),d=new Int32Array(s),p=!1;for(let J=s;J>0;J--){let te=u.evaluateAt(this.field.exp(J));d[s-J]=te,te!==0&&(p=!0)}if(!p)return 0;let x=this.field.getOne();if(l!=null)for(const J of l){let te=this.field.exp(r.length-1-J),le=new En(this.field,new Int32Array([this.field.subtract(0,te),1]));x=x.multiply(le)}let _=new En(this.field,d),S=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),_,s),E=S[0],D=S[1],U=this.findErrorLocations(E),Y=this.findErrorMagnitudes(D,E,U);for(let J=0;J<U.length;J++){let te=r.length-1-this.field.log(U[J]);if(te<0)throw I.getChecksumInstance();r[te]=this.field.subtract(r[te],Y[J])}return U.length}runEuclideanAlgorithm(r,s,l){if(r.getDegree()<s.getDegree()){let U=r;r=s,s=U}let u=r,d=s,p=this.field.getZero(),x=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let U=u,Y=p;if(u=d,p=x,u.isZero())throw I.getChecksumInstance();d=U;let J=this.field.getZero(),te=u.getCoefficient(u.getDegree()),le=this.field.inverse(te);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){let he=d.getDegree()-u.getDegree(),Ne=this.field.multiply(d.getCoefficient(d.getDegree()),le);J=J.add(this.field.buildMonomial(he,Ne)),d=d.subtract(u.multiplyByMonomial(he,Ne))}x=J.multiply(p).subtract(Y).negative()}let _=x.getCoefficient(0);if(_===0)throw I.getChecksumInstance();let S=this.field.inverse(_),E=x.multiply(S),D=d.multiply(S);return[E,D]}findErrorLocations(r){let s=r.getDegree(),l=new Int32Array(s),u=0;for(let d=1;d<this.field.getSize()&&u<s;d++)r.evaluateAt(d)===0&&(l[u]=this.field.inverse(d),u++);if(u!==s)throw I.getChecksumInstance();return l}findErrorMagnitudes(r,s,l){let u=s.getDegree(),d=new Int32Array(u);for(let S=1;S<=u;S++)d[u-S]=this.field.multiply(S,s.getCoefficient(S));let p=new En(this.field,d),x=l.length,_=new Int32Array(x);for(let S=0;S<x;S++){let E=this.field.inverse(l[S]),D=this.field.subtract(0,r.evaluateAt(E)),U=this.field.inverse(p.evaluateAt(E));_[S]=this.field.multiply(D,U)}return _}}class Ur{constructor(r,s,l,u,d){r instanceof Ur?this.constructor_2(r):this.constructor_1(r,s,l,u,d)}constructor_1(r,s,l,u,d){const p=s==null||l==null,x=u==null||d==null;if(p&&x)throw new ae;p?(s=new Re(0,u.getY()),l=new Re(0,d.getY())):x&&(u=new Re(r.getWidth()-1,s.getY()),d=new Re(r.getWidth()-1,l.getY())),this.image=r,this.topLeft=s,this.bottomLeft=l,this.topRight=u,this.bottomRight=d,this.minX=Math.trunc(Math.min(s.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),d.getX())),this.minY=Math.trunc(Math.min(s.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new Ur(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,l){let u=this.topLeft,d=this.bottomLeft,p=this.topRight,x=this.bottomRight;if(r>0){let _=l?this.topLeft:this.topRight,S=Math.trunc(_.getY()-r);S<0&&(S=0);let E=new Re(_.getX(),S);l?u=E:p=E}if(s>0){let _=l?this.bottomLeft:this.bottomRight,S=Math.trunc(_.getY()+s);S>=this.image.getHeight()&&(S=this.image.getHeight()-1);let E=new Re(_.getX(),S);l?d=E:x=E}return new Ur(this.image,u,d,p,x)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Fn{constructor(r,s,l,u){this.columnCount=r,this.errorCorrectionLevel=u,this.rowCountUpperPart=s,this.rowCountLowerPart=l,this.rowCount=s+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Vr{constructor(){this.buffer=""}static form(r,s){let l=-1;function u(p,x,_,S,E,D){if(p==="%%")return"%";if(s[++l]===void 0)return;p=S?parseInt(S.substr(1)):void 0;let U=E?parseInt(E.substr(1)):void 0,Y;switch(D){case"s":Y=s[l];break;case"c":Y=s[l][0];break;case"f":Y=parseFloat(s[l]).toFixed(p);break;case"p":Y=parseFloat(s[l]).toPrecision(p);break;case"e":Y=parseFloat(s[l]).toExponential(p);break;case"x":Y=parseInt(s[l]).toString(U||16);break;case"d":Y=parseFloat(parseInt(s[l],U||10).toPrecision(p)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString(U);let J=parseInt(_),te=_&&_[0]+""=="0"?"0":" ";for(;Y.length<J;)Y=x!==void 0?Y+te:te+Y;return Y}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,u)}format(r,...s){this.buffer+=Vr.form(r,s)}toString(){return this.buffer}}class Ds{constructor(r){this.boundingBox=new Ur(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let l=1;l<Ds.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(r)-l;if(u>=0&&(s=this.codewords[u],s!=null)||(u=this.imageRowToCodewordIndex(r)+l,u<this.codewords.length&&(s=this.codewords[u],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new Vr;let s=0;for(const l of this.codewords){if(l==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,l.getRowNumber(),l.getValue())}return r.toString()}}Ds.MAX_NEARBY_DISTANCE=5;class js{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[l,u]of this.values.entries()){const d={getKey:()=>l,getValue:()=>u};d.getValue()>r?(r=d.getValue(),s=[],s.push(d.getKey())):d.getValue()===r&&s.push(d.getKey())}return ze.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class lu extends Ds{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),x=this.imageRowToCodewordIndex(Math.trunc(d.getY())),_=-1,S=1,E=0;for(let D=p;D<x;D++){if(s[D]==null)continue;let U=s[D],Y=U.getRowNumber()-_;if(Y===0)E++;else if(Y===1)S=Math.max(S,E),E=1,_=U.getRowNumber();else if(Y<0||U.getRowNumber()>=r.getRowCount()||Y>D)s[D]=null;else{let J;S>2?J=(S-2)*Y:J=Y;let te=J>=D;for(let le=1;le<=J&&!te;le++)te=s[D-le]!=null;te?s[D]=null:(_=U.getRowNumber(),E=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=s.length)continue;s[u]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),l=this._isLeft?s.getTopLeft():s.getTopRight(),u=this._isLeft?s.getBottomLeft():s.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),x=this.getCodewords(),_=-1;for(let S=d;S<p;S++){if(x[S]==null)continue;let E=x[S];E.setRowNumberAsRowIndicatorColumn();let D=E.getRowNumber()-_;D===0||(D===1?_=E.getRowNumber():E.getRowNumber()>=r.getRowCount()?x[S]=null:_=E.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new js,l=new js,u=new js,d=new js;for(let x of r){if(x==null)continue;x.setRowNumberAsRowIndicatorColumn();let _=x.getValue()%30,S=x.getRowNumber();switch(this._isLeft||(S+=2),S%3){case 0:l.setValue(_*3+1);break;case 1:d.setValue(_/3),u.setValue(_%3);break;case 2:s.setValue(_+1);break}}if(s.getValue().length===0||l.getValue().length===0||u.getValue().length===0||d.getValue().length===0||s.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<ze.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>ze.MAX_ROWS_IN_BARCODE)return null;let p=new Fn(s.getValue()[0],l.getValue()[0],u.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(r,p),p}removeIncorrectCodewords(r,s){for(let l=0;l<r.length;l++){let u=r[l];if(r[l]==null)continue;let d=u.getValue()%30,p=u.getRowNumber();if(p>s.getRowCount()){r[l]=null;continue}switch(this._isLeft||(p+=2),p%3){case 0:d*3+1!==s.getRowCountUpperPart()&&(r[l]=null);break;case 1:(Math.trunc(d/3)!==s.getErrorCorrectionLevel()||d%3!==s.getRowCountLowerPart())&&(r[l]=null);break;case 2:d+1!==s.getColumnCount()&&(r[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Bs{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=ze.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let l=this.detectionResultColumns[s].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(s,u,l))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<r.length;l++)if(r[l]!=null&&s[l]!=null&&r[l].getRowNumber()===s[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let d=this.detectionResultColumns[u].getCodewords()[l];d!=null&&(d.setRowNumber(r[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),d=0;for(let p=this.barcodeColumnCount+1;p>0&&d<this.ADJUST_ROW_NUMBER_SKIP;p--){let x=this.detectionResultColumns[p].getCodewords()[l];x!=null&&(d=Bs.adjustRowNumberIfValid(u,d,x),x.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),d=0;for(let p=1;p<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;p++){let x=this.detectionResultColumns[p].getCodewords()[l];x!=null&&(d=Bs.adjustRowNumberIfValid(u,d,x),x.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(r)?(l.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,l){if(!this.detectionResultColumns[r-1])return;let u=l[s],d=this.detectionResultColumns[r-1].getCodewords(),p=d;this.detectionResultColumns[r+1]!=null&&(p=this.detectionResultColumns[r+1].getCodewords());let x=new Array(14);x[2]=d[s],x[3]=p[s],s>0&&(x[0]=l[s-1],x[4]=d[s-1],x[5]=p[s-1]),s>1&&(x[8]=l[s-2],x[10]=d[s-2],x[11]=p[s-2]),s<l.length-1&&(x[1]=l[s+1],x[6]=d[s+1],x[7]=p[s+1]),s<l.length-2&&(x[9]=l[s+2],x[12]=d[s+2],x[13]=p[s+2]);for(let _ of x)if(Bs.adjustRowNumber(u,_))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new Vr;for(let l=0;l<r.getCodewords().length;l++){s.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){s.format("    |   ");continue}let d=this.detectionResultColumns[u].getCodewords()[l];if(d==null){s.format("    |   ");continue}s.format(" %3d|%3d",d.getRowNumber(),d.getValue())}s.format("%n")}return s.toString()}}class ls{constructor(r,s,l,u){this.rowNumber=ls.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==ls.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}ls.BARCODE_ROW_UNKNOWN=-1;class sr{static initialize(){for(let r=0;r<ze.SYMBOL_TABLE.length;r++){let s=ze.SYMBOL_TABLE[r],l=s&1;for(let u=0;u<ze.BARS_IN_MODULE;u++){let d=0;for(;(s&1)===l;)d+=1,s>>=1;l=s&1,sr.RATIOS_TABLE[r]||(sr.RATIOS_TABLE[r]=new Array(ze.BARS_IN_MODULE)),sr.RATIOS_TABLE[r][ze.BARS_IN_MODULE-u-1]=Math.fround(d/ze.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=sr.getDecodedCodewordValue(sr.sampleBitCounts(r));return s!==-1?s:sr.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=nt.sum(r),l=new Int32Array(ze.BARS_IN_MODULE),u=0,d=0;for(let p=0;p<ze.MODULES_IN_CODEWORD;p++){let x=s/(2*ze.MODULES_IN_CODEWORD)+p*s/ze.MODULES_IN_CODEWORD;d+r[u]<=x&&(d+=r[u],u++),l[u]++}return l}static getDecodedCodewordValue(r){let s=sr.getBitValue(r);return ze.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let l=0;l<r.length;l++)for(let u=0;u<r[l];u++)s=s<<1|(l%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=nt.sum(r),l=new Array(ze.BARS_IN_MODULE);if(s>1)for(let p=0;p<l.length;p++)l[p]=Math.fround(r[p]/s);let u=Qt.MAX_VALUE,d=-1;this.bSymbolTableReady||sr.initialize();for(let p=0;p<sr.RATIOS_TABLE.length;p++){let x=0,_=sr.RATIOS_TABLE[p];for(let S=0;S<ze.BARS_IN_MODULE;S++){let E=Math.fround(_[S]-l[S]);if(x+=Math.fround(E*E),x>=u)break}x<u&&(u=x,d=ze.SYMBOL_TABLE[p])}return d}}sr.bSymbolTableReady=!1,sr.RATIOS_TABLE=new Array(ze.SYMBOL_TABLE.length).map(P=>new Array(ze.BARS_IN_MODULE));class Nl{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class kt{static parseLong(r,s=void 0){return parseInt(r,s)}}class cu extends y{}cu.kind="NullPointerException";class Hr{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,l){if(r==null)throw new cu;if(s<0||s>r.length||l<0||s+l>r.length||s+l<0)throw new B;if(l===0)return;for(let u=0;u<l;u++)this.write(r[s+u])}flush(){}close(){}}class Fo extends y{}class uu extends Hr{constructor(r=32){if(super(),this.count=0,r<0)throw new b("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let l=this.buf.length<<1;if(l-r<0&&(l=r),l<0){if(r<0)throw new Fo;l=k.MAX_VALUE}this.buf=O.copyOfUint8Array(this.buf,l)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,l){if(s<0||s>r.length||l<0||s+l-r.length>0)throw new B;this.ensureCapacity(this.count+l),R.arraycopy(r,s,this.buf,this.count,l),this.count+=l}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return O.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var Gt;(function(P){P[P.ALPHA=0]="ALPHA",P[P.LOWER=1]="LOWER",P[P.MIXED=2]="MIXED",P[P.PUNCT=3]="PUNCT",P[P.ALPHA_SHIFT=4]="ALPHA_SHIFT",P[P.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Gt||(Gt={}));function Sa(){if(typeof window<"u")return window.BigInt||null;if(typeof ka<"u")return ka.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Aa;function Ai(P){if(typeof Aa>"u"&&(Aa=Sa()),Aa===null)throw new Error("BigInt is not supported!");return Aa(P)}function Hh(){let P=[];P[0]=Ai(1);let r=Ai(900);P[1]=r;for(let s=2;s<16;s++)P[s]=P[s-1]*r;return P}class fe{static decode(r,s){let l=new ve(""),u=M.ISO8859_1;l.enableDecoding(u);let d=1,p=r[d++],x=new Nl;for(;d<r[0];){switch(p){case fe.TEXT_COMPACTION_MODE_LATCH:d=fe.textCompaction(r,d,l);break;case fe.BYTE_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:d=fe.byteCompaction(p,r,u,d,l);break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[d++]);break;case fe.NUMERIC_COMPACTION_MODE_LATCH:d=fe.numericCompaction(r,d,l);break;case fe.ECI_CHARSET:M.getCharacterSetECIByValue(r[d++]);break;case fe.ECI_GENERAL_PURPOSE:d+=2;break;case fe.ECI_USER_DEFINED:d++;break;case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=fe.decodeMacroBlock(r,d,x);break;case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:throw new H;default:d--,d=fe.textCompaction(r,d,l);break}if(d<r.length)p=r[d++];else throw H.getFormatInstance()}if(l.length()===0)throw H.getFormatInstance();let _=new Nt(null,l.toString(),null,s);return _.setOther(x),_}static decodeMacroBlock(r,s,l){if(s+fe.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw H.getFormatInstance();let u=new Int32Array(fe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let x=0;x<fe.NUMBER_OF_SEQUENCE_CODEWORDS;x++,s++)u[x]=r[s];l.setSegmentIndex(k.parseInt(fe.decodeBase900toBase10(u,fe.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new ve;s=fe.textCompaction(r,s,d),l.setFileId(d.toString());let p=-1;for(r[s]===fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(p=s+1);s<r[0];)switch(r[s]){case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let x=new ve;s=fe.textCompaction(r,s+1,x),l.setFileName(x.toString());break;case fe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let _=new ve;s=fe.textCompaction(r,s+1,_),l.setSender(_.toString());break;case fe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let S=new ve;s=fe.textCompaction(r,s+1,S),l.setAddressee(S.toString());break;case fe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let E=new ve;s=fe.numericCompaction(r,s+1,E),l.setSegmentCount(k.parseInt(E.toString()));break;case fe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let D=new ve;s=fe.numericCompaction(r,s+1,D),l.setTimestamp(kt.parseLong(D.toString()));break;case fe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let U=new ve;s=fe.numericCompaction(r,s+1,U),l.setChecksum(k.parseInt(U.toString()));break;case fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Y=new ve;s=fe.numericCompaction(r,s+1,Y),l.setFileSize(kt.parseLong(Y.toString()));break;default:throw H.getFormatInstance()}break;case fe.MACRO_PDF417_TERMINATOR:s++,l.setLastSegment(!0);break;default:throw H.getFormatInstance()}if(p!==-1){let x=s-p;l.isLastSegment()&&x--,l.setOptionalData(O.copyOfRange(r,p,p+x))}return s}static textCompaction(r,s,l){let u=new Int32Array((r[0]-s)*2),d=new Int32Array((r[0]-s)*2),p=0,x=!1;for(;s<r[0]&&!x;){let _=r[s++];if(_<fe.TEXT_COMPACTION_MODE_LATCH)u[p]=_/30,u[p+1]=_%30,p+=2;else switch(_){case fe.TEXT_COMPACTION_MODE_LATCH:u[p++]=fe.TEXT_COMPACTION_MODE_LATCH;break;case fe.BYTE_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.NUMERIC_COMPACTION_MODE_LATCH:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:s--,x=!0;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[p]=fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=r[s++],d[p]=_,p++;break}}return fe.decodeTextCompaction(u,d,p,l),s}static decodeTextCompaction(r,s,l,u){let d=Gt.ALPHA,p=Gt.ALPHA,x=0;for(;x<l;){let _=r[x],S="";switch(d){case Gt.ALPHA:if(_<26)S=String.fromCharCode(65+_);else switch(_){case 26:S=" ";break;case fe.LL:d=Gt.LOWER;break;case fe.ML:d=Gt.MIXED;break;case fe.PS:p=d,d=Gt.PUNCT_SHIFT;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[x]);break;case fe.TEXT_COMPACTION_MODE_LATCH:d=Gt.ALPHA;break}break;case Gt.LOWER:if(_<26)S=String.fromCharCode(97+_);else switch(_){case 26:S=" ";break;case fe.AS:p=d,d=Gt.ALPHA_SHIFT;break;case fe.ML:d=Gt.MIXED;break;case fe.PS:p=d,d=Gt.PUNCT_SHIFT;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[x]);break;case fe.TEXT_COMPACTION_MODE_LATCH:d=Gt.ALPHA;break}break;case Gt.MIXED:if(_<fe.PL)S=fe.MIXED_CHARS[_];else switch(_){case fe.PL:d=Gt.PUNCT;break;case 26:S=" ";break;case fe.LL:d=Gt.LOWER;break;case fe.AL:d=Gt.ALPHA;break;case fe.PS:p=d,d=Gt.PUNCT_SHIFT;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[x]);break;case fe.TEXT_COMPACTION_MODE_LATCH:d=Gt.ALPHA;break}break;case Gt.PUNCT:if(_<fe.PAL)S=fe.PUNCT_CHARS[_];else switch(_){case fe.PAL:d=Gt.ALPHA;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[x]);break;case fe.TEXT_COMPACTION_MODE_LATCH:d=Gt.ALPHA;break}break;case Gt.ALPHA_SHIFT:if(d=p,_<26)S=String.fromCharCode(65+_);else switch(_){case 26:S=" ";break;case fe.TEXT_COMPACTION_MODE_LATCH:d=Gt.ALPHA;break}break;case Gt.PUNCT_SHIFT:if(d=p,_<fe.PAL)S=fe.PUNCT_CHARS[_];else switch(_){case fe.PAL:d=Gt.ALPHA;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[x]);break;case fe.TEXT_COMPACTION_MODE_LATCH:d=Gt.ALPHA;break}break}S!==""&&u.append(S),x++}}static byteCompaction(r,s,l,u,d){let p=new uu,x=0,_=0,S=!1;switch(r){case fe.BYTE_COMPACTION_MODE_LATCH:let E=new Int32Array(6),D=s[u++];for(;u<s[0]&&!S;)switch(E[x++]=D,_=900*_+D,D=s[u++],D){case fe.TEXT_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH:case fe.NUMERIC_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:u--,S=!0;break;default:if(x%5===0&&x>0){for(let U=0;U<6;++U)p.write(Number(Ai(_)>>Ai(8*(5-U))));_=0,x=0}break}u===s[0]&&D<fe.TEXT_COMPACTION_MODE_LATCH&&(E[x++]=D);for(let U=0;U<x;U++)p.write(E[U]);break;case fe.BYTE_COMPACTION_MODE_LATCH_6:for(;u<s[0]&&!S;){let U=s[u++];if(U<fe.TEXT_COMPACTION_MODE_LATCH)x++,_=900*_+U;else switch(U){case fe.TEXT_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH:case fe.NUMERIC_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:u--,S=!0;break}if(x%5===0&&x>0){for(let Y=0;Y<6;++Y)p.write(Number(Ai(_)>>Ai(8*(5-Y))));_=0,x=0}}break}return d.append(ie.decode(p.toByteArray(),l)),u}static numericCompaction(r,s,l){let u=0,d=!1,p=new Int32Array(fe.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!d;){let x=r[s++];if(s===r[0]&&(d=!0),x<fe.TEXT_COMPACTION_MODE_LATCH)p[u]=x,u++;else switch(x){case fe.TEXT_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:s--,d=!0;break}(u%fe.MAX_NUMERIC_CODEWORDS===0||x===fe.NUMERIC_COMPACTION_MODE_LATCH||d)&&u>0&&(l.append(fe.decodeBase900toBase10(p,u)),u=0)}return s}static decodeBase900toBase10(r,s){let l=Ai(0);for(let d=0;d<s;d++)l+=fe.EXP900[s-d-1]*Ai(r[d]);let u=l.toString();if(u.charAt(0)!=="1")throw new H;return u.substring(1)}}fe.TEXT_COMPACTION_MODE_LATCH=900,fe.BYTE_COMPACTION_MODE_LATCH=901,fe.NUMERIC_COMPACTION_MODE_LATCH=902,fe.BYTE_COMPACTION_MODE_LATCH_6=924,fe.ECI_USER_DEFINED=925,fe.ECI_GENERAL_PURPOSE=926,fe.ECI_CHARSET=927,fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,fe.MACRO_PDF417_TERMINATOR=922,fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,fe.MAX_NUMERIC_CODEWORDS=15,fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,fe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,fe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,fe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,fe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,fe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,fe.PL=25,fe.LL=27,fe.AS=27,fe.ML=28,fe.AL=28,fe.PS=29,fe.PAL=29,fe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,fe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",fe.EXP900=Sa()?Hh():[],fe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class bt{constructor(){}static decode(r,s,l,u,d,p,x){let _=new Ur(r,s,l,u,d),S=null,E=null,D;for(let J=!0;;J=!1){if(s!=null&&(S=bt.getRowIndicatorColumn(r,_,s,!0,p,x)),u!=null&&(E=bt.getRowIndicatorColumn(r,_,u,!1,p,x)),D=bt.merge(S,E),D==null)throw ae.getNotFoundInstance();let te=D.getBoundingBox();if(J&&te!=null&&(te.getMinY()<_.getMinY()||te.getMaxY()>_.getMaxY()))_=te;else break}D.setBoundingBox(_);let U=D.getBarcodeColumnCount()+1;D.setDetectionResultColumn(0,S),D.setDetectionResultColumn(U,E);let Y=S!=null;for(let J=1;J<=U;J++){let te=Y?J:U-J;if(D.getDetectionResultColumn(te)!==void 0)continue;let le;te===0||te===U?le=new lu(_,te===0):le=new Ds(_),D.setDetectionResultColumn(te,le);let he=-1,Ne=he;for(let Te=_.getMinY();Te<=_.getMaxY();Te++){if(he=bt.getStartColumn(D,te,Te,Y),he<0||he>_.getMaxX()){if(Ne===-1)continue;he=Ne}let Ae=bt.detectCodeword(r,_.getMinX(),_.getMaxX(),Y,he,Te,p,x);Ae!=null&&(le.setCodeword(Te,Ae),Ne=he,p=Math.min(p,Ae.getWidth()),x=Math.max(x,Ae.getWidth()))}}return bt.createDecoderResult(D)}static merge(r,s){if(r==null&&s==null)return null;let l=bt.getBarcodeMetadata(r,s);if(l==null)return null;let u=Ur.merge(bt.adjustBoundingBox(r),bt.adjustBoundingBox(s));return new Bs(l,u)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let l=bt.getMax(s),u=0;for(let x of s)if(u+=l-x,x>0)break;let d=r.getCodewords();for(let x=0;u>0&&d[x]==null;x++)u--;let p=0;for(let x=s.length-1;x>=0&&(p+=l-s[x],!(s[x]>0));x--);for(let x=d.length-1;p>0&&d[x]==null;x--)p--;return r.getBoundingBox().addMissingRows(u,p,r.isLeft())}static getMax(r){let s=-1;for(let l of r)s=Math.max(s,l);return s}static getBarcodeMetadata(r,s){let l;if(r==null||(l=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let u;return s==null||(u=s.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(r,s,l,u,d,p){let x=new lu(s,u);for(let _=0;_<2;_++){let S=_===0?1:-1,E=Math.trunc(Math.trunc(l.getX()));for(let D=Math.trunc(Math.trunc(l.getY()));D<=s.getMaxY()&&D>=s.getMinY();D+=S){let U=bt.detectCodeword(r,0,r.getWidth(),u,E,D,d,p);U!=null&&(x.setCodeword(D,U),u?E=U.getStartX():E=U.getEndX())}}return x}static adjustCodewordCount(r,s){let l=s[0][1],u=l.getValue(),d=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-bt.getNumberOfECCodeWords(r.getBarcodeECLevel());if(u.length===0){if(d<1||d>ze.MAX_CODEWORDS_IN_BARCODE)throw ae.getNotFoundInstance();l.setValue(d)}else u[0]!==d&&l.setValue(d)}static createDecoderResult(r){let s=bt.createBarcodeMatrix(r);bt.adjustCodewordCount(r,s);let l=new Array,u=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),d=[],p=new Array;for(let _=0;_<r.getBarcodeRowCount();_++)for(let S=0;S<r.getBarcodeColumnCount();S++){let E=s[_][S+1].getValue(),D=_*r.getBarcodeColumnCount()+S;E.length===0?l.push(D):E.length===1?u[D]=E[0]:(p.push(D),d.push(E))}let x=new Array(d.length);for(let _=0;_<x.length;_++)x[_]=d[_];return bt.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),u,ze.toIntArray(l),ze.toIntArray(p),x)}static createDecoderResultFromAmbiguousValues(r,s,l,u,d){let p=new Int32Array(u.length),x=100;for(;x-- >0;){for(let _=0;_<p.length;_++)s[u[_]]=d[_][p[_]];try{return bt.decodeCodewords(s,r,l)}catch(_){if(!(_ instanceof I))throw _}if(p.length===0)throw I.getChecksumInstance();for(let _=0;_<p.length;_++)if(p[_]<d[_].length-1){p[_]++;break}else if(p[_]=0,_===p.length-1)throw I.getChecksumInstance()}throw I.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let u=0;u<s.length;u++)for(let d=0;d<s[u].length;d++)s[u][d]=new js;let l=0;for(let u of r.getDetectionResultColumns()){if(u!=null){for(let d of u.getCodewords())if(d!=null){let p=d.getRowNumber();if(p>=0){if(p>=s.length)continue;s[p][l].setValue(d.getValue())}}}l++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,l,u){let d=u?1:-1,p=null;if(bt.isValidBarcodeColumn(r,s-d)&&(p=r.getDetectionResultColumn(s-d).getCodeword(l)),p!=null)return u?p.getEndX():p.getStartX();if(p=r.getDetectionResultColumn(s).getCodewordNearby(l),p!=null)return u?p.getStartX():p.getEndX();if(bt.isValidBarcodeColumn(r,s-d)&&(p=r.getDetectionResultColumn(s-d).getCodewordNearby(l)),p!=null)return u?p.getEndX():p.getStartX();let x=0;for(;bt.isValidBarcodeColumn(r,s-d);){s-=d;for(let _ of r.getDetectionResultColumn(s).getCodewords())if(_!=null)return(u?_.getEndX():_.getStartX())+d*x*(_.getEndX()-_.getStartX());x++}return u?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,l,u,d,p,x,_){d=bt.adjustCodewordStartColumn(r,s,l,u,d,p);let S=bt.getModuleBitCount(r,s,l,u,d,p);if(S==null)return null;let E,D=nt.sum(S);if(u)E=d+D;else{for(let J=0;J<S.length/2;J++){let te=S[J];S[J]=S[S.length-1-J],S[S.length-1-J]=te}E=d,d=E-D}if(!bt.checkCodewordSkew(D,x,_))return null;let U=sr.getDecodedValue(S),Y=ze.getCodeword(U);return Y===-1?null:new ls(d,E,bt.getCodewordBucketNumber(U),Y)}static getModuleBitCount(r,s,l,u,d,p){let x=d,_=new Int32Array(8),S=0,E=u?1:-1,D=u;for(;(u?x<l:x>=s)&&S<_.length;)r.get(x,p)===D?(_[S]++,x+=E):(S++,D=!D);return S===_.length||x===(u?l:s)&&S===_.length-1?_:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,l,u,d,p){let x=d,_=u?-1:1;for(let S=0;S<2;S++){for(;(u?x>=s:x<l)&&u===r.get(x,p);){if(Math.abs(d-x)>bt.CODEWORD_SKEW_SIZE)return d;x+=_}_=-_,u=!u}return x}static checkCodewordSkew(r,s,l){return s-bt.CODEWORD_SKEW_SIZE<=r&&r<=l+bt.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,l){if(r.length===0)throw H.getFormatInstance();let u=1<<s+1,d=bt.correctErrors(r,l,u);bt.verifyCodewordCount(r,u);let p=fe.decode(r,""+s);return p.setErrorsCorrected(d),p.setErasures(l.length),p}static correctErrors(r,s,l){if(s!=null&&s.length>l/2+bt.MAX_ERRORS||l<0||l>bt.MAX_EC_CODEWORDS)throw I.getChecksumInstance();return bt.errorCorrection.decode(r,l,s)}static verifyCodewordCount(r,s){if(r.length<4)throw H.getFormatInstance();let l=r[0];if(l>r.length)throw H.getFormatInstance();if(l===0)if(s<r.length)r[0]=r.length-s;else throw H.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),l=0,u=s.length-1;for(;!((r&1)!==l&&(l=r&1,u--,u<0));)s[u]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return bt.getCodewordBucketNumber(bt.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new Vr;for(let l=0;l<r.length;l++){s.format("Row %2d: ",l);for(let u=0;u<r[l].length;u++){let d=r[l][u];d.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}s.format("%n")}return s.toString()}}bt.CODEWORD_SKEW_SIZE=2,bt.MAX_ERRORS=3,bt.MAX_EC_CODEWORDS=512,bt.errorCorrection=new Ca;class zn{decode(r,s=null){let l=zn.decode(r,s,!1);if(l==null||l.length===0||l[0]==null)throw ae.getNotFoundInstance();return l[0]}decodeMultiple(r,s=null){try{return zn.decode(r,s,!0)}catch(l){throw l instanceof H||l instanceof I?ae.getNotFoundInstance():l}}static decode(r,s,l){const u=new Array,d=vt.detectMultiple(r,s,l);for(const p of d.getPoints()){const x=bt.decode(d.getBits(),p[4],p[5],p[6],p[7],zn.getMinCodewordWidth(p),zn.getMaxCodewordWidth(p)),_=new De(x.getText(),x.getRawBytes(),void 0,p,oe.PDF_417);_.putMetadata(at.ERROR_CORRECTION_LEVEL,x.getECLevel());const S=x.getOther();S!=null&&_.putMetadata(at.PDF417_EXTRA_METADATA,S),u.push(_)}return u.map(p=>p)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?k.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(zn.getMaxWidth(r[0],r[4]),zn.getMaxWidth(r[6],r[2])*ze.MODULES_IN_CODEWORD/ze.MODULES_IN_STOP_PATTERN),Math.max(zn.getMaxWidth(r[1],r[5]),zn.getMaxWidth(r[7],r[3])*ze.MODULES_IN_CODEWORD/ze.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(zn.getMinWidth(r[0],r[4]),zn.getMinWidth(r[6],r[2])*ze.MODULES_IN_CODEWORD/ze.MODULES_IN_STOP_PATTERN),Math.min(zn.getMinWidth(r[1],r[5]),zn.getMinWidth(r[7],r[3])*ze.MODULES_IN_CODEWORD/ze.MODULES_IN_STOP_PATTERN)))}reset(){}}class wr extends y{}wr.kind="ReaderException";class du{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!i(r)&&r.get(G.TRY_HARDER)===!0,l=i(r)?null:r.get(G.POSSIBLE_FORMATS),u=new Array;if(!i(l)){const d=l.some(p=>p===oe.UPC_A||p===oe.UPC_E||p===oe.EAN_13||p===oe.EAN_8||p===oe.CODABAR||p===oe.CODE_39||p===oe.CODE_93||p===oe.CODE_128||p===oe.ITF||p===oe.RSS_14||p===oe.RSS_EXPANDED);d&&!s&&u.push(new Vi(r,this.verbose)),l.includes(oe.QR_CODE)&&u.push(new Bn),l.includes(oe.DATA_MATRIX)&&u.push(new Zt),l.includes(oe.AZTEC)&&u.push(new ut),l.includes(oe.PDF_417)&&u.push(new zn),d&&s&&u.push(new Vi(r,this.verbose))}u.length===0&&(s||u.push(new Vi(r,this.verbose)),u.push(new Bn),u.push(new Zt),u.push(new ut),u.push(new zn),s&&u.push(new Vi(r,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new wr("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(l){if(l instanceof wr)continue}throw new ae("No MultiFormat Readers were able to detect the code.")}}class hu extends qe{constructor(r=null,s=500){const l=new du;l.setHints(r),super(l,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class Hi extends qe{constructor(r=500){super(new zn,r)}}class fu extends qe{constructor(r=500){super(new Bn,r)}}var Ea;(function(P){P[P.ERROR_CORRECTION=0]="ERROR_CORRECTION",P[P.CHARACTER_SET=1]="CHARACTER_SET",P[P.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",P[P.MIN_SIZE=3]="MIN_SIZE",P[P.MAX_SIZE=4]="MAX_SIZE",P[P.MARGIN=5]="MARGIN",P[P.PDF417_COMPACT=6]="PDF417_COMPACT",P[P.PDF417_COMPACTION=7]="PDF417_COMPACTION",P[P.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",P[P.AZTEC_LAYERS=9]="AZTEC_LAYERS",P[P.QR_VERSION=10]="QR_VERSION"})(Ea||(Ea={}));var xn=Ea;class Tl{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new ot(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let l=s[s.length-1];const u=this.field;for(let d=s.length;d<=r;d++){const p=l.multiply(new ot(u,Int32Array.from([1,u.exp(d-1+u.getGeneratorBase())])));s.push(p),l=p}}return s[r]}encode(r,s){if(s===0)throw new b("No error correction bytes");const l=r.length-s;if(l<=0)throw new b("No data bytes provided");const u=this.buildGenerator(s),d=new Int32Array(l);R.arraycopy(r,0,d,0,l);let p=new ot(this.field,d);p=p.multiplyByMonomial(s,1);const _=p.divide(u)[1].getCoefficients(),S=s-_.length;for(let E=0;E<S;E++)r[l+E]=0;R.arraycopy(_,0,r,l+S,_.length)}}class cn{constructor(){}static applyMaskPenaltyRule1(r){return cn.applyMaskPenaltyRule1Internal(r,!0)+cn.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const l=r.getArray(),u=r.getWidth(),d=r.getHeight();for(let p=0;p<d-1;p++){const x=l[p];for(let _=0;_<u-1;_++){const S=x[_];S===x[_+1]&&S===l[p+1][_]&&S===l[p+1][_+1]&&s++}}return cn.N2*s}static applyMaskPenaltyRule3(r){let s=0;const l=r.getArray(),u=r.getWidth(),d=r.getHeight();for(let p=0;p<d;p++)for(let x=0;x<u;x++){const _=l[p];x+6<u&&_[x]===1&&_[x+1]===0&&_[x+2]===1&&_[x+3]===1&&_[x+4]===1&&_[x+5]===0&&_[x+6]===1&&(cn.isWhiteHorizontal(_,x-4,x)||cn.isWhiteHorizontal(_,x+7,x+11))&&s++,p+6<d&&l[p][x]===1&&l[p+1][x]===0&&l[p+2][x]===1&&l[p+3][x]===1&&l[p+4][x]===1&&l[p+5][x]===0&&l[p+6][x]===1&&(cn.isWhiteVertical(l,x,p-4,p)||cn.isWhiteVertical(l,x,p+7,p+11))&&s++}return s*cn.N3}static isWhiteHorizontal(r,s,l){s=Math.max(s,0),l=Math.min(l,r.length);for(let u=s;u<l;u++)if(r[u]===1)return!1;return!0}static isWhiteVertical(r,s,l,u){l=Math.max(l,0),u=Math.min(u,r.length);for(let d=l;d<u;d++)if(r[d][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const l=r.getArray(),u=r.getWidth(),d=r.getHeight();for(let _=0;_<d;_++){const S=l[_];for(let E=0;E<u;E++)S[E]===1&&s++}const p=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-p)*10/p)*cn.N4}static getDataMaskBit(r,s,l){let u,d;switch(r){case 0:u=l+s&1;break;case 1:u=l&1;break;case 2:u=s%3;break;case 3:u=(l+s)%3;break;case 4:u=Math.floor(l/2)+Math.floor(s/3)&1;break;case 5:d=l*s,u=(d&1)+d%3;break;case 6:d=l*s,u=(d&1)+d%3&1;break;case 7:d=l*s,u=d%3+(l+s&1)&1;break;default:throw new b("Invalid mask pattern: "+r)}return u===0}static applyMaskPenaltyRule1Internal(r,s){let l=0;const u=s?r.getHeight():r.getWidth(),d=s?r.getWidth():r.getHeight(),p=r.getArray();for(let x=0;x<u;x++){let _=0,S=-1;for(let E=0;E<d;E++){const D=s?p[x][E]:p[E][x];D===S?_++:(_>=5&&(l+=cn.N1+(_-5)),_=1,S=D)}_>=5&&(l+=cn.N1+(_-5))}return l}}cn.N1=3,cn.N2=3,cn.N3=40,cn.N4=10;class zo{constructor(r,s){this.width=r,this.height=s;const l=new Array(s);for(let u=0;u!==s;u++)l[u]=new Uint8Array(r);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,l){this.bytes[s][r]=l}setBoolean(r,s,l){this.bytes[s][r]=l?1:0}clear(r){for(const s of this.bytes)O.fill(s,r)}equals(r){if(!(r instanceof zo))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let l=0,u=this.height;l<u;++l){const d=this.bytes[l],p=s.bytes[l];for(let x=0,_=this.width;x<_;++x)if(d[x]!==p[x])return!1}return!0}toString(){const r=new ve;for(let s=0,l=this.height;s<l;++s){const u=this.bytes[s];for(let d=0,p=this.width;d<p;++d)switch(u[d]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class cs{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new ve;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<cs.NUM_MASK_PATTERNS}}cs.NUM_MASK_PATTERNS=8;class Xt extends y{}Xt.kind="WriterException";class ct{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,l,u,d){ct.clearMatrix(d),ct.embedBasicPatterns(l,d),ct.embedTypeInfo(s,u,d),ct.maybeEmbedVersionInfo(l,d),ct.embedDataBits(r,u,d)}static embedBasicPatterns(r,s){ct.embedPositionDetectionPatternsAndSeparators(s),ct.embedDarkDotAtLeftBottomCorner(s),ct.maybeEmbedPositionAdjustmentPatterns(r,s),ct.embedTimingPatterns(s)}static embedTypeInfo(r,s,l){const u=new W;ct.makeTypeInfoBits(r,s,u);for(let d=0,p=u.getSize();d<p;++d){const x=u.get(u.getSize()-1-d),_=ct.TYPE_INFO_COORDINATES[d],S=_[0],E=_[1];if(l.setBoolean(S,E,x),d<8){const D=l.getWidth()-d-1;l.setBoolean(D,8,x)}else{const U=l.getHeight()-7+(d-8);l.setBoolean(8,U,x)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const l=new W;ct.makeVersionInfoBits(r,l);let u=6*3-1;for(let d=0;d<6;++d)for(let p=0;p<3;++p){const x=l.get(u);u--,s.setBoolean(d,s.getHeight()-11+p,x),s.setBoolean(s.getHeight()-11+p,d,x)}}static embedDataBits(r,s,l){let u=0,d=-1,p=l.getWidth()-1,x=l.getHeight()-1;for(;p>0;){for(p===6&&(p-=1);x>=0&&x<l.getHeight();){for(let _=0;_<2;++_){const S=p-_;if(!ct.isEmpty(l.get(S,x)))continue;let E;u<r.getSize()?(E=r.get(u),++u):E=!1,s!==255&&cn.getDataMaskBit(s,S,x)&&(E=!E),l.setBoolean(S,x,E)}x+=d}d=-d,x+=d,p-=2}if(u!==r.getSize())throw new Xt("Not all bits consumed: "+u+"/"+r.getSize())}static findMSBSet(r){return 32-k.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new b("0 polynomial");const l=ct.findMSBSet(s);for(r<<=l-1;ct.findMSBSet(r)>=l;)r^=s<<ct.findMSBSet(r)-l;return r}static makeTypeInfoBits(r,s,l){if(!cs.isValidMaskPattern(s))throw new Xt("Invalid mask pattern");const u=r.getBits()<<3|s;l.appendBits(u,5);const d=ct.calculateBCHCode(u,ct.TYPE_INFO_POLY);l.appendBits(d,10);const p=new W;if(p.appendBits(ct.TYPE_INFO_MASK_PATTERN,15),l.xor(p),l.getSize()!==15)throw new Xt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const l=ct.calculateBCHCode(r.getVersionNumber(),ct.VERSION_INFO_POLY);if(s.appendBits(l,12),s.getSize()!==18)throw new Xt("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const l=(s+1)%2;ct.isEmpty(r.get(s,6))&&r.setNumber(s,6,l),ct.isEmpty(r.get(6,s))&&r.setNumber(6,s,l)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new Xt;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,l){for(let u=0;u<8;++u){if(!ct.isEmpty(l.get(r+u,s)))throw new Xt;l.setNumber(r+u,s,0)}}static embedVerticalSeparationPattern(r,s,l){for(let u=0;u<7;++u){if(!ct.isEmpty(l.get(r,s+u)))throw new Xt;l.setNumber(r,s+u,0)}}static embedPositionAdjustmentPattern(r,s,l){for(let u=0;u<5;++u){const d=ct.POSITION_ADJUSTMENT_PATTERN[u];for(let p=0;p<5;++p)l.setNumber(r+p,s+u,d[p])}}static embedPositionDetectionPattern(r,s,l){for(let u=0;u<7;++u){const d=ct.POSITION_DETECTION_PATTERN[u];for(let p=0;p<7;++p)l.setNumber(r+p,s+u,d[p])}}static embedPositionDetectionPatternsAndSeparators(r){const s=ct.POSITION_DETECTION_PATTERN[0].length;ct.embedPositionDetectionPattern(0,0,r),ct.embedPositionDetectionPattern(r.getWidth()-s,0,r),ct.embedPositionDetectionPattern(0,r.getWidth()-s,r);const l=8;ct.embedHorizontalSeparationPattern(0,l-1,r),ct.embedHorizontalSeparationPattern(r.getWidth()-l,l-1,r),ct.embedHorizontalSeparationPattern(0,r.getWidth()-l,r);const u=7;ct.embedVerticalSeparationPattern(u,0,r),ct.embedVerticalSeparationPattern(r.getHeight()-u-1,0,r),ct.embedVerticalSeparationPattern(u,r.getHeight()-u,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const l=r.getVersionNumber()-1,u=ct.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,p=u.length;d!==p;d++){const x=u[d];if(x>=0)for(let _=0;_!==p;_++){const S=u[_];S>=0&&ct.isEmpty(s.get(S,x))&&ct.embedPositionAdjustmentPattern(S-2,x-2,s)}}}}ct.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ct.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ct.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ct.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ct.VERSION_INFO_POLY=7973,ct.TYPE_INFO_POLY=1335,ct.TYPE_INFO_MASK_PATTERN=21522;class Wh{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Jt{constructor(){}static calculateMaskPenalty(r){return cn.applyMaskPenaltyRule1(r)+cn.applyMaskPenaltyRule2(r)+cn.applyMaskPenaltyRule3(r)+cn.applyMaskPenaltyRule4(r)}static encode(r,s,l=null){let u=Jt.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get(xn.CHARACTER_SET)!==void 0;d&&(u=l.get(xn.CHARACTER_SET).toString());const p=this.chooseMode(r,u),x=new W;if(p===it.BYTE&&(d||Jt.DEFAULT_BYTE_MODE_ENCODING!==u)){const Te=M.getCharacterSetECIByName(u);Te!==void 0&&this.appendECI(Te,x)}this.appendModeInfo(p,x);const _=new W;this.appendBytes(r,p,_,u);let S;if(l!==null&&l.get(xn.QR_VERSION)!==void 0){const Te=Number.parseInt(l.get(xn.QR_VERSION).toString(),10);S=Be.getVersionForNumber(Te);const Ae=this.calculateBitsNeeded(p,x,_,S);if(!this.willFit(Ae,S,s))throw new Xt("Data too big for requested version")}else S=this.recommendVersion(s,p,x,_);const E=new W;E.appendBitArray(x);const D=p===it.BYTE?_.getSizeInBytes():r.length;this.appendLengthInfo(D,S,p,E),E.appendBitArray(_);const U=S.getECBlocksForLevel(s),Y=S.getTotalCodewords()-U.getTotalECCodewords();this.terminateBits(Y,E);const J=this.interleaveWithECBytes(E,S.getTotalCodewords(),Y,U.getNumBlocks()),te=new cs;te.setECLevel(s),te.setMode(p),te.setVersion(S);const le=S.getDimensionForVersion(),he=new zo(le,le),Ne=this.chooseMaskPattern(J,s,S,he);return te.setMaskPattern(Ne),ct.buildMatrix(J,s,S,Ne,he),te.setMatrix(he),te}static recommendVersion(r,s,l,u){const d=this.calculateBitsNeeded(s,l,u,Be.getVersionForNumber(1)),p=this.chooseVersion(d,r),x=this.calculateBitsNeeded(s,l,u,p);return this.chooseVersion(x,r)}static calculateBitsNeeded(r,s,l,u){return s.getSize()+r.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(r){return r<Jt.ALPHANUMERIC_TABLE.length?Jt.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if(M.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return it.KANJI;let l=!1,u=!1;for(let d=0,p=r.length;d<p;++d){const x=r.charAt(d);if(Jt.isDigit(x))l=!0;else if(this.getAlphanumericCode(x.charCodeAt(0))!==-1)u=!0;else return it.BYTE}return u?it.ALPHANUMERIC:l?it.NUMERIC:it.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=ie.encode(r,M.SJIS)}catch{return!1}const l=s.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){const d=s[u]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(r,s,l,u){let d=Number.MAX_SAFE_INTEGER,p=-1;for(let x=0;x<cs.NUM_MASK_PATTERNS;x++){ct.buildMatrix(r,s,l,x,u);let _=this.calculateMaskPenalty(u);_<d&&(d=_,p=x)}return p}static chooseVersion(r,s){for(let l=1;l<=40;l++){const u=Be.getVersionForNumber(l);if(Jt.willFit(r,u,s))return u}throw new Xt("Data too big")}static willFit(r,s,l){const u=s.getTotalCodewords(),p=s.getECBlocksForLevel(l).getTotalECCodewords(),x=u-p,_=(r+7)/8;return x>=_}static terminateBits(r,s){const l=r*8;if(s.getSize()>l)throw new Xt("data bits cannot fit in the QR Code"+s.getSize()+" > "+l);for(let p=0;p<4&&s.getSize()<l;++p)s.appendBit(!1);const u=s.getSize()&7;if(u>0)for(let p=u;p<8;p++)s.appendBit(!1);const d=r-s.getSizeInBytes();for(let p=0;p<d;++p)s.appendBits(p&1?17:236,8);if(s.getSize()!==l)throw new Xt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,l,u,d,p){if(u>=l)throw new Xt("Block ID too large");const x=r%l,_=l-x,S=Math.floor(r/l),E=S+1,D=Math.floor(s/l),U=D+1,Y=S-D,J=E-U;if(Y!==J)throw new Xt("EC bytes mismatch");if(l!==_+x)throw new Xt("RS blocks mismatch");if(r!==(D+Y)*_+(U+J)*x)throw new Xt("Total bytes mismatch");u<_?(d[0]=D,p[0]=Y):(d[0]=U,p[0]=J)}static interleaveWithECBytes(r,s,l,u){if(r.getSizeInBytes()!==l)throw new Xt("Number of bits and data bytes does not match");let d=0,p=0,x=0;const _=new Array;for(let E=0;E<u;++E){const D=new Int32Array(1),U=new Int32Array(1);Jt.getNumDataBytesAndNumECBytesForBlockID(s,l,u,E,D,U);const Y=D[0],J=new Uint8Array(Y);r.toBytes(8*d,J,0,Y);const te=Jt.generateECBytes(J,U[0]);_.push(new Wh(J,te)),p=Math.max(p,Y),x=Math.max(x,te.length),d+=D[0]}if(l!==d)throw new Xt("Data bytes does not match offset");const S=new W;for(let E=0;E<p;++E)for(const D of _){const U=D.getDataBytes();E<U.length&&S.appendBits(U[E],8)}for(let E=0;E<x;++E)for(const D of _){const U=D.getErrorCorrectionBytes();E<U.length&&S.appendBits(U[E],8)}if(s!==S.getSizeInBytes())throw new Xt("Interleaving error: "+s+" and "+S.getSizeInBytes()+" differ.");return S}static generateECBytes(r,s){const l=r.length,u=new Int32Array(l+s);for(let p=0;p<l;p++)u[p]=r[p]&255;new Tl(Ze.QR_CODE_FIELD_256).encode(u,s);const d=new Uint8Array(s);for(let p=0;p<s;p++)d[p]=u[l+p];return d}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,l,u){const d=l.getCharacterCountBits(s);if(r>=1<<d)throw new Xt(r+" is bigger than "+((1<<d)-1));u.appendBits(r,d)}static appendBytes(r,s,l,u){switch(s){case it.NUMERIC:Jt.appendNumericBytes(r,l);break;case it.ALPHANUMERIC:Jt.appendAlphanumericBytes(r,l);break;case it.BYTE:Jt.append8BitBytes(r,l,u);break;case it.KANJI:Jt.appendKanjiBytes(r,l);break;default:throw new Xt("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=Jt.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const l=r.length;let u=0;for(;u<l;){const d=Jt.getDigit(r.charAt(u));if(u+2<l){const p=Jt.getDigit(r.charAt(u+1)),x=Jt.getDigit(r.charAt(u+2));s.appendBits(d*100+p*10+x,10),u+=3}else if(u+1<l){const p=Jt.getDigit(r.charAt(u+1));s.appendBits(d*10+p,7),u+=2}else s.appendBits(d,4),u++}}static appendAlphanumericBytes(r,s){const l=r.length;let u=0;for(;u<l;){const d=Jt.getAlphanumericCode(r.charCodeAt(u));if(d===-1)throw new Xt;if(u+1<l){const p=Jt.getAlphanumericCode(r.charCodeAt(u+1));if(p===-1)throw new Xt;s.appendBits(d*45+p,11),u+=2}else s.appendBits(d,6),u++}}static append8BitBytes(r,s,l){let u;try{u=ie.encode(r,l)}catch(d){throw new Xt(d)}for(let d=0,p=u.length;d!==p;d++){const x=u[d];s.appendBits(x,8)}}static appendKanjiBytes(r,s){let l;try{l=ie.encode(r,M.SJIS)}catch(d){throw new Xt(d)}const u=l.length;for(let d=0;d<u;d+=2){const p=l[d]&255,x=l[d+1]&255,_=p<<8&4294967295|x;let S=-1;if(_>=33088&&_<=40956?S=_-33088:_>=57408&&_<=60351&&(S=_-49472),S===-1)throw new Xt("Invalid byte sequence");const E=(S>>8)*192+(S&255);s.appendBits(E,13)}}static appendECI(r,s){s.appendBits(it.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}Jt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Jt.DEFAULT_BYTE_MODE_ENCODING=M.UTF8.getName();class Wi{write(r,s,l,u=null){if(r.length===0)throw new b("Found empty contents");if(s<0||l<0)throw new b("Requested dimensions are too small: "+s+"x"+l);let d=At.L,p=Wi.QUIET_ZONE_SIZE;u!==null&&(u.get(xn.ERROR_CORRECTION)!==void 0&&(d=At.fromString(u.get(xn.ERROR_CORRECTION).toString())),u.get(xn.MARGIN)!==void 0&&(p=Number.parseInt(u.get(xn.MARGIN).toString(),10)));const x=Jt.encode(r,d,u);return this.renderResult(x,s,l,p)}writeToDom(r,s,l,u,d=null){typeof r=="string"&&(r=document.querySelector(r));const p=this.write(s,l,u,d);r&&r.appendChild(p)}renderResult(r,s,l,u){const d=r.getMatrix();if(d===null)throw new Rt;const p=d.getWidth(),x=d.getHeight(),_=p+u*2,S=x+u*2,E=Math.max(s,_),D=Math.max(l,S),U=Math.min(Math.floor(E/_),Math.floor(D/S)),Y=Math.floor((E-p*U)/2),J=Math.floor((D-x*U)/2),te=this.createSVGElement(E,D);for(let le=0,he=J;le<x;le++,he+=U)for(let Ne=0,Te=Y;Ne<p;Ne++,Te+=U)if(d.get(Ne,le)===1){const Ae=this.createSvgRectElement(Te,he,U,U);te.appendChild(Ae)}return te}createSVGElement(r,s){const l=document.createElementNS(Wi.SVG_NS,"svg");return l.setAttributeNS(null,"height",r.toString()),l.setAttributeNS(null,"width",s.toString()),l}createSvgRectElement(r,s,l,u){const d=document.createElementNS(Wi.SVG_NS,"rect");return d.setAttributeNS(null,"x",r.toString()),d.setAttributeNS(null,"y",s.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",u.toString()),d.setAttributeNS(null,"fill","#000000"),d}}Wi.QUIET_ZONE_SIZE=4,Wi.SVG_NS="http://www.w3.org/2000/svg";class Ei{encode(r,s,l,u,d){if(r.length===0)throw new b("Found empty contents");if(s!==oe.QR_CODE)throw new b("Can only encode QR_CODE, but got "+s);if(l<0||u<0)throw new b(`Requested dimensions are too small: ${l}x${u}`);let p=At.L,x=Ei.QUIET_ZONE_SIZE;d!==null&&(d.get(xn.ERROR_CORRECTION)!==void 0&&(p=At.fromString(d.get(xn.ERROR_CORRECTION).toString())),d.get(xn.MARGIN)!==void 0&&(x=Number.parseInt(d.get(xn.MARGIN).toString(),10)));const _=Jt.encode(r,p,d);return Ei.renderResult(_,l,u,x)}static renderResult(r,s,l,u){const d=r.getMatrix();if(d===null)throw new Rt;const p=d.getWidth(),x=d.getHeight(),_=p+u*2,S=x+u*2,E=Math.max(s,_),D=Math.max(l,S),U=Math.min(Math.floor(E/_),Math.floor(D/S)),Y=Math.floor((E-p*U)/2),J=Math.floor((D-x*U)/2),te=new Ee(E,D);for(let le=0,he=J;le<x;le++,he+=U)for(let Ne=0,Te=Y;Ne<p;Ne++,Te+=U)d.get(Ne,le)===1&&te.setRegion(Te,he,U,U);return te}}Ei.QUIET_ZONE_SIZE=4;class us{encode(r,s,l,u,d){let p;switch(s){case oe.QR_CODE:p=new Ei;break;default:throw new b("No encoder available for format "+s)}return p.encode(r,s,l,u,d)}}class ii extends ne{constructor(r,s,l,u,d,p,x,_){if(super(p,x),this.yuvData=r,this.dataWidth=s,this.dataHeight=l,this.left=u,this.top=d,u+p>s||d+x>l)throw new b("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(p,x)}getRow(r,s){if(r<0||r>=this.getHeight())throw new b("Requested row is outside the image: "+r);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(r+this.top)*this.dataWidth+this.left;return R.arraycopy(this.yuvData,u,s,0,l),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const l=r*s,u=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return R.arraycopy(this.yuvData,d,u,0,l),u;for(let p=0;p<s;p++){const x=p*r;R.arraycopy(this.yuvData,d,u,x,r),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,s,l,u){return new ii(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,l,u,!1)}renderThumbnail(){const r=this.getWidth()/ii.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/ii.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(r*s),u=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let p=0;p<s;p++){const x=p*r;for(let _=0;_<r;_++){const S=u[d+_*ii.THUMBNAIL_SCALE_FACTOR]&255;l[x+_]=4278190080|S*65793}d+=this.dataWidth*ii.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/ii.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ii.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const l=this.yuvData;for(let u=0,d=this.top*this.dataWidth+this.left;u<s;u++,d+=this.dataWidth){const p=d+r/2;for(let x=d,_=d+r-1;x<p;x++,_--){const S=l[x];l[x]=l[_],l[_]=S}}}invert(){return new Se(this)}}ii.THUMBNAIL_SCALE_FACTOR=2;class ds extends ne{constructor(r,s,l,u,d,p,x){if(super(s,l),this.dataWidth=u,this.dataHeight=d,this.left=p,this.top=x,r.BYTES_PER_ELEMENT===4){const _=s*l,S=new Uint8ClampedArray(_);for(let E=0;E<_;E++){const D=r[E],U=D>>16&255,Y=D>>7&510,J=D&255;S[E]=(U+Y+J)/4&255}this.luminances=S}else this.luminances=r;if(u===void 0&&(this.dataWidth=s),d===void 0&&(this.dataHeight=l),p===void 0&&(this.left=0),x===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+l>this.dataHeight)throw new b("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new b("Requested row is outside the image: "+r);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(r+this.top)*this.dataWidth+this.left;return R.arraycopy(this.luminances,u,s,0,l),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const l=r*s,u=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return R.arraycopy(this.luminances,d,u,0,l),u;for(let p=0;p<s;p++){const x=p*r;R.arraycopy(this.luminances,d,u,x,r),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,s,l,u){return new ds(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new Se(this)}}class vr extends M{static forName(r){return this.getCharacterSetECIByName(r)}}class Na{}Na.ISO_8859_1=M.ISO8859_1;class Il{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class pu{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class kl{constructor(r){this.previous=r}getPrevious(){return this.previous}}class Zi extends kl{constructor(r,s,l){super(r),this.value=s,this.bitCount=l}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new Zi(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Zi(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+k.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class Ml extends Zi{constructor(r,s,l){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=l}appendTo(r,s){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):l===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+l],8)}addBinaryShift(r,s){return new Ml(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Zh(P,r,s){return new Ml(P,r,s)}function Fs(P,r,s){return new Zi(P,r,s)}const Gh=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ln=0,Ni=1,kr=2,si=3,oi=4,zs=new Zi(null,0,0),Rl=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Uo(P){for(let r of P)O.fill(r,-1);return P[Ln][oi]=0,P[Ni][oi]=0,P[Ni][Ln]=28,P[si][oi]=0,P[kr][oi]=0,P[kr][Ln]=15,P}const Ol=Uo(O.createInt32Array(6,6));class _r{constructor(r,s,l,u){this.token=r,this.mode=s,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let l=this.bitCount,u=this.token;if(r!==this.mode){let p=Rl[this.mode][r];u=Fs(u,p&65535,p>>16),l+=p>>16}let d=r===kr?4:5;return u=Fs(u,s,d),new _r(u,r,0,l+d)}shiftAndAppend(r,s){let l=this.token,u=this.mode===kr?4:5;return l=Fs(l,Ol[this.mode][r],u),l=Fs(l,s,5),new _r(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(r){let s=this.token,l=this.mode,u=this.bitCount;if(this.mode===oi||this.mode===kr){let x=Rl[l][Ln];s=Fs(s,x&65535,x>>16),u+=x>>16,l=Ln}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,p=new _r(s,l,this.binaryShiftByteCount+1,u+d);return p.binaryShiftByteCount===2078&&(p=p.endBinaryShift(r+1)),p}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=Zh(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new _r(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(Rl[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=_r.calculateBinaryShiftCost(r)-_r.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let u=this.endBinaryShift(r.length).token;u!==null;u=u.getPrevious())s.unshift(u);let l=new W;for(const u of s)u.appendTo(l,r);return l}toString(){return se.format("%s bits=%d bytes=%d",Gh[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}_r.INITIAL_STATE=new _r(zs,Ln,0,0);function Yh(P){const r=se.getCharCode(" "),s=se.getCharCode("."),l=se.getCharCode(",");P[Ln][r]=1;const u=se.getCharCode("Z"),d=se.getCharCode("A");for(let U=d;U<=u;U++)P[Ln][U]=U-d+2;P[Ni][r]=1;const p=se.getCharCode("z"),x=se.getCharCode("a");for(let U=x;U<=p;U++)P[Ni][U]=U-x+2;P[kr][r]=1;const _=se.getCharCode("9"),S=se.getCharCode("0");for(let U=S;U<=_;U++)P[kr][U]=U-S+2;P[kr][l]=12,P[kr][s]=13;const E=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let U=0;U<E.length;U++)P[si][se.getCharCode(E[U])]=U;const D=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let U=0;U<D.length;U++)se.getCharCode(D[U])>0&&(P[oi][se.getCharCode(D[U])]=U);return P}const ai=Yh(O.createInt32Array(5,256));class Gi{constructor(r){this.text=r}encode(){const r=se.getCharCode(" "),s=se.getCharCode(`
`);let l=pu.singletonList(_r.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let p,x=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case se.getCharCode("\r"):p=x===s?2:0;break;case se.getCharCode("."):p=x===r?3:0;break;case se.getCharCode(","):p=x===r?4:0;break;case se.getCharCode(":"):p=x===r?5:0;break;default:p=0}p>0?(l=Gi.updateStateListForPair(l,d,p),d++):l=this.updateStateListForChar(l,d)}return pu.min(l,(d,p)=>d.getBitCount()-p.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const l=[];for(let u of r)this.updateStateForChar(u,s,l);return Gi.simplifyStates(l)}updateStateForChar(r,s,l){let u=this.text[s]&255,d=ai[r.getMode()][u]>0,p=null;for(let x=0;x<=oi;x++){let _=ai[x][u];if(_>0){if(p==null&&(p=r.endBinaryShift(s)),!d||x===r.getMode()||x===kr){const S=p.latchAndAppend(x,_);l.push(S)}if(!d&&Ol[r.getMode()][x]>=0){const S=p.shiftAndAppend(x,_);l.push(S)}}}if(r.getBinaryShiftByteCount()>0||ai[r.getMode()][u]===0){let x=r.addBinaryShiftChar(s);l.push(x)}}static updateStateListForPair(r,s,l){const u=[];for(let d of r)this.updateStateForPair(d,s,l,u);return this.simplifyStates(u)}static updateStateForPair(r,s,l,u){let d=r.endBinaryShift(s);if(u.push(d.latchAndAppend(oi,l)),r.getMode()!==oi&&u.push(d.shiftAndAppend(oi,l)),l===3||l===4){let p=d.latchAndAppend(kr,16-l).latchAndAppend(kr,1);u.push(p)}if(r.getBinaryShiftByteCount()>0){let p=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);u.push(p)}}static simplifyStates(r){let s=[];for(const l of r){let u=!0;for(const d of s){if(d.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(d)&&(s=s.filter(p=>p!==d))}u&&s.push(l)}return s}}class Pt{constructor(){}static encodeBytes(r){return Pt.encode(r,Pt.DEFAULT_EC_PERCENT,Pt.DEFAULT_AZTEC_LAYERS)}static encode(r,s,l){let u=new Gi(r).encode(),d=k.truncDivision(u.getSize()*s,100)+11,p=u.getSize()+d,x,_,S,E,D;if(l!==Pt.DEFAULT_AZTEC_LAYERS){if(x=l<0,_=Math.abs(l),_>(x?Pt.MAX_NB_BITS_COMPACT:Pt.MAX_NB_BITS))throw new b(se.format("Illegal value %s for layers",l));S=Pt.totalBitsInLayer(_,x),E=Pt.WORD_SIZE[_];let Ae=S-S%E;if(D=Pt.stuffBits(u,E),D.getSize()+d>Ae)throw new b("Data to large for user specified layer");if(x&&D.getSize()>E*64)throw new b("Data to large for user specified layer")}else{E=0,D=null;for(let Ae=0;;Ae++){if(Ae>Pt.MAX_NB_BITS)throw new b("Data too large for an Aztec code");if(x=Ae<=3,_=x?Ae+1:Ae,S=Pt.totalBitsInLayer(_,x),p>S)continue;(D==null||E!==Pt.WORD_SIZE[_])&&(E=Pt.WORD_SIZE[_],D=Pt.stuffBits(u,E));let Et=S-S%E;if(!(x&&D.getSize()>E*64)&&D.getSize()+d<=Et)break}}let U=Pt.generateCheckWords(D,S,E),Y=D.getSize()/E,J=Pt.generateModeMessage(x,_,Y),te=(x?11:14)+_*4,le=new Int32Array(te),he;if(x){he=te;for(let Ae=0;Ae<le.length;Ae++)le[Ae]=Ae}else{he=te+1+2*k.truncDivision(k.truncDivision(te,2)-1,15);let Ae=k.truncDivision(te,2),Et=k.truncDivision(he,2);for(let _t=0;_t<Ae;_t++){let un=_t+k.truncDivision(_t,15);le[Ae-_t-1]=Et-un-1,le[Ae+_t]=Et+un+1}}let Ne=new Ee(he);for(let Ae=0,Et=0;Ae<_;Ae++){let _t=(_-Ae)*4+(x?9:12);for(let un=0;un<_t;un++){let or=un*2;for(let ar=0;ar<2;ar++)U.get(Et+or+ar)&&Ne.set(le[Ae*2+ar],le[Ae*2+un]),U.get(Et+_t*2+or+ar)&&Ne.set(le[Ae*2+un],le[te-1-Ae*2-ar]),U.get(Et+_t*4+or+ar)&&Ne.set(le[te-1-Ae*2-ar],le[te-1-Ae*2-un]),U.get(Et+_t*6+or+ar)&&Ne.set(le[te-1-Ae*2-un],le[Ae*2+ar])}Et+=_t*8}if(Pt.drawModeMessage(Ne,x,he,J),x)Pt.drawBullsEye(Ne,k.truncDivision(he,2),5);else{Pt.drawBullsEye(Ne,k.truncDivision(he,2),7);for(let Ae=0,Et=0;Ae<k.truncDivision(te,2)-1;Ae+=15,Et+=16)for(let _t=k.truncDivision(he,2)&1;_t<he;_t+=2)Ne.set(k.truncDivision(he,2)-Et,_t),Ne.set(k.truncDivision(he,2)+Et,_t),Ne.set(_t,k.truncDivision(he,2)-Et),Ne.set(_t,k.truncDivision(he,2)+Et)}let Te=new Il;return Te.setCompact(x),Te.setSize(he),Te.setLayers(_),Te.setCodeWords(Y),Te.setMatrix(Ne),Te}static drawBullsEye(r,s,l){for(let u=0;u<l;u+=2)for(let d=s-u;d<=s+u;d++)r.set(d,s-u),r.set(d,s+u),r.set(s-u,d),r.set(s+u,d);r.set(s-l,s-l),r.set(s-l+1,s-l),r.set(s-l,s-l+1),r.set(s+l,s-l),r.set(s+l,s-l+1),r.set(s+l,s+l-1)}static generateModeMessage(r,s,l){let u=new W;return r?(u.appendBits(s-1,2),u.appendBits(l-1,6),u=Pt.generateCheckWords(u,28,4)):(u.appendBits(s-1,5),u.appendBits(l-1,11),u=Pt.generateCheckWords(u,40,4)),u}static drawModeMessage(r,s,l,u){let d=k.truncDivision(l,2);if(s)for(let p=0;p<7;p++){let x=d-3+p;u.get(p)&&r.set(x,d-5),u.get(p+7)&&r.set(d+5,x),u.get(20-p)&&r.set(x,d+5),u.get(27-p)&&r.set(d-5,x)}else for(let p=0;p<10;p++){let x=d-5+p+k.truncDivision(p,5);u.get(p)&&r.set(x,d-7),u.get(p+10)&&r.set(d+7,x),u.get(29-p)&&r.set(x,d+7),u.get(39-p)&&r.set(d-7,x)}}static generateCheckWords(r,s,l){let u=r.getSize()/l,d=new Tl(Pt.getGF(l)),p=k.truncDivision(s,l),x=Pt.bitsToWords(r,l,p);d.encode(x,p-u);let _=s%l,S=new W;S.appendBits(0,_);for(const E of Array.from(x))S.appendBits(E,l);return S}static bitsToWords(r,s,l){let u=new Int32Array(l),d,p;for(d=0,p=r.getSize()/s;d<p;d++){let x=0;for(let _=0;_<s;_++)x|=r.get(d*s+_)?1<<s-_-1:0;u[d]=x}return u}static getGF(r){switch(r){case 4:return Ze.AZTEC_PARAM;case 6:return Ze.AZTEC_DATA_6;case 8:return Ze.AZTEC_DATA_8;case 10:return Ze.AZTEC_DATA_10;case 12:return Ze.AZTEC_DATA_12;default:throw new b("Unsupported word size "+r)}}static stuffBits(r,s){let l=new W,u=r.getSize(),d=(1<<s)-2;for(let p=0;p<u;p+=s){let x=0;for(let _=0;_<s;_++)(p+_>=u||r.get(p+_))&&(x|=1<<s-1-_);(x&d)===d?(l.appendBits(x&d,s),p--):x&d?l.appendBits(x,s):(l.appendBits(x|1,s),p--)}return l}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}Pt.DEFAULT_EC_PERCENT=33,Pt.DEFAULT_AZTEC_LAYERS=0,Pt.MAX_NB_BITS=32,Pt.MAX_NB_BITS_COMPACT=4,Pt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Us{encode(r,s,l,u){return this.encodeWithHints(r,s,l,u,null)}encodeWithHints(r,s,l,u,d){let p=Na.ISO_8859_1,x=Pt.DEFAULT_EC_PERCENT,_=Pt.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(xn.CHARACTER_SET)&&(p=vr.forName(d.get(xn.CHARACTER_SET).toString())),d.has(xn.ERROR_CORRECTION)&&(x=k.parseInt(d.get(xn.ERROR_CORRECTION).toString())),d.has(xn.AZTEC_LAYERS)&&(_=k.parseInt(d.get(xn.AZTEC_LAYERS).toString()))),Us.encodeLayers(r,s,l,u,p,x,_)}static encodeLayers(r,s,l,u,d,p,x){if(s!==oe.AZTEC)throw new b("Can only encode AZTEC, but got "+s);let _=Pt.encode(se.getBytes(r,d),p,x);return Us.renderResult(_,l,u)}static renderResult(r,s,l){let u=r.getMatrix();if(u==null)throw new Rt;let d=u.getWidth(),p=u.getHeight(),x=Math.max(s,d),_=Math.max(l,p),S=Math.min(x/d,_/p),E=(x-d*S)/2,D=(_-p*S)/2,U=new Ee(x,_);for(let Y=0,J=D;Y<p;Y++,J+=S)for(let te=0,le=E;te<d;te++,le+=S)u.get(te,Y)&&U.setRegion(le,J,S,S);return U}}n.AbstractExpandedDecoder=_a,n.ArgumentException=C,n.ArithmeticException=yt,n.AztecCode=Il,n.AztecCodeReader=ut,n.AztecCodeWriter=Us,n.AztecDecoder=gt,n.AztecDetector=Fe,n.AztecDetectorResult=rs,n.AztecEncoder=Pt,n.AztecHighLevelEncoder=Gi,n.AztecPoint=Ue,n.BarcodeFormat=oe,n.Binarizer=F,n.BinaryBitmap=T,n.BitArray=W,n.BitMatrix=Ee,n.BitSource=Ps,n.BrowserAztecCodeReader=Ot,n.BrowserBarcodeReader=Lo,n.BrowserCodeReader=qe,n.BrowserDatamatrixCodeReader=Cl,n.BrowserMultiFormatReader=hu,n.BrowserPDF417Reader=Hi,n.BrowserQRCodeReader=fu,n.BrowserQRCodeSvgWriter=Wi,n.CharacterSetECI=M,n.ChecksumException=I,n.Code128Reader=_e,n.Code39Reader=jt,n.DataMatrixDecodedBitStreamParser=yr,n.DataMatrixReader=Zt,n.DecodeHintType=G,n.DecoderResult=Nt,n.DefaultGridSampler=Oe,n.DetectorResult=rr,n.EAN13Reader=xr,n.EncodeHintType=xn,n.Exception=y,n.FormatException=H,n.GenericGF=Ze,n.GenericGFPoly=ot,n.GlobalHistogramBinarizer=de,n.GridSampler=zi,n.GridSamplerInstance=Je,n.HTMLCanvasElementLuminanceSource=ye,n.HybridBinarizer=ke,n.ITFReader=$e,n.IllegalArgumentException=b,n.IllegalStateException=Rt,n.InvertedLuminanceSource=Se,n.LuminanceSource=ne,n.MathUtils=nt,n.MultiFormatOneDReader=Vi,n.MultiFormatReader=du,n.MultiFormatWriter=us,n.NotFoundException=ae,n.OneDReader=He,n.PDF417DecodedBitStreamParser=fe,n.PDF417DecoderErrorCorrection=Ca,n.PDF417Reader=zn,n.PDF417ResultMetadata=Nl,n.PerspectiveTransform=K,n.PlanarYUVLuminanceSource=ii,n.QRCodeByteMatrix=zo,n.QRCodeDataMask=Xn,n.QRCodeDecodedBitStreamParser=nn,n.QRCodeDecoderErrorCorrectionLevel=At,n.QRCodeDecoderFormatInformation=Yn,n.QRCodeEncoder=Jt,n.QRCodeEncoderQRCode=cs,n.QRCodeMaskUtil=cn,n.QRCodeMatrixUtil=ct,n.QRCodeMode=it,n.QRCodeReader=Bn,n.QRCodeVersion=Be,n.QRCodeWriter=Ei,n.RGBLuminanceSource=ds,n.RSS14Reader=mn,n.RSSExpandedReader=be,n.ReaderException=wr,n.ReedSolomonDecoder=Wt,n.ReedSolomonEncoder=Tl,n.ReedSolomonException=Ht,n.Result=De,n.ResultMetadataType=at,n.ResultPoint=Re,n.StringUtils=se,n.UnsupportedOperationException=X,n.VideoInputDevice=ge,n.WhiteRectangleDetector=gr,n.WriterException=Xt,n.ZXingArrays=O,n.ZXingCharset=vr,n.ZXingInteger=k,n.ZXingStandardCharsets=Na,n.ZXingStringBuilder=ve,n.ZXingStringEncoding=ie,n.ZXingSystem=R,n.createAbstractExpandedDecoder=Oo,Object.defineProperty(n,"__esModule",{value:!0})})})(fp,fp.exports);var yn=fp.exports;const ak=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var Sy=function(){function e(t,n,i){if(this.formatMap=new Map([[Ge.QR_CODE,yn.BarcodeFormat.QR_CODE],[Ge.AZTEC,yn.BarcodeFormat.AZTEC],[Ge.CODABAR,yn.BarcodeFormat.CODABAR],[Ge.CODE_39,yn.BarcodeFormat.CODE_39],[Ge.CODE_93,yn.BarcodeFormat.CODE_93],[Ge.CODE_128,yn.BarcodeFormat.CODE_128],[Ge.DATA_MATRIX,yn.BarcodeFormat.DATA_MATRIX],[Ge.MAXICODE,yn.BarcodeFormat.MAXICODE],[Ge.ITF,yn.BarcodeFormat.ITF],[Ge.EAN_13,yn.BarcodeFormat.EAN_13],[Ge.EAN_8,yn.BarcodeFormat.EAN_8],[Ge.PDF_417,yn.BarcodeFormat.PDF_417],[Ge.RSS_14,yn.BarcodeFormat.RSS_14],[Ge.RSS_EXPANDED,yn.BarcodeFormat.RSS_EXPANDED],[Ge.UPC_A,yn.BarcodeFormat.UPC_A],[Ge.UPC_E,yn.BarcodeFormat.UPC_E],[Ge.UPC_EAN_EXTENSION,yn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!ak)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var a=this.createZXingFormats(t),c=new Map;c.set(yn.DecodeHintType.POSSIBLE_FORMATS,a),c.set(yn.DecodeHintType.TRY_HARDER,!1),this.hints=c}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(i,a){try{i(n.decode(t))}catch(c){a(c)}})},e.prototype.decode=function(t){var n=new yn.MultiFormatReader(this.verbose,this.hints),i=new yn.HTMLCanvasElementLuminanceSource(t),a=new yn.BinaryBitmap(new yn.HybridBinarizer(i)),c=n.decode(a);return{text:c.text,format:eC.create(this.toHtml5QrcodeSupportedFormats(c.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,a){t.set(n,i)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],i=0,a=t;i<a.length;i++){var c=a[i];this.formatMap.has(c)?n.push(this.formatMap.get(c)):this.logger.logError("".concat(c," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),lk=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(C){try{y(i.next(C))}catch(b){f(b)}}function v(C){try{y(i.throw(C))}catch(b){f(b)}}function y(C){C.done?c(C.value):a(C.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},ck=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(C){return v([y,C])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Ay=function(){function e(t,n,i){if(this.formatMap=new Map([[Ge.QR_CODE,"qr_code"],[Ge.AZTEC,"aztec"],[Ge.CODABAR,"codabar"],[Ge.CODE_39,"code_39"],[Ge.CODE_93,"code_93"],[Ge.CODE_128,"code_128"],[Ge.DATA_MATRIX,"data_matrix"],[Ge.ITF,"itf"],[Ge.EAN_13,"ean_13"],[Ge.EAN_8,"ean_8"],[Ge.PDF_417,"pdf417"],[Ge.UPC_A,"upc_a"],[Ge.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return lk(this,void 0,void 0,function(){var n,i;return ck(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=a.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:eC.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,i=0,a=0,c=t;a<c.length;a++){var f=c[a],g=f.boundingBox.width*f.boundingBox.height;g>i&&(i=g,n=f)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],i=0,a=t;i<a.length;i++){var c=a[i];this.formatMap.has(c)?n.push(this.formatMap.get(c)):this.logger.warn("".concat(c," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,a){t.set(n,i)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),Ey=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(C){try{y(i.next(C))}catch(b){f(b)}}function v(C){try{y(i.throw(C))}catch(b){f(b)}}function y(C){C.done?c(C.value):a(C.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},Ny=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(C){return v([y,C])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},uk=function(){function e(t,n,i,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&Ay.isSupported()?(this.primaryDecoder=new Ay(t,i,a),this.secondaryDecoder=new Sy(t,i,a)):this.primaryDecoder=new Sy(t,i,a)}return e.prototype.decodeAsync=function(t){return Ey(this,void 0,void 0,function(){var n;return Ny(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return Ey(this,void 0,void 0,function(){var n,i;return Ny(this,function(a){switch(a.label){case 0:n=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,a.sent()];case 3:if(i=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,i=this.executionResults;n<i.length;n++){var a=i[n];t+=a}var c=t/this.executionResults.length;console.log("".concat(c," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),rm=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),qd=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(C){try{y(i.next(C))}catch(b){f(b)}}function v(C){try{y(i.throw(C))}catch(b){f(b)}}function y(C){C.done?c(C.value):a(C.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},Kd=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(C){return v([y,C])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},iC=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var i={advanced:[n]};return this.track.applyConstraints(i)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e}(),dk=function(e){rm(t,e);function t(n,i){return e.call(this,n,i)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var i={};i[this.name]=n;var a={advanced:[i]};return this.track.applyConstraints(a)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(iC),hk=function(e){rm(t,e);function t(n){return e.call(this,"zoom",n)||this}return t}(dk),fk=function(e){rm(t,e);function t(n){return e.call(this,"torch",n)||this}return t}(iC),pk=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new hk(this.track)},e.prototype.torchFeature=function(){return new fk(this.track)},e}(),mk=function(){function e(t,n,i){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=t.surface.clientWidth,a=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(i,a),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,i,a){return qd(this,void 0,void 0,function(){var c,f;return Kd(this,function(g){switch(g.label){case 0:return c=new e(t,n,a),i.aspectRatio?(f={aspectRatio:i.aspectRatio},[4,c.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:g.sent(),g.label=2;case 2:return c.setupSurface(),[2,c]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,i=function(){setTimeout(t,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return qd(this,void 0,void 0,function(){return Kd(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,i){var a=t.mediaStream.getVideoTracks(),c=a.length,f=0;t.mediaStream.getVideoTracks().forEach(function(g){t.mediaStream.removeTrack(g),g.stop(),++f,f>=c&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new pk(this.getFirstTrackOrFail())},e}(),gk=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,i){return qd(this,void 0,void 0,function(){return Kd(this,function(a){return[2,mk.create(t,this.mediaStream,n,i)]})})},e.create=function(t){return qd(this,void 0,void 0,function(){var n,i;return Kd(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=a.sent(),[2,new e(i)]}})})},e}(),Ty=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(C){try{y(i.next(C))}catch(b){f(b)}}function v(C){try{y(i.throw(C))}catch(b){f(b)}}function y(C){C.done?c(C.value):a(C.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},Iy=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(C){return v([y,C])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},xk=function(){function e(){}return e.failIfNotSupported=function(){return Ty(this,void 0,void 0,function(){return Iy(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return Ty(this,void 0,void 0,function(){return Iy(this,function(n){return[2,gk.create(t)]})})},e}(),yk=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(C){try{y(i.next(C))}catch(b){f(b)}}function v(C){try{y(i.throw(C))}catch(b){f(b)}}function y(C){C.done?c(C.value):a(C.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},wk=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(C){return v([y,C])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},vk=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=qa.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=qa.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return yk(this,void 0,void 0,function(){var t,n,i,a,c,f,g;return wk(this,function(v){switch(v.label){case 0:return t=function(y){for(var C=y.getVideoTracks(),b=0,T=C;b<T.length;b++){var I=T[b];I.enabled=!1,I.stop(),y.removeTrack(I)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=v.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=v.sent(),a=[],c=0,f=i;c<f.length;c++)g=f[c],g.kind==="videoinput"&&a.push({id:g.deviceId,label:g.label});return t(n),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var i=function(c){for(var f=[],g=0,v=c;g<v.length;g++){var y=v[g];y.kind==="video"&&f.push({id:y.id,label:y.label})}t(f)},a=MediaStreamTrack;a.getSources(i)})},e}(),Sn;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Sn||(Sn={}));var _k=function(){function e(){this.state=Sn.NOT_STARTED,this.onGoingTransactionNewState=Sn.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Sn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Sn.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Sn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Sn.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Sn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Sn.UNKNOWN:throw"Transition from unknown is not allowed";case Sn.NOT_STARTED:this.failIfNewStateIs(t,[Sn.PAUSED]);break;case Sn.SCANNING:break;case Sn.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var i=0,a=n;i<a.length;i++){var c=a[i];if(t===c)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),bk=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Sn.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Sn.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Sn.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Sn.PAUSED},e}(),Ck=function(){function e(){}return e.create=function(){return new bk(new _k)},e}(),Sk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Wr=function(e){Sk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(Ri),Ak=function(){function e(t,n){this.logger=n,this.fps=Wr.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Wr.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?rC.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Ki(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),ky=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new nC(this.verbose),this.qrcode=new uk(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Ck.create()}return e.prototype.start=function(t,n,i,a){var c=this;if(!t)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;a?f=a:f=this.verbose?this.logger.log:function(){};var g=Ak.create(n,this.logger);this.clearElement();var v=!1;g.videoConstraints&&(g.isMediaStreamConstraintsValid()?v=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var y=v,C=document.getElementById(this.elementId);C.clientWidth?C.clientWidth:Wr.DEFAULT_WIDTH,C.style.position="relative",this.shouldScan=!0,this.element=C;var b=this,T=this.stateManagerProxy.startTransition(Sn.SCANNING);return new Promise(function(I,F){var R=y?g.videoConstraints:b.createVideoConstraints(t);if(!R){T.cancel(),F("videoConstraints should be defined");return}var B={};(!y||g.aspectRatio)&&(B.aspectRatio=g.aspectRatio);var z={onRenderSurfaceReady:function(O,k){b.setupUi(O,k,g),b.isScanning=!0,b.foreverScan(g,i,f)}};xk.failIfNotSupported().then(function(O){O.create(R).then(function(k){return k.render(c.element,B,z).then(function(W){b.renderedCamera=W,T.execute(),I(null)}).catch(function(W){T.cancel(),F(W)})}).catch(function(k){T.cancel(),F(qa.errorGettingUserMedia(k))})}).catch(function(O){T.cancel(),F(qa.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Sn.PAUSED),this.showPausedState(),(Ki(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(Sn.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Sn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(t.element){var c=document.getElementById(Wr.SHADED_REGION_ELEMENT_ID);c&&t.element.removeChild(c)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),i(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),n.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(i){return i.decodedText})},e.prototype.scanFileV2=function(t,n){var i=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ki(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,c){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(t);var f=new Image;f.onload=function(){var g=f.width,v=f.height,y=document.getElementById(i.elementId),C=y.clientWidth?y.clientWidth:Wr.DEFAULT_WIDTH,b=Math.max(y.clientHeight?y.clientHeight:v,Wr.FILE_SCAN_MIN_HEIGHT),T=i.computeCanvasDrawConfig(g,v,C,b);if(n){var I=i.createCanvasElement(C,b,"qr-canvas-visible");I.style.display="inline-block",y.appendChild(I);var F=I.getContext("2d");if(!F)throw"Unable to get 2d context from canvas";F.canvas.width=C,F.canvas.height=b,F.drawImage(f,0,0,g,v,T.x,T.y,T.width,T.height)}var R=Wr.FILE_SCAN_HIDDEN_CANVAS_PADDING,B=Math.max(f.width,T.width),z=Math.max(f.height,T.height),O=B+2*R,k=z+2*R,W=i.createCanvasElement(O,k);y.appendChild(W);var Q=W.getContext("2d");if(!Q)throw"Unable to get 2d context from canvas";Q.canvas.width=O,Q.canvas.height=k,Q.drawImage(f,0,0,g,v,R,R,B,z);try{i.qrcode.decodeRobustlyAsync(W).then(function(G){a(by.createFromQrcodeResult(G))}).catch(c)}catch(G){c("QR code parse error, error = ".concat(G))}},f.onerror=c,f.onabort=c,f.onstalled=c,f.onsuspend=c,f.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return vk.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!rC.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[Ge.QR_CODE,Ge.AZTEC,Ge.CODABAR,Ge.CODE_39,Ge.CODE_93,Ge.CODE_128,Ge.DATA_MATRIX,Ge.MAXICODE,Ge.ITF,Ge.EAN_13,Ge.EAN_8,Ge.PDF_417,Ge.RSS_14,Ge.RSS_EXPANDED,Ge.UPC_A,Ge.UPC_E,Ge.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],a=0,c=t.formatsToSupport;a<c.length;a++){var f=c[a];sk(f)?i.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Ki(t))return!0;if(!Ki(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Ki(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return Ki(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,i){var a=this,c=i.qrbox;this.validateQrboxConfig(c);var f=this.toQrdimensions(t,n,c),g=function(y){if(y<Wr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Wr.MIN_QR_BOX_SIZE,"px.")},v=function(y){return y>t&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),y=t),y};g(f.width),g(f.height),f.width=v(f.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(t,n)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return i},e.prototype.setupUi=function(t,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,i);var a=Ki(i.qrbox)?{width:t,height:n}:i.qrbox;this.validateQrboxConfig(a);var c=this.toQrdimensions(t,n,a);c.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=i.isShadedBoxEnabled()&&c.height<=n,g={x:0,y:0,width:t,height:n},v=f?this.getShadedRegionBounds(t,n,c):g,y=this.createCanvasElement(v.width,v.height),C={willReadFrequently:!0},b=y.getContext("2d",C);b.canvas.width=v.width,b.canvas.height=v.height,this.element.append(y),f&&this.possiblyInsertShadingElement(this.element,t,n,c),this.createScannerPausedUiElement(this.element),this.qrRegion=v,this.context=b,this.canvasElement=y},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=qa.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return t(a.text,by.createFromQrcodeResult(a)),i.possiblyUpdateShaders(!0),!0}).catch(function(a){i.possiblyUpdateShaders(!1);var c=qa.codeParseError(a);return n(c,tC.createFrom(c)),!1})},e.prototype.foreverScan=function(t,n,i){var a=this;if(this.shouldScan&&this.renderedCamera){var c=this.renderedCamera.getSurface(),f=c.videoWidth/c.clientWidth,g=c.videoHeight/c.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var v=this.qrRegion.width*f,y=this.qrRegion.height*g,C=this.qrRegion.x*f,b=this.qrRegion.y*g;this.context.drawImage(c,C,b,v,y,0,0,this.qrRegion.width,this.qrRegion.height);var T=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(t,n,i)},a.getTimeoutFps(t.fps))};this.scanContext(n,i).then(function(I){!I&&t.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(n,i).finally(function(){T()})):T()}).catch(function(I){a.logger.logError("Error happend while scanning context",I),T()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",i="deviceId",a={user:!0,environment:!0},c="exact",f=function(F){if(F in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(F,"'")},g=Object.keys(t);if(g.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(g.length," keys");var v=Object.keys(t)[0];if(v!==n&&v!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(v===n){var y=t.facingMode;if(typeof y=="string"){if(f(y))return{facingMode:y}}else if(typeof y=="object")if(c in y){if(f(y["".concat(c)]))return{facingMode:{exact:y["".concat(c)]}}}else throw"'facingMode' should be string or object with"+" ".concat(c," as key.");else{var C=typeof y;throw"Invalid type of 'facingMode' = ".concat(C)}}else{var b=t.deviceId;if(typeof b=="string")return{deviceId:b};if(typeof b=="object"){if(c in b)return{deviceId:{exact:b["".concat(c)]}};throw"'deviceId' should be string or object with"+" ".concat(c," as key.")}else{var T=typeof b;throw"Invalid type of 'deviceId' = ".concat(T)}}}var I=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(I)},e.prototype.computeCanvasDrawConfig=function(t,n,i,a){if(t<=i&&n<=a){var c=(i-t)/2,f=(a-n)/2;return{x:c,y:f,width:t,height:n}}else{var g=t,v=n;return t>i&&(n=i/t*n,t=i),n>a&&(t=a/n*t,n=a),this.logger.log("Image downsampled from "+"".concat(g,"X").concat(v)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,i,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Wr.BORDER_SHADER_MATCH_COLOR:Wr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,i){var a=t,c=n,f=document.createElement("canvas");return f.style.width="".concat(a,"px"),f.style.height="".concat(c,"px"),f.style.display="none",f.id=Ki(i)?"qr-canvas":i,f},e.prototype.getShadedRegionBounds=function(t,n,i){if(i.width>t||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},e.prototype.possiblyInsertShadingElement=function(t,n,i,a){if(!(n-a.width<1||i-a.height<1)){var c=document.createElement("div");c.style.position="absolute";var f=(n-a.width)/2,g=(i-a.height)/2;if(c.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderTop="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderBottom="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),c.style.boxSizing="border-box",c.style.top="0px",c.style.bottom="0px",c.style.left="0px",c.style.right="0px",c.id="".concat(Wr.SHADED_REGION_ELEMENT_ID),n-a.width<11||i-a.height<11)this.hasBorderShaders=!1;else{var v=5,y=40;this.insertShaderBorders(c,y,v,-v,null,0,!0),this.insertShaderBorders(c,y,v,-v,null,0,!1),this.insertShaderBorders(c,y,v,null,-v,0,!0),this.insertShaderBorders(c,y,v,null,-v,0,!1),this.insertShaderBorders(c,v,y+v,-v,null,-v,!0),this.insertShaderBorders(c,v,y+v,null,-v,-v,!0),this.insertShaderBorders(c,v,y+v,-v,null,-v,!1),this.insertShaderBorders(c,v,y+v,null,-v,-v,!1),this.hasBorderShaders=!0}t.append(c)}},e.prototype.insertShaderBorders=function(t,n,i,a,c,f,g){var v=document.createElement("div");v.style.position="absolute",v.style.backgroundColor=Wr.BORDER_SHADER_DEFAULT_COLOR,v.style.width="".concat(n,"px"),v.style.height="".concat(i,"px"),a!==null&&(v.style.top="".concat(a,"px")),c!==null&&(v.style.bottom="".concat(c,"px")),g?v.style.left="".concat(f,"px"):v.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(v),t.appendChild(v)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),im="data:image/svg+xml;base64,",Ek=im+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Nk=im+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",My=im+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",Tk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Ry=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),Ik=function(){function e(){this.data=Ry.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=Ry.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),kk=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Cy.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var i=document.createElement("br"),a=document.createElement("br");this.infoDiv.appendChild(i),this.infoDiv.appendChild(a);var c=document.createElement("a");c.innerText=Cy.reportIssues(),c.href="https://github.com/mebjas/html5-qrcode/issues",c.target="new",c.style.color="white",this.infoDiv.appendChild(c),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),Mk=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=My,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(i){return n.onHoverIn()},this.infoIcon.onmouseout=function(i){return n.onHoverOut()},this.infoIcon.onclick=function(i){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=Tk,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=My,this.infoIcon.style.opacity="0.6")},e}(),Rk=function(){function e(){var t=this;this.infoDiv=new kk,this.infoIcon=new Mk(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}(),Ok=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(C){try{y(i.next(C))}catch(b){f(b)}}function v(C){try{y(i.throw(C))}catch(b){f(b)}}function y(C){C.done?c(C.value):a(C.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},Lk=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(C){return v([y,C])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Oy=function(){function e(){}return e.hasPermissions=function(){return Ok(this,void 0,void 0,function(){var t,n,i,a;return Lk(this,function(c){switch(c.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=c.sent(),n=0,i=t;n<i.length;n++)if(a=i[n],a.kind==="videoinput"&&a.label)return[2,!0];return[2,!1]}})})},e}(),Gs=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var i=n[t];if(e.isCameraScanType(i))return!0}return!1},e.isCameraScanType=function(t){return t===Co.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===Co.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return Ri.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Ri.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var i=0,a=t;i<a.length;i++){var c=a[i];if(!Ri.DEFAULT_SUPPORTED_SCAN_TYPE.includes(c))throw"Unsupported scan type ".concat(c)}return t},e}(),qr=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),vs=function(){function e(){}return e.createElement=function(t,n){var i=document.createElement(t);return i.id=n,i.classList.add(qr.ALL_ELEMENT_CLASS),t==="button"&&i.setAttribute("type","button"),i},e}(),sC=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(C){try{y(i.next(C))}catch(b){f(b)}}function v(C){try{y(i.throw(C))}catch(b){f(b)}}function y(C){C.done?c(C.value):a(C.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},oC=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(C){return v([y,C])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Ly=function(){function e(t,n,i){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=i}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return sC(this,void 0,void 0,function(){var t,n;return oC(this,function(i){switch(i.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return i.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=i.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?qt.torchOffButton():qt.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var i=t?qt.torchOnFailedMessage():qt.torchOffFailedMessage();n&&(i+="; Error = "+n),this.onTorchActionFailureCallback(i)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),Pk=function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=vs.createElement("button",qr.TORCH_BUTTON_ID),this.torchController=new Ly(t,this,n)}return e.prototype.render=function(t,n){var i=this;this.torchButton.innerText=qt.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var a=this;this.torchButton.addEventListener("click",function(c){return sC(i,void 0,void 0,function(){return oC(this,function(f){switch(f.label){case 0:return[4,a.torchController.flipState()];case 1:return f.sent(),a.torchController.isTorchEnabled()?(a.torchButton.classList.remove(qr.TORCH_BUTTON_CLASS_TORCH_OFF),a.torchButton.classList.add(qr.TORCH_BUTTON_CLASS_TORCH_ON)):(a.torchButton.classList.remove(qr.TORCH_BUTTON_CLASS_TORCH_ON),a.torchButton.classList.add(qr.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new Ly(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=qt.torchOnButton(),this.torchController.reset()},e.create=function(t,n,i,a){var c=new e(n,a);return c.render(t,i),c},e}(),Dk=function(){function e(t,n,i){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var a=document.createElement("label");a.setAttribute("for",this.getFileScanInputId()),a.style.display="inline-block",this.fileBasedScanRegion.appendChild(a),this.fileSelectionButton=vs.createElement("button",qr.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(g){a.click()}),a.append(this.fileSelectionButton),this.fileScanInput=vs.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",a.appendChild(this.fileScanInput);var c=this;this.fileScanInput.addEventListener("change",function(g){if(!(g==null||g.target==null)){var v=g.target;if(!(v.files&&v.files.length===0)){var y=v.files,C=y[0],b=C.name;c.setImageNameToButton(b),i(C)}}});var f=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(f),this.fileBasedScanRegion.addEventListener("dragenter",function(g){c.fileBasedScanRegion.style.border=c.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(g){c.fileBasedScanRegion.style.border=c.fileBasedScanRegionDefaultBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(g){c.fileBasedScanRegion.style.border=c.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(g){g.stopPropagation(),g.preventDefault(),c.fileBasedScanRegion.style.border=c.fileBasedScanRegionDefaultBorder();var v=g.dataTransfer;if(v){var y=v.files;if(!y||y.length===0)return;for(var C=!1,b=0;b<y.length;++b){var T=y.item(b);if(T){var I=/image.*/;if(T.type.match(I)){C=!0;var F=T.name;c.setImageNameToButton(F),i(T),f.innerText=qt.dragAndDropMessage();break}}}C||(f.innerText=qt.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=qt.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var n=20;if(t.length>n){var i=t.substring(0,8),a=t.length,c=t.substring(a-8,a);t="".concat(i,"....").concat(c)}var f=qt.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=f},e.prototype.setInitialValueToButton=function(){var t=qt.fileSelectionChooseImage()+" - "+qt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,i){var a=new e(t,n,i);return a},e}(),jk=function(){function e(t){this.selectElement=vs.createElement("select",qr.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var i=this.cameras.length;if(i===0)throw new Error("No cameras found");if(i===1)n.style.display="none";else{var a=qt.selectCamera();n.innerText="".concat(a," (").concat(this.cameras.length,")  ")}for(var c=1,f=0,g=this.cameras;f<g.length;f++){var v=g[f],y=v.id,C=v.label==null?y:v.label;(!C||C==="")&&(C=[qt.anonymousCameraPrefix(),c++].join(" "));var b=document.createElement("option");b.value=y,b.innerText=C,this.options.push(b),this.selectElement.appendChild(b)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,i=this.options;n<i.length;n++){var a=i[n];if(a.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var i=new e(n);return i.render(t),i},e}(),Bk=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=vs.createElement("input",qr.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var i=qt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(i),this.rangeText.style.marginRight="10px";var a=this;this.rangeInput.addEventListener("input",function(){return a.onValueChange()}),this.rangeInput.addEventListener("change",function(){return a.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=qt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,i,a){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=a.toString(),this.rangeInput.value=i.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var i=new e;return i.render(t,n),i},e}(),Zr;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Zr||(Zr={}));function Fk(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function zk(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var Uk=function(){function e(t,n,i){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=i===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new Gs(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new nC(this.verbose),this.persistedDataManager=new Ik,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var i=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(c,f){if(t)t(c,f);else{if(i.lastMatchFound===c)return;i.lastMatchFound=c,i.setHeaderMessage(qt.lastMatch(c),Zr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(c,f){n&&n(c,f)};var a=document.getElementById(this.elementId);if(!a)throw"HTML Element with id=".concat(this.elementId," not found");a.innerHTML="",this.createBasicLayout(a),this.html5Qrcode=new ky(this.getScanRegionId(),zk(this.config,this.verbose))},e.prototype.pause=function(t){(Ki(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var i=document.getElementById(t.elementId);i&&(i.innerHTML="",t.resetBasicLayout(i))};return this.html5Qrcode?new Promise(function(i,a){if(!t.html5Qrcode){i();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(c){if(!t.html5Qrcode){i();return}t.html5Qrcode.clear(),n(),i()}).catch(function(c){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",c),a(c)}):(t.html5Qrcode.clear(),n(),i())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=Ri.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!Ri.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=Ri.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=Ri.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:Ri.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Ri.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Ri.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),i=this.getScanRegionId();n.id=i,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),Gs.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var a=document.createElement("div"),c=this.getDashboardId();a.id=c,a.style.width="100%",t.appendChild(a),this.setupInitialDashboard(a)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n);var i=new Rk;i.renderInto(n);var a=document.createElement("div");a.id=this.getHeaderMessageContainerId(),a.style.display="none",a.style.textAlign="center",a.style.fontSize="14px",a.style.padding="2px 10px",a.style.margin="4px",a.style.borderTop="1px solid #f6f6f6",n.appendChild(a)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,i){var a=this;a.showHideScanTypeSwapLink(!1),a.setHeaderMessage(qt.cameraPermissionRequesting());var c=function(){i||a.createPermissionButton(t,n)};ky.getCameras().then(function(f){a.persistedDataManager.setHasPermission(!0),a.showHideScanTypeSwapLink(!0),a.resetHeaderMessage(),f&&f.length>0?(t.removeChild(n),a.renderCameraSelection(f)):(a.setHeaderMessage(qt.noCameraFound(),Zr.STATUS_WARNING),c())}).catch(function(f){a.persistedDataManager.setHasPermission(!1),i?i.disabled=!1:c(),a.setHeaderMessage(f,Zr.STATUS_WARNING),a.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var i=this,a=vs.createElement("button",this.getCameraPermissionButtonId());a.innerText=qt.cameraPermissionTitle(),a.addEventListener("click",function(){a.disabled=!0,i.createCameraListUi(t,n,a)}),n.appendChild(a)},e.prototype.createPermissionsUi=function(t,n){var i=this;if(Gs.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Oy.hasPermissions().then(function(a){a?i.createCameraListUi(t,n):(i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,n))}).catch(function(a){i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,n)});return}this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var i=document.createElement("div");i.id=this.getDashboardSectionCameraScanRegionId(),i.style.display=Gs.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(i);var a=document.createElement("div");a.style.textAlign="center",i.appendChild(a),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(i,a),this.renderFileScanUi(n)},e.prototype.renderFileScanUi=function(t){var n=Gs.isFileScanType(this.currentScanType),i=this,a=function(c){if(!i.html5Qrcode)throw"html5Qrcode not defined";Gs.isFileScanType(i.currentScanType)&&(i.setHeaderMessage(qt.loadingImage()),i.html5Qrcode.scanFileV2(c,!0).then(function(f){i.resetHeaderMessage(),i.qrCodeSuccessCallback(f.decodedText,f)}).catch(function(f){i.setHeaderMessage(f,Zr.STATUS_WARNING),i.qrCodeErrorCallback(f,tC.createFrom(f))}))};this.fileSelectionUi=Dk.create(t,n,a)},e.prototype.renderCameraSelection=function(t){var n=this,i=this,a=document.getElementById(this.getDashboardSectionCameraScanRegionId());a.style.textAlign="center";var c=Bk.create(a,!1),f=function(R){var B=R.zoomFeature();if(B.isSupported()){c.setOnCameraZoomValueChangeCallback(function(O){B.apply(O)});var z=1;n.config.defaultZoomValueIfSupported&&(z=n.config.defaultZoomValueIfSupported),z=ok(z,B.min(),B.max()),c.setValues(B.min(),B.max(),z,B.step()),c.show()}},g=jk.create(a,t),v=document.createElement("span"),y=vs.createElement("button",qr.CAMERA_START_BUTTON_ID);y.innerText=qt.scanButtonStartScanningText(),v.appendChild(y);var C=vs.createElement("button",qr.CAMERA_STOP_BUTTON_ID);C.innerText=qt.scanButtonStopScanningText(),C.style.display="none",C.disabled=!0,v.appendChild(C);var b,T=function(R){if(!R.torchFeature().isSupported()){b&&b.hide();return}b?b.updateTorchCapability(R.torchFeature()):b=Pk.create(v,R.torchFeature(),{display:"none",marginLeft:"5px"},function(B){i.setHeaderMessage(B,Zr.STATUS_WARNING)}),b.show()};a.appendChild(v);var I=function(R){R||(y.style.display="none"),y.innerText=qt.scanButtonStartScanningText(),y.style.opacity="1",y.disabled=!1,R&&(y.style.display="inline-block")};if(y.addEventListener("click",function(R){y.innerText=qt.scanButtonScanningStarting(),g.disable(),y.disabled=!0,y.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!1),i.resetHeaderMessage();var B=g.getValue();i.persistedDataManager.setLastUsedCameraId(B),i.html5Qrcode.start(B,Fk(i.config),i.qrCodeSuccessCallback,i.qrCodeErrorCallback).then(function(z){C.disabled=!1,C.style.display="inline-block",I(!1);var O=i.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&T(O),n.config.showZoomSliderIfSupported===!0&&f(O)}).catch(function(z){i.showHideScanTypeSwapLink(!0),g.enable(),I(!0),i.setHeaderMessage(z,Zr.STATUS_WARNING)})}),g.hasSingleItem()&&y.click(),C.addEventListener("click",function(R){if(!i.html5Qrcode)throw"html5Qrcode not defined";C.disabled=!0,i.html5Qrcode.stop().then(function(B){n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!0),g.enable(),y.disabled=!1,C.style.display="none",y.style.display="inline-block",b&&(b.reset(),b.hide()),c.removeOnCameraZoomValueChangeCallback(),c.hide(),i.insertCameraScanImageToScanRegion()}).catch(function(B){C.disabled=!1,i.setHeaderMessage(B,Zr.STATUS_WARNING)})}),i.persistedDataManager.getLastUsedCameraId()){var F=i.persistedDataManager.getLastUsedCameraId();g.hasValue(F)?(g.setValue(F),y.click()):i.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=qt.textIfCameraScanSelected(),i=qt.textIfFileScanSelected(),a=document.getElementById(this.getDashboardSectionId()),c=document.createElement("div");c.style.textAlign="center";var f=vs.createElement("span",this.getDashboardSectionSwapLinkId());f.style.textDecoration="underline",f.style.cursor="pointer",f.innerText=Gs.isCameraScanType(this.currentScanType)?n:i,f.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,Gs.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),f.innerText=i,t.currentScanType=Co.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),f.innerText=n,t.currentScanType=Co.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),c.appendChild(f),a.appendChild(c)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){Oy.hasPermissions().then(function(i){if(i){var a=document.getElementById(n.getCameraPermissionButtonId());if(!a)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";a.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(i){n.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=Zr.STATUS_DEFAULT);var i=this.getHeaderMessageDiv();switch(i.innerText=t,i.style.display="block",n){case Zr.STATUS_SUCCESS:i.style.background="rgba(106, 175, 80, 0.26)",i.style.color="#477735";break;case Zr.STATUS_WARNING:i.style.background="rgba(203, 36, 49, 0.14)",i.style.color="#cb2431";break;case Zr.STATUS_DEFAULT:default:i.style.background="rgba(0, 0, 0, 0)",i.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=Ek,this.cameraScanImage.alt=qt.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Nk,this.fileScanImage.alt=qt.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return qr.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return qr.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();function Vk({onScan:e,onClose:t}){const[n,i]=j.useState(""),[a,c]=j.useState("camera");j.useEffect(()=>{if(a==="camera"){const g=new Uk("reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1,videoConstraints:{facingMode:{ideal:"environment"}}});return g.render(v=>{g.clear(),e(v)},v=>{}),()=>{g.clear()}}},[a,e]);const f=g=>{g.preventDefault(),n.trim()&&e(n.trim())};return m.jsxs("div",{className:"fixed inset-0 bg-black/90 z-50 flex flex-col pt-safe",children:[m.jsxs("div",{className:"flex justify-between items-center p-4 text-white",children:[m.jsx("h2",{className:"text-lg font-bold",children:"Scan AWB Barcode"}),m.jsx("button",{onClick:t,className:"p-2",children:m.jsx(va,{})})]}),m.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:a==="camera"?m.jsx("div",{id:"reader",className:"w-full max-w-sm rounded-xl overflow-hidden bg-gray-800 border-2 border-primary-500"}):m.jsxs("form",{onSubmit:f,className:"w-full max-w-sm space-y-4",children:[m.jsx("input",{autoFocus:!0,className:"w-full p-4 rounded-xl bg-gray-800 text-white border border-gray-700 outline-none focus:border-primary-500 text-center text-2xl tracking-widest",placeholder:"ENTER AWB #",value:n,onChange:g=>i(g.target.value.toUpperCase())}),m.jsx("button",{className:"w-full py-4 bg-primary-600 text-white rounded-xl font-bold",children:"Submit Manually"})]})}),m.jsxs("div",{className:"p-8 flex justify-center gap-4",children:[m.jsxs("button",{onClick:()=>c("camera"),className:`p-4 rounded-full flex items-center gap-2 ${a==="camera"?"bg-primary-600 text-white":"bg-gray-800 text-gray-400"}`,children:[m.jsx(zI,{size:24})," ",m.jsx("span",{children:"Camera"})]}),m.jsxs("button",{onClick:()=>c("manual"),className:`p-4 rounded-full flex items-center gap-2 ${a==="manual"?"bg-primary-600 text-white":"bg-gray-800 text-gray-400"}`,children:[m.jsx(qI,{size:24})," ",m.jsx("span",{children:"Manual"})]})]})]})}function wl(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function Hk(e,t){let n;const i=()=>{if(n)return n;const a=indexedDB.open(e);return a.onupgradeneeded=()=>a.result.createObjectStore(t),n=wl(a),n.then(c=>{c.onclose=()=>n=void 0},()=>{}),n};return(a,c)=>i().then(f=>c(f.transaction(t,a).objectStore(t)))}let Uf;function Oh(){return Uf||(Uf=Hk("keyval-store","keyval")),Uf}function Wk(e,t=Oh()){return t("readonly",n=>wl(n.get(e)))}function aC(e,t,n=Oh()){return n("readwrite",i=>(i.put(t,e),wl(i.transaction)))}function Zk(e,t=Oh()){return t("readwrite",n=>(n.delete(e),wl(n.transaction)))}function Gk(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},wl(e.transaction)}function lC(e=Oh()){return e("readonly",t=>{if(t.getAllKeys)return wl(t.getAllKeys());const n=[];return Gk(t,i=>n.push(i.key)).then(()=>n)})}const sm=async(e,t,n={})=>{const i=`${e}-${t}-${Date.now()}`,a={id:i,awb:e,event_id:t,payload:n,timestamp:new Date().toISOString(),status:"pending"};return await aC(`queue-${i}`,a),a},om=async()=>{const t=(await lC()).filter(i=>i.startsWith("queue-"));return(await Promise.all(t.map(i=>Wk(i)))).sort((i,a)=>new Date(a.timestamp)-new Date(i.timestamp))},cC=async e=>{const n=(await om()).filter(i=>i.status==="pending");for(const i of n)try{await Rh(e,{awb:i.awb,event_id:i.event_id,timestamp:i.timestamp,payload:i.payload}),i.status="synced",await aC(`queue-${i.id}`,i)}catch(a){console.error("Sync failed for item",i.id,a)}},Yk=async()=>{const e=await lC(),t=(Array.isArray(e)?e:[]).filter(n=>String(n).startsWith("queue-"));return await Promise.all(t.map(n=>Zk(n))),t.length},Xk=Object.freeze(Object.defineProperty({__proto__:null,clearQueue:Yk,getQueue:om,queueItem:sm,syncQueue:cC},Symbol.toStringTag,{value:"Module"})),Ka=e=>String(e||"").trim().toUpperCase().replace(/\s+/g,"").replace(/[^A-Z0-9]/g,""),Py=e=>{const t=Ka(e);if(!t)return{normalized:"",candidates:[],coreCandidate:null,parcelSuffixCandidate:null};const n=[t],i=t.slice(-3),a=t.slice(0,-3);return/[A-Z]/.test(t)&&t.length>=11&&/^\d{3}$/.test(i)&&i!=="000"&&a&&a!==t?(n.push(a),{normalized:t,candidates:n,coreCandidate:a,parcelSuffixCandidate:i}):{normalized:t,candidates:n,coreCandidate:null,parcelSuffixCandidate:null}};function qk({awb:e,onBack:t,onComplete:n}){var ve,Ee,ae,de,ke,ne,Se,ye,ge,Me,qe,De,ee,oe,Le,at,Nt;const[i,a]=j.useState([]),[c,f]=j.useState(null),[g,v]=j.useState(!0),[y,C]=j.useState(!0),[b,T]=j.useState(null),[I,F]=j.useState(""),[R,B]=j.useState(null),[z,O]=j.useState(null),[k,W]=j.useState(!1),[Q,G]=j.useState(""),[H,q]=j.useState(""),M=(()=>{if(!b)return null;const tt=Number(b.number_of_parcels);if(Number.isFinite(tt)&&tt>0)return tt;const ot=(b==null?void 0:b.raw_data)||{},yt=Number((ot==null?void 0:ot.numberOfDistinctBarcodes)??(ot==null?void 0:ot.numberOfParcels)??1);return Number.isFinite(yt)&&yt>0?yt:1})();j.useEffect(()=>{let tt=!1;const ot=localStorage.getItem("token"),yt=Py(e);return F(yt.normalized),B(yt.normalized||null),O(null),v(!0),G(""),Ub(ot).then(Ze=>{tt||a(Ze)}).catch(()=>{tt||G("Failed to load status options")}).finally(()=>{tt||v(!1)}),C(!0),q(""),T(null),(async()=>{var Rt,Wt;let Ze=null;for(const dt of yt.candidates)try{const gt=await Uc(ot,dt,{refresh:!0});if(tt)return;T(gt);const nt=Ka((gt==null?void 0:gt.awb)||"")||dt;B(nt||dt),yt.coreCandidate&&yt.parcelSuffixCandidate&&yt.normalized&&nt&&yt.normalized===`${yt.coreCandidate}${yt.parcelSuffixCandidate}`&&nt===yt.coreCandidate?O(Number(yt.parcelSuffixCandidate)):O(null);return}catch(gt){Ze=gt;continue}if(tt)return;const Ht=(Wt=(Rt=Ze==null?void 0:Ze.response)==null?void 0:Rt.data)==null?void 0:Wt.detail;q(Ht?String(Ht):"Failed to load shipment details")})().finally(()=>{tt||C(!1)}),()=>{tt=!0}},[e]);const X=async()=>{var tt,ot;C(!0),q("");try{const yt=localStorage.getItem("token"),Ze=Py(e);let Ht=null;for(const Rt of Ze.candidates)try{const Wt=await Uc(yt,Rt,{refresh:!0});T(Wt);const dt=Ka((Wt==null?void 0:Wt.awb)||"")||Rt;B(dt||Rt),Ze.coreCandidate&&Ze.parcelSuffixCandidate&&Ze.normalized&&dt&&Ze.normalized===`${Ze.coreCandidate}${Ze.parcelSuffixCandidate}`&&dt===Ze.coreCandidate?O(Number(Ze.parcelSuffixCandidate)):O(null),Ht=null;break}catch(Wt){Ht=Wt}if(Ht)throw Ht}catch(yt){const Ze=(ot=(tt=yt==null?void 0:yt.response)==null?void 0:tt.data)==null?void 0:ot.detail;q(Ze?String(Ze):"Failed to load shipment details")}finally{C(!1)}},ie=(tt,ot="RON")=>{if(tt==null||tt==="")return"--";const yt=Number(tt);return Number.isFinite(yt)?`${yt.toFixed(2)} ${String(ot||"RON").toUpperCase()}`:"--"},se=async()=>{var tt,ot,yt,Ze,Ht,Rt,Wt,dt;if(c){W(!0);try{const gt=localStorage.getItem("token"),nt=R||Ka(e),Qt=(b==null?void 0:b.locality)||((ot=(tt=b==null?void 0:b.raw_data)==null?void 0:tt.recipientLocation)==null?void 0:ot.locality)||((Ze=(yt=b==null?void 0:b.raw_data)==null?void 0:yt.recipientLocation)==null?void 0:Ze.localityName)||"",Re={};Qt&&(Re.locality=Qt),Number.isInteger(z)&&z>0&&(Re.parcel_index=z),Number.isFinite(M)&&M>0&&(Re.parcels_total=M),I&&nt&&I!==nt&&(Re.scanned_identifier=I);const rr=Object.keys(Re).length?Re:void 0;await Rh(gt,{awb:nt,event_id:c,timestamp:new Date().toISOString(),payload:rr}),n("SUCCESS",{awb:nt,parcel_index:Re.parcel_index,parcels_total:Re.parcels_total})}catch{const gt=(b==null?void 0:b.locality)||((Rt=(Ht=b==null?void 0:b.raw_data)==null?void 0:Ht.recipientLocation)==null?void 0:Rt.locality)||((dt=(Wt=b==null?void 0:b.raw_data)==null?void 0:Wt.recipientLocation)==null?void 0:dt.localityName)||"",nt=R||Ka(e),Qt={};gt&&(Qt.locality=gt),Number.isInteger(z)&&z>0&&(Qt.parcel_index=z),Number.isFinite(M)&&M>0&&(Qt.parcels_total=M),I&&nt&&I!==nt&&(Qt.scanned_identifier=I);const Re=Object.keys(Qt).length?Qt:void 0;await sm(nt,c,Re||{}),n("QUEUED",{awb:nt,parcel_index:Qt.parcel_index,parcels_total:Qt.parcels_total})}finally{W(!1)}}};return m.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[m.jsxs("div",{className:"p-4 flex items-center gap-4 bg-white dark:bg-gray-800 shadow-sm",children:[m.jsx("button",{onClick:t,className:"p-2 -ml-2 text-gray-600",children:m.jsx(ks,{})}),m.jsxs("div",{children:[m.jsx("h1",{className:"font-bold text-gray-900 dark:text-white",children:"Update AWB"}),m.jsxs("p",{className:"text-xs text-primary-600 font-mono tracking-wider",children:[R||I||e,Number.isInteger(z)&&z>0?m.jsxs("span",{className:"ml-2 text-[10px] font-black uppercase tracking-widest text-primary-600",children:["Parcel ",z,Number.isFinite(M)&&M>0?`/${M}`:""]}):null]}),I&&R&&I!==R?m.jsxs("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-mono mt-1",children:["Scanned: ",I]}):null]})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[m.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Shipment"}),m.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white truncate",children:y?"Loading details...":(b==null?void 0:b.recipient_name)||"--"})]}),m.jsx("button",{type:"button",onClick:X,disabled:y,className:"p-2 rounded-xl border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 disabled:opacity-50",title:"Refresh shipment details","aria-label":"Refresh shipment details",children:m.jsx(Bi,{size:16,className:y?"animate-spin":""})})]}),H?m.jsx("div",{className:"mt-3 p-3 bg-amber-100 text-amber-800 rounded-xl text-xs font-bold",children:H}):null,b?m.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"col-span-2",children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Address"}),m.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-200",children:b.delivery_address||b.locality||"--"})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Phone"}),m.jsx("p",{className:"text-sm font-mono text-gray-900 dark:text-white truncate",children:b.recipient_phone||"--"})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Content"}),m.jsx("p",{className:"text-sm text-gray-900 dark:text-white truncate",children:b.content_description||((ve=b==null?void 0:b.raw_data)==null?void 0:ve.contentDescription)||((Ee=b==null?void 0:b.raw_data)==null?void 0:Ee.contents)||((ae=b==null?void 0:b.raw_data)==null?void 0:ae.content)||((de=b==null?void 0:b.raw_data)==null?void 0:de.packageContent)||((ke=b==null?void 0:b.raw_data)==null?void 0:ke.shipmentContent)||((ne=b==null?void 0:b.raw_data)==null?void 0:ne.goodsDescription)||((ye=(Se=b==null?void 0:b.raw_data)==null?void 0:Se.additionalServices)==null?void 0:ye.contentDescription)||((Me=(ge=b==null?void 0:b.raw_data)==null?void 0:ge.additionalServices)==null?void 0:Me.contents)||((De=(qe=b==null?void 0:b.raw_data)==null?void 0:qe.additionalServices)==null?void 0:De.content)||((oe=(ee=b==null?void 0:b.raw_data)==null?void 0:ee.productCategory)==null?void 0:oe.name)||(typeof((Le=b==null?void 0:b.raw_data)==null?void 0:Le.productCategory)=="string"?b.raw_data.productCategory:"")||"--"})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"COD"}),m.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:ie(b.cod_amount,b.currency||"RON")})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Parcels"}),m.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:Number.isFinite(Number(b.number_of_parcels))?Number(b.number_of_parcels):((at=b==null?void 0:b.raw_data)==null?void 0:at.numberOfDistinctBarcodes)||((Nt=b==null?void 0:b.raw_data)==null?void 0:Nt.numberOfParcels)||1})]}),Number.isInteger(z)&&z>0?m.jsxs("div",{children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Parcel"}),m.jsxs("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[z,Number.isFinite(M)&&M>0?`/${M}`:""]})]}):null]}):null]}),g?m.jsx("div",{className:"flex justify-center p-8",children:m.jsx(fn,{className:"animate-spin text-primary-500"})}):Q?m.jsxs("div",{className:"p-4 bg-red-100 text-red-700 rounded-xl flex items-center gap-3",children:[m.jsx(V_,{size:20})," ",Q]}):i.map(tt=>m.jsxs("button",{onClick:()=>f(tt.event_id),className:`w-full p-4 rounded-2xl text-left border-2 transition-all ${c===tt.event_id?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-white dark:border-gray-800 bg-white dark:bg-gray-800"}`,children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:tt.label}),c===tt.event_id&&m.jsx(Z_,{className:"text-primary-500",size:20})]}),m.jsx("p",{className:"text-sm text-gray-500",children:tt.description})]},tt.event_id))]}),m.jsx("div",{className:"p-4 bg-white dark:bg-gray-800 shadow-up",children:m.jsx("button",{disabled:!c||k,onClick:se,className:"w-full py-4 bg-primary-600 disabled:opacity-50 text-white rounded-xl font-bold flex items-center justify-center gap-2",children:k?m.jsx(fn,{className:"animate-spin"}):"Confirm Status Update"})})]})}function Dy(){const[e,t]=j.useState(!1),[n,i]=j.useState(null),[a,c]=j.useState(null),[f,g]=j.useState(""),v=mr(),{user:y}=Jn();j.useEffect(()=>{const W=localStorage.getItem("token");W&&cC(W);const Q=new Date().getHours();Q<12?g("Good Morning"):Q<18?g("Good Afternoon"):g("Good Evening")},[]);const C=W=>{const Q=Ka(W);Q&&(i(Q),t(!1))},b=(W,Q=null)=>{const G=String((Q==null?void 0:Q.awb)||n||"").trim().toUpperCase(),H=Number(Q==null?void 0:Q.parcel_index),q=Number.isFinite(H)&&H>0?H:null,M=Number(Q==null?void 0:Q.parcels_total),X=Number.isFinite(M)&&M>0?M:null;c({awb:G||n,outcome:W,parcel_index:q,parcels_total:X}),i(null),setTimeout(()=>c(null),3e3)};if(n)return m.jsx(qk,{awb:n,onBack:()=>i(null),onComplete:b});const T=Tn(y,qo),I=Tn(y,Rr),F=Tn(y,yo),R=Tn(y,ki),B=Tn(y,pi),z=String((y==null?void 0:y.role)||"")==="Recipient",O={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},k={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return m.jsxs(rt.div,{initial:"hidden",animate:"visible",exit:{opacity:0,y:-20},variants:O,className:"flex flex-col min-h-screen relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-violet-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"0s"}}),m.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"3s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-glow-md animate-float",children:m.jsx("span",{className:"text-white font-black italic tracking-tighter text-xl",children:"AN"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-lg font-black text-gradient leading-none",children:"AryNik"}),m.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[m.jsxs("span",{className:"relative flex h-2 w-2",children:[m.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),m.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]}),m.jsx("span",{className:"text-[10px] font-bold text-emerald-400 uppercase tracking-widest",children:"Online"})]})]})]}),m.jsx("button",{type:"button",onClick:()=>v("/settings"),className:"w-10 h-10 rounded-full glass-light flex items-center justify-center border border-white/10 hover:bg-white/10 transition-colors","aria-label":"Account",title:"Account",children:m.jsx(wa,{size:18,className:"text-violet-300"})})]}),m.jsxs("main",{className:"flex-1 p-6 space-y-8 pb-32 relative z-10",children:[m.jsxs(rt.div,{variants:k,children:[m.jsx("h2",{className:"text-3xl font-black text-white mb-1",children:f}),m.jsxs("p",{className:"text-slate-400 font-medium",children:[(y==null?void 0:y.name)||(y==null?void 0:y.username)||"Driver","  ",z?"Recipient Tracking":y!=null&&y.truck_plate?`Truck ${String(y.truck_plate).toUpperCase()}`:"Truck Unassigned"]}),!z&&(y!=null&&y.truck_phone)?m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-1",children:["Truck phone: ",y.truck_phone]}):null,z?m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-1",children:["Login: ",(y==null?void 0:y.username)||"--"]}):null]}),R?m.jsx(rt.div,{variants:k,children:m.jsx(ik,{})}):null,a&&m.jsxs(rt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`p-4 rounded-2xl flex items-center gap-4 shadow-lg ${a.outcome==="SUCCESS"?"bg-gradient-to-r from-emerald-500 to-emerald-600 shadow-emerald-500/20":"bg-gradient-to-r from-violet-500 to-purple-600 shadow-violet-500/20"}`,children:[m.jsx("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-sm",children:m.jsx(sd,{size:20,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("span",{className:"font-black text-sm uppercase tracking-wide text-white",children:["Update ",a.outcome==="SUCCESS"?"Confirmed":"Queued"]}),m.jsxs("p",{className:"text-xs font-bold text-white/80",children:[a.awb,Number.isFinite(a.parcel_index)&&a.parcel_index>0?m.jsxs("span",{className:"ml-2 text-[10px] font-black uppercase tracking-widest text-white/80",children:["Parcel ",a.parcel_index,Number.isFinite(a.parcels_total)&&a.parcels_total>0?`/${a.parcels_total}`:""]}):null]})]})]}),m.jsxs(rt.div,{variants:k,className:"space-y-4",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Quick Actions"}),T?m.jsxs(rt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(!0),className:"w-full py-12 bg-gradient-to-br from-violet-600 via-purple-600 to-violet-700 rounded-[32px] shadow-glow-lg flex flex-col items-center justify-center text-white space-y-5 relative overflow-hidden group",children:[m.jsx("div",{className:"absolute inset-0 shimmer opacity-30"}),m.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-white/10 rounded-full blur-3xl -ml-12 -mb-12"}),m.jsx("div",{className:"p-6 bg-white/10 rounded-3xl backdrop-blur-sm border border-white/20 group-hover:scale-110 group-hover:rotate-3 transition-all duration-500 shadow-inner-glow",children:m.jsx(e8,{size:52,strokeWidth:1.5,className:"animate-glow"})}),m.jsxs("div",{className:"text-center relative z-10",children:[m.jsx("h2",{className:"text-2xl font-black uppercase tracking-tight",children:"Scan Package"}),m.jsxs("p",{className:"text-violet-100 text-xs font-bold opacity-90 uppercase tracking-widest mt-1 flex items-center justify-center gap-2",children:[m.jsx(tb,{size:12}),"Tap to open scanner"]})]})]}):m.jsxs(rt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v("/shipments"),className:"w-full py-10 bg-gradient-to-br from-emerald-600 via-emerald-700 to-emerald-800 rounded-[32px] shadow-glow-lg flex flex-col items-center justify-center text-white space-y-4 relative overflow-hidden group",disabled:!I,children:[m.jsx("div",{className:"absolute inset-0 shimmer opacity-25"}),m.jsx("div",{className:"p-5 bg-white/10 rounded-3xl backdrop-blur-sm border border-white/20 group-hover:scale-110 group-hover:-rotate-2 transition-all duration-500 shadow-inner-glow",children:m.jsx(Os,{size:44,strokeWidth:1.5})}),m.jsxs("div",{className:"text-center relative z-10",children:[m.jsx("h2",{className:"text-xl font-black uppercase tracking-tight",children:"Browse Shipments"}),m.jsxs("p",{className:"text-emerald-100 text-xs font-bold opacity-90 uppercase tracking-widest mt-1 flex items-center justify-center gap-2",children:[m.jsx(Gd,{size:12}),"View tracking list"]})]})]}),I&&m.jsxs(rt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v("/shipments"),className:"w-full p-5 glass-strong rounded-[28px] shadow-lg flex items-center gap-4 text-left group border-iridescent",children:[m.jsx("div",{className:"p-4 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-[20px] group-hover:shadow-glow-sm transition-all duration-300",children:m.jsx(Os,{size:24,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("h3",{className:"font-black text-white uppercase text-sm tracking-tight flex items-center gap-2",children:["Search Shipments",m.jsx("span",{className:"text-[8px] bg-emerald-500/20 text-emerald-400 px-2 py-0.5 rounded-full font-bold",children:"LIVE"})]}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-0.5 flex items-center gap-1",children:[m.jsx(Gd,{size:10}),"Real-time tracking"]})]}),m.jsx("div",{className:"w-10 h-10 rounded-full glass-light flex items-center justify-center group-hover:translate-x-1 transition-transform border border-white/10",children:m.jsx(go,{className:"text-slate-400",size:18})})]}),B&&m.jsxs(rt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v("/notifications"),className:"w-full p-5 glass-strong rounded-[28px] shadow-lg flex items-center gap-4 text-left group border-iridescent",children:[m.jsx("div",{className:"p-4 bg-gradient-to-br from-amber-500 to-orange-600 rounded-[20px] group-hover:shadow-glow-sm transition-all duration-300",children:m.jsx(Fc,{size:24,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"font-black text-white uppercase text-sm tracking-tight",children:"Notifications"}),m.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-0.5",children:"Allocation updates"})]}),m.jsx("div",{className:"w-10 h-10 rounded-full glass-light flex items-center justify-center group-hover:translate-x-1 transition-transform border border-white/10",children:m.jsx(go,{className:"text-slate-400",size:18})})]}),F&&m.jsxs(rt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v("/users"),className:"w-full p-5 glass-strong rounded-[28px] shadow-lg flex items-center gap-4 text-left group border-iridescent",children:[m.jsx("div",{className:"p-4 bg-gradient-to-br from-violet-500 to-purple-600 rounded-[20px] group-hover:shadow-glow-sm transition-all duration-300",children:m.jsx(rp,{size:24,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("h3",{className:"font-black text-white uppercase text-sm tracking-tight flex items-center gap-2",children:["Manage Users",m.jsx("span",{className:"text-[8px] bg-violet-500/20 text-violet-300 px-2 py-0.5 rounded-full font-bold",children:"RBAC"})]}),m.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-0.5",children:"Create accounts and set roles"})]}),m.jsx("div",{className:"w-10 h-10 rounded-full glass-light flex items-center justify-center group-hover:translate-x-1 transition-transform border border-white/10",children:m.jsx(go,{className:"text-slate-400",size:18})})]})]})]}),e&&m.jsx(Vk,{onScan:C,onClose:()=>t(!1)})]})}const Kk="modulepreload",Qk=function(e){return"/arynik1/"+e},jy={},uC=function(t,n,i){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),g=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));a=Promise.allSettled(n.map(v=>{if(v=Qk(v),v in jy)return;jy[v]=!0;const y=v.endsWith(".css"),C=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${C}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":Kk,y||(b.as="script"),b.crossOrigin="",b.href=v,g&&b.setAttribute("nonce",g),document.head.appendChild(b),y)return new Promise((T,I)=>{b.addEventListener("load",T),b.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${v}`)))})}))}function c(f){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=f,window.dispatchEvent(g),!g.defaultPrevented)throw f}return a.then(f=>{for(const g of f||[])g.status==="rejected"&&c(g.reason);return t().catch(c)})};function $k(){const[e,t]=j.useState(""),[n,i]=j.useState(""),[a,c]=j.useState(!1),[f,g]=j.useState(""),{login:v}=Jn(),y=mr(),C=async b=>{var T,I;b.preventDefault(),g(""),c(!0);try{const{login:F}=await uC(async()=>{const{login:B}=await Promise.resolve().then(()=>K5);return{login:B}},void 0),R=await F(e,n);if(R&&R.access_token)await v(R.access_token,R.role),y("/");else throw new Error("Invalid response from server")}catch(F){console.error("Login error:",F),g(((I=(T=F.response)==null?void 0:T.data)==null?void 0:I.detail)||F.message||"Invalid credentials. Please try again.")}finally{c(!1)}};return m.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center p-4",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-600/20 via-purple-600/10 to-pink-600/20 animate-pulse-slow"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-blue-600/10 via-transparent to-emerald-600/10"}),[...Array(20)].map((b,T)=>m.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*8}s`,animationDuration:`${8+Math.random()*4}s`}},T)),m.jsx("div",{className:"absolute top-10 left-20 w-72 h-72 bg-violet-500/30 rounded-full blur-3xl animate-float",style:{animationDelay:"0s"}}),m.jsx("div",{className:"absolute bottom-20 right-10 w-80 h-80 bg-pink-500/20 rounded-full blur-3xl animate-float",style:{animationDelay:"4s"}}),m.jsx("div",{className:"absolute top-40 right-40 w-60 h-60 bg-blue-500/20 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"relative z-10 w-full max-w-md animate-scale-in",children:[m.jsxs("div",{className:"text-center mb-8 animate-slide-down",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-violet-500 to-purple-600 rounded-3xl shadow-glow-md mb-4 animate-float",children:m.jsx($_,{className:"w-10 h-10 text-white"})}),m.jsx("h1",{className:"text-4xl font-black text-gradient mb-2 tracking-tight",children:"AryNik Driver"}),m.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Welcome back, let's get started"})]}),m.jsxs("form",{onSubmit:C,className:"glass-strong rounded-3xl p-8 border-iridescent space-y-6 relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"}),m.jsxs("div",{className:"relative",children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(wa,{size:14,className:"text-violet-400"}),"Username"]}),m.jsx("input",{type:"text",value:e,onChange:b=>t(b.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-violet-500/50 focus:ring-2 focus:ring-violet-500/20 transition-all duration-300",placeholder:"Enter your username",required:!0,autoFocus:!0})]}),m.jsxs("div",{className:"relative",children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(X_,{size:14,className:"text-violet-400"}),"Password"]}),m.jsx("input",{type:"password",value:n,onChange:b=>i(b.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-violet-500/50 focus:ring-2 focus:ring-violet-500/20 transition-all duration-300",placeholder:"Enter your password",required:!0})]}),f&&m.jsx("div",{className:"bg-rose-500/10 border border-rose-500/30 text-rose-400 px-4 py-3 rounded-xl text-sm font-medium animate-slide-down",children:f}),m.jsx("button",{type:"submit",disabled:a,className:"btn-premium w-full py-4 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-glow-md hover:shadow-glow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 text-sm uppercase tracking-wider magnetic",children:a?m.jsxs(m.Fragment,{children:[m.jsx(fn,{className:"animate-spin",size:20}),"Authenticating..."]}):m.jsxs(m.Fragment,{children:[m.jsx(KI,{size:20}),"Login to Dashboard"]})}),m.jsxs("p",{className:"text-center text-xs text-slate-500 mt-4",children:["Demo: ",m.jsx("span",{className:"text-violet-400 font-mono",children:"demo / demo"})]}),m.jsx("button",{type:"button",onClick:()=>y("/signup"),className:"w-full py-3 rounded-xl bg-emerald-500/10 border border-emerald-500/20 text-emerald-200 font-black uppercase tracking-wider text-xs hover:bg-emerald-500/15 transition-all",children:"Recipient: Create tracking account"})]}),m.jsx("p",{className:"text-center text-xs text-slate-600 mt-6",children:"Secure driver authentication  AryNik  2026"})]})]})}function Jk(){const e=mr(),{login:t}=Jn(),[n,i]=j.useState(""),[a,c]=j.useState(""),[f,g]=j.useState(""),[v,y]=j.useState(""),[C,b]=j.useState(!1),[T,I]=j.useState(""),F=async R=>{var B,z;R.preventDefault(),I(""),b(!0);try{const O=await Pb({awb:String(n||"").trim(),phone:String(a||"").trim(),password:String(f||""),name:String(v||"").trim()||void 0});if(O!=null&&O.access_token)await t(O.access_token,O.role),e("/shipments",{replace:!0});else throw new Error("Invalid response from server")}catch(O){I(((z=(B=O==null?void 0:O.response)==null?void 0:B.data)==null?void 0:z.detail)||(O==null?void 0:O.message)||"Failed to create account")}finally{b(!1)}};return m.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center p-4",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-600/15 via-slate-950 to-violet-600/10"}),m.jsx("div",{className:"absolute top-10 left-10 w-72 h-72 bg-emerald-500/20 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-20 right-10 w-80 h-80 bg-violet-500/15 rounded-full blur-3xl animate-float",style:{animationDelay:"3s"}}),m.jsxs("div",{className:"relative z-10 w-full max-w-md",children:[m.jsxs("button",{type:"button",onClick:()=>e("/login"),className:"mb-4 inline-flex items-center gap-2 text-slate-300 hover:text-white text-xs font-black uppercase tracking-widest",children:[m.jsx(ks,{size:16}),"Back to login"]}),m.jsxs("div",{className:"glass-strong rounded-3xl p-8 border-iridescent space-y-6 relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-emerald-500 to-emerald-700 rounded-3xl shadow-glow-md mb-4",children:m.jsx($x,{className:"w-8 h-8 text-white"})}),m.jsx("h1",{className:"text-2xl font-black text-white tracking-tight",children:"Track Your Delivery"}),m.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider mt-2",children:"Create an account using your AWB"})]}),m.jsxs("form",{onSubmit:F,className:"space-y-4 relative",children:[m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx($x,{size:14,className:"text-emerald-400"}),"AWB"]}),m.jsx("input",{value:n,onChange:R=>i(R.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 font-mono",placeholder:"e.g. AWB1234567",required:!0,autoFocus:!0})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(Wd,{size:14,className:"text-emerald-400"}),"WhatsApp Number"]}),m.jsx("input",{value:a,onChange:R=>c(R.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300",placeholder:"+40 712 345 678",required:!0})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(X_,{size:14,className:"text-emerald-400"}),"Password"]}),m.jsx("input",{type:"password",value:f,onChange:R=>g(R.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300",placeholder:"Choose a password",required:!0})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(wa,{size:14,className:"text-emerald-400"}),"Name (Optional)"]}),m.jsx("input",{value:v,onChange:R=>y(R.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300",placeholder:"Your name"})]}),T&&m.jsx("div",{className:"bg-rose-500/10 border border-rose-500/30 text-rose-400 px-4 py-3 rounded-xl text-sm font-medium",children:T}),m.jsx("button",{type:"submit",disabled:C,className:"btn-premium w-full py-4 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white font-bold rounded-xl shadow-glow-md hover:shadow-glow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 text-sm uppercase tracking-wider",children:C?m.jsxs(m.Fragment,{children:[m.jsx(fn,{className:"animate-spin",size:20}),"Creating..."]}):"Create Account"})]}),m.jsx("p",{className:"text-center text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:"Already have an account? Use your phone number as username on the login screen."})]})]})]})}function e6(){const[e,t]=j.useState([]),[n,i]=j.useState(!0),[a,c]=j.useState(!1),[f,g]=j.useState("delivered"),v=mr(),y=async(k=!1)=>{k?c(!0):i(!0);try{const W=await om();let Q=[];try{const q=localStorage.getItem("token");Q=(await K1(q,{limit:2e3})).map(X=>({...X,id:X.id,status:"synced",label:X.event_id}))}catch{console.log("Could not fetch server logs, showing local only")}let G=new Map;try{const q=localStorage.getItem("token"),M=await su(q);(Array.isArray(M)?M:[]).forEach(X=>{const ie=String((X==null?void 0:X.awb)||"").toUpperCase();ie&&G.set(ie,X)})}catch{}const H=[...W,...Q].sort((q,M)=>new Date(M.timestamp)-new Date(q.timestamp));t(H.map(q=>{const M=String((q==null?void 0:q.awb)||"").toUpperCase(),X=G.get(M),ie=(X==null?void 0:X.raw_data)||{},se=(ie==null?void 0:ie.client)||(ie==null?void 0:ie.clientData)||{},ve=(ie==null?void 0:ie.senderLocation)||{},Ee=String((X==null?void 0:X.sender_shop_name)||(se==null?void 0:se.name)||(se==null?void 0:se.clientName)||(ve==null?void 0:ve.name)||(ve==null?void 0:ve.shopName)||"").trim()||null,ae=(q!=null&&q.payload?q.payload.parcels_total:void 0)??(q==null?void 0:q.parcels_total)??(X==null?void 0:X.number_of_parcels)??(ie==null?void 0:ie.numberOfDistinctBarcodes)??(ie==null?void 0:ie.numberOfParcels),de=Number(ae),ke=Number.isFinite(de)&&de>0?Math.trunc(de):null;return{...q,payment_amount:(X==null?void 0:X.payment_amount)??(X==null?void 0:X.shipping_cost)??(X==null?void 0:X.estimated_shipping_cost)??null,currency:(X==null?void 0:X.currency)||"RON",client_name:Ee,parcels_total:ke}}))}finally{i(!1),c(!1)}};j.useEffect(()=>{y()},[]);const C=k=>k==="synced"?{bg:"bg-emerald-500/20",text:"text-emerald-400",border:"border-emerald-500/30",icon:sd,label:"Synced"}:{bg:"bg-violet-500/20",text:"text-violet-400",border:"border-violet-500/30",icon:Bu,label:"Pending"},b=e.filter(k=>k.status==="synced").length,T=e.filter(k=>k.status!=="synced").length,I=e.filter(k=>k.status==="synced"&&String(k.event_id||"")==="2"),F=I.length,R=I.reduce((k,W)=>{const Q=Number(W==null?void 0:W.payment_amount);return Number.isFinite(Q)?k+Q:k},0),B=f==="delivered"?e.filter(k=>String(k.event_id||"")==="2"):e,z={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},O={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0}};return m.jsxs(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-20 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"px-4 py-4 flex items-center justify-between glass-strong sticky top-0 z-30 backdrop-blur-xl border-b border-white/10 animate-slide-down",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("button",{onClick:()=>v(-1),className:"p-2 -ml-2 rounded-xl glass-light text-slate-300 hover:text-white transition-colors border border-white/10",children:m.jsx(ks,{size:20})}),m.jsxs("div",{children:[m.jsx("h1",{className:"font-black text-lg text-gradient tracking-tight",children:"Update History"}),m.jsx("p",{className:"text-xs text-slate-500 font-medium mt-0.5",children:"Recent activity timeline"})]})]}),m.jsx("button",{onClick:()=>y(!0),className:`p-2.5 rounded-xl glass-light hover:bg-violet-500/20 text-violet-400 transition-all border border-white/10 ${a?"animate-spin":""}`,children:m.jsx(Bi,{size:20})})]}),m.jsxs("div",{className:"p-4 space-y-3 relative z-10",children:[m.jsxs("div",{className:"flex glass-strong p-1 rounded-xl border border-white/10 w-fit",children:[m.jsx("button",{onClick:()=>g("delivered"),className:`px-3 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${f==="delivered"?"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:"Delivered"}),m.jsx("button",{onClick:()=>g("all"),className:`px-3 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${f==="all"?"bg-gradient-to-r from-violet-600 to-purple-600 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:"All"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs(rt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"glass-strong p-4 rounded-2xl border-iridescent",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:m.jsx(sd,{size:14,className:"text-emerald-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Synced"})]}),m.jsx("p",{className:"text-2xl font-black text-gradient-blue",children:b})]}),m.jsxs(rt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},className:"glass-strong p-4 rounded-2xl border-iridescent",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-2 bg-violet-500/20 rounded-lg",children:m.jsx(Bu,{size:14,className:"text-violet-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Pending"})]}),m.jsx("p",{className:"text-2xl font-black text-gradient-purple",children:T})]}),m.jsxs(rt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"glass-strong p-4 rounded-2xl border-iridescent",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:m.jsx(sd,{size:14,className:"text-emerald-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Delivered"})]}),m.jsx("p",{className:"text-2xl font-black text-gradient-blue",children:F})]}),m.jsxs(rt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"glass-strong p-4 rounded-2xl border-iridescent",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-2 bg-amber-500/20 rounded-lg",children:m.jsx(HI,{size:14,className:"text-amber-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Pay (RON)"})]}),m.jsx("p",{className:"text-2xl font-black text-gradient-purple",children:R.toFixed(2)})]})]})]}),m.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-32 relative z-10",children:n?m.jsxs("div",{className:"text-center py-20",children:[m.jsxs("div",{className:"relative inline-block",children:[m.jsx("div",{className:"absolute inset-0 bg-violet-500/20 blur-xl rounded-full animate-pulse"}),m.jsx(Rs,{className:"animate-spin relative z-10 text-violet-400 mx-auto",size:48})]}),m.jsx("p",{className:"mt-6 text-sm font-bold text-slate-500 uppercase tracking-wide",children:"Loading history..."})]}):B.length===0?m.jsxs(rt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(Bu,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No recent updates"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Your activity will appear here"})]}):m.jsx(rt.div,{variants:z,initial:"hidden",animate:"visible",className:"space-y-3 py-2",children:B.map((k,W)=>{var se;const Q=C(k.status),G=Q.icon,H=Number(k==null?void 0:k.payment_amount),q=Number.isFinite(k==null?void 0:k.parcels_total)&&k.parcels_total>0?k.parcels_total:null,M=((se=k==null?void 0:k.payload)==null?void 0:se.parcel_index)??(k==null?void 0:k.parcel_index),X=Number(M),ie=Number.isFinite(X)&&X>0?Math.trunc(X):null;return m.jsxs(rt.div,{variants:O,className:"glass-strong p-5 rounded-2xl border border-white/10 relative overflow-hidden group hover:border-violet-500/30 transition-all",children:[W<e.length-1&&m.jsx("div",{className:"absolute left-11 top-full w-0.5 h-3 bg-gradient-to-b from-white/10 to-transparent"}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx("div",{className:`flex-shrink-0 w-12 h-12 ${Q.bg} rounded-2xl flex items-center justify-center border ${Q.border}`,children:m.jsx(G,{size:20,className:Q.text,strokeWidth:2.5})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex justify-between items-start mb-2",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs font-mono text-slate-500 tracking-wider",children:k.awb}),ie?m.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mt-1",children:["Parcel ",ie,q?`/${q}`:""]}):null,m.jsx("h3",{className:"font-bold text-white mt-1",children:k.event_id||k.label}),k.client_name&&m.jsx("p",{className:"text-[10px] text-slate-400 font-bold mt-1 truncate",children:k.client_name})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[Number.isFinite(H)&&m.jsxs("span",{className:"text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border bg-amber-500/15 text-amber-300 border-amber-500/20",children:[H.toFixed(2)," ",String((k==null?void 0:k.currency)||"RON").toUpperCase()]}),m.jsx("span",{className:`text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border ${Q.bg} ${Q.text} ${Q.border}`,children:Q.label})]})]}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-medium flex items-center gap-1.5",children:[m.jsx(Bu,{size:10}),new Date(k.timestamp).toLocaleString()]}),k.error_message&&m.jsxs("div",{className:"mt-3 px-3 py-2 bg-red-500/10 border border-red-500/20 rounded-xl flex items-start gap-2",children:[m.jsx(V_,{size:14,className:"text-red-400 mt-0.5 flex-shrink-0"}),m.jsx("p",{className:"text-xs text-red-400 font-medium",children:k.error_message})]})]})]})]},W)})})})]})}const dC="arynik_warehouse_origin_v1",By=e=>{const t=Number(e);return!Number.isFinite(t)||Math.abs(t)<1e-4?null:t},Ma={lat:By(void 0)??46.5667,lon:By(void 0)??26.9167,label:"Warehouse (Bacau)"},t6=e=>{try{return localStorage.getItem(e)}catch{return null}},n6=(e,t)=>{try{return localStorage.setItem(e,t),!0}catch{return!1}},hC=(e,t)=>Number.isFinite(Number(e))&&Number.isFinite(Number(t))&&Math.abs(Number(e))>1e-4&&Math.abs(Number(t))>1e-4,Vc=()=>{if(typeof window>"u")return Ma;const e=t6(dC);if(!e)return Ma;try{const t=JSON.parse(e),n=Number(t==null?void 0:t.lat),i=Number(t==null?void 0:t.lon);return hC(n,i)?{lat:n,lon:i,label:String((t==null?void 0:t.label)||Ma.label||"Warehouse")}:Ma}catch{return Ma}},r6=({lat:e,lon:t,label:n}={})=>{const i=Number(e),a=Number(t);return hC(i,a)?n6(dC,JSON.stringify({lat:i,lon:a,label:String(n||Ma.label||"Warehouse"),ts:Date.now()})):!1};function i6(){const{user:e,logout:t}=Jn(),n=mr(),[i,a]=j.useState(Dt()),[c,f]=j.useState(()=>{const H=Vc();return{label:String((H==null?void 0:H.label)||""),lat:String((H==null?void 0:H.lat)??""),lon:String((H==null?void 0:H.lon)??"")}}),[g,v]=j.useState(""),[y,C]=j.useState(!1),[b,T]=j.useState(""),I=Tn(e,yo),F=()=>{t(),n("/login",{replace:!0})},R=()=>{Lb(i),window.location.reload()},B=()=>{const H=r6({label:c.label,lat:c.lat,lon:c.lon});v(H?"Warehouse origin saved.":"Invalid warehouse coordinates."),setTimeout(()=>v(""),2500)},z=async()=>{var ie;if(!window.confirm(`Clear cached data on this device?

This removes:
- Offline queue (pending updates)
- Local route allocations
- Geocode cache
- Service worker caches

You will stay signed in.`))return;C(!0),T("");let q=0,M=0;try{const{clearQueue:se}=await uC(async()=>{const{clearQueue:ve}=await Promise.resolve().then(()=>Xk);return{clearQueue:ve}},void 0);q=await se()}catch{}if(["arynik_geocode_cache_v1","arynik_routes_v1","arynik_demo_logs_v1","arynik_demo_shipments_v1","arynik_last_vehicle_plate_v1","arynik_warehouse_origin_v1"].forEach(se=>{try{localStorage.removeItem(se)}catch{}}),typeof window<"u"&&"caches"in window)try{const se=await caches.keys();await Promise.all(se.map(ve=>caches.delete(ve))),M=se.length}catch{}if((ie=navigator==null?void 0:navigator.serviceWorker)!=null&&ie.getRegistrations)try{const se=await navigator.serviceWorker.getRegistrations();await Promise.all(se.map(ve=>ve.unregister()))}catch{}T(`Cleared ${M} cache(s) and ${q} queued update(s). Reloading...`),setTimeout(()=>{window.location.reload()},600)},O=[{title:"Preferences",items:[{icon:Fc,label:"Notifications",value:"Enabled",color:"violet"},{icon:ZI,label:"Language",value:"English",color:"emerald"},{icon:$I,label:"Dark Mode",value:"Auto",color:"amber"}]},{title:"Account",items:[{icon:i8,label:"Security",value:null,color:"violet"},...I?[{icon:eb,label:"Manage Users",value:null,color:"emerald",onClick:()=>n("/users")}]:[],{icon:Zd,label:"Clear Cache",value:y?"Working":null,color:"slate",onClick:()=>{y||z()}},{icon:XI,label:"App Info",value:"v1.0.0",color:"slate"}]}],k=H=>{const q={violet:"bg-violet-500/20",emerald:"bg-emerald-500/20",amber:"bg-amber-500/20",slate:"bg-slate-500/20"};return q[H]||q.slate},W=H=>{const q={violet:"text-violet-400",emerald:"text-emerald-400",amber:"text-amber-400",slate:"text-slate-400"};return q[H]||q.slate},Q={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},G={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return m.jsxs(rt.div,{initial:"hidden",animate:"visible",exit:{opacity:0,y:-20},variants:Q,className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-600 via-purple-600 to-violet-700"}),m.jsx("div",{className:"absolute inset-0 shimmer opacity-20"}),m.jsxs("header",{className:"relative z-10 px-6 pt-6 pb-4",children:[m.jsx("h1",{className:"text-xl font-black text-white uppercase tracking-tight mb-1",children:"Settings"}),m.jsx("p",{className:"text-sm text-violet-100 font-medium",children:"Manage your preferences"})]}),m.jsxs("div",{className:"relative z-10 px-8 pb-8 flex flex-col items-center",children:[m.jsx(rt.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:15},className:"w-28 h-28 bg-gradient-to-br from-white/20 to-white/10 backdrop-blur-xl rounded-[32px] shadow-2xl flex items-center justify-center text-white mb-5 border-4 border-white/30 animate-float",children:m.jsx(wa,{size:56,strokeWidth:1.5})}),m.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight mb-2",children:(e==null?void 0:e.username)||"Driver"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-[10px] font-black bg-white/20 backdrop-blur-sm text-white px-3 py-1.5 rounded-full uppercase tracking-widest border border-white/30",children:(e==null?void 0:e.role)||"Carrier"}),m.jsxs("span",{className:"text-[10px] font-bold text-violet-200 uppercase tracking-widest",children:["ID: ",(e==null?void 0:e.driver_id)||"N/A"]})]})]})]}),m.jsxs("div",{className:"flex-1 p-4 space-y-6 pb-32 relative z-10 -mt-6",children:[m.jsxs(rt.div,{variants:G,className:"space-y-3",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Connection"}),m.jsxs("div",{className:"glass-strong rounded-2xl overflow-hidden border-iridescent p-4 space-y-3",children:[m.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"API Base URL"}),m.jsx("input",{value:i,onChange:H=>a(H.target.value),placeholder:"https://YOUR-BACKEND",className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-violet-500/50 focus:ring-2 focus:ring-violet-500/20 transition-all duration-300 text-sm font-medium"}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-medium leading-relaxed",children:["Tip: on GitHub Pages (HTTPS), your backend must be HTTPS. You can also set via URL: ",m.jsx("span",{className:"font-mono text-slate-400",children:"?api=https://YOUR-BACKEND"})]}),m.jsx("button",{onClick:R,className:"w-full btn-premium py-3 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white rounded-xl font-bold shadow-lg hover:shadow-glow-md transition-all text-sm uppercase tracking-wider",children:"Apply API URL"})]})]}),m.jsxs(rt.div,{variants:G,className:"space-y-3",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Warehouse"}),m.jsxs("div",{className:"glass-strong rounded-2xl overflow-hidden border-iridescent p-4 space-y-3",children:[m.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Routing Origin (Used For KM/Routes)"}),m.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[m.jsx("input",{value:c.label,onChange:H=>f(q=>({...q,label:H.target.value})),placeholder:"Warehouse (Bacau)",className:"col-span-3 px-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium"}),m.jsx("input",{value:c.lat,onChange:H=>f(q=>({...q,lat:H.target.value})),placeholder:"Latitude",className:"px-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium font-mono"}),m.jsx("input",{value:c.lon,onChange:H=>f(q=>({...q,lon:H.target.value})),placeholder:"Longitude",className:"px-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium font-mono"}),m.jsx("button",{onClick:B,className:"btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white rounded-xl font-bold shadow-lg hover:shadow-glow-md transition-all text-sm uppercase tracking-wider",children:"Save Warehouse"})]}),g&&m.jsx("div",{className:"glass-light p-3 rounded-xl border border-emerald-500/20 text-emerald-200 text-xs font-bold",children:g}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium leading-relaxed",children:"Driver GPS is still shown on the map, but routing always starts from this warehouse origin."})]})]}),O.map((H,q)=>m.jsxs(rt.div,{variants:G,className:"space-y-3",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:H.title}),m.jsx("div",{className:"glass-strong rounded-2xl overflow-hidden border-iridescent",children:H.items.map((M,X)=>{const ie=M.icon;return m.jsxs("button",{type:"button",onClick:()=>M.onClick&&M.onClick(),disabled:y&&M.label==="Clear Cache",className:`w-full p-4 flex items-center gap-4 hover:bg-white/5 transition-all group ${X<H.items.length-1?"border-b border-white/5":""}`,children:[m.jsx("div",{className:`p-3 ${k(M.color)} rounded-xl group-hover:scale-110 transition-transform`,children:y&&M.label==="Clear Cache"?m.jsx(fn,{className:"animate-spin text-slate-400",size:20,strokeWidth:2}):m.jsx(ie,{className:W(M.color),size:20,strokeWidth:2})}),m.jsx("span",{className:"flex-1 text-left font-bold text-white",children:M.label}),M.value&&m.jsx("span",{className:"text-xs text-slate-400 font-medium",children:M.value}),m.jsx(go,{className:"text-slate-500 group-hover:text-violet-400 group-hover:translate-x-1 transition-all",size:18})]},X)})})]},q)),b&&m.jsx(rt.div,{variants:G,className:"glass-strong p-4 rounded-2xl border border-emerald-500/20 text-emerald-200 text-xs font-bold",children:b}),m.jsxs(rt.div,{variants:G,className:"glass-strong p-5 rounded-2xl border-iridescent relative overflow-hidden group",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/10 to-amber-600/5 opacity-0 group-hover:opacity-100 transition-opacity"}),m.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[m.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl shadow-glow-sm",children:m.jsx($_,{size:24,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"font-black text-white text-sm",children:"Premium Features"}),m.jsx("p",{className:"text-[10px] text-slate-400 font-medium mt-1",children:"Unlock advanced analytics & insights"})]}),m.jsx(go,{className:"text-amber-400",size:20})]})]}),m.jsxs(rt.button,{variants:G,onClick:F,whileTap:{scale:.98},className:"w-full btn-premium py-4 bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-400 hover:to-rose-500 text-white rounded-2xl font-bold flex items-center justify-center gap-2 shadow-lg hover:shadow-glow-md transition-all",children:[m.jsx(q_,{size:20,strokeWidth:2.5}),"Sign Out"]})]}),m.jsxs(rt.div,{variants:G,className:"p-6 text-center relative z-10",children:[m.jsx("p",{className:"text-[10px] text-slate-500 font-medium",children:"Powered by Postis Bridge"}),m.jsx("p",{className:"text-[9px] text-slate-600 font-medium mt-1",children:" 2025 AryNik Driver App"})]})]})}const fC="arynik_geocode_cache_v1",s6=1100;let Fy=0,zy=Promise.resolve(),Ys=null,pp=!1,Vf=null;const zu=new Map,Uy=5e3,o6=250,a6=e=>{try{return localStorage.getItem(e)}catch{return null}},l6=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},c6=e=>new Promise(t=>setTimeout(t,e)),am=()=>{if(Ys)return Ys;const e=a6(fC);if(!e)return Ys={},Ys;try{const t=JSON.parse(e);return Ys=t&&typeof t=="object"?t:{},Ys}catch{return Ys={},Ys}},u6=e=>{const t=Object.entries(e||{});if(t.length<=Uy)return;t.sort((i,a)=>{var c,f;return Number(((c=i==null?void 0:i[1])==null?void 0:c.ts)||0)-Number(((f=a==null?void 0:a[1])==null?void 0:f.ts)||0)});const n=t.length-Uy;for(let i=0;i<n;i+=1)delete e[t[i][0]]},d6=()=>{Vf||(Vf=setTimeout(()=>{if(Vf=null,!pp)return;pp=!1;const e=am();try{u6(e),l6(fC,JSON.stringify(e||{}))}catch{}},o6))},Vy=(e,t)=>{const n=am();n[e]=t,pp=!0,d6()},h6=e=>{const t=am(),n=t?t[e]:null;return n&&typeof n=="object"?n:null},Hc=e=>{const t=String(e||"").trim();if(!t)return null;const n=h6(t);if(!n)return null;if(n.lat===null&&n.lon===null)return{lat:null,lon:null,display_name:n.display_name||t,ts:n.ts||0};const i=Number(n.lat),a=Number(n.lon);return!Number.isFinite(i)||!Number.isFinite(a)?null:{...n,lat:i,lon:a}},f6=(e,{timeoutMs:t=15e3}={})=>new Promise((n,i)=>{const a=`__arynik_jsonp_${Date.now()}_${Math.floor(Math.random()*1e5)}`,c=document.createElement("script"),f=setTimeout(()=>{g(),i(new Error("Geocode timeout"))},t),g=()=>{clearTimeout(f);try{delete window[a]}catch{window[a]=void 0}c&&c.parentNode&&c.parentNode.removeChild(c)};window[a]=v=>{g(),n(v)},c.onerror=()=>{g(),i(new Error("Geocode network error"))},c.async=!0,c.src=`${e}${e.includes("?")?"&":"?"}json_callback=${encodeURIComponent(a)}`,document.body.appendChild(c)}),p6=e=>{const t=async()=>{const i=s6-(Date.now()-Fy);return i>0&&await c6(i),Fy=Date.now(),e()},n=zy.then(t,t);return zy=n.catch(()=>{}),n},Qd=async e=>{const t=String(e||"").trim();if(!t)return null;const n=Hc(t);if(n){if(Number.isFinite(n.lat)&&Number.isFinite(n.lon))return n;if(n.lat===null&&n.lon===null)return null}if(zu.has(t))return zu.get(t);const i=(async()=>{const c=`https://nominatim.openstreetmap.org/search?format=json&limit=1&q=${encodeURIComponent(t)}`;try{const f=await p6(()=>f6(c)),g=Array.isArray(f)?f[0]:null,v=g?Number(g.lat):NaN,y=g?Number(g.lon):NaN;if(!Number.isFinite(v)||!Number.isFinite(y))return Vy(t,{lat:null,lon:null,display_name:t,ts:Date.now()}),null;const C={lat:v,lon:y,display_name:g.display_name||t,ts:Date.now()};return Vy(t,C),C}catch(f){return console.warn("Geocode failed",f),null}})();zu.set(t,i);try{return await i}finally{zu.delete(t)}},pC="https://router.project-osrm.org/route/v1/driving";async function m6(e,t){if(!e||!t)return null;try{const n=`${pC}/${e.lon},${e.lat};${t.lon},${t.lat}?overview=full&geometries=geojson`,i=await st.get(n);return i.data.code==="Ok"&&i.data.routes.length>0?i.data.routes[0].geometry:null}catch(n){return console.error("Error fetching route:",n),null}}async function g6(e){const t=Array.isArray(e)?e.filter(Boolean):[];if(t.length<2)return null;const n=t.map(i=>`${i.lon},${i.lat}`).join(";");try{const i=`${pC}/${n}?overview=full&geometries=geojson&steps=false`,a=await st.get(i);if(a.data.code==="Ok"&&a.data.routes.length>0){const c=a.data.routes[0]||{};return{geometry:c.geometry||null,distance_m:Number.isFinite(Number(c.distance))?Number(c.distance):0,duration_s:Number.isFinite(Number(c.duration))?Number(c.duration):0}}return null}catch(i){return console.error("Error fetching multi-route:",i),null}}const Xe=e=>{const t=Number(e);return Number.isFinite(t)&&Math.abs(t)>1e-4},Hf=e=>String(e||"").trim().replace(/[_-]+/g," ").replace(/\\s+/g," ").trim(),sa=e=>{var c,f,g,v,y,C;const t=Hf(e==null?void 0:e.delivery_address),n=Hf((e==null?void 0:e.locality)||((f=(c=e==null?void 0:e.raw_data)==null?void 0:c.recipientLocation)==null?void 0:f.locality)),i=Hf((e==null?void 0:e.county)||((v=(g=e==null?void 0:e.raw_data)==null?void 0:g.recipientLocation)==null?void 0:v.county)||((C=(y=e==null?void 0:e.raw_data)==null?void 0:y.recipientLocation)==null?void 0:C.countyName)),a=[];return t&&a.push(t),n&&!t.toLowerCase().includes(n.toLowerCase())&&a.push(n),i&&!a.some(b=>b.toLowerCase().includes(i.toLowerCase()))&&a.push(i),a.push("Romania"),a.filter(Boolean).join(", ")};function mC(e,t){const n=j.useRef(t);j.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}const x6=1;function y6(e){return Object.freeze({__version:x6,map:e})}function gC(e,t){return Object.freeze({...e,...t})}const xC=j.createContext(null),yC=xC.Provider;function Lh(){const e=j.useContext(xC);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function wC(e){function t(n,i){const{instance:a,context:c}=e(n).current;return j.useImperativeHandle(i,()=>a),n.children==null?null:aa.createElement(yC,{value:c},n.children)}return j.forwardRef(t)}function w6(e){function t(n,i){const[a,c]=j.useState(!1),{instance:f}=e(n,c).current;j.useImperativeHandle(i,()=>f),j.useEffect(function(){a&&f.update()},[f,a,n.children]);const g=f._contentNode;return g?cv.createPortal(n.children,g):null}return j.forwardRef(t)}function v6(e){function t(n,i){const{instance:a}=e(n).current;return j.useImperativeHandle(i,()=>a),null}return j.forwardRef(t)}function lm(e,t){const n=j.useRef();j.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function Ph(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function _6(e,t){return function(i,a){const c=Lh(),f=e(Ph(i,c),c);return mC(c.map,i.attribution),lm(f.current,i.eventHandlers),t(f.current,c,i,a),f}}var mp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,i){i(t)})(ka,function(n){var i="1.9.4";function a(o){var h,w,A,N;for(w=1,A=arguments.length;w<A;w++){N=arguments[w];for(h in N)o[h]=N[h]}return o}var c=Object.create||function(){function o(){}return function(h){return o.prototype=h,new o}}();function f(o,h){var w=Array.prototype.slice;if(o.bind)return o.bind.apply(o,w.call(arguments,1));var A=w.call(arguments,2);return function(){return o.apply(h,A.length?A.concat(w.call(arguments)):arguments)}}var g=0;function v(o){return"_leaflet_id"in o||(o._leaflet_id=++g),o._leaflet_id}function y(o,h,w){var A,N,V,$;return $=function(){A=!1,N&&(V.apply(w,N),N=!1)},V=function(){A?N=arguments:(o.apply(w,arguments),setTimeout($,h),A=!0)},V}function C(o,h,w){var A=h[1],N=h[0],V=A-N;return o===A&&w?o:((o-N)%V+V)%V+N}function b(){return!1}function T(o,h){if(h===!1)return o;var w=Math.pow(10,h===void 0?6:h);return Math.round(o*w)/w}function I(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function F(o){return I(o).split(/\s+/)}function R(o,h){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?c(o.options):{});for(var w in h)o.options[w]=h[w];return o.options}function B(o,h,w){var A=[];for(var N in o)A.push(encodeURIComponent(w?N.toUpperCase():N)+"="+encodeURIComponent(o[N]));return(!h||h.indexOf("?")===-1?"?":"&")+A.join("&")}var z=/\{ *([\w_ -]+) *\}/g;function O(o,h){return o.replace(z,function(w,A){var N=h[A];if(N===void 0)throw new Error("No value provided for variable "+w);return typeof N=="function"&&(N=N(h)),N})}var k=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function W(o,h){for(var w=0;w<o.length;w++)if(o[w]===h)return w;return-1}var Q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function G(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var H=0;function q(o){var h=+new Date,w=Math.max(0,16-(h-H));return H=h+w,window.setTimeout(o,w)}var M=window.requestAnimationFrame||G("RequestAnimationFrame")||q,X=window.cancelAnimationFrame||G("CancelAnimationFrame")||G("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function ie(o,h,w){if(w&&M===q)o.call(h);else return M.call(window,f(o,h))}function se(o){o&&X.call(window,o)}var ve={__proto__:null,extend:a,create:c,bind:f,get lastId(){return g},stamp:v,throttle:y,wrapNum:C,falseFn:b,formatNum:T,trim:I,splitWords:F,setOptions:R,getParamString:B,template:O,isArray:k,indexOf:W,emptyImageUrl:Q,requestFn:M,cancelFn:X,requestAnimFrame:ie,cancelAnimFrame:se};function Ee(){}Ee.extend=function(o){var h=function(){R(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},w=h.__super__=this.prototype,A=c(w);A.constructor=h,h.prototype=A;for(var N in this)Object.prototype.hasOwnProperty.call(this,N)&&N!=="prototype"&&N!=="__super__"&&(h[N]=this[N]);return o.statics&&a(h,o.statics),o.includes&&(ae(o.includes),a.apply(null,[A].concat(o.includes))),a(A,o),delete A.statics,delete A.includes,A.options&&(A.options=w.options?c(w.options):{},a(A.options,o.options)),A._initHooks=[],A.callInitHooks=function(){if(!this._initHooksCalled){w.callInitHooks&&w.callInitHooks.call(this),this._initHooksCalled=!0;for(var V=0,$=A._initHooks.length;V<$;V++)A._initHooks[V].call(this)}},h},Ee.include=function(o){var h=this.prototype.options;return a(this.prototype,o),o.options&&(this.prototype.options=h,this.mergeOptions(o.options)),this},Ee.mergeOptions=function(o){return a(this.prototype.options,o),this},Ee.addInitHook=function(o){var h=Array.prototype.slice.call(arguments,1),w=typeof o=="function"?o:function(){this[o].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(w),this};function ae(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=k(o)?o:[o];for(var h=0;h<o.length;h++)o[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var de={on:function(o,h,w){if(typeof o=="object")for(var A in o)this._on(A,o[A],h);else{o=F(o);for(var N=0,V=o.length;N<V;N++)this._on(o[N],h,w)}return this},off:function(o,h,w){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var A in o)this._off(A,o[A],h);else{o=F(o);for(var N=arguments.length===1,V=0,$=o.length;V<$;V++)N?this._off(o[V]):this._off(o[V],h,w)}return this},_on:function(o,h,w,A){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(o,h,w)===!1){w===this&&(w=void 0);var N={fn:h,ctx:w};A&&(N.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(N)}},_off:function(o,h,w){var A,N,V;if(this._events&&(A=this._events[o],!!A)){if(arguments.length===1){if(this._firingCount)for(N=0,V=A.length;N<V;N++)A[N].fn=b;delete this._events[o];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var $=this._listens(o,h,w);if($!==!1){var ue=A[$];this._firingCount&&(ue.fn=b,this._events[o]=A=A.slice()),A.splice($,1)}}},fire:function(o,h,w){if(!this.listens(o,w))return this;var A=a({},h,{type:o,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var N=this._events[o];if(N){this._firingCount=this._firingCount+1||1;for(var V=0,$=N.length;V<$;V++){var ue=N[V],pe=ue.fn;ue.once&&this.off(o,pe,ue.ctx),pe.call(ue.ctx||this,A)}this._firingCount--}}return w&&this._propagateEvent(A),this},listens:function(o,h,w,A){typeof o!="string"&&console.warn('"string" type argument expected');var N=h;typeof h!="function"&&(A=!!h,N=void 0,w=void 0);var V=this._events&&this._events[o];if(V&&V.length&&this._listens(o,N,w)!==!1)return!0;if(A){for(var $ in this._eventParents)if(this._eventParents[$].listens(o,h,w,A))return!0}return!1},_listens:function(o,h,w){if(!this._events)return!1;var A=this._events[o]||[];if(!h)return!!A.length;w===this&&(w=void 0);for(var N=0,V=A.length;N<V;N++)if(A[N].fn===h&&A[N].ctx===w)return N;return!1},once:function(o,h,w){if(typeof o=="object")for(var A in o)this._on(A,o[A],h,!0);else{o=F(o);for(var N=0,V=o.length;N<V;N++)this._on(o[N],h,w,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[v(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[v(o)],this},_propagateEvent:function(o){for(var h in this._eventParents)this._eventParents[h].fire(o.type,a({layer:o.target,propagatedFrom:o.target},o),!0)}};de.addEventListener=de.on,de.removeEventListener=de.clearAllEventListeners=de.off,de.addOneTimeEventListener=de.once,de.fireEvent=de.fire,de.hasEventListeners=de.listens;var ke=Ee.extend(de);function ne(o,h,w){this.x=w?Math.round(o):o,this.y=w?Math.round(h):h}var Se=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};ne.prototype={clone:function(){return new ne(this.x,this.y)},add:function(o){return this.clone()._add(ye(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(ye(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new ne(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new ne(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Se(this.x),this.y=Se(this.y),this},distanceTo:function(o){o=ye(o);var h=o.x-this.x,w=o.y-this.y;return Math.sqrt(h*h+w*w)},equals:function(o){return o=ye(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=ye(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function ye(o,h,w){return o instanceof ne?o:k(o)?new ne(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new ne(o.x,o.y):new ne(o,h,w)}function ge(o,h){if(o)for(var w=h?[o,h]:o,A=0,N=w.length;A<N;A++)this.extend(w[A])}ge.prototype={extend:function(o){var h,w;if(!o)return this;if(o instanceof ne||typeof o[0]=="number"||"x"in o)h=w=ye(o);else if(o=Me(o),h=o.min,w=o.max,!h||!w)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=w.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(w.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(w.y,this.max.y)),this},getCenter:function(o){return ye((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return ye(this.min.x,this.max.y)},getTopRight:function(){return ye(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var h,w;return typeof o[0]=="number"||o instanceof ne?o=ye(o):o=Me(o),o instanceof ge?(h=o.min,w=o.max):h=w=o,h.x>=this.min.x&&w.x<=this.max.x&&h.y>=this.min.y&&w.y<=this.max.y},intersects:function(o){o=Me(o);var h=this.min,w=this.max,A=o.min,N=o.max,V=N.x>=h.x&&A.x<=w.x,$=N.y>=h.y&&A.y<=w.y;return V&&$},overlaps:function(o){o=Me(o);var h=this.min,w=this.max,A=o.min,N=o.max,V=N.x>h.x&&A.x<w.x,$=N.y>h.y&&A.y<w.y;return V&&$},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var h=this.min,w=this.max,A=Math.abs(h.x-w.x)*o,N=Math.abs(h.y-w.y)*o;return Me(ye(h.x-A,h.y-N),ye(w.x+A,w.y+N))},equals:function(o){return o?(o=Me(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function Me(o,h){return!o||o instanceof ge?o:new ge(o,h)}function qe(o,h){if(o)for(var w=h?[o,h]:o,A=0,N=w.length;A<N;A++)this.extend(w[A])}qe.prototype={extend:function(o){var h=this._southWest,w=this._northEast,A,N;if(o instanceof ee)A=o,N=o;else if(o instanceof qe){if(A=o._southWest,N=o._northEast,!A||!N)return this}else return o?this.extend(oe(o)||De(o)):this;return!h&&!w?(this._southWest=new ee(A.lat,A.lng),this._northEast=new ee(N.lat,N.lng)):(h.lat=Math.min(A.lat,h.lat),h.lng=Math.min(A.lng,h.lng),w.lat=Math.max(N.lat,w.lat),w.lng=Math.max(N.lng,w.lng)),this},pad:function(o){var h=this._southWest,w=this._northEast,A=Math.abs(h.lat-w.lat)*o,N=Math.abs(h.lng-w.lng)*o;return new qe(new ee(h.lat-A,h.lng-N),new ee(w.lat+A,w.lng+N))},getCenter:function(){return new ee((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ee(this.getNorth(),this.getWest())},getSouthEast:function(){return new ee(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof ee||"lat"in o?o=oe(o):o=De(o);var h=this._southWest,w=this._northEast,A,N;return o instanceof qe?(A=o.getSouthWest(),N=o.getNorthEast()):A=N=o,A.lat>=h.lat&&N.lat<=w.lat&&A.lng>=h.lng&&N.lng<=w.lng},intersects:function(o){o=De(o);var h=this._southWest,w=this._northEast,A=o.getSouthWest(),N=o.getNorthEast(),V=N.lat>=h.lat&&A.lat<=w.lat,$=N.lng>=h.lng&&A.lng<=w.lng;return V&&$},overlaps:function(o){o=De(o);var h=this._southWest,w=this._northEast,A=o.getSouthWest(),N=o.getNorthEast(),V=N.lat>h.lat&&A.lat<w.lat,$=N.lng>h.lng&&A.lng<w.lng;return V&&$},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,h){return o?(o=De(o),this._southWest.equals(o.getSouthWest(),h)&&this._northEast.equals(o.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function De(o,h){return o instanceof qe?o:new qe(o,h)}function ee(o,h,w){if(isNaN(o)||isNaN(h))throw new Error("Invalid LatLng object: ("+o+", "+h+")");this.lat=+o,this.lng=+h,w!==void 0&&(this.alt=+w)}ee.prototype={equals:function(o,h){if(!o)return!1;o=oe(o);var w=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return w<=(h===void 0?1e-9:h)},toString:function(o){return"LatLng("+T(this.lat,o)+", "+T(this.lng,o)+")"},distanceTo:function(o){return at.distance(this,oe(o))},wrap:function(){return at.wrapLatLng(this)},toBounds:function(o){var h=180*o/40075017,w=h/Math.cos(Math.PI/180*this.lat);return De([this.lat-h,this.lng-w],[this.lat+h,this.lng+w])},clone:function(){return new ee(this.lat,this.lng,this.alt)}};function oe(o,h,w){return o instanceof ee?o:k(o)&&typeof o[0]!="object"?o.length===3?new ee(o[0],o[1],o[2]):o.length===2?new ee(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new ee(o.lat,"lng"in o?o.lng:o.lon,o.alt):h===void 0?null:new ee(o,h,w)}var Le={latLngToPoint:function(o,h){var w=this.projection.project(o),A=this.scale(h);return this.transformation._transform(w,A)},pointToLatLng:function(o,h){var w=this.scale(h),A=this.transformation.untransform(o,w);return this.projection.unproject(A)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var h=this.projection.bounds,w=this.scale(o),A=this.transformation.transform(h.min,w),N=this.transformation.transform(h.max,w);return new ge(A,N)},infinite:!1,wrapLatLng:function(o){var h=this.wrapLng?C(o.lng,this.wrapLng,!0):o.lng,w=this.wrapLat?C(o.lat,this.wrapLat,!0):o.lat,A=o.alt;return new ee(w,h,A)},wrapLatLngBounds:function(o){var h=o.getCenter(),w=this.wrapLatLng(h),A=h.lat-w.lat,N=h.lng-w.lng;if(A===0&&N===0)return o;var V=o.getSouthWest(),$=o.getNorthEast(),ue=new ee(V.lat-A,V.lng-N),pe=new ee($.lat-A,$.lng-N);return new qe(ue,pe)}},at=a({},Le,{wrapLng:[-180,180],R:6371e3,distance:function(o,h){var w=Math.PI/180,A=o.lat*w,N=h.lat*w,V=Math.sin((h.lat-o.lat)*w/2),$=Math.sin((h.lng-o.lng)*w/2),ue=V*V+Math.cos(A)*Math.cos(N)*$*$,pe=2*Math.atan2(Math.sqrt(ue),Math.sqrt(1-ue));return this.R*pe}}),Nt=6378137,tt={R:Nt,MAX_LATITUDE:85.0511287798,project:function(o){var h=Math.PI/180,w=this.MAX_LATITUDE,A=Math.max(Math.min(w,o.lat),-w),N=Math.sin(A*h);return new ne(this.R*o.lng*h,this.R*Math.log((1+N)/(1-N))/2)},unproject:function(o){var h=180/Math.PI;return new ee((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*h,o.x*h/this.R)},bounds:function(){var o=Nt*Math.PI;return new ge([-o,-o],[o,o])}()};function ot(o,h,w,A){if(k(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=h,this._c=w,this._d=A}ot.prototype={transform:function(o,h){return this._transform(o.clone(),h)},_transform:function(o,h){return h=h||1,o.x=h*(this._a*o.x+this._b),o.y=h*(this._c*o.y+this._d),o},untransform:function(o,h){return h=h||1,new ne((o.x/h-this._b)/this._a,(o.y/h-this._d)/this._c)}};function yt(o,h,w,A){return new ot(o,h,w,A)}var Ze=a({},at,{code:"EPSG:3857",projection:tt,transformation:function(){var o=.5/(Math.PI*tt.R);return yt(o,.5,-o,.5)}()}),Ht=a({},Ze,{code:"EPSG:900913"});function Rt(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Wt(o,h){var w="",A,N,V,$,ue,pe;for(A=0,V=o.length;A<V;A++){for(ue=o[A],N=0,$=ue.length;N<$;N++)pe=ue[N],w+=(N?"L":"M")+pe.x+" "+pe.y;w+=h?Ve.svg?"z":"x":""}return w||"M0 0"}var dt=document.documentElement.style,gt="ActiveXObject"in window,nt=gt&&!document.addEventListener,Qt="msLaunchUri"in navigator&&!("documentMode"in document),Re=It("webkit"),rr=It("android"),rs=It("android 2")||It("android 3"),gr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),zi=rr&&It("Google")&&gr<537&&!("AudioNode"in window),K=!!window.opera,Oe=!Qt&&It("chrome"),Je=It("gecko")&&!Re&&!K&&!gt,Ue=!Oe&&It("safari"),Fe=It("phantom"),ut="OTransition"in dt,Ot=navigator.platform.indexOf("Win")===0,He=gt&&"transition"in dt,_e="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rs,jt="MozPerspective"in dt,$e=!window.L_DISABLE_3D&&(He||_e||jt)&&!ut&&!Fe,xt=typeof orientation<"u"||It("mobile"),Cn=xt&&Re,pn=xt&&_e,Rn=!window.PointerEvent&&window.MSPointerEvent,St=!!(window.PointerEvent||Rn),xr="ontouchstart"in window||!!window.TouchEvent,is=!window.L_NO_TOUCH&&(xr||St),re=xt&&K,xe=xt&&Je,we=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Pe=function(){var o=!1;try{var h=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",b,h),window.removeEventListener("testPassiveEventSupport",b,h)}catch{}return o}(),Ke=function(){return!!document.createElement("canvas").getContext}(),wt=!!(document.createElementNS&&Rt("svg").createSVGRect),lt=!!wt&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ir=!wt&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var h=o.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),$t=navigator.platform.indexOf("Mac")===0,en=navigator.platform.indexOf("Linux")===0;function It(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Ve={ie:gt,ielt9:nt,edge:Qt,webkit:Re,android:rr,android23:rs,androidStock:zi,opera:K,chrome:Oe,gecko:Je,safari:Ue,phantom:Fe,opera12:ut,win:Ot,ie3d:He,webkit3d:_e,gecko3d:jt,any3d:$e,mobile:xt,mobileWebkit:Cn,mobileWebkit3d:pn,msPointer:Rn,pointer:St,touch:is,touchNative:xr,mobileOpera:re,mobileGecko:xe,retina:we,passiveEvents:Pe,canvas:Ke,svg:wt,vml:ir,inlineSvg:lt,mac:$t,linux:en},Yt=Ve.msPointer?"MSPointerDown":"pointerdown",je=Ve.msPointer?"MSPointerMove":"pointermove",ss=Ve.msPointer?"MSPointerUp":"pointerup",_a=Ve.msPointer?"MSPointerCancel":"pointercancel",Zn={touchstart:Yt,touchmove:je,touchend:ss,touchcancel:_a},os={touchstart:Ui,touchmove:Oo,touchend:Oo,touchcancel:Oo},bi={},Ro=!1;function ni(o,h,w){return h==="touchstart"&&rn(),os[h]?(w=os[h].bind(this,w),o.addEventListener(Zn[h],w,!1),w):(console.warn("wrong event specified:",h),b)}function zh(o,h,w){if(!Zn[h]){console.warn("wrong event specified:",h);return}o.removeEventListener(Zn[h],w,!1)}function Uh(o){bi[o.pointerId]=o}function ri(o){bi[o.pointerId]&&(bi[o.pointerId]=o)}function Gn(o){delete bi[o.pointerId]}function rn(){Ro||(document.addEventListener(Yt,Uh,!0),document.addEventListener(je,ri,!0),document.addEventListener(ss,Gn,!0),document.addEventListener(_a,Gn,!0),Ro=!0)}function Oo(o,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var w in bi)h.touches.push(bi[w]);h.changedTouches=[h],o(h)}}function Ui(o,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&Fn(h),Oo(o,h)}function _l(o){var h={},w,A;for(A in o)w=o[A],h[A]=w&&w.bind?w.bind(o):w;return o=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var be=200;function Vh(o,h){o.addEventListener("dblclick",h);var w=0,A;function N(V){if(V.detail!==1){A=V.detail;return}if(!(V.pointerType==="mouse"||V.sourceCapabilities&&!V.sourceCapabilities.firesTouchEvents)){var $=Ds(V);if(!($.some(function(pe){return pe instanceof HTMLLabelElement&&pe.attributes.for})&&!$.some(function(pe){return pe instanceof HTMLInputElement||pe instanceof HTMLSelectElement}))){var ue=Date.now();ue-w<=be?(A++,A===2&&h(_l(V))):A=1,w=ue}}}return o.addEventListener("click",N),{dblclick:h,simDblclick:N}}function mn(o,h){o.removeEventListener("dblclick",h.dblclick),o.removeEventListener("click",h.simDblclick)}var Vi=ce(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Lo=ce(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ft=Lo==="webkitTransition"||Lo==="OTransition"?Lo+"End":"transitionend";function Bt(o){return typeof o=="string"?document.getElementById(o):o}function Ct(o,h){var w=o.style[h]||o.currentStyle&&o.currentStyle[h];if((!w||w==="auto")&&document.defaultView){var A=document.defaultView.getComputedStyle(o,null);w=A?A[h]:null}return w==="auto"?null:w}function Lt(o,h,w){var A=document.createElement(o);return A.className=h||"",w&&w.appendChild(A),A}function tn(o){var h=o.parentNode;h&&h.removeChild(o)}function Ps(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function sn(o){var h=o.parentNode;h&&h.lastChild!==o&&h.appendChild(o)}function yr(o){var h=o.parentNode;h&&h.firstChild!==o&&h.insertBefore(o,h.firstChild)}function bl(o,h){if(o.classList!==void 0)return o.classList.contains(h);var w=Ci(o);return w.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(w)}function Qe(o,h){if(o.classList!==void 0)for(var w=F(h),A=0,N=w.length;A<N;A++)o.classList.add(w[A]);else if(!bl(o,h)){var V=Ci(o);Cl(o,(V?V+" ":"")+h)}}function Zt(o,h){o.classList!==void 0?o.classList.remove(h):Cl(o,I((" "+Ci(o)+" ").replace(" "+h+" "," ")))}function Cl(o,h){o.className.baseVal===void 0?o.className=h:o.className.baseVal=h}function Ci(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function At(o,h){"opacity"in o.style?o.style.opacity=h:"filter"in o.style&&Yn(o,h)}function Yn(o,h){var w=!1,A="DXImageTransform.Microsoft.Alpha";try{w=o.filters.item(A)}catch{if(h===1)return}h=Math.round(h*100),w?(w.Enabled=h!==100,w.Opacity=h):o.style.filter+=" progid:"+A+"(opacity="+h+")"}function ce(o){for(var h=document.documentElement.style,w=0;w<o.length;w++)if(o[w]in h)return o[w];return!1}function Z(o,h,w){var A=h||new ne(0,0);o.style[Vi]=(Ve.ie3d?"translate("+A.x+"px,"+A.y+"px)":"translate3d("+A.x+"px,"+A.y+"px,0)")+(w?" scale("+w+")":"")}function Be(o,h){o._leaflet_pos=h,Ve.any3d?Z(o,h):(o.style.left=h.x+"px",o.style.top=h.y+"px")}function on(o){return o._leaflet_pos||new ne(0,0)}var Xn,Po,Do;if("onselectstart"in document)Xn=function(){pt(window,"selectstart",Fn)},Po=function(){ze(window,"selectstart",Fn)};else{var qn=ce(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Xn=function(){if(qn){var o=document.documentElement.style;Do=o[qn],o[qn]="none"}},Po=function(){qn&&(document.documentElement.style[qn]=Do,Do=void 0)}}function it(){pt(window,"dragstart",Fn)}function nn(){ze(window,"dragstart",Fn)}var jo,Sl;function Bo(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(as(),jo=o,Sl=o.style.outlineStyle,o.style.outlineStyle="none",pt(window,"keydown",as))}function as(){jo&&(jo.style.outlineStyle=Sl,jo=void 0,Sl=void 0,ze(window,"keydown",as))}function ba(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function Al(o){var h=o.getBoundingClientRect();return{x:h.width/o.offsetWidth||1,y:h.height/o.offsetHeight||1,boundingClientRect:h}}var On={__proto__:null,TRANSFORM:Vi,TRANSITION:Lo,TRANSITION_END:Ft,get:Bt,getStyle:Ct,create:Lt,remove:tn,empty:Ps,toFront:sn,toBack:yr,hasClass:bl,addClass:Qe,removeClass:Zt,setClass:Cl,getClass:Ci,setOpacity:At,testProp:ce,setTransform:Z,setPosition:Be,getPosition:on,get disableTextSelection(){return Xn},get enableTextSelection(){return Po},disableImageDrag:it,enableImageDrag:nn,preventOutline:Bo,restoreOutline:as,getSizedParentNode:ba,getScale:Al};function pt(o,h,w,A){if(h&&typeof h=="object")for(var N in h)En(o,N,h[N],w);else{h=F(h);for(var V=0,$=h.length;V<$;V++)En(o,h[V],w,A)}return this}var Bn="_leaflet_events";function ze(o,h,w,A){if(arguments.length===1)au(o),delete o[Bn];else if(h&&typeof h=="object")for(var N in h)El(o,N,h[N],w);else if(h=F(h),arguments.length===2)au(o,function(ue){return W(h,ue)!==-1});else for(var V=0,$=h.length;V<$;V++)El(o,h[V],w,A);return this}function au(o,h){for(var w in o[Bn]){var A=w.split(/\d/)[0];(!h||h(A))&&El(o,A,null,null,w)}}var vt={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function En(o,h,w,A){var N=h+v(w)+(A?"_"+v(A):"");if(o[Bn]&&o[Bn][N])return this;var V=function(ue){return w.call(A||o,ue||window.event)},$=V;!Ve.touchNative&&Ve.pointer&&h.indexOf("touch")===0?V=ni(o,h,V):Ve.touch&&h==="dblclick"?V=Vh(o,V):"addEventListener"in o?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?o.addEventListener(vt[h]||h,V,Ve.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(V=function(ue){ue=ue||window.event,ls(o,ue)&&$(ue)},o.addEventListener(vt[h],V,!1)):o.addEventListener(h,$,!1):o.attachEvent("on"+h,V),o[Bn]=o[Bn]||{},o[Bn][N]=V}function El(o,h,w,A,N){N=N||h+v(w)+(A?"_"+v(A):"");var V=o[Bn]&&o[Bn][N];if(!V)return this;!Ve.touchNative&&Ve.pointer&&h.indexOf("touch")===0?zh(o,h,V):Ve.touch&&h==="dblclick"?mn(o,V):"removeEventListener"in o?o.removeEventListener(vt[h]||h,V,!1):o.detachEvent("on"+h,V),o[Bn][N]=null}function Si(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Ca(o){return En(o,"wheel",Si),this}function Ur(o){return pt(o,"mousedown touchstart dblclick contextmenu",Si),o._leaflet_disable_click=!0,this}function Fn(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function Vr(o){return Fn(o),Si(o),this}function Ds(o){if(o.composedPath)return o.composedPath();for(var h=[],w=o.target;w;)h.push(w),w=w.parentNode;return h}function js(o,h){if(!h)return new ne(o.clientX,o.clientY);var w=Al(h),A=w.boundingClientRect;return new ne((o.clientX-A.left)/w.x-h.clientLeft,(o.clientY-A.top)/w.y-h.clientTop)}var lu=Ve.linux&&Ve.chrome?window.devicePixelRatio:Ve.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Bs(o){return Ve.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/lu:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function ls(o,h){var w=h.relatedTarget;if(!w)return!0;try{for(;w&&w!==o;)w=w.parentNode}catch{return!1}return w!==o}var sr={__proto__:null,on:pt,off:ze,stopPropagation:Si,disableScrollPropagation:Ca,disableClickPropagation:Ur,preventDefault:Fn,stop:Vr,getPropagationPath:Ds,getMousePosition:js,getWheelDelta:Bs,isExternalTarget:ls,addListener:pt,removeListener:ze},Nl=ke.extend({run:function(o,h,w,A){this.stop(),this._el=o,this._inProgress=!0,this._duration=w||.25,this._easeOutPower=1/Math.max(A||.5,.2),this._startPos=on(o),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ie(this._animate,this),this._step()},_step:function(o){var h=+new Date-this._startTime,w=this._duration*1e3;h<w?this._runFrame(this._easeOut(h/w),o):(this._runFrame(1),this._complete())},_runFrame:function(o,h){var w=this._startPos.add(this._offset.multiplyBy(o));h&&w._round(),Be(this._el,w),this.fire("step")},_complete:function(){se(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),kt=ke.extend({options:{crs:Ze,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,h){h=R(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(oe(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Lo&&Ve.any3d&&!Ve.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),pt(this._proxy,Ft,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,h,w){if(h=h===void 0?this._zoom:this._limitZoom(h),o=this._limitCenter(oe(o),h,this.options.maxBounds),w=w||{},this._stop(),this._loaded&&!w.reset&&w!==!0){w.animate!==void 0&&(w.zoom=a({animate:w.animate},w.zoom),w.pan=a({animate:w.animate,duration:w.duration},w.pan));var A=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,h,w.zoom):this._tryAnimatedPan(o,w.pan);if(A)return clearTimeout(this._sizeTimer),this}return this._resetView(o,h,w.pan&&w.pan.noMoveStart),this},setZoom:function(o,h){return this._loaded?this.setView(this.getCenter(),o,{zoom:h}):(this._zoom=o,this)},zoomIn:function(o,h){return o=o||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,h)},zoomOut:function(o,h){return o=o||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,h)},setZoomAround:function(o,h,w){var A=this.getZoomScale(h),N=this.getSize().divideBy(2),V=o instanceof ne?o:this.latLngToContainerPoint(o),$=V.subtract(N).multiplyBy(1-1/A),ue=this.containerPointToLatLng(N.add($));return this.setView(ue,h,{zoom:w})},_getBoundsCenterZoom:function(o,h){h=h||{},o=o.getBounds?o.getBounds():De(o);var w=ye(h.paddingTopLeft||h.padding||[0,0]),A=ye(h.paddingBottomRight||h.padding||[0,0]),N=this.getBoundsZoom(o,!1,w.add(A));if(N=typeof h.maxZoom=="number"?Math.min(h.maxZoom,N):N,N===1/0)return{center:o.getCenter(),zoom:N};var V=A.subtract(w).divideBy(2),$=this.project(o.getSouthWest(),N),ue=this.project(o.getNorthEast(),N),pe=this.unproject($.add(ue).divideBy(2).add(V),N);return{center:pe,zoom:N}},fitBounds:function(o,h){if(o=De(o),!o.isValid())throw new Error("Bounds are not valid.");var w=this._getBoundsCenterZoom(o,h);return this.setView(w.center,w.zoom,h)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,h){return this.setView(o,this._zoom,{pan:h})},panBy:function(o,h){if(o=ye(o).round(),h=h||{},!o.x&&!o.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Nl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){Qe(this._mapPane,"leaflet-pan-anim");var w=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,w,h.duration||.25,h.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,h,w){if(w=w||{},w.animate===!1||!Ve.any3d)return this.setView(o,h,w);this._stop();var A=this.project(this.getCenter()),N=this.project(o),V=this.getSize(),$=this._zoom;o=oe(o),h=h===void 0?$:h;var ue=Math.max(V.x,V.y),pe=ue*this.getZoomScale($,h),Ce=N.distanceTo(A)||1,We=1.42,ht=We*We;function Tt(Pn){var gu=Pn?-1:1,FC=Pn?pe:ue,zC=pe*pe-ue*ue+gu*ht*ht*Ce*Ce,UC=2*FC*ht*Ce,qh=zC/UC,km=Math.sqrt(qh*qh+1)-qh,VC=km<1e-9?-18:Math.log(km);return VC}function br(Pn){return(Math.exp(Pn)-Math.exp(-Pn))/2}function Kn(Pn){return(Math.exp(Pn)+Math.exp(-Pn))/2}function ci(Pn){return br(Pn)/Kn(Pn)}var Mr=Tt(0);function Ta(Pn){return ue*(Kn(Mr)/Kn(Mr+We*Pn))}function PC(Pn){return ue*(Kn(Mr)*ci(Mr+We*Pn)-br(Mr))/ht}function DC(Pn){return 1-Math.pow(1-Pn,1.5)}var jC=Date.now(),Tm=(Tt(1)-Mr)/We,BC=w.duration?1e3*w.duration:1e3*Tm*.8;function Im(){var Pn=(Date.now()-jC)/BC,gu=DC(Pn)*Tm;Pn<=1?(this._flyToFrame=ie(Im,this),this._move(this.unproject(A.add(N.subtract(A).multiplyBy(PC(gu)/Ce)),$),this.getScaleZoom(ue/Ta(gu),$),{flyTo:!0})):this._move(o,h)._moveEnd(!0)}return this._moveStart(!0,w.noMoveStart),Im.call(this),this},flyToBounds:function(o,h){var w=this._getBoundsCenterZoom(o,h);return this.flyTo(w.center,w.zoom,h)},setMaxBounds:function(o){return o=De(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var h=this.options.minZoom;return this.options.minZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var h=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,h){this._enforcingBounds=!0;var w=this.getCenter(),A=this._limitCenter(w,this._zoom,De(o));return w.equals(A)||this.panTo(A,h),this._enforcingBounds=!1,this},panInside:function(o,h){h=h||{};var w=ye(h.paddingTopLeft||h.padding||[0,0]),A=ye(h.paddingBottomRight||h.padding||[0,0]),N=this.project(this.getCenter()),V=this.project(o),$=this.getPixelBounds(),ue=Me([$.min.add(w),$.max.subtract(A)]),pe=ue.getSize();if(!ue.contains(V)){this._enforcingBounds=!0;var Ce=V.subtract(ue.getCenter()),We=ue.extend(V).getSize().subtract(pe);N.x+=Ce.x<0?-We.x:We.x,N.y+=Ce.y<0?-We.y:We.y,this.panTo(this.unproject(N),h),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=a({animate:!1,pan:!0},o===!0?{animate:!0}:o);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var w=this.getSize(),A=h.divideBy(2).round(),N=w.divideBy(2).round(),V=A.subtract(N);return!V.x&&!V.y?this:(o.animate&&o.pan?this.panBy(V):(o.pan&&this._rawPanBy(V),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:w}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=a({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=f(this._handleGeolocationResponse,this),w=f(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,w,o):navigator.geolocation.getCurrentPosition(h,w,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var h=o.code,w=o.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+w+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var h=o.coords.latitude,w=o.coords.longitude,A=new ee(h,w),N=A.toBounds(o.coords.accuracy*2),V=this._locateOptions;if(V.setView){var $=this.getBoundsZoom(N);this.setView(A,V.maxZoom?Math.min($,V.maxZoom):$)}var ue={latlng:A,bounds:N,timestamp:o.timestamp};for(var pe in o.coords)typeof o.coords[pe]=="number"&&(ue[pe]=o.coords[pe]);this.fire("locationfound",ue)}},addHandler:function(o,h){if(!h)return this;var w=this[o]=new h(this);return this._handlers.push(w),this.options[o]&&w.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),tn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(se(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)tn(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,h){var w="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),A=Lt("div",w,h||this._mapPane);return o&&(this._panes[o]=A),A},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),h=this.unproject(o.getBottomLeft()),w=this.unproject(o.getTopRight());return new qe(h,w)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,h,w){o=De(o),w=ye(w||[0,0]);var A=this.getZoom()||0,N=this.getMinZoom(),V=this.getMaxZoom(),$=o.getNorthWest(),ue=o.getSouthEast(),pe=this.getSize().subtract(w),Ce=Me(this.project(ue,A),this.project($,A)).getSize(),We=Ve.any3d?this.options.zoomSnap:1,ht=pe.x/Ce.x,Tt=pe.y/Ce.y,br=h?Math.max(ht,Tt):Math.min(ht,Tt);return A=this.getScaleZoom(br,A),We&&(A=Math.round(A/(We/100))*(We/100),A=h?Math.ceil(A/We)*We:Math.floor(A/We)*We),Math.max(N,Math.min(V,A))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ne(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,h){var w=this._getTopLeftPoint(o,h);return new ge(w,w.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,h){var w=this.options.crs;return h=h===void 0?this._zoom:h,w.scale(o)/w.scale(h)},getScaleZoom:function(o,h){var w=this.options.crs;h=h===void 0?this._zoom:h;var A=w.zoom(o*w.scale(h));return isNaN(A)?1/0:A},project:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(oe(o),h)},unproject:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(ye(o),h)},layerPointToLatLng:function(o){var h=ye(o).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(o){var h=this.project(oe(o))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(oe(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(De(o))},distance:function(o,h){return this.options.crs.distance(oe(o),oe(h))},containerPointToLayerPoint:function(o){return ye(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return ye(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var h=this.containerPointToLayerPoint(ye(o));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(oe(o)))},mouseEventToContainerPoint:function(o){return js(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var h=this._container=Bt(o);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");pt(h,"scroll",this._onScroll,this),this._containerId=v(h)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ve.any3d,Qe(o,"leaflet-container"+(Ve.touch?" leaflet-touch":"")+(Ve.retina?" leaflet-retina":"")+(Ve.ielt9?" leaflet-oldie":"")+(Ve.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=Ct(o,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Be(this._mapPane,new ne(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Qe(o.markerPane,"leaflet-zoom-hide"),Qe(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,h,w){Be(this._mapPane,new ne(0,0));var A=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var N=this._zoom!==h;this._moveStart(N,w)._move(o,h)._moveEnd(N),this.fire("viewreset"),A&&this.fire("load")},_moveStart:function(o,h){return o&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(o,h,w,A){h===void 0&&(h=this._zoom);var N=this._zoom!==h;return this._zoom=h,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),A?w&&w.pinch&&this.fire("zoom",w):((N||w&&w.pinch)&&this.fire("zoom",w),this.fire("move",w)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return se(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){Be(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[v(this._container)]=this;var h=o?ze:pt;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),Ve.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){se(this._resizeRequest),this._resizeRequest=ie(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,h){for(var w=[],A,N=h==="mouseout"||h==="mouseover",V=o.target||o.srcElement,$=!1;V;){if(A=this._targets[v(V)],A&&(h==="click"||h==="preclick")&&this._draggableMoved(A)){$=!0;break}if(A&&A.listens(h,!0)&&(N&&!ls(V,o)||(w.push(A),N))||V===this._container)break;V=V.parentNode}return!w.length&&!$&&!N&&this.listens(h,!0)&&(w=[this]),w},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var h=o.target||o.srcElement;if(!(!this._loaded||h._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(h))){var w=o.type;w==="mousedown"&&Bo(h),this._fireDOMEvent(o,w)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,h,w){if(o.type==="click"){var A=a({},o);A.type="preclick",this._fireDOMEvent(A,A.type,w)}var N=this._findEventTargets(o,h);if(w){for(var V=[],$=0;$<w.length;$++)w[$].listens(h,!0)&&V.push(w[$]);N=V.concat(N)}if(N.length){h==="contextmenu"&&Fn(o);var ue=N[0],pe={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var Ce=ue.getLatLng&&(!ue._radius||ue._radius<=10);pe.containerPoint=Ce?this.latLngToContainerPoint(ue.getLatLng()):this.mouseEventToContainerPoint(o),pe.layerPoint=this.containerPointToLayerPoint(pe.containerPoint),pe.latlng=Ce?ue.getLatLng():this.layerPointToLatLng(pe.layerPoint)}for($=0;$<N.length;$++)if(N[$].fire(h,pe,!0),pe.originalEvent._stopped||N[$].options.bubblingMouseEvents===!1&&W(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,h=this._handlers.length;o<h;o++)this._handlers[o].disable()},whenReady:function(o,h){return this._loaded?o.call(h||this,{target:this}):this.on("load",o,h),this},_getMapPanePos:function(){return on(this._mapPane)||new ne(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,h){var w=o&&h!==void 0?this._getNewPixelOrigin(o,h):this.getPixelOrigin();return w.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,h){var w=this.getSize()._divideBy(2);return this.project(o,h)._subtract(w)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,h,w){var A=this._getNewPixelOrigin(w,h);return this.project(o,h)._subtract(A)},_latLngBoundsToNewLayerBounds:function(o,h,w){var A=this._getNewPixelOrigin(w,h);return Me([this.project(o.getSouthWest(),h)._subtract(A),this.project(o.getNorthWest(),h)._subtract(A),this.project(o.getSouthEast(),h)._subtract(A),this.project(o.getNorthEast(),h)._subtract(A)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,h,w){if(!w)return o;var A=this.project(o,h),N=this.getSize().divideBy(2),V=new ge(A.subtract(N),A.add(N)),$=this._getBoundsOffset(V,w,h);return Math.abs($.x)<=1&&Math.abs($.y)<=1?o:this.unproject(A.add($),h)},_limitOffset:function(o,h){if(!h)return o;var w=this.getPixelBounds(),A=new ge(w.min.add(o),w.max.add(o));return o.add(this._getBoundsOffset(A,h))},_getBoundsOffset:function(o,h,w){var A=Me(this.project(h.getNorthEast(),w),this.project(h.getSouthWest(),w)),N=A.min.subtract(o.min),V=A.max.subtract(o.max),$=this._rebound(N.x,-V.x),ue=this._rebound(N.y,-V.y);return new ne($,ue)},_rebound:function(o,h){return o+h>0?Math.round(o-h)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(h))},_limitZoom:function(o){var h=this.getMinZoom(),w=this.getMaxZoom(),A=Ve.any3d?this.options.zoomSnap:1;return A&&(o=Math.round(o/A)*A),Math.max(h,Math.min(w,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Zt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,h){var w=this._getCenterOffset(o)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(w)?!1:(this.panBy(w,h),!0)},_createAnimProxy:function(){var o=this._proxy=Lt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(h){var w=Vi,A=this._proxy.style[w];Z(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),A===this._proxy.style[w]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){tn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),h=this.getZoom();Z(this._proxy,this.project(o,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,h,w){if(this._animatingZoom)return!0;if(w=w||{},!this._zoomAnimated||w.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var A=this.getZoomScale(h),N=this._getCenterOffset(o)._divideBy(1-1/A);return w.animate!==!0&&!this.getSize().contains(N)?!1:(ie(function(){this._moveStart(!0,w.noMoveStart||!1)._animateZoom(o,h,!0)},this),!0)},_animateZoom:function(o,h,w,A){this._mapPane&&(w&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=h,Qe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:h,noUpdate:A}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Zt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function cu(o,h){return new kt(o,h)}var Hr=Ee.extend({options:{position:"topright"},initialize:function(o){R(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var h=this._map;return h&&h.removeControl(this),this.options.position=o,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var h=this._container=this.onAdd(o),w=this.getPosition(),A=o._controlCorners[w];return Qe(h,"leaflet-control"),w.indexOf("bottom")!==-1?A.insertBefore(h,A.firstChild):A.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(tn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),Fo=function(o){return new Hr(o)};kt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},h="leaflet-",w=this._controlContainer=Lt("div",h+"control-container",this._container);function A(N,V){var $=h+N+" "+h+V;o[N+V]=Lt("div",$,w)}A("top","left"),A("top","right"),A("bottom","left"),A("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)tn(this._controlCorners[o]);tn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var uu=Hr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,h,w,A){return w<A?-1:A<w?1:0}},initialize:function(o,h,w){R(this,w),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var A in o)this._addLayer(o[A],A);for(A in h)this._addLayer(h[A],A,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return Hr.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,h){return this._addLayer(o,h),this._map?this._update():this},addOverlay:function(o,h){return this._addLayer(o,h,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var h=this._getLayer(v(o));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){Qe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(Qe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Zt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Zt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",h=this._container=Lt("div",o),w=this.options.collapsed;h.setAttribute("aria-haspopup",!0),Ur(h),Ca(h);var A=this._section=Lt("section",o+"-list");w&&(this._map.on("click",this.collapse,this),pt(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var N=this._layersLink=Lt("a",o+"-toggle",h);N.href="#",N.title="Layers",N.setAttribute("role","button"),pt(N,{keydown:function(V){V.keyCode===13&&this._expandSafely()},click:function(V){Fn(V),this._expandSafely()}},this),w||this.expand(),this._baseLayersList=Lt("div",o+"-base",A),this._separator=Lt("div",o+"-separator",A),this._overlaysList=Lt("div",o+"-overlays",A),h.appendChild(A)},_getLayer:function(o){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&v(this._layers[h].layer)===o)return this._layers[h]},_addLayer:function(o,h,w){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:h,overlay:w}),this.options.sortLayers&&this._layers.sort(f(function(A,N){return this.options.sortFunction(A.layer,N.layer,A.name,N.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ps(this._baseLayersList),Ps(this._overlaysList),this._layerControlInputs=[];var o,h,w,A,N=0;for(w=0;w<this._layers.length;w++)A=this._layers[w],this._addItem(A),h=h||A.overlay,o=o||!A.overlay,N+=A.overlay?0:1;return this.options.hideSingleBase&&(o=o&&N>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=h&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var h=this._getLayer(v(o.target)),w=h.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;w&&this._map.fire(w,h)},_createRadioElement:function(o,h){var w='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(h?' checked="checked"':"")+"/>",A=document.createElement("div");return A.innerHTML=w,A.firstChild},_addItem:function(o){var h=document.createElement("label"),w=this._map.hasLayer(o.layer),A;o.overlay?(A=document.createElement("input"),A.type="checkbox",A.className="leaflet-control-layers-selector",A.defaultChecked=w):A=this._createRadioElement("leaflet-base-layers_"+v(this),w),this._layerControlInputs.push(A),A.layerId=v(o.layer),pt(A,"click",this._onInputClick,this);var N=document.createElement("span");N.innerHTML=" "+o.name;var V=document.createElement("span");h.appendChild(V),V.appendChild(A),V.appendChild(N);var $=o.overlay?this._overlaysList:this._baseLayersList;return $.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,h,w,A=[],N=[];this._handlingClick=!0;for(var V=o.length-1;V>=0;V--)h=o[V],w=this._getLayer(h.layerId).layer,h.checked?A.push(w):h.checked||N.push(w);for(V=0;V<N.length;V++)this._map.hasLayer(N[V])&&this._map.removeLayer(N[V]);for(V=0;V<A.length;V++)this._map.hasLayer(A[V])||this._map.addLayer(A[V]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,h,w,A=this._map.getZoom(),N=o.length-1;N>=0;N--)h=o[N],w=this._getLayer(h.layerId).layer,h.disabled=w.options.minZoom!==void 0&&A<w.options.minZoom||w.options.maxZoom!==void 0&&A>w.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,pt(o,"click",Fn),this.expand();var h=this;setTimeout(function(){ze(o,"click",Fn),h._preventClick=!1})}}),Gt=function(o,h,w){return new uu(o,h,w)},Sa=Hr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var h="leaflet-control-zoom",w=Lt("div",h+" leaflet-bar"),A=this.options;return this._zoomInButton=this._createButton(A.zoomInText,A.zoomInTitle,h+"-in",w,this._zoomIn),this._zoomOutButton=this._createButton(A.zoomOutText,A.zoomOutTitle,h+"-out",w,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),w},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,h,w,A,N){var V=Lt("a",w,A);return V.innerHTML=o,V.href="#",V.title=h,V.setAttribute("role","button"),V.setAttribute("aria-label",h),Ur(V),pt(V,"click",Vr),pt(V,"click",N,this),pt(V,"click",this._refocusOnMap,this),V},_updateDisabled:function(){var o=this._map,h="leaflet-disabled";Zt(this._zoomInButton,h),Zt(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(Qe(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(Qe(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});kt.mergeOptions({zoomControl:!0}),kt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Sa,this.addControl(this.zoomControl))});var Aa=function(o){return new Sa(o)},Ai=Hr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var h="leaflet-control-scale",w=Lt("div",h),A=this.options;return this._addScales(A,h+"-line",w),o.on(A.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),w},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,h,w){o.metric&&(this._mScale=Lt("div",h,w)),o.imperial&&(this._iScale=Lt("div",h,w))},_update:function(){var o=this._map,h=o.getSize().y/2,w=o.distance(o.containerPointToLatLng([0,h]),o.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(w)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var h=this._getRoundNum(o),w=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,w,h/o)},_updateImperial:function(o){var h=o*3.2808399,w,A,N;h>5280?(w=h/5280,A=this._getRoundNum(w),this._updateScale(this._iScale,A+" mi",A/w)):(N=this._getRoundNum(h),this._updateScale(this._iScale,N+" ft",N/h))},_updateScale:function(o,h,w){o.style.width=Math.round(this.options.maxWidth*w)+"px",o.innerHTML=h},_getRoundNum:function(o){var h=Math.pow(10,(Math.floor(o)+"").length-1),w=o/h;return w=w>=10?10:w>=5?5:w>=3?3:w>=2?2:1,h*w}}),Hh=function(o){return new Ai(o)},fe='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',bt=Hr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ve.inlineSvg?fe+" ":"")+"Leaflet</a>"},initialize:function(o){R(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Lt("div","leaflet-control-attribution"),Ur(this._container);for(var h in o._layers)o._layers[h].getAttribution&&this.addAttribution(o._layers[h].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var h in this._attributions)this._attributions[h]&&o.push(h);var w=[];this.options.prefix&&w.push(this.options.prefix),o.length&&w.push(o.join(", ")),this._container.innerHTML=w.join(' <span aria-hidden="true">|</span> ')}}});kt.mergeOptions({attributionControl:!0}),kt.addInitHook(function(){this.options.attributionControl&&new bt().addTo(this)});var zn=function(o){return new bt(o)};Hr.Layers=uu,Hr.Zoom=Sa,Hr.Scale=Ai,Hr.Attribution=bt,Fo.layers=Gt,Fo.zoom=Aa,Fo.scale=Hh,Fo.attribution=zn;var wr=Ee.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});wr.addTo=function(o,h){return o.addHandler(h,this),this};var du={Events:de},hu=Ve.touch?"touchstart mousedown":"mousedown",Hi=ke.extend({options:{clickTolerance:3},initialize:function(o,h,w,A){R(this,A),this._element=o,this._dragStartTarget=h||o,this._preventOutline=w},enable:function(){this._enabled||(pt(this._dragStartTarget,hu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Hi._dragging===this&&this.finishDrag(!0),ze(this._dragStartTarget,hu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!bl(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){Hi._dragging===this&&this.finishDrag();return}if(!(Hi._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(Hi._dragging=this,this._preventOutline&&Bo(this._element),it(),Xn(),!this._moving)){this.fire("down");var h=o.touches?o.touches[0]:o,w=ba(this._element);this._startPoint=new ne(h.clientX,h.clientY),this._startPos=on(this._element),this._parentScale=Al(w);var A=o.type==="mousedown";pt(document,A?"mousemove":"touchmove",this._onMove,this),pt(document,A?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var h=o.touches&&o.touches.length===1?o.touches[0]:o,w=new ne(h.clientX,h.clientY)._subtract(this._startPoint);!w.x&&!w.y||Math.abs(w.x)+Math.abs(w.y)<this.options.clickTolerance||(w.x/=this._parentScale.x,w.y/=this._parentScale.y,Fn(o),this._moved||(this.fire("dragstart"),this._moved=!0,Qe(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Qe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(w),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),Be(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Zt(document.body,"leaflet-dragging"),this._lastTarget&&(Zt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ze(document,"mousemove touchmove",this._onMove,this),ze(document,"mouseup touchend touchcancel",this._onUp,this),nn(),Po();var h=this._moved&&this._moving;this._moving=!1,Hi._dragging=!1,h&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function fu(o,h,w){var A,N=[1,4,2,8],V,$,ue,pe,Ce,We,ht,Tt;for(V=0,We=o.length;V<We;V++)o[V]._code=us(o[V],h);for(ue=0;ue<4;ue++){for(ht=N[ue],A=[],V=0,We=o.length,$=We-1;V<We;$=V++)pe=o[V],Ce=o[$],pe._code&ht?Ce._code&ht||(Tt=Ei(Ce,pe,ht,h,w),Tt._code=us(Tt,h),A.push(Tt)):(Ce._code&ht&&(Tt=Ei(Ce,pe,ht,h,w),Tt._code=us(Tt,h),A.push(Tt)),A.push(pe));o=A}return o}function Ea(o,h){var w,A,N,V,$,ue,pe,Ce,We;if(!o||o.length===0)throw new Error("latlngs not passed");vr(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var ht=oe([0,0]),Tt=De(o),br=Tt.getNorthWest().distanceTo(Tt.getSouthWest())*Tt.getNorthEast().distanceTo(Tt.getNorthWest());br<1700&&(ht=xn(o));var Kn=o.length,ci=[];for(w=0;w<Kn;w++){var Mr=oe(o[w]);ci.push(h.project(oe([Mr.lat-ht.lat,Mr.lng-ht.lng])))}for(ue=pe=Ce=0,w=0,A=Kn-1;w<Kn;A=w++)N=ci[w],V=ci[A],$=N.y*V.x-V.y*N.x,pe+=(N.x+V.x)*$,Ce+=(N.y+V.y)*$,ue+=$*3;ue===0?We=ci[0]:We=[pe/ue,Ce/ue];var Ta=h.unproject(ye(We));return oe([Ta.lat+ht.lat,Ta.lng+ht.lng])}function xn(o){for(var h=0,w=0,A=0,N=0;N<o.length;N++){var V=oe(o[N]);h+=V.lat,w+=V.lng,A++}return oe([h/A,w/A])}var Tl={__proto__:null,clipPolygon:fu,polygonCenter:Ea,centroid:xn};function cn(o,h){if(!h||!o.length)return o.slice();var w=h*h;return o=Wh(o,w),o=Xt(o,w),o}function zo(o,h,w){return Math.sqrt(ds(o,h,w,!0))}function cs(o,h,w){return ds(o,h,w)}function Xt(o,h){var w=o.length,A=typeof Uint8Array<"u"?Uint8Array:Array,N=new A(w);N[0]=N[w-1]=1,ct(o,N,h,0,w-1);var V,$=[];for(V=0;V<w;V++)N[V]&&$.push(o[V]);return $}function ct(o,h,w,A,N){var V=0,$,ue,pe;for(ue=A+1;ue<=N-1;ue++)pe=ds(o[ue],o[A],o[N],!0),pe>V&&($=ue,V=pe);V>w&&(h[$]=1,ct(o,h,w,A,$),ct(o,h,w,$,N))}function Wh(o,h){for(var w=[o[0]],A=1,N=0,V=o.length;A<V;A++)ii(o[A],o[N])>h&&(w.push(o[A]),N=A);return N<V-1&&w.push(o[V-1]),w}var Jt;function Wi(o,h,w,A,N){var V=A?Jt:us(o,w),$=us(h,w),ue,pe,Ce;for(Jt=$;;){if(!(V|$))return[o,h];if(V&$)return!1;ue=V||$,pe=Ei(o,h,ue,w,N),Ce=us(pe,w),ue===V?(o=pe,V=Ce):(h=pe,$=Ce)}}function Ei(o,h,w,A,N){var V=h.x-o.x,$=h.y-o.y,ue=A.min,pe=A.max,Ce,We;return w&8?(Ce=o.x+V*(pe.y-o.y)/$,We=pe.y):w&4?(Ce=o.x+V*(ue.y-o.y)/$,We=ue.y):w&2?(Ce=pe.x,We=o.y+$*(pe.x-o.x)/V):w&1&&(Ce=ue.x,We=o.y+$*(ue.x-o.x)/V),new ne(Ce,We,N)}function us(o,h){var w=0;return o.x<h.min.x?w|=1:o.x>h.max.x&&(w|=2),o.y<h.min.y?w|=4:o.y>h.max.y&&(w|=8),w}function ii(o,h){var w=h.x-o.x,A=h.y-o.y;return w*w+A*A}function ds(o,h,w,A){var N=h.x,V=h.y,$=w.x-N,ue=w.y-V,pe=$*$+ue*ue,Ce;return pe>0&&(Ce=((o.x-N)*$+(o.y-V)*ue)/pe,Ce>1?(N=w.x,V=w.y):Ce>0&&(N+=$*Ce,V+=ue*Ce)),$=o.x-N,ue=o.y-V,A?$*$+ue*ue:new ne(N,V)}function vr(o){return!k(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function Na(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),vr(o)}function Il(o,h){var w,A,N,V,$,ue,pe,Ce;if(!o||o.length===0)throw new Error("latlngs not passed");vr(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var We=oe([0,0]),ht=De(o),Tt=ht.getNorthWest().distanceTo(ht.getSouthWest())*ht.getNorthEast().distanceTo(ht.getNorthWest());Tt<1700&&(We=xn(o));var br=o.length,Kn=[];for(w=0;w<br;w++){var ci=oe(o[w]);Kn.push(h.project(oe([ci.lat-We.lat,ci.lng-We.lng])))}for(w=0,A=0;w<br-1;w++)A+=Kn[w].distanceTo(Kn[w+1])/2;if(A===0)Ce=Kn[0];else for(w=0,V=0;w<br-1;w++)if($=Kn[w],ue=Kn[w+1],N=$.distanceTo(ue),V+=N,V>A){pe=(V-A)/N,Ce=[ue.x-pe*(ue.x-$.x),ue.y-pe*(ue.y-$.y)];break}var Mr=h.unproject(ye(Ce));return oe([Mr.lat+We.lat,Mr.lng+We.lng])}var pu={__proto__:null,simplify:cn,pointToSegmentDistance:zo,closestPointOnSegment:cs,clipSegment:Wi,_getEdgeIntersection:Ei,_getBitCode:us,_sqClosestPointOnSegment:ds,isFlat:vr,_flat:Na,polylineCenter:Il},kl={project:function(o){return new ne(o.lng,o.lat)},unproject:function(o){return new ee(o.y,o.x)},bounds:new ge([-180,-90],[180,90])},Zi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ge([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var h=Math.PI/180,w=this.R,A=o.lat*h,N=this.R_MINOR/w,V=Math.sqrt(1-N*N),$=V*Math.sin(A),ue=Math.tan(Math.PI/4-A/2)/Math.pow((1-$)/(1+$),V/2);return A=-w*Math.log(Math.max(ue,1e-10)),new ne(o.lng*h*w,A)},unproject:function(o){for(var h=180/Math.PI,w=this.R,A=this.R_MINOR/w,N=Math.sqrt(1-A*A),V=Math.exp(-o.y/w),$=Math.PI/2-2*Math.atan(V),ue=0,pe=.1,Ce;ue<15&&Math.abs(pe)>1e-7;ue++)Ce=N*Math.sin($),Ce=Math.pow((1-Ce)/(1+Ce),N/2),pe=Math.PI/2-2*Math.atan(V*Ce)-$,$+=pe;return new ee($*h,o.x*h/w)}},Ml={__proto__:null,LonLat:kl,Mercator:Zi,SphericalMercator:tt},Zh=a({},at,{code:"EPSG:3395",projection:Zi,transformation:function(){var o=.5/(Math.PI*Zi.R);return yt(o,.5,-o,.5)}()}),Fs=a({},at,{code:"EPSG:4326",projection:kl,transformation:yt(1/180,1,-1/180,.5)}),Gh=a({},Le,{projection:kl,transformation:yt(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,h){var w=h.lng-o.lng,A=h.lat-o.lat;return Math.sqrt(w*w+A*A)},infinite:!0});Le.Earth=at,Le.EPSG3395=Zh,Le.EPSG3857=Ze,Le.EPSG900913=Ht,Le.EPSG4326=Fs,Le.Simple=Gh;var Ln=ke.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[v(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[v(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var h=o.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var w=this.getEvents();h.on(w,this),this.once("remove",function(){h.off(w,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});kt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var h=v(o);return this._layers[h]?this:(this._layers[h]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var h=v(o);return this._layers[h]?(this._loaded&&o.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return v(o)in this._layers},eachLayer:function(o,h){for(var w in this._layers)o.call(h,this._layers[w]);return this},_addLayers:function(o){o=o?k(o)?o:[o]:[];for(var h=0,w=o.length;h<w;h++)this.addLayer(o[h])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[v(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var h=v(o);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,h=-1/0,w=this._getZoomSpan();for(var A in this._zoomBoundLayers){var N=this._zoomBoundLayers[A].options;o=N.minZoom===void 0?o:Math.min(o,N.minZoom),h=N.maxZoom===void 0?h:Math.max(h,N.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=o===1/0?void 0:o,w!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ni=Ln.extend({initialize:function(o,h){R(this,h),this._layers={};var w,A;if(o)for(w=0,A=o.length;w<A;w++)this.addLayer(o[w])},addLayer:function(o){var h=this.getLayerId(o);return this._layers[h]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var h=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(o){var h=typeof o=="number"?o:this.getLayerId(o);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var h=Array.prototype.slice.call(arguments,1),w,A;for(w in this._layers)A=this._layers[w],A[o]&&A[o].apply(A,h);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,h){for(var w in this._layers)o.call(h,this._layers[w]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return v(o)}}),kr=function(o,h){return new Ni(o,h)},si=Ni.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),Ni.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),Ni.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new qe;for(var h in this._layers){var w=this._layers[h];o.extend(w.getBounds?w.getBounds():w.getLatLng())}return o}}),oi=function(o,h){return new si(o,h)},zs=Ee.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){R(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,h){var w=this._getIconUrl(o);if(!w){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var A=this._createImg(w,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(A,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(A.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),A},_setIconStyles:function(o,h){var w=this.options,A=w[h+"Size"];typeof A=="number"&&(A=[A,A]);var N=ye(A),V=ye(h==="shadow"&&w.shadowAnchor||w.iconAnchor||N&&N.divideBy(2,!0));o.className="leaflet-marker-"+h+" "+(w.className||""),V&&(o.style.marginLeft=-V.x+"px",o.style.marginTop=-V.y+"px"),N&&(o.style.width=N.x+"px",o.style.height=N.y+"px")},_createImg:function(o,h){return h=h||document.createElement("img"),h.src=o,h},_getIconUrl:function(o){return Ve.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function Rl(o){return new zs(o)}var Uo=zs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof Uo.imagePath!="string"&&(Uo.imagePath=this._detectIconPath()),(this.options.imagePath||Uo.imagePath)+zs.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var h=function(w,A,N){var V=A.exec(w);return V&&V[N]};return o=h(o,/^url\((['"])?(.+)\1\)$/,2),o&&h(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Lt("div","leaflet-default-icon-path",document.body),h=Ct(o,"background-image")||Ct(o,"backgroundImage");if(document.body.removeChild(o),h=this._stripUrl(h),h)return h;var w=document.querySelector('link[href$="leaflet.css"]');return w?w.href.substring(0,w.href.length-11-1):""}}),Ol=wr.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new Hi(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Qe(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Zt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var h=this._marker,w=h._map,A=this._marker.options.autoPanSpeed,N=this._marker.options.autoPanPadding,V=on(h._icon),$=w.getPixelBounds(),ue=w.getPixelOrigin(),pe=Me($.min._subtract(ue).add(N),$.max._subtract(ue).subtract(N));if(!pe.contains(V)){var Ce=ye((Math.max(pe.max.x,V.x)-pe.max.x)/($.max.x-pe.max.x)-(Math.min(pe.min.x,V.x)-pe.min.x)/($.min.x-pe.min.x),(Math.max(pe.max.y,V.y)-pe.max.y)/($.max.y-pe.max.y)-(Math.min(pe.min.y,V.y)-pe.min.y)/($.min.y-pe.min.y)).multiplyBy(A);w.panBy(Ce,{animate:!1}),this._draggable._newPos._add(Ce),this._draggable._startPos._add(Ce),Be(h._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=ie(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(se(this._panRequest),this._panRequest=ie(this._adjustPan.bind(this,o)))},_onDrag:function(o){var h=this._marker,w=h._shadow,A=on(h._icon),N=h._map.layerPointToLatLng(A);w&&Be(w,A),h._latlng=N,o.latlng=N,o.oldLatLng=this._oldLatLng,h.fire("move",o).fire("drag",o)},_onDragEnd:function(o){se(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),_r=Ln.extend({options:{icon:new Uo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,h){R(this,h),this._latlng=oe(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var h=this._latlng;return this._latlng=oe(o),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),w=o.icon.createIcon(this._icon),A=!1;w!==this._icon&&(this._icon&&this._removeIcon(),A=!0,o.title&&(w.title=o.title),w.tagName==="IMG"&&(w.alt=o.alt||"")),Qe(w,h),o.keyboard&&(w.tabIndex="0",w.setAttribute("role","button")),this._icon=w,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&pt(w,"focus",this._panOnFocus,this);var N=o.icon.createShadow(this._shadow),V=!1;N!==this._shadow&&(this._removeShadow(),V=!0),N&&(Qe(N,h),N.alt=""),this._shadow=N,o.opacity<1&&this._updateOpacity(),A&&this.getPane().appendChild(this._icon),this._initInteraction(),N&&V&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ze(this._icon,"focus",this._panOnFocus,this),tn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&tn(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&Be(this._icon,o),this._shadow&&Be(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(Qe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ol)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ol(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&At(this._icon,o),this._shadow&&At(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var h=this.options.icon.options,w=h.iconSize?ye(h.iconSize):ye(0,0),A=h.iconAnchor?ye(h.iconAnchor):ye(0,0);o.panInside(this._latlng,{paddingTopLeft:A,paddingBottomRight:w.subtract(A)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Yh(o,h){return new _r(o,h)}var ai=Ln.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return R(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Gi=ai.extend({options:{fill:!0,radius:10},initialize:function(o,h){R(this,h),this._latlng=oe(o),this._radius=this.options.radius},setLatLng:function(o){var h=this._latlng;return this._latlng=oe(o),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var h=o&&o.radius||this._radius;return ai.prototype.setStyle.call(this,o),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,h=this._radiusY||o,w=this._clickTolerance(),A=[o+w,h+w];this._pxBounds=new ge(this._point.subtract(A),this._point.add(A))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Pt(o,h){return new Gi(o,h)}var Us=Gi.extend({initialize:function(o,h,w){if(typeof h=="number"&&(h=a({},w,{radius:h})),R(this,h),this._latlng=oe(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new qe(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:ai.prototype.setStyle,_project:function(){var o=this._latlng.lng,h=this._latlng.lat,w=this._map,A=w.options.crs;if(A.distance===at.distance){var N=Math.PI/180,V=this._mRadius/at.R/N,$=w.project([h+V,o]),ue=w.project([h-V,o]),pe=$.add(ue).divideBy(2),Ce=w.unproject(pe).lat,We=Math.acos((Math.cos(V*N)-Math.sin(h*N)*Math.sin(Ce*N))/(Math.cos(h*N)*Math.cos(Ce*N)))/N;(isNaN(We)||We===0)&&(We=V/Math.cos(Math.PI/180*h)),this._point=pe.subtract(w.getPixelOrigin()),this._radius=isNaN(We)?0:pe.x-w.project([Ce,o-We]).x,this._radiusY=pe.y-$.y}else{var ht=A.unproject(A.project(this._latlng).subtract([this._mRadius,0]));this._point=w.latLngToLayerPoint(this._latlng),this._radius=this._point.x-w.latLngToLayerPoint(ht).x}this._updateBounds()}});function P(o,h,w){return new Us(o,h,w)}var r=ai.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,h){R(this,h),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var h=1/0,w=null,A=ds,N,V,$=0,ue=this._parts.length;$<ue;$++)for(var pe=this._parts[$],Ce=1,We=pe.length;Ce<We;Ce++){N=pe[Ce-1],V=pe[Ce];var ht=A(o,N,V,!0);ht<h&&(h=ht,w=A(o,N,V))}return w&&(w.distance=Math.sqrt(h)),w},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Il(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,h){return h=h||this._defaultShape(),o=oe(o),h.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new qe,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return vr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var h=[],w=vr(o),A=0,N=o.length;A<N;A++)w?(h[A]=oe(o[A]),this._bounds.extend(h[A])):h[A]=this._convertLatLngs(o[A]);return h},_project:function(){var o=new ge;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),h=new ne(o,o);this._rawPxBounds&&(this._pxBounds=new ge([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(o,h,w){var A=o[0]instanceof ee,N=o.length,V,$;if(A){for($=[],V=0;V<N;V++)$[V]=this._map.latLngToLayerPoint(o[V]),w.extend($[V]);h.push($)}else for(V=0;V<N;V++)this._projectLatlngs(o[V],h,w)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,w,A,N,V,$,ue,pe;for(w=0,N=0,V=this._rings.length;w<V;w++)for(pe=this._rings[w],A=0,$=pe.length;A<$-1;A++)ue=Wi(pe[A],pe[A+1],o,A,!0),ue&&(h[N]=h[N]||[],h[N].push(ue[0]),(ue[1]!==pe[A+1]||A===$-2)&&(h[N].push(ue[1]),N++))}},_simplifyPoints:function(){for(var o=this._parts,h=this.options.smoothFactor,w=0,A=o.length;w<A;w++)o[w]=cn(o[w],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,h){var w,A,N,V,$,ue,pe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(w=0,V=this._parts.length;w<V;w++)for(ue=this._parts[w],A=0,$=ue.length,N=$-1;A<$;N=A++)if(!(!h&&A===0)&&zo(o,ue[N],ue[A])<=pe)return!0;return!1}});function s(o,h){return new r(o,h)}r._flat=Na;var l=r.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ea(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var h=r.prototype._convertLatLngs.call(this,o),w=h.length;return w>=2&&h[0]instanceof ee&&h[0].equals(h[w-1])&&h.pop(),h},_setLatLngs:function(o){r.prototype._setLatLngs.call(this,o),vr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return vr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,h=this.options.weight,w=new ne(h,h);if(o=new ge(o.min.subtract(w),o.max.add(w)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var A=0,N=this._rings.length,V;A<N;A++)V=fu(this._rings[A],o,!0),V.length&&this._parts.push(V)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var h=!1,w,A,N,V,$,ue,pe,Ce;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(V=0,pe=this._parts.length;V<pe;V++)for(w=this._parts[V],$=0,Ce=w.length,ue=Ce-1;$<Ce;ue=$++)A=w[$],N=w[ue],A.y>o.y!=N.y>o.y&&o.x<(N.x-A.x)*(o.y-A.y)/(N.y-A.y)+A.x&&(h=!h);return h||r.prototype._containsPoint.call(this,o,!0)}});function u(o,h){return new l(o,h)}var d=si.extend({initialize:function(o,h){R(this,h),this._layers={},o&&this.addData(o)},addData:function(o){var h=k(o)?o:o.features,w,A,N;if(h){for(w=0,A=h.length;w<A;w++)N=h[w],(N.geometries||N.geometry||N.features||N.coordinates)&&this.addData(N);return this}var V=this.options;if(V.filter&&!V.filter(o))return this;var $=p(o,V);return $?($.feature=Y(o),$.defaultOptions=$.options,this.resetStyle($),V.onEachFeature&&V.onEachFeature(o,$),this.addLayer($)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=a({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(h){this._setLayerStyle(h,o)},this)},_setLayerStyle:function(o,h){o.setStyle&&(typeof h=="function"&&(h=h(o.feature)),o.setStyle(h))}});function p(o,h){var w=o.type==="Feature"?o.geometry:o,A=w?w.coordinates:null,N=[],V=h&&h.pointToLayer,$=h&&h.coordsToLatLng||_,ue,pe,Ce,We;if(!A&&!w)return null;switch(w.type){case"Point":return ue=$(A),x(V,o,ue,h);case"MultiPoint":for(Ce=0,We=A.length;Ce<We;Ce++)ue=$(A[Ce]),N.push(x(V,o,ue,h));return new si(N);case"LineString":case"MultiLineString":return pe=S(A,w.type==="LineString"?0:1,$),new r(pe,h);case"Polygon":case"MultiPolygon":return pe=S(A,w.type==="Polygon"?1:2,$),new l(pe,h);case"GeometryCollection":for(Ce=0,We=w.geometries.length;Ce<We;Ce++){var ht=p({geometry:w.geometries[Ce],type:"Feature",properties:o.properties},h);ht&&N.push(ht)}return new si(N);case"FeatureCollection":for(Ce=0,We=w.features.length;Ce<We;Ce++){var Tt=p(w.features[Ce],h);Tt&&N.push(Tt)}return new si(N);default:throw new Error("Invalid GeoJSON object.")}}function x(o,h,w,A){return o?o(h,w):new _r(w,A&&A.markersInheritOptions&&A)}function _(o){return new ee(o[1],o[0],o[2])}function S(o,h,w){for(var A=[],N=0,V=o.length,$;N<V;N++)$=h?S(o[N],h-1,w):(w||_)(o[N]),A.push($);return A}function E(o,h){return o=oe(o),o.alt!==void 0?[T(o.lng,h),T(o.lat,h),T(o.alt,h)]:[T(o.lng,h),T(o.lat,h)]}function D(o,h,w,A){for(var N=[],V=0,$=o.length;V<$;V++)N.push(h?D(o[V],vr(o[V])?0:h-1,w,A):E(o[V],A));return!h&&w&&N.length>0&&N.push(N[0].slice()),N}function U(o,h){return o.feature?a({},o.feature,{geometry:h}):Y(h)}function Y(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var J={toGeoJSON:function(o){return U(this,{type:"Point",coordinates:E(this.getLatLng(),o)})}};_r.include(J),Us.include(J),Gi.include(J),r.include({toGeoJSON:function(o){var h=!vr(this._latlngs),w=D(this._latlngs,h?1:0,!1,o);return U(this,{type:(h?"Multi":"")+"LineString",coordinates:w})}}),l.include({toGeoJSON:function(o){var h=!vr(this._latlngs),w=h&&!vr(this._latlngs[0]),A=D(this._latlngs,w?2:h?1:0,!0,o);return h||(A=[A]),U(this,{type:(w?"Multi":"")+"Polygon",coordinates:A})}}),Ni.include({toMultiPoint:function(o){var h=[];return this.eachLayer(function(w){h.push(w.toGeoJSON(o).geometry.coordinates)}),U(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(o){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(o);var w=h==="GeometryCollection",A=[];return this.eachLayer(function(N){if(N.toGeoJSON){var V=N.toGeoJSON(o);if(w)A.push(V.geometry);else{var $=Y(V);$.type==="FeatureCollection"?A.push.apply(A,$.features):A.push($)}}}),w?U(this,{geometries:A,type:"GeometryCollection"}):{type:"FeatureCollection",features:A}}});function te(o,h){return new d(o,h)}var le=te,he=Ln.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,h,w){this._url=o,this._bounds=De(h),R(this,w)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Qe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){tn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&sn(this._image),this},bringToBack:function(){return this._map&&yr(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=De(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",h=this._image=o?this._url:Lt("img");if(Qe(h,"leaflet-image-layer"),this._zoomAnimated&&Qe(h,"leaflet-zoom-animated"),this.options.className&&Qe(h,this.options.className),h.onselectstart=b,h.onmousemove=b,h.onload=f(this.fire,this,"load"),h.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(o){var h=this._map.getZoomScale(o.zoom),w=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;Z(this._image,w,h)},_reset:function(){var o=this._image,h=new ge(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),w=h.getSize();Be(o,h.min),o.style.width=w.x+"px",o.style.height=w.y+"px"},_updateOpacity:function(){At(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),Ne=function(o,h,w){return new he(o,h,w)},Te=he.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",h=this._image=o?this._url:Lt("video");if(Qe(h,"leaflet-image-layer"),this._zoomAnimated&&Qe(h,"leaflet-zoom-animated"),this.options.className&&Qe(h,this.options.className),h.onselectstart=b,h.onmousemove=b,h.onloadeddata=f(this.fire,this,"load"),o){for(var w=h.getElementsByTagName("source"),A=[],N=0;N<w.length;N++)A.push(w[N].src);this._url=w.length>0?A:[h.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var V=0;V<this._url.length;V++){var $=Lt("source");$.src=this._url[V],h.appendChild($)}}});function Ae(o,h,w){return new Te(o,h,w)}var Et=he.extend({_initImage:function(){var o=this._image=this._url;Qe(o,"leaflet-image-layer"),this._zoomAnimated&&Qe(o,"leaflet-zoom-animated"),this.options.className&&Qe(o,this.options.className),o.onselectstart=b,o.onmousemove=b}});function _t(o,h,w){return new Et(o,h,w)}var un=Ln.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,h){o&&(o instanceof ee||k(o))?(this._latlng=oe(o),R(this,h)):(R(this,o),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&At(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&At(this._container,1),this.bringToFront(),this.options.interactive&&(Qe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(At(this._container,0),this._removeTimeout=setTimeout(f(tn,void 0,this._container),200)):tn(this._container),this.options.interactive&&(Zt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=oe(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&sn(this._container),this},bringToBack:function(){return this._map&&yr(this._container),this},_prepareOpen:function(o){var h=this._source;if(!h._map)return!1;if(h instanceof si){h=null;var w=this._source._layers;for(var A in w)if(w[A]._map){h=w[A];break}if(!h)return!1;this._source=h}if(!o)if(h.getCenter)o=h.getCenter();else if(h.getLatLng)o=h.getLatLng();else if(h.getBounds)o=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")o.innerHTML=h;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),h=ye(this.options.offset),w=this._getAnchor();this._zoomAnimated?Be(this._container,o.add(w)):h=h.add(o).add(w);var A=this._containerBottom=-h.y,N=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=A+"px",this._container.style.left=N+"px"}},_getAnchor:function(){return[0,0]}});kt.include({_initOverlay:function(o,h,w,A){var N=h;return N instanceof o||(N=new o(A).setContent(h)),w&&N.setLatLng(w),N}}),Ln.include({_initOverlay:function(o,h,w,A){var N=w;return N instanceof o?(R(N,A),N._source=this):(N=h&&!A?h:new o(A,this),N.setContent(w)),N}});var or=un.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,un.prototype.openOn.call(this,o)},onAdd:function(o){un.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ai||this._source.on("preclick",Si))},onRemove:function(o){un.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ai||this._source.off("preclick",Si))},getEvents:function(){var o=un.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",h=this._container=Lt("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),w=this._wrapper=Lt("div",o+"-content-wrapper",h);if(this._contentNode=Lt("div",o+"-content",w),Ur(h),Ca(this._contentNode),pt(h,"contextmenu",Si),this._tipContainer=Lt("div",o+"-tip-container",h),this._tip=Lt("div",o+"-tip",this._tipContainer),this.options.closeButton){var A=this._closeButton=Lt("a",o+"-close-button",h);A.setAttribute("role","button"),A.setAttribute("aria-label","Close popup"),A.href="#close",A.innerHTML='<span aria-hidden="true">&#215;</span>',pt(A,"click",function(N){Fn(N),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,h=o.style;h.width="",h.whiteSpace="nowrap";var w=o.offsetWidth;w=Math.min(w,this.options.maxWidth),w=Math.max(w,this.options.minWidth),h.width=w+1+"px",h.whiteSpace="",h.height="";var A=o.offsetHeight,N=this.options.maxHeight,V="leaflet-popup-scrolled";N&&A>N?(h.height=N+"px",Qe(o,V)):Zt(o,V),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),w=this._getAnchor();Be(this._container,h.add(w))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,h=parseInt(Ct(this._container,"marginBottom"),10)||0,w=this._container.offsetHeight+h,A=this._containerWidth,N=new ne(this._containerLeft,-w-this._containerBottom);N._add(on(this._container));var V=o.layerPointToContainerPoint(N),$=ye(this.options.autoPanPadding),ue=ye(this.options.autoPanPaddingTopLeft||$),pe=ye(this.options.autoPanPaddingBottomRight||$),Ce=o.getSize(),We=0,ht=0;V.x+A+pe.x>Ce.x&&(We=V.x+A-Ce.x+pe.x),V.x-We-ue.x<0&&(We=V.x-ue.x),V.y+w+pe.y>Ce.y&&(ht=V.y+w-Ce.y+pe.y),V.y-ht-ue.y<0&&(ht=V.y-ue.y),(We||ht)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([We,ht]))}},_getAnchor:function(){return ye(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ar=function(o,h){return new or(o,h)};kt.mergeOptions({closePopupOnClick:!0}),kt.include({openPopup:function(o,h,w){return this._initOverlay(or,o,h,w).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),Ln.include({bindPopup:function(o,h){return this._popup=this._initOverlay(or,this._popup,o,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof si||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){Vr(o);var h=o.layer||o.target;if(this._popup._source===h&&!(h instanceof ai)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=h,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var Ut=un.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){un.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){un.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=un.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",h=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Lt("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var h,w,A=this._map,N=this._container,V=A.latLngToContainerPoint(A.getCenter()),$=A.layerPointToContainerPoint(o),ue=this.options.direction,pe=N.offsetWidth,Ce=N.offsetHeight,We=ye(this.options.offset),ht=this._getAnchor();ue==="top"?(h=pe/2,w=Ce):ue==="bottom"?(h=pe/2,w=0):ue==="center"?(h=pe/2,w=Ce/2):ue==="right"?(h=0,w=Ce/2):ue==="left"?(h=pe,w=Ce/2):$.x<V.x?(ue="right",h=0,w=Ce/2):(ue="left",h=pe+(We.x+ht.x)*2,w=Ce/2),o=o.subtract(ye(h,w,!0)).add(We).add(ht),Zt(N,"leaflet-tooltip-right"),Zt(N,"leaflet-tooltip-left"),Zt(N,"leaflet-tooltip-top"),Zt(N,"leaflet-tooltip-bottom"),Qe(N,"leaflet-tooltip-"+ue),Be(N,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&At(this._container,o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(h)},_getAnchor:function(){return ye(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Un=function(o,h){return new Ut(o,h)};kt.include({openTooltip:function(o,h,w){return this._initOverlay(Ut,o,h,w).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),Ln.include({bindTooltip:function(o,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ut,this._tooltip,o,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var h=o?"off":"on",w={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?w.add=this._openTooltip:(w.mouseover=this._openTooltip,w.mouseout=this.closeTooltip,w.click=this._openTooltip,this._map?this._addFocusListeners():w.add=this._addFocusListeners),this._tooltip.options.sticky&&(w.mousemove=this._moveTooltip),this[h](w),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof si||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&(pt(h,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),pt(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var h=o.latlng,w,A;this._tooltip.options.sticky&&o.originalEvent&&(w=this._map.mouseEventToContainerPoint(o.originalEvent),A=this._map.containerPointToLayerPoint(w),h=this._map.layerPointToLatLng(A)),this._tooltip.setLatLng(h)}});var lr=zs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var h=o&&o.tagName==="DIV"?o:document.createElement("div"),w=this.options;if(w.html instanceof Element?(Ps(h),h.appendChild(w.html)):h.innerHTML=w.html!==!1?w.html:"",w.bgPos){var A=ye(w.bgPos);h.style.backgroundPosition=-A.x+"px "+-A.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function Vs(o){return new lr(o)}zs.Default=Uo;var li=Ln.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ve.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){R(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),tn(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(sn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(yr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=y(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof ne?o:new ne(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var h=this.getPane().children,w=-o(-1/0,1/0),A=0,N=h.length,V;A<N;A++)V=h[A].style.zIndex,h[A]!==this._container&&V&&(w=o(w,+V));isFinite(w)&&(this.options.zIndex=w+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ve.ielt9){At(this._container,this.options.opacity);var o=+new Date,h=!1,w=!1;for(var A in this._tiles){var N=this._tiles[A];if(!(!N.current||!N.loaded)){var V=Math.min(1,(o-N.loaded)/200);At(N.el,V),V<1?h=!0:(N.active?w=!0:this._onOpaqueTile(N),N.active=!0)}}w&&!this._noPrune&&this._pruneTiles(),h&&(se(this._fadeFrame),this._fadeFrame=ie(this._updateOpacity,this))}},_onOpaqueTile:b,_initContainer:function(){this._container||(this._container=Lt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,h=this.options.maxZoom;if(o!==void 0){for(var w in this._levels)w=Number(w),this._levels[w].el.children.length||w===o?(this._levels[w].el.style.zIndex=h-Math.abs(o-w),this._onUpdateLevel(w)):(tn(this._levels[w].el),this._removeTilesAtZoom(w),this._onRemoveLevel(w),delete this._levels[w]);var A=this._levels[o],N=this._map;return A||(A=this._levels[o]={},A.el=Lt("div","leaflet-tile-container leaflet-zoom-animated",this._container),A.el.style.zIndex=h,A.origin=N.project(N.unproject(N.getPixelOrigin()),o).round(),A.zoom=o,this._setZoomTransform(A,N.getCenter(),N.getZoom()),b(A.el.offsetWidth),this._onCreateLevel(A)),this._level=A,A}},_onUpdateLevel:b,_onRemoveLevel:b,_onCreateLevel:b,_pruneTiles:function(){if(this._map){var o,h,w=this._map.getZoom();if(w>this.options.maxZoom||w<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)h=this._tiles[o],h.retain=h.current;for(o in this._tiles)if(h=this._tiles[o],h.current&&!h.active){var A=h.coords;this._retainParent(A.x,A.y,A.z,A.z-5)||this._retainChildren(A.x,A.y,A.z,A.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var h in this._tiles)this._tiles[h].coords.z===o&&this._removeTile(h)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)tn(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,h,w,A){var N=Math.floor(o/2),V=Math.floor(h/2),$=w-1,ue=new ne(+N,+V);ue.z=+$;var pe=this._tileCoordsToKey(ue),Ce=this._tiles[pe];return Ce&&Ce.active?(Ce.retain=!0,!0):(Ce&&Ce.loaded&&(Ce.retain=!0),$>A?this._retainParent(N,V,$,A):!1)},_retainChildren:function(o,h,w,A){for(var N=2*o;N<2*o+2;N++)for(var V=2*h;V<2*h+2;V++){var $=new ne(N,V);$.z=w+1;var ue=this._tileCoordsToKey($),pe=this._tiles[ue];if(pe&&pe.active){pe.retain=!0;continue}else pe&&pe.loaded&&(pe.retain=!0);w+1<A&&this._retainChildren(N,V,w+1,A)}},_resetView:function(o){var h=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var h=this.options;return h.minNativeZoom!==void 0&&o<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<o?h.maxNativeZoom:o},_setView:function(o,h,w,A){var N=Math.round(h);this.options.maxZoom!==void 0&&N>this.options.maxZoom||this.options.minZoom!==void 0&&N<this.options.minZoom?N=void 0:N=this._clampZoom(N);var V=this.options.updateWhenZooming&&N!==this._tileZoom;(!A||V)&&(this._tileZoom=N,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),N!==void 0&&this._update(o),w||this._pruneTiles(),this._noPrune=!!w),this._setZoomTransforms(o,h)},_setZoomTransforms:function(o,h){for(var w in this._levels)this._setZoomTransform(this._levels[w],o,h)},_setZoomTransform:function(o,h,w){var A=this._map.getZoomScale(w,o.zoom),N=o.origin.multiplyBy(A).subtract(this._map._getNewPixelOrigin(h,w)).round();Ve.any3d?Z(o.el,N,A):Be(o.el,N)},_resetGrid:function(){var o=this._map,h=o.options.crs,w=this._tileSize=this.getTileSize(),A=this._tileZoom,N=this._map.getPixelWorldBounds(this._tileZoom);N&&(this._globalTileRange=this._pxBoundsToTileRange(N)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,h.wrapLng[0]],A).x/w.x),Math.ceil(o.project([0,h.wrapLng[1]],A).x/w.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([h.wrapLat[0],0],A).y/w.x),Math.ceil(o.project([h.wrapLat[1],0],A).y/w.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var h=this._map,w=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),A=h.getZoomScale(w,this._tileZoom),N=h.project(o,this._tileZoom).floor(),V=h.getSize().divideBy(A*2);return new ge(N.subtract(V),N.add(V))},_update:function(o){var h=this._map;if(h){var w=this._clampZoom(h.getZoom());if(o===void 0&&(o=h.getCenter()),this._tileZoom!==void 0){var A=this._getTiledPixelBounds(o),N=this._pxBoundsToTileRange(A),V=N.getCenter(),$=[],ue=this.options.keepBuffer,pe=new ge(N.getBottomLeft().subtract([ue,-ue]),N.getTopRight().add([ue,-ue]));if(!(isFinite(N.min.x)&&isFinite(N.min.y)&&isFinite(N.max.x)&&isFinite(N.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ce in this._tiles){var We=this._tiles[Ce].coords;(We.z!==this._tileZoom||!pe.contains(new ne(We.x,We.y)))&&(this._tiles[Ce].current=!1)}if(Math.abs(w-this._tileZoom)>1){this._setView(o,w);return}for(var ht=N.min.y;ht<=N.max.y;ht++)for(var Tt=N.min.x;Tt<=N.max.x;Tt++){var br=new ne(Tt,ht);if(br.z=this._tileZoom,!!this._isValidTile(br)){var Kn=this._tiles[this._tileCoordsToKey(br)];Kn?Kn.current=!0:$.push(br)}}if($.sort(function(Mr,Ta){return Mr.distanceTo(V)-Ta.distanceTo(V)}),$.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ci=document.createDocumentFragment();for(Tt=0;Tt<$.length;Tt++)this._addTile($[Tt],ci);this._level.el.appendChild(ci)}}}},_isValidTile:function(o){var h=this._map.options.crs;if(!h.infinite){var w=this._globalTileRange;if(!h.wrapLng&&(o.x<w.min.x||o.x>w.max.x)||!h.wrapLat&&(o.y<w.min.y||o.y>w.max.y))return!1}if(!this.options.bounds)return!0;var A=this._tileCoordsToBounds(o);return De(this.options.bounds).overlaps(A)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var h=this._map,w=this.getTileSize(),A=o.scaleBy(w),N=A.add(w),V=h.unproject(A,o.z),$=h.unproject(N,o.z);return[V,$]},_tileCoordsToBounds:function(o){var h=this._tileCoordsToNwSe(o),w=new qe(h[0],h[1]);return this.options.noWrap||(w=this._map.wrapLatLngBounds(w)),w},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var h=o.split(":"),w=new ne(+h[0],+h[1]);return w.z=+h[2],w},_removeTile:function(o){var h=this._tiles[o];h&&(tn(h.el),delete this._tiles[o],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){Qe(o,"leaflet-tile");var h=this.getTileSize();o.style.width=h.x+"px",o.style.height=h.y+"px",o.onselectstart=b,o.onmousemove=b,Ve.ielt9&&this.options.opacity<1&&At(o,this.options.opacity)},_addTile:function(o,h){var w=this._getTilePos(o),A=this._tileCoordsToKey(o),N=this.createTile(this._wrapCoords(o),f(this._tileReady,this,o));this._initTile(N),this.createTile.length<2&&ie(f(this._tileReady,this,o,null,N)),Be(N,w),this._tiles[A]={el:N,coords:o,current:!0},h.appendChild(N),this.fire("tileloadstart",{tile:N,coords:o})},_tileReady:function(o,h,w){h&&this.fire("tileerror",{error:h,tile:w,coords:o});var A=this._tileCoordsToKey(o);w=this._tiles[A],w&&(w.loaded=+new Date,this._map._fadeAnimated?(At(w.el,0),se(this._fadeFrame),this._fadeFrame=ie(this._updateOpacity,this)):(w.active=!0,this._pruneTiles()),h||(Qe(w.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:w.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ve.ielt9||!this._map._fadeAnimated?ie(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var h=new ne(this._wrapX?C(o.x,this._wrapX):o.x,this._wrapY?C(o.y,this._wrapY):o.y);return h.z=o.z,h},_pxBoundsToTileRange:function(o){var h=this.getTileSize();return new ge(o.min.unscaleBy(h).floor(),o.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function Xh(o){return new li(o)}var Hs=li.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,h){this._url=o,h=R(this,h),h.detectRetina&&Ve.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,h){return this._url===o&&h===void 0&&(h=!0),this._url=o,h||this.redraw(),this},createTile:function(o,h){var w=document.createElement("img");return pt(w,"load",f(this._tileOnLoad,this,h,w)),pt(w,"error",f(this._tileOnError,this,h,w)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(w.referrerPolicy=this.options.referrerPolicy),w.alt="",w.src=this.getTileUrl(o),w},getTileUrl:function(o){var h={r:Ve.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var w=this._globalTileRange.max.y-o.y;this.options.tms&&(h.y=w),h["-y"]=w}return O(this._url,a(h,this.options))},_tileOnLoad:function(o,h){Ve.ielt9?setTimeout(f(o,this,null,h),0):o(null,h)},_tileOnError:function(o,h,w){var A=this.options.errorTileUrl;A&&h.getAttribute("src")!==A&&(h.src=A),o(w,h)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,h=this.options.maxZoom,w=this.options.zoomReverse,A=this.options.zoomOffset;return w&&(o=h-o),o+A},_getSubdomain:function(o){var h=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var o,h;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(h=this._tiles[o].el,h.onload=b,h.onerror=b,!h.complete)){h.src=Q;var w=this._tiles[o].coords;tn(h),delete this._tiles[o],this.fire("tileabort",{tile:h,coords:w})}},_removeTile:function(o){var h=this._tiles[o];if(h)return h.el.setAttribute("src",Q),li.prototype._removeTile.call(this,o)},_tileReady:function(o,h,w){if(!(!this._map||w&&w.getAttribute("src")===Q))return li.prototype._tileReady.call(this,o,h,w)}});function mm(o,h){return new Hs(o,h)}var gm=Hs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,h){this._url=o;var w=a({},this.defaultWmsParams);for(var A in h)A in this.options||(w[A]=h[A]);h=R(this,h);var N=h.detectRetina&&Ve.retina?2:1,V=this.getTileSize();w.width=V.x*N,w.height=V.y*N,this.wmsParams=w},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,Hs.prototype.onAdd.call(this,o)},getTileUrl:function(o){var h=this._tileCoordsToNwSe(o),w=this._crs,A=Me(w.project(h[0]),w.project(h[1])),N=A.min,V=A.max,$=(this._wmsVersion>=1.3&&this._crs===Fs?[N.y,N.x,V.y,V.x]:[N.x,N.y,V.x,V.y]).join(","),ue=Hs.prototype.getTileUrl.call(this,o);return ue+B(this.wmsParams,ue,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+$},setParams:function(o,h){return a(this.wmsParams,o),h||this.redraw(),this}});function kC(o,h){return new gm(o,h)}Hs.WMS=gm,mm.wms=kC;var hs=Ln.extend({options:{padding:.1},initialize:function(o){R(this,o),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Qe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,h){var w=this._map.getZoomScale(h,this._zoom),A=this._map.getSize().multiplyBy(.5+this.options.padding),N=this._map.project(this._center,h),V=A.multiplyBy(-w).add(N).subtract(this._map._getNewPixelOrigin(o,h));Ve.any3d?Z(this._container,V,w):Be(this._container,V)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,h=this._map.getSize(),w=this._map.containerPointToLayerPoint(h.multiplyBy(-o)).round();this._bounds=new ge(w,w.add(h.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),xm=hs.extend({options:{tolerance:0},getEvents:function(){var o=hs.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){hs.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");pt(o,"mousemove",this._onMouseMove,this),pt(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),pt(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){se(this._redrawRequest),delete this._ctx,tn(this._container),ze(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var h in this._layers)o=this._layers[h],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){hs.prototype._update.call(this);var o=this._bounds,h=this._container,w=o.getSize(),A=Ve.retina?2:1;Be(h,o.min),h.width=A*w.x,h.height=A*w.y,h.style.width=w.x+"px",h.style.height=w.y+"px",Ve.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){hs.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[v(o)]=o;var h=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var h=o._order,w=h.next,A=h.prev;w?w.prev=A:this._drawLast=A,A?A.next=w:this._drawFirst=w,delete o._order,delete this._layers[v(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var h=o.options.dashArray.split(/[, ]+/),w=[],A,N;for(N=0;N<h.length;N++){if(A=Number(h[N]),isNaN(A))return;w.push(A)}o.options._dashArray=w}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||ie(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var h=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ge,this._redrawBounds.extend(o._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(o._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var h=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,h=this._redrawBounds;if(this._ctx.save(),h){var w=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,w.x,w.y),this._ctx.clip()}this._drawing=!0;for(var A=this._drawFirst;A;A=A.next)o=A.layer,(!h||o._pxBounds&&o._pxBounds.intersects(h))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,h){if(this._drawing){var w,A,N,V,$=o._parts,ue=$.length,pe=this._ctx;if(ue){for(pe.beginPath(),w=0;w<ue;w++){for(A=0,N=$[w].length;A<N;A++)V=$[w][A],pe[A?"lineTo":"moveTo"](V.x,V.y);h&&pe.closePath()}this._fillStroke(pe,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var h=o._point,w=this._ctx,A=Math.max(Math.round(o._radius),1),N=(Math.max(Math.round(o._radiusY),1)||A)/A;N!==1&&(w.save(),w.scale(1,N)),w.beginPath(),w.arc(h.x,h.y/N,A,0,Math.PI*2,!1),N!==1&&w.restore(),this._fillStroke(w,o)}},_fillStroke:function(o,h){var w=h.options;w.fill&&(o.globalAlpha=w.fillOpacity,o.fillStyle=w.fillColor||w.color,o.fill(w.fillRule||"evenodd")),w.stroke&&w.weight!==0&&(o.setLineDash&&o.setLineDash(h.options&&h.options._dashArray||[]),o.globalAlpha=w.opacity,o.lineWidth=w.weight,o.strokeStyle=w.color,o.lineCap=w.lineCap,o.lineJoin=w.lineJoin,o.stroke())},_onClick:function(o){for(var h=this._map.mouseEventToLayerPoint(o),w,A,N=this._drawFirst;N;N=N.next)w=N.layer,w.options.interactive&&w._containsPoint(h)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(w))&&(A=w);this._fireEvent(A?[A]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,h)}},_handleMouseOut:function(o){var h=this._hoveredLayer;h&&(Zt(this._container,"leaflet-interactive"),this._fireEvent([h],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,h){if(!this._mouseHoverThrottled){for(var w,A,N=this._drawFirst;N;N=N.next)w=N.layer,w.options.interactive&&w._containsPoint(h)&&(A=w);A!==this._hoveredLayer&&(this._handleMouseOut(o),A&&(Qe(this._container,"leaflet-interactive"),this._fireEvent([A],o,"mouseover"),this._hoveredLayer=A)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,h,w){this._map._fireDOMEvent(h,w||h.type,o)},_bringToFront:function(o){var h=o._order;if(h){var w=h.next,A=h.prev;if(w)w.prev=A;else return;A?A.next=w:w&&(this._drawFirst=w),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(o)}},_bringToBack:function(o){var h=o._order;if(h){var w=h.next,A=h.prev;if(A)A.next=w;else return;w?w.prev=A:A&&(this._drawLast=A),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(o)}}});function ym(o){return Ve.canvas?new xm(o):null}var Ll=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),MC={_initContainer:function(){this._container=Lt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(hs.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var h=o._container=Ll("shape");Qe(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",o._path=Ll("path"),h.appendChild(o._path),this._updateStyle(o),this._layers[v(o)]=o},_addPath:function(o){var h=o._container;this._container.appendChild(h),o.options.interactive&&o.addInteractiveTarget(h)},_removePath:function(o){var h=o._container;tn(h),o.removeInteractiveTarget(h),delete this._layers[v(o)]},_updateStyle:function(o){var h=o._stroke,w=o._fill,A=o.options,N=o._container;N.stroked=!!A.stroke,N.filled=!!A.fill,A.stroke?(h||(h=o._stroke=Ll("stroke")),N.appendChild(h),h.weight=A.weight+"px",h.color=A.color,h.opacity=A.opacity,A.dashArray?h.dashStyle=k(A.dashArray)?A.dashArray.join(" "):A.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=A.lineCap.replace("butt","flat"),h.joinstyle=A.lineJoin):h&&(N.removeChild(h),o._stroke=null),A.fill?(w||(w=o._fill=Ll("fill")),N.appendChild(w),w.color=A.fillColor||A.color,w.opacity=A.fillOpacity):w&&(N.removeChild(w),o._fill=null)},_updateCircle:function(o){var h=o._point.round(),w=Math.round(o._radius),A=Math.round(o._radiusY||w);this._setPath(o,o._empty()?"M0 0":"AL "+h.x+","+h.y+" "+w+","+A+" 0,"+65535*360)},_setPath:function(o,h){o._path.v=h},_bringToFront:function(o){sn(o._container)},_bringToBack:function(o){yr(o._container)}},mu=Ve.vml?Ll:Rt,Pl=hs.extend({_initContainer:function(){this._container=mu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=mu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){tn(this._container),ze(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){hs.prototype._update.call(this);var o=this._bounds,h=o.getSize(),w=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,w.setAttribute("width",h.x),w.setAttribute("height",h.y)),Be(w,o.min),w.setAttribute("viewBox",[o.min.x,o.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(o){var h=o._path=mu("path");o.options.className&&Qe(h,o.options.className),o.options.interactive&&Qe(h,"leaflet-interactive"),this._updateStyle(o),this._layers[v(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){tn(o._path),o.removeInteractiveTarget(o._path),delete this._layers[v(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var h=o._path,w=o.options;h&&(w.stroke?(h.setAttribute("stroke",w.color),h.setAttribute("stroke-opacity",w.opacity),h.setAttribute("stroke-width",w.weight),h.setAttribute("stroke-linecap",w.lineCap),h.setAttribute("stroke-linejoin",w.lineJoin),w.dashArray?h.setAttribute("stroke-dasharray",w.dashArray):h.removeAttribute("stroke-dasharray"),w.dashOffset?h.setAttribute("stroke-dashoffset",w.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),w.fill?(h.setAttribute("fill",w.fillColor||w.color),h.setAttribute("fill-opacity",w.fillOpacity),h.setAttribute("fill-rule",w.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(o,h){this._setPath(o,Wt(o._parts,h))},_updateCircle:function(o){var h=o._point,w=Math.max(Math.round(o._radius),1),A=Math.max(Math.round(o._radiusY),1)||w,N="a"+w+","+A+" 0 1,0 ",V=o._empty()?"M0 0":"M"+(h.x-w)+","+h.y+N+w*2+",0 "+N+-w*2+",0 ";this._setPath(o,V)},_setPath:function(o,h){o._path.setAttribute("d",h)},_bringToFront:function(o){sn(o._path)},_bringToBack:function(o){yr(o._path)}});Ve.vml&&Pl.include(MC);function wm(o){return Ve.svg||Ve.vml?new Pl(o):null}kt.include({getRenderer:function(o){var h=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var h=this._paneRenderers[o];return h===void 0&&(h=this._createRenderer({pane:o}),this._paneRenderers[o]=h),h},_createRenderer:function(o){return this.options.preferCanvas&&ym(o)||wm(o)}});var vm=l.extend({initialize:function(o,h){l.prototype.initialize.call(this,this._boundsToLatLngs(o),h)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=De(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function RC(o,h){return new vm(o,h)}Pl.create=mu,Pl.pointsToPath=Wt,d.geometryToLayer=p,d.coordsToLatLng=_,d.coordsToLatLngs=S,d.latLngToCoords=E,d.latLngsToCoords=D,d.getFeature=U,d.asFeature=Y,kt.mergeOptions({boxZoom:!0});var _m=wr.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){pt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){tn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Xn(),it(),this._startPoint=this._map.mouseEventToContainerPoint(o),pt(document,{contextmenu:Vr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Lt("div","leaflet-zoom-box",this._container),Qe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var h=new ge(this._point,this._startPoint),w=h.getSize();Be(this._box,h.min),this._box.style.width=w.x+"px",this._box.style.height=w.y+"px"},_finish:function(){this._moved&&(tn(this._box),Zt(this._container,"leaflet-crosshair")),Po(),nn(),ze(document,{contextmenu:Vr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var h=new qe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});kt.addInitHook("addHandler","boxZoom",_m),kt.mergeOptions({doubleClickZoom:!0});var bm=wr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var h=this._map,w=h.getZoom(),A=h.options.zoomDelta,N=o.originalEvent.shiftKey?w-A:w+A;h.options.doubleClickZoom==="center"?h.setZoom(N):h.setZoomAround(o.containerPoint,N)}});kt.addInitHook("addHandler","doubleClickZoom",bm),kt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Cm=wr.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new Hi(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}Qe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Zt(this._map._container,"leaflet-grab"),Zt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=De(this._map.options.maxBounds);this._offsetLimit=Me(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var h=this._lastTime=+new Date,w=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(w),this._times.push(h),this._prunePositions(h)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,h){return o-(o-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;o.x<h.min.x&&(o.x=this._viscousLimit(o.x,h.min.x)),o.y<h.min.y&&(o.y=this._viscousLimit(o.y,h.min.y)),o.x>h.max.x&&(o.x=this._viscousLimit(o.x,h.max.x)),o.y>h.max.y&&(o.y=this._viscousLimit(o.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,h=Math.round(o/2),w=this._initialWorldOffset,A=this._draggable._newPos.x,N=(A-h+w)%o+h-w,V=(A+h+w)%o-h-w,$=Math.abs(N+w)<Math.abs(V+w)?N:V;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=$},_onDragEnd:function(o){var h=this._map,w=h.options,A=!w.inertia||o.noInertia||this._times.length<2;if(h.fire("dragend",o),A)h.fire("moveend");else{this._prunePositions(+new Date);var N=this._lastPos.subtract(this._positions[0]),V=(this._lastTime-this._times[0])/1e3,$=w.easeLinearity,ue=N.multiplyBy($/V),pe=ue.distanceTo([0,0]),Ce=Math.min(w.inertiaMaxSpeed,pe),We=ue.multiplyBy(Ce/pe),ht=Ce/(w.inertiaDeceleration*$),Tt=We.multiplyBy(-ht/2).round();!Tt.x&&!Tt.y?h.fire("moveend"):(Tt=h._limitOffset(Tt,h.options.maxBounds),ie(function(){h.panBy(Tt,{duration:ht,easeLinearity:$,noMoveStart:!0,animate:!0})}))}}});kt.addInitHook("addHandler","dragging",Cm),kt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Sm=wr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),pt(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ze(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,h=document.documentElement,w=o.scrollTop||h.scrollTop,A=o.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(A,w)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var h=this._panKeys={},w=this.keyCodes,A,N;for(A=0,N=w.left.length;A<N;A++)h[w.left[A]]=[-1*o,0];for(A=0,N=w.right.length;A<N;A++)h[w.right[A]]=[o,0];for(A=0,N=w.down.length;A<N;A++)h[w.down[A]]=[0,o];for(A=0,N=w.up.length;A<N;A++)h[w.up[A]]=[0,-1*o]},_setZoomDelta:function(o){var h=this._zoomKeys={},w=this.keyCodes,A,N;for(A=0,N=w.zoomIn.length;A<N;A++)h[w.zoomIn[A]]=o;for(A=0,N=w.zoomOut.length;A<N;A++)h[w.zoomOut[A]]=-o},_addHooks:function(){pt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var h=o.keyCode,w=this._map,A;if(h in this._panKeys){if(!w._panAnim||!w._panAnim._inProgress)if(A=this._panKeys[h],o.shiftKey&&(A=ye(A).multiplyBy(3)),w.options.maxBounds&&(A=w._limitOffset(ye(A),w.options.maxBounds)),w.options.worldCopyJump){var N=w.wrapLatLng(w.unproject(w.project(w.getCenter()).add(A)));w.panTo(N)}else w.panBy(A)}else if(h in this._zoomKeys)w.setZoom(w.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&w._popup&&w._popup.options.closeOnEscapeKey)w.closePopup();else return;Vr(o)}}});kt.addInitHook("addHandler","keyboard",Sm),kt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Am=wr.extend({addHooks:function(){pt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ze(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var h=Bs(o),w=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var A=Math.max(w-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),A),Vr(o)},_performZoom:function(){var o=this._map,h=o.getZoom(),w=this._map.options.zoomSnap||0;o._stop();var A=this._delta/(this._map.options.wheelPxPerZoomLevel*4),N=4*Math.log(2/(1+Math.exp(-Math.abs(A))))/Math.LN2,V=w?Math.ceil(N/w)*w:N,$=o._limitZoom(h+(this._delta>0?V:-V))-h;this._delta=0,this._startTime=null,$&&(o.options.scrollWheelZoom==="center"?o.setZoom(h+$):o.setZoomAround(this._lastMousePos,h+$))}});kt.addInitHook("addHandler","scrollWheelZoom",Am);var OC=600;kt.mergeOptions({tapHold:Ve.touchNative&&Ve.safari&&Ve.mobile,tapTolerance:15});var Em=wr.extend({addHooks:function(){pt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var h=o.touches[0];this._startPos=this._newPos=new ne(h.clientX,h.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(pt(document,"touchend",Fn),pt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),OC),pt(document,"touchend touchcancel contextmenu",this._cancel,this),pt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){ze(document,"touchend",Fn),ze(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),ze(document,"touchend touchcancel contextmenu",this._cancel,this),ze(document,"touchmove",this._onMove,this)},_onMove:function(o){var h=o.touches[0];this._newPos=new ne(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,h){var w=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});w._simulated=!0,h.target.dispatchEvent(w)}});kt.addInitHook("addHandler","tapHold",Em),kt.mergeOptions({touchZoom:Ve.touch,bounceAtZoomLimits:!0});var Nm=wr.extend({addHooks:function(){Qe(this._map._container,"leaflet-touch-zoom"),pt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Zt(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var h=this._map;if(!(!o.touches||o.touches.length!==2||h._animatingZoom||this._zooming)){var w=h.mouseEventToContainerPoint(o.touches[0]),A=h.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(w.add(A)._divideBy(2))),this._startDist=w.distanceTo(A),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),pt(document,"touchmove",this._onTouchMove,this),pt(document,"touchend touchcancel",this._onTouchEnd,this),Fn(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var h=this._map,w=h.mouseEventToContainerPoint(o.touches[0]),A=h.mouseEventToContainerPoint(o.touches[1]),N=w.distanceTo(A)/this._startDist;if(this._zoom=h.getScaleZoom(N,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&N<1||this._zoom>h.getMaxZoom()&&N>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,N===1)return}else{var V=w._add(A)._divideBy(2)._subtract(this._centerPoint);if(N===1&&V.x===0&&V.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(V),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),se(this._animRequest);var $=f(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ie($,this,!0),Fn(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,se(this._animRequest),ze(document,"touchmove",this._onTouchMove,this),ze(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});kt.addInitHook("addHandler","touchZoom",Nm),kt.BoxZoom=_m,kt.DoubleClickZoom=bm,kt.Drag=Cm,kt.Keyboard=Sm,kt.ScrollWheelZoom=Am,kt.TapHold=Em,kt.TouchZoom=Nm,n.Bounds=ge,n.Browser=Ve,n.CRS=Le,n.Canvas=xm,n.Circle=Us,n.CircleMarker=Gi,n.Class=Ee,n.Control=Hr,n.DivIcon=lr,n.DivOverlay=un,n.DomEvent=sr,n.DomUtil=On,n.Draggable=Hi,n.Evented=ke,n.FeatureGroup=si,n.GeoJSON=d,n.GridLayer=li,n.Handler=wr,n.Icon=zs,n.ImageOverlay=he,n.LatLng=ee,n.LatLngBounds=qe,n.Layer=Ln,n.LayerGroup=Ni,n.LineUtil=pu,n.Map=kt,n.Marker=_r,n.Mixin=du,n.Path=ai,n.Point=ne,n.PolyUtil=Tl,n.Polygon=l,n.Polyline=r,n.Popup=or,n.PosAnimation=Nl,n.Projection=Ml,n.Rectangle=vm,n.Renderer=hs,n.SVG=Pl,n.SVGOverlay=Et,n.TileLayer=Hs,n.Tooltip=Ut,n.Transformation=ot,n.Util=ve,n.VideoOverlay=Te,n.bind=f,n.bounds=Me,n.canvas=ym,n.circle=P,n.circleMarker=Pt,n.control=Fo,n.divIcon=Vs,n.extend=a,n.featureGroup=oi,n.geoJSON=te,n.geoJson=le,n.gridLayer=Xh,n.icon=Rl,n.imageOverlay=Ne,n.latLng=oe,n.latLngBounds=De,n.layerGroup=kr,n.map=cu,n.marker=Yh,n.point=ye,n.polygon=u,n.polyline=s,n.popup=ar,n.rectangle=RC,n.setOptions=R,n.stamp=v,n.svg=wm,n.svgOverlay=_t,n.tileLayer=mm,n.tooltip=Un,n.transformation=yt,n.version=i,n.videoOverlay=Ae;var LC=window.L;n.noConflict=function(){return window.L=LC,this},window.L=n})})(mp,mp.exports);var vl=mp.exports;const ko=Ky(vl);function Dh(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function jh(e,t){return t==null?function(i,a){const c=j.useRef();return c.current||(c.current=e(i,a)),c}:function(i,a){const c=j.useRef();c.current||(c.current=e(i,a));const f=j.useRef(i),{instance:g}=c.current;return j.useEffect(function(){f.current!==i&&(t(g,i,f.current),f.current=i)},[g,i,a]),c}}function vC(e,t){j.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var c;(c=t.layerContainer)==null||c.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function _C(e){return function(n){const i=Lh(),a=e(Ph(n,i),i);return mC(i.map,n.attribution),lm(a.current,n.eventHandlers),vC(a.current,i),a}}function b6(e,t){const n=j.useRef();j.useEffect(function(){if(t.pathOptions!==n.current){const a=t.pathOptions??{};e.instance.setStyle(a),n.current=a}},[e,t])}function C6(e){return function(n){const i=Lh(),a=e(Ph(n,i),i);return lm(a.current,n.eventHandlers),vC(a.current,i),b6(a.current,n),a}}function S6(e,t){const n=jh(e,t),i=_C(n);return wC(i)}function A6(e,t){const n=jh(e),i=_6(n,t);return w6(i)}function E6(e,t){const n=jh(e,t),i=C6(n);return wC(i)}function N6(e,t){const n=jh(e,t),i=_C(n);return v6(i)}function T6(e,t,n){const{opacity:i,zIndex:a}=t;i!=null&&i!==n.opacity&&e.setOpacity(i),a!=null&&a!==n.zIndex&&e.setZIndex(a)}function Bh(){return Lh().map}function I6(e){const t=Bh();return j.useEffect(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}function gp(){return gp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},gp.apply(this,arguments)}function k6({bounds:e,boundsOptions:t,center:n,children:i,className:a,id:c,placeholder:f,style:g,whenReady:v,zoom:y,...C},b){const[T]=j.useState({className:a,id:c,style:g}),[I,F]=j.useState(null);j.useImperativeHandle(b,()=>(I==null?void 0:I.map)??null,[I]);const R=j.useCallback(z=>{if(z!==null&&I===null){const O=new vl.Map(z,C);n!=null&&y!=null?O.setView(n,y):e!=null&&O.fitBounds(e,t),v!=null&&O.whenReady(v),F(y6(O))}},[]);j.useEffect(()=>()=>{I==null||I.map.remove()},[I]);const B=I?aa.createElement(yC,{value:I},i):f??null;return aa.createElement("div",gp({},T,{ref:R}),B)}const bC=j.forwardRef(k6),cd=S6(function({position:t,...n},i){const a=new vl.Marker(t,n);return Dh(a,gC(i,{overlayContainer:a}))},function(t,n,i){n.position!==i.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),M6=E6(function({positions:t,...n},i){const a=new vl.Polyline(t,n);return Dh(a,gC(i,{overlayContainer:a}))},function(t,n,i){n.positions!==i.positions&&t.setLatLngs(n.positions)}),Wf=A6(function(t,n){const i=new vl.Popup(t,n.overlayContainer);return Dh(i,n)},function(t,n,{position:i},a){j.useEffect(function(){const{instance:f}=t;function g(y){y.popup===f&&(f.update(),a(!0))}function v(y){y.popup===f&&a(!1)}return n.map.on({popupopen:g,popupclose:v}),n.overlayContainer==null?(i!=null&&f.setLatLng(i),f.openOn(n.map)):n.overlayContainer.bindPopup(f),function(){var C;n.map.off({popupopen:g,popupclose:v}),(C=n.overlayContainer)==null||C.unbindPopup(),n.map.removeLayer(f)}},[t,n,a,i])}),CC=N6(function({url:t,...n},i){const a=new vl.TileLayer(t,Ph(n,i));return Dh(a,i)},function(t,n,i){T6(t,n,i);const{url:a}=n;a!=null&&a!==i.url&&t.setUrl(a)});delete ko.Icon.Default.prototype._getIconUrl;ko.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const cm=e=>new ko.DivIcon({className:"custom-icon",html:`<div style="background-color: ${e}; width: 24px; height: 24px; border-radius: 50%; border: 2px solid white; box-shadow: 0 4px 6px rgba(0,0,0,0.1);"></div>`,iconSize:[24,24],iconAnchor:[12,12]}),Zf=new Map,R6=(e,t)=>{const n=Number(e);if(!Number.isFinite(n)||n<=0)return cm(t);const i=`${n}:${t}`;if(Zf.has(i))return Zf.get(i);const a=new ko.DivIcon({className:"stop-number-icon",html:`<div style="background-color: ${t}; width: 28px; height: 28px; border-radius: 9999px; border: 2px solid white; box-shadow: 0 6px 10px rgba(0,0,0,0.25); display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 14px; color: white; line-height: 1;">${n}</div>`,iconSize:[28,28],iconAnchor:[14,14]});return Zf.set(i,a),a},O6=new ko.DivIcon({className:"truck-icon",html:`<div style="background-color: #0052cc; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 2px solid white; box-shadow: 0 4px 6px rgba(0,0,0,0.2);">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle></svg>
    </div>`,iconSize:[32,32],iconAnchor:[16,16]}),L6=cm("#8b5cf6");function P6({center:e}){const t=Bh();return j.useEffect(()=>{e&&t.setView(e,t.getZoom())},[e,t]),null}function D6({points:e}){const t=Bh();return j.useEffect(()=>{if(!t)return;const n=Array.isArray(e)?e.filter(Boolean):[];if(n.length!==0)try{const i=ko.latLngBounds(n);t.fitBounds(i,{padding:[30,30]})}catch{}},[e,t]),null}function um({shipments:e,routeGeometry:t,currentLocation:n,originLocation:i,showStopNumbers:a=!1,currentLocationLabel:c="You are here"}){const g=n?[n.lat,n.lon]:i?[i.lat,i.lon]:[44.4268,26.1025],[v,y]=j.useState([]);j.useEffect(()=>{if(t&&t.coordinates){const I=t.coordinates.map(F=>[F[1],F[0]]);y(I)}},[t]);const C=(e||[]).map(I=>{var O,k,W,Q;const F=(I==null?void 0:I.latitude)??((k=(O=I==null?void 0:I.raw_data)==null?void 0:O.recipientLocation)==null?void 0:k.latitude),R=(I==null?void 0:I.longitude)??((Q=(W=I==null?void 0:I.raw_data)==null?void 0:W.recipientLocation)==null?void 0:Q.longitude),B=Number(F),z=Number(R);return!Number.isFinite(B)||!Number.isFinite(z)||Math.abs(B)<1e-4&&Math.abs(z)<1e-4?null:[B,z]}).filter(Boolean),b=new Map;a&&(Array.isArray(e)?e:[]).forEach((I,F)=>{const R=String((I==null?void 0:I.awb)||"").toUpperCase();R&&b.set(R,F+1)});const T=[...n?[[n.lat,n.lon]]:[],...i?[[i.lat,i.lon]]:[],...C,...v];return m.jsxs("div",{className:"h-[400px] w-full rounded-3xl overflow-hidden shadow-inner border border-white/20 relative z-0",children:[m.jsxs(bC,{center:g,zoom:13,style:{height:"100%",width:"100%"},zoomControl:!1,children:[m.jsx(CC,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors  <a href="https://carto.com/attributions">CARTO</a>'}),m.jsx(P6,{center:g}),m.jsx(D6,{points:T}),n&&m.jsx(cd,{position:[n.lat,n.lon],icon:O6,children:m.jsx(Wf,{children:m.jsx("div",{className:"font-sans font-bold text-brand-600",children:c||"You are here"})})}),i&&m.jsx(cd,{position:[i.lat,i.lon],icon:L6,children:m.jsx(Wf,{children:m.jsx("div",{className:"font-sans font-bold text-slate-800",children:i.label||"Warehouse"})})}),e.map(I=>{var W,Q,G,H;const F=Number((I==null?void 0:I.latitude)??((Q=(W=I==null?void 0:I.raw_data)==null?void 0:W.recipientLocation)==null?void 0:Q.latitude)),R=Number((I==null?void 0:I.longitude)??((H=(G=I==null?void 0:I.raw_data)==null?void 0:G.recipientLocation)==null?void 0:H.longitude));if(!Number.isFinite(F)||!Number.isFinite(R)||Math.abs(F)<1e-4&&Math.abs(R)<1e-4)return null;const B=String((I==null?void 0:I.awb)||"").toUpperCase(),z=I.status==="Delivered",O=z?"#22c55e":"#f59e0b",k=a?b.get(B):null;return m.jsx(cd,{position:[F,R],icon:a?R6(k,O):cm(O),children:m.jsx(Wf,{className:"glass-popup",children:m.jsxs("div",{className:"p-1 min-w-[150px]",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:`w-2 h-2 rounded-full ${z?"bg-green-500":"bg-amber-500"}`}),m.jsxs("span",{className:"text-xs font-black uppercase text-slate-500 tracking-wider",children:[a&&k?`Stop ${k}  `:"",B]})]}),m.jsx("p",{className:"font-bold text-slate-800 text-sm mb-1",children:I.recipient_name}),m.jsx("p",{className:"text-xs text-slate-500 truncate",children:I.delivery_address})]})})},B||I.awb)}),v.length>0&&m.jsx(M6,{positions:v,color:"#4c9aff",weight:4,opacity:.8,dashArray:"10, 10"})]}),m.jsx("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2 z-[1000]",children:m.jsx("button",{className:"glass-strong p-3 rounded-xl text-white hover:text-brand-400 hover:border-brand-500/50 transition-all shadow-lg active:scale-95",onClick:I=>{I.stopPropagation()},children:m.jsx(Q_,{size:20})})})]})}const Xr=(e,t)=>{const n=y=>y*Math.PI/180,a=n(Number(t.lat)-Number(e.lat)),c=n(Number(t.lon)-Number(e.lon)),f=n(Number(e.lat)),g=n(Number(t.lat)),v=Math.sin(a/2)**2+Math.cos(f)*Math.cos(g)*Math.sin(c/2)**2;return 2*6371*Math.asin(Math.sqrt(v))},j6=(e,t,n)=>{const i=Array.isArray(t)?t:[];if(!e||!n)return{index:i.length,delta_km:Number.POSITIVE_INFINITY};let a=0,c=Number.POSITIVE_INFINITY;for(let f=0;f<=i.length;f+=1){const g=f===0?e:i[f-1],v=f===i.length?e:i[f],y=Xr(g,n)+Xr(n,v)-Xr(g,v);y<c&&(c=y,a=f)}return{index:a,delta_km:c}},xp=(e,t,{max_passes:n=2}={})=>{const i=Array.isArray(t)?t.filter(Boolean).slice():[];if(!e||i.length<2)return i;const a=i.slice(),c=[];let f=e;for(;a.length;){a.sort((v,y)=>Xr(f,v)-Xr(f,y));const g=a.shift();c.push(g),f=g}for(let g=0;g<Math.max(1,Number(n)||1);g+=1){let v=!1;for(let y=0;y<c.length-1;y+=1){const C=y===0?e:c[y-1];for(let b=y+1;b<c.length;b+=1){const T=b===c.length-1?e:c[b+1],I=c[y],F=c[b];if(Xr(C,F)+Xr(I,T)-Xr(C,I)-Xr(F,T)<-1e-6){for(let B=y,z=b;B<z;B+=1,z-=1){const O=c[B];c[B]=c[z],c[z]=O}v=!0}}}if(!v)break}return c},SC="arynik_routes_v1",$d=(e,t)=>Number.isFinite(Number(e))&&Number.isFinite(Number(t))&&Math.abs(Number(e))>1e-4&&Math.abs(Number(t))>1e-4,B6=e=>{var g,v,y,C,b,T,I,F,R,B;const t=(e==null?void 0:e.latitude)??((v=(g=e==null?void 0:e.raw_data)==null?void 0:g.recipientLocation)==null?void 0:v.latitude)??((C=(y=e==null?void 0:e.raw_data)==null?void 0:y.recipientLocation)==null?void 0:C.lat),n=(e==null?void 0:e.longitude)??((T=(b=e==null?void 0:e.raw_data)==null?void 0:b.recipientLocation)==null?void 0:T.longitude)??((F=(I=e==null?void 0:e.raw_data)==null?void 0:I.recipientLocation)==null?void 0:F.lon)??((B=(R=e==null?void 0:e.raw_data)==null?void 0:R.recipientLocation)==null?void 0:B.lng),i=Number(t),a=Number(n);if($d(i,a))return{lat:i,lon:a};const c=sa(e);if(String(c||"").trim().toLowerCase()==="romania")return null;const f=Hc(c);return f&&$d(f.lat,f.lon)?{lat:Number(f.lat),lon:Number(f.lon)}:null},F6=e=>{try{return localStorage.getItem(e)}catch{return null}},z6=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},_s=()=>new Date().toISOString(),dm=()=>new Date().toISOString().slice(0,10),AC=()=>{try{return crypto.randomUUID()}catch{return`route-${Date.now()}-${Math.floor(Math.random()*1e5)}`}},Oi=e=>String(e||"").trim().toUpperCase(),hm=e=>String(e||"").trim().toUpperCase()||null,Fh=e=>String(e||"").trim().toUpperCase()||null,fl=e=>String(e||"").trim()||null,EC=e=>{try{return String(e||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"")}catch{return String(e||"")}},Er=e=>EC(String(e||"")).trim().replace(/[_-]+/g," ").replace(/\s+/g," ").toLowerCase(),Mo=()=>{const e=F6(SC);if(!e)return[];try{const t=JSON.parse(e);if(Array.isArray(t))return t}catch{}return[]},ou=e=>{const t=Array.isArray(e)?e:[];return z6(SC,JSON.stringify(t)),t},oa=[{name:"Bacau",code:"BC",aliases:["bacau","bacu","bc"],seed:{lat:46.5667,lon:26.9167}},{name:"Iasi",code:"IS",aliases:["iasi","iai","is"],seed:{lat:47.1585,lon:27.6014}},{name:"Neamt",code:"NT",aliases:["neamt","neam","nt"],seed:{lat:46.9274,lon:26.37}},{name:"Galati",code:"GL",aliases:["galati","galai","gl"],seed:{lat:45.4353,lon:28.008}},{name:"Botosani",code:"BT",aliases:["botosani","botoani","bt"],seed:{lat:47.7486,lon:26.6694}},{name:"Suceava",code:"SV",aliases:["suceava","sv"],seed:{lat:47.6514,lon:26.2556}},{name:"Vaslui",code:"VS",aliases:["vaslui","vs"],seed:{lat:46.6407,lon:27.7276}}],U6=e=>{var i,a,c,f,g,v,y,C,b,T;const t=(e==null?void 0:e.county)||((a=(i=e==null?void 0:e.raw_data)==null?void 0:i.recipientLocation)==null?void 0:a.county)||((f=(c=e==null?void 0:e.raw_data)==null?void 0:c.recipientLocation)==null?void 0:f.countyName)||((v=(g=e==null?void 0:e.raw_data)==null?void 0:g.recipientLocation)==null?void 0:v.region)||((C=(y=e==null?void 0:e.raw_data)==null?void 0:y.recipientLocation)==null?void 0:C.regionName)||((b=e==null?void 0:e.raw_data)==null?void 0:b.county)||((T=e==null?void 0:e.raw_data)==null?void 0:T.countyName),n=Er(t);if(!n)return null;for(const I of oa){const F=Array.isArray(I.aliases)?I.aliases:[];for(const R of F){const B=Er(R);if(B&&(n===B||n.includes(` ${B} `)||n.startsWith(`${B} `)||n.endsWith(` ${B}`)||n.includes(B)))return I.name}if(Er(I.name)===n)return I.name}return null},V6=e=>{const t=EC(String((e==null?void 0:e.status)||"")).trim().toLowerCase();return t?!(t.includes("delivered")||t.includes("livrat")||t.includes("return")||t.includes("returnat")||t.includes("returnata")||t.includes("anulat")||t.includes("anulata")||t.includes("cancel")||t.includes("refuz")):!0},mc=()=>Mo().filter(Boolean).sort((e,t)=>String(t.updated_at||"").localeCompare(String(e.updated_at||""))),fm=e=>Mo().find(t=>t&&t.id===e)||null,NC=({name:e,driver_id:t,driver_name:n,helper_name:i,vehicle_plate:a,date:c,county:f,kind:g,region:v}={})=>{const y=Mo(),C={id:AC(),name:String(e||"").trim()||"New Route",driver_id:hm(t),driver_name:fl(n),vehicle_plate:Fh(a),helper_name:fl(i),date:c?String(c):dm(),kind:g?String(g):void 0,region:v?String(v):void 0,county:f?String(f):void 0,awbs:[],created_at:_s(),updated_at:_s()};return y.unshift(C),ou(y),C},$s=(e,t={})=>{const n=Mo(),i=n.findIndex(C=>C&&C.id===e);if(i===-1)return null;const a=n[i]||{},c=Object.prototype.hasOwnProperty.call(t,"driver_id")?hm(t.driver_id):a.driver_id??null,f=Object.prototype.hasOwnProperty.call(t,"vehicle_plate")?Fh(t.vehicle_plate):a.vehicle_plate??null,g=Object.prototype.hasOwnProperty.call(t,"driver_name")?fl(t.driver_name):a.driver_name??null,v=Object.prototype.hasOwnProperty.call(t,"helper_name")?fl(t.helper_name):a.helper_name??null,y={...a,...t,id:a.id,driver_id:c,vehicle_plate:f,driver_name:g,helper_name:v,updated_at:_s()};return n[i]=y,ou(n),y},TC=e=>{const t=Fh(e==null?void 0:e.vehicle_plate),n=fl(e==null?void 0:e.driver_name)||String((e==null?void 0:e.driver_id)||"").trim()||null,i=fl(e==null?void 0:e.helper_name),a=[];t&&a.push(t),n&&a.push(n);let c=a.join(" - ");return i&&(c=c?`${c} + ${i}`:i),c||""},Wc=e=>{const t=TC(e);return t||String((e==null?void 0:e.name)||(e==null?void 0:e.county)||"").trim()||"Route"},H6=e=>{const t=Mo().filter(n=>n&&n.id!==e);return ou(t),!0},W6=(e,t)=>{const n=Oi(t),i=fm(e);if(!i)return null;const a=Array.isArray(i.awbs)?i.awbs:[];return $s(e,{awbs:a.filter(c=>c!==n)})},Hy=(e,t)=>{if(!fm(e))return null;const i=(Array.isArray(t)?t:[]).map(Oi).filter(Boolean);return $s(e,{awbs:i})},Z6=e=>{const t=Oi(e);return t&&Mo().find(a=>Array.isArray(a==null?void 0:a.awbs)&&a.awbs.includes(t))||null},Wy=e=>{const t=String(e||"").trim()||dm(),n=new Set(oa.map(i=>Er(i.name)));return mc().filter(i=>String((i==null?void 0:i.date)||"")===t).filter(i=>String((i==null?void 0:i.kind)||"").toLowerCase()==="county"||String((i==null?void 0:i.region)||"").toLowerCase()==="moldova").filter(i=>{const a=Er((i==null?void 0:i.county)||(i==null?void 0:i.name));return a&&n.has(a)}).sort((i,a)=>Er((i==null?void 0:i.county)||(i==null?void 0:i.name)).localeCompare(Er((a==null?void 0:a.county)||(a==null?void 0:a.name))))},yp=(e,t,{scopeDate:n=!0}={})=>{const i=Oi(t);if(!i)return null;const a=Mo(),c=a.findIndex(C=>C&&C.id===e);if(c===-1)return null;const f=a[c],g=String((f==null?void 0:f.date)||""),v=Array.isArray(f==null?void 0:f.awbs)?f.awbs:[];let y=!1;for(let C=0;C<a.length;C+=1){const b=a[C];!b||!Array.isArray(b.awbs)||b.awbs.length===0||C!==c&&(n&&g&&String(b.date||"")!==g||b.awbs.includes(i)&&(a[C]={...b,awbs:b.awbs.filter(T=>T!==i),updated_at:_s()},y=!0))}return v.includes(i)||(a[c]={...f,awbs:[...v,i],updated_at:_s()},y=!0),y&&ou(a),a[c]},wp=({date:e,shipments:t,driver_id:n}={})=>{const i=String(e||"").trim()||dm(),a=Array.isArray(t)?t:[],c=Mo(),f=new Map(oa.map(M=>[Er(M.name),M])),g=new Map(oa.map(M=>[Er(M.name),M==null?void 0:M.seed]).filter(M=>{var X,ie;return M[0]&&$d((X=M[1])==null?void 0:X.lat,(ie=M[1])==null?void 0:ie.lon)}).map(([M,X])=>[M,{lat:Number(X.lat),lon:Number(X.lon)}])),v=new Map;for(const M of c){if(!M||String(M.date||"")!==i)continue;const X=Er(M.county||M.name);X&&f.has(X)&&v.set(X,M)}let y=0;const C=[];for(const M of oa){const X=Er(M.name);let ie=v.get(X);if(ie){let se=!1;String(ie.kind||"").toLowerCase()!=="county"&&(ie.kind="county",se=!0),String(ie.region||"").toLowerCase()!=="moldova"&&(ie.region="Moldova",se=!0),ie.county||(ie.county=M.name,se=!0),se&&(ie.updated_at=_s())}else{const se=c.find(ve=>ve&&Er(ve.county||ve.name)===X&&(ve.vehicle_plate||ve.driver_id));ie={id:AC(),name:M.name,driver_id:hm((se==null?void 0:se.driver_id)||n),driver_name:(se==null?void 0:se.driver_name)||null,vehicle_plate:Fh(se==null?void 0:se.vehicle_plate)||null,helper_name:(se==null?void 0:se.helper_name)||null,date:i,kind:"county",region:"Moldova",county:M.name,awbs:[],created_at:_s(),updated_at:_s()},c.unshift(ie),v.set(X,ie),y+=1}C.push(ie)}const b=new Set;for(const M of c)M&&String(M.date||"")===i&&(Array.isArray(M.awbs)?M.awbs:[]).forEach(X=>{const ie=Oi(X);ie&&b.add(ie)});const T=new Map;for(const M of a){const X=Oi(M==null?void 0:M.awb);if(!X)continue;const ie=B6(M);ie&&T.set(X,ie)}const I=Vc(),F=$d(I==null?void 0:I.lat,I==null?void 0:I.lon)?{lat:Number(I.lat),lon:Number(I.lon)}:null,R=new Map;for(const M of C){const X=Er((M==null?void 0:M.county)||(M==null?void 0:M.name)),ie=(Array.isArray(M==null?void 0:M.awbs)?M.awbs:[]).map(Oi).filter(Boolean),se=[];for(const ve of ie){const Ee=T.get(ve);Ee&&se.push({awb:ve,lat:Ee.lat,lon:Ee.lon})}R.set(M.id,{route:M,county_key:X,seed:g.get(X)||null,stops:F?xp(F,se):se,appended:[],touched:!1})}let B=0,z=0,O=0,k=0,W=0,Q=0;const G=new Set,H=[],q=[];for(const M of a){if(!V6(M))continue;B+=1;const X=Oi(M==null?void 0:M.awb);if(!X)continue;const ie=U6(M);if(!ie){W+=1;continue}const se=Er(ie),ve=f.get(se);if(!ve){Q+=1;continue}if(z+=1,b.has(X)){k+=1;continue}const Ee=T.get(X)||null;if(F&&Ee){H.push({awb:X,lat:Ee.lat,lon:Ee.lon});continue}q.push({awb:X,county_key:Er(ve.name)})}if(F&&H.length>0){H.sort((X,ie)=>Xr(F,ie)-Xr(F,X));const M=.25;for(const X of H){if(b.has(X.awb))continue;let ie=null;for(const se of R.values()){const{index:ve,delta_km:Ee}=j6(F,se.stops,X);if(!Number.isFinite(Ee))continue;const ae=se.seed?Xr(se.seed,X):Number.POSITIVE_INFINITY,de=se.stops.length;if(!ie){ie={state:se,index:ve,delta_km:Ee,seedDist:ae,load:de};continue}if(Ee<ie.delta_km-M){ie={state:se,index:ve,delta_km:Ee,seedDist:ae,load:de};continue}if(Math.abs(Ee-ie.delta_km)<=M){if(ae<ie.seedDist-1e-6){ie={state:se,index:ve,delta_km:Ee,seedDist:ae,load:de};continue}if(Math.abs(ae-ie.seedDist)<=1e-6&&de<ie.load){ie={state:se,index:ve,delta_km:Ee,seedDist:ae,load:de};continue}}}ie&&(ie.state.stops.splice(ie.index,0,X),ie.state.touched=!0,b.add(X.awb),O+=1)}}for(const M of q){if(b.has(M.awb))continue;const X=v.get(M.county_key);if(!X)continue;const ie=R.get(X.id);ie&&(ie.appended.push(M.awb),ie.touched=!0,b.add(M.awb),O+=1)}for(const M of R.values()){if(!M.touched)continue;const X=M.route,ie=(Array.isArray(X.awbs)?X.awbs:[]).map(Oi).filter(Boolean),ve=(F?xp(F,M.stops):M.stops).map(Se=>Oi(Se==null?void 0:Se.awb)).filter(Boolean),Ee=[],ae=new Set,de=Se=>{const ye=Oi(Se);!ye||ae.has(ye)||(Ee.push(ye),ae.add(ye))};ve.forEach(de),M.appended.forEach(de),ie.forEach(de);const ke=JSON.stringify(ie),ne=JSON.stringify(Ee);ke!==ne&&(X.awbs=Ee,X.updated_at=_s(),G.add(X.id))}return(y||G.size>0||O)&&ou(c),{date:i,created_routes:y,allocated_awbs:O,deliverable_total:B,deliverable_in_moldova:z,already_assigned:k,missing_county:W,outside_region:Q,routes:C}},G6=200;function Y6(){const[e,t]=j.useState([]),[n,i]=j.useState(!0),[a,c]=j.useState(""),[f,g]=j.useState(null),[v,y]=j.useState("list"),[C,b]=j.useState(null),[T,I]=j.useState({}),F=j.useRef({}),[R,B]=j.useState({active:!1,done:0,total:0,current:""}),[z,O]=j.useState({open:!1,awb:null}),[k,W]=j.useState([]),[Q,G]=j.useState(""),[H,q]=j.useState({}),[M,X]=j.useState({}),[ie,se]=j.useState({}),[ve,Ee]=j.useState({}),ae=mr(),{user:de}=Jn(),{location:ke}=nm(),ne=Tn(de,qo),Se=Tn(de,Xa),ye=Tn(de,Gr),ge=["Manager","Admin","Dispatcher","Driver"].includes(de==null?void 0:de.role),Me=["Admin","Manager","Dispatcher","Support","Recipient"].includes(String((de==null?void 0:de.role)||"").trim()),qe=async()=>{i(!0);try{const K=de.token,Oe=await su(K);t(Oe)}catch(K){console.error("Failed to fetch shipments",K)}finally{i(!1)}};j.useEffect(()=>{qe()},[]),j.useEffect(()=>{W(mc())},[]);const De=(K,Oe="RON")=>{const Je=Number(K);return Number.isFinite(Je)?`${Je.toFixed(2)} ${String(Oe||"RON").toUpperCase()}`:"--"},ee=K=>{const Oe=(K==null?void 0:K.raw_data)||{},Je=(Oe==null?void 0:Oe.client)||(Oe==null?void 0:Oe.clientData)||{},Ue=(Oe==null?void 0:Oe.senderLocation)||{},Fe=(K==null?void 0:K.sender_shop_name)||(Je==null?void 0:Je.name)||(Je==null?void 0:Je.clientName)||(Ue==null?void 0:Ue.name)||(Ue==null?void 0:Ue.shopName)||"";return String(Fe||"").trim()},oe=async(K,{refresh:Oe=!0}={})=>{const Je=String(K||"").toUpperCase();if(Je){q(Ue=>({...Ue,[Je]:!0}));try{const Ue=de==null?void 0:de.token,Fe=await Uc(Ue,Je,{refresh:Oe});t(ut=>(Array.isArray(ut)?ut:[]).map(Ot=>String((Ot==null?void 0:Ot.awb)||"").toUpperCase()===Je?{...Ot,...Fe}:Ot))}catch(Ue){console.warn("Failed to load shipment details",Ue),G(`Failed to load details for ${Je}`),setTimeout(()=>G(""),2500)}finally{q(Ue=>({...Ue,[Je]:!1}))}}},Le=async K=>{var Fe,ut,Ot,He;if(!ne)return;const Oe=String((K==null?void 0:K.awb)||"").toUpperCase();if(!Oe)return;const Je=(K==null?void 0:K.locality)||((ut=(Fe=K==null?void 0:K.raw_data)==null?void 0:Fe.recipientLocation)==null?void 0:ut.locality)||((He=(Ot=K==null?void 0:K.raw_data)==null?void 0:Ot.recipientLocation)==null?void 0:He.localityName)||"",Ue=Je?{locality:Je}:{};X(_e=>({..._e,[Oe]:!0}));try{const _e=de==null?void 0:de.token;await Rh(_e,{awb:Oe,event_id:"2",timestamp:new Date().toISOString(),payload:Ue}),t(jt=>(Array.isArray(jt)?jt:[]).map($e=>String(($e==null?void 0:$e.awb)||"").toUpperCase()===Oe?{...$e,status:"Delivered"}:$e)),G(`Marked ${Oe} as Delivered`),setTimeout(()=>G(""),2500),oe(Oe,{refresh:!0})}catch{try{await sm(Oe,"2",Ue),G(`Queued Delivered for ${Oe}`),setTimeout(()=>G(""),2500)}catch{G(`Failed to mark Delivered for ${Oe}`),setTimeout(()=>G(""),2500)}}finally{X(_e=>({..._e,[Oe]:!1}))}},at=async K=>{var Je,Ue;if(!Me)return;const Oe=String(K||"").trim().toUpperCase();if(!(!Oe||!(de!=null&&de.token))){se(Fe=>({...Fe||{},[Oe]:!0})),G("");try{const Fe=await J1(de.token,{awb:Oe,duration_sec:1800}),ut=Fe==null?void 0:Fe.id;ut?ae(`/tracking/${encodeURIComponent(String(ut))}`):(G("Tracking request created."),setTimeout(()=>G(""),2500))}catch(Fe){const ut=((Ue=(Je=Fe==null?void 0:Fe.response)==null?void 0:Je.data)==null?void 0:Ue.detail)||(Fe==null?void 0:Fe.message)||"Failed to request tracking";G(String(ut)),setTimeout(()=>G(""),3e3)}finally{se(Fe=>({...Fe||{},[Oe]:!1}))}}},Nt=async K=>{var Je,Ue;if(!ye)return;const Oe=String(K||"").trim().toUpperCase();if(!(!Oe||!(de!=null&&de.token))){Ee(Fe=>({...Fe||{},[Oe]:!0})),G("");try{const Fe=await tm(de.token,{awb:Oe});Fe!=null&&Fe.id?ae(`/chat/${encodeURIComponent(String(Fe.id))}`):(G("Chat unavailable."),setTimeout(()=>G(""),2500))}catch(Fe){const ut=((Ue=(Je=Fe==null?void 0:Fe.response)==null?void 0:Je.data)==null?void 0:Ue.detail)||(Fe==null?void 0:Fe.message)||"Failed to open chat";G(String(ut)),setTimeout(()=>G(""),3e3)}finally{Ee(Fe=>({...Fe||{},[Oe]:!1}))}}},tt=ke?{lat:ke.latitude,lon:ke.longitude}:null;j.useEffect(()=>{F.current=T},[T]);const ot=async K=>{var Ot;const Oe=String((K==null?void 0:K.awb)||"").toUpperCase(),Je=sa(K);let Ue=Number(K==null?void 0:K.latitude),Fe=Number(K==null?void 0:K.longitude);if(y("map"),b(null),!Xe(Ue)||!Xe(Fe)){const He=(Ot=F.current)==null?void 0:Ot[Oe];He&&(!He.q||He.q===Je)&&Xe(He.lat)&&Xe(He.lon)&&(Ue=Number(He.lat),Fe=Number(He.lon))}if(!Xe(Ue)||!Xe(Fe)){const He=Hc(Je);He&&Xe(He.lat)&&Xe(He.lon)&&(Ue=Number(He.lat),Fe=Number(He.lon),Oe&&I(_e=>({..._e,[Oe]:{lat:Ue,lon:Fe,ts:Date.now(),source:"cache",q:Je}})))}if(!Xe(Ue)||!Xe(Fe)){const He=await Qd(Je);He&&Xe(He.lat)&&Xe(He.lon)&&(Ue=Number(He.lat),Fe=Number(He.lon),Oe&&I(_e=>({..._e,[Oe]:{lat:Ue,lon:Fe,ts:Date.now(),source:"geocode",q:Je}})))}const ut=Vc();if(ut&&Xe(ut.lat)&&Xe(ut.lon)&&Xe(Ue)&&Xe(Fe)){const He=await m6({lat:ut.lat,lon:ut.lon},{lat:Ue,lon:Fe});b(He)}else b(null)},yt=K=>{if(ge){try{wp({date:new Date().toISOString().slice(0,10),shipments:[],driver_id:(de==null?void 0:de.driver_id)||null})}catch{}W(mc()),O({open:!0,awb:String(K||"").toUpperCase()})}},Ze=async K=>{var Ue,Fe;const Oe=z.awb;if(!Oe)return;if(yp(K,Oe,{scopeDate:!0})){const ut=mc().find(Ot=>Ot.id===K);if(G(`Assigned ${Oe} to ${(ut==null?void 0:ut.name)||"route"}${ut!=null&&ut.vehicle_plate?` (${ut.vehicle_plate})`:""}`),setTimeout(()=>G(""),2500),Se){const Ot=String((ut==null?void 0:ut.driver_id)||"").trim();if(!Ot)G("Route has no driver assigned; allocation not sent."),setTimeout(()=>G(""),3e3);else try{await Q1(de==null?void 0:de.token,Oe,Ot),G(`Allocated ${Oe} to ${Ot} and notified recipient.`),setTimeout(()=>G(""),3e3)}catch(He){console.warn("Allocation API failed",He);const _e=(Fe=(Ue=He==null?void 0:He.response)==null?void 0:Ue.data)==null?void 0:Fe.detail;G(_e?`Allocation failed: ${_e}`:"Allocated locally only (API failed)."),setTimeout(()=>G(""),3e3)}}}O({open:!1,awb:null})},Ht=()=>{const K=z.awb;if(!K)return;let Oe="";try{Oe=localStorage.getItem("arynik_last_vehicle_plate_v1")||""}catch{}const Je=NC({name:`Route ${new Date().toLocaleDateString()}`,driver_id:(de==null?void 0:de.driver_id)||null,driver_name:(de==null?void 0:de.name)||null,helper_name:(de==null?void 0:de.helper_name)||null,vehicle_plate:String(Oe||"").trim().toUpperCase()||null,date:new Date().toISOString().slice(0,10)});yp(Je.id,K,{scopeDate:!0}),O({open:!1,awb:null}),G(`Created route and assigned ${K}`),setTimeout(()=>G(""),2500),ae(`/routes/${Je.id}`)},Rt=e.filter(K=>{var Oe,Je;return((Oe=K.awb)==null?void 0:Oe.toLowerCase().includes(a.toLowerCase()))||K.recipient_name&&((Je=K.recipient_name)==null?void 0:Je.toLowerCase().includes(a.toLowerCase()))}),Wt=j.useMemo(()=>Rt.slice(0,G6),[Rt]),dt=j.useMemo(()=>Wt.map(K=>String((K==null?void 0:K.awb)||"").toUpperCase()).join("|"),[Wt]);j.useEffect(()=>{if(v!=="map"||!Wt||Wt.length===0)return;let K=!1;return(async()=>{const Oe=Wt.length,Je=F.current||{},Ue={},Fe=[];let ut=0;for(const $e of Wt){if(K)return;const xt=String(($e==null?void 0:$e.awb)||"").toUpperCase();if(!xt){ut+=1;continue}const Cn=sa($e);if(Xe($e==null?void 0:$e.latitude)&&Xe($e==null?void 0:$e.longitude)){Ue[xt]={lat:Number($e.latitude),lon:Number($e.longitude),ts:Date.now(),source:"shipment",q:Cn},ut+=1;continue}const pn=Je[xt];if(pn&&(!pn.q||pn.q===Cn)&&Xe(pn.lat)&&Xe(pn.lon)){pn.q||(Ue[xt]={...pn,q:Cn}),ut+=1;continue}const Rn=Hc(Cn);if(Rn){Xe(Rn.lat)&&Xe(Rn.lon)&&(Ue[xt]={lat:Number(Rn.lat),lon:Number(Rn.lon),ts:Number(Rn.ts||Date.now()),source:"cache",q:Cn}),ut+=1;continue}Fe.push({awb:xt,query:Cn})}if(K)return;if(Object.keys(Ue).length>0&&I($e=>({...$e,...Ue})),Fe.length===0){B({active:!1,done:Oe,total:Oe,current:""});return}B({active:!0,done:ut,total:Oe,current:""});let Ot={},He=0,_e=Date.now();const jt=()=>{if(K||Object.keys(Ot).length===0)return;const $e=Ot;Ot={},He=0,_e=Date.now(),I(xt=>({...xt,...$e}))};for(const $e of Fe){if(K)return;const{awb:xt,query:Cn}=$e;B({active:!0,done:ut,total:Oe,current:xt});const pn=await Qd(Cn);pn&&Xe(pn.lat)&&Xe(pn.lon)&&xt&&(Ot[xt]={lat:Number(pn.lat),lon:Number(pn.lon),ts:Date.now(),source:"geocode",q:Cn},He+=1),ut+=1;const Rn=Date.now()-_e;(He>=5||Rn>300)&&jt()}jt(),!K&&B({active:!1,done:ut,total:Oe,current:""})})(),()=>{K=!0}},[v,dt]);const gt=j.useMemo(()=>{if(v!=="map")return Rt;const K=T||{};return Rt.map(Oe=>{const Je=String((Oe==null?void 0:Oe.awb)||"").toUpperCase(),Ue=K[Je],Fe=sa(Oe);return Ue&&(!Ue.q||Ue.q===Fe)&&Xe(Ue.lat)&&Xe(Ue.lon)?{...Oe,latitude:Number(Ue.lat),longitude:Number(Ue.lon)}:Oe})},[v,Rt,T]),nt=20,[Qt,Re]=j.useState(1);j.useEffect(()=>{Re(1)},[a,v]);const rr=Math.ceil(Rt.length/nt),rs=v==="list"?Rt.slice((Qt-1)*nt,Qt*nt):Rt,gr=K=>K==="Delivered"?"from-emerald-500 to-emerald-600":K==="In Transit"?"from-blue-500 to-blue-600":"from-amber-500 to-amber-600",zi=K=>K==="Delivered"?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":K==="In Transit"?"bg-blue-500/20 text-blue-400 border-blue-500/30":"bg-amber-500/20 text-amber-400 border-amber-500/30";return m.jsxs(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-20 right-0 w-72 h-72 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"sticky top-0 z-40 glass-strong backdrop-blur-xl border-b border-white/10 pb-2 shadow-sm",children:[m.jsxs("div",{className:"p-4 flex items-center gap-4",children:[m.jsx("button",{onClick:()=>ae(-1),className:"p-2 -ml-2 rounded-xl glass-light text-slate-300 hover:text-white transition-colors border border-white/10",children:m.jsx(ks,{})}),m.jsx("h1",{className:"flex-1 font-black text-xl text-gradient tracking-tight",children:"Shipments"}),m.jsxs("div",{className:"flex glass-strong p-1 rounded-xl border border-white/10",children:[m.jsx("button",{onClick:()=>y("list"),className:`p-2 rounded-lg transition-all ${v==="list"?"bg-gradient-to-r from-violet-600 to-purple-600 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:m.jsx(Y_,{size:20})}),m.jsx("button",{onClick:()=>y("map"),className:`p-2 rounded-lg transition-all ${v==="map"?"bg-gradient-to-r from-violet-600 to-purple-600 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:m.jsx(K_,{size:20})})]}),m.jsx("button",{onClick:qe,className:`p-2 rounded-xl glass-light hover:bg-violet-500/20 text-violet-400 transition-all border border-white/10 ${n?"animate-spin":""}`,children:m.jsx(Bi,{size:20})})]}),m.jsx("div",{className:"px-4 pb-2",children:m.jsxs("div",{className:"relative group",children:[m.jsx(Os,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-violet-400 transition-colors z-10",size:18}),m.jsx("input",{type:"text",placeholder:"Search AWB, Client...",className:"w-full pl-12 pr-4 py-3.5 glass-strong rounded-2xl outline-none focus:ring-2 focus:ring-violet-500/30 border border-white/10 text-sm font-medium text-white placeholder-slate-500 transition-all",value:a,onChange:K=>c(K.target.value)})]})})]}),m.jsx("div",{className:"flex-1 p-4 space-y-3 pb-32 relative z-10",children:m.jsxs(ts,{mode:"wait",children:[Q&&m.jsx(rt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"glass-strong p-4 rounded-2xl border border-emerald-500/20 text-emerald-300 text-xs font-bold",children:Q}),n&&e.length===0?m.jsxs(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-violet-500/20 blur-xl rounded-full animate-pulse"}),m.jsx(fn,{className:"animate-spin relative z-10 text-violet-400",size:48})]}),m.jsx("p",{className:"mt-6 font-bold text-xs uppercase tracking-widest text-slate-500",children:"Syncing Data..."})]}):Rt.length===0?m.jsxs(rt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(Rs,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No shipments found"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Try adjusting your search"})]}):v==="map"?m.jsxs(rt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"h-[70vh] w-full rounded-3xl overflow-hidden border-iridescent shadow-2xl relative",children:[m.jsx(um,{shipments:gt,currentLocation:tt,originLocation:Vc(),routeGeometry:C}),R.active&&m.jsxs("div",{className:"absolute top-4 left-4 glass-strong rounded-2xl border border-white/10 px-4 py-3 text-white text-xs font-bold shadow-lg",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(fn,{className:"animate-spin text-violet-300",size:14}),m.jsx("span",{className:"uppercase tracking-widest text-[10px] text-slate-300",children:"Geocoding"})]}),m.jsxs("div",{className:"mt-1 text-[10px] text-slate-400 font-black uppercase tracking-wider",children:[R.done,"/",R.total," ",R.current?`(${R.current})`:""]}),m.jsx("div",{className:"mt-2 h-1.5 w-48 bg-white/10 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-gradient-to-r from-violet-500 to-purple-500",style:{width:`${Math.min(100,Math.round(R.done/Math.max(1,R.total)*100))}%`}})}),m.jsx("div",{className:"mt-2 text-[9px] text-slate-500 font-bold",children:"Tip: search a city/awb first to reduce requests."})]})]}):m.jsxs("div",{className:"space-y-3",children:[rs.map((K,Oe)=>{var Je,Ue,Fe,ut,Ot,He,_e,jt,$e,xt,Cn,pn,Rn,St,xr,is,re,xe;return m.jsxs(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:Oe*.05},className:`glass-strong rounded-3xl overflow-hidden transition-all duration-300 border border-white/10 ${f===Oe?"ring-2 ring-violet-500/30 shadow-glow-sm":""}`,children:[m.jsxs("div",{onClick:()=>{const we=f===Oe?null:Oe;g(we),we!==null&&oe(K.awb,{refresh:!1})},className:"p-5 flex items-center gap-4 cursor-pointer relative",children:[m.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shadow-sm bg-gradient-to-br ${gr(K.status)}`,children:m.jsx(Rs,{size:24,strokeWidth:2,className:"text-white"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[m.jsx("h3",{className:"font-mono text-[10px] font-black uppercase tracking-widest text-slate-500",children:K.awb}),m.jsxs("div",{className:"flex items-center gap-2",children:[(()=>{const we=Z6(K.awb);return we?m.jsx("span",{className:"text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border bg-emerald-500/15 text-emerald-300 border-emerald-500/20",children:Wc(we)}):null})(),m.jsx("span",{className:`text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border ${zi(K.status)}`,children:K.status||"Active"})]})]}),m.jsx("p",{className:"text-sm font-bold text-white truncate leading-tight mb-2",children:K.recipient_name}),m.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400",children:[m.jsx(Ms,{size:11,strokeWidth:2.5}),m.jsx("p",{className:"text-[10px] font-medium truncate",children:K.delivery_address||K.locality||"No Address"})]})]}),m.jsx(go,{className:`text-slate-500 transition-transform duration-300 ${f===Oe?"rotate-90 text-violet-400":""}`,size:20})]}),m.jsx(ts,{children:f===Oe&&m.jsx(rt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},children:m.jsxs("div",{className:"p-5 space-y-4 bg-black/20 border-t border-white/5",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"glass-light p-4 rounded-2xl flex items-center gap-3 border border-white/10",children:[m.jsx("div",{className:"p-2 bg-violet-500/20 rounded-xl",children:m.jsx(Wd,{size:16,className:"text-violet-400"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-0.5",children:"Contact"}),m.jsx("p",{className:"text-xs font-bold text-white truncate",children:K.recipient_phone||"--"})]})]}),m.jsxs("div",{className:"glass-light p-4 rounded-2xl flex items-center gap-3 border border-white/10",children:[m.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl",children:m.jsx(wa,{size:16,className:"text-emerald-400"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-0.5",children:"Recipient"}),m.jsx("p",{className:"text-xs font-bold text-white truncate",children:K.recipient_name})]})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Packages"}),m.jsx("p",{className:"text-sm font-black text-white",children:Number.isFinite(Number(K.number_of_parcels))?Number(K.number_of_parcels):((Je=K==null?void 0:K.raw_data)==null?void 0:Je.numberOfDistinctBarcodes)||((Ue=K==null?void 0:K.raw_data)==null?void 0:Ue.numberOfParcels)||1})]}),m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Payment"}),m.jsx("p",{className:"text-sm font-black text-white",children:De(K.payment_amount??K.shipping_cost??K.estimated_shipping_cost,K.currency||((Fe=K==null?void 0:K.raw_data)==null?void 0:Fe.currency)||"RON")}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold mt-1 truncate",children:K.shipping_cost?`Cost: ${De(K.shipping_cost,K.currency||"RON")}`:K.estimated_shipping_cost?`Est: ${De(K.estimated_shipping_cost,K.currency||"RON")}`:"Not loaded"})]}),m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"COD"}),m.jsx("p",{className:"text-sm font-black text-white",children:De(K.cod_amount,K.currency||"RON")})]}),m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Declared"}),m.jsx("p",{className:"text-sm font-black text-white",children:De(K.declared_value,K.currency||"RON")})]}),m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10 col-span-2",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Content"}),m.jsx("p",{className:"text-xs font-bold text-white truncate",children:K.content_description||((ut=K==null?void 0:K.raw_data)==null?void 0:ut.contentDescription)||((Ot=K==null?void 0:K.raw_data)==null?void 0:Ot.contents)||((He=K==null?void 0:K.raw_data)==null?void 0:He.content)||((_e=K==null?void 0:K.raw_data)==null?void 0:_e.packageContent)||((jt=K==null?void 0:K.raw_data)==null?void 0:jt.shipmentContent)||(($e=K==null?void 0:K.raw_data)==null?void 0:$e.goodsDescription)||((Cn=(xt=K==null?void 0:K.raw_data)==null?void 0:xt.additionalServices)==null?void 0:Cn.contentDescription)||((Rn=(pn=K==null?void 0:K.raw_data)==null?void 0:pn.additionalServices)==null?void 0:Rn.contents)||((xr=(St=K==null?void 0:K.raw_data)==null?void 0:St.additionalServices)==null?void 0:xr.content)||((re=(is=K==null?void 0:K.raw_data)==null?void 0:is.productCategory)==null?void 0:re.name)||(typeof((xe=K==null?void 0:K.raw_data)==null?void 0:xe.productCategory)=="string"?K.raw_data.productCategory:"")||"--"}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold mt-1 truncate",children:[K.dimensions?`Dims: ${K.dimensions}`:"",K.weight?`  W: ${Number(K.weight).toFixed(2)} kg`:"",K.volumetric_weight?`  Vol: ${Number(K.volumetric_weight).toFixed(2)} kg`:""]}),m.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:[K.shipment_reference?`Ref: ${K.shipment_reference}`:"",K.client_order_id?`  Order: ${K.client_order_id}`:""]}),m.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:[ee(K)?`Client: ${ee(K)}`:"",K.source_channel?`${ee(K)?"  ":""}Channel: ${K.source_channel}`:""]})]})]}),Array.isArray(K.tracking_history)&&K.tracking_history.length>0&&m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-2",children:"History"}),m.jsx("div",{className:"space-y-2",children:K.tracking_history.slice(0,4).map((we,Pe)=>m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsx("p",{className:"text-[11px] font-bold text-slate-200 truncate",children:(we==null?void 0:we.eventDescription)||(we==null?void 0:we.statusDescription)||"Update"}),m.jsx("p",{className:"text-[10px] font-bold text-slate-500 whitespace-nowrap",children:we!=null&&we.eventDate?new Date(we.eventDate).toLocaleString():""})]},Pe))})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("button",{onClick:()=>oe(K.awb,{refresh:!0}),className:`w-full btn-premium py-3 bg-gradient-to-r from-slate-700 to-slate-800 hover:from-slate-600 hover:to-slate-700 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm ${H[String((K==null?void 0:K.awb)||"").toUpperCase()]?"opacity-70 cursor-not-allowed":""}`,disabled:H[String((K==null?void 0:K.awb)||"").toUpperCase()],title:"Fetch full details + history from Postis",children:[m.jsx(Bi,{size:16,className:H[String((K==null?void 0:K.awb)||"").toUpperCase()]?"animate-spin":""}),"Details"]}),ne?m.jsxs("button",{onClick:()=>Le(K),className:`w-full btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm ${M[String((K==null?void 0:K.awb)||"").toUpperCase()]?"opacity-70 cursor-not-allowed":""}`,disabled:M[String((K==null?void 0:K.awb)||"").toUpperCase()]||String((K==null?void 0:K.status)||"").toLowerCase()==="delivered",title:"Mark as Delivered",children:[m.jsx(Eh,{size:16}),"Delivered"]}):m.jsx("div",{className:"w-full glass-light rounded-xl border border-white/10 flex items-center justify-center text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Read-only"})]}),m.jsxs("button",{onClick:()=>ot(K),className:"w-full btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm",children:[m.jsx(Q_,{size:16}),"View on Map"]}),Me&&String((K==null?void 0:K.driver_id)||"").trim()?m.jsxs("button",{onClick:()=>at(K.awb),disabled:!!ie[String((K==null?void 0:K.awb)||"").toUpperCase()],className:`w-full btn-premium py-3 bg-gradient-to-r from-sky-600 to-indigo-700 hover:from-sky-500 hover:to-indigo-600 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm ${ie[String((K==null?void 0:K.awb)||"").toUpperCase()]?"opacity-70 cursor-not-allowed":""}`,title:"Request driver live location",children:[ie[String((K==null?void 0:K.awb)||"").toUpperCase()]?m.jsx(fn,{size:16,className:"animate-spin"}):m.jsx(Ms,{size:16}),"Track Driver"]}):null,ye?m.jsxs("button",{onClick:()=>Nt(K.awb),disabled:!!ve[String((K==null?void 0:K.awb)||"").toUpperCase()],className:`w-full btn-premium py-3 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm ${ve[String((K==null?void 0:K.awb)||"").toUpperCase()]?"opacity-70 cursor-not-allowed":""}`,title:"Open chat",children:[ve[String((K==null?void 0:K.awb)||"").toUpperCase()]?m.jsx(fn,{size:16,className:"animate-spin"}):m.jsx(zc,{size:16}),"Chat"]}):null,ge?m.jsxs("button",{onClick:()=>yt(K.awb),className:"w-full btn-premium py-3 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm",children:[m.jsx(xo,{size:16}),Se?"Allocate to Truck":"Assign to Route"]}):null]})})})]},K.awb||Oe)}),rr>1&&m.jsxs("div",{className:"flex items-center justify-between pt-4 glass-strong rounded-2xl p-4 border border-white/10",children:[m.jsx("button",{onClick:()=>Re(K=>Math.max(1,K-1)),disabled:Qt===1,className:"p-2 rounded-xl hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-white",children:m.jsx(ks,{size:20})}),m.jsxs("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:["Page ",Qt," of ",rr]}),m.jsx("button",{onClick:()=>Re(K=>Math.min(rr,K+1)),disabled:Qt===rr,className:"p-2 rounded-xl hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-white",children:m.jsx(go,{size:20})})]})]})]})}),m.jsx(ts,{children:z.open&&m.jsx(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-end justify-center bg-black/60 backdrop-blur-sm p-4",onClick:()=>O({open:!1,awb:null}),children:m.jsxs(rt.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},exit:{y:30,opacity:0},className:"w-full max-w-md glass-strong rounded-3xl border-iridescent p-5 space-y-4",onClick:K=>K.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Assign AWB"}),m.jsx("p",{className:"text-sm font-bold text-white font-mono mt-1",children:z.awb})]}),m.jsx("button",{onClick:Ht,className:"px-4 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-300 text-[10px] font-black uppercase tracking-widest active:scale-95 transition-all",children:"Create Route"})]}),m.jsx("div",{className:"space-y-2 max-h-[45vh] overflow-y-auto",children:k.length===0?m.jsx("p",{className:"text-xs text-slate-500",children:"No routes yet. Tap Create Route."}):k.map(K=>m.jsxs("button",{onClick:()=>Ze(K.id),className:"w-full p-4 rounded-2xl border border-white/10 hover:border-emerald-500/30 transition-all text-left glass-light flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-sm font-bold text-white truncate",children:Wc(K)}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1",children:[K.date,"  ",Array.isArray(K.awbs)?K.awbs.length:0," stops",K.vehicle_plate?`  ${K.vehicle_plate}`:""]})]}),m.jsx("span",{className:"text-[10px] font-black text-emerald-300 uppercase tracking-wide",children:"Select"})]},K.id))})]})})})]})}function X6(){const[e,t]=j.useState(new Date),[n,i]=j.useState({}),[a,c]=j.useState(!0),f=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),g=new Date(e.getFullYear(),e.getMonth(),1).getDay(),v=()=>t(new Date(e.getFullYear(),e.getMonth()-1,1)),y=()=>t(new Date(e.getFullYear(),e.getMonth()+1,1)),C=e.toLocaleString("default",{month:"long"}),b=e.getFullYear();j.useEffect(()=>{(async()=>{c(!0);try{const B=localStorage.getItem("token"),z=new Date(e.getFullYear(),e.getMonth(),1).toISOString(),O=new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59).toISOString(),W=(await K1(B,{start_date:z,end_date:O,limit:2e3})).reduce((Q,G)=>{const H=new Date(G.timestamp).getDate();return Q[H]||(Q[H]=[]),Q[H].push(G),Q},{});i(W)}catch(B){console.error("Failed to fetch monthly deliveries",B)}finally{c(!1)}})()},[e]);const T=[];for(let R=0;R<g;R+=1)T.push(m.jsx("div",{className:"h-24"},`empty-${R}`));for(let R=1;R<=f;R+=1){const B=n[R]||[],z=B.length>0,O=R===new Date().getDate()&&e.getMonth()===new Date().getMonth()&&e.getFullYear()===new Date().getFullYear();T.push(m.jsxs("div",{className:`h-24 border-t border-white/5 p-2 relative flex flex-col items-center justify-center gap-1 transition-all duration-300 hover:bg-white/5 cursor-pointer group ${O?"bg-violet-500/10 border-violet-500/30":""}`,children:[m.jsx("span",{className:`text-xs font-black absolute top-2 right-2 transition-all ${O?"text-violet-400":"text-slate-500 group-hover:text-violet-300"}`,children:R}),z&&m.jsxs("div",{className:"flex flex-col items-center animate-scale-in",children:[m.jsx("div",{className:"p-2 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl text-white shadow-glow-sm",children:m.jsx(Rs,{size:16,strokeWidth:2.5})}),m.jsxs("span",{className:"text-[9px] font-black text-emerald-400 uppercase mt-1.5 tracking-wide",children:[B.length," AWB"]})]})]},R))}const I=Object.values(n).flat().length,F=I>0?(I/new Date().getDate()).toFixed(1):0;return m.jsxs("div",{className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-xl font-black text-gradient tracking-tight",children:"Delivery Calendar"}),m.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"Track your monthly performance"})]}),m.jsx("div",{className:"w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10",children:m.jsx(W_,{size:20,className:"text-violet-400"})})]}),m.jsxs("div",{className:"flex-1 p-4 pb-32 space-y-6 relative z-10",children:[m.jsxs("div",{className:"glass-strong rounded-[32px] shadow-2xl border-iridescent overflow-hidden animate-scale-in",children:[m.jsxs("div",{className:"p-6 flex items-center justify-between bg-gradient-to-r from-violet-600 via-purple-600 to-violet-700 text-white relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 shimmer opacity-20"}),m.jsx("button",{onClick:v,className:"p-2.5 hover:bg-white/20 rounded-xl transition-all active:scale-95 relative z-10 magnetic",children:m.jsx(UI,{size:20,strokeWidth:2.5})}),m.jsxs("h2",{className:"text-lg font-black uppercase tracking-widest relative z-10",children:[C," ",b]}),m.jsx("button",{onClick:y,className:"p-2.5 hover:bg-white/20 rounded-xl transition-all active:scale-95 relative z-10 magnetic",children:m.jsx(go,{size:20,strokeWidth:2.5})})]}),m.jsxs("div",{className:"grid grid-cols-7 text-center py-4 bg-black/20 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:[m.jsx("div",{children:"Sun"}),m.jsx("div",{children:"Mon"}),m.jsx("div",{children:"Tue"}),m.jsx("div",{children:"Wed"}),m.jsx("div",{children:"Thu"}),m.jsx("div",{children:"Fri"}),m.jsx("div",{children:"Sat"})]}),m.jsxs("div",{className:"grid grid-cols-7 relative min-h-[400px]",children:[a&&m.jsx("div",{className:"absolute inset-0 glass-strong z-10 flex items-center justify-center backdrop-blur-sm",children:m.jsxs("div",{className:"text-center",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-violet-500/20 blur-xl rounded-full animate-pulse"}),m.jsx(fn,{className:"animate-spin relative z-10 text-violet-400",size:48})]}),m.jsx("p",{className:"mt-6 font-bold text-xs uppercase tracking-widest text-slate-500",children:"Loading..."})]})}),T]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Monthly Insights"}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"glass-strong p-5 rounded-2xl border-iridescent animate-scale-in",style:{animationDelay:"0.1s"},children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("div",{className:"p-2 bg-violet-500/20 rounded-lg",children:m.jsx(Rs,{size:16,className:"text-violet-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Total"})]}),m.jsx("p",{className:"text-3xl font-black text-gradient-purple",children:I}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium mt-1",children:"Deliveries"})]}),m.jsxs("div",{className:"glass-strong p-5 rounded-2xl border-iridescent animate-scale-in",style:{animationDelay:"0.2s"},children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:m.jsx(Gd,{size:16,className:"text-emerald-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Average"})]}),m.jsx("p",{className:"text-3xl font-black text-gradient-blue",children:F}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium mt-1",children:"Per Day"})]})]}),m.jsxs("div",{className:"glass-strong p-5 rounded-2xl border-iridescent flex items-center gap-4 animate-scale-in",style:{animationDelay:"0.3s"},children:[m.jsx("div",{className:"p-4 bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl shadow-glow-sm",children:m.jsx(tb,{size:24,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:"text-sm font-black text-white",children:"Active Month"}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-medium uppercase tracking-wide mt-1",children:[I," shipments processed in ",C]})]})]})]})]})]})}const Zy=e=>{try{return String(e||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim().toLowerCase()}catch{return String(e||"").trim().toLowerCase()}};function q6(){const e=mr(),{user:t}=Jn(),[n,i]=j.useState([]),[a,c]=j.useState(""),[f,g]=j.useState(new Date().toISOString().slice(0,10)),[v,y]=j.useState(()=>{try{return localStorage.getItem("arynik_last_vehicle_plate_v1")||""}catch{return""}}),[C,b]=j.useState([]),[T,I]=j.useState(!1),[F,R]=j.useState(""),B=()=>i(mc()),z=()=>b(Wy(f));j.useEffect(()=>{B()},[]),j.useEffect(()=>{try{const G=Wy(f);(!G||G.length<oa.length)&&wp({date:f,shipments:[],driver_id:(t==null?void 0:t.driver_id)||null})}catch{}B(),z()},[f]);const O=()=>{const H=String(a||"").trim()||`Route ${new Date().toLocaleDateString()}`,q=String(v||"").trim().toUpperCase(),M=NC({name:H,driver_id:(t==null?void 0:t.driver_id)||null,driver_name:(t==null?void 0:t.name)||null,helper_name:(t==null?void 0:t.helper_name)||null,vehicle_plate:q||null,date:f});if(c(""),q)try{localStorage.setItem("arynik_last_vehicle_plate_v1",q)}catch{}B(),e(`/routes/${M.id}`)},k=async()=>{I(!0),R("");try{const G=t==null?void 0:t.token,H=await su(G),q=wp({date:f,shipments:H,driver_id:(t==null?void 0:t.driver_id)||null});R(`Created ${q.created_routes} routes  Allocated ${q.allocated_awbs} AWBs  Moldova deliverables: ${q.deliverable_in_moldova}`+(q.missing_county?`  Missing county: ${q.missing_county}`:""))}catch(G){console.warn("Daily route generation failed",G),R("Failed to generate daily routes (check API / shipment sync).")}finally{I(!1),B(),z()}},W=G=>{window.confirm("Delete this route?")&&(H6(G),B())},Q=j.useMemo(()=>{const G=new Map;return(Array.isArray(C)?C:[]).forEach(H=>{const q=Zy((H==null?void 0:H.county)||(H==null?void 0:H.name));q&&G.set(q,H)}),G},[C]);return m.jsxs(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-violet-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-xl font-black text-gradient tracking-tight",children:"Routes"}),m.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"Create routes and allocate AWBs"})]}),m.jsx("div",{className:"w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10",children:m.jsx(xo,{size:20,className:"text-emerald-400"})})]}),m.jsxs("div",{className:"flex-1 p-4 pb-32 space-y-6 relative z-10",children:[m.jsxs("div",{className:"glass-strong p-5 rounded-3xl border-iridescent space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Daily Routes (Moldova)"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1 truncate",children:"Bacau, Iasi, Neamt, Galati, Botosani, Suceava, Vaslui"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"date",value:f,onChange:G=>g(G.target.value),className:"px-3 py-2 bg-slate-900/50 border border-slate-700/50 rounded-2xl text-white focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-xs font-bold"}),m.jsxs("button",{onClick:k,disabled:T,className:`px-4 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 text-[10px] font-black uppercase tracking-widest active:scale-95 transition-all flex items-center gap-2 ${T?"opacity-60 cursor-not-allowed":""}`,title:"Create the 7 county routes and auto-allocate deliverable AWBs",children:[m.jsx(Bi,{size:14,className:T?"animate-spin":""}),"Generate"]})]})]}),F&&m.jsx("div",{className:"glass-light p-4 rounded-2xl border border-emerald-500/20 text-emerald-200 text-xs font-bold",children:F}),m.jsx("div",{className:"grid grid-cols-2 gap-3",children:oa.map(G=>{const H=Q.get(Zy(G.name)),q=Array.isArray(H==null?void 0:H.awbs)?H.awbs.length:0,M=H?TC(H):"";return m.jsxs("button",{onClick:()=>H&&e(`/routes/${H.id}`),disabled:!H,className:`p-4 rounded-3xl border transition-all text-left flex items-center justify-between gap-3 ${H?"glass-strong border-white/10 hover:border-emerald-500/30":"bg-slate-900/30 border-slate-800/50 opacity-60 cursor-not-allowed"}`,title:H?"Open route":"Generate routes first",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-white font-black truncate",children:G.name}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1",children:[f,"  ",q," stops"]}),M&&m.jsx("p",{className:"text-[10px] text-emerald-200 font-black uppercase tracking-wide mt-1 truncate",children:M})]}),m.jsx("div",{className:`w-10 h-10 rounded-2xl flex items-center justify-center border ${H?"bg-emerald-500/15 border-emerald-500/20 text-emerald-300":"bg-slate-800/30 border-white/5 text-slate-500"}`,children:m.jsx(Hd,{size:18})})]},G.code)})})]}),m.jsxs("div",{className:"glass-strong p-5 rounded-3xl border-iridescent space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"New Route"}),m.jsxs("span",{className:"text-[10px] font-bold text-slate-500",children:["Driver: ",m.jsx("span",{className:"text-slate-300 font-mono",children:(t==null?void 0:t.name)||(t==null?void 0:t.driver_id)||"N/A"})]})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[m.jsx("input",{value:a,onChange:G=>c(G.target.value),placeholder:"Route label (optional)",className:"col-span-2 px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-2xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium"}),m.jsx("input",{type:"date",value:f,onChange:G=>g(G.target.value),className:"px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-2xl text-white focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium"}),m.jsx("input",{value:v,onChange:G=>y(G.target.value),placeholder:"Vehicle plate (ex: BC75ARI)",className:"col-span-3 px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-2xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium font-mono tracking-wider"})]}),m.jsxs("button",{onClick:O,className:"w-full btn-premium py-4 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white rounded-2xl font-bold shadow-lg hover:shadow-glow-md transition-all flex items-center justify-center gap-2",children:[m.jsx(pc,{size:18}),"Create Route"]})]}),n.length===0?m.jsxs("div",{className:"text-center py-16 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(xo,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No routes yet"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Create your first route above"})]}):m.jsxs("div",{className:"space-y-3",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Your Routes"}),n.map(G=>m.jsx("div",{className:"glass-strong p-5 rounded-3xl border border-white/10 hover:border-emerald-500/30 transition-all group",children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-emerald-600 to-emerald-700 flex items-center justify-center shadow-glow-sm",children:m.jsx(xo,{size:18,className:"text-white"})}),m.jsx("div",{className:"flex-1 min-w-0",children:m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-white font-black truncate",children:Wc(G)}),String((G==null?void 0:G.county)||(G==null?void 0:G.name)||"").trim()&&String((G==null?void 0:G.county)||(G==null?void 0:G.name)||"").trim()!==Wc(G)&&m.jsx("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-wide mt-1 truncate",children:String((G==null?void 0:G.county)||(G==null?void 0:G.name)||"").trim()}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1",children:[G.date||"No date","  ",Array.isArray(G.awbs)?G.awbs.length:0," stops",G.vehicle_plate?`  ${G.vehicle_plate}`:""]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>W(G.id),className:"p-2 rounded-xl glass-light border border-white/10 text-rose-400 hover:bg-rose-500/10 active:scale-95 transition-all",title:"Delete route",children:m.jsx(Zd,{size:18})}),m.jsx("button",{onClick:()=>e(`/routes/${G.id}`),className:"p-2 rounded-xl glass-light border border-white/10 text-emerald-400 hover:bg-emerald-500/10 active:scale-95 transition-all",title:"Open route",children:m.jsx(Hd,{size:18})})]})]})})]})},G.id))]})]})]})}const IC="arynik_helpers_v1",K6=e=>{try{return localStorage.getItem(e)}catch{return null}},Q6=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},pm=e=>{const t=String(e||"").trim();return t?t.replace(/\s+/g," "):""},Jd=e=>pm(e).toLowerCase(),vp=()=>{const e=K6(IC);if(!e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t.map(pm).filter(Boolean).filter((n,i,a)=>a.findIndex(c=>Jd(c)===Jd(n))===i).sort((n,i)=>n.localeCompare(i,void 0,{sensitivity:"base"})):[]}catch{return[]}},$6=e=>{const t=pm(e);if(!t)return vp();const n=vp();if(n.some(c=>Jd(c)===Jd(t)))return n;const a=[...n,t].sort((c,f)=>c.localeCompare(f,void 0,{sensitivity:"base"}));return Q6(IC,JSON.stringify(a)),a},J6=(e,t,n)=>{const i=Array.isArray(e)?e.slice():[],a=String(t||"").trim().toUpperCase(),c=String(n||"").trim().toUpperCase();if(!a||!c)return i;const f=i.findIndex(C=>String(C||"").toUpperCase()===a),g=i.findIndex(C=>String(C||"").toUpperCase()===c);if(f===-1||g===-1||f===g)return i;const[v]=i.splice(f,1),y=f<g?Math.max(0,g-1):g;return i.splice(y,0,v),i},eM=({open:e,title:t,children:n,onClose:i})=>m.jsx(ts,{children:e&&m.jsx(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[70] flex items-end justify-center bg-black/70 backdrop-blur-sm p-4",onClick:i,children:m.jsxs(rt.div,{initial:{y:24,opacity:0},animate:{y:0,opacity:1},exit:{y:24,opacity:0},className:"w-full max-w-md glass-strong rounded-3xl border-iridescent p-5 space-y-4",onClick:a=>a.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsx("div",{className:"min-w-0",children:m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:t})}),m.jsx("button",{type:"button",onClick:i,className:"p-2 rounded-2xl glass-light border border-white/10 text-slate-300 hover:text-white active:scale-95 transition-all","aria-label":"Close",children:m.jsx(va,{size:18})})]}),n]})})});function tM(){const{routeId:e}=w1(),t=mr(),{user:n}=Jn(),i=Tn(n,Xa),a=j.useMemo(()=>Tn(n,yo),[n]),c=j.useMemo(()=>Tn(n,H1),[n]),{location:f}=nm(),[g,v]=j.useState(null),[y,C]=j.useState([]),[b,T]=j.useState(!0),[I,F]=j.useState(""),[R,B]=j.useState(""),[z,O]=j.useState("list"),[k,W]=j.useState(""),[Q,G]=j.useState(""),[H,q]=j.useState(""),[M,X]=j.useState([]),[ie,se]=j.useState(!1),[ve,Ee]=j.useState(()=>vp()),[ae,de]=j.useState(!1),[ke,ne]=j.useState(""),[Se,ye]=j.useState(""),[ge,Me]=j.useState({}),[qe,De]=j.useState({active:!1,done:0,total:0,current:""}),[ee,oe]=j.useState(null),[Le,at]=j.useState({distance_km:null,duration_min:null}),[Nt,tt]=j.useState(null),[ot,yt]=j.useState({active:!1,dragging:"",over:""}),Ze=j.useRef({active:!1,dragging:"",over:"",pointer_id:null,last_over:""}),Ht=j.useRef(null),Rt=j.useRef(null),Wt=f?{lat:f.latitude,lon:f.longitude}:null,dt=Vc();j.useEffect(()=>{Rt.current=g},[g]);const gt=(re,xe="RON")=>{const we=Number(re);return Number.isFinite(we)?`${we.toFixed(2)} ${String(xe||"RON").toUpperCase()}`:"--"};j.useEffect(()=>{const re=fm(e);v(re)},[e]),j.useEffect(()=>{W(String((g==null?void 0:g.vehicle_plate)||"").toUpperCase()),G(String((g==null?void 0:g.driver_name)||"").trim()),q(String((g==null?void 0:g.helper_name)||"").trim())},[g==null?void 0:g.vehicle_plate,g==null?void 0:g.driver_name,g==null?void 0:g.helper_name,g==null?void 0:g.id]),j.useEffect(()=>{if(!a)return;let re=!1;return(async()=>{se(!0);try{const xe=n==null?void 0:n.token,we=await q1(xe);re||X(Array.isArray(we)?we:[])}catch(xe){console.warn("Failed to load users list",xe),re||X([])}finally{re||se(!1)}})(),()=>{re=!0}},[a,n==null?void 0:n.token]);const nt=j.useMemo(()=>{const re=new Map;return(Array.isArray(M)?M:[]).forEach(xe=>{const we=String((xe==null?void 0:xe.driver_id)||"").trim().toUpperCase();we&&re.set(we,xe)}),re},[M]),Qt=j.useMemo(()=>(Array.isArray(M)?M:[]).filter(re=>String((re==null?void 0:re.role)||"").trim().toLowerCase()==="driver"&&(re==null?void 0:re.active)!==!1).slice().sort((re,xe)=>String((re==null?void 0:re.driver_id)||"").localeCompare(String((xe==null?void 0:xe.driver_id)||""))),[M]),Re=j.useMemo(()=>{const re=new Set,xe=[],we=Pe=>{const Ke=String(Pe||"").trim().replace(/\s+/g," ");if(!Ke)return;const wt=Ke.toLowerCase();re.has(wt)||(re.add(wt),xe.push(Ke))};return(Array.isArray(ve)?ve:[]).forEach(we),(Array.isArray(M)?M:[]).forEach(Pe=>we(Pe==null?void 0:Pe.helper_name)),we(H),xe.sort((Pe,Ke)=>Pe.localeCompare(Ke,void 0,{sensitivity:"base"}))},[ve,M,H]),rr=()=>{if(!g)return;const re=String(k||"").trim().toUpperCase(),xe=$s(g.id,{vehicle_plate:re||null});if(xe&&v(xe),re)try{localStorage.setItem("arynik_last_vehicle_plate_v1",re)}catch{}},rs=()=>{if(!g)return;const re=String(Q||"").trim(),xe=$s(g.id,{driver_name:re||null});xe&&v(xe)},gr=()=>{if(!g)return;const re=String(H||"").trim(),xe=$s(g.id,{helper_name:re||null});xe&&v(xe)},zi=re=>{if(!g)return;const xe=String(re||"").trim();q(xe);const we=$s(g.id,{helper_name:xe||null});we&&v(we)},K=re=>{if(!g)return;const xe=String(re||"").trim().toUpperCase(),we=xe?nt.get(xe):null,Pe={driver_id:xe||null,driver_name:((we==null?void 0:we.name)||"").trim()||null};!g.vehicle_plate&&(we!=null&&we.truck_plate)&&(Pe.vehicle_plate=String(we.truck_plate).trim().toUpperCase()),!g.helper_name&&(we!=null&&we.helper_name)&&(Pe.helper_name=String(we.helper_name).trim());const Ke=$s(g.id,Pe);Ke&&v(Ke)},Oe=()=>{const re=String(ke||"").trim();if(!re){ye("Helper name is required.");return}const xe=$6(re);Ee(xe),de(!1),ne(""),ye(""),zi(re)};j.useEffect(()=>{if(!g||nt.size===0)return;const re=String((g==null?void 0:g.driver_id)||"").trim().toUpperCase();if(!re)return;const xe=nt.get(re);if(!xe)return;const we={},Pe=String((xe==null?void 0:xe.name)||"").trim(),Ke=String((xe==null?void 0:xe.helper_name)||"").trim(),wt=String((xe==null?void 0:xe.truck_plate)||"").trim().toUpperCase();if(Pe&&!String((g==null?void 0:g.driver_name)||"").trim()&&(we.driver_name=Pe),Ke&&!String((g==null?void 0:g.helper_name)||"").trim()&&(we.helper_name=Ke),wt&&!String((g==null?void 0:g.vehicle_plate)||"").trim()&&(we.vehicle_plate=wt),Object.keys(we).length===0)return;const lt=$s(g.id,we);lt&&v(lt)},[g==null?void 0:g.id,g==null?void 0:g.driver_id,nt]);const Je=async()=>{T(!0);try{const re=n==null?void 0:n.token,xe=await su(re);C(Array.isArray(xe)?xe:[])}catch(re){console.warn("Failed to load shipments",re),C([])}finally{T(!1)}};j.useEffect(()=>{Je()},[]);const Ue=j.useMemo(()=>{const re=new Map;return y.forEach(xe=>{xe!=null&&xe.awb&&re.set(String(xe.awb).toUpperCase(),xe)}),re},[y]),Fe=Array.isArray(g==null?void 0:g.awbs)?g.awbs:[],ut=j.useRef(Fe);j.useEffect(()=>{ut.current=Fe,Ze.current.active&&(Ze.current={active:!1,dragging:"",over:"",pointer_id:null,last_over:""},yt({active:!1,dragging:"",over:""}),tt(null),Ht.current=null)},[Fe.join("|")]);const Ot=Nt!==null?Nt:Fe,He=j.useMemo(()=>Ot.map(re=>{const xe=Ue.get(String(re).toUpperCase());return xe||{awb:re,status:"Unknown",recipient_name:"Unknown",delivery_address:"",locality:""}}),[Ot,Ue]),_e=j.useMemo(()=>He.map(re=>{const xe=String((re==null?void 0:re.awb)||"").toUpperCase(),we=sa(re),Pe=ge[xe],Ke=Pe&&(!Pe.q||Pe.q===we)&&Xe(Pe.lat)&&Xe(Pe.lon),wt=Xe(re==null?void 0:re.latitude)?Number(re.latitude):Ke?Number(Pe.lat):null,lt=Xe(re==null?void 0:re.longitude)?Number(re.longitude):Ke?Number(Pe.lon):null;return{...re,latitude:Number.isFinite(wt)?wt:null,longitude:Number.isFinite(lt)?lt:null}}),[He,ge]),jt=j.useMemo(()=>{const re=String(I||"").trim().toLowerCase();if(!re)return[];const xe=new Set(Ot.map(we=>String(we).toUpperCase()));return y.filter(we=>{const Pe=String((we==null?void 0:we.awb)||"").toLowerCase(),Ke=String((we==null?void 0:we.recipient_name)||"").toLowerCase();return(Pe.includes(re)||Ke.includes(re))&&!xe.has(String((we==null?void 0:we.awb)||"").toUpperCase())}).slice(0,30)},[I,y,Ot]),$e=async re=>{if(!g)return;const xe=yp(g.id,re,{scopeDate:!0});if(v(xe),B(""),F(""),xe&&i){const we=String((xe==null?void 0:xe.driver_id)||"").trim();if(!we)return;try{await Q1(n==null?void 0:n.token,re,we)}catch(Pe){console.warn("Allocation API failed",Pe)}}},xt=re=>{if(!g)return;const xe=W6(g.id,re);v(xe)};j.useEffect(()=>{Ht.current=Nt},[Nt]);const Cn=(re,xe)=>{var Ke;if(!g)return;const we=String(re||"").trim().toUpperCase();if(!we||Ze.current.active)return;if(xe){try{xe.preventDefault()}catch{}try{xe.stopPropagation()}catch{}}const Pe=Array.isArray(Ot)?Ot.slice():[];tt(Pe),Ht.current=Pe,Ze.current={active:!0,dragging:we,over:we,pointer_id:(xe==null?void 0:xe.pointerId)??null,last_over:we},yt({active:!0,dragging:we,over:we});try{(Ke=xe==null?void 0:xe.currentTarget)!=null&&Ke.setPointerCapture&&Number.isFinite(Number(xe.pointerId))&&xe.currentTarget.setPointerCapture(xe.pointerId)}catch{}},pn=()=>{if(!Ze.current.active)return;const re=Ht.current,xe=ut.current,we=Rt.current;if(Ze.current={active:!1,dragging:"",over:"",pointer_id:null,last_over:""},yt({active:!1,dragging:"",over:""}),!we||!we.id){tt(null),Ht.current=null;return}if(!Array.isArray(re)||!Array.isArray(xe)||re.join("|")===xe.join("|")){tt(null),Ht.current=null;return}const Pe=Hy(we.id,re);Pe&&v(Pe)};j.useEffect(()=>{if(!ot.active)return;const re=we=>{const Pe=Ze.current;if(!Pe.active||Pe.pointer_id!==null&&we.pointerId!==Pe.pointer_id)return;const Ke=document.elementFromPoint(we.clientX,we.clientY),wt=Ke&&Ke.closest?Ke.closest("[data-stop-awb]"):null,lt=wt?String(wt.getAttribute("data-stop-awb")||"").trim().toUpperCase():"";lt&&lt!==Pe.dragging&&lt!==Pe.last_over&&(Pe.last_over=lt,Pe.over=lt,yt(ir=>ir.over===lt?ir:{...ir,over:lt}),tt(ir=>{const $t=Array.isArray(ir)?ir:ut.current||[],en=J6($t,Pe.dragging,lt);return Ht.current=en,en}))},xe=()=>pn();return window.addEventListener("pointermove",re),window.addEventListener("pointerup",xe),window.addEventListener("pointercancel",xe),()=>{window.removeEventListener("pointermove",re),window.removeEventListener("pointerup",xe),window.removeEventListener("pointercancel",xe)}},[ot.active]),j.useEffect(()=>{Nt!==null&&Array.isArray(Nt)&&Nt.join("|")===Fe.join("|")&&(tt(null),Ht.current=null)},[Fe.join("|")]);const Rn=async()=>{if(!He||He.length===0)return;const re=He.length,xe=ge||{},we={},Pe=[];let Ke=0;for(const en of He){const It=String((en==null?void 0:en.awb)||"").toUpperCase();if(!It){Ke+=1;continue}const Ve=sa(en);if(Xe(en==null?void 0:en.latitude)&&Xe(en==null?void 0:en.longitude)){we[It]={lat:Number(en.latitude),lon:Number(en.longitude),ts:Date.now(),source:"shipment",q:Ve},Ke+=1;continue}const Yt=xe[It];if(Yt&&(!Yt.q||Yt.q===Ve)&&Xe(Yt.lat)&&Xe(Yt.lon)){Yt.q||(we[It]={...Yt,q:Ve}),Ke+=1;continue}const je=Hc(Ve);if(je){Xe(je.lat)&&Xe(je.lon)&&(we[It]={lat:Number(je.lat),lon:Number(je.lon),ts:Number(je.ts||Date.now()),source:"cache",q:Ve}),Ke+=1;continue}Pe.push({awb:It,query:Ve})}if(Object.keys(we).length>0&&Me(en=>({...en,...we})),Pe.length===0){De({active:!1,done:re,total:re,current:""});return}De({active:!0,done:Ke,total:re,current:""});let wt={},lt=0,ir=Date.now();const $t=()=>{if(Object.keys(wt).length===0)return;const en=wt;wt={},lt=0,ir=Date.now(),Me(It=>({...It,...en}))};for(const en of Pe){const{awb:It,query:Ve}=en;De({active:!0,done:Ke,total:re,current:It});const Yt=await Qd(Ve);Yt&&Xe(Yt.lat)&&Xe(Yt.lon)&&(wt[It]={lat:Number(Yt.lat),lon:Number(Yt.lon),ts:Date.now(),source:"geocode",q:Ve},lt+=1),Ke+=1;const je=Date.now()-ir;(lt>=3||je>300)&&$t()}$t(),De({active:!1,done:Ke,total:re,current:""})},St=async re=>{const xe=Array.isArray(re)?re:[],we=[],Pe=dt&&Xe(dt.lat)&&Xe(dt.lon)?{lat:Number(dt.lat),lon:Number(dt.lon)}:null;if(Pe&&we.push(Pe),xe.forEach($t=>{Xe($t==null?void 0:$t.latitude)&&Xe($t==null?void 0:$t.longitude)&&we.push({lat:Number($t.latitude),lon:Number($t.longitude)})}),Pe&&we.length>1&&we.push(Pe),we.length<2){oe(null),at({distance_km:null,duration_min:null});return}const Ke=await g6(we);Ke!=null&&Ke.geometry?oe(Ke.geometry):oe(null);const wt=Number((Ke==null?void 0:Ke.distance_m)||0),lt=Number((Ke==null?void 0:Ke.duration_s)||0);if(wt>0){at({distance_km:Math.round(wt/1e3*10)/10,duration_min:lt>0?Math.round(lt/60):null});return}let ir=0;for(let $t=0;$t<we.length-1;$t+=1)ir+=Xr(we[$t],we[$t+1]);at({distance_km:Math.round(ir*10)/10,duration_min:null})};j.useEffect(()=>{z==="map"&&(async()=>await Rn())()},[z,Fe.join("|")]),j.useEffect(()=>{z==="map"&&(qe.active||ot.active||St(_e))},[z,qe.active,ot.active,JSON.stringify(_e.map(re=>[re.awb,re.latitude,re.longitude]))]);const xr=()=>{if(!g)return;const re=_e.map(lt=>({awb:String((lt==null?void 0:lt.awb)||"").toUpperCase(),lat:Number(lt==null?void 0:lt.latitude),lon:Number(lt==null?void 0:lt.longitude)})).filter(lt=>lt.awb&&Xe(lt.lat)&&Xe(lt.lon));if(re.length<2)return;const xe=dt&&Xe(dt.lat)&&Xe(dt.lon)?{lat:Number(dt.lat),lon:Number(dt.lon)}:{lat:re[0].lat,lon:re[0].lon},Pe=xp(xe,re).map(lt=>lt.awb),Ke=Fe.filter(lt=>!Pe.includes(String(lt).toUpperCase())),wt=Hy(g.id,[...Pe,...Ke]);v(wt)},is=()=>{const re=_e.filter(wt=>Xe(wt==null?void 0:wt.latitude)&&Xe(wt==null?void 0:wt.longitude)).map(wt=>`${Number(wt.latitude)},${Number(wt.longitude)}`);if(re.length===0)return;const xe=dt&&Xe(dt.lat)&&Xe(dt.lon),we=xe?`${Number(dt.lat)},${Number(dt.lon)}`:re[0],Pe=xe&&re.length<=23,Ke=new URL("https://www.google.com/maps/dir/");if(Ke.searchParams.set("api","1"),Ke.searchParams.set("origin",we),Pe)Ke.searchParams.set("destination",we),Ke.searchParams.set("waypoints",re.join("|"));else{const wt=re[re.length-1];Ke.searchParams.set("destination",wt);const lt=xe?re.slice(0,-1):re.slice(1,-1);lt.length>0&&Ke.searchParams.set("waypoints",lt.join("|"))}window.open(Ke.toString(),"_blank","noopener,noreferrer")};return g?m.jsxs(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-violet-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"sticky top-0 z-40 glass-strong backdrop-blur-xl border-b border-white/10 pb-2 shadow-sm",children:[m.jsxs("div",{className:"p-4 flex items-center gap-4",children:[m.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-xl glass-light text-slate-300 hover:text-white transition-colors border border-white/10",children:m.jsx(ks,{})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h1",{className:"font-black text-xl text-gradient tracking-tight truncate",children:Wc(g)}),m.jsxs("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wide mt-1",children:[g.date,"  ",Fe.length," stops",g.county?`  ${g.county}`:g.name?`  ${g.name}`:""]})]}),m.jsxs("div",{className:"flex glass-strong p-1 rounded-xl border border-white/10",children:[m.jsx("button",{onClick:()=>O("list"),className:`p-2 rounded-lg transition-all ${z==="list"?"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:m.jsx(Y_,{size:20})}),m.jsx("button",{onClick:()=>O("map"),className:`p-2 rounded-lg transition-all ${z==="map"?"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:m.jsx(K_,{size:20})})]})]}),m.jsxs("div",{className:"px-4 pb-2 space-y-3",children:[m.jsxs("div",{className:"glass-strong rounded-2xl border border-white/10 p-4 space-y-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center",children:m.jsx(V1,{size:18,className:"text-emerald-300"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[9px] uppercase font-black text-slate-500 tracking-[0.2em]",children:"Truck & Crew"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold mt-1 truncate",children:"Route title = plate + driver (+ helper)"})]}),ie&&m.jsx("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide",children:"Loading..."})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("div",{className:"glass-light rounded-2xl border border-white/10 p-3",children:[m.jsx("p",{className:"text-[9px] uppercase font-black text-slate-500 tracking-[0.2em] mb-1",children:"Plate"}),m.jsx("input",{value:k,onChange:re=>W(re.target.value.toUpperCase()),onBlur:rr,placeholder:"BC75ARI",className:"w-full bg-transparent outline-none text-white font-mono text-sm tracking-wider placeholder-slate-600"})]}),m.jsxs("div",{className:"glass-light rounded-2xl border border-white/10 p-3",children:[m.jsx("p",{className:"text-[9px] uppercase font-black text-slate-500 tracking-[0.2em] mb-1",children:"Driver"}),a?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("select",{value:String((g==null?void 0:g.driver_id)||"").trim().toUpperCase(),onChange:re=>K(re.target.value),className:"w-full bg-transparent outline-none text-white text-xs font-bold",children:[m.jsx("option",{value:"",children:"Unassigned"}),(()=>{const re=String((g==null?void 0:g.driver_id)||"").trim().toUpperCase(),xe=re&&Qt.some(we=>String((we==null?void 0:we.driver_id)||"").trim().toUpperCase()===re);return re&&!xe?m.jsx("option",{value:re,children:re}):null})(),Qt.map(re=>m.jsxs("option",{value:String(re.driver_id||"").trim().toUpperCase(),children:[String(re.driver_id||"").trim().toUpperCase(),"  ",String(re.name||"").trim()||"Unnamed"]},re.driver_id))]}),c&&m.jsx("button",{type:"button",onClick:()=>t(`/users?create=1&role=Driver&returnTo=${encodeURIComponent(`/routes/${e}`)}`),className:"p-2 rounded-xl glass-strong border border-white/10 text-emerald-300 hover:bg-emerald-500/10 active:scale-95 transition-all",title:"Add driver","aria-label":"Add driver",children:m.jsx(pc,{size:16})})]}):m.jsx("input",{value:Q,onChange:re=>G(re.target.value),onBlur:rs,placeholder:g!=null&&g.driver_id?`Driver name (for ${g.driver_id})`:"Driver name",className:"w-full bg-transparent outline-none text-white text-sm font-bold placeholder-slate-600"})]}),m.jsxs("div",{className:"glass-light rounded-2xl border border-white/10 p-3 col-span-2",children:[m.jsx("p",{className:"text-[9px] uppercase font-black text-slate-500 tracking-[0.2em] mb-1",children:"Helper"}),a?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("select",{value:String(H||"").trim(),onChange:re=>zi(re.target.value),className:"w-full bg-transparent outline-none text-white text-xs font-bold",children:[m.jsx("option",{value:"",children:"Unassigned"}),(()=>{const re=String(H||"").trim(),xe=re&&Re.some(we=>String(we||"").trim().toLowerCase()===re.toLowerCase());return re&&!xe?m.jsx("option",{value:re,children:re}):null})(),Re.map(re=>m.jsx("option",{value:re,children:re},String(re).toLowerCase()))]}),c&&m.jsx("button",{type:"button",onClick:()=>{de(!0),ne(""),ye("")},className:"p-2 rounded-xl glass-strong border border-white/10 text-emerald-300 hover:bg-emerald-500/10 active:scale-95 transition-all",title:"Add helper","aria-label":"Add helper",children:m.jsx(pc,{size:16})})]}):m.jsx("input",{value:H,onChange:re=>q(re.target.value),onBlur:gr,placeholder:"Helper name (optional)",className:"w-full bg-transparent outline-none text-white text-sm font-bold placeholder-slate-600"})]})]})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[m.jsx("input",{value:R,onChange:re=>B(re.target.value),placeholder:"Add AWB...",className:"col-span-2 w-full px-4 py-3.5 glass-strong rounded-2xl outline-none focus:ring-2 focus:ring-emerald-500/30 border border-white/10 text-sm font-medium text-white placeholder-slate-500 transition-all"}),m.jsxs("button",{onClick:()=>$e(R),className:"btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white rounded-2xl font-bold shadow-lg hover:shadow-glow-md transition-all flex items-center justify-center gap-2",children:[m.jsx(pc,{size:18}),"Add"]})]}),m.jsxs("div",{className:"relative group",children:[m.jsx(Os,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-emerald-400 transition-colors z-10",size:18}),m.jsx("input",{type:"text",placeholder:"Search shipments to add...",className:"w-full pl-12 pr-4 py-3.5 glass-strong rounded-2xl outline-none focus:ring-2 focus:ring-emerald-500/30 border border-white/10 text-sm font-medium text-white placeholder-slate-500 transition-all",value:I,onChange:re=>F(re.target.value)})]}),I&&jt.length>0&&m.jsx("div",{className:"glass-strong rounded-2xl border border-white/10 overflow-hidden",children:jt.map(re=>m.jsxs("button",{onClick:()=>$e(re.awb),className:"w-full p-4 flex items-center gap-3 hover:bg-white/5 transition-all text-left border-b border-white/5 last:border-b-0",children:[m.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center",children:m.jsx(xo,{size:16,className:"text-emerald-400"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[10px] font-mono font-black text-slate-500 uppercase tracking-widest truncate",children:re.awb}),m.jsx("p",{className:"text-sm font-bold text-white truncate",children:re.recipient_name||"Unknown"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate",children:re.delivery_address||re.locality||""})]}),m.jsx("span",{className:"text-[10px] font-black text-emerald-400 uppercase tracking-wide",children:"Add"})]},re.awb))})]})]}),m.jsx("div",{className:"flex-1 p-4 space-y-3 pb-32 relative z-10",children:z==="map"?m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"glass-strong rounded-2xl border border-white/10 p-4 flex items-center justify-between gap-2",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Route Map"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate",children:qe.active?`Geocoding ${qe.done}/${qe.total} (${qe.current})`:'Tap "Optimize" for a quick route order'}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-bold mt-1",children:[Le.distance_km?`~${Le.distance_km} km`:"Distance: N/A",Le.duration_min?`  ~${Le.duration_min} min`:""]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:Rn,className:`p-2 rounded-xl glass-light border border-white/10 text-emerald-400 hover:bg-emerald-500/10 active:scale-95 transition-all ${qe.active?"opacity-60 cursor-not-allowed":""}`,disabled:qe.active,title:"Geocode stops",children:m.jsx(Bi,{size:18,className:qe.active?"animate-spin":""})}),m.jsx("button",{onClick:xr,className:"p-2 rounded-xl glass-light border border-white/10 text-amber-400 hover:bg-amber-500/10 active:scale-95 transition-all",title:"Optimize order",children:m.jsx(s8,{size:18})}),m.jsx("button",{onClick:is,className:"p-2 rounded-xl glass-light border border-white/10 text-slate-200 hover:bg-white/10 active:scale-95 transition-all",title:"Open in Google Maps",children:m.jsx(WI,{size:18})})]})]}),m.jsx("div",{className:"h-[70vh] w-full rounded-3xl overflow-hidden border-iridescent shadow-2xl",children:m.jsx(um,{shipments:_e,currentLocation:Wt,originLocation:dt,routeGeometry:ee,showStopNumbers:!0})}),m.jsxs("div",{className:"glass-strong rounded-2xl border border-white/10 p-4",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Stops"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate",children:"Drag the handle to reorder stops. Numbers on the map update automatically."})]}),ot.active&&m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-amber-300",children:"Reordering"})]}),m.jsx("div",{className:"mt-3 space-y-2 max-h-[32vh] overflow-y-auto",children:He.map((re,xe)=>{const we=String((re==null?void 0:re.awb)||"").toUpperCase(),Pe=ot.active&&ot.dragging===we,Ke=ot.active&&ot.over===we;return m.jsxs("div",{"data-stop-awb":we,className:`glass-light rounded-2xl border p-3 flex items-center gap-3 ${Ke?"border-emerald-500/40":"border-white/10"} ${Pe?"opacity-70":""}`,children:[m.jsx("button",{type:"button",className:"p-2 rounded-xl glass-strong border border-white/10 text-slate-200 active:scale-95 transition-all cursor-grab touch-none",onPointerDown:wt=>Cn(we,wt),title:"Drag to reorder","aria-label":"Drag to reorder",children:m.jsx(GI,{size:18})}),m.jsx("div",{className:"w-9 h-9 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center text-emerald-300 font-black",children:xe+1}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[10px] font-mono font-black text-slate-500 uppercase tracking-widest truncate",children:we}),m.jsx("p",{className:"text-sm font-bold text-white truncate mt-1",children:re.recipient_name||"Unknown"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate mt-1",children:re.delivery_address||re.locality||""})]}),m.jsx("button",{onClick:()=>xt(we),className:"p-2 rounded-xl glass-light border border-white/10 text-rose-400 hover:bg-rose-500/10 active:scale-95 transition-all",title:"Remove from route",children:m.jsx(Zd,{size:18})})]},we||xe)})})]})]}):m.jsx(ts,{mode:"wait",children:He.length===0?m.jsxs(rt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(xo,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No stops yet"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Add an AWB above to allocate it to this route"})]}):m.jsx("div",{className:"space-y-3",children:He.map((re,xe)=>{var we,Pe;return m.jsx(rt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:xe*.02},className:"glass-strong p-5 rounded-3xl border border-white/10",children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center text-emerald-400 font-black",children:xe+1}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[10px] font-mono font-black text-slate-500 uppercase tracking-widest truncate",children:re.awb}),m.jsx("p",{className:"text-sm font-bold text-white truncate mt-1",children:re.recipient_name||"Unknown"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate mt-1",children:re.delivery_address||re.locality||""}),m.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:[Number.isFinite(Number(re==null?void 0:re.number_of_parcels))?Number(re.number_of_parcels):((we=re==null?void 0:re.raw_data)==null?void 0:we.numberOfDistinctBarcodes)||((Pe=re==null?void 0:re.raw_data)==null?void 0:Pe.numberOfParcels)||1," ","pkg  ",gt(re.payment_amount??re.shipping_cost??re.estimated_shipping_cost,re.currency||"RON")]})]}),m.jsx("button",{onClick:()=>xt(re.awb),className:"p-2 rounded-xl glass-light border border-white/10 text-rose-400 hover:bg-rose-500/10 active:scale-95 transition-all",title:"Remove from route",children:m.jsx(Zd,{size:18})})]})},`${re.awb}-${xe}`)})})})}),m.jsx(eM,{open:ae,title:"Add Helper",onClose:()=>de(!1),children:m.jsxs("div",{className:"space-y-3",children:[m.jsx("input",{value:ke,onChange:re=>{ne(re.target.value),ye("")},placeholder:"Helper name (ex: Andrei Popescu)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"}),Se&&m.jsx("div",{className:"text-xs font-bold text-rose-200",children:Se}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{type:"button",onClick:()=>de(!1),className:"flex-1 px-4 py-3 rounded-2xl glass-light border border-white/10 text-slate-200 text-xs font-black uppercase tracking-widest hover:bg-white/10 active:scale-[0.99] transition-all",children:"Cancel"}),m.jsx("button",{type:"button",onClick:Oe,className:"flex-1 px-4 py-3 rounded-2xl bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white text-xs font-black uppercase tracking-widest active:scale-[0.99] transition-all",children:"Add"})]})]})})]}):m.jsx("div",{className:"min-h-screen flex items-center justify-center text-slate-400",children:"Route not found."})}const Yl=(e,t)=>{const n=Number(e)||0,i=Number(t)||0;return i?Math.round(n/i*100):0},Xl=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString()},Cr=(e,t)=>String(e||"").toLowerCase().includes(t),Nn=({label:e,value:t,tone:n="slate"})=>{const i={slate:"bg-slate-500/15 text-slate-300 border-white/10",emerald:"bg-emerald-500/15 text-emerald-300 border-emerald-400/20",rose:"bg-rose-500/15 text-rose-300 border-rose-400/20",violet:"bg-violet-500/15 text-violet-300 border-violet-400/20",amber:"bg-amber-500/15 text-amber-200 border-amber-400/20"};return m.jsxs("div",{className:`px-3 py-2 rounded-2xl border ${i[n]||i.slate}`,children:[m.jsx("div",{className:"text-[9px] font-black uppercase tracking-widest opacity-80",children:e}),m.jsx("div",{className:"text-sm font-black mt-0.5",children:t})]})},Uu=({active:e,icon:t,label:n,onClick:i})=>m.jsxs("button",{type:"button",onClick:i,className:`flex-1 p-3 rounded-2xl border transition-all flex items-center justify-center gap-2 ${e?"bg-gradient-to-br from-violet-600/30 to-purple-600/10 border-violet-400/30 text-white":"bg-slate-900/30 border-white/10 text-slate-300 hover:bg-white/5"}`,children:[m.jsx(t,{size:16,className:e?"text-violet-200":"text-slate-400"}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:n})]});function nM(){const{user:e}=Jn(),t=(e==null?void 0:e.token)||localStorage.getItem("token"),n=j.useMemo(()=>["Admin","Manager","Dispatcher","Support","Finance"].includes(e==null?void 0:e.role),[e==null?void 0:e.role]),[i,a]=j.useState(n?"all":"self"),[c,f]=j.useState("trucks"),[g,v]=j.useState(""),[y,C]=j.useState(null),[b,T]=j.useState(!0),[I,F]=j.useState("");j.useEffect(()=>{n||a("self")},[n]);const R=async()=>{var M,X;T(!0),F("");try{const ie=await jb(t,{scope:i});C(ie)}catch(ie){const se=((X=(M=ie==null?void 0:ie.response)==null?void 0:M.data)==null?void 0:X.detail)||(ie==null?void 0:ie.message)||"Failed to load analytics";F(String(se))}finally{T(!1)}};j.useEffect(()=>{R()},[t,i]);const B=j.useMemo(()=>String(g||"").trim().toLowerCase(),[g]),z=j.useMemo(()=>{const M=Array.isArray(y==null?void 0:y.trucks)?y.trucks:[];return B?M.filter(X=>Cr(X==null?void 0:X.truck_plate,B)||Cr(X==null?void 0:X.truck_phone,B)||Array.isArray(X==null?void 0:X.drivers)&&X.drivers.some(ie=>Cr(ie==null?void 0:ie.name,B)||Cr(ie==null?void 0:ie.driver_id,B))):M},[y==null?void 0:y.trucks,B]),O=j.useMemo(()=>{const M=Array.isArray(y==null?void 0:y.drivers)?y.drivers:[];return B?M.filter(X=>Cr(X==null?void 0:X.name,B)||Cr(X==null?void 0:X.driver_id,B)||Cr(X==null?void 0:X.truck_plate,B)||Cr(X==null?void 0:X.truck_phone,B)||Cr(X==null?void 0:X.role,B)):M},[y==null?void 0:y.drivers,B]),k=j.useMemo(()=>{const M=Array.isArray(y==null?void 0:y.awbs)?y.awbs:[];return B?M.filter(X=>Cr(X==null?void 0:X.awb,B)||Cr(X==null?void 0:X.status,B)||Cr(X==null?void 0:X.driver_id,B)):M},[y==null?void 0:y.awbs,B]),W=j.useMemo(()=>{const M=Array.isArray(y==null?void 0:y.events)?y.events:[];return B?M.filter(X=>Cr(X==null?void 0:X.event_id,B)||Cr(X==null?void 0:X.label,B)||Cr(X==null?void 0:X.description,B)):M},[y==null?void 0:y.events,B]),Q=(y==null?void 0:y.totals)||{},G=Number(Q==null?void 0:Q.updates_total)||0,H=Number(Q==null?void 0:Q.updates_success)||0,q=Number(Q==null?void 0:Q.shipments_total)||0;return m.jsxs(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,y:-20},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-glow-md",children:m.jsx(H_,{size:20,className:"text-white"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-lg font-black text-white leading-none",children:"Statistics"}),m.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mt-1",children:y!=null&&y.generated_at?`Updated ${Xl(y.generated_at)}`:"Mobile analytics"})]})]}),m.jsx("button",{type:"button",onClick:R,className:"w-11 h-11 rounded-2xl glass-light border border-white/10 flex items-center justify-center hover:bg-white/5 transition-all","aria-label":"Refresh analytics",children:m.jsx(Bi,{size:18,className:b?"animate-spin text-slate-300":"text-slate-300"})})]}),m.jsxs("div",{className:"mt-5 flex items-center gap-3",children:[m.jsx(Nn,{label:"Shipments",value:q,tone:"violet"}),m.jsx(Nn,{label:"Updates",value:G,tone:"slate"}),m.jsx(Nn,{label:"Success",value:`${Yl(H,G)}%`,tone:"emerald"})]}),m.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[m.jsx("div",{className:"flex-1",children:m.jsxs("div",{className:"relative",children:[m.jsx(Os,{size:16,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500"}),m.jsx("input",{value:g,onChange:M=>v(M.target.value),placeholder:"Search truck, driver, AWB, ESCH...",className:"w-full pl-11 pr-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-500 focus:outline-none focus:border-violet-500/40 focus:ring-2 focus:ring-violet-500/20 transition-all text-sm font-medium"})]})}),n?m.jsxs("div",{className:"p-1 rounded-2xl bg-slate-900/40 border border-white/10 flex",children:[m.jsx("button",{type:"button",onClick:()=>a("self"),className:`px-3 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${i==="self"?"bg-white/10 text-white":"text-slate-400 hover:text-slate-200"}`,children:"My"}),m.jsx("button",{type:"button",onClick:()=>a("all"),className:`px-3 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${i==="all"?"bg-white/10 text-white":"text-slate-400 hover:text-slate-200"}`,children:"All"})]}):null]}),m.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[m.jsx(Uu,{active:c==="trucks",icon:V1,label:"Trucks",onClick:()=>f("trucks")}),m.jsx(Uu,{active:c==="drivers",icon:wa,label:"Drivers",onClick:()=>f("drivers")}),m.jsx(Uu,{active:c==="awbs",icon:Rs,label:"AWB",onClick:()=>f("awbs")}),m.jsx(Uu,{active:c==="events",icon:U_,label:"ESCH",onClick:()=>f("events")})]})]}),m.jsx("main",{className:"flex-1 p-6 pb-32 relative z-10",children:m.jsx(ts,{mode:"wait",children:b?m.jsxs(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"glass-strong rounded-3xl border-iridescent p-8 flex items-center justify-center gap-3",children:[m.jsx(fn,{className:"animate-spin text-violet-300",size:20}),m.jsx("span",{className:"text-sm font-black text-white uppercase tracking-wider",children:"Loading analytics"})]},"loading"):I?m.jsx(rt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"bg-rose-500/10 border border-rose-500/30 text-rose-300 px-6 py-5 rounded-3xl font-bold",children:I},"error"):m.jsxs(rt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4",children:[c==="trucks"?m.jsx(m.Fragment,{children:z.length===0?m.jsx("div",{className:"text-slate-400 font-bold text-sm",children:"No trucks found."}):z.map(M=>{const X=Number(M==null?void 0:M.updates_total)||0,ie=Number(M==null?void 0:M.updates_success)||0,se=(M==null?void 0:M.shipments_by_bucket)||{};return m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-5",children:[m.jsxs("div",{className:"flex items-start justify-between gap-4",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Truck"}),m.jsx("div",{className:"text-xl font-black text-white truncate mt-1",children:(M==null?void 0:M.truck_plate)||"Unassigned"}),m.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["Phone: ",(M==null?void 0:M.truck_phone)||"--","  Drivers: ",Array.isArray(M==null?void 0:M.drivers)?M.drivers.length:0]})]}),m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("div",{className:"p-3 rounded-2xl bg-emerald-500/10 border border-emerald-400/20",children:m.jsx(Eh,{size:18,className:"text-emerald-300"})})})]}),m.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[m.jsx(Nn,{label:"Shipments",value:(M==null?void 0:M.shipments_total)||0,tone:"violet"}),m.jsx(Nn,{label:"Delivered",value:(se==null?void 0:se.delivered)||0,tone:"emerald"}),m.jsx(Nn,{label:"Active",value:(se==null?void 0:se.active)||0,tone:"amber"})]}),m.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-3",children:[m.jsx(Nn,{label:"Updates",value:X,tone:"slate"}),m.jsx(Nn,{label:"Success",value:`${Yl(ie,X)}%`,tone:"emerald"}),m.jsx(Nn,{label:"Last",value:M!=null&&M.last_update?Xl(M.last_update):"--",tone:"slate"})]})]},(M==null?void 0:M.truck_plate)||"unassigned")})}):null,c==="drivers"?m.jsx(m.Fragment,{children:O.length===0?m.jsx("div",{className:"text-slate-400 font-bold text-sm",children:"No drivers found."}):O.map(M=>{const X=Number(M==null?void 0:M.updates_total)||0,ie=Number(M==null?void 0:M.updates_success)||0,se=(M==null?void 0:M.shipments_by_bucket)||{};return m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-5",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Driver"}),m.jsx("div",{className:"text-xl font-black text-white truncate mt-1",children:(M==null?void 0:M.name)||(M==null?void 0:M.username)||(M==null?void 0:M.driver_id)}),m.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["ID: ",M==null?void 0:M.driver_id,"  ",(M==null?void 0:M.role)||"Role","  Truck: ",(M==null?void 0:M.truck_plate)||"--"]})]})}),m.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[m.jsx(Nn,{label:"Shipments",value:(M==null?void 0:M.shipments_total)||0,tone:"violet"}),m.jsx(Nn,{label:"Delivered",value:(se==null?void 0:se.delivered)||0,tone:"emerald"}),m.jsx(Nn,{label:"Active",value:(se==null?void 0:se.active)||0,tone:"amber"})]}),m.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-3",children:[m.jsx(Nn,{label:"Updates",value:X,tone:"slate"}),m.jsx(Nn,{label:"Success",value:`${Yl(ie,X)}%`,tone:"emerald"}),m.jsx(Nn,{label:"Last",value:M!=null&&M.last_update?Xl(M.last_update):"--",tone:"slate"})]}),m.jsxs("div",{className:"mt-3 text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["Last login: ",M!=null&&M.last_login?Xl(M.last_login):"--","  Truck phone: ",(M==null?void 0:M.truck_phone)||"--"]})]},M==null?void 0:M.driver_id)})}):null,c==="awbs"?m.jsx(m.Fragment,{children:k.length===0?m.jsx("div",{className:"text-slate-400 font-bold text-sm",children:"No AWBs found."}):k.map(M=>{const X=Number(M==null?void 0:M.updates_total)||0,ie=Number(M==null?void 0:M.updates_success)||0;return m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-5",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"AWB"}),m.jsx("div",{className:"text-lg font-black text-white truncate mt-1",children:M==null?void 0:M.awb}),m.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["Status: ",(M==null?void 0:M.status)||"--","  Driver: ",(M==null?void 0:M.driver_id)||"--"]})]})}),m.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[m.jsx(Nn,{label:"Updates",value:X,tone:"slate"}),m.jsx(Nn,{label:"Success",value:`${Yl(ie,X)}%`,tone:"emerald"}),m.jsx(Nn,{label:"Last",value:M!=null&&M.last_update?Xl(M.last_update):"--",tone:"slate"})]}),m.jsxs("div",{className:"mt-3 text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["ESCH: ",(M==null?void 0:M.last_event_id)||"--","  Outcome: ",(M==null?void 0:M.last_outcome)||"--"]})]},M==null?void 0:M.awb)})}):null,c==="events"?m.jsx(m.Fragment,{children:W.length===0?m.jsx("div",{className:"text-slate-400 font-bold text-sm",children:"No ESCH events found."}):W.map(M=>{const X=Number(M==null?void 0:M.total)||0,ie=Number(M==null?void 0:M.success)||0;return m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-5",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"ESCH"}),m.jsxs("div",{className:"text-lg font-black text-white truncate mt-1",children:[M==null?void 0:M.event_id," ",M!=null&&M.label?` ${M.label}`:""]}),M!=null&&M.description?m.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:M.description}):null]})}),m.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[m.jsx(Nn,{label:"Total",value:X,tone:"slate"}),m.jsx(Nn,{label:"Success",value:`${Yl(ie,X)}%`,tone:"emerald"}),m.jsx(Nn,{label:"Failed",value:Number(M==null?void 0:M.failed)||0,tone:"rose"})]})]},M==null?void 0:M.event_id)})}):null]},c)})})]})}function rM(){const{user:e}=Jn(),t=(e==null?void 0:e.token)||localStorage.getItem("token"),[n,i]=j.useState([]),[a,c]=j.useState(!0),[f,g]=j.useState(null),[v,y]=j.useState(""),C=j.useMemo(()=>Array.isArray(n)?n.filter(I=>!(I!=null&&I.read_at)).length:0,[n]),b=async()=>{var I,F;c(!0),y("");try{const R=await $1(t,{limit:100,unread_only:!1});i(Array.isArray(R)?R:[])}catch(R){y(String(((F=(I=R==null?void 0:R.response)==null?void 0:I.data)==null?void 0:F.detail)||(R==null?void 0:R.message)||"Failed to load notifications")),i([])}finally{c(!1)}};j.useEffect(()=>{b()},[]);const T=async I=>{var R,B;const F=I;if(F){g(F);try{const z=await Xd(t,F);i(O=>Array.isArray(O)?O.map(k=>String(k==null?void 0:k.id)===String(F)?z:k):O)}catch(z){y(String(((B=(R=z==null?void 0:z.response)==null?void 0:R.data)==null?void 0:B.detail)||(z==null?void 0:z.message)||"Failed to mark read"))}finally{g(null)}}};return m.jsxs(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsxs("h1",{className:"text-xl font-black text-gradient tracking-tight flex items-center gap-2",children:[m.jsx(Fc,{size:18,className:"text-violet-300"}),"Notifications"]}),m.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1 truncate",children:[C," unread"]})]}),m.jsx("button",{type:"button",onClick:b,className:`w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10 text-slate-200 hover:bg-white/5 active:scale-95 transition-all ${a?"opacity-60 cursor-not-allowed":""}`,disabled:a,"aria-label":"Refresh",children:m.jsx(Bi,{size:18,className:a?"animate-spin":""})})]}),m.jsxs("main",{className:"flex-1 p-4 pb-32 space-y-3 relative z-10",children:[v?m.jsx("div",{className:"glass-strong p-4 rounded-2xl border border-rose-500/30 text-rose-300 text-sm font-bold",children:v}):null,a?m.jsxs("div",{className:"glass-strong p-6 rounded-3xl border border-white/10 flex items-center gap-3 text-slate-300",children:[m.jsx(fn,{className:"animate-spin",size:18}),m.jsx("span",{className:"text-sm font-bold",children:"Loading..."})]}):null,!a&&(!n||n.length===0)?m.jsxs("div",{className:"text-center py-16 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(Fc,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No notifications yet"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Allocation updates will appear here"})]}):null,!a&&Array.isArray(n)?n.map(I=>{const F=!(I!=null&&I.read_at);return m.jsx("div",{className:`glass-strong p-5 rounded-3xl border transition-all ${F?"border-emerald-500/30":"border-white/10 opacity-90"}`,children:m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-sm font-black text-white truncate",children:I.title||"Notification"}),m.jsx("p",{className:"text-xs text-slate-300 font-medium mt-1 break-words",children:I.body||""}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-2",children:[I.created_at?new Date(I.created_at).toLocaleString():"",I.awb?`  ${String(I.awb).toUpperCase()}`:""]})]}),F?m.jsx("button",{type:"button",onClick:()=>T(I.id),disabled:String(f)===String(I.id),className:`p-2 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95 transition-all ${String(f)===String(I.id)?"opacity-60 cursor-not-allowed":""}`,title:"Mark as read",children:m.jsx(Z_,{size:18})}):null]})},I.id)}):null]})]})}const gc="Driver",Vu=()=>({driver_id:"",name:"",username:"",password:"",role:gc,active:!0,truck_plate:"",phone_number:"",helper_name:""}),Gf=e=>String(e||"").trim()||gc,Gy=({open:e,title:t,children:n,onClose:i})=>m.jsx(ts,{children:e&&m.jsx(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-end justify-center bg-black/70 backdrop-blur-sm p-4",onClick:i,children:m.jsxs(rt.div,{initial:{y:24,opacity:0},animate:{y:0,opacity:1},exit:{y:24,opacity:0},className:"w-full max-w-md glass-strong rounded-3xl border-iridescent p-5 space-y-4",onClick:a=>a.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsx("div",{className:"min-w-0",children:m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:t})}),m.jsx("button",{type:"button",onClick:i,className:"p-2 rounded-2xl glass-light border border-white/10 text-slate-300 hover:text-white active:scale-95 transition-all","aria-label":"Close",children:m.jsx(va,{size:18})})]}),n]})})});function iM(){const e=mr(),t=To(),{user:n}=Jn(),i=(n==null?void 0:n.token)||localStorage.getItem("token"),a=j.useMemo(()=>Tn(n,H1),[n]),c=j.useMemo(()=>["Admin","Manager","Dispatcher","Support"].includes(String((n==null?void 0:n.role)||"").trim()),[n==null?void 0:n.role]),f=j.useRef(!1),g=j.useMemo(()=>{const ee=new URLSearchParams(t.search),oe=String(ee.get("returnTo")||"").trim();return oe.startsWith("/")?oe:""},[t.search]),[v,y]=j.useState(!0),[C,b]=j.useState(!1),[T,I]=j.useState(""),[F,R]=j.useState(""),[B,z]=j.useState(""),[O,k]=j.useState([]),[W,Q]=j.useState([]),[G,H]=j.useState(""),[q,M]=j.useState(!1),[X,ie]=j.useState(Vu),[se,ve]=j.useState(!1),[Ee,ae]=j.useState(null),[de,ke]=j.useState({name:"",username:"",password:"",role:gc,active:!0,truck_plate:"",phone_number:"",helper_name:""}),ne=async()=>{var ee,oe;y(!0),I("");try{const[Le,at]=await Promise.all([Bb(i).catch(()=>null),q1(i)]),Nt=Array.isArray(Le)?Le:[];k(Nt),Q(Array.isArray(at)?at:[])}catch(Le){const at=((oe=(ee=Le==null?void 0:Le.response)==null?void 0:ee.data)==null?void 0:oe.detail)||(Le==null?void 0:Le.message)||"Failed to load users";I(String(at))}finally{y(!1)}};j.useEffect(()=>{ne()},[]),j.useEffect(()=>{if(f.current)return;const ee=new URLSearchParams(t.search);if(!["1","true","yes","on"].includes(String(ee.get("create")||"").toLowerCase())){f.current=!0;return}if(!a){f.current=!0;return}const Le=String(ee.get("role")||"").trim();ie(at=>({...Vu(),role:Le||at.role||gc})),M(!0),f.current=!0},[t.search,a]);const Se=j.useMemo(()=>O.length>0?O.map(ee=>ee==null?void 0:ee.role).filter(Boolean):[gc,"Admin","Manager","Dispatcher","Warehouse","Support","Finance","Viewer","Recipient"],[O]),ye=j.useMemo(()=>{const ee=String(G||"").trim().toLowerCase(),oe=Array.isArray(W)?W:[];return ee?oe.filter(Le=>String((Le==null?void 0:Le.driver_id)||"").toLowerCase().includes(ee)||String((Le==null?void 0:Le.username)||"").toLowerCase().includes(ee)||String((Le==null?void 0:Le.name)||"").toLowerCase().includes(ee)||String((Le==null?void 0:Le.role)||"").toLowerCase().includes(ee)):oe},[W,G]),ge=ee=>{ee&&(ae(ee),ke({name:String((ee==null?void 0:ee.name)||""),username:String((ee==null?void 0:ee.username)||""),password:"",role:Gf(ee==null?void 0:ee.role),active:!!(ee!=null&&ee.active),truck_plate:String((ee==null?void 0:ee.truck_plate)||""),phone_number:String((ee==null?void 0:ee.phone_number)||""),helper_name:String((ee==null?void 0:ee.helper_name)||"")}),ve(!0))},Me=async()=>{var ee,oe;b(!0),I(""),R("");try{const Le={driver_id:String(X.driver_id||"").trim(),name:String(X.name||"").trim(),username:String(X.username||"").trim(),password:String(X.password||""),role:Gf(X.role),active:!!X.active,truck_plate:String(X.truck_plate||"").trim(),phone_number:String(X.phone_number||"").trim(),helper_name:String(X.helper_name||"").trim()};if(!Le.driver_id||!Le.username||!Le.name||!Le.password){I("driver_id, name, username and password are required.");return}await Fb(i,Le),R("Account created."),M(!1),ie(Vu()),await ne()}catch(Le){const at=((oe=(ee=Le==null?void 0:Le.response)==null?void 0:ee.data)==null?void 0:oe.detail)||(Le==null?void 0:Le.message)||"Failed to create user";I(String(at))}finally{b(!1)}},qe=async()=>{var ee,oe;if(Ee!=null&&Ee.driver_id){b(!0),I(""),R("");try{const Le={name:String(de.name||"").trim(),username:String(de.username||"").trim(),role:Gf(de.role),active:!!de.active,truck_plate:String(de.truck_plate||"").trim(),phone_number:String(de.phone_number||"").trim(),helper_name:String(de.helper_name||"").trim()},at=String(de.password||"").trim();at&&(Le.password=at),await zb(i,Ee.driver_id,Le),R("Account updated."),ve(!1),ae(null),await ne()}catch(Le){const at=((oe=(ee=Le==null?void 0:Le.response)==null?void 0:ee.data)==null?void 0:oe.detail)||(Le==null?void 0:Le.message)||"Failed to update user";I(String(at))}finally{b(!1)}}},De=async ee=>{var Le,at;if(!c)return;const oe=String((ee==null?void 0:ee.driver_id)||"").trim().toUpperCase();if(!(!oe||!i)){z(oe),I(""),R("");try{const Nt=await J1(i,{driver_id:oe,duration_sec:1800}),tt=Nt==null?void 0:Nt.id;if(tt){e(`/tracking/${encodeURIComponent(String(tt))}`);return}R("Tracking request created.")}catch(Nt){const tt=((at=(Le=Nt==null?void 0:Nt.response)==null?void 0:Le.data)==null?void 0:at.detail)||(Nt==null?void 0:Nt.message)||"Failed to request tracking";I(String(tt))}finally{z("")}}};return m.jsxs(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"sticky top-0 z-40 glass-strong backdrop-blur-xl border-b border-white/10 pb-2 shadow-sm",children:[m.jsxs("div",{className:"p-4 flex items-center gap-4",children:[m.jsx("button",{onClick:()=>e(g||-1),className:"p-2 -ml-2 rounded-xl glass-light text-slate-300 hover:text-white transition-colors border border-white/10","aria-label":"Back",children:m.jsx(ks,{})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h1",{className:"font-black text-xl text-gradient tracking-tight truncate",children:"Users"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1 truncate",children:a?"Create and manage accounts":"Read-only access"})]}),m.jsx("button",{onClick:ne,className:`p-2 rounded-xl glass-light hover:bg-violet-500/20 text-violet-400 transition-all border border-white/10 ${v?"animate-spin":""}`,title:"Refresh",children:m.jsx(Bi,{size:20})}),m.jsx("button",{onClick:()=>{M(!0),ie(Vu())},disabled:!a,className:`p-2 rounded-xl glass-light border border-white/10 transition-all ${a?"text-emerald-300 hover:bg-emerald-500/10 active:scale-95":"text-slate-600 cursor-not-allowed opacity-60"}`,title:a?"Create account":"Not allowed","aria-label":"Create account",children:m.jsx(pc,{size:20})})]}),m.jsx("div",{className:"px-4 pb-3",children:m.jsxs("div",{className:"relative group",children:[m.jsx(Os,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-violet-400 transition-colors z-10",size:18}),m.jsx("input",{type:"text",placeholder:"Search driver_id, username, name, role...",className:"w-full pl-12 pr-4 py-3.5 glass-strong rounded-2xl outline-none focus:ring-2 focus:ring-violet-500/30 border border-white/10 text-sm font-medium text-white placeholder-slate-500 transition-all",value:G,onChange:ee=>H(ee.target.value)})]})})]}),m.jsxs("div",{className:"flex-1 p-4 pb-32 relative z-10 space-y-3",children:[T&&m.jsxs("div",{className:"glass-strong rounded-2xl border border-rose-500/20 p-4 text-rose-200 text-xs font-bold flex items-center gap-3",children:[m.jsx(r8,{size:16,className:"text-rose-300"}),m.jsx("span",{className:"flex-1",children:T})]}),F&&m.jsxs("div",{className:"glass-strong rounded-2xl border border-emerald-500/20 p-4 text-emerald-200 text-xs font-bold flex items-center gap-3",children:[m.jsx(Eh,{size:16,className:"text-emerald-300"}),m.jsx("span",{className:"flex-1",children:F})]}),v?m.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-violet-500/20 blur-xl rounded-full animate-pulse"}),m.jsx(fn,{className:"animate-spin relative z-10 text-violet-400",size:48})]}),m.jsx("p",{className:"mt-6 font-bold text-xs uppercase tracking-widest text-slate-500",children:"Loading users..."})]}):ye.length===0?m.jsxs("div",{className:"text-center py-20 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(rp,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No users"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Try changing your search"})]}):m.jsx("div",{className:"space-y-3",children:ye.map(ee=>m.jsx("div",{className:"glass-strong p-5 rounded-3xl border border-white/10 hover:border-violet-500/25 transition-all",children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-2xl bg-violet-500/15 border border-violet-500/20 flex items-center justify-center",children:m.jsx(rp,{size:20,className:"text-violet-300"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center justify-between gap-2",children:[m.jsx("p",{className:"text-sm font-black text-white truncate",children:(ee==null?void 0:ee.name)||(ee==null?void 0:ee.username)||(ee==null?void 0:ee.driver_id)}),m.jsx("span",{className:`text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border ${ee!=null&&ee.active?"bg-emerald-500/15 text-emerald-300 border-emerald-500/20":"bg-rose-500/15 text-rose-200 border-rose-500/20"}`,children:ee!=null&&ee.active?"Active":"Inactive"})]}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1 truncate",children:[m.jsx("span",{className:"font-mono text-slate-300",children:ee==null?void 0:ee.driver_id}),"  ",m.jsx("span",{className:"font-mono",children:ee==null?void 0:ee.username}),"  ",(ee==null?void 0:ee.role)||""]}),(ee==null?void 0:ee.last_login)&&m.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:["Last login: ",new Date(ee.last_login).toLocaleString()]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[c&&String((ee==null?void 0:ee.role)||"")!=="Recipient"?m.jsxs("button",{type:"button",onClick:()=>De(ee),disabled:String(B)===String(String((ee==null?void 0:ee.driver_id)||"").trim().toUpperCase()),className:`px-3 py-2 rounded-2xl border text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2 ${String(B)===String(String((ee==null?void 0:ee.driver_id)||"").trim().toUpperCase())?"bg-emerald-500/10 border-emerald-500/20 text-emerald-200 opacity-70 cursor-not-allowed":"bg-emerald-500/15 border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95"}`,title:"Request live location",children:[String(B)===String(String((ee==null?void 0:ee.driver_id)||"").trim().toUpperCase())?m.jsx(fn,{size:14,className:"animate-spin"}):m.jsx(Ms,{size:14}),"Track"]}):null,m.jsx("button",{type:"button",onClick:()=>ge(ee),disabled:!a,className:`px-4 py-2 rounded-2xl border text-[10px] font-black uppercase tracking-widest transition-all ${a?"bg-white/5 border-white/10 text-slate-200 hover:bg-white/10 active:scale-95":"bg-slate-900/30 border-white/5 text-slate-600 cursor-not-allowed opacity-60"}`,title:a?"Edit":"Not allowed",children:"Edit"})]})]})},(ee==null?void 0:ee.driver_id)||(ee==null?void 0:ee.id)))})]}),m.jsx(Gy,{open:q,title:"Create Account",onClose:()=>{C||M(!1)},children:m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsx("input",{value:X.driver_id,onChange:ee=>ie(oe=>({...oe,driver_id:ee.target.value})),placeholder:"driver_id (ex: D004)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30 font-mono"}),m.jsx("input",{value:X.username,onChange:ee=>ie(oe=>({...oe,username:ee.target.value})),placeholder:"username",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"})]}),m.jsx("input",{value:X.name,onChange:ee=>ie(oe=>({...oe,name:ee.target.value})),placeholder:"Full name",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"}),m.jsx("input",{value:X.password,onChange:ee=>ie(oe=>({...oe,password:ee.target.value})),placeholder:"Temporary password",type:"password",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsx("select",{value:X.role,onChange:ee=>ie(oe=>({...oe,role:ee.target.value})),className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white outline-none focus:ring-2 focus:ring-emerald-500/30",children:Se.map(ee=>m.jsx("option",{value:ee,children:ee},ee))}),m.jsxs("label",{className:"flex items-center gap-2 px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white select-none",children:[m.jsx("input",{type:"checkbox",checked:X.active,onChange:ee=>ie(oe=>({...oe,active:ee.target.checked}))}),m.jsx("span",{className:"text-xs font-bold",children:"Active"})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsx("input",{value:X.truck_plate,onChange:ee=>ie(oe=>({...oe,truck_plate:ee.target.value})),placeholder:"Truck plate (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30 font-mono"}),m.jsx("input",{value:X.phone_number,onChange:ee=>ie(oe=>({...oe,phone_number:ee.target.value})),placeholder:"Truck phone (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"})]}),m.jsx("input",{value:X.helper_name,onChange:ee=>ie(oe=>({...oe,helper_name:ee.target.value})),placeholder:"Default helper name (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"}),m.jsxs("button",{type:"button",onClick:Me,disabled:!a||C,className:`w-full btn-premium py-4 rounded-2xl font-black uppercase tracking-widest flex items-center justify-center gap-2 shadow-lg transition-all ${!a||C?"bg-slate-800/40 text-slate-500 cursor-not-allowed opacity-70":"bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white active:scale-[0.99]"}`,children:[C?m.jsx(fn,{className:"animate-spin",size:18}):m.jsx(Jx,{size:18}),"Create"]})]})}),m.jsx(Gy,{open:se,title:`Edit Account  ${(Ee==null?void 0:Ee.driver_id)||""}`,onClose:()=>{C||ve(!1)},children:m.jsxs("div",{className:"space-y-3",children:[m.jsx("input",{value:de.name,onChange:ee=>ke(oe=>({...oe,name:ee.target.value})),placeholder:"Full name",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"}),m.jsx("input",{value:de.username,onChange:ee=>ke(oe=>({...oe,username:ee.target.value})),placeholder:"username",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"}),m.jsx("input",{value:de.password,onChange:ee=>ke(oe=>({...oe,password:ee.target.value})),placeholder:"New password (optional)",type:"password",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsx("select",{value:de.role,onChange:ee=>ke(oe=>({...oe,role:ee.target.value})),className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white outline-none focus:ring-2 focus:ring-violet-500/30",children:Se.map(ee=>m.jsx("option",{value:ee,children:ee},ee))}),m.jsxs("label",{className:"flex items-center gap-2 px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white select-none",children:[m.jsx("input",{type:"checkbox",checked:de.active,onChange:ee=>ke(oe=>({...oe,active:ee.target.checked}))}),m.jsx("span",{className:"text-xs font-bold",children:"Active"})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsx("input",{value:de.truck_plate,onChange:ee=>ke(oe=>({...oe,truck_plate:ee.target.value})),placeholder:"Truck plate (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30 font-mono"}),m.jsx("input",{value:de.phone_number,onChange:ee=>ke(oe=>({...oe,phone_number:ee.target.value})),placeholder:"Truck phone (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"})]}),m.jsx("input",{value:de.helper_name,onChange:ee=>ke(oe=>({...oe,helper_name:ee.target.value})),placeholder:"Default helper name (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"}),m.jsxs("button",{type:"button",onClick:qe,disabled:!a||C,className:`w-full btn-premium py-4 rounded-2xl font-black uppercase tracking-widest flex items-center justify-center gap-2 shadow-lg transition-all ${!a||C?"bg-slate-800/40 text-slate-500 cursor-not-allowed opacity-70":"bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white active:scale-[0.99]"}`,children:[C?m.jsx(fn,{className:"animate-spin",size:18}):m.jsx(Jx,{size:18}),"Save Changes"]})]})})]})}const Hu=e=>{try{return new Date(e).toLocaleString()}catch{return""}};function sM(){const e=mr(),{requestId:t}=w1(),{user:n}=Jn(),i=(n==null?void 0:n.token)||localStorage.getItem("token"),[a,c]=j.useState(null),[f,g]=j.useState(null),[v,y]=j.useState(!0),[C,b]=j.useState(!1),[T,I]=j.useState(""),[F,R]=j.useState(""),B=j.useMemo(()=>{const W=String((n==null?void 0:n.driver_id)||"").trim();return!W||!(a!=null&&a.id)?!1:W===String((a==null?void 0:a.created_by_user_id)||"").trim()||W===String((a==null?void 0:a.target_driver_id)||"").trim()},[n==null?void 0:n.driver_id,a==null?void 0:a.id,a==null?void 0:a.created_by_user_id,a==null?void 0:a.target_driver_id]),z=async({withDetails:W=!0}={})=>{var Q,G,H,q;if(i){I("");try{let M=a;if(W){const X=await Zb(i,t);c(X),M=X}try{const X=await Gb(i,t);g(X),R("")}catch(X){const ie=String(((G=(Q=X==null?void 0:X.response)==null?void 0:Q.data)==null?void 0:G.detail)||(X==null?void 0:X.message)||"");g(null);const se=String((M==null?void 0:M.status)||"").trim();se==="Pending"?R("Waiting for driver to accept..."):se==="Denied"?R("Driver denied the request."):se==="Stopped"?R("Tracking was stopped."):se==="Accepted"&&ie.toLowerCase().includes("no location")?R("Waiting for first GPS update..."):R(ie||"No location yet")}}catch(M){I(String(((q=(H=M==null?void 0:M.response)==null?void 0:H.data)==null?void 0:q.detail)||(M==null?void 0:M.message)||"Failed to load tracking")),c(null),g(null)}finally{y(!1)}}};j.useEffect(()=>{y(!0),z({withDetails:!0})},[t,i]),j.useEffect(()=>{if(!i)return;const W=setInterval(()=>z({withDetails:!1}),5e3),Q=setInterval(()=>z({withDetails:!0}),2e4);return()=>{clearInterval(W),clearInterval(Q)}},[t,i]);const O=async()=>{var W,Q;if(!(!B||!(a!=null&&a.id)||!i)){b(!0),I("");try{const G=await em(i,a.id);c(G||a)}catch(G){I(String(((Q=(W=G==null?void 0:G.response)==null?void 0:W.data)==null?void 0:Q.detail)||(G==null?void 0:G.message)||"Failed to stop tracking"))}finally{b(!1)}}},k=f?{lat:Number(f.latitude),lon:Number(f.longitude)}:null;return m.jsxs(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{className:"min-w-0 flex items-center gap-3",children:[m.jsx("button",{type:"button",onClick:()=>e(-1),className:"w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10 text-slate-200 hover:bg-white/5 active:scale-95 transition-all","aria-label":"Back",children:m.jsx(ks,{size:18})}),m.jsxs("div",{className:"min-w-0",children:[m.jsxs("h1",{className:"text-xl font-black text-gradient tracking-tight flex items-center gap-2",children:[m.jsx(Ms,{size:18,className:"text-emerald-300"}),"Live Tracking"]}),m.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1 truncate",children:["Request #",t]})]})]}),m.jsx("button",{type:"button",onClick:()=>z({withDetails:!0}),className:`w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10 text-slate-200 hover:bg-white/5 active:scale-95 transition-all ${v?"opacity-60 cursor-not-allowed":""}`,disabled:v,"aria-label":"Refresh",children:m.jsx(Bi,{size:18,className:v?"animate-spin":""})})]}),m.jsxs("main",{className:"flex-1 p-4 pb-32 space-y-3 relative z-10",children:[T?m.jsx("div",{className:"glass-strong p-4 rounded-2xl border border-rose-500/30 text-rose-300 text-sm font-bold",children:T}):null,v?m.jsxs("div",{className:"glass-strong p-6 rounded-3xl border border-white/10 flex items-center gap-3 text-slate-300",children:[m.jsx(fn,{className:"animate-spin",size:18}),m.jsx("span",{className:"text-sm font-bold",children:"Loading..."})]}):null,a?m.jsxs("div",{className:"glass-strong p-5 rounded-3xl border border-white/10 space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-xs text-slate-500 font-black uppercase tracking-widest",children:"Status"}),m.jsx("p",{className:"text-sm font-black text-white truncate",children:String(a.status||"")})]}),B&&String(a.status||"")==="Accepted"?m.jsxs("button",{type:"button",onClick:O,disabled:C,className:`px-4 py-2 rounded-2xl text-[10px] font-black uppercase tracking-widest border transition-all ${C?"opacity-60 cursor-not-allowed bg-slate-900/40 border-white/10 text-slate-400":"bg-rose-500/15 border-rose-500/20 text-rose-200 hover:bg-rose-500/20 active:scale-95"}`,title:"Stop tracking",children:[C?m.jsx(fn,{size:14,className:"animate-spin inline-block mr-1 -mt-0.5"}):m.jsx(J_,{size:14,className:"inline-block mr-1 -mt-0.5"}),"Stop"]}):null]}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["Created: ",a.created_at?Hu(a.created_at):"--",a.awb?`  AWB ${String(a.awb).toUpperCase()}`:""]}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["Driver: ",a.target_driver_name?String(a.target_driver_name).trim():String(a.target_driver_id||"--"),a.target_truck_plate?`  Truck ${String(a.target_truck_plate).toUpperCase()}`:"",a.target_truck_phone?`  Phone ${a.target_truck_phone}`:""]}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["Expires: ",a.expires_at?Hu(a.expires_at):"--",a.last_location_at?`  Last update ${Hu(a.last_location_at)}`:""]})]}):null,m.jsxs("div",{className:"glass-strong p-4 rounded-3xl border border-white/10",children:[m.jsx(um,{shipments:[],routeGeometry:null,currentLocation:k,originLocation:null,showStopNumbers:!1,currentLocationLabel:"Truck location"}),m.jsx("div",{className:"mt-3 text-xs text-slate-300 font-bold",children:f!=null&&f.timestamp?`Last GPS: ${Hu(f.timestamp)}`:F||"Waiting for driver location..."})]})]})]})}const Yy=e=>{try{return new Date(e).toLocaleString()}catch{return""}};function oM(){const e=mr(),{user:t}=Jn(),n=(t==null?void 0:t.token)||localStorage.getItem("token"),[i,a]=j.useState([]),[c,f]=j.useState(!0),[g,v]=j.useState(""),[y,C]=j.useState(""),[b,T]=j.useState(!1),I=j.useMemo(()=>(Array.isArray(i)?i:[]).reduce((B,z)=>B+(Number(z==null?void 0:z.unread_count)||0),0),[i]),F=async()=>{var B,z;if(n){f(!0),v("");try{const O=await qb(n,{limit:100});a(Array.isArray(O)?O:[])}catch(O){a([]),v(String(((z=(B=O==null?void 0:O.response)==null?void 0:B.data)==null?void 0:z.detail)||(O==null?void 0:O.message)||"Failed to load chat"))}finally{f(!1)}}};j.useEffect(()=>{if(F(),!n)return;const B=setInterval(()=>F(),15e3);return()=>clearInterval(B)},[n]);const R=async()=>{var z,O;if(!n)return;const B=String(y||"").trim().toUpperCase();if(B){T(!0),v("");try{const k=await tm(n,{awb:B});k!=null&&k.id?e(`/chat/${encodeURIComponent(String(k.id))}`):v("Failed to open chat")}catch(k){v(String(((O=(z=k==null?void 0:k.response)==null?void 0:z.data)==null?void 0:O.detail)||(k==null?void 0:k.message)||"Failed to open chat"))}finally{T(!1)}}};return m.jsxs(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsxs("h1",{className:"text-xl font-black text-gradient tracking-tight flex items-center gap-2",children:[m.jsx(zc,{size:18,className:"text-violet-300"}),"Chat"]}),m.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1 truncate",children:[I," unread"]})]}),m.jsx("button",{type:"button",onClick:F,className:`w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10 text-slate-200 hover:bg-white/5 active:scale-95 transition-all ${c?"opacity-60 cursor-not-allowed":""}`,disabled:c,"aria-label":"Refresh",children:m.jsx(Bi,{size:18,className:c?"animate-spin":""})})]}),m.jsxs("main",{className:"flex-1 p-4 pb-32 space-y-3 relative z-10",children:[g?m.jsx("div",{className:"glass-strong p-4 rounded-2xl border border-rose-500/30 text-rose-300 text-sm font-bold",children:g}):null,m.jsxs("div",{className:"glass-strong p-4 rounded-3xl border border-white/10 space-y-3",children:[m.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Open chat by AWB"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:"flex-1 flex items-center gap-2 glass-light rounded-2xl border border-white/10 px-3 py-3",children:[m.jsx(Os,{size:16,className:"text-slate-500"}),m.jsx("input",{value:y,onChange:B=>C(B.target.value),placeholder:"Enter AWB (e.g. AWB123...)",className:"w-full bg-transparent outline-none text-sm font-bold text-white placeholder:text-slate-600"})]}),m.jsx("button",{type:"button",onClick:R,disabled:b,className:`w-12 h-12 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95 transition-all flex items-center justify-center ${b?"opacity-60 cursor-not-allowed":""}`,title:"Open",children:b?m.jsx(fn,{size:18,className:"animate-spin"}):m.jsx(Hd,{size:18})})]}),m.jsx("div",{className:"text-[11px] font-bold text-slate-400",children:"Tip: recipients can also open chat from the shipment details screen, then pin the delivery location."})]}),c?m.jsxs("div",{className:"glass-strong p-6 rounded-3xl border border-white/10 flex items-center gap-3 text-slate-300",children:[m.jsx(fn,{className:"animate-spin",size:18}),m.jsx("span",{className:"text-sm font-bold",children:"Loading..."})]}):null,!c&&(!i||i.length===0)?m.jsxs("div",{className:"text-center py-16 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(zc,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No conversations yet"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Open a chat by AWB to start messaging"})]}):null,!c&&Array.isArray(i)?i.map(B=>{const z=Number(B==null?void 0:B.unread_count)||0;return m.jsx("button",{type:"button",onClick:()=>e(`/chat/${encodeURIComponent(String(B.id))}`),className:"w-full text-left glass-strong p-5 rounded-3xl border border-white/10 hover:bg-white/5 transition-all",children:m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-sm font-black text-white truncate",children:B!=null&&B.awb?String(B.awb).toUpperCase():(B==null?void 0:B.subject)||"Chat"}),m.jsx("p",{className:"text-xs text-slate-300 font-medium mt-1 break-words",children:String((B==null?void 0:B.last_message_preview)||"No messages yet")}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-2",children:B!=null&&B.last_message_at?`Last: ${Yy(B.last_message_at)}`:B!=null&&B.created_at?`Created: ${Yy(B.created_at)}`:""})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[z>0?m.jsx("div",{className:"px-2.5 py-1 rounded-full bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 text-[10px] font-black uppercase tracking-widest",children:z}):null,m.jsx("div",{className:"w-10 h-10 rounded-2xl glass-light border border-white/10 flex items-center justify-center text-slate-400",children:m.jsx(Hd,{size:18})})]})]})},B.id)}):null]})]})}delete ko.Icon.Default.prototype._getIconUrl;ko.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Yf=e=>{try{return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}},Xy=e=>{try{return new Date(e).toLocaleDateString()}catch{return""}},qy=(e,t)=>{const n=Number(e),i=Number(t);return!Number.isFinite(n)||!Number.isFinite(i)?null:`https://www.openstreetmap.org/?mlat=${encodeURIComponent(String(n))}&mlon=${encodeURIComponent(String(i))}#map=18/${encodeURIComponent(String(n))}/${encodeURIComponent(String(i))}`},aM=({onPick:e})=>(I6({click(t){e==null||e({lat:t.latlng.lat,lon:t.latlng.lng,source:"map"})}}),null),lM=({center:e})=>{const t=Bh();return j.useEffect(()=>{if(e)try{t.setView(e,t.getZoom())}catch{}},[e,t]),null};function cM({open:e,onClose:t,shipment:n,onConfirm:i}){const[a,c]=j.useState(""),[f,g]=j.useState(""),[v,y]=j.useState(null),[C,b]=j.useState("manual"),[T,I]=j.useState(!1),[F,R]=j.useState(!1),[B,z]=j.useState(""),O=j.useMemo(()=>sa(n),[n]),k=j.useMemo(()=>{var se;const H=(n==null?void 0:n.recipient_pin)||((se=n==null?void 0:n.raw_data)==null?void 0:se.recipientPin)||null,q=Number((H==null?void 0:H.latitude)??(H==null?void 0:H.lat)),M=Number((H==null?void 0:H.longitude)??(H==null?void 0:H.lon)??(H==null?void 0:H.lng));if(Xe(q)&&Xe(M))return{lat:q,lon:M};const X=Number(n==null?void 0:n.latitude),ie=Number(n==null?void 0:n.longitude);return Xe(X)&&Xe(ie)?{lat:X,lon:ie}:{lat:44.4268,lon:26.1025}},[n]);j.useEffect(()=>{e&&(c(O),g(""),y(k),b("extracted"),z(""))},[e,O,k]);const W=async()=>{I(!0),z("");try{if(!navigator.geolocation)throw new Error("Geolocation is not supported");const H=await new Promise((X,ie)=>{navigator.geolocation.getCurrentPosition(se=>X(se.coords),se=>ie(new Error((se==null?void 0:se.message)||"GPS error")),{enableHighAccuracy:!0,timeout:8e3,maximumAge:0})}),q=Number(H==null?void 0:H.latitude),M=Number(H==null?void 0:H.longitude);if(!Xe(q)||!Xe(M))throw new Error("Invalid GPS coordinates");y({lat:q,lon:M}),b("gps")}catch(H){z(String((H==null?void 0:H.message)||"Failed to detect GPS"))}finally{I(!1)}},Q=async()=>{const H=String(a||"").trim();if(H){R(!0),z("");try{const q=await Qd(H);if(!q||!Xe(q.lat)||!Xe(q.lon))throw new Error("Address not found");y({lat:Number(q.lat),lon:Number(q.lon)}),b("geocode")}catch(q){z(String((q==null?void 0:q.message)||"Search failed"))}finally{R(!1)}}},G=()=>{if(!v||!Xe(v.lat)||!Xe(v.lon)){z("Pick a valid location");return}i==null||i({latitude:Number(v.lat),longitude:Number(v.lon),source:C||"manual",address:String(a||"").trim()||null,note:String(f||"").trim()||null})};return m.jsx(ts,{children:e?m.jsx(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[80] flex items-end justify-center bg-black/60 backdrop-blur-sm p-4",onClick:t,children:m.jsxs(rt.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},exit:{y:30,opacity:0},className:"w-full max-w-md glass-strong rounded-3xl border-iridescent p-5 space-y-4",onClick:H=>H.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Pin delivery location"}),m.jsx("p",{className:"text-sm font-black text-white truncate",children:n!=null&&n.awb?String(n.awb).toUpperCase():"Shipment"})]}),m.jsx("button",{type:"button",onClick:t,className:"w-11 h-11 rounded-2xl glass-light border border-white/10 flex items-center justify-center hover:bg-white/5 transition-all","aria-label":"Close",children:m.jsx(va,{size:18,className:"text-slate-300"})})]}),B?m.jsx("div",{className:"glass-light p-3 rounded-2xl border border-rose-500/30 text-rose-200 text-xs font-bold",children:B}):null,m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:"flex-1 flex items-center gap-2 glass-light rounded-2xl border border-white/10 px-3 py-3",children:[m.jsx(Os,{size:16,className:"text-slate-500"}),m.jsx("input",{value:a,onChange:H=>c(H.target.value),placeholder:"Search address",className:"w-full bg-transparent outline-none text-sm font-bold text-white placeholder:text-slate-600"})]}),m.jsx("button",{type:"button",onClick:Q,disabled:F,className:`w-12 h-12 rounded-2xl bg-violet-500/15 border border-violet-500/20 text-violet-200 hover:bg-violet-500/20 active:scale-95 transition-all flex items-center justify-center ${F?"opacity-60 cursor-not-allowed":""}`,title:"Search",children:F?m.jsx(fn,{size:18,className:"animate-spin"}):m.jsx(Os,{size:18})}),m.jsx("button",{type:"button",onClick:W,disabled:T,className:`w-12 h-12 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95 transition-all flex items-center justify-center ${T?"opacity-60 cursor-not-allowed":""}`,title:"Use GPS",children:T?m.jsx(fn,{size:18,className:"animate-spin"}):m.jsx(VI,{size:18})})]}),m.jsx("div",{className:"text-[11px] font-bold text-slate-400",children:"Move the marker to the exact place where the truck should deliver."})]}),m.jsx("div",{className:"h-[260px] w-full rounded-3xl overflow-hidden shadow-inner border border-white/20",children:m.jsxs(bC,{center:[(v==null?void 0:v.lat)||k.lat,(v==null?void 0:v.lon)||k.lon],zoom:16,style:{height:"100%",width:"100%"},zoomControl:!1,children:[m.jsx(CC,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors  <a href="https://carto.com/attributions">CARTO</a>'}),m.jsx(lM,{center:[(v==null?void 0:v.lat)||k.lat,(v==null?void 0:v.lon)||k.lon]}),m.jsx(aM,{onPick:H=>{y({lat:H.lat,lon:H.lon}),b(H.source||"map")}}),v?m.jsx(cd,{position:[v.lat,v.lon],draggable:!0,eventHandlers:{dragend:H=>{var q,M;try{const X=(M=(q=H==null?void 0:H.target)==null?void 0:q.getLatLng)==null?void 0:M.call(q),ie=Number(X==null?void 0:X.lat),se=Number(X==null?void 0:X.lng);if(!Number.isFinite(ie)||!Number.isFinite(se))return;y({lat:ie,lon:se}),b("drag")}catch{}}}}):null]})}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"glass-light p-3 rounded-2xl border border-white/10",children:[m.jsx("div",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Latitude"}),m.jsx("div",{className:"text-sm font-black text-white font-mono truncate",children:v?String(Number(v.lat).toFixed(6)):"--"})]}),m.jsxs("div",{className:"glass-light p-3 rounded-2xl border border-white/10",children:[m.jsx("div",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Longitude"}),m.jsx("div",{className:"text-sm font-black text-white font-mono truncate",children:v?String(Number(v.lon).toFixed(6)):"--"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Note (optional)"}),m.jsx("textarea",{value:f,onChange:H=>g(H.target.value),rows:2,placeholder:"Gate code, building entrance, landmark...",className:"w-full glass-light rounded-2xl border border-white/10 p-3 text-sm font-bold text-white placeholder:text-slate-600 outline-none"})]}),m.jsxs("button",{type:"button",onClick:G,className:"w-full btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm",children:[m.jsx(Ms,{size:16}),"Send pinned location"]}),m.jsxs("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["Source: ",String(C||"manual")]})]})}):null})}function uM(){var ke;const e=mr(),{threadId:t}=w1(),{user:n}=Jn(),i=(n==null?void 0:n.token)||localStorage.getItem("token"),a=String((n==null?void 0:n.driver_id)||"").trim(),c=String((n==null?void 0:n.role)||"")==="Recipient",[f,g]=j.useState(null),[v,y]=j.useState(null),[C,b]=j.useState([]),[T,I]=j.useState(!0),[F,R]=j.useState(""),[B,z]=j.useState(""),[O,k]=j.useState(!1),[W,Q]=j.useState(!1),G=j.useRef(null),H=j.useMemo(()=>{const ne=Array.isArray(C)?C:[],Se=ne.length?ne[ne.length-1]:null;return Se!=null&&Se.id?Number(Se.id):0},[C]),q=()=>{var ne,Se;try{(Se=(ne=G.current)==null?void 0:ne.scrollIntoView)==null||Se.call(ne,{behavior:"smooth"})}catch{}},M=async({withThread:ne=!1}={})=>{var Se,ye;if(i){R("");try{if(ne){const De=await Kb(i,t);if(g(De),De!=null&&De.awb)try{const ee=await Uc(i,De.awb,{refresh:!1});y(ee||null)}catch{y(null)}else y(null)}const ge=await Qb(i,t,{limit:80}),Me=Array.isArray(ge)?ge:[];b(Me);const qe=Me.length?Me[Me.length-1]:null;qe!=null&&qe.id&&await $b(i,t,{last_read_message_id:Number(qe.id)}).catch(()=>{})}catch(ge){R(String(((ye=(Se=ge==null?void 0:ge.response)==null?void 0:Se.data)==null?void 0:ye.detail)||(ge==null?void 0:ge.message)||"Failed to load chat"))}finally{I(!1)}}};j.useEffect(()=>{I(!0),M({withThread:!0})},[t,i]),j.useEffect(()=>{if(!i)return;const ne=setInterval(()=>M({withThread:!1}),5e3),Se=setInterval(()=>M({withThread:!0}),3e4);return()=>{clearInterval(ne),clearInterval(Se)}},[t,i]),j.useEffect(()=>{q()},[H]);const X=async()=>{var Se,ye;if(!i)return;const ne=String(B||"").trim();if(ne){k(!0),R("");try{const ge=await dp(i,t,{message_type:"text",text:ne});z(""),b(Me=>[...Array.isArray(Me)?Me:[],ge].filter(Boolean)),q()}catch(ge){R(String(((ye=(Se=ge==null?void 0:ge.response)==null?void 0:Se.data)==null?void 0:ye.detail)||(ge==null?void 0:ge.message)||"Failed to send"))}finally{k(!1)}}},ie=async({latitude:ne,longitude:Se,source:ye,address:ge,note:Me})=>{var qe,De;if(i){k(!0),R("");try{const ee=await dp(i,t,{message_type:"location",text:null,data:{latitude:ne,longitude:Se,source:ye,address:ge,note:Me}});Q(!1),b(oe=>[...Array.isArray(oe)?oe:[],ee].filter(Boolean)),q()}catch(ee){R(String(((De=(qe=ee==null?void 0:ee.response)==null?void 0:qe.data)==null?void 0:De.detail)||(ee==null?void 0:ee.message)||"Failed to send location"))}finally{k(!1)}}},se=f!=null&&f.awb?String(f.awb).toUpperCase():`Thread #${String(t)}`,ve=(v==null?void 0:v.recipient_pin)||((ke=v==null?void 0:v.raw_data)==null?void 0:ke.recipientPin)||null,Ee=Number((ve==null?void 0:ve.latitude)??(ve==null?void 0:ve.lat)),ae=Number((ve==null?void 0:ve.longitude)??(ve==null?void 0:ve.lon)??(ve==null?void 0:ve.lng)),de=Xe(Ee)&&Xe(ae)?qy(Ee,ae):null;return m.jsxs(rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{className:"min-w-0 flex items-center gap-3",children:[m.jsx("button",{type:"button",onClick:()=>e(-1),className:"w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10 text-slate-200 hover:bg-white/5 active:scale-95 transition-all","aria-label":"Back",children:m.jsx(ks,{size:18})}),m.jsxs("div",{className:"min-w-0",children:[m.jsx("h1",{className:"text-lg font-black text-white truncate",children:se}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-1 truncate",children:f!=null&&f.last_message_at?`Last message ${Yf(f.last_message_at)}`:f!=null&&f.created_at?`Created ${Xy(f.created_at)}`:""})]})]}),c?m.jsxs("button",{type:"button",onClick:()=>Q(!0),className:"px-4 h-11 rounded-2xl border text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 transition-all bg-emerald-500/15 border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95",title:"Pin delivery location",children:[m.jsx(Ms,{size:16}),"Pin"]}):null]}),m.jsxs("main",{className:"flex-1 p-4 pb-32 space-y-3 relative z-10",children:[F?m.jsx("div",{className:"glass-strong p-4 rounded-2xl border border-rose-500/30 text-rose-300 text-sm font-bold",children:F}):null,de?m.jsx("div",{className:"glass-strong p-4 rounded-3xl border border-emerald-500/20",children:m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Current pinned location"}),m.jsxs("div",{className:"text-sm font-black text-white font-mono truncate",children:[Number(Ee).toFixed(6),", ",Number(ae).toFixed(6)]}),ve!=null&&ve.note?m.jsx("div",{className:"text-xs font-bold text-slate-300 mt-1 break-words",children:String(ve.note)}):null,ve!=null&&ve.updated_at?m.jsxs("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-2",children:["Updated ",Yf(ve.updated_at)," ",Xy(ve.updated_at)]}):null]}),m.jsx("a",{href:de,target:"_blank",rel:"noreferrer",className:"px-3 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 text-[10px] font-black uppercase tracking-widest hover:bg-emerald-500/20 active:scale-95 transition-all whitespace-nowrap",title:"Open in OpenStreetMap",children:"Open map"})]})}):null,T?m.jsxs("div",{className:"glass-strong p-6 rounded-3xl border border-white/10 flex items-center gap-3 text-slate-300",children:[m.jsx(fn,{className:"animate-spin",size:18}),m.jsx("span",{className:"text-sm font-bold",children:"Loading..."})]}):null,m.jsxs("div",{className:"space-y-2",children:[(Array.isArray(C)?C:[]).map(ne=>{const Se=String((ne==null?void 0:ne.sender_user_id)||"").trim()===a,ye=String((ne==null?void 0:ne.message_type)||"text").toLowerCase(),ge=ne!=null&&ne.data&&typeof ne.data=="object"?ne.data:null,Me=Number((ge==null?void 0:ge.latitude)??(ge==null?void 0:ge.lat)),qe=Number((ge==null?void 0:ge.longitude)??(ge==null?void 0:ge.lon)??(ge==null?void 0:ge.lng)),De=ye==="location"&&Xe(Me)&&Xe(qe)?qy(Me,qe):null;return m.jsx("div",{className:`flex ${Se?"justify-end":"justify-start"}`,children:m.jsxs("div",{className:`max-w-[85%] rounded-3xl border px-4 py-3 ${Se?"bg-sky-500/15 border-sky-500/20 text-white":"glass-strong border-white/10 text-slate-100"}`,children:[m.jsxs("div",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 flex items-center justify-between gap-3",children:[m.jsx("span",{className:"truncate",children:Se?"You":(ne==null?void 0:ne.sender_role)||"User"}),m.jsx("span",{className:"whitespace-nowrap",children:ne!=null&&ne.created_at?Yf(ne.created_at):""})]}),ye==="location"?m.jsxs("div",{className:"mt-2 space-y-2",children:[m.jsxs("div",{className:"text-sm font-black flex items-center gap-2",children:[m.jsx(Ms,{size:16,className:"text-emerald-300"}),"Pinned location"]}),De?m.jsx("a",{href:De,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 text-[10px] font-black uppercase tracking-widest hover:bg-emerald-500/20 active:scale-95 transition-all",children:"Open map"}):null,m.jsx("div",{className:"text-xs font-bold text-slate-200 font-mono",children:Xe(Me)&&Xe(qe)?`${Me.toFixed(6)}, ${qe.toFixed(6)}`:"Coordinates unavailable"}),ge!=null&&ge.note?m.jsx("div",{className:"text-xs font-bold text-slate-200 break-words",children:String(ge.note)}):null]}):m.jsx("div",{className:"mt-2 text-sm font-bold break-words",children:String((ne==null?void 0:ne.text)||"")})]})},ne==null?void 0:ne.id)}),m.jsx("div",{ref:G})]})]}),m.jsx("div",{className:"fixed bottom-[calc(5rem+env(safe-area-inset-bottom))] left-0 right-0 z-[70] px-4",children:m.jsx("div",{className:"max-w-xl mx-auto",children:m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-3 shadow-2xl flex items-center gap-2",children:[m.jsx("input",{value:B,onChange:ne=>z(ne.target.value),placeholder:"Type a message...",className:"flex-1 bg-transparent outline-none text-sm font-bold text-white placeholder:text-slate-600 px-3 py-3",onKeyDown:ne=>{ne.key==="Enter"&&!ne.shiftKey&&(ne.preventDefault(),X())}}),m.jsx("button",{type:"button",onClick:X,disabled:O,className:`w-12 h-12 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95 transition-all flex items-center justify-center ${O?"opacity-60 cursor-not-allowed":""}`,title:"Send",children:O?m.jsx(fn,{size:18,className:"animate-spin"}):m.jsx(t8,{size:18})})]})})}),m.jsx(cM,{open:W,onClose:()=>Q(!1),shipment:v||{awb:f==null?void 0:f.awb},onConfirm:ie})]})}const hi=({children:e,allowedRoles:t,allowedPermissions:n})=>{const{user:i,loading:a}=Jn();return a?m.jsx("div",{children:"Loading..."}):i?t&&!t.includes(i.role)?m.jsx(nd,{to:"/",replace:!0}):n&&!u8(i,n)?m.jsx(nd,{to:"/",replace:!0}):e:m.jsx(nd,{to:"/login",replace:!0})};function dM(){return m.jsx(xE,{children:m.jsx(hM,{})})}const hM=()=>{const e=To();return m.jsx(ts,{mode:"wait",children:m.jsxs(uE,{location:e,children:[m.jsx(Vn,{path:"/login",element:m.jsx($k,{})}),m.jsx(Vn,{path:"/signup",element:m.jsx(Jk,{})}),m.jsxs(Vn,{element:m.jsx(hi,{children:m.jsx(rk,{})}),children:[m.jsx(Vn,{path:"/",element:m.jsx(Dy,{})}),m.jsx(Vn,{path:"/home",element:m.jsx(Dy,{})}),m.jsx(Vn,{path:"/history",element:m.jsx(hi,{allowedPermissions:[mi],children:m.jsx(e6,{})})}),m.jsx(Vn,{path:"/shipments",element:m.jsx(hi,{allowedPermissions:[Rr],children:m.jsx(Y6,{})})}),m.jsx(Vn,{path:"/routes",element:m.jsx(hi,{allowedRoles:["Manager","Admin","Dispatcher","Driver"],children:m.jsx(q6,{})})}),m.jsx(Vn,{path:"/routes/:routeId",element:m.jsx(hi,{allowedRoles:["Manager","Admin","Dispatcher","Driver"],children:m.jsx(tM,{})})}),m.jsx(Vn,{path:"/users",element:m.jsx(hi,{allowedPermissions:[yo],children:m.jsx(iM,{})})}),m.jsx(Vn,{path:"/notifications",element:m.jsx(hi,{allowedPermissions:[pi],children:m.jsx(rM,{})})}),m.jsx(Vn,{path:"/chat",element:m.jsx(hi,{allowedPermissions:[Gr],children:m.jsx(oM,{})})}),m.jsx(Vn,{path:"/chat/:threadId",element:m.jsx(hi,{allowedPermissions:[Gr],children:m.jsx(uM,{})})}),m.jsx(Vn,{path:"/tracking/:requestId",element:m.jsx(hi,{children:m.jsx(sM,{})})}),m.jsx(Vn,{path:"/settings",element:m.jsx(i6,{})}),m.jsx(Vn,{path:"/calendar",element:m.jsx(hi,{allowedPermissions:[Rr],children:m.jsx(X6,{})})}),m.jsx(Vn,{path:"/analytics",element:m.jsx(hi,{allowedPermissions:[ki],children:m.jsx(nM,{})})})]}),m.jsx(Vn,{path:"*",element:m.jsx(nd,{to:"/",replace:!0})})]},e.pathname)})};Xf.createRoot(document.getElementById("root")).render(m.jsx(aa.StrictMode,{children:m.jsx(Q5,{children:m.jsx(dM,{})})}));
