function iC(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const l in i)if(l!=="default"&&!(l in e)){const c=Object.getOwnPropertyDescriptor(i,l);c&&Object.defineProperty(e,l,c.get?c:{enumerable:!0,get:()=>i[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();var fa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vy={exports:{}},Ld={},wy={exports:{}},gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ic=Symbol.for("react.element"),sC=Symbol.for("react.portal"),oC=Symbol.for("react.fragment"),aC=Symbol.for("react.strict_mode"),lC=Symbol.for("react.profiler"),cC=Symbol.for("react.provider"),uC=Symbol.for("react.context"),dC=Symbol.for("react.forward_ref"),hC=Symbol.for("react.suspense"),fC=Symbol.for("react.memo"),pC=Symbol.for("react.lazy"),im=Symbol.iterator;function mC(e){return e===null||typeof e!="object"?null:(e=im&&e[im]||e["@@iterator"],typeof e=="function"?e:null)}var _y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},by=Object.assign,Cy={};function $a(e,t,n){this.props=e,this.context=t,this.refs=Cy,this.updater=n||_y}$a.prototype.isReactComponent={};$a.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$a.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Sy(){}Sy.prototype=$a.prototype;function t1(e,t,n){this.props=e,this.context=t,this.refs=Cy,this.updater=n||_y}var n1=t1.prototype=new Sy;n1.constructor=t1;by(n1,$a.prototype);n1.isPureReactComponent=!0;var sm=Array.isArray,Ey=Object.prototype.hasOwnProperty,r1={current:null},Ay={key:!0,ref:!0,__self:!0,__source:!0};function Ny(e,t,n){var i,l={},c=null,f=null;if(t!=null)for(i in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(c=""+t.key),t)Ey.call(t,i)&&!Ay.hasOwnProperty(i)&&(l[i]=t[i]);var y=arguments.length-2;if(y===1)l.children=n;else if(1<y){for(var w=Array(y),g=0;g<y;g++)w[g]=arguments[g+2];l.children=w}if(e&&e.defaultProps)for(i in y=e.defaultProps,y)l[i]===void 0&&(l[i]=y[i]);return{$$typeof:Ic,type:e,key:c,ref:f,props:l,_owner:r1.current}}function gC(e,t){return{$$typeof:Ic,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function i1(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ic}function xC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var om=/\/+/g;function kh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?xC(""+e.key):t.toString(36)}function Iu(e,t,n,i,l){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(c){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case Ic:case sC:f=!0}}if(f)return f=e,l=l(f),e=i===""?"."+kh(f,0):i,sm(l)?(n="",e!=null&&(n=e.replace(om,"$&/")+"/"),Iu(l,t,n,"",function(g){return g})):l!=null&&(i1(l)&&(l=gC(l,n+(!l.key||f&&f.key===l.key?"":(""+l.key).replace(om,"$&/")+"/")+e)),t.push(l)),1;if(f=0,i=i===""?".":i+":",sm(e))for(var y=0;y<e.length;y++){c=e[y];var w=i+kh(c,y);f+=Iu(c,t,n,w,l)}else if(w=mC(e),typeof w=="function")for(e=w.call(e),y=0;!(c=e.next()).done;)c=c.value,w=i+kh(c,y++),f+=Iu(c,t,n,w,l);else if(c==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function iu(e,t,n){if(e==null)return e;var i=[],l=0;return Iu(e,i,"","",function(c){return t.call(n,c,l++)}),i}function yC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var hr={current:null},Mu={transition:null},vC={ReactCurrentDispatcher:hr,ReactCurrentBatchConfig:Mu,ReactCurrentOwner:r1};function Ty(){throw Error("act(...) is not supported in production builds of React.")}gt.Children={map:iu,forEach:function(e,t,n){iu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return iu(e,function(){t++}),t},toArray:function(e){return iu(e,function(t){return t})||[]},only:function(e){if(!i1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};gt.Component=$a;gt.Fragment=oC;gt.Profiler=lC;gt.PureComponent=t1;gt.StrictMode=aC;gt.Suspense=hC;gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vC;gt.act=Ty;gt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=by({},e.props),l=e.key,c=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(c=t.ref,f=r1.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var y=e.type.defaultProps;for(w in t)Ey.call(t,w)&&!Ay.hasOwnProperty(w)&&(i[w]=t[w]===void 0&&y!==void 0?y[w]:t[w])}var w=arguments.length-2;if(w===1)i.children=n;else if(1<w){y=Array(w);for(var g=0;g<w;g++)y[g]=arguments[g+2];i.children=y}return{$$typeof:Ic,type:e.type,key:l,ref:c,props:i,_owner:f}};gt.createContext=function(e){return e={$$typeof:uC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:cC,_context:e},e.Consumer=e};gt.createElement=Ny;gt.createFactory=function(e){var t=Ny.bind(null,e);return t.type=e,t};gt.createRef=function(){return{current:null}};gt.forwardRef=function(e){return{$$typeof:dC,render:e}};gt.isValidElement=i1;gt.lazy=function(e){return{$$typeof:pC,_payload:{_status:-1,_result:e},_init:yC}};gt.memo=function(e,t){return{$$typeof:fC,type:e,compare:t===void 0?null:t}};gt.startTransition=function(e){var t=Mu.transition;Mu.transition={};try{e()}finally{Mu.transition=t}};gt.unstable_act=Ty;gt.useCallback=function(e,t){return hr.current.useCallback(e,t)};gt.useContext=function(e){return hr.current.useContext(e)};gt.useDebugValue=function(){};gt.useDeferredValue=function(e){return hr.current.useDeferredValue(e)};gt.useEffect=function(e,t){return hr.current.useEffect(e,t)};gt.useId=function(){return hr.current.useId()};gt.useImperativeHandle=function(e,t,n){return hr.current.useImperativeHandle(e,t,n)};gt.useInsertionEffect=function(e,t){return hr.current.useInsertionEffect(e,t)};gt.useLayoutEffect=function(e,t){return hr.current.useLayoutEffect(e,t)};gt.useMemo=function(e,t){return hr.current.useMemo(e,t)};gt.useReducer=function(e,t,n){return hr.current.useReducer(e,t,n)};gt.useRef=function(e){return hr.current.useRef(e)};gt.useState=function(e){return hr.current.useState(e)};gt.useSyncExternalStore=function(e,t,n){return hr.current.useSyncExternalStore(e,t,n)};gt.useTransition=function(){return hr.current.useTransition()};gt.version="18.3.1";wy.exports=gt;var F=wy.exports;const Ho=yy(F),wC=iC({__proto__:null,default:Ho},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _C=F,bC=Symbol.for("react.element"),CC=Symbol.for("react.fragment"),SC=Object.prototype.hasOwnProperty,EC=_C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AC={key:!0,ref:!0,__self:!0,__source:!0};function Iy(e,t,n){var i,l={},c=null,f=null;n!==void 0&&(c=""+n),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(f=t.ref);for(i in t)SC.call(t,i)&&!AC.hasOwnProperty(i)&&(l[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)l[i]===void 0&&(l[i]=t[i]);return{$$typeof:bC,type:e,key:c,ref:f,props:l,_owner:EC.current}}Ld.Fragment=CC;Ld.jsx=Iy;Ld.jsxs=Iy;vy.exports=Ld;var x=vy.exports,Mf={},My={exports:{}},zr={},ky={exports:{}},Ry={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Y,ve){var oe=Y.length;Y.push(ve);e:for(;0<oe;){var be=oe-1>>>1,Pe=Y[be];if(0<l(Pe,ve))Y[be]=ve,Y[oe]=Pe,oe=be;else break e}}function n(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var ve=Y[0],oe=Y.pop();if(oe!==ve){Y[0]=oe;e:for(var be=0,Pe=Y.length,ot=Pe>>>1;be<ot;){var Ze=2*(be+1)-1,nt=Y[Ze],ge=Ze+1,_t=Y[ge];if(0>l(nt,oe))ge<Pe&&0>l(_t,nt)?(Y[be]=_t,Y[ge]=oe,be=ge):(Y[be]=nt,Y[Ze]=oe,be=Ze);else if(ge<Pe&&0>l(_t,oe))Y[be]=_t,Y[ge]=oe,be=ge;else break e}}return ve}function l(Y,ve){var oe=Y.sortIndex-ve.sortIndex;return oe!==0?oe:Y.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var f=Date,y=f.now();e.unstable_now=function(){return f.now()-y}}var w=[],g=[],b=1,E=null,T=3,O=!1,D=!1,P=!1,V=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(Y){for(var ve=n(g);ve!==null;){if(ve.callback===null)i(g);else if(ve.startTime<=Y)i(g),ve.sortIndex=ve.expirationTime,t(w,ve);else break;ve=n(g)}}function Z(Y){if(P=!1,I(Y),!D)if(n(w)!==null)D=!0,Me(Q);else{var ve=n(g);ve!==null&&Oe(Z,ve.startTime-Y)}}function Q(Y,ve){D=!1,P&&(P=!1,z(ee),ee=-1),O=!0;var oe=T;try{for(I(ve),E=n(w);E!==null&&(!(E.expirationTime>ve)||Y&&!me());){var be=E.callback;if(typeof be=="function"){E.callback=null,T=E.priorityLevel;var Pe=be(E.expirationTime<=ve);ve=e.unstable_now(),typeof Pe=="function"?E.callback=Pe:E===n(w)&&i(w),I(ve)}else i(w);E=n(w)}if(E!==null)var ot=!0;else{var Ze=n(g);Ze!==null&&Oe(Z,Ze.startTime-ve),ot=!1}return ot}finally{E=null,T=oe,O=!1}}var X=!1,G=null,ee=-1,U=5,re=-1;function me(){return!(e.unstable_now()-re<U)}function le(){if(G!==null){var Y=e.unstable_now();re=Y;var ve=!0;try{ve=G(!0,Y)}finally{ve?Ie():(X=!1,G=null)}}else X=!1}var Ie;if(typeof R=="function")Ie=function(){R(le)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,ue=je.port2;je.port1.onmessage=le,Ie=function(){ue.postMessage(null)}}else Ie=function(){V(le,0)};function Me(Y){G=Y,X||(X=!0,Ie())}function Oe(Y,ve){ee=V(function(){Y(e.unstable_now())},ve)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_continueExecution=function(){D||O||(D=!0,Me(Q))},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return n(w)},e.unstable_next=function(Y){switch(T){case 1:case 2:case 3:var ve=3;break;default:ve=T}var oe=T;T=ve;try{return Y()}finally{T=oe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Y,ve){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var oe=T;T=Y;try{return ve()}finally{T=oe}},e.unstable_scheduleCallback=function(Y,ve,oe){var be=e.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?be+oe:be):oe=be,Y){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=oe+Pe,Y={id:b++,callback:ve,priorityLevel:Y,startTime:oe,expirationTime:Pe,sortIndex:-1},oe>be?(Y.sortIndex=oe,t(g,Y),n(w)===null&&Y===n(g)&&(P?(z(ee),ee=-1):P=!0,Oe(Z,oe-be))):(Y.sortIndex=Pe,t(w,Y),D||O||(D=!0,Me(Q))),Y},e.unstable_shouldYield=me,e.unstable_wrapCallback=function(Y){var ve=T;return function(){var oe=T;T=ve;try{return Y.apply(this,arguments)}finally{T=oe}}}})(Ry);ky.exports=Ry;var NC=ky.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TC=F,jr=NC;function Ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Oy=new Set,sc={};function Qo(e,t){Fa(e,t),Fa(e+"Capture",t)}function Fa(e,t){for(sc[e]=t,e=0;e<t.length;e++)Oy.add(t[e])}var cs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kf=Object.prototype.hasOwnProperty,IC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,am={},lm={};function MC(e){return kf.call(lm,e)?!0:kf.call(am,e)?!1:IC.test(e)?lm[e]=!0:(am[e]=!0,!1)}function kC(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function RC(e,t,n,i){if(t===null||typeof t>"u"||kC(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function fr(e,t,n,i,l,c,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=c,this.removeEmptyString=f}var Vn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Vn[e]=new fr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Vn[t]=new fr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Vn[e]=new fr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Vn[e]=new fr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Vn[e]=new fr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Vn[e]=new fr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Vn[e]=new fr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Vn[e]=new fr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Vn[e]=new fr(e,5,!1,e.toLowerCase(),null,!1,!1)});var s1=/[\-:]([a-z])/g;function o1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(s1,o1);Vn[t]=new fr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(s1,o1);Vn[t]=new fr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(s1,o1);Vn[t]=new fr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Vn[e]=new fr(e,1,!1,e.toLowerCase(),null,!1,!1)});Vn.xlinkHref=new fr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Vn[e]=new fr(e,1,!1,e.toLowerCase(),null,!0,!0)});function a1(e,t,n,i){var l=Vn.hasOwnProperty(t)?Vn[t]:null;(l!==null?l.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(RC(t,n,l,i)&&(n=null),i||l===null?MC(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,i=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var ms=TC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,su=Symbol.for("react.element"),ma=Symbol.for("react.portal"),ga=Symbol.for("react.fragment"),l1=Symbol.for("react.strict_mode"),Rf=Symbol.for("react.profiler"),Py=Symbol.for("react.provider"),Ly=Symbol.for("react.context"),c1=Symbol.for("react.forward_ref"),Of=Symbol.for("react.suspense"),Pf=Symbol.for("react.suspense_list"),u1=Symbol.for("react.memo"),Rs=Symbol.for("react.lazy"),Dy=Symbol.for("react.offscreen"),cm=Symbol.iterator;function El(e){return e===null||typeof e!="object"?null:(e=cm&&e[cm]||e["@@iterator"],typeof e=="function"?e:null)}var an=Object.assign,Rh;function jl(e){if(Rh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Rh=t&&t[1]||""}return`
`+Rh+e}var Oh=!1;function Ph(e,t){if(!e||Oh)return"";Oh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(g){var i=g}Reflect.construct(e,[],t)}else{try{t.call()}catch(g){i=g}e.call(t.prototype)}else{try{throw Error()}catch(g){i=g}e()}}catch(g){if(g&&i&&typeof g.stack=="string"){for(var l=g.stack.split(`
`),c=i.stack.split(`
`),f=l.length-1,y=c.length-1;1<=f&&0<=y&&l[f]!==c[y];)y--;for(;1<=f&&0<=y;f--,y--)if(l[f]!==c[y]){if(f!==1||y!==1)do if(f--,y--,0>y||l[f]!==c[y]){var w=`
`+l[f].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=f&&0<=y);break}}}finally{Oh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?jl(e):""}function OC(e){switch(e.tag){case 5:return jl(e.type);case 16:return jl("Lazy");case 13:return jl("Suspense");case 19:return jl("SuspenseList");case 0:case 2:case 15:return e=Ph(e.type,!1),e;case 11:return e=Ph(e.type.render,!1),e;case 1:return e=Ph(e.type,!0),e;default:return""}}function Lf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ga:return"Fragment";case ma:return"Portal";case Rf:return"Profiler";case l1:return"StrictMode";case Of:return"Suspense";case Pf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ly:return(e.displayName||"Context")+".Consumer";case Py:return(e._context.displayName||"Context")+".Provider";case c1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case u1:return t=e.displayName||null,t!==null?t:Lf(e.type)||"Memo";case Rs:t=e._payload,e=e._init;try{return Lf(e(t))}catch{}}return null}function PC(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lf(t);case 8:return t===l1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function eo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function By(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function LC(e){var t=By(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,c=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(f){i=""+f,c.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ou(e){e._valueTracker||(e._valueTracker=LC(e))}function jy(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=By(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Xu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Df(e,t){var n=t.checked;return an({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function um(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=eo(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Fy(e,t){t=t.checked,t!=null&&a1(e,"checked",t,!1)}function Bf(e,t){Fy(e,t);var n=eo(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?jf(e,t.type,n):t.hasOwnProperty("defaultValue")&&jf(e,t.type,eo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function dm(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function jf(e,t,n){(t!=="number"||Xu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Fl=Array.isArray;function Oa(e,t,n,i){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&i&&(e[n].defaultSelected=!0)}else{for(n=""+eo(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,i&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Ff(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return an({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hm(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ee(92));if(Fl(n)){if(1<n.length)throw Error(Ee(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:eo(n)}}function zy(e,t){var n=eo(t.value),i=eo(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function fm(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Uy(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Uy(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var au,Vy=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(au=au||document.createElement("div"),au.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=au.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function oc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Wl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DC=["Webkit","ms","Moz","O"];Object.keys(Wl).forEach(function(e){DC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Wl[t]=Wl[e]})});function Hy(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Wl.hasOwnProperty(e)&&Wl[e]?(""+t).trim():t+"px"}function Wy(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,l=Hy(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,l):e[n]=l}}var BC=an({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uf(e,t){if(t){if(BC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ee(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ee(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ee(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ee(62))}}function Vf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hf=null;function d1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wf=null,Pa=null,La=null;function pm(e){if(e=Rc(e)){if(typeof Wf!="function")throw Error(Ee(280));var t=e.stateNode;t&&(t=zd(t),Wf(e.stateNode,e.type,t))}}function Zy(e){Pa?La?La.push(e):La=[e]:Pa=e}function Gy(){if(Pa){var e=Pa,t=La;if(La=Pa=null,pm(e),t)for(e=0;e<t.length;e++)pm(t[e])}}function Yy(e,t){return e(t)}function Xy(){}var Lh=!1;function qy(e,t,n){if(Lh)return e(t,n);Lh=!0;try{return Yy(e,t,n)}finally{Lh=!1,(Pa!==null||La!==null)&&(Xy(),Gy())}}function ac(e,t){var n=e.stateNode;if(n===null)return null;var i=zd(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ee(231,t,typeof n));return n}var Zf=!1;if(cs)try{var Al={};Object.defineProperty(Al,"passive",{get:function(){Zf=!0}}),window.addEventListener("test",Al,Al),window.removeEventListener("test",Al,Al)}catch{Zf=!1}function jC(e,t,n,i,l,c,f,y,w){var g=Array.prototype.slice.call(arguments,3);try{t.apply(n,g)}catch(b){this.onError(b)}}var Zl=!1,qu=null,Ku=!1,Gf=null,FC={onError:function(e){Zl=!0,qu=e}};function zC(e,t,n,i,l,c,f,y,w){Zl=!1,qu=null,jC.apply(FC,arguments)}function UC(e,t,n,i,l,c,f,y,w){if(zC.apply(this,arguments),Zl){if(Zl){var g=qu;Zl=!1,qu=null}else throw Error(Ee(198));Ku||(Ku=!0,Gf=g)}}function Jo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ky(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function mm(e){if(Jo(e)!==e)throw Error(Ee(188))}function VC(e){var t=e.alternate;if(!t){if(t=Jo(e),t===null)throw Error(Ee(188));return t!==e?null:e}for(var n=e,i=t;;){var l=n.return;if(l===null)break;var c=l.alternate;if(c===null){if(i=l.return,i!==null){n=i;continue}break}if(l.child===c.child){for(c=l.child;c;){if(c===n)return mm(l),e;if(c===i)return mm(l),t;c=c.sibling}throw Error(Ee(188))}if(n.return!==i.return)n=l,i=c;else{for(var f=!1,y=l.child;y;){if(y===n){f=!0,n=l,i=c;break}if(y===i){f=!0,i=l,n=c;break}y=y.sibling}if(!f){for(y=c.child;y;){if(y===n){f=!0,n=c,i=l;break}if(y===i){f=!0,i=c,n=l;break}y=y.sibling}if(!f)throw Error(Ee(189))}}if(n.alternate!==i)throw Error(Ee(190))}if(n.tag!==3)throw Error(Ee(188));return n.stateNode.current===n?e:t}function Qy(e){return e=VC(e),e!==null?Jy(e):null}function Jy(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Jy(e);if(t!==null)return t;e=e.sibling}return null}var $y=jr.unstable_scheduleCallback,gm=jr.unstable_cancelCallback,HC=jr.unstable_shouldYield,WC=jr.unstable_requestPaint,fn=jr.unstable_now,ZC=jr.unstable_getCurrentPriorityLevel,h1=jr.unstable_ImmediatePriority,e2=jr.unstable_UserBlockingPriority,Qu=jr.unstable_NormalPriority,GC=jr.unstable_LowPriority,t2=jr.unstable_IdlePriority,Dd=null,Bi=null;function YC(e){if(Bi&&typeof Bi.onCommitFiberRoot=="function")try{Bi.onCommitFiberRoot(Dd,e,void 0,(e.current.flags&128)===128)}catch{}}var bi=Math.clz32?Math.clz32:KC,XC=Math.log,qC=Math.LN2;function KC(e){return e>>>=0,e===0?32:31-(XC(e)/qC|0)|0}var lu=64,cu=4194304;function zl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ju(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,l=e.suspendedLanes,c=e.pingedLanes,f=n&268435455;if(f!==0){var y=f&~l;y!==0?i=zl(y):(c&=f,c!==0&&(i=zl(c)))}else f=n&~l,f!==0?i=zl(f):c!==0&&(i=zl(c));if(i===0)return 0;if(t!==0&&t!==i&&!(t&l)&&(l=i&-i,c=t&-t,l>=c||l===16&&(c&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-bi(t),l=1<<n,i|=e[n],t&=~l;return i}function QC(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JC(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,l=e.expirationTimes,c=e.pendingLanes;0<c;){var f=31-bi(c),y=1<<f,w=l[f];w===-1?(!(y&n)||y&i)&&(l[f]=QC(y,t)):w<=t&&(e.expiredLanes|=y),c&=~y}}function Yf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function n2(){var e=lu;return lu<<=1,!(lu&4194240)&&(lu=64),e}function Dh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Mc(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-bi(t),e[t]=n}function $C(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-bi(n),c=1<<l;t[l]=0,i[l]=-1,e[l]=-1,n&=~c}}function f1(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-bi(n),l=1<<i;l&t|e[i]&t&&(e[i]|=t),n&=~l}}var Pt=0;function r2(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var i2,p1,s2,o2,a2,Xf=!1,uu=[],Us=null,Vs=null,Hs=null,lc=new Map,cc=new Map,Ls=[],e3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xm(e,t){switch(e){case"focusin":case"focusout":Us=null;break;case"dragenter":case"dragleave":Vs=null;break;case"mouseover":case"mouseout":Hs=null;break;case"pointerover":case"pointerout":lc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cc.delete(t.pointerId)}}function Nl(e,t,n,i,l,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:c,targetContainers:[l]},t!==null&&(t=Rc(t),t!==null&&p1(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function t3(e,t,n,i,l){switch(t){case"focusin":return Us=Nl(Us,e,t,n,i,l),!0;case"dragenter":return Vs=Nl(Vs,e,t,n,i,l),!0;case"mouseover":return Hs=Nl(Hs,e,t,n,i,l),!0;case"pointerover":var c=l.pointerId;return lc.set(c,Nl(lc.get(c)||null,e,t,n,i,l)),!0;case"gotpointercapture":return c=l.pointerId,cc.set(c,Nl(cc.get(c)||null,e,t,n,i,l)),!0}return!1}function l2(e){var t=Oo(e.target);if(t!==null){var n=Jo(t);if(n!==null){if(t=n.tag,t===13){if(t=Ky(n),t!==null){e.blockedOn=t,a2(e.priority,function(){s2(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ku(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=qf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Hf=i,n.target.dispatchEvent(i),Hf=null}else return t=Rc(n),t!==null&&p1(t),e.blockedOn=n,!1;t.shift()}return!0}function ym(e,t,n){ku(e)&&n.delete(t)}function n3(){Xf=!1,Us!==null&&ku(Us)&&(Us=null),Vs!==null&&ku(Vs)&&(Vs=null),Hs!==null&&ku(Hs)&&(Hs=null),lc.forEach(ym),cc.forEach(ym)}function Tl(e,t){e.blockedOn===t&&(e.blockedOn=null,Xf||(Xf=!0,jr.unstable_scheduleCallback(jr.unstable_NormalPriority,n3)))}function uc(e){function t(l){return Tl(l,e)}if(0<uu.length){Tl(uu[0],e);for(var n=1;n<uu.length;n++){var i=uu[n];i.blockedOn===e&&(i.blockedOn=null)}}for(Us!==null&&Tl(Us,e),Vs!==null&&Tl(Vs,e),Hs!==null&&Tl(Hs,e),lc.forEach(t),cc.forEach(t),n=0;n<Ls.length;n++)i=Ls[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<Ls.length&&(n=Ls[0],n.blockedOn===null);)l2(n),n.blockedOn===null&&Ls.shift()}var Da=ms.ReactCurrentBatchConfig,$u=!0;function r3(e,t,n,i){var l=Pt,c=Da.transition;Da.transition=null;try{Pt=1,m1(e,t,n,i)}finally{Pt=l,Da.transition=c}}function i3(e,t,n,i){var l=Pt,c=Da.transition;Da.transition=null;try{Pt=4,m1(e,t,n,i)}finally{Pt=l,Da.transition=c}}function m1(e,t,n,i){if($u){var l=qf(e,t,n,i);if(l===null)Gh(e,t,i,ed,n),xm(e,i);else if(t3(l,e,t,n,i))i.stopPropagation();else if(xm(e,i),t&4&&-1<e3.indexOf(e)){for(;l!==null;){var c=Rc(l);if(c!==null&&i2(c),c=qf(e,t,n,i),c===null&&Gh(e,t,i,ed,n),c===l)break;l=c}l!==null&&i.stopPropagation()}else Gh(e,t,i,null,n)}}var ed=null;function qf(e,t,n,i){if(ed=null,e=d1(i),e=Oo(e),e!==null)if(t=Jo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ky(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ed=e,null}function c2(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZC()){case h1:return 1;case e2:return 4;case Qu:case GC:return 16;case t2:return 536870912;default:return 16}default:return 16}}var js=null,g1=null,Ru=null;function u2(){if(Ru)return Ru;var e,t=g1,n=t.length,i,l="value"in js?js.value:js.textContent,c=l.length;for(e=0;e<n&&t[e]===l[e];e++);var f=n-e;for(i=1;i<=f&&t[n-i]===l[c-i];i++);return Ru=l.slice(e,1<i?1-i:void 0)}function Ou(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function du(){return!0}function vm(){return!1}function Ur(e){function t(n,i,l,c,f){this._reactName=n,this._targetInst=l,this.type=i,this.nativeEvent=c,this.target=f,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(n=e[y],this[y]=n?n(c):c[y]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?du:vm,this.isPropagationStopped=vm,this}return an(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=du)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=du)},persist:function(){},isPersistent:du}),t}var el={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},x1=Ur(el),kc=an({},el,{view:0,detail:0}),s3=Ur(kc),Bh,jh,Il,Bd=an({},kc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:y1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Il&&(Il&&e.type==="mousemove"?(Bh=e.screenX-Il.screenX,jh=e.screenY-Il.screenY):jh=Bh=0,Il=e),Bh)},movementY:function(e){return"movementY"in e?e.movementY:jh}}),wm=Ur(Bd),o3=an({},Bd,{dataTransfer:0}),a3=Ur(o3),l3=an({},kc,{relatedTarget:0}),Fh=Ur(l3),c3=an({},el,{animationName:0,elapsedTime:0,pseudoElement:0}),u3=Ur(c3),d3=an({},el,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),h3=Ur(d3),f3=an({},el,{data:0}),_m=Ur(f3),p3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},g3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function x3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=g3[e])?!!t[e]:!1}function y1(){return x3}var y3=an({},kc,{key:function(e){if(e.key){var t=p3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ou(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?m3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:y1,charCode:function(e){return e.type==="keypress"?Ou(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ou(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),v3=Ur(y3),w3=an({},Bd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bm=Ur(w3),_3=an({},kc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:y1}),b3=Ur(_3),C3=an({},el,{propertyName:0,elapsedTime:0,pseudoElement:0}),S3=Ur(C3),E3=an({},Bd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),A3=Ur(E3),N3=[9,13,27,32],v1=cs&&"CompositionEvent"in window,Gl=null;cs&&"documentMode"in document&&(Gl=document.documentMode);var T3=cs&&"TextEvent"in window&&!Gl,d2=cs&&(!v1||Gl&&8<Gl&&11>=Gl),Cm=" ",Sm=!1;function h2(e,t){switch(e){case"keyup":return N3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function f2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xa=!1;function I3(e,t){switch(e){case"compositionend":return f2(t);case"keypress":return t.which!==32?null:(Sm=!0,Cm);case"textInput":return e=t.data,e===Cm&&Sm?null:e;default:return null}}function M3(e,t){if(xa)return e==="compositionend"||!v1&&h2(e,t)?(e=u2(),Ru=g1=js=null,xa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return d2&&t.locale!=="ko"?null:t.data;default:return null}}var k3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Em(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!k3[e.type]:t==="textarea"}function p2(e,t,n,i){Zy(i),t=td(t,"onChange"),0<t.length&&(n=new x1("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Yl=null,dc=null;function R3(e){E2(e,0)}function jd(e){var t=wa(e);if(jy(t))return e}function O3(e,t){if(e==="change")return t}var m2=!1;if(cs){var zh;if(cs){var Uh="oninput"in document;if(!Uh){var Am=document.createElement("div");Am.setAttribute("oninput","return;"),Uh=typeof Am.oninput=="function"}zh=Uh}else zh=!1;m2=zh&&(!document.documentMode||9<document.documentMode)}function Nm(){Yl&&(Yl.detachEvent("onpropertychange",g2),dc=Yl=null)}function g2(e){if(e.propertyName==="value"&&jd(dc)){var t=[];p2(t,dc,e,d1(e)),qy(R3,t)}}function P3(e,t,n){e==="focusin"?(Nm(),Yl=t,dc=n,Yl.attachEvent("onpropertychange",g2)):e==="focusout"&&Nm()}function L3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return jd(dc)}function D3(e,t){if(e==="click")return jd(t)}function B3(e,t){if(e==="input"||e==="change")return jd(t)}function j3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Si=typeof Object.is=="function"?Object.is:j3;function hc(e,t){if(Si(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var l=n[i];if(!kf.call(t,l)||!Si(e[l],t[l]))return!1}return!0}function Tm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Im(e,t){var n=Tm(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Tm(n)}}function x2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?x2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function y2(){for(var e=window,t=Xu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Xu(e.document)}return t}function w1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function F3(e){var t=y2(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&x2(n.ownerDocument.documentElement,n)){if(i!==null&&w1(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,c=Math.min(i.start,l);i=i.end===void 0?c:Math.min(i.end,l),!e.extend&&c>i&&(l=i,i=c,c=l),l=Im(n,c);var f=Im(n,i);l&&f&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),c>i?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var z3=cs&&"documentMode"in document&&11>=document.documentMode,ya=null,Kf=null,Xl=null,Qf=!1;function Mm(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qf||ya==null||ya!==Xu(i)||(i=ya,"selectionStart"in i&&w1(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Xl&&hc(Xl,i)||(Xl=i,i=td(Kf,"onSelect"),0<i.length&&(t=new x1("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=ya)))}function hu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var va={animationend:hu("Animation","AnimationEnd"),animationiteration:hu("Animation","AnimationIteration"),animationstart:hu("Animation","AnimationStart"),transitionend:hu("Transition","TransitionEnd")},Vh={},v2={};cs&&(v2=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function Fd(e){if(Vh[e])return Vh[e];if(!va[e])return e;var t=va[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in v2)return Vh[e]=t[n];return e}var w2=Fd("animationend"),_2=Fd("animationiteration"),b2=Fd("animationstart"),C2=Fd("transitionend"),S2=new Map,km="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oo(e,t){S2.set(e,t),Qo(t,[e])}for(var Hh=0;Hh<km.length;Hh++){var Wh=km[Hh],U3=Wh.toLowerCase(),V3=Wh[0].toUpperCase()+Wh.slice(1);oo(U3,"on"+V3)}oo(w2,"onAnimationEnd");oo(_2,"onAnimationIteration");oo(b2,"onAnimationStart");oo("dblclick","onDoubleClick");oo("focusin","onFocus");oo("focusout","onBlur");oo(C2,"onTransitionEnd");Fa("onMouseEnter",["mouseout","mouseover"]);Fa("onMouseLeave",["mouseout","mouseover"]);Fa("onPointerEnter",["pointerout","pointerover"]);Fa("onPointerLeave",["pointerout","pointerover"]);Qo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),H3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ul));function Rm(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,UC(i,t,void 0,e),e.currentTarget=null}function E2(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],l=i.event;i=i.listeners;e:{var c=void 0;if(t)for(var f=i.length-1;0<=f;f--){var y=i[f],w=y.instance,g=y.currentTarget;if(y=y.listener,w!==c&&l.isPropagationStopped())break e;Rm(l,y,g),c=w}else for(f=0;f<i.length;f++){if(y=i[f],w=y.instance,g=y.currentTarget,y=y.listener,w!==c&&l.isPropagationStopped())break e;Rm(l,y,g),c=w}}}if(Ku)throw e=Gf,Ku=!1,Gf=null,e}function qt(e,t){var n=t[n0];n===void 0&&(n=t[n0]=new Set);var i=e+"__bubble";n.has(i)||(A2(t,e,2,!1),n.add(i))}function Zh(e,t,n){var i=0;t&&(i|=4),A2(n,e,i,t)}var fu="_reactListening"+Math.random().toString(36).slice(2);function fc(e){if(!e[fu]){e[fu]=!0,Oy.forEach(function(n){n!=="selectionchange"&&(H3.has(n)||Zh(n,!1,e),Zh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[fu]||(t[fu]=!0,Zh("selectionchange",!1,t))}}function A2(e,t,n,i){switch(c2(t)){case 1:var l=r3;break;case 4:l=i3;break;default:l=m1}n=l.bind(null,t,n,e),l=void 0,!Zf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),i?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function Gh(e,t,n,i,l){var c=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var y=i.stateNode.containerInfo;if(y===l||y.nodeType===8&&y.parentNode===l)break;if(f===4)for(f=i.return;f!==null;){var w=f.tag;if((w===3||w===4)&&(w=f.stateNode.containerInfo,w===l||w.nodeType===8&&w.parentNode===l))return;f=f.return}for(;y!==null;){if(f=Oo(y),f===null)return;if(w=f.tag,w===5||w===6){i=c=f;continue e}y=y.parentNode}}i=i.return}qy(function(){var g=c,b=d1(n),E=[];e:{var T=S2.get(e);if(T!==void 0){var O=x1,D=e;switch(e){case"keypress":if(Ou(n)===0)break e;case"keydown":case"keyup":O=v3;break;case"focusin":D="focus",O=Fh;break;case"focusout":D="blur",O=Fh;break;case"beforeblur":case"afterblur":O=Fh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=wm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=a3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=b3;break;case w2:case _2:case b2:O=u3;break;case C2:O=S3;break;case"scroll":O=s3;break;case"wheel":O=A3;break;case"copy":case"cut":case"paste":O=h3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=bm}var P=(t&4)!==0,V=!P&&e==="scroll",z=P?T!==null?T+"Capture":null:T;P=[];for(var R=g,I;R!==null;){I=R;var Z=I.stateNode;if(I.tag===5&&Z!==null&&(I=Z,z!==null&&(Z=ac(R,z),Z!=null&&P.push(pc(R,Z,I)))),V)break;R=R.return}0<P.length&&(T=new O(T,D,null,n,b),E.push({event:T,listeners:P}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",T&&n!==Hf&&(D=n.relatedTarget||n.fromElement)&&(Oo(D)||D[us]))break e;if((O||T)&&(T=b.window===b?b:(T=b.ownerDocument)?T.defaultView||T.parentWindow:window,O?(D=n.relatedTarget||n.toElement,O=g,D=D?Oo(D):null,D!==null&&(V=Jo(D),D!==V||D.tag!==5&&D.tag!==6)&&(D=null)):(O=null,D=g),O!==D)){if(P=wm,Z="onMouseLeave",z="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(P=bm,Z="onPointerLeave",z="onPointerEnter",R="pointer"),V=O==null?T:wa(O),I=D==null?T:wa(D),T=new P(Z,R+"leave",O,n,b),T.target=V,T.relatedTarget=I,Z=null,Oo(b)===g&&(P=new P(z,R+"enter",D,n,b),P.target=I,P.relatedTarget=V,Z=P),V=Z,O&&D)t:{for(P=O,z=D,R=0,I=P;I;I=ha(I))R++;for(I=0,Z=z;Z;Z=ha(Z))I++;for(;0<R-I;)P=ha(P),R--;for(;0<I-R;)z=ha(z),I--;for(;R--;){if(P===z||z!==null&&P===z.alternate)break t;P=ha(P),z=ha(z)}P=null}else P=null;O!==null&&Om(E,T,O,P,!1),D!==null&&V!==null&&Om(E,V,D,P,!0)}}e:{if(T=g?wa(g):window,O=T.nodeName&&T.nodeName.toLowerCase(),O==="select"||O==="input"&&T.type==="file")var Q=O3;else if(Em(T))if(m2)Q=B3;else{Q=L3;var X=P3}else(O=T.nodeName)&&O.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(Q=D3);if(Q&&(Q=Q(e,g))){p2(E,Q,n,b);break e}X&&X(e,T,g),e==="focusout"&&(X=T._wrapperState)&&X.controlled&&T.type==="number"&&jf(T,"number",T.value)}switch(X=g?wa(g):window,e){case"focusin":(Em(X)||X.contentEditable==="true")&&(ya=X,Kf=g,Xl=null);break;case"focusout":Xl=Kf=ya=null;break;case"mousedown":Qf=!0;break;case"contextmenu":case"mouseup":case"dragend":Qf=!1,Mm(E,n,b);break;case"selectionchange":if(z3)break;case"keydown":case"keyup":Mm(E,n,b)}var G;if(v1)e:{switch(e){case"compositionstart":var ee="onCompositionStart";break e;case"compositionend":ee="onCompositionEnd";break e;case"compositionupdate":ee="onCompositionUpdate";break e}ee=void 0}else xa?h2(e,n)&&(ee="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ee="onCompositionStart");ee&&(d2&&n.locale!=="ko"&&(xa||ee!=="onCompositionStart"?ee==="onCompositionEnd"&&xa&&(G=u2()):(js=b,g1="value"in js?js.value:js.textContent,xa=!0)),X=td(g,ee),0<X.length&&(ee=new _m(ee,e,null,n,b),E.push({event:ee,listeners:X}),G?ee.data=G:(G=f2(n),G!==null&&(ee.data=G)))),(G=T3?I3(e,n):M3(e,n))&&(g=td(g,"onBeforeInput"),0<g.length&&(b=new _m("onBeforeInput","beforeinput",null,n,b),E.push({event:b,listeners:g}),b.data=G))}E2(E,t)})}function pc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function td(e,t){for(var n=t+"Capture",i=[];e!==null;){var l=e,c=l.stateNode;l.tag===5&&c!==null&&(l=c,c=ac(e,n),c!=null&&i.unshift(pc(e,c,l)),c=ac(e,t),c!=null&&i.push(pc(e,c,l))),e=e.return}return i}function ha(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Om(e,t,n,i,l){for(var c=t._reactName,f=[];n!==null&&n!==i;){var y=n,w=y.alternate,g=y.stateNode;if(w!==null&&w===i)break;y.tag===5&&g!==null&&(y=g,l?(w=ac(n,c),w!=null&&f.unshift(pc(n,w,y))):l||(w=ac(n,c),w!=null&&f.push(pc(n,w,y)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var W3=/\r\n?/g,Z3=/\u0000|\uFFFD/g;function Pm(e){return(typeof e=="string"?e:""+e).replace(W3,`
`).replace(Z3,"")}function pu(e,t,n){if(t=Pm(t),Pm(e)!==t&&n)throw Error(Ee(425))}function nd(){}var Jf=null,$f=null;function e0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var t0=typeof setTimeout=="function"?setTimeout:void 0,G3=typeof clearTimeout=="function"?clearTimeout:void 0,Lm=typeof Promise=="function"?Promise:void 0,Y3=typeof queueMicrotask=="function"?queueMicrotask:typeof Lm<"u"?function(e){return Lm.resolve(null).then(e).catch(X3)}:t0;function X3(e){setTimeout(function(){throw e})}function Yh(e,t){var n=t,i=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(i===0){e.removeChild(l),uc(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=l}while(n);uc(t)}function Ws(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Dm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var tl=Math.random().toString(36).slice(2),Di="__reactFiber$"+tl,mc="__reactProps$"+tl,us="__reactContainer$"+tl,n0="__reactEvents$"+tl,q3="__reactListeners$"+tl,K3="__reactHandles$"+tl;function Oo(e){var t=e[Di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[us]||n[Di]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Dm(e);e!==null;){if(n=e[Di])return n;e=Dm(e)}return t}e=n,n=e.parentNode}return null}function Rc(e){return e=e[Di]||e[us],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ee(33))}function zd(e){return e[mc]||null}var r0=[],_a=-1;function ao(e){return{current:e}}function Kt(e){0>_a||(e.current=r0[_a],r0[_a]=null,_a--)}function Ht(e,t){_a++,r0[_a]=e.current,e.current=t}var to={},er=ao(to),vr=ao(!1),Wo=to;function za(e,t){var n=e.type.contextTypes;if(!n)return to;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var l={},c;for(c in n)l[c]=t[c];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function wr(e){return e=e.childContextTypes,e!=null}function rd(){Kt(vr),Kt(er)}function Bm(e,t,n){if(er.current!==to)throw Error(Ee(168));Ht(er,t),Ht(vr,n)}function N2(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var l in i)if(!(l in t))throw Error(Ee(108,PC(e)||"Unknown",l));return an({},n,i)}function id(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||to,Wo=er.current,Ht(er,e),Ht(vr,vr.current),!0}function jm(e,t,n){var i=e.stateNode;if(!i)throw Error(Ee(169));n?(e=N2(e,t,Wo),i.__reactInternalMemoizedMergedChildContext=e,Kt(vr),Kt(er),Ht(er,e)):Kt(vr),Ht(vr,n)}var es=null,Ud=!1,Xh=!1;function T2(e){es===null?es=[e]:es.push(e)}function Q3(e){Ud=!0,T2(e)}function lo(){if(!Xh&&es!==null){Xh=!0;var e=0,t=Pt;try{var n=es;for(Pt=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}es=null,Ud=!1}catch(l){throw es!==null&&(es=es.slice(e+1)),$y(h1,lo),l}finally{Pt=t,Xh=!1}}return null}var ba=[],Ca=0,sd=null,od=0,ri=[],ii=0,Zo=null,ts=1,ns="";function Ao(e,t){ba[Ca++]=od,ba[Ca++]=sd,sd=e,od=t}function I2(e,t,n){ri[ii++]=ts,ri[ii++]=ns,ri[ii++]=Zo,Zo=e;var i=ts;e=ns;var l=32-bi(i)-1;i&=~(1<<l),n+=1;var c=32-bi(t)+l;if(30<c){var f=l-l%5;c=(i&(1<<f)-1).toString(32),i>>=f,l-=f,ts=1<<32-bi(t)+l|n<<l|i,ns=c+e}else ts=1<<c|n<<l|i,ns=e}function _1(e){e.return!==null&&(Ao(e,1),I2(e,1,0))}function b1(e){for(;e===sd;)sd=ba[--Ca],ba[Ca]=null,od=ba[--Ca],ba[Ca]=null;for(;e===Zo;)Zo=ri[--ii],ri[ii]=null,ns=ri[--ii],ri[ii]=null,ts=ri[--ii],ri[ii]=null}var Dr=null,Lr=null,$t=!1,_i=null;function M2(e,t){var n=si(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Fm(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Dr=e,Lr=Ws(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Dr=e,Lr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Zo!==null?{id:ts,overflow:ns}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=si(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Dr=e,Lr=null,!0):!1;default:return!1}}function i0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function s0(e){if($t){var t=Lr;if(t){var n=t;if(!Fm(e,t)){if(i0(e))throw Error(Ee(418));t=Ws(n.nextSibling);var i=Dr;t&&Fm(e,t)?M2(i,n):(e.flags=e.flags&-4097|2,$t=!1,Dr=e)}}else{if(i0(e))throw Error(Ee(418));e.flags=e.flags&-4097|2,$t=!1,Dr=e}}}function zm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Dr=e}function mu(e){if(e!==Dr)return!1;if(!$t)return zm(e),$t=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!e0(e.type,e.memoizedProps)),t&&(t=Lr)){if(i0(e))throw k2(),Error(Ee(418));for(;t;)M2(e,t),t=Ws(t.nextSibling)}if(zm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ee(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Lr=Ws(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Lr=null}}else Lr=Dr?Ws(e.stateNode.nextSibling):null;return!0}function k2(){for(var e=Lr;e;)e=Ws(e.nextSibling)}function Ua(){Lr=Dr=null,$t=!1}function C1(e){_i===null?_i=[e]:_i.push(e)}var J3=ms.ReactCurrentBatchConfig;function Ml(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ee(309));var i=n.stateNode}if(!i)throw Error(Ee(147,e));var l=i,c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(f){var y=l.refs;f===null?delete y[c]:y[c]=f},t._stringRef=c,t)}if(typeof e!="string")throw Error(Ee(284));if(!n._owner)throw Error(Ee(290,e))}return e}function gu(e,t){throw e=Object.prototype.toString.call(t),Error(Ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Um(e){var t=e._init;return t(e._payload)}function R2(e){function t(z,R){if(e){var I=z.deletions;I===null?(z.deletions=[R],z.flags|=16):I.push(R)}}function n(z,R){if(!e)return null;for(;R!==null;)t(z,R),R=R.sibling;return null}function i(z,R){for(z=new Map;R!==null;)R.key!==null?z.set(R.key,R):z.set(R.index,R),R=R.sibling;return z}function l(z,R){return z=Xs(z,R),z.index=0,z.sibling=null,z}function c(z,R,I){return z.index=I,e?(I=z.alternate,I!==null?(I=I.index,I<R?(z.flags|=2,R):I):(z.flags|=2,R)):(z.flags|=1048576,R)}function f(z){return e&&z.alternate===null&&(z.flags|=2),z}function y(z,R,I,Z){return R===null||R.tag!==6?(R=tf(I,z.mode,Z),R.return=z,R):(R=l(R,I),R.return=z,R)}function w(z,R,I,Z){var Q=I.type;return Q===ga?b(z,R,I.props.children,Z,I.key):R!==null&&(R.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===Rs&&Um(Q)===R.type)?(Z=l(R,I.props),Z.ref=Ml(z,R,I),Z.return=z,Z):(Z=zu(I.type,I.key,I.props,null,z.mode,Z),Z.ref=Ml(z,R,I),Z.return=z,Z)}function g(z,R,I,Z){return R===null||R.tag!==4||R.stateNode.containerInfo!==I.containerInfo||R.stateNode.implementation!==I.implementation?(R=nf(I,z.mode,Z),R.return=z,R):(R=l(R,I.children||[]),R.return=z,R)}function b(z,R,I,Z,Q){return R===null||R.tag!==7?(R=Fo(I,z.mode,Z,Q),R.return=z,R):(R=l(R,I),R.return=z,R)}function E(z,R,I){if(typeof R=="string"&&R!==""||typeof R=="number")return R=tf(""+R,z.mode,I),R.return=z,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case su:return I=zu(R.type,R.key,R.props,null,z.mode,I),I.ref=Ml(z,null,R),I.return=z,I;case ma:return R=nf(R,z.mode,I),R.return=z,R;case Rs:var Z=R._init;return E(z,Z(R._payload),I)}if(Fl(R)||El(R))return R=Fo(R,z.mode,I,null),R.return=z,R;gu(z,R)}return null}function T(z,R,I,Z){var Q=R!==null?R.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return Q!==null?null:y(z,R,""+I,Z);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case su:return I.key===Q?w(z,R,I,Z):null;case ma:return I.key===Q?g(z,R,I,Z):null;case Rs:return Q=I._init,T(z,R,Q(I._payload),Z)}if(Fl(I)||El(I))return Q!==null?null:b(z,R,I,Z,null);gu(z,I)}return null}function O(z,R,I,Z,Q){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return z=z.get(I)||null,y(R,z,""+Z,Q);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case su:return z=z.get(Z.key===null?I:Z.key)||null,w(R,z,Z,Q);case ma:return z=z.get(Z.key===null?I:Z.key)||null,g(R,z,Z,Q);case Rs:var X=Z._init;return O(z,R,I,X(Z._payload),Q)}if(Fl(Z)||El(Z))return z=z.get(I)||null,b(R,z,Z,Q,null);gu(R,Z)}return null}function D(z,R,I,Z){for(var Q=null,X=null,G=R,ee=R=0,U=null;G!==null&&ee<I.length;ee++){G.index>ee?(U=G,G=null):U=G.sibling;var re=T(z,G,I[ee],Z);if(re===null){G===null&&(G=U);break}e&&G&&re.alternate===null&&t(z,G),R=c(re,R,ee),X===null?Q=re:X.sibling=re,X=re,G=U}if(ee===I.length)return n(z,G),$t&&Ao(z,ee),Q;if(G===null){for(;ee<I.length;ee++)G=E(z,I[ee],Z),G!==null&&(R=c(G,R,ee),X===null?Q=G:X.sibling=G,X=G);return $t&&Ao(z,ee),Q}for(G=i(z,G);ee<I.length;ee++)U=O(G,z,ee,I[ee],Z),U!==null&&(e&&U.alternate!==null&&G.delete(U.key===null?ee:U.key),R=c(U,R,ee),X===null?Q=U:X.sibling=U,X=U);return e&&G.forEach(function(me){return t(z,me)}),$t&&Ao(z,ee),Q}function P(z,R,I,Z){var Q=El(I);if(typeof Q!="function")throw Error(Ee(150));if(I=Q.call(I),I==null)throw Error(Ee(151));for(var X=Q=null,G=R,ee=R=0,U=null,re=I.next();G!==null&&!re.done;ee++,re=I.next()){G.index>ee?(U=G,G=null):U=G.sibling;var me=T(z,G,re.value,Z);if(me===null){G===null&&(G=U);break}e&&G&&me.alternate===null&&t(z,G),R=c(me,R,ee),X===null?Q=me:X.sibling=me,X=me,G=U}if(re.done)return n(z,G),$t&&Ao(z,ee),Q;if(G===null){for(;!re.done;ee++,re=I.next())re=E(z,re.value,Z),re!==null&&(R=c(re,R,ee),X===null?Q=re:X.sibling=re,X=re);return $t&&Ao(z,ee),Q}for(G=i(z,G);!re.done;ee++,re=I.next())re=O(G,z,ee,re.value,Z),re!==null&&(e&&re.alternate!==null&&G.delete(re.key===null?ee:re.key),R=c(re,R,ee),X===null?Q=re:X.sibling=re,X=re);return e&&G.forEach(function(le){return t(z,le)}),$t&&Ao(z,ee),Q}function V(z,R,I,Z){if(typeof I=="object"&&I!==null&&I.type===ga&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case su:e:{for(var Q=I.key,X=R;X!==null;){if(X.key===Q){if(Q=I.type,Q===ga){if(X.tag===7){n(z,X.sibling),R=l(X,I.props.children),R.return=z,z=R;break e}}else if(X.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===Rs&&Um(Q)===X.type){n(z,X.sibling),R=l(X,I.props),R.ref=Ml(z,X,I),R.return=z,z=R;break e}n(z,X);break}else t(z,X);X=X.sibling}I.type===ga?(R=Fo(I.props.children,z.mode,Z,I.key),R.return=z,z=R):(Z=zu(I.type,I.key,I.props,null,z.mode,Z),Z.ref=Ml(z,R,I),Z.return=z,z=Z)}return f(z);case ma:e:{for(X=I.key;R!==null;){if(R.key===X)if(R.tag===4&&R.stateNode.containerInfo===I.containerInfo&&R.stateNode.implementation===I.implementation){n(z,R.sibling),R=l(R,I.children||[]),R.return=z,z=R;break e}else{n(z,R);break}else t(z,R);R=R.sibling}R=nf(I,z.mode,Z),R.return=z,z=R}return f(z);case Rs:return X=I._init,V(z,R,X(I._payload),Z)}if(Fl(I))return D(z,R,I,Z);if(El(I))return P(z,R,I,Z);gu(z,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,R!==null&&R.tag===6?(n(z,R.sibling),R=l(R,I),R.return=z,z=R):(n(z,R),R=tf(I,z.mode,Z),R.return=z,z=R),f(z)):n(z,R)}return V}var Va=R2(!0),O2=R2(!1),ad=ao(null),ld=null,Sa=null,S1=null;function E1(){S1=Sa=ld=null}function A1(e){var t=ad.current;Kt(ad),e._currentValue=t}function o0(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ba(e,t){ld=e,S1=Sa=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yr=!0),e.firstContext=null)}function ai(e){var t=e._currentValue;if(S1!==e)if(e={context:e,memoizedValue:t,next:null},Sa===null){if(ld===null)throw Error(Ee(308));Sa=e,ld.dependencies={lanes:0,firstContext:e}}else Sa=Sa.next=e;return t}var Po=null;function N1(e){Po===null?Po=[e]:Po.push(e)}function P2(e,t,n,i){var l=t.interleaved;return l===null?(n.next=n,N1(t)):(n.next=l.next,l.next=n),t.interleaved=n,ds(e,i)}function ds(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Os=!1;function T1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function L2(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function os(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Zs(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Ct&2){var l=i.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),i.pending=t,ds(e,n)}return l=i.interleaved,l===null?(t.next=t,N1(i)):(t.next=l.next,l.next=t),i.interleaved=t,ds(e,n)}function Pu(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,f1(e,n)}}function Vm(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var l=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};c===null?l=c=f:c=c.next=f,n=n.next}while(n!==null);c===null?l=c=t:c=c.next=t}else l=c=t;n={baseState:i.baseState,firstBaseUpdate:l,lastBaseUpdate:c,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function cd(e,t,n,i){var l=e.updateQueue;Os=!1;var c=l.firstBaseUpdate,f=l.lastBaseUpdate,y=l.shared.pending;if(y!==null){l.shared.pending=null;var w=y,g=w.next;w.next=null,f===null?c=g:f.next=g,f=w;var b=e.alternate;b!==null&&(b=b.updateQueue,y=b.lastBaseUpdate,y!==f&&(y===null?b.firstBaseUpdate=g:y.next=g,b.lastBaseUpdate=w))}if(c!==null){var E=l.baseState;f=0,b=g=w=null,y=c;do{var T=y.lane,O=y.eventTime;if((i&T)===T){b!==null&&(b=b.next={eventTime:O,lane:0,tag:y.tag,payload:y.payload,callback:y.callback,next:null});e:{var D=e,P=y;switch(T=t,O=n,P.tag){case 1:if(D=P.payload,typeof D=="function"){E=D.call(O,E,T);break e}E=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=P.payload,T=typeof D=="function"?D.call(O,E,T):D,T==null)break e;E=an({},E,T);break e;case 2:Os=!0}}y.callback!==null&&y.lane!==0&&(e.flags|=64,T=l.effects,T===null?l.effects=[y]:T.push(y))}else O={eventTime:O,lane:T,tag:y.tag,payload:y.payload,callback:y.callback,next:null},b===null?(g=b=O,w=E):b=b.next=O,f|=T;if(y=y.next,y===null){if(y=l.shared.pending,y===null)break;T=y,y=T.next,T.next=null,l.lastBaseUpdate=T,l.shared.pending=null}}while(!0);if(b===null&&(w=E),l.baseState=w,l.firstBaseUpdate=g,l.lastBaseUpdate=b,t=l.shared.interleaved,t!==null){l=t;do f|=l.lane,l=l.next;while(l!==t)}else c===null&&(l.shared.lanes=0);Yo|=f,e.lanes=f,e.memoizedState=E}}function Hm(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],l=i.callback;if(l!==null){if(i.callback=null,i=n,typeof l!="function")throw Error(Ee(191,l));l.call(i)}}}var Oc={},ji=ao(Oc),gc=ao(Oc),xc=ao(Oc);function Lo(e){if(e===Oc)throw Error(Ee(174));return e}function I1(e,t){switch(Ht(xc,t),Ht(gc,e),Ht(ji,Oc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:zf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=zf(t,e)}Kt(ji),Ht(ji,t)}function Ha(){Kt(ji),Kt(gc),Kt(xc)}function D2(e){Lo(xc.current);var t=Lo(ji.current),n=zf(t,e.type);t!==n&&(Ht(gc,e),Ht(ji,n))}function M1(e){gc.current===e&&(Kt(ji),Kt(gc))}var rn=ao(0);function ud(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qh=[];function k1(){for(var e=0;e<qh.length;e++)qh[e]._workInProgressVersionPrimary=null;qh.length=0}var Lu=ms.ReactCurrentDispatcher,Kh=ms.ReactCurrentBatchConfig,Go=0,on=null,An=null,Ln=null,dd=!1,ql=!1,yc=0,$3=0;function Xn(){throw Error(Ee(321))}function R1(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Si(e[n],t[n]))return!1;return!0}function O1(e,t,n,i,l,c){if(Go=c,on=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Lu.current=e===null||e.memoizedState===null?rS:iS,e=n(i,l),ql){c=0;do{if(ql=!1,yc=0,25<=c)throw Error(Ee(301));c+=1,Ln=An=null,t.updateQueue=null,Lu.current=sS,e=n(i,l)}while(ql)}if(Lu.current=hd,t=An!==null&&An.next!==null,Go=0,Ln=An=on=null,dd=!1,t)throw Error(Ee(300));return e}function P1(){var e=yc!==0;return yc=0,e}function Pi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?on.memoizedState=Ln=e:Ln=Ln.next=e,Ln}function li(){if(An===null){var e=on.alternate;e=e!==null?e.memoizedState:null}else e=An.next;var t=Ln===null?on.memoizedState:Ln.next;if(t!==null)Ln=t,An=e;else{if(e===null)throw Error(Ee(310));An=e,e={memoizedState:An.memoizedState,baseState:An.baseState,baseQueue:An.baseQueue,queue:An.queue,next:null},Ln===null?on.memoizedState=Ln=e:Ln=Ln.next=e}return Ln}function vc(e,t){return typeof t=="function"?t(e):t}function Qh(e){var t=li(),n=t.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=e;var i=An,l=i.baseQueue,c=n.pending;if(c!==null){if(l!==null){var f=l.next;l.next=c.next,c.next=f}i.baseQueue=l=c,n.pending=null}if(l!==null){c=l.next,i=i.baseState;var y=f=null,w=null,g=c;do{var b=g.lane;if((Go&b)===b)w!==null&&(w=w.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),i=g.hasEagerState?g.eagerState:e(i,g.action);else{var E={lane:b,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};w===null?(y=w=E,f=i):w=w.next=E,on.lanes|=b,Yo|=b}g=g.next}while(g!==null&&g!==c);w===null?f=i:w.next=y,Si(i,t.memoizedState)||(yr=!0),t.memoizedState=i,t.baseState=f,t.baseQueue=w,n.lastRenderedState=i}if(e=n.interleaved,e!==null){l=e;do c=l.lane,on.lanes|=c,Yo|=c,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Jh(e){var t=li(),n=t.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=e;var i=n.dispatch,l=n.pending,c=t.memoizedState;if(l!==null){n.pending=null;var f=l=l.next;do c=e(c,f.action),f=f.next;while(f!==l);Si(c,t.memoizedState)||(yr=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),n.lastRenderedState=c}return[c,i]}function B2(){}function j2(e,t){var n=on,i=li(),l=t(),c=!Si(i.memoizedState,l);if(c&&(i.memoizedState=l,yr=!0),i=i.queue,L1(U2.bind(null,n,i,e),[e]),i.getSnapshot!==t||c||Ln!==null&&Ln.memoizedState.tag&1){if(n.flags|=2048,wc(9,z2.bind(null,n,i,l,t),void 0,null),Dn===null)throw Error(Ee(349));Go&30||F2(n,t,l)}return l}function F2(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=on.updateQueue,t===null?(t={lastEffect:null,stores:null},on.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function z2(e,t,n,i){t.value=n,t.getSnapshot=i,V2(t)&&H2(e)}function U2(e,t,n){return n(function(){V2(t)&&H2(e)})}function V2(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Si(e,n)}catch{return!0}}function H2(e){var t=ds(e,1);t!==null&&Ci(t,e,1,-1)}function Wm(e){var t=Pi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vc,lastRenderedState:e},t.queue=e,e=e.dispatch=nS.bind(null,on,e),[t.memoizedState,e]}function wc(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=on.updateQueue,t===null?(t={lastEffect:null,stores:null},on.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function W2(){return li().memoizedState}function Du(e,t,n,i){var l=Pi();on.flags|=e,l.memoizedState=wc(1|t,n,void 0,i===void 0?null:i)}function Vd(e,t,n,i){var l=li();i=i===void 0?null:i;var c=void 0;if(An!==null){var f=An.memoizedState;if(c=f.destroy,i!==null&&R1(i,f.deps)){l.memoizedState=wc(t,n,c,i);return}}on.flags|=e,l.memoizedState=wc(1|t,n,c,i)}function Zm(e,t){return Du(8390656,8,e,t)}function L1(e,t){return Vd(2048,8,e,t)}function Z2(e,t){return Vd(4,2,e,t)}function G2(e,t){return Vd(4,4,e,t)}function Y2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function X2(e,t,n){return n=n!=null?n.concat([e]):null,Vd(4,4,Y2.bind(null,t,e),n)}function D1(){}function q2(e,t){var n=li();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&R1(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function K2(e,t){var n=li();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&R1(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Q2(e,t,n){return Go&21?(Si(n,t)||(n=n2(),on.lanes|=n,Yo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yr=!0),e.memoizedState=n)}function eS(e,t){var n=Pt;Pt=n!==0&&4>n?n:4,e(!0);var i=Kh.transition;Kh.transition={};try{e(!1),t()}finally{Pt=n,Kh.transition=i}}function J2(){return li().memoizedState}function tS(e,t,n){var i=Ys(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},$2(e))ev(t,n);else if(n=P2(e,t,n,i),n!==null){var l=dr();Ci(n,e,i,l),tv(n,t,i)}}function nS(e,t,n){var i=Ys(e),l={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if($2(e))ev(t,l);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var f=t.lastRenderedState,y=c(f,n);if(l.hasEagerState=!0,l.eagerState=y,Si(y,f)){var w=t.interleaved;w===null?(l.next=l,N1(t)):(l.next=w.next,w.next=l),t.interleaved=l;return}}catch{}finally{}n=P2(e,t,l,i),n!==null&&(l=dr(),Ci(n,e,i,l),tv(n,t,i))}}function $2(e){var t=e.alternate;return e===on||t!==null&&t===on}function ev(e,t){ql=dd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function tv(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,f1(e,n)}}var hd={readContext:ai,useCallback:Xn,useContext:Xn,useEffect:Xn,useImperativeHandle:Xn,useInsertionEffect:Xn,useLayoutEffect:Xn,useMemo:Xn,useReducer:Xn,useRef:Xn,useState:Xn,useDebugValue:Xn,useDeferredValue:Xn,useTransition:Xn,useMutableSource:Xn,useSyncExternalStore:Xn,useId:Xn,unstable_isNewReconciler:!1},rS={readContext:ai,useCallback:function(e,t){return Pi().memoizedState=[e,t===void 0?null:t],e},useContext:ai,useEffect:Zm,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Du(4194308,4,Y2.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Du(4194308,4,e,t)},useInsertionEffect:function(e,t){return Du(4,2,e,t)},useMemo:function(e,t){var n=Pi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Pi();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=tS.bind(null,on,e),[i.memoizedState,e]},useRef:function(e){var t=Pi();return e={current:e},t.memoizedState=e},useState:Wm,useDebugValue:D1,useDeferredValue:function(e){return Pi().memoizedState=e},useTransition:function(){var e=Wm(!1),t=e[0];return e=eS.bind(null,e[1]),Pi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=on,l=Pi();if($t){if(n===void 0)throw Error(Ee(407));n=n()}else{if(n=t(),Dn===null)throw Error(Ee(349));Go&30||F2(i,t,n)}l.memoizedState=n;var c={value:n,getSnapshot:t};return l.queue=c,Zm(U2.bind(null,i,c,e),[e]),i.flags|=2048,wc(9,z2.bind(null,i,c,n,t),void 0,null),n},useId:function(){var e=Pi(),t=Dn.identifierPrefix;if($t){var n=ns,i=ts;n=(i&~(1<<32-bi(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=yc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=$3++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iS={readContext:ai,useCallback:q2,useContext:ai,useEffect:L1,useImperativeHandle:X2,useInsertionEffect:Z2,useLayoutEffect:G2,useMemo:K2,useReducer:Qh,useRef:W2,useState:function(){return Qh(vc)},useDebugValue:D1,useDeferredValue:function(e){var t=li();return Q2(t,An.memoizedState,e)},useTransition:function(){var e=Qh(vc)[0],t=li().memoizedState;return[e,t]},useMutableSource:B2,useSyncExternalStore:j2,useId:J2,unstable_isNewReconciler:!1},sS={readContext:ai,useCallback:q2,useContext:ai,useEffect:L1,useImperativeHandle:X2,useInsertionEffect:Z2,useLayoutEffect:G2,useMemo:K2,useReducer:Jh,useRef:W2,useState:function(){return Jh(vc)},useDebugValue:D1,useDeferredValue:function(e){var t=li();return An===null?t.memoizedState=e:Q2(t,An.memoizedState,e)},useTransition:function(){var e=Jh(vc)[0],t=li().memoizedState;return[e,t]},useMutableSource:B2,useSyncExternalStore:j2,useId:J2,unstable_isNewReconciler:!1};function xi(e,t){if(e&&e.defaultProps){t=an({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function a0(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:an({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Hd={isMounted:function(e){return(e=e._reactInternals)?Jo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=dr(),l=Ys(e),c=os(i,l);c.payload=t,n!=null&&(c.callback=n),t=Zs(e,c,l),t!==null&&(Ci(t,e,l,i),Pu(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=dr(),l=Ys(e),c=os(i,l);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=Zs(e,c,l),t!==null&&(Ci(t,e,l,i),Pu(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dr(),i=Ys(e),l=os(n,i);l.tag=2,t!=null&&(l.callback=t),t=Zs(e,l,i),t!==null&&(Ci(t,e,i,n),Pu(t,e,i))}};function Gm(e,t,n,i,l,c,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,c,f):t.prototype&&t.prototype.isPureReactComponent?!hc(n,i)||!hc(l,c):!0}function nv(e,t,n){var i=!1,l=to,c=t.contextType;return typeof c=="object"&&c!==null?c=ai(c):(l=wr(t)?Wo:er.current,i=t.contextTypes,c=(i=i!=null)?za(e,l):to),t=new t(n,c),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Hd,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=c),t}function Ym(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Hd.enqueueReplaceState(t,t.state,null)}function l0(e,t,n,i){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},T1(e);var c=t.contextType;typeof c=="object"&&c!==null?l.context=ai(c):(c=wr(t)?Wo:er.current,l.context=za(e,c)),l.state=e.memoizedState,c=t.getDerivedStateFromProps,typeof c=="function"&&(a0(e,t,c,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Hd.enqueueReplaceState(l,l.state,null),cd(e,n,l,i),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function Wa(e,t){try{var n="",i=t;do n+=OC(i),i=i.return;while(i);var l=n}catch(c){l=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:t,stack:l,digest:null}}function $h(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function c0(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var oS=typeof WeakMap=="function"?WeakMap:Map;function rv(e,t,n){n=os(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){pd||(pd=!0,v0=i),c0(e,t)},n}function iv(e,t,n){n=os(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var l=t.value;n.payload=function(){return i(l)},n.callback=function(){c0(e,t)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(n.callback=function(){c0(e,t),typeof i!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),n}function Xm(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new oS;var l=new Set;i.set(t,l)}else l=i.get(t),l===void 0&&(l=new Set,i.set(t,l));l.has(n)||(l.add(n),e=wS.bind(null,e,t,n),t.then(e,e))}function qm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Km(e,t,n,i,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=os(-1,1),t.tag=2,Zs(n,t,1))),n.lanes|=1),e)}var aS=ms.ReactCurrentOwner,yr=!1;function ur(e,t,n,i){t.child=e===null?O2(t,null,n,i):Va(t,e.child,n,i)}function Qm(e,t,n,i,l){n=n.render;var c=t.ref;return Ba(t,l),i=O1(e,t,n,i,c,l),n=P1(),e!==null&&!yr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,hs(e,t,l)):($t&&n&&_1(t),t.flags|=1,ur(e,t,i,l),t.child)}function Jm(e,t,n,i,l){if(e===null){var c=n.type;return typeof c=="function"&&!W1(c)&&c.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=c,sv(e,t,c,i,l)):(e=zu(n.type,null,i,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!(e.lanes&l)){var f=c.memoizedProps;if(n=n.compare,n=n!==null?n:hc,n(f,i)&&e.ref===t.ref)return hs(e,t,l)}return t.flags|=1,e=Xs(c,i),e.ref=t.ref,e.return=t,t.child=e}function sv(e,t,n,i,l){if(e!==null){var c=e.memoizedProps;if(hc(c,i)&&e.ref===t.ref)if(yr=!1,t.pendingProps=i=c,(e.lanes&l)!==0)e.flags&131072&&(yr=!0);else return t.lanes=e.lanes,hs(e,t,l)}return u0(e,t,n,i,l)}function ov(e,t,n){var i=t.pendingProps,l=i.children,c=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ht(Aa,Rr),Rr|=n;else{if(!(n&1073741824))return e=c!==null?c.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ht(Aa,Rr),Rr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=c!==null?c.baseLanes:n,Ht(Aa,Rr),Rr|=i}else c!==null?(i=c.baseLanes|n,t.memoizedState=null):i=n,Ht(Aa,Rr),Rr|=i;return ur(e,t,l,n),t.child}function av(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function u0(e,t,n,i,l){var c=wr(n)?Wo:er.current;return c=za(t,c),Ba(t,l),n=O1(e,t,n,i,c,l),i=P1(),e!==null&&!yr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,hs(e,t,l)):($t&&i&&_1(t),t.flags|=1,ur(e,t,n,l),t.child)}function $m(e,t,n,i,l){if(wr(n)){var c=!0;id(t)}else c=!1;if(Ba(t,l),t.stateNode===null)Bu(e,t),nv(t,n,i),l0(t,n,i,l),i=!0;else if(e===null){var f=t.stateNode,y=t.memoizedProps;f.props=y;var w=f.context,g=n.contextType;typeof g=="object"&&g!==null?g=ai(g):(g=wr(n)?Wo:er.current,g=za(t,g));var b=n.getDerivedStateFromProps,E=typeof b=="function"||typeof f.getSnapshotBeforeUpdate=="function";E||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==i||w!==g)&&Ym(t,f,i,g),Os=!1;var T=t.memoizedState;f.state=T,cd(t,i,f,l),w=t.memoizedState,y!==i||T!==w||vr.current||Os?(typeof b=="function"&&(a0(t,n,b,i),w=t.memoizedState),(y=Os||Gm(t,n,y,i,T,w,g))?(E||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=w),f.props=i,f.state=w,f.context=g,i=y):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{f=t.stateNode,L2(e,t),y=t.memoizedProps,g=t.type===t.elementType?y:xi(t.type,y),f.props=g,E=t.pendingProps,T=f.context,w=n.contextType,typeof w=="object"&&w!==null?w=ai(w):(w=wr(n)?Wo:er.current,w=za(t,w));var O=n.getDerivedStateFromProps;(b=typeof O=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==E||T!==w)&&Ym(t,f,i,w),Os=!1,T=t.memoizedState,f.state=T,cd(t,i,f,l);var D=t.memoizedState;y!==E||T!==D||vr.current||Os?(typeof O=="function"&&(a0(t,n,O,i),D=t.memoizedState),(g=Os||Gm(t,n,g,i,T,D,w)||!1)?(b||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,D,w),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,D,w)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=D),f.props=i,f.state=D,f.context=w,i=g):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),i=!1)}return d0(e,t,n,i,c,l)}function d0(e,t,n,i,l,c){av(e,t);var f=(t.flags&128)!==0;if(!i&&!f)return l&&jm(t,n,!1),hs(e,t,c);i=t.stateNode,aS.current=t;var y=f&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&f?(t.child=Va(t,e.child,null,c),t.child=Va(t,null,y,c)):ur(e,t,y,c),t.memoizedState=i.state,l&&jm(t,n,!0),t.child}function lv(e){var t=e.stateNode;t.pendingContext?Bm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Bm(e,t.context,!1),I1(e,t.containerInfo)}function eg(e,t,n,i,l){return Ua(),C1(l),t.flags|=256,ur(e,t,n,i),t.child}var h0={dehydrated:null,treeContext:null,retryLane:0};function f0(e){return{baseLanes:e,cachePool:null,transitions:null}}function cv(e,t,n){var i=t.pendingProps,l=rn.current,c=!1,f=(t.flags&128)!==0,y;if((y=f)||(y=e!==null&&e.memoizedState===null?!1:(l&2)!==0),y?(c=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Ht(rn,l&1),e===null)return s0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=i.children,e=i.fallback,c?(i=t.mode,c=t.child,f={mode:"hidden",children:f},!(i&1)&&c!==null?(c.childLanes=0,c.pendingProps=f):c=Gd(f,i,0,null),e=Fo(e,i,n,null),c.return=t,e.return=t,c.sibling=e,t.child=c,t.child.memoizedState=f0(n),t.memoizedState=h0,e):B1(t,f));if(l=e.memoizedState,l!==null&&(y=l.dehydrated,y!==null))return lS(e,t,f,i,y,l,n);if(c){c=i.fallback,f=t.mode,l=e.child,y=l.sibling;var w={mode:"hidden",children:i.children};return!(f&1)&&t.child!==l?(i=t.child,i.childLanes=0,i.pendingProps=w,t.deletions=null):(i=Xs(l,w),i.subtreeFlags=l.subtreeFlags&14680064),y!==null?c=Xs(y,c):(c=Fo(c,f,n,null),c.flags|=2),c.return=t,i.return=t,i.sibling=c,t.child=i,i=c,c=t.child,f=e.child.memoizedState,f=f===null?f0(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},c.memoizedState=f,c.childLanes=e.childLanes&~n,t.memoizedState=h0,i}return c=e.child,e=c.sibling,i=Xs(c,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function B1(e,t){return t=Gd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function xu(e,t,n,i){return i!==null&&C1(i),Va(t,e.child,null,n),e=B1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lS(e,t,n,i,l,c,f){if(n)return t.flags&256?(t.flags&=-257,i=$h(Error(Ee(422))),xu(e,t,f,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(c=i.fallback,l=t.mode,i=Gd({mode:"visible",children:i.children},l,0,null),c=Fo(c,l,f,null),c.flags|=2,i.return=t,c.return=t,i.sibling=c,t.child=i,t.mode&1&&Va(t,e.child,null,f),t.child.memoizedState=f0(f),t.memoizedState=h0,c);if(!(t.mode&1))return xu(e,t,f,null);if(l.data==="$!"){if(i=l.nextSibling&&l.nextSibling.dataset,i)var y=i.dgst;return i=y,c=Error(Ee(419)),i=$h(c,i,void 0),xu(e,t,f,i)}if(y=(f&e.childLanes)!==0,yr||y){if(i=Dn,i!==null){switch(f&-f){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(i.suspendedLanes|f)?0:l,l!==0&&l!==c.retryLane&&(c.retryLane=l,ds(e,l),Ci(i,e,l,-1))}return H1(),i=$h(Error(Ee(421))),xu(e,t,f,i)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=_S.bind(null,e),l._reactRetry=t,null):(e=c.treeContext,Lr=Ws(l.nextSibling),Dr=t,$t=!0,_i=null,e!==null&&(ri[ii++]=ts,ri[ii++]=ns,ri[ii++]=Zo,ts=e.id,ns=e.overflow,Zo=t),t=B1(t,i.children),t.flags|=4096,t)}function tg(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),o0(e.return,t,n)}function ef(e,t,n,i,l){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:l}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=i,c.tail=n,c.tailMode=l)}function uv(e,t,n){var i=t.pendingProps,l=i.revealOrder,c=i.tail;if(ur(e,t,i.children,n),i=rn.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tg(e,n,t);else if(e.tag===19)tg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Ht(rn,i),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&ud(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),ef(t,!1,l,n,c);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&ud(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}ef(t,!0,n,null,c);break;case"together":ef(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Yo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ee(153));if(t.child!==null){for(e=t.child,n=Xs(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Xs(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function cS(e,t,n){switch(t.tag){case 3:lv(t),Ua();break;case 5:D2(t);break;case 1:wr(t.type)&&id(t);break;case 4:I1(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,l=t.memoizedProps.value;Ht(ad,i._currentValue),i._currentValue=l;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Ht(rn,rn.current&1),t.flags|=128,null):n&t.child.childLanes?cv(e,t,n):(Ht(rn,rn.current&1),e=hs(e,t,n),e!==null?e.sibling:null);Ht(rn,rn.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return uv(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Ht(rn,rn.current),i)break;return null;case 22:case 23:return t.lanes=0,ov(e,t,n)}return hs(e,t,n)}var dv,p0,hv,fv;dv=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};p0=function(){};hv=function(e,t,n,i){var l=e.memoizedProps;if(l!==i){e=t.stateNode,Lo(ji.current);var c=null;switch(n){case"input":l=Df(e,l),i=Df(e,i),c=[];break;case"select":l=an({},l,{value:void 0}),i=an({},i,{value:void 0}),c=[];break;case"textarea":l=Ff(e,l),i=Ff(e,i),c=[];break;default:typeof l.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=nd)}Uf(n,i);var f;n=null;for(g in l)if(!i.hasOwnProperty(g)&&l.hasOwnProperty(g)&&l[g]!=null)if(g==="style"){var y=l[g];for(f in y)y.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(sc.hasOwnProperty(g)?c||(c=[]):(c=c||[]).push(g,null));for(g in i){var w=i[g];if(y=l!=null?l[g]:void 0,i.hasOwnProperty(g)&&w!==y&&(w!=null||y!=null))if(g==="style")if(y){for(f in y)!y.hasOwnProperty(f)||w&&w.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in w)w.hasOwnProperty(f)&&y[f]!==w[f]&&(n||(n={}),n[f]=w[f])}else n||(c||(c=[]),c.push(g,n)),n=w;else g==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,y=y?y.__html:void 0,w!=null&&y!==w&&(c=c||[]).push(g,w)):g==="children"?typeof w!="string"&&typeof w!="number"||(c=c||[]).push(g,""+w):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(sc.hasOwnProperty(g)?(w!=null&&g==="onScroll"&&qt("scroll",e),c||y===w||(c=[])):(c=c||[]).push(g,w))}n&&(c=c||[]).push("style",n);var g=c;(t.updateQueue=g)&&(t.flags|=4)}};fv=function(e,t,n,i){n!==i&&(t.flags|=4)};function kl(e,t){if(!$t)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function qn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,i|=l.subtreeFlags&14680064,i|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,i|=l.subtreeFlags,i|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function uS(e,t,n){var i=t.pendingProps;switch(b1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qn(t),null;case 1:return wr(t.type)&&rd(),qn(t),null;case 3:return i=t.stateNode,Ha(),Kt(vr),Kt(er),k1(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(mu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_i!==null&&(b0(_i),_i=null))),p0(e,t),qn(t),null;case 5:M1(t);var l=Lo(xc.current);if(n=t.type,e!==null&&t.stateNode!=null)hv(e,t,n,i,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Ee(166));return qn(t),null}if(e=Lo(ji.current),mu(t)){i=t.stateNode,n=t.type;var c=t.memoizedProps;switch(i[Di]=t,i[mc]=c,e=(t.mode&1)!==0,n){case"dialog":qt("cancel",i),qt("close",i);break;case"iframe":case"object":case"embed":qt("load",i);break;case"video":case"audio":for(l=0;l<Ul.length;l++)qt(Ul[l],i);break;case"source":qt("error",i);break;case"img":case"image":case"link":qt("error",i),qt("load",i);break;case"details":qt("toggle",i);break;case"input":um(i,c),qt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!c.multiple},qt("invalid",i);break;case"textarea":hm(i,c),qt("invalid",i)}Uf(n,c),l=null;for(var f in c)if(c.hasOwnProperty(f)){var y=c[f];f==="children"?typeof y=="string"?i.textContent!==y&&(c.suppressHydrationWarning!==!0&&pu(i.textContent,y,e),l=["children",y]):typeof y=="number"&&i.textContent!==""+y&&(c.suppressHydrationWarning!==!0&&pu(i.textContent,y,e),l=["children",""+y]):sc.hasOwnProperty(f)&&y!=null&&f==="onScroll"&&qt("scroll",i)}switch(n){case"input":ou(i),dm(i,c,!0);break;case"textarea":ou(i),fm(i);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(i.onclick=nd)}i=l,t.updateQueue=i,i!==null&&(t.flags|=4)}else{f=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Uy(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=f.createElement(n,{is:i.is}):(e=f.createElement(n),n==="select"&&(f=e,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):e=f.createElementNS(e,n),e[Di]=t,e[mc]=i,dv(e,t,!1,!1),t.stateNode=e;e:{switch(f=Vf(n,i),n){case"dialog":qt("cancel",e),qt("close",e),l=i;break;case"iframe":case"object":case"embed":qt("load",e),l=i;break;case"video":case"audio":for(l=0;l<Ul.length;l++)qt(Ul[l],e);l=i;break;case"source":qt("error",e),l=i;break;case"img":case"image":case"link":qt("error",e),qt("load",e),l=i;break;case"details":qt("toggle",e),l=i;break;case"input":um(e,i),l=Df(e,i),qt("invalid",e);break;case"option":l=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},l=an({},i,{value:void 0}),qt("invalid",e);break;case"textarea":hm(e,i),l=Ff(e,i),qt("invalid",e);break;default:l=i}Uf(n,l),y=l;for(c in y)if(y.hasOwnProperty(c)){var w=y[c];c==="style"?Wy(e,w):c==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&Vy(e,w)):c==="children"?typeof w=="string"?(n!=="textarea"||w!=="")&&oc(e,w):typeof w=="number"&&oc(e,""+w):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(sc.hasOwnProperty(c)?w!=null&&c==="onScroll"&&qt("scroll",e):w!=null&&a1(e,c,w,f))}switch(n){case"input":ou(e),dm(e,i,!1);break;case"textarea":ou(e),fm(e);break;case"option":i.value!=null&&e.setAttribute("value",""+eo(i.value));break;case"select":e.multiple=!!i.multiple,c=i.value,c!=null?Oa(e,!!i.multiple,c,!1):i.defaultValue!=null&&Oa(e,!!i.multiple,i.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=nd)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return qn(t),null;case 6:if(e&&t.stateNode!=null)fv(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Ee(166));if(n=Lo(xc.current),Lo(ji.current),mu(t)){if(i=t.stateNode,n=t.memoizedProps,i[Di]=t,(c=i.nodeValue!==n)&&(e=Dr,e!==null))switch(e.tag){case 3:pu(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&pu(i.nodeValue,n,(e.mode&1)!==0)}c&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Di]=t,t.stateNode=i}return qn(t),null;case 13:if(Kt(rn),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($t&&Lr!==null&&t.mode&1&&!(t.flags&128))k2(),Ua(),t.flags|=98560,c=!1;else if(c=mu(t),i!==null&&i.dehydrated!==null){if(e===null){if(!c)throw Error(Ee(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(Ee(317));c[Di]=t}else Ua(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;qn(t),c=!1}else _i!==null&&(b0(_i),_i=null),c=!0;if(!c)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||rn.current&1?Nn===0&&(Nn=3):H1())),t.updateQueue!==null&&(t.flags|=4),qn(t),null);case 4:return Ha(),p0(e,t),e===null&&fc(t.stateNode.containerInfo),qn(t),null;case 10:return A1(t.type._context),qn(t),null;case 17:return wr(t.type)&&rd(),qn(t),null;case 19:if(Kt(rn),c=t.memoizedState,c===null)return qn(t),null;if(i=(t.flags&128)!==0,f=c.rendering,f===null)if(i)kl(c,!1);else{if(Nn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=ud(e),f!==null){for(t.flags|=128,kl(c,!1),i=f.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)c=n,e=i,c.flags&=14680066,f=c.alternate,f===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=f.childLanes,c.lanes=f.lanes,c.child=f.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=f.memoizedProps,c.memoizedState=f.memoizedState,c.updateQueue=f.updateQueue,c.type=f.type,e=f.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ht(rn,rn.current&1|2),t.child}e=e.sibling}c.tail!==null&&fn()>Za&&(t.flags|=128,i=!0,kl(c,!1),t.lanes=4194304)}else{if(!i)if(e=ud(f),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),kl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!$t)return qn(t),null}else 2*fn()-c.renderingStartTime>Za&&n!==1073741824&&(t.flags|=128,i=!0,kl(c,!1),t.lanes=4194304);c.isBackwards?(f.sibling=t.child,t.child=f):(n=c.last,n!==null?n.sibling=f:t.child=f,c.last=f)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=fn(),t.sibling=null,n=rn.current,Ht(rn,i?n&1|2:n&1),t):(qn(t),null);case 22:case 23:return V1(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Rr&1073741824&&(qn(t),t.subtreeFlags&6&&(t.flags|=8192)):qn(t),null;case 24:return null;case 25:return null}throw Error(Ee(156,t.tag))}function dS(e,t){switch(b1(t),t.tag){case 1:return wr(t.type)&&rd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ha(),Kt(vr),Kt(er),k1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return M1(t),null;case 13:if(Kt(rn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ee(340));Ua()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Kt(rn),null;case 4:return Ha(),null;case 10:return A1(t.type._context),null;case 22:case 23:return V1(),null;case 24:return null;default:return null}}var yu=!1,Jn=!1,hS=typeof WeakSet=="function"?WeakSet:Set,ze=null;function Ea(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){un(e,t,i)}else n.current=null}function m0(e,t,n){try{n()}catch(i){un(e,t,i)}}var ng=!1;function fS(e,t){if(Jf=$u,e=y2(),w1(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var l=i.anchorOffset,c=i.focusNode;i=i.focusOffset;try{n.nodeType,c.nodeType}catch{n=null;break e}var f=0,y=-1,w=-1,g=0,b=0,E=e,T=null;t:for(;;){for(var O;E!==n||l!==0&&E.nodeType!==3||(y=f+l),E!==c||i!==0&&E.nodeType!==3||(w=f+i),E.nodeType===3&&(f+=E.nodeValue.length),(O=E.firstChild)!==null;)T=E,E=O;for(;;){if(E===e)break t;if(T===n&&++g===l&&(y=f),T===c&&++b===i&&(w=f),(O=E.nextSibling)!==null)break;E=T,T=E.parentNode}E=O}n=y===-1||w===-1?null:{start:y,end:w}}else n=null}n=n||{start:0,end:0}}else n=null;for($f={focusedElem:e,selectionRange:n},$u=!1,ze=t;ze!==null;)if(t=ze,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ze=e;else for(;ze!==null;){t=ze;try{var D=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var P=D.memoizedProps,V=D.memoizedState,z=t.stateNode,R=z.getSnapshotBeforeUpdate(t.elementType===t.type?P:xi(t.type,P),V);z.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var I=t.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(Z){un(t,t.return,Z)}if(e=t.sibling,e!==null){e.return=t.return,ze=e;break}ze=t.return}return D=ng,ng=!1,D}function Kl(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&e)===e){var c=l.destroy;l.destroy=void 0,c!==void 0&&m0(t,n,c)}l=l.next}while(l!==i)}}function Wd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function g0(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function pv(e){var t=e.alternate;t!==null&&(e.alternate=null,pv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Di],delete t[mc],delete t[n0],delete t[q3],delete t[K3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mv(e){return e.tag===5||e.tag===3||e.tag===4}function rg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function x0(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=nd));else if(i!==4&&(e=e.child,e!==null))for(x0(e,t,n),e=e.sibling;e!==null;)x0(e,t,n),e=e.sibling}function y0(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(y0(e,t,n),e=e.sibling;e!==null;)y0(e,t,n),e=e.sibling}var Fn=null,vi=!1;function Ns(e,t,n){for(n=n.child;n!==null;)gv(e,t,n),n=n.sibling}function gv(e,t,n){if(Bi&&typeof Bi.onCommitFiberUnmount=="function")try{Bi.onCommitFiberUnmount(Dd,n)}catch{}switch(n.tag){case 5:Jn||Ea(n,t);case 6:var i=Fn,l=vi;Fn=null,Ns(e,t,n),Fn=i,vi=l,Fn!==null&&(vi?(e=Fn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Fn.removeChild(n.stateNode));break;case 18:Fn!==null&&(vi?(e=Fn,n=n.stateNode,e.nodeType===8?Yh(e.parentNode,n):e.nodeType===1&&Yh(e,n),uc(e)):Yh(Fn,n.stateNode));break;case 4:i=Fn,l=vi,Fn=n.stateNode.containerInfo,vi=!0,Ns(e,t,n),Fn=i,vi=l;break;case 0:case 11:case 14:case 15:if(!Jn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){l=i=i.next;do{var c=l,f=c.destroy;c=c.tag,f!==void 0&&(c&2||c&4)&&m0(n,t,f),l=l.next}while(l!==i)}Ns(e,t,n);break;case 1:if(!Jn&&(Ea(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(y){un(n,t,y)}Ns(e,t,n);break;case 21:Ns(e,t,n);break;case 22:n.mode&1?(Jn=(i=Jn)||n.memoizedState!==null,Ns(e,t,n),Jn=i):Ns(e,t,n);break;default:Ns(e,t,n)}}function ig(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new hS),t.forEach(function(i){var l=bS.bind(null,e,i);n.has(i)||(n.add(i),i.then(l,l))})}}function gi(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];try{var c=e,f=t,y=f;e:for(;y!==null;){switch(y.tag){case 5:Fn=y.stateNode,vi=!1;break e;case 3:Fn=y.stateNode.containerInfo,vi=!0;break e;case 4:Fn=y.stateNode.containerInfo,vi=!0;break e}y=y.return}if(Fn===null)throw Error(Ee(160));gv(c,f,l),Fn=null,vi=!1;var w=l.alternate;w!==null&&(w.return=null),l.return=null}catch(g){un(l,t,g)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)xv(t,e),t=t.sibling}function xv(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gi(t,e),Oi(e),i&4){try{Kl(3,e,e.return),Wd(3,e)}catch(P){un(e,e.return,P)}try{Kl(5,e,e.return)}catch(P){un(e,e.return,P)}}break;case 1:gi(t,e),Oi(e),i&512&&n!==null&&Ea(n,n.return);break;case 5:if(gi(t,e),Oi(e),i&512&&n!==null&&Ea(n,n.return),e.flags&32){var l=e.stateNode;try{oc(l,"")}catch(P){un(e,e.return,P)}}if(i&4&&(l=e.stateNode,l!=null)){var c=e.memoizedProps,f=n!==null?n.memoizedProps:c,y=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{y==="input"&&c.type==="radio"&&c.name!=null&&Fy(l,c),Vf(y,f);var g=Vf(y,c);for(f=0;f<w.length;f+=2){var b=w[f],E=w[f+1];b==="style"?Wy(l,E):b==="dangerouslySetInnerHTML"?Vy(l,E):b==="children"?oc(l,E):a1(l,b,E,g)}switch(y){case"input":Bf(l,c);break;case"textarea":zy(l,c);break;case"select":var T=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!c.multiple;var O=c.value;O!=null?Oa(l,!!c.multiple,O,!1):T!==!!c.multiple&&(c.defaultValue!=null?Oa(l,!!c.multiple,c.defaultValue,!0):Oa(l,!!c.multiple,c.multiple?[]:"",!1))}l[mc]=c}catch(P){un(e,e.return,P)}}break;case 6:if(gi(t,e),Oi(e),i&4){if(e.stateNode===null)throw Error(Ee(162));l=e.stateNode,c=e.memoizedProps;try{l.nodeValue=c}catch(P){un(e,e.return,P)}}break;case 3:if(gi(t,e),Oi(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{uc(t.containerInfo)}catch(P){un(e,e.return,P)}break;case 4:gi(t,e),Oi(e);break;case 13:gi(t,e),Oi(e),l=e.child,l.flags&8192&&(c=l.memoizedState!==null,l.stateNode.isHidden=c,!c||l.alternate!==null&&l.alternate.memoizedState!==null||(z1=fn())),i&4&&ig(e);break;case 22:if(b=n!==null&&n.memoizedState!==null,e.mode&1?(Jn=(g=Jn)||b,gi(t,e),Jn=g):gi(t,e),Oi(e),i&8192){if(g=e.memoizedState!==null,(e.stateNode.isHidden=g)&&!b&&e.mode&1)for(ze=e,b=e.child;b!==null;){for(E=ze=b;ze!==null;){switch(T=ze,O=T.child,T.tag){case 0:case 11:case 14:case 15:Kl(4,T,T.return);break;case 1:Ea(T,T.return);var D=T.stateNode;if(typeof D.componentWillUnmount=="function"){i=T,n=T.return;try{t=i,D.props=t.memoizedProps,D.state=t.memoizedState,D.componentWillUnmount()}catch(P){un(i,n,P)}}break;case 5:Ea(T,T.return);break;case 22:if(T.memoizedState!==null){og(E);continue}}O!==null?(O.return=T,ze=O):og(E)}b=b.sibling}e:for(b=null,E=e;;){if(E.tag===5){if(b===null){b=E;try{l=E.stateNode,g?(c=l.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(y=E.stateNode,w=E.memoizedProps.style,f=w!=null&&w.hasOwnProperty("display")?w.display:null,y.style.display=Hy("display",f))}catch(P){un(e,e.return,P)}}}else if(E.tag===6){if(b===null)try{E.stateNode.nodeValue=g?"":E.memoizedProps}catch(P){un(e,e.return,P)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===e)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===e)break e;for(;E.sibling===null;){if(E.return===null||E.return===e)break e;b===E&&(b=null),E=E.return}b===E&&(b=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:gi(t,e),Oi(e),i&4&&ig(e);break;case 21:break;default:gi(t,e),Oi(e)}}function Oi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(mv(n)){var i=n;break e}n=n.return}throw Error(Ee(160))}switch(i.tag){case 5:var l=i.stateNode;i.flags&32&&(oc(l,""),i.flags&=-33);var c=rg(e);y0(e,c,l);break;case 3:case 4:var f=i.stateNode.containerInfo,y=rg(e);x0(e,y,f);break;default:throw Error(Ee(161))}}catch(w){un(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pS(e,t,n){ze=e,yv(e)}function yv(e,t,n){for(var i=(e.mode&1)!==0;ze!==null;){var l=ze,c=l.child;if(l.tag===22&&i){var f=l.memoizedState!==null||yu;if(!f){var y=l.alternate,w=y!==null&&y.memoizedState!==null||Jn;y=yu;var g=Jn;if(yu=f,(Jn=w)&&!g)for(ze=l;ze!==null;)f=ze,w=f.child,f.tag===22&&f.memoizedState!==null?ag(l):w!==null?(w.return=f,ze=w):ag(l);for(;c!==null;)ze=c,yv(c),c=c.sibling;ze=l,yu=y,Jn=g}sg(e)}else l.subtreeFlags&8772&&c!==null?(c.return=l,ze=c):sg(e)}}function sg(e){for(;ze!==null;){var t=ze;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Jn||Wd(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Jn)if(n===null)i.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:xi(t.type,n.memoizedProps);i.componentDidUpdate(l,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var c=t.updateQueue;c!==null&&Hm(t,c,i);break;case 3:var f=t.updateQueue;if(f!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Hm(t,f,n)}break;case 5:var y=t.stateNode;if(n===null&&t.flags&4){n=y;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&n.focus();break;case"img":w.src&&(n.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var g=t.alternate;if(g!==null){var b=g.memoizedState;if(b!==null){var E=b.dehydrated;E!==null&&uc(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}Jn||t.flags&512&&g0(t)}catch(T){un(t,t.return,T)}}if(t===e){ze=null;break}if(n=t.sibling,n!==null){n.return=t.return,ze=n;break}ze=t.return}}function og(e){for(;ze!==null;){var t=ze;if(t===e){ze=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ze=n;break}ze=t.return}}function ag(e){for(;ze!==null;){var t=ze;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Wd(4,t)}catch(w){un(t,n,w)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var l=t.return;try{i.componentDidMount()}catch(w){un(t,l,w)}}var c=t.return;try{g0(t)}catch(w){un(t,c,w)}break;case 5:var f=t.return;try{g0(t)}catch(w){un(t,f,w)}}}catch(w){un(t,t.return,w)}if(t===e){ze=null;break}var y=t.sibling;if(y!==null){y.return=t.return,ze=y;break}ze=t.return}}var mS=Math.ceil,fd=ms.ReactCurrentDispatcher,j1=ms.ReactCurrentOwner,oi=ms.ReactCurrentBatchConfig,Ct=0,Dn=null,wn=null,Un=0,Rr=0,Aa=ao(0),Nn=0,_c=null,Yo=0,Zd=0,F1=0,Ql=null,xr=null,z1=0,Za=1/0,$i=null,pd=!1,v0=null,Gs=null,vu=!1,Fs=null,md=0,Jl=0,w0=null,ju=-1,Fu=0;function dr(){return Ct&6?fn():ju!==-1?ju:ju=fn()}function Ys(e){return e.mode&1?Ct&2&&Un!==0?Un&-Un:J3.transition!==null?(Fu===0&&(Fu=n2()),Fu):(e=Pt,e!==0||(e=window.event,e=e===void 0?16:c2(e.type)),e):1}function Ci(e,t,n,i){if(50<Jl)throw Jl=0,w0=null,Error(Ee(185));Mc(e,n,i),(!(Ct&2)||e!==Dn)&&(e===Dn&&(!(Ct&2)&&(Zd|=n),Nn===4&&Ds(e,Un)),_r(e,i),n===1&&Ct===0&&!(t.mode&1)&&(Za=fn()+500,Ud&&lo()))}function _r(e,t){var n=e.callbackNode;JC(e,t);var i=Ju(e,e===Dn?Un:0);if(i===0)n!==null&&gm(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&gm(n),t===1)e.tag===0?Q3(lg.bind(null,e)):T2(lg.bind(null,e)),Y3(function(){!(Ct&6)&&lo()}),n=null;else{switch(r2(i)){case 1:n=h1;break;case 4:n=e2;break;case 16:n=Qu;break;case 536870912:n=t2;break;default:n=Qu}n=Av(n,vv.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function vv(e,t){if(ju=-1,Fu=0,Ct&6)throw Error(Ee(327));var n=e.callbackNode;if(ja()&&e.callbackNode!==n)return null;var i=Ju(e,e===Dn?Un:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=gd(e,i);else{t=i;var l=Ct;Ct|=2;var c=_v();(Dn!==e||Un!==t)&&($i=null,Za=fn()+500,jo(e,t));do try{yS();break}catch(y){wv(e,y)}while(!0);E1(),fd.current=c,Ct=l,wn!==null?t=0:(Dn=null,Un=0,t=Nn)}if(t!==0){if(t===2&&(l=Yf(e),l!==0&&(i=l,t=_0(e,l))),t===1)throw n=_c,jo(e,0),Ds(e,i),_r(e,fn()),n;if(t===6)Ds(e,i);else{if(l=e.current.alternate,!(i&30)&&!gS(l)&&(t=gd(e,i),t===2&&(c=Yf(e),c!==0&&(i=c,t=_0(e,c))),t===1))throw n=_c,jo(e,0),Ds(e,i),_r(e,fn()),n;switch(e.finishedWork=l,e.finishedLanes=i,t){case 0:case 1:throw Error(Ee(345));case 2:No(e,xr,$i);break;case 3:if(Ds(e,i),(i&130023424)===i&&(t=z1+500-fn(),10<t)){if(Ju(e,0)!==0)break;if(l=e.suspendedLanes,(l&i)!==i){dr(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=t0(No.bind(null,e,xr,$i),t);break}No(e,xr,$i);break;case 4:if(Ds(e,i),(i&4194240)===i)break;for(t=e.eventTimes,l=-1;0<i;){var f=31-bi(i);c=1<<f,f=t[f],f>l&&(l=f),i&=~c}if(i=l,i=fn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*mS(i/1960))-i,10<i){e.timeoutHandle=t0(No.bind(null,e,xr,$i),i);break}No(e,xr,$i);break;case 5:No(e,xr,$i);break;default:throw Error(Ee(329))}}}return _r(e,fn()),e.callbackNode===n?vv.bind(null,e):null}function _0(e,t){var n=Ql;return e.current.memoizedState.isDehydrated&&(jo(e,t).flags|=256),e=gd(e,t),e!==2&&(t=xr,xr=n,t!==null&&b0(t)),e}function b0(e){xr===null?xr=e:xr.push.apply(xr,e)}function gS(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var l=n[i],c=l.getSnapshot;l=l.value;try{if(!Si(c(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ds(e,t){for(t&=~F1,t&=~Zd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-bi(t),i=1<<n;e[n]=-1,t&=~i}}function lg(e){if(Ct&6)throw Error(Ee(327));ja();var t=Ju(e,0);if(!(t&1))return _r(e,fn()),null;var n=gd(e,t);if(e.tag!==0&&n===2){var i=Yf(e);i!==0&&(t=i,n=_0(e,i))}if(n===1)throw n=_c,jo(e,0),Ds(e,t),_r(e,fn()),n;if(n===6)throw Error(Ee(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,No(e,xr,$i),_r(e,fn()),null}function U1(e,t){var n=Ct;Ct|=1;try{return e(t)}finally{Ct=n,Ct===0&&(Za=fn()+500,Ud&&lo())}}function Xo(e){Fs!==null&&Fs.tag===0&&!(Ct&6)&&ja();var t=Ct;Ct|=1;var n=oi.transition,i=Pt;try{if(oi.transition=null,Pt=1,e)return e()}finally{Pt=i,oi.transition=n,Ct=t,!(Ct&6)&&lo()}}function V1(){Rr=Aa.current,Kt(Aa)}function jo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,G3(n)),wn!==null)for(n=wn.return;n!==null;){var i=n;switch(b1(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&rd();break;case 3:Ha(),Kt(vr),Kt(er),k1();break;case 5:M1(i);break;case 4:Ha();break;case 13:Kt(rn);break;case 19:Kt(rn);break;case 10:A1(i.type._context);break;case 22:case 23:V1()}n=n.return}if(Dn=e,wn=e=Xs(e.current,null),Un=Rr=t,Nn=0,_c=null,F1=Zd=Yo=0,xr=Ql=null,Po!==null){for(t=0;t<Po.length;t++)if(n=Po[t],i=n.interleaved,i!==null){n.interleaved=null;var l=i.next,c=n.pending;if(c!==null){var f=c.next;c.next=l,i.next=f}n.pending=i}Po=null}return e}function wv(e,t){do{var n=wn;try{if(E1(),Lu.current=hd,dd){for(var i=on.memoizedState;i!==null;){var l=i.queue;l!==null&&(l.pending=null),i=i.next}dd=!1}if(Go=0,Ln=An=on=null,ql=!1,yc=0,j1.current=null,n===null||n.return===null){Nn=1,_c=t,wn=null;break}e:{var c=e,f=n.return,y=n,w=t;if(t=Un,y.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var g=w,b=y,E=b.tag;if(!(b.mode&1)&&(E===0||E===11||E===15)){var T=b.alternate;T?(b.updateQueue=T.updateQueue,b.memoizedState=T.memoizedState,b.lanes=T.lanes):(b.updateQueue=null,b.memoizedState=null)}var O=qm(f);if(O!==null){O.flags&=-257,Km(O,f,y,c,t),O.mode&1&&Xm(c,g,t),t=O,w=g;var D=t.updateQueue;if(D===null){var P=new Set;P.add(w),t.updateQueue=P}else D.add(w);break e}else{if(!(t&1)){Xm(c,g,t),H1();break e}w=Error(Ee(426))}}else if($t&&y.mode&1){var V=qm(f);if(V!==null){!(V.flags&65536)&&(V.flags|=256),Km(V,f,y,c,t),C1(Wa(w,y));break e}}c=w=Wa(w,y),Nn!==4&&(Nn=2),Ql===null?Ql=[c]:Ql.push(c),c=f;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t;var z=rv(c,w,t);Vm(c,z);break e;case 1:y=w;var R=c.type,I=c.stateNode;if(!(c.flags&128)&&(typeof R.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Gs===null||!Gs.has(I)))){c.flags|=65536,t&=-t,c.lanes|=t;var Z=iv(c,y,t);Vm(c,Z);break e}}c=c.return}while(c!==null)}Cv(n)}catch(Q){t=Q,wn===n&&n!==null&&(wn=n=n.return);continue}break}while(!0)}function _v(){var e=fd.current;return fd.current=hd,e===null?hd:e}function H1(){(Nn===0||Nn===3||Nn===2)&&(Nn=4),Dn===null||!(Yo&268435455)&&!(Zd&268435455)||Ds(Dn,Un)}function gd(e,t){var n=Ct;Ct|=2;var i=_v();(Dn!==e||Un!==t)&&($i=null,jo(e,t));do try{xS();break}catch(l){wv(e,l)}while(!0);if(E1(),Ct=n,fd.current=i,wn!==null)throw Error(Ee(261));return Dn=null,Un=0,Nn}function xS(){for(;wn!==null;)bv(wn)}function yS(){for(;wn!==null&&!HC();)bv(wn)}function bv(e){var t=Ev(e.alternate,e,Rr);e.memoizedProps=e.pendingProps,t===null?Cv(e):wn=t,j1.current=null}function Cv(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=dS(n,t),n!==null){n.flags&=32767,wn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Nn=6,wn=null;return}}else if(n=uS(n,t,Rr),n!==null){wn=n;return}if(t=t.sibling,t!==null){wn=t;return}wn=t=e}while(t!==null);Nn===0&&(Nn=5)}function No(e,t,n){var i=Pt,l=oi.transition;try{oi.transition=null,Pt=1,vS(e,t,n,i)}finally{oi.transition=l,Pt=i}return null}function vS(e,t,n,i){do ja();while(Fs!==null);if(Ct&6)throw Error(Ee(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ee(177));e.callbackNode=null,e.callbackPriority=0;var c=n.lanes|n.childLanes;if($C(e,c),e===Dn&&(wn=Dn=null,Un=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vu||(vu=!0,Av(Qu,function(){return ja(),null})),c=(n.flags&15990)!==0,n.subtreeFlags&15990||c){c=oi.transition,oi.transition=null;var f=Pt;Pt=1;var y=Ct;Ct|=4,j1.current=null,fS(e,n),xv(n,e),F3($f),$u=!!Jf,$f=Jf=null,e.current=n,pS(n),WC(),Ct=y,Pt=f,oi.transition=c}else e.current=n;if(vu&&(vu=!1,Fs=e,md=l),c=e.pendingLanes,c===0&&(Gs=null),YC(n.stateNode),_r(e,fn()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],i(l.value,{componentStack:l.stack,digest:l.digest});if(pd)throw pd=!1,e=v0,v0=null,e;return md&1&&e.tag!==0&&ja(),c=e.pendingLanes,c&1?e===w0?Jl++:(Jl=0,w0=e):Jl=0,lo(),null}function ja(){if(Fs!==null){var e=r2(md),t=oi.transition,n=Pt;try{if(oi.transition=null,Pt=16>e?16:e,Fs===null)var i=!1;else{if(e=Fs,Fs=null,md=0,Ct&6)throw Error(Ee(331));var l=Ct;for(Ct|=4,ze=e.current;ze!==null;){var c=ze,f=c.child;if(ze.flags&16){var y=c.deletions;if(y!==null){for(var w=0;w<y.length;w++){var g=y[w];for(ze=g;ze!==null;){var b=ze;switch(b.tag){case 0:case 11:case 15:Kl(8,b,c)}var E=b.child;if(E!==null)E.return=b,ze=E;else for(;ze!==null;){b=ze;var T=b.sibling,O=b.return;if(pv(b),b===g){ze=null;break}if(T!==null){T.return=O,ze=T;break}ze=O}}}var D=c.alternate;if(D!==null){var P=D.child;if(P!==null){D.child=null;do{var V=P.sibling;P.sibling=null,P=V}while(P!==null)}}ze=c}}if(c.subtreeFlags&2064&&f!==null)f.return=c,ze=f;else e:for(;ze!==null;){if(c=ze,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Kl(9,c,c.return)}var z=c.sibling;if(z!==null){z.return=c.return,ze=z;break e}ze=c.return}}var R=e.current;for(ze=R;ze!==null;){f=ze;var I=f.child;if(f.subtreeFlags&2064&&I!==null)I.return=f,ze=I;else e:for(f=R;ze!==null;){if(y=ze,y.flags&2048)try{switch(y.tag){case 0:case 11:case 15:Wd(9,y)}}catch(Q){un(y,y.return,Q)}if(y===f){ze=null;break e}var Z=y.sibling;if(Z!==null){Z.return=y.return,ze=Z;break e}ze=y.return}}if(Ct=l,lo(),Bi&&typeof Bi.onPostCommitFiberRoot=="function")try{Bi.onPostCommitFiberRoot(Dd,e)}catch{}i=!0}return i}finally{Pt=n,oi.transition=t}}return!1}function cg(e,t,n){t=Wa(n,t),t=rv(e,t,1),e=Zs(e,t,1),t=dr(),e!==null&&(Mc(e,1,t),_r(e,t))}function un(e,t,n){if(e.tag===3)cg(e,e,n);else for(;t!==null;){if(t.tag===3){cg(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Gs===null||!Gs.has(i))){e=Wa(n,e),e=iv(t,e,1),t=Zs(t,e,1),e=dr(),t!==null&&(Mc(t,1,e),_r(t,e));break}}t=t.return}}function wS(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=dr(),e.pingedLanes|=e.suspendedLanes&n,Dn===e&&(Un&n)===n&&(Nn===4||Nn===3&&(Un&130023424)===Un&&500>fn()-z1?jo(e,0):F1|=n),_r(e,t)}function Sv(e,t){t===0&&(e.mode&1?(t=cu,cu<<=1,!(cu&130023424)&&(cu=4194304)):t=1);var n=dr();e=ds(e,t),e!==null&&(Mc(e,t,n),_r(e,n))}function _S(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Sv(e,n)}function bS(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Ee(314))}i!==null&&i.delete(t),Sv(e,n)}var Ev;Ev=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||vr.current)yr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return yr=!1,cS(e,t,n);yr=!!(e.flags&131072)}else yr=!1,$t&&t.flags&1048576&&I2(t,od,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Bu(e,t),e=t.pendingProps;var l=za(t,er.current);Ba(t,n),l=O1(null,t,i,e,l,n);var c=P1();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,wr(i)?(c=!0,id(t)):c=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,T1(t),l.updater=Hd,t.stateNode=l,l._reactInternals=t,l0(t,i,e,n),t=d0(null,t,i,!0,c,n)):(t.tag=0,$t&&c&&_1(t),ur(null,t,l,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Bu(e,t),e=t.pendingProps,l=i._init,i=l(i._payload),t.type=i,l=t.tag=SS(i),e=xi(i,e),l){case 0:t=u0(null,t,i,e,n);break e;case 1:t=$m(null,t,i,e,n);break e;case 11:t=Qm(null,t,i,e,n);break e;case 14:t=Jm(null,t,i,xi(i.type,e),n);break e}throw Error(Ee(306,i,""))}return t;case 0:return i=t.type,l=t.pendingProps,l=t.elementType===i?l:xi(i,l),u0(e,t,i,l,n);case 1:return i=t.type,l=t.pendingProps,l=t.elementType===i?l:xi(i,l),$m(e,t,i,l,n);case 3:e:{if(lv(t),e===null)throw Error(Ee(387));i=t.pendingProps,c=t.memoizedState,l=c.element,L2(e,t),cd(t,i,null,n);var f=t.memoizedState;if(i=f.element,c.isDehydrated)if(c={element:i,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){l=Wa(Error(Ee(423)),t),t=eg(e,t,i,n,l);break e}else if(i!==l){l=Wa(Error(Ee(424)),t),t=eg(e,t,i,n,l);break e}else for(Lr=Ws(t.stateNode.containerInfo.firstChild),Dr=t,$t=!0,_i=null,n=O2(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ua(),i===l){t=hs(e,t,n);break e}ur(e,t,i,n)}t=t.child}return t;case 5:return D2(t),e===null&&s0(t),i=t.type,l=t.pendingProps,c=e!==null?e.memoizedProps:null,f=l.children,e0(i,l)?f=null:c!==null&&e0(i,c)&&(t.flags|=32),av(e,t),ur(e,t,f,n),t.child;case 6:return e===null&&s0(t),null;case 13:return cv(e,t,n);case 4:return I1(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Va(t,null,i,n):ur(e,t,i,n),t.child;case 11:return i=t.type,l=t.pendingProps,l=t.elementType===i?l:xi(i,l),Qm(e,t,i,l,n);case 7:return ur(e,t,t.pendingProps,n),t.child;case 8:return ur(e,t,t.pendingProps.children,n),t.child;case 12:return ur(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,l=t.pendingProps,c=t.memoizedProps,f=l.value,Ht(ad,i._currentValue),i._currentValue=f,c!==null)if(Si(c.value,f)){if(c.children===l.children&&!vr.current){t=hs(e,t,n);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var y=c.dependencies;if(y!==null){f=c.child;for(var w=y.firstContext;w!==null;){if(w.context===i){if(c.tag===1){w=os(-1,n&-n),w.tag=2;var g=c.updateQueue;if(g!==null){g=g.shared;var b=g.pending;b===null?w.next=w:(w.next=b.next,b.next=w),g.pending=w}}c.lanes|=n,w=c.alternate,w!==null&&(w.lanes|=n),o0(c.return,n,t),y.lanes|=n;break}w=w.next}}else if(c.tag===10)f=c.type===t.type?null:c.child;else if(c.tag===18){if(f=c.return,f===null)throw Error(Ee(341));f.lanes|=n,y=f.alternate,y!==null&&(y.lanes|=n),o0(f,n,t),f=c.sibling}else f=c.child;if(f!==null)f.return=c;else for(f=c;f!==null;){if(f===t){f=null;break}if(c=f.sibling,c!==null){c.return=f.return,f=c;break}f=f.return}c=f}ur(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,i=t.pendingProps.children,Ba(t,n),l=ai(l),i=i(l),t.flags|=1,ur(e,t,i,n),t.child;case 14:return i=t.type,l=xi(i,t.pendingProps),l=xi(i.type,l),Jm(e,t,i,l,n);case 15:return sv(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,l=t.pendingProps,l=t.elementType===i?l:xi(i,l),Bu(e,t),t.tag=1,wr(i)?(e=!0,id(t)):e=!1,Ba(t,n),nv(t,i,l),l0(t,i,l,n),d0(null,t,i,!0,e,n);case 19:return uv(e,t,n);case 22:return ov(e,t,n)}throw Error(Ee(156,t.tag))};function Av(e,t){return $y(e,t)}function CS(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(e,t,n,i){return new CS(e,t,n,i)}function W1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function SS(e){if(typeof e=="function")return W1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===c1)return 11;if(e===u1)return 14}return 2}function Xs(e,t){var n=e.alternate;return n===null?(n=si(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zu(e,t,n,i,l,c){var f=2;if(i=e,typeof e=="function")W1(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case ga:return Fo(n.children,l,c,t);case l1:f=8,l|=8;break;case Rf:return e=si(12,n,t,l|2),e.elementType=Rf,e.lanes=c,e;case Of:return e=si(13,n,t,l),e.elementType=Of,e.lanes=c,e;case Pf:return e=si(19,n,t,l),e.elementType=Pf,e.lanes=c,e;case Dy:return Gd(n,l,c,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Py:f=10;break e;case Ly:f=9;break e;case c1:f=11;break e;case u1:f=14;break e;case Rs:f=16,i=null;break e}throw Error(Ee(130,e==null?e:typeof e,""))}return t=si(f,n,t,l),t.elementType=e,t.type=i,t.lanes=c,t}function Fo(e,t,n,i){return e=si(7,e,i,t),e.lanes=n,e}function Gd(e,t,n,i){return e=si(22,e,i,t),e.elementType=Dy,e.lanes=n,e.stateNode={isHidden:!1},e}function tf(e,t,n){return e=si(6,e,null,t),e.lanes=n,e}function nf(e,t,n){return t=si(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ES(e,t,n,i,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dh(0),this.expirationTimes=Dh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dh(0),this.identifierPrefix=i,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Z1(e,t,n,i,l,c,f,y,w){return e=new ES(e,t,n,y,w),t===1?(t=1,c===!0&&(t|=8)):t=0,c=si(3,null,null,t),e.current=c,c.stateNode=e,c.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},T1(c),e}function AS(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ma,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function Nv(e){if(!e)return to;e=e._reactInternals;e:{if(Jo(e)!==e||e.tag!==1)throw Error(Ee(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(wr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ee(171))}if(e.tag===1){var n=e.type;if(wr(n))return N2(e,n,t)}return t}function Tv(e,t,n,i,l,c,f,y,w){return e=Z1(n,i,!0,e,l,c,f,y,w),e.context=Nv(null),n=e.current,i=dr(),l=Ys(n),c=os(i,l),c.callback=t??null,Zs(n,c,l),e.current.lanes=l,Mc(e,l,i),_r(e,i),e}function Yd(e,t,n,i){var l=t.current,c=dr(),f=Ys(l);return n=Nv(n),t.context===null?t.context=n:t.pendingContext=n,t=os(c,f),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Zs(l,t,f),e!==null&&(Ci(e,l,f,c),Pu(e,l,f)),f}function xd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ug(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function G1(e,t){ug(e,t),(e=e.alternate)&&ug(e,t)}function NS(){return null}var Iv=typeof reportError=="function"?reportError:function(e){console.error(e)};function Y1(e){this._internalRoot=e}Xd.prototype.render=Y1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ee(409));Yd(e,t,null,null)};Xd.prototype.unmount=Y1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xo(function(){Yd(null,e,null,null)}),t[us]=null}};function Xd(e){this._internalRoot=e}Xd.prototype.unstable_scheduleHydration=function(e){if(e){var t=o2();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ls.length&&t!==0&&t<Ls[n].priority;n++);Ls.splice(n,0,e),n===0&&l2(e)}};function X1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function dg(){}function TS(e,t,n,i,l){if(l){if(typeof i=="function"){var c=i;i=function(){var g=xd(f);c.call(g)}}var f=Tv(t,i,e,0,null,!1,!1,"",dg);return e._reactRootContainer=f,e[us]=f.current,fc(e.nodeType===8?e.parentNode:e),Xo(),f}for(;l=e.lastChild;)e.removeChild(l);if(typeof i=="function"){var y=i;i=function(){var g=xd(w);y.call(g)}}var w=Z1(e,0,!1,null,null,!1,!1,"",dg);return e._reactRootContainer=w,e[us]=w.current,fc(e.nodeType===8?e.parentNode:e),Xo(function(){Yd(t,w,n,i)}),w}function Kd(e,t,n,i,l){var c=n._reactRootContainer;if(c){var f=c;if(typeof l=="function"){var y=l;l=function(){var w=xd(f);y.call(w)}}Yd(t,f,e,l)}else f=TS(n,t,e,l,i);return xd(f)}i2=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=zl(t.pendingLanes);n!==0&&(f1(t,n|1),_r(t,fn()),!(Ct&6)&&(Za=fn()+500,lo()))}break;case 13:Xo(function(){var i=ds(e,1);if(i!==null){var l=dr();Ci(i,e,1,l)}}),G1(e,1)}};p1=function(e){if(e.tag===13){var t=ds(e,134217728);if(t!==null){var n=dr();Ci(t,e,134217728,n)}G1(e,134217728)}};s2=function(e){if(e.tag===13){var t=Ys(e),n=ds(e,t);if(n!==null){var i=dr();Ci(n,e,t,i)}G1(e,t)}};o2=function(){return Pt};a2=function(e,t){var n=Pt;try{return Pt=e,t()}finally{Pt=n}};Wf=function(e,t,n){switch(t){case"input":if(Bf(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var l=zd(i);if(!l)throw Error(Ee(90));jy(i),Bf(i,l)}}}break;case"textarea":zy(e,n);break;case"select":t=n.value,t!=null&&Oa(e,!!n.multiple,t,!1)}};Yy=U1;Xy=Xo;var IS={usingClientEntryPoint:!1,Events:[Rc,wa,zd,Zy,Gy,U1]},Rl={findFiberByHostInstance:Oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MS={bundleType:Rl.bundleType,version:Rl.version,rendererPackageName:Rl.rendererPackageName,rendererConfig:Rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ms.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Qy(e),e===null?null:e.stateNode},findFiberByHostInstance:Rl.findFiberByHostInstance||NS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wu.isDisabled&&wu.supportsFiber)try{Dd=wu.inject(MS),Bi=wu}catch{}}zr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IS;zr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!X1(t))throw Error(Ee(200));return AS(e,t,null,n)};zr.createRoot=function(e,t){if(!X1(e))throw Error(Ee(299));var n=!1,i="",l=Iv;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Z1(e,1,!1,null,null,n,!1,i,l),e[us]=t.current,fc(e.nodeType===8?e.parentNode:e),new Y1(t)};zr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ee(188)):(e=Object.keys(e).join(","),Error(Ee(268,e)));return e=Qy(t),e=e===null?null:e.stateNode,e};zr.flushSync=function(e){return Xo(e)};zr.hydrate=function(e,t,n){if(!qd(t))throw Error(Ee(200));return Kd(null,e,t,!0,n)};zr.hydrateRoot=function(e,t,n){if(!X1(e))throw Error(Ee(405));var i=n!=null&&n.hydratedSources||null,l=!1,c="",f=Iv;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),t=Tv(t,null,e,1,n??null,l,!1,c,f),e[us]=t.current,fc(e),i)for(e=0;e<i.length;e++)n=i[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new Xd(t)};zr.render=function(e,t,n){if(!qd(t))throw Error(Ee(200));return Kd(null,e,t,!1,n)};zr.unmountComponentAtNode=function(e){if(!qd(e))throw Error(Ee(40));return e._reactRootContainer?(Xo(function(){Kd(null,null,e,!1,function(){e._reactRootContainer=null,e[us]=null})}),!0):!1};zr.unstable_batchedUpdates=U1;zr.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!qd(n))throw Error(Ee(200));if(e==null||e._reactInternals===void 0)throw Error(Ee(38));return Kd(e,t,n,!1,i)};zr.version="18.3.1-next-f1338f8080-20240426";function Mv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mv)}catch(e){console.error(e)}}Mv(),My.exports=zr;var kv=My.exports,hg=kv;Mf.createRoot=hg.createRoot,Mf.hydrateRoot=hg.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bc(){return bc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},bc.apply(this,arguments)}var zs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(zs||(zs={}));const fg="popstate";function kS(e){e===void 0&&(e={});function t(l,c){let{pathname:f="/",search:y="",hash:w=""}=$o(l.location.hash.substr(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),C0("",{pathname:f,search:y,hash:w},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(l,c){let f=l.document.querySelector("base"),y="";if(f&&f.getAttribute("href")){let w=l.location.href,g=w.indexOf("#");y=g===-1?w:w.slice(0,g)}return y+"#"+(typeof c=="string"?c:yd(c))}function i(l,c){Qd(l.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(c)+")")}return OS(t,n,i,e)}function mn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Qd(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function RS(){return Math.random().toString(36).substr(2,8)}function pg(e,t){return{usr:e.state,key:e.key,idx:t}}function C0(e,t,n,i){return n===void 0&&(n=null),bc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?$o(t):t,{state:n,key:t&&t.key||i||RS()})}function yd(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function $o(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function OS(e,t,n,i){i===void 0&&(i={});let{window:l=document.defaultView,v5Compat:c=!1}=i,f=l.history,y=zs.Pop,w=null,g=b();g==null&&(g=0,f.replaceState(bc({},f.state,{idx:g}),""));function b(){return(f.state||{idx:null}).idx}function E(){y=zs.Pop;let V=b(),z=V==null?null:V-g;g=V,w&&w({action:y,location:P.location,delta:z})}function T(V,z){y=zs.Push;let R=C0(P.location,V,z);n&&n(R,V),g=b()+1;let I=pg(R,g),Z=P.createHref(R);try{f.pushState(I,"",Z)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;l.location.assign(Z)}c&&w&&w({action:y,location:P.location,delta:1})}function O(V,z){y=zs.Replace;let R=C0(P.location,V,z);n&&n(R,V),g=b();let I=pg(R,g),Z=P.createHref(R);f.replaceState(I,"",Z),c&&w&&w({action:y,location:P.location,delta:0})}function D(V){let z=l.location.origin!=="null"?l.location.origin:l.location.href,R=typeof V=="string"?V:yd(V);return R=R.replace(/ $/,"%20"),mn(z,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,z)}let P={get action(){return y},get location(){return e(l,f)},listen(V){if(w)throw new Error("A history only accepts one active listener");return l.addEventListener(fg,E),w=V,()=>{l.removeEventListener(fg,E),w=null}},createHref(V){return t(l,V)},createURL:D,encodeLocation(V){let z=D(V);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:T,replace:O,go(V){return f.go(V)}};return P}var mg;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(mg||(mg={}));function PS(e,t,n){return n===void 0&&(n="/"),LS(e,t,n)}function LS(e,t,n,i){let l=typeof t=="string"?$o(t):t,c=q1(l.pathname||"/",n);if(c==null)return null;let f=Rv(e);DS(f);let y=null;for(let w=0;y==null&&w<f.length;++w){let g=XS(c);y=ZS(f[w],g)}return y}function Rv(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let l=(c,f,y)=>{let w={relativePath:y===void 0?c.path||"":y,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};w.relativePath.startsWith("/")&&(mn(w.relativePath.startsWith(i),'Absolute route path "'+w.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),w.relativePath=w.relativePath.slice(i.length));let g=qs([i,w.relativePath]),b=n.concat(w);c.children&&c.children.length>0&&(mn(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),Rv(c.children,t,b,g)),!(c.path==null&&!c.index)&&t.push({path:g,score:HS(g,c.index),routesMeta:b})};return e.forEach((c,f)=>{var y;if(c.path===""||!((y=c.path)!=null&&y.includes("?")))l(c,f);else for(let w of Ov(c.path))l(c,f,w)}),t}function Ov(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,l=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return l?[c,""]:[c];let f=Ov(i.join("/")),y=[];return y.push(...f.map(w=>w===""?c:[c,w].join("/"))),l&&y.push(...f),y.map(w=>e.startsWith("/")&&w===""?"/":w)}function DS(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:WS(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const BS=/^:[\w-]+$/,jS=3,FS=2,zS=1,US=10,VS=-2,gg=e=>e==="*";function HS(e,t){let n=e.split("/"),i=n.length;return n.some(gg)&&(i+=VS),t&&(i+=FS),n.filter(l=>!gg(l)).reduce((l,c)=>l+(BS.test(c)?jS:c===""?zS:US),i)}function WS(e,t){return e.length===t.length&&e.slice(0,-1).every((i,l)=>i===t[l])?e[e.length-1]-t[t.length-1]:0}function ZS(e,t,n){let{routesMeta:i}=e,l={},c="/",f=[];for(let y=0;y<i.length;++y){let w=i[y],g=y===i.length-1,b=c==="/"?t:t.slice(c.length)||"/",E=GS({path:w.relativePath,caseSensitive:w.caseSensitive,end:g},b),T=w.route;if(!E)return null;Object.assign(l,E.params),f.push({params:l,pathname:qs([c,E.pathname]),pathnameBase:$S(qs([c,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(c=qs([c,E.pathnameBase]))}return f}function GS(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=YS(e.path,e.caseSensitive,e.end),l=t.match(n);if(!l)return null;let c=l[0],f=c.replace(/(.)\/+$/,"$1"),y=l.slice(1);return{params:i.reduce((g,b,E)=>{let{paramName:T,isOptional:O}=b;if(T==="*"){let P=y[E]||"";f=c.slice(0,c.length-P.length).replace(/(.)\/+$/,"$1")}const D=y[E];return O&&!D?g[T]=void 0:g[T]=(D||"").replace(/%2F/g,"/"),g},{}),pathname:c,pathnameBase:f,pattern:e}}function YS(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Qd(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,y,w)=>(i.push({paramName:y,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),i]}function XS(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Qd(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function q1(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}const qS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KS=e=>qS.test(e);function QS(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:l=""}=typeof e=="string"?$o(e):e,c;if(n)if(KS(n))c=n;else{if(n.includes("//")){let f=n;n=n.replace(/\/\/+/g,"/"),Qd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(f+" -> "+n))}n.startsWith("/")?c=xg(n.substring(1),"/"):c=xg(n,t)}else c=t;return{pathname:c,search:eE(i),hash:tE(l)}}function xg(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function rf(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function JS(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function K1(e,t){let n=JS(e);return t?n.map((i,l)=>l===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Q1(e,t,n,i){i===void 0&&(i=!1);let l;typeof e=="string"?l=$o(e):(l=bc({},e),mn(!l.pathname||!l.pathname.includes("?"),rf("?","pathname","search",l)),mn(!l.pathname||!l.pathname.includes("#"),rf("#","pathname","hash",l)),mn(!l.search||!l.search.includes("#"),rf("#","search","hash",l)));let c=e===""||l.pathname==="",f=c?"/":l.pathname,y;if(f==null)y=n;else{let E=t.length-1;if(!i&&f.startsWith("..")){let T=f.split("/");for(;T[0]==="..";)T.shift(),E-=1;l.pathname=T.join("/")}y=E>=0?t[E]:"/"}let w=QS(l,y),g=f&&f!=="/"&&f.endsWith("/"),b=(c||f===".")&&n.endsWith("/");return!w.pathname.endsWith("/")&&(g||b)&&(w.pathname+="/"),w}const qs=e=>e.join("/").replace(/\/\/+/g,"/"),$S=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),eE=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,tE=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function nE(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Pv=["post","put","patch","delete"];new Set(Pv);const rE=["get",...Pv];new Set(rE);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cc(){return Cc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Cc.apply(this,arguments)}const J1=F.createContext(null),iE=F.createContext(null),co=F.createContext(null),Jd=F.createContext(null),zi=F.createContext({outlet:null,matches:[],isDataRoute:!1}),Lv=F.createContext(null);function sE(e,t){let{relative:n}=t===void 0?{}:t;nl()||mn(!1);let{basename:i,navigator:l}=F.useContext(co),{hash:c,pathname:f,search:y}=Bv(e,{relative:n}),w=f;return i!=="/"&&(w=f==="/"?i:qs([i,f])),l.createHref({pathname:w,search:y,hash:c})}function nl(){return F.useContext(Jd)!=null}function ea(){return nl()||mn(!1),F.useContext(Jd).location}function Dv(e){F.useContext(co).static||F.useLayoutEffect(e)}function ci(){let{isDataRoute:e}=F.useContext(zi);return e?_E():oE()}function oE(){nl()||mn(!1);let e=F.useContext(J1),{basename:t,future:n,navigator:i}=F.useContext(co),{matches:l}=F.useContext(zi),{pathname:c}=ea(),f=JSON.stringify(K1(l,n.v7_relativeSplatPath)),y=F.useRef(!1);return Dv(()=>{y.current=!0}),F.useCallback(function(g,b){if(b===void 0&&(b={}),!y.current)return;if(typeof g=="number"){i.go(g);return}let E=Q1(g,JSON.parse(f),c,b.relative==="path");e==null&&t!=="/"&&(E.pathname=E.pathname==="/"?t:qs([t,E.pathname])),(b.replace?i.replace:i.push)(E,b.state,b)},[t,i,f,c,e])}const aE=F.createContext(null);function lE(e){let t=F.useContext(zi).outlet;return t&&F.createElement(aE.Provider,{value:e},t)}function cE(){let{matches:e}=F.useContext(zi),t=e[e.length-1];return t?t.params:{}}function Bv(e,t){let{relative:n}=t===void 0?{}:t,{future:i}=F.useContext(co),{matches:l}=F.useContext(zi),{pathname:c}=ea(),f=JSON.stringify(K1(l,i.v7_relativeSplatPath));return F.useMemo(()=>Q1(e,JSON.parse(f),c,n==="path"),[e,f,c,n])}function uE(e,t){return dE(e,t)}function dE(e,t,n,i){nl()||mn(!1);let{navigator:l}=F.useContext(co),{matches:c}=F.useContext(zi),f=c[c.length-1],y=f?f.params:{};f&&f.pathname;let w=f?f.pathnameBase:"/";f&&f.route;let g=ea(),b;if(t){var E;let V=typeof t=="string"?$o(t):t;w==="/"||(E=V.pathname)!=null&&E.startsWith(w)||mn(!1),b=V}else b=g;let T=b.pathname||"/",O=T;if(w!=="/"){let V=w.replace(/^\//,"").split("/");O="/"+T.replace(/^\//,"").split("/").slice(V.length).join("/")}let D=PS(e,{pathname:O}),P=gE(D&&D.map(V=>Object.assign({},V,{params:Object.assign({},y,V.params),pathname:qs([w,l.encodeLocation?l.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?w:qs([w,l.encodeLocation?l.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),c,n,i);return t&&P?F.createElement(Jd.Provider,{value:{location:Cc({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:zs.Pop}},P):P}function hE(){let e=wE(),t=nE(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},t),n?F.createElement("pre",{style:l},n):null,null)}const fE=F.createElement(hE,null);class pE extends F.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?F.createElement(zi.Provider,{value:this.props.routeContext},F.createElement(Lv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mE(e){let{routeContext:t,match:n,children:i}=e,l=F.useContext(J1);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(zi.Provider,{value:t},i)}function gE(e,t,n,i){var l;if(t===void 0&&(t=[]),n===void 0&&(n=null),i===void 0&&(i=null),e==null){var c;if(!n)return null;if(n.errors)e=n.matches;else if((c=i)!=null&&c.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let f=e,y=(l=n)==null?void 0:l.errors;if(y!=null){let b=f.findIndex(E=>E.route.id&&(y==null?void 0:y[E.route.id])!==void 0);b>=0||mn(!1),f=f.slice(0,Math.min(f.length,b+1))}let w=!1,g=-1;if(n&&i&&i.v7_partialHydration)for(let b=0;b<f.length;b++){let E=f[b];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(g=b),E.route.id){let{loaderData:T,errors:O}=n,D=E.route.loader&&T[E.route.id]===void 0&&(!O||O[E.route.id]===void 0);if(E.route.lazy||D){w=!0,g>=0?f=f.slice(0,g+1):f=[f[0]];break}}}return f.reduceRight((b,E,T)=>{let O,D=!1,P=null,V=null;n&&(O=y&&E.route.id?y[E.route.id]:void 0,P=E.route.errorElement||fE,w&&(g<0&&T===0?(bE("route-fallback"),D=!0,V=null):g===T&&(D=!0,V=E.route.hydrateFallbackElement||null)));let z=t.concat(f.slice(0,T+1)),R=()=>{let I;return O?I=P:D?I=V:E.route.Component?I=F.createElement(E.route.Component,null):E.route.element?I=E.route.element:I=b,F.createElement(mE,{match:E,routeContext:{outlet:b,matches:z,isDataRoute:n!=null},children:I})};return n&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?F.createElement(pE,{location:n.location,revalidation:n.revalidation,component:P,error:O,children:R(),routeContext:{outlet:null,matches:z,isDataRoute:!0}}):R()},null)}var jv=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(jv||{}),Fv=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Fv||{});function xE(e){let t=F.useContext(J1);return t||mn(!1),t}function yE(e){let t=F.useContext(iE);return t||mn(!1),t}function vE(e){let t=F.useContext(zi);return t||mn(!1),t}function zv(e){let t=vE(),n=t.matches[t.matches.length-1];return n.route.id||mn(!1),n.route.id}function wE(){var e;let t=F.useContext(Lv),n=yE(),i=zv();return t!==void 0?t:(e=n.errors)==null?void 0:e[i]}function _E(){let{router:e}=xE(jv.UseNavigateStable),t=zv(Fv.UseNavigateStable),n=F.useRef(!1);return Dv(()=>{n.current=!0}),F.useCallback(function(l,c){c===void 0&&(c={}),n.current&&(typeof l=="number"?e.navigate(l):e.navigate(l,Cc({fromRouteId:t},c)))},[e,t])}const yg={};function bE(e,t,n){yg[e]||(yg[e]=!0)}function CE(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Uu(e){let{to:t,replace:n,state:i,relative:l}=e;nl()||mn(!1);let{future:c,static:f}=F.useContext(co),{matches:y}=F.useContext(zi),{pathname:w}=ea(),g=ci(),b=Q1(t,K1(y,c.v7_relativeSplatPath),w,l==="path"),E=JSON.stringify(b);return F.useEffect(()=>g(JSON.parse(E),{replace:n,state:i,relative:l}),[g,E,l,n,i]),null}function SE(e){return lE(e.context)}function Kn(e){mn(!1)}function EE(e){let{basename:t="/",children:n=null,location:i,navigationType:l=zs.Pop,navigator:c,static:f=!1,future:y}=e;nl()&&mn(!1);let w=t.replace(/^\/*/,"/"),g=F.useMemo(()=>({basename:w,navigator:c,static:f,future:Cc({v7_relativeSplatPath:!1},y)}),[w,y,c,f]);typeof i=="string"&&(i=$o(i));let{pathname:b="/",search:E="",hash:T="",state:O=null,key:D="default"}=i,P=F.useMemo(()=>{let V=q1(b,w);return V==null?null:{location:{pathname:V,search:E,hash:T,state:O,key:D},navigationType:l}},[w,b,E,T,O,D,l]);return P==null?null:F.createElement(co.Provider,{value:g},F.createElement(Jd.Provider,{children:n,value:P}))}function AE(e){let{children:t,location:n}=e;return uE(S0(t),n)}new Promise(()=>{});function S0(e,t){t===void 0&&(t=[]);let n=[];return F.Children.forEach(e,(i,l)=>{if(!F.isValidElement(i))return;let c=[...t,l];if(i.type===F.Fragment){n.push.apply(n,S0(i.props.children,c));return}i.type!==Kn&&mn(!1),!i.props.index||!i.props.children||mn(!1);let f={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=S0(i.props.children,c)),n.push(f)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function E0(){return E0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},E0.apply(this,arguments)}function NE(e,t){if(e==null)return{};var n={},i=Object.keys(e),l,c;for(c=0;c<i.length;c++)l=i[c],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}function TE(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function IE(e,t){return e.button===0&&(!t||t==="_self")&&!TE(e)}const ME=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],kE="6";try{window.__reactRouterVersion=kE}catch{}const RE="startTransition",vg=wC[RE];function OE(e){let{basename:t,children:n,future:i,window:l}=e,c=F.useRef();c.current==null&&(c.current=kS({window:l,v5Compat:!0}));let f=c.current,[y,w]=F.useState({action:f.action,location:f.location}),{v7_startTransition:g}=i||{},b=F.useCallback(E=>{g&&vg?vg(()=>w(E)):w(E)},[w,g]);return F.useLayoutEffect(()=>f.listen(b),[f,b]),F.useEffect(()=>CE(i),[i]),F.createElement(EE,{basename:t,children:n,location:y.location,navigationType:y.action,navigator:f,future:i})}const PE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",LE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,DE=F.forwardRef(function(t,n){let{onClick:i,relative:l,reloadDocument:c,replace:f,state:y,target:w,to:g,preventScrollReset:b,viewTransition:E}=t,T=NE(t,ME),{basename:O}=F.useContext(co),D,P=!1;if(typeof g=="string"&&LE.test(g)&&(D=g,PE))try{let I=new URL(window.location.href),Z=g.startsWith("//")?new URL(I.protocol+g):new URL(g),Q=q1(Z.pathname,O);Z.origin===I.origin&&Q!=null?g=Q+Z.search+Z.hash:P=!0}catch{}let V=sE(g,{relative:l}),z=BE(g,{replace:f,state:y,target:w,preventScrollReset:b,relative:l,viewTransition:E});function R(I){i&&i(I),I.defaultPrevented||z(I)}return F.createElement("a",E0({},T,{href:D||V,onClick:P||c?i:R,ref:n,target:w}))});var wg;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(wg||(wg={}));var _g;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(_g||(_g={}));function BE(e,t){let{target:n,replace:i,state:l,preventScrollReset:c,relative:f,viewTransition:y}=t===void 0?{}:t,w=ci(),g=ea(),b=Bv(e,{relative:f});return F.useCallback(E=>{if(IE(E,n)){E.preventDefault();let T=i!==void 0?i:yd(g)===yd(b);w(e,{replace:T,state:l,preventScrollReset:c,relative:f,viewTransition:y})}},[g,w,b,i,l,n,e,c,f,y])}const Uv=F.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),$d=F.createContext({}),eh=F.createContext(null),th=typeof document<"u",$1=th?F.useLayoutEffect:F.useEffect,Vv=F.createContext({strict:!1}),ep=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),jE="framerAppearId",Hv="data-"+ep(jE);function FE(e,t,n,i){const{visualElement:l}=F.useContext($d),c=F.useContext(Vv),f=F.useContext(eh),y=F.useContext(Uv).reducedMotion,w=F.useRef();i=i||c.renderer,!w.current&&i&&(w.current=i(e,{visualState:t,parent:l,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:y}));const g=w.current;F.useInsertionEffect(()=>{g&&g.update(n,f)});const b=F.useRef(!!(n[Hv]&&!window.HandoffComplete));return $1(()=>{g&&(g.render(),b.current&&g.animationState&&g.animationState.animateChanges())}),F.useEffect(()=>{g&&(g.updateFeatures(),!b.current&&g.animationState&&g.animationState.animateChanges(),b.current&&(b.current=!1,window.HandoffComplete=!0))}),g}function Na(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function zE(e,t,n){return F.useCallback(i=>{i&&e.mount&&e.mount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):Na(n)&&(n.current=i))},[t])}function Sc(e){return typeof e=="string"||Array.isArray(e)}function nh(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const tp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],np=["initial",...tp];function rh(e){return nh(e.animate)||np.some(t=>Sc(e[t]))}function Wv(e){return!!(rh(e)||e.variants)}function UE(e,t){if(rh(e)){const{initial:n,animate:i}=e;return{initial:n===!1||Sc(n)?n:void 0,animate:Sc(i)?i:void 0}}return e.inherit!==!1?t:{}}function VE(e){const{initial:t,animate:n}=UE(e,F.useContext($d));return F.useMemo(()=>({initial:t,animate:n}),[bg(t),bg(n)])}function bg(e){return Array.isArray(e)?e.join(" "):e}const Cg={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ec={};for(const e in Cg)Ec[e]={isEnabled:t=>Cg[e].some(n=>!!t[n])};function HE(e){for(const t in e)Ec[t]={...Ec[t],...e[t]}}const rp=F.createContext({}),Zv=F.createContext({}),WE=Symbol.for("motionComponentSymbol");function ZE({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:i,Component:l}){e&&HE(e);function c(y,w){let g;const b={...F.useContext(Uv),...y,layoutId:GE(y)},{isStatic:E}=b,T=VE(y),O=i(y,E);if(!E&&th){T.visualElement=FE(l,O,b,t);const D=F.useContext(Zv),P=F.useContext(Vv).strict;T.visualElement&&(g=T.visualElement.loadFeatures(b,P,e,D))}return F.createElement($d.Provider,{value:T},g&&T.visualElement?F.createElement(g,{visualElement:T.visualElement,...b}):null,n(l,y,zE(O,T.visualElement,w),O,E,T.visualElement))}const f=F.forwardRef(c);return f[WE]=l,f}function GE({layoutId:e}){const t=F.useContext(rp).id;return t&&e!==void 0?t+"-"+e:e}function YE(e){function t(i,l={}){return ZE(e(i,l))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(i,l)=>(n.has(l)||n.set(l,t(l)),n.get(l))})}const XE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ip(e){return typeof e!="string"||e.includes("-")?!1:!!(XE.indexOf(e)>-1||/[A-Z]/.test(e))}const vd={};function qE(e){Object.assign(vd,e)}const Pc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ta=new Set(Pc);function Gv(e,{layout:t,layoutId:n}){return ta.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!vd[e]||e==="opacity")}const Sr=e=>!!(e&&e.getVelocity),KE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},QE=Pc.length;function JE(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},i,l){let c="";for(let f=0;f<QE;f++){const y=Pc[f];if(e[y]!==void 0){const w=KE[y]||y;c+=`${w}(${e[y]}) `}}return t&&!e.z&&(c+="translateZ(0)"),c=c.trim(),l?c=l(e,i?"":c):n&&i&&(c="none"),c}const Yv=e=>t=>typeof t=="string"&&t.startsWith(e),Xv=Yv("--"),A0=Yv("var(--"),$E=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,eA=(e,t)=>t&&typeof e=="number"?t.transform(e):e,no=(e,t,n)=>Math.min(Math.max(n,e),t),na={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},$l={...na,transform:e=>no(0,1,e)},_u={...na,default:1},ec=e=>Math.round(e*1e5)/1e5,ih=/(-)?([\d]*\.?[\d])+/g,qv=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,tA=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Lc(e){return typeof e=="string"}const Dc=e=>({test:t=>Lc(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ks=Dc("deg"),Fi=Dc("%"),$e=Dc("px"),nA=Dc("vh"),rA=Dc("vw"),Sg={...Fi,parse:e=>Fi.parse(e)/100,transform:e=>Fi.transform(e*100)},Eg={...na,transform:Math.round},Kv={borderWidth:$e,borderTopWidth:$e,borderRightWidth:$e,borderBottomWidth:$e,borderLeftWidth:$e,borderRadius:$e,radius:$e,borderTopLeftRadius:$e,borderTopRightRadius:$e,borderBottomRightRadius:$e,borderBottomLeftRadius:$e,width:$e,maxWidth:$e,height:$e,maxHeight:$e,size:$e,top:$e,right:$e,bottom:$e,left:$e,padding:$e,paddingTop:$e,paddingRight:$e,paddingBottom:$e,paddingLeft:$e,margin:$e,marginTop:$e,marginRight:$e,marginBottom:$e,marginLeft:$e,rotate:ks,rotateX:ks,rotateY:ks,rotateZ:ks,scale:_u,scaleX:_u,scaleY:_u,scaleZ:_u,skew:ks,skewX:ks,skewY:ks,distance:$e,translateX:$e,translateY:$e,translateZ:$e,x:$e,y:$e,z:$e,perspective:$e,transformPerspective:$e,opacity:$l,originX:Sg,originY:Sg,originZ:$e,zIndex:Eg,fillOpacity:$l,strokeOpacity:$l,numOctaves:Eg};function sp(e,t,n,i){const{style:l,vars:c,transform:f,transformOrigin:y}=e;let w=!1,g=!1,b=!0;for(const E in t){const T=t[E];if(Xv(E)){c[E]=T;continue}const O=Kv[E],D=eA(T,O);if(ta.has(E)){if(w=!0,f[E]=D,!b)continue;T!==(O.default||0)&&(b=!1)}else E.startsWith("origin")?(g=!0,y[E]=D):l[E]=D}if(t.transform||(w||i?l.transform=JE(e.transform,n,b,i):l.transform&&(l.transform="none")),g){const{originX:E="50%",originY:T="50%",originZ:O=0}=y;l.transformOrigin=`${E} ${T} ${O}`}}const op=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Qv(e,t,n){for(const i in t)!Sr(t[i])&&!Gv(i,n)&&(e[i]=t[i])}function iA({transformTemplate:e},t,n){return F.useMemo(()=>{const i=op();return sp(i,t,{enableHardwareAcceleration:!n},e),Object.assign({},i.vars,i.style)},[t])}function sA(e,t,n){const i=e.style||{},l={};return Qv(l,i,e),Object.assign(l,iA(e,t,n)),e.transformValues?e.transformValues(l):l}function oA(e,t,n){const i={},l=sA(e,t,n);return e.drag&&e.dragListener!==!1&&(i.draggable=!1,l.userSelect=l.WebkitUserSelect=l.WebkitTouchCallout="none",l.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=l,i}const aA=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function wd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||aA.has(e)}let Jv=e=>!wd(e);function lA(e){e&&(Jv=t=>t.startsWith("on")?!wd(t):e(t))}try{lA(require("@emotion/is-prop-valid").default)}catch{}function cA(e,t,n){const i={};for(const l in e)l==="values"&&typeof e.values=="object"||(Jv(l)||n===!0&&wd(l)||!t&&!wd(l)||e.draggable&&l.startsWith("onDrag"))&&(i[l]=e[l]);return i}function Ag(e,t,n){return typeof e=="string"?e:$e.transform(t+n*e)}function uA(e,t,n){const i=Ag(t,e.x,e.width),l=Ag(n,e.y,e.height);return`${i} ${l}`}const dA={offset:"stroke-dashoffset",array:"stroke-dasharray"},hA={offset:"strokeDashoffset",array:"strokeDasharray"};function fA(e,t,n=1,i=0,l=!0){e.pathLength=1;const c=l?dA:hA;e[c.offset]=$e.transform(-i);const f=$e.transform(t),y=$e.transform(n);e[c.array]=`${f} ${y}`}function ap(e,{attrX:t,attrY:n,attrScale:i,originX:l,originY:c,pathLength:f,pathSpacing:y=1,pathOffset:w=0,...g},b,E,T){if(sp(e,g,b,T),E){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:O,style:D,dimensions:P}=e;O.transform&&(P&&(D.transform=O.transform),delete O.transform),P&&(l!==void 0||c!==void 0||D.transform)&&(D.transformOrigin=uA(P,l!==void 0?l:.5,c!==void 0?c:.5)),t!==void 0&&(O.x=t),n!==void 0&&(O.y=n),i!==void 0&&(O.scale=i),f!==void 0&&fA(O,f,y,w,!1)}const $v=()=>({...op(),attrs:{}}),lp=e=>typeof e=="string"&&e.toLowerCase()==="svg";function pA(e,t,n,i){const l=F.useMemo(()=>{const c=$v();return ap(c,t,{enableHardwareAcceleration:!1},lp(i),e.transformTemplate),{...c.attrs,style:{...c.style}}},[t]);if(e.style){const c={};Qv(c,e.style,e),l.style={...c,...l.style}}return l}function mA(e=!1){return(n,i,l,{latestValues:c},f)=>{const w=(ip(n)?pA:oA)(i,c,f,n),b={...cA(i,typeof n=="string",e),...w,ref:l},{children:E}=i,T=F.useMemo(()=>Sr(E)?E.get():E,[E]);return F.createElement(n,{...b,children:T})}}function ew(e,{style:t,vars:n},i,l){Object.assign(e.style,t,l&&l.getProjectionStyles(i));for(const c in n)e.style.setProperty(c,n[c])}const tw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function nw(e,t,n,i){ew(e,t,void 0,i);for(const l in t.attrs)e.setAttribute(tw.has(l)?l:ep(l),t.attrs[l])}function cp(e,t){const{style:n}=e,i={};for(const l in n)(Sr(n[l])||t.style&&Sr(t.style[l])||Gv(l,e))&&(i[l]=n[l]);return i}function rw(e,t){const n=cp(e,t);for(const i in e)if(Sr(e[i])||Sr(t[i])){const l=Pc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[l]=e[i]}return n}function up(e,t,n,i={},l={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,i,l)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,i,l)),t}function iw(e){const t=F.useRef(null);return t.current===null&&(t.current=e()),t.current}const _d=e=>Array.isArray(e),gA=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),xA=e=>_d(e)?e[e.length-1]||0:e;function Vu(e){const t=Sr(e)?e.get():e;return gA(t)?t.toValue():t}function yA({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},i,l,c){const f={latestValues:vA(i,l,c,e),renderState:t()};return n&&(f.mount=y=>n(i,y,f)),f}const sw=e=>(t,n)=>{const i=F.useContext($d),l=F.useContext(eh),c=()=>yA(e,t,i,l);return n?c():iw(c)};function vA(e,t,n,i){const l={},c=i(e,{});for(const T in c)l[T]=Vu(c[T]);let{initial:f,animate:y}=e;const w=rh(e),g=Wv(e);t&&g&&!w&&e.inherit!==!1&&(f===void 0&&(f=t.initial),y===void 0&&(y=t.animate));let b=n?n.initial===!1:!1;b=b||f===!1;const E=b?y:f;return E&&typeof E!="boolean"&&!nh(E)&&(Array.isArray(E)?E:[E]).forEach(O=>{const D=up(e,O);if(!D)return;const{transitionEnd:P,transition:V,...z}=D;for(const R in z){let I=z[R];if(Array.isArray(I)){const Z=b?I.length-1:0;I=I[Z]}I!==null&&(l[R]=I)}for(const R in P)l[R]=P[R]}),l}const pn=e=>e;class Ng{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function wA(e){let t=new Ng,n=new Ng,i=0,l=!1,c=!1;const f=new WeakSet,y={schedule:(w,g=!1,b=!1)=>{const E=b&&l,T=E?t:n;return g&&f.add(w),T.add(w)&&E&&l&&(i=t.order.length),w},cancel:w=>{n.remove(w),f.delete(w)},process:w=>{if(l){c=!0;return}if(l=!0,[t,n]=[n,t],n.clear(),i=t.order.length,i)for(let g=0;g<i;g++){const b=t.order[g];b(w),f.has(b)&&(y.schedule(b),e())}l=!1,c&&(c=!1,y.process(w))}};return y}const bu=["prepare","read","update","preRender","render","postRender"],_A=40;function bA(e,t){let n=!1,i=!0;const l={delta:0,timestamp:0,isProcessing:!1},c=bu.reduce((E,T)=>(E[T]=wA(()=>n=!0),E),{}),f=E=>c[E].process(l),y=()=>{const E=performance.now();n=!1,l.delta=i?1e3/60:Math.max(Math.min(E-l.timestamp,_A),1),l.timestamp=E,l.isProcessing=!0,bu.forEach(f),l.isProcessing=!1,n&&t&&(i=!1,e(y))},w=()=>{n=!0,i=!0,l.isProcessing||e(y)};return{schedule:bu.reduce((E,T)=>{const O=c[T];return E[T]=(D,P=!1,V=!1)=>(n||w(),O.schedule(D,P,V)),E},{}),cancel:E=>bu.forEach(T=>c[T].cancel(E)),state:l,steps:c}}const{schedule:Wt,cancel:fs,state:Qn,steps:sf}=bA(typeof requestAnimationFrame<"u"?requestAnimationFrame:pn,!0),CA={useVisualState:sw({scrapeMotionValuesFromProps:rw,createRenderState:$v,onMount:(e,t,{renderState:n,latestValues:i})=>{Wt.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Wt.render(()=>{ap(n,i,{enableHardwareAcceleration:!1},lp(t.tagName),e.transformTemplate),nw(t,n)})}})},SA={useVisualState:sw({scrapeMotionValuesFromProps:cp,createRenderState:op})};function EA(e,{forwardMotionProps:t=!1},n,i){return{...ip(e)?CA:SA,preloadedFeatures:n,useRender:mA(t),createVisualElement:i,Component:e}}function rs(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}const ow=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function sh(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const AA=e=>t=>ow(t)&&e(t,sh(t));function as(e,t,n,i){return rs(e,t,AA(n),i)}const NA=(e,t)=>n=>t(e(n)),Ks=(...e)=>e.reduce(NA);function aw(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const Tg=aw("dragHorizontal"),Ig=aw("dragVertical");function lw(e){let t=!1;if(e==="y")t=Ig();else if(e==="x")t=Tg();else{const n=Tg(),i=Ig();n&&i?t=()=>{n(),i()}:(n&&n(),i&&i())}return t}function cw(){const e=lw(!0);return e?(e(),!1):!0}class uo{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Mg(e,t){const n="pointer"+(t?"enter":"leave"),i="onHover"+(t?"Start":"End"),l=(c,f)=>{if(c.pointerType==="touch"||cw())return;const y=e.getProps();e.animationState&&y.whileHover&&e.animationState.setActive("whileHover",t),y[i]&&Wt.update(()=>y[i](c,f))};return as(e.current,n,l,{passive:!e.getProps()[i]})}class TA extends uo{mount(){this.unmount=Ks(Mg(this.node,!0),Mg(this.node,!1))}unmount(){}}class IA extends uo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ks(rs(this.node.current,"focus",()=>this.onFocus()),rs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const uw=(e,t)=>t?e===t?!0:uw(e,t.parentElement):!1;function of(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,sh(n))}class MA extends uo{constructor(){super(...arguments),this.removeStartListeners=pn,this.removeEndListeners=pn,this.removeAccessibleListeners=pn,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),c=as(window,"pointerup",(y,w)=>{if(!this.checkPressEnd())return;const{onTap:g,onTapCancel:b,globalTapTarget:E}=this.node.getProps();Wt.update(()=>{!E&&!uw(this.node.current,y.target)?b&&b(y,w):g&&g(y,w)})},{passive:!(i.onTap||i.onPointerUp)}),f=as(window,"pointercancel",(y,w)=>this.cancelPress(y,w),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=Ks(c,f),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=c=>{if(c.key!=="Enter"||this.isPressing)return;const f=y=>{y.key!=="Enter"||!this.checkPressEnd()||of("up",(w,g)=>{const{onTap:b}=this.node.getProps();b&&Wt.update(()=>b(w,g))})};this.removeEndListeners(),this.removeEndListeners=rs(this.node.current,"keyup",f),of("down",(y,w)=>{this.startPress(y,w)})},n=rs(this.node.current,"keydown",t),i=()=>{this.isPressing&&of("cancel",(c,f)=>this.cancelPress(c,f))},l=rs(this.node.current,"blur",i);this.removeAccessibleListeners=Ks(n,l)}}startPress(t,n){this.isPressing=!0;const{onTapStart:i,whileTap:l}=this.node.getProps();l&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&Wt.update(()=>i(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!cw()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&Wt.update(()=>i(t,n))}mount(){const t=this.node.getProps(),n=as(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),i=rs(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ks(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const N0=new WeakMap,af=new WeakMap,kA=e=>{const t=N0.get(e.target);t&&t(e)},RA=e=>{e.forEach(kA)};function OA({root:e,...t}){const n=e||document;af.has(n)||af.set(n,{});const i=af.get(n),l=JSON.stringify(t);return i[l]||(i[l]=new IntersectionObserver(RA,{root:e,...t})),i[l]}function PA(e,t,n){const i=OA(t);return N0.set(e,n),i.observe(e),()=>{N0.delete(e),i.unobserve(e)}}const LA={some:0,all:1};class DA extends uo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:l="some",once:c}=t,f={root:n?n.current:void 0,rootMargin:i,threshold:typeof l=="number"?l:LA[l]},y=w=>{const{isIntersecting:g}=w;if(this.isInView===g||(this.isInView=g,c&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:b,onViewportLeave:E}=this.node.getProps(),T=g?b:E;T&&T(w)};return PA(this.node.current,f,y)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(BA(t,n))&&this.startObserver()}unmount(){}}function BA({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const jA={inView:{Feature:DA},tap:{Feature:MA},focus:{Feature:IA},hover:{Feature:TA}};function dw(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function FA(e){const t={};return e.values.forEach((n,i)=>t[i]=n.get()),t}function zA(e){const t={};return e.values.forEach((n,i)=>t[i]=n.getVelocity()),t}function oh(e,t,n){const i=e.getProps();return up(i,t,n!==void 0?n:i.custom,FA(e),zA(e))}let dp=pn;const zo=e=>e*1e3,ls=e=>e/1e3,UA={current:!1},hw=e=>Array.isArray(e)&&typeof e[0]=="number";function fw(e){return!!(!e||typeof e=="string"&&pw[e]||hw(e)||Array.isArray(e)&&e.every(fw))}const Vl=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,pw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Vl([0,.65,.55,1]),circOut:Vl([.55,0,1,.45]),backIn:Vl([.31,.01,.66,-.59]),backOut:Vl([.33,1.53,.69,.99])};function mw(e){if(e)return hw(e)?Vl(e):Array.isArray(e)?e.map(mw):pw[e]}function VA(e,t,n,{delay:i=0,duration:l,repeat:c=0,repeatType:f="loop",ease:y,times:w}={}){const g={[t]:n};w&&(g.offset=w);const b=mw(y);return Array.isArray(b)&&(g.easing=b),e.animate(g,{delay:i,duration:l,easing:Array.isArray(b)?"linear":b,fill:"both",iterations:c+1,direction:f==="reverse"?"alternate":"normal"})}function HA(e,{repeat:t,repeatType:n="loop"}){const i=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[i]}const gw=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,WA=1e-7,ZA=12;function GA(e,t,n,i,l){let c,f,y=0;do f=t+(n-t)/2,c=gw(f,i,l)-e,c>0?n=f:t=f;while(Math.abs(c)>WA&&++y<ZA);return f}function Bc(e,t,n,i){if(e===t&&n===i)return pn;const l=c=>GA(c,0,1,e,n);return c=>c===0||c===1?c:gw(l(c),t,i)}const YA=Bc(.42,0,1,1),XA=Bc(0,0,.58,1),xw=Bc(.42,0,.58,1),qA=e=>Array.isArray(e)&&typeof e[0]!="number",yw=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,vw=e=>t=>1-e(1-t),hp=e=>1-Math.sin(Math.acos(e)),ww=vw(hp),KA=yw(hp),_w=Bc(.33,1.53,.69,.99),fp=vw(_w),QA=yw(fp),JA=e=>(e*=2)<1?.5*fp(e):.5*(2-Math.pow(2,-10*(e-1))),$A={linear:pn,easeIn:YA,easeInOut:xw,easeOut:XA,circIn:hp,circInOut:KA,circOut:ww,backIn:fp,backInOut:QA,backOut:_w,anticipate:JA},kg=e=>{if(Array.isArray(e)){dp(e.length===4);const[t,n,i,l]=e;return Bc(t,n,i,l)}else if(typeof e=="string")return $A[e];return e},pp=(e,t)=>n=>!!(Lc(n)&&tA.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),bw=(e,t,n)=>i=>{if(!Lc(i))return i;const[l,c,f,y]=i.match(ih);return{[e]:parseFloat(l),[t]:parseFloat(c),[n]:parseFloat(f),alpha:y!==void 0?parseFloat(y):1}},eN=e=>no(0,255,e),lf={...na,transform:e=>Math.round(eN(e))},Do={test:pp("rgb","red"),parse:bw("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+lf.transform(e)+", "+lf.transform(t)+", "+lf.transform(n)+", "+ec($l.transform(i))+")"};function tN(e){let t="",n="",i="",l="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),l=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),l=e.substring(4,5),t+=t,n+=n,i+=i,l+=l),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:l?parseInt(l,16)/255:1}}const T0={test:pp("#"),parse:tN,transform:Do.transform},Ta={test:pp("hsl","hue"),parse:bw("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+Fi.transform(ec(t))+", "+Fi.transform(ec(n))+", "+ec($l.transform(i))+")"},cr={test:e=>Do.test(e)||T0.test(e)||Ta.test(e),parse:e=>Do.test(e)?Do.parse(e):Ta.test(e)?Ta.parse(e):T0.parse(e),transform:e=>Lc(e)?e:e.hasOwnProperty("red")?Do.transform(e):Ta.transform(e)},sn=(e,t,n)=>-n*e+n*t+e;function cf(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function nN({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let l=0,c=0,f=0;if(!t)l=c=f=n;else{const y=n<.5?n*(1+t):n+t-n*t,w=2*n-y;l=cf(w,y,e+1/3),c=cf(w,y,e),f=cf(w,y,e-1/3)}return{red:Math.round(l*255),green:Math.round(c*255),blue:Math.round(f*255),alpha:i}}const uf=(e,t,n)=>{const i=e*e;return Math.sqrt(Math.max(0,n*(t*t-i)+i))},rN=[T0,Do,Ta],iN=e=>rN.find(t=>t.test(e));function Rg(e){const t=iN(e);let n=t.parse(e);return t===Ta&&(n=nN(n)),n}const Cw=(e,t)=>{const n=Rg(e),i=Rg(t),l={...n};return c=>(l.red=uf(n.red,i.red,c),l.green=uf(n.green,i.green,c),l.blue=uf(n.blue,i.blue,c),l.alpha=sn(n.alpha,i.alpha,c),Do.transform(l))};function sN(e){var t,n;return isNaN(e)&&Lc(e)&&(((t=e.match(ih))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(qv))===null||n===void 0?void 0:n.length)||0)>0}const Sw={regex:$E,countKey:"Vars",token:"${v}",parse:pn},Ew={regex:qv,countKey:"Colors",token:"${c}",parse:cr.parse},Aw={regex:ih,countKey:"Numbers",token:"${n}",parse:na.parse};function df(e,{regex:t,countKey:n,token:i,parse:l}){const c=e.tokenised.match(t);c&&(e["num"+n]=c.length,e.tokenised=e.tokenised.replace(t,i),e.values.push(...c.map(l)))}function bd(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&df(n,Sw),df(n,Ew),df(n,Aw),n}function Nw(e){return bd(e).values}function Tw(e){const{values:t,numColors:n,numVars:i,tokenised:l}=bd(e),c=t.length;return f=>{let y=l;for(let w=0;w<c;w++)w<i?y=y.replace(Sw.token,f[w]):w<i+n?y=y.replace(Ew.token,cr.transform(f[w])):y=y.replace(Aw.token,ec(f[w]));return y}}const oN=e=>typeof e=="number"?0:e;function aN(e){const t=Nw(e);return Tw(e)(t.map(oN))}const ro={test:sN,parse:Nw,createTransformer:Tw,getAnimatableNone:aN},Iw=(e,t)=>n=>`${n>0?t:e}`;function Mw(e,t){return typeof e=="number"?n=>sn(e,t,n):cr.test(e)?Cw(e,t):e.startsWith("var(")?Iw(e,t):Rw(e,t)}const kw=(e,t)=>{const n=[...e],i=n.length,l=e.map((c,f)=>Mw(c,t[f]));return c=>{for(let f=0;f<i;f++)n[f]=l[f](c);return n}},lN=(e,t)=>{const n={...e,...t},i={};for(const l in n)e[l]!==void 0&&t[l]!==void 0&&(i[l]=Mw(e[l],t[l]));return l=>{for(const c in i)n[c]=i[c](l);return n}},Rw=(e,t)=>{const n=ro.createTransformer(t),i=bd(e),l=bd(t);return i.numVars===l.numVars&&i.numColors===l.numColors&&i.numNumbers>=l.numNumbers?Ks(kw(i.values,l.values),n):Iw(e,t)},Ac=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i},Og=(e,t)=>n=>sn(e,t,n);function cN(e){return typeof e=="number"?Og:typeof e=="string"?cr.test(e)?Cw:Rw:Array.isArray(e)?kw:typeof e=="object"?lN:Og}function uN(e,t,n){const i=[],l=n||cN(e[0]),c=e.length-1;for(let f=0;f<c;f++){let y=l(e[f],e[f+1]);if(t){const w=Array.isArray(t)?t[f]||pn:t;y=Ks(w,y)}i.push(y)}return i}function Ow(e,t,{clamp:n=!0,ease:i,mixer:l}={}){const c=e.length;if(dp(c===t.length),c===1)return()=>t[0];e[0]>e[c-1]&&(e=[...e].reverse(),t=[...t].reverse());const f=uN(t,i,l),y=f.length,w=g=>{let b=0;if(y>1)for(;b<e.length-2&&!(g<e[b+1]);b++);const E=Ac(e[b],e[b+1],g);return f[b](E)};return n?g=>w(no(e[0],e[c-1],g)):w}function dN(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const l=Ac(0,t,i);e.push(sn(n,1,l))}}function hN(e){const t=[0];return dN(t,e.length-1),t}function fN(e,t){return e.map(n=>n*t)}function pN(e,t){return e.map(()=>t||xw).splice(0,e.length-1)}function Cd({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const l=qA(i)?i.map(kg):kg(i),c={done:!1,value:t[0]},f=fN(n&&n.length===t.length?n:hN(t),e),y=Ow(f,t,{ease:Array.isArray(l)?l:pN(t,l)});return{calculatedDuration:e,next:w=>(c.value=y(w),c.done=w>=e,c)}}function Pw(e,t){return t?e*(1e3/t):0}const mN=5;function Lw(e,t,n){const i=Math.max(t-mN,0);return Pw(n-e(i),t-i)}const hf=.001,gN=.01,xN=10,yN=.05,vN=1;function wN({duration:e=800,bounce:t=.25,velocity:n=0,mass:i=1}){let l,c,f=1-t;f=no(yN,vN,f),e=no(gN,xN,ls(e)),f<1?(l=g=>{const b=g*f,E=b*e,T=b-n,O=I0(g,f),D=Math.exp(-E);return hf-T/O*D},c=g=>{const E=g*f*e,T=E*n+n,O=Math.pow(f,2)*Math.pow(g,2)*e,D=Math.exp(-E),P=I0(Math.pow(g,2),f);return(-l(g)+hf>0?-1:1)*((T-O)*D)/P}):(l=g=>{const b=Math.exp(-g*e),E=(g-n)*e+1;return-hf+b*E},c=g=>{const b=Math.exp(-g*e),E=(n-g)*(e*e);return b*E});const y=5/e,w=bN(l,c,y);if(e=zo(e),isNaN(w))return{stiffness:100,damping:10,duration:e};{const g=Math.pow(w,2)*i;return{stiffness:g,damping:f*2*Math.sqrt(i*g),duration:e}}}const _N=12;function bN(e,t,n){let i=n;for(let l=1;l<_N;l++)i=i-e(i)/t(i);return i}function I0(e,t){return e*Math.sqrt(1-t*t)}const CN=["duration","bounce"],SN=["stiffness","damping","mass"];function Pg(e,t){return t.some(n=>e[n]!==void 0)}function EN(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Pg(e,SN)&&Pg(e,CN)){const n=wN(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function Dw({keyframes:e,restDelta:t,restSpeed:n,...i}){const l=e[0],c=e[e.length-1],f={done:!1,value:l},{stiffness:y,damping:w,mass:g,duration:b,velocity:E,isResolvedFromDuration:T}=EN({...i,velocity:-ls(i.velocity||0)}),O=E||0,D=w/(2*Math.sqrt(y*g)),P=c-l,V=ls(Math.sqrt(y/g)),z=Math.abs(P)<5;n||(n=z?.01:2),t||(t=z?.005:.5);let R;if(D<1){const I=I0(V,D);R=Z=>{const Q=Math.exp(-D*V*Z);return c-Q*((O+D*V*P)/I*Math.sin(I*Z)+P*Math.cos(I*Z))}}else if(D===1)R=I=>c-Math.exp(-V*I)*(P+(O+V*P)*I);else{const I=V*Math.sqrt(D*D-1);R=Z=>{const Q=Math.exp(-D*V*Z),X=Math.min(I*Z,300);return c-Q*((O+D*V*P)*Math.sinh(X)+I*P*Math.cosh(X))/I}}return{calculatedDuration:T&&b||null,next:I=>{const Z=R(I);if(T)f.done=I>=b;else{let Q=O;I!==0&&(D<1?Q=Lw(R,I,Z):Q=0);const X=Math.abs(Q)<=n,G=Math.abs(c-Z)<=t;f.done=X&&G}return f.value=f.done?c:Z,f}}}function Lg({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:l=10,bounceStiffness:c=500,modifyTarget:f,min:y,max:w,restDelta:g=.5,restSpeed:b}){const E=e[0],T={done:!1,value:E},O=ee=>y!==void 0&&ee<y||w!==void 0&&ee>w,D=ee=>y===void 0?w:w===void 0||Math.abs(y-ee)<Math.abs(w-ee)?y:w;let P=n*t;const V=E+P,z=f===void 0?V:f(V);z!==V&&(P=z-E);const R=ee=>-P*Math.exp(-ee/i),I=ee=>z+R(ee),Z=ee=>{const U=R(ee),re=I(ee);T.done=Math.abs(U)<=g,T.value=T.done?z:re};let Q,X;const G=ee=>{O(T.value)&&(Q=ee,X=Dw({keyframes:[T.value,D(T.value)],velocity:Lw(I,ee,T.value),damping:l,stiffness:c,restDelta:g,restSpeed:b}))};return G(0),{calculatedDuration:null,next:ee=>{let U=!1;return!X&&Q===void 0&&(U=!0,Z(ee),G(ee)),Q!==void 0&&ee>Q?X.next(ee-Q):(!U&&Z(ee),T)}}}const AN=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Wt.update(t,!0),stop:()=>fs(t),now:()=>Qn.isProcessing?Qn.timestamp:performance.now()}},Dg=2e4;function Bg(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<Dg;)t+=n,i=e.next(t);return t>=Dg?1/0:t}const NN={decay:Lg,inertia:Lg,tween:Cd,keyframes:Cd,spring:Dw};function Sd({autoplay:e=!0,delay:t=0,driver:n=AN,keyframes:i,type:l="keyframes",repeat:c=0,repeatDelay:f=0,repeatType:y="loop",onPlay:w,onStop:g,onComplete:b,onUpdate:E,...T}){let O=1,D=!1,P,V;const z=()=>{V=new Promise(be=>{P=be})};z();let R;const I=NN[l]||Cd;let Z;I!==Cd&&typeof i[0]!="number"&&(Z=Ow([0,100],i,{clamp:!1}),i=[0,100]);const Q=I({...T,keyframes:i});let X;y==="mirror"&&(X=I({...T,keyframes:[...i].reverse(),velocity:-(T.velocity||0)}));let G="idle",ee=null,U=null,re=null;Q.calculatedDuration===null&&c&&(Q.calculatedDuration=Bg(Q));const{calculatedDuration:me}=Q;let le=1/0,Ie=1/0;me!==null&&(le=me+f,Ie=le*(c+1)-f);let je=0;const ue=be=>{if(U===null)return;O>0&&(U=Math.min(U,be)),O<0&&(U=Math.min(be-Ie/O,U)),ee!==null?je=ee:je=Math.round(be-U)*O;const Pe=je-t*(O>=0?1:-1),ot=O>=0?Pe<0:Pe>Ie;je=Math.max(Pe,0),G==="finished"&&ee===null&&(je=Ie);let Ze=je,nt=Q;if(c){const Bn=Math.min(je,Ie)/le;let Qt=Math.floor(Bn),ut=Bn%1;!ut&&Bn>=1&&(ut=1),ut===1&&Qt--,Qt=Math.min(Qt,c+1),!!(Qt%2)&&(y==="reverse"?(ut=1-ut,f&&(ut-=f/le)):y==="mirror"&&(nt=X)),Ze=no(0,1,ut)*le}const ge=ot?{done:!1,value:i[0]}:nt.next(Ze);Z&&(ge.value=Z(ge.value));let{done:_t}=ge;!ot&&me!==null&&(_t=O>=0?je>=Ie:je<=0);const ft=ee===null&&(G==="finished"||G==="running"&&_t);return E&&E(ge.value),ft&&Y(),ge},Me=()=>{R&&R.stop(),R=void 0},Oe=()=>{G="idle",Me(),P(),z(),U=re=null},Y=()=>{G="finished",b&&b(),Me(),P()},ve=()=>{if(D)return;R||(R=n(ue));const be=R.now();w&&w(),ee!==null?U=be-ee:(!U||G==="finished")&&(U=be),G==="finished"&&z(),re=U,ee=null,G="running",R.start()};e&&ve();const oe={then(be,Pe){return V.then(be,Pe)},get time(){return ls(je)},set time(be){be=zo(be),je=be,ee!==null||!R||O===0?ee=be:U=R.now()-be/O},get duration(){const be=Q.calculatedDuration===null?Bg(Q):Q.calculatedDuration;return ls(be)},get speed(){return O},set speed(be){be===O||!R||(O=be,oe.time=ls(je))},get state(){return G},play:ve,pause:()=>{G="paused",ee=je},stop:()=>{D=!0,G!=="idle"&&(G="idle",g&&g(),Oe())},cancel:()=>{re!==null&&ue(re),Oe()},complete:()=>{G="finished"},sample:be=>(U=0,ue(be))};return oe}function TN(e){let t;return()=>(t===void 0&&(t=e()),t)}const IN=TN(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),MN=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Cu=10,kN=2e4,RN=(e,t)=>t.type==="spring"||e==="backgroundColor"||!fw(t.ease);function ON(e,t,{onUpdate:n,onComplete:i,...l}){if(!(IN()&&MN.has(t)&&!l.repeatDelay&&l.repeatType!=="mirror"&&l.damping!==0&&l.type!=="inertia"))return!1;let f=!1,y,w,g=!1;const b=()=>{w=new Promise(I=>{y=I})};b();let{keyframes:E,duration:T=300,ease:O,times:D}=l;if(RN(t,l)){const I=Sd({...l,repeat:0,delay:0});let Z={done:!1,value:E[0]};const Q=[];let X=0;for(;!Z.done&&X<kN;)Z=I.sample(X),Q.push(Z.value),X+=Cu;D=void 0,E=Q,T=X-Cu,O="linear"}const P=VA(e.owner.current,t,E,{...l,duration:T,ease:O,times:D}),V=()=>{g=!1,P.cancel()},z=()=>{g=!0,Wt.update(V),y(),b()};return P.onfinish=()=>{g||(e.set(HA(E,l)),i&&i(),z())},{then(I,Z){return w.then(I,Z)},attachTimeline(I){return P.timeline=I,P.onfinish=null,pn},get time(){return ls(P.currentTime||0)},set time(I){P.currentTime=zo(I)},get speed(){return P.playbackRate},set speed(I){P.playbackRate=I},get duration(){return ls(T)},play:()=>{f||(P.play(),fs(V))},pause:()=>P.pause(),stop:()=>{if(f=!0,P.playState==="idle")return;const{currentTime:I}=P;if(I){const Z=Sd({...l,autoplay:!1});e.setWithVelocity(Z.sample(I-Cu).value,Z.sample(I).value,Cu)}z()},complete:()=>{g||P.finish()},cancel:z}}function PN({keyframes:e,delay:t,onUpdate:n,onComplete:i}){const l=()=>(n&&n(e[e.length-1]),i&&i(),{time:0,speed:1,duration:0,play:pn,pause:pn,stop:pn,then:c=>(c(),Promise.resolve()),cancel:pn,complete:pn});return t?Sd({keyframes:[0,1],duration:0,delay:t,onComplete:l}):l()}const LN={type:"spring",stiffness:500,damping:25,restSpeed:10},DN=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),BN={type:"keyframes",duration:.8},jN={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},FN=(e,{keyframes:t})=>t.length>2?BN:ta.has(e)?e.startsWith("scale")?DN(t[1]):LN:jN,M0=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ro.test(t)||t==="0")&&!t.startsWith("url(")),zN=new Set(["brightness","contrast","saturate","opacity"]);function UN(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(ih)||[];if(!i)return e;const l=n.replace(i,"");let c=zN.has(t)?1:0;return i!==n&&(c*=100),t+"("+c+l+")"}const VN=/([a-z-]*)\(.*?\)/g,k0={...ro,getAnimatableNone:e=>{const t=e.match(VN);return t?t.map(UN).join(" "):e}},HN={...Kv,color:cr,backgroundColor:cr,outlineColor:cr,fill:cr,stroke:cr,borderColor:cr,borderTopColor:cr,borderRightColor:cr,borderBottomColor:cr,borderLeftColor:cr,filter:k0,WebkitFilter:k0},mp=e=>HN[e];function Bw(e,t){let n=mp(e);return n!==k0&&(n=ro),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const jw=e=>/^0[^.\s]+$/.test(e);function WN(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||jw(e)}function ZN(e,t,n,i){const l=M0(t,n);let c;Array.isArray(n)?c=[...n]:c=[null,n];const f=i.from!==void 0?i.from:e.get();let y;const w=[];for(let g=0;g<c.length;g++)c[g]===null&&(c[g]=g===0?f:c[g-1]),WN(c[g])&&w.push(g),typeof c[g]=="string"&&c[g]!=="none"&&c[g]!=="0"&&(y=c[g]);if(l&&w.length&&y)for(let g=0;g<w.length;g++){const b=w[g];c[b]=Bw(t,y)}return c}function GN({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:l,repeat:c,repeatType:f,repeatDelay:y,from:w,elapsed:g,...b}){return!!Object.keys(b).length}function gp(e,t){return e[t]||e.default||e}const YN={skipAnimations:!1},xp=(e,t,n,i={})=>l=>{const c=gp(i,e)||{},f=c.delay||i.delay||0;let{elapsed:y=0}=i;y=y-zo(f);const w=ZN(t,e,n,c),g=w[0],b=w[w.length-1],E=M0(e,g),T=M0(e,b);let O={keyframes:w,velocity:t.getVelocity(),ease:"easeOut",...c,delay:-y,onUpdate:D=>{t.set(D),c.onUpdate&&c.onUpdate(D)},onComplete:()=>{l(),c.onComplete&&c.onComplete()}};if(GN(c)||(O={...O,...FN(e,O)}),O.duration&&(O.duration=zo(O.duration)),O.repeatDelay&&(O.repeatDelay=zo(O.repeatDelay)),!E||!T||UA.current||c.type===!1||YN.skipAnimations)return PN(O);if(!i.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const D=ON(t,e,O);if(D)return D}return Sd(O)};function Ed(e){return!!(Sr(e)&&e.add)}const Fw=e=>/^\-?\d*\.?\d+$/.test(e);function yp(e,t){e.indexOf(t)===-1&&e.push(t)}function vp(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class wp{constructor(){this.subscriptions=[]}add(t){return yp(this.subscriptions,t),()=>vp(this.subscriptions,t)}notify(t,n,i){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](t,n,i);else for(let c=0;c<l;c++){const f=this.subscriptions[c];f&&f(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const XN=e=>!isNaN(parseFloat(e));class qN{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,l=!0)=>{this.prev=this.current,this.current=i;const{delta:c,timestamp:f}=Qn;this.lastUpdated!==f&&(this.timeDelta=c,this.lastUpdated=f,Wt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),l&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Wt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=XN(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new wp);const i=this.events[t].add(n);return t==="change"?()=>{i(),Wt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,i){this.set(n),this.prev=t,this.timeDelta=i}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Pw(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ga(e,t){return new qN(e,t)}const zw=e=>t=>t.test(e),KN={test:e=>e==="auto",parse:e=>e},Uw=[na,$e,Fi,ks,rA,nA,KN],Ol=e=>Uw.find(zw(e)),QN=[...Uw,cr,ro],JN=e=>QN.find(zw(e));function $N(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ga(n))}function e4(e,t){const n=oh(e,t);let{transitionEnd:i={},transition:l={},...c}=n?e.makeTargetAnimatable(n,!1):{};c={...c,...i};for(const f in c){const y=xA(c[f]);$N(e,f,y)}}function t4(e,t,n){var i,l;const c=Object.keys(t).filter(y=>!e.hasValue(y)),f=c.length;if(f)for(let y=0;y<f;y++){const w=c[y],g=t[w];let b=null;Array.isArray(g)&&(b=g[0]),b===null&&(b=(l=(i=n[w])!==null&&i!==void 0?i:e.readValue(w))!==null&&l!==void 0?l:t[w]),b!=null&&(typeof b=="string"&&(Fw(b)||jw(b))?b=parseFloat(b):!JN(b)&&ro.test(g)&&(b=Bw(w,g)),e.addValue(w,Ga(b,{owner:e})),n[w]===void 0&&(n[w]=b),b!==null&&e.setBaseTarget(w,b))}}function n4(e,t){return t?(t[e]||t.default||t).from:void 0}function r4(e,t,n){const i={};for(const l in e){const c=n4(l,t);if(c!==void 0)i[l]=c;else{const f=n.getValue(l);f&&(i[l]=f.get())}}return i}function i4({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function s4(e,t){const n=e.get();if(Array.isArray(t)){for(let i=0;i<t.length;i++)if(t[i]!==n)return!0}else return n!==t}function Vw(e,t,{delay:n=0,transitionOverride:i,type:l}={}){let{transition:c=e.getDefaultTransition(),transitionEnd:f,...y}=e.makeTargetAnimatable(t);const w=e.getValue("willChange");i&&(c=i);const g=[],b=l&&e.animationState&&e.animationState.getState()[l];for(const E in y){const T=e.getValue(E),O=y[E];if(!T||O===void 0||b&&i4(b,E))continue;const D={delay:n,elapsed:0,...gp(c||{},E)};if(window.HandoffAppearAnimations){const z=e.getProps()[Hv];if(z){const R=window.HandoffAppearAnimations(z,E,T,Wt);R!==null&&(D.elapsed=R,D.isHandoff=!0)}}let P=!D.isHandoff&&!s4(T,O);if(D.type==="spring"&&(T.getVelocity()||D.velocity)&&(P=!1),T.animation&&(P=!1),P)continue;T.start(xp(E,T,O,e.shouldReduceMotion&&ta.has(E)?{type:!1}:D));const V=T.animation;Ed(w)&&(w.add(E),V.then(()=>w.remove(E))),g.push(V)}return f&&Promise.all(g).then(()=>{f&&e4(e,f)}),g}function R0(e,t,n={}){const i=oh(e,t,n.custom);let{transition:l=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(l=n.transitionOverride);const c=i?()=>Promise.all(Vw(e,i,n)):()=>Promise.resolve(),f=e.variantChildren&&e.variantChildren.size?(w=0)=>{const{delayChildren:g=0,staggerChildren:b,staggerDirection:E}=l;return o4(e,t,g+w,b,E,n)}:()=>Promise.resolve(),{when:y}=l;if(y){const[w,g]=y==="beforeChildren"?[c,f]:[f,c];return w().then(()=>g())}else return Promise.all([c(),f(n.delay)])}function o4(e,t,n=0,i=0,l=1,c){const f=[],y=(e.variantChildren.size-1)*i,w=l===1?(g=0)=>g*i:(g=0)=>y-g*i;return Array.from(e.variantChildren).sort(a4).forEach((g,b)=>{g.notify("AnimationStart",t),f.push(R0(g,t,{...c,delay:n+w(b)}).then(()=>g.notify("AnimationComplete",t)))}),Promise.all(f)}function a4(e,t){return e.sortNodePosition(t)}function l4(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const l=t.map(c=>R0(e,c,n));i=Promise.all(l)}else if(typeof t=="string")i=R0(e,t,n);else{const l=typeof t=="function"?oh(e,t,n.custom):t;i=Promise.all(Vw(e,l,n))}return i.then(()=>e.notify("AnimationComplete",t))}const c4=[...tp].reverse(),u4=tp.length;function d4(e){return t=>Promise.all(t.map(({animation:n,options:i})=>l4(e,n,i)))}function h4(e){let t=d4(e);const n=p4();let i=!0;const l=(w,g)=>{const b=oh(e,g);if(b){const{transition:E,transitionEnd:T,...O}=b;w={...w,...O,...T}}return w};function c(w){t=w(e)}function f(w,g){const b=e.getProps(),E=e.getVariantContext(!0)||{},T=[],O=new Set;let D={},P=1/0;for(let z=0;z<u4;z++){const R=c4[z],I=n[R],Z=b[R]!==void 0?b[R]:E[R],Q=Sc(Z),X=R===g?I.isActive:null;X===!1&&(P=z);let G=Z===E[R]&&Z!==b[R]&&Q;if(G&&i&&e.manuallyAnimateOnMount&&(G=!1),I.protectedKeys={...D},!I.isActive&&X===null||!Z&&!I.prevProp||nh(Z)||typeof Z=="boolean")continue;let U=f4(I.prevProp,Z)||R===g&&I.isActive&&!G&&Q||z>P&&Q,re=!1;const me=Array.isArray(Z)?Z:[Z];let le=me.reduce(l,{});X===!1&&(le={});const{prevResolvedValues:Ie={}}=I,je={...Ie,...le},ue=Me=>{U=!0,O.has(Me)&&(re=!0,O.delete(Me)),I.needsAnimating[Me]=!0};for(const Me in je){const Oe=le[Me],Y=Ie[Me];if(D.hasOwnProperty(Me))continue;let ve=!1;_d(Oe)&&_d(Y)?ve=!dw(Oe,Y):ve=Oe!==Y,ve?Oe!==void 0?ue(Me):O.add(Me):Oe!==void 0&&O.has(Me)?ue(Me):I.protectedKeys[Me]=!0}I.prevProp=Z,I.prevResolvedValues=le,I.isActive&&(D={...D,...le}),i&&e.blockInitialAnimation&&(U=!1),U&&(!G||re)&&T.push(...me.map(Me=>({animation:Me,options:{type:R,...w}})))}if(O.size){const z={};O.forEach(R=>{const I=e.getBaseTarget(R);I!==void 0&&(z[R]=I)}),T.push({animation:z})}let V=!!T.length;return i&&(b.initial===!1||b.initial===b.animate)&&!e.manuallyAnimateOnMount&&(V=!1),i=!1,V?t(T):Promise.resolve()}function y(w,g,b){var E;if(n[w].isActive===g)return Promise.resolve();(E=e.variantChildren)===null||E===void 0||E.forEach(O=>{var D;return(D=O.animationState)===null||D===void 0?void 0:D.setActive(w,g)}),n[w].isActive=g;const T=f(b,w);for(const O in n)n[O].protectedKeys={};return T}return{animateChanges:f,setActive:y,setAnimateFunction:c,getState:()=>n}}function f4(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!dw(t,e):!1}function So(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function p4(){return{animate:So(!0),whileInView:So(),whileHover:So(),whileTap:So(),whileDrag:So(),whileFocus:So(),exit:So()}}class m4 extends uo{constructor(t){super(t),t.animationState||(t.animationState=h4(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),nh(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let g4=0;class x4 extends uo{constructor(){super(...arguments),this.id=g4++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:l}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===l)return;const c=this.node.animationState.setActive("exit",!t,{custom:i??this.node.getProps().custom});n&&!t&&c.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const y4={animation:{Feature:m4},exit:{Feature:x4}},jg=(e,t)=>Math.abs(e-t);function v4(e,t){const n=jg(e.x,t.x),i=jg(e.y,t.y);return Math.sqrt(n**2+i**2)}class Hw{constructor(t,n,{transformPagePoint:i,contextWindow:l,dragSnapToOrigin:c=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=pf(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,O=v4(E.offset,{x:0,y:0})>=3;if(!T&&!O)return;const{point:D}=E,{timestamp:P}=Qn;this.history.push({...D,timestamp:P});const{onStart:V,onMove:z}=this.handlers;T||(V&&V(this.lastMoveEvent,E),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,E)},this.handlePointerMove=(E,T)=>{this.lastMoveEvent=E,this.lastMoveEventInfo=ff(T,this.transformPagePoint),Wt.update(this.updatePoint,!0)},this.handlePointerUp=(E,T)=>{this.end();const{onEnd:O,onSessionEnd:D,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const V=pf(E.type==="pointercancel"?this.lastMoveEventInfo:ff(T,this.transformPagePoint),this.history);this.startEvent&&O&&O(E,V),D&&D(E,V)},!ow(t))return;this.dragSnapToOrigin=c,this.handlers=n,this.transformPagePoint=i,this.contextWindow=l||window;const f=sh(t),y=ff(f,this.transformPagePoint),{point:w}=y,{timestamp:g}=Qn;this.history=[{...w,timestamp:g}];const{onSessionStart:b}=n;b&&b(t,pf(y,this.history)),this.removeListeners=Ks(as(this.contextWindow,"pointermove",this.handlePointerMove),as(this.contextWindow,"pointerup",this.handlePointerUp),as(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),fs(this.updatePoint)}}function ff(e,t){return t?{point:t(e.point)}:e}function Fg(e,t){return{x:e.x-t.x,y:e.y-t.y}}function pf({point:e},t){return{point:e,delta:Fg(e,Ww(t)),offset:Fg(e,w4(t)),velocity:_4(t,.1)}}function w4(e){return e[0]}function Ww(e){return e[e.length-1]}function _4(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const l=Ww(e);for(;n>=0&&(i=e[n],!(l.timestamp-i.timestamp>zo(t)));)n--;if(!i)return{x:0,y:0};const c=ls(l.timestamp-i.timestamp);if(c===0)return{x:0,y:0};const f={x:(l.x-i.x)/c,y:(l.y-i.y)/c};return f.x===1/0&&(f.x=0),f.y===1/0&&(f.y=0),f}function Fr(e){return e.max-e.min}function O0(e,t=0,n=.01){return Math.abs(e-t)<=n}function zg(e,t,n,i=.5){e.origin=i,e.originPoint=sn(t.min,t.max,e.origin),e.scale=Fr(n)/Fr(t),(O0(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=sn(n.min,n.max,e.origin)-e.originPoint,(O0(e.translate)||isNaN(e.translate))&&(e.translate=0)}function tc(e,t,n,i){zg(e.x,t.x,n.x,i?i.originX:void 0),zg(e.y,t.y,n.y,i?i.originY:void 0)}function Ug(e,t,n){e.min=n.min+t.min,e.max=e.min+Fr(t)}function b4(e,t,n){Ug(e.x,t.x,n.x),Ug(e.y,t.y,n.y)}function Vg(e,t,n){e.min=t.min-n.min,e.max=e.min+Fr(t)}function nc(e,t,n){Vg(e.x,t.x,n.x),Vg(e.y,t.y,n.y)}function C4(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?sn(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?sn(n,e,i.max):Math.min(e,n)),e}function Hg(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function S4(e,{top:t,left:n,bottom:i,right:l}){return{x:Hg(e.x,n,l),y:Hg(e.y,t,i)}}function Wg(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function E4(e,t){return{x:Wg(e.x,t.x),y:Wg(e.y,t.y)}}function A4(e,t){let n=.5;const i=Fr(e),l=Fr(t);return l>i?n=Ac(t.min,t.max-i,e.min):i>l&&(n=Ac(e.min,e.max-l,t.min)),no(0,1,n)}function N4(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const P0=.35;function T4(e=P0){return e===!1?e=0:e===!0&&(e=P0),{x:Zg(e,"left","right"),y:Zg(e,"top","bottom")}}function Zg(e,t,n){return{min:Gg(e,t),max:Gg(e,n)}}function Gg(e,t){return typeof e=="number"?e:e[t]||0}const Yg=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ia=()=>({x:Yg(),y:Yg()}),Xg=()=>({min:0,max:0}),vn=()=>({x:Xg(),y:Xg()});function ei(e){return[e("x"),e("y")]}function Zw({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function I4({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function M4(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function mf(e){return e===void 0||e===1}function L0({scale:e,scaleX:t,scaleY:n}){return!mf(e)||!mf(t)||!mf(n)}function To(e){return L0(e)||Gw(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Gw(e){return qg(e.x)||qg(e.y)}function qg(e){return e&&e!=="0%"}function Ad(e,t,n){const i=e-n,l=t*i;return n+l}function Kg(e,t,n,i,l){return l!==void 0&&(e=Ad(e,l,i)),Ad(e,n,i)+t}function D0(e,t=0,n=1,i,l){e.min=Kg(e.min,t,n,i,l),e.max=Kg(e.max,t,n,i,l)}function Yw(e,{x:t,y:n}){D0(e.x,t.translate,t.scale,t.originPoint),D0(e.y,n.translate,n.scale,n.originPoint)}function k4(e,t,n,i=!1){const l=n.length;if(!l)return;t.x=t.y=1;let c,f;for(let y=0;y<l;y++){c=n[y],f=c.projectionDelta;const w=c.instance;w&&w.style&&w.style.display==="contents"||(i&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Ma(e,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),f&&(t.x*=f.x.scale,t.y*=f.y.scale,Yw(e,f)),i&&To(c.latestValues)&&Ma(e,c.latestValues))}t.x=Qg(t.x),t.y=Qg(t.y)}function Qg(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Ps(e,t){e.min=e.min+t,e.max=e.max+t}function Jg(e,t,[n,i,l]){const c=t[l]!==void 0?t[l]:.5,f=sn(e.min,e.max,c);D0(e,t[n],t[i],f,t.scale)}const R4=["x","scaleX","originX"],O4=["y","scaleY","originY"];function Ma(e,t){Jg(e.x,t,R4),Jg(e.y,t,O4)}function Xw(e,t){return Zw(M4(e.getBoundingClientRect(),t))}function P4(e,t,n){const i=Xw(e,n),{scroll:l}=t;return l&&(Ps(i.x,l.offset.x),Ps(i.y,l.offset.y)),i}const qw=({current:e})=>e?e.ownerDocument.defaultView:null,L4=new WeakMap;class D4{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=vn(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const l=b=>{const{dragSnapToOrigin:E}=this.getProps();E?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(sh(b,"page").point)},c=(b,E)=>{const{drag:T,dragPropagation:O,onDragStart:D}=this.getProps();if(T&&!O&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=lw(T),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ei(V=>{let z=this.getAxisMotionValue(V).get()||0;if(Fi.test(z)){const{projection:R}=this.visualElement;if(R&&R.layout){const I=R.layout.layoutBox[V];I&&(z=Fr(I)*(parseFloat(z)/100))}}this.originPoint[V]=z}),D&&Wt.update(()=>D(b,E),!1,!0);const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},f=(b,E)=>{const{dragPropagation:T,dragDirectionLock:O,onDirectionLock:D,onDrag:P}=this.getProps();if(!T&&!this.openGlobalLock)return;const{offset:V}=E;if(O&&this.currentDirection===null){this.currentDirection=B4(V),this.currentDirection!==null&&D&&D(this.currentDirection);return}this.updateAxis("x",E.point,V),this.updateAxis("y",E.point,V),this.visualElement.render(),P&&P(b,E)},y=(b,E)=>this.stop(b,E),w=()=>ei(b=>{var E;return this.getAnimationState(b)==="paused"&&((E=this.getAxisMotionValue(b).animation)===null||E===void 0?void 0:E.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new Hw(t,{onSessionStart:l,onStart:c,onMove:f,onSessionEnd:y,resumeAnimation:w},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,contextWindow:qw(this.visualElement)})}stop(t,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:l}=n;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&Wt.update(()=>c(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:l}=this.getProps();if(!i||!Su(t,l,this.currentDirection))return;const c=this.getAxisMotionValue(t);let f=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(f=C4(f,this.constraints[t],this.elastic[t])),c.set(f)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:i}=this.getProps(),l=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,c=this.constraints;n&&Na(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&l?this.constraints=S4(l.layoutBox,n):this.constraints=!1,this.elastic=T4(i),c!==this.constraints&&l&&this.constraints&&!this.hasMutatedConstraints&&ei(f=>{this.getAxisMotionValue(f)&&(this.constraints[f]=N4(l.layoutBox[f],this.constraints[f]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Na(t))return!1;const i=t.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const c=P4(i,l.root,this.visualElement.getTransformPagePoint());let f=E4(l.layout.layoutBox,c);if(n){const y=n(I4(f));this.hasMutatedConstraints=!!y,y&&(f=Zw(y))}return f}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:l,dragTransition:c,dragSnapToOrigin:f,onDragTransitionEnd:y}=this.getProps(),w=this.constraints||{},g=ei(b=>{if(!Su(b,n,this.currentDirection))return;let E=w&&w[b]||{};f&&(E={min:0,max:0});const T=l?200:1e6,O=l?40:1e7,D={type:"inertia",velocity:i?t[b]:0,bounceStiffness:T,bounceDamping:O,timeConstant:750,restDelta:1,restSpeed:10,...c,...E};return this.startAxisValueAnimation(b,D)});return Promise.all(g).then(y)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return i.start(xp(t,i,0,n))}stopAnimation(){ei(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ei(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),i=this.visualElement.getProps(),l=i[n];return l||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){ei(n=>{const{drag:i}=this.getProps();if(!Su(n,i,this.currentDirection))return;const{projection:l}=this.visualElement,c=this.getAxisMotionValue(n);if(l&&l.layout){const{min:f,max:y}=l.layout.layoutBox[n];c.set(t[n]-sn(f,y,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Na(n)||!i||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};ei(f=>{const y=this.getAxisMotionValue(f);if(y){const w=y.get();l[f]=A4({min:w,max:w},this.constraints[f])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),ei(f=>{if(!Su(f,t,null))return;const y=this.getAxisMotionValue(f),{min:w,max:g}=this.constraints[f];y.set(sn(w,g,l[f]))})}addListeners(){if(!this.visualElement.current)return;L4.set(this.visualElement,this);const t=this.visualElement.current,n=as(t,"pointerdown",w=>{const{drag:g,dragListener:b=!0}=this.getProps();g&&b&&this.start(w)}),i=()=>{const{dragConstraints:w}=this.getProps();Na(w)&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,c=l.addEventListener("measure",i);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),i();const f=rs(window,"resize",()=>this.scalePositionWithinConstraints()),y=l.addEventListener("didUpdate",({delta:w,hasLayoutChanged:g})=>{this.isDragging&&g&&(ei(b=>{const E=this.getAxisMotionValue(b);E&&(this.originPoint[b]+=w[b].translate,E.set(E.get()+w[b].translate))}),this.visualElement.render())});return()=>{f(),n(),c(),y&&y()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:l=!1,dragConstraints:c=!1,dragElastic:f=P0,dragMomentum:y=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:l,dragConstraints:c,dragElastic:f,dragMomentum:y}}}function Su(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function B4(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class j4 extends uo{constructor(t){super(t),this.removeGroupControls=pn,this.removeListeners=pn,this.controls=new D4(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pn}unmount(){this.removeGroupControls(),this.removeListeners()}}const $g=e=>(t,n)=>{e&&Wt.update(()=>e(t,n))};class F4 extends uo{constructor(){super(...arguments),this.removePointerDownListener=pn}onPointerDown(t){this.session=new Hw(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:qw(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:l}=this.node.getProps();return{onSessionStart:$g(t),onStart:$g(n),onMove:i,onEnd:(c,f)=>{delete this.session,l&&Wt.update(()=>l(c,f))}}}mount(){this.removePointerDownListener=as(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function z4(){const e=F.useContext(eh);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,l=F.useId();return F.useEffect(()=>i(l),[]),!t&&n?[!1,()=>n&&n(l)]:[!0]}const Hu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ex(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Pl={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if($e.test(e))e=parseFloat(e);else return e;const n=ex(e,t.target.x),i=ex(e,t.target.y);return`${n}% ${i}%`}},U4={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,l=ro.parse(e);if(l.length>5)return i;const c=ro.createTransformer(e),f=typeof l[0]!="number"?1:0,y=n.x.scale*t.x,w=n.y.scale*t.y;l[0+f]/=y,l[1+f]/=w;const g=sn(y,w,.5);return typeof l[2+f]=="number"&&(l[2+f]/=g),typeof l[3+f]=="number"&&(l[3+f]/=g),c(l)}};class V4 extends Ho.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:l}=this.props,{projection:c}=t;qE(H4),c&&(n.group&&n.group.add(c),i&&i.register&&l&&i.register(c),c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),Hu.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:l,isPresent:c}=this.props,f=i.projection;return f&&(f.isPresent=c,l||t.layoutDependency!==n||n===void 0?f.willUpdate():this.safeToRemove(),t.isPresent!==c&&(c?f.promote():f.relegate()||Wt.postRender(()=>{const y=f.getStack();(!y||!y.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:l}=t;l&&(l.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(l),i&&i.deregister&&i.deregister(l))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Kw(e){const[t,n]=z4(),i=F.useContext(rp);return Ho.createElement(V4,{...e,layoutGroup:i,switchLayoutGroup:F.useContext(Zv),isPresent:t,safeToRemove:n})}const H4={borderRadius:{...Pl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Pl,borderTopRightRadius:Pl,borderBottomLeftRadius:Pl,borderBottomRightRadius:Pl,boxShadow:U4},Qw=["TopLeft","TopRight","BottomLeft","BottomRight"],W4=Qw.length,tx=e=>typeof e=="string"?parseFloat(e):e,nx=e=>typeof e=="number"||$e.test(e);function Z4(e,t,n,i,l,c){l?(e.opacity=sn(0,n.opacity!==void 0?n.opacity:1,G4(i)),e.opacityExit=sn(t.opacity!==void 0?t.opacity:1,0,Y4(i))):c&&(e.opacity=sn(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let f=0;f<W4;f++){const y=`border${Qw[f]}Radius`;let w=rx(t,y),g=rx(n,y);if(w===void 0&&g===void 0)continue;w||(w=0),g||(g=0),w===0||g===0||nx(w)===nx(g)?(e[y]=Math.max(sn(tx(w),tx(g),i),0),(Fi.test(g)||Fi.test(w))&&(e[y]+="%")):e[y]=g}(t.rotate||n.rotate)&&(e.rotate=sn(t.rotate||0,n.rotate||0,i))}function rx(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const G4=Jw(0,.5,ww),Y4=Jw(.5,.95,pn);function Jw(e,t,n){return i=>i<e?0:i>t?1:n(Ac(e,t,i))}function ix(e,t){e.min=t.min,e.max=t.max}function Jr(e,t){ix(e.x,t.x),ix(e.y,t.y)}function sx(e,t,n,i,l){return e-=t,e=Ad(e,1/n,i),l!==void 0&&(e=Ad(e,1/l,i)),e}function X4(e,t=0,n=1,i=.5,l,c=e,f=e){if(Fi.test(t)&&(t=parseFloat(t),t=sn(f.min,f.max,t/100)-f.min),typeof t!="number")return;let y=sn(c.min,c.max,i);e===c&&(y-=t),e.min=sx(e.min,t,n,y,l),e.max=sx(e.max,t,n,y,l)}function ox(e,t,[n,i,l],c,f){X4(e,t[n],t[i],t[l],t.scale,c,f)}const q4=["x","scaleX","originX"],K4=["y","scaleY","originY"];function ax(e,t,n,i){ox(e.x,t,q4,n?n.x:void 0,i?i.x:void 0),ox(e.y,t,K4,n?n.y:void 0,i?i.y:void 0)}function lx(e){return e.translate===0&&e.scale===1}function $w(e){return lx(e.x)&&lx(e.y)}function Q4(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function e_(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function cx(e){return Fr(e.x)/Fr(e.y)}class J4{constructor(){this.members=[]}add(t){yp(this.members,t),t.scheduleRender()}remove(t){if(vp(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(l=>t===l);if(n===0)return!1;let i;for(let l=n;l>=0;l--){const c=this.members[l];if(c.isPresent!==!1){i=c;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:l}=t.options;l===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ux(e,t,n){let i="";const l=e.x.translate/t.x,c=e.y.translate/t.y;if((l||c)&&(i=`translate3d(${l}px, ${c}px, 0) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:w,rotateX:g,rotateY:b}=n;w&&(i+=`rotate(${w}deg) `),g&&(i+=`rotateX(${g}deg) `),b&&(i+=`rotateY(${b}deg) `)}const f=e.x.scale*t.x,y=e.y.scale*t.y;return(f!==1||y!==1)&&(i+=`scale(${f}, ${y})`),i||"none"}const $4=(e,t)=>e.depth-t.depth;class eT{constructor(){this.children=[],this.isDirty=!1}add(t){yp(this.children,t),this.isDirty=!0}remove(t){vp(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort($4),this.isDirty=!1,this.children.forEach(t)}}function tT(e,t){const n=performance.now(),i=({timestamp:l})=>{const c=l-n;c>=t&&(fs(i),e(c-t))};return Wt.read(i,!0),()=>fs(i)}function nT(e){window.MotionDebug&&window.MotionDebug.record(e)}function rT(e){return e instanceof SVGElement&&e.tagName!=="svg"}function iT(e,t,n){const i=Sr(e)?e:Ga(e);return i.start(xp("",i,t,n)),i.animation}const dx=["","X","Y","Z"],sT={visibility:"hidden"},hx=1e3;let oT=0;const Io={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function t_({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:l}){return class{constructor(f={},y=t==null?void 0:t()){this.id=oT++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Io.totalNodes=Io.resolvedTargetDeltas=Io.recalculatedProjection=0,this.nodes.forEach(cT),this.nodes.forEach(pT),this.nodes.forEach(mT),this.nodes.forEach(uT),nT(Io)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=f,this.root=y?y.root||y:this,this.path=y?[...y.path,y]:[],this.parent=y,this.depth=y?y.depth+1:0;for(let w=0;w<this.path.length;w++)this.path[w].shouldResetTransform=!0;this.root===this&&(this.nodes=new eT)}addEventListener(f,y){return this.eventHandlers.has(f)||this.eventHandlers.set(f,new wp),this.eventHandlers.get(f).add(y)}notifyListeners(f,...y){const w=this.eventHandlers.get(f);w&&w.notify(...y)}hasListeners(f){return this.eventHandlers.has(f)}mount(f,y=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=rT(f),this.instance=f;const{layoutId:w,layout:g,visualElement:b}=this.options;if(b&&!b.current&&b.mount(f),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),y&&(g||w)&&(this.isLayoutDirty=!0),e){let E;const T=()=>this.root.updateBlockedByResize=!1;e(f,()=>{this.root.updateBlockedByResize=!0,E&&E(),E=tT(T,250),Hu.hasAnimatedSinceResize&&(Hu.hasAnimatedSinceResize=!1,this.nodes.forEach(px))})}w&&this.root.registerSharedNode(w,this),this.options.animate!==!1&&b&&(w||g)&&this.addEventListener("didUpdate",({delta:E,hasLayoutChanged:T,hasRelativeTargetChanged:O,layout:D})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const P=this.options.transition||b.getDefaultTransition()||wT,{onLayoutAnimationStart:V,onLayoutAnimationComplete:z}=b.getProps(),R=!this.targetLayout||!e_(this.targetLayout,D)||O,I=!T&&O;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||I||T&&(R||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(E,I);const Z={...gp(P,"layout"),onPlay:V,onComplete:z};(b.shouldReduceMotion||this.options.layoutRoot)&&(Z.delay=0,Z.type=!1),this.startAnimation(Z)}else T||px(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=D})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const f=this.getStack();f&&f.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,fs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(gT),this.animationId++)}getTransformTemplate(){const{visualElement:f}=this.options;return f&&f.getProps().transformTemplate}willUpdate(f=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let b=0;b<this.path.length;b++){const E=this.path[b];E.shouldResetTransform=!0,E.updateScroll("snapshot"),E.options.layoutRoot&&E.willUpdate(!1)}const{layoutId:y,layout:w}=this.options;if(y===void 0&&!w)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),f&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(fx);return}this.isUpdating||this.nodes.forEach(hT),this.isUpdating=!1,this.nodes.forEach(fT),this.nodes.forEach(aT),this.nodes.forEach(lT),this.clearAllSnapshots();const y=performance.now();Qn.delta=no(0,1e3/60,y-Qn.timestamp),Qn.timestamp=y,Qn.isProcessing=!0,sf.update.process(Qn),sf.preRender.process(Qn),sf.render.process(Qn),Qn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(dT),this.sharedNodes.forEach(xT)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Wt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Wt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let w=0;w<this.path.length;w++)this.path[w].updateScroll();const f=this.layout;this.layout=this.measure(!1),this.layoutCorrected=vn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:y}=this.options;y&&y.notify("LayoutMeasure",this.layout.layoutBox,f?f.layoutBox:void 0)}updateScroll(f="measure"){let y=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===f&&(y=!1),y&&(this.scroll={animationId:this.root.animationId,phase:f,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!l)return;const f=this.isLayoutDirty||this.shouldResetTransform,y=this.projectionDelta&&!$w(this.projectionDelta),w=this.getTransformTemplate(),g=w?w(this.latestValues,""):void 0,b=g!==this.prevTransformTemplateValue;f&&(y||To(this.latestValues)||b)&&(l(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(f=!0){const y=this.measurePageBox();let w=this.removeElementScroll(y);return f&&(w=this.removeTransform(w)),_T(w),{animationId:this.root.animationId,measuredBox:y,layoutBox:w,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:f}=this.options;if(!f)return vn();const y=f.measureViewportBox(),{scroll:w}=this.root;return w&&(Ps(y.x,w.offset.x),Ps(y.y,w.offset.y)),y}removeElementScroll(f){const y=vn();Jr(y,f);for(let w=0;w<this.path.length;w++){const g=this.path[w],{scroll:b,options:E}=g;if(g!==this.root&&b&&E.layoutScroll){if(b.isRoot){Jr(y,f);const{scroll:T}=this.root;T&&(Ps(y.x,-T.offset.x),Ps(y.y,-T.offset.y))}Ps(y.x,b.offset.x),Ps(y.y,b.offset.y)}}return y}applyTransform(f,y=!1){const w=vn();Jr(w,f);for(let g=0;g<this.path.length;g++){const b=this.path[g];!y&&b.options.layoutScroll&&b.scroll&&b!==b.root&&Ma(w,{x:-b.scroll.offset.x,y:-b.scroll.offset.y}),To(b.latestValues)&&Ma(w,b.latestValues)}return To(this.latestValues)&&Ma(w,this.latestValues),w}removeTransform(f){const y=vn();Jr(y,f);for(let w=0;w<this.path.length;w++){const g=this.path[w];if(!g.instance||!To(g.latestValues))continue;L0(g.latestValues)&&g.updateSnapshot();const b=vn(),E=g.measurePageBox();Jr(b,E),ax(y,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,b)}return To(this.latestValues)&&ax(y,this.latestValues),y}setTargetDelta(f){this.targetDelta=f,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(f){this.options={...this.options,...f,crossfade:f.crossfade!==void 0?f.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Qn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(f=!1){var y;const w=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=w.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=w.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=w.isSharedProjectionDirty);const g=!!this.resumingFrom||this!==w;if(!(f||g&&this.isSharedProjectionDirty||this.isProjectionDirty||!((y=this.parent)===null||y===void 0)&&y.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:E,layoutId:T}=this.options;if(!(!this.layout||!(E||T))){if(this.resolvedRelativeTargetAt=Qn.timestamp,!this.targetDelta&&!this.relativeTarget){const O=this.getClosestProjectingParent();O&&O.layout&&this.animationProgress!==1?(this.relativeParent=O,this.forceRelativeParentToResolveTarget(),this.relativeTarget=vn(),this.relativeTargetOrigin=vn(),nc(this.relativeTargetOrigin,this.layout.layoutBox,O.layout.layoutBox),Jr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=vn(),this.targetWithTransforms=vn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),b4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Jr(this.target,this.layout.layoutBox),Yw(this.target,this.targetDelta)):Jr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const O=this.getClosestProjectingParent();O&&!!O.resumingFrom==!!this.resumingFrom&&!O.options.layoutScroll&&O.target&&this.animationProgress!==1?(this.relativeParent=O,this.forceRelativeParentToResolveTarget(),this.relativeTarget=vn(),this.relativeTargetOrigin=vn(),nc(this.relativeTargetOrigin,this.target,O.target),Jr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Io.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||L0(this.parent.latestValues)||Gw(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var f;const y=this.getLead(),w=!!this.resumingFrom||this!==y;let g=!0;if((this.isProjectionDirty||!((f=this.parent)===null||f===void 0)&&f.isProjectionDirty)&&(g=!1),w&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(g=!1),this.resolvedRelativeTargetAt===Qn.timestamp&&(g=!1),g)return;const{layout:b,layoutId:E}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(b||E))return;Jr(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,O=this.treeScale.y;k4(this.layoutCorrected,this.treeScale,this.path,w),y.layout&&!y.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(y.target=y.layout.layoutBox);const{target:D}=y;if(!D){this.projectionTransform&&(this.projectionDelta=Ia(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ia(),this.projectionDeltaWithTransform=Ia());const P=this.projectionTransform;tc(this.projectionDelta,this.layoutCorrected,D,this.latestValues),this.projectionTransform=ux(this.projectionDelta,this.treeScale),(this.projectionTransform!==P||this.treeScale.x!==T||this.treeScale.y!==O)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",D)),Io.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(f=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),f){const y=this.getStack();y&&y.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(f,y=!1){const w=this.snapshot,g=w?w.latestValues:{},b={...this.latestValues},E=Ia();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!y;const T=vn(),O=w?w.source:void 0,D=this.layout?this.layout.source:void 0,P=O!==D,V=this.getStack(),z=!V||V.members.length<=1,R=!!(P&&!z&&this.options.crossfade===!0&&!this.path.some(vT));this.animationProgress=0;let I;this.mixTargetDelta=Z=>{const Q=Z/1e3;mx(E.x,f.x,Q),mx(E.y,f.y,Q),this.setTargetDelta(E),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(nc(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),yT(this.relativeTarget,this.relativeTargetOrigin,T,Q),I&&Q4(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=vn()),Jr(I,this.relativeTarget)),P&&(this.animationValues=b,Z4(b,g,this.latestValues,Q,R,z)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(f){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(fs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Wt.update(()=>{Hu.hasAnimatedSinceResize=!0,this.currentAnimation=iT(0,hx,{...f,onUpdate:y=>{this.mixTargetDelta(y),f.onUpdate&&f.onUpdate(y)},onComplete:()=>{f.onComplete&&f.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const f=this.getStack();f&&f.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(hx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const f=this.getLead();let{targetWithTransforms:y,target:w,layout:g,latestValues:b}=f;if(!(!y||!w||!g)){if(this!==f&&this.layout&&g&&n_(this.options.animationType,this.layout.layoutBox,g.layoutBox)){w=this.target||vn();const E=Fr(this.layout.layoutBox.x);w.x.min=f.target.x.min,w.x.max=w.x.min+E;const T=Fr(this.layout.layoutBox.y);w.y.min=f.target.y.min,w.y.max=w.y.min+T}Jr(y,w),Ma(y,b),tc(this.projectionDeltaWithTransform,this.layoutCorrected,y,b)}}registerSharedNode(f,y){this.sharedNodes.has(f)||this.sharedNodes.set(f,new J4),this.sharedNodes.get(f).add(y);const g=y.options.initialPromotionConfig;y.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(y):void 0})}isLead(){const f=this.getStack();return f?f.lead===this:!0}getLead(){var f;const{layoutId:y}=this.options;return y?((f=this.getStack())===null||f===void 0?void 0:f.lead)||this:this}getPrevLead(){var f;const{layoutId:y}=this.options;return y?(f=this.getStack())===null||f===void 0?void 0:f.prevLead:void 0}getStack(){const{layoutId:f}=this.options;if(f)return this.root.sharedNodes.get(f)}promote({needsReset:f,transition:y,preserveFollowOpacity:w}={}){const g=this.getStack();g&&g.promote(this,w),f&&(this.projectionDelta=void 0,this.needsReset=!0),y&&this.setOptions({transition:y})}relegate(){const f=this.getStack();return f?f.relegate(this):!1}resetRotation(){const{visualElement:f}=this.options;if(!f)return;let y=!1;const{latestValues:w}=f;if((w.rotate||w.rotateX||w.rotateY||w.rotateZ)&&(y=!0),!y)return;const g={};for(let b=0;b<dx.length;b++){const E="rotate"+dx[b];w[E]&&(g[E]=w[E],f.setStaticValue(E,0))}f.render();for(const b in g)f.setStaticValue(b,g[b]);f.scheduleRender()}getProjectionStyles(f){var y,w;if(!this.instance||this.isSVG)return;if(!this.isVisible)return sT;const g={visibility:""},b=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,g.opacity="",g.pointerEvents=Vu(f==null?void 0:f.pointerEvents)||"",g.transform=b?b(this.latestValues,""):"none",g;const E=this.getLead();if(!this.projectionDelta||!this.layout||!E.target){const P={};return this.options.layoutId&&(P.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,P.pointerEvents=Vu(f==null?void 0:f.pointerEvents)||""),this.hasProjected&&!To(this.latestValues)&&(P.transform=b?b({},""):"none",this.hasProjected=!1),P}const T=E.animationValues||E.latestValues;this.applyTransformsToTarget(),g.transform=ux(this.projectionDeltaWithTransform,this.treeScale,T),b&&(g.transform=b(T,g.transform));const{x:O,y:D}=this.projectionDelta;g.transformOrigin=`${O.origin*100}% ${D.origin*100}% 0`,E.animationValues?g.opacity=E===this?(w=(y=T.opacity)!==null&&y!==void 0?y:this.latestValues.opacity)!==null&&w!==void 0?w:1:this.preserveOpacity?this.latestValues.opacity:T.opacityExit:g.opacity=E===this?T.opacity!==void 0?T.opacity:"":T.opacityExit!==void 0?T.opacityExit:0;for(const P in vd){if(T[P]===void 0)continue;const{correct:V,applyTo:z}=vd[P],R=g.transform==="none"?T[P]:V(T[P],E);if(z){const I=z.length;for(let Z=0;Z<I;Z++)g[z[Z]]=R}else g[P]=R}return this.options.layoutId&&(g.pointerEvents=E===this?Vu(f==null?void 0:f.pointerEvents)||"":"none"),g}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(f=>{var y;return(y=f.currentAnimation)===null||y===void 0?void 0:y.stop()}),this.root.nodes.forEach(fx),this.root.sharedNodes.clear()}}}function aT(e){e.updateLayout()}function lT(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:l}=e.layout,{animationType:c}=e.options,f=n.source!==e.layout.source;c==="size"?ei(E=>{const T=f?n.measuredBox[E]:n.layoutBox[E],O=Fr(T);T.min=i[E].min,T.max=T.min+O}):n_(c,n.layoutBox,i)&&ei(E=>{const T=f?n.measuredBox[E]:n.layoutBox[E],O=Fr(i[E]);T.max=T.min+O,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[E].max=e.relativeTarget[E].min+O)});const y=Ia();tc(y,i,n.layoutBox);const w=Ia();f?tc(w,e.applyTransform(l,!0),n.measuredBox):tc(w,i,n.layoutBox);const g=!$w(y);let b=!1;if(!e.resumeFrom){const E=e.getClosestProjectingParent();if(E&&!E.resumeFrom){const{snapshot:T,layout:O}=E;if(T&&O){const D=vn();nc(D,n.layoutBox,T.layoutBox);const P=vn();nc(P,i,O.layoutBox),e_(D,P)||(b=!0),E.options.layoutRoot&&(e.relativeTarget=P,e.relativeTargetOrigin=D,e.relativeParent=E)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:w,layoutDelta:y,hasLayoutChanged:g,hasRelativeTargetChanged:b})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function cT(e){Io.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function uT(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function dT(e){e.clearSnapshot()}function fx(e){e.clearMeasurements()}function hT(e){e.isLayoutDirty=!1}function fT(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function px(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function pT(e){e.resolveTargetDelta()}function mT(e){e.calcProjection()}function gT(e){e.resetRotation()}function xT(e){e.removeLeadSnapshot()}function mx(e,t,n){e.translate=sn(t.translate,0,n),e.scale=sn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function gx(e,t,n,i){e.min=sn(t.min,n.min,i),e.max=sn(t.max,n.max,i)}function yT(e,t,n,i){gx(e.x,t.x,n.x,i),gx(e.y,t.y,n.y,i)}function vT(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const wT={duration:.45,ease:[.4,0,.1,1]},xx=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),yx=xx("applewebkit/")&&!xx("chrome/")?Math.round:pn;function vx(e){e.min=yx(e.min),e.max=yx(e.max)}function _T(e){vx(e.x),vx(e.y)}function n_(e,t,n){return e==="position"||e==="preserve-aspect"&&!O0(cx(t),cx(n),.2)}const bT=t_({attachResizeListener:(e,t)=>rs(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),gf={current:void 0},r_=t_({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!gf.current){const e=new bT({});e.mount(window),e.setOptions({layoutScroll:!0}),gf.current=e}return gf.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),CT={pan:{Feature:F4},drag:{Feature:j4,ProjectionNode:r_,MeasureLayout:Kw}},ST=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function ET(e){const t=ST.exec(e);if(!t)return[,];const[,n,i]=t;return[n,i]}function B0(e,t,n=1){const[i,l]=ET(e);if(!i)return;const c=window.getComputedStyle(t).getPropertyValue(i);if(c){const f=c.trim();return Fw(f)?parseFloat(f):f}else return A0(l)?B0(l,t,n+1):l}function AT(e,{...t},n){const i=e.current;if(!(i instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(l=>{const c=l.get();if(!A0(c))return;const f=B0(c,i);f&&l.set(f)});for(const l in t){const c=t[l];if(!A0(c))continue;const f=B0(c,i);f&&(t[l]=f,n||(n={}),n[l]===void 0&&(n[l]=c))}return{target:t,transitionEnd:n}}const NT=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),i_=e=>NT.has(e),TT=e=>Object.keys(e).some(i_),wx=e=>e===na||e===$e,_x=(e,t)=>parseFloat(e.split(", ")[t]),bx=(e,t)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const l=i.match(/^matrix3d\((.+)\)$/);if(l)return _x(l[1],t);{const c=i.match(/^matrix\((.+)\)$/);return c?_x(c[1],e):0}},IT=new Set(["x","y","z"]),MT=Pc.filter(e=>!IT.has(e));function kT(e){const t=[];return MT.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Ya={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:bx(4,13),y:bx(5,14)};Ya.translateX=Ya.x;Ya.translateY=Ya.y;const RT=(e,t,n)=>{const i=t.measureViewportBox(),l=t.current,c=getComputedStyle(l),{display:f}=c,y={};f==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(g=>{y[g]=Ya[g](i,c)}),t.render();const w=t.measureViewportBox();return n.forEach(g=>{const b=t.getValue(g);b&&b.jump(y[g]),e[g]=Ya[g](w,c)}),e},OT=(e,t,n={},i={})=>{t={...t},i={...i};const l=Object.keys(t).filter(i_);let c=[],f=!1;const y=[];if(l.forEach(w=>{const g=e.getValue(w);if(!e.hasValue(w))return;let b=n[w],E=Ol(b);const T=t[w];let O;if(_d(T)){const D=T.length,P=T[0]===null?1:0;b=T[P],E=Ol(b);for(let V=P;V<D&&T[V]!==null;V++)O?dp(Ol(T[V])===O):O=Ol(T[V])}else O=Ol(T);if(E!==O)if(wx(E)&&wx(O)){const D=g.get();typeof D=="string"&&g.set(parseFloat(D)),typeof T=="string"?t[w]=parseFloat(T):Array.isArray(T)&&O===$e&&(t[w]=T.map(parseFloat))}else E!=null&&E.transform&&(O!=null&&O.transform)&&(b===0||T===0)?b===0?g.set(O.transform(b)):t[w]=E.transform(T):(f||(c=kT(e),f=!0),y.push(w),i[w]=i[w]!==void 0?i[w]:t[w],g.jump(T))}),y.length){const w=y.indexOf("height")>=0?window.pageYOffset:null,g=RT(t,e,y);return c.length&&c.forEach(([b,E])=>{e.getValue(b).set(E)}),e.render(),th&&w!==null&&window.scrollTo({top:w}),{target:g,transitionEnd:i}}else return{target:t,transitionEnd:i}};function PT(e,t,n,i){return TT(t)?OT(e,t,n,i):{target:t,transitionEnd:i}}const LT=(e,t,n,i)=>{const l=AT(e,t,i);return t=l.target,i=l.transitionEnd,PT(e,t,n,i)},j0={current:null},s_={current:!1};function DT(){if(s_.current=!0,!!th)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>j0.current=e.matches;e.addListener(t),t()}else j0.current=!1}function BT(e,t,n){const{willChange:i}=t;for(const l in t){const c=t[l],f=n[l];if(Sr(c))e.addValue(l,c),Ed(i)&&i.add(l);else if(Sr(f))e.addValue(l,Ga(c,{owner:e})),Ed(i)&&i.remove(l);else if(f!==c)if(e.hasValue(l)){const y=e.getValue(l);!y.hasAnimated&&y.set(c)}else{const y=e.getStaticValue(l);e.addValue(l,Ga(y!==void 0?y:c,{owner:e}))}}for(const l in n)t[l]===void 0&&e.removeValue(l);return t}const Cx=new WeakMap,o_=Object.keys(Ec),jT=o_.length,Sx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],FT=np.length;class zT{constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:l,visualState:c},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Wt.render(this.render,!1,!0);const{latestValues:y,renderState:w}=c;this.latestValues=y,this.baseTarget={...y},this.initialValues=n.initial?{...y}:{},this.renderState=w,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=l,this.options=f,this.isControllingVariants=rh(n),this.isVariantNode=Wv(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:g,...b}=this.scrapeMotionValuesFromProps(n,{});for(const E in b){const T=b[E];y[E]!==void 0&&Sr(T)&&(T.set(y[E],!1),Ed(g)&&g.add(E))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,Cx.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),s_.current||DT(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:j0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Cx.delete(this.current),this.projection&&this.projection.unmount(),fs(this.notifyUpdate),fs(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const i=ta.has(t),l=n.on("change",f=>{this.latestValues[t]=f,this.props.onUpdate&&Wt.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),c=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{l(),c()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},i,l,c){let f,y;for(let w=0;w<jT;w++){const g=o_[w],{isEnabled:b,Feature:E,ProjectionNode:T,MeasureLayout:O}=Ec[g];T&&(f=T),b(n)&&(!this.features[g]&&E&&(this.features[g]=new E(this)),O&&(y=O))}if((this.type==="html"||this.type==="svg")&&!this.projection&&f){this.projection=new f(this.latestValues,this.parent&&this.parent.projection);const{layoutId:w,layout:g,drag:b,dragConstraints:E,layoutScroll:T,layoutRoot:O}=n;this.projection.setOptions({layoutId:w,layout:g,alwaysMeasureLayout:!!b||E&&Na(E),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof g=="string"?g:"both",initialPromotionConfig:c,layoutScroll:T,layoutRoot:O})}return y}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):vn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<Sx.length;i++){const l=Sx[i];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const c=t["on"+l];c&&(this.propEventSubscriptions[l]=this.on(l,c))}this.prevMotionValues=BT(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<FT;i++){const l=np[i],c=this.props[l];(Sc(c)||c===!1)&&(n[l]=c)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=Ga(n,{owner:this}),this.addValue(t,i)),i}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:i}=this.props,l=typeof i=="string"||typeof i=="object"?(n=up(this.props,i))===null||n===void 0?void 0:n[t]:void 0;if(i&&l!==void 0)return l;const c=this.getBaseTargetFromProps(this.props,t);return c!==void 0&&!Sr(c)?c:this.initialValues[t]!==void 0&&l===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new wp),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class a_ extends zT{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...i},{transformValues:l},c){let f=r4(i,t||{},this);if(l&&(n&&(n=l(n)),i&&(i=l(i)),f&&(f=l(f))),c){t4(this,i,f);const y=LT(this,i,f,n);n=y.transitionEnd,i=y.target}return{transition:t,transitionEnd:n,...i}}}function UT(e){return window.getComputedStyle(e)}class VT extends a_{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(ta.has(n)){const i=mp(n);return i&&i.default||0}else{const i=UT(t),l=(Xv(n)?i.getPropertyValue(n):i[n])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Xw(t,n)}build(t,n,i,l){sp(t,n,i,l.transformTemplate)}scrapeMotionValuesFromProps(t,n){return cp(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Sr(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,i,l){ew(t,n,i,l)}}class HT extends a_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(ta.has(n)){const i=mp(n);return i&&i.default||0}return n=tw.has(n)?n:ep(n),t.getAttribute(n)}measureInstanceViewportBox(){return vn()}scrapeMotionValuesFromProps(t,n){return rw(t,n)}build(t,n,i,l){ap(t,n,i,this.isSVGTag,l.transformTemplate)}renderInstance(t,n,i,l){nw(t,n,i,l)}mount(t){this.isSVGTag=lp(t.tagName),super.mount(t)}}const WT=(e,t)=>ip(e)?new HT(t,{enableHardwareAcceleration:!1}):new VT(t,{enableHardwareAcceleration:!0}),ZT={layout:{ProjectionNode:r_,MeasureLayout:Kw}},GT={...y4,...jA,...CT,...ZT},qe=YE((e,t)=>EA(e,t,GT,WT));function l_(){const e=F.useRef(!1);return $1(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function YT(){const e=l_(),[t,n]=F.useState(0),i=F.useCallback(()=>{e.current&&n(t+1)},[t]);return[F.useCallback(()=>Wt.postRender(i),[i]),t]}class XT extends F.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function qT({children:e,isPresent:t}){const n=F.useId(),i=F.useRef(null),l=F.useRef({width:0,height:0,top:0,left:0});return F.useInsertionEffect(()=>{const{width:c,height:f,top:y,left:w}=l.current;if(t||!i.current||!c||!f)return;i.current.dataset.motionPopId=n;const g=document.createElement("style");return document.head.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${f}px !important;
            top: ${y}px !important;
            left: ${w}px !important;
          }
        `),()=>{document.head.removeChild(g)}},[t]),F.createElement(XT,{isPresent:t,childRef:i,sizeRef:l},F.cloneElement(e,{ref:i}))}const xf=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:l,presenceAffectsLayout:c,mode:f})=>{const y=iw(KT),w=F.useId(),g=F.useMemo(()=>({id:w,initial:t,isPresent:n,custom:l,onExitComplete:b=>{y.set(b,!0);for(const E of y.values())if(!E)return;i&&i()},register:b=>(y.set(b,!1),()=>y.delete(b))}),c?void 0:[n]);return F.useMemo(()=>{y.forEach((b,E)=>y.set(E,!1))},[n]),F.useEffect(()=>{!n&&!y.size&&i&&i()},[n]),f==="popLayout"&&(e=F.createElement(qT,{isPresent:n},e)),F.createElement(eh.Provider,{value:g},e)};function KT(){return new Map}function QT(e){return F.useEffect(()=>()=>e(),[])}const Mo=e=>e.key||"";function JT(e,t){e.forEach(n=>{const i=Mo(n);t.set(i,n)})}function $T(e){const t=[];return F.Children.forEach(e,n=>{F.isValidElement(n)&&t.push(n)}),t}const Qs=({children:e,custom:t,initial:n=!0,onExitComplete:i,exitBeforeEnter:l,presenceAffectsLayout:c=!0,mode:f="sync"})=>{const y=F.useContext(rp).forceRender||YT()[0],w=l_(),g=$T(e);let b=g;const E=F.useRef(new Map).current,T=F.useRef(b),O=F.useRef(new Map).current,D=F.useRef(!0);if($1(()=>{D.current=!1,JT(g,O),T.current=b}),QT(()=>{D.current=!0,O.clear(),E.clear()}),D.current)return F.createElement(F.Fragment,null,b.map(R=>F.createElement(xf,{key:Mo(R),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:c,mode:f},R)));b=[...b];const P=T.current.map(Mo),V=g.map(Mo),z=P.length;for(let R=0;R<z;R++){const I=P[R];V.indexOf(I)===-1&&!E.has(I)&&E.set(I,void 0)}return f==="wait"&&E.size&&(b=[]),E.forEach((R,I)=>{if(V.indexOf(I)!==-1)return;const Z=O.get(I);if(!Z)return;const Q=P.indexOf(I);let X=R;if(!X){const G=()=>{E.delete(I);const ee=Array.from(O.keys()).filter(U=>!V.includes(U));if(ee.forEach(U=>O.delete(U)),T.current=g.filter(U=>{const re=Mo(U);return re===I||ee.includes(re)}),!E.size){if(w.current===!1)return;y(),i&&i()}};X=F.createElement(xf,{key:Mo(Z),isPresent:!1,onExitComplete:G,custom:t,presenceAffectsLayout:c,mode:f},Z),E.set(I,X)}b.splice(Q,0,X)}),b=b.map(R=>{const I=R.key;return E.has(I)?R:F.createElement(xf,{key:Mo(R),isPresent:!0,presenceAffectsLayout:c,mode:f},R)}),F.createElement(F.Fragment,null,E.size?b:b.map(R=>F.cloneElement(R)))};var eI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const tI=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ye=(e,t)=>{const n=F.forwardRef(({color:i="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:f,children:y,...w},g)=>F.createElement("svg",{ref:g,...eI,width:l,height:l,stroke:i,strokeWidth:f?Number(c)*24/Number(l):c,className:`lucide lucide-${tI(e)}`,...w},[...t.map(([b,E])=>F.createElement(b,E)),...(Array.isArray(y)?y:[y])||[]]));return n.displayName=`${e}`,n},c_=Ye("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),u_=Ye("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),qo=Ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Ex=Ye("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),d_=Ye("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Nc=Ye("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),h_=Ye("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),nI=Ye("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),ah=Ye("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Wu=Ye("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),f_=Ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),rI=Ye("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Js=Ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Eu=Ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),iI=Ye("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),sI=Ye("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),oI=Ye("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),aI=Ye("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),p_=Ye("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),lI=Ye("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),cI=Ye("Keyboard",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2",key:"15u882"}],["path",{d:"M6 8h.001",key:"1ej0i3"}],["path",{d:"M10 8h.001",key:"1x2st2"}],["path",{d:"M14 8h.001",key:"1vkmyp"}],["path",{d:"M18 8h.001",key:"kfsenl"}],["path",{d:"M8 12h.001",key:"1sjpby"}],["path",{d:"M12 12h.001",key:"al75ts"}],["path",{d:"M16 12h.001",key:"931bgk"}],["path",{d:"M7 16h10",key:"wp8him"}]]),m_=Ye("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Br=Ye("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),g_=Ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),uI=Ye("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),x_=Ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),dI=Ye("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),$s=Ye("MapPinned",[["path",{d:"M18 8c0 4.5-6 9-6 9s-6-4.5-6-9a6 6 0 0 1 12 0",key:"yrbn30"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.835 14H5a1 1 0 0 0-.9.7l-2 6c-.1.1-.1.2-.1.3 0 .6.4 1 1 1h18c.6 0 1-.4 1-1 0-.1 0-.2-.1-.3l-2-6a1 1 0 0 0-.9-.7h-3.835",key:"112zkj"}]]),y_=Ye("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]),hI=Ye("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),fI=Ye("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),v_=Ye("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),Ax=Ye("PackageSearch",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]),ps=Ye("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Nd=Ye("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),_p=Ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),io=Ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Nx=Ye("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),pI=Ye("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]),Xa=Ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),mI=Ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),gI=Ye("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),xI=Ye("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),w_=Ye("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),bp=Ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Td=Ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Cp=Ye("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]),F0=Ye("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),ra=Ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),__=Ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),yI=Ye("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Sp=Ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),b_=Ye("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),C_="Admin",S_="Manager",E_="Dispatcher",A_="Warehouse",N_="Driver",T_="Support",I_="Finance",M_="Viewer",k_="Recipient",vI=[C_,S_,E_,A_,N_,T_,I_,M_,k_],Ts="status-options:read",yi="stats:read",gr="shipments:read",Ki="shipment:read",ka="shipments:assign",Eo="label:read",ko="awb:update",ni="logs:read:self",Bs="logs:read:all",ti="notifications:read",wI="drivers:sync",Uo="users:read",R_="users:write",_I={[C_]:new Set([Ts,yi,gr,Ki,ka,Eo,ko,Bs,ni,ti,wI,Uo,R_]),[S_]:new Set([Ts,yi,gr,Ki,ka,Eo,ko,Bs,ni,ti,Uo]),[E_]:new Set([Ts,yi,gr,Ki,ka,Eo,ko,Bs,ni,ti,Uo]),[A_]:new Set([Ts,yi,gr,Ki,ka,Eo,ko,ni,ti]),[N_]:new Set([Ts,yi,gr,Ki,Eo,ko,ni,ti]),[T_]:new Set([Ts,yi,gr,Ki,Eo,Bs,ni,ti]),[I_]:new Set([Ts,yi,gr,Ki,Bs,ni,ti]),[M_]:new Set([Ts,yi,gr,Ki,Eo,ni,ti]),[k_]:new Set([gr,Ki,ti])},bI=e=>{const t=String(e||"").trim();if(!t)return t;const n=t.toUpperCase();for(const i of vI)if(i.toUpperCase()===n)return i;return t},z0=e=>{const t=bI(e),n=_I[t];return n?Array.from(n).sort():[]},Tx=e=>e?e instanceof Set?e:Array.isArray(e)?new Set(e.filter(Boolean)):new Set:new Set,O_=e=>{const t=Tx(e==null?void 0:e.permissions);if(t.size>0)return t.has(Bs)&&t.add(ni),t;const n=Tx(z0(e==null?void 0:e.role));return n.has(Bs)&&n.add(ni),n},zn=(e,t)=>t?O_(e).has(t):!0,CI=(e,t=[])=>{const n=Array.isArray(t)?t.filter(Boolean):[];if(n.length===0)return!0;const i=O_(e);return n.every(l=>i.has(l))};function P_(e,t){return function(){return e.apply(t,arguments)}}const{toString:SI}=Object.prototype,{getPrototypeOf:Ep}=Object,{iterator:lh,toStringTag:L_}=Symbol,ch=(e=>t=>{const n=SI.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ei=e=>(e=e.toLowerCase(),t=>ch(t)===e),uh=e=>t=>typeof t===e,{isArray:rl}=Array,qa=uh("undefined");function jc(e){return e!==null&&!qa(e)&&e.constructor!==null&&!qa(e.constructor)&&br(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const D_=Ei("ArrayBuffer");function EI(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&D_(e.buffer),t}const AI=uh("string"),br=uh("function"),B_=uh("number"),Fc=e=>e!==null&&typeof e=="object",NI=e=>e===!0||e===!1,Zu=e=>{if(ch(e)!=="object")return!1;const t=Ep(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(L_ in e)&&!(lh in e)},TI=e=>{if(!Fc(e)||jc(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},II=Ei("Date"),MI=Ei("File"),kI=Ei("Blob"),RI=Ei("FileList"),OI=e=>Fc(e)&&br(e.pipe),PI=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||br(e.append)&&((t=ch(e))==="formdata"||t==="object"&&br(e.toString)&&e.toString()==="[object FormData]"))},LI=Ei("URLSearchParams"),[DI,BI,jI,FI]=["ReadableStream","Request","Response","Headers"].map(Ei),zI=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function zc(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,l;if(typeof e!="object"&&(e=[e]),rl(e))for(i=0,l=e.length;i<l;i++)t.call(null,e[i],i,e);else{if(jc(e))return;const c=n?Object.getOwnPropertyNames(e):Object.keys(e),f=c.length;let y;for(i=0;i<f;i++)y=c[i],t.call(null,e[y],y,e)}}function j_(e,t){if(jc(e))return null;t=t.toLowerCase();const n=Object.keys(e);let i=n.length,l;for(;i-- >0;)if(l=n[i],t===l.toLowerCase())return l;return null}const Bo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,F_=e=>!qa(e)&&e!==Bo;function U0(){const{caseless:e,skipUndefined:t}=F_(this)&&this||{},n={},i=(l,c)=>{if(c==="__proto__"||c==="constructor"||c==="prototype")return;const f=e&&j_(n,c)||c;Zu(n[f])&&Zu(l)?n[f]=U0(n[f],l):Zu(l)?n[f]=U0({},l):rl(l)?n[f]=l.slice():(!t||!qa(l))&&(n[f]=l)};for(let l=0,c=arguments.length;l<c;l++)arguments[l]&&zc(arguments[l],i);return n}const UI=(e,t,n,{allOwnKeys:i}={})=>(zc(t,(l,c)=>{n&&br(l)?Object.defineProperty(e,c,{value:P_(l,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,c,{value:l,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:i}),e),VI=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),HI=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},WI=(e,t,n,i)=>{let l,c,f;const y={};if(t=t||{},e==null)return t;do{for(l=Object.getOwnPropertyNames(e),c=l.length;c-- >0;)f=l[c],(!i||i(f,e,t))&&!y[f]&&(t[f]=e[f],y[f]=!0);e=n!==!1&&Ep(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},ZI=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},GI=e=>{if(!e)return null;if(rl(e))return e;let t=e.length;if(!B_(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},YI=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ep(Uint8Array)),XI=(e,t)=>{const i=(e&&e[lh]).call(e);let l;for(;(l=i.next())&&!l.done;){const c=l.value;t.call(e,c[0],c[1])}},qI=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},KI=Ei("HTMLFormElement"),QI=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,l){return i.toUpperCase()+l}),Ix=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),JI=Ei("RegExp"),z_=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};zc(n,(l,c)=>{let f;(f=t(l,c,e))!==!1&&(i[c]=f||l)}),Object.defineProperties(e,i)},$I=e=>{z_(e,(t,n)=>{if(br(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(br(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},e8=(e,t)=>{const n={},i=l=>{l.forEach(c=>{n[c]=!0})};return rl(e)?i(e):i(String(e).split(t)),n},t8=()=>{},n8=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function r8(e){return!!(e&&br(e.append)&&e[L_]==="FormData"&&e[lh])}const i8=e=>{const t=new Array(10),n=(i,l)=>{if(Fc(i)){if(t.indexOf(i)>=0)return;if(jc(i))return i;if(!("toJSON"in i)){t[l]=i;const c=rl(i)?[]:{};return zc(i,(f,y)=>{const w=n(f,l+1);!qa(w)&&(c[y]=w)}),t[l]=void 0,c}}return i};return n(e,0)},s8=Ei("AsyncFunction"),o8=e=>e&&(Fc(e)||br(e))&&br(e.then)&&br(e.catch),U_=((e,t)=>e?setImmediate:t?((n,i)=>(Bo.addEventListener("message",({source:l,data:c})=>{l===Bo&&c===n&&i.length&&i.shift()()},!1),l=>{i.push(l),Bo.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",br(Bo.postMessage)),a8=typeof queueMicrotask<"u"?queueMicrotask.bind(Bo):typeof process<"u"&&process.nextTick||U_,l8=e=>e!=null&&br(e[lh]),fe={isArray:rl,isArrayBuffer:D_,isBuffer:jc,isFormData:PI,isArrayBufferView:EI,isString:AI,isNumber:B_,isBoolean:NI,isObject:Fc,isPlainObject:Zu,isEmptyObject:TI,isReadableStream:DI,isRequest:BI,isResponse:jI,isHeaders:FI,isUndefined:qa,isDate:II,isFile:MI,isBlob:kI,isRegExp:JI,isFunction:br,isStream:OI,isURLSearchParams:LI,isTypedArray:YI,isFileList:RI,forEach:zc,merge:U0,extend:UI,trim:zI,stripBOM:VI,inherits:HI,toFlatObject:WI,kindOf:ch,kindOfTest:Ei,endsWith:ZI,toArray:GI,forEachEntry:XI,matchAll:qI,isHTMLForm:KI,hasOwnProperty:Ix,hasOwnProp:Ix,reduceDescriptors:z_,freezeMethods:$I,toObjectSet:e8,toCamelCase:QI,noop:t8,toFiniteNumber:n8,findKey:j_,global:Bo,isContextDefined:F_,isSpecCompliantForm:r8,toJSONObject:i8,isAsyncFn:s8,isThenable:o8,setImmediate:U_,asap:a8,isIterable:l8};let tt=class V_ extends Error{static from(t,n,i,l,c,f){const y=new V_(t.message,n||t.code,i,l,c);return y.cause=t,y.name=t.name,f&&Object.assign(y,f),y}constructor(t,n,i,l,c){super(t),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),i&&(this.config=i),l&&(this.request=l),c&&(this.response=c,this.status=c.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:fe.toJSONObject(this.config),code:this.code,status:this.status}}};tt.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";tt.ERR_BAD_OPTION="ERR_BAD_OPTION";tt.ECONNABORTED="ECONNABORTED";tt.ETIMEDOUT="ETIMEDOUT";tt.ERR_NETWORK="ERR_NETWORK";tt.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";tt.ERR_DEPRECATED="ERR_DEPRECATED";tt.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";tt.ERR_BAD_REQUEST="ERR_BAD_REQUEST";tt.ERR_CANCELED="ERR_CANCELED";tt.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";tt.ERR_INVALID_URL="ERR_INVALID_URL";const c8=null;function V0(e){return fe.isPlainObject(e)||fe.isArray(e)}function H_(e){return fe.endsWith(e,"[]")?e.slice(0,-2):e}function Mx(e,t,n){return e?e.concat(t).map(function(l,c){return l=H_(l),!n&&c?"["+l+"]":l}).join(n?".":""):t}function u8(e){return fe.isArray(e)&&!e.some(V0)}const d8=fe.toFlatObject(fe,{},null,function(t){return/^is[A-Z]/.test(t)});function dh(e,t,n){if(!fe.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=fe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(P,V){return!fe.isUndefined(V[P])});const i=n.metaTokens,l=n.visitor||b,c=n.dots,f=n.indexes,w=(n.Blob||typeof Blob<"u"&&Blob)&&fe.isSpecCompliantForm(t);if(!fe.isFunction(l))throw new TypeError("visitor must be a function");function g(D){if(D===null)return"";if(fe.isDate(D))return D.toISOString();if(fe.isBoolean(D))return D.toString();if(!w&&fe.isBlob(D))throw new tt("Blob is not supported. Use a Buffer instead.");return fe.isArrayBuffer(D)||fe.isTypedArray(D)?w&&typeof Blob=="function"?new Blob([D]):Buffer.from(D):D}function b(D,P,V){let z=D;if(D&&!V&&typeof D=="object"){if(fe.endsWith(P,"{}"))P=i?P:P.slice(0,-2),D=JSON.stringify(D);else if(fe.isArray(D)&&u8(D)||(fe.isFileList(D)||fe.endsWith(P,"[]"))&&(z=fe.toArray(D)))return P=H_(P),z.forEach(function(I,Z){!(fe.isUndefined(I)||I===null)&&t.append(f===!0?Mx([P],Z,c):f===null?P:P+"[]",g(I))}),!1}return V0(D)?!0:(t.append(Mx(V,P,c),g(D)),!1)}const E=[],T=Object.assign(d8,{defaultVisitor:b,convertValue:g,isVisitable:V0});function O(D,P){if(!fe.isUndefined(D)){if(E.indexOf(D)!==-1)throw Error("Circular reference detected in "+P.join("."));E.push(D),fe.forEach(D,function(z,R){(!(fe.isUndefined(z)||z===null)&&l.call(t,z,fe.isString(R)?R.trim():R,P,T))===!0&&O(z,P?P.concat(R):[R])}),E.pop()}}if(!fe.isObject(e))throw new TypeError("data must be an object");return O(e),t}function kx(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function Ap(e,t){this._pairs=[],e&&dh(e,this,t)}const W_=Ap.prototype;W_.append=function(t,n){this._pairs.push([t,n])};W_.toString=function(t){const n=t?function(i){return t.call(this,i,kx)}:kx;return this._pairs.map(function(l){return n(l[0])+"="+n(l[1])},"").join("&")};function h8(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Z_(e,t,n){if(!t)return e;const i=n&&n.encode||h8,l=fe.isFunction(n)?{serialize:n}:n,c=l&&l.serialize;let f;if(c?f=c(t,l):f=fe.isURLSearchParams(t)?t.toString():new Ap(t,l).toString(i),f){const y=e.indexOf("#");y!==-1&&(e=e.slice(0,y)),e+=(e.indexOf("?")===-1?"?":"&")+f}return e}class Rx{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){fe.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Np={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},f8=typeof URLSearchParams<"u"?URLSearchParams:Ap,p8=typeof FormData<"u"?FormData:null,m8=typeof Blob<"u"?Blob:null,g8={isBrowser:!0,classes:{URLSearchParams:f8,FormData:p8,Blob:m8},protocols:["http","https","file","blob","url","data"]},Tp=typeof window<"u"&&typeof document<"u",H0=typeof navigator=="object"&&navigator||void 0,x8=Tp&&(!H0||["ReactNative","NativeScript","NS"].indexOf(H0.product)<0),y8=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",v8=Tp&&window.location.href||"http://localhost",w8=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Tp,hasStandardBrowserEnv:x8,hasStandardBrowserWebWorkerEnv:y8,navigator:H0,origin:v8},Symbol.toStringTag,{value:"Module"})),$n={...w8,...g8};function _8(e,t){return dh(e,new $n.classes.URLSearchParams,{visitor:function(n,i,l,c){return $n.isNode&&fe.isBuffer(n)?(this.append(i,n.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)},...t})}function b8(e){return fe.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function C8(e){const t={},n=Object.keys(e);let i;const l=n.length;let c;for(i=0;i<l;i++)c=n[i],t[c]=e[c];return t}function G_(e){function t(n,i,l,c){let f=n[c++];if(f==="__proto__")return!0;const y=Number.isFinite(+f),w=c>=n.length;return f=!f&&fe.isArray(l)?l.length:f,w?(fe.hasOwnProp(l,f)?l[f]=[l[f],i]:l[f]=i,!y):((!l[f]||!fe.isObject(l[f]))&&(l[f]=[]),t(n,i,l[f],c)&&fe.isArray(l[f])&&(l[f]=C8(l[f])),!y)}if(fe.isFormData(e)&&fe.isFunction(e.entries)){const n={};return fe.forEachEntry(e,(i,l)=>{t(b8(i),l,n,0)}),n}return null}function S8(e,t,n){if(fe.isString(e))try{return(t||JSON.parse)(e),fe.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const Uc={transitional:Np,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const i=n.getContentType()||"",l=i.indexOf("application/json")>-1,c=fe.isObject(t);if(c&&fe.isHTMLForm(t)&&(t=new FormData(t)),fe.isFormData(t))return l?JSON.stringify(G_(t)):t;if(fe.isArrayBuffer(t)||fe.isBuffer(t)||fe.isStream(t)||fe.isFile(t)||fe.isBlob(t)||fe.isReadableStream(t))return t;if(fe.isArrayBufferView(t))return t.buffer;if(fe.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let y;if(c){if(i.indexOf("application/x-www-form-urlencoded")>-1)return _8(t,this.formSerializer).toString();if((y=fe.isFileList(t))||i.indexOf("multipart/form-data")>-1){const w=this.env&&this.env.FormData;return dh(y?{"files[]":t}:t,w&&new w,this.formSerializer)}}return c||l?(n.setContentType("application/json",!1),S8(t)):t}],transformResponse:[function(t){const n=this.transitional||Uc.transitional,i=n&&n.forcedJSONParsing,l=this.responseType==="json";if(fe.isResponse(t)||fe.isReadableStream(t))return t;if(t&&fe.isString(t)&&(i&&!this.responseType||l)){const f=!(n&&n.silentJSONParsing)&&l;try{return JSON.parse(t,this.parseReviver)}catch(y){if(f)throw y.name==="SyntaxError"?tt.from(y,tt.ERR_BAD_RESPONSE,this,null,this.response):y}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$n.classes.FormData,Blob:$n.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};fe.forEach(["delete","get","head","post","put","patch"],e=>{Uc.headers[e]={}});const E8=fe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),A8=e=>{const t={};let n,i,l;return e&&e.split(`
`).forEach(function(f){l=f.indexOf(":"),n=f.substring(0,l).trim().toLowerCase(),i=f.substring(l+1).trim(),!(!n||t[n]&&E8[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},Ox=Symbol("internals");function Ll(e){return e&&String(e).trim().toLowerCase()}function Gu(e){return e===!1||e==null?e:fe.isArray(e)?e.map(Gu):String(e)}function N8(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const T8=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function yf(e,t,n,i,l){if(fe.isFunction(i))return i.call(this,t,n);if(l&&(t=n),!!fe.isString(t)){if(fe.isString(i))return t.indexOf(i)!==-1;if(fe.isRegExp(i))return i.test(t)}}function I8(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function M8(e,t){const n=fe.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(l,c,f){return this[i].call(this,t,l,c,f)},configurable:!0})})}let Cr=class{constructor(t){t&&this.set(t)}set(t,n,i){const l=this;function c(y,w,g){const b=Ll(w);if(!b)throw new Error("header name must be a non-empty string");const E=fe.findKey(l,b);(!E||l[E]===void 0||g===!0||g===void 0&&l[E]!==!1)&&(l[E||w]=Gu(y))}const f=(y,w)=>fe.forEach(y,(g,b)=>c(g,b,w));if(fe.isPlainObject(t)||t instanceof this.constructor)f(t,n);else if(fe.isString(t)&&(t=t.trim())&&!T8(t))f(A8(t),n);else if(fe.isObject(t)&&fe.isIterable(t)){let y={},w,g;for(const b of t){if(!fe.isArray(b))throw TypeError("Object iterator must return a key-value pair");y[g=b[0]]=(w=y[g])?fe.isArray(w)?[...w,b[1]]:[w,b[1]]:b[1]}f(y,n)}else t!=null&&c(n,t,i);return this}get(t,n){if(t=Ll(t),t){const i=fe.findKey(this,t);if(i){const l=this[i];if(!n)return l;if(n===!0)return N8(l);if(fe.isFunction(n))return n.call(this,l,i);if(fe.isRegExp(n))return n.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ll(t),t){const i=fe.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||yf(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let l=!1;function c(f){if(f=Ll(f),f){const y=fe.findKey(i,f);y&&(!n||yf(i,i[y],y,n))&&(delete i[y],l=!0)}}return fe.isArray(t)?t.forEach(c):c(t),l}clear(t){const n=Object.keys(this);let i=n.length,l=!1;for(;i--;){const c=n[i];(!t||yf(this,this[c],c,t,!0))&&(delete this[c],l=!0)}return l}normalize(t){const n=this,i={};return fe.forEach(this,(l,c)=>{const f=fe.findKey(i,c);if(f){n[f]=Gu(l),delete n[c];return}const y=t?I8(c):String(c).trim();y!==c&&delete n[c],n[y]=Gu(l),i[y]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return fe.forEach(this,(i,l)=>{i!=null&&i!==!1&&(n[l]=t&&fe.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(l=>i.set(l)),i}static accessor(t){const i=(this[Ox]=this[Ox]={accessors:{}}).accessors,l=this.prototype;function c(f){const y=Ll(f);i[y]||(M8(l,f),i[y]=!0)}return fe.isArray(t)?t.forEach(c):c(t),this}};Cr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);fe.reduceDescriptors(Cr.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});fe.freezeMethods(Cr);function vf(e,t){const n=this||Uc,i=t||n,l=Cr.from(i.headers);let c=i.data;return fe.forEach(e,function(y){c=y.call(n,c,l.normalize(),t?t.status:void 0)}),l.normalize(),c}function Y_(e){return!!(e&&e.__CANCEL__)}let Vc=class extends tt{constructor(t,n,i){super(t??"canceled",tt.ERR_CANCELED,n,i),this.name="CanceledError",this.__CANCEL__=!0}};function X_(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new tt("Request failed with status code "+n.status,[tt.ERR_BAD_REQUEST,tt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function k8(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function R8(e,t){e=e||10;const n=new Array(e),i=new Array(e);let l=0,c=0,f;return t=t!==void 0?t:1e3,function(w){const g=Date.now(),b=i[c];f||(f=g),n[l]=w,i[l]=g;let E=c,T=0;for(;E!==l;)T+=n[E++],E=E%e;if(l=(l+1)%e,l===c&&(c=(c+1)%e),g-f<t)return;const O=b&&g-b;return O?Math.round(T*1e3/O):void 0}}function O8(e,t){let n=0,i=1e3/t,l,c;const f=(g,b=Date.now())=>{n=b,l=null,c&&(clearTimeout(c),c=null),e(...g)};return[(...g)=>{const b=Date.now(),E=b-n;E>=i?f(g,b):(l=g,c||(c=setTimeout(()=>{c=null,f(l)},i-E)))},()=>l&&f(l)]}const Id=(e,t,n=3)=>{let i=0;const l=R8(50,250);return O8(c=>{const f=c.loaded,y=c.lengthComputable?c.total:void 0,w=f-i,g=l(w),b=f<=y;i=f;const E={loaded:f,total:y,progress:y?f/y:void 0,bytes:w,rate:g||void 0,estimated:g&&y&&b?(y-f)/g:void 0,event:c,lengthComputable:y!=null,[t?"download":"upload"]:!0};e(E)},n)},Px=(e,t)=>{const n=e!=null;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},Lx=e=>(...t)=>fe.asap(()=>e(...t)),P8=$n.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,$n.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL($n.origin),$n.navigator&&/(msie|trident)/i.test($n.navigator.userAgent)):()=>!0,L8=$n.hasStandardBrowserEnv?{write(e,t,n,i,l,c,f){if(typeof document>"u")return;const y=[`${e}=${encodeURIComponent(t)}`];fe.isNumber(n)&&y.push(`expires=${new Date(n).toUTCString()}`),fe.isString(i)&&y.push(`path=${i}`),fe.isString(l)&&y.push(`domain=${l}`),c===!0&&y.push("secure"),fe.isString(f)&&y.push(`SameSite=${f}`),document.cookie=y.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function D8(e){return typeof e!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function B8(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function q_(e,t,n){let i=!D8(t);return e&&(i||n==!1)?B8(e,t):t}const Dx=e=>e instanceof Cr?{...e}:e;function Ko(e,t){t=t||{};const n={};function i(g,b,E,T){return fe.isPlainObject(g)&&fe.isPlainObject(b)?fe.merge.call({caseless:T},g,b):fe.isPlainObject(b)?fe.merge({},b):fe.isArray(b)?b.slice():b}function l(g,b,E,T){if(fe.isUndefined(b)){if(!fe.isUndefined(g))return i(void 0,g,E,T)}else return i(g,b,E,T)}function c(g,b){if(!fe.isUndefined(b))return i(void 0,b)}function f(g,b){if(fe.isUndefined(b)){if(!fe.isUndefined(g))return i(void 0,g)}else return i(void 0,b)}function y(g,b,E){if(E in t)return i(g,b);if(E in e)return i(void 0,g)}const w={url:c,method:c,data:c,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:y,headers:(g,b,E)=>l(Dx(g),Dx(b),E,!0)};return fe.forEach(Object.keys({...e,...t}),function(b){if(b==="__proto__"||b==="constructor"||b==="prototype")return;const E=fe.hasOwnProp(w,b)?w[b]:l,T=E(e[b],t[b],b);fe.isUndefined(T)&&E!==y||(n[b]=T)}),n}const K_=e=>{const t=Ko({},e);let{data:n,withXSRFToken:i,xsrfHeaderName:l,xsrfCookieName:c,headers:f,auth:y}=t;if(t.headers=f=Cr.from(f),t.url=Z_(q_(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),y&&f.set("Authorization","Basic "+btoa((y.username||"")+":"+(y.password?unescape(encodeURIComponent(y.password)):""))),fe.isFormData(n)){if($n.hasStandardBrowserEnv||$n.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(fe.isFunction(n.getHeaders)){const w=n.getHeaders(),g=["content-type","content-length"];Object.entries(w).forEach(([b,E])=>{g.includes(b.toLowerCase())&&f.set(b,E)})}}if($n.hasStandardBrowserEnv&&(i&&fe.isFunction(i)&&(i=i(t)),i||i!==!1&&P8(t.url))){const w=l&&c&&L8.read(c);w&&f.set(l,w)}return t},j8=typeof XMLHttpRequest<"u",F8=j8&&function(e){return new Promise(function(n,i){const l=K_(e);let c=l.data;const f=Cr.from(l.headers).normalize();let{responseType:y,onUploadProgress:w,onDownloadProgress:g}=l,b,E,T,O,D;function P(){O&&O(),D&&D(),l.cancelToken&&l.cancelToken.unsubscribe(b),l.signal&&l.signal.removeEventListener("abort",b)}let V=new XMLHttpRequest;V.open(l.method.toUpperCase(),l.url,!0),V.timeout=l.timeout;function z(){if(!V)return;const I=Cr.from("getAllResponseHeaders"in V&&V.getAllResponseHeaders()),Q={data:!y||y==="text"||y==="json"?V.responseText:V.response,status:V.status,statusText:V.statusText,headers:I,config:e,request:V};X_(function(G){n(G),P()},function(G){i(G),P()},Q),V=null}"onloadend"in V?V.onloadend=z:V.onreadystatechange=function(){!V||V.readyState!==4||V.status===0&&!(V.responseURL&&V.responseURL.indexOf("file:")===0)||setTimeout(z)},V.onabort=function(){V&&(i(new tt("Request aborted",tt.ECONNABORTED,e,V)),V=null)},V.onerror=function(Z){const Q=Z&&Z.message?Z.message:"Network Error",X=new tt(Q,tt.ERR_NETWORK,e,V);X.event=Z||null,i(X),V=null},V.ontimeout=function(){let Z=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const Q=l.transitional||Np;l.timeoutErrorMessage&&(Z=l.timeoutErrorMessage),i(new tt(Z,Q.clarifyTimeoutError?tt.ETIMEDOUT:tt.ECONNABORTED,e,V)),V=null},c===void 0&&f.setContentType(null),"setRequestHeader"in V&&fe.forEach(f.toJSON(),function(Z,Q){V.setRequestHeader(Q,Z)}),fe.isUndefined(l.withCredentials)||(V.withCredentials=!!l.withCredentials),y&&y!=="json"&&(V.responseType=l.responseType),g&&([T,D]=Id(g,!0),V.addEventListener("progress",T)),w&&V.upload&&([E,O]=Id(w),V.upload.addEventListener("progress",E),V.upload.addEventListener("loadend",O)),(l.cancelToken||l.signal)&&(b=I=>{V&&(i(!I||I.type?new Vc(null,e,V):I),V.abort(),V=null)},l.cancelToken&&l.cancelToken.subscribe(b),l.signal&&(l.signal.aborted?b():l.signal.addEventListener("abort",b)));const R=k8(l.url);if(R&&$n.protocols.indexOf(R)===-1){i(new tt("Unsupported protocol "+R+":",tt.ERR_BAD_REQUEST,e));return}V.send(c||null)})},z8=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let i=new AbortController,l;const c=function(g){if(!l){l=!0,y();const b=g instanceof Error?g:this.reason;i.abort(b instanceof tt?b:new Vc(b instanceof Error?b.message:b))}};let f=t&&setTimeout(()=>{f=null,c(new tt(`timeout of ${t}ms exceeded`,tt.ETIMEDOUT))},t);const y=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(g=>{g.unsubscribe?g.unsubscribe(c):g.removeEventListener("abort",c)}),e=null)};e.forEach(g=>g.addEventListener("abort",c));const{signal:w}=i;return w.unsubscribe=()=>fe.asap(y),w}},U8=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let i=0,l;for(;i<n;)l=i+t,yield e.slice(i,l),i=l},V8=async function*(e,t){for await(const n of H8(e))yield*U8(n,t)},H8=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:i}=await t.read();if(n)break;yield i}}finally{await t.cancel()}},Bx=(e,t,n,i)=>{const l=V8(e,t);let c=0,f,y=w=>{f||(f=!0,i&&i(w))};return new ReadableStream({async pull(w){try{const{done:g,value:b}=await l.next();if(g){y(),w.close();return}let E=b.byteLength;if(n){let T=c+=E;n(T)}w.enqueue(new Uint8Array(b))}catch(g){throw y(g),g}},cancel(w){return y(w),l.return()}},{highWaterMark:2})},jx=64*1024,{isFunction:Au}=fe,W8=(({Request:e,Response:t})=>({Request:e,Response:t}))(fe.global),{ReadableStream:Fx,TextEncoder:zx}=fe.global,Ux=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Z8=e=>{e=fe.merge.call({skipUndefined:!0},W8,e);const{fetch:t,Request:n,Response:i}=e,l=t?Au(t):typeof fetch=="function",c=Au(n),f=Au(i);if(!l)return!1;const y=l&&Au(Fx),w=l&&(typeof zx=="function"?(D=>P=>D.encode(P))(new zx):async D=>new Uint8Array(await new n(D).arrayBuffer())),g=c&&y&&Ux(()=>{let D=!1;const P=new n($n.origin,{body:new Fx,method:"POST",get duplex(){return D=!0,"half"}}).headers.has("Content-Type");return D&&!P}),b=f&&y&&Ux(()=>fe.isReadableStream(new i("").body)),E={stream:b&&(D=>D.body)};l&&["text","arrayBuffer","blob","formData","stream"].forEach(D=>{!E[D]&&(E[D]=(P,V)=>{let z=P&&P[D];if(z)return z.call(P);throw new tt(`Response type '${D}' is not supported`,tt.ERR_NOT_SUPPORT,V)})});const T=async D=>{if(D==null)return 0;if(fe.isBlob(D))return D.size;if(fe.isSpecCompliantForm(D))return(await new n($n.origin,{method:"POST",body:D}).arrayBuffer()).byteLength;if(fe.isArrayBufferView(D)||fe.isArrayBuffer(D))return D.byteLength;if(fe.isURLSearchParams(D)&&(D=D+""),fe.isString(D))return(await w(D)).byteLength},O=async(D,P)=>{const V=fe.toFiniteNumber(D.getContentLength());return V??T(P)};return async D=>{let{url:P,method:V,data:z,signal:R,cancelToken:I,timeout:Z,onDownloadProgress:Q,onUploadProgress:X,responseType:G,headers:ee,withCredentials:U="same-origin",fetchOptions:re}=K_(D),me=t||fetch;G=G?(G+"").toLowerCase():"text";let le=z8([R,I&&I.toAbortSignal()],Z),Ie=null;const je=le&&le.unsubscribe&&(()=>{le.unsubscribe()});let ue;try{if(X&&g&&V!=="get"&&V!=="head"&&(ue=await O(ee,z))!==0){let be=new n(P,{method:"POST",body:z,duplex:"half"}),Pe;if(fe.isFormData(z)&&(Pe=be.headers.get("content-type"))&&ee.setContentType(Pe),be.body){const[ot,Ze]=Px(ue,Id(Lx(X)));z=Bx(be.body,jx,ot,Ze)}}fe.isString(U)||(U=U?"include":"omit");const Me=c&&"credentials"in n.prototype,Oe={...re,signal:le,method:V.toUpperCase(),headers:ee.normalize().toJSON(),body:z,duplex:"half",credentials:Me?U:void 0};Ie=c&&new n(P,Oe);let Y=await(c?me(Ie,re):me(P,Oe));const ve=b&&(G==="stream"||G==="response");if(b&&(Q||ve&&je)){const be={};["status","statusText","headers"].forEach(nt=>{be[nt]=Y[nt]});const Pe=fe.toFiniteNumber(Y.headers.get("content-length")),[ot,Ze]=Q&&Px(Pe,Id(Lx(Q),!0))||[];Y=new i(Bx(Y.body,jx,ot,()=>{Ze&&Ze(),je&&je()}),be)}G=G||"text";let oe=await E[fe.findKey(E,G)||"text"](Y,D);return!ve&&je&&je(),await new Promise((be,Pe)=>{X_(be,Pe,{data:oe,headers:Cr.from(Y.headers),status:Y.status,statusText:Y.statusText,config:D,request:Ie})})}catch(Me){throw je&&je(),Me&&Me.name==="TypeError"&&/Load failed|fetch/i.test(Me.message)?Object.assign(new tt("Network Error",tt.ERR_NETWORK,D,Ie,Me&&Me.response),{cause:Me.cause||Me}):tt.from(Me,Me&&Me.code,D,Ie,Me&&Me.response)}}},G8=new Map,Q_=e=>{let t=e&&e.env||{};const{fetch:n,Request:i,Response:l}=t,c=[i,l,n];let f=c.length,y=f,w,g,b=G8;for(;y--;)w=c[y],g=b.get(w),g===void 0&&b.set(w,g=y?new Map:Z8(t)),b=g;return g};Q_();const Ip={http:c8,xhr:F8,fetch:{get:Q_}};fe.forEach(Ip,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Vx=e=>`- ${e}`,Y8=e=>fe.isFunction(e)||e===null||e===!1;function X8(e,t){e=fe.isArray(e)?e:[e];const{length:n}=e;let i,l;const c={};for(let f=0;f<n;f++){i=e[f];let y;if(l=i,!Y8(i)&&(l=Ip[(y=String(i)).toLowerCase()],l===void 0))throw new tt(`Unknown adapter '${y}'`);if(l&&(fe.isFunction(l)||(l=l.get(t))))break;c[y||"#"+f]=l}if(!l){const f=Object.entries(c).map(([w,g])=>`adapter ${w} `+(g===!1?"is not supported by the environment":"is not available in the build"));let y=n?f.length>1?`since :
`+f.map(Vx).join(`
`):" "+Vx(f[0]):"as no adapter specified";throw new tt("There is no suitable adapter to dispatch the request "+y,"ERR_NOT_SUPPORT")}return l}const J_={getAdapter:X8,adapters:Ip};function wf(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Vc(null,e)}function Hx(e){return wf(e),e.headers=Cr.from(e.headers),e.data=vf.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),J_.getAdapter(e.adapter||Uc.adapter,e)(e).then(function(i){return wf(e),i.data=vf.call(e,e.transformResponse,i),i.headers=Cr.from(i.headers),i},function(i){return Y_(i)||(wf(e),i&&i.response&&(i.response.data=vf.call(e,e.transformResponse,i.response),i.response.headers=Cr.from(i.response.headers))),Promise.reject(i)})}const $_="1.13.5",hh={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{hh[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const Wx={};hh.transitional=function(t,n,i){function l(c,f){return"[Axios v"+$_+"] Transitional option '"+c+"'"+f+(i?". "+i:"")}return(c,f,y)=>{if(t===!1)throw new tt(l(f," has been removed"+(n?" in "+n:"")),tt.ERR_DEPRECATED);return n&&!Wx[f]&&(Wx[f]=!0,console.warn(l(f," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(c,f,y):!0}};hh.spelling=function(t){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function q8(e,t,n){if(typeof e!="object")throw new tt("options must be an object",tt.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let l=i.length;for(;l-- >0;){const c=i[l],f=t[c];if(f){const y=e[c],w=y===void 0||f(y,c,e);if(w!==!0)throw new tt("option "+c+" must be "+w,tt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new tt("Unknown option "+c,tt.ERR_BAD_OPTION)}}const Yu={assertOptions:q8,validators:hh},$r=Yu.validators;let Vo=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Rx,response:new Rx}}async request(t,n){try{return await this._request(t,n)}catch(i){if(i instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const c=l.stack?l.stack.replace(/^.+\n/,""):"";try{i.stack?c&&!String(i.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+c):i.stack=c}catch{}}throw i}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Ko(this.defaults,n);const{transitional:i,paramsSerializer:l,headers:c}=n;i!==void 0&&Yu.assertOptions(i,{silentJSONParsing:$r.transitional($r.boolean),forcedJSONParsing:$r.transitional($r.boolean),clarifyTimeoutError:$r.transitional($r.boolean),legacyInterceptorReqResOrdering:$r.transitional($r.boolean)},!1),l!=null&&(fe.isFunction(l)?n.paramsSerializer={serialize:l}:Yu.assertOptions(l,{encode:$r.function,serialize:$r.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Yu.assertOptions(n,{baseUrl:$r.spelling("baseURL"),withXsrfToken:$r.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let f=c&&fe.merge(c.common,c[n.method]);c&&fe.forEach(["delete","get","head","post","put","patch","common"],D=>{delete c[D]}),n.headers=Cr.concat(f,c);const y=[];let w=!0;this.interceptors.request.forEach(function(P){if(typeof P.runWhen=="function"&&P.runWhen(n)===!1)return;w=w&&P.synchronous;const V=n.transitional||Np;V&&V.legacyInterceptorReqResOrdering?y.unshift(P.fulfilled,P.rejected):y.push(P.fulfilled,P.rejected)});const g=[];this.interceptors.response.forEach(function(P){g.push(P.fulfilled,P.rejected)});let b,E=0,T;if(!w){const D=[Hx.bind(this),void 0];for(D.unshift(...y),D.push(...g),T=D.length,b=Promise.resolve(n);E<T;)b=b.then(D[E++],D[E++]);return b}T=y.length;let O=n;for(;E<T;){const D=y[E++],P=y[E++];try{O=D(O)}catch(V){P.call(this,V);break}}try{b=Hx.call(this,O)}catch(D){return Promise.reject(D)}for(E=0,T=g.length;E<T;)b=b.then(g[E++],g[E++]);return b}getUri(t){t=Ko(this.defaults,t);const n=q_(t.baseURL,t.url,t.allowAbsoluteUrls);return Z_(n,t.params,t.paramsSerializer)}};fe.forEach(["delete","get","head","options"],function(t){Vo.prototype[t]=function(n,i){return this.request(Ko(i||{},{method:t,url:n,data:(i||{}).data}))}});fe.forEach(["post","put","patch"],function(t){function n(i){return function(c,f,y){return this.request(Ko(y||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:c,data:f}))}}Vo.prototype[t]=n(),Vo.prototype[t+"Form"]=n(!0)});let K8=class eb{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(c){n=c});const i=this;this.promise.then(l=>{if(!i._listeners)return;let c=i._listeners.length;for(;c-- >0;)i._listeners[c](l);i._listeners=null}),this.promise.then=l=>{let c;const f=new Promise(y=>{i.subscribe(y),c=y}).then(l);return f.cancel=function(){i.unsubscribe(c)},f},t(function(c,f,y){i.reason||(i.reason=new Vc(c,f,y),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=i=>{t.abort(i)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new eb(function(l){t=l}),cancel:t}}};function Q8(e){return function(n){return e.apply(null,n)}}function J8(e){return fe.isObject(e)&&e.isAxiosError===!0}const W0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(W0).forEach(([e,t])=>{W0[t]=e});function tb(e){const t=new Vo(e),n=P_(Vo.prototype.request,t);return fe.extend(n,Vo.prototype,t,{allOwnKeys:!0}),fe.extend(n,t,null,{allOwnKeys:!0}),n.create=function(l){return tb(Ko(e,l))},n}const lt=tb(Uc);lt.Axios=Vo;lt.CanceledError=Vc;lt.CancelToken=K8;lt.isCancel=Y_;lt.VERSION=$_;lt.toFormData=dh;lt.AxiosError=tt;lt.Cancel=lt.CanceledError;lt.all=function(t){return Promise.all(t)};lt.spread=Q8;lt.isAxiosError=J8;lt.mergeConfig=Ko;lt.AxiosHeaders=Cr;lt.formToJSON=e=>G_(fe.isHTMLForm(e)?new FormData(e):e);lt.getAdapter=J_.getAdapter;lt.HttpStatusCode=W0;lt.default=lt;const{Axios:g6,AxiosError:x6,CanceledError:y6,isCancel:v6,CancelToken:w6,VERSION:_6,all:b6,Cancel:C6,isAxiosError:S6,spread:E6,toFormData:A6,AxiosHeaders:N6,HttpStatusCode:T6,formToJSON:I6,getAdapter:M6,mergeConfig:k6}=lt,$8=[{event_id:"1",label:"Expediere preluata de Curier",description:"Expediere preluata de Curier"},{event_id:"2",label:"Expeditie Livrata",description:"Expeditie Livrata"},{event_id:"3",label:"Refuzare colet",description:"Refuzare colet"},{event_id:"4",label:"Expeditie returnata",description:"Expeditie returnata"},{event_id:"5",label:"Expeditie anulata",description:"Expeditie anulata"},{event_id:"6",label:"Intrare in depozit",description:"Intrare in depozit"},{event_id:"7",label:"Livrare reprogramata",description:"Livrare reprogramata"},{event_id:"R3",label:"Ramburs transferat",description:"Ramburs transferat"}];$8.reduce((e,t)=>(e[t.event_id]=t.label,e),{});const e5=!1,_f="http://localhost:8000",Z0="arynik_api_url_v1",Hl=e=>String(e||"").trim().replace(/\/+$/,""),t5=e=>{try{return localStorage.getItem(e)}catch{return null}},n5=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},r5=e=>{try{localStorage.removeItem(e)}catch{}},_n=()=>{if(typeof window>"u")return Hl(_f);const t=new URLSearchParams(window.location.search).get("api"),n=t5(Z0);return Hl(t||n||_f)||Hl(_f)},nb=e=>{const t=Hl(e);t?n5(Z0,t):r5(Z0)},tr=e=>e?{Authorization:`Bearer ${e}`}:{},Zx=e=>{const t=new TextEncoder().encode(String(e));let n="";return t.forEach(i=>{n+=String.fromCharCode(i)}),btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"")},i5=e=>`${Zx(JSON.stringify({alg:"none",typ:"JWT"}))}.${Zx(JSON.stringify(e))}.offline`,s5=e=>{const t=String(e).trim().toLowerCase();return t.includes("admin")?"Admin":t.includes("manager")?"Manager":t.replace(/\\D/g,"").length>=9?"Recipient":"Driver"},o5=(e,t)=>{if(e==="Driver"){const n=String(t).trim().toUpperCase();return/^D\\d{3,}$/i.test(n)?n:"D002"}if(e==="Recipient"){const n=String(t).replace(/\\D/g,"");return n?`R${n.slice(-15)}`:"R000"}return"D001"};async function a5(e,t){const n=_n(),i=new URLSearchParams;i.append("username",e),i.append("password",t);try{return(await lt.post(`${n}/login`,i,{headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:3e3})).data}catch(l){if(l&&l.response)throw l;console.warn("Login API unavailable; using snapshot/offline token.",l);const c=String(e||"").trim()||"offline",f=s5(c),y={sub:c,driver_id:o5(f,c),role:f,offline:!0,exp:Math.floor(Date.now()/1e3)+7*24*60*60};return{access_token:i5(y),token_type:"bearer",role:f}}}async function rb(e){const t=_n();return(await lt.post(`${t}/recipient/signup`,e,{headers:{"Content-Type":"application/json"},timeout:7e3})).data}async function ib(e){const t=_n();return(await lt.get(`${t}/stats`,{headers:tr(e)})).data}async function G0(e){const t=_n();return(await lt.get(`${t}/me`,{headers:tr(e)})).data}async function sb(e,{scope:t="self",awb_limit:n=200}={}){const i=_n();return(await lt.get(`${i}/analytics`,{params:{scope:t,awb_limit:n},headers:tr(e)})).data}async function ob(e){const t=_n();return(await lt.get(`${t}/roles`,{headers:tr(e),timeout:5e3})).data}async function Mp(e){const t=_n();return(await lt.get(`${t}/users`,{headers:tr(e),timeout:7e3})).data}async function ab(e,t){const n=_n();return(await lt.post(`${n}/users`,t,{headers:{...tr(e),"Content-Type":"application/json"},timeout:7e3})).data}async function lb(e,t,n){const i=String(t||"").trim();if(!i)throw new Error("driver_id is required");const l=_n();return(await lt.patch(`${l}/users/${encodeURIComponent(i)}`,n,{headers:{...tr(e),"Content-Type":"application/json"},timeout:7e3})).data}async function l5(e){const t=_n();return(await lt.post(`${t}/sync-drivers`,null,{headers:tr(e),timeout:15e3})).data}async function cb(e){const t=_n();return(await lt.get(`${t}/status-options`,{headers:tr(e)})).data}async function fh(e,t){const n=_n();return(await lt.post(`${n}/update-awb`,t,{headers:tr(e)})).data}async function kp(e,t={}){const n=_n();return(await lt.get(`${n}/logs`,{params:t,headers:tr(e)})).data}async function Hc(e){const t=_n();try{return(await lt.get(`${t}/shipments`,{headers:tr(e),timeout:5e3})).data}catch(n){console.warn("Backend API unavailable, attempting to load static snapshot...",n);try{const i="/arynik1/data/shipments.json".replace("//","/"),l=await lt.get(i);console.info("Loaded shipments from static snapshot.");let c=l.data;if(e)try{const y=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),w=decodeURIComponent(window.atob(y).split("").map(function(T){return"%"+("00"+T.charCodeAt(0).toString(16)).slice(-2)}).join("")),g=JSON.parse(w),b=g.role,E=g.driver_id;if(b==="Driver")console.info(`Offline RBAC: Filtering for Driver ${E}`),c=c.filter(T=>T.driver_id===E);else if(b==="Recipient"){const D=String(g.sub||"").trim().replace(/\\D/g,"").slice(-9);D&&(console.info("Offline RBAC: Filtering for Recipient phone"),c=c.filter(P=>String((P==null?void 0:P.recipient_phone)||"").replace(/\\D/g,"").endsWith(D)))}}catch(f){console.warn("Offline RBAC: Failed to decode token",f)}return c}catch(i){throw console.error("Failed to load both API and static snapshot",i),n}}}async function ub(e,t,{refresh:n=!1}={}){const i=_n(),l=String(t||"").trim();if(!l)throw new Error("awb is required");try{return(await lt.get(`${i}/shipments/${encodeURIComponent(l)}`,{params:n?{refresh:!0}:{},headers:tr(e),timeout:7e3})).data}catch(c){console.warn("Backend shipment details unavailable, attempting static snapshot...",c);try{const f="/arynik1/data/shipments.json".replace("//","/"),y=await lt.get(f),g=(Array.isArray(y.data)?y.data:[]).find(b=>String((b==null?void 0:b.awb)||"").toUpperCase()===l.toUpperCase());if(g)return g}catch{}throw c}}async function Rp(e,t,n){const i=_n(),l=String(t||"").trim();if(!l)throw new Error("awb is required");const c=String(n||"").trim();if(!c)throw new Error("driver_id is required");return(await lt.post(`${i}/shipments/${encodeURIComponent(l)}/allocate`,{driver_id:c},{headers:{...tr(e),"Content-Type":"application/json"},timeout:7e3})).data}async function db(e,{limit:t=50,unread_only:n=!1}={}){const i=_n();return(await lt.get(`${i}/notifications`,{params:{limit:t,unread_only:n},headers:tr(e),timeout:7e3})).data}async function hb(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("notification_id is required");const i=_n();return(await lt.post(`${i}/notifications/${encodeURIComponent(String(n))}/read`,null,{headers:tr(e),timeout:7e3})).data}const c5=Object.freeze(Object.defineProperty({__proto__:null,allocateShipment:Rp,createUser:ab,getAnalytics:sb,getApiUrl:_n,getLogs:kp,getMe:G0,getNotifications:db,getRoles:ob,getShipment:ub,getShipments:Hc,getStats:ib,getStatusOptions:cb,isDemoMode:e5,listUsers:Mp,login:a5,markNotificationRead:hb,recipientSignup:rb,setApiUrl:nb,syncDrivers:l5,updateAwb:fh,updateUser:lb},Symbol.toStringTag,{value:"Module"})),Gx=e=>{try{const n=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(atob(n).split("").map(function(l){return"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(i)}catch{return null}},fb=F.createContext(),u5=({children:e})=>{const[t,n]=F.useState(null),[i,l]=F.useState(!0);F.useEffect(()=>{let y=!1;return(async()=>{const w=localStorage.getItem("token");if(!w){y||l(!1);return}const g=Gx(w);if(!g||!g.sub){console.warn("Invalid/undecodable token in localStorage; clearing it."),localStorage.removeItem("token"),y||l(!1);return}const b={username:g.sub,driver_id:g.driver_id,role:g.role,token:w,permissions:z0(g.role)};y||n(b);try{const E=await G0(w);!y&&E&&n(T=>({...T||b,...E,token:w,permissions:Array.isArray(E==null?void 0:E.permissions)?E.permissions:(T==null?void 0:T.permissions)||b.permissions}))}catch(E){console.warn("Failed to load /me; continuing with token payload only.",E)}finally{y||l(!1)}})(),()=>{y=!0}},[]);const c=async(y,w)=>{localStorage.setItem("token",y);const g=Gx(y);if(!g||!g.sub){console.error("Login returned an invalid token; clearing it."),localStorage.removeItem("token"),n(null);return}const b={username:g.sub,driver_id:g.driver_id,role:w||g.role,token:y,permissions:z0(w||g.role)};n(b);try{const E=await G0(y);E&&n(T=>({...T||b,...E,token:y,permissions:Array.isArray(E==null?void 0:E.permissions)?E.permissions:(T==null?void 0:T.permissions)||b.permissions}))}catch(E){console.warn("Failed to load /me after login; continuing with token payload only.",E)}},f=()=>{localStorage.setItem("token",""),localStorage.removeItem("token"),n(null)};return x.jsx(fb.Provider,{value:{user:t,login:c,logout:f,loading:i},children:!i&&e})},Vr=()=>F.useContext(fb),d5=({to:e,onClick:t,icon:n,label:i,isActive:l})=>{const c=`relative flex flex-col items-center justify-center gap-1.5 px-3 py-3 rounded-2xl transition-all duration-300 ${l?"text-white":"text-slate-500 hover:text-slate-300"}`,f=x.jsxs(x.Fragment,{children:[l&&x.jsx(qe.div,{layoutId:"nav-pill",className:"absolute inset-0 bg-gradient-to-t from-brand-blue/20 to-transparent rounded-2xl border-b-2 border-brand-blue shadow-[0_0_20px_rgba(59,130,246,0.5)]",transition:{type:"spring",stiffness:300,damping:30}}),x.jsx(n,{size:22,className:`relative z-10 transition-all duration-300 ${l?"scale-110 drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]":"scale-100"}`,strokeWidth:l?2.5:2}),x.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wide relative z-10 ${l?"text-white drop-shadow-md":"opacity-70"}`,children:i})]});return e?x.jsx(DE,{to:e,className:c,children:f}):x.jsx("button",{type:"button",onClick:t,className:c,"aria-label":i,children:f})};function h5({onOpenMenu:e}){const n=ea().pathname,{user:i}=Vr(),l=zn(i,gr),c=["Manager","Admin","Dispatcher","Driver"].includes(i==null?void 0:i.role),f=[{to:"/home",icon:p_,label:"Home"},...l?[{to:"/shipments",icon:ps,label:"Track"}]:[],...c?[{to:"/routes",icon:$s,label:"Routes"}]:[],{onClick:e,icon:hI,label:"Menu"}];return x.jsx("nav",{className:"fixed bottom-[calc(1.5rem+env(safe-area-inset-bottom))] left-1/2 -translate-x-1/2 z-50 w-full max-w-sm px-4",children:x.jsxs("div",{className:"glass-strong rounded-[32px] border-iridescent shadow-2xl px-2 py-2 flex justify-around items-center relative backdrop-blur-2xl",children:[x.jsx("div",{className:"absolute inset-x-4 top-0 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"}),f.map(y=>x.jsx(d5,{to:y.to,onClick:y.onClick,icon:y.icon,label:y.label,isActive:y.to?n===y.to||y.to!=="/home"&&n.startsWith(y.to)||n==="/"&&y.to==="/home":!1},y.to||y.label))]})})}const Qi=({icon:e,label:t,description:n,onClick:i})=>x.jsxs("button",{type:"button",onClick:i,className:"w-full p-4 glass-light rounded-2xl border border-white/10 hover:border-white/20 hover:bg-white/5 transition-all flex items-center gap-4 text-left",children:[x.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-violet-500/25 to-purple-600/15 border border-white/10",children:x.jsx(e,{size:20,className:"text-violet-300"})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("div",{className:"font-black text-white text-sm uppercase tracking-tight",children:t}),n?x.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:n}):null]})]});function f5({open:e,onClose:t}){const n=ci(),{user:i,logout:l}=Vr(),c=F.useMemo(()=>zn(i,gr),[i]),f=F.useMemo(()=>["Manager","Admin","Dispatcher","Driver"].includes(i==null?void 0:i.role),[i==null?void 0:i.role]),y=F.useMemo(()=>zn(i,Uo),[i]),w=F.useMemo(()=>zn(i,Bs),[i]),g=F.useMemo(()=>zn(i,ni),[i]),b=F.useMemo(()=>zn(i,yi),[i]),E=F.useMemo(()=>zn(i,ti),[i]);F.useEffect(()=>{if(!e)return;const I=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=I}},[e]);const T=I=>{n(I),t==null||t()},O=()=>{l(),t==null||t(),n("/login",{replace:!0})},D=(i==null?void 0:i.name)||(i==null?void 0:i.username)||"Driver",P=i!=null&&i.truck_plate?String(i.truck_plate).toUpperCase():null,V=(i==null?void 0:i.truck_phone)||null,z=String((i==null?void 0:i.role)||"")==="Recipient",R=z&&((i==null?void 0:i.phone_number)||(i==null?void 0:i.username))||null;return x.jsx(Qs,{children:e?x.jsxs(x.Fragment,{children:[x.jsx(qe.div,{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[60]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t}),x.jsx(qe.aside,{className:"fixed inset-y-0 right-0 w-full max-w-sm z-[61] p-4",initial:{x:60,opacity:0},animate:{x:0,opacity:1},exit:{x:60,opacity:0},transition:{type:"spring",stiffness:260,damping:28},"aria-label":"App menu",role:"dialog","aria-modal":"true",children:x.jsxs("div",{className:"h-full glass-strong rounded-[32px] border-iridescent shadow-2xl overflow-hidden flex flex-col",children:[x.jsxs("div",{className:"p-5 flex items-center justify-between border-b border-white/10",children:[x.jsxs("div",{children:[x.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Menu"}),x.jsx("div",{className:"text-lg font-black text-white mt-1",children:"Navigation"})]}),x.jsx("button",{type:"button",onClick:t,className:"w-11 h-11 rounded-2xl glass-light border border-white/10 flex items-center justify-center hover:bg-white/5 transition-all","aria-label":"Close menu",children:x.jsx(Sp,{size:18,className:"text-slate-300"})})]}),x.jsx("div",{className:"p-5",children:x.jsxs("div",{className:"glass-light rounded-3xl border border-white/10 p-4",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center shadow-glow-md",children:x.jsx(ra,{size:22,className:"text-white"})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"font-black text-white truncate",children:D}),x.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-0.5",children:[(i==null?void 0:i.role)||"Role","  ID: ",(i==null?void 0:i.driver_id)||"N/A"]})]})]}),x.jsx("div",{className:"mt-4 grid grid-cols-2 gap-3",children:z?x.jsxs("div",{className:"p-3 rounded-2xl bg-slate-900/40 border border-white/10 col-span-2",children:[x.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[x.jsx(Nd,{size:14}),x.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Recipient Phone"})]}),x.jsx("div",{className:"text-sm font-black text-white mt-1 truncate",children:R||"--"})]}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"p-3 rounded-2xl bg-slate-900/40 border border-white/10",children:[x.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[x.jsx(Cp,{size:14}),x.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Truck"})]}),x.jsx("div",{className:"text-sm font-black text-white mt-1 truncate",children:P||"Unassigned"})]}),x.jsxs("div",{className:"p-3 rounded-2xl bg-slate-900/40 border border-white/10",children:[x.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[x.jsx(Nd,{size:14}),x.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Phone"})]}),x.jsx("div",{className:"text-sm font-black text-white mt-1 truncate",children:V||"--"})]})]})}),w?x.jsx("div",{className:"mt-3 text-[10px] text-emerald-400 font-black uppercase tracking-widest",children:"Analytics: ALL enabled"}):null]})}),x.jsxs("div",{className:"flex-1 px-5 pb-5 overflow-y-auto space-y-3",children:[x.jsx(Qi,{icon:p_,label:"Home",description:"Scanner & quick actions",onClick:()=>T("/home")}),c?x.jsxs(x.Fragment,{children:[x.jsx(Qi,{icon:ps,label:"Shipments",description:"Track shipments",onClick:()=>T("/shipments")}),f?x.jsx(Qi,{icon:$s,label:"Routes",description:"Plan deliveries",onClick:()=>T("/routes")}):null]}):null,E?x.jsx(Qi,{icon:Nc,label:"Notifications",description:"Allocation updates",onClick:()=>T("/notifications")}):null,g?x.jsx(Qi,{icon:aI,label:"History",description:"Logs & updates",onClick:()=>T("/history")}):null,c?x.jsx(Qi,{icon:h_,label:"Calendar",description:"Daily overview",onClick:()=>T("/calendar")}):null,b?x.jsx(Qi,{icon:d_,label:"Statistics",description:"Trucks, drivers, AWBs, ESCH",onClick:()=>T("/analytics")}):null,y?x.jsx(Qi,{icon:__,label:"Users",description:"Create accounts & roles",onClick:()=>T("/users")}):null,x.jsx(Qi,{icon:mI,label:"Settings",description:"Account & API",onClick:()=>T("/settings")}),x.jsxs("button",{type:"button",onClick:O,className:"w-full p-4 rounded-2xl bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-400 hover:to-rose-500 text-white font-black uppercase tracking-wider shadow-lg flex items-center justify-center gap-3 transition-all",children:[x.jsx(x_,{size:18}),"Sign Out"]})]})]})})]}):null})}function p5(){const[e,t]=F.useState(!1);return x.jsxs("div",{className:"min-h-screen pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[" ",x.jsx("div",{className:"max-w-xl mx-auto",children:x.jsx(SE,{context:{openMenu:()=>t(!0)}})}),x.jsx(h5,{onOpenMenu:()=>t(!0)}),x.jsx(f5,{open:e,onClose:()=>t(!1)})]})}function m5(){const[e,t]=F.useState(null),[n,i]=F.useState(!0);F.useEffect(()=>{(async()=>{try{const w=localStorage.getItem("token"),g=await ib(w);t(g)}catch(w){console.error("Failed to fetch stats",w)}finally{i(!1)}})()},[]);const l=(y,w=2e3)=>{const[g,b]=F.useState(0);return F.useEffect(()=>{let E=0;const T=y/(w/16),O=setInterval(()=>{E+=T,E>=y?(b(y),clearInterval(O)):b(Math.floor(E))},16);return()=>clearInterval(O)},[y,w]),g},c=l((e==null?void 0:e.today_count)||0),f=l((e==null?void 0:e.total_count)||0);return n?x.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-pulse",children:[x.jsx("div",{className:"h-24 glass-strong rounded-3xl border-iridescent opacity-50"}),x.jsx("div",{className:"h-24 glass-strong rounded-3xl border-iridescent opacity-50"})]}):x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{className:"glass-strong p-5 rounded-3xl shadow-xl shadow-brand-blue/20 border-iridescent flex flex-col justify-between relative overflow-hidden group",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-blue/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),x.jsx("div",{className:"absolute -right-4 -top-4 opacity-10 scale-150 group-hover:rotate-12 transition-transform duration-500",children:x.jsx(ah,{size:80,className:"text-brand-blue"})}),x.jsxs("div",{className:"relative z-10 flex items-center gap-2 mb-2",children:[x.jsx("div",{className:"p-1.5 bg-brand-blue/20 rounded-lg",children:x.jsx(Td,{size:16,className:"text-brand-blue"})}),x.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Today"})]}),x.jsxs("div",{className:"relative z-10",children:[x.jsx("span",{className:"text-3xl font-black text-white",children:c}),x.jsx("p",{className:"text-[10px] font-bold text-slate-400",children:"Success Syncs"})]})]}),x.jsxs("div",{className:"glass-strong p-5 rounded-3xl shadow-sm border-iridescent flex flex-col justify-between relative overflow-hidden group",children:[x.jsx("div",{className:"absolute -right-4 -top-4 opacity-5 scale-150 text-slate-400 group-hover:rotate-12 transition-transform duration-500",children:x.jsx(c_,{size:80})}),x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx("div",{className:"p-1.5 bg-slate-700/50 rounded-lg text-slate-400",children:x.jsx(ps,{size:16})}),x.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"All Time"})]}),x.jsxs("div",{children:[x.jsx("span",{className:"text-3xl font-black text-white",children:f}),x.jsx("p",{className:"text-[10px] font-bold text-slate-400",children:"Total Updates"})]})]})]})}var Fe;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Fe||(Fe={}));var Yx=new Map([[Fe.QR_CODE,"QR_CODE"],[Fe.AZTEC,"AZTEC"],[Fe.CODABAR,"CODABAR"],[Fe.CODE_39,"CODE_39"],[Fe.CODE_93,"CODE_93"],[Fe.CODE_128,"CODE_128"],[Fe.DATA_MATRIX,"DATA_MATRIX"],[Fe.MAXICODE,"MAXICODE"],[Fe.ITF,"ITF"],[Fe.EAN_13,"EAN_13"],[Fe.EAN_8,"EAN_8"],[Fe.PDF_417,"PDF_417"],[Fe.RSS_14,"RSS_14"],[Fe.RSS_EXPANDED,"RSS_EXPANDED"],[Fe.UPC_A,"UPC_A"],[Fe.UPC_E,"UPC_E"],[Fe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Xx;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(Xx||(Xx={}));function g5(e){return Object.values(Fe).includes(e)}var so;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(so||(so={}));var wi=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[so.SCAN_TYPE_CAMERA,so.SCAN_TYPE_FILE],e}(),pb=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Yx.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,Yx.get(t))},e}(),qx=function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),Y0;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Y0||(Y0={}));var mb=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:Y0.UNKWOWN_ERROR}},e}(),gb=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Li(e){return typeof e>"u"||e===null}function x5(e,t,n){return e>n?n:e<t?t:e}var Ra=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),Ot=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),Kx=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),xb=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var i=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var l=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],c=new Set(l),f=Object.keys(t),y=0,w=f;y<w.length;y++){var g=w[y];if(c.has(g))return n.logError("".concat(g," is not supported videoConstaints."),!0),!1}return!0},e}(),X0={exports:{}};(function(e,t){(function(n,i){i(t)})(fa,function(n){function i(M){return M==null}var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,r){M.__proto__=r}||function(M,r){for(var s in r)r.hasOwnProperty(s)&&(M[s]=r[s])};function c(M,r){l(M,r);function s(){this.constructor=M}M.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function f(M,r){var s=Object.setPrototypeOf;s?s(M,r):M.__proto__=r}function y(M,r){r===void 0&&(r=M.constructor);var s=Error.captureStackTrace;s&&s(M,r)}var w=function(M){c(r,M);function r(s){var a=this.constructor,u=M.call(this,s)||this;return Object.defineProperty(u,"name",{value:a.name,enumerable:!1}),f(u,a.prototype),y(u),u}return r}(Error);class g extends w{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}g.kind="Exception";class b extends g{}b.kind="ArgumentException";class E extends g{}E.kind="IllegalArgumentException";class T{constructor(r){if(this.binarizer=r,r===null)throw new E("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,a,u){const d=this.binarizer.getLuminanceSource().crop(r,s,a,u);return new T(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new T(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new T(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class O extends g{static getChecksumInstance(){return new O}}O.kind="ChecksumException";class D{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class P{static arraycopy(r,s,a,u,d){for(;d--;)a[u++]=r[s++]}static currentTimeMillis(){return Date.now()}}class V extends g{}V.kind="IndexOutOfBoundsException";class z extends V{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}z.kind="ArrayIndexOutOfBoundsException";class R{static fill(r,s){for(let a=0,u=r.length;a<u;a++)r[a]=s}static fillWithin(r,s,a,u){R.rangeCheck(r.length,s,a);for(let d=s;d<a;d++)r[d]=u}static rangeCheck(r,s,a){if(s>a)throw new E("fromIndex("+s+") > toIndex("+a+")");if(s<0)throw new z(s);if(a>r)throw new z(a)}static asList(...r){return r}static create(r,s,a){return Array.from({length:r}).map(d=>Array.from({length:s}).fill(a))}static createInt32Array(r,s,a){return Array.from({length:r}).map(d=>Int32Array.from({length:s}).fill(a))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let a=0,u=r.length;a<u;a++)if(r[a]!==s[a])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const a of r)s=31*s+a;return s}static fillUint8Array(r,s){for(let a=0;a!==r.length;a++)r[a]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const a=new Uint8Array(s);return a.set(r),a}return r.slice(0,s)}static copyOfRange(r,s,a){const u=a-s,d=new Int32Array(u);return P.arraycopy(r,s,d,0,u),d}static binarySearch(r,s,a){a===void 0&&(a=R.numberComparator);let u=0,d=r.length-1;for(;u<=d;){const p=d+u>>1,m=a(s,r[p]);if(m>0)u=p+1;else if(m<0)d=p-1;else return p}return-u-1}static numberComparator(r,s){return r-s}}class I{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let a=31;return s=r<<16,s!==0&&(a-=16,r=s),s=r<<8,s!==0&&(a-=8,r=s),s=r<<4,s!==0&&(a-=4,r=s),s=r<<2,s!==0&&(a-=2,r=s),a-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}I.MIN_VALUE_32_BITS=-2147483648,I.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Z{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=Z.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=Z.makeArray(r);P.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const a=this.bits;let u=Math.floor(r/32),d=a[u];d&=~((1<<(r&31))-1);const p=a.length;for(;d===0;){if(++u===p)return s;d=a[u]}const m=u*32+I.numberOfTrailingZeros(d);return m>s?s:m}getNextUnset(r){const s=this.size;if(r>=s)return s;const a=this.bits;let u=Math.floor(r/32),d=~a[u];d&=~((1<<(r&31))-1);const p=a.length;for(;d===0;){if(++u===p)return s;d=~a[u]}const m=u*32+I.numberOfTrailingZeros(d);return m>s?s:m}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new E;if(s===r)return;s--;const a=Math.floor(r/32),u=Math.floor(s/32),d=this.bits;for(let p=a;p<=u;p++){const m=p>a?0:r&31,C=(2<<(p<u?31:s&31))-(1<<m);d[p]|=C}}clear(){const r=this.bits.length,s=this.bits;for(let a=0;a<r;a++)s[a]=0}isRange(r,s,a){if(s<r||r<0||s>this.size)throw new E;if(s===r)return!0;s--;const u=Math.floor(r/32),d=Math.floor(s/32),p=this.bits;for(let m=u;m<=d;m++){const _=m>u?0:r&31,A=(2<<(m<d?31:s&31))-(1<<_)&4294967295;if((p[m]&A)!==(a?A:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new E("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let a=s;a>0;a--)this.appendBit((r>>a-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let a=0;a<s;a++)this.appendBit(r.get(a))}xor(r){if(this.size!==r.size)throw new E("Sizes don't match");const s=this.bits;for(let a=0,u=s.length;a<u;a++)s[a]^=r.bits[a]}toBytes(r,s,a,u){for(let d=0;d<u;d++){let p=0;for(let m=0;m<8;m++)this.get(r)&&(p|=1<<7-m),r++;s[a+d]=p}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),a=s+1,u=this.bits;for(let d=0;d<a;d++){let p=u[d];p=p>>1&1431655765|(p&1431655765)<<1,p=p>>2&858993459|(p&858993459)<<2,p=p>>4&252645135|(p&252645135)<<4,p=p>>8&16711935|(p&16711935)<<8,p=p>>16&65535|(p&65535)<<16,r[s-d]=p}if(this.size!==a*32){const d=a*32-this.size;let p=r[0]>>>d;for(let m=1;m<a;m++){const _=r[m];p|=_<<32-d,r[m-1]=p,p=_>>>d}r[a-1]=p}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof Z))return!1;const s=r;return this.size===s.size&&R.equals(this.bits,s.bits)}hashCode(){return 31*this.size+R.hashCode(this.bits)}toString(){let r="";for(let s=0,a=this.size;s<a;s++)s&7||(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new Z(this.size,this.bits.slice())}}var Q;(function(M){M[M.OTHER=0]="OTHER",M[M.PURE_BARCODE=1]="PURE_BARCODE",M[M.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",M[M.TRY_HARDER=3]="TRY_HARDER",M[M.CHARACTER_SET=4]="CHARACTER_SET",M[M.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",M[M.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",M[M.ASSUME_GS1=7]="ASSUME_GS1",M[M.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",M[M.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",M[M.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Q||(Q={}));var X=Q;class G extends g{static getFormatInstance(){return new G}}G.kind="FormatException";var ee;(function(M){M[M.Cp437=0]="Cp437",M[M.ISO8859_1=1]="ISO8859_1",M[M.ISO8859_2=2]="ISO8859_2",M[M.ISO8859_3=3]="ISO8859_3",M[M.ISO8859_4=4]="ISO8859_4",M[M.ISO8859_5=5]="ISO8859_5",M[M.ISO8859_6=6]="ISO8859_6",M[M.ISO8859_7=7]="ISO8859_7",M[M.ISO8859_8=8]="ISO8859_8",M[M.ISO8859_9=9]="ISO8859_9",M[M.ISO8859_10=10]="ISO8859_10",M[M.ISO8859_11=11]="ISO8859_11",M[M.ISO8859_13=12]="ISO8859_13",M[M.ISO8859_14=13]="ISO8859_14",M[M.ISO8859_15=14]="ISO8859_15",M[M.ISO8859_16=15]="ISO8859_16",M[M.SJIS=16]="SJIS",M[M.Cp1250=17]="Cp1250",M[M.Cp1251=18]="Cp1251",M[M.Cp1252=19]="Cp1252",M[M.Cp1256=20]="Cp1256",M[M.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",M[M.UTF8=22]="UTF8",M[M.ASCII=23]="ASCII",M[M.Big5=24]="Big5",M[M.GB18030=25]="GB18030",M[M.EUC_KR=26]="EUC_KR"})(ee||(ee={}));class U{constructor(r,s,a,...u){this.valueIdentifier=r,this.name=a,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=u,U.VALUE_IDENTIFIER_TO_ECI.set(r,this),U.NAME_TO_ECI.set(a,this);const d=this.values;for(let p=0,m=d.length;p!==m;p++){const _=d[p];U.VALUES_TO_ECI.set(_,this)}for(const p of u)U.NAME_TO_ECI.set(p,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new G("incorect value");const s=U.VALUES_TO_ECI.get(r);if(s===void 0)throw new G("incorect value");return s}static getCharacterSetECIByName(r){const s=U.NAME_TO_ECI.get(r);if(s===void 0)throw new G("incorect value");return s}equals(r){if(!(r instanceof U))return!1;const s=r;return this.getName()===s.getName()}}U.VALUE_IDENTIFIER_TO_ECI=new Map,U.VALUES_TO_ECI=new Map,U.NAME_TO_ECI=new Map,U.Cp437=new U(ee.Cp437,Int32Array.from([0,2]),"Cp437"),U.ISO8859_1=new U(ee.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),U.ISO8859_2=new U(ee.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),U.ISO8859_3=new U(ee.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),U.ISO8859_4=new U(ee.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),U.ISO8859_5=new U(ee.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),U.ISO8859_6=new U(ee.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),U.ISO8859_7=new U(ee.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),U.ISO8859_8=new U(ee.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),U.ISO8859_9=new U(ee.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),U.ISO8859_10=new U(ee.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),U.ISO8859_11=new U(ee.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),U.ISO8859_13=new U(ee.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),U.ISO8859_14=new U(ee.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),U.ISO8859_15=new U(ee.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),U.ISO8859_16=new U(ee.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),U.SJIS=new U(ee.SJIS,20,"SJIS","Shift_JIS"),U.Cp1250=new U(ee.Cp1250,21,"Cp1250","windows-1250"),U.Cp1251=new U(ee.Cp1251,22,"Cp1251","windows-1251"),U.Cp1252=new U(ee.Cp1252,23,"Cp1252","windows-1252"),U.Cp1256=new U(ee.Cp1256,24,"Cp1256","windows-1256"),U.UnicodeBigUnmarked=new U(ee.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),U.UTF8=new U(ee.UTF8,26,"UTF8","UTF-8"),U.ASCII=new U(ee.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),U.Big5=new U(ee.Big5,28,"Big5"),U.GB18030=new U(ee.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),U.EUC_KR=new U(ee.EUC_KR,30,"EUC_KR","EUC-KR");class re extends g{}re.kind="UnsupportedOperationException";class me{static decode(r,s){const a=this.encodingName(s);return this.customDecoder?this.customDecoder(r,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(r,a):new TextDecoder(a).decode(r)}static shouldDecodeOnFallback(r){return!me.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const a=this.encodingName(s);return this.customEncoder?this.customEncoder(r,a):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof U?r:U.getCharacterSetECIByName(r)}static decodeFallback(r,s){const a=this.encodingCharacterSet(s);if(me.isDecodeFallbackSupported(a)){let u="";for(let d=0,p=r.length;d<p;d++){let m=r[d].toString(16);m.length<2&&(m="0"+m),u+="%"+m}return decodeURIComponent(u)}if(a.equals(U.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new re(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(U.UTF8)||r.equals(U.ISO8859_1)||r.equals(U.ASCII)}static encodeFallback(r){const a=btoa(unescape(encodeURIComponent(r))).split(""),u=[];for(let d=0;d<a.length;d++)u.push(a[d].charCodeAt(0));return new Uint8Array(u)}}class le{static castAsNonUtf8Char(r,s=null){const a=s?s.getName():this.ISO88591;return me.decode(new Uint8Array([r]),a)}static guessEncoding(r,s){if(s!=null&&s.get(X.CHARACTER_SET)!==void 0)return s.get(X.CHARACTER_SET).toString();const a=r.length;let u=!0,d=!0,p=!0,m=0,_=0,C=0,A=0,k=0,B=0,W=0,K=0,J=0,ie=0,ce=0;const Ce=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let Se=0;Se<a&&(u||d||p);Se++){const _e=r[Se]&255;p&&(m>0?_e&128?m--:p=!1:_e&128&&(_e&64?(m++,_e&32?(m++,_e&16?(m++,_e&8?p=!1:A++):C++):_++):p=!1)),u&&(_e>127&&_e<160?u=!1:_e>159&&(_e<192||_e===215||_e===247)&&ce++),d&&(k>0?_e<64||_e===127||_e>252?d=!1:k--:_e===128||_e===160||_e>239?d=!1:_e>160&&_e<224?(B++,K=0,W++,W>J&&(J=W)):_e>127?(k++,W=0,K++,K>ie&&(ie=K)):(W=0,K=0))}return p&&m>0&&(p=!1),d&&k>0&&(d=!1),p&&(Ce||_+C+A>0)?le.UTF8:d&&(le.ASSUME_SHIFT_JIS||J>=3||ie>=3)?le.SHIFT_JIS:u&&d?J===2&&B===2||ce*10>=a?le.SHIFT_JIS:le.ISO88591:u?le.ISO88591:d?le.SHIFT_JIS:p?le.UTF8:le.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let a=-1;function u(p,m,_,C,A,k){if(p==="%%")return"%";if(s[++a]===void 0)return;p=C?parseInt(C.substr(1)):void 0;let B=A?parseInt(A.substr(1)):void 0,W;switch(k){case"s":W=s[a];break;case"c":W=s[a][0];break;case"f":W=parseFloat(s[a]).toFixed(p);break;case"p":W=parseFloat(s[a]).toPrecision(p);break;case"e":W=parseFloat(s[a]).toExponential(p);break;case"x":W=parseInt(s[a]).toString(B||16);break;case"d":W=parseFloat(parseInt(s[a],B||10).toPrecision(p)).toFixed(0);break}W=typeof W=="object"?JSON.stringify(W):(+W).toString(B);let K=parseInt(_),J=_&&_[0]+""=="0"?"0":" ";for(;W.length<K;)W=m!==void 0?W+J:J+W;return W}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,u)}static getBytes(r,s){return me.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}le.SHIFT_JIS=U.SJIS.getName(),le.GB2312="GB2312",le.ISO88591=U.ISO8859_1.getName(),le.EUC_JP="EUC_JP",le.UTF8=U.UTF8.getName(),le.PLATFORM_DEFAULT_ENCODING=le.UTF8,le.ASSUME_SHIFT_JIS=!1;class Ie{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=le.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,a){for(let u=s;s<s+a;u++)this.append(r[u]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class je{constructor(r,s,a,u){if(this.width=r,this.height=s,this.rowSize=a,this.bits=u,s==null&&(s=r),this.height=s,r<1||s<1)throw new E("Both dimensions must be greater than 0");a==null&&(a=Math.floor((r+31)/32)),this.rowSize=a,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,a=r[0].length,u=new je(a,s);for(let d=0;d<s;d++){const p=r[d];for(let m=0;m<a;m++)p[m]&&u.set(m,d)}return u}static parseFromString(r,s,a){if(r===null)throw new E("stringRepresentation cannot be null");const u=new Array(r.length);let d=0,p=0,m=-1,_=0,C=0;for(;C<r.length;)if(r.charAt(C)===`
`||r.charAt(C)==="\r"){if(d>p){if(m===-1)m=d-p;else if(d-p!==m)throw new E("row lengths do not match");p=d,_++}C++}else if(r.substring(C,C+s.length)===s)C+=s.length,u[d]=!0,d++;else if(r.substring(C,C+a.length)===a)C+=a.length,u[d]=!1,d++;else throw new E("illegal character encountered: "+r.substring(C));if(d>p){if(m===-1)m=d-p;else if(d-p!==m)throw new E("row lengths do not match");_++}const A=new je(m,_);for(let k=0;k<d;k++)u[k]&&A.set(Math.floor(k%m),Math.floor(k/m));return A}get(r,s){const a=s*this.rowSize+Math.floor(r/32);return(this.bits[a]>>>(r&31)&1)!==0}set(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]|=1<<(r&31)&4294967295}unset(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]&=~(1<<(r&31)&4294967295)}flip(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new E("input matrix dimensions do not match");const s=new Z(Math.floor(this.width/32)+1),a=this.rowSize,u=this.bits;for(let d=0,p=this.height;d<p;d++){const m=d*a,_=r.getRow(d,s).getBitArray();for(let C=0;C<a;C++)u[m+C]^=_[C]}}clear(){const r=this.bits,s=r.length;for(let a=0;a<s;a++)r[a]=0}setRegion(r,s,a,u){if(s<0||r<0)throw new E("Left and top must be nonnegative");if(u<1||a<1)throw new E("Height and width must be at least 1");const d=r+a,p=s+u;if(p>this.height||d>this.width)throw new E("The region must fit inside the matrix");const m=this.rowSize,_=this.bits;for(let C=s;C<p;C++){const A=C*m;for(let k=r;k<d;k++)_[A+Math.floor(k/32)]|=1<<(k&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new Z(this.width):s.clear();const a=this.rowSize,u=this.bits,d=r*a;for(let p=0;p<a;p++)s.setBulk(p*32,u[d+p]);return s}setRow(r,s){P.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let a=new Z(r),u=new Z(r);for(let d=0,p=Math.floor((s+1)/2);d<p;d++)a=this.getRow(d,a),u=this.getRow(s-1-d,u),a.reverse(),u.reverse(),this.setRow(d,u),this.setRow(s-1-d,a)}getEnclosingRectangle(){const r=this.width,s=this.height,a=this.rowSize,u=this.bits;let d=r,p=s,m=-1,_=-1;for(let C=0;C<s;C++)for(let A=0;A<a;A++){const k=u[C*a+A];if(k!==0){if(C<p&&(p=C),C>_&&(_=C),A*32<d){let B=0;for(;!(k<<31-B&4294967295);)B++;A*32+B<d&&(d=A*32+B)}if(A*32+31>m){let B=31;for(;!(k>>>B);)B--;A*32+B>m&&(m=A*32+B)}}}return m<d||_<p?null:Int32Array.from([d,p,m-d+1,_-p+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let a=0;for(;a<s.length&&s[a]===0;)a++;if(a===s.length)return null;const u=a/r;let d=a%r*32;const p=s[a];let m=0;for(;!(p<<31-m&4294967295);)m++;return d+=m,Int32Array.from([d,u])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let a=s.length-1;for(;a>=0&&s[a]===0;)a--;if(a<0)return null;const u=Math.floor(a/r);let d=Math.floor(a%r)*32;const p=s[a];let m=31;for(;!(p>>>m);)m--;return d+=m,Int32Array.from([d,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof je))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&R.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+R.hashCode(this.bits),r}toString(r="X ",s="  ",a=`
`){return this.buildToString(r,s,a)}buildToString(r,s,a){let u=new Ie;for(let d=0,p=this.height;d<p;d++){for(let m=0,_=this.width;m<_;m++)u.append(this.get(m,d)?r:s);u.append(a)}return u.toString()}clone(){return new je(this.width,this.height,this.rowSize,this.bits.slice())}}class ue extends g{static getNotFoundInstance(){return new ue}}ue.kind="NotFoundException";class Me extends D{constructor(r){super(r),this.luminances=Me.EMPTY,this.buckets=new Int32Array(Me.LUMINANCE_BUCKETS)}getBlackRow(r,s){const a=this.getLuminanceSource(),u=a.getWidth();s==null||s.getSize()<u?s=new Z(u):s.clear(),this.initArrays(u);const d=a.getRow(r,this.luminances),p=this.buckets;for(let _=0;_<u;_++)p[(d[_]&255)>>Me.LUMINANCE_SHIFT]++;const m=Me.estimateBlackPoint(p);if(u<3)for(let _=0;_<u;_++)(d[_]&255)<m&&s.set(_);else{let _=d[0]&255,C=d[1]&255;for(let A=1;A<u-1;A++){const k=d[A+1]&255;(C*4-_-k)/2<m&&s.set(A),_=C,C=k}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),a=r.getHeight(),u=new je(s,a);this.initArrays(s);const d=this.buckets;for(let _=1;_<5;_++){const C=Math.floor(a*_/5),A=r.getRow(C,this.luminances),k=Math.floor(s*4/5);for(let B=Math.floor(s/5);B<k;B++){const W=A[B]&255;d[W>>Me.LUMINANCE_SHIFT]++}}const p=Me.estimateBlackPoint(d),m=r.getMatrix();for(let _=0;_<a;_++){const C=_*s;for(let A=0;A<s;A++)(m[C+A]&255)<p&&u.set(A,_)}return u}createBinarizer(r){return new Me(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let a=0;a<Me.LUMINANCE_BUCKETS;a++)s[a]=0}static estimateBlackPoint(r){const s=r.length;let a=0,u=0,d=0;for(let A=0;A<s;A++)r[A]>d&&(u=A,d=r[A]),r[A]>a&&(a=r[A]);let p=0,m=0;for(let A=0;A<s;A++){const k=A-u,B=r[A]*k*k;B>m&&(p=A,m=B)}if(u>p){const A=u;u=p,p=A}if(p-u<=s/16)throw new ue;let _=p-1,C=-1;for(let A=p-1;A>u;A--){const k=A-u,B=k*k*(p-A)*(a-r[A]);B>C&&(_=A,C=B)}return _<<Me.LUMINANCE_SHIFT}}Me.LUMINANCE_BITS=5,Me.LUMINANCE_SHIFT=8-Me.LUMINANCE_BITS,Me.LUMINANCE_BUCKETS=1<<Me.LUMINANCE_BITS,Me.EMPTY=Uint8ClampedArray.from([0]);class Oe extends Me{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),a=r.getHeight();if(s>=Oe.MINIMUM_DIMENSION&&a>=Oe.MINIMUM_DIMENSION){const u=r.getMatrix();let d=s>>Oe.BLOCK_SIZE_POWER;s&Oe.BLOCK_SIZE_MASK&&d++;let p=a>>Oe.BLOCK_SIZE_POWER;a&Oe.BLOCK_SIZE_MASK&&p++;const m=Oe.calculateBlackPoints(u,d,p,s,a),_=new je(s,a);Oe.calculateThresholdForBlock(u,d,p,s,a,m,_),this.matrix=_}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new Oe(r)}static calculateThresholdForBlock(r,s,a,u,d,p,m){const _=d-Oe.BLOCK_SIZE,C=u-Oe.BLOCK_SIZE;for(let A=0;A<a;A++){let k=A<<Oe.BLOCK_SIZE_POWER;k>_&&(k=_);const B=Oe.cap(A,2,a-3);for(let W=0;W<s;W++){let K=W<<Oe.BLOCK_SIZE_POWER;K>C&&(K=C);const J=Oe.cap(W,2,s-3);let ie=0;for(let Ce=-2;Ce<=2;Ce++){const Se=p[B+Ce];ie+=Se[J-2]+Se[J-1]+Se[J]+Se[J+1]+Se[J+2]}const ce=ie/25;Oe.thresholdBlock(r,K,k,ce,u,m)}}}static cap(r,s,a){return r<s?s:r>a?a:r}static thresholdBlock(r,s,a,u,d,p){for(let m=0,_=a*d+s;m<Oe.BLOCK_SIZE;m++,_+=d)for(let C=0;C<Oe.BLOCK_SIZE;C++)(r[_+C]&255)<=u&&p.set(s+C,a+m)}static calculateBlackPoints(r,s,a,u,d){const p=d-Oe.BLOCK_SIZE,m=u-Oe.BLOCK_SIZE,_=new Array(a);for(let C=0;C<a;C++){_[C]=new Int32Array(s);let A=C<<Oe.BLOCK_SIZE_POWER;A>p&&(A=p);for(let k=0;k<s;k++){let B=k<<Oe.BLOCK_SIZE_POWER;B>m&&(B=m);let W=0,K=255,J=0;for(let ce=0,Ce=A*u+B;ce<Oe.BLOCK_SIZE;ce++,Ce+=u){for(let Se=0;Se<Oe.BLOCK_SIZE;Se++){const _e=r[Ce+Se]&255;W+=_e,_e<K&&(K=_e),_e>J&&(J=_e)}if(J-K>Oe.MIN_DYNAMIC_RANGE)for(ce++,Ce+=u;ce<Oe.BLOCK_SIZE;ce++,Ce+=u)for(let Se=0;Se<Oe.BLOCK_SIZE;Se++)W+=r[Ce+Se]&255}let ie=W>>Oe.BLOCK_SIZE_POWER*2;if(J-K<=Oe.MIN_DYNAMIC_RANGE&&(ie=K/2,C>0&&k>0)){const ce=(_[C-1][k]+2*_[C][k-1]+_[C-1][k-1])/4;K<ce&&(ie=ce)}_[C][k]=ie}}return _}}Oe.BLOCK_SIZE_POWER=3,Oe.BLOCK_SIZE=1<<Oe.BLOCK_SIZE_POWER,Oe.BLOCK_SIZE_MASK=Oe.BLOCK_SIZE-1,Oe.MINIMUM_DIMENSION=Oe.BLOCK_SIZE*5,Oe.MIN_DYNAMIC_RANGE=24;class Y{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,a,u){throw new re("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new re("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new re("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new Ie;for(let a=0;a<this.height;a++){const u=this.getRow(a,r);for(let d=0;d<this.width;d++){const p=u[d]&255;let m;p<64?m="#":p<128?m="+":p<192?m=".":m=" ",s.append(m)}s.append(`
`)}return s.toString()}}class ve extends Y{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const a=this.delegate.getRow(r,s),u=this.getWidth();for(let d=0;d<u;d++)a[d]=255-(a[d]&255);return a}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(s);for(let u=0;u<s;u++)a[u]=255-(r[u]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,a,u){return new ve(this.delegate.crop(r,s,a,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ve(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ve(this.delegate.rotateCounterClockwise45())}}class oe extends Y{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=oe.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return oe.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,a){const u=new Uint8ClampedArray(s*a);for(let d=0,p=0,m=r.length;d<m;d+=4,p++){let _;if(r[d+3]===0)_=255;else{const A=r[d],k=r[d+1],B=r[d+2];_=306*A+601*k+117*B+512>>10}u[p]=_}return u}getRow(r,s){if(r<0||r>=this.getHeight())throw new E("Requested row is outside the image: "+r);const a=this.getWidth(),u=r*a;return s===null?s=this.buffer.slice(u,u+a):(s.length<a&&(s=new Uint8ClampedArray(a)),s.set(this.buffer.slice(u,u+a))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,a,u){return super.crop(r,s,a,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),a=s.getContext("2d"),u=r*oe.DEGREE_TO_RADIANS,d=this.canvas.width,p=this.canvas.height,m=Math.ceil(Math.abs(Math.cos(u))*d+Math.abs(Math.sin(u))*p),_=Math.ceil(Math.abs(Math.sin(u))*d+Math.abs(Math.cos(u))*p);return s.width=m,s.height=_,a.translate(m/2,_/2),a.rotate(u),a.drawImage(this.canvas,d/-2,p/-2),this.buffer=oe.makeBufferFromCanvasImageData(s),this}invert(){return new ve(this)}}oe.DEGREE_TO_RADIANS=Math.PI/180;class be{constructor(r,s,a){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Pe=(globalThis||fa||self||window||void 0)&&(globalThis||fa||self||window||void 0).__awaiter||function(M,r,s,a){function u(d){return d instanceof s?d:new s(function(p){p(d)})}return new(s||(s=Promise))(function(d,p){function m(A){try{C(a.next(A))}catch(k){p(k)}}function _(A){try{C(a.throw(A))}catch(k){p(k)}}function C(A){A.done?d(A.value):u(A.value).then(m,_)}C((a=a.apply(M,r||[])).next())})};class ot{constructor(r,s=500,a){this.reader=r,this.timeBetweenScansMillis=s,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Pe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const a of r){const u=a.kind==="video"?"videoinput":a.kind;if(u!=="videoinput")continue;const d=a.deviceId||a.id,p=a.label||`Video device ${s.length+1}`,m=a.groupId,_={deviceId:d,label:p,kind:u,groupId:m};s.push(_)}return s})}getVideoInputDevices(){return Pe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new be(s.deviceId,s.label))})}findDeviceById(r){return Pe(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(a=>a.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return Pe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return Pe(this,void 0,void 0,function*(){this.reset();let a;r?a={deviceId:{exact:r}}:a={facingMode:"environment"};const u={video:a};return yield this.decodeOnceFromConstraints(u,s)})}decodeOnceFromConstraints(r,s){return Pe(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(a,s)})}decodeOnceFromStream(r,s){return Pe(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(r,s,a){return Pe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,a)})}decodeFromVideoDevice(r,s,a){return Pe(this,void 0,void 0,function*(){let u;r?u={deviceId:{exact:r}}:u={facingMode:"environment"};const d={video:u};return yield this.decodeFromConstraints(d,s,a)})}decodeFromConstraints(r,s,a){return Pe(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(u,s,a)})}decodeFromStream(r,s,a){return Pe(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(u,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return Pe(this,void 0,void 0,function*(){const a=this.prepareVideoElement(s);return this.addVideoSource(a,r),this.videoElement=a,this.stream=r,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(r){return new Promise((s,a)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Pe(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const a=document.getElementById(r);if(!a)throw new b(`element with id '${r}' not found`);if(a.nodeName.toLowerCase()!==s.toLowerCase())throw new b(`element with id '${r}' must be an ${s} element`);return a}decodeFromImage(r,s){if(!r&&!s)throw new b("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new b("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,a){if(r===void 0&&s===void 0)throw new b("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,a):this.decodeFromVideoElementContinuously(r,a)}decodeFromImageElement(r){if(!r)throw new b("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let a;return this.isImageLoaded(s)?a=this.decodeOnce(s,!1,!0):a=this._decodeOnLoadImage(s),a}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const a=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(a,s)}_decodeFromVideoElementSetup(r){if(!r)throw new b("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new b("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const a=this._decodeOnLoadImage(s);return s.src=r,a}decodeFromVideoUrl(r){if(!r)throw new b("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),a=this.decodeFromVideoElement(s);return s.src=r,a}decodeFromVideoUrlContinuously(r,s){if(!r)throw new b("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(a,s);return a.src=r,u}_decodeOnLoadImage(r){return new Promise((s,a)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,a),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Pe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return Pe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,a=!0){this._stopAsyncDecode=!1;const u=(d,p)=>{if(this._stopAsyncDecode){p(new ue("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const m=this.decode(r);d(m)}catch(m){const _=s&&m instanceof ue,A=(m instanceof O||m instanceof G)&&a;if(_||A)return setTimeout(u,this._timeBetweenDecodingAttempts,d,p);p(m)}};return new Promise((d,p)=>u(d,p))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(r);s(u,null),setTimeout(a,this.timeBetweenScansMillis)}catch(u){s(null,u);const d=u instanceof O||u instanceof G,p=u instanceof ue;(d||p)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,a){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,a=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),a=new oe(s),u=new Oe(a);return new T(u)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let a,u;return typeof r<"u"&&(r instanceof HTMLVideoElement?(a=r.videoWidth,u=r.videoHeight):r instanceof HTMLImageElement&&(a=r.naturalWidth||r.width,u=r.naturalHeight||r.height)),s.style.width=a+"px",s.style.height=u+"px",s.width=a,s.height=u,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class Ze{constructor(r,s,a=s==null?0:8*s.length,u,d,p=P.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=a,this.resultPoints=u,this.format=d,this.timestamp=p,this.text=r,this.rawBytes=s,a==null?this.numBits=s==null?0:8*s.length:this.numBits=a,this.resultPoints=u,this.format=d,this.resultMetadata=null,p==null?this.timestamp=P.currentTimeMillis():this.timestamp=p}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const a=new Array(s.length+r.length);P.arraycopy(s,0,a,0,s.length),P.arraycopy(r,0,a,s.length,r.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var nt;(function(M){M[M.AZTEC=0]="AZTEC",M[M.CODABAR=1]="CODABAR",M[M.CODE_39=2]="CODE_39",M[M.CODE_93=3]="CODE_93",M[M.CODE_128=4]="CODE_128",M[M.DATA_MATRIX=5]="DATA_MATRIX",M[M.EAN_8=6]="EAN_8",M[M.EAN_13=7]="EAN_13",M[M.ITF=8]="ITF",M[M.MAXICODE=9]="MAXICODE",M[M.PDF_417=10]="PDF_417",M[M.QR_CODE=11]="QR_CODE",M[M.RSS_14=12]="RSS_14",M[M.RSS_EXPANDED=13]="RSS_EXPANDED",M[M.UPC_A=14]="UPC_A",M[M.UPC_E=15]="UPC_E",M[M.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(nt||(nt={}));var ge=nt,_t;(function(M){M[M.OTHER=0]="OTHER",M[M.ORIENTATION=1]="ORIENTATION",M[M.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",M[M.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",M[M.ISSUE_NUMBER=4]="ISSUE_NUMBER",M[M.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",M[M.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",M[M.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",M[M.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",M[M.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",M[M.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(_t||(_t={}));var ft=_t;class Bn{constructor(r,s,a,u,d=-1,p=-1){this.rawBytes=r,this.text=s,this.byteSegments=a,this.ecLevel=u,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=p,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Qt{exp(r){return this.expTable[r]}log(r){if(r===0)throw new E;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class ut{constructor(r,s){if(s.length===0)throw new E;this.field=r;const a=s.length;if(a>1&&s[0]===0){let u=1;for(;u<a&&s[u]===0;)u++;u===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-u),P.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let a;if(r===1){a=0;for(let p=0,m=s.length;p!==m;p++){const _=s[p];a=Qt.addOrSubtract(a,_)}return a}a=s[0];const u=s.length,d=this.field;for(let p=1;p<u;p++)a=Qt.addOrSubtract(d.multiply(r,a),s[p]);return a}addOrSubtract(r){if(!this.field.equals(r.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,a=r.coefficients;if(s.length>a.length){const p=s;s=a,a=p}let u=new Int32Array(a.length);const d=a.length-s.length;P.arraycopy(a,0,u,0,d);for(let p=d;p<a.length;p++)u[p]=Qt.addOrSubtract(s[p-d],a[p]);return new ut(this.field,u)}multiply(r){if(!this.field.equals(r.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,a=s.length,u=r.coefficients,d=u.length,p=new Int32Array(a+d-1),m=this.field;for(let _=0;_<a;_++){const C=s[_];for(let A=0;A<d;A++)p[_+A]=Qt.addOrSubtract(p[_+A],m.multiply(C,u[A]))}return new ut(m,p)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,a=this.field,u=new Int32Array(s),d=this.coefficients;for(let p=0;p<s;p++)u[p]=a.multiply(d[p],r);return new ut(a,u)}multiplyByMonomial(r,s){if(r<0)throw new E;if(s===0)return this.field.getZero();const a=this.coefficients,u=a.length,d=new Int32Array(u+r),p=this.field;for(let m=0;m<u;m++)d[m]=p.multiply(a[m],s);return new ut(p,d)}divide(r){if(!this.field.equals(r.field))throw new E("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new E("Divide by 0");const s=this.field;let a=s.getZero(),u=this;const d=r.getCoefficient(r.getDegree()),p=s.inverse(d);for(;u.getDegree()>=r.getDegree()&&!u.isZero();){const m=u.getDegree()-r.getDegree(),_=s.multiply(u.getCoefficient(u.getDegree()),p),C=r.multiplyByMonomial(m,_),A=s.buildMonomial(m,_);a=a.addOrSubtract(A),u=u.addOrSubtract(C)}return[a,u]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);if(a!==0){if(a<0?(r+=" - ",a=-a):r.length>0&&(r+=" + "),s===0||a!==1){const u=this.field.log(a);u===0?r+="1":u===1?r+="a":(r+="a^",r+=u)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class en extends g{}en.kind="ArithmeticException";class at extends Qt{constructor(r,s,a){super(),this.primitive=r,this.size=s,this.generatorBase=a;const u=new Int32Array(s);let d=1;for(let m=0;m<s;m++)u[m]=d,d*=2,d>=s&&(d^=r,d&=s-1);this.expTable=u;const p=new Int32Array(s);for(let m=0;m<s-1;m++)p[u[m]]=m;this.logTable=p,this.zero=new ut(this,Int32Array.from([0])),this.one=new ut(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new E;if(s===0)return this.zero;const a=new Int32Array(r+1);return a[0]=s,new ut(this,a)}inverse(r){if(r===0)throw new en;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+I.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}at.AZTEC_DATA_12=new at(4201,4096,1),at.AZTEC_DATA_10=new at(1033,1024,1),at.AZTEC_DATA_6=new at(67,64,1),at.AZTEC_PARAM=new at(19,16,1),at.QR_CODE_FIELD_256=new at(285,256,0),at.DATA_MATRIX_FIELD_256=new at(301,256,1),at.AZTEC_DATA_8=at.DATA_MATRIX_FIELD_256,at.MAXICODE_FIELD_64=at.AZTEC_DATA_6;class Hn extends g{}Hn.kind="ReedSolomonException";class jn extends g{}jn.kind="IllegalStateException";class Er{constructor(r){this.field=r}decode(r,s){const a=this.field,u=new ut(a,r),d=new Int32Array(s);let p=!0;for(let W=0;W<s;W++){const K=u.evaluateAt(a.exp(W+a.getGeneratorBase()));d[d.length-1-W]=K,K!==0&&(p=!1)}if(p)return;const m=new ut(a,d),_=this.runEuclideanAlgorithm(a.buildMonomial(s,1),m,s),C=_[0],A=_[1],k=this.findErrorLocations(C),B=this.findErrorMagnitudes(A,k);for(let W=0;W<k.length;W++){const K=r.length-1-a.log(k[W]);if(K<0)throw new Hn("Bad error location");r[K]=at.addOrSubtract(r[K],B[W])}}runEuclideanAlgorithm(r,s,a){if(r.getDegree()<s.getDegree()){const W=r;r=s,s=W}const u=this.field;let d=r,p=s,m=u.getZero(),_=u.getOne();for(;p.getDegree()>=(a/2|0);){let W=d,K=m;if(d=p,m=_,d.isZero())throw new Hn("r_{i-1} was zero");p=W;let J=u.getZero();const ie=d.getCoefficient(d.getDegree()),ce=u.inverse(ie);for(;p.getDegree()>=d.getDegree()&&!p.isZero();){const Ce=p.getDegree()-d.getDegree(),Se=u.multiply(p.getCoefficient(p.getDegree()),ce);J=J.addOrSubtract(u.buildMonomial(Ce,Se)),p=p.addOrSubtract(d.multiplyByMonomial(Ce,Se))}if(_=J.multiply(m).addOrSubtract(K),p.getDegree()>=d.getDegree())throw new jn("Division algorithm failed to reduce polynomial?")}const C=_.getCoefficient(0);if(C===0)throw new Hn("sigmaTilde(0) was zero");const A=u.inverse(C),k=_.multiplyScalar(A),B=p.multiplyScalar(A);return[k,B]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const a=new Int32Array(s);let u=0;const d=this.field;for(let p=1;p<d.getSize()&&u<s;p++)r.evaluateAt(p)===0&&(a[u]=d.inverse(p),u++);if(u!==s)throw new Hn("Error locator degree does not match number of roots");return a}findErrorMagnitudes(r,s){const a=s.length,u=new Int32Array(a),d=this.field;for(let p=0;p<a;p++){const m=d.inverse(s[p]);let _=1;for(let C=0;C<a;C++)if(p!==C){const A=d.multiply(s[C],m),k=A&1?A&-2:A|1;_=d.multiply(_,k)}u[p]=d.multiply(r.evaluateAt(m),d.inverse(_)),d.getGeneratorBase()!==0&&(u[p]=d.multiply(u[p],m))}return u}}var Zt;(function(M){M[M.UPPER=0]="UPPER",M[M.LOWER=1]="LOWER",M[M.MIXED=2]="MIXED",M[M.DIGIT=3]="DIGIT",M[M.PUNCT=4]="PUNCT",M[M.BINARY=5]="BINARY"})(Zt||(Zt={}));class ${decode(r){this.ddata=r;let s=r.getBits(),a=this.extractBits(s),u=this.correctBits(a),d=$.convertBoolArrayToByteArray(u),p=$.getEncodedData(u),m=new Bn(d,p,null,null);return m.setNumBits(u.length),m}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,a=Zt.UPPER,u=Zt.UPPER,d="",p=0;for(;p<s;)if(u===Zt.BINARY){if(s-p<5)break;let m=$.readCode(r,p,5);if(p+=5,m===0){if(s-p<11)break;m=$.readCode(r,p,11)+31,p+=11}for(let _=0;_<m;_++){if(s-p<8){p=s;break}const C=$.readCode(r,p,8);d+=le.castAsNonUtf8Char(C),p+=8}u=a}else{let m=u===Zt.DIGIT?4:5;if(s-p<m)break;let _=$.readCode(r,p,m);p+=m;let C=$.getCharacter(u,_);C.startsWith("CTRL_")?(a=u,u=$.getTable(C.charAt(5)),C.charAt(6)==="L"&&(a=u)):(d+=C,u=a)}return d}static getTable(r){switch(r){case"L":return Zt.LOWER;case"P":return Zt.PUNCT;case"M":return Zt.MIXED;case"D":return Zt.DIGIT;case"B":return Zt.BINARY;case"U":default:return Zt.UPPER}}static getCharacter(r,s){switch(r){case Zt.UPPER:return $.UPPER_TABLE[s];case Zt.LOWER:return $.LOWER_TABLE[s];case Zt.MIXED:return $.MIXED_TABLE[s];case Zt.PUNCT:return $.PUNCT_TABLE[s];case Zt.DIGIT:return $.DIGIT_TABLE[s];default:throw new jn("Bad table")}}correctBits(r){let s,a;this.ddata.getNbLayers()<=2?(a=6,s=at.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,s=at.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,s=at.AZTEC_DATA_10):(a=12,s=at.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),d=r.length/a;if(d<u)throw new G;let p=r.length%a,m=new Int32Array(d);for(let B=0;B<d;B++,p+=a)m[B]=$.readCode(r,p,a);try{new Er(s).decode(m,d-u)}catch(B){throw new G(B)}let _=(1<<a)-1,C=0;for(let B=0;B<u;B++){let W=m[B];if(W===0||W===_)throw new G;(W===1||W===_-1)&&C++}let A=new Array(u*a-C),k=0;for(let B=0;B<u;B++){let W=m[B];if(W===1||W===_-1)A.fill(W>1,k,k+a-1),k+=a-1;else for(let K=a-1;K>=0;--K)A[k++]=(W&1<<K)!==0}return A}extractBits(r){let s=this.ddata.isCompact(),a=this.ddata.getNbLayers(),u=(s?11:14)+a*4,d=new Int32Array(u),p=new Array(this.totalBitsInLayer(a,s));if(s)for(let m=0;m<d.length;m++)d[m]=m;else{let m=u+1+2*I.truncDivision(I.truncDivision(u,2)-1,15),_=u/2,C=I.truncDivision(m,2);for(let A=0;A<_;A++){let k=A+I.truncDivision(A,15);d[_-A-1]=C-k-1,d[_+A]=C+k+1}}for(let m=0,_=0;m<a;m++){let C=(a-m)*4+(s?9:12),A=m*2,k=u-1-A;for(let B=0;B<C;B++){let W=B*2;for(let K=0;K<2;K++)p[_+W+K]=r.get(d[A+K],d[A+B]),p[_+2*C+W+K]=r.get(d[A+B],d[k-K]),p[_+4*C+W+K]=r.get(d[k-K],d[k-B]),p[_+6*C+W+K]=r.get(d[k-B],d[A+K])}_+=C*8}return p}static readCode(r,s,a){let u=0;for(let d=s;d<s+a;d++)u<<=1,r[d]&&(u|=1);return u}static readByte(r,s){let a=r.length-s;return a>=8?$.readCode(r,s,8):$.readCode(r,s,a)<<8-a}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let a=0;a<s.length;a++)s[a]=$.readByte(r,8*a);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}$.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],$.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],$.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],$.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],$.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class we{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,a,u){const d=r-a,p=s-u;return Math.sqrt(d*d+p*p)}static sum(r){let s=0;for(let a=0,u=r.length;a!==u;a++){const d=r[a];s+=d}return s}}class ne{static floatToIntBits(r){return r}}ne.MAX_VALUE=Number.MAX_SAFE_INTEGER;class te{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof te){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*ne.floatToIntBits(this.x)+ne.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),a=this.distance(r[1],r[2]),u=this.distance(r[0],r[2]);let d,p,m;if(a>=s&&a>=u?(p=r[0],d=r[1],m=r[2]):u>=a&&u>=s?(p=r[1],d=r[0],m=r[2]):(p=r[2],d=r[0],m=r[1]),this.crossProductZ(d,p,m)<0){const _=d;d=m,m=_}r[0]=d,r[1]=p,r[2]=m}static distance(r,s){return we.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,a){const u=s.x,d=s.y;return(a.x-u)*(r.y-d)-(a.y-d)*(r.x-u)}}class xe{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Ne extends xe{constructor(r,s,a,u,d){super(r,s),this.compact=a,this.nbDatablocks=u,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Le{constructor(r,s,a,u){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=Le.INIT_SIZE),a==null&&(a=r.getWidth()/2|0),u==null&&(u=r.getHeight()/2|0);const d=s/2|0;if(this.leftInit=a-d,this.rightInit=a+d,this.upInit=u-d,this.downInit=u+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ue}detect(){let r=this.leftInit,s=this.rightInit,a=this.upInit,u=this.downInit,d=!1,p=!0,m=!1,_=!1,C=!1,A=!1,k=!1;const B=this.width,W=this.height;for(;p;){p=!1;let K=!0;for(;(K||!_)&&s<B;)K=this.containsBlackPoint(a,u,s,!1),K?(s++,p=!0,_=!0):_||s++;if(s>=B){d=!0;break}let J=!0;for(;(J||!C)&&u<W;)J=this.containsBlackPoint(r,s,u,!0),J?(u++,p=!0,C=!0):C||u++;if(u>=W){d=!0;break}let ie=!0;for(;(ie||!A)&&r>=0;)ie=this.containsBlackPoint(a,u,r,!1),ie?(r--,p=!0,A=!0):A||r--;if(r<0){d=!0;break}let ce=!0;for(;(ce||!k)&&a>=0;)ce=this.containsBlackPoint(r,s,a,!0),ce?(a--,p=!0,k=!0):k||a--;if(a<0){d=!0;break}p&&(m=!0)}if(!d&&m){const K=s-r;let J=null;for(let Se=1;J===null&&Se<K;Se++)J=this.getBlackPointOnSegment(r,u-Se,r+Se,u);if(J==null)throw new ue;let ie=null;for(let Se=1;ie===null&&Se<K;Se++)ie=this.getBlackPointOnSegment(r,a+Se,r+Se,a);if(ie==null)throw new ue;let ce=null;for(let Se=1;ce===null&&Se<K;Se++)ce=this.getBlackPointOnSegment(s,a+Se,s-Se,a);if(ce==null)throw new ue;let Ce=null;for(let Se=1;Ce===null&&Se<K;Se++)Ce=this.getBlackPointOnSegment(s,u-Se,s-Se,u);if(Ce==null)throw new ue;return this.centerEdges(Ce,J,ce,ie)}else throw new ue}getBlackPointOnSegment(r,s,a,u){const d=we.round(we.distance(r,s,a,u)),p=(a-r)/d,m=(u-s)/d,_=this.image;for(let C=0;C<d;C++){const A=we.round(r+C*p),k=we.round(s+C*m);if(_.get(A,k))return new te(A,k)}return null}centerEdges(r,s,a,u){const d=r.getX(),p=r.getY(),m=s.getX(),_=s.getY(),C=a.getX(),A=a.getY(),k=u.getX(),B=u.getY(),W=Le.CORR;return d<this.width/2?[new te(k-W,B+W),new te(m+W,_+W),new te(C-W,A-W),new te(d+W,p-W)]:[new te(k+W,B+W),new te(m+W,_-W),new te(C-W,A+W),new te(d-W,p-W)]}containsBlackPoint(r,s,a,u){const d=this.image;if(u){for(let p=r;p<=s;p++)if(d.get(p,a))return!0}else for(let p=r;p<=s;p++)if(d.get(a,p))return!0;return!1}}Le.INIT_SIZE=10,Le.CORR=1;class Te{static checkAndNudgePoints(r,s){const a=r.getWidth(),u=r.getHeight();let d=!0;for(let p=0;p<s.length&&d;p+=2){const m=Math.floor(s[p]),_=Math.floor(s[p+1]);if(m<-1||m>a||_<-1||_>u)throw new ue;d=!1,m===-1?(s[p]=0,d=!0):m===a&&(s[p]=a-1,d=!0),_===-1?(s[p+1]=0,d=!0):_===u&&(s[p+1]=u-1,d=!0)}d=!0;for(let p=s.length-2;p>=0&&d;p-=2){const m=Math.floor(s[p]),_=Math.floor(s[p+1]);if(m<-1||m>a||_<-1||_>u)throw new ue;d=!1,m===-1?(s[p]=0,d=!0):m===a&&(s[p]=a-1,d=!0),_===-1?(s[p+1]=0,d=!0):_===u&&(s[p+1]=u-1,d=!0)}}}class Qe{constructor(r,s,a,u,d,p,m,_,C){this.a11=r,this.a21=s,this.a31=a,this.a12=u,this.a22=d,this.a32=p,this.a13=m,this.a23=_,this.a33=C}static quadrilateralToQuadrilateral(r,s,a,u,d,p,m,_,C,A,k,B,W,K,J,ie){const ce=Qe.quadrilateralToSquare(r,s,a,u,d,p,m,_);return Qe.squareToQuadrilateral(C,A,k,B,W,K,J,ie).times(ce)}transformPoints(r){const s=r.length,a=this.a11,u=this.a12,d=this.a13,p=this.a21,m=this.a22,_=this.a23,C=this.a31,A=this.a32,k=this.a33;for(let B=0;B<s;B+=2){const W=r[B],K=r[B+1],J=d*W+_*K+k;r[B]=(a*W+p*K+C)/J,r[B+1]=(u*W+m*K+A)/J}}transformPointsWithValues(r,s){const a=this.a11,u=this.a12,d=this.a13,p=this.a21,m=this.a22,_=this.a23,C=this.a31,A=this.a32,k=this.a33,B=r.length;for(let W=0;W<B;W++){const K=r[W],J=s[W],ie=d*K+_*J+k;r[W]=(a*K+p*J+C)/ie,s[W]=(u*K+m*J+A)/ie}}static squareToQuadrilateral(r,s,a,u,d,p,m,_){const C=r-a+d-m,A=s-u+p-_;if(C===0&&A===0)return new Qe(a-r,d-a,r,u-s,p-u,s,0,0,1);{const k=a-d,B=m-d,W=u-p,K=_-p,J=k*K-B*W,ie=(C*K-B*A)/J,ce=(k*A-C*W)/J;return new Qe(a-r+ie*a,m-r+ce*m,r,u-s+ie*u,_-s+ce*_,s,ie,ce,1)}}static quadrilateralToSquare(r,s,a,u,d,p,m,_){return Qe.squareToQuadrilateral(r,s,a,u,d,p,m,_).buildAdjoint()}buildAdjoint(){return new Qe(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new Qe(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class Nt extends Te{sampleGrid(r,s,a,u,d,p,m,_,C,A,k,B,W,K,J,ie,ce,Ce,Se){const _e=Qe.quadrilateralToQuadrilateral(u,d,p,m,_,C,A,k,B,W,K,J,ie,ce,Ce,Se);return this.sampleGridWithTransform(r,s,a,_e)}sampleGridWithTransform(r,s,a,u){if(s<=0||a<=0)throw new ue;const d=new je(s,a),p=new Float32Array(2*s);for(let m=0;m<a;m++){const _=p.length,C=m+.5;for(let A=0;A<_;A+=2)p[A]=A/2+.5,p[A+1]=C;u.transformPoints(p),Te.checkAndNudgePoints(r,p);try{for(let A=0;A<_;A+=2)r.get(Math.floor(p[A]),Math.floor(p[A+1]))&&d.set(A/2,m)}catch{throw new ue}}return d}}class He{static setGridSampler(r){He.gridSampler=r}static getInstance(){return He.gridSampler}}He.gridSampler=new Nt;class Xe{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new te(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Mt{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),a=this.getBullsEyeCorners(s);if(r){let p=a[0];a[0]=a[2],a[2]=p}this.extractParameters(a);let u=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),d=this.getMatrixCornerPoints(a);return new Ne(u,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new ue;let s=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(a,s);let u=0;for(let p=0;p<4;p++){let m=a[(this.shift+p)%4];this.compact?(u<<=7,u+=m>>1&127):(u<<=10,u+=(m>>2&992)+(m>>1&31))}let d=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(r,s){let a=0;r.forEach((u,d,p)=>{let m=(u>>s-2<<1)+(u&1);a=(a<<3)+m}),a=((a&1)<<11)+(a>>1);for(let u=0;u<4;u++)if(I.bitCount(a^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new ue}getCorrectedParameterData(r,s){let a,u;s?(a=7,u=2):(a=10,u=4);let d=a-u,p=new Int32Array(a);for(let _=a-1;_>=0;--_)p[_]=r&15,r>>=4;try{new Er(at.AZTEC_PARAM).decode(p,d)}catch{throw new ue}let m=0;for(let _=0;_<u;_++)m=(m<<4)+p[_];return m}getBullsEyeCorners(r){let s=r,a=r,u=r,d=r,p=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let k=this.getFirstDifferent(s,p,1,-1),B=this.getFirstDifferent(a,p,1,1),W=this.getFirstDifferent(u,p,-1,1),K=this.getFirstDifferent(d,p,-1,-1);if(this.nbCenterLayers>2){let J=this.distancePoint(K,k)*this.nbCenterLayers/(this.distancePoint(d,s)*(this.nbCenterLayers+2));if(J<.75||J>1.25||!this.isWhiteOrBlackRectangle(k,B,W,K))break}s=k,a=B,u=W,d=K,p=!p}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ue;this.compact=this.nbCenterLayers===5;let m=new te(s.getX()+.5,s.getY()-.5),_=new te(a.getX()+.5,a.getY()+.5),C=new te(u.getX()-.5,u.getY()+.5),A=new te(d.getX()-.5,d.getY()-.5);return this.expandSquare([m,_,C,A],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,a,u;try{let m=new Le(this.image).detect();r=m[0],s=m[1],a=m[2],u=m[3]}catch{let _=this.image.getWidth()/2,C=this.image.getHeight()/2;r=this.getFirstDifferent(new Xe(_+7,C-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Xe(_+7,C+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Xe(_-7,C+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Xe(_-7,C-7),!1,-1,-1).toResultPoint()}let d=we.round((r.getX()+u.getX()+s.getX()+a.getX())/4),p=we.round((r.getY()+u.getY()+s.getY()+a.getY())/4);try{let m=new Le(this.image,15,d,p).detect();r=m[0],s=m[1],a=m[2],u=m[3]}catch{r=this.getFirstDifferent(new Xe(d+7,p-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Xe(d+7,p+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Xe(d-7,p+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Xe(d-7,p-7),!1,-1,-1).toResultPoint()}return d=we.round((r.getX()+u.getX()+s.getX()+a.getX())/4),p=we.round((r.getY()+u.getY()+s.getY()+a.getY())/4),new Xe(d,p)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,a,u,d){let p=He.getInstance(),m=this.getDimension(),_=m/2-this.nbCenterLayers,C=m/2+this.nbCenterLayers;return p.sampleGrid(r,m,m,_,_,C,_,C,C,_,C,s.getX(),s.getY(),a.getX(),a.getY(),u.getX(),u.getY(),d.getX(),d.getY())}sampleLine(r,s,a){let u=0,d=this.distanceResultPoint(r,s),p=d/a,m=r.getX(),_=r.getY(),C=p*(s.getX()-r.getX())/d,A=p*(s.getY()-r.getY())/d;for(let k=0;k<a;k++)this.image.get(we.round(m+k*C),we.round(_+k*A))&&(u|=1<<a-k-1);return u}isWhiteOrBlackRectangle(r,s,a,u){let d=3;r=new Xe(r.getX()-d,r.getY()+d),s=new Xe(s.getX()-d,s.getY()-d),a=new Xe(a.getX()+d,a.getY()-d),u=new Xe(u.getX()+d,u.getY()+d);let p=this.getColor(u,r);if(p===0)return!1;let m=this.getColor(r,s);return m!==p||(m=this.getColor(s,a),m!==p)?!1:(m=this.getColor(a,u),m===p)}getColor(r,s){let a=this.distancePoint(r,s),u=(s.getX()-r.getX())/a,d=(s.getY()-r.getY())/a,p=0,m=r.getX(),_=r.getY(),C=this.image.get(r.getX(),r.getY()),A=Math.ceil(a);for(let B=0;B<A;B++)m+=u,_+=d,this.image.get(we.round(m),we.round(_))!==C&&p++;let k=p/a;return k>.1&&k<.9?0:k<=.1===C?1:-1}getFirstDifferent(r,s,a,u){let d=r.getX()+a,p=r.getY()+u;for(;this.isValid(d,p)&&this.image.get(d,p)===s;)d+=a,p+=u;for(d-=a,p-=u;this.isValid(d,p)&&this.image.get(d,p)===s;)d+=a;for(d-=a;this.isValid(d,p)&&this.image.get(d,p)===s;)p+=u;return p-=u,new Xe(d,p)}expandSquare(r,s,a){let u=a/(2*s),d=r[0].getX()-r[2].getX(),p=r[0].getY()-r[2].getY(),m=(r[0].getX()+r[2].getX())/2,_=(r[0].getY()+r[2].getY())/2,C=new te(m+u*d,_+u*p),A=new te(m-u*d,_-u*p);d=r[1].getX()-r[3].getX(),p=r[1].getY()-r[3].getY(),m=(r[1].getX()+r[3].getX())/2,_=(r[1].getY()+r[3].getY())/2;let k=new te(m+u*d,_+u*p),B=new te(m-u*d,_-u*p);return[C,k,A,B]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=we.round(r.getX()),a=we.round(r.getY());return this.isValid(s,a)}distancePoint(r,s){return we.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return we.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(I.truncDivision(this.nbLayers-4,8)+1)+15}}class At{decode(r,s=null){let a=null,u=new Mt(r.getBlackMatrix()),d=null,p=null;try{let A=u.detectMirror(!1);d=A.getPoints(),this.reportFoundResultPoints(s,d),p=new $().decode(A)}catch(A){a=A}if(p==null)try{let A=u.detectMirror(!0);d=A.getPoints(),this.reportFoundResultPoints(s,d),p=new $().decode(A)}catch(A){throw a??A}let m=new Ze(p.getText(),p.getRawBytes(),p.getNumBits(),d,ge.AZTEC,P.currentTimeMillis()),_=p.getByteSegments();_!=null&&m.putMetadata(ft.BYTE_SEGMENTS,_);let C=p.getECLevel();return C!=null&&m.putMetadata(ft.ERROR_CORRECTION_LEVEL,C),m}reportFoundResultPoints(r,s){if(r!=null){let a=r.get(X.NEED_RESULT_POINT_CALLBACK);a!=null&&s.forEach((u,d,p)=>{a.foundPossibleResultPoint(u)})}}reset(){}}class Ft extends ot{constructor(r=500){super(new At,r)}}class St{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(X.TRY_HARDER)===!0&&r.isRotateSupported()){const d=r.rotateCounterClockwise(),p=this.doDecode(d,s),m=p.getResultMetadata();let _=270;m!==null&&m.get(ft.ORIENTATION)===!0&&(_=_+m.get(ft.ORIENTATION)%360),p.putMetadata(ft.ORIENTATION,_);const C=p.getResultPoints();if(C!==null){const A=d.getHeight();for(let k=0;k<C.length;k++)C[k]=new te(A-C[k].getY()-1,C[k].getX())}return p}else throw new ue}}reset(){}doDecode(r,s){const a=r.getWidth(),u=r.getHeight();let d=new Z(a);const p=s&&s.get(X.TRY_HARDER)===!0,m=Math.max(1,u>>(p?8:5));let _;p?_=u:_=15;const C=Math.trunc(u/2);for(let A=0;A<_;A++){const k=Math.trunc((A+1)/2),B=(A&1)===0,W=C+m*(B?k:-k);if(W<0||W>=u)break;try{d=r.getBlackRow(W,d)}catch{continue}for(let K=0;K<2;K++){if(K===1&&(d.reverse(),s&&s.get(X.NEED_RESULT_POINT_CALLBACK)===!0)){const J=new Map;s.forEach((ie,ce)=>J.set(ce,ie)),J.delete(X.NEED_RESULT_POINT_CALLBACK),s=J}try{const J=this.decodeRow(W,d,s);if(K===1){J.putMetadata(ft.ORIENTATION,180);const ie=J.getResultPoints();ie!==null&&(ie[0]=new te(a-ie[0].getX()-1,ie[0].getY()),ie[1]=new te(a-ie[1].getX()-1,ie[1].getY()))}return J}catch{}}}throw new ue}static recordPattern(r,s,a){const u=a.length;for(let C=0;C<u;C++)a[C]=0;const d=r.getSize();if(s>=d)throw new ue;let p=!r.get(s),m=0,_=s;for(;_<d;){if(r.get(_)!==p)a[m]++;else{if(++m===u)break;a[m]=1,p=!p}_++}if(!(m===u||m===u-1&&_===d))throw new ue}static recordPatternInReverse(r,s,a){let u=a.length,d=r.get(s);for(;s>0&&u>=0;)r.get(--s)!==d&&(u--,d=!d);if(u>=0)throw new ue;St.recordPattern(r,s+1,a)}static patternMatchVariance(r,s,a){const u=r.length;let d=0,p=0;for(let C=0;C<u;C++)d+=r[C],p+=s[C];if(d<p)return Number.POSITIVE_INFINITY;const m=d/p;a*=m;let _=0;for(let C=0;C<u;C++){const A=r[C],k=s[C]*m,B=A>k?A-k:k-A;if(B>a)return Number.POSITIVE_INFINITY;_+=B}return _/d}}class Ae extends St{static findStartPattern(r){const s=r.getSize(),a=r.getNextSet(0);let u=0,d=Int32Array.from([0,0,0,0,0,0]),p=a,m=!1;const _=6;for(let C=a;C<s;C++)if(r.get(C)!==m)d[u]++;else{if(u===_-1){let A=Ae.MAX_AVG_VARIANCE,k=-1;for(let B=Ae.CODE_START_A;B<=Ae.CODE_START_C;B++){const W=St.patternMatchVariance(d,Ae.CODE_PATTERNS[B],Ae.MAX_INDIVIDUAL_VARIANCE);W<A&&(A=W,k=B)}if(k>=0&&r.isRange(Math.max(0,p-(C-p)/2),p,!1))return Int32Array.from([p,C,k]);p+=d[0]+d[1],d=d.slice(2,d.length-1),d[u-1]=0,d[u]=0,u--}else u++;d[u]=1,m=!m}throw new ue}static decodeCode(r,s,a){St.recordPattern(r,a,s);let u=Ae.MAX_AVG_VARIANCE,d=-1;for(let p=0;p<Ae.CODE_PATTERNS.length;p++){const m=Ae.CODE_PATTERNS[p],_=this.patternMatchVariance(s,m,Ae.MAX_INDIVIDUAL_VARIANCE);_<u&&(u=_,d=p)}if(d>=0)return d;throw new ue}decodeRow(r,s,a){const u=a&&a.get(X.ASSUME_GS1)===!0,d=Ae.findStartPattern(s),p=d[2];let m=0;const _=new Uint8Array(20);_[m++]=p;let C;switch(p){case Ae.CODE_START_A:C=Ae.CODE_CODE_A;break;case Ae.CODE_START_B:C=Ae.CODE_CODE_B;break;case Ae.CODE_START_C:C=Ae.CODE_CODE_C;break;default:throw new G}let A=!1,k=!1,B="",W=d[0],K=d[1];const J=Int32Array.from([0,0,0,0,0,0]);let ie=0,ce=0,Ce=p,Se=0,_e=!0,ht=!1,it=!1;for(;!A;){const Kr=k;switch(k=!1,ie=ce,ce=Ae.decodeCode(s,J,K),_[m++]=ce,ce!==Ae.CODE_STOP&&(_e=!0),ce!==Ae.CODE_STOP&&(Se++,Ce+=Se*ce),W=K,K+=J.reduce((Ih,As)=>Ih+As,0),ce){case Ae.CODE_START_A:case Ae.CODE_START_B:case Ae.CODE_START_C:throw new G}switch(C){case Ae.CODE_CODE_A:if(ce<64)it===ht?B+=String.fromCharCode(32+ce):B+=String.fromCharCode(32+ce+128),it=!1;else if(ce<96)it===ht?B+=String.fromCharCode(ce-64):B+=String.fromCharCode(ce+64),it=!1;else switch(ce!==Ae.CODE_STOP&&(_e=!1),ce){case Ae.CODE_FNC_1:u&&(B.length===0?B+="]C1":B+="");break;case Ae.CODE_FNC_2:case Ae.CODE_FNC_3:break;case Ae.CODE_FNC_4_A:!ht&&it?(ht=!0,it=!1):ht&&it?(ht=!1,it=!1):it=!0;break;case Ae.CODE_SHIFT:k=!0,C=Ae.CODE_CODE_B;break;case Ae.CODE_CODE_B:C=Ae.CODE_CODE_B;break;case Ae.CODE_CODE_C:C=Ae.CODE_CODE_C;break;case Ae.CODE_STOP:A=!0;break}break;case Ae.CODE_CODE_B:if(ce<96)it===ht?B+=String.fromCharCode(32+ce):B+=String.fromCharCode(32+ce+128),it=!1;else switch(ce!==Ae.CODE_STOP&&(_e=!1),ce){case Ae.CODE_FNC_1:u&&(B.length===0?B+="]C1":B+="");break;case Ae.CODE_FNC_2:case Ae.CODE_FNC_3:break;case Ae.CODE_FNC_4_B:!ht&&it?(ht=!0,it=!1):ht&&it?(ht=!1,it=!1):it=!0;break;case Ae.CODE_SHIFT:k=!0,C=Ae.CODE_CODE_A;break;case Ae.CODE_CODE_A:C=Ae.CODE_CODE_A;break;case Ae.CODE_CODE_C:C=Ae.CODE_CODE_C;break;case Ae.CODE_STOP:A=!0;break}break;case Ae.CODE_CODE_C:if(ce<100)ce<10&&(B+="0"),B+=ce;else switch(ce!==Ae.CODE_STOP&&(_e=!1),ce){case Ae.CODE_FNC_1:u&&(B.length===0?B+="]C1":B+="");break;case Ae.CODE_CODE_A:C=Ae.CODE_CODE_A;break;case Ae.CODE_CODE_B:C=Ae.CODE_CODE_B;break;case Ae.CODE_STOP:A=!0;break}break}Kr&&(C=C===Ae.CODE_CODE_A?Ae.CODE_CODE_B:Ae.CODE_CODE_A)}const Xt=K-W;if(K=s.getNextUnset(K),!s.isRange(K,Math.min(s.getSize(),K+(K-W)/2),!1))throw new ue;if(Ce-=Se*ie,Ce%103!==ie)throw new O;const Zn=B.length;if(Zn===0)throw new ue;Zn>0&&_e&&(C===Ae.CODE_CODE_C?B=B.substring(0,Zn-2):B=B.substring(0,Zn-1));const Gn=(d[1]+d[0])/2,Et=W+Xt/2,En=_.length,Yn=new Uint8Array(En);for(let Kr=0;Kr<En;Kr++)Yn[Kr]=_[Kr];const Es=[new te(Gn,r),new te(Et,r)];return new Ze(B,Yn,0,Es,ge.CODE_128,new Date().getTime())}}Ae.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ae.MAX_AVG_VARIANCE=.25,Ae.MAX_INDIVIDUAL_VARIANCE=.7,Ae.CODE_SHIFT=98,Ae.CODE_CODE_C=99,Ae.CODE_CODE_B=100,Ae.CODE_CODE_A=101,Ae.CODE_FNC_1=102,Ae.CODE_FNC_2=97,Ae.CODE_FNC_3=96,Ae.CODE_FNC_4_A=101,Ae.CODE_FNC_4_B=100,Ae.CODE_START_A=103,Ae.CODE_START_B=104,Ae.CODE_START_C=105,Ae.CODE_STOP=106;class ln extends St{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,a){let u=this.counters;u.fill(0),this.decodeRowResult="";let d=ln.findAsteriskPattern(s,u),p=s.getNextSet(d[1]),m=s.getSize(),_,C;do{ln.recordPattern(s,p,u);let J=ln.toNarrowWidePattern(u);if(J<0)throw new ue;_=ln.patternToChar(J),this.decodeRowResult+=_,C=p;for(let ie of u)p+=ie;p=s.getNextSet(p)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let A=0;for(let J of u)A+=J;let k=p-C-A;if(p!==m&&k*2<A)throw new ue;if(this.usingCheckDigit){let J=this.decodeRowResult.length-1,ie=0;for(let ce=0;ce<J;ce++)ie+=ln.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ce));if(this.decodeRowResult.charAt(J)!==ln.ALPHABET_STRING.charAt(ie%43))throw new O;this.decodeRowResult=this.decodeRowResult.substring(0,J)}if(this.decodeRowResult.length===0)throw new ue;let B;this.extendedMode?B=ln.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;let W=(d[1]+d[0])/2,K=C+A/2;return new Ze(B,null,0,[new te(W,r),new te(K,r)],ge.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let a=r.getSize(),u=r.getNextSet(0),d=0,p=u,m=!1,_=s.length;for(let C=u;C<a;C++)if(r.get(C)!==m)s[d]++;else{if(d===_-1){if(this.toNarrowWidePattern(s)===ln.ASTERISK_ENCODING&&r.isRange(Math.max(0,p-Math.floor((C-p)/2)),p,!1))return[p,C];p+=s[0]+s[1],s.copyWithin(0,2,2+d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,m=!m}throw new ue}static toNarrowWidePattern(r){let s=r.length,a=0,u;do{let d=2147483647;for(let _ of r)_<d&&_>a&&(d=_);a=d,u=0;let p=0,m=0;for(let _=0;_<s;_++){let C=r[_];C>a&&(m|=1<<s-1-_,u++,p+=C)}if(u===3){for(let _=0;_<s&&u>0;_++){let C=r[_];if(C>a&&(u--,C*2>=p))return-1}return m}}while(u>3);return-1}static patternToChar(r){for(let s=0;s<ln.CHARACTER_ENCODINGS.length;s++)if(ln.CHARACTER_ENCODINGS[s]===r)return ln.ALPHABET_STRING.charAt(s);if(r===ln.ASTERISK_ENCODING)return"*";throw new ue}static decodeExtended(r){let s=r.length,a="";for(let u=0;u<s;u++){let d=r.charAt(u);if(d==="+"||d==="$"||d==="%"||d==="/"){let p=r.charAt(u+1),m="\0";switch(d){case"+":if(p>="A"&&p<="Z")m=String.fromCharCode(p.charCodeAt(0)+32);else throw new G;break;case"$":if(p>="A"&&p<="Z")m=String.fromCharCode(p.charCodeAt(0)-64);else throw new G;break;case"%":if(p>="A"&&p<="E")m=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")m=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")m=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")m=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")m="\0";else if(p==="V")m="@";else if(p==="W")m="`";else if(p==="X"||p==="Y"||p==="Z")m="";else throw new G;break;case"/":if(p>="A"&&p<="O")m=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")m=":";else throw new G;break}a+=m,u++}else a+=d}return a}}ln.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ln.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ln.ASTERISK_ENCODING=148;class kt extends St{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,a){let u=this.decodeStart(s),d=this.decodeEnd(s),p=new Ie;kt.decodeMiddle(s,u[1],d[0],p);let m=p.toString(),_=null;a!=null&&(_=a.get(X.ALLOWED_LENGTHS)),_==null&&(_=kt.DEFAULT_ALLOWED_LENGTHS);let C=m.length,A=!1,k=0;for(let K of _){if(C===K){A=!0;break}K>k&&(k=K)}if(!A&&C>k&&(A=!0),!A)throw new G;const B=[new te(u[1],r),new te(d[0],r)];return new Ze(m,null,0,B,ge.ITF,new Date().getTime())}static decodeMiddle(r,s,a,u){let d=new Int32Array(10),p=new Int32Array(5),m=new Int32Array(5);for(d.fill(0),p.fill(0),m.fill(0);s<a;){St.recordPattern(r,s,d);for(let C=0;C<5;C++){let A=2*C;p[C]=d[A],m[C]=d[A+1]}let _=kt.decodeDigit(p);u.append(_.toString()),_=this.decodeDigit(m),u.append(_.toString()),d.forEach(function(C){s+=C})}}decodeStart(r){let s=kt.skipWhiteSpace(r),a=kt.findGuardPattern(r,s,kt.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a}validateQuietZone(r,s){let a=this.narrowLineWidth*10;a=a<s?a:s;for(let u=s-1;a>0&&u>=0&&!r.get(u);u--)a--;if(a!==0)throw new ue}static skipWhiteSpace(r){const s=r.getSize(),a=r.getNextSet(0);if(a===s)throw new ue;return a}decodeEnd(r){r.reverse();try{let s=kt.skipWhiteSpace(r),a;try{a=kt.findGuardPattern(r,s,kt.END_PATTERN_REVERSED[0])}catch(d){d instanceof ue&&(a=kt.findGuardPattern(r,s,kt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);let u=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-u,a}finally{r.reverse()}}static findGuardPattern(r,s,a){let u=a.length,d=new Int32Array(u),p=r.getSize(),m=!1,_=0,C=s;d.fill(0);for(let A=s;A<p;A++)if(r.get(A)!==m)d[_]++;else{if(_===u-1){if(St.patternMatchVariance(d,a,kt.MAX_INDIVIDUAL_VARIANCE)<kt.MAX_AVG_VARIANCE)return[C,A];C+=d[0]+d[1],P.arraycopy(d,2,d,0,_-1),d[_-1]=0,d[_]=0,_--}else _++;d[_]=1,m=!m}throw new ue}static decodeDigit(r){let s=kt.MAX_AVG_VARIANCE,a=-1,u=kt.PATTERNS.length;for(let d=0;d<u;d++){let p=kt.PATTERNS[d],m=St.patternMatchVariance(r,p,kt.MAX_INDIVIDUAL_VARIANCE);m<s?(s=m,a=d):m===s&&(a=-1)}if(a>=0)return a%10;throw new ue}}kt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],kt.MAX_AVG_VARIANCE=.38,kt.MAX_INDIVIDUAL_VARIANCE=.5,kt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],kt.START_PATTERN=Int32Array.from([1,1,1,1]),kt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Lt extends St{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,a,u=0,d=Int32Array.from([0,0,0]);for(;!s;){d=Int32Array.from([0,0,0]),a=Lt.findGuardPattern(r,u,!1,this.START_END_PATTERN,d);let p=a[0];u=a[1];let m=p-(u-p);m>=0&&(s=r.isRange(m,p,!1))}return a}static checkChecksum(r){return Lt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let a=parseInt(r.charAt(s-1),10);return Lt.getStandardUPCEANChecksum(r.substring(0,s-1))===a}static getStandardUPCEANChecksum(r){let s=r.length,a=0;for(let u=s-1;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new G;a+=d}a*=3;for(let u=s-2;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new G;a+=d}return(1e3-a)%10}static decodeEnd(r,s){return Lt.findGuardPattern(r,s,!1,Lt.START_END_PATTERN,new Int32Array(Lt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,a,u){return this.findGuardPattern(r,s,a,u,new Int32Array(u.length))}static findGuardPattern(r,s,a,u,d){let p=r.getSize();s=a?r.getNextUnset(s):r.getNextSet(s);let m=0,_=s,C=u.length,A=a;for(let k=s;k<p;k++)if(r.get(k)!==A)d[m]++;else{if(m===C-1){if(St.patternMatchVariance(d,u,Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE)return Int32Array.from([_,k]);_+=d[0]+d[1];let B=d.slice(2,d.length-1);for(let W=0;W<m-1;W++)d[W]=B[W];d[m-1]=0,d[m]=0,m--}else m++;d[m]=1,A=!A}throw new ue}static decodeDigit(r,s,a,u){this.recordPattern(r,a,s);let d=this.MAX_AVG_VARIANCE,p=-1,m=u.length;for(let _=0;_<m;_++){let C=u[_],A=St.patternMatchVariance(s,C,Lt.MAX_INDIVIDUAL_VARIANCE);A<d&&(d=A,p=_)}if(p>=0)return p;throw new ue}}Lt.MAX_AVG_VARIANCE=.48,Lt.MAX_INDIVIDUAL_VARIANCE=.7,Lt.START_END_PATTERN=Int32Array.from([1,1,1]),Lt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Lt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Lt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class fo{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,a){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(s,a,u),p=u.toString(),m=fo.parseExtensionString(p),_=[new te((a[0]+a[1])/2,r),new te(d,r)],C=new Ze(p,null,0,_,ge.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&C.putAllMetadata(m),C}decodeMiddle(r,s,a){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p=s[1],m=0;for(let C=0;C<5&&p<d;C++){let A=Lt.decodeDigit(r,u,p,Lt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+A%10);for(let k of u)p+=k;A>=10&&(m|=1<<4-C),C!==4&&(p=r.getNextSet(p),p=r.getNextUnset(p))}if(a.length!==5)throw new ue;let _=this.determineCheckDigit(m);if(fo.extensionChecksum(a.toString())!==_)throw new ue;return p}static extensionChecksum(r){let s=r.length,a=0;for(let u=s-2;u>=0;u-=2)a+=r.charAt(u).charCodeAt(0)-48;a*=3;for(let u=s-1;u>=0;u-=2)a+=r.charAt(u).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new ue}static parseExtensionString(r){if(r.length!==5)return null;let s=fo.parseExtension5String(r);return s==null?null:new Map([[ft.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let a=parseInt(r.substring(1)),u=(a/100).toString(),d=a%100,p=d<10?"0"+d:d.toString();return s+u+"."+p}}class ol{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,a){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(s,a,u),p=u.toString(),m=ol.parseExtensionString(p),_=[new te((a[0]+a[1])/2,r),new te(d,r)],C=new Ze(p,null,0,_,ge.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&C.putAllMetadata(m),C}decodeMiddle(r,s,a){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p=s[1],m=0;for(let _=0;_<2&&p<d;_++){let C=Lt.decodeDigit(r,u,p,Lt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+C%10);for(let A of u)p+=A;C>=10&&(m|=1<<1-_),_!==1&&(p=r.getNextSet(p),p=r.getNextUnset(p))}if(a.length!==2)throw new ue;if(parseInt(a.toString())%4!==m)throw new ue;return p}static parseExtensionString(r){return r.length!==2?null:new Map([[ft.ISSUE_NUMBER,parseInt(r)]])}}class al{static decodeRow(r,s,a){let u=Lt.findGuardPattern(s,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new fo().decodeRow(r,s,u)}catch{return new ol().decodeRow(r,s,u)}}}al.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class vt extends Lt{constructor(){super(),this.decodeRowStringBuffer="",vt.L_AND_G_PATTERNS=vt.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=vt.L_PATTERNS[r-10],a=new Int32Array(s.length);for(let u=0;u<s.length;u++)a[u]=s[s.length-u-1];vt.L_AND_G_PATTERNS[r]=a}}decodeRow(r,s,a){let u=vt.findStartGuardPattern(s),d=a==null?null:a.get(X.NEED_RESULT_POINT_CALLBACK);if(d!=null){const _e=new te((u[0]+u[1])/2,r);d.foundPossibleResultPoint(_e)}let p=this.decodeMiddle(s,u,this.decodeRowStringBuffer),m=p.rowOffset,_=p.resultString;if(d!=null){const _e=new te(m,r);d.foundPossibleResultPoint(_e)}let C=this.decodeEnd(s,m);if(d!=null){const _e=new te((C[0]+C[1])/2,r);d.foundPossibleResultPoint(_e)}let A=C[1],k=A+(A-C[0]);if(k>=s.getSize()||!s.isRange(A,k,!1))throw new ue;let B=_.toString();if(B.length<8)throw new G;if(!vt.checkChecksum(B))throw new O;let W=(u[1]+u[0])/2,K=(C[1]+C[0])/2,J=this.getBarcodeFormat(),ie=[new te(W,r),new te(K,r)],ce=new Ze(B,null,0,ie,J,new Date().getTime()),Ce=0;try{let _e=al.decodeRow(r,s,C[1]);ce.putMetadata(ft.UPC_EAN_EXTENSION,_e.getText()),ce.putAllMetadata(_e.getResultMetadata()),ce.addResultPoints(_e.getResultPoints()),Ce=_e.getText().length}catch{}let Se=a==null?null:a.get(X.ALLOWED_EAN_EXTENSIONS);if(Se!=null){let _e=!1;for(let ht in Se)if(Ce.toString()===ht){_e=!0;break}if(!_e)throw new ue}return ce}decodeEnd(r,s){return vt.findGuardPattern(r,s,!1,vt.START_END_PATTERN,new Int32Array(vt.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return vt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let a=parseInt(r.charAt(s-1),10);return vt.getStandardUPCEANChecksum(r.substring(0,s-1))===a}static getStandardUPCEANChecksum(r){let s=r.length,a=0;for(let u=s-1;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new G;a+=d}a*=3;for(let u=s-2;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new G;a+=d}return(1e3-a)%10}}class Ai extends vt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,a){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p=s[1],m=0;for(let C=0;C<6&&p<d;C++){let A=vt.decodeDigit(r,u,p,vt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+A%10);for(let k of u)p+=k;A>=10&&(m|=1<<5-C)}a=Ai.determineFirstDigit(a,m),p=vt.findGuardPattern(r,p,!0,vt.MIDDLE_PATTERN,new Int32Array(vt.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&p<d;C++){let A=vt.decodeDigit(r,u,p,vt.L_PATTERNS);a+=String.fromCharCode(48+A);for(let k of u)p+=k}return{rowOffset:p,resultString:a}}getBarcodeFormat(){return ge.EAN_13}static determineFirstDigit(r,s){for(let a=0;a<10;a++)if(s===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new ue}}Ai.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Gc extends vt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,a){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p=s[1];for(let _=0;_<4&&p<d;_++){let C=vt.decodeDigit(r,u,p,vt.L_PATTERNS);a+=String.fromCharCode(48+C);for(let A of u)p+=A}p=vt.findGuardPattern(r,p,!0,vt.MIDDLE_PATTERN,new Int32Array(vt.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<4&&p<d;_++){let C=vt.decodeDigit(r,u,p,vt.L_PATTERNS);a+=String.fromCharCode(48+C);for(let A of u)p+=A}return{rowOffset:p,resultString:a}}getBarcodeFormat(){return ge.EAN_8}}class Yc extends vt{constructor(){super(...arguments),this.ean13Reader=new Ai}getBarcodeFormat(){return ge.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,a))}decodeMiddle(r,s,a){return this.ean13Reader.decodeMiddle(r,s,a)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let a=new Ze(s.substring(1),null,null,r.getResultPoints(),ge.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new ue}reset(){this.ean13Reader.reset()}}class Ar extends vt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,a){const u=this.decodeMiddleCounters.map(C=>C);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const d=r.getSize();let p=s[1],m=0;for(let C=0;C<6&&p<d;C++){const A=Ar.decodeDigit(r,u,p,Ar.L_AND_G_PATTERNS);a+=String.fromCharCode(48+A%10);for(let k of u)p+=k;A>=10&&(m|=1<<5-C)}let _=Ar.determineNumSysAndCheckDigit(a,m);return{rowOffset:p,resultString:_}}decodeEnd(r,s){return Ar.findGuardPatternWithoutCounters(r,s,!0,Ar.MIDDLE_END_PATTERN)}checkChecksum(r){return vt.checkChecksum(Ar.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let a=0;a<=1;a++)for(let u=0;u<10;u++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][u]){let d=String.fromCharCode(48+a),p=String.fromCharCode(48+u);return d+r+p}throw ue.getNotFoundInstance()}getBarcodeFormat(){return ge.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(d=>d.charCodeAt(0)),a=new Ie;a.append(r.charAt(0));let u=s[5];switch(u){case 0:case 1:case 2:a.appendChars(s,0,2),a.append(u),a.append("0000"),a.appendChars(s,2,3);break;case 3:a.appendChars(s,0,3),a.append("00000"),a.appendChars(s,3,2);break;case 4:a.appendChars(s,0,4),a.append("00000"),a.append(s[4]);break;default:a.appendChars(s,0,5),a.append("0000"),a.append(u);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()}}Ar.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ar.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ll extends St{constructor(r){super();let s=r==null?null:r.get(X.POSSIBLE_FORMATS),a=[];i(s)?(a.push(new Ai),a.push(new Yc),a.push(new Gc),a.push(new Ar)):(s.indexOf(ge.EAN_13)>-1&&a.push(new Ai),s.indexOf(ge.UPC_A)>-1&&a.push(new Yc),s.indexOf(ge.EAN_8)>-1&&a.push(new Gc),s.indexOf(ge.UPC_E)>-1&&a.push(new Ar)),this.readers=a}decodeRow(r,s,a){for(let u of this.readers)try{const d=u.decodeRow(r,s,a),p=d.getBarcodeFormat()===ge.EAN_13&&d.getText().charAt(0)==="0",m=a==null?null:a.get(X.POSSIBLE_FORMATS),_=m==null||m.includes(ge.UPC_A);if(p&&_){const C=d.getRawBytes(),A=new Ze(d.getText().substring(1),C,C?C.length:null,d.getResultPoints(),ge.UPC_A);return A.putAllMetadata(d.getResultMetadata()),A}return d}catch{}throw new ue}reset(){for(let r of this.readers)r.reset()}}class Tn extends St{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let a=0;a<s.length;a++)if(St.patternMatchVariance(r,s[a],Tn.MAX_INDIVIDUAL_VARIANCE)<Tn.MAX_AVG_VARIANCE)return a;throw new ue}static count(r){return we.sum(new Int32Array(r))}static increment(r,s){let a=0,u=s[0];for(let d=1;d<r.length;d++)s[d]>u&&(u=s[d],a=d);r[a]++}static decrement(r,s){let a=0,u=s[0];for(let d=1;d<r.length;d++)s[d]<u&&(u=s[d],a=d);r[a]--}static isFinderPattern(r){let s=r[0]+r[1],a=s+r[2]+r[3],u=s/a;if(u>=Tn.MIN_FINDER_PATTERN_RATIO&&u<=Tn.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let m of r)m>p&&(p=m),m<d&&(d=m);return p<10*d}return!1}}Tn.MAX_AVG_VARIANCE=.2,Tn.MAX_INDIVIDUAL_VARIANCE=.45,Tn.MIN_FINDER_PATTERN_RATIO=9.5/12,Tn.MAX_FINDER_PATTERN_RATIO=12.5/14;class gs{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof gs))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class xs{constructor(r,s,a,u,d){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new te(a,d)),this.resultPoints.push(new te(u,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof xs))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class Hr{constructor(){}static getRSSvalue(r,s,a){let u=0;for(let _ of r)u+=_;let d=0,p=0,m=r.length;for(let _=0;_<m-1;_++){let C;for(C=1,p|=1<<_;C<r[_];C++,p&=~(1<<_)){let A=Hr.combins(u-C-1,m-_-2);if(a&&p===0&&u-C-(m-_-1)>=m-_-1&&(A-=Hr.combins(u-C-(m-_),m-_-2)),m-_-1>1){let k=0;for(let B=u-C-(m-_-2);B>s;B--)k+=Hr.combins(u-C-B-1,m-_-3);A-=k*(m-1-_)}else u-C>s&&A--;d+=A}u-=C}return d}static combins(r,s){let a,u;r-s>s?(u=s,a=r-s):(u=r-s,a=s);let d=1,p=1;for(let m=r;m>a;m--)d*=m,p<=u&&(d/=p,p++);for(;p<=u;)d/=p,p++;return d}}class wh{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let a=12*s,u=new Z(a),d=0,m=r[0].getRightChar().getValue();for(let _=11;_>=0;--_)m&1<<_&&u.set(d),d++;for(let _=1;_<r.length;++_){let C=r[_],A=C.getLeftChar().getValue();for(let k=11;k>=0;--k)A&1<<k&&u.set(d),d++;if(C.getRightChar()!=null){let k=C.getRightChar().getValue();for(let B=11;B>=0;--B)k&1<<B&&u.set(d),d++}}return u}}class Ui{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class cl{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class Gt extends cl{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===Gt.FNC1}}Gt.FNC1="$";class Ue extends cl{constructor(r,s,a){super(r),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class nr extends cl{constructor(r,s,a){if(super(r),s<0||s>10||a<0||a>10)throw new G;this.firstDigit=s,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===nr.FNC1}isSecondDigitFNC1(){return this.secondDigit===nr.FNC1}isAnyFNC1(){return this.firstDigit===nr.FNC1||this.secondDigit===nr.FNC1}}nr.FNC1=10;class De{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new ue;let s=r.substring(0,2);for(let d of De.TWO_DIGIT_DATA_LENGTH)if(d[0]===s)return d[1]===De.VARIABLE_LENGTH?De.processVariableAI(2,d[2],r):De.processFixedAI(2,d[1],r);if(r.length<3)throw new ue;let a=r.substring(0,3);for(let d of De.THREE_DIGIT_DATA_LENGTH)if(d[0]===a)return d[1]===De.VARIABLE_LENGTH?De.processVariableAI(3,d[2],r):De.processFixedAI(3,d[1],r);for(let d of De.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===a)return d[1]===De.VARIABLE_LENGTH?De.processVariableAI(4,d[2],r):De.processFixedAI(4,d[1],r);if(r.length<4)throw new ue;let u=r.substring(0,4);for(let d of De.FOUR_DIGIT_DATA_LENGTH)if(d[0]===u)return d[1]===De.VARIABLE_LENGTH?De.processVariableAI(4,d[2],r):De.processFixedAI(4,d[1],r);throw new ue}static processFixedAI(r,s,a){if(a.length<r)throw new ue;let u=a.substring(0,r);if(a.length<r+s)throw new ue;let d=a.substring(r,r+s),p=a.substring(r+s),m="("+u+")"+d,_=De.parseFieldsInGeneralPurpose(p);return _==null?m:m+_}static processVariableAI(r,s,a){let u=a.substring(0,r),d;a.length<r+s?d=a.length:d=r+s;let p=a.substring(r,d),m=a.substring(d),_="("+u+")"+p,C=De.parseFieldsInGeneralPurpose(m);return C==null?_:_+C}}De.VARIABLE_LENGTH=[],De.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",De.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",De.VARIABLE_LENGTH,20],["22",De.VARIABLE_LENGTH,29],["30",De.VARIABLE_LENGTH,8],["37",De.VARIABLE_LENGTH,8],["90",De.VARIABLE_LENGTH,30],["91",De.VARIABLE_LENGTH,30],["92",De.VARIABLE_LENGTH,30],["93",De.VARIABLE_LENGTH,30],["94",De.VARIABLE_LENGTH,30],["95",De.VARIABLE_LENGTH,30],["96",De.VARIABLE_LENGTH,30],["97",De.VARIABLE_LENGTH,3],["98",De.VARIABLE_LENGTH,30],["99",De.VARIABLE_LENGTH,30]],De.THREE_DIGIT_DATA_LENGTH=[["240",De.VARIABLE_LENGTH,30],["241",De.VARIABLE_LENGTH,30],["242",De.VARIABLE_LENGTH,6],["250",De.VARIABLE_LENGTH,30],["251",De.VARIABLE_LENGTH,30],["253",De.VARIABLE_LENGTH,17],["254",De.VARIABLE_LENGTH,20],["400",De.VARIABLE_LENGTH,30],["401",De.VARIABLE_LENGTH,30],["402",17],["403",De.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",De.VARIABLE_LENGTH,20],["421",De.VARIABLE_LENGTH,15],["422",3],["423",De.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],De.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",De.VARIABLE_LENGTH,15],["391",De.VARIABLE_LENGTH,18],["392",De.VARIABLE_LENGTH,15],["393",De.VARIABLE_LENGTH,18],["703",De.VARIABLE_LENGTH,30]],De.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",De.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",De.VARIABLE_LENGTH,20],["8003",De.VARIABLE_LENGTH,30],["8004",De.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",De.VARIABLE_LENGTH,30],["8008",De.VARIABLE_LENGTH,12],["8018",18],["8020",De.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",De.VARIABLE_LENGTH,70],["8200",De.VARIABLE_LENGTH,70]];class Vi{constructor(r){this.buffer=new Ie,this.information=r}decodeAllCodes(r,s){let a=s,u=null;do{let d=this.decodeGeneralPurposeField(a,u),p=De.parseFieldsInGeneralPurpose(d.getNewString());if(p!=null&&r.append(p),d.isRemaining()?u=""+d.getRemainingValue():u=null,a===d.getNewPosition())break;a=d.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(r,4);return d===0?new nr(this.information.getSize(),nr.FNC1,nr.FNC1):new nr(this.information.getSize(),d-1,nr.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),a=(s-8)/11,u=(s-8)%11;return new nr(r+7,a,u)}extractNumericValueFromBitArray(r,s){return Vi.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,a){let u=0;for(let d=0;d<a;++d)r.get(s+d)&&(u|=1<<a-d-1);return u}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new Ue(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new Ue(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let a=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(a!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new Ue(this.current.getPosition(),this.buffer.toString()):s=new Ue(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new Ui(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new Ue(this.current.getPosition(),this.buffer.toString());return new Ui(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ui(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Ue(this.current.getPosition(),this.buffer.toString());return new Ui(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ui(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Ue(this.current.getPosition(),this.buffer.toString());return new Ui(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ui(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<116)return!0;if(r+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(r,8);return u>=232&&u<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new Gt(r+5,Gt.FNC1);if(s>=5&&s<15)return new Gt(r+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<90)return new Gt(r+7,""+(a+1));if(a>=90&&a<116)return new Gt(r+7,""+(a+7));let u=this.extractNumericValueFromBitArray(r,8),d;switch(u){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new G}return new Gt(r+8,d)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,6);return a>=16&&a<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new Gt(r+5,Gt.FNC1);if(s>=5&&s<15)return new Gt(r+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(r,6);if(a>=32&&a<58)return new Gt(r+6,""+(a+33));let u;switch(a){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new jn("Decoding invalid alphanumeric value: "+a)}return new Gt(r+6,u)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class ia{constructor(r){this.information=r,this.generalDecoder=new Vi(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class In extends ia{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,a)}encodeCompressedGtinWithoutAI(r,s,a){for(let u=0;u<4;++u){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*u,10);d/100===0&&r.append("0"),d/10===0&&r.append("0"),r.append(d)}In.appendCheckDigit(r,a)}static appendCheckDigit(r,s){let a=0;for(let u=0;u<13;u++){let d=r.charAt(u+s).charCodeAt(0)-48;a+=u&1?d:3*d}a=10-a%10,a===10&&(a=0),r.append(a)}}In.GTIN_SIZE=40;class Hi extends In{constructor(r){super(r)}parseInformation(){let r=new Ie;r.append("(01)");let s=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(Hi.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,Hi.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,Hi.HEADER_SIZE+44)}}Hi.HEADER_SIZE=4;class ui extends ia{constructor(r){super(r)}parseInformation(){let r=new Ie;return this.getGeneralDecoder().decodeAllCodes(r,ui.HEADER_SIZE)}}ui.HEADER_SIZE=5;class po extends In{constructor(r){super(r)}encodeCompressedWeight(r,s,a){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s,a);this.addWeightCode(r,u);let d=this.checkWeight(u),p=1e5;for(let m=0;m<5;++m)d/p===0&&r.append("0"),p/=10;r.append(d)}}class Wr extends po{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=Wr.HEADER_SIZE+po.GTIN_SIZE+Wr.WEIGHT_SIZE)throw new ue;let r=new Ie;return this.encodeCompressedGtin(r,Wr.HEADER_SIZE),this.encodeCompressedWeight(r,Wr.HEADER_SIZE+po.GTIN_SIZE,Wr.WEIGHT_SIZE),r.toString()}}Wr.HEADER_SIZE=5,Wr.WEIGHT_SIZE=15;class _h extends Wr{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class bh extends Wr{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class Zr extends In{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Zr.HEADER_SIZE+In.GTIN_SIZE)throw new ue;let r=new Ie;this.encodeCompressedGtin(r,Zr.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Zr.HEADER_SIZE+In.GTIN_SIZE,Zr.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(Zr.HEADER_SIZE+In.GTIN_SIZE+Zr.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()}}Zr.HEADER_SIZE=8,Zr.LAST_DIGIT_SIZE=2;class Mn extends In{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Mn.HEADER_SIZE+In.GTIN_SIZE)throw new ue;let r=new Ie;this.encodeCompressedGtin(r,Mn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Mn.HEADER_SIZE+In.GTIN_SIZE,Mn.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Mn.HEADER_SIZE+In.GTIN_SIZE+Mn.LAST_DIGIT_SIZE,Mn.FIRST_THREE_DIGITS_SIZE);a/100==0&&r.append("0"),a/10==0&&r.append("0"),r.append(a);let u=this.getGeneralDecoder().decodeGeneralPurposeField(Mn.HEADER_SIZE+In.GTIN_SIZE+Mn.LAST_DIGIT_SIZE+Mn.FIRST_THREE_DIGITS_SIZE,null);return r.append(u.getNewString()),r.toString()}}Mn.HEADER_SIZE=8,Mn.LAST_DIGIT_SIZE=2,Mn.FIRST_THREE_DIGITS_SIZE=10;class zt extends po{constructor(r,s,a){super(r),this.dateCode=a,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=zt.HEADER_SIZE+zt.GTIN_SIZE+zt.WEIGHT_SIZE+zt.DATE_SIZE)throw new ue;let r=new Ie;return this.encodeCompressedGtin(r,zt.HEADER_SIZE),this.encodeCompressedWeight(r,zt.HEADER_SIZE+zt.GTIN_SIZE,zt.WEIGHT_SIZE),this.encodeCompressedDate(r,zt.HEADER_SIZE+zt.GTIN_SIZE+zt.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(s,zt.DATE_SIZE);if(a==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let u=a%32;a/=32;let d=a%12+1;a/=12;let p=a;p/10==0&&r.append("0"),r.append(p),d/10==0&&r.append("0"),r.append(d),u/10==0&&r.append("0"),r.append(u)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}zt.HEADER_SIZE=8,zt.WEIGHT_SIZE=20,zt.DATE_SIZE=16;function mo(M){try{if(M.get(1))return new Hi(M);if(!M.get(2))return new ui(M);switch(Vi.extractNumericValueFromBitArray(M,1,4)){case 4:return new _h(M);case 5:return new bh(M)}switch(Vi.extractNumericValueFromBitArray(M,1,5)){case 12:return new Zr(M);case 13:return new Mn(M)}switch(Vi.extractNumericValueFromBitArray(M,1,7)){case 56:return new zt(M,"310","11");case 57:return new zt(M,"320","11");case 58:return new zt(M,"310","13");case 59:return new zt(M,"320","13");case 60:return new zt(M,"310","15");case 61:return new zt(M,"320","15");case 62:return new zt(M,"310","17");case 63:return new zt(M,"320","17")}}catch(r){throw console.log(r),new jn("unknown decoder: "+M)}}class Ni{constructor(r,s,a,u){this.leftchar=r,this.rightchar=s,this.finderpattern=a,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof Ni?Ni.equalsOrNull(r.leftchar,s.leftchar)&&Ni.equalsOrNull(r.rightchar,s.rightchar)&&Ni.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:Ni.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class ul{constructor(r,s,a){this.pairs=r,this.rowNumber=s,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof ul?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let a;return r.forEach((u,d)=>{s.forEach(p=>{u.getLeftChar().getValue()===p.getLeftChar().getValue()&&u.getRightChar().getValue()===p.getRightChar().getValue()&&u.getFinderPatter().getValue()===p.getFinderPatter().getValue()&&(a=!0)})}),a}}class pe extends Tn{constructor(r){super(...arguments),this.pairs=new Array(pe.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,a){this.pairs.length=0,this.startFromEven=!1;try{return pe.constructResult(this.decodeRow2pairs(r,s))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,pe.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(d){if(d instanceof ue){if(!this.pairs.length)throw new ue;a=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(r,!1),u){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new ue}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let a=s;a<this.rows.length;a++){let u=this.rows[a];this.pairs.length=0;for(let p of r)this.pairs.push(p.getPairs());if(this.pairs.push(u.getPairs()),!pe.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(r);d.push(u);try{return this.checkRows(d,a+1)}catch(p){this.verbose&&console.log(p)}}throw new ue}static isValidSequence(r){for(let s of pe.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let a=!0;for(let u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!=s[u]){a=!1;break}if(a)return!0}return!1}storeRow(r,s){let a=0,u=!1,d=!1;for(;a<this.rows.length;){let p=this.rows[a];if(p.getRowNumber()>r){d=p.isEquivalent(this.pairs);break}u=p.isEquivalent(this.pairs),a++}d||u||pe.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new ul(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let a of s)if(a.getPairs().length!==r.length){for(let u of a.getPairs())for(let d of r)if(Ni.equals(u,d))break}}static isPartialRow(r,s){for(let a of s){let u=!0;for(let d of r){let p=!1;for(let m of a.getPairs())if(d.equals(m)){p=!0;break}if(!p){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=wh.buildBitArray(r),u=mo(s).parseInformation(),d=r[0].getFinderPattern().getResultPoints(),p=r[r.length-1].getFinderPattern().getResultPoints(),m=[d[0],d[1],p[0],p[1]];return new Ze(u,null,null,m,ge.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),a=r.getRightChar();if(a==null)return!1;let u=a.getChecksumPortion(),d=2;for(let m=1;m<this.pairs.size();++m){let _=this.pairs.get(m);u+=_.getLeftChar().getChecksumPortion(),d++;let C=_.getRightChar();C!=null&&(u+=C.getChecksumPortion(),d++)}return u%=211,211*(d-4)+u==s.getValue()}static getNextSecondBar(r,s){let a;return r.get(s)?(a=r.getNextUnset(s),a=r.getNextSet(a)):(a=r.getNextSet(s),a=r.getNextUnset(a)),a}retrieveNextPair(r,s,a){let u=s.length%2==0;this.startFromEven&&(u=!u);let d,p=!0,m=-1;do this.findNextPair(r,s,m),d=this.parseFoundFinderPattern(r,a,u),d==null?m=pe.getNextSecondBar(r,this.startEnd[0]):p=!1;while(p);let _=this.decodeDataCharacter(r,d,u,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new ue;let C;try{C=this.decodeDataCharacter(r,d,u,!1)}catch(A){C=null,this.verbose&&console.log(A)}return new Ni(_,C,d,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,a){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p;a>=0?p=a:this.isEmptyPair(s)?p=0:p=s[s.length-1].getFinderPattern().getStartEnd()[1];let m=s.length%2!=0;this.startFromEven&&(m=!m);let _=!1;for(;p<d&&(_=!r.get(p),!!_);)p++;let C=0,A=p;for(let k=p;k<d;k++)if(r.get(k)!=_)u[C]++;else{if(C==3){if(m&&pe.reverseCounters(u),pe.isFinderPattern(u)){this.startEnd[0]=A,this.startEnd[1]=k;return}m&&pe.reverseCounters(u),A+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,C--}else C++;u[C]=1,_=!_}throw new ue}static reverseCounters(r){let s=r.length;for(let a=0;a<s/2;++a){let u=r[a];r[a]=r[s-a-1],r[s-a-1]=u}}parseFoundFinderPattern(r,s,a){let u,d,p;if(a){let C=this.startEnd[0]-1;for(;C>=0&&!r.get(C);)C--;C++,u=this.startEnd[0]-C,d=C,p=this.startEnd[1]}else d=this.startEnd[0],p=r.getNextUnset(this.startEnd[1]+1),u=p-this.startEnd[1];let m=this.getDecodeFinderCounters();P.arraycopy(m,0,m,1,m.length-1),m[0]=u;let _;try{_=this.parseFinderValue(m,pe.FINDER_PATTERNS)}catch{return null}return new xs(_,[d,p],d,p,s)}decodeDataCharacter(r,s,a,u){let d=this.getDataCharacterCounters();for(let Et=0;Et<d.length;Et++)d[Et]=0;if(u)pe.recordPatternInReverse(r,s.getStartEnd()[0],d);else{pe.recordPattern(r,s.getStartEnd()[1],d);for(let Et=0,En=d.length-1;Et<En;Et++,En--){let Yn=d[Et];d[Et]=d[En],d[En]=Yn}}let p=17,m=we.sum(new Int32Array(d))/p,_=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(m-_)/_>.3)throw new ue;let C=this.getOddCounts(),A=this.getEvenCounts(),k=this.getOddRoundingErrors(),B=this.getEvenRoundingErrors();for(let Et=0;Et<d.length;Et++){let En=1*d[Et]/m,Yn=En+.5;if(Yn<1){if(En<.3)throw new ue;Yn=1}else if(Yn>8){if(En>8.7)throw new ue;Yn=8}let Es=Et/2;Et&1?(A[Es]=Yn,B[Es]=En-Yn):(C[Es]=Yn,k[Es]=En-Yn)}this.adjustOddEvenCounts(p);let W=4*s.getValue()+(a?0:2)+(u?0:1)-1,K=0,J=0;for(let Et=C.length-1;Et>=0;Et--){if(pe.isNotA1left(s,a,u)){let En=pe.WEIGHTS[W][2*Et];J+=C[Et]*En}K+=C[Et]}let ie=0;for(let Et=A.length-1;Et>=0;Et--)if(pe.isNotA1left(s,a,u)){let En=pe.WEIGHTS[W][2*Et+1];ie+=A[Et]*En}let ce=J+ie;if(K&1||K>13||K<4)throw new ue;let Ce=(13-K)/2,Se=pe.SYMBOL_WIDEST[Ce],_e=9-Se,ht=Hr.getRSSvalue(C,Se,!0),it=Hr.getRSSvalue(A,_e,!1),Xt=pe.EVEN_TOTAL_SUBSET[Ce],Zn=pe.GSUM[Ce],Gn=ht*Xt+it+Zn;return new gs(Gn,ce)}static isNotA1left(r,s,a){return!(r.getValue()==0&&s&&a)}adjustOddEvenCounts(r){let s=we.sum(new Int32Array(this.getOddCounts())),a=we.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1;s>13?d=!0:s<4&&(u=!0);let p=!1,m=!1;a>13?m=!0:a<4&&(p=!0);let _=s+a-r,C=(s&1)==1,A=(a&1)==0;if(_==1)if(C){if(A)throw new ue;d=!0}else{if(!A)throw new ue;m=!0}else if(_==-1)if(C){if(A)throw new ue;u=!0}else{if(!A)throw new ue;p=!0}else if(_==0){if(C){if(!A)throw new ue;s<a?(u=!0,m=!0):(d=!0,p=!0)}else if(A)throw new ue}else throw new ue;if(u){if(d)throw new ue;pe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&pe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(m)throw new ue;pe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&pe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}pe.SYMBOL_WIDEST=[7,5,4,3,1],pe.EVEN_TOTAL_SUBSET=[4,20,52,104,204],pe.GSUM=[0,348,1388,2948,3988],pe.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],pe.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],pe.FINDER_PAT_A=0,pe.FINDER_PAT_B=1,pe.FINDER_PAT_C=2,pe.FINDER_PAT_D=3,pe.FINDER_PAT_E=4,pe.FINDER_PAT_F=5,pe.FINDER_PATTERN_SEQUENCES=[[pe.FINDER_PAT_A,pe.FINDER_PAT_A],[pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B],[pe.FINDER_PAT_A,pe.FINDER_PAT_C,pe.FINDER_PAT_B,pe.FINDER_PAT_D],[pe.FINDER_PAT_A,pe.FINDER_PAT_E,pe.FINDER_PAT_B,pe.FINDER_PAT_D,pe.FINDER_PAT_C],[pe.FINDER_PAT_A,pe.FINDER_PAT_E,pe.FINDER_PAT_B,pe.FINDER_PAT_D,pe.FINDER_PAT_D,pe.FINDER_PAT_F],[pe.FINDER_PAT_A,pe.FINDER_PAT_E,pe.FINDER_PAT_B,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_F,pe.FINDER_PAT_F],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_D],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_E],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_F,pe.FINDER_PAT_F],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_E,pe.FINDER_PAT_F,pe.FINDER_PAT_F]],pe.MAX_PAIRS=11;class Ch extends gs{constructor(r,s,a){super(r,s),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Jt extends Tn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,a){const u=this.decodePair(s,!1,r,a);Jt.addOrTally(this.possibleLeftPairs,u),s.reverse();let d=this.decodePair(s,!0,r,a);Jt.addOrTally(this.possibleRightPairs,d),s.reverse();for(let p of this.possibleLeftPairs)if(p.getCount()>1){for(let m of this.possibleRightPairs)if(m.getCount()>1&&Jt.checkChecksum(p,m))return Jt.constructResult(p,m)}throw new ue}static addOrTally(r,s){if(s==null)return;let a=!1;for(let u of r)if(u.getValue()===s.getValue()){u.incrementCount(),a=!0;break}a||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let a=4537077*r.getValue()+s.getValue(),u=new String(a).toString(),d=new Ie;for(let C=13-u.length;C>0;C--)d.append("0");d.append(u);let p=0;for(let C=0;C<13;C++){let A=d.charAt(C).charCodeAt(0)-48;p+=C&1?A:3*A}p=10-p%10,p===10&&(p=0),d.append(p.toString());let m=r.getFinderPattern().getResultPoints(),_=s.getFinderPattern().getResultPoints();return new Ze(d.toString(),null,0,[m[0],m[1],_[0],_[1]],ge.RSS_14,new Date().getTime())}static checkChecksum(r,s){let a=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,u=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,a===u}decodePair(r,s,a,u){try{let d=this.findFinderPattern(r,s),p=this.parseFoundFinderPattern(r,a,s,d),m=u==null?null:u.get(X.NEED_RESULT_POINT_CALLBACK);if(m!=null){let A=(d[0]+d[1])/2;s&&(A=r.getSize()-1-A),m.foundPossibleResultPoint(new te(A,a))}let _=this.decodeDataCharacter(r,p,!0),C=this.decodeDataCharacter(r,p,!1);return new Ch(1597*_.getValue()+C.getValue(),_.getChecksumPortion()+4*C.getChecksumPortion(),p)}catch{return null}}decodeDataCharacter(r,s,a){let u=this.getDataCharacterCounters();for(let ie=0;ie<u.length;ie++)u[ie]=0;if(a)St.recordPatternInReverse(r,s.getStartEnd()[0],u);else{St.recordPattern(r,s.getStartEnd()[1]+1,u);for(let ie=0,ce=u.length-1;ie<ce;ie++,ce--){let Ce=u[ie];u[ie]=u[ce],u[ce]=Ce}}let d=a?16:15,p=we.sum(new Int32Array(u))/d,m=this.getOddCounts(),_=this.getEvenCounts(),C=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors();for(let ie=0;ie<u.length;ie++){let ce=u[ie]/p,Ce=Math.floor(ce+.5);Ce<1?Ce=1:Ce>8&&(Ce=8);let Se=Math.floor(ie/2);ie&1?(_[Se]=Ce,A[Se]=ce-Ce):(m[Se]=Ce,C[Se]=ce-Ce)}this.adjustOddEvenCounts(a,d);let k=0,B=0;for(let ie=m.length-1;ie>=0;ie--)B*=9,B+=m[ie],k+=m[ie];let W=0,K=0;for(let ie=_.length-1;ie>=0;ie--)W*=9,W+=_[ie],K+=_[ie];let J=B+3*W;if(a){if(k&1||k>12||k<4)throw new ue;let ie=(12-k)/2,ce=Jt.OUTSIDE_ODD_WIDEST[ie],Ce=9-ce,Se=Hr.getRSSvalue(m,ce,!1),_e=Hr.getRSSvalue(_,Ce,!0),ht=Jt.OUTSIDE_EVEN_TOTAL_SUBSET[ie],it=Jt.OUTSIDE_GSUM[ie];return new gs(Se*ht+_e+it,J)}else{if(K&1||K>10||K<4)throw new ue;let ie=(10-K)/2,ce=Jt.INSIDE_ODD_WIDEST[ie],Ce=9-ce,Se=Hr.getRSSvalue(m,ce,!0),_e=Hr.getRSSvalue(_,Ce,!1),ht=Jt.INSIDE_ODD_TOTAL_SUBSET[ie],it=Jt.INSIDE_GSUM[ie];return new gs(_e*ht+Se+it,J)}}findFinderPattern(r,s){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=r.getSize(),d=!1,p=0;for(;p<u&&(d=!r.get(p),s!==d);)p++;let m=0,_=p;for(let C=p;C<u;C++)if(r.get(C)!==d)a[m]++;else{if(m===3){if(Tn.isFinderPattern(a))return[_,C];_+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,m--}else m++;a[m]=1,d=!d}throw new ue}parseFoundFinderPattern(r,s,a,u){let d=r.get(u[0]),p=u[0]-1;for(;p>=0&&d!==r.get(p);)p--;p++;const m=u[0]-p,_=this.getDecodeFinderCounters(),C=new Int32Array(_.length);P.arraycopy(_,0,C,1,_.length-1),C[0]=m;const A=this.parseFinderValue(C,Jt.FINDER_PATTERNS);let k=p,B=u[1];return a&&(k=r.getSize()-1-k,B=r.getSize()-1-B),new xs(A,[p,u[1]],k,B,s)}adjustOddEvenCounts(r,s){let a=we.sum(new Int32Array(this.getOddCounts())),u=we.sum(new Int32Array(this.getEvenCounts())),d=!1,p=!1,m=!1,_=!1;r?(a>12?p=!0:a<4&&(d=!0),u>12?_=!0:u<4&&(m=!0)):(a>11?p=!0:a<5&&(d=!0),u>10?_=!0:u<4&&(m=!0));let C=a+u-s,A=(a&1)===(r?1:0),k=(u&1)===1;if(C===1)if(A){if(k)throw new ue;p=!0}else{if(!k)throw new ue;_=!0}else if(C===-1)if(A){if(k)throw new ue;d=!0}else{if(!k)throw new ue;m=!0}else if(C===0){if(A){if(!k)throw new ue;a<u?(d=!0,_=!0):(p=!0,m=!0)}else if(k)throw new ue}else throw new ue;if(d){if(p)throw new ue;Tn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&Tn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(_)throw new ue;Tn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&Tn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Jt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Jt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Jt.OUTSIDE_GSUM=[0,161,961,2015,2715],Jt.INSIDE_GSUM=[0,336,1036,1516],Jt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Jt.INSIDE_ODD_WIDEST=[2,4,6,8],Jt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ti extends St{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const a=r?r.get(X.POSSIBLE_FORMATS):null,u=r&&r.get(X.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(ge.EAN_13)||a.includes(ge.UPC_A)||a.includes(ge.EAN_8)||a.includes(ge.UPC_E))&&this.readers.push(new ll(r)),a.includes(ge.CODE_39)&&this.readers.push(new ln(u)),a.includes(ge.CODE_128)&&this.readers.push(new Ae),a.includes(ge.ITF)&&this.readers.push(new kt),a.includes(ge.RSS_14)&&this.readers.push(new Jt),a.includes(ge.RSS_EXPANDED)&&this.readers.push(new pe(this.verbose))):(this.readers.push(new ll(r)),this.readers.push(new ln),this.readers.push(new ll(r)),this.readers.push(new Ae),this.readers.push(new kt),this.readers.push(new Jt),this.readers.push(new pe(this.verbose)))}decodeRow(r,s,a){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(r,s,a)}catch{}throw new ue}reset(){this.readers.forEach(r=>r.reset())}}class go extends ot{constructor(r=500,s){super(new Ti(s),r,s)}}class bt{constructor(r,s,a){this.ecCodewords=r,this.ecBlocks=[s],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class wt{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ct{constructor(r,s,a,u,d,p){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=a,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=d,this.ecBlocks=p;let m=0;const _=p.getECCodewords(),C=p.getECBlocks();for(let A of C)m+=A.getCount()*(A.getDataCodewords()+_);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if(r&1||s&1)throw new G;for(let a of ct.VERSIONS)if(a.symbolSizeRows===r&&a.symbolSizeColumns===s)return a;throw new G}toString(){return""+this.versionNumber}static buildVersions(){return[new ct(1,10,10,8,8,new bt(5,new wt(1,3))),new ct(2,12,12,10,10,new bt(7,new wt(1,5))),new ct(3,14,14,12,12,new bt(10,new wt(1,8))),new ct(4,16,16,14,14,new bt(12,new wt(1,12))),new ct(5,18,18,16,16,new bt(14,new wt(1,18))),new ct(6,20,20,18,18,new bt(18,new wt(1,22))),new ct(7,22,22,20,20,new bt(20,new wt(1,30))),new ct(8,24,24,22,22,new bt(24,new wt(1,36))),new ct(9,26,26,24,24,new bt(28,new wt(1,44))),new ct(10,32,32,14,14,new bt(36,new wt(1,62))),new ct(11,36,36,16,16,new bt(42,new wt(1,86))),new ct(12,40,40,18,18,new bt(48,new wt(1,114))),new ct(13,44,44,20,20,new bt(56,new wt(1,144))),new ct(14,48,48,22,22,new bt(68,new wt(1,174))),new ct(15,52,52,24,24,new bt(42,new wt(2,102))),new ct(16,64,64,14,14,new bt(56,new wt(2,140))),new ct(17,72,72,16,16,new bt(36,new wt(4,92))),new ct(18,80,80,18,18,new bt(48,new wt(4,114))),new ct(19,88,88,20,20,new bt(56,new wt(4,144))),new ct(20,96,96,22,22,new bt(68,new wt(4,174))),new ct(21,104,104,24,24,new bt(56,new wt(6,136))),new ct(22,120,120,18,18,new bt(68,new wt(6,175))),new ct(23,132,132,20,20,new bt(62,new wt(8,163))),new ct(24,144,144,22,22,new bt(62,new wt(8,156),new wt(2,155))),new ct(25,8,18,6,16,new bt(7,new wt(1,5))),new ct(26,8,32,6,14,new bt(11,new wt(1,10))),new ct(27,12,26,10,24,new bt(14,new wt(1,16))),new ct(28,12,36,10,16,new bt(18,new wt(1,22))),new ct(29,16,36,14,16,new bt(24,new wt(1,32))),new ct(30,16,48,14,22,new bt(28,new wt(1,49)))]}}ct.VERSIONS=ct.buildVersions();class xt{constructor(r){const s=r.getHeight();if(s<8||s>144||s&1)throw new G;this.version=xt.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new je(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),a=r.getWidth();return ct.getVersionForDimensions(s,a)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,a=4,u=0;const d=this.mappingBitMatrix.getHeight(),p=this.mappingBitMatrix.getWidth();let m=!1,_=!1,C=!1,A=!1;do if(a===d&&u===0&&!m)r[s++]=this.readCorner1(d,p)&255,a-=2,u+=2,m=!0;else if(a===d-2&&u===0&&p&3&&!_)r[s++]=this.readCorner2(d,p)&255,a-=2,u+=2,_=!0;else if(a===d+4&&u===2&&!(p&7)&&!C)r[s++]=this.readCorner3(d,p)&255,a-=2,u+=2,C=!0;else if(a===d-2&&u===0&&(p&7)===4&&!A)r[s++]=this.readCorner4(d,p)&255,a-=2,u+=2,A=!0;else{do a<d&&u>=0&&!this.readMappingMatrix.get(u,a)&&(r[s++]=this.readUtah(a,u,d,p)&255),a-=2,u+=2;while(a>=0&&u<p);a+=1,u+=3;do a>=0&&u<p&&!this.readMappingMatrix.get(u,a)&&(r[s++]=this.readUtah(a,u,d,p)&255),a+=2,u-=2;while(a<d&&u>=0);a+=3,u+=1}while(a<d||u<p);if(s!==this.version.getTotalCodewords())throw new G;return r}readModule(r,s,a,u){return r<0&&(r+=a,s+=4-(a+4&7)),s<0&&(s+=u,r+=4-(u+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,a,u){let d=0;return this.readModule(r-2,s-2,a,u)&&(d|=1),d<<=1,this.readModule(r-2,s-1,a,u)&&(d|=1),d<<=1,this.readModule(r-1,s-2,a,u)&&(d|=1),d<<=1,this.readModule(r-1,s-1,a,u)&&(d|=1),d<<=1,this.readModule(r-1,s,a,u)&&(d|=1),d<<=1,this.readModule(r,s-2,a,u)&&(d|=1),d<<=1,this.readModule(r,s-1,a,u)&&(d|=1),d<<=1,this.readModule(r,s,a,u)&&(d|=1),d}readCorner1(r,s){let a=0;return this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,1,r,s)&&(a|=1),a<<=1,this.readModule(r-1,2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(2,s-1,r,s)&&(a|=1),a<<=1,this.readModule(3,s-1,r,s)&&(a|=1),a}readCorner2(r,s){let a=0;return this.readModule(r-3,0,r,s)&&(a|=1),a<<=1,this.readModule(r-2,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(0,s-4,r,s)&&(a|=1),a<<=1,this.readModule(0,s-3,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a}readCorner3(r,s){let a=0;return this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(0,s-3,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-3,r,s)&&(a|=1),a<<=1,this.readModule(1,s-2,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a}readCorner4(r,s){let a=0;return this.readModule(r-3,0,r,s)&&(a|=1),a<<=1,this.readModule(r-2,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(2,s-1,r,s)&&(a|=1),a<<=1,this.readModule(3,s-1,r,s)&&(a|=1),a}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new E("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),p=s/u|0,m=a/d|0,_=p*u,C=m*d,A=new je(C,_);for(let k=0;k<p;++k){const B=k*u;for(let W=0;W<m;++W){const K=W*d;for(let J=0;J<u;++J){const ie=k*(u+2)+1+J,ce=B+J;for(let Ce=0;Ce<d;++Ce){const Se=W*(d+2)+1+Ce;if(r.get(Se,ie)){const _e=K+Ce;A.set(_e,ce)}}}}}return A}}class Bt{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const a=s.getECBlocks();let u=0;const d=a.getECBlocks();for(let J of d)u+=J.getCount();const p=new Array(u);let m=0;for(let J of d)for(let ie=0;ie<J.getCount();ie++){const ce=J.getDataCodewords(),Ce=a.getECCodewords()+ce;p[m++]=new Bt(ce,new Uint8Array(Ce))}const C=p[0].codewords.length-a.getECCodewords(),A=C-1;let k=0;for(let J=0;J<A;J++)for(let ie=0;ie<m;ie++)p[ie].codewords[J]=r[k++];const B=s.getVersionNumber()===24,W=B?8:m;for(let J=0;J<W;J++)p[J].codewords[C-1]=r[k++];const K=p[0].codewords.length;for(let J=C;J<K;J++)for(let ie=0;ie<m;ie++){const ce=B?(ie+8)%m:ie,Ce=B&&ce>7?J-1:J;p[ce].codewords[Ce]=r[k++]}if(k!==r.length)throw new E;return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ys{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new E(""+r);let s=0,a=this.bitOffset,u=this.byteOffset;const d=this.bytes;if(a>0){const p=8-a,m=r<p?r:p,_=p-m,C=255>>8-m<<_;s=(d[u]&C)>>_,r-=m,a+=m,a===8&&(a=0,u++)}if(r>0){for(;r>=8;)s=s<<8|d[u]&255,u++,r-=8;if(r>0){const p=8-r,m=255>>p<<p;s=s<<r|(d[u]&m)>>p,a+=r}}return this.bitOffset=a,this.byteOffset=u,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ut;(function(M){M[M.PAD_ENCODE=0]="PAD_ENCODE",M[M.ASCII_ENCODE=1]="ASCII_ENCODE",M[M.C40_ENCODE=2]="C40_ENCODE",M[M.TEXT_ENCODE=3]="TEXT_ENCODE",M[M.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",M[M.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",M[M.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ut||(Ut={}));class rr{static decode(r){const s=new ys(r),a=new Ie,u=new Ie,d=new Array;let p=Ut.ASCII_ENCODE;do if(p===Ut.ASCII_ENCODE)p=this.decodeAsciiSegment(s,a,u);else{switch(p){case Ut.C40_ENCODE:this.decodeC40Segment(s,a);break;case Ut.TEXT_ENCODE:this.decodeTextSegment(s,a);break;case Ut.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,a);break;case Ut.EDIFACT_ENCODE:this.decodeEdifactSegment(s,a);break;case Ut.BASE256_ENCODE:this.decodeBase256Segment(s,a,d);break;default:throw new G}p=Ut.ASCII_ENCODE}while(p!==Ut.PAD_ENCODE&&s.available()>0);return u.length()>0&&a.append(u.toString()),new Bn(r,a.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(r,s,a){let u=!1;do{let d=r.readBits(8);if(d===0)throw new G;if(d<=128)return u&&(d+=128),s.append(String.fromCharCode(d-1)),Ut.ASCII_ENCODE;if(d===129)return Ut.PAD_ENCODE;if(d<=229){const p=d-130;p<10&&s.append("0"),s.append(""+p)}else switch(d){case 230:return Ut.C40_ENCODE;case 231:return Ut.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:s.append("[)>05"),a.insert(0,"");break;case 237:s.append("[)>06"),a.insert(0,"");break;case 238:return Ut.ANSIX12_ENCODE;case 239:return Ut.TEXT_ENCODE;case 240:return Ut.EDIFACT_ENCODE;case 241:break;default:if(d!==254||r.available()!==0)throw new G;break}}while(r.available()>0);return Ut.ASCII_ENCODE}static decodeC40Segment(r,s){let a=!1;const u=[];let d=0;do{if(r.available()===8)return;const p=r.readBits(8);if(p===254)return;this.parseTwoBytes(p,r.readBits(8),u);for(let m=0;m<3;m++){const _=u[m];switch(d){case 0:if(_<3)d=_+1;else if(_<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[_];a?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),a=!1):s.append(C)}else throw new G;break;case 1:a?(s.append(String.fromCharCode(_+128)),a=!1):s.append(String.fromCharCode(_)),d=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[_];a?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),a=!1):s.append(C)}else switch(_){case 27:s.append("");break;case 30:a=!0;break;default:throw new G}d=0;break;case 3:a?(s.append(String.fromCharCode(_+224)),a=!1):s.append(String.fromCharCode(_+96)),d=0;break;default:throw new G}}}while(r.available()>0)}static decodeTextSegment(r,s){let a=!1,u=[],d=0;do{if(r.available()===8)return;const p=r.readBits(8);if(p===254)return;this.parseTwoBytes(p,r.readBits(8),u);for(let m=0;m<3;m++){const _=u[m];switch(d){case 0:if(_<3)d=_+1;else if(_<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[_];a?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),a=!1):s.append(C)}else throw new G;break;case 1:a?(s.append(String.fromCharCode(_+128)),a=!1):s.append(String.fromCharCode(_)),d=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[_];a?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),a=!1):s.append(C)}else switch(_){case 27:s.append("");break;case 30:a=!0;break;default:throw new G}d=0;break;case 3:if(_<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[_];a?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),a=!1):s.append(C),d=0}else throw new G;break;default:throw new G}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const a=[];do{if(r.available()===8)return;const u=r.readBits(8);if(u===254)return;this.parseTwoBytes(u,r.readBits(8),a);for(let d=0;d<3;d++){const p=a[d];switch(p){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(p<14)s.append(String.fromCharCode(p+44));else if(p<40)s.append(String.fromCharCode(p+51));else throw new G;break}}}while(r.available()>0)}static parseTwoBytes(r,s,a){let u=(r<<8)+s-1,d=Math.floor(u/1600);a[0]=d,u-=d*1600,d=Math.floor(u/40),a[1]=d,a[2]=u-d*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let a=0;a<4;a++){let u=r.readBits(6);if(u===31){const d=8-r.getBitOffset();d!==8&&r.readBits(d);return}u&32||(u|=64),s.append(String.fromCharCode(u))}}while(r.available()>0)}static decodeBase256Segment(r,s,a){let u=1+r.getByteOffset();const d=this.unrandomize255State(r.readBits(8),u++);let p;if(d===0?p=r.available()/8|0:d<250?p=d:p=250*(d-249)+this.unrandomize255State(r.readBits(8),u++),p<0)throw new G;const m=new Uint8Array(p);for(let _=0;_<p;_++){if(r.available()<8)throw new G;m[_]=this.unrandomize255State(r.readBits(8),u++)}a.push(m);try{s.append(me.decode(m,le.ISO88591))}catch(_){throw new jn("Platform does not support required encoding: "+_.message)}}static unrandomize255State(r,s){const a=149*s%255+1,u=r-a;return u>=0?u:u+256}}rr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],rr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],rr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],rr.TEXT_SHIFT2_SET_CHARS=rr.C40_SHIFT2_SET_CHARS,rr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class dl{constructor(){this.rsDecoder=new Er(at.DATA_MATRIX_FIELD_256)}decode(r){const s=new xt(r),a=s.getVersion(),u=s.readCodewords(),d=Bt.getDataBlocks(u,a);let p=0;for(let C of d)p+=C.getNumDataCodewords();const m=new Uint8Array(p),_=d.length;for(let C=0;C<_;C++){const A=d[C],k=A.getCodewords(),B=A.getNumDataCodewords();this.correctErrors(k,B);for(let W=0;W<B;W++)m[W*_+C]=k[W]}return rr.decode(m)}correctErrors(r,s){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-s)}catch{throw new O}for(let u=0;u<s;u++)r[u]=a[u]}}class Ve{constructor(r){this.image=r,this.rectangleDetector=new Le(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new ue;s=this.shiftToModuleCenter(s);const a=s[0],u=s[1],d=s[2],p=s[3];let m=this.transitionsBetween(a,p)+1,_=this.transitionsBetween(d,p)+1;(m&1)===1&&(m+=1),(_&1)===1&&(_+=1),4*m<7*_&&4*_<7*m&&(m=_=Math.max(m,_));let C=Ve.sampleGrid(this.image,a,u,d,p,m,_);return new xe(C,[a,u,d,p])}static shiftPoint(r,s,a){let u=(s.getX()-r.getX())/(a+1),d=(s.getY()-r.getY())/(a+1);return new te(r.getX()+u,r.getY()+d)}static moveAway(r,s,a){let u=r.getX(),d=r.getY();return u<s?u-=1:u+=1,d<a?d-=1:d+=1,new te(u,d)}detectSolid1(r){let s=r[0],a=r[1],u=r[3],d=r[2],p=this.transitionsBetween(s,a),m=this.transitionsBetween(a,u),_=this.transitionsBetween(u,d),C=this.transitionsBetween(d,s),A=p,k=[d,s,a,u];return A>m&&(A=m,k[0]=s,k[1]=a,k[2]=u,k[3]=d),A>_&&(A=_,k[0]=a,k[1]=u,k[2]=d,k[3]=s),A>C&&(k[0]=u,k[1]=d,k[2]=s,k[3]=a),k}detectSolid2(r){let s=r[0],a=r[1],u=r[2],d=r[3],p=this.transitionsBetween(s,d),m=Ve.shiftPoint(a,u,(p+1)*4),_=Ve.shiftPoint(u,a,(p+1)*4),C=this.transitionsBetween(m,s),A=this.transitionsBetween(_,d);return C<A?(r[0]=s,r[1]=a,r[2]=u,r[3]=d):(r[0]=a,r[1]=u,r[2]=d,r[3]=s),r}correctTopRight(r){let s=r[0],a=r[1],u=r[2],d=r[3],p=this.transitionsBetween(s,d),m=this.transitionsBetween(a,d),_=Ve.shiftPoint(s,a,(m+1)*4),C=Ve.shiftPoint(u,a,(p+1)*4);p=this.transitionsBetween(_,d),m=this.transitionsBetween(C,d);let A=new te(d.getX()+(u.getX()-a.getX())/(p+1),d.getY()+(u.getY()-a.getY())/(p+1)),k=new te(d.getX()+(s.getX()-a.getX())/(m+1),d.getY()+(s.getY()-a.getY())/(m+1));if(!this.isValid(A))return this.isValid(k)?k:null;if(!this.isValid(k))return A;let B=this.transitionsBetween(_,A)+this.transitionsBetween(C,A),W=this.transitionsBetween(_,k)+this.transitionsBetween(C,k);return B>W?A:k}shiftToModuleCenter(r){let s=r[0],a=r[1],u=r[2],d=r[3],p=this.transitionsBetween(s,d)+1,m=this.transitionsBetween(u,d)+1,_=Ve.shiftPoint(s,a,m*4),C=Ve.shiftPoint(u,a,p*4);p=this.transitionsBetween(_,d)+1,m=this.transitionsBetween(C,d)+1,(p&1)===1&&(p+=1),(m&1)===1&&(m+=1);let A=(s.getX()+a.getX()+u.getX()+d.getX())/4,k=(s.getY()+a.getY()+u.getY()+d.getY())/4;s=Ve.moveAway(s,A,k),a=Ve.moveAway(a,A,k),u=Ve.moveAway(u,A,k),d=Ve.moveAway(d,A,k);let B,W;return _=Ve.shiftPoint(s,a,m*4),_=Ve.shiftPoint(_,d,p*4),B=Ve.shiftPoint(a,s,m*4),B=Ve.shiftPoint(B,u,p*4),C=Ve.shiftPoint(u,d,m*4),C=Ve.shiftPoint(C,a,p*4),W=Ve.shiftPoint(d,u,m*4),W=Ve.shiftPoint(W,s,p*4),[_,B,C,W]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,a,u,d,p,m){return He.getInstance().sampleGrid(r,p,m,.5,.5,p-.5,.5,p-.5,m-.5,.5,m-.5,s.getX(),s.getY(),d.getX(),d.getY(),u.getX(),u.getY(),a.getX(),a.getY())}transitionsBetween(r,s){let a=Math.trunc(r.getX()),u=Math.trunc(r.getY()),d=Math.trunc(s.getX()),p=Math.trunc(s.getY()),m=Math.abs(p-u)>Math.abs(d-a);if(m){let J=a;a=u,u=J,J=d,d=p,p=J}let _=Math.abs(d-a),C=Math.abs(p-u),A=-_/2,k=u<p?1:-1,B=a<d?1:-1,W=0,K=this.image.get(m?u:a,m?a:u);for(let J=a,ie=u;J!==d;J+=B){let ce=this.image.get(m?ie:J,m?J:ie);if(ce!==K&&(W++,K=ce),A+=C,A>0){if(ie===p)break;ie+=k,A-=_}}return W}}class Tt{constructor(){this.decoder=new dl}decode(r,s=null){let a,u;if(s!=null&&s.has(X.PURE_BARCODE)){const C=Tt.extractPureBits(r.getBlackMatrix());a=this.decoder.decode(C),u=Tt.NO_POINTS}else{const C=new Ve(r.getBlackMatrix()).detect();a=this.decoder.decode(C.getBits()),u=C.getPoints()}const d=a.getRawBytes(),p=new Ze(a.getText(),d,8*d.length,u,ge.DATA_MATRIX,P.currentTimeMillis()),m=a.getByteSegments();m!=null&&p.putMetadata(ft.BYTE_SEGMENTS,m);const _=a.getECLevel();return _!=null&&p.putMetadata(ft.ERROR_CORRECTION_LEVEL,_),p}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(s==null||a==null)throw new ue;const u=this.moduleSize(s,r);let d=s[1];const p=a[1];let m=s[0];const C=(a[0]-m+1)/u,A=(p-d+1)/u;if(C<=0||A<=0)throw new ue;const k=u/2;d+=k,m+=k;const B=new je(C,A);for(let W=0;W<A;W++){const K=d+W*u;for(let J=0;J<C;J++)r.get(m+J*u,K)&&B.set(J,W)}return B}static moduleSize(r,s){const a=s.getWidth();let u=r[0];const d=r[1];for(;u<a&&s.get(u,d);)u++;if(u===a)throw new ue;const p=u-r[0];if(p===0)throw new ue;return p}}Tt.NO_POINTS=[];class hl extends ot{constructor(r=500){super(new Tt,r)}}var di;(function(M){M[M.L=0]="L",M[M.M=1]="M",M[M.Q=2]="Q",M[M.H=3]="H"})(di||(di={}));class dt{constructor(r,s,a){this.value=r,this.stringValue=s,this.bits=a,dt.FOR_BITS.set(a,this),dt.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return dt.L;case"M":return dt.M;case"Q":return dt.Q;case"H":return dt.H;default:throw new b(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof dt))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=dt.FOR_BITS.size)throw new E;return dt.FOR_BITS.get(r)}}dt.FOR_BITS=new Map,dt.FOR_VALUE=new Map,dt.L=new dt(di.L,"L",1),dt.M=new dt(di.M,"M",0),dt.Q=new dt(di.Q,"Q",3),dt.H=new dt(di.H,"H",2);class kn{constructor(r){this.errorCorrectionLevel=dt.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return I.bitCount(r^s)}static decodeFormatInformation(r,s){const a=kn.doDecodeFormatInformation(r,s);return a!==null?a:kn.doDecodeFormatInformation(r^kn.FORMAT_INFO_MASK_QR,s^kn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let a=Number.MAX_SAFE_INTEGER,u=0;for(const d of kn.FORMAT_INFO_DECODE_LOOKUP){const p=d[0];if(p===r||p===s)return new kn(d[1]);let m=kn.numBitsDiffering(r,p);m<a&&(u=d[1],a=m),r!==s&&(m=kn.numBitsDiffering(s,p),m<a&&(u=d[1],a=m))}return a<=3?new kn(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof kn))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}kn.FORMAT_INFO_MASK_QR=21522,kn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class se{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const a of s)r+=a.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class H{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ke{constructor(r,s,...a){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=a;let u=0;const d=a[0].getECCodewordsPerBlock(),p=a[0].getECBlocks();for(const m of p)u+=m.getCount()*(m.getDataCodewords()+d);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new G;try{return this.getVersionForNumber((r-17)/4)}catch{throw new G}}static getVersionForNumber(r){if(r<1||r>40)throw new E;return ke.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,a=0;for(let u=0;u<ke.VERSION_DECODE_INFO.length;u++){const d=ke.VERSION_DECODE_INFO[u];if(d===r)return ke.getVersionForNumber(u+7);const p=kn.numBitsDiffering(r,d);p<s&&(a=u+7,s=p)}return s<=3?ke.getVersionForNumber(a):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new je(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const a=this.alignmentPatternCenters.length;for(let u=0;u<a;u++){const d=this.alignmentPatternCenters[u]-2;for(let p=0;p<a;p++)u===0&&(p===0||p===a-1)||u===a-1&&p===0||s.setRegion(this.alignmentPatternCenters[p]-2,d,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}ke.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ke.VERSIONS=[new ke(1,new Int32Array(0),new se(7,new H(1,19)),new se(10,new H(1,16)),new se(13,new H(1,13)),new se(17,new H(1,9))),new ke(2,Int32Array.from([6,18]),new se(10,new H(1,34)),new se(16,new H(1,28)),new se(22,new H(1,22)),new se(28,new H(1,16))),new ke(3,Int32Array.from([6,22]),new se(15,new H(1,55)),new se(26,new H(1,44)),new se(18,new H(2,17)),new se(22,new H(2,13))),new ke(4,Int32Array.from([6,26]),new se(20,new H(1,80)),new se(18,new H(2,32)),new se(26,new H(2,24)),new se(16,new H(4,9))),new ke(5,Int32Array.from([6,30]),new se(26,new H(1,108)),new se(24,new H(2,43)),new se(18,new H(2,15),new H(2,16)),new se(22,new H(2,11),new H(2,12))),new ke(6,Int32Array.from([6,34]),new se(18,new H(2,68)),new se(16,new H(4,27)),new se(24,new H(4,19)),new se(28,new H(4,15))),new ke(7,Int32Array.from([6,22,38]),new se(20,new H(2,78)),new se(18,new H(4,31)),new se(18,new H(2,14),new H(4,15)),new se(26,new H(4,13),new H(1,14))),new ke(8,Int32Array.from([6,24,42]),new se(24,new H(2,97)),new se(22,new H(2,38),new H(2,39)),new se(22,new H(4,18),new H(2,19)),new se(26,new H(4,14),new H(2,15))),new ke(9,Int32Array.from([6,26,46]),new se(30,new H(2,116)),new se(22,new H(3,36),new H(2,37)),new se(20,new H(4,16),new H(4,17)),new se(24,new H(4,12),new H(4,13))),new ke(10,Int32Array.from([6,28,50]),new se(18,new H(2,68),new H(2,69)),new se(26,new H(4,43),new H(1,44)),new se(24,new H(6,19),new H(2,20)),new se(28,new H(6,15),new H(2,16))),new ke(11,Int32Array.from([6,30,54]),new se(20,new H(4,81)),new se(30,new H(1,50),new H(4,51)),new se(28,new H(4,22),new H(4,23)),new se(24,new H(3,12),new H(8,13))),new ke(12,Int32Array.from([6,32,58]),new se(24,new H(2,92),new H(2,93)),new se(22,new H(6,36),new H(2,37)),new se(26,new H(4,20),new H(6,21)),new se(28,new H(7,14),new H(4,15))),new ke(13,Int32Array.from([6,34,62]),new se(26,new H(4,107)),new se(22,new H(8,37),new H(1,38)),new se(24,new H(8,20),new H(4,21)),new se(22,new H(12,11),new H(4,12))),new ke(14,Int32Array.from([6,26,46,66]),new se(30,new H(3,115),new H(1,116)),new se(24,new H(4,40),new H(5,41)),new se(20,new H(11,16),new H(5,17)),new se(24,new H(11,12),new H(5,13))),new ke(15,Int32Array.from([6,26,48,70]),new se(22,new H(5,87),new H(1,88)),new se(24,new H(5,41),new H(5,42)),new se(30,new H(5,24),new H(7,25)),new se(24,new H(11,12),new H(7,13))),new ke(16,Int32Array.from([6,26,50,74]),new se(24,new H(5,98),new H(1,99)),new se(28,new H(7,45),new H(3,46)),new se(24,new H(15,19),new H(2,20)),new se(30,new H(3,15),new H(13,16))),new ke(17,Int32Array.from([6,30,54,78]),new se(28,new H(1,107),new H(5,108)),new se(28,new H(10,46),new H(1,47)),new se(28,new H(1,22),new H(15,23)),new se(28,new H(2,14),new H(17,15))),new ke(18,Int32Array.from([6,30,56,82]),new se(30,new H(5,120),new H(1,121)),new se(26,new H(9,43),new H(4,44)),new se(28,new H(17,22),new H(1,23)),new se(28,new H(2,14),new H(19,15))),new ke(19,Int32Array.from([6,30,58,86]),new se(28,new H(3,113),new H(4,114)),new se(26,new H(3,44),new H(11,45)),new se(26,new H(17,21),new H(4,22)),new se(26,new H(9,13),new H(16,14))),new ke(20,Int32Array.from([6,34,62,90]),new se(28,new H(3,107),new H(5,108)),new se(26,new H(3,41),new H(13,42)),new se(30,new H(15,24),new H(5,25)),new se(28,new H(15,15),new H(10,16))),new ke(21,Int32Array.from([6,28,50,72,94]),new se(28,new H(4,116),new H(4,117)),new se(26,new H(17,42)),new se(28,new H(17,22),new H(6,23)),new se(30,new H(19,16),new H(6,17))),new ke(22,Int32Array.from([6,26,50,74,98]),new se(28,new H(2,111),new H(7,112)),new se(28,new H(17,46)),new se(30,new H(7,24),new H(16,25)),new se(24,new H(34,13))),new ke(23,Int32Array.from([6,30,54,78,102]),new se(30,new H(4,121),new H(5,122)),new se(28,new H(4,47),new H(14,48)),new se(30,new H(11,24),new H(14,25)),new se(30,new H(16,15),new H(14,16))),new ke(24,Int32Array.from([6,28,54,80,106]),new se(30,new H(6,117),new H(4,118)),new se(28,new H(6,45),new H(14,46)),new se(30,new H(11,24),new H(16,25)),new se(30,new H(30,16),new H(2,17))),new ke(25,Int32Array.from([6,32,58,84,110]),new se(26,new H(8,106),new H(4,107)),new se(28,new H(8,47),new H(13,48)),new se(30,new H(7,24),new H(22,25)),new se(30,new H(22,15),new H(13,16))),new ke(26,Int32Array.from([6,30,58,86,114]),new se(28,new H(10,114),new H(2,115)),new se(28,new H(19,46),new H(4,47)),new se(28,new H(28,22),new H(6,23)),new se(30,new H(33,16),new H(4,17))),new ke(27,Int32Array.from([6,34,62,90,118]),new se(30,new H(8,122),new H(4,123)),new se(28,new H(22,45),new H(3,46)),new se(30,new H(8,23),new H(26,24)),new se(30,new H(12,15),new H(28,16))),new ke(28,Int32Array.from([6,26,50,74,98,122]),new se(30,new H(3,117),new H(10,118)),new se(28,new H(3,45),new H(23,46)),new se(30,new H(4,24),new H(31,25)),new se(30,new H(11,15),new H(31,16))),new ke(29,Int32Array.from([6,30,54,78,102,126]),new se(30,new H(7,116),new H(7,117)),new se(28,new H(21,45),new H(7,46)),new se(30,new H(1,23),new H(37,24)),new se(30,new H(19,15),new H(26,16))),new ke(30,Int32Array.from([6,26,52,78,104,130]),new se(30,new H(5,115),new H(10,116)),new se(28,new H(19,47),new H(10,48)),new se(30,new H(15,24),new H(25,25)),new se(30,new H(23,15),new H(25,16))),new ke(31,Int32Array.from([6,30,56,82,108,134]),new se(30,new H(13,115),new H(3,116)),new se(28,new H(2,46),new H(29,47)),new se(30,new H(42,24),new H(1,25)),new se(30,new H(23,15),new H(28,16))),new ke(32,Int32Array.from([6,34,60,86,112,138]),new se(30,new H(17,115)),new se(28,new H(10,46),new H(23,47)),new se(30,new H(10,24),new H(35,25)),new se(30,new H(19,15),new H(35,16))),new ke(33,Int32Array.from([6,30,58,86,114,142]),new se(30,new H(17,115),new H(1,116)),new se(28,new H(14,46),new H(21,47)),new se(30,new H(29,24),new H(19,25)),new se(30,new H(11,15),new H(46,16))),new ke(34,Int32Array.from([6,34,62,90,118,146]),new se(30,new H(13,115),new H(6,116)),new se(28,new H(14,46),new H(23,47)),new se(30,new H(44,24),new H(7,25)),new se(30,new H(59,16),new H(1,17))),new ke(35,Int32Array.from([6,30,54,78,102,126,150]),new se(30,new H(12,121),new H(7,122)),new se(28,new H(12,47),new H(26,48)),new se(30,new H(39,24),new H(14,25)),new se(30,new H(22,15),new H(41,16))),new ke(36,Int32Array.from([6,24,50,76,102,128,154]),new se(30,new H(6,121),new H(14,122)),new se(28,new H(6,47),new H(34,48)),new se(30,new H(46,24),new H(10,25)),new se(30,new H(2,15),new H(64,16))),new ke(37,Int32Array.from([6,28,54,80,106,132,158]),new se(30,new H(17,122),new H(4,123)),new se(28,new H(29,46),new H(14,47)),new se(30,new H(49,24),new H(10,25)),new se(30,new H(24,15),new H(46,16))),new ke(38,Int32Array.from([6,32,58,84,110,136,162]),new se(30,new H(4,122),new H(18,123)),new se(28,new H(13,46),new H(32,47)),new se(30,new H(48,24),new H(14,25)),new se(30,new H(42,15),new H(32,16))),new ke(39,Int32Array.from([6,26,54,82,110,138,166]),new se(30,new H(20,117),new H(4,118)),new se(28,new H(40,47),new H(7,48)),new se(30,new H(43,24),new H(22,25)),new se(30,new H(10,15),new H(67,16))),new ke(40,Int32Array.from([6,30,58,86,114,142,170]),new se(30,new H(19,118),new H(6,119)),new se(28,new H(18,47),new H(31,48)),new se(30,new H(34,24),new H(34,25)),new se(30,new H(20,15),new H(61,16)))];var Vt;(function(M){M[M.DATA_MASK_000=0]="DATA_MASK_000",M[M.DATA_MASK_001=1]="DATA_MASK_001",M[M.DATA_MASK_010=2]="DATA_MASK_010",M[M.DATA_MASK_011=3]="DATA_MASK_011",M[M.DATA_MASK_100=4]="DATA_MASK_100",M[M.DATA_MASK_101=5]="DATA_MASK_101",M[M.DATA_MASK_110=6]="DATA_MASK_110",M[M.DATA_MASK_111=7]="DATA_MASK_111"})(Vt||(Vt={}));class Rn{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let a=0;a<s;a++)for(let u=0;u<s;u++)this.isMasked(a,u)&&r.flip(u,a)}}Rn.values=new Map([[Vt.DATA_MASK_000,new Rn(Vt.DATA_MASK_000,(M,r)=>(M+r&1)===0)],[Vt.DATA_MASK_001,new Rn(Vt.DATA_MASK_001,(M,r)=>(M&1)===0)],[Vt.DATA_MASK_010,new Rn(Vt.DATA_MASK_010,(M,r)=>r%3===0)],[Vt.DATA_MASK_011,new Rn(Vt.DATA_MASK_011,(M,r)=>(M+r)%3===0)],[Vt.DATA_MASK_100,new Rn(Vt.DATA_MASK_100,(M,r)=>(Math.floor(M/2)+Math.floor(r/3)&1)===0)],[Vt.DATA_MASK_101,new Rn(Vt.DATA_MASK_101,(M,r)=>M*r%6===0)],[Vt.DATA_MASK_110,new Rn(Vt.DATA_MASK_110,(M,r)=>M*r%6<3)],[Vt.DATA_MASK_111,new Rn(Vt.DATA_MASK_111,(M,r)=>(M+r+M*r%3&1)===0)]]);class xo{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new G;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let d=0;d<6;d++)r=this.copyBit(d,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let d=5;d>=0;d--)r=this.copyBit(8,d,r);const s=this.bitMatrix.getHeight();let a=0;const u=s-7;for(let d=s-1;d>=u;d--)a=this.copyBit(8,d,a);for(let d=s-8;d<s;d++)a=this.copyBit(d,8,a);if(this.parsedFormatInfo=kn.decodeFormatInformation(r,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new G}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return ke.getVersionForNumber(s);let a=0;const u=r-11;for(let p=5;p>=0;p--)for(let m=r-9;m>=u;m--)a=this.copyBit(m,p,a);let d=ke.decodeVersionInformation(a);if(d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;a=0;for(let p=5;p>=0;p--)for(let m=r-9;m>=u;m--)a=this.copyBit(p,m,a);if(d=ke.decodeVersionInformation(a),d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;throw new G}copyBit(r,s,a){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?a<<1|1:a<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),a=Rn.values.get(r.getDataMask()),u=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,u);const d=s.buildFunctionPattern();let p=!0;const m=new Uint8Array(s.getTotalCodewords());let _=0,C=0,A=0;for(let k=u-1;k>0;k-=2){k===6&&k--;for(let B=0;B<u;B++){const W=p?u-1-B:B;for(let K=0;K<2;K++)d.get(k-K,W)||(A++,C<<=1,this.bitMatrix.get(k-K,W)&&(C|=1),A===8&&(m[_++]=C,A=0,C=0))}p=!p}if(_!==s.getTotalCodewords())throw new G;return m}remask(){if(this.parsedFormatInfo===null)return;const r=Rn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,a=r.getWidth();s<a;s++)for(let u=s+1,d=r.getHeight();u<d;u++)r.get(s,u)!==r.get(u,s)&&(r.flip(u,s),r.flip(s,u))}}class yo{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,a){if(r.length!==s.getTotalCodewords())throw new E;const u=s.getECBlocksForLevel(a);let d=0;const p=u.getECBlocks();for(const K of p)d+=K.getCount();const m=new Array(d);let _=0;for(const K of p)for(let J=0;J<K.getCount();J++){const ie=K.getDataCodewords(),ce=u.getECCodewordsPerBlock()+ie;m[_++]=new yo(ie,new Uint8Array(ce))}const C=m[0].codewords.length;let A=m.length-1;for(;A>=0&&m[A].codewords.length!==C;)A--;A++;const k=C-u.getECCodewordsPerBlock();let B=0;for(let K=0;K<k;K++)for(let J=0;J<_;J++)m[J].codewords[K]=r[B++];for(let K=A;K<_;K++)m[K].codewords[k]=r[B++];const W=m[0].codewords.length;for(let K=k;K<W;K++)for(let J=0;J<_;J++){const ie=J<A?K:K+1;m[J].codewords[ie]=r[B++]}return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var On;(function(M){M[M.TERMINATOR=0]="TERMINATOR",M[M.NUMERIC=1]="NUMERIC",M[M.ALPHANUMERIC=2]="ALPHANUMERIC",M[M.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",M[M.BYTE=4]="BYTE",M[M.ECI=5]="ECI",M[M.KANJI=6]="KANJI",M[M.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",M[M.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",M[M.HANZI=9]="HANZI"})(On||(On={}));class We{constructor(r,s,a,u){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=a,this.bits=u,We.FOR_BITS.set(u,this),We.FOR_VALUE.set(r,this)}static forBits(r){const s=We.FOR_BITS.get(r);if(s===void 0)throw new E;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let a;return s<=9?a=0:s<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof We))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}We.FOR_BITS=new Map,We.FOR_VALUE=new Map,We.TERMINATOR=new We(On.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),We.NUMERIC=new We(On.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),We.ALPHANUMERIC=new We(On.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),We.STRUCTURED_APPEND=new We(On.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),We.BYTE=new We(On.BYTE,"BYTE",Int32Array.from([8,16,16]),4),We.ECI=new We(On.ECI,"ECI",Int32Array.from([0,0,0]),7),We.KANJI=new We(On.KANJI,"KANJI",Int32Array.from([8,10,12]),8),We.FNC1_FIRST_POSITION=new We(On.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),We.FNC1_SECOND_POSITION=new We(On.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),We.HANZI=new We(On.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class jt{static decode(r,s,a,u){const d=new ys(r);let p=new Ie;const m=new Array;let _=-1,C=-1;try{let A=null,k=!1,B;do{if(d.available()<4)B=We.TERMINATOR;else{const W=d.readBits(4);B=We.forBits(W)}switch(B){case We.TERMINATOR:break;case We.FNC1_FIRST_POSITION:case We.FNC1_SECOND_POSITION:k=!0;break;case We.STRUCTURED_APPEND:if(d.available()<16)throw new G;_=d.readBits(8),C=d.readBits(8);break;case We.ECI:const W=jt.parseECIValue(d);if(A=U.getCharacterSetECIByValue(W),A===null)throw new G;break;case We.HANZI:const K=d.readBits(4),J=d.readBits(B.getCharacterCountBits(s));K===jt.GB2312_SUBSET&&jt.decodeHanziSegment(d,p,J);break;default:const ie=d.readBits(B.getCharacterCountBits(s));switch(B){case We.NUMERIC:jt.decodeNumericSegment(d,p,ie);break;case We.ALPHANUMERIC:jt.decodeAlphanumericSegment(d,p,ie,k);break;case We.BYTE:jt.decodeByteSegment(d,p,ie,A,m,u);break;case We.KANJI:jt.decodeKanjiSegment(d,p,ie);break;default:throw new G}break}}while(B!==We.TERMINATOR)}catch{throw new G}return new Bn(r,p.toString(),m.length===0?null:m,a===null?null:a.toString(),_,C)}static decodeHanziSegment(r,s,a){if(a*13>r.available())throw new G;const u=new Uint8Array(2*a);let d=0;for(;a>0;){const p=r.readBits(13);let m=p/96<<8&4294967295|p%96;m<959?m+=41377:m+=42657,u[d]=m>>8&255,u[d+1]=m&255,d+=2,a--}try{s.append(me.decode(u,le.GB2312))}catch(p){throw new G(p)}}static decodeKanjiSegment(r,s,a){if(a*13>r.available())throw new G;const u=new Uint8Array(2*a);let d=0;for(;a>0;){const p=r.readBits(13);let m=p/192<<8&4294967295|p%192;m<7936?m+=33088:m+=49472,u[d]=m>>8,u[d+1]=m,d+=2,a--}try{s.append(me.decode(u,le.SHIFT_JIS))}catch(p){throw new G(p)}}static decodeByteSegment(r,s,a,u,d,p){if(8*a>r.available())throw new G;const m=new Uint8Array(a);for(let C=0;C<a;C++)m[C]=r.readBits(8);let _;u===null?_=le.guessEncoding(m,p):_=u.getName();try{s.append(me.decode(m,_))}catch(C){throw new G(C)}d.push(m)}static toAlphaNumericChar(r){if(r>=jt.ALPHANUMERIC_CHARS.length)throw new G;return jt.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,a,u){const d=s.length();for(;a>1;){if(r.available()<11)throw new G;const p=r.readBits(11);s.append(jt.toAlphaNumericChar(Math.floor(p/45))),s.append(jt.toAlphaNumericChar(p%45)),a-=2}if(a===1){if(r.available()<6)throw new G;s.append(jt.toAlphaNumericChar(r.readBits(6)))}if(u)for(let p=d;p<s.length();p++)s.charAt(p)==="%"&&(p<s.length()-1&&s.charAt(p+1)==="%"?s.deleteCharAt(p+1):s.setCharAt(p,""))}static decodeNumericSegment(r,s,a){for(;a>=3;){if(r.available()<10)throw new G;const u=r.readBits(10);if(u>=1e3)throw new G;s.append(jt.toAlphaNumericChar(Math.floor(u/100))),s.append(jt.toAlphaNumericChar(Math.floor(u/10)%10)),s.append(jt.toAlphaNumericChar(u%10)),a-=3}if(a===2){if(r.available()<7)throw new G;const u=r.readBits(7);if(u>=100)throw new G;s.append(jt.toAlphaNumericChar(Math.floor(u/10))),s.append(jt.toAlphaNumericChar(u%10))}else if(a===1){if(r.available()<4)throw new G;const u=r.readBits(4);if(u>=10)throw new G;s.append(jt.toAlphaNumericChar(u))}}static parseECIValue(r){const s=r.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const a=r.readBits(8);return(s&63)<<8&4294967295|a}if((s&224)===192){const a=r.readBits(16);return(s&31)<<16&4294967295|a}throw new G}}jt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",jt.GB2312_SUBSET=1;class vo{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class fl{constructor(){this.rsDecoder=new Er(at.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(je.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const a=new xo(r);let u=null;try{return this.decodeBitMatrixParser(a,s)}catch(d){u=d}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const d=this.decodeBitMatrixParser(a,s);return d.setOther(new vo(!0)),d}catch(d){throw u!==null?u:d}}decodeBitMatrixParser(r,s){const a=r.readVersion(),u=r.readFormatInformation().getErrorCorrectionLevel(),d=r.readCodewords(),p=yo.getDataBlocks(d,a,u);let m=0;for(const A of p)m+=A.getNumDataCodewords();const _=new Uint8Array(m);let C=0;for(const A of p){const k=A.getCodewords(),B=A.getNumDataCodewords();this.correctErrors(k,B);for(let W=0;W<B;W++)_[C++]=k[W]}return jt.decode(_,a,u,s)}correctErrors(r,s){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-s)}catch{throw new O}for(let u=0;u<s;u++)r[u]=a[u]}}class wo extends te{constructor(r,s,a){super(r,s),this.estimatedModuleSize=a}aboutEquals(r,s,a){if(Math.abs(s-this.getY())<=r&&Math.abs(a-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,s,a){const u=(this.getX()+s)/2,d=(this.getY()+r)/2,p=(this.estimatedModuleSize+a)/2;return new wo(u,d,p)}}class Wi{constructor(r,s,a,u,d,p,m){this.image=r,this.startX=s,this.startY=a,this.width=u,this.height=d,this.moduleSize=p,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,a=this.width,u=r+a,d=this.startY+s/2,p=new Int32Array(3),m=this.image;for(let _=0;_<s;_++){const C=d+(_&1?-Math.floor((_+1)/2):Math.floor((_+1)/2));p[0]=0,p[1]=0,p[2]=0;let A=r;for(;A<u&&!m.get(A,C);)A++;let k=0;for(;A<u;){if(m.get(A,C))if(k===1)p[1]++;else if(k===2){if(this.foundPatternCross(p)){const B=this.handlePossibleCenter(p,C,A);if(B!==null)return B}p[0]=p[2],p[1]=1,p[2]=0,k=1}else p[++k]++;else k===1&&k++,p[k]++;A++}if(this.foundPatternCross(p)){const B=this.handlePossibleCenter(p,C,u);if(B!==null)return B}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ue}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,a=s/2;for(let u=0;u<3;u++)if(Math.abs(s-r[u])>=a)return!1;return!0}crossCheckVertical(r,s,a,u){const d=this.image,p=d.getHeight(),m=this.crossCheckStateCount;m[0]=0,m[1]=0,m[2]=0;let _=r;for(;_>=0&&d.get(s,_)&&m[1]<=a;)m[1]++,_--;if(_<0||m[1]>a)return NaN;for(;_>=0&&!d.get(s,_)&&m[0]<=a;)m[0]++,_--;if(m[0]>a)return NaN;for(_=r+1;_<p&&d.get(s,_)&&m[1]<=a;)m[1]++,_++;if(_===p||m[1]>a)return NaN;for(;_<p&&!d.get(s,_)&&m[2]<=a;)m[2]++,_++;if(m[2]>a)return NaN;const C=m[0]+m[1]+m[2];return 5*Math.abs(C-u)>=2*u?NaN:this.foundPatternCross(m)?Wi.centerFromEnd(m,_):NaN}handlePossibleCenter(r,s,a){const u=r[0]+r[1]+r[2],d=Wi.centerFromEnd(r,a),p=this.crossCheckVertical(s,d,2*r[1],u);if(!isNaN(p)){const m=(r[0]+r[1]+r[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(m,p,d))return C.combineEstimate(p,d,m);const _=new wo(d,p,m);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null}}class sa extends te{constructor(r,s,a,u){super(r,s),this.estimatedModuleSize=a,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,a){if(Math.abs(s-this.getY())<=r&&Math.abs(a-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,s,a){const u=this.count+1,d=(this.count*this.getX()+s)/u,p=(this.count*this.getY()+r)/u,m=(this.count*this.estimatedModuleSize+a)/u;return new sa(d,p,m,u)}}class pl{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class gn{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(X.TRY_HARDER)!==void 0,a=r!=null&&r.get(X.PURE_BARCODE)!==void 0,u=this.image,d=u.getHeight(),p=u.getWidth();let m=Math.floor(3*d/(4*gn.MAX_MODULES));(m<gn.MIN_SKIP||s)&&(m=gn.MIN_SKIP);let _=!1;const C=new Int32Array(5);for(let k=m-1;k<d&&!_;k+=m){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let B=0;for(let W=0;W<p;W++)if(u.get(W,k))(B&1)===1&&B++,C[B]++;else if(B&1)C[B]++;else if(B===4)if(gn.foundPatternCross(C)){if(this.handlePossibleCenter(C,k,W,a)===!0)if(m=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{const J=this.findRowSkip();J>C[2]&&(k+=J-C[2]-m,W=p-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,B=3;continue}B=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,B=3;else C[++B]++;gn.foundPatternCross(C)&&this.handlePossibleCenter(C,k,p,a)===!0&&(m=C[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}const A=this.selectBestPatterns();return te.orderBestPatterns(A),new pl(A)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let d=0;d<5;d++){const p=r[d];if(p===0)return!1;s+=p}if(s<7)return!1;const a=s/7,u=a/2;return Math.abs(a-r[0])<u&&Math.abs(a-r[1])<u&&Math.abs(3*a-r[2])<3*u&&Math.abs(a-r[3])<u&&Math.abs(a-r[4])<u}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,a,u){const d=this.getCrossCheckStateCount();let p=0;const m=this.image;for(;r>=p&&s>=p&&m.get(s-p,r-p);)d[2]++,p++;if(r<p||s<p)return!1;for(;r>=p&&s>=p&&!m.get(s-p,r-p)&&d[1]<=a;)d[1]++,p++;if(r<p||s<p||d[1]>a)return!1;for(;r>=p&&s>=p&&m.get(s-p,r-p)&&d[0]<=a;)d[0]++,p++;if(d[0]>a)return!1;const _=m.getHeight(),C=m.getWidth();for(p=1;r+p<_&&s+p<C&&m.get(s+p,r+p);)d[2]++,p++;if(r+p>=_||s+p>=C)return!1;for(;r+p<_&&s+p<C&&!m.get(s+p,r+p)&&d[3]<a;)d[3]++,p++;if(r+p>=_||s+p>=C||d[3]>=a)return!1;for(;r+p<_&&s+p<C&&m.get(s+p,r+p)&&d[4]<a;)d[4]++,p++;if(d[4]>=a)return!1;const A=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(A-u)<2*u&&gn.foundPatternCross(d)}crossCheckVertical(r,s,a,u){const d=this.image,p=d.getHeight(),m=this.getCrossCheckStateCount();let _=r;for(;_>=0&&d.get(s,_);)m[2]++,_--;if(_<0)return NaN;for(;_>=0&&!d.get(s,_)&&m[1]<=a;)m[1]++,_--;if(_<0||m[1]>a)return NaN;for(;_>=0&&d.get(s,_)&&m[0]<=a;)m[0]++,_--;if(m[0]>a)return NaN;for(_=r+1;_<p&&d.get(s,_);)m[2]++,_++;if(_===p)return NaN;for(;_<p&&!d.get(s,_)&&m[3]<a;)m[3]++,_++;if(_===p||m[3]>=a)return NaN;for(;_<p&&d.get(s,_)&&m[4]<a;)m[4]++,_++;if(m[4]>=a)return NaN;const C=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(C-u)>=2*u?NaN:gn.foundPatternCross(m)?gn.centerFromEnd(m,_):NaN}crossCheckHorizontal(r,s,a,u){const d=this.image,p=d.getWidth(),m=this.getCrossCheckStateCount();let _=r;for(;_>=0&&d.get(_,s);)m[2]++,_--;if(_<0)return NaN;for(;_>=0&&!d.get(_,s)&&m[1]<=a;)m[1]++,_--;if(_<0||m[1]>a)return NaN;for(;_>=0&&d.get(_,s)&&m[0]<=a;)m[0]++,_--;if(m[0]>a)return NaN;for(_=r+1;_<p&&d.get(_,s);)m[2]++,_++;if(_===p)return NaN;for(;_<p&&!d.get(_,s)&&m[3]<a;)m[3]++,_++;if(_===p||m[3]>=a)return NaN;for(;_<p&&d.get(_,s)&&m[4]<a;)m[4]++,_++;if(m[4]>=a)return NaN;const C=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(C-u)>=u?NaN:gn.foundPatternCross(m)?gn.centerFromEnd(m,_):NaN}handlePossibleCenter(r,s,a,u){const d=r[0]+r[1]+r[2]+r[3]+r[4];let p=gn.centerFromEnd(r,a),m=this.crossCheckVertical(s,Math.floor(p),r[2],d);if(!isNaN(m)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(m),r[2],d),!isNaN(p)&&(!u||this.crossCheckDiagonal(Math.floor(m),Math.floor(p),r[2],d)))){const _=d/7;let C=!1;const A=this.possibleCenters;for(let k=0,B=A.length;k<B;k++){const W=A[k];if(W.aboutEquals(_,m,p)){A[k]=W.combineEstimate(m,p,_),C=!0;break}}if(!C){const k=new sa(p,m,_);A.push(k),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(k)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const a of this.possibleCenters)if(a.getCount()>=gn.CENTER_QUORUM)if(s==null)s=a;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-a.getX())-Math.abs(s.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const a=this.possibleCenters.length;for(const p of this.possibleCenters)p.getCount()>=gn.CENTER_QUORUM&&(r++,s+=p.getEstimatedModuleSize());if(r<3)return!1;const u=s/a;let d=0;for(const p of this.possibleCenters)d+=Math.abs(p.getEstimatedModuleSize()-u);return d<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new ue;const s=this.possibleCenters;let a;if(r>3){let u=0,d=0;for(const _ of this.possibleCenters){const C=_.getEstimatedModuleSize();u+=C,d+=C*C}a=u/r;let p=Math.sqrt(d/r-a*a);s.sort((_,C)=>{const A=Math.abs(C.getEstimatedModuleSize()-a),k=Math.abs(_.getEstimatedModuleSize()-a);return A<k?-1:A>k?1:0});const m=Math.max(.2*a,p);for(let _=0;_<s.length&&s.length>3;_++){const C=s[_];Math.abs(C.getEstimatedModuleSize()-a)>m&&(s.splice(_,1),_--)}}if(s.length>3){let u=0;for(const d of s)u+=d.getEstimatedModuleSize();a=u/s.length,s.sort((d,p)=>{if(p.getCount()===d.getCount()){const m=Math.abs(p.getEstimatedModuleSize()-a),_=Math.abs(d.getEstimatedModuleSize()-a);return m<_?1:m>_?-1:0}else return p.getCount()-d.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}gn.CENTER_QUORUM=2,gn.MIN_SKIP=3,gn.MAX_MODULES=57;class et{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(X.NEED_RESULT_POINT_CALLBACK);const a=new gn(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(a)}processFinderPatternInfo(r){const s=r.getTopLeft(),a=r.getTopRight(),u=r.getBottomLeft(),d=this.calculateModuleSize(s,a,u);if(d<1)throw new ue("No pattern found in proccess finder.");const p=et.computeDimension(s,a,u,d),m=ke.getProvisionalVersionForDimension(p),_=m.getDimensionForVersion()-7;let C=null;if(m.getAlignmentPatternCenters().length>0){const W=a.getX()-s.getX()+u.getX(),K=a.getY()-s.getY()+u.getY(),J=1-3/_,ie=Math.floor(s.getX()+J*(W-s.getX())),ce=Math.floor(s.getY()+J*(K-s.getY()));for(let Ce=4;Ce<=16;Ce<<=1)try{C=this.findAlignmentInRegion(d,ie,ce,Ce);break}catch(Se){if(!(Se instanceof ue))throw Se}}const A=et.createTransform(s,a,u,C,p),k=et.sampleGrid(this.image,A,p);let B;return C===null?B=[u,s,a]:B=[u,s,a,C],new xe(k,B)}static createTransform(r,s,a,u,d){const p=d-3.5;let m,_,C,A;return u!==null?(m=u.getX(),_=u.getY(),C=p-3,A=C):(m=s.getX()-r.getX()+a.getX(),_=s.getY()-r.getY()+a.getY(),C=p,A=p),Qe.quadrilateralToQuadrilateral(3.5,3.5,p,3.5,C,A,3.5,p,r.getX(),r.getY(),s.getX(),s.getY(),m,_,a.getX(),a.getY())}static sampleGrid(r,s,a){return He.getInstance().sampleGridWithTransform(r,a,a,s)}static computeDimension(r,s,a,u){const d=we.round(te.distance(r,s)/u),p=we.round(te.distance(r,a)/u);let m=Math.floor((d+p)/2)+7;switch(m&3){case 0:m++;break;case 2:m--;break;case 3:throw new ue("Dimensions could be not found.")}return m}calculateModuleSize(r,s,a){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,a))/2}calculateModuleSizeOneWay(r,s){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(a)?u/7:isNaN(u)?a/7:(a+u)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,a,u){let d=this.sizeOfBlackWhiteBlackRun(r,s,a,u),p=1,m=r-(a-r);m<0?(p=r/(r-m),m=0):m>=this.image.getWidth()&&(p=(this.image.getWidth()-1-r)/(m-r),m=this.image.getWidth()-1);let _=Math.floor(s-(u-s)*p);return p=1,_<0?(p=s/(s-_),_=0):_>=this.image.getHeight()&&(p=(this.image.getHeight()-1-s)/(_-s),_=this.image.getHeight()-1),m=Math.floor(r+(m-r)*p),d+=this.sizeOfBlackWhiteBlackRun(r,s,m,_),d-1}sizeOfBlackWhiteBlackRun(r,s,a,u){const d=Math.abs(u-s)>Math.abs(a-r);if(d){let W=r;r=s,s=W,W=a,a=u,u=W}const p=Math.abs(a-r),m=Math.abs(u-s);let _=-p/2;const C=r<a?1:-1,A=s<u?1:-1;let k=0;const B=a+C;for(let W=r,K=s;W!==B;W+=C){const J=d?K:W,ie=d?W:K;if(k===1===this.image.get(J,ie)){if(k===2)return we.distance(W,K,r,s);k++}if(_+=m,_>0){if(K===u)break;K+=A,_-=p}}return k===2?we.distance(a+C,u,r,s):NaN}findAlignmentInRegion(r,s,a,u){const d=Math.floor(u*r),p=Math.max(0,s-d),m=Math.min(this.image.getWidth()-1,s+d);if(m-p<r*3)throw new ue("Alignment top exceeds estimated module size.");const _=Math.max(0,a-d),C=Math.min(this.image.getHeight()-1,a+d);if(C-_<r*3)throw new ue("Alignment bottom exceeds estimated module size.");return new Wi(this.image,p,_,m-p,C-_,r,this.resultPointCallback).find()}}class bn{constructor(){this.decoder=new fl}getDecoder(){return this.decoder}decode(r,s){let a,u;if(s!=null&&s.get(X.PURE_BARCODE)!==void 0){const _=bn.extractPureBits(r.getBlackMatrix());a=this.decoder.decodeBitMatrix(_,s),u=bn.NO_POINTS}else{const _=new et(r.getBlackMatrix()).detect(s);a=this.decoder.decodeBitMatrix(_.getBits(),s),u=_.getPoints()}a.getOther()instanceof vo&&a.getOther().applyMirroredCorrection(u);const d=new Ze(a.getText(),a.getRawBytes(),void 0,u,ge.QR_CODE,void 0),p=a.getByteSegments();p!==null&&d.putMetadata(ft.BYTE_SEGMENTS,p);const m=a.getECLevel();return m!==null&&d.putMetadata(ft.ERROR_CORRECTION_LEVEL,m),a.hasStructuredAppend()&&(d.putMetadata(ft.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),d.putMetadata(ft.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),d}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(s===null||a===null)throw new ue;const u=this.moduleSize(s,r);let d=s[1],p=a[1],m=s[0],_=a[0];if(m>=_||d>=p)throw new ue;if(p-d!==_-m&&(_=m+(p-d),_>=r.getWidth()))throw new ue;const C=Math.round((_-m+1)/u),A=Math.round((p-d+1)/u);if(C<=0||A<=0)throw new ue;if(A!==C)throw new ue;const k=Math.floor(u/2);d+=k,m+=k;const B=m+Math.floor((C-1)*u)-_;if(B>0){if(B>k)throw new ue;m-=B}const W=d+Math.floor((A-1)*u)-p;if(W>0){if(W>k)throw new ue;d-=W}const K=new je(C,A);for(let J=0;J<A;J++){const ie=d+Math.floor(J*u);for(let ce=0;ce<C;ce++)r.get(m+Math.floor(ce*u),ie)&&K.set(ce,J)}return K}static moduleSize(r,s){const a=s.getHeight(),u=s.getWidth();let d=r[0],p=r[1],m=!0,_=0;for(;d<u&&p<a;){if(m!==s.get(d,p)){if(++_===5)break;m=!m}d++,p++}if(d===u||p===a)throw new ue;return(d-r[0])/7}}bn.NO_POINTS=new Array;class Re{PDF417Common(){}static getBitCountSum(r){return we.sum(r)}static toIntArray(r){if(r==null||!r.length)return Re.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let a=0;for(const u of r)s[a++]=u;return s}static getCodeword(r){const s=R.binarySearch(Re.SYMBOL_TABLE,r&262143);return s<0?-1:(Re.CODEWORD_TABLE[s]-1)%Re.NUMBER_OF_CODEWORDS}}Re.NUMBER_OF_CODEWORDS=929,Re.MAX_CODEWORDS_IN_BARCODE=Re.NUMBER_OF_CODEWORDS-1,Re.MIN_ROWS_IN_BARCODE=3,Re.MAX_ROWS_IN_BARCODE=90,Re.MODULES_IN_CODEWORD=17,Re.MODULES_IN_STOP_PATTERN=18,Re.BARS_IN_MODULE=8,Re.EMPTY_INT_ARRAY=new Int32Array([]),Re.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Re.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Xc{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class rt{static detectMultiple(r,s,a){let u=r.getBlackMatrix(),d=rt.detect(a,u);return d.length||(u=u.clone(),u.rotate180(),d=rt.detect(a,u)),new Xc(u,d)}static detect(r,s){const a=new Array;let u=0,d=0,p=!1;for(;u<s.getHeight();){const m=rt.findVertices(s,u,d);if(m[0]==null&&m[3]==null){if(!p)break;p=!1,d=0;for(const _ of a)_[1]!=null&&(u=Math.trunc(Math.max(u,_[1].getY()))),_[3]!=null&&(u=Math.max(u,Math.trunc(_[3].getY())));u+=rt.ROW_STEP;continue}if(p=!0,a.push(m),!r)break;m[2]!=null?(d=Math.trunc(m[2].getX()),u=Math.trunc(m[2].getY())):(d=Math.trunc(m[4].getX()),u=Math.trunc(m[4].getY()))}return a}static findVertices(r,s,a){const u=r.getHeight(),d=r.getWidth(),p=new Array(8);return rt.copyToResult(p,rt.findRowsWithPattern(r,u,d,s,a,rt.START_PATTERN),rt.INDEXES_START_PATTERN),p[4]!=null&&(a=Math.trunc(p[4].getX()),s=Math.trunc(p[4].getY())),rt.copyToResult(p,rt.findRowsWithPattern(r,u,d,s,a,rt.STOP_PATTERN),rt.INDEXES_STOP_PATTERN),p}static copyToResult(r,s,a){for(let u=0;u<a.length;u++)r[a[u]]=s[u]}static findRowsWithPattern(r,s,a,u,d,p){const m=new Array(4);let _=!1;const C=new Int32Array(p.length);for(;u<s;u+=rt.ROW_STEP){let k=rt.findGuardPattern(r,d,u,a,!1,p,C);if(k!=null){for(;u>0;){const B=rt.findGuardPattern(r,d,--u,a,!1,p,C);if(B!=null)k=B;else{u++;break}}m[0]=new te(k[0],u),m[1]=new te(k[1],u),_=!0;break}}let A=u+1;if(_){let k=0,B=Int32Array.from([Math.trunc(m[0].getX()),Math.trunc(m[1].getX())]);for(;A<s;A++){const W=rt.findGuardPattern(r,B[0],A,a,!1,p,C);if(W!=null&&Math.abs(B[0]-W[0])<rt.MAX_PATTERN_DRIFT&&Math.abs(B[1]-W[1])<rt.MAX_PATTERN_DRIFT)B=W,k=0;else{if(k>rt.SKIPPED_ROW_COUNT_MAX)break;k++}}A-=k+1,m[2]=new te(B[0],A),m[3]=new te(B[1],A)}return A-u<rt.BARCODE_MIN_HEIGHT&&R.fill(m,null),m}static findGuardPattern(r,s,a,u,d,p,m){R.fillWithin(m,0,m.length,0);let _=s,C=0;for(;r.get(_,a)&&_>0&&C++<rt.MAX_PIXEL_DRIFT;)_--;let A=_,k=0,B=p.length;for(let W=d;A<u;A++)if(r.get(A,a)!==W)m[k]++;else{if(k===B-1){if(rt.patternMatchVariance(m,p,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE)return new Int32Array([_,A]);_+=m[0]+m[1],P.arraycopy(m,2,m,0,k-1),m[k-1]=0,m[k]=0,k--}else k++;m[k]=1,W=!W}return k===B-1&&rt.patternMatchVariance(m,p,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE?new Int32Array([_,A-1]):null}static patternMatchVariance(r,s,a){let u=r.length,d=0,p=0;for(let C=0;C<u;C++)d+=r[C],p+=s[C];if(d<p)return 1/0;let m=d/p;a*=m;let _=0;for(let C=0;C<u;C++){let A=r[C],k=s[C]*m,B=A>k?A-k:k-A;if(B>a)return 1/0;_+=B}return _/d}}rt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),rt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),rt.MAX_AVG_VARIANCE=.42,rt.MAX_INDIVIDUAL_VARIANCE=.8,rt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),rt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),rt.MAX_PIXEL_DRIFT=3,rt.MAX_PATTERN_DRIFT=5,rt.SKIPPED_ROW_COUNT_MAX=25,rt.ROW_STEP=5,rt.BARCODE_MIN_HEIGHT=10;class dn{constructor(r,s){if(s.length===0)throw new E;this.field=r;let a=s.length;if(a>1&&s[0]===0){let u=1;for(;u<a&&s[u]===0;)u++;u===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-u),P.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let u=0;for(let d of this.coefficients)u=this.field.add(u,d);return u}let s=this.coefficients[0],a=this.coefficients.length;for(let u=1;u<a;u++)s=this.field.add(this.field.multiply(r,s),this.coefficients[u]);return s}add(r){if(!this.field.equals(r.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,a=r.coefficients;if(s.length>a.length){let p=s;s=a,a=p}let u=new Int32Array(a.length),d=a.length-s.length;P.arraycopy(a,0,u,0,d);for(let p=d;p<a.length;p++)u[p]=this.field.add(s[p-d],a[p]);return new dn(this.field,u)}subtract(r){if(!this.field.equals(r.field))throw new E("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof dn?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new dn(this.field,new Int32Array([0]));let s=this.coefficients,a=s.length,u=r.coefficients,d=u.length,p=new Int32Array(a+d-1);for(let m=0;m<a;m++){let _=s[m];for(let C=0;C<d;C++)p[m+C]=this.field.add(p[m+C],this.field.multiply(_,u[C]))}return new dn(this.field,p)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let a=0;a<r;a++)s[a]=this.field.subtract(0,this.coefficients[a]);return new dn(this.field,s)}multiplyScalar(r){if(r===0)return new dn(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,a=new Int32Array(s);for(let u=0;u<s;u++)a[u]=this.field.multiply(this.coefficients[u],r);return new dn(this.field,a)}multiplyByMonomial(r,s){if(r<0)throw new E;if(s===0)return new dn(this.field,new Int32Array([0]));let a=this.coefficients.length,u=new Int32Array(a+r);for(let d=0;d<a;d++)u[d]=this.field.multiply(this.coefficients[d],s);return new dn(this.field,u)}toString(){let r=new Ie;for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);a!==0&&(a<0?(r.append(" - "),a=-a):r.length()>0&&r.append(" + "),(s===0||a!==1)&&r.append(a),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class ml{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new E;return this.logTable[r]}inverse(r){if(r===0)throw new en;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class hi extends ml{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let a=1;for(let u=0;u<r;u++)this.expTable[u]=a,a=a*s%r;for(let u=0;u<r-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new dn(this,new Int32Array([0])),this.one=new dn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new E;if(s===0)return this.zero;let a=new Int32Array(r+1);return a[0]=s,new dn(this,a)}}hi.PDF417_GF=new hi(Re.NUMBER_OF_CODEWORDS,3);class oa{constructor(){this.field=hi.PDF417_GF}decode(r,s,a){let u=new dn(this.field,r),d=new Int32Array(s),p=!1;for(let K=s;K>0;K--){let J=u.evaluateAt(this.field.exp(K));d[s-K]=J,J!==0&&(p=!0)}if(!p)return 0;let m=this.field.getOne();if(a!=null)for(const K of a){let J=this.field.exp(r.length-1-K),ie=new dn(this.field,new Int32Array([this.field.subtract(0,J),1]));m=m.multiply(ie)}let _=new dn(this.field,d),C=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),_,s),A=C[0],k=C[1],B=this.findErrorLocations(A),W=this.findErrorMagnitudes(k,A,B);for(let K=0;K<B.length;K++){let J=r.length-1-this.field.log(B[K]);if(J<0)throw O.getChecksumInstance();r[J]=this.field.subtract(r[J],W[K])}return B.length}runEuclideanAlgorithm(r,s,a){if(r.getDegree()<s.getDegree()){let B=r;r=s,s=B}let u=r,d=s,p=this.field.getZero(),m=this.field.getOne();for(;d.getDegree()>=Math.round(a/2);){let B=u,W=p;if(u=d,p=m,u.isZero())throw O.getChecksumInstance();d=B;let K=this.field.getZero(),J=u.getCoefficient(u.getDegree()),ie=this.field.inverse(J);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){let ce=d.getDegree()-u.getDegree(),Ce=this.field.multiply(d.getCoefficient(d.getDegree()),ie);K=K.add(this.field.buildMonomial(ce,Ce)),d=d.subtract(u.multiplyByMonomial(ce,Ce))}m=K.multiply(p).subtract(W).negative()}let _=m.getCoefficient(0);if(_===0)throw O.getChecksumInstance();let C=this.field.inverse(_),A=m.multiply(C),k=d.multiply(C);return[A,k]}findErrorLocations(r){let s=r.getDegree(),a=new Int32Array(s),u=0;for(let d=1;d<this.field.getSize()&&u<s;d++)r.evaluateAt(d)===0&&(a[u]=this.field.inverse(d),u++);if(u!==s)throw O.getChecksumInstance();return a}findErrorMagnitudes(r,s,a){let u=s.getDegree(),d=new Int32Array(u);for(let C=1;C<=u;C++)d[u-C]=this.field.multiply(C,s.getCoefficient(C));let p=new dn(this.field,d),m=a.length,_=new Int32Array(m);for(let C=0;C<m;C++){let A=this.field.inverse(a[C]),k=this.field.subtract(0,r.evaluateAt(A)),B=this.field.inverse(p.evaluateAt(A));_[C]=this.field.multiply(k,B)}return _}}class Nr{constructor(r,s,a,u,d){r instanceof Nr?this.constructor_2(r):this.constructor_1(r,s,a,u,d)}constructor_1(r,s,a,u,d){const p=s==null||a==null,m=u==null||d==null;if(p&&m)throw new ue;p?(s=new te(0,u.getY()),a=new te(0,d.getY())):m&&(u=new te(r.getWidth()-1,s.getY()),d=new te(r.getWidth()-1,a.getY())),this.image=r,this.topLeft=s,this.bottomLeft=a,this.topRight=u,this.bottomRight=d,this.minX=Math.trunc(Math.min(s.getX(),a.getX())),this.maxX=Math.trunc(Math.max(u.getX(),d.getX())),this.minY=Math.trunc(Math.min(s.getY(),u.getY())),this.maxY=Math.trunc(Math.max(a.getY(),d.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new Nr(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,a){let u=this.topLeft,d=this.bottomLeft,p=this.topRight,m=this.bottomRight;if(r>0){let _=a?this.topLeft:this.topRight,C=Math.trunc(_.getY()-r);C<0&&(C=0);let A=new te(_.getX(),C);a?u=A:p=A}if(s>0){let _=a?this.bottomLeft:this.bottomRight,C=Math.trunc(_.getY()+s);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let A=new te(_.getX(),C);a?d=A:m=A}return new Nr(this.image,u,d,p,m)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Cn{constructor(r,s,a,u){this.columnCount=r,this.errorCorrectionLevel=u,this.rowCountUpperPart=s,this.rowCountLowerPart=a,this.rowCount=s+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Tr{constructor(){this.buffer=""}static form(r,s){let a=-1;function u(p,m,_,C,A,k){if(p==="%%")return"%";if(s[++a]===void 0)return;p=C?parseInt(C.substr(1)):void 0;let B=A?parseInt(A.substr(1)):void 0,W;switch(k){case"s":W=s[a];break;case"c":W=s[a][0];break;case"f":W=parseFloat(s[a]).toFixed(p);break;case"p":W=parseFloat(s[a]).toPrecision(p);break;case"e":W=parseFloat(s[a]).toExponential(p);break;case"x":W=parseInt(s[a]).toString(B||16);break;case"d":W=parseFloat(parseInt(s[a],B||10).toPrecision(p)).toFixed(0);break}W=typeof W=="object"?JSON.stringify(W):(+W).toString(B);let K=parseInt(_),J=_&&_[0]+""=="0"?"0":" ";for(;W.length<K;)W=m!==void 0?W+J:J+W;return W}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,u)}format(r,...s){this.buffer+=Tr.form(r,s)}toString(){return this.buffer}}class vs{constructor(r){this.boundingBox=new Nr(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let a=1;a<vs.MAX_NEARBY_DISTANCE;a++){let u=this.imageRowToCodewordIndex(r)-a;if(u>=0&&(s=this.codewords[u],s!=null)||(u=this.imageRowToCodewordIndex(r)+a,u<this.codewords.length&&(s=this.codewords[u],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new Tr;let s=0;for(const a of this.codewords){if(a==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,a.getRowNumber(),a.getValue())}return r.toString()}}vs.MAX_NEARBY_DISTANCE=5;class ws{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[a,u]of this.values.entries()){const d={getKey:()=>a,getValue:()=>u};d.getValue()>r?(r=d.getValue(),s=[],s.push(d.getKey())):d.getValue()===r&&s.push(d.getKey())}return Re.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class qc extends vs{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let a=this.getBoundingBox(),u=this._isLeft?a.getTopLeft():a.getTopRight(),d=this._isLeft?a.getBottomLeft():a.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),m=this.imageRowToCodewordIndex(Math.trunc(d.getY())),_=-1,C=1,A=0;for(let k=p;k<m;k++){if(s[k]==null)continue;let B=s[k],W=B.getRowNumber()-_;if(W===0)A++;else if(W===1)C=Math.max(C,A),A=1,_=B.getRowNumber();else if(W<0||B.getRowNumber()>=r.getRowCount()||W>k)s[k]=null;else{let K;C>2?K=(C-2)*W:K=W;let J=K>=k;for(let ie=1;ie<=K&&!J;ie++)J=s[k-ie]!=null;J?s[k]=null:(_=B.getRowNumber(),A=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let a of this.getCodewords())if(a!=null){let u=a.getRowNumber();if(u>=s.length)continue;s[u]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),a=this._isLeft?s.getTopLeft():s.getTopRight(),u=this._isLeft?s.getBottomLeft():s.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(a.getY())),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),m=this.getCodewords(),_=-1;for(let C=d;C<p;C++){if(m[C]==null)continue;let A=m[C];A.setRowNumberAsRowIndicatorColumn();let k=A.getRowNumber()-_;k===0||(k===1?_=A.getRowNumber():A.getRowNumber()>=r.getRowCount()?m[C]=null:_=A.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new ws,a=new ws,u=new ws,d=new ws;for(let m of r){if(m==null)continue;m.setRowNumberAsRowIndicatorColumn();let _=m.getValue()%30,C=m.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:a.setValue(_*3+1);break;case 1:d.setValue(_/3),u.setValue(_%3);break;case 2:s.setValue(_+1);break}}if(s.getValue().length===0||a.getValue().length===0||u.getValue().length===0||d.getValue().length===0||s.getValue()[0]<1||a.getValue()[0]+u.getValue()[0]<Re.MIN_ROWS_IN_BARCODE||a.getValue()[0]+u.getValue()[0]>Re.MAX_ROWS_IN_BARCODE)return null;let p=new Cn(s.getValue()[0],a.getValue()[0],u.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(r,p),p}removeIncorrectCodewords(r,s){for(let a=0;a<r.length;a++){let u=r[a];if(r[a]==null)continue;let d=u.getValue()%30,p=u.getRowNumber();if(p>s.getRowCount()){r[a]=null;continue}switch(this._isLeft||(p+=2),p%3){case 0:d*3+1!==s.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(d/3)!==s.getErrorCorrectionLevel()||d%3!==s.getRowCountLowerPart())&&(r[a]=null);break;case 2:d+1!==s.getColumnCount()&&(r[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class _s{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Re.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let a=this.detectionResultColumns[s].getCodewords();for(let u=0;u<a.length;u++)a[u]!=null&&(a[u].hasValidRowNumber()||this.adjustRowNumbers(s,u,a))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<r.length;a++)if(r[a]!=null&&s[a]!=null&&r[a].getRowNumber()===s[a].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let d=this.detectionResultColumns[u].getCodewords()[a];d!=null&&(d.setRowNumber(r[a].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let u=s[a].getRowNumber(),d=0;for(let p=this.barcodeColumnCount+1;p>0&&d<this.ADJUST_ROW_NUMBER_SKIP;p--){let m=this.detectionResultColumns[p].getCodewords()[a];m!=null&&(d=_s.adjustRowNumberIfValid(u,d,m),m.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let u=s[a].getRowNumber(),d=0;for(let p=1;p<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;p++){let m=this.detectionResultColumns[p].getCodewords()[a];m!=null&&(d=_s.adjustRowNumberIfValid(u,d,m),m.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(r)?(a.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,a){if(!this.detectionResultColumns[r-1])return;let u=a[s],d=this.detectionResultColumns[r-1].getCodewords(),p=d;this.detectionResultColumns[r+1]!=null&&(p=this.detectionResultColumns[r+1].getCodewords());let m=new Array(14);m[2]=d[s],m[3]=p[s],s>0&&(m[0]=a[s-1],m[4]=d[s-1],m[5]=p[s-1]),s>1&&(m[8]=a[s-2],m[10]=d[s-2],m[11]=p[s-2]),s<a.length-1&&(m[1]=a[s+1],m[6]=d[s+1],m[7]=p[s+1]),s<a.length-2&&(m[9]=a[s+2],m[12]=d[s+2],m[13]=p[s+2]);for(let _ of m)if(_s.adjustRowNumber(u,_))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new Tr;for(let a=0;a<r.getCodewords().length;a++){s.format("CW %3d:",a);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){s.format("    |   ");continue}let d=this.detectionResultColumns[u].getCodewords()[a];if(d==null){s.format("    |   ");continue}s.format(" %3d|%3d",d.getRowNumber(),d.getValue())}s.format("%n")}return s.toString()}}class Zi{constructor(r,s,a,u){this.rowNumber=Zi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(a),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==Zi.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}Zi.BARCODE_ROW_UNKNOWN=-1;class Wn{static initialize(){for(let r=0;r<Re.SYMBOL_TABLE.length;r++){let s=Re.SYMBOL_TABLE[r],a=s&1;for(let u=0;u<Re.BARS_IN_MODULE;u++){let d=0;for(;(s&1)===a;)d+=1,s>>=1;a=s&1,Wn.RATIOS_TABLE[r]||(Wn.RATIOS_TABLE[r]=new Array(Re.BARS_IN_MODULE)),Wn.RATIOS_TABLE[r][Re.BARS_IN_MODULE-u-1]=Math.fround(d/Re.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=Wn.getDecodedCodewordValue(Wn.sampleBitCounts(r));return s!==-1?s:Wn.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=we.sum(r),a=new Int32Array(Re.BARS_IN_MODULE),u=0,d=0;for(let p=0;p<Re.MODULES_IN_CODEWORD;p++){let m=s/(2*Re.MODULES_IN_CODEWORD)+p*s/Re.MODULES_IN_CODEWORD;d+r[u]<=m&&(d+=r[u],u++),a[u]++}return a}static getDecodedCodewordValue(r){let s=Wn.getBitValue(r);return Re.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let a=0;a<r.length;a++)for(let u=0;u<r[a];u++)s=s<<1|(a%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=we.sum(r),a=new Array(Re.BARS_IN_MODULE);if(s>1)for(let p=0;p<a.length;p++)a[p]=Math.fround(r[p]/s);let u=ne.MAX_VALUE,d=-1;this.bSymbolTableReady||Wn.initialize();for(let p=0;p<Wn.RATIOS_TABLE.length;p++){let m=0,_=Wn.RATIOS_TABLE[p];for(let C=0;C<Re.BARS_IN_MODULE;C++){let A=Math.fround(_[C]-a[C]);if(m+=Math.fround(A*A),m>=u)break}m<u&&(u=m,d=Re.SYMBOL_TABLE[p])}return d}}Wn.bSymbolTableReady=!1,Wn.RATIOS_TABLE=new Array(Re.SYMBOL_TABLE.length).map(M=>new Array(Re.BARS_IN_MODULE));class gl{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class mt{static parseLong(r,s=void 0){return parseInt(r,s)}}class Kc extends g{}Kc.kind="NullPointerException";class Ir{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,a){if(r==null)throw new Kc;if(s<0||s>r.length||a<0||s+a>r.length||s+a<0)throw new V;if(a===0)return;for(let u=0;u<a;u++)this.write(r[s+u])}flush(){}close(){}}class _o extends g{}class Qc extends Ir{constructor(r=32){if(super(),this.count=0,r<0)throw new E("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let a=this.buf.length<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new _o;a=I.MAX_VALUE}this.buf=R.copyOfUint8Array(this.buf,a)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,a){if(s<0||s>r.length||a<0||s+a-r.length>0)throw new V;this.ensureCapacity(this.count+a),P.arraycopy(r,s,this.buf,this.count,a),this.count+=a}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return R.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var It;(function(M){M[M.ALPHA=0]="ALPHA",M[M.LOWER=1]="LOWER",M[M.MIXED=2]="MIXED",M[M.PUNCT=3]="PUNCT",M[M.ALPHA_SHIFT=4]="ALPHA_SHIFT",M[M.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(It||(It={}));function aa(){if(typeof window<"u")return window.BigInt||null;if(typeof fa<"u")return fa.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let la;function fi(M){if(typeof la>"u"&&(la=aa()),la===null)throw new Error("BigInt is not supported!");return la(M)}function Sh(){let M=[];M[0]=fi(1);let r=fi(900);M[1]=r;for(let s=2;s<16;s++)M[s]=M[s-1]*r;return M}class de{static decode(r,s){let a=new Ie(""),u=U.ISO8859_1;a.enableDecoding(u);let d=1,p=r[d++],m=new gl;for(;d<r[0];){switch(p){case de.TEXT_COMPACTION_MODE_LATCH:d=de.textCompaction(r,d,a);break;case de.BYTE_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:d=de.byteCompaction(p,r,u,d,a);break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[d++]);break;case de.NUMERIC_COMPACTION_MODE_LATCH:d=de.numericCompaction(r,d,a);break;case de.ECI_CHARSET:U.getCharacterSetECIByValue(r[d++]);break;case de.ECI_GENERAL_PURPOSE:d+=2;break;case de.ECI_USER_DEFINED:d++;break;case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=de.decodeMacroBlock(r,d,m);break;case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:throw new G;default:d--,d=de.textCompaction(r,d,a);break}if(d<r.length)p=r[d++];else throw G.getFormatInstance()}if(a.length()===0)throw G.getFormatInstance();let _=new Bn(null,a.toString(),null,s);return _.setOther(m),_}static decodeMacroBlock(r,s,a){if(s+de.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw G.getFormatInstance();let u=new Int32Array(de.NUMBER_OF_SEQUENCE_CODEWORDS);for(let m=0;m<de.NUMBER_OF_SEQUENCE_CODEWORDS;m++,s++)u[m]=r[s];a.setSegmentIndex(I.parseInt(de.decodeBase900toBase10(u,de.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new Ie;s=de.textCompaction(r,s,d),a.setFileId(d.toString());let p=-1;for(r[s]===de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(p=s+1);s<r[0];)switch(r[s]){case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case de.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let m=new Ie;s=de.textCompaction(r,s+1,m),a.setFileName(m.toString());break;case de.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let _=new Ie;s=de.textCompaction(r,s+1,_),a.setSender(_.toString());break;case de.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new Ie;s=de.textCompaction(r,s+1,C),a.setAddressee(C.toString());break;case de.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let A=new Ie;s=de.numericCompaction(r,s+1,A),a.setSegmentCount(I.parseInt(A.toString()));break;case de.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let k=new Ie;s=de.numericCompaction(r,s+1,k),a.setTimestamp(mt.parseLong(k.toString()));break;case de.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let B=new Ie;s=de.numericCompaction(r,s+1,B),a.setChecksum(I.parseInt(B.toString()));break;case de.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let W=new Ie;s=de.numericCompaction(r,s+1,W),a.setFileSize(mt.parseLong(W.toString()));break;default:throw G.getFormatInstance()}break;case de.MACRO_PDF417_TERMINATOR:s++,a.setLastSegment(!0);break;default:throw G.getFormatInstance()}if(p!==-1){let m=s-p;a.isLastSegment()&&m--,a.setOptionalData(R.copyOfRange(r,p,p+m))}return s}static textCompaction(r,s,a){let u=new Int32Array((r[0]-s)*2),d=new Int32Array((r[0]-s)*2),p=0,m=!1;for(;s<r[0]&&!m;){let _=r[s++];if(_<de.TEXT_COMPACTION_MODE_LATCH)u[p]=_/30,u[p+1]=_%30,p+=2;else switch(_){case de.TEXT_COMPACTION_MODE_LATCH:u[p++]=de.TEXT_COMPACTION_MODE_LATCH;break;case de.BYTE_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.NUMERIC_COMPACTION_MODE_LATCH:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:s--,m=!0;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[p]=de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=r[s++],d[p]=_,p++;break}}return de.decodeTextCompaction(u,d,p,a),s}static decodeTextCompaction(r,s,a,u){let d=It.ALPHA,p=It.ALPHA,m=0;for(;m<a;){let _=r[m],C="";switch(d){case It.ALPHA:if(_<26)C=String.fromCharCode(65+_);else switch(_){case 26:C=" ";break;case de.LL:d=It.LOWER;break;case de.ML:d=It.MIXED;break;case de.PS:p=d,d=It.PUNCT_SHIFT;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[m]);break;case de.TEXT_COMPACTION_MODE_LATCH:d=It.ALPHA;break}break;case It.LOWER:if(_<26)C=String.fromCharCode(97+_);else switch(_){case 26:C=" ";break;case de.AS:p=d,d=It.ALPHA_SHIFT;break;case de.ML:d=It.MIXED;break;case de.PS:p=d,d=It.PUNCT_SHIFT;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[m]);break;case de.TEXT_COMPACTION_MODE_LATCH:d=It.ALPHA;break}break;case It.MIXED:if(_<de.PL)C=de.MIXED_CHARS[_];else switch(_){case de.PL:d=It.PUNCT;break;case 26:C=" ";break;case de.LL:d=It.LOWER;break;case de.AL:d=It.ALPHA;break;case de.PS:p=d,d=It.PUNCT_SHIFT;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[m]);break;case de.TEXT_COMPACTION_MODE_LATCH:d=It.ALPHA;break}break;case It.PUNCT:if(_<de.PAL)C=de.PUNCT_CHARS[_];else switch(_){case de.PAL:d=It.ALPHA;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[m]);break;case de.TEXT_COMPACTION_MODE_LATCH:d=It.ALPHA;break}break;case It.ALPHA_SHIFT:if(d=p,_<26)C=String.fromCharCode(65+_);else switch(_){case 26:C=" ";break;case de.TEXT_COMPACTION_MODE_LATCH:d=It.ALPHA;break}break;case It.PUNCT_SHIFT:if(d=p,_<de.PAL)C=de.PUNCT_CHARS[_];else switch(_){case de.PAL:d=It.ALPHA;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[m]);break;case de.TEXT_COMPACTION_MODE_LATCH:d=It.ALPHA;break}break}C!==""&&u.append(C),m++}}static byteCompaction(r,s,a,u,d){let p=new Qc,m=0,_=0,C=!1;switch(r){case de.BYTE_COMPACTION_MODE_LATCH:let A=new Int32Array(6),k=s[u++];for(;u<s[0]&&!C;)switch(A[m++]=k,_=900*_+k,k=s[u++],k){case de.TEXT_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH:case de.NUMERIC_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:u--,C=!0;break;default:if(m%5===0&&m>0){for(let B=0;B<6;++B)p.write(Number(fi(_)>>fi(8*(5-B))));_=0,m=0}break}u===s[0]&&k<de.TEXT_COMPACTION_MODE_LATCH&&(A[m++]=k);for(let B=0;B<m;B++)p.write(A[B]);break;case de.BYTE_COMPACTION_MODE_LATCH_6:for(;u<s[0]&&!C;){let B=s[u++];if(B<de.TEXT_COMPACTION_MODE_LATCH)m++,_=900*_+B;else switch(B){case de.TEXT_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH:case de.NUMERIC_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:u--,C=!0;break}if(m%5===0&&m>0){for(let W=0;W<6;++W)p.write(Number(fi(_)>>fi(8*(5-W))));_=0,m=0}}break}return d.append(me.decode(p.toByteArray(),a)),u}static numericCompaction(r,s,a){let u=0,d=!1,p=new Int32Array(de.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!d;){let m=r[s++];if(s===r[0]&&(d=!0),m<de.TEXT_COMPACTION_MODE_LATCH)p[u]=m,u++;else switch(m){case de.TEXT_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:s--,d=!0;break}(u%de.MAX_NUMERIC_CODEWORDS===0||m===de.NUMERIC_COMPACTION_MODE_LATCH||d)&&u>0&&(a.append(de.decodeBase900toBase10(p,u)),u=0)}return s}static decodeBase900toBase10(r,s){let a=fi(0);for(let d=0;d<s;d++)a+=de.EXP900[s-d-1]*fi(r[d]);let u=a.toString();if(u.charAt(0)!=="1")throw new G;return u.substring(1)}}de.TEXT_COMPACTION_MODE_LATCH=900,de.BYTE_COMPACTION_MODE_LATCH=901,de.NUMERIC_COMPACTION_MODE_LATCH=902,de.BYTE_COMPACTION_MODE_LATCH_6=924,de.ECI_USER_DEFINED=925,de.ECI_GENERAL_PURPOSE=926,de.ECI_CHARSET=927,de.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,de.MACRO_PDF417_TERMINATOR=922,de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,de.MAX_NUMERIC_CODEWORDS=15,de.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,de.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,de.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,de.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,de.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,de.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,de.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,de.PL=25,de.LL=27,de.AS=27,de.ML=28,de.AL=28,de.PS=29,de.PAL=29,de.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,de.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",de.EXP900=aa()?Sh():[],de.NUMBER_OF_SEQUENCE_CODEWORDS=2;class st{constructor(){}static decode(r,s,a,u,d,p,m){let _=new Nr(r,s,a,u,d),C=null,A=null,k;for(let K=!0;;K=!1){if(s!=null&&(C=st.getRowIndicatorColumn(r,_,s,!0,p,m)),u!=null&&(A=st.getRowIndicatorColumn(r,_,u,!1,p,m)),k=st.merge(C,A),k==null)throw ue.getNotFoundInstance();let J=k.getBoundingBox();if(K&&J!=null&&(J.getMinY()<_.getMinY()||J.getMaxY()>_.getMaxY()))_=J;else break}k.setBoundingBox(_);let B=k.getBarcodeColumnCount()+1;k.setDetectionResultColumn(0,C),k.setDetectionResultColumn(B,A);let W=C!=null;for(let K=1;K<=B;K++){let J=W?K:B-K;if(k.getDetectionResultColumn(J)!==void 0)continue;let ie;J===0||J===B?ie=new qc(_,J===0):ie=new vs(_),k.setDetectionResultColumn(J,ie);let ce=-1,Ce=ce;for(let Se=_.getMinY();Se<=_.getMaxY();Se++){if(ce=st.getStartColumn(k,J,Se,W),ce<0||ce>_.getMaxX()){if(Ce===-1)continue;ce=Ce}let _e=st.detectCodeword(r,_.getMinX(),_.getMaxX(),W,ce,Se,p,m);_e!=null&&(ie.setCodeword(Se,_e),Ce=ce,p=Math.min(p,_e.getWidth()),m=Math.max(m,_e.getWidth()))}}return st.createDecoderResult(k)}static merge(r,s){if(r==null&&s==null)return null;let a=st.getBarcodeMetadata(r,s);if(a==null)return null;let u=Nr.merge(st.adjustBoundingBox(r),st.adjustBoundingBox(s));return new _s(a,u)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let a=st.getMax(s),u=0;for(let m of s)if(u+=a-m,m>0)break;let d=r.getCodewords();for(let m=0;u>0&&d[m]==null;m++)u--;let p=0;for(let m=s.length-1;m>=0&&(p+=a-s[m],!(s[m]>0));m--);for(let m=d.length-1;p>0&&d[m]==null;m--)p--;return r.getBoundingBox().addMissingRows(u,p,r.isLeft())}static getMax(r){let s=-1;for(let a of r)s=Math.max(s,a);return s}static getBarcodeMetadata(r,s){let a;if(r==null||(a=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let u;return s==null||(u=s.getBarcodeMetadata())==null?a:a.getColumnCount()!==u.getColumnCount()&&a.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&a.getRowCount()!==u.getRowCount()?null:a}static getRowIndicatorColumn(r,s,a,u,d,p){let m=new qc(s,u);for(let _=0;_<2;_++){let C=_===0?1:-1,A=Math.trunc(Math.trunc(a.getX()));for(let k=Math.trunc(Math.trunc(a.getY()));k<=s.getMaxY()&&k>=s.getMinY();k+=C){let B=st.detectCodeword(r,0,r.getWidth(),u,A,k,d,p);B!=null&&(m.setCodeword(k,B),u?A=B.getStartX():A=B.getEndX())}}return m}static adjustCodewordCount(r,s){let a=s[0][1],u=a.getValue(),d=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-st.getNumberOfECCodeWords(r.getBarcodeECLevel());if(u.length===0){if(d<1||d>Re.MAX_CODEWORDS_IN_BARCODE)throw ue.getNotFoundInstance();a.setValue(d)}else u[0]!==d&&a.setValue(d)}static createDecoderResult(r){let s=st.createBarcodeMatrix(r);st.adjustCodewordCount(r,s);let a=new Array,u=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),d=[],p=new Array;for(let _=0;_<r.getBarcodeRowCount();_++)for(let C=0;C<r.getBarcodeColumnCount();C++){let A=s[_][C+1].getValue(),k=_*r.getBarcodeColumnCount()+C;A.length===0?a.push(k):A.length===1?u[k]=A[0]:(p.push(k),d.push(A))}let m=new Array(d.length);for(let _=0;_<m.length;_++)m[_]=d[_];return st.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),u,Re.toIntArray(a),Re.toIntArray(p),m)}static createDecoderResultFromAmbiguousValues(r,s,a,u,d){let p=new Int32Array(u.length),m=100;for(;m-- >0;){for(let _=0;_<p.length;_++)s[u[_]]=d[_][p[_]];try{return st.decodeCodewords(s,r,a)}catch(_){if(!(_ instanceof O))throw _}if(p.length===0)throw O.getChecksumInstance();for(let _=0;_<p.length;_++)if(p[_]<d[_].length-1){p[_]++;break}else if(p[_]=0,_===p.length-1)throw O.getChecksumInstance()}throw O.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let u=0;u<s.length;u++)for(let d=0;d<s[u].length;d++)s[u][d]=new ws;let a=0;for(let u of r.getDetectionResultColumns()){if(u!=null){for(let d of u.getCodewords())if(d!=null){let p=d.getRowNumber();if(p>=0){if(p>=s.length)continue;s[p][a].setValue(d.getValue())}}}a++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,a,u){let d=u?1:-1,p=null;if(st.isValidBarcodeColumn(r,s-d)&&(p=r.getDetectionResultColumn(s-d).getCodeword(a)),p!=null)return u?p.getEndX():p.getStartX();if(p=r.getDetectionResultColumn(s).getCodewordNearby(a),p!=null)return u?p.getStartX():p.getEndX();if(st.isValidBarcodeColumn(r,s-d)&&(p=r.getDetectionResultColumn(s-d).getCodewordNearby(a)),p!=null)return u?p.getEndX():p.getStartX();let m=0;for(;st.isValidBarcodeColumn(r,s-d);){s-=d;for(let _ of r.getDetectionResultColumn(s).getCodewords())if(_!=null)return(u?_.getEndX():_.getStartX())+d*m*(_.getEndX()-_.getStartX());m++}return u?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,a,u,d,p,m,_){d=st.adjustCodewordStartColumn(r,s,a,u,d,p);let C=st.getModuleBitCount(r,s,a,u,d,p);if(C==null)return null;let A,k=we.sum(C);if(u)A=d+k;else{for(let K=0;K<C.length/2;K++){let J=C[K];C[K]=C[C.length-1-K],C[C.length-1-K]=J}A=d,d=A-k}if(!st.checkCodewordSkew(k,m,_))return null;let B=Wn.getDecodedValue(C),W=Re.getCodeword(B);return W===-1?null:new Zi(d,A,st.getCodewordBucketNumber(B),W)}static getModuleBitCount(r,s,a,u,d,p){let m=d,_=new Int32Array(8),C=0,A=u?1:-1,k=u;for(;(u?m<a:m>=s)&&C<_.length;)r.get(m,p)===k?(_[C]++,m+=A):(C++,k=!k);return C===_.length||m===(u?a:s)&&C===_.length-1?_:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,a,u,d,p){let m=d,_=u?-1:1;for(let C=0;C<2;C++){for(;(u?m>=s:m<a)&&u===r.get(m,p);){if(Math.abs(d-m)>st.CODEWORD_SKEW_SIZE)return d;m+=_}_=-_,u=!u}return m}static checkCodewordSkew(r,s,a){return s-st.CODEWORD_SKEW_SIZE<=r&&r<=a+st.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,a){if(r.length===0)throw G.getFormatInstance();let u=1<<s+1,d=st.correctErrors(r,a,u);st.verifyCodewordCount(r,u);let p=de.decode(r,""+s);return p.setErrorsCorrected(d),p.setErasures(a.length),p}static correctErrors(r,s,a){if(s!=null&&s.length>a/2+st.MAX_ERRORS||a<0||a>st.MAX_EC_CODEWORDS)throw O.getChecksumInstance();return st.errorCorrection.decode(r,a,s)}static verifyCodewordCount(r,s){if(r.length<4)throw G.getFormatInstance();let a=r[0];if(a>r.length)throw G.getFormatInstance();if(a===0)if(s<r.length)r[0]=r.length-s;else throw G.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),a=0,u=s.length-1;for(;!((r&1)!==a&&(a=r&1,u--,u<0));)s[u]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return st.getCodewordBucketNumber(st.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new Tr;for(let a=0;a<r.length;a++){s.format("Row %2d: ",a);for(let u=0;u<r[a].length;u++){let d=r[a][u];d.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}s.format("%n")}return s.toString()}}st.CODEWORD_SKEW_SIZE=2,st.MAX_ERRORS=3,st.MAX_EC_CODEWORDS=512,st.errorCorrection=new oa;class Sn{decode(r,s=null){let a=Sn.decode(r,s,!1);if(a==null||a.length===0||a[0]==null)throw ue.getNotFoundInstance();return a[0]}decodeMultiple(r,s=null){try{return Sn.decode(r,s,!0)}catch(a){throw a instanceof G||a instanceof O?ue.getNotFoundInstance():a}}static decode(r,s,a){const u=new Array,d=rt.detectMultiple(r,s,a);for(const p of d.getPoints()){const m=st.decode(d.getBits(),p[4],p[5],p[6],p[7],Sn.getMinCodewordWidth(p),Sn.getMaxCodewordWidth(p)),_=new Ze(m.getText(),m.getRawBytes(),void 0,p,ge.PDF_417);_.putMetadata(ft.ERROR_CORRECTION_LEVEL,m.getECLevel());const C=m.getOther();C!=null&&_.putMetadata(ft.PDF417_EXTRA_METADATA,C),u.push(_)}return u.map(p=>p)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?I.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Sn.getMaxWidth(r[0],r[4]),Sn.getMaxWidth(r[6],r[2])*Re.MODULES_IN_CODEWORD/Re.MODULES_IN_STOP_PATTERN),Math.max(Sn.getMaxWidth(r[1],r[5]),Sn.getMaxWidth(r[7],r[3])*Re.MODULES_IN_CODEWORD/Re.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Sn.getMinWidth(r[0],r[4]),Sn.getMinWidth(r[6],r[2])*Re.MODULES_IN_CODEWORD/Re.MODULES_IN_STOP_PATTERN),Math.min(Sn.getMinWidth(r[1],r[5]),Sn.getMinWidth(r[7],r[3])*Re.MODULES_IN_CODEWORD/Re.MODULES_IN_STOP_PATTERN)))}reset(){}}class ir extends g{}ir.kind="ReaderException";class Jc{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!i(r)&&r.get(X.TRY_HARDER)===!0,a=i(r)?null:r.get(X.POSSIBLE_FORMATS),u=new Array;if(!i(a)){const d=a.some(p=>p===ge.UPC_A||p===ge.UPC_E||p===ge.EAN_13||p===ge.EAN_8||p===ge.CODABAR||p===ge.CODE_39||p===ge.CODE_93||p===ge.CODE_128||p===ge.ITF||p===ge.RSS_14||p===ge.RSS_EXPANDED);d&&!s&&u.push(new Ti(r,this.verbose)),a.includes(ge.QR_CODE)&&u.push(new bn),a.includes(ge.DATA_MATRIX)&&u.push(new Tt),a.includes(ge.AZTEC)&&u.push(new At),a.includes(ge.PDF_417)&&u.push(new Sn),d&&s&&u.push(new Ti(r,this.verbose))}u.length===0&&(s||u.push(new Ti(r,this.verbose)),u.push(new bn),u.push(new Tt),u.push(new At),u.push(new Sn),s&&u.push(new Ti(r,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new ir("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(a){if(a instanceof ir)continue}throw new ue("No MultiFormat Readers were able to detect the code.")}}class $c extends ot{constructor(r=null,s=500){const a=new Jc;a.setHints(r),super(a,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class Ii extends ot{constructor(r=500){super(new Sn,r)}}class eu extends ot{constructor(r=500){super(new bn,r)}}var ca;(function(M){M[M.ERROR_CORRECTION=0]="ERROR_CORRECTION",M[M.CHARACTER_SET=1]="CHARACTER_SET",M[M.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",M[M.MIN_SIZE=3]="MIN_SIZE",M[M.MAX_SIZE=4]="MAX_SIZE",M[M.MARGIN=5]="MARGIN",M[M.PDF417_COMPACT=6]="PDF417_COMPACT",M[M.PDF417_COMPACTION=7]="PDF417_COMPACTION",M[M.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",M[M.AZTEC_LAYERS=9]="AZTEC_LAYERS",M[M.QR_VERSION=10]="QR_VERSION"})(ca||(ca={}));var tn=ca;class xl{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new ut(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let a=s[s.length-1];const u=this.field;for(let d=s.length;d<=r;d++){const p=a.multiply(new ut(u,Int32Array.from([1,u.exp(d-1+u.getGeneratorBase())])));s.push(p),a=p}}return s[r]}encode(r,s){if(s===0)throw new E("No error correction bytes");const a=r.length-s;if(a<=0)throw new E("No data bytes provided");const u=this.buildGenerator(s),d=new Int32Array(a);P.arraycopy(r,0,d,0,a);let p=new ut(this.field,d);p=p.multiplyByMonomial(s,1);const _=p.divide(u)[1].getCoefficients(),C=s-_.length;for(let A=0;A<C;A++)r[a+A]=0;P.arraycopy(_,0,r,a+C,_.length)}}class Yt{constructor(){}static applyMaskPenaltyRule1(r){return Yt.applyMaskPenaltyRule1Internal(r,!0)+Yt.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const a=r.getArray(),u=r.getWidth(),d=r.getHeight();for(let p=0;p<d-1;p++){const m=a[p];for(let _=0;_<u-1;_++){const C=m[_];C===m[_+1]&&C===a[p+1][_]&&C===a[p+1][_+1]&&s++}}return Yt.N2*s}static applyMaskPenaltyRule3(r){let s=0;const a=r.getArray(),u=r.getWidth(),d=r.getHeight();for(let p=0;p<d;p++)for(let m=0;m<u;m++){const _=a[p];m+6<u&&_[m]===1&&_[m+1]===0&&_[m+2]===1&&_[m+3]===1&&_[m+4]===1&&_[m+5]===0&&_[m+6]===1&&(Yt.isWhiteHorizontal(_,m-4,m)||Yt.isWhiteHorizontal(_,m+7,m+11))&&s++,p+6<d&&a[p][m]===1&&a[p+1][m]===0&&a[p+2][m]===1&&a[p+3][m]===1&&a[p+4][m]===1&&a[p+5][m]===0&&a[p+6][m]===1&&(Yt.isWhiteVertical(a,m,p-4,p)||Yt.isWhiteVertical(a,m,p+7,p+11))&&s++}return s*Yt.N3}static isWhiteHorizontal(r,s,a){s=Math.max(s,0),a=Math.min(a,r.length);for(let u=s;u<a;u++)if(r[u]===1)return!1;return!0}static isWhiteVertical(r,s,a,u){a=Math.max(a,0),u=Math.min(u,r.length);for(let d=a;d<u;d++)if(r[d][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const a=r.getArray(),u=r.getWidth(),d=r.getHeight();for(let _=0;_<d;_++){const C=a[_];for(let A=0;A<u;A++)C[A]===1&&s++}const p=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-p)*10/p)*Yt.N4}static getDataMaskBit(r,s,a){let u,d;switch(r){case 0:u=a+s&1;break;case 1:u=a&1;break;case 2:u=s%3;break;case 3:u=(a+s)%3;break;case 4:u=Math.floor(a/2)+Math.floor(s/3)&1;break;case 5:d=a*s,u=(d&1)+d%3;break;case 6:d=a*s,u=(d&1)+d%3&1;break;case 7:d=a*s,u=d%3+(a+s&1)&1;break;default:throw new E("Invalid mask pattern: "+r)}return u===0}static applyMaskPenaltyRule1Internal(r,s){let a=0;const u=s?r.getHeight():r.getWidth(),d=s?r.getWidth():r.getHeight(),p=r.getArray();for(let m=0;m<u;m++){let _=0,C=-1;for(let A=0;A<d;A++){const k=s?p[m][A]:p[A][m];k===C?_++:(_>=5&&(a+=Yt.N1+(_-5)),_=1,C=k)}_>=5&&(a+=Yt.N1+(_-5))}return a}}Yt.N1=3,Yt.N2=3,Yt.N3=40,Yt.N4=10;class bo{constructor(r,s){this.width=r,this.height=s;const a=new Array(s);for(let u=0;u!==s;u++)a[u]=new Uint8Array(r);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,a){this.bytes[s][r]=a}setBoolean(r,s,a){this.bytes[s][r]=a?1:0}clear(r){for(const s of this.bytes)R.fill(s,r)}equals(r){if(!(r instanceof bo))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let a=0,u=this.height;a<u;++a){const d=this.bytes[a],p=s.bytes[a];for(let m=0,_=this.width;m<_;++m)if(d[m]!==p[m])return!1}return!0}toString(){const r=new Ie;for(let s=0,a=this.height;s<a;++s){const u=this.bytes[s];for(let d=0,p=this.width;d<p;++d)switch(u[d]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class Gi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new Ie;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<Gi.NUM_MASK_PATTERNS}}Gi.NUM_MASK_PATTERNS=8;class Rt extends g{}Rt.kind="WriterException";class Ge{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,a,u,d){Ge.clearMatrix(d),Ge.embedBasicPatterns(a,d),Ge.embedTypeInfo(s,u,d),Ge.maybeEmbedVersionInfo(a,d),Ge.embedDataBits(r,u,d)}static embedBasicPatterns(r,s){Ge.embedPositionDetectionPatternsAndSeparators(s),Ge.embedDarkDotAtLeftBottomCorner(s),Ge.maybeEmbedPositionAdjustmentPatterns(r,s),Ge.embedTimingPatterns(s)}static embedTypeInfo(r,s,a){const u=new Z;Ge.makeTypeInfoBits(r,s,u);for(let d=0,p=u.getSize();d<p;++d){const m=u.get(u.getSize()-1-d),_=Ge.TYPE_INFO_COORDINATES[d],C=_[0],A=_[1];if(a.setBoolean(C,A,m),d<8){const k=a.getWidth()-d-1;a.setBoolean(k,8,m)}else{const B=a.getHeight()-7+(d-8);a.setBoolean(8,B,m)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const a=new Z;Ge.makeVersionInfoBits(r,a);let u=6*3-1;for(let d=0;d<6;++d)for(let p=0;p<3;++p){const m=a.get(u);u--,s.setBoolean(d,s.getHeight()-11+p,m),s.setBoolean(s.getHeight()-11+p,d,m)}}static embedDataBits(r,s,a){let u=0,d=-1,p=a.getWidth()-1,m=a.getHeight()-1;for(;p>0;){for(p===6&&(p-=1);m>=0&&m<a.getHeight();){for(let _=0;_<2;++_){const C=p-_;if(!Ge.isEmpty(a.get(C,m)))continue;let A;u<r.getSize()?(A=r.get(u),++u):A=!1,s!==255&&Yt.getDataMaskBit(s,C,m)&&(A=!A),a.setBoolean(C,m,A)}m+=d}d=-d,m+=d,p-=2}if(u!==r.getSize())throw new Rt("Not all bits consumed: "+u+"/"+r.getSize())}static findMSBSet(r){return 32-I.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new E("0 polynomial");const a=Ge.findMSBSet(s);for(r<<=a-1;Ge.findMSBSet(r)>=a;)r^=s<<Ge.findMSBSet(r)-a;return r}static makeTypeInfoBits(r,s,a){if(!Gi.isValidMaskPattern(s))throw new Rt("Invalid mask pattern");const u=r.getBits()<<3|s;a.appendBits(u,5);const d=Ge.calculateBCHCode(u,Ge.TYPE_INFO_POLY);a.appendBits(d,10);const p=new Z;if(p.appendBits(Ge.TYPE_INFO_MASK_PATTERN,15),a.xor(p),a.getSize()!==15)throw new Rt("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const a=Ge.calculateBCHCode(r.getVersionNumber(),Ge.VERSION_INFO_POLY);if(s.appendBits(a,12),s.getSize()!==18)throw new Rt("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const a=(s+1)%2;Ge.isEmpty(r.get(s,6))&&r.setNumber(s,6,a),Ge.isEmpty(r.get(6,s))&&r.setNumber(6,s,a)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new Rt;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,a){for(let u=0;u<8;++u){if(!Ge.isEmpty(a.get(r+u,s)))throw new Rt;a.setNumber(r+u,s,0)}}static embedVerticalSeparationPattern(r,s,a){for(let u=0;u<7;++u){if(!Ge.isEmpty(a.get(r,s+u)))throw new Rt;a.setNumber(r,s+u,0)}}static embedPositionAdjustmentPattern(r,s,a){for(let u=0;u<5;++u){const d=Ge.POSITION_ADJUSTMENT_PATTERN[u];for(let p=0;p<5;++p)a.setNumber(r+p,s+u,d[p])}}static embedPositionDetectionPattern(r,s,a){for(let u=0;u<7;++u){const d=Ge.POSITION_DETECTION_PATTERN[u];for(let p=0;p<7;++p)a.setNumber(r+p,s+u,d[p])}}static embedPositionDetectionPatternsAndSeparators(r){const s=Ge.POSITION_DETECTION_PATTERN[0].length;Ge.embedPositionDetectionPattern(0,0,r),Ge.embedPositionDetectionPattern(r.getWidth()-s,0,r),Ge.embedPositionDetectionPattern(0,r.getWidth()-s,r);const a=8;Ge.embedHorizontalSeparationPattern(0,a-1,r),Ge.embedHorizontalSeparationPattern(r.getWidth()-a,a-1,r),Ge.embedHorizontalSeparationPattern(0,r.getWidth()-a,r);const u=7;Ge.embedVerticalSeparationPattern(u,0,r),Ge.embedVerticalSeparationPattern(r.getHeight()-u-1,0,r),Ge.embedVerticalSeparationPattern(u,r.getHeight()-u,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const a=r.getVersionNumber()-1,u=Ge.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let d=0,p=u.length;d!==p;d++){const m=u[d];if(m>=0)for(let _=0;_!==p;_++){const C=u[_];C>=0&&Ge.isEmpty(s.get(C,m))&&Ge.embedPositionAdjustmentPattern(C-2,m-2,s)}}}}Ge.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ge.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ge.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ge.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ge.VERSION_INFO_POLY=7973,Ge.TYPE_INFO_POLY=1335,Ge.TYPE_INFO_MASK_PATTERN=21522;class Eh{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Dt{constructor(){}static calculateMaskPenalty(r){return Yt.applyMaskPenaltyRule1(r)+Yt.applyMaskPenaltyRule2(r)+Yt.applyMaskPenaltyRule3(r)+Yt.applyMaskPenaltyRule4(r)}static encode(r,s,a=null){let u=Dt.DEFAULT_BYTE_MODE_ENCODING;const d=a!==null&&a.get(tn.CHARACTER_SET)!==void 0;d&&(u=a.get(tn.CHARACTER_SET).toString());const p=this.chooseMode(r,u),m=new Z;if(p===We.BYTE&&(d||Dt.DEFAULT_BYTE_MODE_ENCODING!==u)){const Se=U.getCharacterSetECIByName(u);Se!==void 0&&this.appendECI(Se,m)}this.appendModeInfo(p,m);const _=new Z;this.appendBytes(r,p,_,u);let C;if(a!==null&&a.get(tn.QR_VERSION)!==void 0){const Se=Number.parseInt(a.get(tn.QR_VERSION).toString(),10);C=ke.getVersionForNumber(Se);const _e=this.calculateBitsNeeded(p,m,_,C);if(!this.willFit(_e,C,s))throw new Rt("Data too big for requested version")}else C=this.recommendVersion(s,p,m,_);const A=new Z;A.appendBitArray(m);const k=p===We.BYTE?_.getSizeInBytes():r.length;this.appendLengthInfo(k,C,p,A),A.appendBitArray(_);const B=C.getECBlocksForLevel(s),W=C.getTotalCodewords()-B.getTotalECCodewords();this.terminateBits(W,A);const K=this.interleaveWithECBytes(A,C.getTotalCodewords(),W,B.getNumBlocks()),J=new Gi;J.setECLevel(s),J.setMode(p),J.setVersion(C);const ie=C.getDimensionForVersion(),ce=new bo(ie,ie),Ce=this.chooseMaskPattern(K,s,C,ce);return J.setMaskPattern(Ce),Ge.buildMatrix(K,s,C,Ce,ce),J.setMatrix(ce),J}static recommendVersion(r,s,a,u){const d=this.calculateBitsNeeded(s,a,u,ke.getVersionForNumber(1)),p=this.chooseVersion(d,r),m=this.calculateBitsNeeded(s,a,u,p);return this.chooseVersion(m,r)}static calculateBitsNeeded(r,s,a,u){return s.getSize()+r.getCharacterCountBits(u)+a.getSize()}static getAlphanumericCode(r){return r<Dt.ALPHANUMERIC_TABLE.length?Dt.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if(U.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return We.KANJI;let a=!1,u=!1;for(let d=0,p=r.length;d<p;++d){const m=r.charAt(d);if(Dt.isDigit(m))a=!0;else if(this.getAlphanumericCode(m.charCodeAt(0))!==-1)u=!0;else return We.BYTE}return u?We.ALPHANUMERIC:a?We.NUMERIC:We.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=me.encode(r,U.SJIS)}catch{return!1}const a=s.length;if(a%2!==0)return!1;for(let u=0;u<a;u+=2){const d=s[u]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(r,s,a,u){let d=Number.MAX_SAFE_INTEGER,p=-1;for(let m=0;m<Gi.NUM_MASK_PATTERNS;m++){Ge.buildMatrix(r,s,a,m,u);let _=this.calculateMaskPenalty(u);_<d&&(d=_,p=m)}return p}static chooseVersion(r,s){for(let a=1;a<=40;a++){const u=ke.getVersionForNumber(a);if(Dt.willFit(r,u,s))return u}throw new Rt("Data too big")}static willFit(r,s,a){const u=s.getTotalCodewords(),p=s.getECBlocksForLevel(a).getTotalECCodewords(),m=u-p,_=(r+7)/8;return m>=_}static terminateBits(r,s){const a=r*8;if(s.getSize()>a)throw new Rt("data bits cannot fit in the QR Code"+s.getSize()+" > "+a);for(let p=0;p<4&&s.getSize()<a;++p)s.appendBit(!1);const u=s.getSize()&7;if(u>0)for(let p=u;p<8;p++)s.appendBit(!1);const d=r-s.getSizeInBytes();for(let p=0;p<d;++p)s.appendBits(p&1?17:236,8);if(s.getSize()!==a)throw new Rt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,a,u,d,p){if(u>=a)throw new Rt("Block ID too large");const m=r%a,_=a-m,C=Math.floor(r/a),A=C+1,k=Math.floor(s/a),B=k+1,W=C-k,K=A-B;if(W!==K)throw new Rt("EC bytes mismatch");if(a!==_+m)throw new Rt("RS blocks mismatch");if(r!==(k+W)*_+(B+K)*m)throw new Rt("Total bytes mismatch");u<_?(d[0]=k,p[0]=W):(d[0]=B,p[0]=K)}static interleaveWithECBytes(r,s,a,u){if(r.getSizeInBytes()!==a)throw new Rt("Number of bits and data bytes does not match");let d=0,p=0,m=0;const _=new Array;for(let A=0;A<u;++A){const k=new Int32Array(1),B=new Int32Array(1);Dt.getNumDataBytesAndNumECBytesForBlockID(s,a,u,A,k,B);const W=k[0],K=new Uint8Array(W);r.toBytes(8*d,K,0,W);const J=Dt.generateECBytes(K,B[0]);_.push(new Eh(K,J)),p=Math.max(p,W),m=Math.max(m,J.length),d+=k[0]}if(a!==d)throw new Rt("Data bytes does not match offset");const C=new Z;for(let A=0;A<p;++A)for(const k of _){const B=k.getDataBytes();A<B.length&&C.appendBits(B[A],8)}for(let A=0;A<m;++A)for(const k of _){const B=k.getErrorCorrectionBytes();A<B.length&&C.appendBits(B[A],8)}if(s!==C.getSizeInBytes())throw new Rt("Interleaving error: "+s+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(r,s){const a=r.length,u=new Int32Array(a+s);for(let p=0;p<a;p++)u[p]=r[p]&255;new xl(at.QR_CODE_FIELD_256).encode(u,s);const d=new Uint8Array(s);for(let p=0;p<s;p++)d[p]=u[a+p];return d}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,a,u){const d=a.getCharacterCountBits(s);if(r>=1<<d)throw new Rt(r+" is bigger than "+((1<<d)-1));u.appendBits(r,d)}static appendBytes(r,s,a,u){switch(s){case We.NUMERIC:Dt.appendNumericBytes(r,a);break;case We.ALPHANUMERIC:Dt.appendAlphanumericBytes(r,a);break;case We.BYTE:Dt.append8BitBytes(r,a,u);break;case We.KANJI:Dt.appendKanjiBytes(r,a);break;default:throw new Rt("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=Dt.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const a=r.length;let u=0;for(;u<a;){const d=Dt.getDigit(r.charAt(u));if(u+2<a){const p=Dt.getDigit(r.charAt(u+1)),m=Dt.getDigit(r.charAt(u+2));s.appendBits(d*100+p*10+m,10),u+=3}else if(u+1<a){const p=Dt.getDigit(r.charAt(u+1));s.appendBits(d*10+p,7),u+=2}else s.appendBits(d,4),u++}}static appendAlphanumericBytes(r,s){const a=r.length;let u=0;for(;u<a;){const d=Dt.getAlphanumericCode(r.charCodeAt(u));if(d===-1)throw new Rt;if(u+1<a){const p=Dt.getAlphanumericCode(r.charCodeAt(u+1));if(p===-1)throw new Rt;s.appendBits(d*45+p,11),u+=2}else s.appendBits(d,6),u++}}static append8BitBytes(r,s,a){let u;try{u=me.encode(r,a)}catch(d){throw new Rt(d)}for(let d=0,p=u.length;d!==p;d++){const m=u[d];s.appendBits(m,8)}}static appendKanjiBytes(r,s){let a;try{a=me.encode(r,U.SJIS)}catch(d){throw new Rt(d)}const u=a.length;for(let d=0;d<u;d+=2){const p=a[d]&255,m=a[d+1]&255,_=p<<8&4294967295|m;let C=-1;if(_>=33088&&_<=40956?C=_-33088:_>=57408&&_<=60351&&(C=_-49472),C===-1)throw new Rt("Invalid byte sequence");const A=(C>>8)*192+(C&255);s.appendBits(A,13)}}static appendECI(r,s){s.appendBits(We.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}Dt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Dt.DEFAULT_BYTE_MODE_ENCODING=U.UTF8.getName();class Mi{write(r,s,a,u=null){if(r.length===0)throw new E("Found empty contents");if(s<0||a<0)throw new E("Requested dimensions are too small: "+s+"x"+a);let d=dt.L,p=Mi.QUIET_ZONE_SIZE;u!==null&&(u.get(tn.ERROR_CORRECTION)!==void 0&&(d=dt.fromString(u.get(tn.ERROR_CORRECTION).toString())),u.get(tn.MARGIN)!==void 0&&(p=Number.parseInt(u.get(tn.MARGIN).toString(),10)));const m=Dt.encode(r,d,u);return this.renderResult(m,s,a,p)}writeToDom(r,s,a,u,d=null){typeof r=="string"&&(r=document.querySelector(r));const p=this.write(s,a,u,d);r&&r.appendChild(p)}renderResult(r,s,a,u){const d=r.getMatrix();if(d===null)throw new jn;const p=d.getWidth(),m=d.getHeight(),_=p+u*2,C=m+u*2,A=Math.max(s,_),k=Math.max(a,C),B=Math.min(Math.floor(A/_),Math.floor(k/C)),W=Math.floor((A-p*B)/2),K=Math.floor((k-m*B)/2),J=this.createSVGElement(A,k);for(let ie=0,ce=K;ie<m;ie++,ce+=B)for(let Ce=0,Se=W;Ce<p;Ce++,Se+=B)if(d.get(Ce,ie)===1){const _e=this.createSvgRectElement(Se,ce,B,B);J.appendChild(_e)}return J}createSVGElement(r,s){const a=document.createElementNS(Mi.SVG_NS,"svg");return a.setAttributeNS(null,"height",r.toString()),a.setAttributeNS(null,"width",s.toString()),a}createSvgRectElement(r,s,a,u){const d=document.createElementNS(Mi.SVG_NS,"rect");return d.setAttributeNS(null,"x",r.toString()),d.setAttributeNS(null,"y",s.toString()),d.setAttributeNS(null,"height",a.toString()),d.setAttributeNS(null,"width",u.toString()),d.setAttributeNS(null,"fill","#000000"),d}}Mi.QUIET_ZONE_SIZE=4,Mi.SVG_NS="http://www.w3.org/2000/svg";class pi{encode(r,s,a,u,d){if(r.length===0)throw new E("Found empty contents");if(s!==ge.QR_CODE)throw new E("Can only encode QR_CODE, but got "+s);if(a<0||u<0)throw new E(`Requested dimensions are too small: ${a}x${u}`);let p=dt.L,m=pi.QUIET_ZONE_SIZE;d!==null&&(d.get(tn.ERROR_CORRECTION)!==void 0&&(p=dt.fromString(d.get(tn.ERROR_CORRECTION).toString())),d.get(tn.MARGIN)!==void 0&&(m=Number.parseInt(d.get(tn.MARGIN).toString(),10)));const _=Dt.encode(r,p,d);return pi.renderResult(_,a,u,m)}static renderResult(r,s,a,u){const d=r.getMatrix();if(d===null)throw new jn;const p=d.getWidth(),m=d.getHeight(),_=p+u*2,C=m+u*2,A=Math.max(s,_),k=Math.max(a,C),B=Math.min(Math.floor(A/_),Math.floor(k/C)),W=Math.floor((A-p*B)/2),K=Math.floor((k-m*B)/2),J=new je(A,k);for(let ie=0,ce=K;ie<m;ie++,ce+=B)for(let Ce=0,Se=W;Ce<p;Ce++,Se+=B)d.get(Ce,ie)===1&&J.setRegion(Se,ce,B,B);return J}}pi.QUIET_ZONE_SIZE=4;class Yi{encode(r,s,a,u,d){let p;switch(s){case ge.QR_CODE:p=new pi;break;default:throw new E("No encoder available for format "+s)}return p.encode(r,s,a,u,d)}}class Gr extends Y{constructor(r,s,a,u,d,p,m,_){if(super(p,m),this.yuvData=r,this.dataWidth=s,this.dataHeight=a,this.left=u,this.top=d,u+p>s||d+m>a)throw new E("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(p,m)}getRow(r,s){if(r<0||r>=this.getHeight())throw new E("Requested row is outside the image: "+r);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const u=(r+this.top)*this.dataWidth+this.left;return P.arraycopy(this.yuvData,u,s,0,a),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const a=r*s,u=new Uint8ClampedArray(a);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return P.arraycopy(this.yuvData,d,u,0,a),u;for(let p=0;p<s;p++){const m=p*r;P.arraycopy(this.yuvData,d,u,m,r),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,s,a,u){return new Gr(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,a,u,!1)}renderThumbnail(){const r=this.getWidth()/Gr.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/Gr.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*s),u=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let p=0;p<s;p++){const m=p*r;for(let _=0;_<r;_++){const C=u[d+_*Gr.THUMBNAIL_SCALE_FACTOR]&255;a[m+_]=4278190080|C*65793}d+=this.dataWidth*Gr.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/Gr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Gr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const a=this.yuvData;for(let u=0,d=this.top*this.dataWidth+this.left;u<s;u++,d+=this.dataWidth){const p=d+r/2;for(let m=d,_=d+r-1;m<p;m++,_--){const C=a[m];a[m]=a[_],a[_]=C}}}invert(){return new ve(this)}}Gr.THUMBNAIL_SCALE_FACTOR=2;class Xi extends Y{constructor(r,s,a,u,d,p,m){if(super(s,a),this.dataWidth=u,this.dataHeight=d,this.left=p,this.top=m,r.BYTES_PER_ELEMENT===4){const _=s*a,C=new Uint8ClampedArray(_);for(let A=0;A<_;A++){const k=r[A],B=k>>16&255,W=k>>7&510,K=k&255;C[A]=(B+W+K)/4&255}this.luminances=C}else this.luminances=r;if(u===void 0&&(this.dataWidth=s),d===void 0&&(this.dataHeight=a),p===void 0&&(this.left=0),m===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+a>this.dataHeight)throw new E("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new E("Requested row is outside the image: "+r);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const u=(r+this.top)*this.dataWidth+this.left;return P.arraycopy(this.luminances,u,s,0,a),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const a=r*s,u=new Uint8ClampedArray(a);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return P.arraycopy(this.luminances,d,u,0,a),u;for(let p=0;p<s;p++){const m=p*r;P.arraycopy(this.luminances,d,u,m,r),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,s,a,u){return new Xi(this.luminances,a,u,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new ve(this)}}class sr extends U{static forName(r){return this.getCharacterSetECIByName(r)}}class ua{}ua.ISO_8859_1=U.ISO8859_1;class yl{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class tu{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class vl{constructor(r){this.previous=r}getPrevious(){return this.previous}}class ki extends vl{constructor(r,s,a){super(r),this.value=s,this.bitCount=a}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new ki(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ki(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+I.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class wl extends ki{constructor(r,s,a){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=a}appendTo(r,s){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+a],8)}addBinaryShift(r,s){return new wl(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Ah(M,r,s){return new wl(M,r,s)}function bs(M,r,s){return new ki(M,r,s)}const Nh=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],xn=0,mi=1,pr=2,Yr=3,Xr=4,Cs=new ki(null,0,0),_l=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Co(M){for(let r of M)R.fill(r,-1);return M[xn][Xr]=0,M[mi][Xr]=0,M[mi][xn]=28,M[Yr][Xr]=0,M[pr][Xr]=0,M[pr][xn]=15,M}const bl=Co(R.createInt32Array(6,6));class or{constructor(r,s,a,u){this.token=r,this.mode=s,this.binaryShiftByteCount=a,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let a=this.bitCount,u=this.token;if(r!==this.mode){let p=_l[this.mode][r];u=bs(u,p&65535,p>>16),a+=p>>16}let d=r===pr?4:5;return u=bs(u,s,d),new or(u,r,0,a+d)}shiftAndAppend(r,s){let a=this.token,u=this.mode===pr?4:5;return a=bs(a,bl[this.mode][r],u),a=bs(a,s,5),new or(a,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(r){let s=this.token,a=this.mode,u=this.bitCount;if(this.mode===Xr||this.mode===pr){let m=_l[a][xn];s=bs(s,m&65535,m>>16),u+=m>>16,a=xn}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,p=new or(s,a,this.binaryShiftByteCount+1,u+d);return p.binaryShiftByteCount===2078&&(p=p.endBinaryShift(r+1)),p}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=Ah(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new or(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(_l[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=or.calculateBinaryShiftCost(r)-or.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let u=this.endBinaryShift(r.length).token;u!==null;u=u.getPrevious())s.unshift(u);let a=new Z;for(const u of s)u.appendTo(a,r);return a}toString(){return le.format("%s bits=%d bytes=%d",Nh[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}or.INITIAL_STATE=new or(Cs,xn,0,0);function Th(M){const r=le.getCharCode(" "),s=le.getCharCode("."),a=le.getCharCode(",");M[xn][r]=1;const u=le.getCharCode("Z"),d=le.getCharCode("A");for(let B=d;B<=u;B++)M[xn][B]=B-d+2;M[mi][r]=1;const p=le.getCharCode("z"),m=le.getCharCode("a");for(let B=m;B<=p;B++)M[mi][B]=B-m+2;M[pr][r]=1;const _=le.getCharCode("9"),C=le.getCharCode("0");for(let B=C;B<=_;B++)M[pr][B]=B-C+2;M[pr][a]=12,M[pr][s]=13;const A=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let B=0;B<A.length;B++)M[Yr][le.getCharCode(A[B])]=B;const k=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let B=0;B<k.length;B++)le.getCharCode(k[B])>0&&(M[Xr][le.getCharCode(k[B])]=B);return M}const qr=Th(R.createInt32Array(5,256));class Ri{constructor(r){this.text=r}encode(){const r=le.getCharCode(" "),s=le.getCharCode(`
`);let a=tu.singletonList(or.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let p,m=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case le.getCharCode("\r"):p=m===s?2:0;break;case le.getCharCode("."):p=m===r?3:0;break;case le.getCharCode(","):p=m===r?4:0;break;case le.getCharCode(":"):p=m===r?5:0;break;default:p=0}p>0?(a=Ri.updateStateListForPair(a,d,p),d++):a=this.updateStateListForChar(a,d)}return tu.min(a,(d,p)=>d.getBitCount()-p.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const a=[];for(let u of r)this.updateStateForChar(u,s,a);return Ri.simplifyStates(a)}updateStateForChar(r,s,a){let u=this.text[s]&255,d=qr[r.getMode()][u]>0,p=null;for(let m=0;m<=Xr;m++){let _=qr[m][u];if(_>0){if(p==null&&(p=r.endBinaryShift(s)),!d||m===r.getMode()||m===pr){const C=p.latchAndAppend(m,_);a.push(C)}if(!d&&bl[r.getMode()][m]>=0){const C=p.shiftAndAppend(m,_);a.push(C)}}}if(r.getBinaryShiftByteCount()>0||qr[r.getMode()][u]===0){let m=r.addBinaryShiftChar(s);a.push(m)}}static updateStateListForPair(r,s,a){const u=[];for(let d of r)this.updateStateForPair(d,s,a,u);return this.simplifyStates(u)}static updateStateForPair(r,s,a,u){let d=r.endBinaryShift(s);if(u.push(d.latchAndAppend(Xr,a)),r.getMode()!==Xr&&u.push(d.shiftAndAppend(Xr,a)),a===3||a===4){let p=d.latchAndAppend(pr,16-a).latchAndAppend(pr,1);u.push(p)}if(r.getBinaryShiftByteCount()>0){let p=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);u.push(p)}}static simplifyStates(r){let s=[];for(const a of r){let u=!0;for(const d of s){if(d.isBetterThanOrEqualTo(a)){u=!1;break}a.isBetterThanOrEqualTo(d)&&(s=s.filter(p=>p!==d))}u&&s.push(a)}return s}}class yt{constructor(){}static encodeBytes(r){return yt.encode(r,yt.DEFAULT_EC_PERCENT,yt.DEFAULT_AZTEC_LAYERS)}static encode(r,s,a){let u=new Ri(r).encode(),d=I.truncDivision(u.getSize()*s,100)+11,p=u.getSize()+d,m,_,C,A,k;if(a!==yt.DEFAULT_AZTEC_LAYERS){if(m=a<0,_=Math.abs(a),_>(m?yt.MAX_NB_BITS_COMPACT:yt.MAX_NB_BITS))throw new E(le.format("Illegal value %s for layers",a));C=yt.totalBitsInLayer(_,m),A=yt.WORD_SIZE[_];let _e=C-C%A;if(k=yt.stuffBits(u,A),k.getSize()+d>_e)throw new E("Data to large for user specified layer");if(m&&k.getSize()>A*64)throw new E("Data to large for user specified layer")}else{A=0,k=null;for(let _e=0;;_e++){if(_e>yt.MAX_NB_BITS)throw new E("Data too large for an Aztec code");if(m=_e<=3,_=m?_e+1:_e,C=yt.totalBitsInLayer(_,m),p>C)continue;(k==null||A!==yt.WORD_SIZE[_])&&(A=yt.WORD_SIZE[_],k=yt.stuffBits(u,A));let ht=C-C%A;if(!(m&&k.getSize()>A*64)&&k.getSize()+d<=ht)break}}let B=yt.generateCheckWords(k,C,A),W=k.getSize()/A,K=yt.generateModeMessage(m,_,W),J=(m?11:14)+_*4,ie=new Int32Array(J),ce;if(m){ce=J;for(let _e=0;_e<ie.length;_e++)ie[_e]=_e}else{ce=J+1+2*I.truncDivision(I.truncDivision(J,2)-1,15);let _e=I.truncDivision(J,2),ht=I.truncDivision(ce,2);for(let it=0;it<_e;it++){let Xt=it+I.truncDivision(it,15);ie[_e-it-1]=ht-Xt-1,ie[_e+it]=ht+Xt+1}}let Ce=new je(ce);for(let _e=0,ht=0;_e<_;_e++){let it=(_-_e)*4+(m?9:12);for(let Xt=0;Xt<it;Xt++){let Zn=Xt*2;for(let Gn=0;Gn<2;Gn++)B.get(ht+Zn+Gn)&&Ce.set(ie[_e*2+Gn],ie[_e*2+Xt]),B.get(ht+it*2+Zn+Gn)&&Ce.set(ie[_e*2+Xt],ie[J-1-_e*2-Gn]),B.get(ht+it*4+Zn+Gn)&&Ce.set(ie[J-1-_e*2-Gn],ie[J-1-_e*2-Xt]),B.get(ht+it*6+Zn+Gn)&&Ce.set(ie[J-1-_e*2-Xt],ie[_e*2+Gn])}ht+=it*8}if(yt.drawModeMessage(Ce,m,ce,K),m)yt.drawBullsEye(Ce,I.truncDivision(ce,2),5);else{yt.drawBullsEye(Ce,I.truncDivision(ce,2),7);for(let _e=0,ht=0;_e<I.truncDivision(J,2)-1;_e+=15,ht+=16)for(let it=I.truncDivision(ce,2)&1;it<ce;it+=2)Ce.set(I.truncDivision(ce,2)-ht,it),Ce.set(I.truncDivision(ce,2)+ht,it),Ce.set(it,I.truncDivision(ce,2)-ht),Ce.set(it,I.truncDivision(ce,2)+ht)}let Se=new yl;return Se.setCompact(m),Se.setSize(ce),Se.setLayers(_),Se.setCodeWords(W),Se.setMatrix(Ce),Se}static drawBullsEye(r,s,a){for(let u=0;u<a;u+=2)for(let d=s-u;d<=s+u;d++)r.set(d,s-u),r.set(d,s+u),r.set(s-u,d),r.set(s+u,d);r.set(s-a,s-a),r.set(s-a+1,s-a),r.set(s-a,s-a+1),r.set(s+a,s-a),r.set(s+a,s-a+1),r.set(s+a,s+a-1)}static generateModeMessage(r,s,a){let u=new Z;return r?(u.appendBits(s-1,2),u.appendBits(a-1,6),u=yt.generateCheckWords(u,28,4)):(u.appendBits(s-1,5),u.appendBits(a-1,11),u=yt.generateCheckWords(u,40,4)),u}static drawModeMessage(r,s,a,u){let d=I.truncDivision(a,2);if(s)for(let p=0;p<7;p++){let m=d-3+p;u.get(p)&&r.set(m,d-5),u.get(p+7)&&r.set(d+5,m),u.get(20-p)&&r.set(m,d+5),u.get(27-p)&&r.set(d-5,m)}else for(let p=0;p<10;p++){let m=d-5+p+I.truncDivision(p,5);u.get(p)&&r.set(m,d-7),u.get(p+10)&&r.set(d+7,m),u.get(29-p)&&r.set(m,d+7),u.get(39-p)&&r.set(d-7,m)}}static generateCheckWords(r,s,a){let u=r.getSize()/a,d=new xl(yt.getGF(a)),p=I.truncDivision(s,a),m=yt.bitsToWords(r,a,p);d.encode(m,p-u);let _=s%a,C=new Z;C.appendBits(0,_);for(const A of Array.from(m))C.appendBits(A,a);return C}static bitsToWords(r,s,a){let u=new Int32Array(a),d,p;for(d=0,p=r.getSize()/s;d<p;d++){let m=0;for(let _=0;_<s;_++)m|=r.get(d*s+_)?1<<s-_-1:0;u[d]=m}return u}static getGF(r){switch(r){case 4:return at.AZTEC_PARAM;case 6:return at.AZTEC_DATA_6;case 8:return at.AZTEC_DATA_8;case 10:return at.AZTEC_DATA_10;case 12:return at.AZTEC_DATA_12;default:throw new E("Unsupported word size "+r)}}static stuffBits(r,s){let a=new Z,u=r.getSize(),d=(1<<s)-2;for(let p=0;p<u;p+=s){let m=0;for(let _=0;_<s;_++)(p+_>=u||r.get(p+_))&&(m|=1<<s-1-_);(m&d)===d?(a.appendBits(m&d,s),p--):m&d?a.appendBits(m,s):(a.appendBits(m|1,s),p--)}return a}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}yt.DEFAULT_EC_PERCENT=33,yt.DEFAULT_AZTEC_LAYERS=0,yt.MAX_NB_BITS=32,yt.MAX_NB_BITS_COMPACT=4,yt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ss{encode(r,s,a,u){return this.encodeWithHints(r,s,a,u,null)}encodeWithHints(r,s,a,u,d){let p=ua.ISO_8859_1,m=yt.DEFAULT_EC_PERCENT,_=yt.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(tn.CHARACTER_SET)&&(p=sr.forName(d.get(tn.CHARACTER_SET).toString())),d.has(tn.ERROR_CORRECTION)&&(m=I.parseInt(d.get(tn.ERROR_CORRECTION).toString())),d.has(tn.AZTEC_LAYERS)&&(_=I.parseInt(d.get(tn.AZTEC_LAYERS).toString()))),Ss.encodeLayers(r,s,a,u,p,m,_)}static encodeLayers(r,s,a,u,d,p,m){if(s!==ge.AZTEC)throw new E("Can only encode AZTEC, but got "+s);let _=yt.encode(le.getBytes(r,d),p,m);return Ss.renderResult(_,a,u)}static renderResult(r,s,a){let u=r.getMatrix();if(u==null)throw new jn;let d=u.getWidth(),p=u.getHeight(),m=Math.max(s,d),_=Math.max(a,p),C=Math.min(m/d,_/p),A=(m-d*C)/2,k=(_-p*C)/2,B=new je(m,_);for(let W=0,K=k;W<p;W++,K+=C)for(let J=0,ie=A;J<d;J++,ie+=C)u.get(J,W)&&B.setRegion(ie,K,C,C);return B}}n.AbstractExpandedDecoder=ia,n.ArgumentException=b,n.ArithmeticException=en,n.AztecCode=yl,n.AztecCodeReader=At,n.AztecCodeWriter=Ss,n.AztecDecoder=$,n.AztecDetector=Mt,n.AztecDetectorResult=Ne,n.AztecEncoder=yt,n.AztecHighLevelEncoder=Ri,n.AztecPoint=Xe,n.BarcodeFormat=ge,n.Binarizer=D,n.BinaryBitmap=T,n.BitArray=Z,n.BitMatrix=je,n.BitSource=ys,n.BrowserAztecCodeReader=Ft,n.BrowserBarcodeReader=go,n.BrowserCodeReader=ot,n.BrowserDatamatrixCodeReader=hl,n.BrowserMultiFormatReader=$c,n.BrowserPDF417Reader=Ii,n.BrowserQRCodeReader=eu,n.BrowserQRCodeSvgWriter=Mi,n.CharacterSetECI=U,n.ChecksumException=O,n.Code128Reader=Ae,n.Code39Reader=ln,n.DataMatrixDecodedBitStreamParser=rr,n.DataMatrixReader=Tt,n.DecodeHintType=X,n.DecoderResult=Bn,n.DefaultGridSampler=Nt,n.DetectorResult=xe,n.EAN13Reader=Ai,n.EncodeHintType=tn,n.Exception=g,n.FormatException=G,n.GenericGF=at,n.GenericGFPoly=ut,n.GlobalHistogramBinarizer=Me,n.GridSampler=Te,n.GridSamplerInstance=He,n.HTMLCanvasElementLuminanceSource=oe,n.HybridBinarizer=Oe,n.ITFReader=kt,n.IllegalArgumentException=E,n.IllegalStateException=jn,n.InvertedLuminanceSource=ve,n.LuminanceSource=Y,n.MathUtils=we,n.MultiFormatOneDReader=Ti,n.MultiFormatReader=Jc,n.MultiFormatWriter=Yi,n.NotFoundException=ue,n.OneDReader=St,n.PDF417DecodedBitStreamParser=de,n.PDF417DecoderErrorCorrection=oa,n.PDF417Reader=Sn,n.PDF417ResultMetadata=gl,n.PerspectiveTransform=Qe,n.PlanarYUVLuminanceSource=Gr,n.QRCodeByteMatrix=bo,n.QRCodeDataMask=Rn,n.QRCodeDecodedBitStreamParser=jt,n.QRCodeDecoderErrorCorrectionLevel=dt,n.QRCodeDecoderFormatInformation=kn,n.QRCodeEncoder=Dt,n.QRCodeEncoderQRCode=Gi,n.QRCodeMaskUtil=Yt,n.QRCodeMatrixUtil=Ge,n.QRCodeMode=We,n.QRCodeReader=bn,n.QRCodeVersion=ke,n.QRCodeWriter=pi,n.RGBLuminanceSource=Xi,n.RSS14Reader=Jt,n.RSSExpandedReader=pe,n.ReaderException=ir,n.ReedSolomonDecoder=Er,n.ReedSolomonEncoder=xl,n.ReedSolomonException=Hn,n.Result=Ze,n.ResultMetadataType=ft,n.ResultPoint=te,n.StringUtils=le,n.UnsupportedOperationException=re,n.VideoInputDevice=be,n.WhiteRectangleDetector=Le,n.WriterException=Rt,n.ZXingArrays=R,n.ZXingCharset=sr,n.ZXingInteger=I,n.ZXingStandardCharsets=ua,n.ZXingStringBuilder=Ie,n.ZXingStringEncoding=me,n.ZXingSystem=P,n.createAbstractExpandedDecoder=mo,Object.defineProperty(n,"__esModule",{value:!0})})})(X0,X0.exports);var nn=X0.exports;const y5=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var Qx=function(){function e(t,n,i){if(this.formatMap=new Map([[Fe.QR_CODE,nn.BarcodeFormat.QR_CODE],[Fe.AZTEC,nn.BarcodeFormat.AZTEC],[Fe.CODABAR,nn.BarcodeFormat.CODABAR],[Fe.CODE_39,nn.BarcodeFormat.CODE_39],[Fe.CODE_93,nn.BarcodeFormat.CODE_93],[Fe.CODE_128,nn.BarcodeFormat.CODE_128],[Fe.DATA_MATRIX,nn.BarcodeFormat.DATA_MATRIX],[Fe.MAXICODE,nn.BarcodeFormat.MAXICODE],[Fe.ITF,nn.BarcodeFormat.ITF],[Fe.EAN_13,nn.BarcodeFormat.EAN_13],[Fe.EAN_8,nn.BarcodeFormat.EAN_8],[Fe.PDF_417,nn.BarcodeFormat.PDF_417],[Fe.RSS_14,nn.BarcodeFormat.RSS_14],[Fe.RSS_EXPANDED,nn.BarcodeFormat.RSS_EXPANDED],[Fe.UPC_A,nn.BarcodeFormat.UPC_A],[Fe.UPC_E,nn.BarcodeFormat.UPC_E],[Fe.UPC_EAN_EXTENSION,nn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!y5)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var l=this.createZXingFormats(t),c=new Map;c.set(nn.DecodeHintType.POSSIBLE_FORMATS,l),c.set(nn.DecodeHintType.TRY_HARDER,!1),this.hints=c}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(i,l){try{i(n.decode(t))}catch(c){l(c)}})},e.prototype.decode=function(t){var n=new nn.MultiFormatReader(this.verbose,this.hints),i=new nn.HTMLCanvasElementLuminanceSource(t),l=new nn.BinaryBitmap(new nn.HybridBinarizer(i)),c=n.decode(l);return{text:c.text,format:pb.create(this.toHtml5QrcodeSupportedFormats(c.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,l){t.set(n,i)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],i=0,l=t;i<l.length;i++){var c=l[i];this.formatMap.has(c)?n.push(this.formatMap.get(c)):this.logger.logError("".concat(c," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),v5=function(e,t,n,i){function l(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function y(b){try{g(i.next(b))}catch(E){f(E)}}function w(b){try{g(i.throw(b))}catch(E){f(E)}}function g(b){b.done?c(b.value):l(b.value).then(y,w)}g((i=i.apply(e,t||[])).next())})},w5=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,l,c,f;return f={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function y(g){return function(b){return w([g,b])}}function w(g){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,g[0]&&(n=0)),n;)try{if(i=1,l&&(c=g[0]&2?l.return:g[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,g[1])).done)return c;switch(l=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,l=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){n.label=g[1];break}if(g[0]===6&&n.label<c[1]){n.label=c[1],c=g;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(g);break}c[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(b){g=[6,b],l=0}finally{i=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},Jx=function(){function e(t,n,i){if(this.formatMap=new Map([[Fe.QR_CODE,"qr_code"],[Fe.AZTEC,"aztec"],[Fe.CODABAR,"codabar"],[Fe.CODE_39,"code_39"],[Fe.CODE_93,"code_93"],[Fe.CODE_128,"code_128"],[Fe.DATA_MATRIX,"data_matrix"],[Fe.ITF,"itf"],[Fe.EAN_13,"ean_13"],[Fe.EAN_8,"ean_8"],[Fe.PDF_417,"pdf417"],[Fe.UPC_A,"upc_a"],[Fe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var l=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(l),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return v5(this,void 0,void 0,function(){var n,i;return w5(this,function(l){switch(l.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=l.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:pb.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,i=0,l=0,c=t;l<c.length;l++){var f=c[l],y=f.boundingBox.width*f.boundingBox.height;y>i&&(i=y,n=f)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],i=0,l=t;i<l.length;i++){var c=l[i];this.formatMap.has(c)?n.push(this.formatMap.get(c)):this.logger.warn("".concat(c," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,l){t.set(n,i)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),$x=function(e,t,n,i){function l(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function y(b){try{g(i.next(b))}catch(E){f(E)}}function w(b){try{g(i.throw(b))}catch(E){f(E)}}function g(b){b.done?c(b.value):l(b.value).then(y,w)}g((i=i.apply(e,t||[])).next())})},ey=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,l,c,f;return f={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function y(g){return function(b){return w([g,b])}}function w(g){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,g[0]&&(n=0)),n;)try{if(i=1,l&&(c=g[0]&2?l.return:g[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,g[1])).done)return c;switch(l=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,l=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){n.label=g[1];break}if(g[0]===6&&n.label<c[1]){n.label=c[1],c=g;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(g);break}c[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(b){g=[6,b],l=0}finally{i=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},_5=function(){function e(t,n,i,l){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&Jx.isSupported()?(this.primaryDecoder=new Jx(t,i,l),this.secondaryDecoder=new Qx(t,i,l)):this.primaryDecoder=new Qx(t,i,l)}return e.prototype.decodeAsync=function(t){return $x(this,void 0,void 0,function(){var n;return ey(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return $x(this,void 0,void 0,function(){var n,i;return ey(this,function(l){switch(l.label){case 0:n=performance.now(),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,l.sent()];case 3:if(i=l.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,i=this.executionResults;n<i.length;n++){var l=i[n];t+=l}var c=t/this.executionResults.length;console.log("".concat(c," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),Op=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(i[c]=l[c])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Md=function(e,t,n,i){function l(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function y(b){try{g(i.next(b))}catch(E){f(E)}}function w(b){try{g(i.throw(b))}catch(E){f(E)}}function g(b){b.done?c(b.value):l(b.value).then(y,w)}g((i=i.apply(e,t||[])).next())})},kd=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,l,c,f;return f={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function y(g){return function(b){return w([g,b])}}function w(g){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,g[0]&&(n=0)),n;)try{if(i=1,l&&(c=g[0]&2?l.return:g[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,g[1])).done)return c;switch(l=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,l=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){n.label=g[1];break}if(g[0]===6&&n.label<c[1]){n.label=c[1],c=g;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(g);break}c[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(b){g=[6,b],l=0}finally{i=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},yb=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var i={advanced:[n]};return this.track.applyConstraints(i)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e}(),b5=function(e){Op(t,e);function t(n,i){return e.call(this,n,i)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var i={};i[this.name]=n;var l={advanced:[i]};return this.track.applyConstraints(l)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(yb),C5=function(e){Op(t,e);function t(n){return e.call(this,"zoom",n)||this}return t}(b5),S5=function(e){Op(t,e);function t(n){return e.call(this,"torch",n)||this}return t}(yb),E5=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new C5(this.track)},e.prototype.torchFeature=function(){return new S5(this.track)},e}(),A5=function(){function e(t,n,i){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=t.surface.clientWidth,l=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(i,l),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,i,l){return Md(this,void 0,void 0,function(){var c,f;return kd(this,function(y){switch(y.label){case 0:return c=new e(t,n,l),i.aspectRatio?(f={aspectRatio:i.aspectRatio},[4,c.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:y.sent(),y.label=2;case 2:return c.setupSurface(),[2,c]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,i=function(){setTimeout(t,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Md(this,void 0,void 0,function(){return kd(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,i){var l=t.mediaStream.getVideoTracks(),c=l.length,f=0;t.mediaStream.getVideoTracks().forEach(function(y){t.mediaStream.removeTrack(y),y.stop(),++f,f>=c&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new E5(this.getFirstTrackOrFail())},e}(),N5=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,i){return Md(this,void 0,void 0,function(){return kd(this,function(l){return[2,A5.create(t,this.mediaStream,n,i)]})})},e.create=function(t){return Md(this,void 0,void 0,function(){var n,i;return kd(this,function(l){switch(l.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=l.sent(),[2,new e(i)]}})})},e}(),ty=function(e,t,n,i){function l(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function y(b){try{g(i.next(b))}catch(E){f(E)}}function w(b){try{g(i.throw(b))}catch(E){f(E)}}function g(b){b.done?c(b.value):l(b.value).then(y,w)}g((i=i.apply(e,t||[])).next())})},ny=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,l,c,f;return f={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function y(g){return function(b){return w([g,b])}}function w(g){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,g[0]&&(n=0)),n;)try{if(i=1,l&&(c=g[0]&2?l.return:g[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,g[1])).done)return c;switch(l=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,l=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){n.label=g[1];break}if(g[0]===6&&n.label<c[1]){n.label=c[1],c=g;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(g);break}c[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(b){g=[6,b],l=0}finally{i=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},T5=function(){function e(){}return e.failIfNotSupported=function(){return ty(this,void 0,void 0,function(){return ny(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return ty(this,void 0,void 0,function(){return ny(this,function(n){return[2,N5.create(t)]})})},e}(),I5=function(e,t,n,i){function l(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function y(b){try{g(i.next(b))}catch(E){f(E)}}function w(b){try{g(i.throw(b))}catch(E){f(E)}}function g(b){b.done?c(b.value):l(b.value).then(y,w)}g((i=i.apply(e,t||[])).next())})},M5=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,l,c,f;return f={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function y(g){return function(b){return w([g,b])}}function w(g){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,g[0]&&(n=0)),n;)try{if(i=1,l&&(c=g[0]&2?l.return:g[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,g[1])).done)return c;switch(l=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,l=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){n.label=g[1];break}if(g[0]===6&&n.label<c[1]){n.label=c[1],c=g;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(g);break}c[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(b){g=[6,b],l=0}finally{i=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},k5=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Ra.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Ra.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return I5(this,void 0,void 0,function(){var t,n,i,l,c,f,y;return M5(this,function(w){switch(w.label){case 0:return t=function(g){for(var b=g.getVideoTracks(),E=0,T=b;E<T.length;E++){var O=T[E];O.enabled=!1,O.stop(),g.removeTrack(O)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=w.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=w.sent(),l=[],c=0,f=i;c<f.length;c++)y=f[c],y.kind==="videoinput"&&l.push({id:y.deviceId,label:y.label});return t(n),[2,l]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var i=function(c){for(var f=[],y=0,w=c;y<w.length;y++){var g=w[y];g.kind==="video"&&f.push({id:g.id,label:g.label})}t(f)},l=MediaStreamTrack;l.getSources(i)})},e}(),cn;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(cn||(cn={}));var R5=function(){function e(){this.state=cn.NOT_STARTED,this.onGoingTransactionNewState=cn.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===cn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=cn.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===cn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=cn.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==cn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case cn.UNKNOWN:throw"Transition from unknown is not allowed";case cn.NOT_STARTED:this.failIfNewStateIs(t,[cn.PAUSED]);break;case cn.SCANNING:break;case cn.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var i=0,l=n;i<l.length;i++){var c=l[i];if(t===c)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),O5=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===cn.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==cn.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===cn.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===cn.PAUSED},e}(),P5=function(){function e(){}return e.create=function(){return new O5(new R5)},e}(),L5=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(i[c]=l[c])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Mr=function(e){L5(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(wi),D5=function(){function e(t,n){this.logger=n,this.fps=Mr.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Mr.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?xb.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Li(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),ry=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new gb(this.verbose),this.qrcode=new _5(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=P5.create()}return e.prototype.start=function(t,n,i,l){var c=this;if(!t)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;l?f=l:f=this.verbose?this.logger.log:function(){};var y=D5.create(n,this.logger);this.clearElement();var w=!1;y.videoConstraints&&(y.isMediaStreamConstraintsValid()?w=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var g=w,b=document.getElementById(this.elementId);b.clientWidth?b.clientWidth:Mr.DEFAULT_WIDTH,b.style.position="relative",this.shouldScan=!0,this.element=b;var E=this,T=this.stateManagerProxy.startTransition(cn.SCANNING);return new Promise(function(O,D){var P=g?y.videoConstraints:E.createVideoConstraints(t);if(!P){T.cancel(),D("videoConstraints should be defined");return}var V={};(!g||y.aspectRatio)&&(V.aspectRatio=y.aspectRatio);var z={onRenderSurfaceReady:function(R,I){E.setupUi(R,I,y),E.isScanning=!0,E.foreverScan(y,i,f)}};T5.failIfNotSupported().then(function(R){R.create(P).then(function(I){return I.render(c.element,V,z).then(function(Z){E.renderedCamera=Z,T.execute(),O(null)}).catch(function(Z){T.cancel(),D(Z)})}).catch(function(I){T.cancel(),D(Ra.errorGettingUserMedia(I))})}).catch(function(R){T.cancel(),D(Ra.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(cn.PAUSED),this.showPausedState(),(Li(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(cn.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(cn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(t.element){var c=document.getElementById(Mr.SHADED_REGION_ELEMENT_ID);c&&t.element.removeChild(c)}},l=this;return this.renderedCamera.close().then(function(){return l.renderedCamera=null,l.element&&(l.element.removeChild(l.canvasElement),l.canvasElement=null),i(),l.qrRegion&&(l.qrRegion=null),l.context&&(l.context=null),n.execute(),l.hidePausedState(),l.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(i){return i.decodedText})},e.prototype.scanFileV2=function(t,n){var i=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Li(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(l,c){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(t);var f=new Image;f.onload=function(){var y=f.width,w=f.height,g=document.getElementById(i.elementId),b=g.clientWidth?g.clientWidth:Mr.DEFAULT_WIDTH,E=Math.max(g.clientHeight?g.clientHeight:w,Mr.FILE_SCAN_MIN_HEIGHT),T=i.computeCanvasDrawConfig(y,w,b,E);if(n){var O=i.createCanvasElement(b,E,"qr-canvas-visible");O.style.display="inline-block",g.appendChild(O);var D=O.getContext("2d");if(!D)throw"Unable to get 2d context from canvas";D.canvas.width=b,D.canvas.height=E,D.drawImage(f,0,0,y,w,T.x,T.y,T.width,T.height)}var P=Mr.FILE_SCAN_HIDDEN_CANVAS_PADDING,V=Math.max(f.width,T.width),z=Math.max(f.height,T.height),R=V+2*P,I=z+2*P,Z=i.createCanvasElement(R,I);g.appendChild(Z);var Q=Z.getContext("2d");if(!Q)throw"Unable to get 2d context from canvas";Q.canvas.width=R,Q.canvas.height=I,Q.drawImage(f,0,0,y,w,P,P,V,z);try{i.qrcode.decodeRobustlyAsync(Z).then(function(X){l(qx.createFromQrcodeResult(X))}).catch(c)}catch(X){c("QR code parse error, error = ".concat(X))}},f.onerror=c,f.onabort=c,f.onstalled=c,f.onsuspend=c,f.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return k5.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!xb.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[Fe.QR_CODE,Fe.AZTEC,Fe.CODABAR,Fe.CODE_39,Fe.CODE_93,Fe.CODE_128,Fe.DATA_MATRIX,Fe.MAXICODE,Fe.ITF,Fe.EAN_13,Fe.EAN_8,Fe.PDF_417,Fe.RSS_14,Fe.RSS_EXPANDED,Fe.UPC_A,Fe.UPC_E,Fe.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],l=0,c=t.formatsToSupport;l<c.length;l++){var f=c[l];g5(f)?i.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Li(t))return!0;if(!Li(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Li(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return Li(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,i){var l=this,c=i.qrbox;this.validateQrboxConfig(c);var f=this.toQrdimensions(t,n,c),y=function(g){if(g<Mr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Mr.MIN_QR_BOX_SIZE,"px.")},w=function(g){return g>t&&(l.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),g=t),g};y(f.width),y(f.height),f.width=w(f.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(t,n)}catch(l){throw new Error("qrbox config was passed as a function but it failed with unknown error"+l)}return i},e.prototype.setupUi=function(t,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,i);var l=Li(i.qrbox)?{width:t,height:n}:i.qrbox;this.validateQrboxConfig(l);var c=this.toQrdimensions(t,n,l);c.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=i.isShadedBoxEnabled()&&c.height<=n,y={x:0,y:0,width:t,height:n},w=f?this.getShadedRegionBounds(t,n,c):y,g=this.createCanvasElement(w.width,w.height),b={willReadFrequently:!0},E=g.getContext("2d",b);E.canvas.width=w.width,E.canvas.height=w.height,this.element.append(g),f&&this.possiblyInsertShadingElement(this.element,t,n,c),this.createScannerPausedUiElement(this.element),this.qrRegion=w,this.context=E,this.canvasElement=g},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=Ra.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(l){return t(l.text,qx.createFromQrcodeResult(l)),i.possiblyUpdateShaders(!0),!0}).catch(function(l){i.possiblyUpdateShaders(!1);var c=Ra.codeParseError(l);return n(c,mb.createFrom(c)),!1})},e.prototype.foreverScan=function(t,n,i){var l=this;if(this.shouldScan&&this.renderedCamera){var c=this.renderedCamera.getSurface(),f=c.videoWidth/c.clientWidth,y=c.videoHeight/c.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var w=this.qrRegion.width*f,g=this.qrRegion.height*y,b=this.qrRegion.x*f,E=this.qrRegion.y*y;this.context.drawImage(c,b,E,w,g,0,0,this.qrRegion.width,this.qrRegion.height);var T=function(){l.foreverScanTimeout=setTimeout(function(){l.foreverScan(t,n,i)},l.getTimeoutFps(t.fps))};this.scanContext(n,i).then(function(O){!O&&t.disableFlip!==!0?(l.context.translate(l.context.canvas.width,0),l.context.scale(-1,1),l.scanContext(n,i).finally(function(){T()})):T()}).catch(function(O){l.logger.logError("Error happend while scanning context",O),T()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",i="deviceId",l={user:!0,environment:!0},c="exact",f=function(D){if(D in l)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(D,"'")},y=Object.keys(t);if(y.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(y.length," keys");var w=Object.keys(t)[0];if(w!==n&&w!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(w===n){var g=t.facingMode;if(typeof g=="string"){if(f(g))return{facingMode:g}}else if(typeof g=="object")if(c in g){if(f(g["".concat(c)]))return{facingMode:{exact:g["".concat(c)]}}}else throw"'facingMode' should be string or object with"+" ".concat(c," as key.");else{var b=typeof g;throw"Invalid type of 'facingMode' = ".concat(b)}}else{var E=t.deviceId;if(typeof E=="string")return{deviceId:E};if(typeof E=="object"){if(c in E)return{deviceId:{exact:E["".concat(c)]}};throw"'deviceId' should be string or object with"+" ".concat(c," as key.")}else{var T=typeof E;throw"Invalid type of 'deviceId' = ".concat(T)}}}var O=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(O)},e.prototype.computeCanvasDrawConfig=function(t,n,i,l){if(t<=i&&n<=l){var c=(i-t)/2,f=(l-n)/2;return{x:c,y:f,width:t,height:n}}else{var y=t,w=n;return t>i&&(n=i/t*n,t=i),n>l&&(t=l/n*t,n=l),this.logger.log("Image downsampled from "+"".concat(y,"X").concat(w)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,i,l)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Mr.BORDER_SHADER_MATCH_COLOR:Mr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,i){var l=t,c=n,f=document.createElement("canvas");return f.style.width="".concat(l,"px"),f.style.height="".concat(c,"px"),f.style.display="none",f.id=Li(i)?"qr-canvas":i,f},e.prototype.getShadedRegionBounds=function(t,n,i){if(i.width>t||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},e.prototype.possiblyInsertShadingElement=function(t,n,i,l){if(!(n-l.width<1||i-l.height<1)){var c=document.createElement("div");c.style.position="absolute";var f=(n-l.width)/2,y=(i-l.height)/2;if(c.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderTop="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderBottom="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),c.style.boxSizing="border-box",c.style.top="0px",c.style.bottom="0px",c.style.left="0px",c.style.right="0px",c.id="".concat(Mr.SHADED_REGION_ELEMENT_ID),n-l.width<11||i-l.height<11)this.hasBorderShaders=!1;else{var w=5,g=40;this.insertShaderBorders(c,g,w,-w,null,0,!0),this.insertShaderBorders(c,g,w,-w,null,0,!1),this.insertShaderBorders(c,g,w,null,-w,0,!0),this.insertShaderBorders(c,g,w,null,-w,0,!1),this.insertShaderBorders(c,w,g+w,-w,null,-w,!0),this.insertShaderBorders(c,w,g+w,null,-w,-w,!0),this.insertShaderBorders(c,w,g+w,-w,null,-w,!1),this.insertShaderBorders(c,w,g+w,null,-w,-w,!1),this.hasBorderShaders=!0}t.append(c)}},e.prototype.insertShaderBorders=function(t,n,i,l,c,f,y){var w=document.createElement("div");w.style.position="absolute",w.style.backgroundColor=Mr.BORDER_SHADER_DEFAULT_COLOR,w.style.width="".concat(n,"px"),w.style.height="".concat(i,"px"),l!==null&&(w.style.top="".concat(l,"px")),c!==null&&(w.style.bottom="".concat(c,"px")),y?w.style.left="".concat(f,"px"):w.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(w),t.appendChild(w)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),Pp="data:image/svg+xml;base64,",B5=Pp+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",j5=Pp+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",iy=Pp+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",F5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",sy=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),z5=function(){function e(){this.data=sy.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=sy.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),U5=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Kx.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var i=document.createElement("br"),l=document.createElement("br");this.infoDiv.appendChild(i),this.infoDiv.appendChild(l);var c=document.createElement("a");c.innerText=Kx.reportIssues(),c.href="https://github.com/mebjas/html5-qrcode/issues",c.target="new",c.style.color="white",this.infoDiv.appendChild(c),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),V5=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=iy,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(i){return n.onHoverIn()},this.infoIcon.onmouseout=function(i){return n.onHoverOut()},this.infoIcon.onclick=function(i){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=F5,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=iy,this.infoIcon.style.opacity="0.6")},e}(),H5=function(){function e(){var t=this;this.infoDiv=new U5,this.infoIcon=new V5(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}(),W5=function(e,t,n,i){function l(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function y(b){try{g(i.next(b))}catch(E){f(E)}}function w(b){try{g(i.throw(b))}catch(E){f(E)}}function g(b){b.done?c(b.value):l(b.value).then(y,w)}g((i=i.apply(e,t||[])).next())})},Z5=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,l,c,f;return f={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function y(g){return function(b){return w([g,b])}}function w(g){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,g[0]&&(n=0)),n;)try{if(i=1,l&&(c=g[0]&2?l.return:g[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,g[1])).done)return c;switch(l=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,l=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){n.label=g[1];break}if(g[0]===6&&n.label<c[1]){n.label=c[1],c=g;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(g);break}c[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(b){g=[6,b],l=0}finally{i=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},oy=function(){function e(){}return e.hasPermissions=function(){return W5(this,void 0,void 0,function(){var t,n,i,l;return Z5(this,function(c){switch(c.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=c.sent(),n=0,i=t;n<i.length;n++)if(l=i[n],l.kind==="videoinput"&&l.label)return[2,!0];return[2,!1]}})})},e}(),Is=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var i=n[t];if(e.isCameraScanType(i))return!0}return!1},e.isCameraScanType=function(t){return t===so.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===so.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return wi.DEFAULT_SUPPORTED_SCAN_TYPE;var n=wi.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var i=0,l=t;i<l.length;i++){var c=l[i];if(!wi.DEFAULT_SUPPORTED_SCAN_TYPE.includes(c))throw"Unsupported scan type ".concat(c)}return t},e}(),Pr=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),is=function(){function e(){}return e.createElement=function(t,n){var i=document.createElement(t);return i.id=n,i.classList.add(Pr.ALL_ELEMENT_CLASS),t==="button"&&i.setAttribute("type","button"),i},e}(),vb=function(e,t,n,i){function l(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function y(b){try{g(i.next(b))}catch(E){f(E)}}function w(b){try{g(i.throw(b))}catch(E){f(E)}}function g(b){b.done?c(b.value):l(b.value).then(y,w)}g((i=i.apply(e,t||[])).next())})},wb=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,l,c,f;return f={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function y(g){return function(b){return w([g,b])}}function w(g){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,g[0]&&(n=0)),n;)try{if(i=1,l&&(c=g[0]&2?l.return:g[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,g[1])).done)return c;switch(l=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,l=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){n.label=g[1];break}if(g[0]===6&&n.label<c[1]){n.label=c[1],c=g;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(g);break}c[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(b){g=[6,b],l=0}finally{i=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},ay=function(){function e(t,n,i){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=i}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return vb(this,void 0,void 0,function(){var t,n;return wb(this,function(i){switch(i.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return i.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=i.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?Ot.torchOffButton():Ot.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var i=t?Ot.torchOnFailedMessage():Ot.torchOffFailedMessage();n&&(i+="; Error = "+n),this.onTorchActionFailureCallback(i)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),G5=function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=is.createElement("button",Pr.TORCH_BUTTON_ID),this.torchController=new ay(t,this,n)}return e.prototype.render=function(t,n){var i=this;this.torchButton.innerText=Ot.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var l=this;this.torchButton.addEventListener("click",function(c){return vb(i,void 0,void 0,function(){return wb(this,function(f){switch(f.label){case 0:return[4,l.torchController.flipState()];case 1:return f.sent(),l.torchController.isTorchEnabled()?(l.torchButton.classList.remove(Pr.TORCH_BUTTON_CLASS_TORCH_OFF),l.torchButton.classList.add(Pr.TORCH_BUTTON_CLASS_TORCH_ON)):(l.torchButton.classList.remove(Pr.TORCH_BUTTON_CLASS_TORCH_ON),l.torchButton.classList.add(Pr.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new ay(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=Ot.torchOnButton(),this.torchController.reset()},e.create=function(t,n,i,l){var c=new e(n,l);return c.render(t,i),c},e}(),Y5=function(){function e(t,n,i){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var l=document.createElement("label");l.setAttribute("for",this.getFileScanInputId()),l.style.display="inline-block",this.fileBasedScanRegion.appendChild(l),this.fileSelectionButton=is.createElement("button",Pr.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(y){l.click()}),l.append(this.fileSelectionButton),this.fileScanInput=is.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",l.appendChild(this.fileScanInput);var c=this;this.fileScanInput.addEventListener("change",function(y){if(!(y==null||y.target==null)){var w=y.target;if(!(w.files&&w.files.length===0)){var g=w.files,b=g[0],E=b.name;c.setImageNameToButton(E),i(b)}}});var f=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(f),this.fileBasedScanRegion.addEventListener("dragenter",function(y){c.fileBasedScanRegion.style.border=c.fileBasedScanRegionActiveBorder(),y.stopPropagation(),y.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(y){c.fileBasedScanRegion.style.border=c.fileBasedScanRegionDefaultBorder(),y.stopPropagation(),y.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(y){c.fileBasedScanRegion.style.border=c.fileBasedScanRegionActiveBorder(),y.stopPropagation(),y.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(y){y.stopPropagation(),y.preventDefault(),c.fileBasedScanRegion.style.border=c.fileBasedScanRegionDefaultBorder();var w=y.dataTransfer;if(w){var g=w.files;if(!g||g.length===0)return;for(var b=!1,E=0;E<g.length;++E){var T=g.item(E);if(T){var O=/image.*/;if(T.type.match(O)){b=!0;var D=T.name;c.setImageNameToButton(D),i(T),f.innerText=Ot.dragAndDropMessage();break}}}b||(f.innerText=Ot.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=Ot.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var n=20;if(t.length>n){var i=t.substring(0,8),l=t.length,c=t.substring(l-8,l);t="".concat(i,"....").concat(c)}var f=Ot.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=f},e.prototype.setInitialValueToButton=function(){var t=Ot.fileSelectionChooseImage()+" - "+Ot.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,i){var l=new e(t,n,i);return l},e}(),X5=function(){function e(t){this.selectElement=is.createElement("select",Pr.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var i=this.cameras.length;if(i===0)throw new Error("No cameras found");if(i===1)n.style.display="none";else{var l=Ot.selectCamera();n.innerText="".concat(l," (").concat(this.cameras.length,")  ")}for(var c=1,f=0,y=this.cameras;f<y.length;f++){var w=y[f],g=w.id,b=w.label==null?g:w.label;(!b||b==="")&&(b=[Ot.anonymousCameraPrefix(),c++].join(" "));var E=document.createElement("option");E.value=g,E.innerText=b,this.options.push(E),this.selectElement.appendChild(E)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,i=this.options;n<i.length;n++){var l=i[n];if(l.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var i=new e(n);return i.render(t),i},e}(),q5=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=is.createElement("input",Pr.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var i=Ot.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(i),this.rangeText.style.marginRight="10px";var l=this;this.rangeInput.addEventListener("input",function(){return l.onValueChange()}),this.rangeInput.addEventListener("change",function(){return l.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=Ot.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,i,l){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=l.toString(),this.rangeInput.value=i.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var i=new e;return i.render(t,n),i},e}(),kr;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(kr||(kr={}));function K5(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function Q5(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var J5=function(){function e(t,n,i){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=i===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new Is(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new gb(this.verbose),this.persistedDataManager=new z5,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var i=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(c,f){if(t)t(c,f);else{if(i.lastMatchFound===c)return;i.lastMatchFound=c,i.setHeaderMessage(Ot.lastMatch(c),kr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(c,f){n&&n(c,f)};var l=document.getElementById(this.elementId);if(!l)throw"HTML Element with id=".concat(this.elementId," not found");l.innerHTML="",this.createBasicLayout(l),this.html5Qrcode=new ry(this.getScanRegionId(),Q5(this.config,this.verbose))},e.prototype.pause=function(t){(Li(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var i=document.getElementById(t.elementId);i&&(i.innerHTML="",t.resetBasicLayout(i))};return this.html5Qrcode?new Promise(function(i,l){if(!t.html5Qrcode){i();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(c){if(!t.html5Qrcode){i();return}t.html5Qrcode.clear(),n(),i()}).catch(function(c){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",c),l(c)}):(t.html5Qrcode.clear(),n(),i())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=wi.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!wi.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=wi.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=wi.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:wi.SCAN_DEFAULT_FPS,rememberLastUsedCamera:wi.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:wi.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),i=this.getScanRegionId();n.id=i,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),Is.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var l=document.createElement("div"),c=this.getDashboardId();l.id=c,l.style.width="100%",t.appendChild(l),this.setupInitialDashboard(l)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n);var i=new H5;i.renderInto(n);var l=document.createElement("div");l.id=this.getHeaderMessageContainerId(),l.style.display="none",l.style.textAlign="center",l.style.fontSize="14px",l.style.padding="2px 10px",l.style.margin="4px",l.style.borderTop="1px solid #f6f6f6",n.appendChild(l)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,i){var l=this;l.showHideScanTypeSwapLink(!1),l.setHeaderMessage(Ot.cameraPermissionRequesting());var c=function(){i||l.createPermissionButton(t,n)};ry.getCameras().then(function(f){l.persistedDataManager.setHasPermission(!0),l.showHideScanTypeSwapLink(!0),l.resetHeaderMessage(),f&&f.length>0?(t.removeChild(n),l.renderCameraSelection(f)):(l.setHeaderMessage(Ot.noCameraFound(),kr.STATUS_WARNING),c())}).catch(function(f){l.persistedDataManager.setHasPermission(!1),i?i.disabled=!1:c(),l.setHeaderMessage(f,kr.STATUS_WARNING),l.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var i=this,l=is.createElement("button",this.getCameraPermissionButtonId());l.innerText=Ot.cameraPermissionTitle(),l.addEventListener("click",function(){l.disabled=!0,i.createCameraListUi(t,n,l)}),n.appendChild(l)},e.prototype.createPermissionsUi=function(t,n){var i=this;if(Is.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){oy.hasPermissions().then(function(l){l?i.createCameraListUi(t,n):(i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,n))}).catch(function(l){i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,n)});return}this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var i=document.createElement("div");i.id=this.getDashboardSectionCameraScanRegionId(),i.style.display=Is.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(i);var l=document.createElement("div");l.style.textAlign="center",i.appendChild(l),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(i,l),this.renderFileScanUi(n)},e.prototype.renderFileScanUi=function(t){var n=Is.isFileScanType(this.currentScanType),i=this,l=function(c){if(!i.html5Qrcode)throw"html5Qrcode not defined";Is.isFileScanType(i.currentScanType)&&(i.setHeaderMessage(Ot.loadingImage()),i.html5Qrcode.scanFileV2(c,!0).then(function(f){i.resetHeaderMessage(),i.qrCodeSuccessCallback(f.decodedText,f)}).catch(function(f){i.setHeaderMessage(f,kr.STATUS_WARNING),i.qrCodeErrorCallback(f,mb.createFrom(f))}))};this.fileSelectionUi=Y5.create(t,n,l)},e.prototype.renderCameraSelection=function(t){var n=this,i=this,l=document.getElementById(this.getDashboardSectionCameraScanRegionId());l.style.textAlign="center";var c=q5.create(l,!1),f=function(P){var V=P.zoomFeature();if(V.isSupported()){c.setOnCameraZoomValueChangeCallback(function(R){V.apply(R)});var z=1;n.config.defaultZoomValueIfSupported&&(z=n.config.defaultZoomValueIfSupported),z=x5(z,V.min(),V.max()),c.setValues(V.min(),V.max(),z,V.step()),c.show()}},y=X5.create(l,t),w=document.createElement("span"),g=is.createElement("button",Pr.CAMERA_START_BUTTON_ID);g.innerText=Ot.scanButtonStartScanningText(),w.appendChild(g);var b=is.createElement("button",Pr.CAMERA_STOP_BUTTON_ID);b.innerText=Ot.scanButtonStopScanningText(),b.style.display="none",b.disabled=!0,w.appendChild(b);var E,T=function(P){if(!P.torchFeature().isSupported()){E&&E.hide();return}E?E.updateTorchCapability(P.torchFeature()):E=G5.create(w,P.torchFeature(),{display:"none",marginLeft:"5px"},function(V){i.setHeaderMessage(V,kr.STATUS_WARNING)}),E.show()};l.appendChild(w);var O=function(P){P||(g.style.display="none"),g.innerText=Ot.scanButtonStartScanningText(),g.style.opacity="1",g.disabled=!1,P&&(g.style.display="inline-block")};if(g.addEventListener("click",function(P){g.innerText=Ot.scanButtonScanningStarting(),y.disable(),g.disabled=!0,g.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!1),i.resetHeaderMessage();var V=y.getValue();i.persistedDataManager.setLastUsedCameraId(V),i.html5Qrcode.start(V,K5(i.config),i.qrCodeSuccessCallback,i.qrCodeErrorCallback).then(function(z){b.disabled=!1,b.style.display="inline-block",O(!1);var R=i.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&T(R),n.config.showZoomSliderIfSupported===!0&&f(R)}).catch(function(z){i.showHideScanTypeSwapLink(!0),y.enable(),O(!0),i.setHeaderMessage(z,kr.STATUS_WARNING)})}),y.hasSingleItem()&&g.click(),b.addEventListener("click",function(P){if(!i.html5Qrcode)throw"html5Qrcode not defined";b.disabled=!0,i.html5Qrcode.stop().then(function(V){n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!0),y.enable(),g.disabled=!1,b.style.display="none",g.style.display="inline-block",E&&(E.reset(),E.hide()),c.removeOnCameraZoomValueChangeCallback(),c.hide(),i.insertCameraScanImageToScanRegion()}).catch(function(V){b.disabled=!1,i.setHeaderMessage(V,kr.STATUS_WARNING)})}),i.persistedDataManager.getLastUsedCameraId()){var D=i.persistedDataManager.getLastUsedCameraId();y.hasValue(D)?(y.setValue(D),g.click()):i.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=Ot.textIfCameraScanSelected(),i=Ot.textIfFileScanSelected(),l=document.getElementById(this.getDashboardSectionId()),c=document.createElement("div");c.style.textAlign="center";var f=is.createElement("span",this.getDashboardSectionSwapLinkId());f.style.textDecoration="underline",f.style.cursor="pointer",f.innerText=Is.isCameraScanType(this.currentScanType)?n:i,f.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,Is.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),f.innerText=i,t.currentScanType=so.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),f.innerText=n,t.currentScanType=so.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),c.appendChild(f),l.appendChild(c)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){oy.hasPermissions().then(function(i){if(i){var l=document.getElementById(n.getCameraPermissionButtonId());if(!l)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";l.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(i){n.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=kr.STATUS_DEFAULT);var i=this.getHeaderMessageDiv();switch(i.innerText=t,i.style.display="block",n){case kr.STATUS_SUCCESS:i.style.background="rgba(106, 175, 80, 0.26)",i.style.color="#477735";break;case kr.STATUS_WARNING:i.style.background="rgba(203, 36, 49, 0.14)",i.style.color="#cb2431";break;case kr.STATUS_DEFAULT:default:i.style.background="rgba(0, 0, 0, 0)",i.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=B5,this.cameraScanImage.alt=Ot.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=j5,this.fileScanImage.alt=Ot.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return Pr.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return Pr.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();function $5({onScan:e,onClose:t}){const[n,i]=F.useState(""),[l,c]=F.useState("camera");F.useEffect(()=>{if(l==="camera"){const y=new J5("reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1});return y.render(w=>{y.clear(),e(w)},w=>{}),()=>{y.clear()}}},[l,e]);const f=y=>{y.preventDefault(),n.trim()&&e(n.trim())};return x.jsxs("div",{className:"fixed inset-0 bg-black/90 z-50 flex flex-col pt-safe",children:[x.jsxs("div",{className:"flex justify-between items-center p-4 text-white",children:[x.jsx("h2",{className:"text-lg font-bold",children:"Scan AWB Barcode"}),x.jsx("button",{onClick:t,className:"p-2",children:x.jsx(Sp,{})})]}),x.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:l==="camera"?x.jsx("div",{id:"reader",className:"w-full max-w-sm rounded-xl overflow-hidden bg-gray-800 border-2 border-primary-500"}):x.jsxs("form",{onSubmit:f,className:"w-full max-w-sm space-y-4",children:[x.jsx("input",{autoFocus:!0,className:"w-full p-4 rounded-xl bg-gray-800 text-white border border-gray-700 outline-none focus:border-primary-500 text-center text-2xl tracking-widest",placeholder:"ENTER AWB #",value:n,onChange:y=>i(y.target.value.toUpperCase())}),x.jsx("button",{className:"w-full py-4 bg-primary-600 text-white rounded-xl font-bold",children:"Submit Manually"})]})}),x.jsxs("div",{className:"p-8 flex justify-center gap-4",children:[x.jsxs("button",{onClick:()=>c("camera"),className:`p-4 rounded-full flex items-center gap-2 ${l==="camera"?"bg-primary-600 text-white":"bg-gray-800 text-gray-400"}`,children:[x.jsx(nI,{size:24})," ",x.jsx("span",{children:"Camera"})]}),x.jsxs("button",{onClick:()=>c("manual"),className:`p-4 rounded-full flex items-center gap-2 ${l==="manual"?"bg-primary-600 text-white":"bg-gray-800 text-gray-400"}`,children:[x.jsx(cI,{size:24})," ",x.jsx("span",{children:"Manual"})]})]})]})}function il(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function eM(e,t){let n;const i=()=>{if(n)return n;const l=indexedDB.open(e);return l.onupgradeneeded=()=>l.result.createObjectStore(t),n=il(l),n.then(c=>{c.onclose=()=>n=void 0},()=>{}),n};return(l,c)=>i().then(f=>c(f.transaction(t,l).objectStore(t)))}let bf;function ph(){return bf||(bf=eM("keyval-store","keyval")),bf}function tM(e,t=ph()){return t("readonly",n=>il(n.get(e)))}function _b(e,t,n=ph()){return n("readwrite",i=>(i.put(t,e),il(i.transaction)))}function nM(e,t=ph()){return t("readwrite",n=>(n.delete(e),il(n.transaction)))}function rM(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},il(e.transaction)}function bb(e=ph()){return e("readonly",t=>{if(t.getAllKeys)return il(t.getAllKeys());const n=[];return rM(t,i=>n.push(i.key)).then(()=>n)})}const Lp=async(e,t,n={})=>{const i=`${e}-${t}-${Date.now()}`,l={id:i,awb:e,event_id:t,payload:n,timestamp:new Date().toISOString(),status:"pending"};return await _b(`queue-${i}`,l),l},Dp=async()=>{const t=(await bb()).filter(i=>i.startsWith("queue-"));return(await Promise.all(t.map(i=>tM(i)))).sort((i,l)=>new Date(l.timestamp)-new Date(i.timestamp))},Cb=async e=>{const n=(await Dp()).filter(i=>i.status==="pending");for(const i of n)try{await fh(e,{awb:i.awb,event_id:i.event_id,timestamp:i.timestamp,payload:i.payload}),i.status="synced",await _b(`queue-${i.id}`,i)}catch(l){console.error("Sync failed for item",i.id,l)}},iM=async()=>{const e=await bb(),t=(Array.isArray(e)?e:[]).filter(n=>String(n).startsWith("queue-"));return await Promise.all(t.map(n=>nM(n))),t.length},sM=Object.freeze(Object.defineProperty({__proto__:null,clearQueue:iM,getQueue:Dp,queueItem:Lp,syncQueue:Cb},Symbol.toStringTag,{value:"Module"}));function oM({awb:e,onBack:t,onComplete:n}){const[i,l]=F.useState([]),[c,f]=F.useState(null),[y,w]=F.useState(!0),[g,b]=F.useState(!1),[E,T]=F.useState("");F.useEffect(()=>{(async()=>{try{const P=localStorage.getItem("token"),V=await cb(P);l(V)}catch{T("Failed to load status options")}finally{w(!1)}})()},[]);const O=async()=>{if(c){b(!0);try{const D=localStorage.getItem("token");await fh(D,{awb:e,event_id:c,timestamp:new Date().toISOString()}),n("SUCCESS")}catch{await Lp(e,c),n("QUEUED")}finally{b(!1)}}};return x.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[x.jsxs("div",{className:"p-4 flex items-center gap-4 bg-white dark:bg-gray-800 shadow-sm",children:[x.jsx("button",{onClick:t,className:"p-2 -ml-2 text-gray-600",children:x.jsx(qo,{})}),x.jsxs("div",{children:[x.jsx("h1",{className:"font-bold text-gray-900 dark:text-white",children:"Update AWB"}),x.jsx("p",{className:"text-xs text-primary-600 font-mono tracking-wider",children:e})]})]}),x.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:y?x.jsx("div",{className:"flex justify-center p-8",children:x.jsx(Br,{className:"animate-spin text-primary-500"})}):E?x.jsxs("div",{className:"p-4 bg-red-100 text-red-700 rounded-xl flex items-center gap-3",children:[x.jsx(u_,{size:20})," ",E]}):i.map(D=>x.jsxs("button",{onClick:()=>f(D.event_id),className:`w-full p-4 rounded-2xl text-left border-2 transition-all ${c===D.event_id?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-white dark:border-gray-800 bg-white dark:bg-gray-800"}`,children:[x.jsxs("div",{className:"flex justify-between items-center mb-1",children:[x.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:D.label}),c===D.event_id&&x.jsx(f_,{className:"text-primary-500",size:20})]}),x.jsx("p",{className:"text-sm text-gray-500",children:D.description})]},D.event_id))}),x.jsx("div",{className:"p-4 bg-white dark:bg-gray-800 shadow-up",children:x.jsx("button",{disabled:!c||g,onClick:O,className:"w-full py-4 bg-primary-600 disabled:opacity-50 text-white rounded-xl font-bold flex items-center justify-center gap-2",children:g?x.jsx(Br,{className:"animate-spin"}):"Confirm Status Update"})})]})}function ly(){const[e,t]=F.useState(!1),[n,i]=F.useState(null),[l,c]=F.useState(null),[f,y]=F.useState(""),w=ci(),{user:g}=Vr();F.useEffect(()=>{const Z=localStorage.getItem("token");Z&&Cb(Z);const Q=new Date().getHours();Q<12?y("Good Morning"):Q<18?y("Good Afternoon"):y("Good Evening")},[]);const b=Z=>{i(Z),t(!1)},E=Z=>{c({awb:n,outcome:Z}),i(null),setTimeout(()=>c(null),3e3)};if(n)return x.jsx(oM,{awb:n,onBack:()=>i(null),onComplete:E});const T=zn(g,ko),O=zn(g,gr),D=zn(g,Uo),P=zn(g,yi),V=zn(g,ti),z=String((g==null?void 0:g.role)||"")==="Recipient",R={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},I={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return x.jsxs(qe.div,{initial:"hidden",animate:"visible",exit:{opacity:0,y:-20},variants:R,className:"flex flex-col min-h-screen relative overflow-hidden",children:[x.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-violet-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"0s"}}),x.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"3s"}}),x.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-glow-md animate-float",children:x.jsx("span",{className:"text-white font-black italic tracking-tighter text-xl",children:"AN"})}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-lg font-black text-gradient leading-none",children:"AryNik"}),x.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[x.jsxs("span",{className:"relative flex h-2 w-2",children:[x.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),x.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]}),x.jsx("span",{className:"text-[10px] font-bold text-emerald-400 uppercase tracking-widest",children:"Online"})]})]})]}),x.jsx("button",{type:"button",onClick:()=>w("/settings"),className:"w-10 h-10 rounded-full glass-light flex items-center justify-center border border-white/10 hover:bg-white/10 transition-colors","aria-label":"Account",title:"Account",children:x.jsx(ra,{size:18,className:"text-violet-300"})})]}),x.jsxs("main",{className:"flex-1 p-6 space-y-8 pb-32 relative z-10",children:[x.jsxs(qe.div,{variants:I,children:[x.jsx("h2",{className:"text-3xl font-black text-white mb-1",children:f}),x.jsxs("p",{className:"text-slate-400 font-medium",children:[(g==null?void 0:g.name)||(g==null?void 0:g.username)||"Driver","  ",z?"Recipient Tracking":g!=null&&g.truck_plate?`Truck ${String(g.truck_plate).toUpperCase()}`:"Truck Unassigned"]}),!z&&(g!=null&&g.truck_phone)?x.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-1",children:["Truck phone: ",g.truck_phone]}):null,z?x.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-1",children:["Login: ",(g==null?void 0:g.username)||"--"]}):null]}),P?x.jsx(qe.div,{variants:I,children:x.jsx(m5,{})}):null,l&&x.jsxs(qe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`p-4 rounded-2xl flex items-center gap-4 shadow-lg ${l.outcome==="SUCCESS"?"bg-gradient-to-r from-emerald-500 to-emerald-600 shadow-emerald-500/20":"bg-gradient-to-r from-violet-500 to-purple-600 shadow-violet-500/20"}`,children:[x.jsx("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-sm",children:x.jsx(Wu,{size:20,className:"text-white"})}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("span",{className:"font-black text-sm uppercase tracking-wide text-white",children:["Update ",l.outcome==="SUCCESS"?"Confirmed":"Queued"]}),x.jsx("p",{className:"text-xs font-bold text-white/80",children:l.awb})]})]}),x.jsxs(qe.div,{variants:I,className:"space-y-4",children:[x.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Quick Actions"}),T?x.jsxs(qe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(!0),className:"w-full py-12 bg-gradient-to-br from-violet-600 via-purple-600 to-violet-700 rounded-[32px] shadow-glow-lg flex flex-col items-center justify-center text-white space-y-5 relative overflow-hidden group",children:[x.jsx("div",{className:"absolute inset-0 shimmer opacity-30"}),x.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16"}),x.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-white/10 rounded-full blur-3xl -ml-12 -mb-12"}),x.jsx("div",{className:"p-6 bg-white/10 rounded-3xl backdrop-blur-sm border border-white/20 group-hover:scale-110 group-hover:rotate-3 transition-all duration-500 shadow-inner-glow",children:x.jsx(pI,{size:52,strokeWidth:1.5,className:"animate-glow"})}),x.jsxs("div",{className:"text-center relative z-10",children:[x.jsx("h2",{className:"text-2xl font-black uppercase tracking-tight",children:"Scan Package"}),x.jsxs("p",{className:"text-violet-100 text-xs font-bold opacity-90 uppercase tracking-widest mt-1 flex items-center justify-center gap-2",children:[x.jsx(b_,{size:12}),"Tap to open scanner"]})]})]}):x.jsxs(qe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>w("/shipments"),className:"w-full py-10 bg-gradient-to-br from-emerald-600 via-emerald-700 to-emerald-800 rounded-[32px] shadow-glow-lg flex flex-col items-center justify-center text-white space-y-4 relative overflow-hidden group",disabled:!O,children:[x.jsx("div",{className:"absolute inset-0 shimmer opacity-25"}),x.jsx("div",{className:"p-5 bg-white/10 rounded-3xl backdrop-blur-sm border border-white/20 group-hover:scale-110 group-hover:-rotate-2 transition-all duration-500 shadow-inner-glow",children:x.jsx(Xa,{size:44,strokeWidth:1.5})}),x.jsxs("div",{className:"text-center relative z-10",children:[x.jsx("h2",{className:"text-xl font-black uppercase tracking-tight",children:"Browse Shipments"}),x.jsxs("p",{className:"text-emerald-100 text-xs font-bold opacity-90 uppercase tracking-widest mt-1 flex items-center justify-center gap-2",children:[x.jsx(Td,{size:12}),"View tracking list"]})]})]}),O&&x.jsxs(qe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>w("/shipments"),className:"w-full p-5 glass-strong rounded-[28px] shadow-lg flex items-center gap-4 text-left group border-iridescent",children:[x.jsx("div",{className:"p-4 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-[20px] group-hover:shadow-glow-sm transition-all duration-300",children:x.jsx(Xa,{size:24,className:"text-white"})}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("h3",{className:"font-black text-white uppercase text-sm tracking-tight flex items-center gap-2",children:["Search Shipments",x.jsx("span",{className:"text-[8px] bg-emerald-500/20 text-emerald-400 px-2 py-0.5 rounded-full font-bold",children:"LIVE"})]}),x.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-0.5 flex items-center gap-1",children:[x.jsx(Td,{size:10}),"Real-time tracking"]})]}),x.jsx("div",{className:"w-10 h-10 rounded-full glass-light flex items-center justify-center group-hover:translate-x-1 transition-transform border border-white/10",children:x.jsx(Js,{className:"text-slate-400",size:18})})]}),V&&x.jsxs(qe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>w("/notifications"),className:"w-full p-5 glass-strong rounded-[28px] shadow-lg flex items-center gap-4 text-left group border-iridescent",children:[x.jsx("div",{className:"p-4 bg-gradient-to-br from-amber-500 to-orange-600 rounded-[20px] group-hover:shadow-glow-sm transition-all duration-300",children:x.jsx(Nc,{size:24,className:"text-white"})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("h3",{className:"font-black text-white uppercase text-sm tracking-tight",children:"Notifications"}),x.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-0.5",children:"Allocation updates"})]}),x.jsx("div",{className:"w-10 h-10 rounded-full glass-light flex items-center justify-center group-hover:translate-x-1 transition-transform border border-white/10",children:x.jsx(Js,{className:"text-slate-400",size:18})})]}),D&&x.jsxs(qe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>w("/users"),className:"w-full p-5 glass-strong rounded-[28px] shadow-lg flex items-center gap-4 text-left group border-iridescent",children:[x.jsx("div",{className:"p-4 bg-gradient-to-br from-violet-500 to-purple-600 rounded-[20px] group-hover:shadow-glow-sm transition-all duration-300",children:x.jsx(F0,{size:24,className:"text-white"})}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("h3",{className:"font-black text-white uppercase text-sm tracking-tight flex items-center gap-2",children:["Manage Users",x.jsx("span",{className:"text-[8px] bg-violet-500/20 text-violet-300 px-2 py-0.5 rounded-full font-bold",children:"RBAC"})]}),x.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-0.5",children:"Create accounts and set roles"})]}),x.jsx("div",{className:"w-10 h-10 rounded-full glass-light flex items-center justify-center group-hover:translate-x-1 transition-transform border border-white/10",children:x.jsx(Js,{className:"text-slate-400",size:18})})]})]})]}),e&&x.jsx($5,{onScan:b,onClose:()=>t(!1)})]})}const aM="modulepreload",lM=function(e){return"/arynik1/"+e},cy={},Sb=function(t,n,i){let l=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),y=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));l=Promise.allSettled(n.map(w=>{if(w=lM(w),w in cy)return;cy[w]=!0;const g=w.endsWith(".css"),b=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${w}"]${b}`))return;const E=document.createElement("link");if(E.rel=g?"stylesheet":aM,g||(E.as="script"),E.crossOrigin="",E.href=w,y&&E.setAttribute("nonce",y),document.head.appendChild(E),g)return new Promise((T,O)=>{E.addEventListener("load",T),E.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${w}`)))})}))}function c(f){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=f,window.dispatchEvent(y),!y.defaultPrevented)throw f}return l.then(f=>{for(const y of f||[])y.status==="rejected"&&c(y.reason);return t().catch(c)})};function cM(){const[e,t]=F.useState(""),[n,i]=F.useState(""),[l,c]=F.useState(!1),[f,y]=F.useState(""),{login:w}=Vr(),g=ci(),b=async E=>{var T,O;E.preventDefault(),y(""),c(!0);try{const{login:D}=await Sb(async()=>{const{login:V}=await Promise.resolve().then(()=>c5);return{login:V}},void 0),P=await D(e,n);if(P&&P.access_token)await w(P.access_token,P.role),g("/");else throw new Error("Invalid response from server")}catch(D){console.error("Login error:",D),y(((O=(T=D.response)==null?void 0:T.data)==null?void 0:O.detail)||D.message||"Invalid credentials. Please try again.")}finally{c(!1)}};return x.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center p-4",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-600/20 via-purple-600/10 to-pink-600/20 animate-pulse-slow"}),x.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-blue-600/10 via-transparent to-emerald-600/10"}),[...Array(20)].map((E,T)=>x.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*8}s`,animationDuration:`${8+Math.random()*4}s`}},T)),x.jsx("div",{className:"absolute top-10 left-20 w-72 h-72 bg-violet-500/30 rounded-full blur-3xl animate-float",style:{animationDelay:"0s"}}),x.jsx("div",{className:"absolute bottom-20 right-10 w-80 h-80 bg-pink-500/20 rounded-full blur-3xl animate-float",style:{animationDelay:"4s"}}),x.jsx("div",{className:"absolute top-40 right-40 w-60 h-60 bg-blue-500/20 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),x.jsxs("div",{className:"relative z-10 w-full max-w-md animate-scale-in",children:[x.jsxs("div",{className:"text-center mb-8 animate-slide-down",children:[x.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-violet-500 to-purple-600 rounded-3xl shadow-glow-md mb-4 animate-float",children:x.jsx(w_,{className:"w-10 h-10 text-white"})}),x.jsx("h1",{className:"text-4xl font-black text-gradient mb-2 tracking-tight",children:"AryNik Driver"}),x.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Welcome back, let's get started"})]}),x.jsxs("form",{onSubmit:b,className:"glass-strong rounded-3xl p-8 border-iridescent space-y-6 relative overflow-hidden",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"}),x.jsxs("div",{className:"relative",children:[x.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[x.jsx(ra,{size:14,className:"text-violet-400"}),"Username"]}),x.jsx("input",{type:"text",value:e,onChange:E=>t(E.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-violet-500/50 focus:ring-2 focus:ring-violet-500/20 transition-all duration-300",placeholder:"Enter your username",required:!0,autoFocus:!0})]}),x.jsxs("div",{className:"relative",children:[x.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[x.jsx(g_,{size:14,className:"text-violet-400"}),"Password"]}),x.jsx("input",{type:"password",value:n,onChange:E=>i(E.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-violet-500/50 focus:ring-2 focus:ring-violet-500/20 transition-all duration-300",placeholder:"Enter your password",required:!0})]}),f&&x.jsx("div",{className:"bg-rose-500/10 border border-rose-500/30 text-rose-400 px-4 py-3 rounded-xl text-sm font-medium animate-slide-down",children:f}),x.jsx("button",{type:"submit",disabled:l,className:"btn-premium w-full py-4 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-glow-md hover:shadow-glow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 text-sm uppercase tracking-wider magnetic",children:l?x.jsxs(x.Fragment,{children:[x.jsx(Br,{className:"animate-spin",size:20}),"Authenticating..."]}):x.jsxs(x.Fragment,{children:[x.jsx(uI,{size:20}),"Login to Dashboard"]})}),x.jsxs("p",{className:"text-center text-xs text-slate-500 mt-4",children:["Demo: ",x.jsx("span",{className:"text-violet-400 font-mono",children:"demo / demo"})]}),x.jsx("button",{type:"button",onClick:()=>g("/signup"),className:"w-full py-3 rounded-xl bg-emerald-500/10 border border-emerald-500/20 text-emerald-200 font-black uppercase tracking-wider text-xs hover:bg-emerald-500/15 transition-all",children:"Recipient: Create tracking account"})]}),x.jsx("p",{className:"text-center text-xs text-slate-600 mt-6",children:"Secure driver authentication  AryNik  2026"})]})]})}function uM(){const e=ci(),{login:t}=Vr(),[n,i]=F.useState(""),[l,c]=F.useState(""),[f,y]=F.useState(""),[w,g]=F.useState(""),[b,E]=F.useState(!1),[T,O]=F.useState(""),D=async P=>{var V,z;P.preventDefault(),O(""),E(!0);try{const R=await rb({awb:String(n||"").trim(),phone:String(l||"").trim(),password:String(f||""),name:String(w||"").trim()||void 0});if(R!=null&&R.access_token)await t(R.access_token,R.role),e("/shipments",{replace:!0});else throw new Error("Invalid response from server")}catch(R){O(((z=(V=R==null?void 0:R.response)==null?void 0:V.data)==null?void 0:z.detail)||(R==null?void 0:R.message)||"Failed to create account")}finally{E(!1)}};return x.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center p-4",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-600/15 via-slate-950 to-violet-600/10"}),x.jsx("div",{className:"absolute top-10 left-10 w-72 h-72 bg-emerald-500/20 rounded-full blur-3xl animate-float"}),x.jsx("div",{className:"absolute bottom-20 right-10 w-80 h-80 bg-violet-500/15 rounded-full blur-3xl animate-float",style:{animationDelay:"3s"}}),x.jsxs("div",{className:"relative z-10 w-full max-w-md",children:[x.jsxs("button",{type:"button",onClick:()=>e("/login"),className:"mb-4 inline-flex items-center gap-2 text-slate-300 hover:text-white text-xs font-black uppercase tracking-widest",children:[x.jsx(qo,{size:16}),"Back to login"]}),x.jsxs("div",{className:"glass-strong rounded-3xl p-8 border-iridescent space-y-6 relative overflow-hidden",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-emerald-500 to-emerald-700 rounded-3xl shadow-glow-md mb-4",children:x.jsx(Ax,{className:"w-8 h-8 text-white"})}),x.jsx("h1",{className:"text-2xl font-black text-white tracking-tight",children:"Track Your Delivery"}),x.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider mt-2",children:"Create an account using your AWB"})]}),x.jsxs("form",{onSubmit:D,className:"space-y-4 relative",children:[x.jsxs("div",{children:[x.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[x.jsx(Ax,{size:14,className:"text-emerald-400"}),"AWB"]}),x.jsx("input",{value:n,onChange:P=>i(P.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 font-mono",placeholder:"e.g. AWB1234567",required:!0,autoFocus:!0})]}),x.jsxs("div",{children:[x.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[x.jsx(Nd,{size:14,className:"text-emerald-400"}),"WhatsApp Number"]}),x.jsx("input",{value:l,onChange:P=>c(P.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300",placeholder:"+40 712 345 678",required:!0})]}),x.jsxs("div",{children:[x.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[x.jsx(g_,{size:14,className:"text-emerald-400"}),"Password"]}),x.jsx("input",{type:"password",value:f,onChange:P=>y(P.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300",placeholder:"Choose a password",required:!0})]}),x.jsxs("div",{children:[x.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[x.jsx(ra,{size:14,className:"text-emerald-400"}),"Name (Optional)"]}),x.jsx("input",{value:w,onChange:P=>g(P.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300",placeholder:"Your name"})]}),T&&x.jsx("div",{className:"bg-rose-500/10 border border-rose-500/30 text-rose-400 px-4 py-3 rounded-xl text-sm font-medium",children:T}),x.jsx("button",{type:"submit",disabled:b,className:"btn-premium w-full py-4 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white font-bold rounded-xl shadow-glow-md hover:shadow-glow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 text-sm uppercase tracking-wider",children:b?x.jsxs(x.Fragment,{children:[x.jsx(Br,{className:"animate-spin",size:20}),"Creating..."]}):"Create Account"})]}),x.jsx("p",{className:"text-center text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:"Already have an account? Use your phone number as username on the login screen."})]})]})]})}function dM(){const[e,t]=F.useState([]),[n,i]=F.useState(!0),[l,c]=F.useState(!1),[f,y]=F.useState("delivered"),w=ci(),g=async(I=!1)=>{I?c(!0):i(!0);try{const Z=await Dp();let Q=[];try{const ee=localStorage.getItem("token");Q=(await kp(ee,{limit:2e3})).map(re=>({...re,id:re.id,status:"synced",label:re.event_id}))}catch{console.log("Could not fetch server logs, showing local only")}let X=new Map;try{const ee=localStorage.getItem("token"),U=await Hc(ee);(Array.isArray(U)?U:[]).forEach(re=>{const me=String((re==null?void 0:re.awb)||"").toUpperCase();me&&X.set(me,re)})}catch{}const G=[...Z,...Q].sort((ee,U)=>new Date(U.timestamp)-new Date(ee.timestamp));t(G.map(ee=>{const U=String((ee==null?void 0:ee.awb)||"").toUpperCase(),re=X.get(U),me=(re==null?void 0:re.raw_data)||{},le=(me==null?void 0:me.client)||(me==null?void 0:me.clientData)||{},Ie=(me==null?void 0:me.senderLocation)||{},je=String((re==null?void 0:re.sender_shop_name)||(le==null?void 0:le.name)||(le==null?void 0:le.clientName)||(Ie==null?void 0:Ie.name)||(Ie==null?void 0:Ie.shopName)||"").trim()||null;return{...ee,payment_amount:(re==null?void 0:re.payment_amount)??(re==null?void 0:re.shipping_cost)??(re==null?void 0:re.estimated_shipping_cost)??null,currency:(re==null?void 0:re.currency)||"RON",client_name:je}}))}finally{i(!1),c(!1)}};F.useEffect(()=>{g()},[]);const b=I=>I==="synced"?{bg:"bg-emerald-500/20",text:"text-emerald-400",border:"border-emerald-500/30",icon:Wu,label:"Synced"}:{bg:"bg-violet-500/20",text:"text-violet-400",border:"border-violet-500/30",icon:Eu,label:"Pending"},E=e.filter(I=>I.status==="synced").length,T=e.filter(I=>I.status!=="synced").length,O=e.filter(I=>I.status==="synced"&&String(I.event_id||"")==="2"),D=O.length,P=O.reduce((I,Z)=>{const Q=Number(Z==null?void 0:Z.payment_amount);return Number.isFinite(Q)?I+Q:I},0),V=f==="delivered"?e.filter(I=>String(I.event_id||"")==="2"):e,z={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},R={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0}};return x.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[x.jsx("div",{className:"absolute top-20 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),x.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),x.jsxs("div",{className:"px-4 py-4 flex items-center justify-between glass-strong sticky top-0 z-30 backdrop-blur-xl border-b border-white/10 animate-slide-down",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("button",{onClick:()=>w(-1),className:"p-2 -ml-2 rounded-xl glass-light text-slate-300 hover:text-white transition-colors border border-white/10",children:x.jsx(qo,{size:20})}),x.jsxs("div",{children:[x.jsx("h1",{className:"font-black text-lg text-gradient tracking-tight",children:"Update History"}),x.jsx("p",{className:"text-xs text-slate-500 font-medium mt-0.5",children:"Recent activity timeline"})]})]}),x.jsx("button",{onClick:()=>g(!0),className:`p-2.5 rounded-xl glass-light hover:bg-violet-500/20 text-violet-400 transition-all border border-white/10 ${l?"animate-spin":""}`,children:x.jsx(io,{size:20})})]}),x.jsxs("div",{className:"p-4 space-y-3 relative z-10",children:[x.jsxs("div",{className:"flex glass-strong p-1 rounded-xl border border-white/10 w-fit",children:[x.jsx("button",{onClick:()=>y("delivered"),className:`px-3 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${f==="delivered"?"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:"Delivered"}),x.jsx("button",{onClick:()=>y("all"),className:`px-3 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${f==="all"?"bg-gradient-to-r from-violet-600 to-purple-600 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:"All"})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsxs(qe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"glass-strong p-4 rounded-2xl border-iridescent",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:x.jsx(Wu,{size:14,className:"text-emerald-400"})}),x.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Synced"})]}),x.jsx("p",{className:"text-2xl font-black text-gradient-blue",children:E})]}),x.jsxs(qe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},className:"glass-strong p-4 rounded-2xl border-iridescent",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx("div",{className:"p-2 bg-violet-500/20 rounded-lg",children:x.jsx(Eu,{size:14,className:"text-violet-400"})}),x.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Pending"})]}),x.jsx("p",{className:"text-2xl font-black text-gradient-purple",children:T})]}),x.jsxs(qe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"glass-strong p-4 rounded-2xl border-iridescent",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:x.jsx(Wu,{size:14,className:"text-emerald-400"})}),x.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Delivered"})]}),x.jsx("p",{className:"text-2xl font-black text-gradient-blue",children:D})]}),x.jsxs(qe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"glass-strong p-4 rounded-2xl border-iridescent",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx("div",{className:"p-2 bg-amber-500/20 rounded-lg",children:x.jsx(iI,{size:14,className:"text-amber-400"})}),x.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Pay (RON)"})]}),x.jsx("p",{className:"text-2xl font-black text-gradient-purple",children:P.toFixed(2)})]})]})]}),x.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-32 relative z-10",children:n?x.jsxs("div",{className:"text-center py-20",children:[x.jsxs("div",{className:"relative inline-block",children:[x.jsx("div",{className:"absolute inset-0 bg-violet-500/20 blur-xl rounded-full animate-pulse"}),x.jsx(ps,{className:"animate-spin relative z-10 text-violet-400 mx-auto",size:48})]}),x.jsx("p",{className:"mt-6 text-sm font-bold text-slate-500 uppercase tracking-wide",children:"Loading history..."})]}):V.length===0?x.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20 text-slate-400",children:[x.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:x.jsx(Eu,{className:"text-slate-500",size:36})}),x.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No recent updates"}),x.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Your activity will appear here"})]}):x.jsx(qe.div,{variants:z,initial:"hidden",animate:"visible",className:"space-y-3 py-2",children:V.map((I,Z)=>{const Q=b(I.status),X=Q.icon,G=Number(I==null?void 0:I.payment_amount);return x.jsxs(qe.div,{variants:R,className:"glass-strong p-5 rounded-2xl border border-white/10 relative overflow-hidden group hover:border-violet-500/30 transition-all",children:[Z<e.length-1&&x.jsx("div",{className:"absolute left-11 top-full w-0.5 h-3 bg-gradient-to-b from-white/10 to-transparent"}),x.jsxs("div",{className:"flex gap-4",children:[x.jsx("div",{className:`flex-shrink-0 w-12 h-12 ${Q.bg} rounded-2xl flex items-center justify-center border ${Q.border}`,children:x.jsx(X,{size:20,className:Q.text,strokeWidth:2.5})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("div",{className:"flex justify-between items-start mb-2",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-xs font-mono text-slate-500 tracking-wider",children:I.awb}),x.jsx("h3",{className:"font-bold text-white mt-1",children:I.event_id||I.label}),I.client_name&&x.jsx("p",{className:"text-[10px] text-slate-400 font-bold mt-1 truncate",children:I.client_name})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[Number.isFinite(G)&&x.jsxs("span",{className:"text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border bg-amber-500/15 text-amber-300 border-amber-500/20",children:[G.toFixed(2)," ",String((I==null?void 0:I.currency)||"RON").toUpperCase()]}),x.jsx("span",{className:`text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border ${Q.bg} ${Q.text} ${Q.border}`,children:Q.label})]})]}),x.jsxs("p",{className:"text-[10px] text-slate-400 font-medium flex items-center gap-1.5",children:[x.jsx(Eu,{size:10}),new Date(I.timestamp).toLocaleString()]}),I.error_message&&x.jsxs("div",{className:"mt-3 px-3 py-2 bg-red-500/10 border border-red-500/20 rounded-xl flex items-start gap-2",children:[x.jsx(u_,{size:14,className:"text-red-400 mt-0.5 flex-shrink-0"}),x.jsx("p",{className:"text-xs text-red-400 font-medium",children:I.error_message})]})]})]})]},Z)})})})]})}const Eb="arynik_warehouse_origin_v1",uy=e=>{const t=Number(e);return!Number.isFinite(t)||Math.abs(t)<1e-4?null:t},pa={lat:uy(void 0)??46.5667,lon:uy(void 0)??26.9167,label:"Warehouse (Bacau)"},hM=e=>{try{return localStorage.getItem(e)}catch{return null}},fM=(e,t)=>{try{return localStorage.setItem(e,t),!0}catch{return!1}},Ab=(e,t)=>Number.isFinite(Number(e))&&Number.isFinite(Number(t))&&Math.abs(Number(e))>1e-4&&Math.abs(Number(t))>1e-4,Rd=()=>{if(typeof window>"u")return pa;const e=hM(Eb);if(!e)return pa;try{const t=JSON.parse(e),n=Number(t==null?void 0:t.lat),i=Number(t==null?void 0:t.lon);return Ab(n,i)?{lat:n,lon:i,label:String((t==null?void 0:t.label)||pa.label||"Warehouse")}:pa}catch{return pa}},pM=({lat:e,lon:t,label:n}={})=>{const i=Number(e),l=Number(t);return Ab(i,l)?fM(Eb,JSON.stringify({lat:i,lon:l,label:String(n||pa.label||"Warehouse"),ts:Date.now()})):!1};function mM(){const{user:e,logout:t}=Vr(),n=ci(),[i,l]=F.useState(_n()),[c,f]=F.useState(()=>{const G=Rd();return{label:String((G==null?void 0:G.label)||""),lat:String((G==null?void 0:G.lat)??""),lon:String((G==null?void 0:G.lon)??"")}}),[y,w]=F.useState(""),[g,b]=F.useState(!1),[E,T]=F.useState(""),O=zn(e,Uo),D=()=>{t(),n("/login",{replace:!0})},P=()=>{nb(i),window.location.reload()},V=()=>{const G=pM({label:c.label,lat:c.lat,lon:c.lon});w(G?"Warehouse origin saved.":"Invalid warehouse coordinates."),setTimeout(()=>w(""),2500)},z=async()=>{var me;if(!window.confirm(`Clear cached data on this device?

This removes:
- Offline queue (pending updates)
- Local route allocations
- Geocode cache
- Service worker caches

You will stay signed in.`))return;b(!0),T("");let ee=0,U=0;try{const{clearQueue:le}=await Sb(async()=>{const{clearQueue:Ie}=await Promise.resolve().then(()=>sM);return{clearQueue:Ie}},void 0);ee=await le()}catch{}if(["arynik_geocode_cache_v1","arynik_routes_v1","arynik_demo_logs_v1","arynik_demo_shipments_v1","arynik_last_vehicle_plate_v1","arynik_warehouse_origin_v1"].forEach(le=>{try{localStorage.removeItem(le)}catch{}}),typeof window<"u"&&"caches"in window)try{const le=await caches.keys();await Promise.all(le.map(Ie=>caches.delete(Ie))),U=le.length}catch{}if((me=navigator==null?void 0:navigator.serviceWorker)!=null&&me.getRegistrations)try{const le=await navigator.serviceWorker.getRegistrations();await Promise.all(le.map(Ie=>Ie.unregister()))}catch{}T(`Cleared ${U} cache(s) and ${ee} queued update(s). Reloading...`),setTimeout(()=>{window.location.reload()},600)},R=[{title:"Preferences",items:[{icon:Nc,label:"Notifications",value:"Enabled",color:"violet"},{icon:oI,label:"Language",value:"English",color:"emerald"},{icon:fI,label:"Dark Mode",value:"Auto",color:"amber"}]},{title:"Account",items:[{icon:xI,label:"Security",value:null,color:"violet"},...O?[{icon:__,label:"Manage Users",value:null,color:"emerald",onClick:()=>n("/users")}]:[],{icon:bp,label:"Clear Cache",value:g?"Working":null,color:"slate",onClick:()=>{g||z()}},{icon:lI,label:"App Info",value:"v1.0.0",color:"slate"}]}],I=G=>{const ee={violet:"bg-violet-500/20",emerald:"bg-emerald-500/20",amber:"bg-amber-500/20",slate:"bg-slate-500/20"};return ee[G]||ee.slate},Z=G=>{const ee={violet:"text-violet-400",emerald:"text-emerald-400",amber:"text-amber-400",slate:"text-slate-400"};return ee[G]||ee.slate},Q={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},X={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return x.jsxs(qe.div,{initial:"hidden",animate:"visible",exit:{opacity:0,y:-20},variants:Q,className:"min-h-screen flex flex-col relative overflow-hidden",children:[x.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-violet-500/10 rounded-full blur-3xl animate-float"}),x.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),x.jsxs("div",{className:"relative overflow-hidden",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-600 via-purple-600 to-violet-700"}),x.jsx("div",{className:"absolute inset-0 shimmer opacity-20"}),x.jsxs("header",{className:"relative z-10 px-6 pt-6 pb-4",children:[x.jsx("h1",{className:"text-xl font-black text-white uppercase tracking-tight mb-1",children:"Settings"}),x.jsx("p",{className:"text-sm text-violet-100 font-medium",children:"Manage your preferences"})]}),x.jsxs("div",{className:"relative z-10 px-8 pb-8 flex flex-col items-center",children:[x.jsx(qe.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:15},className:"w-28 h-28 bg-gradient-to-br from-white/20 to-white/10 backdrop-blur-xl rounded-[32px] shadow-2xl flex items-center justify-center text-white mb-5 border-4 border-white/30 animate-float",children:x.jsx(ra,{size:56,strokeWidth:1.5})}),x.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight mb-2",children:(e==null?void 0:e.username)||"Driver"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-[10px] font-black bg-white/20 backdrop-blur-sm text-white px-3 py-1.5 rounded-full uppercase tracking-widest border border-white/30",children:(e==null?void 0:e.role)||"Carrier"}),x.jsxs("span",{className:"text-[10px] font-bold text-violet-200 uppercase tracking-widest",children:["ID: ",(e==null?void 0:e.driver_id)||"N/A"]})]})]})]}),x.jsxs("div",{className:"flex-1 p-4 space-y-6 pb-32 relative z-10 -mt-6",children:[x.jsxs(qe.div,{variants:X,className:"space-y-3",children:[x.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Connection"}),x.jsxs("div",{className:"glass-strong rounded-2xl overflow-hidden border-iridescent p-4 space-y-3",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"API Base URL"}),x.jsx("input",{value:i,onChange:G=>l(G.target.value),placeholder:"https://YOUR-BACKEND",className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-violet-500/50 focus:ring-2 focus:ring-violet-500/20 transition-all duration-300 text-sm font-medium"}),x.jsxs("p",{className:"text-[10px] text-slate-500 font-medium leading-relaxed",children:["Tip: on GitHub Pages (HTTPS), your backend must be HTTPS. You can also set via URL: ",x.jsx("span",{className:"font-mono text-slate-400",children:"?api=https://YOUR-BACKEND"})]}),x.jsx("button",{onClick:P,className:"w-full btn-premium py-3 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white rounded-xl font-bold shadow-lg hover:shadow-glow-md transition-all text-sm uppercase tracking-wider",children:"Apply API URL"})]})]}),x.jsxs(qe.div,{variants:X,className:"space-y-3",children:[x.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Warehouse"}),x.jsxs("div",{className:"glass-strong rounded-2xl overflow-hidden border-iridescent p-4 space-y-3",children:[x.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Routing Origin (Used For KM/Routes)"}),x.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[x.jsx("input",{value:c.label,onChange:G=>f(ee=>({...ee,label:G.target.value})),placeholder:"Warehouse (Bacau)",className:"col-span-3 px-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium"}),x.jsx("input",{value:c.lat,onChange:G=>f(ee=>({...ee,lat:G.target.value})),placeholder:"Latitude",className:"px-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium font-mono"}),x.jsx("input",{value:c.lon,onChange:G=>f(ee=>({...ee,lon:G.target.value})),placeholder:"Longitude",className:"px-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium font-mono"}),x.jsx("button",{onClick:V,className:"btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white rounded-xl font-bold shadow-lg hover:shadow-glow-md transition-all text-sm uppercase tracking-wider",children:"Save Warehouse"})]}),y&&x.jsx("div",{className:"glass-light p-3 rounded-xl border border-emerald-500/20 text-emerald-200 text-xs font-bold",children:y}),x.jsx("p",{className:"text-[10px] text-slate-500 font-medium leading-relaxed",children:"Driver GPS is still shown on the map, but routing always starts from this warehouse origin."})]})]}),R.map((G,ee)=>x.jsxs(qe.div,{variants:X,className:"space-y-3",children:[x.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:G.title}),x.jsx("div",{className:"glass-strong rounded-2xl overflow-hidden border-iridescent",children:G.items.map((U,re)=>{const me=U.icon;return x.jsxs("button",{type:"button",onClick:()=>U.onClick&&U.onClick(),disabled:g&&U.label==="Clear Cache",className:`w-full p-4 flex items-center gap-4 hover:bg-white/5 transition-all group ${re<G.items.length-1?"border-b border-white/5":""}`,children:[x.jsx("div",{className:`p-3 ${I(U.color)} rounded-xl group-hover:scale-110 transition-transform`,children:g&&U.label==="Clear Cache"?x.jsx(Br,{className:"animate-spin text-slate-400",size:20,strokeWidth:2}):x.jsx(me,{className:Z(U.color),size:20,strokeWidth:2})}),x.jsx("span",{className:"flex-1 text-left font-bold text-white",children:U.label}),U.value&&x.jsx("span",{className:"text-xs text-slate-400 font-medium",children:U.value}),x.jsx(Js,{className:"text-slate-500 group-hover:text-violet-400 group-hover:translate-x-1 transition-all",size:18})]},re)})})]},ee)),E&&x.jsx(qe.div,{variants:X,className:"glass-strong p-4 rounded-2xl border border-emerald-500/20 text-emerald-200 text-xs font-bold",children:E}),x.jsxs(qe.div,{variants:X,className:"glass-strong p-5 rounded-2xl border-iridescent relative overflow-hidden group",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/10 to-amber-600/5 opacity-0 group-hover:opacity-100 transition-opacity"}),x.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[x.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl shadow-glow-sm",children:x.jsx(w_,{size:24,className:"text-white"})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("h3",{className:"font-black text-white text-sm",children:"Premium Features"}),x.jsx("p",{className:"text-[10px] text-slate-400 font-medium mt-1",children:"Unlock advanced analytics & insights"})]}),x.jsx(Js,{className:"text-amber-400",size:20})]})]}),x.jsxs(qe.button,{variants:X,onClick:D,whileTap:{scale:.98},className:"w-full btn-premium py-4 bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-400 hover:to-rose-500 text-white rounded-2xl font-bold flex items-center justify-center gap-2 shadow-lg hover:shadow-glow-md transition-all",children:[x.jsx(x_,{size:20,strokeWidth:2.5}),"Sign Out"]})]}),x.jsxs(qe.div,{variants:X,className:"p-6 text-center relative z-10",children:[x.jsx("p",{className:"text-[10px] text-slate-500 font-medium",children:"Powered by Postis Bridge"}),x.jsx("p",{className:"text-[9px] text-slate-600 font-medium mt-1",children:" 2025 AryNik Driver App"})]})]})}const Nb="arynik_geocode_cache_v1",gM=1100;let dy=0,hy=Promise.resolve(),Ms=null,q0=!1,Cf=null;const Nu=new Map,fy=5e3,xM=250,yM=e=>{try{return localStorage.getItem(e)}catch{return null}},vM=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},wM=e=>new Promise(t=>setTimeout(t,e)),Bp=()=>{if(Ms)return Ms;const e=yM(Nb);if(!e)return Ms={},Ms;try{const t=JSON.parse(e);return Ms=t&&typeof t=="object"?t:{},Ms}catch{return Ms={},Ms}},_M=e=>{const t=Object.entries(e||{});if(t.length<=fy)return;t.sort((i,l)=>{var c,f;return Number(((c=i==null?void 0:i[1])==null?void 0:c.ts)||0)-Number(((f=l==null?void 0:l[1])==null?void 0:f.ts)||0)});const n=t.length-fy;for(let i=0;i<n;i+=1)delete e[t[i][0]]},bM=()=>{Cf||(Cf=setTimeout(()=>{if(Cf=null,!q0)return;q0=!1;const e=Bp();try{_M(e),vM(Nb,JSON.stringify(e||{}))}catch{}},xM))},py=(e,t)=>{const n=Bp();n[e]=t,q0=!0,bM()},CM=e=>{const t=Bp(),n=t?t[e]:null;return n&&typeof n=="object"?n:null},Od=e=>{const t=String(e||"").trim();if(!t)return null;const n=CM(t);if(!n)return null;if(n.lat===null&&n.lon===null)return{lat:null,lon:null,display_name:n.display_name||t,ts:n.ts||0};const i=Number(n.lat),l=Number(n.lon);return!Number.isFinite(i)||!Number.isFinite(l)?null:{...n,lat:i,lon:l}},SM=(e,{timeoutMs:t=15e3}={})=>new Promise((n,i)=>{const l=`__arynik_jsonp_${Date.now()}_${Math.floor(Math.random()*1e5)}`,c=document.createElement("script"),f=setTimeout(()=>{y(),i(new Error("Geocode timeout"))},t),y=()=>{clearTimeout(f);try{delete window[l]}catch{window[l]=void 0}c&&c.parentNode&&c.parentNode.removeChild(c)};window[l]=w=>{y(),n(w)},c.onerror=()=>{y(),i(new Error("Geocode network error"))},c.async=!0,c.src=`${e}${e.includes("?")?"&":"?"}json_callback=${encodeURIComponent(l)}`,document.body.appendChild(c)}),EM=e=>{const t=async()=>{const i=gM-(Date.now()-dy);return i>0&&await wM(i),dy=Date.now(),e()},n=hy.then(t,t);return hy=n.catch(()=>{}),n},K0=async e=>{const t=String(e||"").trim();if(!t)return null;const n=Od(t);if(n){if(Number.isFinite(n.lat)&&Number.isFinite(n.lon))return n;if(n.lat===null&&n.lon===null)return null}if(Nu.has(t))return Nu.get(t);const i=(async()=>{const c=`https://nominatim.openstreetmap.org/search?format=json&limit=1&q=${encodeURIComponent(t)}`;try{const f=await EM(()=>SM(c)),y=Array.isArray(f)?f[0]:null,w=y?Number(y.lat):NaN,g=y?Number(y.lon):NaN;if(!Number.isFinite(w)||!Number.isFinite(g))return py(t,{lat:null,lon:null,display_name:t,ts:Date.now()}),null;const b={lat:w,lon:g,display_name:y.display_name||t,ts:Date.now()};return py(t,b),b}catch(f){return console.warn("Geocode failed",f),null}})();Nu.set(t,i);try{return await i}finally{Nu.delete(t)}},Tb="https://router.project-osrm.org/route/v1/driving";async function AM(e,t){if(!e||!t)return null;try{const n=`${Tb}/${e.lon},${e.lat};${t.lon},${t.lat}?overview=full&geometries=geojson`,i=await lt.get(n);return i.data.code==="Ok"&&i.data.routes.length>0?i.data.routes[0].geometry:null}catch(n){return console.error("Error fetching route:",n),null}}async function NM(e){const t=Array.isArray(e)?e.filter(Boolean):[];if(t.length<2)return null;const n=t.map(i=>`${i.lon},${i.lat}`).join(";");try{const i=`${Tb}/${n}?overview=full&geometries=geojson&steps=false`,l=await lt.get(i);if(l.data.code==="Ok"&&l.data.routes.length>0){const c=l.data.routes[0]||{};return{geometry:c.geometry||null,distance_m:Number.isFinite(Number(c.distance))?Number(c.distance):0,duration_s:Number.isFinite(Number(c.duration))?Number(c.duration):0}}return null}catch(i){return console.error("Error fetching multi-route:",i),null}}const Ke=e=>{const t=Number(e);return Number.isFinite(t)&&Math.abs(t)>1e-4},Sf=e=>String(e||"").trim().replace(/[_-]+/g," ").replace(/\\s+/g," ").trim(),rc=e=>{var c,f,y,w,g,b;const t=Sf(e==null?void 0:e.delivery_address),n=Sf((e==null?void 0:e.locality)||((f=(c=e==null?void 0:e.raw_data)==null?void 0:c.recipientLocation)==null?void 0:f.locality)),i=Sf((e==null?void 0:e.county)||((w=(y=e==null?void 0:e.raw_data)==null?void 0:y.recipientLocation)==null?void 0:w.county)||((b=(g=e==null?void 0:e.raw_data)==null?void 0:g.recipientLocation)==null?void 0:b.countyName)),l=[];return t&&l.push(t),n&&!t.toLowerCase().includes(n.toLowerCase())&&l.push(n),i&&!l.some(E=>E.toLowerCase().includes(i.toLowerCase()))&&l.push(i),l.push("Romania"),l.filter(Boolean).join(", ")};function Ib(e,t){const n=F.useRef(t);F.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}const TM=1;function IM(e){return Object.freeze({__version:TM,map:e})}function Mb(e,t){return Object.freeze({...e,...t})}const kb=F.createContext(null),Rb=kb.Provider;function mh(){const e=F.useContext(kb);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function Ob(e){function t(n,i){const{instance:l,context:c}=e(n).current;return F.useImperativeHandle(i,()=>l),n.children==null?null:Ho.createElement(Rb,{value:c},n.children)}return F.forwardRef(t)}function MM(e){function t(n,i){const[l,c]=F.useState(!1),{instance:f}=e(n,c).current;F.useImperativeHandle(i,()=>f),F.useEffect(function(){l&&f.update()},[f,l,n.children]);const y=f._contentNode;return y?kv.createPortal(n.children,y):null}return F.forwardRef(t)}function kM(e){function t(n,i){const{instance:l}=e(n).current;return F.useImperativeHandle(i,()=>l),null}return F.forwardRef(t)}function jp(e,t){const n=F.useRef();F.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function gh(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function RM(e,t){return function(i,l){const c=mh(),f=e(gh(i,c),c);return Ib(c.map,i.attribution),jp(f.current,i.eventHandlers),t(f.current,c,i,l),f}}var Q0={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,i){i(t)})(fa,function(n){var i="1.9.4";function l(o){var h,v,S,N;for(v=1,S=arguments.length;v<S;v++){N=arguments[v];for(h in N)o[h]=N[h]}return o}var c=Object.create||function(){function o(){}return function(h){return o.prototype=h,new o}}();function f(o,h){var v=Array.prototype.slice;if(o.bind)return o.bind.apply(o,v.call(arguments,1));var S=v.call(arguments,2);return function(){return o.apply(h,S.length?S.concat(v.call(arguments)):arguments)}}var y=0;function w(o){return"_leaflet_id"in o||(o._leaflet_id=++y),o._leaflet_id}function g(o,h,v){var S,N,j,q;return q=function(){S=!1,N&&(j.apply(v,N),N=!1)},j=function(){S?N=arguments:(o.apply(v,arguments),setTimeout(q,h),S=!0)},j}function b(o,h,v){var S=h[1],N=h[0],j=S-N;return o===S&&v?o:((o-N)%j+j)%j+N}function E(){return!1}function T(o,h){if(h===!1)return o;var v=Math.pow(10,h===void 0?6:h);return Math.round(o*v)/v}function O(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function D(o){return O(o).split(/\s+/)}function P(o,h){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?c(o.options):{});for(var v in h)o.options[v]=h[v];return o.options}function V(o,h,v){var S=[];for(var N in o)S.push(encodeURIComponent(v?N.toUpperCase():N)+"="+encodeURIComponent(o[N]));return(!h||h.indexOf("?")===-1?"?":"&")+S.join("&")}var z=/\{ *([\w_ -]+) *\}/g;function R(o,h){return o.replace(z,function(v,S){var N=h[S];if(N===void 0)throw new Error("No value provided for variable "+v);return typeof N=="function"&&(N=N(h)),N})}var I=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function Z(o,h){for(var v=0;v<o.length;v++)if(o[v]===h)return v;return-1}var Q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function X(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var G=0;function ee(o){var h=+new Date,v=Math.max(0,16-(h-G));return G=h+v,window.setTimeout(o,v)}var U=window.requestAnimationFrame||X("RequestAnimationFrame")||ee,re=window.cancelAnimationFrame||X("CancelAnimationFrame")||X("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function me(o,h,v){if(v&&U===ee)o.call(h);else return U.call(window,f(o,h))}function le(o){o&&re.call(window,o)}var Ie={__proto__:null,extend:l,create:c,bind:f,get lastId(){return y},stamp:w,throttle:g,wrapNum:b,falseFn:E,formatNum:T,trim:O,splitWords:D,setOptions:P,getParamString:V,template:R,isArray:I,indexOf:Z,emptyImageUrl:Q,requestFn:U,cancelFn:re,requestAnimFrame:me,cancelAnimFrame:le};function je(){}je.extend=function(o){var h=function(){P(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},v=h.__super__=this.prototype,S=c(v);S.constructor=h,h.prototype=S;for(var N in this)Object.prototype.hasOwnProperty.call(this,N)&&N!=="prototype"&&N!=="__super__"&&(h[N]=this[N]);return o.statics&&l(h,o.statics),o.includes&&(ue(o.includes),l.apply(null,[S].concat(o.includes))),l(S,o),delete S.statics,delete S.includes,S.options&&(S.options=v.options?c(v.options):{},l(S.options,o.options)),S._initHooks=[],S.callInitHooks=function(){if(!this._initHooksCalled){v.callInitHooks&&v.callInitHooks.call(this),this._initHooksCalled=!0;for(var j=0,q=S._initHooks.length;j<q;j++)S._initHooks[j].call(this)}},h},je.include=function(o){var h=this.prototype.options;return l(this.prototype,o),o.options&&(this.prototype.options=h,this.mergeOptions(o.options)),this},je.mergeOptions=function(o){return l(this.prototype.options,o),this},je.addInitHook=function(o){var h=Array.prototype.slice.call(arguments,1),v=typeof o=="function"?o:function(){this[o].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(v),this};function ue(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=I(o)?o:[o];for(var h=0;h<o.length;h++)o[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Me={on:function(o,h,v){if(typeof o=="object")for(var S in o)this._on(S,o[S],h);else{o=D(o);for(var N=0,j=o.length;N<j;N++)this._on(o[N],h,v)}return this},off:function(o,h,v){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var S in o)this._off(S,o[S],h);else{o=D(o);for(var N=arguments.length===1,j=0,q=o.length;j<q;j++)N?this._off(o[j]):this._off(o[j],h,v)}return this},_on:function(o,h,v,S){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(o,h,v)===!1){v===this&&(v=void 0);var N={fn:h,ctx:v};S&&(N.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(N)}},_off:function(o,h,v){var S,N,j;if(this._events&&(S=this._events[o],!!S)){if(arguments.length===1){if(this._firingCount)for(N=0,j=S.length;N<j;N++)S[N].fn=E;delete this._events[o];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var q=this._listens(o,h,v);if(q!==!1){var ae=S[q];this._firingCount&&(ae.fn=E,this._events[o]=S=S.slice()),S.splice(q,1)}}},fire:function(o,h,v){if(!this.listens(o,v))return this;var S=l({},h,{type:o,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var N=this._events[o];if(N){this._firingCount=this._firingCount+1||1;for(var j=0,q=N.length;j<q;j++){var ae=N[j],he=ae.fn;ae.once&&this.off(o,he,ae.ctx),he.call(ae.ctx||this,S)}this._firingCount--}}return v&&this._propagateEvent(S),this},listens:function(o,h,v,S){typeof o!="string"&&console.warn('"string" type argument expected');var N=h;typeof h!="function"&&(S=!!h,N=void 0,v=void 0);var j=this._events&&this._events[o];if(j&&j.length&&this._listens(o,N,v)!==!1)return!0;if(S){for(var q in this._eventParents)if(this._eventParents[q].listens(o,h,v,S))return!0}return!1},_listens:function(o,h,v){if(!this._events)return!1;var S=this._events[o]||[];if(!h)return!!S.length;v===this&&(v=void 0);for(var N=0,j=S.length;N<j;N++)if(S[N].fn===h&&S[N].ctx===v)return N;return!1},once:function(o,h,v){if(typeof o=="object")for(var S in o)this._on(S,o[S],h,!0);else{o=D(o);for(var N=0,j=o.length;N<j;N++)this._on(o[N],h,v,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[w(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[w(o)],this},_propagateEvent:function(o){for(var h in this._eventParents)this._eventParents[h].fire(o.type,l({layer:o.target,propagatedFrom:o.target},o),!0)}};Me.addEventListener=Me.on,Me.removeEventListener=Me.clearAllEventListeners=Me.off,Me.addOneTimeEventListener=Me.once,Me.fireEvent=Me.fire,Me.hasEventListeners=Me.listens;var Oe=je.extend(Me);function Y(o,h,v){this.x=v?Math.round(o):o,this.y=v?Math.round(h):h}var ve=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};Y.prototype={clone:function(){return new Y(this.x,this.y)},add:function(o){return this.clone()._add(oe(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(oe(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new Y(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new Y(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ve(this.x),this.y=ve(this.y),this},distanceTo:function(o){o=oe(o);var h=o.x-this.x,v=o.y-this.y;return Math.sqrt(h*h+v*v)},equals:function(o){return o=oe(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=oe(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function oe(o,h,v){return o instanceof Y?o:I(o)?new Y(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new Y(o.x,o.y):new Y(o,h,v)}function be(o,h){if(o)for(var v=h?[o,h]:o,S=0,N=v.length;S<N;S++)this.extend(v[S])}be.prototype={extend:function(o){var h,v;if(!o)return this;if(o instanceof Y||typeof o[0]=="number"||"x"in o)h=v=oe(o);else if(o=Pe(o),h=o.min,v=o.max,!h||!v)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=v.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(v.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(v.y,this.max.y)),this},getCenter:function(o){return oe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return oe(this.min.x,this.max.y)},getTopRight:function(){return oe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var h,v;return typeof o[0]=="number"||o instanceof Y?o=oe(o):o=Pe(o),o instanceof be?(h=o.min,v=o.max):h=v=o,h.x>=this.min.x&&v.x<=this.max.x&&h.y>=this.min.y&&v.y<=this.max.y},intersects:function(o){o=Pe(o);var h=this.min,v=this.max,S=o.min,N=o.max,j=N.x>=h.x&&S.x<=v.x,q=N.y>=h.y&&S.y<=v.y;return j&&q},overlaps:function(o){o=Pe(o);var h=this.min,v=this.max,S=o.min,N=o.max,j=N.x>h.x&&S.x<v.x,q=N.y>h.y&&S.y<v.y;return j&&q},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var h=this.min,v=this.max,S=Math.abs(h.x-v.x)*o,N=Math.abs(h.y-v.y)*o;return Pe(oe(h.x-S,h.y-N),oe(v.x+S,v.y+N))},equals:function(o){return o?(o=Pe(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function Pe(o,h){return!o||o instanceof be?o:new be(o,h)}function ot(o,h){if(o)for(var v=h?[o,h]:o,S=0,N=v.length;S<N;S++)this.extend(v[S])}ot.prototype={extend:function(o){var h=this._southWest,v=this._northEast,S,N;if(o instanceof nt)S=o,N=o;else if(o instanceof ot){if(S=o._southWest,N=o._northEast,!S||!N)return this}else return o?this.extend(ge(o)||Ze(o)):this;return!h&&!v?(this._southWest=new nt(S.lat,S.lng),this._northEast=new nt(N.lat,N.lng)):(h.lat=Math.min(S.lat,h.lat),h.lng=Math.min(S.lng,h.lng),v.lat=Math.max(N.lat,v.lat),v.lng=Math.max(N.lng,v.lng)),this},pad:function(o){var h=this._southWest,v=this._northEast,S=Math.abs(h.lat-v.lat)*o,N=Math.abs(h.lng-v.lng)*o;return new ot(new nt(h.lat-S,h.lng-N),new nt(v.lat+S,v.lng+N))},getCenter:function(){return new nt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new nt(this.getNorth(),this.getWest())},getSouthEast:function(){return new nt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof nt||"lat"in o?o=ge(o):o=Ze(o);var h=this._southWest,v=this._northEast,S,N;return o instanceof ot?(S=o.getSouthWest(),N=o.getNorthEast()):S=N=o,S.lat>=h.lat&&N.lat<=v.lat&&S.lng>=h.lng&&N.lng<=v.lng},intersects:function(o){o=Ze(o);var h=this._southWest,v=this._northEast,S=o.getSouthWest(),N=o.getNorthEast(),j=N.lat>=h.lat&&S.lat<=v.lat,q=N.lng>=h.lng&&S.lng<=v.lng;return j&&q},overlaps:function(o){o=Ze(o);var h=this._southWest,v=this._northEast,S=o.getSouthWest(),N=o.getNorthEast(),j=N.lat>h.lat&&S.lat<v.lat,q=N.lng>h.lng&&S.lng<v.lng;return j&&q},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,h){return o?(o=Ze(o),this._southWest.equals(o.getSouthWest(),h)&&this._northEast.equals(o.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ze(o,h){return o instanceof ot?o:new ot(o,h)}function nt(o,h,v){if(isNaN(o)||isNaN(h))throw new Error("Invalid LatLng object: ("+o+", "+h+")");this.lat=+o,this.lng=+h,v!==void 0&&(this.alt=+v)}nt.prototype={equals:function(o,h){if(!o)return!1;o=ge(o);var v=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return v<=(h===void 0?1e-9:h)},toString:function(o){return"LatLng("+T(this.lat,o)+", "+T(this.lng,o)+")"},distanceTo:function(o){return ft.distance(this,ge(o))},wrap:function(){return ft.wrapLatLng(this)},toBounds:function(o){var h=180*o/40075017,v=h/Math.cos(Math.PI/180*this.lat);return Ze([this.lat-h,this.lng-v],[this.lat+h,this.lng+v])},clone:function(){return new nt(this.lat,this.lng,this.alt)}};function ge(o,h,v){return o instanceof nt?o:I(o)&&typeof o[0]!="object"?o.length===3?new nt(o[0],o[1],o[2]):o.length===2?new nt(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new nt(o.lat,"lng"in o?o.lng:o.lon,o.alt):h===void 0?null:new nt(o,h,v)}var _t={latLngToPoint:function(o,h){var v=this.projection.project(o),S=this.scale(h);return this.transformation._transform(v,S)},pointToLatLng:function(o,h){var v=this.scale(h),S=this.transformation.untransform(o,v);return this.projection.unproject(S)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var h=this.projection.bounds,v=this.scale(o),S=this.transformation.transform(h.min,v),N=this.transformation.transform(h.max,v);return new be(S,N)},infinite:!1,wrapLatLng:function(o){var h=this.wrapLng?b(o.lng,this.wrapLng,!0):o.lng,v=this.wrapLat?b(o.lat,this.wrapLat,!0):o.lat,S=o.alt;return new nt(v,h,S)},wrapLatLngBounds:function(o){var h=o.getCenter(),v=this.wrapLatLng(h),S=h.lat-v.lat,N=h.lng-v.lng;if(S===0&&N===0)return o;var j=o.getSouthWest(),q=o.getNorthEast(),ae=new nt(j.lat-S,j.lng-N),he=new nt(q.lat-S,q.lng-N);return new ot(ae,he)}},ft=l({},_t,{wrapLng:[-180,180],R:6371e3,distance:function(o,h){var v=Math.PI/180,S=o.lat*v,N=h.lat*v,j=Math.sin((h.lat-o.lat)*v/2),q=Math.sin((h.lng-o.lng)*v/2),ae=j*j+Math.cos(S)*Math.cos(N)*q*q,he=2*Math.atan2(Math.sqrt(ae),Math.sqrt(1-ae));return this.R*he}}),Bn=6378137,Qt={R:Bn,MAX_LATITUDE:85.0511287798,project:function(o){var h=Math.PI/180,v=this.MAX_LATITUDE,S=Math.max(Math.min(v,o.lat),-v),N=Math.sin(S*h);return new Y(this.R*o.lng*h,this.R*Math.log((1+N)/(1-N))/2)},unproject:function(o){var h=180/Math.PI;return new nt((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*h,o.x*h/this.R)},bounds:function(){var o=Bn*Math.PI;return new be([-o,-o],[o,o])}()};function ut(o,h,v,S){if(I(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=h,this._c=v,this._d=S}ut.prototype={transform:function(o,h){return this._transform(o.clone(),h)},_transform:function(o,h){return h=h||1,o.x=h*(this._a*o.x+this._b),o.y=h*(this._c*o.y+this._d),o},untransform:function(o,h){return h=h||1,new Y((o.x/h-this._b)/this._a,(o.y/h-this._d)/this._c)}};function en(o,h,v,S){return new ut(o,h,v,S)}var at=l({},ft,{code:"EPSG:3857",projection:Qt,transformation:function(){var o=.5/(Math.PI*Qt.R);return en(o,.5,-o,.5)}()}),Hn=l({},at,{code:"EPSG:900913"});function jn(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Er(o,h){var v="",S,N,j,q,ae,he;for(S=0,j=o.length;S<j;S++){for(ae=o[S],N=0,q=ae.length;N<q;N++)he=ae[N],v+=(N?"L":"M")+he.x+" "+he.y;v+=h?Ue.svg?"z":"x":""}return v||"M0 0"}var Zt=document.documentElement.style,$="ActiveXObject"in window,we=$&&!document.addEventListener,ne="msLaunchUri"in navigator&&!("documentMode"in document),te=Gt("webkit"),xe=Gt("android"),Ne=Gt("android 2")||Gt("android 3"),Le=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Te=xe&&Gt("Google")&&Le<537&&!("AudioNode"in window),Qe=!!window.opera,Nt=!ne&&Gt("chrome"),He=Gt("gecko")&&!te&&!Qe&&!$,Xe=!Nt&&Gt("safari"),Mt=Gt("phantom"),At="OTransition"in Zt,Ft=navigator.platform.indexOf("Win")===0,St=$&&"transition"in Zt,Ae="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ne,ln="MozPerspective"in Zt,kt=!window.L_DISABLE_3D&&(St||Ae||ln)&&!At&&!Mt,Lt=typeof orientation<"u"||Gt("mobile"),fo=Lt&&te,ol=Lt&&Ae,al=!window.PointerEvent&&window.MSPointerEvent,vt=!!(window.PointerEvent||al),Ai="ontouchstart"in window||!!window.TouchEvent,Gc=!window.L_NO_TOUCH&&(Ai||vt),Yc=Lt&&Qe,Ar=Lt&&He,ll=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Tn=function(){var o=!1;try{var h=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",E,h),window.removeEventListener("testPassiveEventSupport",E,h)}catch{}return o}(),gs=function(){return!!document.createElement("canvas").getContext}(),xs=!!(document.createElementNS&&jn("svg").createSVGRect),Hr=!!xs&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),wh=!xs&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var h=o.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),Ui=navigator.platform.indexOf("Mac")===0,cl=navigator.platform.indexOf("Linux")===0;function Gt(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Ue={ie:$,ielt9:we,edge:ne,webkit:te,android:xe,android23:Ne,androidStock:Te,opera:Qe,chrome:Nt,gecko:He,safari:Xe,phantom:Mt,opera12:At,win:Ft,ie3d:St,webkit3d:Ae,gecko3d:ln,any3d:kt,mobile:Lt,mobileWebkit:fo,mobileWebkit3d:ol,msPointer:al,pointer:vt,touch:Gc,touchNative:Ai,mobileOpera:Yc,mobileGecko:Ar,retina:ll,passiveEvents:Tn,canvas:gs,svg:xs,vml:wh,inlineSvg:Hr,mac:Ui,linux:cl},nr=Ue.msPointer?"MSPointerDown":"pointerdown",De=Ue.msPointer?"MSPointerMove":"pointermove",Vi=Ue.msPointer?"MSPointerUp":"pointerup",ia=Ue.msPointer?"MSPointerCancel":"pointercancel",In={touchstart:nr,touchmove:De,touchend:Vi,touchcancel:ia},Hi={touchstart:Ni,touchmove:mo,touchend:mo,touchcancel:mo},ui={},po=!1;function Wr(o,h,v){return h==="touchstart"&&zt(),Hi[h]?(v=Hi[h].bind(this,v),o.addEventListener(In[h],v,!1),v):(console.warn("wrong event specified:",h),E)}function _h(o,h,v){if(!In[h]){console.warn("wrong event specified:",h);return}o.removeEventListener(In[h],v,!1)}function bh(o){ui[o.pointerId]=o}function Zr(o){ui[o.pointerId]&&(ui[o.pointerId]=o)}function Mn(o){delete ui[o.pointerId]}function zt(){po||(document.addEventListener(nr,bh,!0),document.addEventListener(De,Zr,!0),document.addEventListener(Vi,Mn,!0),document.addEventListener(ia,Mn,!0),po=!0)}function mo(o,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var v in ui)h.touches.push(ui[v]);h.changedTouches=[h],o(h)}}function Ni(o,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&Cn(h),mo(o,h)}function ul(o){var h={},v,S;for(S in o)v=o[S],h[S]=v&&v.bind?v.bind(o):v;return o=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var pe=200;function Ch(o,h){o.addEventListener("dblclick",h);var v=0,S;function N(j){if(j.detail!==1){S=j.detail;return}if(!(j.pointerType==="mouse"||j.sourceCapabilities&&!j.sourceCapabilities.firesTouchEvents)){var q=vs(j);if(!(q.some(function(he){return he instanceof HTMLLabelElement&&he.attributes.for})&&!q.some(function(he){return he instanceof HTMLInputElement||he instanceof HTMLSelectElement}))){var ae=Date.now();ae-v<=pe?(S++,S===2&&h(ul(j))):S=1,v=ae}}}return o.addEventListener("click",N),{dblclick:h,simDblclick:N}}function Jt(o,h){o.removeEventListener("dblclick",h.dblclick),o.removeEventListener("click",h.simDblclick)}var Ti=se(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),go=se(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),bt=go==="webkitTransition"||go==="OTransition"?go+"End":"transitionend";function wt(o){return typeof o=="string"?document.getElementById(o):o}function ct(o,h){var v=o.style[h]||o.currentStyle&&o.currentStyle[h];if((!v||v==="auto")&&document.defaultView){var S=document.defaultView.getComputedStyle(o,null);v=S?S[h]:null}return v==="auto"?null:v}function xt(o,h,v){var S=document.createElement(o);return S.className=h||"",v&&v.appendChild(S),S}function Bt(o){var h=o.parentNode;h&&h.removeChild(o)}function ys(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function Ut(o){var h=o.parentNode;h&&h.lastChild!==o&&h.appendChild(o)}function rr(o){var h=o.parentNode;h&&h.firstChild!==o&&h.insertBefore(o,h.firstChild)}function dl(o,h){if(o.classList!==void 0)return o.classList.contains(h);var v=di(o);return v.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(v)}function Ve(o,h){if(o.classList!==void 0)for(var v=D(h),S=0,N=v.length;S<N;S++)o.classList.add(v[S]);else if(!dl(o,h)){var j=di(o);hl(o,(j?j+" ":"")+h)}}function Tt(o,h){o.classList!==void 0?o.classList.remove(h):hl(o,O((" "+di(o)+" ").replace(" "+h+" "," ")))}function hl(o,h){o.className.baseVal===void 0?o.className=h:o.className.baseVal=h}function di(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function dt(o,h){"opacity"in o.style?o.style.opacity=h:"filter"in o.style&&kn(o,h)}function kn(o,h){var v=!1,S="DXImageTransform.Microsoft.Alpha";try{v=o.filters.item(S)}catch{if(h===1)return}h=Math.round(h*100),v?(v.Enabled=h!==100,v.Opacity=h):o.style.filter+=" progid:"+S+"(opacity="+h+")"}function se(o){for(var h=document.documentElement.style,v=0;v<o.length;v++)if(o[v]in h)return o[v];return!1}function H(o,h,v){var S=h||new Y(0,0);o.style[Ti]=(Ue.ie3d?"translate("+S.x+"px,"+S.y+"px)":"translate3d("+S.x+"px,"+S.y+"px,0)")+(v?" scale("+v+")":"")}function ke(o,h){o._leaflet_pos=h,Ue.any3d?H(o,h):(o.style.left=h.x+"px",o.style.top=h.y+"px")}function Vt(o){return o._leaflet_pos||new Y(0,0)}var Rn,xo,yo;if("onselectstart"in document)Rn=function(){et(window,"selectstart",Cn)},xo=function(){Re(window,"selectstart",Cn)};else{var On=se(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Rn=function(){if(On){var o=document.documentElement.style;yo=o[On],o[On]="none"}},xo=function(){On&&(document.documentElement.style[On]=yo,yo=void 0)}}function We(){et(window,"dragstart",Cn)}function jt(){Re(window,"dragstart",Cn)}var vo,fl;function wo(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(Wi(),vo=o,fl=o.style.outlineStyle,o.style.outlineStyle="none",et(window,"keydown",Wi))}function Wi(){vo&&(vo.style.outlineStyle=fl,vo=void 0,fl=void 0,Re(window,"keydown",Wi))}function sa(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function pl(o){var h=o.getBoundingClientRect();return{x:h.width/o.offsetWidth||1,y:h.height/o.offsetHeight||1,boundingClientRect:h}}var gn={__proto__:null,TRANSFORM:Ti,TRANSITION:go,TRANSITION_END:bt,get:wt,getStyle:ct,create:xt,remove:Bt,empty:ys,toFront:Ut,toBack:rr,hasClass:dl,addClass:Ve,removeClass:Tt,setClass:hl,getClass:di,setOpacity:dt,testProp:se,setTransform:H,setPosition:ke,getPosition:Vt,get disableTextSelection(){return Rn},get enableTextSelection(){return xo},disableImageDrag:We,enableImageDrag:jt,preventOutline:wo,restoreOutline:Wi,getSizedParentNode:sa,getScale:pl};function et(o,h,v,S){if(h&&typeof h=="object")for(var N in h)dn(o,N,h[N],v);else{h=D(h);for(var j=0,q=h.length;j<q;j++)dn(o,h[j],v,S)}return this}var bn="_leaflet_events";function Re(o,h,v,S){if(arguments.length===1)Xc(o),delete o[bn];else if(h&&typeof h=="object")for(var N in h)ml(o,N,h[N],v);else if(h=D(h),arguments.length===2)Xc(o,function(ae){return Z(h,ae)!==-1});else for(var j=0,q=h.length;j<q;j++)ml(o,h[j],v,S);return this}function Xc(o,h){for(var v in o[bn]){var S=v.split(/\d/)[0];(!h||h(S))&&ml(o,S,null,null,v)}}var rt={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function dn(o,h,v,S){var N=h+w(v)+(S?"_"+w(S):"");if(o[bn]&&o[bn][N])return this;var j=function(ae){return v.call(S||o,ae||window.event)},q=j;!Ue.touchNative&&Ue.pointer&&h.indexOf("touch")===0?j=Wr(o,h,j):Ue.touch&&h==="dblclick"?j=Ch(o,j):"addEventListener"in o?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?o.addEventListener(rt[h]||h,j,Ue.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(j=function(ae){ae=ae||window.event,Zi(o,ae)&&q(ae)},o.addEventListener(rt[h],j,!1)):o.addEventListener(h,q,!1):o.attachEvent("on"+h,j),o[bn]=o[bn]||{},o[bn][N]=j}function ml(o,h,v,S,N){N=N||h+w(v)+(S?"_"+w(S):"");var j=o[bn]&&o[bn][N];if(!j)return this;!Ue.touchNative&&Ue.pointer&&h.indexOf("touch")===0?_h(o,h,j):Ue.touch&&h==="dblclick"?Jt(o,j):"removeEventListener"in o?o.removeEventListener(rt[h]||h,j,!1):o.detachEvent("on"+h,j),o[bn][N]=null}function hi(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function oa(o){return dn(o,"wheel",hi),this}function Nr(o){return et(o,"mousedown touchstart dblclick contextmenu",hi),o._leaflet_disable_click=!0,this}function Cn(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function Tr(o){return Cn(o),hi(o),this}function vs(o){if(o.composedPath)return o.composedPath();for(var h=[],v=o.target;v;)h.push(v),v=v.parentNode;return h}function ws(o,h){if(!h)return new Y(o.clientX,o.clientY);var v=pl(h),S=v.boundingClientRect;return new Y((o.clientX-S.left)/v.x-h.clientLeft,(o.clientY-S.top)/v.y-h.clientTop)}var qc=Ue.linux&&Ue.chrome?window.devicePixelRatio:Ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function _s(o){return Ue.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/qc:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function Zi(o,h){var v=h.relatedTarget;if(!v)return!0;try{for(;v&&v!==o;)v=v.parentNode}catch{return!1}return v!==o}var Wn={__proto__:null,on:et,off:Re,stopPropagation:hi,disableScrollPropagation:oa,disableClickPropagation:Nr,preventDefault:Cn,stop:Tr,getPropagationPath:vs,getMousePosition:ws,getWheelDelta:_s,isExternalTarget:Zi,addListener:et,removeListener:Re},gl=Oe.extend({run:function(o,h,v,S){this.stop(),this._el=o,this._inProgress=!0,this._duration=v||.25,this._easeOutPower=1/Math.max(S||.5,.2),this._startPos=Vt(o),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=me(this._animate,this),this._step()},_step:function(o){var h=+new Date-this._startTime,v=this._duration*1e3;h<v?this._runFrame(this._easeOut(h/v),o):(this._runFrame(1),this._complete())},_runFrame:function(o,h){var v=this._startPos.add(this._offset.multiplyBy(o));h&&v._round(),ke(this._el,v),this.fire("step")},_complete:function(){le(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),mt=Oe.extend({options:{crs:at,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,h){h=P(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(ge(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=go&&Ue.any3d&&!Ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),et(this._proxy,bt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,h,v){if(h=h===void 0?this._zoom:this._limitZoom(h),o=this._limitCenter(ge(o),h,this.options.maxBounds),v=v||{},this._stop(),this._loaded&&!v.reset&&v!==!0){v.animate!==void 0&&(v.zoom=l({animate:v.animate},v.zoom),v.pan=l({animate:v.animate,duration:v.duration},v.pan));var S=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,h,v.zoom):this._tryAnimatedPan(o,v.pan);if(S)return clearTimeout(this._sizeTimer),this}return this._resetView(o,h,v.pan&&v.pan.noMoveStart),this},setZoom:function(o,h){return this._loaded?this.setView(this.getCenter(),o,{zoom:h}):(this._zoom=o,this)},zoomIn:function(o,h){return o=o||(Ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,h)},zoomOut:function(o,h){return o=o||(Ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,h)},setZoomAround:function(o,h,v){var S=this.getZoomScale(h),N=this.getSize().divideBy(2),j=o instanceof Y?o:this.latLngToContainerPoint(o),q=j.subtract(N).multiplyBy(1-1/S),ae=this.containerPointToLatLng(N.add(q));return this.setView(ae,h,{zoom:v})},_getBoundsCenterZoom:function(o,h){h=h||{},o=o.getBounds?o.getBounds():Ze(o);var v=oe(h.paddingTopLeft||h.padding||[0,0]),S=oe(h.paddingBottomRight||h.padding||[0,0]),N=this.getBoundsZoom(o,!1,v.add(S));if(N=typeof h.maxZoom=="number"?Math.min(h.maxZoom,N):N,N===1/0)return{center:o.getCenter(),zoom:N};var j=S.subtract(v).divideBy(2),q=this.project(o.getSouthWest(),N),ae=this.project(o.getNorthEast(),N),he=this.unproject(q.add(ae).divideBy(2).add(j),N);return{center:he,zoom:N}},fitBounds:function(o,h){if(o=Ze(o),!o.isValid())throw new Error("Bounds are not valid.");var v=this._getBoundsCenterZoom(o,h);return this.setView(v.center,v.zoom,h)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,h){return this.setView(o,this._zoom,{pan:h})},panBy:function(o,h){if(o=oe(o).round(),h=h||{},!o.x&&!o.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new gl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){Ve(this._mapPane,"leaflet-pan-anim");var v=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,v,h.duration||.25,h.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,h,v){if(v=v||{},v.animate===!1||!Ue.any3d)return this.setView(o,h,v);this._stop();var S=this.project(this.getCenter()),N=this.project(o),j=this.getSize(),q=this._zoom;o=ge(o),h=h===void 0?q:h;var ae=Math.max(j.x,j.y),he=ae*this.getZoomScale(q,h),ye=N.distanceTo(S)||1,Be=1.42,Je=Be*Be;function pt(yn){var ru=yn?-1:1,eC=yn?he:ae,tC=he*he-ae*ae+ru*Je*Je*ye*ye,nC=2*eC*Je*ye,Mh=tC/nC,rm=Math.sqrt(Mh*Mh+1)-Mh,rC=rm<1e-9?-18:Math.log(rm);return rC}function ar(yn){return(Math.exp(yn)-Math.exp(-yn))/2}function Pn(yn){return(Math.exp(yn)+Math.exp(-yn))/2}function Qr(yn){return ar(yn)/Pn(yn)}var mr=pt(0);function da(yn){return ae*(Pn(mr)/Pn(mr+Be*yn))}function Kb(yn){return ae*(Pn(mr)*Qr(mr+Be*yn)-ar(mr))/Je}function Qb(yn){return 1-Math.pow(1-yn,1.5)}var Jb=Date.now(),tm=(pt(1)-mr)/Be,$b=v.duration?1e3*v.duration:1e3*tm*.8;function nm(){var yn=(Date.now()-Jb)/$b,ru=Qb(yn)*tm;yn<=1?(this._flyToFrame=me(nm,this),this._move(this.unproject(S.add(N.subtract(S).multiplyBy(Kb(ru)/ye)),q),this.getScaleZoom(ae/da(ru),q),{flyTo:!0})):this._move(o,h)._moveEnd(!0)}return this._moveStart(!0,v.noMoveStart),nm.call(this),this},flyToBounds:function(o,h){var v=this._getBoundsCenterZoom(o,h);return this.flyTo(v.center,v.zoom,h)},setMaxBounds:function(o){return o=Ze(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var h=this.options.minZoom;return this.options.minZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var h=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,h){this._enforcingBounds=!0;var v=this.getCenter(),S=this._limitCenter(v,this._zoom,Ze(o));return v.equals(S)||this.panTo(S,h),this._enforcingBounds=!1,this},panInside:function(o,h){h=h||{};var v=oe(h.paddingTopLeft||h.padding||[0,0]),S=oe(h.paddingBottomRight||h.padding||[0,0]),N=this.project(this.getCenter()),j=this.project(o),q=this.getPixelBounds(),ae=Pe([q.min.add(v),q.max.subtract(S)]),he=ae.getSize();if(!ae.contains(j)){this._enforcingBounds=!0;var ye=j.subtract(ae.getCenter()),Be=ae.extend(j).getSize().subtract(he);N.x+=ye.x<0?-Be.x:Be.x,N.y+=ye.y<0?-Be.y:Be.y,this.panTo(this.unproject(N),h),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=l({animate:!1,pan:!0},o===!0?{animate:!0}:o);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var v=this.getSize(),S=h.divideBy(2).round(),N=v.divideBy(2).round(),j=S.subtract(N);return!j.x&&!j.y?this:(o.animate&&o.pan?this.panBy(j):(o.pan&&this._rawPanBy(j),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:v}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=l({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=f(this._handleGeolocationResponse,this),v=f(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,v,o):navigator.geolocation.getCurrentPosition(h,v,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var h=o.code,v=o.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+v+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var h=o.coords.latitude,v=o.coords.longitude,S=new nt(h,v),N=S.toBounds(o.coords.accuracy*2),j=this._locateOptions;if(j.setView){var q=this.getBoundsZoom(N);this.setView(S,j.maxZoom?Math.min(q,j.maxZoom):q)}var ae={latlng:S,bounds:N,timestamp:o.timestamp};for(var he in o.coords)typeof o.coords[he]=="number"&&(ae[he]=o.coords[he]);this.fire("locationfound",ae)}},addHandler:function(o,h){if(!h)return this;var v=this[o]=new h(this);return this._handlers.push(v),this.options[o]&&v.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Bt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(le(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)Bt(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,h){var v="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),S=xt("div",v,h||this._mapPane);return o&&(this._panes[o]=S),S},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),h=this.unproject(o.getBottomLeft()),v=this.unproject(o.getTopRight());return new ot(h,v)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,h,v){o=Ze(o),v=oe(v||[0,0]);var S=this.getZoom()||0,N=this.getMinZoom(),j=this.getMaxZoom(),q=o.getNorthWest(),ae=o.getSouthEast(),he=this.getSize().subtract(v),ye=Pe(this.project(ae,S),this.project(q,S)).getSize(),Be=Ue.any3d?this.options.zoomSnap:1,Je=he.x/ye.x,pt=he.y/ye.y,ar=h?Math.max(Je,pt):Math.min(Je,pt);return S=this.getScaleZoom(ar,S),Be&&(S=Math.round(S/(Be/100))*(Be/100),S=h?Math.ceil(S/Be)*Be:Math.floor(S/Be)*Be),Math.max(N,Math.min(j,S))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Y(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,h){var v=this._getTopLeftPoint(o,h);return new be(v,v.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,h){var v=this.options.crs;return h=h===void 0?this._zoom:h,v.scale(o)/v.scale(h)},getScaleZoom:function(o,h){var v=this.options.crs;h=h===void 0?this._zoom:h;var S=v.zoom(o*v.scale(h));return isNaN(S)?1/0:S},project:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(ge(o),h)},unproject:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(oe(o),h)},layerPointToLatLng:function(o){var h=oe(o).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(o){var h=this.project(ge(o))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(ge(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(Ze(o))},distance:function(o,h){return this.options.crs.distance(ge(o),ge(h))},containerPointToLayerPoint:function(o){return oe(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return oe(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var h=this.containerPointToLayerPoint(oe(o));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ge(o)))},mouseEventToContainerPoint:function(o){return ws(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var h=this._container=wt(o);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");et(h,"scroll",this._onScroll,this),this._containerId=w(h)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ue.any3d,Ve(o,"leaflet-container"+(Ue.touch?" leaflet-touch":"")+(Ue.retina?" leaflet-retina":"")+(Ue.ielt9?" leaflet-oldie":"")+(Ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=ct(o,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ke(this._mapPane,new Y(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ve(o.markerPane,"leaflet-zoom-hide"),Ve(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,h,v){ke(this._mapPane,new Y(0,0));var S=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var N=this._zoom!==h;this._moveStart(N,v)._move(o,h)._moveEnd(N),this.fire("viewreset"),S&&this.fire("load")},_moveStart:function(o,h){return o&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(o,h,v,S){h===void 0&&(h=this._zoom);var N=this._zoom!==h;return this._zoom=h,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),S?v&&v.pinch&&this.fire("zoom",v):((N||v&&v.pinch)&&this.fire("zoom",v),this.fire("move",v)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return le(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){ke(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[w(this._container)]=this;var h=o?Re:et;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),Ue.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){le(this._resizeRequest),this._resizeRequest=me(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,h){for(var v=[],S,N=h==="mouseout"||h==="mouseover",j=o.target||o.srcElement,q=!1;j;){if(S=this._targets[w(j)],S&&(h==="click"||h==="preclick")&&this._draggableMoved(S)){q=!0;break}if(S&&S.listens(h,!0)&&(N&&!Zi(j,o)||(v.push(S),N))||j===this._container)break;j=j.parentNode}return!v.length&&!q&&!N&&this.listens(h,!0)&&(v=[this]),v},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var h=o.target||o.srcElement;if(!(!this._loaded||h._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(h))){var v=o.type;v==="mousedown"&&wo(h),this._fireDOMEvent(o,v)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,h,v){if(o.type==="click"){var S=l({},o);S.type="preclick",this._fireDOMEvent(S,S.type,v)}var N=this._findEventTargets(o,h);if(v){for(var j=[],q=0;q<v.length;q++)v[q].listens(h,!0)&&j.push(v[q]);N=j.concat(N)}if(N.length){h==="contextmenu"&&Cn(o);var ae=N[0],he={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var ye=ae.getLatLng&&(!ae._radius||ae._radius<=10);he.containerPoint=ye?this.latLngToContainerPoint(ae.getLatLng()):this.mouseEventToContainerPoint(o),he.layerPoint=this.containerPointToLayerPoint(he.containerPoint),he.latlng=ye?ae.getLatLng():this.layerPointToLatLng(he.layerPoint)}for(q=0;q<N.length;q++)if(N[q].fire(h,he,!0),he.originalEvent._stopped||N[q].options.bubblingMouseEvents===!1&&Z(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,h=this._handlers.length;o<h;o++)this._handlers[o].disable()},whenReady:function(o,h){return this._loaded?o.call(h||this,{target:this}):this.on("load",o,h),this},_getMapPanePos:function(){return Vt(this._mapPane)||new Y(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,h){var v=o&&h!==void 0?this._getNewPixelOrigin(o,h):this.getPixelOrigin();return v.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,h){var v=this.getSize()._divideBy(2);return this.project(o,h)._subtract(v)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,h,v){var S=this._getNewPixelOrigin(v,h);return this.project(o,h)._subtract(S)},_latLngBoundsToNewLayerBounds:function(o,h,v){var S=this._getNewPixelOrigin(v,h);return Pe([this.project(o.getSouthWest(),h)._subtract(S),this.project(o.getNorthWest(),h)._subtract(S),this.project(o.getSouthEast(),h)._subtract(S),this.project(o.getNorthEast(),h)._subtract(S)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,h,v){if(!v)return o;var S=this.project(o,h),N=this.getSize().divideBy(2),j=new be(S.subtract(N),S.add(N)),q=this._getBoundsOffset(j,v,h);return Math.abs(q.x)<=1&&Math.abs(q.y)<=1?o:this.unproject(S.add(q),h)},_limitOffset:function(o,h){if(!h)return o;var v=this.getPixelBounds(),S=new be(v.min.add(o),v.max.add(o));return o.add(this._getBoundsOffset(S,h))},_getBoundsOffset:function(o,h,v){var S=Pe(this.project(h.getNorthEast(),v),this.project(h.getSouthWest(),v)),N=S.min.subtract(o.min),j=S.max.subtract(o.max),q=this._rebound(N.x,-j.x),ae=this._rebound(N.y,-j.y);return new Y(q,ae)},_rebound:function(o,h){return o+h>0?Math.round(o-h)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(h))},_limitZoom:function(o){var h=this.getMinZoom(),v=this.getMaxZoom(),S=Ue.any3d?this.options.zoomSnap:1;return S&&(o=Math.round(o/S)*S),Math.max(h,Math.min(v,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Tt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,h){var v=this._getCenterOffset(o)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(v)?!1:(this.panBy(v,h),!0)},_createAnimProxy:function(){var o=this._proxy=xt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(h){var v=Ti,S=this._proxy.style[v];H(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),S===this._proxy.style[v]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Bt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),h=this.getZoom();H(this._proxy,this.project(o,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,h,v){if(this._animatingZoom)return!0;if(v=v||{},!this._zoomAnimated||v.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var S=this.getZoomScale(h),N=this._getCenterOffset(o)._divideBy(1-1/S);return v.animate!==!0&&!this.getSize().contains(N)?!1:(me(function(){this._moveStart(!0,v.noMoveStart||!1)._animateZoom(o,h,!0)},this),!0)},_animateZoom:function(o,h,v,S){this._mapPane&&(v&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=h,Ve(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:h,noUpdate:S}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Tt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Kc(o,h){return new mt(o,h)}var Ir=je.extend({options:{position:"topright"},initialize:function(o){P(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var h=this._map;return h&&h.removeControl(this),this.options.position=o,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var h=this._container=this.onAdd(o),v=this.getPosition(),S=o._controlCorners[v];return Ve(h,"leaflet-control"),v.indexOf("bottom")!==-1?S.insertBefore(h,S.firstChild):S.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Bt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),_o=function(o){return new Ir(o)};mt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},h="leaflet-",v=this._controlContainer=xt("div",h+"control-container",this._container);function S(N,j){var q=h+N+" "+h+j;o[N+j]=xt("div",q,v)}S("top","left"),S("top","right"),S("bottom","left"),S("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)Bt(this._controlCorners[o]);Bt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Qc=Ir.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,h,v,S){return v<S?-1:S<v?1:0}},initialize:function(o,h,v){P(this,v),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var S in o)this._addLayer(o[S],S);for(S in h)this._addLayer(h[S],S,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return Ir.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,h){return this._addLayer(o,h),this._map?this._update():this},addOverlay:function(o,h){return this._addLayer(o,h,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var h=this._getLayer(w(o));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){Ve(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(Ve(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Tt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Tt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",h=this._container=xt("div",o),v=this.options.collapsed;h.setAttribute("aria-haspopup",!0),Nr(h),oa(h);var S=this._section=xt("section",o+"-list");v&&(this._map.on("click",this.collapse,this),et(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var N=this._layersLink=xt("a",o+"-toggle",h);N.href="#",N.title="Layers",N.setAttribute("role","button"),et(N,{keydown:function(j){j.keyCode===13&&this._expandSafely()},click:function(j){Cn(j),this._expandSafely()}},this),v||this.expand(),this._baseLayersList=xt("div",o+"-base",S),this._separator=xt("div",o+"-separator",S),this._overlaysList=xt("div",o+"-overlays",S),h.appendChild(S)},_getLayer:function(o){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&w(this._layers[h].layer)===o)return this._layers[h]},_addLayer:function(o,h,v){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:h,overlay:v}),this.options.sortLayers&&this._layers.sort(f(function(S,N){return this.options.sortFunction(S.layer,N.layer,S.name,N.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ys(this._baseLayersList),ys(this._overlaysList),this._layerControlInputs=[];var o,h,v,S,N=0;for(v=0;v<this._layers.length;v++)S=this._layers[v],this._addItem(S),h=h||S.overlay,o=o||!S.overlay,N+=S.overlay?0:1;return this.options.hideSingleBase&&(o=o&&N>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=h&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var h=this._getLayer(w(o.target)),v=h.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;v&&this._map.fire(v,h)},_createRadioElement:function(o,h){var v='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(h?' checked="checked"':"")+"/>",S=document.createElement("div");return S.innerHTML=v,S.firstChild},_addItem:function(o){var h=document.createElement("label"),v=this._map.hasLayer(o.layer),S;o.overlay?(S=document.createElement("input"),S.type="checkbox",S.className="leaflet-control-layers-selector",S.defaultChecked=v):S=this._createRadioElement("leaflet-base-layers_"+w(this),v),this._layerControlInputs.push(S),S.layerId=w(o.layer),et(S,"click",this._onInputClick,this);var N=document.createElement("span");N.innerHTML=" "+o.name;var j=document.createElement("span");h.appendChild(j),j.appendChild(S),j.appendChild(N);var q=o.overlay?this._overlaysList:this._baseLayersList;return q.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,h,v,S=[],N=[];this._handlingClick=!0;for(var j=o.length-1;j>=0;j--)h=o[j],v=this._getLayer(h.layerId).layer,h.checked?S.push(v):h.checked||N.push(v);for(j=0;j<N.length;j++)this._map.hasLayer(N[j])&&this._map.removeLayer(N[j]);for(j=0;j<S.length;j++)this._map.hasLayer(S[j])||this._map.addLayer(S[j]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,h,v,S=this._map.getZoom(),N=o.length-1;N>=0;N--)h=o[N],v=this._getLayer(h.layerId).layer,h.disabled=v.options.minZoom!==void 0&&S<v.options.minZoom||v.options.maxZoom!==void 0&&S>v.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,et(o,"click",Cn),this.expand();var h=this;setTimeout(function(){Re(o,"click",Cn),h._preventClick=!1})}}),It=function(o,h,v){return new Qc(o,h,v)},aa=Ir.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var h="leaflet-control-zoom",v=xt("div",h+" leaflet-bar"),S=this.options;return this._zoomInButton=this._createButton(S.zoomInText,S.zoomInTitle,h+"-in",v,this._zoomIn),this._zoomOutButton=this._createButton(S.zoomOutText,S.zoomOutTitle,h+"-out",v,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),v},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,h,v,S,N){var j=xt("a",v,S);return j.innerHTML=o,j.href="#",j.title=h,j.setAttribute("role","button"),j.setAttribute("aria-label",h),Nr(j),et(j,"click",Tr),et(j,"click",N,this),et(j,"click",this._refocusOnMap,this),j},_updateDisabled:function(){var o=this._map,h="leaflet-disabled";Tt(this._zoomInButton,h),Tt(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(Ve(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(Ve(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});mt.mergeOptions({zoomControl:!0}),mt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new aa,this.addControl(this.zoomControl))});var la=function(o){return new aa(o)},fi=Ir.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var h="leaflet-control-scale",v=xt("div",h),S=this.options;return this._addScales(S,h+"-line",v),o.on(S.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),v},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,h,v){o.metric&&(this._mScale=xt("div",h,v)),o.imperial&&(this._iScale=xt("div",h,v))},_update:function(){var o=this._map,h=o.getSize().y/2,v=o.distance(o.containerPointToLatLng([0,h]),o.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(v)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var h=this._getRoundNum(o),v=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,v,h/o)},_updateImperial:function(o){var h=o*3.2808399,v,S,N;h>5280?(v=h/5280,S=this._getRoundNum(v),this._updateScale(this._iScale,S+" mi",S/v)):(N=this._getRoundNum(h),this._updateScale(this._iScale,N+" ft",N/h))},_updateScale:function(o,h,v){o.style.width=Math.round(this.options.maxWidth*v)+"px",o.innerHTML=h},_getRoundNum:function(o){var h=Math.pow(10,(Math.floor(o)+"").length-1),v=o/h;return v=v>=10?10:v>=5?5:v>=3?3:v>=2?2:1,h*v}}),Sh=function(o){return new fi(o)},de='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',st=Ir.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ue.inlineSvg?de+" ":"")+"Leaflet</a>"},initialize:function(o){P(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=xt("div","leaflet-control-attribution"),Nr(this._container);for(var h in o._layers)o._layers[h].getAttribution&&this.addAttribution(o._layers[h].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var h in this._attributions)this._attributions[h]&&o.push(h);var v=[];this.options.prefix&&v.push(this.options.prefix),o.length&&v.push(o.join(", ")),this._container.innerHTML=v.join(' <span aria-hidden="true">|</span> ')}}});mt.mergeOptions({attributionControl:!0}),mt.addInitHook(function(){this.options.attributionControl&&new st().addTo(this)});var Sn=function(o){return new st(o)};Ir.Layers=Qc,Ir.Zoom=aa,Ir.Scale=fi,Ir.Attribution=st,_o.layers=It,_o.zoom=la,_o.scale=Sh,_o.attribution=Sn;var ir=je.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ir.addTo=function(o,h){return o.addHandler(h,this),this};var Jc={Events:Me},$c=Ue.touch?"touchstart mousedown":"mousedown",Ii=Oe.extend({options:{clickTolerance:3},initialize:function(o,h,v,S){P(this,S),this._element=o,this._dragStartTarget=h||o,this._preventOutline=v},enable:function(){this._enabled||(et(this._dragStartTarget,$c,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ii._dragging===this&&this.finishDrag(!0),Re(this._dragStartTarget,$c,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!dl(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){Ii._dragging===this&&this.finishDrag();return}if(!(Ii._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(Ii._dragging=this,this._preventOutline&&wo(this._element),We(),Rn(),!this._moving)){this.fire("down");var h=o.touches?o.touches[0]:o,v=sa(this._element);this._startPoint=new Y(h.clientX,h.clientY),this._startPos=Vt(this._element),this._parentScale=pl(v);var S=o.type==="mousedown";et(document,S?"mousemove":"touchmove",this._onMove,this),et(document,S?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var h=o.touches&&o.touches.length===1?o.touches[0]:o,v=new Y(h.clientX,h.clientY)._subtract(this._startPoint);!v.x&&!v.y||Math.abs(v.x)+Math.abs(v.y)<this.options.clickTolerance||(v.x/=this._parentScale.x,v.y/=this._parentScale.y,Cn(o),this._moved||(this.fire("dragstart"),this._moved=!0,Ve(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ve(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(v),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),ke(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Tt(document.body,"leaflet-dragging"),this._lastTarget&&(Tt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Re(document,"mousemove touchmove",this._onMove,this),Re(document,"mouseup touchend touchcancel",this._onUp,this),jt(),xo();var h=this._moved&&this._moving;this._moving=!1,Ii._dragging=!1,h&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function eu(o,h,v){var S,N=[1,4,2,8],j,q,ae,he,ye,Be,Je,pt;for(j=0,Be=o.length;j<Be;j++)o[j]._code=Yi(o[j],h);for(ae=0;ae<4;ae++){for(Je=N[ae],S=[],j=0,Be=o.length,q=Be-1;j<Be;q=j++)he=o[j],ye=o[q],he._code&Je?ye._code&Je||(pt=pi(ye,he,Je,h,v),pt._code=Yi(pt,h),S.push(pt)):(ye._code&Je&&(pt=pi(ye,he,Je,h,v),pt._code=Yi(pt,h),S.push(pt)),S.push(he));o=S}return o}function ca(o,h){var v,S,N,j,q,ae,he,ye,Be;if(!o||o.length===0)throw new Error("latlngs not passed");sr(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Je=ge([0,0]),pt=Ze(o),ar=pt.getNorthWest().distanceTo(pt.getSouthWest())*pt.getNorthEast().distanceTo(pt.getNorthWest());ar<1700&&(Je=tn(o));var Pn=o.length,Qr=[];for(v=0;v<Pn;v++){var mr=ge(o[v]);Qr.push(h.project(ge([mr.lat-Je.lat,mr.lng-Je.lng])))}for(ae=he=ye=0,v=0,S=Pn-1;v<Pn;S=v++)N=Qr[v],j=Qr[S],q=N.y*j.x-j.y*N.x,he+=(N.x+j.x)*q,ye+=(N.y+j.y)*q,ae+=q*3;ae===0?Be=Qr[0]:Be=[he/ae,ye/ae];var da=h.unproject(oe(Be));return ge([da.lat+Je.lat,da.lng+Je.lng])}function tn(o){for(var h=0,v=0,S=0,N=0;N<o.length;N++){var j=ge(o[N]);h+=j.lat,v+=j.lng,S++}return ge([h/S,v/S])}var xl={__proto__:null,clipPolygon:eu,polygonCenter:ca,centroid:tn};function Yt(o,h){if(!h||!o.length)return o.slice();var v=h*h;return o=Eh(o,v),o=Rt(o,v),o}function bo(o,h,v){return Math.sqrt(Xi(o,h,v,!0))}function Gi(o,h,v){return Xi(o,h,v)}function Rt(o,h){var v=o.length,S=typeof Uint8Array<"u"?Uint8Array:Array,N=new S(v);N[0]=N[v-1]=1,Ge(o,N,h,0,v-1);var j,q=[];for(j=0;j<v;j++)N[j]&&q.push(o[j]);return q}function Ge(o,h,v,S,N){var j=0,q,ae,he;for(ae=S+1;ae<=N-1;ae++)he=Xi(o[ae],o[S],o[N],!0),he>j&&(q=ae,j=he);j>v&&(h[q]=1,Ge(o,h,v,S,q),Ge(o,h,v,q,N))}function Eh(o,h){for(var v=[o[0]],S=1,N=0,j=o.length;S<j;S++)Gr(o[S],o[N])>h&&(v.push(o[S]),N=S);return N<j-1&&v.push(o[j-1]),v}var Dt;function Mi(o,h,v,S,N){var j=S?Dt:Yi(o,v),q=Yi(h,v),ae,he,ye;for(Dt=q;;){if(!(j|q))return[o,h];if(j&q)return!1;ae=j||q,he=pi(o,h,ae,v,N),ye=Yi(he,v),ae===j?(o=he,j=ye):(h=he,q=ye)}}function pi(o,h,v,S,N){var j=h.x-o.x,q=h.y-o.y,ae=S.min,he=S.max,ye,Be;return v&8?(ye=o.x+j*(he.y-o.y)/q,Be=he.y):v&4?(ye=o.x+j*(ae.y-o.y)/q,Be=ae.y):v&2?(ye=he.x,Be=o.y+q*(he.x-o.x)/j):v&1&&(ye=ae.x,Be=o.y+q*(ae.x-o.x)/j),new Y(ye,Be,N)}function Yi(o,h){var v=0;return o.x<h.min.x?v|=1:o.x>h.max.x&&(v|=2),o.y<h.min.y?v|=4:o.y>h.max.y&&(v|=8),v}function Gr(o,h){var v=h.x-o.x,S=h.y-o.y;return v*v+S*S}function Xi(o,h,v,S){var N=h.x,j=h.y,q=v.x-N,ae=v.y-j,he=q*q+ae*ae,ye;return he>0&&(ye=((o.x-N)*q+(o.y-j)*ae)/he,ye>1?(N=v.x,j=v.y):ye>0&&(N+=q*ye,j+=ae*ye)),q=o.x-N,ae=o.y-j,S?q*q+ae*ae:new Y(N,j)}function sr(o){return!I(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function ua(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),sr(o)}function yl(o,h){var v,S,N,j,q,ae,he,ye;if(!o||o.length===0)throw new Error("latlngs not passed");sr(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Be=ge([0,0]),Je=Ze(o),pt=Je.getNorthWest().distanceTo(Je.getSouthWest())*Je.getNorthEast().distanceTo(Je.getNorthWest());pt<1700&&(Be=tn(o));var ar=o.length,Pn=[];for(v=0;v<ar;v++){var Qr=ge(o[v]);Pn.push(h.project(ge([Qr.lat-Be.lat,Qr.lng-Be.lng])))}for(v=0,S=0;v<ar-1;v++)S+=Pn[v].distanceTo(Pn[v+1])/2;if(S===0)ye=Pn[0];else for(v=0,j=0;v<ar-1;v++)if(q=Pn[v],ae=Pn[v+1],N=q.distanceTo(ae),j+=N,j>S){he=(j-S)/N,ye=[ae.x-he*(ae.x-q.x),ae.y-he*(ae.y-q.y)];break}var mr=h.unproject(oe(ye));return ge([mr.lat+Be.lat,mr.lng+Be.lng])}var tu={__proto__:null,simplify:Yt,pointToSegmentDistance:bo,closestPointOnSegment:Gi,clipSegment:Mi,_getEdgeIntersection:pi,_getBitCode:Yi,_sqClosestPointOnSegment:Xi,isFlat:sr,_flat:ua,polylineCenter:yl},vl={project:function(o){return new Y(o.lng,o.lat)},unproject:function(o){return new nt(o.y,o.x)},bounds:new be([-180,-90],[180,90])},ki={R:6378137,R_MINOR:6356752314245179e-9,bounds:new be([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var h=Math.PI/180,v=this.R,S=o.lat*h,N=this.R_MINOR/v,j=Math.sqrt(1-N*N),q=j*Math.sin(S),ae=Math.tan(Math.PI/4-S/2)/Math.pow((1-q)/(1+q),j/2);return S=-v*Math.log(Math.max(ae,1e-10)),new Y(o.lng*h*v,S)},unproject:function(o){for(var h=180/Math.PI,v=this.R,S=this.R_MINOR/v,N=Math.sqrt(1-S*S),j=Math.exp(-o.y/v),q=Math.PI/2-2*Math.atan(j),ae=0,he=.1,ye;ae<15&&Math.abs(he)>1e-7;ae++)ye=N*Math.sin(q),ye=Math.pow((1-ye)/(1+ye),N/2),he=Math.PI/2-2*Math.atan(j*ye)-q,q+=he;return new nt(q*h,o.x*h/v)}},wl={__proto__:null,LonLat:vl,Mercator:ki,SphericalMercator:Qt},Ah=l({},ft,{code:"EPSG:3395",projection:ki,transformation:function(){var o=.5/(Math.PI*ki.R);return en(o,.5,-o,.5)}()}),bs=l({},ft,{code:"EPSG:4326",projection:vl,transformation:en(1/180,1,-1/180,.5)}),Nh=l({},_t,{projection:vl,transformation:en(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,h){var v=h.lng-o.lng,S=h.lat-o.lat;return Math.sqrt(v*v+S*S)},infinite:!0});_t.Earth=ft,_t.EPSG3395=Ah,_t.EPSG3857=at,_t.EPSG900913=Hn,_t.EPSG4326=bs,_t.Simple=Nh;var xn=Oe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[w(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[w(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var h=o.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var v=this.getEvents();h.on(v,this),this.once("remove",function(){h.off(v,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});mt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var h=w(o);return this._layers[h]?this:(this._layers[h]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var h=w(o);return this._layers[h]?(this._loaded&&o.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return w(o)in this._layers},eachLayer:function(o,h){for(var v in this._layers)o.call(h,this._layers[v]);return this},_addLayers:function(o){o=o?I(o)?o:[o]:[];for(var h=0,v=o.length;h<v;h++)this.addLayer(o[h])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[w(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var h=w(o);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,h=-1/0,v=this._getZoomSpan();for(var S in this._zoomBoundLayers){var N=this._zoomBoundLayers[S].options;o=N.minZoom===void 0?o:Math.min(o,N.minZoom),h=N.maxZoom===void 0?h:Math.max(h,N.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=o===1/0?void 0:o,v!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var mi=xn.extend({initialize:function(o,h){P(this,h),this._layers={};var v,S;if(o)for(v=0,S=o.length;v<S;v++)this.addLayer(o[v])},addLayer:function(o){var h=this.getLayerId(o);return this._layers[h]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var h=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(o){var h=typeof o=="number"?o:this.getLayerId(o);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var h=Array.prototype.slice.call(arguments,1),v,S;for(v in this._layers)S=this._layers[v],S[o]&&S[o].apply(S,h);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,h){for(var v in this._layers)o.call(h,this._layers[v]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return w(o)}}),pr=function(o,h){return new mi(o,h)},Yr=mi.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),mi.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),mi.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new ot;for(var h in this._layers){var v=this._layers[h];o.extend(v.getBounds?v.getBounds():v.getLatLng())}return o}}),Xr=function(o,h){return new Yr(o,h)},Cs=je.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){P(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,h){var v=this._getIconUrl(o);if(!v){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var S=this._createImg(v,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(S,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),S},_setIconStyles:function(o,h){var v=this.options,S=v[h+"Size"];typeof S=="number"&&(S=[S,S]);var N=oe(S),j=oe(h==="shadow"&&v.shadowAnchor||v.iconAnchor||N&&N.divideBy(2,!0));o.className="leaflet-marker-"+h+" "+(v.className||""),j&&(o.style.marginLeft=-j.x+"px",o.style.marginTop=-j.y+"px"),N&&(o.style.width=N.x+"px",o.style.height=N.y+"px")},_createImg:function(o,h){return h=h||document.createElement("img"),h.src=o,h},_getIconUrl:function(o){return Ue.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function _l(o){return new Cs(o)}var Co=Cs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof Co.imagePath!="string"&&(Co.imagePath=this._detectIconPath()),(this.options.imagePath||Co.imagePath)+Cs.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var h=function(v,S,N){var j=S.exec(v);return j&&j[N]};return o=h(o,/^url\((['"])?(.+)\1\)$/,2),o&&h(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=xt("div","leaflet-default-icon-path",document.body),h=ct(o,"background-image")||ct(o,"backgroundImage");if(document.body.removeChild(o),h=this._stripUrl(h),h)return h;var v=document.querySelector('link[href$="leaflet.css"]');return v?v.href.substring(0,v.href.length-11-1):""}}),bl=ir.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new Ii(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ve(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Tt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var h=this._marker,v=h._map,S=this._marker.options.autoPanSpeed,N=this._marker.options.autoPanPadding,j=Vt(h._icon),q=v.getPixelBounds(),ae=v.getPixelOrigin(),he=Pe(q.min._subtract(ae).add(N),q.max._subtract(ae).subtract(N));if(!he.contains(j)){var ye=oe((Math.max(he.max.x,j.x)-he.max.x)/(q.max.x-he.max.x)-(Math.min(he.min.x,j.x)-he.min.x)/(q.min.x-he.min.x),(Math.max(he.max.y,j.y)-he.max.y)/(q.max.y-he.max.y)-(Math.min(he.min.y,j.y)-he.min.y)/(q.min.y-he.min.y)).multiplyBy(S);v.panBy(ye,{animate:!1}),this._draggable._newPos._add(ye),this._draggable._startPos._add(ye),ke(h._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=me(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(le(this._panRequest),this._panRequest=me(this._adjustPan.bind(this,o)))},_onDrag:function(o){var h=this._marker,v=h._shadow,S=Vt(h._icon),N=h._map.layerPointToLatLng(S);v&&ke(v,S),h._latlng=N,o.latlng=N,o.oldLatLng=this._oldLatLng,h.fire("move",o).fire("drag",o)},_onDragEnd:function(o){le(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),or=xn.extend({options:{icon:new Co,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,h){P(this,h),this._latlng=ge(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var h=this._latlng;return this._latlng=ge(o),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),v=o.icon.createIcon(this._icon),S=!1;v!==this._icon&&(this._icon&&this._removeIcon(),S=!0,o.title&&(v.title=o.title),v.tagName==="IMG"&&(v.alt=o.alt||"")),Ve(v,h),o.keyboard&&(v.tabIndex="0",v.setAttribute("role","button")),this._icon=v,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&et(v,"focus",this._panOnFocus,this);var N=o.icon.createShadow(this._shadow),j=!1;N!==this._shadow&&(this._removeShadow(),j=!0),N&&(Ve(N,h),N.alt=""),this._shadow=N,o.opacity<1&&this._updateOpacity(),S&&this.getPane().appendChild(this._icon),this._initInteraction(),N&&j&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Re(this._icon,"focus",this._panOnFocus,this),Bt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Bt(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&ke(this._icon,o),this._shadow&&ke(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(Ve(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),bl)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new bl(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&dt(this._icon,o),this._shadow&&dt(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var h=this.options.icon.options,v=h.iconSize?oe(h.iconSize):oe(0,0),S=h.iconAnchor?oe(h.iconAnchor):oe(0,0);o.panInside(this._latlng,{paddingTopLeft:S,paddingBottomRight:v.subtract(S)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Th(o,h){return new or(o,h)}var qr=xn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return P(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ri=qr.extend({options:{fill:!0,radius:10},initialize:function(o,h){P(this,h),this._latlng=ge(o),this._radius=this.options.radius},setLatLng:function(o){var h=this._latlng;return this._latlng=ge(o),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var h=o&&o.radius||this._radius;return qr.prototype.setStyle.call(this,o),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,h=this._radiusY||o,v=this._clickTolerance(),S=[o+v,h+v];this._pxBounds=new be(this._point.subtract(S),this._point.add(S))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function yt(o,h){return new Ri(o,h)}var Ss=Ri.extend({initialize:function(o,h,v){if(typeof h=="number"&&(h=l({},v,{radius:h})),P(this,h),this._latlng=ge(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new ot(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:qr.prototype.setStyle,_project:function(){var o=this._latlng.lng,h=this._latlng.lat,v=this._map,S=v.options.crs;if(S.distance===ft.distance){var N=Math.PI/180,j=this._mRadius/ft.R/N,q=v.project([h+j,o]),ae=v.project([h-j,o]),he=q.add(ae).divideBy(2),ye=v.unproject(he).lat,Be=Math.acos((Math.cos(j*N)-Math.sin(h*N)*Math.sin(ye*N))/(Math.cos(h*N)*Math.cos(ye*N)))/N;(isNaN(Be)||Be===0)&&(Be=j/Math.cos(Math.PI/180*h)),this._point=he.subtract(v.getPixelOrigin()),this._radius=isNaN(Be)?0:he.x-v.project([ye,o-Be]).x,this._radiusY=he.y-q.y}else{var Je=S.unproject(S.project(this._latlng).subtract([this._mRadius,0]));this._point=v.latLngToLayerPoint(this._latlng),this._radius=this._point.x-v.latLngToLayerPoint(Je).x}this._updateBounds()}});function M(o,h,v){return new Ss(o,h,v)}var r=qr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,h){P(this,h),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var h=1/0,v=null,S=Xi,N,j,q=0,ae=this._parts.length;q<ae;q++)for(var he=this._parts[q],ye=1,Be=he.length;ye<Be;ye++){N=he[ye-1],j=he[ye];var Je=S(o,N,j,!0);Je<h&&(h=Je,v=S(o,N,j))}return v&&(v.distance=Math.sqrt(h)),v},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return yl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,h){return h=h||this._defaultShape(),o=ge(o),h.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new ot,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return sr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var h=[],v=sr(o),S=0,N=o.length;S<N;S++)v?(h[S]=ge(o[S]),this._bounds.extend(h[S])):h[S]=this._convertLatLngs(o[S]);return h},_project:function(){var o=new be;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),h=new Y(o,o);this._rawPxBounds&&(this._pxBounds=new be([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(o,h,v){var S=o[0]instanceof nt,N=o.length,j,q;if(S){for(q=[],j=0;j<N;j++)q[j]=this._map.latLngToLayerPoint(o[j]),v.extend(q[j]);h.push(q)}else for(j=0;j<N;j++)this._projectLatlngs(o[j],h,v)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,v,S,N,j,q,ae,he;for(v=0,N=0,j=this._rings.length;v<j;v++)for(he=this._rings[v],S=0,q=he.length;S<q-1;S++)ae=Mi(he[S],he[S+1],o,S,!0),ae&&(h[N]=h[N]||[],h[N].push(ae[0]),(ae[1]!==he[S+1]||S===q-2)&&(h[N].push(ae[1]),N++))}},_simplifyPoints:function(){for(var o=this._parts,h=this.options.smoothFactor,v=0,S=o.length;v<S;v++)o[v]=Yt(o[v],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,h){var v,S,N,j,q,ae,he=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(v=0,j=this._parts.length;v<j;v++)for(ae=this._parts[v],S=0,q=ae.length,N=q-1;S<q;N=S++)if(!(!h&&S===0)&&bo(o,ae[N],ae[S])<=he)return!0;return!1}});function s(o,h){return new r(o,h)}r._flat=ua;var a=r.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ca(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var h=r.prototype._convertLatLngs.call(this,o),v=h.length;return v>=2&&h[0]instanceof nt&&h[0].equals(h[v-1])&&h.pop(),h},_setLatLngs:function(o){r.prototype._setLatLngs.call(this,o),sr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return sr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,h=this.options.weight,v=new Y(h,h);if(o=new be(o.min.subtract(v),o.max.add(v)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var S=0,N=this._rings.length,j;S<N;S++)j=eu(this._rings[S],o,!0),j.length&&this._parts.push(j)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var h=!1,v,S,N,j,q,ae,he,ye;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(j=0,he=this._parts.length;j<he;j++)for(v=this._parts[j],q=0,ye=v.length,ae=ye-1;q<ye;ae=q++)S=v[q],N=v[ae],S.y>o.y!=N.y>o.y&&o.x<(N.x-S.x)*(o.y-S.y)/(N.y-S.y)+S.x&&(h=!h);return h||r.prototype._containsPoint.call(this,o,!0)}});function u(o,h){return new a(o,h)}var d=Yr.extend({initialize:function(o,h){P(this,h),this._layers={},o&&this.addData(o)},addData:function(o){var h=I(o)?o:o.features,v,S,N;if(h){for(v=0,S=h.length;v<S;v++)N=h[v],(N.geometries||N.geometry||N.features||N.coordinates)&&this.addData(N);return this}var j=this.options;if(j.filter&&!j.filter(o))return this;var q=p(o,j);return q?(q.feature=W(o),q.defaultOptions=q.options,this.resetStyle(q),j.onEachFeature&&j.onEachFeature(o,q),this.addLayer(q)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=l({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(h){this._setLayerStyle(h,o)},this)},_setLayerStyle:function(o,h){o.setStyle&&(typeof h=="function"&&(h=h(o.feature)),o.setStyle(h))}});function p(o,h){var v=o.type==="Feature"?o.geometry:o,S=v?v.coordinates:null,N=[],j=h&&h.pointToLayer,q=h&&h.coordsToLatLng||_,ae,he,ye,Be;if(!S&&!v)return null;switch(v.type){case"Point":return ae=q(S),m(j,o,ae,h);case"MultiPoint":for(ye=0,Be=S.length;ye<Be;ye++)ae=q(S[ye]),N.push(m(j,o,ae,h));return new Yr(N);case"LineString":case"MultiLineString":return he=C(S,v.type==="LineString"?0:1,q),new r(he,h);case"Polygon":case"MultiPolygon":return he=C(S,v.type==="Polygon"?1:2,q),new a(he,h);case"GeometryCollection":for(ye=0,Be=v.geometries.length;ye<Be;ye++){var Je=p({geometry:v.geometries[ye],type:"Feature",properties:o.properties},h);Je&&N.push(Je)}return new Yr(N);case"FeatureCollection":for(ye=0,Be=v.features.length;ye<Be;ye++){var pt=p(v.features[ye],h);pt&&N.push(pt)}return new Yr(N);default:throw new Error("Invalid GeoJSON object.")}}function m(o,h,v,S){return o?o(h,v):new or(v,S&&S.markersInheritOptions&&S)}function _(o){return new nt(o[1],o[0],o[2])}function C(o,h,v){for(var S=[],N=0,j=o.length,q;N<j;N++)q=h?C(o[N],h-1,v):(v||_)(o[N]),S.push(q);return S}function A(o,h){return o=ge(o),o.alt!==void 0?[T(o.lng,h),T(o.lat,h),T(o.alt,h)]:[T(o.lng,h),T(o.lat,h)]}function k(o,h,v,S){for(var N=[],j=0,q=o.length;j<q;j++)N.push(h?k(o[j],sr(o[j])?0:h-1,v,S):A(o[j],S));return!h&&v&&N.length>0&&N.push(N[0].slice()),N}function B(o,h){return o.feature?l({},o.feature,{geometry:h}):W(h)}function W(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var K={toGeoJSON:function(o){return B(this,{type:"Point",coordinates:A(this.getLatLng(),o)})}};or.include(K),Ss.include(K),Ri.include(K),r.include({toGeoJSON:function(o){var h=!sr(this._latlngs),v=k(this._latlngs,h?1:0,!1,o);return B(this,{type:(h?"Multi":"")+"LineString",coordinates:v})}}),a.include({toGeoJSON:function(o){var h=!sr(this._latlngs),v=h&&!sr(this._latlngs[0]),S=k(this._latlngs,v?2:h?1:0,!0,o);return h||(S=[S]),B(this,{type:(v?"Multi":"")+"Polygon",coordinates:S})}}),mi.include({toMultiPoint:function(o){var h=[];return this.eachLayer(function(v){h.push(v.toGeoJSON(o).geometry.coordinates)}),B(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(o){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(o);var v=h==="GeometryCollection",S=[];return this.eachLayer(function(N){if(N.toGeoJSON){var j=N.toGeoJSON(o);if(v)S.push(j.geometry);else{var q=W(j);q.type==="FeatureCollection"?S.push.apply(S,q.features):S.push(q)}}}),v?B(this,{geometries:S,type:"GeometryCollection"}):{type:"FeatureCollection",features:S}}});function J(o,h){return new d(o,h)}var ie=J,ce=xn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,h,v){this._url=o,this._bounds=Ze(h),P(this,v)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ve(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Bt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&Ut(this._image),this},bringToBack:function(){return this._map&&rr(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=Ze(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",h=this._image=o?this._url:xt("img");if(Ve(h,"leaflet-image-layer"),this._zoomAnimated&&Ve(h,"leaflet-zoom-animated"),this.options.className&&Ve(h,this.options.className),h.onselectstart=E,h.onmousemove=E,h.onload=f(this.fire,this,"load"),h.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(o){var h=this._map.getZoomScale(o.zoom),v=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;H(this._image,v,h)},_reset:function(){var o=this._image,h=new be(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),v=h.getSize();ke(o,h.min),o.style.width=v.x+"px",o.style.height=v.y+"px"},_updateOpacity:function(){dt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),Ce=function(o,h,v){return new ce(o,h,v)},Se=ce.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",h=this._image=o?this._url:xt("video");if(Ve(h,"leaflet-image-layer"),this._zoomAnimated&&Ve(h,"leaflet-zoom-animated"),this.options.className&&Ve(h,this.options.className),h.onselectstart=E,h.onmousemove=E,h.onloadeddata=f(this.fire,this,"load"),o){for(var v=h.getElementsByTagName("source"),S=[],N=0;N<v.length;N++)S.push(v[N].src);this._url=v.length>0?S:[h.src];return}I(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var j=0;j<this._url.length;j++){var q=xt("source");q.src=this._url[j],h.appendChild(q)}}});function _e(o,h,v){return new Se(o,h,v)}var ht=ce.extend({_initImage:function(){var o=this._image=this._url;Ve(o,"leaflet-image-layer"),this._zoomAnimated&&Ve(o,"leaflet-zoom-animated"),this.options.className&&Ve(o,this.options.className),o.onselectstart=E,o.onmousemove=E}});function it(o,h,v){return new ht(o,h,v)}var Xt=xn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,h){o&&(o instanceof nt||I(o))?(this._latlng=ge(o),P(this,h)):(P(this,o),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&dt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&dt(this._container,1),this.bringToFront(),this.options.interactive&&(Ve(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(dt(this._container,0),this._removeTimeout=setTimeout(f(Bt,void 0,this._container),200)):Bt(this._container),this.options.interactive&&(Tt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=ge(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ut(this._container),this},bringToBack:function(){return this._map&&rr(this._container),this},_prepareOpen:function(o){var h=this._source;if(!h._map)return!1;if(h instanceof Yr){h=null;var v=this._source._layers;for(var S in v)if(v[S]._map){h=v[S];break}if(!h)return!1;this._source=h}if(!o)if(h.getCenter)o=h.getCenter();else if(h.getLatLng)o=h.getLatLng();else if(h.getBounds)o=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")o.innerHTML=h;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),h=oe(this.options.offset),v=this._getAnchor();this._zoomAnimated?ke(this._container,o.add(v)):h=h.add(o).add(v);var S=this._containerBottom=-h.y,N=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=S+"px",this._container.style.left=N+"px"}},_getAnchor:function(){return[0,0]}});mt.include({_initOverlay:function(o,h,v,S){var N=h;return N instanceof o||(N=new o(S).setContent(h)),v&&N.setLatLng(v),N}}),xn.include({_initOverlay:function(o,h,v,S){var N=v;return N instanceof o?(P(N,S),N._source=this):(N=h&&!S?h:new o(S,this),N.setContent(v)),N}});var Zn=Xt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,Xt.prototype.openOn.call(this,o)},onAdd:function(o){Xt.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof qr||this._source.on("preclick",hi))},onRemove:function(o){Xt.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof qr||this._source.off("preclick",hi))},getEvents:function(){var o=Xt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",h=this._container=xt("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),v=this._wrapper=xt("div",o+"-content-wrapper",h);if(this._contentNode=xt("div",o+"-content",v),Nr(h),oa(this._contentNode),et(h,"contextmenu",hi),this._tipContainer=xt("div",o+"-tip-container",h),this._tip=xt("div",o+"-tip",this._tipContainer),this.options.closeButton){var S=this._closeButton=xt("a",o+"-close-button",h);S.setAttribute("role","button"),S.setAttribute("aria-label","Close popup"),S.href="#close",S.innerHTML='<span aria-hidden="true">&#215;</span>',et(S,"click",function(N){Cn(N),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,h=o.style;h.width="",h.whiteSpace="nowrap";var v=o.offsetWidth;v=Math.min(v,this.options.maxWidth),v=Math.max(v,this.options.minWidth),h.width=v+1+"px",h.whiteSpace="",h.height="";var S=o.offsetHeight,N=this.options.maxHeight,j="leaflet-popup-scrolled";N&&S>N?(h.height=N+"px",Ve(o,j)):Tt(o,j),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),v=this._getAnchor();ke(this._container,h.add(v))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,h=parseInt(ct(this._container,"marginBottom"),10)||0,v=this._container.offsetHeight+h,S=this._containerWidth,N=new Y(this._containerLeft,-v-this._containerBottom);N._add(Vt(this._container));var j=o.layerPointToContainerPoint(N),q=oe(this.options.autoPanPadding),ae=oe(this.options.autoPanPaddingTopLeft||q),he=oe(this.options.autoPanPaddingBottomRight||q),ye=o.getSize(),Be=0,Je=0;j.x+S+he.x>ye.x&&(Be=j.x+S-ye.x+he.x),j.x-Be-ae.x<0&&(Be=j.x-ae.x),j.y+v+he.y>ye.y&&(Je=j.y+v-ye.y+he.y),j.y-Je-ae.y<0&&(Je=j.y-ae.y),(Be||Je)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([Be,Je]))}},_getAnchor:function(){return oe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Gn=function(o,h){return new Zn(o,h)};mt.mergeOptions({closePopupOnClick:!0}),mt.include({openPopup:function(o,h,v){return this._initOverlay(Zn,o,h,v).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),xn.include({bindPopup:function(o,h){return this._popup=this._initOverlay(Zn,this._popup,o,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof Yr||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){Tr(o);var h=o.layer||o.target;if(this._popup._source===h&&!(h instanceof qr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=h,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var Et=Xt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){Xt.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){Xt.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=Xt.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",h=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=xt("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+w(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var h,v,S=this._map,N=this._container,j=S.latLngToContainerPoint(S.getCenter()),q=S.layerPointToContainerPoint(o),ae=this.options.direction,he=N.offsetWidth,ye=N.offsetHeight,Be=oe(this.options.offset),Je=this._getAnchor();ae==="top"?(h=he/2,v=ye):ae==="bottom"?(h=he/2,v=0):ae==="center"?(h=he/2,v=ye/2):ae==="right"?(h=0,v=ye/2):ae==="left"?(h=he,v=ye/2):q.x<j.x?(ae="right",h=0,v=ye/2):(ae="left",h=he+(Be.x+Je.x)*2,v=ye/2),o=o.subtract(oe(h,v,!0)).add(Be).add(Je),Tt(N,"leaflet-tooltip-right"),Tt(N,"leaflet-tooltip-left"),Tt(N,"leaflet-tooltip-top"),Tt(N,"leaflet-tooltip-bottom"),Ve(N,"leaflet-tooltip-"+ae),ke(N,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&dt(this._container,o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(h)},_getAnchor:function(){return oe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),En=function(o,h){return new Et(o,h)};mt.include({openTooltip:function(o,h,v){return this._initOverlay(Et,o,h,v).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),xn.include({bindTooltip:function(o,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Et,this._tooltip,o,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var h=o?"off":"on",v={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?v.add=this._openTooltip:(v.mouseover=this._openTooltip,v.mouseout=this.closeTooltip,v.click=this._openTooltip,this._map?this._addFocusListeners():v.add=this._addFocusListeners),this._tooltip.options.sticky&&(v.mousemove=this._moveTooltip),this[h](v),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof Yr||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&(et(h,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),et(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var h=o.latlng,v,S;this._tooltip.options.sticky&&o.originalEvent&&(v=this._map.mouseEventToContainerPoint(o.originalEvent),S=this._map.containerPointToLayerPoint(v),h=this._map.layerPointToLatLng(S)),this._tooltip.setLatLng(h)}});var Yn=Cs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var h=o&&o.tagName==="DIV"?o:document.createElement("div"),v=this.options;if(v.html instanceof Element?(ys(h),h.appendChild(v.html)):h.innerHTML=v.html!==!1?v.html:"",v.bgPos){var S=oe(v.bgPos);h.style.backgroundPosition=-S.x+"px "+-S.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function Es(o){return new Yn(o)}Cs.Default=Co;var Kr=xn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){P(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),Bt(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ut(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(rr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof Y?o:new Y(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var h=this.getPane().children,v=-o(-1/0,1/0),S=0,N=h.length,j;S<N;S++)j=h[S].style.zIndex,h[S]!==this._container&&j&&(v=o(v,+j));isFinite(v)&&(this.options.zIndex=v+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ue.ielt9){dt(this._container,this.options.opacity);var o=+new Date,h=!1,v=!1;for(var S in this._tiles){var N=this._tiles[S];if(!(!N.current||!N.loaded)){var j=Math.min(1,(o-N.loaded)/200);dt(N.el,j),j<1?h=!0:(N.active?v=!0:this._onOpaqueTile(N),N.active=!0)}}v&&!this._noPrune&&this._pruneTiles(),h&&(le(this._fadeFrame),this._fadeFrame=me(this._updateOpacity,this))}},_onOpaqueTile:E,_initContainer:function(){this._container||(this._container=xt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,h=this.options.maxZoom;if(o!==void 0){for(var v in this._levels)v=Number(v),this._levels[v].el.children.length||v===o?(this._levels[v].el.style.zIndex=h-Math.abs(o-v),this._onUpdateLevel(v)):(Bt(this._levels[v].el),this._removeTilesAtZoom(v),this._onRemoveLevel(v),delete this._levels[v]);var S=this._levels[o],N=this._map;return S||(S=this._levels[o]={},S.el=xt("div","leaflet-tile-container leaflet-zoom-animated",this._container),S.el.style.zIndex=h,S.origin=N.project(N.unproject(N.getPixelOrigin()),o).round(),S.zoom=o,this._setZoomTransform(S,N.getCenter(),N.getZoom()),E(S.el.offsetWidth),this._onCreateLevel(S)),this._level=S,S}},_onUpdateLevel:E,_onRemoveLevel:E,_onCreateLevel:E,_pruneTiles:function(){if(this._map){var o,h,v=this._map.getZoom();if(v>this.options.maxZoom||v<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)h=this._tiles[o],h.retain=h.current;for(o in this._tiles)if(h=this._tiles[o],h.current&&!h.active){var S=h.coords;this._retainParent(S.x,S.y,S.z,S.z-5)||this._retainChildren(S.x,S.y,S.z,S.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var h in this._tiles)this._tiles[h].coords.z===o&&this._removeTile(h)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)Bt(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,h,v,S){var N=Math.floor(o/2),j=Math.floor(h/2),q=v-1,ae=new Y(+N,+j);ae.z=+q;var he=this._tileCoordsToKey(ae),ye=this._tiles[he];return ye&&ye.active?(ye.retain=!0,!0):(ye&&ye.loaded&&(ye.retain=!0),q>S?this._retainParent(N,j,q,S):!1)},_retainChildren:function(o,h,v,S){for(var N=2*o;N<2*o+2;N++)for(var j=2*h;j<2*h+2;j++){var q=new Y(N,j);q.z=v+1;var ae=this._tileCoordsToKey(q),he=this._tiles[ae];if(he&&he.active){he.retain=!0;continue}else he&&he.loaded&&(he.retain=!0);v+1<S&&this._retainChildren(N,j,v+1,S)}},_resetView:function(o){var h=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var h=this.options;return h.minNativeZoom!==void 0&&o<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<o?h.maxNativeZoom:o},_setView:function(o,h,v,S){var N=Math.round(h);this.options.maxZoom!==void 0&&N>this.options.maxZoom||this.options.minZoom!==void 0&&N<this.options.minZoom?N=void 0:N=this._clampZoom(N);var j=this.options.updateWhenZooming&&N!==this._tileZoom;(!S||j)&&(this._tileZoom=N,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),N!==void 0&&this._update(o),v||this._pruneTiles(),this._noPrune=!!v),this._setZoomTransforms(o,h)},_setZoomTransforms:function(o,h){for(var v in this._levels)this._setZoomTransform(this._levels[v],o,h)},_setZoomTransform:function(o,h,v){var S=this._map.getZoomScale(v,o.zoom),N=o.origin.multiplyBy(S).subtract(this._map._getNewPixelOrigin(h,v)).round();Ue.any3d?H(o.el,N,S):ke(o.el,N)},_resetGrid:function(){var o=this._map,h=o.options.crs,v=this._tileSize=this.getTileSize(),S=this._tileZoom,N=this._map.getPixelWorldBounds(this._tileZoom);N&&(this._globalTileRange=this._pxBoundsToTileRange(N)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,h.wrapLng[0]],S).x/v.x),Math.ceil(o.project([0,h.wrapLng[1]],S).x/v.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([h.wrapLat[0],0],S).y/v.x),Math.ceil(o.project([h.wrapLat[1],0],S).y/v.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var h=this._map,v=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),S=h.getZoomScale(v,this._tileZoom),N=h.project(o,this._tileZoom).floor(),j=h.getSize().divideBy(S*2);return new be(N.subtract(j),N.add(j))},_update:function(o){var h=this._map;if(h){var v=this._clampZoom(h.getZoom());if(o===void 0&&(o=h.getCenter()),this._tileZoom!==void 0){var S=this._getTiledPixelBounds(o),N=this._pxBoundsToTileRange(S),j=N.getCenter(),q=[],ae=this.options.keepBuffer,he=new be(N.getBottomLeft().subtract([ae,-ae]),N.getTopRight().add([ae,-ae]));if(!(isFinite(N.min.x)&&isFinite(N.min.y)&&isFinite(N.max.x)&&isFinite(N.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ye in this._tiles){var Be=this._tiles[ye].coords;(Be.z!==this._tileZoom||!he.contains(new Y(Be.x,Be.y)))&&(this._tiles[ye].current=!1)}if(Math.abs(v-this._tileZoom)>1){this._setView(o,v);return}for(var Je=N.min.y;Je<=N.max.y;Je++)for(var pt=N.min.x;pt<=N.max.x;pt++){var ar=new Y(pt,Je);if(ar.z=this._tileZoom,!!this._isValidTile(ar)){var Pn=this._tiles[this._tileCoordsToKey(ar)];Pn?Pn.current=!0:q.push(ar)}}if(q.sort(function(mr,da){return mr.distanceTo(j)-da.distanceTo(j)}),q.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Qr=document.createDocumentFragment();for(pt=0;pt<q.length;pt++)this._addTile(q[pt],Qr);this._level.el.appendChild(Qr)}}}},_isValidTile:function(o){var h=this._map.options.crs;if(!h.infinite){var v=this._globalTileRange;if(!h.wrapLng&&(o.x<v.min.x||o.x>v.max.x)||!h.wrapLat&&(o.y<v.min.y||o.y>v.max.y))return!1}if(!this.options.bounds)return!0;var S=this._tileCoordsToBounds(o);return Ze(this.options.bounds).overlaps(S)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var h=this._map,v=this.getTileSize(),S=o.scaleBy(v),N=S.add(v),j=h.unproject(S,o.z),q=h.unproject(N,o.z);return[j,q]},_tileCoordsToBounds:function(o){var h=this._tileCoordsToNwSe(o),v=new ot(h[0],h[1]);return this.options.noWrap||(v=this._map.wrapLatLngBounds(v)),v},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var h=o.split(":"),v=new Y(+h[0],+h[1]);return v.z=+h[2],v},_removeTile:function(o){var h=this._tiles[o];h&&(Bt(h.el),delete this._tiles[o],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){Ve(o,"leaflet-tile");var h=this.getTileSize();o.style.width=h.x+"px",o.style.height=h.y+"px",o.onselectstart=E,o.onmousemove=E,Ue.ielt9&&this.options.opacity<1&&dt(o,this.options.opacity)},_addTile:function(o,h){var v=this._getTilePos(o),S=this._tileCoordsToKey(o),N=this.createTile(this._wrapCoords(o),f(this._tileReady,this,o));this._initTile(N),this.createTile.length<2&&me(f(this._tileReady,this,o,null,N)),ke(N,v),this._tiles[S]={el:N,coords:o,current:!0},h.appendChild(N),this.fire("tileloadstart",{tile:N,coords:o})},_tileReady:function(o,h,v){h&&this.fire("tileerror",{error:h,tile:v,coords:o});var S=this._tileCoordsToKey(o);v=this._tiles[S],v&&(v.loaded=+new Date,this._map._fadeAnimated?(dt(v.el,0),le(this._fadeFrame),this._fadeFrame=me(this._updateOpacity,this)):(v.active=!0,this._pruneTiles()),h||(Ve(v.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:v.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ue.ielt9||!this._map._fadeAnimated?me(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var h=new Y(this._wrapX?b(o.x,this._wrapX):o.x,this._wrapY?b(o.y,this._wrapY):o.y);return h.z=o.z,h},_pxBoundsToTileRange:function(o){var h=this.getTileSize();return new be(o.min.unscaleBy(h).floor(),o.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function Ih(o){return new Kr(o)}var As=Kr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,h){this._url=o,h=P(this,h),h.detectRetina&&Ue.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,h){return this._url===o&&h===void 0&&(h=!0),this._url=o,h||this.redraw(),this},createTile:function(o,h){var v=document.createElement("img");return et(v,"load",f(this._tileOnLoad,this,h,v)),et(v,"error",f(this._tileOnError,this,h,v)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(v.referrerPolicy=this.options.referrerPolicy),v.alt="",v.src=this.getTileUrl(o),v},getTileUrl:function(o){var h={r:Ue.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var v=this._globalTileRange.max.y-o.y;this.options.tms&&(h.y=v),h["-y"]=v}return R(this._url,l(h,this.options))},_tileOnLoad:function(o,h){Ue.ielt9?setTimeout(f(o,this,null,h),0):o(null,h)},_tileOnError:function(o,h,v){var S=this.options.errorTileUrl;S&&h.getAttribute("src")!==S&&(h.src=S),o(v,h)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,h=this.options.maxZoom,v=this.options.zoomReverse,S=this.options.zoomOffset;return v&&(o=h-o),o+S},_getSubdomain:function(o){var h=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var o,h;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(h=this._tiles[o].el,h.onload=E,h.onerror=E,!h.complete)){h.src=Q;var v=this._tiles[o].coords;Bt(h),delete this._tiles[o],this.fire("tileabort",{tile:h,coords:v})}},_removeTile:function(o){var h=this._tiles[o];if(h)return h.el.setAttribute("src",Q),Kr.prototype._removeTile.call(this,o)},_tileReady:function(o,h,v){if(!(!this._map||v&&v.getAttribute("src")===Q))return Kr.prototype._tileReady.call(this,o,h,v)}});function Vp(o,h){return new As(o,h)}var Hp=As.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,h){this._url=o;var v=l({},this.defaultWmsParams);for(var S in h)S in this.options||(v[S]=h[S]);h=P(this,h);var N=h.detectRetina&&Ue.retina?2:1,j=this.getTileSize();v.width=j.x*N,v.height=j.y*N,this.wmsParams=v},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,As.prototype.onAdd.call(this,o)},getTileUrl:function(o){var h=this._tileCoordsToNwSe(o),v=this._crs,S=Pe(v.project(h[0]),v.project(h[1])),N=S.min,j=S.max,q=(this._wmsVersion>=1.3&&this._crs===bs?[N.y,N.x,j.y,j.x]:[N.x,N.y,j.x,j.y]).join(","),ae=As.prototype.getTileUrl.call(this,o);return ae+V(this.wmsParams,ae,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+q},setParams:function(o,h){return l(this.wmsParams,o),h||this.redraw(),this}});function Zb(o,h){return new Hp(o,h)}As.WMS=Hp,Vp.wms=Zb;var qi=xn.extend({options:{padding:.1},initialize:function(o){P(this,o),w(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ve(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,h){var v=this._map.getZoomScale(h,this._zoom),S=this._map.getSize().multiplyBy(.5+this.options.padding),N=this._map.project(this._center,h),j=S.multiplyBy(-v).add(N).subtract(this._map._getNewPixelOrigin(o,h));Ue.any3d?H(this._container,j,v):ke(this._container,j)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,h=this._map.getSize(),v=this._map.containerPointToLayerPoint(h.multiplyBy(-o)).round();this._bounds=new be(v,v.add(h.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Wp=qi.extend({options:{tolerance:0},getEvents:function(){var o=qi.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){qi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");et(o,"mousemove",this._onMouseMove,this),et(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),et(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){le(this._redrawRequest),delete this._ctx,Bt(this._container),Re(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var h in this._layers)o=this._layers[h],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){qi.prototype._update.call(this);var o=this._bounds,h=this._container,v=o.getSize(),S=Ue.retina?2:1;ke(h,o.min),h.width=S*v.x,h.height=S*v.y,h.style.width=v.x+"px",h.style.height=v.y+"px",Ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){qi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[w(o)]=o;var h=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var h=o._order,v=h.next,S=h.prev;v?v.prev=S:this._drawLast=S,S?S.next=v:this._drawFirst=v,delete o._order,delete this._layers[w(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var h=o.options.dashArray.split(/[, ]+/),v=[],S,N;for(N=0;N<h.length;N++){if(S=Number(h[N]),isNaN(S))return;v.push(S)}o.options._dashArray=v}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||me(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var h=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new be,this._redrawBounds.extend(o._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(o._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var h=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,h=this._redrawBounds;if(this._ctx.save(),h){var v=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,v.x,v.y),this._ctx.clip()}this._drawing=!0;for(var S=this._drawFirst;S;S=S.next)o=S.layer,(!h||o._pxBounds&&o._pxBounds.intersects(h))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,h){if(this._drawing){var v,S,N,j,q=o._parts,ae=q.length,he=this._ctx;if(ae){for(he.beginPath(),v=0;v<ae;v++){for(S=0,N=q[v].length;S<N;S++)j=q[v][S],he[S?"lineTo":"moveTo"](j.x,j.y);h&&he.closePath()}this._fillStroke(he,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var h=o._point,v=this._ctx,S=Math.max(Math.round(o._radius),1),N=(Math.max(Math.round(o._radiusY),1)||S)/S;N!==1&&(v.save(),v.scale(1,N)),v.beginPath(),v.arc(h.x,h.y/N,S,0,Math.PI*2,!1),N!==1&&v.restore(),this._fillStroke(v,o)}},_fillStroke:function(o,h){var v=h.options;v.fill&&(o.globalAlpha=v.fillOpacity,o.fillStyle=v.fillColor||v.color,o.fill(v.fillRule||"evenodd")),v.stroke&&v.weight!==0&&(o.setLineDash&&o.setLineDash(h.options&&h.options._dashArray||[]),o.globalAlpha=v.opacity,o.lineWidth=v.weight,o.strokeStyle=v.color,o.lineCap=v.lineCap,o.lineJoin=v.lineJoin,o.stroke())},_onClick:function(o){for(var h=this._map.mouseEventToLayerPoint(o),v,S,N=this._drawFirst;N;N=N.next)v=N.layer,v.options.interactive&&v._containsPoint(h)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(v))&&(S=v);this._fireEvent(S?[S]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,h)}},_handleMouseOut:function(o){var h=this._hoveredLayer;h&&(Tt(this._container,"leaflet-interactive"),this._fireEvent([h],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,h){if(!this._mouseHoverThrottled){for(var v,S,N=this._drawFirst;N;N=N.next)v=N.layer,v.options.interactive&&v._containsPoint(h)&&(S=v);S!==this._hoveredLayer&&(this._handleMouseOut(o),S&&(Ve(this._container,"leaflet-interactive"),this._fireEvent([S],o,"mouseover"),this._hoveredLayer=S)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,h,v){this._map._fireDOMEvent(h,v||h.type,o)},_bringToFront:function(o){var h=o._order;if(h){var v=h.next,S=h.prev;if(v)v.prev=S;else return;S?S.next=v:v&&(this._drawFirst=v),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(o)}},_bringToBack:function(o){var h=o._order;if(h){var v=h.next,S=h.prev;if(S)S.next=v;else return;v?v.prev=S:S&&(this._drawLast=S),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(o)}}});function Zp(o){return Ue.canvas?new Wp(o):null}var Cl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Gb={_initContainer:function(){this._container=xt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(qi.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var h=o._container=Cl("shape");Ve(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",o._path=Cl("path"),h.appendChild(o._path),this._updateStyle(o),this._layers[w(o)]=o},_addPath:function(o){var h=o._container;this._container.appendChild(h),o.options.interactive&&o.addInteractiveTarget(h)},_removePath:function(o){var h=o._container;Bt(h),o.removeInteractiveTarget(h),delete this._layers[w(o)]},_updateStyle:function(o){var h=o._stroke,v=o._fill,S=o.options,N=o._container;N.stroked=!!S.stroke,N.filled=!!S.fill,S.stroke?(h||(h=o._stroke=Cl("stroke")),N.appendChild(h),h.weight=S.weight+"px",h.color=S.color,h.opacity=S.opacity,S.dashArray?h.dashStyle=I(S.dashArray)?S.dashArray.join(" "):S.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=S.lineCap.replace("butt","flat"),h.joinstyle=S.lineJoin):h&&(N.removeChild(h),o._stroke=null),S.fill?(v||(v=o._fill=Cl("fill")),N.appendChild(v),v.color=S.fillColor||S.color,v.opacity=S.fillOpacity):v&&(N.removeChild(v),o._fill=null)},_updateCircle:function(o){var h=o._point.round(),v=Math.round(o._radius),S=Math.round(o._radiusY||v);this._setPath(o,o._empty()?"M0 0":"AL "+h.x+","+h.y+" "+v+","+S+" 0,"+65535*360)},_setPath:function(o,h){o._path.v=h},_bringToFront:function(o){Ut(o._container)},_bringToBack:function(o){rr(o._container)}},nu=Ue.vml?Cl:jn,Sl=qi.extend({_initContainer:function(){this._container=nu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=nu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Bt(this._container),Re(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){qi.prototype._update.call(this);var o=this._bounds,h=o.getSize(),v=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,v.setAttribute("width",h.x),v.setAttribute("height",h.y)),ke(v,o.min),v.setAttribute("viewBox",[o.min.x,o.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(o){var h=o._path=nu("path");o.options.className&&Ve(h,o.options.className),o.options.interactive&&Ve(h,"leaflet-interactive"),this._updateStyle(o),this._layers[w(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){Bt(o._path),o.removeInteractiveTarget(o._path),delete this._layers[w(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var h=o._path,v=o.options;h&&(v.stroke?(h.setAttribute("stroke",v.color),h.setAttribute("stroke-opacity",v.opacity),h.setAttribute("stroke-width",v.weight),h.setAttribute("stroke-linecap",v.lineCap),h.setAttribute("stroke-linejoin",v.lineJoin),v.dashArray?h.setAttribute("stroke-dasharray",v.dashArray):h.removeAttribute("stroke-dasharray"),v.dashOffset?h.setAttribute("stroke-dashoffset",v.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),v.fill?(h.setAttribute("fill",v.fillColor||v.color),h.setAttribute("fill-opacity",v.fillOpacity),h.setAttribute("fill-rule",v.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(o,h){this._setPath(o,Er(o._parts,h))},_updateCircle:function(o){var h=o._point,v=Math.max(Math.round(o._radius),1),S=Math.max(Math.round(o._radiusY),1)||v,N="a"+v+","+S+" 0 1,0 ",j=o._empty()?"M0 0":"M"+(h.x-v)+","+h.y+N+v*2+",0 "+N+-v*2+",0 ";this._setPath(o,j)},_setPath:function(o,h){o._path.setAttribute("d",h)},_bringToFront:function(o){Ut(o._path)},_bringToBack:function(o){rr(o._path)}});Ue.vml&&Sl.include(Gb);function Gp(o){return Ue.svg||Ue.vml?new Sl(o):null}mt.include({getRenderer:function(o){var h=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var h=this._paneRenderers[o];return h===void 0&&(h=this._createRenderer({pane:o}),this._paneRenderers[o]=h),h},_createRenderer:function(o){return this.options.preferCanvas&&Zp(o)||Gp(o)}});var Yp=a.extend({initialize:function(o,h){a.prototype.initialize.call(this,this._boundsToLatLngs(o),h)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=Ze(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function Yb(o,h){return new Yp(o,h)}Sl.create=nu,Sl.pointsToPath=Er,d.geometryToLayer=p,d.coordsToLatLng=_,d.coordsToLatLngs=C,d.latLngToCoords=A,d.latLngsToCoords=k,d.getFeature=B,d.asFeature=W,mt.mergeOptions({boxZoom:!0});var Xp=ir.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){et(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Re(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Bt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Rn(),We(),this._startPoint=this._map.mouseEventToContainerPoint(o),et(document,{contextmenu:Tr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=xt("div","leaflet-zoom-box",this._container),Ve(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var h=new be(this._point,this._startPoint),v=h.getSize();ke(this._box,h.min),this._box.style.width=v.x+"px",this._box.style.height=v.y+"px"},_finish:function(){this._moved&&(Bt(this._box),Tt(this._container,"leaflet-crosshair")),xo(),jt(),Re(document,{contextmenu:Tr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var h=new ot(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});mt.addInitHook("addHandler","boxZoom",Xp),mt.mergeOptions({doubleClickZoom:!0});var qp=ir.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var h=this._map,v=h.getZoom(),S=h.options.zoomDelta,N=o.originalEvent.shiftKey?v-S:v+S;h.options.doubleClickZoom==="center"?h.setZoom(N):h.setZoomAround(o.containerPoint,N)}});mt.addInitHook("addHandler","doubleClickZoom",qp),mt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Kp=ir.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new Ii(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}Ve(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Tt(this._map._container,"leaflet-grab"),Tt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=Ze(this._map.options.maxBounds);this._offsetLimit=Pe(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var h=this._lastTime=+new Date,v=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(v),this._times.push(h),this._prunePositions(h)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,h){return o-(o-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;o.x<h.min.x&&(o.x=this._viscousLimit(o.x,h.min.x)),o.y<h.min.y&&(o.y=this._viscousLimit(o.y,h.min.y)),o.x>h.max.x&&(o.x=this._viscousLimit(o.x,h.max.x)),o.y>h.max.y&&(o.y=this._viscousLimit(o.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,h=Math.round(o/2),v=this._initialWorldOffset,S=this._draggable._newPos.x,N=(S-h+v)%o+h-v,j=(S+h+v)%o-h-v,q=Math.abs(N+v)<Math.abs(j+v)?N:j;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=q},_onDragEnd:function(o){var h=this._map,v=h.options,S=!v.inertia||o.noInertia||this._times.length<2;if(h.fire("dragend",o),S)h.fire("moveend");else{this._prunePositions(+new Date);var N=this._lastPos.subtract(this._positions[0]),j=(this._lastTime-this._times[0])/1e3,q=v.easeLinearity,ae=N.multiplyBy(q/j),he=ae.distanceTo([0,0]),ye=Math.min(v.inertiaMaxSpeed,he),Be=ae.multiplyBy(ye/he),Je=ye/(v.inertiaDeceleration*q),pt=Be.multiplyBy(-Je/2).round();!pt.x&&!pt.y?h.fire("moveend"):(pt=h._limitOffset(pt,h.options.maxBounds),me(function(){h.panBy(pt,{duration:Je,easeLinearity:q,noMoveStart:!0,animate:!0})}))}}});mt.addInitHook("addHandler","dragging",Kp),mt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Qp=ir.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),et(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Re(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,h=document.documentElement,v=o.scrollTop||h.scrollTop,S=o.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(S,v)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var h=this._panKeys={},v=this.keyCodes,S,N;for(S=0,N=v.left.length;S<N;S++)h[v.left[S]]=[-1*o,0];for(S=0,N=v.right.length;S<N;S++)h[v.right[S]]=[o,0];for(S=0,N=v.down.length;S<N;S++)h[v.down[S]]=[0,o];for(S=0,N=v.up.length;S<N;S++)h[v.up[S]]=[0,-1*o]},_setZoomDelta:function(o){var h=this._zoomKeys={},v=this.keyCodes,S,N;for(S=0,N=v.zoomIn.length;S<N;S++)h[v.zoomIn[S]]=o;for(S=0,N=v.zoomOut.length;S<N;S++)h[v.zoomOut[S]]=-o},_addHooks:function(){et(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Re(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var h=o.keyCode,v=this._map,S;if(h in this._panKeys){if(!v._panAnim||!v._panAnim._inProgress)if(S=this._panKeys[h],o.shiftKey&&(S=oe(S).multiplyBy(3)),v.options.maxBounds&&(S=v._limitOffset(oe(S),v.options.maxBounds)),v.options.worldCopyJump){var N=v.wrapLatLng(v.unproject(v.project(v.getCenter()).add(S)));v.panTo(N)}else v.panBy(S)}else if(h in this._zoomKeys)v.setZoom(v.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&v._popup&&v._popup.options.closeOnEscapeKey)v.closePopup();else return;Tr(o)}}});mt.addInitHook("addHandler","keyboard",Qp),mt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Jp=ir.extend({addHooks:function(){et(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Re(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var h=_s(o),v=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var S=Math.max(v-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),S),Tr(o)},_performZoom:function(){var o=this._map,h=o.getZoom(),v=this._map.options.zoomSnap||0;o._stop();var S=this._delta/(this._map.options.wheelPxPerZoomLevel*4),N=4*Math.log(2/(1+Math.exp(-Math.abs(S))))/Math.LN2,j=v?Math.ceil(N/v)*v:N,q=o._limitZoom(h+(this._delta>0?j:-j))-h;this._delta=0,this._startTime=null,q&&(o.options.scrollWheelZoom==="center"?o.setZoom(h+q):o.setZoomAround(this._lastMousePos,h+q))}});mt.addInitHook("addHandler","scrollWheelZoom",Jp);var Xb=600;mt.mergeOptions({tapHold:Ue.touchNative&&Ue.safari&&Ue.mobile,tapTolerance:15});var $p=ir.extend({addHooks:function(){et(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Re(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var h=o.touches[0];this._startPos=this._newPos=new Y(h.clientX,h.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(et(document,"touchend",Cn),et(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),Xb),et(document,"touchend touchcancel contextmenu",this._cancel,this),et(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){Re(document,"touchend",Cn),Re(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),Re(document,"touchend touchcancel contextmenu",this._cancel,this),Re(document,"touchmove",this._onMove,this)},_onMove:function(o){var h=o.touches[0];this._newPos=new Y(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,h){var v=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});v._simulated=!0,h.target.dispatchEvent(v)}});mt.addInitHook("addHandler","tapHold",$p),mt.mergeOptions({touchZoom:Ue.touch,bounceAtZoomLimits:!0});var em=ir.extend({addHooks:function(){Ve(this._map._container,"leaflet-touch-zoom"),et(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Tt(this._map._container,"leaflet-touch-zoom"),Re(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var h=this._map;if(!(!o.touches||o.touches.length!==2||h._animatingZoom||this._zooming)){var v=h.mouseEventToContainerPoint(o.touches[0]),S=h.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(v.add(S)._divideBy(2))),this._startDist=v.distanceTo(S),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),et(document,"touchmove",this._onTouchMove,this),et(document,"touchend touchcancel",this._onTouchEnd,this),Cn(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var h=this._map,v=h.mouseEventToContainerPoint(o.touches[0]),S=h.mouseEventToContainerPoint(o.touches[1]),N=v.distanceTo(S)/this._startDist;if(this._zoom=h.getScaleZoom(N,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&N<1||this._zoom>h.getMaxZoom()&&N>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,N===1)return}else{var j=v._add(S)._divideBy(2)._subtract(this._centerPoint);if(N===1&&j.x===0&&j.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(j),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),le(this._animRequest);var q=f(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=me(q,this,!0),Cn(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,le(this._animRequest),Re(document,"touchmove",this._onTouchMove,this),Re(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});mt.addInitHook("addHandler","touchZoom",em),mt.BoxZoom=Xp,mt.DoubleClickZoom=qp,mt.Drag=Kp,mt.Keyboard=Qp,mt.ScrollWheelZoom=Jp,mt.TapHold=$p,mt.TouchZoom=em,n.Bounds=be,n.Browser=Ue,n.CRS=_t,n.Canvas=Wp,n.Circle=Ss,n.CircleMarker=Ri,n.Class=je,n.Control=Ir,n.DivIcon=Yn,n.DivOverlay=Xt,n.DomEvent=Wn,n.DomUtil=gn,n.Draggable=Ii,n.Evented=Oe,n.FeatureGroup=Yr,n.GeoJSON=d,n.GridLayer=Kr,n.Handler=ir,n.Icon=Cs,n.ImageOverlay=ce,n.LatLng=nt,n.LatLngBounds=ot,n.Layer=xn,n.LayerGroup=mi,n.LineUtil=tu,n.Map=mt,n.Marker=or,n.Mixin=Jc,n.Path=qr,n.Point=Y,n.PolyUtil=xl,n.Polygon=a,n.Polyline=r,n.Popup=Zn,n.PosAnimation=gl,n.Projection=wl,n.Rectangle=Yp,n.Renderer=qi,n.SVG=Sl,n.SVGOverlay=ht,n.TileLayer=As,n.Tooltip=Et,n.Transformation=ut,n.Util=Ie,n.VideoOverlay=Se,n.bind=f,n.bounds=Pe,n.canvas=Zp,n.circle=M,n.circleMarker=yt,n.control=_o,n.divIcon=Es,n.extend=l,n.featureGroup=Xr,n.geoJSON=J,n.geoJson=ie,n.gridLayer=Ih,n.icon=_l,n.imageOverlay=Ce,n.latLng=ge,n.latLngBounds=Ze,n.layerGroup=pr,n.map=Kc,n.marker=Th,n.point=oe,n.polygon=u,n.polyline=s,n.popup=Gn,n.rectangle=Yb,n.setOptions=P,n.stamp=w,n.svg=Gp,n.svgOverlay=it,n.tileLayer=Vp,n.tooltip=En,n.transformation=en,n.version=i,n.videoOverlay=_e;var qb=window.L;n.noConflict=function(){return window.L=qb,this},window.L=n})})(Q0,Q0.exports);var sl=Q0.exports;const Wc=yy(sl);function xh(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function yh(e,t){return t==null?function(i,l){const c=F.useRef();return c.current||(c.current=e(i,l)),c}:function(i,l){const c=F.useRef();c.current||(c.current=e(i,l));const f=F.useRef(i),{instance:y}=c.current;return F.useEffect(function(){f.current!==i&&(t(y,i,f.current),f.current=i)},[y,i,l]),c}}function Pb(e,t){F.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var c;(c=t.layerContainer)==null||c.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function Lb(e){return function(n){const i=mh(),l=e(gh(n,i),i);return Ib(i.map,n.attribution),jp(l.current,n.eventHandlers),Pb(l.current,i),l}}function OM(e,t){const n=F.useRef();F.useEffect(function(){if(t.pathOptions!==n.current){const l=t.pathOptions??{};e.instance.setStyle(l),n.current=l}},[e,t])}function PM(e){return function(n){const i=mh(),l=e(gh(n,i),i);return jp(l.current,n.eventHandlers),Pb(l.current,i),OM(l.current,n),l}}function LM(e,t){const n=yh(e,t),i=Lb(n);return Ob(i)}function DM(e,t){const n=yh(e),i=RM(n,t);return MM(i)}function BM(e,t){const n=yh(e,t),i=PM(n);return Ob(i)}function jM(e,t){const n=yh(e,t),i=Lb(n);return kM(i)}function FM(e,t,n){const{opacity:i,zIndex:l}=t;i!=null&&i!==n.opacity&&e.setOpacity(i),l!=null&&l!==n.zIndex&&e.setZIndex(l)}function Db(){return mh().map}function J0(){return J0=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},J0.apply(this,arguments)}function zM({bounds:e,boundsOptions:t,center:n,children:i,className:l,id:c,placeholder:f,style:y,whenReady:w,zoom:g,...b},E){const[T]=F.useState({className:l,id:c,style:y}),[O,D]=F.useState(null);F.useImperativeHandle(E,()=>(O==null?void 0:O.map)??null,[O]);const P=F.useCallback(z=>{if(z!==null&&O===null){const R=new sl.Map(z,b);n!=null&&g!=null?R.setView(n,g):e!=null&&R.fitBounds(e,t),w!=null&&R.whenReady(w),D(IM(R))}},[]);F.useEffect(()=>()=>{O==null||O.map.remove()},[O]);const V=O?Ho.createElement(Rb,{value:O},i):f??null;return Ho.createElement("div",J0({},T,{ref:P}),V)}const UM=F.forwardRef(zM),Ef=LM(function({position:t,...n},i){const l=new sl.Marker(t,n);return xh(l,Mb(i,{overlayContainer:l}))},function(t,n,i){n.position!==i.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),VM=BM(function({positions:t,...n},i){const l=new sl.Polyline(t,n);return xh(l,Mb(i,{overlayContainer:l}))},function(t,n,i){n.positions!==i.positions&&t.setLatLngs(n.positions)}),Af=DM(function(t,n){const i=new sl.Popup(t,n.overlayContainer);return xh(i,n)},function(t,n,{position:i},l){F.useEffect(function(){const{instance:f}=t;function y(g){g.popup===f&&(f.update(),l(!0))}function w(g){g.popup===f&&l(!1)}return n.map.on({popupopen:y,popupclose:w}),n.overlayContainer==null?(i!=null&&f.setLatLng(i),f.openOn(n.map)):n.overlayContainer.bindPopup(f),function(){var b;n.map.off({popupopen:y,popupclose:w}),(b=n.overlayContainer)==null||b.unbindPopup(),n.map.removeLayer(f)}},[t,n,l,i])}),HM=jM(function({url:t,...n},i){const l=new sl.TileLayer(t,gh(n,i));return xh(l,i)},function(t,n,i){FM(t,n,i);const{url:l}=n;l!=null&&l!==i.url&&t.setUrl(l)});delete Wc.Icon.Default.prototype._getIconUrl;Wc.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Bb=e=>new Wc.DivIcon({className:"custom-icon",html:`<div style="background-color: ${e}; width: 24px; height: 24px; border-radius: 50%; border: 2px solid white; box-shadow: 0 4px 6px rgba(0,0,0,0.1);"></div>`,iconSize:[24,24],iconAnchor:[12,12]}),WM=new Wc.DivIcon({className:"truck-icon",html:`<div style="background-color: #0052cc; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 2px solid white; box-shadow: 0 4px 6px rgba(0,0,0,0.2);">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle></svg>
    </div>`,iconSize:[32,32],iconAnchor:[16,16]}),ZM=Bb("#8b5cf6");function GM({center:e}){const t=Db();return F.useEffect(()=>{e&&t.setView(e,t.getZoom())},[e,t]),null}function YM({points:e}){const t=Db();return F.useEffect(()=>{if(!t)return;const n=Array.isArray(e)?e.filter(Boolean):[];if(n.length!==0)try{const i=Wc.latLngBounds(n);t.fitBounds(i,{padding:[30,30]})}catch{}},[e,t]),null}function jb({shipments:e,routeGeometry:t,currentLocation:n,originLocation:i}){const c=n?[n.lat,n.lon]:i?[i.lat,i.lon]:[44.4268,26.1025],[f,y]=F.useState([]);F.useEffect(()=>{if(t&&t.coordinates){const b=t.coordinates.map(E=>[E[1],E[0]]);y(b)}},[t]);const w=(e||[]).map(b=>{var P,V,z,R;const E=(b==null?void 0:b.latitude)??((V=(P=b==null?void 0:b.raw_data)==null?void 0:P.recipientLocation)==null?void 0:V.latitude),T=(b==null?void 0:b.longitude)??((R=(z=b==null?void 0:b.raw_data)==null?void 0:z.recipientLocation)==null?void 0:R.longitude),O=Number(E),D=Number(T);return!Number.isFinite(O)||!Number.isFinite(D)||Math.abs(O)<1e-4&&Math.abs(D)<1e-4?null:[O,D]}).filter(Boolean),g=[...n?[[n.lat,n.lon]]:[],...i?[[i.lat,i.lon]]:[],...w,...f];return x.jsxs("div",{className:"h-[400px] w-full rounded-3xl overflow-hidden shadow-inner border border-white/20 relative z-0",children:[x.jsxs(UM,{center:c,zoom:13,style:{height:"100%",width:"100%"},zoomControl:!1,children:[x.jsx(HM,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors  <a href="https://carto.com/attributions">CARTO</a>'}),x.jsx(GM,{center:c}),x.jsx(YM,{points:g}),n&&x.jsx(Ef,{position:[n.lat,n.lon],icon:WM,children:x.jsx(Af,{children:x.jsx("div",{className:"font-sans font-bold text-brand-600",children:"You are here"})})}),i&&x.jsx(Ef,{position:[i.lat,i.lon],icon:ZM,children:x.jsx(Af,{children:x.jsx("div",{className:"font-sans font-bold text-slate-800",children:i.label||"Warehouse"})})}),e.map(b=>{var O,D,P,V;const E=Number((b==null?void 0:b.latitude)??((D=(O=b==null?void 0:b.raw_data)==null?void 0:O.recipientLocation)==null?void 0:D.latitude)),T=Number((b==null?void 0:b.longitude)??((V=(P=b==null?void 0:b.raw_data)==null?void 0:P.recipientLocation)==null?void 0:V.longitude));return!Number.isFinite(E)||!Number.isFinite(T)||Math.abs(E)<1e-4&&Math.abs(T)<1e-4?null:x.jsx(Ef,{position:[E,T],icon:Bb(b.status==="Delivered"?"#22c55e":"#f59e0b"),children:x.jsx(Af,{className:"glass-popup",children:x.jsxs("div",{className:"p-1 min-w-[150px]",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[x.jsx("span",{className:`w-2 h-2 rounded-full ${b.status==="Delivered"?"bg-green-500":"bg-amber-500"}`}),x.jsx("span",{className:"text-xs font-black uppercase text-slate-500 tracking-wider",children:b.awb})]}),x.jsx("p",{className:"font-bold text-slate-800 text-sm mb-1",children:b.recipient_name}),x.jsx("p",{className:"text-xs text-slate-500 truncate",children:b.delivery_address})]})})},b.awb)}),f.length>0&&x.jsx(VM,{positions:f,color:"#4c9aff",weight:4,opacity:.8,dashArray:"10, 10"})]}),x.jsx("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2 z-[1000]",children:x.jsx("button",{className:"glass-strong p-3 rounded-xl text-white hover:text-brand-400 hover:border-brand-500/50 transition-all shadow-lg active:scale-95",onClick:b=>{b.stopPropagation()},children:x.jsx(v_,{size:20})})})]})}function Fb(){const[e,t]=F.useState(null),[n,i]=F.useState(null);return F.useEffect(()=>{if(!navigator.geolocation){i("Geolocation is not supported by your browser");return}const l=w=>{const{latitude:g,longitude:b,heading:E,speed:T}=w.coords;t({latitude:g,longitude:b,heading:E,speed:T})},c=w=>{i(w.message)},f={enableHighAccuracy:!0,timeout:5e3,maximumAge:0},y=navigator.geolocation.watchPosition(l,c,f);return()=>navigator.geolocation.clearWatch(y)},[]),{location:e,error:n}}const zb="arynik_routes_v1",XM=e=>{try{return localStorage.getItem(e)}catch{return null}},qM=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},ss=()=>new Date().toISOString(),Fp=()=>new Date().toISOString().slice(0,10),Ub=()=>{try{return crypto.randomUUID()}catch{return`route-${Date.now()}-${Math.floor(Math.random()*1e5)}`}},Ka=e=>String(e||"").trim().toUpperCase(),zp=e=>String(e||"").trim().toUpperCase()||null,vh=e=>String(e||"").trim().toUpperCase()||null,Qa=e=>String(e||"").trim()||null,Vb=e=>{try{return String(e||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"")}catch{return String(e||"")}},Or=e=>Vb(String(e||"")).trim().replace(/[_-]+/g," ").replace(/\s+/g," ").toLowerCase(),ho=()=>{const e=XM(zb);if(!e)return[];try{const t=JSON.parse(e);if(Array.isArray(t))return t}catch{}return[]},Zc=e=>{const t=Array.isArray(e)?e:[];return qM(zb,JSON.stringify(t)),t},Ja=[{name:"Bacau",code:"BC",aliases:["bacau","bacu","bc"]},{name:"Iasi",code:"IS",aliases:["iasi","iai","is"]},{name:"Neamt",code:"NT",aliases:["neamt","neam","nt"]},{name:"Galati",code:"GL",aliases:["galati","galai","gl"]},{name:"Botosani",code:"BT",aliases:["botosani","botoani","bt"]},{name:"Suceava",code:"SV",aliases:["suceava","sv"]},{name:"Vaslui",code:"VS",aliases:["vaslui","vs"]}],KM=e=>{var i,l,c,f,y,w,g,b,E,T;const t=(e==null?void 0:e.county)||((l=(i=e==null?void 0:e.raw_data)==null?void 0:i.recipientLocation)==null?void 0:l.county)||((f=(c=e==null?void 0:e.raw_data)==null?void 0:c.recipientLocation)==null?void 0:f.countyName)||((w=(y=e==null?void 0:e.raw_data)==null?void 0:y.recipientLocation)==null?void 0:w.region)||((b=(g=e==null?void 0:e.raw_data)==null?void 0:g.recipientLocation)==null?void 0:b.regionName)||((E=e==null?void 0:e.raw_data)==null?void 0:E.county)||((T=e==null?void 0:e.raw_data)==null?void 0:T.countyName),n=Or(t);if(!n)return null;for(const O of Ja){const D=Array.isArray(O.aliases)?O.aliases:[];for(const P of D){const V=Or(P);if(V&&(n===V||n.includes(` ${V} `)||n.startsWith(`${V} `)||n.endsWith(` ${V}`)||n.includes(V)))return O.name}if(Or(O.name)===n)return O.name}return null},QM=e=>{const t=Vb(String((e==null?void 0:e.status)||"")).trim().toLowerCase();return t?!(t.includes("delivered")||t.includes("livrat")||t.includes("return")||t.includes("returnat")||t.includes("returnata")||t.includes("anulat")||t.includes("anulata")||t.includes("cancel")||t.includes("refuz")):!0},ic=()=>ho().filter(Boolean).sort((e,t)=>String(t.updated_at||"").localeCompare(String(e.updated_at||""))),Up=e=>ho().find(t=>t&&t.id===e)||null,Hb=({name:e,driver_id:t,driver_name:n,helper_name:i,vehicle_plate:l,date:c,county:f,kind:y,region:w}={})=>{const g=ho(),b={id:Ub(),name:String(e||"").trim()||"New Route",driver_id:zp(t),driver_name:Qa(n),vehicle_plate:vh(l),helper_name:Qa(i),date:c?String(c):Fp(),kind:y?String(y):void 0,region:w?String(w):void 0,county:f?String(f):void 0,awbs:[],created_at:ss(),updated_at:ss()};return g.unshift(b),Zc(g),b},Ro=(e,t={})=>{const n=ho(),i=n.findIndex(b=>b&&b.id===e);if(i===-1)return null;const l=n[i]||{},c=Object.prototype.hasOwnProperty.call(t,"driver_id")?zp(t.driver_id):l.driver_id??null,f=Object.prototype.hasOwnProperty.call(t,"vehicle_plate")?vh(t.vehicle_plate):l.vehicle_plate??null,y=Object.prototype.hasOwnProperty.call(t,"driver_name")?Qa(t.driver_name):l.driver_name??null,w=Object.prototype.hasOwnProperty.call(t,"helper_name")?Qa(t.helper_name):l.helper_name??null,g={...l,...t,id:l.id,driver_id:c,vehicle_plate:f,driver_name:y,helper_name:w,updated_at:ss()};return n[i]=g,Zc(n),g},Wb=e=>{const t=vh(e==null?void 0:e.vehicle_plate),n=Qa(e==null?void 0:e.driver_name)||String((e==null?void 0:e.driver_id)||"").trim()||null,i=Qa(e==null?void 0:e.helper_name),l=[];t&&l.push(t),n&&l.push(n);let c=l.join(" - ");return i&&(c=c?`${c} + ${i}`:i),c||""},Tc=e=>{const t=Wb(e);return t||String((e==null?void 0:e.name)||(e==null?void 0:e.county)||"").trim()||"Route"},JM=e=>{const t=ho().filter(n=>n&&n.id!==e);return Zc(t),!0},$M=(e,t)=>{const n=Ka(t),i=Up(e);if(!i)return null;const l=Array.isArray(i.awbs)?i.awbs:[];return Ro(e,{awbs:l.filter(c=>c!==n)})},e6=(e,t)=>{if(!Up(e))return null;const i=(Array.isArray(t)?t:[]).map(Ka).filter(Boolean);return Ro(e,{awbs:i})},t6=e=>{const t=Ka(e);return t&&ho().find(l=>Array.isArray(l==null?void 0:l.awbs)&&l.awbs.includes(t))||null},my=e=>{const t=String(e||"").trim()||Fp(),n=new Set(Ja.map(i=>Or(i.name)));return ic().filter(i=>String((i==null?void 0:i.date)||"")===t).filter(i=>String((i==null?void 0:i.kind)||"").toLowerCase()==="county"||String((i==null?void 0:i.region)||"").toLowerCase()==="moldova").filter(i=>{const l=Or((i==null?void 0:i.county)||(i==null?void 0:i.name));return l&&n.has(l)}).sort((i,l)=>Or((i==null?void 0:i.county)||(i==null?void 0:i.name)).localeCompare(Or((l==null?void 0:l.county)||(l==null?void 0:l.name))))},$0=(e,t,{scopeDate:n=!0}={})=>{const i=Ka(t);if(!i)return null;const l=ho(),c=l.findIndex(b=>b&&b.id===e);if(c===-1)return null;const f=l[c],y=String((f==null?void 0:f.date)||""),w=Array.isArray(f==null?void 0:f.awbs)?f.awbs:[];let g=!1;for(let b=0;b<l.length;b+=1){const E=l[b];!E||!Array.isArray(E.awbs)||E.awbs.length===0||b!==c&&(n&&y&&String(E.date||"")!==y||E.awbs.includes(i)&&(l[b]={...E,awbs:E.awbs.filter(T=>T!==i),updated_at:ss()},g=!0))}return w.includes(i)||(l[c]={...f,awbs:[...w,i],updated_at:ss()},g=!0),g&&Zc(l),l[c]},e1=({date:e,shipments:t,driver_id:n}={})=>{const i=String(e||"").trim()||Fp(),l=Array.isArray(t)?t:[],c=ho(),f=new Map(Ja.map(R=>[Or(R.name),R])),y=new Map;for(const R of c){if(!R||String(R.date||"")!==i)continue;const I=Or(R.county||R.name);I&&f.has(I)&&y.set(I,R)}let w=0;const g=[];for(const R of Ja){const I=Or(R.name);let Z=y.get(I);if(Z){let Q=!1;String(Z.kind||"").toLowerCase()!=="county"&&(Z.kind="county",Q=!0),String(Z.region||"").toLowerCase()!=="moldova"&&(Z.region="Moldova",Q=!0),Z.county||(Z.county=R.name,Q=!0),Q&&(Z.updated_at=ss())}else{const Q=c.find(X=>X&&Or(X.county||X.name)===I&&(X.vehicle_plate||X.driver_id));Z={id:Ub(),name:R.name,driver_id:zp((Q==null?void 0:Q.driver_id)||n),driver_name:(Q==null?void 0:Q.driver_name)||null,vehicle_plate:vh(Q==null?void 0:Q.vehicle_plate)||null,helper_name:(Q==null?void 0:Q.helper_name)||null,date:i,kind:"county",region:"Moldova",county:R.name,awbs:[],created_at:ss(),updated_at:ss()},c.unshift(Z),y.set(I,Z),w+=1}g.push(Z)}const b=new Set;for(const R of c)R&&String(R.date||"")===i&&(Array.isArray(R.awbs)?R.awbs:[]).forEach(I=>{const Z=Ka(I);Z&&b.add(Z)});let E=0,T=0,O=0,D=0,P=0,V=0;const z=new Set;for(const R of l){if(!QM(R))continue;E+=1;const I=Ka(R==null?void 0:R.awb);if(!I)continue;const Z=KM(R);if(!Z){P+=1;continue}const Q=Or(Z),X=f.get(Q);if(!X){V+=1;continue}if(T+=1,b.has(I)){D+=1;continue}const G=y.get(Or(X.name));if(!G)continue;const ee=Array.isArray(G.awbs)?G.awbs:[];ee.includes(I)||(G.awbs=[...ee,I],G.updated_at=ss(),z.add(G.id),b.add(I),O+=1)}return(w||z.size>0||O)&&Zc(c),{date:i,created_routes:w,allocated_awbs:O,deliverable_total:E,deliverable_in_moldova:T,already_assigned:D,missing_county:P,outside_region:V,routes:g}},n6=200;function r6(){const[e,t]=F.useState([]),[n,i]=F.useState(!0),[l,c]=F.useState(""),[f,y]=F.useState(null),[w,g]=F.useState("list"),[b,E]=F.useState(null),[T,O]=F.useState({}),D=F.useRef({}),[P,V]=F.useState({active:!1,done:0,total:0,current:""}),[z,R]=F.useState({open:!1,awb:null}),[I,Z]=F.useState([]),[Q,X]=F.useState(""),[G,ee]=F.useState({}),[U,re]=F.useState({}),me=ci(),{user:le}=Vr(),{location:Ie}=Fb(),je=zn(le,ko),ue=zn(le,ka),Me=["Manager","Admin","Dispatcher","Driver"].includes(le==null?void 0:le.role),Oe=async()=>{i(!0);try{const $=le.token,we=await Hc($);t(we)}catch($){console.error("Failed to fetch shipments",$)}finally{i(!1)}};F.useEffect(()=>{Oe()},[]),F.useEffect(()=>{Z(ic())},[]);const Y=($,we="RON")=>{const ne=Number($);return Number.isFinite(ne)?`${ne.toFixed(2)} ${String(we||"RON").toUpperCase()}`:"--"},ve=$=>{const we=($==null?void 0:$.raw_data)||{},ne=(we==null?void 0:we.client)||(we==null?void 0:we.clientData)||{},te=(we==null?void 0:we.senderLocation)||{},xe=($==null?void 0:$.sender_shop_name)||(ne==null?void 0:ne.name)||(ne==null?void 0:ne.clientName)||(te==null?void 0:te.name)||(te==null?void 0:te.shopName)||"";return String(xe||"").trim()},oe=async($,{refresh:we=!0}={})=>{const ne=String($||"").toUpperCase();if(ne){ee(te=>({...te,[ne]:!0}));try{const te=le==null?void 0:le.token,xe=await ub(te,ne,{refresh:we});t(Ne=>(Array.isArray(Ne)?Ne:[]).map(Le=>String((Le==null?void 0:Le.awb)||"").toUpperCase()===ne?{...Le,...xe}:Le))}catch(te){console.warn("Failed to load shipment details",te),X(`Failed to load details for ${ne}`),setTimeout(()=>X(""),2500)}finally{ee(te=>({...te,[ne]:!1}))}}},be=async $=>{var xe,Ne,Le,Te;if(!je)return;const we=String(($==null?void 0:$.awb)||"").toUpperCase();if(!we)return;const ne=($==null?void 0:$.locality)||((Ne=(xe=$==null?void 0:$.raw_data)==null?void 0:xe.recipientLocation)==null?void 0:Ne.locality)||((Te=(Le=$==null?void 0:$.raw_data)==null?void 0:Le.recipientLocation)==null?void 0:Te.localityName)||"",te=ne?{locality:ne}:{};re(Qe=>({...Qe,[we]:!0}));try{const Qe=le==null?void 0:le.token;await fh(Qe,{awb:we,event_id:"2",timestamp:new Date().toISOString(),payload:te}),t(Nt=>(Array.isArray(Nt)?Nt:[]).map(He=>String((He==null?void 0:He.awb)||"").toUpperCase()===we?{...He,status:"Delivered"}:He)),X(`Marked ${we} as Delivered`),setTimeout(()=>X(""),2500),oe(we,{refresh:!0})}catch{try{await Lp(we,"2",te),X(`Queued Delivered for ${we}`),setTimeout(()=>X(""),2500)}catch{X(`Failed to mark Delivered for ${we}`),setTimeout(()=>X(""),2500)}}finally{re(Qe=>({...Qe,[we]:!1}))}},Pe=Ie?{lat:Ie.latitude,lon:Ie.longitude}:null;F.useEffect(()=>{D.current=T},[T]);const ot=async $=>{var Le;const we=String(($==null?void 0:$.awb)||"").toUpperCase(),ne=rc($);let te=Number($==null?void 0:$.latitude),xe=Number($==null?void 0:$.longitude);if(g("map"),E(null),!Ke(te)||!Ke(xe)){const Te=(Le=D.current)==null?void 0:Le[we];Te&&(!Te.q||Te.q===ne)&&Ke(Te.lat)&&Ke(Te.lon)&&(te=Number(Te.lat),xe=Number(Te.lon))}if(!Ke(te)||!Ke(xe)){const Te=Od(ne);Te&&Ke(Te.lat)&&Ke(Te.lon)&&(te=Number(Te.lat),xe=Number(Te.lon),we&&O(Qe=>({...Qe,[we]:{lat:te,lon:xe,ts:Date.now(),source:"cache",q:ne}})))}if(!Ke(te)||!Ke(xe)){const Te=await K0(ne);Te&&Ke(Te.lat)&&Ke(Te.lon)&&(te=Number(Te.lat),xe=Number(Te.lon),we&&O(Qe=>({...Qe,[we]:{lat:te,lon:xe,ts:Date.now(),source:"geocode",q:ne}})))}const Ne=Rd();if(Ne&&Ke(Ne.lat)&&Ke(Ne.lon)&&Ke(te)&&Ke(xe)){const Te=await AM({lat:Ne.lat,lon:Ne.lon},{lat:te,lon:xe});E(Te)}else E(null)},Ze=$=>{if(Me){try{e1({date:new Date().toISOString().slice(0,10),shipments:[],driver_id:(le==null?void 0:le.driver_id)||null})}catch{}Z(ic()),R({open:!0,awb:String($||"").toUpperCase()})}},nt=async $=>{var te,xe;const we=z.awb;if(!we)return;if($0($,we,{scopeDate:!0})){const Ne=ic().find(Le=>Le.id===$);if(X(`Assigned ${we} to ${(Ne==null?void 0:Ne.name)||"route"}${Ne!=null&&Ne.vehicle_plate?` (${Ne.vehicle_plate})`:""}`),setTimeout(()=>X(""),2500),ue){const Le=String((Ne==null?void 0:Ne.driver_id)||"").trim();if(!Le)X("Route has no driver assigned; allocation not sent."),setTimeout(()=>X(""),3e3);else try{await Rp(le==null?void 0:le.token,we,Le),X(`Allocated ${we} to ${Le} and notified recipient.`),setTimeout(()=>X(""),3e3)}catch(Te){console.warn("Allocation API failed",Te);const Qe=(xe=(te=Te==null?void 0:Te.response)==null?void 0:te.data)==null?void 0:xe.detail;X(Qe?`Allocation failed: ${Qe}`:"Allocated locally only (API failed)."),setTimeout(()=>X(""),3e3)}}}R({open:!1,awb:null})},ge=()=>{const $=z.awb;if(!$)return;let we="";try{we=localStorage.getItem("arynik_last_vehicle_plate_v1")||""}catch{}const ne=Hb({name:`Route ${new Date().toLocaleDateString()}`,driver_id:(le==null?void 0:le.driver_id)||null,driver_name:(le==null?void 0:le.name)||null,helper_name:(le==null?void 0:le.helper_name)||null,vehicle_plate:String(we||"").trim().toUpperCase()||null,date:new Date().toISOString().slice(0,10)});$0(ne.id,$,{scopeDate:!0}),R({open:!1,awb:null}),X(`Created route and assigned ${$}`),setTimeout(()=>X(""),2500),me(`/routes/${ne.id}`)},_t=e.filter($=>{var we,ne;return((we=$.awb)==null?void 0:we.toLowerCase().includes(l.toLowerCase()))||$.recipient_name&&((ne=$.recipient_name)==null?void 0:ne.toLowerCase().includes(l.toLowerCase()))}),ft=F.useMemo(()=>_t.slice(0,n6),[_t]),Bn=F.useMemo(()=>ft.map($=>String(($==null?void 0:$.awb)||"").toUpperCase()).join("|"),[ft]);F.useEffect(()=>{if(w!=="map"||!ft||ft.length===0)return;let $=!1;return(async()=>{const we=ft.length,ne=D.current||{},te={},xe=[];let Ne=0;for(const He of ft){if($)return;const Xe=String((He==null?void 0:He.awb)||"").toUpperCase();if(!Xe){Ne+=1;continue}const Mt=rc(He);if(Ke(He==null?void 0:He.latitude)&&Ke(He==null?void 0:He.longitude)){te[Xe]={lat:Number(He.latitude),lon:Number(He.longitude),ts:Date.now(),source:"shipment",q:Mt},Ne+=1;continue}const At=ne[Xe];if(At&&(!At.q||At.q===Mt)&&Ke(At.lat)&&Ke(At.lon)){At.q||(te[Xe]={...At,q:Mt}),Ne+=1;continue}const Ft=Od(Mt);if(Ft){Ke(Ft.lat)&&Ke(Ft.lon)&&(te[Xe]={lat:Number(Ft.lat),lon:Number(Ft.lon),ts:Number(Ft.ts||Date.now()),source:"cache",q:Mt}),Ne+=1;continue}xe.push({awb:Xe,query:Mt})}if($)return;if(Object.keys(te).length>0&&O(He=>({...He,...te})),xe.length===0){V({active:!1,done:we,total:we,current:""});return}V({active:!0,done:Ne,total:we,current:""});let Le={},Te=0,Qe=Date.now();const Nt=()=>{if($||Object.keys(Le).length===0)return;const He=Le;Le={},Te=0,Qe=Date.now(),O(Xe=>({...Xe,...He}))};for(const He of xe){if($)return;const{awb:Xe,query:Mt}=He;V({active:!0,done:Ne,total:we,current:Xe});const At=await K0(Mt);At&&Ke(At.lat)&&Ke(At.lon)&&Xe&&(Le[Xe]={lat:Number(At.lat),lon:Number(At.lon),ts:Date.now(),source:"geocode",q:Mt},Te+=1),Ne+=1;const Ft=Date.now()-Qe;(Te>=5||Ft>300)&&Nt()}Nt(),!$&&V({active:!1,done:Ne,total:we,current:""})})(),()=>{$=!0}},[w,Bn]);const Qt=F.useMemo(()=>{if(w!=="map")return _t;const $=T||{};return _t.map(we=>{const ne=String((we==null?void 0:we.awb)||"").toUpperCase(),te=$[ne],xe=rc(we);return te&&(!te.q||te.q===xe)&&Ke(te.lat)&&Ke(te.lon)?{...we,latitude:Number(te.lat),longitude:Number(te.lon)}:we})},[w,_t,T]),ut=20,[en,at]=F.useState(1);F.useEffect(()=>{at(1)},[l,w]);const Hn=Math.ceil(_t.length/ut),jn=w==="list"?_t.slice((en-1)*ut,en*ut):_t,Er=$=>$==="Delivered"?"from-emerald-500 to-emerald-600":$==="In Transit"?"from-blue-500 to-blue-600":"from-amber-500 to-amber-600",Zt=$=>$==="Delivered"?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":$==="In Transit"?"bg-blue-500/20 text-blue-400 border-blue-500/30":"bg-amber-500/20 text-amber-400 border-amber-500/30";return x.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[x.jsx("div",{className:"absolute top-20 right-0 w-72 h-72 bg-violet-500/10 rounded-full blur-3xl animate-float"}),x.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),x.jsxs("div",{className:"sticky top-0 z-40 glass-strong backdrop-blur-xl border-b border-white/10 pb-2 shadow-sm",children:[x.jsxs("div",{className:"p-4 flex items-center gap-4",children:[x.jsx("button",{onClick:()=>me(-1),className:"p-2 -ml-2 rounded-xl glass-light text-slate-300 hover:text-white transition-colors border border-white/10",children:x.jsx(qo,{})}),x.jsx("h1",{className:"flex-1 font-black text-xl text-gradient tracking-tight",children:"Shipments"}),x.jsxs("div",{className:"flex glass-strong p-1 rounded-xl border border-white/10",children:[x.jsx("button",{onClick:()=>g("list"),className:`p-2 rounded-lg transition-all ${w==="list"?"bg-gradient-to-r from-violet-600 to-purple-600 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:x.jsx(m_,{size:20})}),x.jsx("button",{onClick:()=>g("map"),className:`p-2 rounded-lg transition-all ${w==="map"?"bg-gradient-to-r from-violet-600 to-purple-600 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:x.jsx(y_,{size:20})})]}),x.jsx("button",{onClick:Oe,className:`p-2 rounded-xl glass-light hover:bg-violet-500/20 text-violet-400 transition-all border border-white/10 ${n?"animate-spin":""}`,children:x.jsx(io,{size:20})})]}),x.jsx("div",{className:"px-4 pb-2",children:x.jsxs("div",{className:"relative group",children:[x.jsx(Xa,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-violet-400 transition-colors z-10",size:18}),x.jsx("input",{type:"text",placeholder:"Search AWB, Client...",className:"w-full pl-12 pr-4 py-3.5 glass-strong rounded-2xl outline-none focus:ring-2 focus:ring-violet-500/30 border border-white/10 text-sm font-medium text-white placeholder-slate-500 transition-all",value:l,onChange:$=>c($.target.value)})]})})]}),x.jsx("div",{className:"flex-1 p-4 space-y-3 pb-32 relative z-10",children:x.jsxs(Qs,{mode:"wait",children:[Q&&x.jsx(qe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"glass-strong p-4 rounded-2xl border border-emerald-500/20 text-emerald-300 text-xs font-bold",children:Q}),n&&e.length===0?x.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"absolute inset-0 bg-violet-500/20 blur-xl rounded-full animate-pulse"}),x.jsx(Br,{className:"animate-spin relative z-10 text-violet-400",size:48})]}),x.jsx("p",{className:"mt-6 font-bold text-xs uppercase tracking-widest text-slate-500",children:"Syncing Data..."})]}):_t.length===0?x.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20 text-slate-400",children:[x.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:x.jsx(ps,{className:"text-slate-500",size:36})}),x.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No shipments found"}),x.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Try adjusting your search"})]}):w==="map"?x.jsxs(qe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"h-[70vh] w-full rounded-3xl overflow-hidden border-iridescent shadow-2xl relative",children:[x.jsx(jb,{shipments:Qt,currentLocation:Pe,originLocation:Rd(),routeGeometry:b}),P.active&&x.jsxs("div",{className:"absolute top-4 left-4 glass-strong rounded-2xl border border-white/10 px-4 py-3 text-white text-xs font-bold shadow-lg",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(Br,{className:"animate-spin text-violet-300",size:14}),x.jsx("span",{className:"uppercase tracking-widest text-[10px] text-slate-300",children:"Geocoding"})]}),x.jsxs("div",{className:"mt-1 text-[10px] text-slate-400 font-black uppercase tracking-wider",children:[P.done,"/",P.total," ",P.current?`(${P.current})`:""]}),x.jsx("div",{className:"mt-2 h-1.5 w-48 bg-white/10 rounded-full overflow-hidden",children:x.jsx("div",{className:"h-full bg-gradient-to-r from-violet-500 to-purple-500",style:{width:`${Math.min(100,Math.round(P.done/Math.max(1,P.total)*100))}%`}})}),x.jsx("div",{className:"mt-2 text-[9px] text-slate-500 font-bold",children:"Tip: search a city/awb first to reduce requests."})]})]}):x.jsxs("div",{className:"space-y-3",children:[jn.map(($,we)=>{var ne,te,xe,Ne,Le;return x.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:we*.05},className:`glass-strong rounded-3xl overflow-hidden transition-all duration-300 border border-white/10 ${f===we?"ring-2 ring-violet-500/30 shadow-glow-sm":""}`,children:[x.jsxs("div",{onClick:()=>{const Te=f===we?null:we;y(Te),Te!==null&&oe($.awb,{refresh:!1})},className:"p-5 flex items-center gap-4 cursor-pointer relative",children:[x.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shadow-sm bg-gradient-to-br ${Er($.status)}`,children:x.jsx(ps,{size:24,strokeWidth:2,className:"text-white"})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[x.jsx("h3",{className:"font-mono text-[10px] font-black uppercase tracking-widest text-slate-500",children:$.awb}),x.jsxs("div",{className:"flex items-center gap-2",children:[(()=>{const Te=t6($.awb);return Te?x.jsx("span",{className:"text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border bg-emerald-500/15 text-emerald-300 border-emerald-500/20",children:Tc(Te)}):null})(),x.jsx("span",{className:`text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border ${Zt($.status)}`,children:$.status||"Active"})]})]}),x.jsx("p",{className:"text-sm font-bold text-white truncate leading-tight mb-2",children:$.recipient_name}),x.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400",children:[x.jsx(dI,{size:11,strokeWidth:2.5}),x.jsx("p",{className:"text-[10px] font-medium truncate",children:$.delivery_address||$.locality||"No Address"})]})]}),x.jsx(Js,{className:`text-slate-500 transition-transform duration-300 ${f===we?"rotate-90 text-violet-400":""}`,size:20})]}),x.jsx(Qs,{children:f===we&&x.jsx(qe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},children:x.jsxs("div",{className:"p-5 space-y-4 bg-black/20 border-t border-white/5",children:[x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsxs("div",{className:"glass-light p-4 rounded-2xl flex items-center gap-3 border border-white/10",children:[x.jsx("div",{className:"p-2 bg-violet-500/20 rounded-xl",children:x.jsx(Nd,{size:16,className:"text-violet-400"})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-0.5",children:"Contact"}),x.jsx("p",{className:"text-xs font-bold text-white truncate",children:$.recipient_phone||"--"})]})]}),x.jsxs("div",{className:"glass-light p-4 rounded-2xl flex items-center gap-3 border border-white/10",children:[x.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl",children:x.jsx(ra,{size:16,className:"text-emerald-400"})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-0.5",children:"Recipient"}),x.jsx("p",{className:"text-xs font-bold text-white truncate",children:$.recipient_name})]})]})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[x.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Packages"}),x.jsx("p",{className:"text-sm font-black text-white",children:Number.isFinite(Number($.number_of_parcels))?Number($.number_of_parcels):((ne=$==null?void 0:$.raw_data)==null?void 0:ne.numberOfDistinctBarcodes)||((te=$==null?void 0:$.raw_data)==null?void 0:te.numberOfParcels)||1})]}),x.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[x.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Payment"}),x.jsx("p",{className:"text-sm font-black text-white",children:Y($.payment_amount??$.shipping_cost??$.estimated_shipping_cost,$.currency||((xe=$==null?void 0:$.raw_data)==null?void 0:xe.currency)||"RON")}),x.jsx("p",{className:"text-[10px] text-slate-500 font-bold mt-1 truncate",children:$.shipping_cost?`Cost: ${Y($.shipping_cost,$.currency||"RON")}`:$.estimated_shipping_cost?`Est: ${Y($.estimated_shipping_cost,$.currency||"RON")}`:"Not loaded"})]}),x.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[x.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"COD"}),x.jsx("p",{className:"text-sm font-black text-white",children:Y($.cod_amount,$.currency||"RON")})]}),x.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[x.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Declared"}),x.jsx("p",{className:"text-sm font-black text-white",children:Y($.declared_value,$.currency||"RON")})]}),x.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10 col-span-2",children:[x.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Content"}),x.jsx("p",{className:"text-xs font-bold text-white truncate",children:$.content_description||((Ne=$==null?void 0:$.raw_data)==null?void 0:Ne.contentDescription)||((Le=$==null?void 0:$.raw_data)==null?void 0:Le.contents)||"--"}),x.jsxs("p",{className:"text-[10px] text-slate-500 font-bold mt-1 truncate",children:[$.dimensions?`Dims: ${$.dimensions}`:"",$.weight?`  W: ${Number($.weight).toFixed(2)} kg`:"",$.volumetric_weight?`  Vol: ${Number($.volumetric_weight).toFixed(2)} kg`:""]}),x.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:[$.shipment_reference?`Ref: ${$.shipment_reference}`:"",$.client_order_id?`  Order: ${$.client_order_id}`:""]}),x.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:[ve($)?`Client: ${ve($)}`:"",$.source_channel?`${ve($)?"  ":""}Channel: ${$.source_channel}`:""]})]})]}),Array.isArray($.tracking_history)&&$.tracking_history.length>0&&x.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[x.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-2",children:"History"}),x.jsx("div",{className:"space-y-2",children:$.tracking_history.slice(0,4).map((Te,Qe)=>x.jsxs("div",{className:"flex items-start justify-between gap-3",children:[x.jsx("p",{className:"text-[11px] font-bold text-slate-200 truncate",children:(Te==null?void 0:Te.eventDescription)||(Te==null?void 0:Te.statusDescription)||"Update"}),x.jsx("p",{className:"text-[10px] font-bold text-slate-500 whitespace-nowrap",children:Te!=null&&Te.eventDate?new Date(Te.eventDate).toLocaleString():""})]},Qe))})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsxs("button",{onClick:()=>oe($.awb,{refresh:!0}),className:`w-full btn-premium py-3 bg-gradient-to-r from-slate-700 to-slate-800 hover:from-slate-600 hover:to-slate-700 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm ${G[String(($==null?void 0:$.awb)||"").toUpperCase()]?"opacity-70 cursor-not-allowed":""}`,disabled:G[String(($==null?void 0:$.awb)||"").toUpperCase()],title:"Fetch full details + history from Postis",children:[x.jsx(io,{size:16,className:G[String(($==null?void 0:$.awb)||"").toUpperCase()]?"animate-spin":""}),"Details"]}),je?x.jsxs("button",{onClick:()=>be($),className:`w-full btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm ${U[String(($==null?void 0:$.awb)||"").toUpperCase()]?"opacity-70 cursor-not-allowed":""}`,disabled:U[String(($==null?void 0:$.awb)||"").toUpperCase()]||String(($==null?void 0:$.status)||"").toLowerCase()==="delivered",title:"Mark as Delivered",children:[x.jsx(ah,{size:16}),"Delivered"]}):x.jsx("div",{className:"w-full glass-light rounded-xl border border-white/10 flex items-center justify-center text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Read-only"})]}),x.jsxs("button",{onClick:()=>ot($),className:"w-full btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm",children:[x.jsx(v_,{size:16}),"View on Map"]}),Me?x.jsxs("button",{onClick:()=>Ze($.awb),className:"w-full btn-premium py-3 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm",children:[x.jsx($s,{size:16}),ue?"Allocate to Truck":"Assign to Route"]}):null]})})})]},$.awb||we)}),Hn>1&&x.jsxs("div",{className:"flex items-center justify-between pt-4 glass-strong rounded-2xl p-4 border border-white/10",children:[x.jsx("button",{onClick:()=>at($=>Math.max(1,$-1)),disabled:en===1,className:"p-2 rounded-xl hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-white",children:x.jsx(qo,{size:20})}),x.jsxs("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:["Page ",en," of ",Hn]}),x.jsx("button",{onClick:()=>at($=>Math.min(Hn,$+1)),disabled:en===Hn,className:"p-2 rounded-xl hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-white",children:x.jsx(Js,{size:20})})]})]})]})}),x.jsx(Qs,{children:z.open&&x.jsx(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-end justify-center bg-black/60 backdrop-blur-sm p-4",onClick:()=>R({open:!1,awb:null}),children:x.jsxs(qe.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},exit:{y:30,opacity:0},className:"w-full max-w-md glass-strong rounded-3xl border-iridescent p-5 space-y-4",onClick:$=>$.stopPropagation(),children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Assign AWB"}),x.jsx("p",{className:"text-sm font-bold text-white font-mono mt-1",children:z.awb})]}),x.jsx("button",{onClick:ge,className:"px-4 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-300 text-[10px] font-black uppercase tracking-widest active:scale-95 transition-all",children:"Create Route"})]}),x.jsx("div",{className:"space-y-2 max-h-[45vh] overflow-y-auto",children:I.length===0?x.jsx("p",{className:"text-xs text-slate-500",children:"No routes yet. Tap Create Route."}):I.map($=>x.jsxs("button",{onClick:()=>nt($.id),className:"w-full p-4 rounded-2xl border border-white/10 hover:border-emerald-500/30 transition-all text-left glass-light flex items-center justify-between gap-3",children:[x.jsxs("div",{className:"min-w-0",children:[x.jsx("p",{className:"text-sm font-bold text-white truncate",children:Tc($)}),x.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1",children:[$.date,"  ",Array.isArray($.awbs)?$.awbs.length:0," stops",$.vehicle_plate?`  ${$.vehicle_plate}`:""]})]}),x.jsx("span",{className:"text-[10px] font-black text-emerald-300 uppercase tracking-wide",children:"Select"})]},$.id))})]})})})]})}function i6(){const[e,t]=F.useState(new Date),[n,i]=F.useState({}),[l,c]=F.useState(!0),f=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),y=new Date(e.getFullYear(),e.getMonth(),1).getDay(),w=()=>t(new Date(e.getFullYear(),e.getMonth()-1,1)),g=()=>t(new Date(e.getFullYear(),e.getMonth()+1,1)),b=e.toLocaleString("default",{month:"long"}),E=e.getFullYear();F.useEffect(()=>{(async()=>{c(!0);try{const V=localStorage.getItem("token"),z=new Date(e.getFullYear(),e.getMonth(),1).toISOString(),R=new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59).toISOString(),Z=(await kp(V,{start_date:z,end_date:R,limit:2e3})).reduce((Q,X)=>{const G=new Date(X.timestamp).getDate();return Q[G]||(Q[G]=[]),Q[G].push(X),Q},{});i(Z)}catch(V){console.error("Failed to fetch monthly deliveries",V)}finally{c(!1)}})()},[e]);const T=[];for(let P=0;P<y;P+=1)T.push(x.jsx("div",{className:"h-24"},`empty-${P}`));for(let P=1;P<=f;P+=1){const V=n[P]||[],z=V.length>0,R=P===new Date().getDate()&&e.getMonth()===new Date().getMonth()&&e.getFullYear()===new Date().getFullYear();T.push(x.jsxs("div",{className:`h-24 border-t border-white/5 p-2 relative flex flex-col items-center justify-center gap-1 transition-all duration-300 hover:bg-white/5 cursor-pointer group ${R?"bg-violet-500/10 border-violet-500/30":""}`,children:[x.jsx("span",{className:`text-xs font-black absolute top-2 right-2 transition-all ${R?"text-violet-400":"text-slate-500 group-hover:text-violet-300"}`,children:P}),z&&x.jsxs("div",{className:"flex flex-col items-center animate-scale-in",children:[x.jsx("div",{className:"p-2 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl text-white shadow-glow-sm",children:x.jsx(ps,{size:16,strokeWidth:2.5})}),x.jsxs("span",{className:"text-[9px] font-black text-emerald-400 uppercase mt-1.5 tracking-wide",children:[V.length," AWB"]})]})]},P))}const O=Object.values(n).flat().length,D=O>0?(O/new Date().getDate()).toFixed(1):0;return x.jsxs("div",{className:"min-h-screen flex flex-col relative overflow-hidden",children:[x.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),x.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),x.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[x.jsxs("div",{children:[x.jsx("h1",{className:"text-xl font-black text-gradient tracking-tight",children:"Delivery Calendar"}),x.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"Track your monthly performance"})]}),x.jsx("div",{className:"w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10",children:x.jsx(h_,{size:20,className:"text-violet-400"})})]}),x.jsxs("div",{className:"flex-1 p-4 pb-32 space-y-6 relative z-10",children:[x.jsxs("div",{className:"glass-strong rounded-[32px] shadow-2xl border-iridescent overflow-hidden animate-scale-in",children:[x.jsxs("div",{className:"p-6 flex items-center justify-between bg-gradient-to-r from-violet-600 via-purple-600 to-violet-700 text-white relative overflow-hidden",children:[x.jsx("div",{className:"absolute inset-0 shimmer opacity-20"}),x.jsx("button",{onClick:w,className:"p-2.5 hover:bg-white/20 rounded-xl transition-all active:scale-95 relative z-10 magnetic",children:x.jsx(rI,{size:20,strokeWidth:2.5})}),x.jsxs("h2",{className:"text-lg font-black uppercase tracking-widest relative z-10",children:[b," ",E]}),x.jsx("button",{onClick:g,className:"p-2.5 hover:bg-white/20 rounded-xl transition-all active:scale-95 relative z-10 magnetic",children:x.jsx(Js,{size:20,strokeWidth:2.5})})]}),x.jsxs("div",{className:"grid grid-cols-7 text-center py-4 bg-black/20 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:[x.jsx("div",{children:"Sun"}),x.jsx("div",{children:"Mon"}),x.jsx("div",{children:"Tue"}),x.jsx("div",{children:"Wed"}),x.jsx("div",{children:"Thu"}),x.jsx("div",{children:"Fri"}),x.jsx("div",{children:"Sat"})]}),x.jsxs("div",{className:"grid grid-cols-7 relative min-h-[400px]",children:[l&&x.jsx("div",{className:"absolute inset-0 glass-strong z-10 flex items-center justify-center backdrop-blur-sm",children:x.jsxs("div",{className:"text-center",children:[x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"absolute inset-0 bg-violet-500/20 blur-xl rounded-full animate-pulse"}),x.jsx(Br,{className:"animate-spin relative z-10 text-violet-400",size:48})]}),x.jsx("p",{className:"mt-6 font-bold text-xs uppercase tracking-widest text-slate-500",children:"Loading..."})]})}),T]})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Monthly Insights"}),x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsxs("div",{className:"glass-strong p-5 rounded-2xl border-iridescent animate-scale-in",style:{animationDelay:"0.1s"},children:[x.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[x.jsx("div",{className:"p-2 bg-violet-500/20 rounded-lg",children:x.jsx(ps,{size:16,className:"text-violet-400"})}),x.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Total"})]}),x.jsx("p",{className:"text-3xl font-black text-gradient-purple",children:O}),x.jsx("p",{className:"text-[10px] text-slate-500 font-medium mt-1",children:"Deliveries"})]}),x.jsxs("div",{className:"glass-strong p-5 rounded-2xl border-iridescent animate-scale-in",style:{animationDelay:"0.2s"},children:[x.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[x.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:x.jsx(Td,{size:16,className:"text-emerald-400"})}),x.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Average"})]}),x.jsx("p",{className:"text-3xl font-black text-gradient-blue",children:D}),x.jsx("p",{className:"text-[10px] text-slate-500 font-medium mt-1",children:"Per Day"})]})]}),x.jsxs("div",{className:"glass-strong p-5 rounded-2xl border-iridescent flex items-center gap-4 animate-scale-in",style:{animationDelay:"0.3s"},children:[x.jsx("div",{className:"p-4 bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl shadow-glow-sm",children:x.jsx(b_,{size:24,className:"text-white"})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"text-sm font-black text-white",children:"Active Month"}),x.jsxs("p",{className:"text-[10px] text-slate-400 font-medium uppercase tracking-wide mt-1",children:[O," shipments processed in ",b]})]})]})]})]})]})}const gy=e=>{try{return String(e||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim().toLowerCase()}catch{return String(e||"").trim().toLowerCase()}};function s6(){const e=ci(),{user:t}=Vr(),[n,i]=F.useState([]),[l,c]=F.useState(""),[f,y]=F.useState(new Date().toISOString().slice(0,10)),[w,g]=F.useState(()=>{try{return localStorage.getItem("arynik_last_vehicle_plate_v1")||""}catch{return""}}),[b,E]=F.useState([]),[T,O]=F.useState(!1),[D,P]=F.useState(""),V=()=>i(ic()),z=()=>E(my(f));F.useEffect(()=>{V()},[]),F.useEffect(()=>{try{const X=my(f);(!X||X.length<Ja.length)&&e1({date:f,shipments:[],driver_id:(t==null?void 0:t.driver_id)||null})}catch{}V(),z()},[f]);const R=()=>{const G=String(l||"").trim()||`Route ${new Date().toLocaleDateString()}`,ee=String(w||"").trim().toUpperCase(),U=Hb({name:G,driver_id:(t==null?void 0:t.driver_id)||null,driver_name:(t==null?void 0:t.name)||null,helper_name:(t==null?void 0:t.helper_name)||null,vehicle_plate:ee||null,date:f});if(c(""),ee)try{localStorage.setItem("arynik_last_vehicle_plate_v1",ee)}catch{}V(),e(`/routes/${U.id}`)},I=async()=>{O(!0),P("");try{const X=t==null?void 0:t.token,G=await Hc(X),ee=e1({date:f,shipments:G,driver_id:(t==null?void 0:t.driver_id)||null});P(`Created ${ee.created_routes} routes  Allocated ${ee.allocated_awbs} AWBs  Moldova deliverables: ${ee.deliverable_in_moldova}`+(ee.missing_county?`  Missing county: ${ee.missing_county}`:""))}catch(X){console.warn("Daily route generation failed",X),P("Failed to generate daily routes (check API / shipment sync).")}finally{O(!1),V(),z()}},Z=X=>{window.confirm("Delete this route?")&&(JM(X),V())},Q=F.useMemo(()=>{const X=new Map;return(Array.isArray(b)?b:[]).forEach(G=>{const ee=gy((G==null?void 0:G.county)||(G==null?void 0:G.name));ee&&X.set(ee,G)}),X},[b]);return x.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[x.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float"}),x.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-violet-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),x.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[x.jsxs("div",{children:[x.jsx("h1",{className:"text-xl font-black text-gradient tracking-tight",children:"Routes"}),x.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"Create routes and allocate AWBs"})]}),x.jsx("div",{className:"w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10",children:x.jsx($s,{size:20,className:"text-emerald-400"})})]}),x.jsxs("div",{className:"flex-1 p-4 pb-32 space-y-6 relative z-10",children:[x.jsxs("div",{className:"glass-strong p-5 rounded-3xl border-iridescent space-y-4",children:[x.jsxs("div",{className:"flex items-center justify-between gap-3",children:[x.jsxs("div",{className:"min-w-0",children:[x.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Daily Routes (Moldova)"}),x.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1 truncate",children:"Bacau, Iasi, Neamt, Galati, Botosani, Suceava, Vaslui"})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("input",{type:"date",value:f,onChange:X=>y(X.target.value),className:"px-3 py-2 bg-slate-900/50 border border-slate-700/50 rounded-2xl text-white focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-xs font-bold"}),x.jsxs("button",{onClick:I,disabled:T,className:`px-4 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 text-[10px] font-black uppercase tracking-widest active:scale-95 transition-all flex items-center gap-2 ${T?"opacity-60 cursor-not-allowed":""}`,title:"Create the 7 county routes and auto-allocate deliverable AWBs",children:[x.jsx(io,{size:14,className:T?"animate-spin":""}),"Generate"]})]})]}),D&&x.jsx("div",{className:"glass-light p-4 rounded-2xl border border-emerald-500/20 text-emerald-200 text-xs font-bold",children:D}),x.jsx("div",{className:"grid grid-cols-2 gap-3",children:Ja.map(X=>{const G=Q.get(gy(X.name)),ee=Array.isArray(G==null?void 0:G.awbs)?G.awbs.length:0,U=G?Wb(G):"";return x.jsxs("button",{onClick:()=>G&&e(`/routes/${G.id}`),disabled:!G,className:`p-4 rounded-3xl border transition-all text-left flex items-center justify-between gap-3 ${G?"glass-strong border-white/10 hover:border-emerald-500/30":"bg-slate-900/30 border-slate-800/50 opacity-60 cursor-not-allowed"}`,title:G?"Open route":"Generate routes first",children:[x.jsxs("div",{className:"min-w-0",children:[x.jsx("p",{className:"text-white font-black truncate",children:X.name}),x.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1",children:[f,"  ",ee," stops"]}),U&&x.jsx("p",{className:"text-[10px] text-emerald-200 font-black uppercase tracking-wide mt-1 truncate",children:U})]}),x.jsx("div",{className:`w-10 h-10 rounded-2xl flex items-center justify-center border ${G?"bg-emerald-500/15 border-emerald-500/20 text-emerald-300":"bg-slate-800/30 border-white/5 text-slate-500"}`,children:x.jsx(Ex,{size:18})})]},X.code)})})]}),x.jsxs("div",{className:"glass-strong p-5 rounded-3xl border-iridescent space-y-4",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"New Route"}),x.jsxs("span",{className:"text-[10px] font-bold text-slate-500",children:["Driver: ",x.jsx("span",{className:"text-slate-300 font-mono",children:(t==null?void 0:t.name)||(t==null?void 0:t.driver_id)||"N/A"})]})]}),x.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[x.jsx("input",{value:l,onChange:X=>c(X.target.value),placeholder:"Route label (optional)",className:"col-span-2 px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-2xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium"}),x.jsx("input",{type:"date",value:f,onChange:X=>y(X.target.value),className:"px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-2xl text-white focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium"}),x.jsx("input",{value:w,onChange:X=>g(X.target.value),placeholder:"Vehicle plate (ex: BC75ARI)",className:"col-span-3 px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-2xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium font-mono tracking-wider"})]}),x.jsxs("button",{onClick:R,className:"w-full btn-premium py-4 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white rounded-2xl font-bold shadow-lg hover:shadow-glow-md transition-all flex items-center justify-center gap-2",children:[x.jsx(_p,{size:18}),"Create Route"]})]}),n.length===0?x.jsxs("div",{className:"text-center py-16 text-slate-400",children:[x.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:x.jsx($s,{className:"text-slate-500",size:36})}),x.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No routes yet"}),x.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Create your first route above"})]}):x.jsxs("div",{className:"space-y-3",children:[x.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Your Routes"}),n.map(X=>x.jsx("div",{className:"glass-strong p-5 rounded-3xl border border-white/10 hover:border-emerald-500/30 transition-all group",children:x.jsxs("div",{className:"flex items-start gap-4",children:[x.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-emerald-600 to-emerald-700 flex items-center justify-center shadow-glow-sm",children:x.jsx($s,{size:18,className:"text-white"})}),x.jsx("div",{className:"flex-1 min-w-0",children:x.jsxs("div",{className:"flex items-center justify-between gap-3",children:[x.jsxs("div",{className:"min-w-0",children:[x.jsx("p",{className:"text-white font-black truncate",children:Tc(X)}),String((X==null?void 0:X.county)||(X==null?void 0:X.name)||"").trim()&&String((X==null?void 0:X.county)||(X==null?void 0:X.name)||"").trim()!==Tc(X)&&x.jsx("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-wide mt-1 truncate",children:String((X==null?void 0:X.county)||(X==null?void 0:X.name)||"").trim()}),x.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1",children:[X.date||"No date","  ",Array.isArray(X.awbs)?X.awbs.length:0," stops",X.vehicle_plate?`  ${X.vehicle_plate}`:""]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("button",{onClick:()=>Z(X.id),className:"p-2 rounded-xl glass-light border border-white/10 text-rose-400 hover:bg-rose-500/10 active:scale-95 transition-all",title:"Delete route",children:x.jsx(bp,{size:18})}),x.jsx("button",{onClick:()=>e(`/routes/${X.id}`),className:"p-2 rounded-xl glass-light border border-white/10 text-emerald-400 hover:bg-emerald-500/10 active:scale-95 transition-all",title:"Open route",children:x.jsx(Ex,{size:18})})]})]})})]})},X.id))]})]})]})}const Nf=(e,t)=>{const n=g=>g*Math.PI/180,l=n(t.lat-e.lat),c=n(t.lon-e.lon),f=n(e.lat),y=n(t.lat),w=Math.sin(l/2)**2+Math.cos(f)*Math.cos(y)*Math.sin(c/2)**2;return 2*6371*Math.asin(Math.sqrt(w))};function o6(){const{routeId:e}=cE(),t=ci(),{user:n}=Vr(),i=zn(n,ka),{location:l}=Fb(),[c,f]=F.useState(null),[y,w]=F.useState([]),[g,b]=F.useState(!0),[E,T]=F.useState(""),[O,D]=F.useState(""),[P,V]=F.useState("list"),[z,R]=F.useState(""),[I,Z]=F.useState(""),[Q,X]=F.useState(""),[G,ee]=F.useState([]),[U,re]=F.useState(!1),[me,le]=F.useState({}),[Ie,je]=F.useState({active:!1,done:0,total:0,current:""}),[ue,Me]=F.useState(null),[Oe,Y]=F.useState({distance_km:null,duration_min:null}),ve=l?{lat:l.latitude,lon:l.longitude}:null,oe=Rd(),be=(ne,te="RON")=>{const xe=Number(ne);return Number.isFinite(xe)?`${xe.toFixed(2)} ${String(te||"RON").toUpperCase()}`:"--"};F.useEffect(()=>{const ne=Up(e);f(ne)},[e]),F.useEffect(()=>{R(String((c==null?void 0:c.vehicle_plate)||"").toUpperCase()),Z(String((c==null?void 0:c.driver_name)||"").trim()),X(String((c==null?void 0:c.helper_name)||"").trim())},[c==null?void 0:c.vehicle_plate,c==null?void 0:c.driver_name,c==null?void 0:c.helper_name,c==null?void 0:c.id]);const Pe=Array.isArray(n==null?void 0:n.permissions)&&n.permissions.includes("users:read");F.useEffect(()=>{if(!Pe)return;let ne=!1;return(async()=>{re(!0);try{const te=n==null?void 0:n.token,xe=await Mp(te);ne||ee(Array.isArray(xe)?xe:[])}catch(te){console.warn("Failed to load users list",te),ne||ee([])}finally{ne||re(!1)}})(),()=>{ne=!0}},[Pe,n==null?void 0:n.token]);const ot=F.useMemo(()=>{const ne=new Map;return(Array.isArray(G)?G:[]).forEach(te=>{const xe=String((te==null?void 0:te.driver_id)||"").trim().toUpperCase();xe&&ne.set(xe,te)}),ne},[G]),Ze=()=>{if(!c)return;const ne=String(z||"").trim().toUpperCase(),te=Ro(c.id,{vehicle_plate:ne||null});if(te&&f(te),ne)try{localStorage.setItem("arynik_last_vehicle_plate_v1",ne)}catch{}},nt=()=>{if(!c)return;const ne=String(I||"").trim(),te=Ro(c.id,{driver_name:ne||null});te&&f(te)},ge=()=>{if(!c)return;const ne=String(Q||"").trim(),te=Ro(c.id,{helper_name:ne||null});te&&f(te)},_t=ne=>{if(!c)return;const te=String(ne||"").trim().toUpperCase(),xe=te?ot.get(te):null,Ne={driver_id:te||null,driver_name:((xe==null?void 0:xe.name)||"").trim()||null};!c.vehicle_plate&&(xe!=null&&xe.truck_plate)&&(Ne.vehicle_plate=String(xe.truck_plate).trim().toUpperCase()),!c.helper_name&&(xe!=null&&xe.helper_name)&&(Ne.helper_name=String(xe.helper_name).trim());const Le=Ro(c.id,Ne);Le&&f(Le)};F.useEffect(()=>{if(!c||ot.size===0)return;const ne=String((c==null?void 0:c.driver_id)||"").trim().toUpperCase();if(!ne)return;const te=ot.get(ne);if(!te)return;const xe={},Ne=String((te==null?void 0:te.name)||"").trim(),Le=String((te==null?void 0:te.helper_name)||"").trim(),Te=String((te==null?void 0:te.truck_plate)||"").trim().toUpperCase();if(Ne&&!String((c==null?void 0:c.driver_name)||"").trim()&&(xe.driver_name=Ne),Le&&!String((c==null?void 0:c.helper_name)||"").trim()&&(xe.helper_name=Le),Te&&!String((c==null?void 0:c.vehicle_plate)||"").trim()&&(xe.vehicle_plate=Te),Object.keys(xe).length===0)return;const Qe=Ro(c.id,xe);Qe&&f(Qe)},[c==null?void 0:c.id,c==null?void 0:c.driver_id,ot]);const ft=async()=>{b(!0);try{const ne=n==null?void 0:n.token,te=await Hc(ne);w(Array.isArray(te)?te:[])}catch(ne){console.warn("Failed to load shipments",ne),w([])}finally{b(!1)}};F.useEffect(()=>{ft()},[]);const Bn=F.useMemo(()=>{const ne=new Map;return y.forEach(te=>{te!=null&&te.awb&&ne.set(String(te.awb).toUpperCase(),te)}),ne},[y]),Qt=Array.isArray(c==null?void 0:c.awbs)?c.awbs:[],ut=F.useMemo(()=>Qt.map(ne=>{const te=Bn.get(String(ne).toUpperCase());return te||{awb:ne,status:"Unknown",recipient_name:"Unknown",delivery_address:"",locality:""}}),[Qt,Bn]),en=F.useMemo(()=>ut.map(ne=>{const te=String((ne==null?void 0:ne.awb)||"").toUpperCase(),xe=rc(ne),Ne=me[te],Le=Ne&&(!Ne.q||Ne.q===xe)&&Ke(Ne.lat)&&Ke(Ne.lon),Te=Ke(ne==null?void 0:ne.latitude)?Number(ne.latitude):Le?Number(Ne.lat):null,Qe=Ke(ne==null?void 0:ne.longitude)?Number(ne.longitude):Le?Number(Ne.lon):null;return{...ne,latitude:Number.isFinite(Te)?Te:null,longitude:Number.isFinite(Qe)?Qe:null}}),[ut,me]),at=F.useMemo(()=>{const ne=String(E||"").trim().toLowerCase();if(!ne)return[];const te=new Set(Qt.map(xe=>String(xe).toUpperCase()));return y.filter(xe=>{const Ne=String((xe==null?void 0:xe.awb)||"").toLowerCase(),Le=String((xe==null?void 0:xe.recipient_name)||"").toLowerCase();return(Ne.includes(ne)||Le.includes(ne))&&!te.has(String((xe==null?void 0:xe.awb)||"").toUpperCase())}).slice(0,30)},[E,y,Qt]),Hn=async ne=>{if(!c)return;const te=$0(c.id,ne,{scopeDate:!0});if(f(te),D(""),T(""),te&&i){const xe=String((te==null?void 0:te.driver_id)||"").trim();if(!xe)return;try{await Rp(n==null?void 0:n.token,ne,xe)}catch(Ne){console.warn("Allocation API failed",Ne)}}},jn=ne=>{if(!c)return;const te=$M(c.id,ne);f(te)},Er=async()=>{if(!ut||ut.length===0)return;const ne=ut.length,te=me||{},xe={},Ne=[];let Le=0;for(const Xe of ut){const Mt=String((Xe==null?void 0:Xe.awb)||"").toUpperCase();if(!Mt){Le+=1;continue}const At=rc(Xe);if(Ke(Xe==null?void 0:Xe.latitude)&&Ke(Xe==null?void 0:Xe.longitude)){xe[Mt]={lat:Number(Xe.latitude),lon:Number(Xe.longitude),ts:Date.now(),source:"shipment",q:At},Le+=1;continue}const Ft=te[Mt];if(Ft&&(!Ft.q||Ft.q===At)&&Ke(Ft.lat)&&Ke(Ft.lon)){Ft.q||(xe[Mt]={...Ft,q:At}),Le+=1;continue}const St=Od(At);if(St){Ke(St.lat)&&Ke(St.lon)&&(xe[Mt]={lat:Number(St.lat),lon:Number(St.lon),ts:Number(St.ts||Date.now()),source:"cache",q:At}),Le+=1;continue}Ne.push({awb:Mt,query:At})}if(Object.keys(xe).length>0&&le(Xe=>({...Xe,...xe})),Ne.length===0){je({active:!1,done:ne,total:ne,current:""});return}je({active:!0,done:Le,total:ne,current:""});let Te={},Qe=0,Nt=Date.now();const He=()=>{if(Object.keys(Te).length===0)return;const Xe=Te;Te={},Qe=0,Nt=Date.now(),le(Mt=>({...Mt,...Xe}))};for(const Xe of Ne){const{awb:Mt,query:At}=Xe;je({active:!0,done:Le,total:ne,current:Mt});const Ft=await K0(At);Ft&&Ke(Ft.lat)&&Ke(Ft.lon)&&(Te[Mt]={lat:Number(Ft.lat),lon:Number(Ft.lon),ts:Date.now(),source:"geocode",q:At},Qe+=1),Le+=1;const St=Date.now()-Nt;(Qe>=3||St>300)&&He()}He(),je({active:!1,done:Le,total:ne,current:""})},Zt=async ne=>{const te=Array.isArray(ne)?ne:[],xe=[];if(oe&&Ke(oe.lat)&&Ke(oe.lon)&&xe.push({lat:Number(oe.lat),lon:Number(oe.lon)}),te.forEach(Nt=>{Ke(Nt==null?void 0:Nt.latitude)&&Ke(Nt==null?void 0:Nt.longitude)&&xe.push({lat:Number(Nt.latitude),lon:Number(Nt.longitude)})}),xe.length<2){Me(null),Y({distance_km:null,duration_min:null});return}const Ne=await NM(xe);Ne!=null&&Ne.geometry?Me(Ne.geometry):Me(null);const Le=Number((Ne==null?void 0:Ne.distance_m)||0),Te=Number((Ne==null?void 0:Ne.duration_s)||0);if(Le>0){Y({distance_km:Math.round(Le/1e3*10)/10,duration_min:Te>0?Math.round(Te/60):null});return}let Qe=0;for(let Nt=0;Nt<xe.length-1;Nt+=1)Qe+=Nf(xe[Nt],xe[Nt+1]);Y({distance_km:Math.round(Qe*10)/10,duration_min:null})};F.useEffect(()=>{P==="map"&&(async()=>await Er())()},[P,Qt.join("|")]),F.useEffect(()=>{P==="map"&&(Ie.active||Zt(en))},[P,Ie.active,JSON.stringify(en.map(ne=>[ne.awb,ne.latitude,ne.longitude]))]);const $=()=>{if(!c)return;const ne=en.map(He=>({awb:String((He==null?void 0:He.awb)||"").toUpperCase(),lat:Number(He==null?void 0:He.latitude),lon:Number(He==null?void 0:He.longitude)})).filter(He=>He.awb&&Ke(He.lat)&&Ke(He.lon));if(ne.length<2)return;const te=oe&&Ke(oe.lat)&&Ke(oe.lon)?{lat:Number(oe.lat),lon:Number(oe.lon)}:{lat:ne[0].lat,lon:ne[0].lon},xe=[...ne],Ne=[];let Le=te;for(;xe.length;){xe.sort((Xe,Mt)=>Nf(Le,Xe)-Nf(Le,Mt));const He=xe.shift();Ne.push(He),Le=He}const Te=Ne.map(He=>He.awb),Qe=Qt.filter(He=>!Te.includes(String(He).toUpperCase())),Nt=e6(c.id,[...Te,...Qe]);f(Nt)},we=()=>{const ne=en.filter(Te=>Ke(Te==null?void 0:Te.latitude)&&Ke(Te==null?void 0:Te.longitude)).map(Te=>`${Number(Te.latitude)},${Number(Te.longitude)}`);if(ne.length===0)return;const te=oe&&Ke(oe.lat)&&Ke(oe.lon)?`${Number(oe.lat)},${Number(oe.lon)}`:ne[0],xe=ne[ne.length-1],Ne=ne.slice(0,-1).join("|"),Le=new URL("https://www.google.com/maps/dir/");Le.searchParams.set("api","1"),Le.searchParams.set("origin",te),Le.searchParams.set("destination",xe),Ne&&Le.searchParams.set("waypoints",Ne),window.open(Le.toString(),"_blank","noopener,noreferrer")};return c?x.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[x.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float"}),x.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-violet-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),x.jsxs("div",{className:"sticky top-0 z-40 glass-strong backdrop-blur-xl border-b border-white/10 pb-2 shadow-sm",children:[x.jsxs("div",{className:"p-4 flex items-center gap-4",children:[x.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-xl glass-light text-slate-300 hover:text-white transition-colors border border-white/10",children:x.jsx(qo,{})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("h1",{className:"font-black text-xl text-gradient tracking-tight truncate",children:Tc(c)}),x.jsxs("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wide mt-1",children:[c.date,"  ",Qt.length," stops",c.county?`  ${c.county}`:c.name?`  ${c.name}`:""]})]}),x.jsxs("div",{className:"flex glass-strong p-1 rounded-xl border border-white/10",children:[x.jsx("button",{onClick:()=>V("list"),className:`p-2 rounded-lg transition-all ${P==="list"?"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:x.jsx(m_,{size:20})}),x.jsx("button",{onClick:()=>V("map"),className:`p-2 rounded-lg transition-all ${P==="map"?"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:x.jsx(y_,{size:20})})]})]}),x.jsxs("div",{className:"px-4 pb-2 space-y-3",children:[x.jsxs("div",{className:"glass-strong rounded-2xl border border-white/10 p-4 space-y-3",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center",children:x.jsx(Cp,{size:18,className:"text-emerald-300"})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-[9px] uppercase font-black text-slate-500 tracking-[0.2em]",children:"Truck & Crew"}),x.jsx("p",{className:"text-[10px] text-slate-500 font-bold mt-1 truncate",children:"Route title = plate + driver (+ helper)"})]}),U&&x.jsx("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide",children:"Loading..."})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[x.jsxs("div",{className:"glass-light rounded-2xl border border-white/10 p-3",children:[x.jsx("p",{className:"text-[9px] uppercase font-black text-slate-500 tracking-[0.2em] mb-1",children:"Plate"}),x.jsx("input",{value:z,onChange:ne=>R(ne.target.value.toUpperCase()),onBlur:Ze,placeholder:"BC75ARI",className:"w-full bg-transparent outline-none text-white font-mono text-sm tracking-wider placeholder-slate-600"})]}),x.jsxs("div",{className:"glass-light rounded-2xl border border-white/10 p-3",children:[x.jsx("p",{className:"text-[9px] uppercase font-black text-slate-500 tracking-[0.2em] mb-1",children:"Driver"}),Pe&&Array.isArray(G)&&G.length>0?x.jsxs("select",{value:String((c==null?void 0:c.driver_id)||"").trim().toUpperCase(),onChange:ne=>_t(ne.target.value),className:"w-full bg-transparent outline-none text-white text-xs font-bold",children:[x.jsx("option",{value:"",children:"Unassigned"}),(()=>{const ne=String((c==null?void 0:c.driver_id)||"").trim().toUpperCase();return ne&&!ot.has(ne)?x.jsx("option",{value:ne,children:ne}):null})(),G.map(ne=>x.jsxs("option",{value:String(ne.driver_id||"").trim().toUpperCase(),children:[String(ne.driver_id||"").trim().toUpperCase(),"  ",String(ne.name||"").trim()||"Unnamed"]},ne.driver_id))]}):x.jsx("input",{value:I,onChange:ne=>Z(ne.target.value),onBlur:nt,placeholder:c!=null&&c.driver_id?`Driver name (for ${c.driver_id})`:"Driver name",className:"w-full bg-transparent outline-none text-white text-sm font-bold placeholder-slate-600"})]}),x.jsxs("div",{className:"glass-light rounded-2xl border border-white/10 p-3 col-span-2",children:[x.jsx("p",{className:"text-[9px] uppercase font-black text-slate-500 tracking-[0.2em] mb-1",children:"Helper"}),x.jsx("input",{value:Q,onChange:ne=>X(ne.target.value),onBlur:ge,placeholder:"Helper name (optional)",className:"w-full bg-transparent outline-none text-white text-sm font-bold placeholder-slate-600"})]})]})]}),x.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[x.jsx("input",{value:O,onChange:ne=>D(ne.target.value),placeholder:"Add AWB...",className:"col-span-2 w-full px-4 py-3.5 glass-strong rounded-2xl outline-none focus:ring-2 focus:ring-emerald-500/30 border border-white/10 text-sm font-medium text-white placeholder-slate-500 transition-all"}),x.jsxs("button",{onClick:()=>Hn(O),className:"btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white rounded-2xl font-bold shadow-lg hover:shadow-glow-md transition-all flex items-center justify-center gap-2",children:[x.jsx(_p,{size:18}),"Add"]})]}),x.jsxs("div",{className:"relative group",children:[x.jsx(Xa,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-emerald-400 transition-colors z-10",size:18}),x.jsx("input",{type:"text",placeholder:"Search shipments to add...",className:"w-full pl-12 pr-4 py-3.5 glass-strong rounded-2xl outline-none focus:ring-2 focus:ring-emerald-500/30 border border-white/10 text-sm font-medium text-white placeholder-slate-500 transition-all",value:E,onChange:ne=>T(ne.target.value)})]}),E&&at.length>0&&x.jsx("div",{className:"glass-strong rounded-2xl border border-white/10 overflow-hidden",children:at.map(ne=>x.jsxs("button",{onClick:()=>Hn(ne.awb),className:"w-full p-4 flex items-center gap-3 hover:bg-white/5 transition-all text-left border-b border-white/5 last:border-b-0",children:[x.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center",children:x.jsx($s,{size:16,className:"text-emerald-400"})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-[10px] font-mono font-black text-slate-500 uppercase tracking-widest truncate",children:ne.awb}),x.jsx("p",{className:"text-sm font-bold text-white truncate",children:ne.recipient_name||"Unknown"}),x.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate",children:ne.delivery_address||ne.locality||""})]}),x.jsx("span",{className:"text-[10px] font-black text-emerald-400 uppercase tracking-wide",children:"Add"})]},ne.awb))})]})]}),x.jsx("div",{className:"flex-1 p-4 space-y-3 pb-32 relative z-10",children:P==="map"?x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"glass-strong rounded-2xl border border-white/10 p-4 flex items-center justify-between gap-2",children:[x.jsxs("div",{className:"min-w-0",children:[x.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Route Map"}),x.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate",children:Ie.active?`Geocoding ${Ie.done}/${Ie.total} (${Ie.current})`:'Tap "Optimize" for a quick route order'}),x.jsxs("p",{className:"text-[10px] text-slate-400 font-bold mt-1",children:[Oe.distance_km?`~${Oe.distance_km} km`:"Distance: N/A",Oe.duration_min?`  ~${Oe.duration_min} min`:""]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("button",{onClick:Er,className:`p-2 rounded-xl glass-light border border-white/10 text-emerald-400 hover:bg-emerald-500/10 active:scale-95 transition-all ${Ie.active?"opacity-60 cursor-not-allowed":""}`,disabled:Ie.active,title:"Geocode stops",children:x.jsx(io,{size:18,className:Ie.active?"animate-spin":""})}),x.jsx("button",{onClick:$,className:"p-2 rounded-xl glass-light border border-white/10 text-amber-400 hover:bg-amber-500/10 active:scale-95 transition-all",title:"Optimize order",children:x.jsx(yI,{size:18})}),x.jsx("button",{onClick:we,className:"p-2 rounded-xl glass-light border border-white/10 text-slate-200 hover:bg-white/10 active:scale-95 transition-all",title:"Open in Google Maps",children:x.jsx(sI,{size:18})})]})]}),x.jsx("div",{className:"h-[70vh] w-full rounded-3xl overflow-hidden border-iridescent shadow-2xl",children:x.jsx(jb,{shipments:en,currentLocation:ve,originLocation:oe,routeGeometry:ue})})]}):x.jsx(Qs,{mode:"wait",children:ut.length===0?x.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20 text-slate-400",children:[x.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:x.jsx($s,{className:"text-slate-500",size:36})}),x.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No stops yet"}),x.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Add an AWB above to allocate it to this route"})]}):x.jsx("div",{className:"space-y-3",children:ut.map((ne,te)=>{var xe,Ne;return x.jsx(qe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:te*.02},className:"glass-strong p-5 rounded-3xl border border-white/10",children:x.jsxs("div",{className:"flex items-start gap-4",children:[x.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center text-emerald-400 font-black",children:te+1}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-[10px] font-mono font-black text-slate-500 uppercase tracking-widest truncate",children:ne.awb}),x.jsx("p",{className:"text-sm font-bold text-white truncate mt-1",children:ne.recipient_name||"Unknown"}),x.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate mt-1",children:ne.delivery_address||ne.locality||""}),x.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:[Number.isFinite(Number(ne==null?void 0:ne.number_of_parcels))?Number(ne.number_of_parcels):((xe=ne==null?void 0:ne.raw_data)==null?void 0:xe.numberOfDistinctBarcodes)||((Ne=ne==null?void 0:ne.raw_data)==null?void 0:Ne.numberOfParcels)||1," ","pkg  ",be(ne.payment_amount??ne.shipping_cost??ne.estimated_shipping_cost,ne.currency||"RON")]})]}),x.jsx("button",{onClick:()=>jn(ne.awb),className:"p-2 rounded-xl glass-light border border-white/10 text-rose-400 hover:bg-rose-500/10 active:scale-95 transition-all",title:"Remove from route",children:x.jsx(bp,{size:18})})]})},`${ne.awb}-${te}`)})})})})]}):x.jsx("div",{className:"min-h-screen flex items-center justify-center text-slate-400",children:"Route not found."})}const Dl=(e,t)=>{const n=Number(e)||0,i=Number(t)||0;return i?Math.round(n/i*100):0},Bl=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString()},lr=(e,t)=>String(e||"").toLowerCase().includes(t),hn=({label:e,value:t,tone:n="slate"})=>{const i={slate:"bg-slate-500/15 text-slate-300 border-white/10",emerald:"bg-emerald-500/15 text-emerald-300 border-emerald-400/20",rose:"bg-rose-500/15 text-rose-300 border-rose-400/20",violet:"bg-violet-500/15 text-violet-300 border-violet-400/20",amber:"bg-amber-500/15 text-amber-200 border-amber-400/20"};return x.jsxs("div",{className:`px-3 py-2 rounded-2xl border ${i[n]||i.slate}`,children:[x.jsx("div",{className:"text-[9px] font-black uppercase tracking-widest opacity-80",children:e}),x.jsx("div",{className:"text-sm font-black mt-0.5",children:t})]})},Tu=({active:e,icon:t,label:n,onClick:i})=>x.jsxs("button",{type:"button",onClick:i,className:`flex-1 p-3 rounded-2xl border transition-all flex items-center justify-center gap-2 ${e?"bg-gradient-to-br from-violet-600/30 to-purple-600/10 border-violet-400/30 text-white":"bg-slate-900/30 border-white/10 text-slate-300 hover:bg-white/5"}`,children:[x.jsx(t,{size:16,className:e?"text-violet-200":"text-slate-400"}),x.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:n})]});function a6(){const{user:e}=Vr(),t=(e==null?void 0:e.token)||localStorage.getItem("token"),n=F.useMemo(()=>["Admin","Manager","Dispatcher","Support","Finance"].includes(e==null?void 0:e.role),[e==null?void 0:e.role]),[i,l]=F.useState(n?"all":"self"),[c,f]=F.useState("trucks"),[y,w]=F.useState(""),[g,b]=F.useState(null),[E,T]=F.useState(!0),[O,D]=F.useState("");F.useEffect(()=>{n||l("self")},[n]);const P=async()=>{var U,re;T(!0),D("");try{const me=await sb(t,{scope:i});b(me)}catch(me){const le=((re=(U=me==null?void 0:me.response)==null?void 0:U.data)==null?void 0:re.detail)||(me==null?void 0:me.message)||"Failed to load analytics";D(String(le))}finally{T(!1)}};F.useEffect(()=>{P()},[t,i]);const V=F.useMemo(()=>String(y||"").trim().toLowerCase(),[y]),z=F.useMemo(()=>{const U=Array.isArray(g==null?void 0:g.trucks)?g.trucks:[];return V?U.filter(re=>lr(re==null?void 0:re.truck_plate,V)||lr(re==null?void 0:re.truck_phone,V)||Array.isArray(re==null?void 0:re.drivers)&&re.drivers.some(me=>lr(me==null?void 0:me.name,V)||lr(me==null?void 0:me.driver_id,V))):U},[g==null?void 0:g.trucks,V]),R=F.useMemo(()=>{const U=Array.isArray(g==null?void 0:g.drivers)?g.drivers:[];return V?U.filter(re=>lr(re==null?void 0:re.name,V)||lr(re==null?void 0:re.driver_id,V)||lr(re==null?void 0:re.truck_plate,V)||lr(re==null?void 0:re.truck_phone,V)||lr(re==null?void 0:re.role,V)):U},[g==null?void 0:g.drivers,V]),I=F.useMemo(()=>{const U=Array.isArray(g==null?void 0:g.awbs)?g.awbs:[];return V?U.filter(re=>lr(re==null?void 0:re.awb,V)||lr(re==null?void 0:re.status,V)||lr(re==null?void 0:re.driver_id,V)):U},[g==null?void 0:g.awbs,V]),Z=F.useMemo(()=>{const U=Array.isArray(g==null?void 0:g.events)?g.events:[];return V?U.filter(re=>lr(re==null?void 0:re.event_id,V)||lr(re==null?void 0:re.label,V)||lr(re==null?void 0:re.description,V)):U},[g==null?void 0:g.events,V]),Q=(g==null?void 0:g.totals)||{},X=Number(Q==null?void 0:Q.updates_total)||0,G=Number(Q==null?void 0:Q.updates_success)||0,ee=Number(Q==null?void 0:Q.shipments_total)||0;return x.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,y:-20},className:"min-h-screen flex flex-col relative overflow-hidden",children:[x.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-violet-500/10 rounded-full blur-3xl animate-float"}),x.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),x.jsxs("header",{className:"px-6 py-5 sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-glow-md",children:x.jsx(d_,{size:20,className:"text-white"})}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-lg font-black text-white leading-none",children:"Statistics"}),x.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mt-1",children:g!=null&&g.generated_at?`Updated ${Bl(g.generated_at)}`:"Mobile analytics"})]})]}),x.jsx("button",{type:"button",onClick:P,className:"w-11 h-11 rounded-2xl glass-light border border-white/10 flex items-center justify-center hover:bg-white/5 transition-all","aria-label":"Refresh analytics",children:x.jsx(io,{size:18,className:E?"animate-spin text-slate-300":"text-slate-300"})})]}),x.jsxs("div",{className:"mt-5 flex items-center gap-3",children:[x.jsx(hn,{label:"Shipments",value:ee,tone:"violet"}),x.jsx(hn,{label:"Updates",value:X,tone:"slate"}),x.jsx(hn,{label:"Success",value:`${Dl(G,X)}%`,tone:"emerald"})]}),x.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[x.jsx("div",{className:"flex-1",children:x.jsxs("div",{className:"relative",children:[x.jsx(Xa,{size:16,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500"}),x.jsx("input",{value:y,onChange:U=>w(U.target.value),placeholder:"Search truck, driver, AWB, ESCH...",className:"w-full pl-11 pr-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-500 focus:outline-none focus:border-violet-500/40 focus:ring-2 focus:ring-violet-500/20 transition-all text-sm font-medium"})]})}),n?x.jsxs("div",{className:"p-1 rounded-2xl bg-slate-900/40 border border-white/10 flex",children:[x.jsx("button",{type:"button",onClick:()=>l("self"),className:`px-3 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${i==="self"?"bg-white/10 text-white":"text-slate-400 hover:text-slate-200"}`,children:"My"}),x.jsx("button",{type:"button",onClick:()=>l("all"),className:`px-3 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${i==="all"?"bg-white/10 text-white":"text-slate-400 hover:text-slate-200"}`,children:"All"})]}):null]}),x.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[x.jsx(Tu,{active:c==="trucks",icon:Cp,label:"Trucks",onClick:()=>f("trucks")}),x.jsx(Tu,{active:c==="drivers",icon:ra,label:"Drivers",onClick:()=>f("drivers")}),x.jsx(Tu,{active:c==="awbs",icon:ps,label:"AWB",onClick:()=>f("awbs")}),x.jsx(Tu,{active:c==="events",icon:c_,label:"ESCH",onClick:()=>f("events")})]})]}),x.jsx("main",{className:"flex-1 p-6 pb-32 relative z-10",children:x.jsx(Qs,{mode:"wait",children:E?x.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"glass-strong rounded-3xl border-iridescent p-8 flex items-center justify-center gap-3",children:[x.jsx(Br,{className:"animate-spin text-violet-300",size:20}),x.jsx("span",{className:"text-sm font-black text-white uppercase tracking-wider",children:"Loading analytics"})]},"loading"):O?x.jsx(qe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"bg-rose-500/10 border border-rose-500/30 text-rose-300 px-6 py-5 rounded-3xl font-bold",children:O},"error"):x.jsxs(qe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4",children:[c==="trucks"?x.jsx(x.Fragment,{children:z.length===0?x.jsx("div",{className:"text-slate-400 font-bold text-sm",children:"No trucks found."}):z.map(U=>{const re=Number(U==null?void 0:U.updates_total)||0,me=Number(U==null?void 0:U.updates_success)||0,le=(U==null?void 0:U.shipments_by_bucket)||{};return x.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-5",children:[x.jsxs("div",{className:"flex items-start justify-between gap-4",children:[x.jsxs("div",{className:"min-w-0",children:[x.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Truck"}),x.jsx("div",{className:"text-xl font-black text-white truncate mt-1",children:(U==null?void 0:U.truck_plate)||"Unassigned"}),x.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["Phone: ",(U==null?void 0:U.truck_phone)||"--","  Drivers: ",Array.isArray(U==null?void 0:U.drivers)?U.drivers.length:0]})]}),x.jsx("div",{className:"flex items-center gap-2",children:x.jsx("div",{className:"p-3 rounded-2xl bg-emerald-500/10 border border-emerald-400/20",children:x.jsx(ah,{size:18,className:"text-emerald-300"})})})]}),x.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[x.jsx(hn,{label:"Shipments",value:(U==null?void 0:U.shipments_total)||0,tone:"violet"}),x.jsx(hn,{label:"Delivered",value:(le==null?void 0:le.delivered)||0,tone:"emerald"}),x.jsx(hn,{label:"Active",value:(le==null?void 0:le.active)||0,tone:"amber"})]}),x.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-3",children:[x.jsx(hn,{label:"Updates",value:re,tone:"slate"}),x.jsx(hn,{label:"Success",value:`${Dl(me,re)}%`,tone:"emerald"}),x.jsx(hn,{label:"Last",value:U!=null&&U.last_update?Bl(U.last_update):"--",tone:"slate"})]})]},(U==null?void 0:U.truck_plate)||"unassigned")})}):null,c==="drivers"?x.jsx(x.Fragment,{children:R.length===0?x.jsx("div",{className:"text-slate-400 font-bold text-sm",children:"No drivers found."}):R.map(U=>{const re=Number(U==null?void 0:U.updates_total)||0,me=Number(U==null?void 0:U.updates_success)||0,le=(U==null?void 0:U.shipments_by_bucket)||{};return x.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-5",children:[x.jsx("div",{className:"flex items-start justify-between gap-4",children:x.jsxs("div",{className:"min-w-0",children:[x.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Driver"}),x.jsx("div",{className:"text-xl font-black text-white truncate mt-1",children:(U==null?void 0:U.name)||(U==null?void 0:U.username)||(U==null?void 0:U.driver_id)}),x.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["ID: ",U==null?void 0:U.driver_id,"  ",(U==null?void 0:U.role)||"Role","  Truck: ",(U==null?void 0:U.truck_plate)||"--"]})]})}),x.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[x.jsx(hn,{label:"Shipments",value:(U==null?void 0:U.shipments_total)||0,tone:"violet"}),x.jsx(hn,{label:"Delivered",value:(le==null?void 0:le.delivered)||0,tone:"emerald"}),x.jsx(hn,{label:"Active",value:(le==null?void 0:le.active)||0,tone:"amber"})]}),x.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-3",children:[x.jsx(hn,{label:"Updates",value:re,tone:"slate"}),x.jsx(hn,{label:"Success",value:`${Dl(me,re)}%`,tone:"emerald"}),x.jsx(hn,{label:"Last",value:U!=null&&U.last_update?Bl(U.last_update):"--",tone:"slate"})]}),x.jsxs("div",{className:"mt-3 text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["Last login: ",U!=null&&U.last_login?Bl(U.last_login):"--","  Truck phone: ",(U==null?void 0:U.truck_phone)||"--"]})]},U==null?void 0:U.driver_id)})}):null,c==="awbs"?x.jsx(x.Fragment,{children:I.length===0?x.jsx("div",{className:"text-slate-400 font-bold text-sm",children:"No AWBs found."}):I.map(U=>{const re=Number(U==null?void 0:U.updates_total)||0,me=Number(U==null?void 0:U.updates_success)||0;return x.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-5",children:[x.jsx("div",{className:"flex items-start justify-between gap-4",children:x.jsxs("div",{className:"min-w-0",children:[x.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"AWB"}),x.jsx("div",{className:"text-lg font-black text-white truncate mt-1",children:U==null?void 0:U.awb}),x.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["Status: ",(U==null?void 0:U.status)||"--","  Driver: ",(U==null?void 0:U.driver_id)||"--"]})]})}),x.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[x.jsx(hn,{label:"Updates",value:re,tone:"slate"}),x.jsx(hn,{label:"Success",value:`${Dl(me,re)}%`,tone:"emerald"}),x.jsx(hn,{label:"Last",value:U!=null&&U.last_update?Bl(U.last_update):"--",tone:"slate"})]}),x.jsxs("div",{className:"mt-3 text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["ESCH: ",(U==null?void 0:U.last_event_id)||"--","  Outcome: ",(U==null?void 0:U.last_outcome)||"--"]})]},U==null?void 0:U.awb)})}):null,c==="events"?x.jsx(x.Fragment,{children:Z.length===0?x.jsx("div",{className:"text-slate-400 font-bold text-sm",children:"No ESCH events found."}):Z.map(U=>{const re=Number(U==null?void 0:U.total)||0,me=Number(U==null?void 0:U.success)||0;return x.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-5",children:[x.jsx("div",{className:"flex items-start justify-between gap-4",children:x.jsxs("div",{className:"min-w-0",children:[x.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"ESCH"}),x.jsxs("div",{className:"text-lg font-black text-white truncate mt-1",children:[U==null?void 0:U.event_id," ",U!=null&&U.label?` ${U.label}`:""]}),U!=null&&U.description?x.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:U.description}):null]})}),x.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[x.jsx(hn,{label:"Total",value:re,tone:"slate"}),x.jsx(hn,{label:"Success",value:`${Dl(me,re)}%`,tone:"emerald"}),x.jsx(hn,{label:"Failed",value:Number(U==null?void 0:U.failed)||0,tone:"rose"})]})]},U==null?void 0:U.event_id)})}):null]},c)})})]})}function l6(){const{user:e}=Vr(),t=(e==null?void 0:e.token)||localStorage.getItem("token"),[n,i]=F.useState([]),[l,c]=F.useState(!0),[f,y]=F.useState(null),[w,g]=F.useState(""),b=F.useMemo(()=>Array.isArray(n)?n.filter(O=>!(O!=null&&O.read_at)).length:0,[n]),E=async()=>{var O,D;c(!0),g("");try{const P=await db(t,{limit:100,unread_only:!1});i(Array.isArray(P)?P:[])}catch(P){g(String(((D=(O=P==null?void 0:P.response)==null?void 0:O.data)==null?void 0:D.detail)||(P==null?void 0:P.message)||"Failed to load notifications")),i([])}finally{c(!1)}};F.useEffect(()=>{E()},[]);const T=async O=>{var P,V;const D=O;if(D){y(D);try{const z=await hb(t,D);i(R=>Array.isArray(R)?R.map(I=>String(I==null?void 0:I.id)===String(D)?z:I):R)}catch(z){g(String(((V=(P=z==null?void 0:z.response)==null?void 0:P.data)==null?void 0:V.detail)||(z==null?void 0:z.message)||"Failed to mark read"))}finally{y(null)}}};return x.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[x.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),x.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),x.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[x.jsxs("div",{className:"min-w-0",children:[x.jsxs("h1",{className:"text-xl font-black text-gradient tracking-tight flex items-center gap-2",children:[x.jsx(Nc,{size:18,className:"text-violet-300"}),"Notifications"]}),x.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1 truncate",children:[b," unread"]})]}),x.jsx("button",{type:"button",onClick:E,className:`w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10 text-slate-200 hover:bg-white/5 active:scale-95 transition-all ${l?"opacity-60 cursor-not-allowed":""}`,disabled:l,"aria-label":"Refresh",children:x.jsx(io,{size:18,className:l?"animate-spin":""})})]}),x.jsxs("main",{className:"flex-1 p-4 pb-32 space-y-3 relative z-10",children:[w?x.jsx("div",{className:"glass-strong p-4 rounded-2xl border border-rose-500/30 text-rose-300 text-sm font-bold",children:w}):null,l?x.jsxs("div",{className:"glass-strong p-6 rounded-3xl border border-white/10 flex items-center gap-3 text-slate-300",children:[x.jsx(Br,{className:"animate-spin",size:18}),x.jsx("span",{className:"text-sm font-bold",children:"Loading..."})]}):null,!l&&(!n||n.length===0)?x.jsxs("div",{className:"text-center py-16 text-slate-400",children:[x.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:x.jsx(Nc,{className:"text-slate-500",size:36})}),x.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No notifications yet"}),x.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Allocation updates will appear here"})]}):null,!l&&Array.isArray(n)?n.map(O=>{const D=!(O!=null&&O.read_at);return x.jsx("div",{className:`glass-strong p-5 rounded-3xl border transition-all ${D?"border-emerald-500/30":"border-white/10 opacity-90"}`,children:x.jsxs("div",{className:"flex items-start justify-between gap-3",children:[x.jsxs("div",{className:"min-w-0",children:[x.jsx("p",{className:"text-sm font-black text-white truncate",children:O.title||"Notification"}),x.jsx("p",{className:"text-xs text-slate-300 font-medium mt-1 break-words",children:O.body||""}),x.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-2",children:[O.created_at?new Date(O.created_at).toLocaleString():"",O.awb?`  ${String(O.awb).toUpperCase()}`:""]})]}),D?x.jsx("button",{type:"button",onClick:()=>T(O.id),disabled:String(f)===String(O.id),className:`p-2 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95 transition-all ${String(f)===String(O.id)?"opacity-60 cursor-not-allowed":""}`,title:"Mark as read",children:x.jsx(f_,{size:18})}):null]})},O.id)}):null]})]})}const Pd="Driver",Tf=()=>({driver_id:"",name:"",username:"",password:"",role:Pd,active:!0}),If=e=>String(e||"").trim()||Pd,xy=({open:e,title:t,children:n,onClose:i})=>x.jsx(Qs,{children:e&&x.jsx(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-end justify-center bg-black/70 backdrop-blur-sm p-4",onClick:i,children:x.jsxs(qe.div,{initial:{y:24,opacity:0},animate:{y:0,opacity:1},exit:{y:24,opacity:0},className:"w-full max-w-md glass-strong rounded-3xl border-iridescent p-5 space-y-4",onClick:l=>l.stopPropagation(),children:[x.jsxs("div",{className:"flex items-center justify-between gap-3",children:[x.jsx("div",{className:"min-w-0",children:x.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:t})}),x.jsx("button",{type:"button",onClick:i,className:"p-2 rounded-2xl glass-light border border-white/10 text-slate-300 hover:text-white active:scale-95 transition-all","aria-label":"Close",children:x.jsx(Sp,{size:18})})]}),n]})})});function c6(){const e=ci(),{user:t}=Vr(),n=(t==null?void 0:t.token)||localStorage.getItem("token"),i=F.useMemo(()=>zn(t,R_),[t]),[l,c]=F.useState(!0),[f,y]=F.useState(!1),[w,g]=F.useState(""),[b,E]=F.useState(""),[T,O]=F.useState([]),[D,P]=F.useState([]),[V,z]=F.useState(""),[R,I]=F.useState(!1),[Z,Q]=F.useState(Tf),[X,G]=F.useState(!1),[ee,U]=F.useState(null),[re,me]=F.useState({name:"",username:"",password:"",role:Pd,active:!0}),le=async()=>{var Y,ve;c(!0),g("");try{const[oe,be]=await Promise.all([ob(n).catch(()=>null),Mp(n)]),Pe=Array.isArray(oe)?oe:[];O(Pe),P(Array.isArray(be)?be:[])}catch(oe){const be=((ve=(Y=oe==null?void 0:oe.response)==null?void 0:Y.data)==null?void 0:ve.detail)||(oe==null?void 0:oe.message)||"Failed to load users";g(String(be))}finally{c(!1)}};F.useEffect(()=>{le()},[]);const Ie=F.useMemo(()=>T.length>0?T.map(Y=>Y==null?void 0:Y.role).filter(Boolean):[Pd,"Admin","Manager","Dispatcher","Warehouse","Support","Finance","Viewer","Recipient"],[T]),je=F.useMemo(()=>{const Y=String(V||"").trim().toLowerCase(),ve=Array.isArray(D)?D:[];return Y?ve.filter(oe=>String((oe==null?void 0:oe.driver_id)||"").toLowerCase().includes(Y)||String((oe==null?void 0:oe.username)||"").toLowerCase().includes(Y)||String((oe==null?void 0:oe.name)||"").toLowerCase().includes(Y)||String((oe==null?void 0:oe.role)||"").toLowerCase().includes(Y)):ve},[D,V]),ue=Y=>{Y&&(U(Y),me({name:String((Y==null?void 0:Y.name)||""),username:String((Y==null?void 0:Y.username)||""),password:"",role:If(Y==null?void 0:Y.role),active:!!(Y!=null&&Y.active)}),G(!0))},Me=async()=>{var Y,ve;y(!0),g(""),E("");try{const oe={driver_id:String(Z.driver_id||"").trim(),name:String(Z.name||"").trim(),username:String(Z.username||"").trim(),password:String(Z.password||""),role:If(Z.role),active:!!Z.active};if(!oe.driver_id||!oe.username||!oe.name||!oe.password){g("driver_id, name, username and password are required.");return}await ab(n,oe),E("Account created."),I(!1),Q(Tf()),await le()}catch(oe){const be=((ve=(Y=oe==null?void 0:oe.response)==null?void 0:Y.data)==null?void 0:ve.detail)||(oe==null?void 0:oe.message)||"Failed to create user";g(String(be))}finally{y(!1)}},Oe=async()=>{var Y,ve;if(ee!=null&&ee.driver_id){y(!0),g(""),E("");try{const oe={name:String(re.name||"").trim(),username:String(re.username||"").trim(),role:If(re.role),active:!!re.active},be=String(re.password||"").trim();be&&(oe.password=be),await lb(n,ee.driver_id,oe),E("Account updated."),G(!1),U(null),await le()}catch(oe){const be=((ve=(Y=oe==null?void 0:oe.response)==null?void 0:Y.data)==null?void 0:ve.detail)||(oe==null?void 0:oe.message)||"Failed to update user";g(String(be))}finally{y(!1)}}};return x.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[x.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),x.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),x.jsxs("div",{className:"sticky top-0 z-40 glass-strong backdrop-blur-xl border-b border-white/10 pb-2 shadow-sm",children:[x.jsxs("div",{className:"p-4 flex items-center gap-4",children:[x.jsx("button",{onClick:()=>e(-1),className:"p-2 -ml-2 rounded-xl glass-light text-slate-300 hover:text-white transition-colors border border-white/10","aria-label":"Back",children:x.jsx(qo,{})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("h1",{className:"font-black text-xl text-gradient tracking-tight truncate",children:"Users"}),x.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1 truncate",children:i?"Create and manage accounts":"Read-only access"})]}),x.jsx("button",{onClick:le,className:`p-2 rounded-xl glass-light hover:bg-violet-500/20 text-violet-400 transition-all border border-white/10 ${l?"animate-spin":""}`,title:"Refresh",children:x.jsx(io,{size:20})}),x.jsx("button",{onClick:()=>{I(!0),Q(Tf())},disabled:!i,className:`p-2 rounded-xl glass-light border border-white/10 transition-all ${i?"text-emerald-300 hover:bg-emerald-500/10 active:scale-95":"text-slate-600 cursor-not-allowed opacity-60"}`,title:i?"Create account":"Not allowed","aria-label":"Create account",children:x.jsx(_p,{size:20})})]}),x.jsx("div",{className:"px-4 pb-3",children:x.jsxs("div",{className:"relative group",children:[x.jsx(Xa,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-violet-400 transition-colors z-10",size:18}),x.jsx("input",{type:"text",placeholder:"Search driver_id, username, name, role...",className:"w-full pl-12 pr-4 py-3.5 glass-strong rounded-2xl outline-none focus:ring-2 focus:ring-violet-500/30 border border-white/10 text-sm font-medium text-white placeholder-slate-500 transition-all",value:V,onChange:Y=>z(Y.target.value)})]})})]}),x.jsxs("div",{className:"flex-1 p-4 pb-32 relative z-10 space-y-3",children:[w&&x.jsxs("div",{className:"glass-strong rounded-2xl border border-rose-500/20 p-4 text-rose-200 text-xs font-bold flex items-center gap-3",children:[x.jsx(gI,{size:16,className:"text-rose-300"}),x.jsx("span",{className:"flex-1",children:w})]}),b&&x.jsxs("div",{className:"glass-strong rounded-2xl border border-emerald-500/20 p-4 text-emerald-200 text-xs font-bold flex items-center gap-3",children:[x.jsx(ah,{size:16,className:"text-emerald-300"}),x.jsx("span",{className:"flex-1",children:b})]}),l?x.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"absolute inset-0 bg-violet-500/20 blur-xl rounded-full animate-pulse"}),x.jsx(Br,{className:"animate-spin relative z-10 text-violet-400",size:48})]}),x.jsx("p",{className:"mt-6 font-bold text-xs uppercase tracking-widest text-slate-500",children:"Loading users..."})]}):je.length===0?x.jsxs("div",{className:"text-center py-20 text-slate-400",children:[x.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:x.jsx(F0,{className:"text-slate-500",size:36})}),x.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No users"}),x.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Try changing your search"})]}):x.jsx("div",{className:"space-y-3",children:je.map(Y=>x.jsx("div",{className:"glass-strong p-5 rounded-3xl border border-white/10 hover:border-violet-500/25 transition-all",children:x.jsxs("div",{className:"flex items-start gap-4",children:[x.jsx("div",{className:"w-12 h-12 rounded-2xl bg-violet-500/15 border border-violet-500/20 flex items-center justify-center",children:x.jsx(F0,{size:20,className:"text-violet-300"})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("div",{className:"flex items-center justify-between gap-2",children:[x.jsx("p",{className:"text-sm font-black text-white truncate",children:(Y==null?void 0:Y.name)||(Y==null?void 0:Y.username)||(Y==null?void 0:Y.driver_id)}),x.jsx("span",{className:`text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border ${Y!=null&&Y.active?"bg-emerald-500/15 text-emerald-300 border-emerald-500/20":"bg-rose-500/15 text-rose-200 border-rose-500/20"}`,children:Y!=null&&Y.active?"Active":"Inactive"})]}),x.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1 truncate",children:[x.jsx("span",{className:"font-mono text-slate-300",children:Y==null?void 0:Y.driver_id}),"  ",x.jsx("span",{className:"font-mono",children:Y==null?void 0:Y.username}),"  ",(Y==null?void 0:Y.role)||""]}),(Y==null?void 0:Y.last_login)&&x.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:["Last login: ",new Date(Y.last_login).toLocaleString()]})]}),x.jsx("button",{type:"button",onClick:()=>ue(Y),disabled:!i,className:`px-4 py-2 rounded-2xl border text-[10px] font-black uppercase tracking-widest transition-all ${i?"bg-white/5 border-white/10 text-slate-200 hover:bg-white/10 active:scale-95":"bg-slate-900/30 border-white/5 text-slate-600 cursor-not-allowed opacity-60"}`,title:i?"Edit":"Not allowed",children:"Edit"})]})},(Y==null?void 0:Y.driver_id)||(Y==null?void 0:Y.id)))})]}),x.jsx(xy,{open:R,title:"Create Account",onClose:()=>{f||I(!1)},children:x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsx("input",{value:Z.driver_id,onChange:Y=>Q(ve=>({...ve,driver_id:Y.target.value})),placeholder:"driver_id (ex: D004)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30 font-mono"}),x.jsx("input",{value:Z.username,onChange:Y=>Q(ve=>({...ve,username:Y.target.value})),placeholder:"username",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"})]}),x.jsx("input",{value:Z.name,onChange:Y=>Q(ve=>({...ve,name:Y.target.value})),placeholder:"Full name",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"}),x.jsx("input",{value:Z.password,onChange:Y=>Q(ve=>({...ve,password:Y.target.value})),placeholder:"Temporary password",type:"password",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"}),x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsx("select",{value:Z.role,onChange:Y=>Q(ve=>({...ve,role:Y.target.value})),className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white outline-none focus:ring-2 focus:ring-emerald-500/30",children:Ie.map(Y=>x.jsx("option",{value:Y,children:Y},Y))}),x.jsxs("label",{className:"flex items-center gap-2 px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white select-none",children:[x.jsx("input",{type:"checkbox",checked:Z.active,onChange:Y=>Q(ve=>({...ve,active:Y.target.checked}))}),x.jsx("span",{className:"text-xs font-bold",children:"Active"})]})]}),x.jsxs("button",{type:"button",onClick:Me,disabled:!i||f,className:`w-full btn-premium py-4 rounded-2xl font-black uppercase tracking-widest flex items-center justify-center gap-2 shadow-lg transition-all ${!i||f?"bg-slate-800/40 text-slate-500 cursor-not-allowed opacity-70":"bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white active:scale-[0.99]"}`,children:[f?x.jsx(Br,{className:"animate-spin",size:18}):x.jsx(Nx,{size:18}),"Create"]})]})}),x.jsx(xy,{open:X,title:`Edit Account  ${(ee==null?void 0:ee.driver_id)||""}`,onClose:()=>{f||G(!1)},children:x.jsxs("div",{className:"space-y-3",children:[x.jsx("input",{value:re.name,onChange:Y=>me(ve=>({...ve,name:Y.target.value})),placeholder:"Full name",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"}),x.jsx("input",{value:re.username,onChange:Y=>me(ve=>({...ve,username:Y.target.value})),placeholder:"username",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"}),x.jsx("input",{value:re.password,onChange:Y=>me(ve=>({...ve,password:Y.target.value})),placeholder:"New password (optional)",type:"password",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"}),x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsx("select",{value:re.role,onChange:Y=>me(ve=>({...ve,role:Y.target.value})),className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white outline-none focus:ring-2 focus:ring-violet-500/30",children:Ie.map(Y=>x.jsx("option",{value:Y,children:Y},Y))}),x.jsxs("label",{className:"flex items-center gap-2 px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white select-none",children:[x.jsx("input",{type:"checkbox",checked:re.active,onChange:Y=>me(ve=>({...ve,active:Y.target.checked}))}),x.jsx("span",{className:"text-xs font-bold",children:"Active"})]})]}),x.jsxs("button",{type:"button",onClick:Oe,disabled:!i||f,className:`w-full btn-premium py-4 rounded-2xl font-black uppercase tracking-widest flex items-center justify-center gap-2 shadow-lg transition-all ${!i||f?"bg-slate-800/40 text-slate-500 cursor-not-allowed opacity-70":"bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white active:scale-[0.99]"}`,children:[f?x.jsx(Br,{className:"animate-spin",size:18}):x.jsx(Nx,{size:18}),"Save Changes"]})]})})]})}const Ji=({children:e,allowedRoles:t,allowedPermissions:n})=>{const{user:i,loading:l}=Vr();return l?x.jsx("div",{children:"Loading..."}):i?t&&!t.includes(i.role)?x.jsx(Uu,{to:"/",replace:!0}):n&&!CI(i,n)?x.jsx(Uu,{to:"/",replace:!0}):e:x.jsx(Uu,{to:"/login",replace:!0})};function u6(){return x.jsx(OE,{children:x.jsx(d6,{})})}const d6=()=>{const e=ea();return x.jsx(Qs,{mode:"wait",children:x.jsxs(AE,{location:e,children:[x.jsx(Kn,{path:"/login",element:x.jsx(cM,{})}),x.jsx(Kn,{path:"/signup",element:x.jsx(uM,{})}),x.jsxs(Kn,{element:x.jsx(Ji,{children:x.jsx(p5,{})}),children:[x.jsx(Kn,{path:"/",element:x.jsx(ly,{})}),x.jsx(Kn,{path:"/home",element:x.jsx(ly,{})}),x.jsx(Kn,{path:"/history",element:x.jsx(Ji,{allowedPermissions:[ni],children:x.jsx(dM,{})})}),x.jsx(Kn,{path:"/shipments",element:x.jsx(Ji,{allowedPermissions:[gr],children:x.jsx(r6,{})})}),x.jsx(Kn,{path:"/routes",element:x.jsx(Ji,{allowedRoles:["Manager","Admin","Dispatcher","Driver"],children:x.jsx(s6,{})})}),x.jsx(Kn,{path:"/routes/:routeId",element:x.jsx(Ji,{allowedRoles:["Manager","Admin","Dispatcher","Driver"],children:x.jsx(o6,{})})}),x.jsx(Kn,{path:"/users",element:x.jsx(Ji,{allowedPermissions:[Uo],children:x.jsx(c6,{})})}),x.jsx(Kn,{path:"/notifications",element:x.jsx(Ji,{allowedPermissions:[ti],children:x.jsx(l6,{})})}),x.jsx(Kn,{path:"/settings",element:x.jsx(mM,{})}),x.jsx(Kn,{path:"/calendar",element:x.jsx(Ji,{allowedPermissions:[gr],children:x.jsx(i6,{})})}),x.jsx(Kn,{path:"/analytics",element:x.jsx(Ji,{allowedPermissions:[yi],children:x.jsx(a6,{})})})]}),x.jsx(Kn,{path:"*",element:x.jsx(Uu,{to:"/",replace:!0})})]},e.pathname)})};Mf.createRoot(document.getElementById("root")).render(x.jsx(Ho.StrictMode,{children:x.jsx(u5,{children:x.jsx(u6,{})})}));
