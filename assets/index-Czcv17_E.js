function GC(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const c=Object.getOwnPropertyDescriptor(i,a);c&&Object.defineProperty(e,a,c.get?c:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();var ka=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $y={exports:{}},th={},Jy={exports:{}},Rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gc=Symbol.for("react.element"),YC=Symbol.for("react.portal"),XC=Symbol.for("react.fragment"),qC=Symbol.for("react.strict_mode"),KC=Symbol.for("react.profiler"),QC=Symbol.for("react.provider"),$C=Symbol.for("react.context"),JC=Symbol.for("react.forward_ref"),eS=Symbol.for("react.suspense"),tS=Symbol.for("react.memo"),nS=Symbol.for("react.lazy"),Rm=Symbol.iterator;function rS(e){return e===null||typeof e!="object"?null:(e=Rm&&e[Rm]||e["@@iterator"],typeof e=="function"?e:null)}var e2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},t2=Object.assign,n2={};function ml(e,t,n){this.props=e,this.context=t,this.refs=n2,this.updater=n||e2}ml.prototype.isReactComponent={};ml.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ml.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function r2(){}r2.prototype=ml.prototype;function bp(e,t,n){this.props=e,this.context=t,this.refs=n2,this.updater=n||e2}var Cp=bp.prototype=new r2;Cp.constructor=bp;t2(Cp,ml.prototype);Cp.isPureReactComponent=!0;var Om=Array.isArray,i2=Object.prototype.hasOwnProperty,Sp={current:null},s2={key:!0,ref:!0,__self:!0,__source:!0};function o2(e,t,n){var i,a={},c=null,f=null;if(t!=null)for(i in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(c=""+t.key),t)i2.call(t,i)&&!s2.hasOwnProperty(i)&&(a[i]=t[i]);var g=arguments.length-2;if(g===1)a.children=n;else if(1<g){for(var v=Array(g),y=0;y<g;y++)v[y]=arguments[y+2];a.children=v}if(e&&e.defaultProps)for(i in g=e.defaultProps,g)a[i]===void 0&&(a[i]=g[i]);return{$$typeof:Gc,type:e,key:c,ref:f,props:a,_owner:Sp.current}}function iS(e,t){return{$$typeof:Gc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ap(e){return typeof e=="object"&&e!==null&&e.$$typeof===Gc}function sS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Lm=/\/+/g;function Qh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?sS(""+e.key):t.toString(36)}function Zu(e,t,n,i,a){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(c){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case Gc:case YC:f=!0}}if(f)return f=e,a=a(f),e=i===""?"."+Qh(f,0):i,Om(a)?(n="",e!=null&&(n=e.replace(Lm,"$&/")+"/"),Zu(a,t,n,"",function(y){return y})):a!=null&&(Ap(a)&&(a=iS(a,n+(!a.key||f&&f.key===a.key?"":(""+a.key).replace(Lm,"$&/")+"/")+e)),t.push(a)),1;if(f=0,i=i===""?".":i+":",Om(e))for(var g=0;g<e.length;g++){c=e[g];var v=i+Qh(c,g);f+=Zu(c,t,n,v,a)}else if(v=rS(e),typeof v=="function")for(e=v.call(e),g=0;!(c=e.next()).done;)c=c.value,v=i+Qh(c,g++),f+=Zu(c,t,n,v,a);else if(c==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function yu(e,t,n){if(e==null)return e;var i=[],a=0;return Zu(e,i,"","",function(c){return t.call(n,c,a++)}),i}function oS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Mr={current:null},Gu={transition:null},aS={ReactCurrentDispatcher:Mr,ReactCurrentBatchConfig:Gu,ReactCurrentOwner:Sp};function a2(){throw Error("act(...) is not supported in production builds of React.")}Rt.Children={map:yu,forEach:function(e,t,n){yu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return yu(e,function(){t++}),t},toArray:function(e){return yu(e,function(t){return t})||[]},only:function(e){if(!Ap(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Rt.Component=ml;Rt.Fragment=XC;Rt.Profiler=KC;Rt.PureComponent=bp;Rt.StrictMode=qC;Rt.Suspense=eS;Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aS;Rt.act=a2;Rt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=t2({},e.props),a=e.key,c=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(c=t.ref,f=Sp.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var g=e.type.defaultProps;for(v in t)i2.call(t,v)&&!s2.hasOwnProperty(v)&&(i[v]=t[v]===void 0&&g!==void 0?g[v]:t[v])}var v=arguments.length-2;if(v===1)i.children=n;else if(1<v){g=Array(v);for(var y=0;y<v;y++)g[y]=arguments[y+2];i.children=g}return{$$typeof:Gc,type:e.type,key:a,ref:c,props:i,_owner:f}};Rt.createContext=function(e){return e={$$typeof:$C,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:QC,_context:e},e.Consumer=e};Rt.createElement=o2;Rt.createFactory=function(e){var t=o2.bind(null,e);return t.type=e,t};Rt.createRef=function(){return{current:null}};Rt.forwardRef=function(e){return{$$typeof:JC,render:e}};Rt.isValidElement=Ap;Rt.lazy=function(e){return{$$typeof:nS,_payload:{_status:-1,_result:e},_init:oS}};Rt.memo=function(e,t){return{$$typeof:tS,type:e,compare:t===void 0?null:t}};Rt.startTransition=function(e){var t=Gu.transition;Gu.transition={};try{e()}finally{Gu.transition=t}};Rt.unstable_act=a2;Rt.useCallback=function(e,t){return Mr.current.useCallback(e,t)};Rt.useContext=function(e){return Mr.current.useContext(e)};Rt.useDebugValue=function(){};Rt.useDeferredValue=function(e){return Mr.current.useDeferredValue(e)};Rt.useEffect=function(e,t){return Mr.current.useEffect(e,t)};Rt.useId=function(){return Mr.current.useId()};Rt.useImperativeHandle=function(e,t,n){return Mr.current.useImperativeHandle(e,t,n)};Rt.useInsertionEffect=function(e,t){return Mr.current.useInsertionEffect(e,t)};Rt.useLayoutEffect=function(e,t){return Mr.current.useLayoutEffect(e,t)};Rt.useMemo=function(e,t){return Mr.current.useMemo(e,t)};Rt.useReducer=function(e,t,n){return Mr.current.useReducer(e,t,n)};Rt.useRef=function(e){return Mr.current.useRef(e)};Rt.useState=function(e){return Mr.current.useState(e)};Rt.useSyncExternalStore=function(e,t,n){return Mr.current.useSyncExternalStore(e,t,n)};Rt.useTransition=function(){return Mr.current.useTransition()};Rt.version="18.3.1";Jy.exports=Rt;var B=Jy.exports;const la=Qy(B),lS=GC({__proto__:null,default:la},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cS=B,uS=Symbol.for("react.element"),dS=Symbol.for("react.fragment"),hS=Object.prototype.hasOwnProperty,fS=cS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pS={key:!0,ref:!0,__self:!0,__source:!0};function l2(e,t,n){var i,a={},c=null,f=null;n!==void 0&&(c=""+n),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(f=t.ref);for(i in t)hS.call(t,i)&&!pS.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:uS,type:e,key:c,ref:f,props:a,_owner:fS.current}}th.Fragment=dS;th.jsx=l2;th.jsxs=l2;$y.exports=th;var m=$y.exports,qf={},c2={exports:{}},ri={},u2={exports:{}},d2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ee,_e){var pe=ee.length;ee.push(_e);e:for(;0<pe;){var he=pe-1>>>1,Te=ee[he];if(0<a(Te,_e))ee[he]=_e,ee[pe]=Te,pe=he;else break e}}function n(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var _e=ee[0],pe=ee.pop();if(pe!==_e){ee[0]=pe;e:for(var he=0,Te=ee.length,ze=Te>>>1;he<ze;){var Le=2*(he+1)-1,te=ee[Le],le=Le+1,De=ee[le];if(0>a(te,pe))le<Te&&0>a(De,te)?(ee[he]=De,ee[le]=pe,he=le):(ee[he]=te,ee[Le]=pe,he=Le);else if(le<Te&&0>a(De,pe))ee[he]=De,ee[le]=pe,he=le;else break e}}return _e}function a(ee,_e){var pe=ee.sortIndex-_e.sortIndex;return pe!==0?pe:ee.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var f=Date,g=f.now();e.unstable_now=function(){return f.now()-g}}var v=[],y=[],C=1,b=null,T=3,I=!1,z=!1,R=!1,j=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(ee){for(var _e=n(y);_e!==null;){if(_e.callback===null)i(y);else if(_e.startTime<=ee)i(y),_e.sortIndex=_e.expirationTime,t(v,_e);else break;_e=n(y)}}function W(ee){if(R=!1,k(ee),!z)if(n(v)!==null)z=!0,se(K);else{var _e=n(y);_e!==null&&ve(W,_e.startTime-ee)}}function K(ee,_e){z=!1,R&&(R=!1,F(Q),Q=-1),I=!0;var pe=T;try{for(k(_e),b=n(v);b!==null&&(!(b.expirationTime>_e)||ee&&!ie());){var he=b.callback;if(typeof he=="function"){b.callback=null,T=b.priorityLevel;var Te=he(b.expirationTime<=_e);_e=e.unstable_now(),typeof Te=="function"?b.callback=Te:b===n(v)&&i(v),k(_e)}else i(v);b=n(v)}if(b!==null)var ze=!0;else{var Le=n(y);Le!==null&&ve(W,Le.startTime-_e),ze=!1}return ze}finally{b=null,T=pe,I=!1}}var Y=!1,H=null,Q=-1,M=5,q=-1;function ie(){return!(e.unstable_now()-q<M)}function ae(){if(H!==null){var ee=e.unstable_now();q=ee;var _e=!0;try{_e=H(!0,ee)}finally{_e?we():(Y=!1,H=null)}}else Y=!1}var we;if(typeof O=="function")we=function(){O(ae)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,oe=Ne.port2;Ne.port1.onmessage=ae,we=function(){oe.postMessage(null)}}else we=function(){j(ae,0)};function se(ee){H=ee,Y||(Y=!0,we())}function ve(ee,_e){Q=j(function(){ee(e.unstable_now())},_e)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ee){ee.callback=null},e.unstable_continueExecution=function(){z||I||(z=!0,se(K))},e.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ee?Math.floor(1e3/ee):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return n(v)},e.unstable_next=function(ee){switch(T){case 1:case 2:case 3:var _e=3;break;default:_e=T}var pe=T;T=_e;try{return ee()}finally{T=pe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ee,_e){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var pe=T;T=ee;try{return _e()}finally{T=pe}},e.unstable_scheduleCallback=function(ee,_e,pe){var he=e.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?he+pe:he):pe=he,ee){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=pe+Te,ee={id:C++,callback:_e,priorityLevel:ee,startTime:pe,expirationTime:Te,sortIndex:-1},pe>he?(ee.sortIndex=pe,t(y,ee),n(v)===null&&ee===n(y)&&(R?(F(Q),Q=-1):R=!0,ve(W,pe-he))):(ee.sortIndex=Te,t(v,ee),z||I||(z=!0,se(K))),ee},e.unstable_shouldYield=ie,e.unstable_wrapCallback=function(ee){var _e=T;return function(){var pe=T;T=_e;try{return ee.apply(this,arguments)}finally{T=pe}}}})(d2);u2.exports=d2;var mS=u2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gS=B,ti=mS;function Re(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h2=new Set,yc={};function ma(e,t){il(e,t),il(e+"Capture",t)}function il(e,t){for(yc[e]=t,e=0;e<t.length;e++)h2.add(t[e])}var Es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kf=Object.prototype.hasOwnProperty,xS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pm={},Dm={};function yS(e){return Kf.call(Dm,e)?!0:Kf.call(Pm,e)?!1:xS.test(e)?Dm[e]=!0:(Pm[e]=!0,!1)}function wS(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function vS(e,t,n,i){if(t===null||typeof t>"u"||wS(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Rr(e,t,n,i,a,c,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=c,this.removeEmptyString=f}var lr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){lr[e]=new Rr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];lr[t]=new Rr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){lr[e]=new Rr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){lr[e]=new Rr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){lr[e]=new Rr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){lr[e]=new Rr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){lr[e]=new Rr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){lr[e]=new Rr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){lr[e]=new Rr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ep=/[\-:]([a-z])/g;function Np(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ep,Np);lr[t]=new Rr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ep,Np);lr[t]=new Rr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ep,Np);lr[t]=new Rr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){lr[e]=new Rr(e,1,!1,e.toLowerCase(),null,!1,!1)});lr.xlinkHref=new Rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){lr[e]=new Rr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Tp(e,t,n,i){var a=lr.hasOwnProperty(t)?lr[t]:null;(a!==null?a.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(vS(t,n,a,i)&&(n=null),i||a===null?yS(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,i=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var Ps=gS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wu=Symbol.for("react.element"),Oa=Symbol.for("react.portal"),La=Symbol.for("react.fragment"),Ip=Symbol.for("react.strict_mode"),Qf=Symbol.for("react.profiler"),f2=Symbol.for("react.provider"),p2=Symbol.for("react.context"),kp=Symbol.for("react.forward_ref"),$f=Symbol.for("react.suspense"),Jf=Symbol.for("react.suspense_list"),Mp=Symbol.for("react.memo"),Ks=Symbol.for("react.lazy"),m2=Symbol.for("react.offscreen"),jm=Symbol.iterator;function jl(e){return e===null||typeof e!="object"?null:(e=jm&&e[jm]||e["@@iterator"],typeof e=="function"?e:null)}var Cn=Object.assign,$h;function Kl(e){if($h===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$h=t&&t[1]||""}return`
`+$h+e}var Jh=!1;function ef(e,t){if(!e||Jh)return"";Jh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(y){var i=y}Reflect.construct(e,[],t)}else{try{t.call()}catch(y){i=y}e.call(t.prototype)}else{try{throw Error()}catch(y){i=y}e()}}catch(y){if(y&&i&&typeof y.stack=="string"){for(var a=y.stack.split(`
`),c=i.stack.split(`
`),f=a.length-1,g=c.length-1;1<=f&&0<=g&&a[f]!==c[g];)g--;for(;1<=f&&0<=g;f--,g--)if(a[f]!==c[g]){if(f!==1||g!==1)do if(f--,g--,0>g||a[f]!==c[g]){var v=`
`+a[f].replace(" at new "," at ");return e.displayName&&v.includes("<anonymous>")&&(v=v.replace("<anonymous>",e.displayName)),v}while(1<=f&&0<=g);break}}}finally{Jh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Kl(e):""}function _S(e){switch(e.tag){case 5:return Kl(e.type);case 16:return Kl("Lazy");case 13:return Kl("Suspense");case 19:return Kl("SuspenseList");case 0:case 2:case 15:return e=ef(e.type,!1),e;case 11:return e=ef(e.type.render,!1),e;case 1:return e=ef(e.type,!0),e;default:return""}}function e0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case La:return"Fragment";case Oa:return"Portal";case Qf:return"Profiler";case Ip:return"StrictMode";case $f:return"Suspense";case Jf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case p2:return(e.displayName||"Context")+".Consumer";case f2:return(e._context.displayName||"Context")+".Provider";case kp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Mp:return t=e.displayName||null,t!==null?t:e0(e.type)||"Memo";case Ks:t=e._payload,e=e._init;try{return e0(e(t))}catch{}}return null}function bS(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return e0(t);case 8:return t===Ip?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function vo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function g2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function CS(e){var t=g2(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,c=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(f){i=""+f,c.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function vu(e){e._valueTracker||(e._valueTracker=CS(e))}function x2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=g2(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function dd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function t0(e,t){var n=t.checked;return Cn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Bm(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=vo(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function y2(e,t){t=t.checked,t!=null&&Tp(e,"checked",t,!1)}function n0(e,t){y2(e,t);var n=vo(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?r0(e,t.type,n):t.hasOwnProperty("defaultValue")&&r0(e,t.type,vo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Fm(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function r0(e,t,n){(t!=="number"||dd(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ql=Array.isArray;function $a(e,t,n,i){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&i&&(e[n].defaultSelected=!0)}else{for(n=""+vo(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function i0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Re(91));return Cn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zm(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Re(92));if(Ql(n)){if(1<n.length)throw Error(Re(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:vo(n)}}function w2(e,t){var n=vo(t.value),i=vo(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function Um(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function v2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function s0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?v2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var _u,_2=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(_u=_u||document.createElement("div"),_u.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_u.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function wc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var nc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SS=["Webkit","ms","Moz","O"];Object.keys(nc).forEach(function(e){SS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),nc[t]=nc[e]})});function b2(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||nc.hasOwnProperty(e)&&nc[e]?(""+t).trim():t+"px"}function C2(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,a=b2(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,a):e[n]=a}}var AS=Cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function o0(e,t){if(t){if(AS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Re(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Re(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Re(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Re(62))}}function a0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var l0=null;function Rp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var c0=null,Ja=null,el=null;function Vm(e){if(e=qc(e)){if(typeof c0!="function")throw Error(Re(280));var t=e.stateNode;t&&(t=oh(t),c0(e.stateNode,e.type,t))}}function S2(e){Ja?el?el.push(e):el=[e]:Ja=e}function A2(){if(Ja){var e=Ja,t=el;if(el=Ja=null,Vm(e),t)for(e=0;e<t.length;e++)Vm(t[e])}}function E2(e,t){return e(t)}function N2(){}var tf=!1;function T2(e,t,n){if(tf)return e(t,n);tf=!0;try{return E2(e,t,n)}finally{tf=!1,(Ja!==null||el!==null)&&(N2(),A2())}}function vc(e,t){var n=e.stateNode;if(n===null)return null;var i=oh(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Re(231,t,typeof n));return n}var u0=!1;if(Es)try{var Bl={};Object.defineProperty(Bl,"passive",{get:function(){u0=!0}}),window.addEventListener("test",Bl,Bl),window.removeEventListener("test",Bl,Bl)}catch{u0=!1}function ES(e,t,n,i,a,c,f,g,v){var y=Array.prototype.slice.call(arguments,3);try{t.apply(n,y)}catch(C){this.onError(C)}}var rc=!1,hd=null,fd=!1,d0=null,NS={onError:function(e){rc=!0,hd=e}};function TS(e,t,n,i,a,c,f,g,v){rc=!1,hd=null,ES.apply(NS,arguments)}function IS(e,t,n,i,a,c,f,g,v){if(TS.apply(this,arguments),rc){if(rc){var y=hd;rc=!1,hd=null}else throw Error(Re(198));fd||(fd=!0,d0=y)}}function ga(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function I2(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Hm(e){if(ga(e)!==e)throw Error(Re(188))}function kS(e){var t=e.alternate;if(!t){if(t=ga(e),t===null)throw Error(Re(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(a===null)break;var c=a.alternate;if(c===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===n)return Hm(a),e;if(c===i)return Hm(a),t;c=c.sibling}throw Error(Re(188))}if(n.return!==i.return)n=a,i=c;else{for(var f=!1,g=a.child;g;){if(g===n){f=!0,n=a,i=c;break}if(g===i){f=!0,i=a,n=c;break}g=g.sibling}if(!f){for(g=c.child;g;){if(g===n){f=!0,n=c,i=a;break}if(g===i){f=!0,i=c,n=a;break}g=g.sibling}if(!f)throw Error(Re(189))}}if(n.alternate!==i)throw Error(Re(190))}if(n.tag!==3)throw Error(Re(188));return n.stateNode.current===n?e:t}function k2(e){return e=kS(e),e!==null?M2(e):null}function M2(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=M2(e);if(t!==null)return t;e=e.sibling}return null}var R2=ti.unstable_scheduleCallback,Wm=ti.unstable_cancelCallback,MS=ti.unstable_shouldYield,RS=ti.unstable_requestPaint,Rn=ti.unstable_now,OS=ti.unstable_getCurrentPriorityLevel,Op=ti.unstable_ImmediatePriority,O2=ti.unstable_UserBlockingPriority,pd=ti.unstable_NormalPriority,LS=ti.unstable_LowPriority,L2=ti.unstable_IdlePriority,nh=null,es=null;function PS(e){if(es&&typeof es.onCommitFiberRoot=="function")try{es.onCommitFiberRoot(nh,e,void 0,(e.current.flags&128)===128)}catch{}}var Fi=Math.clz32?Math.clz32:BS,DS=Math.log,jS=Math.LN2;function BS(e){return e>>>=0,e===0?32:31-(DS(e)/jS|0)|0}var bu=64,Cu=4194304;function $l(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function md(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,a=e.suspendedLanes,c=e.pingedLanes,f=n&268435455;if(f!==0){var g=f&~a;g!==0?i=$l(g):(c&=f,c!==0&&(i=$l(c)))}else f=n&~a,f!==0?i=$l(f):c!==0&&(i=$l(c));if(i===0)return 0;if(t!==0&&t!==i&&!(t&a)&&(a=i&-i,c=t&-t,a>=c||a===16&&(c&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-Fi(t),a=1<<n,i|=e[n],t&=~a;return i}function FS(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zS(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,c=e.pendingLanes;0<c;){var f=31-Fi(c),g=1<<f,v=a[f];v===-1?(!(g&n)||g&i)&&(a[f]=FS(g,t)):v<=t&&(e.expiredLanes|=g),c&=~g}}function h0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function P2(){var e=bu;return bu<<=1,!(bu&4194240)&&(bu=64),e}function nf(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Yc(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Fi(t),e[t]=n}function US(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Fi(n),c=1<<a;t[a]=0,i[a]=-1,e[a]=-1,n&=~c}}function Lp(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Fi(n),a=1<<i;a&t|e[i]&t&&(e[i]|=t),n&=~a}}var Jt=0;function D2(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var j2,Pp,B2,F2,z2,f0=!1,Su=[],oo=null,ao=null,lo=null,_c=new Map,bc=new Map,eo=[],VS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zm(e,t){switch(e){case"focusin":case"focusout":oo=null;break;case"dragenter":case"dragleave":ao=null;break;case"mouseover":case"mouseout":lo=null;break;case"pointerover":case"pointerout":_c.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bc.delete(t.pointerId)}}function Fl(e,t,n,i,a,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:c,targetContainers:[a]},t!==null&&(t=qc(t),t!==null&&Pp(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function HS(e,t,n,i,a){switch(t){case"focusin":return oo=Fl(oo,e,t,n,i,a),!0;case"dragenter":return ao=Fl(ao,e,t,n,i,a),!0;case"mouseover":return lo=Fl(lo,e,t,n,i,a),!0;case"pointerover":var c=a.pointerId;return _c.set(c,Fl(_c.get(c)||null,e,t,n,i,a)),!0;case"gotpointercapture":return c=a.pointerId,bc.set(c,Fl(bc.get(c)||null,e,t,n,i,a)),!0}return!1}function U2(e){var t=Qo(e.target);if(t!==null){var n=ga(t);if(n!==null){if(t=n.tag,t===13){if(t=I2(n),t!==null){e.blockedOn=t,z2(e.priority,function(){B2(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=p0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);l0=i,n.target.dispatchEvent(i),l0=null}else return t=qc(n),t!==null&&Pp(t),e.blockedOn=n,!1;t.shift()}return!0}function Gm(e,t,n){Yu(e)&&n.delete(t)}function WS(){f0=!1,oo!==null&&Yu(oo)&&(oo=null),ao!==null&&Yu(ao)&&(ao=null),lo!==null&&Yu(lo)&&(lo=null),_c.forEach(Gm),bc.forEach(Gm)}function zl(e,t){e.blockedOn===t&&(e.blockedOn=null,f0||(f0=!0,ti.unstable_scheduleCallback(ti.unstable_NormalPriority,WS)))}function Cc(e){function t(a){return zl(a,e)}if(0<Su.length){zl(Su[0],e);for(var n=1;n<Su.length;n++){var i=Su[n];i.blockedOn===e&&(i.blockedOn=null)}}for(oo!==null&&zl(oo,e),ao!==null&&zl(ao,e),lo!==null&&zl(lo,e),_c.forEach(t),bc.forEach(t),n=0;n<eo.length;n++)i=eo[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<eo.length&&(n=eo[0],n.blockedOn===null);)U2(n),n.blockedOn===null&&eo.shift()}var tl=Ps.ReactCurrentBatchConfig,gd=!0;function ZS(e,t,n,i){var a=Jt,c=tl.transition;tl.transition=null;try{Jt=1,Dp(e,t,n,i)}finally{Jt=a,tl.transition=c}}function GS(e,t,n,i){var a=Jt,c=tl.transition;tl.transition=null;try{Jt=4,Dp(e,t,n,i)}finally{Jt=a,tl.transition=c}}function Dp(e,t,n,i){if(gd){var a=p0(e,t,n,i);if(a===null)ff(e,t,i,xd,n),Zm(e,i);else if(HS(a,e,t,n,i))i.stopPropagation();else if(Zm(e,i),t&4&&-1<VS.indexOf(e)){for(;a!==null;){var c=qc(a);if(c!==null&&j2(c),c=p0(e,t,n,i),c===null&&ff(e,t,i,xd,n),c===a)break;a=c}a!==null&&i.stopPropagation()}else ff(e,t,i,null,n)}}var xd=null;function p0(e,t,n,i){if(xd=null,e=Rp(i),e=Qo(e),e!==null)if(t=ga(e),t===null)e=null;else if(n=t.tag,n===13){if(e=I2(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xd=e,null}function V2(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OS()){case Op:return 1;case O2:return 4;case pd:case LS:return 16;case L2:return 536870912;default:return 16}default:return 16}}var ro=null,jp=null,Xu=null;function H2(){if(Xu)return Xu;var e,t=jp,n=t.length,i,a="value"in ro?ro.value:ro.textContent,c=a.length;for(e=0;e<n&&t[e]===a[e];e++);var f=n-e;for(i=1;i<=f&&t[n-i]===a[c-i];i++);return Xu=a.slice(e,1<i?1-i:void 0)}function qu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Au(){return!0}function Ym(){return!1}function ii(e){function t(n,i,a,c,f){this._reactName=n,this._targetInst=a,this.type=i,this.nativeEvent=c,this.target=f,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(n=e[g],this[g]=n?n(c):c[g]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Au:Ym,this.isPropagationStopped=Ym,this}return Cn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Au)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Au)},persist:function(){},isPersistent:Au}),t}var gl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bp=ii(gl),Xc=Cn({},gl,{view:0,detail:0}),YS=ii(Xc),rf,sf,Ul,rh=Cn({},Xc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ul&&(Ul&&e.type==="mousemove"?(rf=e.screenX-Ul.screenX,sf=e.screenY-Ul.screenY):sf=rf=0,Ul=e),rf)},movementY:function(e){return"movementY"in e?e.movementY:sf}}),Xm=ii(rh),XS=Cn({},rh,{dataTransfer:0}),qS=ii(XS),KS=Cn({},Xc,{relatedTarget:0}),of=ii(KS),QS=Cn({},gl,{animationName:0,elapsedTime:0,pseudoElement:0}),$S=ii(QS),JS=Cn({},gl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),e3=ii(JS),t3=Cn({},gl,{data:0}),qm=ii(t3),n3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},r3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},i3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=i3[e])?!!t[e]:!1}function Fp(){return s3}var o3=Cn({},Xc,{key:function(e){if(e.key){var t=n3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?r3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fp,charCode:function(e){return e.type==="keypress"?qu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),a3=ii(o3),l3=Cn({},rh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Km=ii(l3),c3=Cn({},Xc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fp}),u3=ii(c3),d3=Cn({},gl,{propertyName:0,elapsedTime:0,pseudoElement:0}),h3=ii(d3),f3=Cn({},rh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),p3=ii(f3),m3=[9,13,27,32],zp=Es&&"CompositionEvent"in window,ic=null;Es&&"documentMode"in document&&(ic=document.documentMode);var g3=Es&&"TextEvent"in window&&!ic,W2=Es&&(!zp||ic&&8<ic&&11>=ic),Qm=" ",$m=!1;function Z2(e,t){switch(e){case"keyup":return m3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function G2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pa=!1;function x3(e,t){switch(e){case"compositionend":return G2(t);case"keypress":return t.which!==32?null:($m=!0,Qm);case"textInput":return e=t.data,e===Qm&&$m?null:e;default:return null}}function y3(e,t){if(Pa)return e==="compositionend"||!zp&&Z2(e,t)?(e=H2(),Xu=jp=ro=null,Pa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return W2&&t.locale!=="ko"?null:t.data;default:return null}}var w3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!w3[e.type]:t==="textarea"}function Y2(e,t,n,i){S2(i),t=yd(t,"onChange"),0<t.length&&(n=new Bp("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var sc=null,Sc=null;function v3(e){iw(e,0)}function ih(e){var t=Ba(e);if(x2(t))return e}function _3(e,t){if(e==="change")return t}var X2=!1;if(Es){var af;if(Es){var lf="oninput"in document;if(!lf){var eg=document.createElement("div");eg.setAttribute("oninput","return;"),lf=typeof eg.oninput=="function"}af=lf}else af=!1;X2=af&&(!document.documentMode||9<document.documentMode)}function tg(){sc&&(sc.detachEvent("onpropertychange",q2),Sc=sc=null)}function q2(e){if(e.propertyName==="value"&&ih(Sc)){var t=[];Y2(t,Sc,e,Rp(e)),T2(v3,t)}}function b3(e,t,n){e==="focusin"?(tg(),sc=t,Sc=n,sc.attachEvent("onpropertychange",q2)):e==="focusout"&&tg()}function C3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ih(Sc)}function S3(e,t){if(e==="click")return ih(t)}function A3(e,t){if(e==="input"||e==="change")return ih(t)}function E3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ui=typeof Object.is=="function"?Object.is:E3;function Ac(e,t){if(Ui(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!Kf.call(t,a)||!Ui(e[a],t[a]))return!1}return!0}function ng(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rg(e,t){var n=ng(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ng(n)}}function K2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?K2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Q2(){for(var e=window,t=dd();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=dd(e.document)}return t}function Up(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function N3(e){var t=Q2(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&K2(n.ownerDocument.documentElement,n)){if(i!==null&&Up(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,c=Math.min(i.start,a);i=i.end===void 0?c:Math.min(i.end,a),!e.extend&&c>i&&(a=i,i=c,c=a),a=rg(n,c);var f=rg(n,i);a&&f&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),c>i?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var T3=Es&&"documentMode"in document&&11>=document.documentMode,Da=null,m0=null,oc=null,g0=!1;function ig(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;g0||Da==null||Da!==dd(i)||(i=Da,"selectionStart"in i&&Up(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),oc&&Ac(oc,i)||(oc=i,i=yd(m0,"onSelect"),0<i.length&&(t=new Bp("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Da)))}function Eu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ja={animationend:Eu("Animation","AnimationEnd"),animationiteration:Eu("Animation","AnimationIteration"),animationstart:Eu("Animation","AnimationStart"),transitionend:Eu("Transition","TransitionEnd")},cf={},$2={};Es&&($2=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);function sh(e){if(cf[e])return cf[e];if(!ja[e])return e;var t=ja[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in $2)return cf[e]=t[n];return e}var J2=sh("animationend"),ew=sh("animationiteration"),tw=sh("animationstart"),nw=sh("transitionend"),rw=new Map,sg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ao(e,t){rw.set(e,t),ma(t,[e])}for(var uf=0;uf<sg.length;uf++){var df=sg[uf],I3=df.toLowerCase(),k3=df[0].toUpperCase()+df.slice(1);Ao(I3,"on"+k3)}Ao(J2,"onAnimationEnd");Ao(ew,"onAnimationIteration");Ao(tw,"onAnimationStart");Ao("dblclick","onDoubleClick");Ao("focusin","onFocus");Ao("focusout","onBlur");Ao(nw,"onTransitionEnd");il("onMouseEnter",["mouseout","mouseover"]);il("onMouseLeave",["mouseout","mouseover"]);il("onPointerEnter",["pointerout","pointerover"]);il("onPointerLeave",["pointerout","pointerover"]);ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ma("onBeforeInput",["compositionend","keypress","textInput","paste"]);ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jl));function og(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,IS(i,t,void 0,e),e.currentTarget=null}function iw(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],a=i.event;i=i.listeners;e:{var c=void 0;if(t)for(var f=i.length-1;0<=f;f--){var g=i[f],v=g.instance,y=g.currentTarget;if(g=g.listener,v!==c&&a.isPropagationStopped())break e;og(a,g,y),c=v}else for(f=0;f<i.length;f++){if(g=i[f],v=g.instance,y=g.currentTarget,g=g.listener,v!==c&&a.isPropagationStopped())break e;og(a,g,y),c=v}}}if(fd)throw e=d0,fd=!1,d0=null,e}function hn(e,t){var n=t[_0];n===void 0&&(n=t[_0]=new Set);var i=e+"__bubble";n.has(i)||(sw(t,e,2,!1),n.add(i))}function hf(e,t,n){var i=0;t&&(i|=4),sw(n,e,i,t)}var Nu="_reactListening"+Math.random().toString(36).slice(2);function Ec(e){if(!e[Nu]){e[Nu]=!0,h2.forEach(function(n){n!=="selectionchange"&&(M3.has(n)||hf(n,!1,e),hf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Nu]||(t[Nu]=!0,hf("selectionchange",!1,t))}}function sw(e,t,n,i){switch(V2(t)){case 1:var a=ZS;break;case 4:a=GS;break;default:a=Dp}n=a.bind(null,t,n,e),a=void 0,!u0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function ff(e,t,n,i,a){var c=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var g=i.stateNode.containerInfo;if(g===a||g.nodeType===8&&g.parentNode===a)break;if(f===4)for(f=i.return;f!==null;){var v=f.tag;if((v===3||v===4)&&(v=f.stateNode.containerInfo,v===a||v.nodeType===8&&v.parentNode===a))return;f=f.return}for(;g!==null;){if(f=Qo(g),f===null)return;if(v=f.tag,v===5||v===6){i=c=f;continue e}g=g.parentNode}}i=i.return}T2(function(){var y=c,C=Rp(n),b=[];e:{var T=rw.get(e);if(T!==void 0){var I=Bp,z=e;switch(e){case"keypress":if(qu(n)===0)break e;case"keydown":case"keyup":I=a3;break;case"focusin":z="focus",I=of;break;case"focusout":z="blur",I=of;break;case"beforeblur":case"afterblur":I=of;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Xm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=qS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=u3;break;case J2:case ew:case tw:I=$S;break;case nw:I=h3;break;case"scroll":I=YS;break;case"wheel":I=p3;break;case"copy":case"cut":case"paste":I=e3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Km}var R=(t&4)!==0,j=!R&&e==="scroll",F=R?T!==null?T+"Capture":null:T;R=[];for(var O=y,k;O!==null;){k=O;var W=k.stateNode;if(k.tag===5&&W!==null&&(k=W,F!==null&&(W=vc(O,F),W!=null&&R.push(Nc(O,W,k)))),j)break;O=O.return}0<R.length&&(T=new I(T,z,null,n,C),b.push({event:T,listeners:R}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",T&&n!==l0&&(z=n.relatedTarget||n.fromElement)&&(Qo(z)||z[Ns]))break e;if((I||T)&&(T=C.window===C?C:(T=C.ownerDocument)?T.defaultView||T.parentWindow:window,I?(z=n.relatedTarget||n.toElement,I=y,z=z?Qo(z):null,z!==null&&(j=ga(z),z!==j||z.tag!==5&&z.tag!==6)&&(z=null)):(I=null,z=y),I!==z)){if(R=Xm,W="onMouseLeave",F="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(R=Km,W="onPointerLeave",F="onPointerEnter",O="pointer"),j=I==null?T:Ba(I),k=z==null?T:Ba(z),T=new R(W,O+"leave",I,n,C),T.target=j,T.relatedTarget=k,W=null,Qo(C)===y&&(R=new R(F,O+"enter",z,n,C),R.target=k,R.relatedTarget=j,W=R),j=W,I&&z)t:{for(R=I,F=z,O=0,k=R;k;k=Ia(k))O++;for(k=0,W=F;W;W=Ia(W))k++;for(;0<O-k;)R=Ia(R),O--;for(;0<k-O;)F=Ia(F),k--;for(;O--;){if(R===F||F!==null&&R===F.alternate)break t;R=Ia(R),F=Ia(F)}R=null}else R=null;I!==null&&ag(b,T,I,R,!1),z!==null&&j!==null&&ag(b,j,z,R,!0)}}e:{if(T=y?Ba(y):window,I=T.nodeName&&T.nodeName.toLowerCase(),I==="select"||I==="input"&&T.type==="file")var K=_3;else if(Jm(T))if(X2)K=A3;else{K=C3;var Y=b3}else(I=T.nodeName)&&I.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(K=S3);if(K&&(K=K(e,y))){Y2(b,K,n,C);break e}Y&&Y(e,T,y),e==="focusout"&&(Y=T._wrapperState)&&Y.controlled&&T.type==="number"&&r0(T,"number",T.value)}switch(Y=y?Ba(y):window,e){case"focusin":(Jm(Y)||Y.contentEditable==="true")&&(Da=Y,m0=y,oc=null);break;case"focusout":oc=m0=Da=null;break;case"mousedown":g0=!0;break;case"contextmenu":case"mouseup":case"dragend":g0=!1,ig(b,n,C);break;case"selectionchange":if(T3)break;case"keydown":case"keyup":ig(b,n,C)}var H;if(zp)e:{switch(e){case"compositionstart":var Q="onCompositionStart";break e;case"compositionend":Q="onCompositionEnd";break e;case"compositionupdate":Q="onCompositionUpdate";break e}Q=void 0}else Pa?Z2(e,n)&&(Q="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Q="onCompositionStart");Q&&(W2&&n.locale!=="ko"&&(Pa||Q!=="onCompositionStart"?Q==="onCompositionEnd"&&Pa&&(H=H2()):(ro=C,jp="value"in ro?ro.value:ro.textContent,Pa=!0)),Y=yd(y,Q),0<Y.length&&(Q=new qm(Q,e,null,n,C),b.push({event:Q,listeners:Y}),H?Q.data=H:(H=G2(n),H!==null&&(Q.data=H)))),(H=g3?x3(e,n):y3(e,n))&&(y=yd(y,"onBeforeInput"),0<y.length&&(C=new qm("onBeforeInput","beforeinput",null,n,C),b.push({event:C,listeners:y}),C.data=H))}iw(b,t)})}function Nc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function yd(e,t){for(var n=t+"Capture",i=[];e!==null;){var a=e,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=vc(e,n),c!=null&&i.unshift(Nc(e,c,a)),c=vc(e,t),c!=null&&i.push(Nc(e,c,a))),e=e.return}return i}function Ia(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ag(e,t,n,i,a){for(var c=t._reactName,f=[];n!==null&&n!==i;){var g=n,v=g.alternate,y=g.stateNode;if(v!==null&&v===i)break;g.tag===5&&y!==null&&(g=y,a?(v=vc(n,c),v!=null&&f.unshift(Nc(n,v,g))):a||(v=vc(n,c),v!=null&&f.push(Nc(n,v,g)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var R3=/\r\n?/g,O3=/\u0000|\uFFFD/g;function lg(e){return(typeof e=="string"?e:""+e).replace(R3,`
`).replace(O3,"")}function Tu(e,t,n){if(t=lg(t),lg(e)!==t&&n)throw Error(Re(425))}function wd(){}var x0=null,y0=null;function w0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var v0=typeof setTimeout=="function"?setTimeout:void 0,L3=typeof clearTimeout=="function"?clearTimeout:void 0,cg=typeof Promise=="function"?Promise:void 0,P3=typeof queueMicrotask=="function"?queueMicrotask:typeof cg<"u"?function(e){return cg.resolve(null).then(e).catch(D3)}:v0;function D3(e){setTimeout(function(){throw e})}function pf(e,t){var n=t,i=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(i===0){e.removeChild(a),Cc(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=a}while(n);Cc(t)}function co(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ug(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var xl=Math.random().toString(36).slice(2),Ji="__reactFiber$"+xl,Tc="__reactProps$"+xl,Ns="__reactContainer$"+xl,_0="__reactEvents$"+xl,j3="__reactListeners$"+xl,B3="__reactHandles$"+xl;function Qo(e){var t=e[Ji];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ns]||n[Ji]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ug(e);e!==null;){if(n=e[Ji])return n;e=ug(e)}return t}e=n,n=e.parentNode}return null}function qc(e){return e=e[Ji]||e[Ns],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ba(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Re(33))}function oh(e){return e[Tc]||null}var b0=[],Fa=-1;function Eo(e){return{current:e}}function fn(e){0>Fa||(e.current=b0[Fa],b0[Fa]=null,Fa--)}function ln(e,t){Fa++,b0[Fa]=e.current,e.current=t}var _o={},yr=Eo(_o),Br=Eo(!1),ca=_o;function sl(e,t){var n=e.type.contextTypes;if(!n)return _o;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in n)a[c]=t[c];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Fr(e){return e=e.childContextTypes,e!=null}function vd(){fn(Br),fn(yr)}function dg(e,t,n){if(yr.current!==_o)throw Error(Re(168));ln(yr,t),ln(Br,n)}function ow(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var a in i)if(!(a in t))throw Error(Re(108,bS(e)||"Unknown",a));return Cn({},n,i)}function _d(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_o,ca=yr.current,ln(yr,e),ln(Br,Br.current),!0}function hg(e,t,n){var i=e.stateNode;if(!i)throw Error(Re(169));n?(e=ow(e,t,ca),i.__reactInternalMemoizedMergedChildContext=e,fn(Br),fn(yr),ln(yr,e)):fn(Br),ln(Br,n)}var xs=null,ah=!1,mf=!1;function aw(e){xs===null?xs=[e]:xs.push(e)}function F3(e){ah=!0,aw(e)}function No(){if(!mf&&xs!==null){mf=!0;var e=0,t=Jt;try{var n=xs;for(Jt=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}xs=null,ah=!1}catch(a){throw xs!==null&&(xs=xs.slice(e+1)),R2(Op,No),a}finally{Jt=t,mf=!1}}return null}var za=[],Ua=0,bd=null,Cd=0,wi=[],vi=0,ua=null,ys=1,ws="";function Zo(e,t){za[Ua++]=Cd,za[Ua++]=bd,bd=e,Cd=t}function lw(e,t,n){wi[vi++]=ys,wi[vi++]=ws,wi[vi++]=ua,ua=e;var i=ys;e=ws;var a=32-Fi(i)-1;i&=~(1<<a),n+=1;var c=32-Fi(t)+a;if(30<c){var f=a-a%5;c=(i&(1<<f)-1).toString(32),i>>=f,a-=f,ys=1<<32-Fi(t)+a|n<<a|i,ws=c+e}else ys=1<<c|n<<a|i,ws=e}function Vp(e){e.return!==null&&(Zo(e,1),lw(e,1,0))}function Hp(e){for(;e===bd;)bd=za[--Ua],za[Ua]=null,Cd=za[--Ua],za[Ua]=null;for(;e===ua;)ua=wi[--vi],wi[vi]=null,ws=wi[--vi],wi[vi]=null,ys=wi[--vi],wi[vi]=null}var ei=null,Jr=null,xn=!1,Bi=null;function cw(e,t){var n=_i(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function fg(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ei=e,Jr=co(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ei=e,Jr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ua!==null?{id:ys,overflow:ws}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=_i(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ei=e,Jr=null,!0):!1;default:return!1}}function C0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function S0(e){if(xn){var t=Jr;if(t){var n=t;if(!fg(e,t)){if(C0(e))throw Error(Re(418));t=co(n.nextSibling);var i=ei;t&&fg(e,t)?cw(i,n):(e.flags=e.flags&-4097|2,xn=!1,ei=e)}}else{if(C0(e))throw Error(Re(418));e.flags=e.flags&-4097|2,xn=!1,ei=e}}}function pg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ei=e}function Iu(e){if(e!==ei)return!1;if(!xn)return pg(e),xn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!w0(e.type,e.memoizedProps)),t&&(t=Jr)){if(C0(e))throw uw(),Error(Re(418));for(;t;)cw(e,t),t=co(t.nextSibling)}if(pg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Re(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Jr=co(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Jr=null}}else Jr=ei?co(e.stateNode.nextSibling):null;return!0}function uw(){for(var e=Jr;e;)e=co(e.nextSibling)}function ol(){Jr=ei=null,xn=!1}function Wp(e){Bi===null?Bi=[e]:Bi.push(e)}var z3=Ps.ReactCurrentBatchConfig;function Vl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Re(309));var i=n.stateNode}if(!i)throw Error(Re(147,e));var a=i,c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(f){var g=a.refs;f===null?delete g[c]:g[c]=f},t._stringRef=c,t)}if(typeof e!="string")throw Error(Re(284));if(!n._owner)throw Error(Re(290,e))}return e}function ku(e,t){throw e=Object.prototype.toString.call(t),Error(Re(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mg(e){var t=e._init;return t(e._payload)}function dw(e){function t(F,O){if(e){var k=F.deletions;k===null?(F.deletions=[O],F.flags|=16):k.push(O)}}function n(F,O){if(!e)return null;for(;O!==null;)t(F,O),O=O.sibling;return null}function i(F,O){for(F=new Map;O!==null;)O.key!==null?F.set(O.key,O):F.set(O.index,O),O=O.sibling;return F}function a(F,O){return F=po(F,O),F.index=0,F.sibling=null,F}function c(F,O,k){return F.index=k,e?(k=F.alternate,k!==null?(k=k.index,k<O?(F.flags|=2,O):k):(F.flags|=2,O)):(F.flags|=1048576,O)}function f(F){return e&&F.alternate===null&&(F.flags|=2),F}function g(F,O,k,W){return O===null||O.tag!==6?(O=bf(k,F.mode,W),O.return=F,O):(O=a(O,k),O.return=F,O)}function v(F,O,k,W){var K=k.type;return K===La?C(F,O,k.props.children,W,k.key):O!==null&&(O.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Ks&&mg(K)===O.type)?(W=a(O,k.props),W.ref=Vl(F,O,k),W.return=F,W):(W=nd(k.type,k.key,k.props,null,F.mode,W),W.ref=Vl(F,O,k),W.return=F,W)}function y(F,O,k,W){return O===null||O.tag!==4||O.stateNode.containerInfo!==k.containerInfo||O.stateNode.implementation!==k.implementation?(O=Cf(k,F.mode,W),O.return=F,O):(O=a(O,k.children||[]),O.return=F,O)}function C(F,O,k,W,K){return O===null||O.tag!==7?(O=ra(k,F.mode,W,K),O.return=F,O):(O=a(O,k),O.return=F,O)}function b(F,O,k){if(typeof O=="string"&&O!==""||typeof O=="number")return O=bf(""+O,F.mode,k),O.return=F,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case wu:return k=nd(O.type,O.key,O.props,null,F.mode,k),k.ref=Vl(F,null,O),k.return=F,k;case Oa:return O=Cf(O,F.mode,k),O.return=F,O;case Ks:var W=O._init;return b(F,W(O._payload),k)}if(Ql(O)||jl(O))return O=ra(O,F.mode,k,null),O.return=F,O;ku(F,O)}return null}function T(F,O,k,W){var K=O!==null?O.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return K!==null?null:g(F,O,""+k,W);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case wu:return k.key===K?v(F,O,k,W):null;case Oa:return k.key===K?y(F,O,k,W):null;case Ks:return K=k._init,T(F,O,K(k._payload),W)}if(Ql(k)||jl(k))return K!==null?null:C(F,O,k,W,null);ku(F,k)}return null}function I(F,O,k,W,K){if(typeof W=="string"&&W!==""||typeof W=="number")return F=F.get(k)||null,g(O,F,""+W,K);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case wu:return F=F.get(W.key===null?k:W.key)||null,v(O,F,W,K);case Oa:return F=F.get(W.key===null?k:W.key)||null,y(O,F,W,K);case Ks:var Y=W._init;return I(F,O,k,Y(W._payload),K)}if(Ql(W)||jl(W))return F=F.get(k)||null,C(O,F,W,K,null);ku(O,W)}return null}function z(F,O,k,W){for(var K=null,Y=null,H=O,Q=O=0,M=null;H!==null&&Q<k.length;Q++){H.index>Q?(M=H,H=null):M=H.sibling;var q=T(F,H,k[Q],W);if(q===null){H===null&&(H=M);break}e&&H&&q.alternate===null&&t(F,H),O=c(q,O,Q),Y===null?K=q:Y.sibling=q,Y=q,H=M}if(Q===k.length)return n(F,H),xn&&Zo(F,Q),K;if(H===null){for(;Q<k.length;Q++)H=b(F,k[Q],W),H!==null&&(O=c(H,O,Q),Y===null?K=H:Y.sibling=H,Y=H);return xn&&Zo(F,Q),K}for(H=i(F,H);Q<k.length;Q++)M=I(H,F,Q,k[Q],W),M!==null&&(e&&M.alternate!==null&&H.delete(M.key===null?Q:M.key),O=c(M,O,Q),Y===null?K=M:Y.sibling=M,Y=M);return e&&H.forEach(function(ie){return t(F,ie)}),xn&&Zo(F,Q),K}function R(F,O,k,W){var K=jl(k);if(typeof K!="function")throw Error(Re(150));if(k=K.call(k),k==null)throw Error(Re(151));for(var Y=K=null,H=O,Q=O=0,M=null,q=k.next();H!==null&&!q.done;Q++,q=k.next()){H.index>Q?(M=H,H=null):M=H.sibling;var ie=T(F,H,q.value,W);if(ie===null){H===null&&(H=M);break}e&&H&&ie.alternate===null&&t(F,H),O=c(ie,O,Q),Y===null?K=ie:Y.sibling=ie,Y=ie,H=M}if(q.done)return n(F,H),xn&&Zo(F,Q),K;if(H===null){for(;!q.done;Q++,q=k.next())q=b(F,q.value,W),q!==null&&(O=c(q,O,Q),Y===null?K=q:Y.sibling=q,Y=q);return xn&&Zo(F,Q),K}for(H=i(F,H);!q.done;Q++,q=k.next())q=I(H,F,Q,q.value,W),q!==null&&(e&&q.alternate!==null&&H.delete(q.key===null?Q:q.key),O=c(q,O,Q),Y===null?K=q:Y.sibling=q,Y=q);return e&&H.forEach(function(ae){return t(F,ae)}),xn&&Zo(F,Q),K}function j(F,O,k,W){if(typeof k=="object"&&k!==null&&k.type===La&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case wu:e:{for(var K=k.key,Y=O;Y!==null;){if(Y.key===K){if(K=k.type,K===La){if(Y.tag===7){n(F,Y.sibling),O=a(Y,k.props.children),O.return=F,F=O;break e}}else if(Y.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Ks&&mg(K)===Y.type){n(F,Y.sibling),O=a(Y,k.props),O.ref=Vl(F,Y,k),O.return=F,F=O;break e}n(F,Y);break}else t(F,Y);Y=Y.sibling}k.type===La?(O=ra(k.props.children,F.mode,W,k.key),O.return=F,F=O):(W=nd(k.type,k.key,k.props,null,F.mode,W),W.ref=Vl(F,O,k),W.return=F,F=W)}return f(F);case Oa:e:{for(Y=k.key;O!==null;){if(O.key===Y)if(O.tag===4&&O.stateNode.containerInfo===k.containerInfo&&O.stateNode.implementation===k.implementation){n(F,O.sibling),O=a(O,k.children||[]),O.return=F,F=O;break e}else{n(F,O);break}else t(F,O);O=O.sibling}O=Cf(k,F.mode,W),O.return=F,F=O}return f(F);case Ks:return Y=k._init,j(F,O,Y(k._payload),W)}if(Ql(k))return z(F,O,k,W);if(jl(k))return R(F,O,k,W);ku(F,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,O!==null&&O.tag===6?(n(F,O.sibling),O=a(O,k),O.return=F,F=O):(n(F,O),O=bf(k,F.mode,W),O.return=F,F=O),f(F)):n(F,O)}return j}var al=dw(!0),hw=dw(!1),Sd=Eo(null),Ad=null,Va=null,Zp=null;function Gp(){Zp=Va=Ad=null}function Yp(e){var t=Sd.current;fn(Sd),e._currentValue=t}function A0(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function nl(e,t){Ad=e,Zp=Va=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(jr=!0),e.firstContext=null)}function Ci(e){var t=e._currentValue;if(Zp!==e)if(e={context:e,memoizedValue:t,next:null},Va===null){if(Ad===null)throw Error(Re(308));Va=e,Ad.dependencies={lanes:0,firstContext:e}}else Va=Va.next=e;return t}var $o=null;function Xp(e){$o===null?$o=[e]:$o.push(e)}function fw(e,t,n,i){var a=t.interleaved;return a===null?(n.next=n,Xp(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ts(e,i)}function Ts(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Qs=!1;function qp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Cs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function uo(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,zt&2){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,Ts(e,n)}return a=i.interleaved,a===null?(t.next=t,Xp(i)):(t.next=a.next,a.next=t),i.interleaved=t,Ts(e,n)}function Ku(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Lp(e,n)}}function gg(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var a=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};c===null?a=c=f:c=c.next=f,n=n.next}while(n!==null);c===null?a=c=t:c=c.next=t}else a=c=t;n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ed(e,t,n,i){var a=e.updateQueue;Qs=!1;var c=a.firstBaseUpdate,f=a.lastBaseUpdate,g=a.shared.pending;if(g!==null){a.shared.pending=null;var v=g,y=v.next;v.next=null,f===null?c=y:f.next=y,f=v;var C=e.alternate;C!==null&&(C=C.updateQueue,g=C.lastBaseUpdate,g!==f&&(g===null?C.firstBaseUpdate=y:g.next=y,C.lastBaseUpdate=v))}if(c!==null){var b=a.baseState;f=0,C=y=v=null,g=c;do{var T=g.lane,I=g.eventTime;if((i&T)===T){C!==null&&(C=C.next={eventTime:I,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var z=e,R=g;switch(T=t,I=n,R.tag){case 1:if(z=R.payload,typeof z=="function"){b=z.call(I,b,T);break e}b=z;break e;case 3:z.flags=z.flags&-65537|128;case 0:if(z=R.payload,T=typeof z=="function"?z.call(I,b,T):z,T==null)break e;b=Cn({},b,T);break e;case 2:Qs=!0}}g.callback!==null&&g.lane!==0&&(e.flags|=64,T=a.effects,T===null?a.effects=[g]:T.push(g))}else I={eventTime:I,lane:T,tag:g.tag,payload:g.payload,callback:g.callback,next:null},C===null?(y=C=I,v=b):C=C.next=I,f|=T;if(g=g.next,g===null){if(g=a.shared.pending,g===null)break;T=g,g=T.next,T.next=null,a.lastBaseUpdate=T,a.shared.pending=null}}while(!0);if(C===null&&(v=b),a.baseState=v,a.firstBaseUpdate=y,a.lastBaseUpdate=C,t=a.shared.interleaved,t!==null){a=t;do f|=a.lane,a=a.next;while(a!==t)}else c===null&&(a.shared.lanes=0);ha|=f,e.lanes=f,e.memoizedState=b}}function xg(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],a=i.callback;if(a!==null){if(i.callback=null,i=n,typeof a!="function")throw Error(Re(191,a));a.call(i)}}}var Kc={},ts=Eo(Kc),Ic=Eo(Kc),kc=Eo(Kc);function Jo(e){if(e===Kc)throw Error(Re(174));return e}function Kp(e,t){switch(ln(kc,t),ln(Ic,e),ln(ts,Kc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:s0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=s0(t,e)}fn(ts),ln(ts,t)}function ll(){fn(ts),fn(Ic),fn(kc)}function mw(e){Jo(kc.current);var t=Jo(ts.current),n=s0(t,e.type);t!==n&&(ln(Ic,e),ln(ts,n))}function Qp(e){Ic.current===e&&(fn(ts),fn(Ic))}var vn=Eo(0);function Nd(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var gf=[];function $p(){for(var e=0;e<gf.length;e++)gf[e]._workInProgressVersionPrimary=null;gf.length=0}var Qu=Ps.ReactCurrentDispatcher,xf=Ps.ReactCurrentBatchConfig,da=0,bn=null,qn=null,rr=null,Td=!1,ac=!1,Mc=0,U3=0;function fr(){throw Error(Re(321))}function Jp(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ui(e[n],t[n]))return!1;return!0}function e1(e,t,n,i,a,c){if(da=c,bn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qu.current=e===null||e.memoizedState===null?Z3:G3,e=n(i,a),ac){c=0;do{if(ac=!1,Mc=0,25<=c)throw Error(Re(301));c+=1,rr=qn=null,t.updateQueue=null,Qu.current=Y3,e=n(i,a)}while(ac)}if(Qu.current=Id,t=qn!==null&&qn.next!==null,da=0,rr=qn=bn=null,Td=!1,t)throw Error(Re(300));return e}function t1(){var e=Mc!==0;return Mc=0,e}function Qi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rr===null?bn.memoizedState=rr=e:rr=rr.next=e,rr}function Si(){if(qn===null){var e=bn.alternate;e=e!==null?e.memoizedState:null}else e=qn.next;var t=rr===null?bn.memoizedState:rr.next;if(t!==null)rr=t,qn=e;else{if(e===null)throw Error(Re(310));qn=e,e={memoizedState:qn.memoizedState,baseState:qn.baseState,baseQueue:qn.baseQueue,queue:qn.queue,next:null},rr===null?bn.memoizedState=rr=e:rr=rr.next=e}return rr}function Rc(e,t){return typeof t=="function"?t(e):t}function yf(e){var t=Si(),n=t.queue;if(n===null)throw Error(Re(311));n.lastRenderedReducer=e;var i=qn,a=i.baseQueue,c=n.pending;if(c!==null){if(a!==null){var f=a.next;a.next=c.next,c.next=f}i.baseQueue=a=c,n.pending=null}if(a!==null){c=a.next,i=i.baseState;var g=f=null,v=null,y=c;do{var C=y.lane;if((da&C)===C)v!==null&&(v=v.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),i=y.hasEagerState?y.eagerState:e(i,y.action);else{var b={lane:C,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};v===null?(g=v=b,f=i):v=v.next=b,bn.lanes|=C,ha|=C}y=y.next}while(y!==null&&y!==c);v===null?f=i:v.next=g,Ui(i,t.memoizedState)||(jr=!0),t.memoizedState=i,t.baseState=f,t.baseQueue=v,n.lastRenderedState=i}if(e=n.interleaved,e!==null){a=e;do c=a.lane,bn.lanes|=c,ha|=c,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wf(e){var t=Si(),n=t.queue;if(n===null)throw Error(Re(311));n.lastRenderedReducer=e;var i=n.dispatch,a=n.pending,c=t.memoizedState;if(a!==null){n.pending=null;var f=a=a.next;do c=e(c,f.action),f=f.next;while(f!==a);Ui(c,t.memoizedState)||(jr=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),n.lastRenderedState=c}return[c,i]}function gw(){}function xw(e,t){var n=bn,i=Si(),a=t(),c=!Ui(i.memoizedState,a);if(c&&(i.memoizedState=a,jr=!0),i=i.queue,n1(vw.bind(null,n,i,e),[e]),i.getSnapshot!==t||c||rr!==null&&rr.memoizedState.tag&1){if(n.flags|=2048,Oc(9,ww.bind(null,n,i,a,t),void 0,null),ir===null)throw Error(Re(349));da&30||yw(n,t,a)}return a}function yw(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=bn.updateQueue,t===null?(t={lastEffect:null,stores:null},bn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ww(e,t,n,i){t.value=n,t.getSnapshot=i,_w(t)&&bw(e)}function vw(e,t,n){return n(function(){_w(t)&&bw(e)})}function _w(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ui(e,n)}catch{return!0}}function bw(e){var t=Ts(e,1);t!==null&&zi(t,e,1,-1)}function yg(e){var t=Qi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rc,lastRenderedState:e},t.queue=e,e=e.dispatch=W3.bind(null,bn,e),[t.memoizedState,e]}function Oc(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=bn.updateQueue,t===null?(t={lastEffect:null,stores:null},bn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function Cw(){return Si().memoizedState}function $u(e,t,n,i){var a=Qi();bn.flags|=e,a.memoizedState=Oc(1|t,n,void 0,i===void 0?null:i)}function lh(e,t,n,i){var a=Si();i=i===void 0?null:i;var c=void 0;if(qn!==null){var f=qn.memoizedState;if(c=f.destroy,i!==null&&Jp(i,f.deps)){a.memoizedState=Oc(t,n,c,i);return}}bn.flags|=e,a.memoizedState=Oc(1|t,n,c,i)}function wg(e,t){return $u(8390656,8,e,t)}function n1(e,t){return lh(2048,8,e,t)}function Sw(e,t){return lh(4,2,e,t)}function Aw(e,t){return lh(4,4,e,t)}function Ew(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Nw(e,t,n){return n=n!=null?n.concat([e]):null,lh(4,4,Ew.bind(null,t,e),n)}function r1(){}function Tw(e,t){var n=Si();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Jp(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Iw(e,t){var n=Si();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Jp(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function kw(e,t,n){return da&21?(Ui(n,t)||(n=P2(),bn.lanes|=n,ha|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,jr=!0),e.memoizedState=n)}function V3(e,t){var n=Jt;Jt=n!==0&&4>n?n:4,e(!0);var i=xf.transition;xf.transition={};try{e(!1),t()}finally{Jt=n,xf.transition=i}}function Mw(){return Si().memoizedState}function H3(e,t,n){var i=fo(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Rw(e))Ow(t,n);else if(n=fw(e,t,n,i),n!==null){var a=kr();zi(n,e,i,a),Lw(n,t,i)}}function W3(e,t,n){var i=fo(e),a={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Rw(e))Ow(t,a);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var f=t.lastRenderedState,g=c(f,n);if(a.hasEagerState=!0,a.eagerState=g,Ui(g,f)){var v=t.interleaved;v===null?(a.next=a,Xp(t)):(a.next=v.next,v.next=a),t.interleaved=a;return}}catch{}finally{}n=fw(e,t,a,i),n!==null&&(a=kr(),zi(n,e,i,a),Lw(n,t,i))}}function Rw(e){var t=e.alternate;return e===bn||t!==null&&t===bn}function Ow(e,t){ac=Td=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Lw(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Lp(e,n)}}var Id={readContext:Ci,useCallback:fr,useContext:fr,useEffect:fr,useImperativeHandle:fr,useInsertionEffect:fr,useLayoutEffect:fr,useMemo:fr,useReducer:fr,useRef:fr,useState:fr,useDebugValue:fr,useDeferredValue:fr,useTransition:fr,useMutableSource:fr,useSyncExternalStore:fr,useId:fr,unstable_isNewReconciler:!1},Z3={readContext:Ci,useCallback:function(e,t){return Qi().memoizedState=[e,t===void 0?null:t],e},useContext:Ci,useEffect:wg,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,$u(4194308,4,Ew.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $u(4194308,4,e,t)},useInsertionEffect:function(e,t){return $u(4,2,e,t)},useMemo:function(e,t){var n=Qi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Qi();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=H3.bind(null,bn,e),[i.memoizedState,e]},useRef:function(e){var t=Qi();return e={current:e},t.memoizedState=e},useState:yg,useDebugValue:r1,useDeferredValue:function(e){return Qi().memoizedState=e},useTransition:function(){var e=yg(!1),t=e[0];return e=V3.bind(null,e[1]),Qi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=bn,a=Qi();if(xn){if(n===void 0)throw Error(Re(407));n=n()}else{if(n=t(),ir===null)throw Error(Re(349));da&30||yw(i,t,n)}a.memoizedState=n;var c={value:n,getSnapshot:t};return a.queue=c,wg(vw.bind(null,i,c,e),[e]),i.flags|=2048,Oc(9,ww.bind(null,i,c,n,t),void 0,null),n},useId:function(){var e=Qi(),t=ir.identifierPrefix;if(xn){var n=ws,i=ys;n=(i&~(1<<32-Fi(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=Mc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=U3++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},G3={readContext:Ci,useCallback:Tw,useContext:Ci,useEffect:n1,useImperativeHandle:Nw,useInsertionEffect:Sw,useLayoutEffect:Aw,useMemo:Iw,useReducer:yf,useRef:Cw,useState:function(){return yf(Rc)},useDebugValue:r1,useDeferredValue:function(e){var t=Si();return kw(t,qn.memoizedState,e)},useTransition:function(){var e=yf(Rc)[0],t=Si().memoizedState;return[e,t]},useMutableSource:gw,useSyncExternalStore:xw,useId:Mw,unstable_isNewReconciler:!1},Y3={readContext:Ci,useCallback:Tw,useContext:Ci,useEffect:n1,useImperativeHandle:Nw,useInsertionEffect:Sw,useLayoutEffect:Aw,useMemo:Iw,useReducer:wf,useRef:Cw,useState:function(){return wf(Rc)},useDebugValue:r1,useDeferredValue:function(e){var t=Si();return qn===null?t.memoizedState=e:kw(t,qn.memoizedState,e)},useTransition:function(){var e=wf(Rc)[0],t=Si().memoizedState;return[e,t]},useMutableSource:gw,useSyncExternalStore:xw,useId:Mw,unstable_isNewReconciler:!1};function Oi(e,t){if(e&&e.defaultProps){t=Cn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function E0(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Cn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ch={isMounted:function(e){return(e=e._reactInternals)?ga(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=kr(),a=fo(e),c=Cs(i,a);c.payload=t,n!=null&&(c.callback=n),t=uo(e,c,a),t!==null&&(zi(t,e,a,i),Ku(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=kr(),a=fo(e),c=Cs(i,a);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=uo(e,c,a),t!==null&&(zi(t,e,a,i),Ku(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=kr(),i=fo(e),a=Cs(n,i);a.tag=2,t!=null&&(a.callback=t),t=uo(e,a,i),t!==null&&(zi(t,e,i,n),Ku(t,e,i))}};function vg(e,t,n,i,a,c,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,c,f):t.prototype&&t.prototype.isPureReactComponent?!Ac(n,i)||!Ac(a,c):!0}function Pw(e,t,n){var i=!1,a=_o,c=t.contextType;return typeof c=="object"&&c!==null?c=Ci(c):(a=Fr(t)?ca:yr.current,i=t.contextTypes,c=(i=i!=null)?sl(e,a):_o),t=new t(n,c),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ch,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=c),t}function _g(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ch.enqueueReplaceState(t,t.state,null)}function N0(e,t,n,i){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},qp(e);var c=t.contextType;typeof c=="object"&&c!==null?a.context=Ci(c):(c=Fr(t)?ca:yr.current,a.context=sl(e,c)),a.state=e.memoizedState,c=t.getDerivedStateFromProps,typeof c=="function"&&(E0(e,t,c,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&ch.enqueueReplaceState(a,a.state,null),Ed(e,n,a,i),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function cl(e,t){try{var n="",i=t;do n+=_S(i),i=i.return;while(i);var a=n}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:t,stack:a,digest:null}}function vf(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function T0(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var X3=typeof WeakMap=="function"?WeakMap:Map;function Dw(e,t,n){n=Cs(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Md||(Md=!0,B0=i),T0(e,t)},n}function jw(e,t,n){n=Cs(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var a=t.value;n.payload=function(){return i(a)},n.callback=function(){T0(e,t)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(n.callback=function(){T0(e,t),typeof i!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),n}function bg(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new X3;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(n)||(a.add(n),e=lA.bind(null,e,t,n),t.then(e,e))}function Cg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Sg(e,t,n,i,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Cs(-1,1),t.tag=2,uo(n,t,1))),n.lanes|=1),e)}var q3=Ps.ReactCurrentOwner,jr=!1;function Tr(e,t,n,i){t.child=e===null?hw(t,null,n,i):al(t,e.child,n,i)}function Ag(e,t,n,i,a){n=n.render;var c=t.ref;return nl(t,a),i=e1(e,t,n,i,c,a),n=t1(),e!==null&&!jr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Is(e,t,a)):(xn&&n&&Vp(t),t.flags|=1,Tr(e,t,i,a),t.child)}function Eg(e,t,n,i,a){if(e===null){var c=n.type;return typeof c=="function"&&!d1(c)&&c.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=c,Bw(e,t,c,i,a)):(e=nd(n.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!(e.lanes&a)){var f=c.memoizedProps;if(n=n.compare,n=n!==null?n:Ac,n(f,i)&&e.ref===t.ref)return Is(e,t,a)}return t.flags|=1,e=po(c,i),e.ref=t.ref,e.return=t,t.child=e}function Bw(e,t,n,i,a){if(e!==null){var c=e.memoizedProps;if(Ac(c,i)&&e.ref===t.ref)if(jr=!1,t.pendingProps=i=c,(e.lanes&a)!==0)e.flags&131072&&(jr=!0);else return t.lanes=e.lanes,Is(e,t,a)}return I0(e,t,n,i,a)}function Fw(e,t,n){var i=t.pendingProps,a=i.children,c=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ln(Wa,Kr),Kr|=n;else{if(!(n&1073741824))return e=c!==null?c.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ln(Wa,Kr),Kr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=c!==null?c.baseLanes:n,ln(Wa,Kr),Kr|=i}else c!==null?(i=c.baseLanes|n,t.memoizedState=null):i=n,ln(Wa,Kr),Kr|=i;return Tr(e,t,a,n),t.child}function zw(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function I0(e,t,n,i,a){var c=Fr(n)?ca:yr.current;return c=sl(t,c),nl(t,a),n=e1(e,t,n,i,c,a),i=t1(),e!==null&&!jr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Is(e,t,a)):(xn&&i&&Vp(t),t.flags|=1,Tr(e,t,n,a),t.child)}function Ng(e,t,n,i,a){if(Fr(n)){var c=!0;_d(t)}else c=!1;if(nl(t,a),t.stateNode===null)Ju(e,t),Pw(t,n,i),N0(t,n,i,a),i=!0;else if(e===null){var f=t.stateNode,g=t.memoizedProps;f.props=g;var v=f.context,y=n.contextType;typeof y=="object"&&y!==null?y=Ci(y):(y=Fr(n)?ca:yr.current,y=sl(t,y));var C=n.getDerivedStateFromProps,b=typeof C=="function"||typeof f.getSnapshotBeforeUpdate=="function";b||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==i||v!==y)&&_g(t,f,i,y),Qs=!1;var T=t.memoizedState;f.state=T,Ed(t,i,f,a),v=t.memoizedState,g!==i||T!==v||Br.current||Qs?(typeof C=="function"&&(E0(t,n,C,i),v=t.memoizedState),(g=Qs||vg(t,n,g,i,T,v,y))?(b||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=v),f.props=i,f.state=v,f.context=y,i=g):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{f=t.stateNode,pw(e,t),g=t.memoizedProps,y=t.type===t.elementType?g:Oi(t.type,g),f.props=y,b=t.pendingProps,T=f.context,v=n.contextType,typeof v=="object"&&v!==null?v=Ci(v):(v=Fr(n)?ca:yr.current,v=sl(t,v));var I=n.getDerivedStateFromProps;(C=typeof I=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==b||T!==v)&&_g(t,f,i,v),Qs=!1,T=t.memoizedState,f.state=T,Ed(t,i,f,a);var z=t.memoizedState;g!==b||T!==z||Br.current||Qs?(typeof I=="function"&&(E0(t,n,I,i),z=t.memoizedState),(y=Qs||vg(t,n,y,i,T,z,v)||!1)?(C||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,z,v),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,z,v)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=z),f.props=i,f.state=z,f.context=v,i=y):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),i=!1)}return k0(e,t,n,i,c,a)}function k0(e,t,n,i,a,c){zw(e,t);var f=(t.flags&128)!==0;if(!i&&!f)return a&&hg(t,n,!1),Is(e,t,c);i=t.stateNode,q3.current=t;var g=f&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&f?(t.child=al(t,e.child,null,c),t.child=al(t,null,g,c)):Tr(e,t,g,c),t.memoizedState=i.state,a&&hg(t,n,!0),t.child}function Uw(e){var t=e.stateNode;t.pendingContext?dg(e,t.pendingContext,t.pendingContext!==t.context):t.context&&dg(e,t.context,!1),Kp(e,t.containerInfo)}function Tg(e,t,n,i,a){return ol(),Wp(a),t.flags|=256,Tr(e,t,n,i),t.child}var M0={dehydrated:null,treeContext:null,retryLane:0};function R0(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vw(e,t,n){var i=t.pendingProps,a=vn.current,c=!1,f=(t.flags&128)!==0,g;if((g=f)||(g=e!==null&&e.memoizedState===null?!1:(a&2)!==0),g?(c=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ln(vn,a&1),e===null)return S0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=i.children,e=i.fallback,c?(i=t.mode,c=t.child,f={mode:"hidden",children:f},!(i&1)&&c!==null?(c.childLanes=0,c.pendingProps=f):c=hh(f,i,0,null),e=ra(e,i,n,null),c.return=t,e.return=t,c.sibling=e,t.child=c,t.child.memoizedState=R0(n),t.memoizedState=M0,e):i1(t,f));if(a=e.memoizedState,a!==null&&(g=a.dehydrated,g!==null))return K3(e,t,f,i,g,a,n);if(c){c=i.fallback,f=t.mode,a=e.child,g=a.sibling;var v={mode:"hidden",children:i.children};return!(f&1)&&t.child!==a?(i=t.child,i.childLanes=0,i.pendingProps=v,t.deletions=null):(i=po(a,v),i.subtreeFlags=a.subtreeFlags&14680064),g!==null?c=po(g,c):(c=ra(c,f,n,null),c.flags|=2),c.return=t,i.return=t,i.sibling=c,t.child=i,i=c,c=t.child,f=e.child.memoizedState,f=f===null?R0(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},c.memoizedState=f,c.childLanes=e.childLanes&~n,t.memoizedState=M0,i}return c=e.child,e=c.sibling,i=po(c,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function i1(e,t){return t=hh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Mu(e,t,n,i){return i!==null&&Wp(i),al(t,e.child,null,n),e=i1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function K3(e,t,n,i,a,c,f){if(n)return t.flags&256?(t.flags&=-257,i=vf(Error(Re(422))),Mu(e,t,f,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(c=i.fallback,a=t.mode,i=hh({mode:"visible",children:i.children},a,0,null),c=ra(c,a,f,null),c.flags|=2,i.return=t,c.return=t,i.sibling=c,t.child=i,t.mode&1&&al(t,e.child,null,f),t.child.memoizedState=R0(f),t.memoizedState=M0,c);if(!(t.mode&1))return Mu(e,t,f,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var g=i.dgst;return i=g,c=Error(Re(419)),i=vf(c,i,void 0),Mu(e,t,f,i)}if(g=(f&e.childLanes)!==0,jr||g){if(i=ir,i!==null){switch(f&-f){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|f)?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,Ts(e,a),zi(i,e,a,-1))}return u1(),i=vf(Error(Re(421))),Mu(e,t,f,i)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=cA.bind(null,e),a._reactRetry=t,null):(e=c.treeContext,Jr=co(a.nextSibling),ei=t,xn=!0,Bi=null,e!==null&&(wi[vi++]=ys,wi[vi++]=ws,wi[vi++]=ua,ys=e.id,ws=e.overflow,ua=t),t=i1(t,i.children),t.flags|=4096,t)}function Ig(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),A0(e.return,t,n)}function _f(e,t,n,i,a){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=i,c.tail=n,c.tailMode=a)}function Hw(e,t,n){var i=t.pendingProps,a=i.revealOrder,c=i.tail;if(Tr(e,t,i.children,n),i=vn.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ig(e,n,t);else if(e.tag===19)Ig(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(ln(vn,i),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Nd(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),_f(t,!1,a,n,c);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Nd(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}_f(t,!0,n,null,c);break;case"together":_f(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ju(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Is(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ha|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Re(153));if(t.child!==null){for(e=t.child,n=po(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=po(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Q3(e,t,n){switch(t.tag){case 3:Uw(t),ol();break;case 5:mw(t);break;case 1:Fr(t.type)&&_d(t);break;case 4:Kp(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,a=t.memoizedProps.value;ln(Sd,i._currentValue),i._currentValue=a;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(ln(vn,vn.current&1),t.flags|=128,null):n&t.child.childLanes?Vw(e,t,n):(ln(vn,vn.current&1),e=Is(e,t,n),e!==null?e.sibling:null);ln(vn,vn.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return Hw(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ln(vn,vn.current),i)break;return null;case 22:case 23:return t.lanes=0,Fw(e,t,n)}return Is(e,t,n)}var Ww,O0,Zw,Gw;Ww=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};O0=function(){};Zw=function(e,t,n,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,Jo(ts.current);var c=null;switch(n){case"input":a=t0(e,a),i=t0(e,i),c=[];break;case"select":a=Cn({},a,{value:void 0}),i=Cn({},i,{value:void 0}),c=[];break;case"textarea":a=i0(e,a),i=i0(e,i),c=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=wd)}o0(n,i);var f;n=null;for(y in a)if(!i.hasOwnProperty(y)&&a.hasOwnProperty(y)&&a[y]!=null)if(y==="style"){var g=a[y];for(f in g)g.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(yc.hasOwnProperty(y)?c||(c=[]):(c=c||[]).push(y,null));for(y in i){var v=i[y];if(g=a!=null?a[y]:void 0,i.hasOwnProperty(y)&&v!==g&&(v!=null||g!=null))if(y==="style")if(g){for(f in g)!g.hasOwnProperty(f)||v&&v.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in v)v.hasOwnProperty(f)&&g[f]!==v[f]&&(n||(n={}),n[f]=v[f])}else n||(c||(c=[]),c.push(y,n)),n=v;else y==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,g=g?g.__html:void 0,v!=null&&g!==v&&(c=c||[]).push(y,v)):y==="children"?typeof v!="string"&&typeof v!="number"||(c=c||[]).push(y,""+v):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(yc.hasOwnProperty(y)?(v!=null&&y==="onScroll"&&hn("scroll",e),c||g===v||(c=[])):(c=c||[]).push(y,v))}n&&(c=c||[]).push("style",n);var y=c;(t.updateQueue=y)&&(t.flags|=4)}};Gw=function(e,t,n,i){n!==i&&(t.flags|=4)};function Hl(e,t){if(!xn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function pr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function $3(e,t,n){var i=t.pendingProps;switch(Hp(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pr(t),null;case 1:return Fr(t.type)&&vd(),pr(t),null;case 3:return i=t.stateNode,ll(),fn(Br),fn(yr),$p(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Iu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bi!==null&&(U0(Bi),Bi=null))),O0(e,t),pr(t),null;case 5:Qp(t);var a=Jo(kc.current);if(n=t.type,e!==null&&t.stateNode!=null)Zw(e,t,n,i,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Re(166));return pr(t),null}if(e=Jo(ts.current),Iu(t)){i=t.stateNode,n=t.type;var c=t.memoizedProps;switch(i[Ji]=t,i[Tc]=c,e=(t.mode&1)!==0,n){case"dialog":hn("cancel",i),hn("close",i);break;case"iframe":case"object":case"embed":hn("load",i);break;case"video":case"audio":for(a=0;a<Jl.length;a++)hn(Jl[a],i);break;case"source":hn("error",i);break;case"img":case"image":case"link":hn("error",i),hn("load",i);break;case"details":hn("toggle",i);break;case"input":Bm(i,c),hn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!c.multiple},hn("invalid",i);break;case"textarea":zm(i,c),hn("invalid",i)}o0(n,c),a=null;for(var f in c)if(c.hasOwnProperty(f)){var g=c[f];f==="children"?typeof g=="string"?i.textContent!==g&&(c.suppressHydrationWarning!==!0&&Tu(i.textContent,g,e),a=["children",g]):typeof g=="number"&&i.textContent!==""+g&&(c.suppressHydrationWarning!==!0&&Tu(i.textContent,g,e),a=["children",""+g]):yc.hasOwnProperty(f)&&g!=null&&f==="onScroll"&&hn("scroll",i)}switch(n){case"input":vu(i),Fm(i,c,!0);break;case"textarea":vu(i),Um(i);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(i.onclick=wd)}i=a,t.updateQueue=i,i!==null&&(t.flags|=4)}else{f=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=v2(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=f.createElement(n,{is:i.is}):(e=f.createElement(n),n==="select"&&(f=e,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):e=f.createElementNS(e,n),e[Ji]=t,e[Tc]=i,Ww(e,t,!1,!1),t.stateNode=e;e:{switch(f=a0(n,i),n){case"dialog":hn("cancel",e),hn("close",e),a=i;break;case"iframe":case"object":case"embed":hn("load",e),a=i;break;case"video":case"audio":for(a=0;a<Jl.length;a++)hn(Jl[a],e);a=i;break;case"source":hn("error",e),a=i;break;case"img":case"image":case"link":hn("error",e),hn("load",e),a=i;break;case"details":hn("toggle",e),a=i;break;case"input":Bm(e,i),a=t0(e,i),hn("invalid",e);break;case"option":a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=Cn({},i,{value:void 0}),hn("invalid",e);break;case"textarea":zm(e,i),a=i0(e,i),hn("invalid",e);break;default:a=i}o0(n,a),g=a;for(c in g)if(g.hasOwnProperty(c)){var v=g[c];c==="style"?C2(e,v):c==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,v!=null&&_2(e,v)):c==="children"?typeof v=="string"?(n!=="textarea"||v!=="")&&wc(e,v):typeof v=="number"&&wc(e,""+v):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(yc.hasOwnProperty(c)?v!=null&&c==="onScroll"&&hn("scroll",e):v!=null&&Tp(e,c,v,f))}switch(n){case"input":vu(e),Fm(e,i,!1);break;case"textarea":vu(e),Um(e);break;case"option":i.value!=null&&e.setAttribute("value",""+vo(i.value));break;case"select":e.multiple=!!i.multiple,c=i.value,c!=null?$a(e,!!i.multiple,c,!1):i.defaultValue!=null&&$a(e,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=wd)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pr(t),null;case 6:if(e&&t.stateNode!=null)Gw(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Re(166));if(n=Jo(kc.current),Jo(ts.current),Iu(t)){if(i=t.stateNode,n=t.memoizedProps,i[Ji]=t,(c=i.nodeValue!==n)&&(e=ei,e!==null))switch(e.tag){case 3:Tu(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Tu(i.nodeValue,n,(e.mode&1)!==0)}c&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ji]=t,t.stateNode=i}return pr(t),null;case 13:if(fn(vn),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xn&&Jr!==null&&t.mode&1&&!(t.flags&128))uw(),ol(),t.flags|=98560,c=!1;else if(c=Iu(t),i!==null&&i.dehydrated!==null){if(e===null){if(!c)throw Error(Re(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(Re(317));c[Ji]=t}else ol(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pr(t),c=!1}else Bi!==null&&(U0(Bi),Bi=null),c=!0;if(!c)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||vn.current&1?Kn===0&&(Kn=3):u1())),t.updateQueue!==null&&(t.flags|=4),pr(t),null);case 4:return ll(),O0(e,t),e===null&&Ec(t.stateNode.containerInfo),pr(t),null;case 10:return Yp(t.type._context),pr(t),null;case 17:return Fr(t.type)&&vd(),pr(t),null;case 19:if(fn(vn),c=t.memoizedState,c===null)return pr(t),null;if(i=(t.flags&128)!==0,f=c.rendering,f===null)if(i)Hl(c,!1);else{if(Kn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=Nd(e),f!==null){for(t.flags|=128,Hl(c,!1),i=f.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)c=n,e=i,c.flags&=14680066,f=c.alternate,f===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=f.childLanes,c.lanes=f.lanes,c.child=f.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=f.memoizedProps,c.memoizedState=f.memoizedState,c.updateQueue=f.updateQueue,c.type=f.type,e=f.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ln(vn,vn.current&1|2),t.child}e=e.sibling}c.tail!==null&&Rn()>ul&&(t.flags|=128,i=!0,Hl(c,!1),t.lanes=4194304)}else{if(!i)if(e=Nd(f),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Hl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!xn)return pr(t),null}else 2*Rn()-c.renderingStartTime>ul&&n!==1073741824&&(t.flags|=128,i=!0,Hl(c,!1),t.lanes=4194304);c.isBackwards?(f.sibling=t.child,t.child=f):(n=c.last,n!==null?n.sibling=f:t.child=f,c.last=f)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Rn(),t.sibling=null,n=vn.current,ln(vn,i?n&1|2:n&1),t):(pr(t),null);case 22:case 23:return c1(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Kr&1073741824&&(pr(t),t.subtreeFlags&6&&(t.flags|=8192)):pr(t),null;case 24:return null;case 25:return null}throw Error(Re(156,t.tag))}function J3(e,t){switch(Hp(t),t.tag){case 1:return Fr(t.type)&&vd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ll(),fn(Br),fn(yr),$p(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Qp(t),null;case 13:if(fn(vn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Re(340));ol()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fn(vn),null;case 4:return ll(),null;case 10:return Yp(t.type._context),null;case 22:case 23:return c1(),null;case 24:return null;default:return null}}var Ru=!1,gr=!1,eA=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function Ha(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Nn(e,t,i)}else n.current=null}function L0(e,t,n){try{n()}catch(i){Nn(e,t,i)}}var kg=!1;function tA(e,t){if(x0=gd,e=Q2(),Up(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var a=i.anchorOffset,c=i.focusNode;i=i.focusOffset;try{n.nodeType,c.nodeType}catch{n=null;break e}var f=0,g=-1,v=-1,y=0,C=0,b=e,T=null;t:for(;;){for(var I;b!==n||a!==0&&b.nodeType!==3||(g=f+a),b!==c||i!==0&&b.nodeType!==3||(v=f+i),b.nodeType===3&&(f+=b.nodeValue.length),(I=b.firstChild)!==null;)T=b,b=I;for(;;){if(b===e)break t;if(T===n&&++y===a&&(g=f),T===c&&++C===i&&(v=f),(I=b.nextSibling)!==null)break;b=T,T=b.parentNode}b=I}n=g===-1||v===-1?null:{start:g,end:v}}else n=null}n=n||{start:0,end:0}}else n=null;for(y0={focusedElem:e,selectionRange:n},gd=!1,Ke=t;Ke!==null;)if(t=Ke,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ke=e;else for(;Ke!==null;){t=Ke;try{var z=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(z!==null){var R=z.memoizedProps,j=z.memoizedState,F=t.stateNode,O=F.getSnapshotBeforeUpdate(t.elementType===t.type?R:Oi(t.type,R),j);F.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var k=t.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(W){Nn(t,t.return,W)}if(e=t.sibling,e!==null){e.return=t.return,Ke=e;break}Ke=t.return}return z=kg,kg=!1,z}function lc(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var c=a.destroy;a.destroy=void 0,c!==void 0&&L0(t,n,c)}a=a.next}while(a!==i)}}function uh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function P0(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Yw(e){var t=e.alternate;t!==null&&(e.alternate=null,Yw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ji],delete t[Tc],delete t[_0],delete t[j3],delete t[B3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Xw(e){return e.tag===5||e.tag===3||e.tag===4}function Mg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Xw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function D0(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=wd));else if(i!==4&&(e=e.child,e!==null))for(D0(e,t,n),e=e.sibling;e!==null;)D0(e,t,n),e=e.sibling}function j0(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(j0(e,t,n),e=e.sibling;e!==null;)j0(e,t,n),e=e.sibling}var or=null,Pi=!1;function Zs(e,t,n){for(n=n.child;n!==null;)qw(e,t,n),n=n.sibling}function qw(e,t,n){if(es&&typeof es.onCommitFiberUnmount=="function")try{es.onCommitFiberUnmount(nh,n)}catch{}switch(n.tag){case 5:gr||Ha(n,t);case 6:var i=or,a=Pi;or=null,Zs(e,t,n),or=i,Pi=a,or!==null&&(Pi?(e=or,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):or.removeChild(n.stateNode));break;case 18:or!==null&&(Pi?(e=or,n=n.stateNode,e.nodeType===8?pf(e.parentNode,n):e.nodeType===1&&pf(e,n),Cc(e)):pf(or,n.stateNode));break;case 4:i=or,a=Pi,or=n.stateNode.containerInfo,Pi=!0,Zs(e,t,n),or=i,Pi=a;break;case 0:case 11:case 14:case 15:if(!gr&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var c=a,f=c.destroy;c=c.tag,f!==void 0&&(c&2||c&4)&&L0(n,t,f),a=a.next}while(a!==i)}Zs(e,t,n);break;case 1:if(!gr&&(Ha(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(g){Nn(n,t,g)}Zs(e,t,n);break;case 21:Zs(e,t,n);break;case 22:n.mode&1?(gr=(i=gr)||n.memoizedState!==null,Zs(e,t,n),gr=i):Zs(e,t,n);break;default:Zs(e,t,n)}}function Rg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new eA),t.forEach(function(i){var a=uA.bind(null,e,i);n.has(i)||(n.add(i),i.then(a,a))})}}function Ri(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];try{var c=e,f=t,g=f;e:for(;g!==null;){switch(g.tag){case 5:or=g.stateNode,Pi=!1;break e;case 3:or=g.stateNode.containerInfo,Pi=!0;break e;case 4:or=g.stateNode.containerInfo,Pi=!0;break e}g=g.return}if(or===null)throw Error(Re(160));qw(c,f,a),or=null,Pi=!1;var v=a.alternate;v!==null&&(v.return=null),a.return=null}catch(y){Nn(a,t,y)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Kw(t,e),t=t.sibling}function Kw(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ri(t,e),qi(e),i&4){try{lc(3,e,e.return),uh(3,e)}catch(R){Nn(e,e.return,R)}try{lc(5,e,e.return)}catch(R){Nn(e,e.return,R)}}break;case 1:Ri(t,e),qi(e),i&512&&n!==null&&Ha(n,n.return);break;case 5:if(Ri(t,e),qi(e),i&512&&n!==null&&Ha(n,n.return),e.flags&32){var a=e.stateNode;try{wc(a,"")}catch(R){Nn(e,e.return,R)}}if(i&4&&(a=e.stateNode,a!=null)){var c=e.memoizedProps,f=n!==null?n.memoizedProps:c,g=e.type,v=e.updateQueue;if(e.updateQueue=null,v!==null)try{g==="input"&&c.type==="radio"&&c.name!=null&&y2(a,c),a0(g,f);var y=a0(g,c);for(f=0;f<v.length;f+=2){var C=v[f],b=v[f+1];C==="style"?C2(a,b):C==="dangerouslySetInnerHTML"?_2(a,b):C==="children"?wc(a,b):Tp(a,C,b,y)}switch(g){case"input":n0(a,c);break;case"textarea":w2(a,c);break;case"select":var T=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var I=c.value;I!=null?$a(a,!!c.multiple,I,!1):T!==!!c.multiple&&(c.defaultValue!=null?$a(a,!!c.multiple,c.defaultValue,!0):$a(a,!!c.multiple,c.multiple?[]:"",!1))}a[Tc]=c}catch(R){Nn(e,e.return,R)}}break;case 6:if(Ri(t,e),qi(e),i&4){if(e.stateNode===null)throw Error(Re(162));a=e.stateNode,c=e.memoizedProps;try{a.nodeValue=c}catch(R){Nn(e,e.return,R)}}break;case 3:if(Ri(t,e),qi(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Cc(t.containerInfo)}catch(R){Nn(e,e.return,R)}break;case 4:Ri(t,e),qi(e);break;case 13:Ri(t,e),qi(e),a=e.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(a1=Rn())),i&4&&Rg(e);break;case 22:if(C=n!==null&&n.memoizedState!==null,e.mode&1?(gr=(y=gr)||C,Ri(t,e),gr=y):Ri(t,e),qi(e),i&8192){if(y=e.memoizedState!==null,(e.stateNode.isHidden=y)&&!C&&e.mode&1)for(Ke=e,C=e.child;C!==null;){for(b=Ke=C;Ke!==null;){switch(T=Ke,I=T.child,T.tag){case 0:case 11:case 14:case 15:lc(4,T,T.return);break;case 1:Ha(T,T.return);var z=T.stateNode;if(typeof z.componentWillUnmount=="function"){i=T,n=T.return;try{t=i,z.props=t.memoizedProps,z.state=t.memoizedState,z.componentWillUnmount()}catch(R){Nn(i,n,R)}}break;case 5:Ha(T,T.return);break;case 22:if(T.memoizedState!==null){Lg(b);continue}}I!==null?(I.return=T,Ke=I):Lg(b)}C=C.sibling}e:for(C=null,b=e;;){if(b.tag===5){if(C===null){C=b;try{a=b.stateNode,y?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(g=b.stateNode,v=b.memoizedProps.style,f=v!=null&&v.hasOwnProperty("display")?v.display:null,g.style.display=b2("display",f))}catch(R){Nn(e,e.return,R)}}}else if(b.tag===6){if(C===null)try{b.stateNode.nodeValue=y?"":b.memoizedProps}catch(R){Nn(e,e.return,R)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;C===b&&(C=null),b=b.return}C===b&&(C=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:Ri(t,e),qi(e),i&4&&Rg(e);break;case 21:break;default:Ri(t,e),qi(e)}}function qi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Xw(n)){var i=n;break e}n=n.return}throw Error(Re(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(wc(a,""),i.flags&=-33);var c=Mg(e);j0(e,c,a);break;case 3:case 4:var f=i.stateNode.containerInfo,g=Mg(e);D0(e,g,f);break;default:throw Error(Re(161))}}catch(v){Nn(e,e.return,v)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function nA(e,t,n){Ke=e,Qw(e)}function Qw(e,t,n){for(var i=(e.mode&1)!==0;Ke!==null;){var a=Ke,c=a.child;if(a.tag===22&&i){var f=a.memoizedState!==null||Ru;if(!f){var g=a.alternate,v=g!==null&&g.memoizedState!==null||gr;g=Ru;var y=gr;if(Ru=f,(gr=v)&&!y)for(Ke=a;Ke!==null;)f=Ke,v=f.child,f.tag===22&&f.memoizedState!==null?Pg(a):v!==null?(v.return=f,Ke=v):Pg(a);for(;c!==null;)Ke=c,Qw(c),c=c.sibling;Ke=a,Ru=g,gr=y}Og(e)}else a.subtreeFlags&8772&&c!==null?(c.return=a,Ke=c):Og(e)}}function Og(e){for(;Ke!==null;){var t=Ke;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:gr||uh(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!gr)if(n===null)i.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Oi(t.type,n.memoizedProps);i.componentDidUpdate(a,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var c=t.updateQueue;c!==null&&xg(t,c,i);break;case 3:var f=t.updateQueue;if(f!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}xg(t,f,n)}break;case 5:var g=t.stateNode;if(n===null&&t.flags&4){n=g;var v=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":v.autoFocus&&n.focus();break;case"img":v.src&&(n.src=v.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var y=t.alternate;if(y!==null){var C=y.memoizedState;if(C!==null){var b=C.dehydrated;b!==null&&Cc(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}gr||t.flags&512&&P0(t)}catch(T){Nn(t,t.return,T)}}if(t===e){Ke=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ke=n;break}Ke=t.return}}function Lg(e){for(;Ke!==null;){var t=Ke;if(t===e){Ke=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ke=n;break}Ke=t.return}}function Pg(e){for(;Ke!==null;){var t=Ke;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{uh(4,t)}catch(v){Nn(t,n,v)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var a=t.return;try{i.componentDidMount()}catch(v){Nn(t,a,v)}}var c=t.return;try{P0(t)}catch(v){Nn(t,c,v)}break;case 5:var f=t.return;try{P0(t)}catch(v){Nn(t,f,v)}}}catch(v){Nn(t,t.return,v)}if(t===e){Ke=null;break}var g=t.sibling;if(g!==null){g.return=t.return,Ke=g;break}Ke=t.return}}var rA=Math.ceil,kd=Ps.ReactCurrentDispatcher,s1=Ps.ReactCurrentOwner,bi=Ps.ReactCurrentBatchConfig,zt=0,ir=null,Un=null,ar=0,Kr=0,Wa=Eo(0),Kn=0,Lc=null,ha=0,dh=0,o1=0,cc=null,Dr=null,a1=0,ul=1/0,gs=null,Md=!1,B0=null,ho=null,Ou=!1,io=null,Rd=0,uc=0,F0=null,ed=-1,td=0;function kr(){return zt&6?Rn():ed!==-1?ed:ed=Rn()}function fo(e){return e.mode&1?zt&2&&ar!==0?ar&-ar:z3.transition!==null?(td===0&&(td=P2()),td):(e=Jt,e!==0||(e=window.event,e=e===void 0?16:V2(e.type)),e):1}function zi(e,t,n,i){if(50<uc)throw uc=0,F0=null,Error(Re(185));Yc(e,n,i),(!(zt&2)||e!==ir)&&(e===ir&&(!(zt&2)&&(dh|=n),Kn===4&&to(e,ar)),zr(e,i),n===1&&zt===0&&!(t.mode&1)&&(ul=Rn()+500,ah&&No()))}function zr(e,t){var n=e.callbackNode;zS(e,t);var i=md(e,e===ir?ar:0);if(i===0)n!==null&&Wm(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&Wm(n),t===1)e.tag===0?F3(Dg.bind(null,e)):aw(Dg.bind(null,e)),P3(function(){!(zt&6)&&No()}),n=null;else{switch(D2(i)){case 1:n=Op;break;case 4:n=O2;break;case 16:n=pd;break;case 536870912:n=L2;break;default:n=pd}n=sv(n,$w.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function $w(e,t){if(ed=-1,td=0,zt&6)throw Error(Re(327));var n=e.callbackNode;if(rl()&&e.callbackNode!==n)return null;var i=md(e,e===ir?ar:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Od(e,i);else{t=i;var a=zt;zt|=2;var c=ev();(ir!==e||ar!==t)&&(gs=null,ul=Rn()+500,na(e,t));do try{oA();break}catch(g){Jw(e,g)}while(!0);Gp(),kd.current=c,zt=a,Un!==null?t=0:(ir=null,ar=0,t=Kn)}if(t!==0){if(t===2&&(a=h0(e),a!==0&&(i=a,t=z0(e,a))),t===1)throw n=Lc,na(e,0),to(e,i),zr(e,Rn()),n;if(t===6)to(e,i);else{if(a=e.current.alternate,!(i&30)&&!iA(a)&&(t=Od(e,i),t===2&&(c=h0(e),c!==0&&(i=c,t=z0(e,c))),t===1))throw n=Lc,na(e,0),to(e,i),zr(e,Rn()),n;switch(e.finishedWork=a,e.finishedLanes=i,t){case 0:case 1:throw Error(Re(345));case 2:Go(e,Dr,gs);break;case 3:if(to(e,i),(i&130023424)===i&&(t=a1+500-Rn(),10<t)){if(md(e,0)!==0)break;if(a=e.suspendedLanes,(a&i)!==i){kr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=v0(Go.bind(null,e,Dr,gs),t);break}Go(e,Dr,gs);break;case 4:if(to(e,i),(i&4194240)===i)break;for(t=e.eventTimes,a=-1;0<i;){var f=31-Fi(i);c=1<<f,f=t[f],f>a&&(a=f),i&=~c}if(i=a,i=Rn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*rA(i/1960))-i,10<i){e.timeoutHandle=v0(Go.bind(null,e,Dr,gs),i);break}Go(e,Dr,gs);break;case 5:Go(e,Dr,gs);break;default:throw Error(Re(329))}}}return zr(e,Rn()),e.callbackNode===n?$w.bind(null,e):null}function z0(e,t){var n=cc;return e.current.memoizedState.isDehydrated&&(na(e,t).flags|=256),e=Od(e,t),e!==2&&(t=Dr,Dr=n,t!==null&&U0(t)),e}function U0(e){Dr===null?Dr=e:Dr.push.apply(Dr,e)}function iA(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var a=n[i],c=a.getSnapshot;a=a.value;try{if(!Ui(c(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function to(e,t){for(t&=~o1,t&=~dh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Fi(t),i=1<<n;e[n]=-1,t&=~i}}function Dg(e){if(zt&6)throw Error(Re(327));rl();var t=md(e,0);if(!(t&1))return zr(e,Rn()),null;var n=Od(e,t);if(e.tag!==0&&n===2){var i=h0(e);i!==0&&(t=i,n=z0(e,i))}if(n===1)throw n=Lc,na(e,0),to(e,t),zr(e,Rn()),n;if(n===6)throw Error(Re(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Go(e,Dr,gs),zr(e,Rn()),null}function l1(e,t){var n=zt;zt|=1;try{return e(t)}finally{zt=n,zt===0&&(ul=Rn()+500,ah&&No())}}function fa(e){io!==null&&io.tag===0&&!(zt&6)&&rl();var t=zt;zt|=1;var n=bi.transition,i=Jt;try{if(bi.transition=null,Jt=1,e)return e()}finally{Jt=i,bi.transition=n,zt=t,!(zt&6)&&No()}}function c1(){Kr=Wa.current,fn(Wa)}function na(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,L3(n)),Un!==null)for(n=Un.return;n!==null;){var i=n;switch(Hp(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&vd();break;case 3:ll(),fn(Br),fn(yr),$p();break;case 5:Qp(i);break;case 4:ll();break;case 13:fn(vn);break;case 19:fn(vn);break;case 10:Yp(i.type._context);break;case 22:case 23:c1()}n=n.return}if(ir=e,Un=e=po(e.current,null),ar=Kr=t,Kn=0,Lc=null,o1=dh=ha=0,Dr=cc=null,$o!==null){for(t=0;t<$o.length;t++)if(n=$o[t],i=n.interleaved,i!==null){n.interleaved=null;var a=i.next,c=n.pending;if(c!==null){var f=c.next;c.next=a,i.next=f}n.pending=i}$o=null}return e}function Jw(e,t){do{var n=Un;try{if(Gp(),Qu.current=Id,Td){for(var i=bn.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Td=!1}if(da=0,rr=qn=bn=null,ac=!1,Mc=0,s1.current=null,n===null||n.return===null){Kn=1,Lc=t,Un=null;break}e:{var c=e,f=n.return,g=n,v=t;if(t=ar,g.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){var y=v,C=g,b=C.tag;if(!(C.mode&1)&&(b===0||b===11||b===15)){var T=C.alternate;T?(C.updateQueue=T.updateQueue,C.memoizedState=T.memoizedState,C.lanes=T.lanes):(C.updateQueue=null,C.memoizedState=null)}var I=Cg(f);if(I!==null){I.flags&=-257,Sg(I,f,g,c,t),I.mode&1&&bg(c,y,t),t=I,v=y;var z=t.updateQueue;if(z===null){var R=new Set;R.add(v),t.updateQueue=R}else z.add(v);break e}else{if(!(t&1)){bg(c,y,t),u1();break e}v=Error(Re(426))}}else if(xn&&g.mode&1){var j=Cg(f);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Sg(j,f,g,c,t),Wp(cl(v,g));break e}}c=v=cl(v,g),Kn!==4&&(Kn=2),cc===null?cc=[c]:cc.push(c),c=f;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t;var F=Dw(c,v,t);gg(c,F);break e;case 1:g=v;var O=c.type,k=c.stateNode;if(!(c.flags&128)&&(typeof O.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(ho===null||!ho.has(k)))){c.flags|=65536,t&=-t,c.lanes|=t;var W=jw(c,g,t);gg(c,W);break e}}c=c.return}while(c!==null)}nv(n)}catch(K){t=K,Un===n&&n!==null&&(Un=n=n.return);continue}break}while(!0)}function ev(){var e=kd.current;return kd.current=Id,e===null?Id:e}function u1(){(Kn===0||Kn===3||Kn===2)&&(Kn=4),ir===null||!(ha&268435455)&&!(dh&268435455)||to(ir,ar)}function Od(e,t){var n=zt;zt|=2;var i=ev();(ir!==e||ar!==t)&&(gs=null,na(e,t));do try{sA();break}catch(a){Jw(e,a)}while(!0);if(Gp(),zt=n,kd.current=i,Un!==null)throw Error(Re(261));return ir=null,ar=0,Kn}function sA(){for(;Un!==null;)tv(Un)}function oA(){for(;Un!==null&&!MS();)tv(Un)}function tv(e){var t=iv(e.alternate,e,Kr);e.memoizedProps=e.pendingProps,t===null?nv(e):Un=t,s1.current=null}function nv(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=J3(n,t),n!==null){n.flags&=32767,Un=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Kn=6,Un=null;return}}else if(n=$3(n,t,Kr),n!==null){Un=n;return}if(t=t.sibling,t!==null){Un=t;return}Un=t=e}while(t!==null);Kn===0&&(Kn=5)}function Go(e,t,n){var i=Jt,a=bi.transition;try{bi.transition=null,Jt=1,aA(e,t,n,i)}finally{bi.transition=a,Jt=i}return null}function aA(e,t,n,i){do rl();while(io!==null);if(zt&6)throw Error(Re(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Re(177));e.callbackNode=null,e.callbackPriority=0;var c=n.lanes|n.childLanes;if(US(e,c),e===ir&&(Un=ir=null,ar=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ou||(Ou=!0,sv(pd,function(){return rl(),null})),c=(n.flags&15990)!==0,n.subtreeFlags&15990||c){c=bi.transition,bi.transition=null;var f=Jt;Jt=1;var g=zt;zt|=4,s1.current=null,tA(e,n),Kw(n,e),N3(y0),gd=!!x0,y0=x0=null,e.current=n,nA(n),RS(),zt=g,Jt=f,bi.transition=c}else e.current=n;if(Ou&&(Ou=!1,io=e,Rd=a),c=e.pendingLanes,c===0&&(ho=null),PS(n.stateNode),zr(e,Rn()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],i(a.value,{componentStack:a.stack,digest:a.digest});if(Md)throw Md=!1,e=B0,B0=null,e;return Rd&1&&e.tag!==0&&rl(),c=e.pendingLanes,c&1?e===F0?uc++:(uc=0,F0=e):uc=0,No(),null}function rl(){if(io!==null){var e=D2(Rd),t=bi.transition,n=Jt;try{if(bi.transition=null,Jt=16>e?16:e,io===null)var i=!1;else{if(e=io,io=null,Rd=0,zt&6)throw Error(Re(331));var a=zt;for(zt|=4,Ke=e.current;Ke!==null;){var c=Ke,f=c.child;if(Ke.flags&16){var g=c.deletions;if(g!==null){for(var v=0;v<g.length;v++){var y=g[v];for(Ke=y;Ke!==null;){var C=Ke;switch(C.tag){case 0:case 11:case 15:lc(8,C,c)}var b=C.child;if(b!==null)b.return=C,Ke=b;else for(;Ke!==null;){C=Ke;var T=C.sibling,I=C.return;if(Yw(C),C===y){Ke=null;break}if(T!==null){T.return=I,Ke=T;break}Ke=I}}}var z=c.alternate;if(z!==null){var R=z.child;if(R!==null){z.child=null;do{var j=R.sibling;R.sibling=null,R=j}while(R!==null)}}Ke=c}}if(c.subtreeFlags&2064&&f!==null)f.return=c,Ke=f;else e:for(;Ke!==null;){if(c=Ke,c.flags&2048)switch(c.tag){case 0:case 11:case 15:lc(9,c,c.return)}var F=c.sibling;if(F!==null){F.return=c.return,Ke=F;break e}Ke=c.return}}var O=e.current;for(Ke=O;Ke!==null;){f=Ke;var k=f.child;if(f.subtreeFlags&2064&&k!==null)k.return=f,Ke=k;else e:for(f=O;Ke!==null;){if(g=Ke,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:uh(9,g)}}catch(K){Nn(g,g.return,K)}if(g===f){Ke=null;break e}var W=g.sibling;if(W!==null){W.return=g.return,Ke=W;break e}Ke=g.return}}if(zt=a,No(),es&&typeof es.onPostCommitFiberRoot=="function")try{es.onPostCommitFiberRoot(nh,e)}catch{}i=!0}return i}finally{Jt=n,bi.transition=t}}return!1}function jg(e,t,n){t=cl(n,t),t=Dw(e,t,1),e=uo(e,t,1),t=kr(),e!==null&&(Yc(e,1,t),zr(e,t))}function Nn(e,t,n){if(e.tag===3)jg(e,e,n);else for(;t!==null;){if(t.tag===3){jg(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ho===null||!ho.has(i))){e=cl(n,e),e=jw(t,e,1),t=uo(t,e,1),e=kr(),t!==null&&(Yc(t,1,e),zr(t,e));break}}t=t.return}}function lA(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=kr(),e.pingedLanes|=e.suspendedLanes&n,ir===e&&(ar&n)===n&&(Kn===4||Kn===3&&(ar&130023424)===ar&&500>Rn()-a1?na(e,0):o1|=n),zr(e,t)}function rv(e,t){t===0&&(e.mode&1?(t=Cu,Cu<<=1,!(Cu&130023424)&&(Cu=4194304)):t=1);var n=kr();e=Ts(e,t),e!==null&&(Yc(e,t,n),zr(e,n))}function cA(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),rv(e,n)}function uA(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Re(314))}i!==null&&i.delete(t),rv(e,n)}var iv;iv=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Br.current)jr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return jr=!1,Q3(e,t,n);jr=!!(e.flags&131072)}else jr=!1,xn&&t.flags&1048576&&lw(t,Cd,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Ju(e,t),e=t.pendingProps;var a=sl(t,yr.current);nl(t,n),a=e1(null,t,i,e,a,n);var c=t1();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fr(i)?(c=!0,_d(t)):c=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,qp(t),a.updater=ch,t.stateNode=a,a._reactInternals=t,N0(t,i,e,n),t=k0(null,t,i,!0,c,n)):(t.tag=0,xn&&c&&Vp(t),Tr(null,t,a,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Ju(e,t),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=hA(i),e=Oi(i,e),a){case 0:t=I0(null,t,i,e,n);break e;case 1:t=Ng(null,t,i,e,n);break e;case 11:t=Ag(null,t,i,e,n);break e;case 14:t=Eg(null,t,i,Oi(i.type,e),n);break e}throw Error(Re(306,i,""))}return t;case 0:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Oi(i,a),I0(e,t,i,a,n);case 1:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Oi(i,a),Ng(e,t,i,a,n);case 3:e:{if(Uw(t),e===null)throw Error(Re(387));i=t.pendingProps,c=t.memoizedState,a=c.element,pw(e,t),Ed(t,i,null,n);var f=t.memoizedState;if(i=f.element,c.isDehydrated)if(c={element:i,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){a=cl(Error(Re(423)),t),t=Tg(e,t,i,n,a);break e}else if(i!==a){a=cl(Error(Re(424)),t),t=Tg(e,t,i,n,a);break e}else for(Jr=co(t.stateNode.containerInfo.firstChild),ei=t,xn=!0,Bi=null,n=hw(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ol(),i===a){t=Is(e,t,n);break e}Tr(e,t,i,n)}t=t.child}return t;case 5:return mw(t),e===null&&S0(t),i=t.type,a=t.pendingProps,c=e!==null?e.memoizedProps:null,f=a.children,w0(i,a)?f=null:c!==null&&w0(i,c)&&(t.flags|=32),zw(e,t),Tr(e,t,f,n),t.child;case 6:return e===null&&S0(t),null;case 13:return Vw(e,t,n);case 4:return Kp(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=al(t,null,i,n):Tr(e,t,i,n),t.child;case 11:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Oi(i,a),Ag(e,t,i,a,n);case 7:return Tr(e,t,t.pendingProps,n),t.child;case 8:return Tr(e,t,t.pendingProps.children,n),t.child;case 12:return Tr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,a=t.pendingProps,c=t.memoizedProps,f=a.value,ln(Sd,i._currentValue),i._currentValue=f,c!==null)if(Ui(c.value,f)){if(c.children===a.children&&!Br.current){t=Is(e,t,n);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var g=c.dependencies;if(g!==null){f=c.child;for(var v=g.firstContext;v!==null;){if(v.context===i){if(c.tag===1){v=Cs(-1,n&-n),v.tag=2;var y=c.updateQueue;if(y!==null){y=y.shared;var C=y.pending;C===null?v.next=v:(v.next=C.next,C.next=v),y.pending=v}}c.lanes|=n,v=c.alternate,v!==null&&(v.lanes|=n),A0(c.return,n,t),g.lanes|=n;break}v=v.next}}else if(c.tag===10)f=c.type===t.type?null:c.child;else if(c.tag===18){if(f=c.return,f===null)throw Error(Re(341));f.lanes|=n,g=f.alternate,g!==null&&(g.lanes|=n),A0(f,n,t),f=c.sibling}else f=c.child;if(f!==null)f.return=c;else for(f=c;f!==null;){if(f===t){f=null;break}if(c=f.sibling,c!==null){c.return=f.return,f=c;break}f=f.return}c=f}Tr(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,i=t.pendingProps.children,nl(t,n),a=Ci(a),i=i(a),t.flags|=1,Tr(e,t,i,n),t.child;case 14:return i=t.type,a=Oi(i,t.pendingProps),a=Oi(i.type,a),Eg(e,t,i,a,n);case 15:return Bw(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Oi(i,a),Ju(e,t),t.tag=1,Fr(i)?(e=!0,_d(t)):e=!1,nl(t,n),Pw(t,i,a),N0(t,i,a,n),k0(null,t,i,!0,e,n);case 19:return Hw(e,t,n);case 22:return Fw(e,t,n)}throw Error(Re(156,t.tag))};function sv(e,t){return R2(e,t)}function dA(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _i(e,t,n,i){return new dA(e,t,n,i)}function d1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hA(e){if(typeof e=="function")return d1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===kp)return 11;if(e===Mp)return 14}return 2}function po(e,t){var n=e.alternate;return n===null?(n=_i(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function nd(e,t,n,i,a,c){var f=2;if(i=e,typeof e=="function")d1(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case La:return ra(n.children,a,c,t);case Ip:f=8,a|=8;break;case Qf:return e=_i(12,n,t,a|2),e.elementType=Qf,e.lanes=c,e;case $f:return e=_i(13,n,t,a),e.elementType=$f,e.lanes=c,e;case Jf:return e=_i(19,n,t,a),e.elementType=Jf,e.lanes=c,e;case m2:return hh(n,a,c,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case f2:f=10;break e;case p2:f=9;break e;case kp:f=11;break e;case Mp:f=14;break e;case Ks:f=16,i=null;break e}throw Error(Re(130,e==null?e:typeof e,""))}return t=_i(f,n,t,a),t.elementType=e,t.type=i,t.lanes=c,t}function ra(e,t,n,i){return e=_i(7,e,i,t),e.lanes=n,e}function hh(e,t,n,i){return e=_i(22,e,i,t),e.elementType=m2,e.lanes=n,e.stateNode={isHidden:!1},e}function bf(e,t,n){return e=_i(6,e,null,t),e.lanes=n,e}function Cf(e,t,n){return t=_i(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function fA(e,t,n,i,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nf(0),this.expirationTimes=nf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nf(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function h1(e,t,n,i,a,c,f,g,v){return e=new fA(e,t,n,g,v),t===1?(t=1,c===!0&&(t|=8)):t=0,c=_i(3,null,null,t),e.current=c,c.stateNode=e,c.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qp(c),e}function pA(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oa,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function ov(e){if(!e)return _o;e=e._reactInternals;e:{if(ga(e)!==e||e.tag!==1)throw Error(Re(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Re(171))}if(e.tag===1){var n=e.type;if(Fr(n))return ow(e,n,t)}return t}function av(e,t,n,i,a,c,f,g,v){return e=h1(n,i,!0,e,a,c,f,g,v),e.context=ov(null),n=e.current,i=kr(),a=fo(n),c=Cs(i,a),c.callback=t??null,uo(n,c,a),e.current.lanes=a,Yc(e,a,i),zr(e,i),e}function fh(e,t,n,i){var a=t.current,c=kr(),f=fo(a);return n=ov(n),t.context===null?t.context=n:t.pendingContext=n,t=Cs(c,f),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=uo(a,t,f),e!==null&&(zi(e,a,f,c),Ku(e,a,f)),f}function Ld(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Bg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function f1(e,t){Bg(e,t),(e=e.alternate)&&Bg(e,t)}function mA(){return null}var lv=typeof reportError=="function"?reportError:function(e){console.error(e)};function p1(e){this._internalRoot=e}ph.prototype.render=p1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Re(409));fh(e,t,null,null)};ph.prototype.unmount=p1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fa(function(){fh(null,e,null,null)}),t[Ns]=null}};function ph(e){this._internalRoot=e}ph.prototype.unstable_scheduleHydration=function(e){if(e){var t=F2();e={blockedOn:null,target:e,priority:t};for(var n=0;n<eo.length&&t!==0&&t<eo[n].priority;n++);eo.splice(n,0,e),n===0&&U2(e)}};function m1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function mh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Fg(){}function gA(e,t,n,i,a){if(a){if(typeof i=="function"){var c=i;i=function(){var y=Ld(f);c.call(y)}}var f=av(t,i,e,0,null,!1,!1,"",Fg);return e._reactRootContainer=f,e[Ns]=f.current,Ec(e.nodeType===8?e.parentNode:e),fa(),f}for(;a=e.lastChild;)e.removeChild(a);if(typeof i=="function"){var g=i;i=function(){var y=Ld(v);g.call(y)}}var v=h1(e,0,!1,null,null,!1,!1,"",Fg);return e._reactRootContainer=v,e[Ns]=v.current,Ec(e.nodeType===8?e.parentNode:e),fa(function(){fh(t,v,n,i)}),v}function gh(e,t,n,i,a){var c=n._reactRootContainer;if(c){var f=c;if(typeof a=="function"){var g=a;a=function(){var v=Ld(f);g.call(v)}}fh(t,f,e,a)}else f=gA(n,t,e,a,i);return Ld(f)}j2=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=$l(t.pendingLanes);n!==0&&(Lp(t,n|1),zr(t,Rn()),!(zt&6)&&(ul=Rn()+500,No()))}break;case 13:fa(function(){var i=Ts(e,1);if(i!==null){var a=kr();zi(i,e,1,a)}}),f1(e,1)}};Pp=function(e){if(e.tag===13){var t=Ts(e,134217728);if(t!==null){var n=kr();zi(t,e,134217728,n)}f1(e,134217728)}};B2=function(e){if(e.tag===13){var t=fo(e),n=Ts(e,t);if(n!==null){var i=kr();zi(n,e,t,i)}f1(e,t)}};F2=function(){return Jt};z2=function(e,t){var n=Jt;try{return Jt=e,t()}finally{Jt=n}};c0=function(e,t,n){switch(t){case"input":if(n0(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var a=oh(i);if(!a)throw Error(Re(90));x2(i),n0(i,a)}}}break;case"textarea":w2(e,n);break;case"select":t=n.value,t!=null&&$a(e,!!n.multiple,t,!1)}};E2=l1;N2=fa;var xA={usingClientEntryPoint:!1,Events:[qc,Ba,oh,S2,A2,l1]},Wl={findFiberByHostInstance:Qo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yA={bundleType:Wl.bundleType,version:Wl.version,rendererPackageName:Wl.rendererPackageName,rendererConfig:Wl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=k2(e),e===null?null:e.stateNode},findFiberByHostInstance:Wl.findFiberByHostInstance||mA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lu.isDisabled&&Lu.supportsFiber)try{nh=Lu.inject(yA),es=Lu}catch{}}ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xA;ri.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m1(t))throw Error(Re(200));return pA(e,t,null,n)};ri.createRoot=function(e,t){if(!m1(e))throw Error(Re(299));var n=!1,i="",a=lv;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=h1(e,1,!1,null,null,n,!1,i,a),e[Ns]=t.current,Ec(e.nodeType===8?e.parentNode:e),new p1(t)};ri.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Re(188)):(e=Object.keys(e).join(","),Error(Re(268,e)));return e=k2(t),e=e===null?null:e.stateNode,e};ri.flushSync=function(e){return fa(e)};ri.hydrate=function(e,t,n){if(!mh(t))throw Error(Re(200));return gh(null,e,t,!0,n)};ri.hydrateRoot=function(e,t,n){if(!m1(e))throw Error(Re(405));var i=n!=null&&n.hydratedSources||null,a=!1,c="",f=lv;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),t=av(t,null,e,1,n??null,a,!1,c,f),e[Ns]=t.current,Ec(e),i)for(e=0;e<i.length;e++)n=i[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new ph(t)};ri.render=function(e,t,n){if(!mh(t))throw Error(Re(200));return gh(null,e,t,!1,n)};ri.unmountComponentAtNode=function(e){if(!mh(e))throw Error(Re(40));return e._reactRootContainer?(fa(function(){gh(null,null,e,!1,function(){e._reactRootContainer=null,e[Ns]=null})}),!0):!1};ri.unstable_batchedUpdates=l1;ri.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!mh(n))throw Error(Re(200));if(e==null||e._reactInternals===void 0)throw Error(Re(38));return gh(e,t,n,!1,i)};ri.version="18.3.1-next-f1338f8080-20240426";function cv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cv)}catch(e){console.error(e)}}cv(),c2.exports=ri;var uv=c2.exports,zg=uv;qf.createRoot=zg.createRoot,qf.hydrateRoot=zg.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pc(){return Pc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Pc.apply(this,arguments)}var so;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(so||(so={}));const Ug="popstate";function wA(e){e===void 0&&(e={});function t(a,c){let{pathname:f="/",search:g="",hash:v=""}=xa(a.location.hash.substr(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),V0("",{pathname:f,search:g,hash:v},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(a,c){let f=a.document.querySelector("base"),g="";if(f&&f.getAttribute("href")){let v=a.location.href,y=v.indexOf("#");g=y===-1?v:v.slice(0,y)}return g+"#"+(typeof c=="string"?c:Pd(c))}function i(a,c){xh(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(c)+")")}return _A(t,n,i,e)}function Ln(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function vA(){return Math.random().toString(36).substr(2,8)}function Vg(e,t){return{usr:e.state,key:e.key,idx:t}}function V0(e,t,n,i){return n===void 0&&(n=null),Pc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?xa(t):t,{state:n,key:t&&t.key||i||vA()})}function Pd(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function xa(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function _A(e,t,n,i){i===void 0&&(i={});let{window:a=document.defaultView,v5Compat:c=!1}=i,f=a.history,g=so.Pop,v=null,y=C();y==null&&(y=0,f.replaceState(Pc({},f.state,{idx:y}),""));function C(){return(f.state||{idx:null}).idx}function b(){g=so.Pop;let j=C(),F=j==null?null:j-y;y=j,v&&v({action:g,location:R.location,delta:F})}function T(j,F){g=so.Push;let O=V0(R.location,j,F);n&&n(O,j),y=C()+1;let k=Vg(O,y),W=R.createHref(O);try{f.pushState(k,"",W)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;a.location.assign(W)}c&&v&&v({action:g,location:R.location,delta:1})}function I(j,F){g=so.Replace;let O=V0(R.location,j,F);n&&n(O,j),y=C();let k=Vg(O,y),W=R.createHref(O);f.replaceState(k,"",W),c&&v&&v({action:g,location:R.location,delta:0})}function z(j){let F=a.location.origin!=="null"?a.location.origin:a.location.href,O=typeof j=="string"?j:Pd(j);return O=O.replace(/ $/,"%20"),Ln(F,"No window.location.(origin|href) available to create URL for href: "+O),new URL(O,F)}let R={get action(){return g},get location(){return e(a,f)},listen(j){if(v)throw new Error("A history only accepts one active listener");return a.addEventListener(Ug,b),v=j,()=>{a.removeEventListener(Ug,b),v=null}},createHref(j){return t(a,j)},createURL:z,encodeLocation(j){let F=z(j);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:T,replace:I,go(j){return f.go(j)}};return R}var Hg;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Hg||(Hg={}));function bA(e,t,n){return n===void 0&&(n="/"),CA(e,t,n)}function CA(e,t,n,i){let a=typeof t=="string"?xa(t):t,c=g1(a.pathname||"/",n);if(c==null)return null;let f=dv(e);SA(f);let g=null;for(let v=0;g==null&&v<f.length;++v){let y=DA(c);g=OA(f[v],y)}return g}function dv(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let a=(c,f,g)=>{let v={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};v.relativePath.startsWith("/")&&(Ln(v.relativePath.startsWith(i),'Absolute route path "'+v.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),v.relativePath=v.relativePath.slice(i.length));let y=mo([i,v.relativePath]),C=n.concat(v);c.children&&c.children.length>0&&(Ln(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),dv(c.children,t,C,y)),!(c.path==null&&!c.index)&&t.push({path:y,score:MA(y,c.index),routesMeta:C})};return e.forEach((c,f)=>{var g;if(c.path===""||!((g=c.path)!=null&&g.includes("?")))a(c,f);else for(let v of hv(c.path))a(c,f,v)}),t}function hv(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,a=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return a?[c,""]:[c];let f=hv(i.join("/")),g=[];return g.push(...f.map(v=>v===""?c:[c,v].join("/"))),a&&g.push(...f),g.map(v=>e.startsWith("/")&&v===""?"/":v)}function SA(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:RA(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const AA=/^:[\w-]+$/,EA=3,NA=2,TA=1,IA=10,kA=-2,Wg=e=>e==="*";function MA(e,t){let n=e.split("/"),i=n.length;return n.some(Wg)&&(i+=kA),t&&(i+=NA),n.filter(a=>!Wg(a)).reduce((a,c)=>a+(AA.test(c)?EA:c===""?TA:IA),i)}function RA(e,t){return e.length===t.length&&e.slice(0,-1).every((i,a)=>i===t[a])?e[e.length-1]-t[t.length-1]:0}function OA(e,t,n){let{routesMeta:i}=e,a={},c="/",f=[];for(let g=0;g<i.length;++g){let v=i[g],y=g===i.length-1,C=c==="/"?t:t.slice(c.length)||"/",b=LA({path:v.relativePath,caseSensitive:v.caseSensitive,end:y},C),T=v.route;if(!b)return null;Object.assign(a,b.params),f.push({params:a,pathname:mo([c,b.pathname]),pathnameBase:UA(mo([c,b.pathnameBase])),route:T}),b.pathnameBase!=="/"&&(c=mo([c,b.pathnameBase]))}return f}function LA(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=PA(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let c=a[0],f=c.replace(/(.)\/+$/,"$1"),g=a.slice(1);return{params:i.reduce((y,C,b)=>{let{paramName:T,isOptional:I}=C;if(T==="*"){let R=g[b]||"";f=c.slice(0,c.length-R.length).replace(/(.)\/+$/,"$1")}const z=g[b];return I&&!z?y[T]=void 0:y[T]=(z||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:f,pattern:e}}function PA(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),xh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,g,v)=>(i.push({paramName:g,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function DA(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return xh(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function g1(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}const jA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,BA=e=>jA.test(e);function FA(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:a=""}=typeof e=="string"?xa(e):e,c;if(n)if(BA(n))c=n;else{if(n.includes("//")){let f=n;n=n.replace(/\/\/+/g,"/"),xh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(f+" -> "+n))}n.startsWith("/")?c=Zg(n.substring(1),"/"):c=Zg(n,t)}else c=t;return{pathname:c,search:VA(i),hash:HA(a)}}function Zg(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Sf(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zA(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function x1(e,t){let n=zA(e);return t?n.map((i,a)=>a===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function y1(e,t,n,i){i===void 0&&(i=!1);let a;typeof e=="string"?a=xa(e):(a=Pc({},e),Ln(!a.pathname||!a.pathname.includes("?"),Sf("?","pathname","search",a)),Ln(!a.pathname||!a.pathname.includes("#"),Sf("#","pathname","hash",a)),Ln(!a.search||!a.search.includes("#"),Sf("#","search","hash",a)));let c=e===""||a.pathname==="",f=c?"/":a.pathname,g;if(f==null)g=n;else{let b=t.length-1;if(!i&&f.startsWith("..")){let T=f.split("/");for(;T[0]==="..";)T.shift(),b-=1;a.pathname=T.join("/")}g=b>=0?t[b]:"/"}let v=FA(a,g),y=f&&f!=="/"&&f.endsWith("/"),C=(c||f===".")&&n.endsWith("/");return!v.pathname.endsWith("/")&&(y||C)&&(v.pathname+="/"),v}const mo=e=>e.join("/").replace(/\/\/+/g,"/"),UA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),VA=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,HA=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function WA(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const fv=["post","put","patch","delete"];new Set(fv);const ZA=["get",...fv];new Set(ZA);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dc(){return Dc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Dc.apply(this,arguments)}const w1=B.createContext(null),GA=B.createContext(null),To=B.createContext(null),yh=B.createContext(null),is=B.createContext({outlet:null,matches:[],isDataRoute:!1}),pv=B.createContext(null);function YA(e,t){let{relative:n}=t===void 0?{}:t;yl()||Ln(!1);let{basename:i,navigator:a}=B.useContext(To),{hash:c,pathname:f,search:g}=gv(e,{relative:n}),v=f;return i!=="/"&&(v=f==="/"?i:mo([i,f])),a.createHref({pathname:v,search:g,hash:c})}function yl(){return B.useContext(yh)!=null}function Io(){return yl()||Ln(!1),B.useContext(yh).location}function mv(e){B.useContext(To).static||B.useLayoutEffect(e)}function wr(){let{isDataRoute:e}=B.useContext(is);return e?lE():XA()}function XA(){yl()||Ln(!1);let e=B.useContext(w1),{basename:t,future:n,navigator:i}=B.useContext(To),{matches:a}=B.useContext(is),{pathname:c}=Io(),f=JSON.stringify(x1(a,n.v7_relativeSplatPath)),g=B.useRef(!1);return mv(()=>{g.current=!0}),B.useCallback(function(y,C){if(C===void 0&&(C={}),!g.current)return;if(typeof y=="number"){i.go(y);return}let b=y1(y,JSON.parse(f),c,C.relative==="path");e==null&&t!=="/"&&(b.pathname=b.pathname==="/"?t:mo([t,b.pathname])),(C.replace?i.replace:i.push)(b,C.state,C)},[t,i,f,c,e])}const qA=B.createContext(null);function KA(e){let t=B.useContext(is).outlet;return t&&B.createElement(qA.Provider,{value:e},t)}function v1(){let{matches:e}=B.useContext(is),t=e[e.length-1];return t?t.params:{}}function gv(e,t){let{relative:n}=t===void 0?{}:t,{future:i}=B.useContext(To),{matches:a}=B.useContext(is),{pathname:c}=Io(),f=JSON.stringify(x1(a,i.v7_relativeSplatPath));return B.useMemo(()=>y1(e,JSON.parse(f),c,n==="path"),[e,f,c,n])}function QA(e,t){return $A(e,t)}function $A(e,t,n,i){yl()||Ln(!1);let{navigator:a}=B.useContext(To),{matches:c}=B.useContext(is),f=c[c.length-1],g=f?f.params:{};f&&f.pathname;let v=f?f.pathnameBase:"/";f&&f.route;let y=Io(),C;if(t){var b;let j=typeof t=="string"?xa(t):t;v==="/"||(b=j.pathname)!=null&&b.startsWith(v)||Ln(!1),C=j}else C=y;let T=C.pathname||"/",I=T;if(v!=="/"){let j=v.replace(/^\//,"").split("/");I="/"+T.replace(/^\//,"").split("/").slice(j.length).join("/")}let z=bA(e,{pathname:I}),R=rE(z&&z.map(j=>Object.assign({},j,{params:Object.assign({},g,j.params),pathname:mo([v,a.encodeLocation?a.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?v:mo([v,a.encodeLocation?a.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),c,n,i);return t&&R?B.createElement(yh.Provider,{value:{location:Dc({pathname:"/",search:"",hash:"",state:null,key:"default"},C),navigationType:so.Pop}},R):R}function JA(){let e=aE(),t=WA(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},t),n?B.createElement("pre",{style:a},n):null,null)}const eE=B.createElement(JA,null);class tE extends B.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?B.createElement(is.Provider,{value:this.props.routeContext},B.createElement(pv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nE(e){let{routeContext:t,match:n,children:i}=e,a=B.useContext(w1);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),B.createElement(is.Provider,{value:t},i)}function rE(e,t,n,i){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),i===void 0&&(i=null),e==null){var c;if(!n)return null;if(n.errors)e=n.matches;else if((c=i)!=null&&c.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let f=e,g=(a=n)==null?void 0:a.errors;if(g!=null){let C=f.findIndex(b=>b.route.id&&(g==null?void 0:g[b.route.id])!==void 0);C>=0||Ln(!1),f=f.slice(0,Math.min(f.length,C+1))}let v=!1,y=-1;if(n&&i&&i.v7_partialHydration)for(let C=0;C<f.length;C++){let b=f[C];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(y=C),b.route.id){let{loaderData:T,errors:I}=n,z=b.route.loader&&T[b.route.id]===void 0&&(!I||I[b.route.id]===void 0);if(b.route.lazy||z){v=!0,y>=0?f=f.slice(0,y+1):f=[f[0]];break}}}return f.reduceRight((C,b,T)=>{let I,z=!1,R=null,j=null;n&&(I=g&&b.route.id?g[b.route.id]:void 0,R=b.route.errorElement||eE,v&&(y<0&&T===0?(cE("route-fallback"),z=!0,j=null):y===T&&(z=!0,j=b.route.hydrateFallbackElement||null)));let F=t.concat(f.slice(0,T+1)),O=()=>{let k;return I?k=R:z?k=j:b.route.Component?k=B.createElement(b.route.Component,null):b.route.element?k=b.route.element:k=C,B.createElement(nE,{match:b,routeContext:{outlet:C,matches:F,isDataRoute:n!=null},children:k})};return n&&(b.route.ErrorBoundary||b.route.errorElement||T===0)?B.createElement(tE,{location:n.location,revalidation:n.revalidation,component:R,error:I,children:O(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):O()},null)}var xv=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(xv||{}),yv=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(yv||{});function iE(e){let t=B.useContext(w1);return t||Ln(!1),t}function sE(e){let t=B.useContext(GA);return t||Ln(!1),t}function oE(e){let t=B.useContext(is);return t||Ln(!1),t}function wv(e){let t=oE(),n=t.matches[t.matches.length-1];return n.route.id||Ln(!1),n.route.id}function aE(){var e;let t=B.useContext(pv),n=sE(),i=wv();return t!==void 0?t:(e=n.errors)==null?void 0:e[i]}function lE(){let{router:e}=iE(xv.UseNavigateStable),t=wv(yv.UseNavigateStable),n=B.useRef(!1);return mv(()=>{n.current=!0}),B.useCallback(function(a,c){c===void 0&&(c={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Dc({fromRouteId:t},c)))},[e,t])}const Gg={};function cE(e,t,n){Gg[e]||(Gg[e]=!0)}function uE(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function rd(e){let{to:t,replace:n,state:i,relative:a}=e;yl()||Ln(!1);let{future:c,static:f}=B.useContext(To),{matches:g}=B.useContext(is),{pathname:v}=Io(),y=wr(),C=y1(t,x1(g,c.v7_relativeSplatPath),v,a==="path"),b=JSON.stringify(C);return B.useEffect(()=>y(JSON.parse(b),{replace:n,state:i,relative:a}),[y,b,a,n,i]),null}function dE(e){return KA(e.context)}function Xn(e){Ln(!1)}function hE(e){let{basename:t="/",children:n=null,location:i,navigationType:a=so.Pop,navigator:c,static:f=!1,future:g}=e;yl()&&Ln(!1);let v=t.replace(/^\/*/,"/"),y=B.useMemo(()=>({basename:v,navigator:c,static:f,future:Dc({v7_relativeSplatPath:!1},g)}),[v,g,c,f]);typeof i=="string"&&(i=xa(i));let{pathname:C="/",search:b="",hash:T="",state:I=null,key:z="default"}=i,R=B.useMemo(()=>{let j=g1(C,v);return j==null?null:{location:{pathname:j,search:b,hash:T,state:I,key:z},navigationType:a}},[v,C,b,T,I,z,a]);return R==null?null:B.createElement(To.Provider,{value:y},B.createElement(yh.Provider,{children:n,value:R}))}function fE(e){let{children:t,location:n}=e;return QA(H0(t),n)}new Promise(()=>{});function H0(e,t){t===void 0&&(t=[]);let n=[];return B.Children.forEach(e,(i,a)=>{if(!B.isValidElement(i))return;let c=[...t,a];if(i.type===B.Fragment){n.push.apply(n,H0(i.props.children,c));return}i.type!==Xn&&Ln(!1),!i.props.index||!i.props.children||Ln(!1);let f={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=H0(i.props.children,c)),n.push(f)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function W0(){return W0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},W0.apply(this,arguments)}function pE(e,t){if(e==null)return{};var n={},i=Object.keys(e),a,c;for(c=0;c<i.length;c++)a=i[c],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function mE(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function gE(e,t){return e.button===0&&(!t||t==="_self")&&!mE(e)}const xE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yE="6";try{window.__reactRouterVersion=yE}catch{}const wE="startTransition",Yg=lS[wE];function vE(e){let{basename:t,children:n,future:i,window:a}=e,c=B.useRef();c.current==null&&(c.current=wA({window:a,v5Compat:!0}));let f=c.current,[g,v]=B.useState({action:f.action,location:f.location}),{v7_startTransition:y}=i||{},C=B.useCallback(b=>{y&&Yg?Yg(()=>v(b)):v(b)},[v,y]);return B.useLayoutEffect(()=>f.listen(C),[f,C]),B.useEffect(()=>uE(i),[i]),B.createElement(hE,{basename:t,children:n,location:g.location,navigationType:g.action,navigator:f,future:i})}const _E=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,CE=B.forwardRef(function(t,n){let{onClick:i,relative:a,reloadDocument:c,replace:f,state:g,target:v,to:y,preventScrollReset:C,viewTransition:b}=t,T=pE(t,xE),{basename:I}=B.useContext(To),z,R=!1;if(typeof y=="string"&&bE.test(y)&&(z=y,_E))try{let k=new URL(window.location.href),W=y.startsWith("//")?new URL(k.protocol+y):new URL(y),K=g1(W.pathname,I);W.origin===k.origin&&K!=null?y=K+W.search+W.hash:R=!0}catch{}let j=YA(y,{relative:a}),F=SE(y,{replace:f,state:g,target:v,preventScrollReset:C,relative:a,viewTransition:b});function O(k){i&&i(k),k.defaultPrevented||F(k)}return B.createElement("a",W0({},T,{href:z||j,onClick:R||c?i:O,ref:n,target:v}))});var Xg;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Xg||(Xg={}));var qg;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(qg||(qg={}));function SE(e,t){let{target:n,replace:i,state:a,preventScrollReset:c,relative:f,viewTransition:g}=t===void 0?{}:t,v=wr(),y=Io(),C=gv(e,{relative:f});return B.useCallback(b=>{if(gE(b,n)){b.preventDefault();let T=i!==void 0?i:Pd(y)===Pd(C);v(e,{replace:T,state:a,preventScrollReset:c,relative:f,viewTransition:g})}},[y,v,C,i,a,n,e,c,f,g])}const vv=B.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),wh=B.createContext({}),vh=B.createContext(null),_h=typeof document<"u",_1=_h?B.useLayoutEffect:B.useEffect,_v=B.createContext({strict:!1}),b1=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),AE="framerAppearId",bv="data-"+b1(AE);function EE(e,t,n,i){const{visualElement:a}=B.useContext(wh),c=B.useContext(_v),f=B.useContext(vh),g=B.useContext(vv).reducedMotion,v=B.useRef();i=i||c.renderer,!v.current&&i&&(v.current=i(e,{visualState:t,parent:a,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:g}));const y=v.current;B.useInsertionEffect(()=>{y&&y.update(n,f)});const C=B.useRef(!!(n[bv]&&!window.HandoffComplete));return _1(()=>{y&&(y.render(),C.current&&y.animationState&&y.animationState.animateChanges())}),B.useEffect(()=>{y&&(y.updateFeatures(),!C.current&&y.animationState&&y.animationState.animateChanges(),C.current&&(C.current=!1,window.HandoffComplete=!0))}),y}function Za(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function NE(e,t,n){return B.useCallback(i=>{i&&e.mount&&e.mount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):Za(n)&&(n.current=i))},[t])}function jc(e){return typeof e=="string"||Array.isArray(e)}function bh(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const C1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],S1=["initial",...C1];function Ch(e){return bh(e.animate)||S1.some(t=>jc(e[t]))}function Cv(e){return!!(Ch(e)||e.variants)}function TE(e,t){if(Ch(e)){const{initial:n,animate:i}=e;return{initial:n===!1||jc(n)?n:void 0,animate:jc(i)?i:void 0}}return e.inherit!==!1?t:{}}function IE(e){const{initial:t,animate:n}=TE(e,B.useContext(wh));return B.useMemo(()=>({initial:t,animate:n}),[Kg(t),Kg(n)])}function Kg(e){return Array.isArray(e)?e.join(" "):e}const Qg={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bc={};for(const e in Qg)Bc[e]={isEnabled:t=>Qg[e].some(n=>!!t[n])};function kE(e){for(const t in e)Bc[t]={...Bc[t],...e[t]}}const A1=B.createContext({}),Sv=B.createContext({}),ME=Symbol.for("motionComponentSymbol");function RE({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:i,Component:a}){e&&kE(e);function c(g,v){let y;const C={...B.useContext(vv),...g,layoutId:OE(g)},{isStatic:b}=C,T=IE(g),I=i(g,b);if(!b&&_h){T.visualElement=EE(a,I,C,t);const z=B.useContext(Sv),R=B.useContext(_v).strict;T.visualElement&&(y=T.visualElement.loadFeatures(C,R,e,z))}return B.createElement(wh.Provider,{value:T},y&&T.visualElement?B.createElement(y,{visualElement:T.visualElement,...C}):null,n(a,g,NE(I,T.visualElement,v),I,b,T.visualElement))}const f=B.forwardRef(c);return f[ME]=a,f}function OE({layoutId:e}){const t=B.useContext(A1).id;return t&&e!==void 0?t+"-"+e:e}function LE(e){function t(i,a={}){return RE(e(i,a))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(i,a)=>(n.has(a)||n.set(a,t(a)),n.get(a))})}const PE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function E1(e){return typeof e!="string"||e.includes("-")?!1:!!(PE.indexOf(e)>-1||/[A-Z]/.test(e))}const Dd={};function DE(e){Object.assign(Dd,e)}const Qc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ya=new Set(Qc);function Av(e,{layout:t,layoutId:n}){return ya.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Dd[e]||e==="opacity")}const Hr=e=>!!(e&&e.getVelocity),jE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},BE=Qc.length;function FE(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},i,a){let c="";for(let f=0;f<BE;f++){const g=Qc[f];if(e[g]!==void 0){const v=jE[g]||g;c+=`${v}(${e[g]}) `}}return t&&!e.z&&(c+="translateZ(0)"),c=c.trim(),a?c=a(e,i?"":c):n&&i&&(c="none"),c}const Ev=e=>t=>typeof t=="string"&&t.startsWith(e),Nv=Ev("--"),Z0=Ev("var(--"),zE=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,UE=(e,t)=>t&&typeof e=="number"?t.transform(e):e,bo=(e,t,n)=>Math.min(Math.max(n,e),t),wa={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},dc={...wa,transform:e=>bo(0,1,e)},Pu={...wa,default:1},hc=e=>Math.round(e*1e5)/1e5,Sh=/(-)?([\d]*\.?[\d])+/g,Tv=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,VE=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function $c(e){return typeof e=="string"}const Jc=e=>({test:t=>$c(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),qs=Jc("deg"),ns=Jc("%"),lt=Jc("px"),HE=Jc("vh"),WE=Jc("vw"),$g={...ns,parse:e=>ns.parse(e)/100,transform:e=>ns.transform(e*100)},Jg={...wa,transform:Math.round},Iv={borderWidth:lt,borderTopWidth:lt,borderRightWidth:lt,borderBottomWidth:lt,borderLeftWidth:lt,borderRadius:lt,radius:lt,borderTopLeftRadius:lt,borderTopRightRadius:lt,borderBottomRightRadius:lt,borderBottomLeftRadius:lt,width:lt,maxWidth:lt,height:lt,maxHeight:lt,size:lt,top:lt,right:lt,bottom:lt,left:lt,padding:lt,paddingTop:lt,paddingRight:lt,paddingBottom:lt,paddingLeft:lt,margin:lt,marginTop:lt,marginRight:lt,marginBottom:lt,marginLeft:lt,rotate:qs,rotateX:qs,rotateY:qs,rotateZ:qs,scale:Pu,scaleX:Pu,scaleY:Pu,scaleZ:Pu,skew:qs,skewX:qs,skewY:qs,distance:lt,translateX:lt,translateY:lt,translateZ:lt,x:lt,y:lt,z:lt,perspective:lt,transformPerspective:lt,opacity:dc,originX:$g,originY:$g,originZ:lt,zIndex:Jg,fillOpacity:dc,strokeOpacity:dc,numOctaves:Jg};function N1(e,t,n,i){const{style:a,vars:c,transform:f,transformOrigin:g}=e;let v=!1,y=!1,C=!0;for(const b in t){const T=t[b];if(Nv(b)){c[b]=T;continue}const I=Iv[b],z=UE(T,I);if(ya.has(b)){if(v=!0,f[b]=z,!C)continue;T!==(I.default||0)&&(C=!1)}else b.startsWith("origin")?(y=!0,g[b]=z):a[b]=z}if(t.transform||(v||i?a.transform=FE(e.transform,n,C,i):a.transform&&(a.transform="none")),y){const{originX:b="50%",originY:T="50%",originZ:I=0}=g;a.transformOrigin=`${b} ${T} ${I}`}}const T1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function kv(e,t,n){for(const i in t)!Hr(t[i])&&!Av(i,n)&&(e[i]=t[i])}function ZE({transformTemplate:e},t,n){return B.useMemo(()=>{const i=T1();return N1(i,t,{enableHardwareAcceleration:!n},e),Object.assign({},i.vars,i.style)},[t])}function GE(e,t,n){const i=e.style||{},a={};return kv(a,i,e),Object.assign(a,ZE(e,t,n)),e.transformValues?e.transformValues(a):a}function YE(e,t,n){const i={},a=GE(e,t,n);return e.drag&&e.dragListener!==!1&&(i.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=a,i}const XE=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function jd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||XE.has(e)}let Mv=e=>!jd(e);function qE(e){e&&(Mv=t=>t.startsWith("on")?!jd(t):e(t))}try{qE(require("@emotion/is-prop-valid").default)}catch{}function KE(e,t,n){const i={};for(const a in e)a==="values"&&typeof e.values=="object"||(Mv(a)||n===!0&&jd(a)||!t&&!jd(a)||e.draggable&&a.startsWith("onDrag"))&&(i[a]=e[a]);return i}function ex(e,t,n){return typeof e=="string"?e:lt.transform(t+n*e)}function QE(e,t,n){const i=ex(t,e.x,e.width),a=ex(n,e.y,e.height);return`${i} ${a}`}const $E={offset:"stroke-dashoffset",array:"stroke-dasharray"},JE={offset:"strokeDashoffset",array:"strokeDasharray"};function eN(e,t,n=1,i=0,a=!0){e.pathLength=1;const c=a?$E:JE;e[c.offset]=lt.transform(-i);const f=lt.transform(t),g=lt.transform(n);e[c.array]=`${f} ${g}`}function I1(e,{attrX:t,attrY:n,attrScale:i,originX:a,originY:c,pathLength:f,pathSpacing:g=1,pathOffset:v=0,...y},C,b,T){if(N1(e,y,C,T),b){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:I,style:z,dimensions:R}=e;I.transform&&(R&&(z.transform=I.transform),delete I.transform),R&&(a!==void 0||c!==void 0||z.transform)&&(z.transformOrigin=QE(R,a!==void 0?a:.5,c!==void 0?c:.5)),t!==void 0&&(I.x=t),n!==void 0&&(I.y=n),i!==void 0&&(I.scale=i),f!==void 0&&eN(I,f,g,v,!1)}const Rv=()=>({...T1(),attrs:{}}),k1=e=>typeof e=="string"&&e.toLowerCase()==="svg";function tN(e,t,n,i){const a=B.useMemo(()=>{const c=Rv();return I1(c,t,{enableHardwareAcceleration:!1},k1(i),e.transformTemplate),{...c.attrs,style:{...c.style}}},[t]);if(e.style){const c={};kv(c,e.style,e),a.style={...c,...a.style}}return a}function nN(e=!1){return(n,i,a,{latestValues:c},f)=>{const v=(E1(n)?tN:YE)(i,c,f,n),C={...KE(i,typeof n=="string",e),...v,ref:a},{children:b}=i,T=B.useMemo(()=>Hr(b)?b.get():b,[b]);return B.createElement(n,{...C,children:T})}}function Ov(e,{style:t,vars:n},i,a){Object.assign(e.style,t,a&&a.getProjectionStyles(i));for(const c in n)e.style.setProperty(c,n[c])}const Lv=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Pv(e,t,n,i){Ov(e,t,void 0,i);for(const a in t.attrs)e.setAttribute(Lv.has(a)?a:b1(a),t.attrs[a])}function M1(e,t){const{style:n}=e,i={};for(const a in n)(Hr(n[a])||t.style&&Hr(t.style[a])||Av(a,e))&&(i[a]=n[a]);return i}function Dv(e,t){const n=M1(e,t);for(const i in e)if(Hr(e[i])||Hr(t[i])){const a=Qc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[a]=e[i]}return n}function R1(e,t,n,i={},a={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,i,a)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,i,a)),t}function jv(e){const t=B.useRef(null);return t.current===null&&(t.current=e()),t.current}const Bd=e=>Array.isArray(e),rN=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),iN=e=>Bd(e)?e[e.length-1]||0:e;function id(e){const t=Hr(e)?e.get():e;return rN(t)?t.toValue():t}function sN({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},i,a,c){const f={latestValues:oN(i,a,c,e),renderState:t()};return n&&(f.mount=g=>n(i,g,f)),f}const Bv=e=>(t,n)=>{const i=B.useContext(wh),a=B.useContext(vh),c=()=>sN(e,t,i,a);return n?c():jv(c)};function oN(e,t,n,i){const a={},c=i(e,{});for(const T in c)a[T]=id(c[T]);let{initial:f,animate:g}=e;const v=Ch(e),y=Cv(e);t&&y&&!v&&e.inherit!==!1&&(f===void 0&&(f=t.initial),g===void 0&&(g=t.animate));let C=n?n.initial===!1:!1;C=C||f===!1;const b=C?g:f;return b&&typeof b!="boolean"&&!bh(b)&&(Array.isArray(b)?b:[b]).forEach(I=>{const z=R1(e,I);if(!z)return;const{transitionEnd:R,transition:j,...F}=z;for(const O in F){let k=F[O];if(Array.isArray(k)){const W=C?k.length-1:0;k=k[W]}k!==null&&(a[O]=k)}for(const O in R)a[O]=R[O]}),a}const On=e=>e;class tx{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function aN(e){let t=new tx,n=new tx,i=0,a=!1,c=!1;const f=new WeakSet,g={schedule:(v,y=!1,C=!1)=>{const b=C&&a,T=b?t:n;return y&&f.add(v),T.add(v)&&b&&a&&(i=t.order.length),v},cancel:v=>{n.remove(v),f.delete(v)},process:v=>{if(a){c=!0;return}if(a=!0,[t,n]=[n,t],n.clear(),i=t.order.length,i)for(let y=0;y<i;y++){const C=t.order[y];C(v),f.has(C)&&(g.schedule(C),e())}a=!1,c&&(c=!1,g.process(v))}};return g}const Du=["prepare","read","update","preRender","render","postRender"],lN=40;function cN(e,t){let n=!1,i=!0;const a={delta:0,timestamp:0,isProcessing:!1},c=Du.reduce((b,T)=>(b[T]=aN(()=>n=!0),b),{}),f=b=>c[b].process(a),g=()=>{const b=performance.now();n=!1,a.delta=i?1e3/60:Math.max(Math.min(b-a.timestamp,lN),1),a.timestamp=b,a.isProcessing=!0,Du.forEach(f),a.isProcessing=!1,n&&t&&(i=!1,e(g))},v=()=>{n=!0,i=!0,a.isProcessing||e(g)};return{schedule:Du.reduce((b,T)=>{const I=c[T];return b[T]=(z,R=!1,j=!1)=>(n||v(),I.schedule(z,R,j)),b},{}),cancel:b=>Du.forEach(T=>c[T].cancel(b)),state:a,steps:c}}const{schedule:cn,cancel:ks,state:mr,steps:Af}=cN(typeof requestAnimationFrame<"u"?requestAnimationFrame:On,!0),uN={useVisualState:Bv({scrapeMotionValuesFromProps:Dv,createRenderState:Rv,onMount:(e,t,{renderState:n,latestValues:i})=>{cn.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),cn.render(()=>{I1(n,i,{enableHardwareAcceleration:!1},k1(t.tagName),e.transformTemplate),Pv(t,n)})}})},dN={useVisualState:Bv({scrapeMotionValuesFromProps:M1,createRenderState:T1})};function hN(e,{forwardMotionProps:t=!1},n,i){return{...E1(e)?uN:dN,preloadedFeatures:n,useRender:nN(t),createVisualElement:i,Component:e}}function vs(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}const Fv=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Ah(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const fN=e=>t=>Fv(t)&&e(t,Ah(t));function Ss(e,t,n,i){return vs(e,t,fN(n),i)}const pN=(e,t)=>n=>t(e(n)),go=(...e)=>e.reduce(pN);function zv(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const nx=zv("dragHorizontal"),rx=zv("dragVertical");function Uv(e){let t=!1;if(e==="y")t=rx();else if(e==="x")t=nx();else{const n=nx(),i=rx();n&&i?t=()=>{n(),i()}:(n&&n(),i&&i())}return t}function Vv(){const e=Uv(!0);return e?(e(),!1):!0}class ko{constructor(t){this.isMounted=!1,this.node=t}update(){}}function ix(e,t){const n="pointer"+(t?"enter":"leave"),i="onHover"+(t?"Start":"End"),a=(c,f)=>{if(c.pointerType==="touch"||Vv())return;const g=e.getProps();e.animationState&&g.whileHover&&e.animationState.setActive("whileHover",t),g[i]&&cn.update(()=>g[i](c,f))};return Ss(e.current,n,a,{passive:!e.getProps()[i]})}class mN extends ko{mount(){this.unmount=go(ix(this.node,!0),ix(this.node,!1))}unmount(){}}class gN extends ko{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=go(vs(this.node.current,"focus",()=>this.onFocus()),vs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Hv=(e,t)=>t?e===t?!0:Hv(e,t.parentElement):!1;function Ef(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Ah(n))}class xN extends ko{constructor(){super(...arguments),this.removeStartListeners=On,this.removeEndListeners=On,this.removeAccessibleListeners=On,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),c=Ss(window,"pointerup",(g,v)=>{if(!this.checkPressEnd())return;const{onTap:y,onTapCancel:C,globalTapTarget:b}=this.node.getProps();cn.update(()=>{!b&&!Hv(this.node.current,g.target)?C&&C(g,v):y&&y(g,v)})},{passive:!(i.onTap||i.onPointerUp)}),f=Ss(window,"pointercancel",(g,v)=>this.cancelPress(g,v),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=go(c,f),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=c=>{if(c.key!=="Enter"||this.isPressing)return;const f=g=>{g.key!=="Enter"||!this.checkPressEnd()||Ef("up",(v,y)=>{const{onTap:C}=this.node.getProps();C&&cn.update(()=>C(v,y))})};this.removeEndListeners(),this.removeEndListeners=vs(this.node.current,"keyup",f),Ef("down",(g,v)=>{this.startPress(g,v)})},n=vs(this.node.current,"keydown",t),i=()=>{this.isPressing&&Ef("cancel",(c,f)=>this.cancelPress(c,f))},a=vs(this.node.current,"blur",i);this.removeAccessibleListeners=go(n,a)}}startPress(t,n){this.isPressing=!0;const{onTapStart:i,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&cn.update(()=>i(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Vv()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&cn.update(()=>i(t,n))}mount(){const t=this.node.getProps(),n=Ss(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),i=vs(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=go(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const G0=new WeakMap,Nf=new WeakMap,yN=e=>{const t=G0.get(e.target);t&&t(e)},wN=e=>{e.forEach(yN)};function vN({root:e,...t}){const n=e||document;Nf.has(n)||Nf.set(n,{});const i=Nf.get(n),a=JSON.stringify(t);return i[a]||(i[a]=new IntersectionObserver(wN,{root:e,...t})),i[a]}function _N(e,t,n){const i=vN(t);return G0.set(e,n),i.observe(e),()=>{G0.delete(e),i.unobserve(e)}}const bN={some:0,all:1};class CN extends ko{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:a="some",once:c}=t,f={root:n?n.current:void 0,rootMargin:i,threshold:typeof a=="number"?a:bN[a]},g=v=>{const{isIntersecting:y}=v;if(this.isInView===y||(this.isInView=y,c&&!y&&this.hasEnteredView))return;y&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",y);const{onViewportEnter:C,onViewportLeave:b}=this.node.getProps(),T=y?C:b;T&&T(v)};return _N(this.node.current,f,g)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(SN(t,n))&&this.startObserver()}unmount(){}}function SN({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const AN={inView:{Feature:CN},tap:{Feature:xN},focus:{Feature:gN},hover:{Feature:mN}};function Wv(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function EN(e){const t={};return e.values.forEach((n,i)=>t[i]=n.get()),t}function NN(e){const t={};return e.values.forEach((n,i)=>t[i]=n.getVelocity()),t}function Eh(e,t,n){const i=e.getProps();return R1(i,t,n!==void 0?n:i.custom,EN(e),NN(e))}let O1=On;const ia=e=>e*1e3,As=e=>e/1e3,TN={current:!1},Zv=e=>Array.isArray(e)&&typeof e[0]=="number";function Gv(e){return!!(!e||typeof e=="string"&&Yv[e]||Zv(e)||Array.isArray(e)&&e.every(Gv))}const ec=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,Yv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ec([0,.65,.55,1]),circOut:ec([.55,0,1,.45]),backIn:ec([.31,.01,.66,-.59]),backOut:ec([.33,1.53,.69,.99])};function Xv(e){if(e)return Zv(e)?ec(e):Array.isArray(e)?e.map(Xv):Yv[e]}function IN(e,t,n,{delay:i=0,duration:a,repeat:c=0,repeatType:f="loop",ease:g,times:v}={}){const y={[t]:n};v&&(y.offset=v);const C=Xv(g);return Array.isArray(C)&&(y.easing=C),e.animate(y,{delay:i,duration:a,easing:Array.isArray(C)?"linear":C,fill:"both",iterations:c+1,direction:f==="reverse"?"alternate":"normal"})}function kN(e,{repeat:t,repeatType:n="loop"}){const i=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[i]}const qv=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,MN=1e-7,RN=12;function ON(e,t,n,i,a){let c,f,g=0;do f=t+(n-t)/2,c=qv(f,i,a)-e,c>0?n=f:t=f;while(Math.abs(c)>MN&&++g<RN);return f}function eu(e,t,n,i){if(e===t&&n===i)return On;const a=c=>ON(c,0,1,e,n);return c=>c===0||c===1?c:qv(a(c),t,i)}const LN=eu(.42,0,1,1),PN=eu(0,0,.58,1),Kv=eu(.42,0,.58,1),DN=e=>Array.isArray(e)&&typeof e[0]!="number",Qv=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,$v=e=>t=>1-e(1-t),L1=e=>1-Math.sin(Math.acos(e)),Jv=$v(L1),jN=Qv(L1),e_=eu(.33,1.53,.69,.99),P1=$v(e_),BN=Qv(P1),FN=e=>(e*=2)<1?.5*P1(e):.5*(2-Math.pow(2,-10*(e-1))),zN={linear:On,easeIn:LN,easeInOut:Kv,easeOut:PN,circIn:L1,circInOut:jN,circOut:Jv,backIn:P1,backInOut:BN,backOut:e_,anticipate:FN},sx=e=>{if(Array.isArray(e)){O1(e.length===4);const[t,n,i,a]=e;return eu(t,n,i,a)}else if(typeof e=="string")return zN[e];return e},D1=(e,t)=>n=>!!($c(n)&&VE.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),t_=(e,t,n)=>i=>{if(!$c(i))return i;const[a,c,f,g]=i.match(Sh);return{[e]:parseFloat(a),[t]:parseFloat(c),[n]:parseFloat(f),alpha:g!==void 0?parseFloat(g):1}},UN=e=>bo(0,255,e),Tf={...wa,transform:e=>Math.round(UN(e))},ea={test:D1("rgb","red"),parse:t_("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+Tf.transform(e)+", "+Tf.transform(t)+", "+Tf.transform(n)+", "+hc(dc.transform(i))+")"};function VN(e){let t="",n="",i="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,i+=i,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:a?parseInt(a,16)/255:1}}const Y0={test:D1("#"),parse:VN,transform:ea.transform},Ga={test:D1("hsl","hue"),parse:t_("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+ns.transform(hc(t))+", "+ns.transform(hc(n))+", "+hc(dc.transform(i))+")"},Nr={test:e=>ea.test(e)||Y0.test(e)||Ga.test(e),parse:e=>ea.test(e)?ea.parse(e):Ga.test(e)?Ga.parse(e):Y0.parse(e),transform:e=>$c(e)?e:e.hasOwnProperty("red")?ea.transform(e):Ga.transform(e)},_n=(e,t,n)=>-n*e+n*t+e;function If(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function HN({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let a=0,c=0,f=0;if(!t)a=c=f=n;else{const g=n<.5?n*(1+t):n+t-n*t,v=2*n-g;a=If(v,g,e+1/3),c=If(v,g,e),f=If(v,g,e-1/3)}return{red:Math.round(a*255),green:Math.round(c*255),blue:Math.round(f*255),alpha:i}}const kf=(e,t,n)=>{const i=e*e;return Math.sqrt(Math.max(0,n*(t*t-i)+i))},WN=[Y0,ea,Ga],ZN=e=>WN.find(t=>t.test(e));function ox(e){const t=ZN(e);let n=t.parse(e);return t===Ga&&(n=HN(n)),n}const n_=(e,t)=>{const n=ox(e),i=ox(t),a={...n};return c=>(a.red=kf(n.red,i.red,c),a.green=kf(n.green,i.green,c),a.blue=kf(n.blue,i.blue,c),a.alpha=_n(n.alpha,i.alpha,c),ea.transform(a))};function GN(e){var t,n;return isNaN(e)&&$c(e)&&(((t=e.match(Sh))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(Tv))===null||n===void 0?void 0:n.length)||0)>0}const r_={regex:zE,countKey:"Vars",token:"${v}",parse:On},i_={regex:Tv,countKey:"Colors",token:"${c}",parse:Nr.parse},s_={regex:Sh,countKey:"Numbers",token:"${n}",parse:wa.parse};function Mf(e,{regex:t,countKey:n,token:i,parse:a}){const c=e.tokenised.match(t);c&&(e["num"+n]=c.length,e.tokenised=e.tokenised.replace(t,i),e.values.push(...c.map(a)))}function Fd(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Mf(n,r_),Mf(n,i_),Mf(n,s_),n}function o_(e){return Fd(e).values}function a_(e){const{values:t,numColors:n,numVars:i,tokenised:a}=Fd(e),c=t.length;return f=>{let g=a;for(let v=0;v<c;v++)v<i?g=g.replace(r_.token,f[v]):v<i+n?g=g.replace(i_.token,Nr.transform(f[v])):g=g.replace(s_.token,hc(f[v]));return g}}const YN=e=>typeof e=="number"?0:e;function XN(e){const t=o_(e);return a_(e)(t.map(YN))}const Co={test:GN,parse:o_,createTransformer:a_,getAnimatableNone:XN},l_=(e,t)=>n=>`${n>0?t:e}`;function c_(e,t){return typeof e=="number"?n=>_n(e,t,n):Nr.test(e)?n_(e,t):e.startsWith("var(")?l_(e,t):d_(e,t)}const u_=(e,t)=>{const n=[...e],i=n.length,a=e.map((c,f)=>c_(c,t[f]));return c=>{for(let f=0;f<i;f++)n[f]=a[f](c);return n}},qN=(e,t)=>{const n={...e,...t},i={};for(const a in n)e[a]!==void 0&&t[a]!==void 0&&(i[a]=c_(e[a],t[a]));return a=>{for(const c in i)n[c]=i[c](a);return n}},d_=(e,t)=>{const n=Co.createTransformer(t),i=Fd(e),a=Fd(t);return i.numVars===a.numVars&&i.numColors===a.numColors&&i.numNumbers>=a.numNumbers?go(u_(i.values,a.values),n):l_(e,t)},Fc=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i},ax=(e,t)=>n=>_n(e,t,n);function KN(e){return typeof e=="number"?ax:typeof e=="string"?Nr.test(e)?n_:d_:Array.isArray(e)?u_:typeof e=="object"?qN:ax}function QN(e,t,n){const i=[],a=n||KN(e[0]),c=e.length-1;for(let f=0;f<c;f++){let g=a(e[f],e[f+1]);if(t){const v=Array.isArray(t)?t[f]||On:t;g=go(v,g)}i.push(g)}return i}function h_(e,t,{clamp:n=!0,ease:i,mixer:a}={}){const c=e.length;if(O1(c===t.length),c===1)return()=>t[0];e[0]>e[c-1]&&(e=[...e].reverse(),t=[...t].reverse());const f=QN(t,i,a),g=f.length,v=y=>{let C=0;if(g>1)for(;C<e.length-2&&!(y<e[C+1]);C++);const b=Fc(e[C],e[C+1],y);return f[C](b)};return n?y=>v(bo(e[0],e[c-1],y)):v}function $N(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const a=Fc(0,t,i);e.push(_n(n,1,a))}}function JN(e){const t=[0];return $N(t,e.length-1),t}function e4(e,t){return e.map(n=>n*t)}function t4(e,t){return e.map(()=>t||Kv).splice(0,e.length-1)}function zd({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const a=DN(i)?i.map(sx):sx(i),c={done:!1,value:t[0]},f=e4(n&&n.length===t.length?n:JN(t),e),g=h_(f,t,{ease:Array.isArray(a)?a:t4(t,a)});return{calculatedDuration:e,next:v=>(c.value=g(v),c.done=v>=e,c)}}function f_(e,t){return t?e*(1e3/t):0}const n4=5;function p_(e,t,n){const i=Math.max(t-n4,0);return f_(n-e(i),t-i)}const Rf=.001,r4=.01,i4=10,s4=.05,o4=1;function a4({duration:e=800,bounce:t=.25,velocity:n=0,mass:i=1}){let a,c,f=1-t;f=bo(s4,o4,f),e=bo(r4,i4,As(e)),f<1?(a=y=>{const C=y*f,b=C*e,T=C-n,I=X0(y,f),z=Math.exp(-b);return Rf-T/I*z},c=y=>{const b=y*f*e,T=b*n+n,I=Math.pow(f,2)*Math.pow(y,2)*e,z=Math.exp(-b),R=X0(Math.pow(y,2),f);return(-a(y)+Rf>0?-1:1)*((T-I)*z)/R}):(a=y=>{const C=Math.exp(-y*e),b=(y-n)*e+1;return-Rf+C*b},c=y=>{const C=Math.exp(-y*e),b=(n-y)*(e*e);return C*b});const g=5/e,v=c4(a,c,g);if(e=ia(e),isNaN(v))return{stiffness:100,damping:10,duration:e};{const y=Math.pow(v,2)*i;return{stiffness:y,damping:f*2*Math.sqrt(i*y),duration:e}}}const l4=12;function c4(e,t,n){let i=n;for(let a=1;a<l4;a++)i=i-e(i)/t(i);return i}function X0(e,t){return e*Math.sqrt(1-t*t)}const u4=["duration","bounce"],d4=["stiffness","damping","mass"];function lx(e,t){return t.some(n=>e[n]!==void 0)}function h4(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!lx(e,d4)&&lx(e,u4)){const n=a4(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function m_({keyframes:e,restDelta:t,restSpeed:n,...i}){const a=e[0],c=e[e.length-1],f={done:!1,value:a},{stiffness:g,damping:v,mass:y,duration:C,velocity:b,isResolvedFromDuration:T}=h4({...i,velocity:-As(i.velocity||0)}),I=b||0,z=v/(2*Math.sqrt(g*y)),R=c-a,j=As(Math.sqrt(g/y)),F=Math.abs(R)<5;n||(n=F?.01:2),t||(t=F?.005:.5);let O;if(z<1){const k=X0(j,z);O=W=>{const K=Math.exp(-z*j*W);return c-K*((I+z*j*R)/k*Math.sin(k*W)+R*Math.cos(k*W))}}else if(z===1)O=k=>c-Math.exp(-j*k)*(R+(I+j*R)*k);else{const k=j*Math.sqrt(z*z-1);O=W=>{const K=Math.exp(-z*j*W),Y=Math.min(k*W,300);return c-K*((I+z*j*R)*Math.sinh(Y)+k*R*Math.cosh(Y))/k}}return{calculatedDuration:T&&C||null,next:k=>{const W=O(k);if(T)f.done=k>=C;else{let K=I;k!==0&&(z<1?K=p_(O,k,W):K=0);const Y=Math.abs(K)<=n,H=Math.abs(c-W)<=t;f.done=Y&&H}return f.value=f.done?c:W,f}}}function cx({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:a=10,bounceStiffness:c=500,modifyTarget:f,min:g,max:v,restDelta:y=.5,restSpeed:C}){const b=e[0],T={done:!1,value:b},I=Q=>g!==void 0&&Q<g||v!==void 0&&Q>v,z=Q=>g===void 0?v:v===void 0||Math.abs(g-Q)<Math.abs(v-Q)?g:v;let R=n*t;const j=b+R,F=f===void 0?j:f(j);F!==j&&(R=F-b);const O=Q=>-R*Math.exp(-Q/i),k=Q=>F+O(Q),W=Q=>{const M=O(Q),q=k(Q);T.done=Math.abs(M)<=y,T.value=T.done?F:q};let K,Y;const H=Q=>{I(T.value)&&(K=Q,Y=m_({keyframes:[T.value,z(T.value)],velocity:p_(k,Q,T.value),damping:a,stiffness:c,restDelta:y,restSpeed:C}))};return H(0),{calculatedDuration:null,next:Q=>{let M=!1;return!Y&&K===void 0&&(M=!0,W(Q),H(Q)),K!==void 0&&Q>K?Y.next(Q-K):(!M&&W(Q),T)}}}const f4=e=>{const t=({timestamp:n})=>e(n);return{start:()=>cn.update(t,!0),stop:()=>ks(t),now:()=>mr.isProcessing?mr.timestamp:performance.now()}},ux=2e4;function dx(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<ux;)t+=n,i=e.next(t);return t>=ux?1/0:t}const p4={decay:cx,inertia:cx,tween:zd,keyframes:zd,spring:m_};function Ud({autoplay:e=!0,delay:t=0,driver:n=f4,keyframes:i,type:a="keyframes",repeat:c=0,repeatDelay:f=0,repeatType:g="loop",onPlay:v,onStop:y,onComplete:C,onUpdate:b,...T}){let I=1,z=!1,R,j;const F=()=>{j=new Promise(he=>{R=he})};F();let O;const k=p4[a]||zd;let W;k!==zd&&typeof i[0]!="number"&&(W=h_([0,100],i,{clamp:!1}),i=[0,100]);const K=k({...T,keyframes:i});let Y;g==="mirror"&&(Y=k({...T,keyframes:[...i].reverse(),velocity:-(T.velocity||0)}));let H="idle",Q=null,M=null,q=null;K.calculatedDuration===null&&c&&(K.calculatedDuration=dx(K));const{calculatedDuration:ie}=K;let ae=1/0,we=1/0;ie!==null&&(ae=ie+f,we=ae*(c+1)-f);let Ne=0;const oe=he=>{if(M===null)return;I>0&&(M=Math.min(M,he)),I<0&&(M=Math.min(he-we/I,M)),Q!==null?Ne=Q:Ne=Math.round(he-M)*I;const Te=Ne-t*(I>=0?1:-1),ze=I>=0?Te<0:Te>we;Ne=Math.max(Te,0),H==="finished"&&Q===null&&(Ne=we);let Le=Ne,te=K;if(c){const Tt=Math.min(Ne,we)/ae;let Wt=Math.floor(Tt),bt=Tt%1;!bt&&Tt>=1&&(bt=1),bt===1&&Wt--,Wt=Math.min(Wt,c+1),!!(Wt%2)&&(g==="reverse"?(bt=1-bt,f&&(bt-=f/ae)):g==="mirror"&&(te=Y)),Le=bo(0,1,bt)*ae}const le=ze?{done:!1,value:i[0]}:te.next(Le);W&&(le.value=W(le.value));let{done:De}=le;!ze&&ie!==null&&(De=I>=0?Ne>=we:Ne<=0);const st=Q===null&&(H==="finished"||H==="running"&&De);return b&&b(le.value),st&&ee(),le},se=()=>{O&&O.stop(),O=void 0},ve=()=>{H="idle",se(),R(),F(),M=q=null},ee=()=>{H="finished",C&&C(),se(),R()},_e=()=>{if(z)return;O||(O=n(oe));const he=O.now();v&&v(),Q!==null?M=he-Q:(!M||H==="finished")&&(M=he),H==="finished"&&F(),q=M,Q=null,H="running",O.start()};e&&_e();const pe={then(he,Te){return j.then(he,Te)},get time(){return As(Ne)},set time(he){he=ia(he),Ne=he,Q!==null||!O||I===0?Q=he:M=O.now()-he/I},get duration(){const he=K.calculatedDuration===null?dx(K):K.calculatedDuration;return As(he)},get speed(){return I},set speed(he){he===I||!O||(I=he,pe.time=As(Ne))},get state(){return H},play:_e,pause:()=>{H="paused",Q=Ne},stop:()=>{z=!0,H!=="idle"&&(H="idle",y&&y(),ve())},cancel:()=>{q!==null&&oe(q),ve()},complete:()=>{H="finished"},sample:he=>(M=0,oe(he))};return pe}function m4(e){let t;return()=>(t===void 0&&(t=e()),t)}const g4=m4(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),x4=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),ju=10,y4=2e4,w4=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Gv(t.ease);function v4(e,t,{onUpdate:n,onComplete:i,...a}){if(!(g4()&&x4.has(t)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let f=!1,g,v,y=!1;const C=()=>{v=new Promise(k=>{g=k})};C();let{keyframes:b,duration:T=300,ease:I,times:z}=a;if(w4(t,a)){const k=Ud({...a,repeat:0,delay:0});let W={done:!1,value:b[0]};const K=[];let Y=0;for(;!W.done&&Y<y4;)W=k.sample(Y),K.push(W.value),Y+=ju;z=void 0,b=K,T=Y-ju,I="linear"}const R=IN(e.owner.current,t,b,{...a,duration:T,ease:I,times:z}),j=()=>{y=!1,R.cancel()},F=()=>{y=!0,cn.update(j),g(),C()};return R.onfinish=()=>{y||(e.set(kN(b,a)),i&&i(),F())},{then(k,W){return v.then(k,W)},attachTimeline(k){return R.timeline=k,R.onfinish=null,On},get time(){return As(R.currentTime||0)},set time(k){R.currentTime=ia(k)},get speed(){return R.playbackRate},set speed(k){R.playbackRate=k},get duration(){return As(T)},play:()=>{f||(R.play(),ks(j))},pause:()=>R.pause(),stop:()=>{if(f=!0,R.playState==="idle")return;const{currentTime:k}=R;if(k){const W=Ud({...a,autoplay:!1});e.setWithVelocity(W.sample(k-ju).value,W.sample(k).value,ju)}F()},complete:()=>{y||R.finish()},cancel:F}}function _4({keyframes:e,delay:t,onUpdate:n,onComplete:i}){const a=()=>(n&&n(e[e.length-1]),i&&i(),{time:0,speed:1,duration:0,play:On,pause:On,stop:On,then:c=>(c(),Promise.resolve()),cancel:On,complete:On});return t?Ud({keyframes:[0,1],duration:0,delay:t,onComplete:a}):a()}const b4={type:"spring",stiffness:500,damping:25,restSpeed:10},C4=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),S4={type:"keyframes",duration:.8},A4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},E4=(e,{keyframes:t})=>t.length>2?S4:ya.has(e)?e.startsWith("scale")?C4(t[1]):b4:A4,q0=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Co.test(t)||t==="0")&&!t.startsWith("url(")),N4=new Set(["brightness","contrast","saturate","opacity"]);function T4(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(Sh)||[];if(!i)return e;const a=n.replace(i,"");let c=N4.has(t)?1:0;return i!==n&&(c*=100),t+"("+c+a+")"}const I4=/([a-z-]*)\(.*?\)/g,K0={...Co,getAnimatableNone:e=>{const t=e.match(I4);return t?t.map(T4).join(" "):e}},k4={...Iv,color:Nr,backgroundColor:Nr,outlineColor:Nr,fill:Nr,stroke:Nr,borderColor:Nr,borderTopColor:Nr,borderRightColor:Nr,borderBottomColor:Nr,borderLeftColor:Nr,filter:K0,WebkitFilter:K0},j1=e=>k4[e];function g_(e,t){let n=j1(e);return n!==K0&&(n=Co),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const x_=e=>/^0[^.\s]+$/.test(e);function M4(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||x_(e)}function R4(e,t,n,i){const a=q0(t,n);let c;Array.isArray(n)?c=[...n]:c=[null,n];const f=i.from!==void 0?i.from:e.get();let g;const v=[];for(let y=0;y<c.length;y++)c[y]===null&&(c[y]=y===0?f:c[y-1]),M4(c[y])&&v.push(y),typeof c[y]=="string"&&c[y]!=="none"&&c[y]!=="0"&&(g=c[y]);if(a&&v.length&&g)for(let y=0;y<v.length;y++){const C=v[y];c[C]=g_(t,g)}return c}function O4({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:a,repeat:c,repeatType:f,repeatDelay:g,from:v,elapsed:y,...C}){return!!Object.keys(C).length}function B1(e,t){return e[t]||e.default||e}const L4={skipAnimations:!1},F1=(e,t,n,i={})=>a=>{const c=B1(i,e)||{},f=c.delay||i.delay||0;let{elapsed:g=0}=i;g=g-ia(f);const v=R4(t,e,n,c),y=v[0],C=v[v.length-1],b=q0(e,y),T=q0(e,C);let I={keyframes:v,velocity:t.getVelocity(),ease:"easeOut",...c,delay:-g,onUpdate:z=>{t.set(z),c.onUpdate&&c.onUpdate(z)},onComplete:()=>{a(),c.onComplete&&c.onComplete()}};if(O4(c)||(I={...I,...E4(e,I)}),I.duration&&(I.duration=ia(I.duration)),I.repeatDelay&&(I.repeatDelay=ia(I.repeatDelay)),!b||!T||TN.current||c.type===!1||L4.skipAnimations)return _4(I);if(!i.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const z=v4(t,e,I);if(z)return z}return Ud(I)};function Vd(e){return!!(Hr(e)&&e.add)}const y_=e=>/^\-?\d*\.?\d+$/.test(e);function z1(e,t){e.indexOf(t)===-1&&e.push(t)}function U1(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class V1{constructor(){this.subscriptions=[]}add(t){return z1(this.subscriptions,t),()=>U1(this.subscriptions,t)}notify(t,n,i){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,n,i);else for(let c=0;c<a;c++){const f=this.subscriptions[c];f&&f(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const P4=e=>!isNaN(parseFloat(e));class D4{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,a=!0)=>{this.prev=this.current,this.current=i;const{delta:c,timestamp:f}=mr;this.lastUpdated!==f&&(this.timeDelta=c,this.lastUpdated=f,cn.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>cn.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=P4(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new V1);const i=this.events[t].add(n);return t==="change"?()=>{i(),cn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,i){this.set(n),this.prev=t,this.timeDelta=i}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?f_(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function dl(e,t){return new D4(e,t)}const w_=e=>t=>t.test(e),j4={test:e=>e==="auto",parse:e=>e},v_=[wa,lt,ns,qs,WE,HE,j4],Zl=e=>v_.find(w_(e)),B4=[...v_,Nr,Co],F4=e=>B4.find(w_(e));function z4(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,dl(n))}function U4(e,t){const n=Eh(e,t);let{transitionEnd:i={},transition:a={},...c}=n?e.makeTargetAnimatable(n,!1):{};c={...c,...i};for(const f in c){const g=iN(c[f]);z4(e,f,g)}}function V4(e,t,n){var i,a;const c=Object.keys(t).filter(g=>!e.hasValue(g)),f=c.length;if(f)for(let g=0;g<f;g++){const v=c[g],y=t[v];let C=null;Array.isArray(y)&&(C=y[0]),C===null&&(C=(a=(i=n[v])!==null&&i!==void 0?i:e.readValue(v))!==null&&a!==void 0?a:t[v]),C!=null&&(typeof C=="string"&&(y_(C)||x_(C))?C=parseFloat(C):!F4(C)&&Co.test(y)&&(C=g_(v,y)),e.addValue(v,dl(C,{owner:e})),n[v]===void 0&&(n[v]=C),C!==null&&e.setBaseTarget(v,C))}}function H4(e,t){return t?(t[e]||t.default||t).from:void 0}function W4(e,t,n){const i={};for(const a in e){const c=H4(a,t);if(c!==void 0)i[a]=c;else{const f=n.getValue(a);f&&(i[a]=f.get())}}return i}function Z4({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function G4(e,t){const n=e.get();if(Array.isArray(t)){for(let i=0;i<t.length;i++)if(t[i]!==n)return!0}else return n!==t}function __(e,t,{delay:n=0,transitionOverride:i,type:a}={}){let{transition:c=e.getDefaultTransition(),transitionEnd:f,...g}=e.makeTargetAnimatable(t);const v=e.getValue("willChange");i&&(c=i);const y=[],C=a&&e.animationState&&e.animationState.getState()[a];for(const b in g){const T=e.getValue(b),I=g[b];if(!T||I===void 0||C&&Z4(C,b))continue;const z={delay:n,elapsed:0,...B1(c||{},b)};if(window.HandoffAppearAnimations){const F=e.getProps()[bv];if(F){const O=window.HandoffAppearAnimations(F,b,T,cn);O!==null&&(z.elapsed=O,z.isHandoff=!0)}}let R=!z.isHandoff&&!G4(T,I);if(z.type==="spring"&&(T.getVelocity()||z.velocity)&&(R=!1),T.animation&&(R=!1),R)continue;T.start(F1(b,T,I,e.shouldReduceMotion&&ya.has(b)?{type:!1}:z));const j=T.animation;Vd(v)&&(v.add(b),j.then(()=>v.remove(b))),y.push(j)}return f&&Promise.all(y).then(()=>{f&&U4(e,f)}),y}function Q0(e,t,n={}){const i=Eh(e,t,n.custom);let{transition:a=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const c=i?()=>Promise.all(__(e,i,n)):()=>Promise.resolve(),f=e.variantChildren&&e.variantChildren.size?(v=0)=>{const{delayChildren:y=0,staggerChildren:C,staggerDirection:b}=a;return Y4(e,t,y+v,C,b,n)}:()=>Promise.resolve(),{when:g}=a;if(g){const[v,y]=g==="beforeChildren"?[c,f]:[f,c];return v().then(()=>y())}else return Promise.all([c(),f(n.delay)])}function Y4(e,t,n=0,i=0,a=1,c){const f=[],g=(e.variantChildren.size-1)*i,v=a===1?(y=0)=>y*i:(y=0)=>g-y*i;return Array.from(e.variantChildren).sort(X4).forEach((y,C)=>{y.notify("AnimationStart",t),f.push(Q0(y,t,{...c,delay:n+v(C)}).then(()=>y.notify("AnimationComplete",t)))}),Promise.all(f)}function X4(e,t){return e.sortNodePosition(t)}function q4(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const a=t.map(c=>Q0(e,c,n));i=Promise.all(a)}else if(typeof t=="string")i=Q0(e,t,n);else{const a=typeof t=="function"?Eh(e,t,n.custom):t;i=Promise.all(__(e,a,n))}return i.then(()=>e.notify("AnimationComplete",t))}const K4=[...C1].reverse(),Q4=C1.length;function $4(e){return t=>Promise.all(t.map(({animation:n,options:i})=>q4(e,n,i)))}function J4(e){let t=$4(e);const n=tT();let i=!0;const a=(v,y)=>{const C=Eh(e,y);if(C){const{transition:b,transitionEnd:T,...I}=C;v={...v,...I,...T}}return v};function c(v){t=v(e)}function f(v,y){const C=e.getProps(),b=e.getVariantContext(!0)||{},T=[],I=new Set;let z={},R=1/0;for(let F=0;F<Q4;F++){const O=K4[F],k=n[O],W=C[O]!==void 0?C[O]:b[O],K=jc(W),Y=O===y?k.isActive:null;Y===!1&&(R=F);let H=W===b[O]&&W!==C[O]&&K;if(H&&i&&e.manuallyAnimateOnMount&&(H=!1),k.protectedKeys={...z},!k.isActive&&Y===null||!W&&!k.prevProp||bh(W)||typeof W=="boolean")continue;let M=eT(k.prevProp,W)||O===y&&k.isActive&&!H&&K||F>R&&K,q=!1;const ie=Array.isArray(W)?W:[W];let ae=ie.reduce(a,{});Y===!1&&(ae={});const{prevResolvedValues:we={}}=k,Ne={...we,...ae},oe=se=>{M=!0,I.has(se)&&(q=!0,I.delete(se)),k.needsAnimating[se]=!0};for(const se in Ne){const ve=ae[se],ee=we[se];if(z.hasOwnProperty(se))continue;let _e=!1;Bd(ve)&&Bd(ee)?_e=!Wv(ve,ee):_e=ve!==ee,_e?ve!==void 0?oe(se):I.add(se):ve!==void 0&&I.has(se)?oe(se):k.protectedKeys[se]=!0}k.prevProp=W,k.prevResolvedValues=ae,k.isActive&&(z={...z,...ae}),i&&e.blockInitialAnimation&&(M=!1),M&&(!H||q)&&T.push(...ie.map(se=>({animation:se,options:{type:O,...v}})))}if(I.size){const F={};I.forEach(O=>{const k=e.getBaseTarget(O);k!==void 0&&(F[O]=k)}),T.push({animation:F})}let j=!!T.length;return i&&(C.initial===!1||C.initial===C.animate)&&!e.manuallyAnimateOnMount&&(j=!1),i=!1,j?t(T):Promise.resolve()}function g(v,y,C){var b;if(n[v].isActive===y)return Promise.resolve();(b=e.variantChildren)===null||b===void 0||b.forEach(I=>{var z;return(z=I.animationState)===null||z===void 0?void 0:z.setActive(v,y)}),n[v].isActive=y;const T=f(C,v);for(const I in n)n[I].protectedKeys={};return T}return{animateChanges:f,setActive:g,setAnimateFunction:c,getState:()=>n}}function eT(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Wv(t,e):!1}function Ho(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function tT(){return{animate:Ho(!0),whileInView:Ho(),whileHover:Ho(),whileTap:Ho(),whileDrag:Ho(),whileFocus:Ho(),exit:Ho()}}class nT extends ko{constructor(t){super(t),t.animationState||(t.animationState=J4(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),bh(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let rT=0;class iT extends ko{constructor(){super(...arguments),this.id=rT++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const c=this.node.animationState.setActive("exit",!t,{custom:i??this.node.getProps().custom});n&&!t&&c.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const sT={animation:{Feature:nT},exit:{Feature:iT}},hx=(e,t)=>Math.abs(e-t);function oT(e,t){const n=hx(e.x,t.x),i=hx(e.y,t.y);return Math.sqrt(n**2+i**2)}class b_{constructor(t,n,{transformPagePoint:i,contextWindow:a,dragSnapToOrigin:c=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Lf(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,I=oT(b.offset,{x:0,y:0})>=3;if(!T&&!I)return;const{point:z}=b,{timestamp:R}=mr;this.history.push({...z,timestamp:R});const{onStart:j,onMove:F}=this.handlers;T||(j&&j(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),F&&F(this.lastMoveEvent,b)},this.handlePointerMove=(b,T)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=Of(T,this.transformPagePoint),cn.update(this.updatePoint,!0)},this.handlePointerUp=(b,T)=>{this.end();const{onEnd:I,onSessionEnd:z,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=Lf(b.type==="pointercancel"?this.lastMoveEventInfo:Of(T,this.transformPagePoint),this.history);this.startEvent&&I&&I(b,j),z&&z(b,j)},!Fv(t))return;this.dragSnapToOrigin=c,this.handlers=n,this.transformPagePoint=i,this.contextWindow=a||window;const f=Ah(t),g=Of(f,this.transformPagePoint),{point:v}=g,{timestamp:y}=mr;this.history=[{...v,timestamp:y}];const{onSessionStart:C}=n;C&&C(t,Lf(g,this.history)),this.removeListeners=go(Ss(this.contextWindow,"pointermove",this.handlePointerMove),Ss(this.contextWindow,"pointerup",this.handlePointerUp),Ss(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ks(this.updatePoint)}}function Of(e,t){return t?{point:t(e.point)}:e}function fx(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Lf({point:e},t){return{point:e,delta:fx(e,C_(t)),offset:fx(e,aT(t)),velocity:lT(t,.1)}}function aT(e){return e[0]}function C_(e){return e[e.length-1]}function lT(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const a=C_(e);for(;n>=0&&(i=e[n],!(a.timestamp-i.timestamp>ia(t)));)n--;if(!i)return{x:0,y:0};const c=As(a.timestamp-i.timestamp);if(c===0)return{x:0,y:0};const f={x:(a.x-i.x)/c,y:(a.y-i.y)/c};return f.x===1/0&&(f.x=0),f.y===1/0&&(f.y=0),f}function ni(e){return e.max-e.min}function $0(e,t=0,n=.01){return Math.abs(e-t)<=n}function px(e,t,n,i=.5){e.origin=i,e.originPoint=_n(t.min,t.max,e.origin),e.scale=ni(n)/ni(t),($0(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=_n(n.min,n.max,e.origin)-e.originPoint,($0(e.translate)||isNaN(e.translate))&&(e.translate=0)}function fc(e,t,n,i){px(e.x,t.x,n.x,i?i.originX:void 0),px(e.y,t.y,n.y,i?i.originY:void 0)}function mx(e,t,n){e.min=n.min+t.min,e.max=e.min+ni(t)}function cT(e,t,n){mx(e.x,t.x,n.x),mx(e.y,t.y,n.y)}function gx(e,t,n){e.min=t.min-n.min,e.max=e.min+ni(t)}function pc(e,t,n){gx(e.x,t.x,n.x),gx(e.y,t.y,n.y)}function uT(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?_n(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?_n(n,e,i.max):Math.min(e,n)),e}function xx(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function dT(e,{top:t,left:n,bottom:i,right:a}){return{x:xx(e.x,n,a),y:xx(e.y,t,i)}}function yx(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function hT(e,t){return{x:yx(e.x,t.x),y:yx(e.y,t.y)}}function fT(e,t){let n=.5;const i=ni(e),a=ni(t);return a>i?n=Fc(t.min,t.max-i,e.min):i>a&&(n=Fc(e.min,e.max-a,t.min)),bo(0,1,n)}function pT(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const J0=.35;function mT(e=J0){return e===!1?e=0:e===!0&&(e=J0),{x:wx(e,"left","right"),y:wx(e,"top","bottom")}}function wx(e,t,n){return{min:vx(e,t),max:vx(e,n)}}function vx(e,t){return typeof e=="number"?e:e[t]||0}const _x=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ya=()=>({x:_x(),y:_x()}),bx=()=>({min:0,max:0}),zn=()=>({x:bx(),y:bx()});function gi(e){return[e("x"),e("y")]}function S_({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function gT({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function xT(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Pf(e){return e===void 0||e===1}function ep({scale:e,scaleX:t,scaleY:n}){return!Pf(e)||!Pf(t)||!Pf(n)}function Yo(e){return ep(e)||A_(e)||e.z||e.rotate||e.rotateX||e.rotateY}function A_(e){return Cx(e.x)||Cx(e.y)}function Cx(e){return e&&e!=="0%"}function Hd(e,t,n){const i=e-n,a=t*i;return n+a}function Sx(e,t,n,i,a){return a!==void 0&&(e=Hd(e,a,i)),Hd(e,n,i)+t}function tp(e,t=0,n=1,i,a){e.min=Sx(e.min,t,n,i,a),e.max=Sx(e.max,t,n,i,a)}function E_(e,{x:t,y:n}){tp(e.x,t.translate,t.scale,t.originPoint),tp(e.y,n.translate,n.scale,n.originPoint)}function yT(e,t,n,i=!1){const a=n.length;if(!a)return;t.x=t.y=1;let c,f;for(let g=0;g<a;g++){c=n[g],f=c.projectionDelta;const v=c.instance;v&&v.style&&v.style.display==="contents"||(i&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Xa(e,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),f&&(t.x*=f.x.scale,t.y*=f.y.scale,E_(e,f)),i&&Yo(c.latestValues)&&Xa(e,c.latestValues))}t.x=Ax(t.x),t.y=Ax(t.y)}function Ax(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function $s(e,t){e.min=e.min+t,e.max=e.max+t}function Ex(e,t,[n,i,a]){const c=t[a]!==void 0?t[a]:.5,f=_n(e.min,e.max,c);tp(e,t[n],t[i],f,t.scale)}const wT=["x","scaleX","originX"],vT=["y","scaleY","originY"];function Xa(e,t){Ex(e.x,t,wT),Ex(e.y,t,vT)}function N_(e,t){return S_(xT(e.getBoundingClientRect(),t))}function _T(e,t,n){const i=N_(e,n),{scroll:a}=t;return a&&($s(i.x,a.offset.x),$s(i.y,a.offset.y)),i}const T_=({current:e})=>e?e.ownerDocument.defaultView:null,bT=new WeakMap;class CT{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=zn(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=C=>{const{dragSnapToOrigin:b}=this.getProps();b?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ah(C,"page").point)},c=(C,b)=>{const{drag:T,dragPropagation:I,onDragStart:z}=this.getProps();if(T&&!I&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Uv(T),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gi(j=>{let F=this.getAxisMotionValue(j).get()||0;if(ns.test(F)){const{projection:O}=this.visualElement;if(O&&O.layout){const k=O.layout.layoutBox[j];k&&(F=ni(k)*(parseFloat(F)/100))}}this.originPoint[j]=F}),z&&cn.update(()=>z(C,b),!1,!0);const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},f=(C,b)=>{const{dragPropagation:T,dragDirectionLock:I,onDirectionLock:z,onDrag:R}=this.getProps();if(!T&&!this.openGlobalLock)return;const{offset:j}=b;if(I&&this.currentDirection===null){this.currentDirection=ST(j),this.currentDirection!==null&&z&&z(this.currentDirection);return}this.updateAxis("x",b.point,j),this.updateAxis("y",b.point,j),this.visualElement.render(),R&&R(C,b)},g=(C,b)=>this.stop(C,b),v=()=>gi(C=>{var b;return this.getAnimationState(C)==="paused"&&((b=this.getAxisMotionValue(C).animation)===null||b===void 0?void 0:b.play())}),{dragSnapToOrigin:y}=this.getProps();this.panSession=new b_(t,{onSessionStart:a,onStart:c,onMove:f,onSessionEnd:g,resumeAnimation:v},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,contextWindow:T_(this.visualElement)})}stop(t,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:c}=this.getProps();c&&cn.update(()=>c(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:a}=this.getProps();if(!i||!Bu(t,a,this.currentDirection))return;const c=this.getAxisMotionValue(t);let f=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(f=uT(f,this.constraints[t],this.elastic[t])),c.set(f)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:i}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,c=this.constraints;n&&Za(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&a?this.constraints=dT(a.layoutBox,n):this.constraints=!1,this.elastic=mT(i),c!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&gi(f=>{this.getAxisMotionValue(f)&&(this.constraints[f]=pT(a.layoutBox[f],this.constraints[f]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Za(t))return!1;const i=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const c=_T(i,a.root,this.visualElement.getTransformPagePoint());let f=hT(a.layout.layoutBox,c);if(n){const g=n(gT(f));this.hasMutatedConstraints=!!g,g&&(f=S_(g))}return f}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:a,dragTransition:c,dragSnapToOrigin:f,onDragTransitionEnd:g}=this.getProps(),v=this.constraints||{},y=gi(C=>{if(!Bu(C,n,this.currentDirection))return;let b=v&&v[C]||{};f&&(b={min:0,max:0});const T=a?200:1e6,I=a?40:1e7,z={type:"inertia",velocity:i?t[C]:0,bounceStiffness:T,bounceDamping:I,timeConstant:750,restDelta:1,restSpeed:10,...c,...b};return this.startAxisValueAnimation(C,z)});return Promise.all(y).then(g)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return i.start(F1(t,i,0,n))}stopAnimation(){gi(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){gi(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),i=this.visualElement.getProps(),a=i[n];return a||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){gi(n=>{const{drag:i}=this.getProps();if(!Bu(n,i,this.currentDirection))return;const{projection:a}=this.visualElement,c=this.getAxisMotionValue(n);if(a&&a.layout){const{min:f,max:g}=a.layout.layoutBox[n];c.set(t[n]-_n(f,g,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Za(n)||!i||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};gi(f=>{const g=this.getAxisMotionValue(f);if(g){const v=g.get();a[f]=fT({min:v,max:v},this.constraints[f])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),gi(f=>{if(!Bu(f,t,null))return;const g=this.getAxisMotionValue(f),{min:v,max:y}=this.constraints[f];g.set(_n(v,y,a[f]))})}addListeners(){if(!this.visualElement.current)return;bT.set(this.visualElement,this);const t=this.visualElement.current,n=Ss(t,"pointerdown",v=>{const{drag:y,dragListener:C=!0}=this.getProps();y&&C&&this.start(v)}),i=()=>{const{dragConstraints:v}=this.getProps();Za(v)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,c=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),i();const f=vs(window,"resize",()=>this.scalePositionWithinConstraints()),g=a.addEventListener("didUpdate",({delta:v,hasLayoutChanged:y})=>{this.isDragging&&y&&(gi(C=>{const b=this.getAxisMotionValue(C);b&&(this.originPoint[C]+=v[C].translate,b.set(b.get()+v[C].translate))}),this.visualElement.render())});return()=>{f(),n(),c(),g&&g()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:a=!1,dragConstraints:c=!1,dragElastic:f=J0,dragMomentum:g=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:a,dragConstraints:c,dragElastic:f,dragMomentum:g}}}function Bu(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function ST(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class AT extends ko{constructor(t){super(t),this.removeGroupControls=On,this.removeListeners=On,this.controls=new CT(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||On}unmount(){this.removeGroupControls(),this.removeListeners()}}const Nx=e=>(t,n)=>{e&&cn.update(()=>e(t,n))};class ET extends ko{constructor(){super(...arguments),this.removePointerDownListener=On}onPointerDown(t){this.session=new b_(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:T_(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:a}=this.node.getProps();return{onSessionStart:Nx(t),onStart:Nx(n),onMove:i,onEnd:(c,f)=>{delete this.session,a&&cn.update(()=>a(c,f))}}}mount(){this.removePointerDownListener=Ss(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function NT(){const e=B.useContext(vh);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,a=B.useId();return B.useEffect(()=>i(a),[]),!t&&n?[!1,()=>n&&n(a)]:[!0]}const sd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Tx(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Gl={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(lt.test(e))e=parseFloat(e);else return e;const n=Tx(e,t.target.x),i=Tx(e,t.target.y);return`${n}% ${i}%`}},TT={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,a=Co.parse(e);if(a.length>5)return i;const c=Co.createTransformer(e),f=typeof a[0]!="number"?1:0,g=n.x.scale*t.x,v=n.y.scale*t.y;a[0+f]/=g,a[1+f]/=v;const y=_n(g,v,.5);return typeof a[2+f]=="number"&&(a[2+f]/=y),typeof a[3+f]=="number"&&(a[3+f]/=y),c(a)}};class IT extends la.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:a}=this.props,{projection:c}=t;DE(kT),c&&(n.group&&n.group.add(c),i&&i.register&&a&&i.register(c),c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),sd.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:a,isPresent:c}=this.props,f=i.projection;return f&&(f.isPresent=c,a||t.layoutDependency!==n||n===void 0?f.willUpdate():this.safeToRemove(),t.isPresent!==c&&(c?f.promote():f.relegate()||cn.postRender(()=>{const g=f.getStack();(!g||!g.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),i&&i.deregister&&i.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function I_(e){const[t,n]=NT(),i=B.useContext(A1);return la.createElement(IT,{...e,layoutGroup:i,switchLayoutGroup:B.useContext(Sv),isPresent:t,safeToRemove:n})}const kT={borderRadius:{...Gl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Gl,borderTopRightRadius:Gl,borderBottomLeftRadius:Gl,borderBottomRightRadius:Gl,boxShadow:TT},k_=["TopLeft","TopRight","BottomLeft","BottomRight"],MT=k_.length,Ix=e=>typeof e=="string"?parseFloat(e):e,kx=e=>typeof e=="number"||lt.test(e);function RT(e,t,n,i,a,c){a?(e.opacity=_n(0,n.opacity!==void 0?n.opacity:1,OT(i)),e.opacityExit=_n(t.opacity!==void 0?t.opacity:1,0,LT(i))):c&&(e.opacity=_n(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let f=0;f<MT;f++){const g=`border${k_[f]}Radius`;let v=Mx(t,g),y=Mx(n,g);if(v===void 0&&y===void 0)continue;v||(v=0),y||(y=0),v===0||y===0||kx(v)===kx(y)?(e[g]=Math.max(_n(Ix(v),Ix(y),i),0),(ns.test(y)||ns.test(v))&&(e[g]+="%")):e[g]=y}(t.rotate||n.rotate)&&(e.rotate=_n(t.rotate||0,n.rotate||0,i))}function Mx(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const OT=M_(0,.5,Jv),LT=M_(.5,.95,On);function M_(e,t,n){return i=>i<e?0:i>t?1:n(Fc(e,t,i))}function Rx(e,t){e.min=t.min,e.max=t.max}function fi(e,t){Rx(e.x,t.x),Rx(e.y,t.y)}function Ox(e,t,n,i,a){return e-=t,e=Hd(e,1/n,i),a!==void 0&&(e=Hd(e,1/a,i)),e}function PT(e,t=0,n=1,i=.5,a,c=e,f=e){if(ns.test(t)&&(t=parseFloat(t),t=_n(f.min,f.max,t/100)-f.min),typeof t!="number")return;let g=_n(c.min,c.max,i);e===c&&(g-=t),e.min=Ox(e.min,t,n,g,a),e.max=Ox(e.max,t,n,g,a)}function Lx(e,t,[n,i,a],c,f){PT(e,t[n],t[i],t[a],t.scale,c,f)}const DT=["x","scaleX","originX"],jT=["y","scaleY","originY"];function Px(e,t,n,i){Lx(e.x,t,DT,n?n.x:void 0,i?i.x:void 0),Lx(e.y,t,jT,n?n.y:void 0,i?i.y:void 0)}function Dx(e){return e.translate===0&&e.scale===1}function R_(e){return Dx(e.x)&&Dx(e.y)}function BT(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function O_(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function jx(e){return ni(e.x)/ni(e.y)}class FT{constructor(){this.members=[]}add(t){z1(this.members,t),t.scheduleRender()}remove(t){if(U1(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(a=>t===a);if(n===0)return!1;let i;for(let a=n;a>=0;a--){const c=this.members[a];if(c.isPresent!==!1){i=c;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Bx(e,t,n){let i="";const a=e.x.translate/t.x,c=e.y.translate/t.y;if((a||c)&&(i=`translate3d(${a}px, ${c}px, 0) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:v,rotateX:y,rotateY:C}=n;v&&(i+=`rotate(${v}deg) `),y&&(i+=`rotateX(${y}deg) `),C&&(i+=`rotateY(${C}deg) `)}const f=e.x.scale*t.x,g=e.y.scale*t.y;return(f!==1||g!==1)&&(i+=`scale(${f}, ${g})`),i||"none"}const zT=(e,t)=>e.depth-t.depth;class UT{constructor(){this.children=[],this.isDirty=!1}add(t){z1(this.children,t),this.isDirty=!0}remove(t){U1(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(zT),this.isDirty=!1,this.children.forEach(t)}}function VT(e,t){const n=performance.now(),i=({timestamp:a})=>{const c=a-n;c>=t&&(ks(i),e(c-t))};return cn.read(i,!0),()=>ks(i)}function HT(e){window.MotionDebug&&window.MotionDebug.record(e)}function WT(e){return e instanceof SVGElement&&e.tagName!=="svg"}function ZT(e,t,n){const i=Hr(e)?e:dl(e);return i.start(F1("",i,t,n)),i.animation}const Fx=["","X","Y","Z"],GT={visibility:"hidden"},zx=1e3;let YT=0;const Xo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function L_({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:a}){return class{constructor(f={},g=t==null?void 0:t()){this.id=YT++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Xo.totalNodes=Xo.resolvedTargetDeltas=Xo.recalculatedProjection=0,this.nodes.forEach(KT),this.nodes.forEach(tI),this.nodes.forEach(nI),this.nodes.forEach(QT),HT(Xo)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=f,this.root=g?g.root||g:this,this.path=g?[...g.path,g]:[],this.parent=g,this.depth=g?g.depth+1:0;for(let v=0;v<this.path.length;v++)this.path[v].shouldResetTransform=!0;this.root===this&&(this.nodes=new UT)}addEventListener(f,g){return this.eventHandlers.has(f)||this.eventHandlers.set(f,new V1),this.eventHandlers.get(f).add(g)}notifyListeners(f,...g){const v=this.eventHandlers.get(f);v&&v.notify(...g)}hasListeners(f){return this.eventHandlers.has(f)}mount(f,g=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=WT(f),this.instance=f;const{layoutId:v,layout:y,visualElement:C}=this.options;if(C&&!C.current&&C.mount(f),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),g&&(y||v)&&(this.isLayoutDirty=!0),e){let b;const T=()=>this.root.updateBlockedByResize=!1;e(f,()=>{this.root.updateBlockedByResize=!0,b&&b(),b=VT(T,250),sd.hasAnimatedSinceResize&&(sd.hasAnimatedSinceResize=!1,this.nodes.forEach(Vx))})}v&&this.root.registerSharedNode(v,this),this.options.animate!==!1&&C&&(v||y)&&this.addEventListener("didUpdate",({delta:b,hasLayoutChanged:T,hasRelativeTargetChanged:I,layout:z})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||C.getDefaultTransition()||aI,{onLayoutAnimationStart:j,onLayoutAnimationComplete:F}=C.getProps(),O=!this.targetLayout||!O_(this.targetLayout,z)||I,k=!T&&I;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||k||T&&(O||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(b,k);const W={...B1(R,"layout"),onPlay:j,onComplete:F};(C.shouldReduceMotion||this.options.layoutRoot)&&(W.delay=0,W.type=!1),this.startAnimation(W)}else T||Vx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=z})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const f=this.getStack();f&&f.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ks(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(rI),this.animationId++)}getTransformTemplate(){const{visualElement:f}=this.options;return f&&f.getProps().transformTemplate}willUpdate(f=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let C=0;C<this.path.length;C++){const b=this.path[C];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:g,layout:v}=this.options;if(g===void 0&&!v)return;const y=this.getTransformTemplate();this.prevTransformTemplateValue=y?y(this.latestValues,""):void 0,this.updateSnapshot(),f&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ux);return}this.isUpdating||this.nodes.forEach(JT),this.isUpdating=!1,this.nodes.forEach(eI),this.nodes.forEach(XT),this.nodes.forEach(qT),this.clearAllSnapshots();const g=performance.now();mr.delta=bo(0,1e3/60,g-mr.timestamp),mr.timestamp=g,mr.isProcessing=!0,Af.update.process(mr),Af.preRender.process(mr),Af.render.process(mr),mr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach($T),this.sharedNodes.forEach(iI)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,cn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){cn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let v=0;v<this.path.length;v++)this.path[v].updateScroll();const f=this.layout;this.layout=this.measure(!1),this.layoutCorrected=zn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:g}=this.options;g&&g.notify("LayoutMeasure",this.layout.layoutBox,f?f.layoutBox:void 0)}updateScroll(f="measure"){let g=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===f&&(g=!1),g&&(this.scroll={animationId:this.root.animationId,phase:f,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!a)return;const f=this.isLayoutDirty||this.shouldResetTransform,g=this.projectionDelta&&!R_(this.projectionDelta),v=this.getTransformTemplate(),y=v?v(this.latestValues,""):void 0,C=y!==this.prevTransformTemplateValue;f&&(g||Yo(this.latestValues)||C)&&(a(this.instance,y),this.shouldResetTransform=!1,this.scheduleRender())}measure(f=!0){const g=this.measurePageBox();let v=this.removeElementScroll(g);return f&&(v=this.removeTransform(v)),lI(v),{animationId:this.root.animationId,measuredBox:g,layoutBox:v,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:f}=this.options;if(!f)return zn();const g=f.measureViewportBox(),{scroll:v}=this.root;return v&&($s(g.x,v.offset.x),$s(g.y,v.offset.y)),g}removeElementScroll(f){const g=zn();fi(g,f);for(let v=0;v<this.path.length;v++){const y=this.path[v],{scroll:C,options:b}=y;if(y!==this.root&&C&&b.layoutScroll){if(C.isRoot){fi(g,f);const{scroll:T}=this.root;T&&($s(g.x,-T.offset.x),$s(g.y,-T.offset.y))}$s(g.x,C.offset.x),$s(g.y,C.offset.y)}}return g}applyTransform(f,g=!1){const v=zn();fi(v,f);for(let y=0;y<this.path.length;y++){const C=this.path[y];!g&&C.options.layoutScroll&&C.scroll&&C!==C.root&&Xa(v,{x:-C.scroll.offset.x,y:-C.scroll.offset.y}),Yo(C.latestValues)&&Xa(v,C.latestValues)}return Yo(this.latestValues)&&Xa(v,this.latestValues),v}removeTransform(f){const g=zn();fi(g,f);for(let v=0;v<this.path.length;v++){const y=this.path[v];if(!y.instance||!Yo(y.latestValues))continue;ep(y.latestValues)&&y.updateSnapshot();const C=zn(),b=y.measurePageBox();fi(C,b),Px(g,y.latestValues,y.snapshot?y.snapshot.layoutBox:void 0,C)}return Yo(this.latestValues)&&Px(g,this.latestValues),g}setTargetDelta(f){this.targetDelta=f,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(f){this.options={...this.options,...f,crossfade:f.crossfade!==void 0?f.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==mr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(f=!1){var g;const v=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=v.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=v.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=v.isSharedProjectionDirty);const y=!!this.resumingFrom||this!==v;if(!(f||y&&this.isSharedProjectionDirty||this.isProjectionDirty||!((g=this.parent)===null||g===void 0)&&g.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:b,layoutId:T}=this.options;if(!(!this.layout||!(b||T))){if(this.resolvedRelativeTargetAt=mr.timestamp,!this.targetDelta&&!this.relativeTarget){const I=this.getClosestProjectingParent();I&&I.layout&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=zn(),this.relativeTargetOrigin=zn(),pc(this.relativeTargetOrigin,this.layout.layoutBox,I.layout.layoutBox),fi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=zn(),this.targetWithTransforms=zn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),cT(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):fi(this.target,this.layout.layoutBox),E_(this.target,this.targetDelta)):fi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const I=this.getClosestProjectingParent();I&&!!I.resumingFrom==!!this.resumingFrom&&!I.options.layoutScroll&&I.target&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=zn(),this.relativeTargetOrigin=zn(),pc(this.relativeTargetOrigin,this.target,I.target),fi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Xo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||ep(this.parent.latestValues)||A_(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var f;const g=this.getLead(),v=!!this.resumingFrom||this!==g;let y=!0;if((this.isProjectionDirty||!((f=this.parent)===null||f===void 0)&&f.isProjectionDirty)&&(y=!1),v&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(y=!1),this.resolvedRelativeTargetAt===mr.timestamp&&(y=!1),y)return;const{layout:C,layoutId:b}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(C||b))return;fi(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,I=this.treeScale.y;yT(this.layoutCorrected,this.treeScale,this.path,v),g.layout&&!g.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(g.target=g.layout.layoutBox);const{target:z}=g;if(!z){this.projectionTransform&&(this.projectionDelta=Ya(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ya(),this.projectionDeltaWithTransform=Ya());const R=this.projectionTransform;fc(this.projectionDelta,this.layoutCorrected,z,this.latestValues),this.projectionTransform=Bx(this.projectionDelta,this.treeScale),(this.projectionTransform!==R||this.treeScale.x!==T||this.treeScale.y!==I)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",z)),Xo.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(f=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),f){const g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(f,g=!1){const v=this.snapshot,y=v?v.latestValues:{},C={...this.latestValues},b=Ya();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!g;const T=zn(),I=v?v.source:void 0,z=this.layout?this.layout.source:void 0,R=I!==z,j=this.getStack(),F=!j||j.members.length<=1,O=!!(R&&!F&&this.options.crossfade===!0&&!this.path.some(oI));this.animationProgress=0;let k;this.mixTargetDelta=W=>{const K=W/1e3;Hx(b.x,f.x,K),Hx(b.y,f.y,K),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pc(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sI(this.relativeTarget,this.relativeTargetOrigin,T,K),k&&BT(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=zn()),fi(k,this.relativeTarget)),R&&(this.animationValues=C,RT(C,y,this.latestValues,K,O,F)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(f){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ks(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=cn.update(()=>{sd.hasAnimatedSinceResize=!0,this.currentAnimation=ZT(0,zx,{...f,onUpdate:g=>{this.mixTargetDelta(g),f.onUpdate&&f.onUpdate(g)},onComplete:()=>{f.onComplete&&f.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const f=this.getStack();f&&f.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(zx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const f=this.getLead();let{targetWithTransforms:g,target:v,layout:y,latestValues:C}=f;if(!(!g||!v||!y)){if(this!==f&&this.layout&&y&&P_(this.options.animationType,this.layout.layoutBox,y.layoutBox)){v=this.target||zn();const b=ni(this.layout.layoutBox.x);v.x.min=f.target.x.min,v.x.max=v.x.min+b;const T=ni(this.layout.layoutBox.y);v.y.min=f.target.y.min,v.y.max=v.y.min+T}fi(g,v),Xa(g,C),fc(this.projectionDeltaWithTransform,this.layoutCorrected,g,C)}}registerSharedNode(f,g){this.sharedNodes.has(f)||this.sharedNodes.set(f,new FT),this.sharedNodes.get(f).add(g);const y=g.options.initialPromotionConfig;g.promote({transition:y?y.transition:void 0,preserveFollowOpacity:y&&y.shouldPreserveFollowOpacity?y.shouldPreserveFollowOpacity(g):void 0})}isLead(){const f=this.getStack();return f?f.lead===this:!0}getLead(){var f;const{layoutId:g}=this.options;return g?((f=this.getStack())===null||f===void 0?void 0:f.lead)||this:this}getPrevLead(){var f;const{layoutId:g}=this.options;return g?(f=this.getStack())===null||f===void 0?void 0:f.prevLead:void 0}getStack(){const{layoutId:f}=this.options;if(f)return this.root.sharedNodes.get(f)}promote({needsReset:f,transition:g,preserveFollowOpacity:v}={}){const y=this.getStack();y&&y.promote(this,v),f&&(this.projectionDelta=void 0,this.needsReset=!0),g&&this.setOptions({transition:g})}relegate(){const f=this.getStack();return f?f.relegate(this):!1}resetRotation(){const{visualElement:f}=this.options;if(!f)return;let g=!1;const{latestValues:v}=f;if((v.rotate||v.rotateX||v.rotateY||v.rotateZ)&&(g=!0),!g)return;const y={};for(let C=0;C<Fx.length;C++){const b="rotate"+Fx[C];v[b]&&(y[b]=v[b],f.setStaticValue(b,0))}f.render();for(const C in y)f.setStaticValue(C,y[C]);f.scheduleRender()}getProjectionStyles(f){var g,v;if(!this.instance||this.isSVG)return;if(!this.isVisible)return GT;const y={visibility:""},C=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,y.opacity="",y.pointerEvents=id(f==null?void 0:f.pointerEvents)||"",y.transform=C?C(this.latestValues,""):"none",y;const b=this.getLead();if(!this.projectionDelta||!this.layout||!b.target){const R={};return this.options.layoutId&&(R.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,R.pointerEvents=id(f==null?void 0:f.pointerEvents)||""),this.hasProjected&&!Yo(this.latestValues)&&(R.transform=C?C({},""):"none",this.hasProjected=!1),R}const T=b.animationValues||b.latestValues;this.applyTransformsToTarget(),y.transform=Bx(this.projectionDeltaWithTransform,this.treeScale,T),C&&(y.transform=C(T,y.transform));const{x:I,y:z}=this.projectionDelta;y.transformOrigin=`${I.origin*100}% ${z.origin*100}% 0`,b.animationValues?y.opacity=b===this?(v=(g=T.opacity)!==null&&g!==void 0?g:this.latestValues.opacity)!==null&&v!==void 0?v:1:this.preserveOpacity?this.latestValues.opacity:T.opacityExit:y.opacity=b===this?T.opacity!==void 0?T.opacity:"":T.opacityExit!==void 0?T.opacityExit:0;for(const R in Dd){if(T[R]===void 0)continue;const{correct:j,applyTo:F}=Dd[R],O=y.transform==="none"?T[R]:j(T[R],b);if(F){const k=F.length;for(let W=0;W<k;W++)y[F[W]]=O}else y[R]=O}return this.options.layoutId&&(y.pointerEvents=b===this?id(f==null?void 0:f.pointerEvents)||"":"none"),y}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(f=>{var g;return(g=f.currentAnimation)===null||g===void 0?void 0:g.stop()}),this.root.nodes.forEach(Ux),this.root.sharedNodes.clear()}}}function XT(e){e.updateLayout()}function qT(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:a}=e.layout,{animationType:c}=e.options,f=n.source!==e.layout.source;c==="size"?gi(b=>{const T=f?n.measuredBox[b]:n.layoutBox[b],I=ni(T);T.min=i[b].min,T.max=T.min+I}):P_(c,n.layoutBox,i)&&gi(b=>{const T=f?n.measuredBox[b]:n.layoutBox[b],I=ni(i[b]);T.max=T.min+I,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[b].max=e.relativeTarget[b].min+I)});const g=Ya();fc(g,i,n.layoutBox);const v=Ya();f?fc(v,e.applyTransform(a,!0),n.measuredBox):fc(v,i,n.layoutBox);const y=!R_(g);let C=!1;if(!e.resumeFrom){const b=e.getClosestProjectingParent();if(b&&!b.resumeFrom){const{snapshot:T,layout:I}=b;if(T&&I){const z=zn();pc(z,n.layoutBox,T.layoutBox);const R=zn();pc(R,i,I.layoutBox),O_(z,R)||(C=!0),b.options.layoutRoot&&(e.relativeTarget=R,e.relativeTargetOrigin=z,e.relativeParent=b)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:v,layoutDelta:g,hasLayoutChanged:y,hasRelativeTargetChanged:C})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function KT(e){Xo.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function QT(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function $T(e){e.clearSnapshot()}function Ux(e){e.clearMeasurements()}function JT(e){e.isLayoutDirty=!1}function eI(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Vx(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function tI(e){e.resolveTargetDelta()}function nI(e){e.calcProjection()}function rI(e){e.resetRotation()}function iI(e){e.removeLeadSnapshot()}function Hx(e,t,n){e.translate=_n(t.translate,0,n),e.scale=_n(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Wx(e,t,n,i){e.min=_n(t.min,n.min,i),e.max=_n(t.max,n.max,i)}function sI(e,t,n,i){Wx(e.x,t.x,n.x,i),Wx(e.y,t.y,n.y,i)}function oI(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const aI={duration:.45,ease:[.4,0,.1,1]},Zx=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Gx=Zx("applewebkit/")&&!Zx("chrome/")?Math.round:On;function Yx(e){e.min=Gx(e.min),e.max=Gx(e.max)}function lI(e){Yx(e.x),Yx(e.y)}function P_(e,t,n){return e==="position"||e==="preserve-aspect"&&!$0(jx(t),jx(n),.2)}const cI=L_({attachResizeListener:(e,t)=>vs(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Df={current:void 0},D_=L_({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Df.current){const e=new cI({});e.mount(window),e.setOptions({layoutScroll:!0}),Df.current=e}return Df.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),uI={pan:{Feature:ET},drag:{Feature:AT,ProjectionNode:D_,MeasureLayout:I_}},dI=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function hI(e){const t=dI.exec(e);if(!t)return[,];const[,n,i]=t;return[n,i]}function np(e,t,n=1){const[i,a]=hI(e);if(!i)return;const c=window.getComputedStyle(t).getPropertyValue(i);if(c){const f=c.trim();return y_(f)?parseFloat(f):f}else return Z0(a)?np(a,t,n+1):a}function fI(e,{...t},n){const i=e.current;if(!(i instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(a=>{const c=a.get();if(!Z0(c))return;const f=np(c,i);f&&a.set(f)});for(const a in t){const c=t[a];if(!Z0(c))continue;const f=np(c,i);f&&(t[a]=f,n||(n={}),n[a]===void 0&&(n[a]=c))}return{target:t,transitionEnd:n}}const pI=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),j_=e=>pI.has(e),mI=e=>Object.keys(e).some(j_),Xx=e=>e===wa||e===lt,qx=(e,t)=>parseFloat(e.split(", ")[t]),Kx=(e,t)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const a=i.match(/^matrix3d\((.+)\)$/);if(a)return qx(a[1],t);{const c=i.match(/^matrix\((.+)\)$/);return c?qx(c[1],e):0}},gI=new Set(["x","y","z"]),xI=Qc.filter(e=>!gI.has(e));function yI(e){const t=[];return xI.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const hl={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Kx(4,13),y:Kx(5,14)};hl.translateX=hl.x;hl.translateY=hl.y;const wI=(e,t,n)=>{const i=t.measureViewportBox(),a=t.current,c=getComputedStyle(a),{display:f}=c,g={};f==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(y=>{g[y]=hl[y](i,c)}),t.render();const v=t.measureViewportBox();return n.forEach(y=>{const C=t.getValue(y);C&&C.jump(g[y]),e[y]=hl[y](v,c)}),e},vI=(e,t,n={},i={})=>{t={...t},i={...i};const a=Object.keys(t).filter(j_);let c=[],f=!1;const g=[];if(a.forEach(v=>{const y=e.getValue(v);if(!e.hasValue(v))return;let C=n[v],b=Zl(C);const T=t[v];let I;if(Bd(T)){const z=T.length,R=T[0]===null?1:0;C=T[R],b=Zl(C);for(let j=R;j<z&&T[j]!==null;j++)I?O1(Zl(T[j])===I):I=Zl(T[j])}else I=Zl(T);if(b!==I)if(Xx(b)&&Xx(I)){const z=y.get();typeof z=="string"&&y.set(parseFloat(z)),typeof T=="string"?t[v]=parseFloat(T):Array.isArray(T)&&I===lt&&(t[v]=T.map(parseFloat))}else b!=null&&b.transform&&(I!=null&&I.transform)&&(C===0||T===0)?C===0?y.set(I.transform(C)):t[v]=b.transform(T):(f||(c=yI(e),f=!0),g.push(v),i[v]=i[v]!==void 0?i[v]:t[v],y.jump(T))}),g.length){const v=g.indexOf("height")>=0?window.pageYOffset:null,y=wI(t,e,g);return c.length&&c.forEach(([C,b])=>{e.getValue(C).set(b)}),e.render(),_h&&v!==null&&window.scrollTo({top:v}),{target:y,transitionEnd:i}}else return{target:t,transitionEnd:i}};function _I(e,t,n,i){return mI(t)?vI(e,t,n,i):{target:t,transitionEnd:i}}const bI=(e,t,n,i)=>{const a=fI(e,t,i);return t=a.target,i=a.transitionEnd,_I(e,t,n,i)},rp={current:null},B_={current:!1};function CI(){if(B_.current=!0,!!_h)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>rp.current=e.matches;e.addListener(t),t()}else rp.current=!1}function SI(e,t,n){const{willChange:i}=t;for(const a in t){const c=t[a],f=n[a];if(Hr(c))e.addValue(a,c),Vd(i)&&i.add(a);else if(Hr(f))e.addValue(a,dl(c,{owner:e})),Vd(i)&&i.remove(a);else if(f!==c)if(e.hasValue(a)){const g=e.getValue(a);!g.hasAnimated&&g.set(c)}else{const g=e.getStaticValue(a);e.addValue(a,dl(g!==void 0?g:c,{owner:e}))}}for(const a in n)t[a]===void 0&&e.removeValue(a);return t}const Qx=new WeakMap,F_=Object.keys(Bc),AI=F_.length,$x=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],EI=S1.length;class NI{constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:a,visualState:c},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>cn.render(this.render,!1,!0);const{latestValues:g,renderState:v}=c;this.latestValues=g,this.baseTarget={...g},this.initialValues=n.initial?{...g}:{},this.renderState=v,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=f,this.isControllingVariants=Ch(n),this.isVariantNode=Cv(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:y,...C}=this.scrapeMotionValuesFromProps(n,{});for(const b in C){const T=C[b];g[b]!==void 0&&Hr(T)&&(T.set(g[b],!1),Vd(y)&&y.add(b))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,Qx.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),B_.current||CI(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:rp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Qx.delete(this.current),this.projection&&this.projection.unmount(),ks(this.notifyUpdate),ks(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const i=ya.has(t),a=n.on("change",f=>{this.latestValues[t]=f,this.props.onUpdate&&cn.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),c=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{a(),c()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},i,a,c){let f,g;for(let v=0;v<AI;v++){const y=F_[v],{isEnabled:C,Feature:b,ProjectionNode:T,MeasureLayout:I}=Bc[y];T&&(f=T),C(n)&&(!this.features[y]&&b&&(this.features[y]=new b(this)),I&&(g=I))}if((this.type==="html"||this.type==="svg")&&!this.projection&&f){this.projection=new f(this.latestValues,this.parent&&this.parent.projection);const{layoutId:v,layout:y,drag:C,dragConstraints:b,layoutScroll:T,layoutRoot:I}=n;this.projection.setOptions({layoutId:v,layout:y,alwaysMeasureLayout:!!C||b&&Za(b),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof y=="string"?y:"both",initialPromotionConfig:c,layoutScroll:T,layoutRoot:I})}return g}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):zn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<$x.length;i++){const a=$x[i];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const c=t["on"+a];c&&(this.propEventSubscriptions[a]=this.on(a,c))}this.prevMotionValues=SI(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<EI;i++){const a=S1[i],c=this.props[a];(jc(c)||c===!1)&&(n[a]=c)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=dl(n,{owner:this}),this.addValue(t,i)),i}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:i}=this.props,a=typeof i=="string"||typeof i=="object"?(n=R1(this.props,i))===null||n===void 0?void 0:n[t]:void 0;if(i&&a!==void 0)return a;const c=this.getBaseTargetFromProps(this.props,t);return c!==void 0&&!Hr(c)?c:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new V1),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class z_ extends NI{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...i},{transformValues:a},c){let f=W4(i,t||{},this);if(a&&(n&&(n=a(n)),i&&(i=a(i)),f&&(f=a(f))),c){V4(this,i,f);const g=bI(this,i,f,n);n=g.transitionEnd,i=g.target}return{transition:t,transitionEnd:n,...i}}}function TI(e){return window.getComputedStyle(e)}class II extends z_{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(ya.has(n)){const i=j1(n);return i&&i.default||0}else{const i=TI(t),a=(Nv(n)?i.getPropertyValue(n):i[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:n}){return N_(t,n)}build(t,n,i,a){N1(t,n,i,a.transformTemplate)}scrapeMotionValuesFromProps(t,n){return M1(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Hr(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,i,a){Ov(t,n,i,a)}}class kI extends z_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(ya.has(n)){const i=j1(n);return i&&i.default||0}return n=Lv.has(n)?n:b1(n),t.getAttribute(n)}measureInstanceViewportBox(){return zn()}scrapeMotionValuesFromProps(t,n){return Dv(t,n)}build(t,n,i,a){I1(t,n,i,this.isSVGTag,a.transformTemplate)}renderInstance(t,n,i,a){Pv(t,n,i,a)}mount(t){this.isSVGTag=k1(t.tagName),super.mount(t)}}const MI=(e,t)=>E1(e)?new kI(t,{enableHardwareAcceleration:!1}):new II(t,{enableHardwareAcceleration:!0}),RI={layout:{ProjectionNode:D_,MeasureLayout:I_}},OI={...sT,...AN,...uI,...RI},et=LE((e,t)=>hN(e,t,OI,MI));function U_(){const e=B.useRef(!1);return _1(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function LI(){const e=U_(),[t,n]=B.useState(0),i=B.useCallback(()=>{e.current&&n(t+1)},[t]);return[B.useCallback(()=>cn.postRender(i),[i]),t]}class PI extends B.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function DI({children:e,isPresent:t}){const n=B.useId(),i=B.useRef(null),a=B.useRef({width:0,height:0,top:0,left:0});return B.useInsertionEffect(()=>{const{width:c,height:f,top:g,left:v}=a.current;if(t||!i.current||!c||!f)return;i.current.dataset.motionPopId=n;const y=document.createElement("style");return document.head.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${f}px !important;
            top: ${g}px !important;
            left: ${v}px !important;
          }
        `),()=>{document.head.removeChild(y)}},[t]),B.createElement(PI,{isPresent:t,childRef:i,sizeRef:a},B.cloneElement(e,{ref:i}))}const jf=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:a,presenceAffectsLayout:c,mode:f})=>{const g=jv(jI),v=B.useId(),y=B.useMemo(()=>({id:v,initial:t,isPresent:n,custom:a,onExitComplete:C=>{g.set(C,!0);for(const b of g.values())if(!b)return;i&&i()},register:C=>(g.set(C,!1),()=>g.delete(C))}),c?void 0:[n]);return B.useMemo(()=>{g.forEach((C,b)=>g.set(b,!1))},[n]),B.useEffect(()=>{!n&&!g.size&&i&&i()},[n]),f==="popLayout"&&(e=B.createElement(DI,{isPresent:n},e)),B.createElement(vh.Provider,{value:y},e)};function jI(){return new Map}function BI(e){return B.useEffect(()=>()=>e(),[])}const qo=e=>e.key||"";function FI(e,t){e.forEach(n=>{const i=qo(n);t.set(i,n)})}function zI(e){const t=[];return B.Children.forEach(e,n=>{B.isValidElement(n)&&t.push(n)}),t}const rs=({children:e,custom:t,initial:n=!0,onExitComplete:i,exitBeforeEnter:a,presenceAffectsLayout:c=!0,mode:f="sync"})=>{const g=B.useContext(A1).forceRender||LI()[0],v=U_(),y=zI(e);let C=y;const b=B.useRef(new Map).current,T=B.useRef(C),I=B.useRef(new Map).current,z=B.useRef(!0);if(_1(()=>{z.current=!1,FI(y,I),T.current=C}),BI(()=>{z.current=!0,I.clear(),b.clear()}),z.current)return B.createElement(B.Fragment,null,C.map(O=>B.createElement(jf,{key:qo(O),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:c,mode:f},O)));C=[...C];const R=T.current.map(qo),j=y.map(qo),F=R.length;for(let O=0;O<F;O++){const k=R[O];j.indexOf(k)===-1&&!b.has(k)&&b.set(k,void 0)}return f==="wait"&&b.size&&(C=[]),b.forEach((O,k)=>{if(j.indexOf(k)!==-1)return;const W=I.get(k);if(!W)return;const K=R.indexOf(k);let Y=O;if(!Y){const H=()=>{b.delete(k);const Q=Array.from(I.keys()).filter(M=>!j.includes(M));if(Q.forEach(M=>I.delete(M)),T.current=y.filter(M=>{const q=qo(M);return q===k||Q.includes(q)}),!b.size){if(v.current===!1)return;g(),i&&i()}};Y=B.createElement(jf,{key:qo(W),isPresent:!1,onExitComplete:H,custom:t,presenceAffectsLayout:c,mode:f},W),b.set(k,Y)}C.splice(K,0,Y)}),C=C.map(O=>{const k=O.key;return b.has(k)?O:B.createElement(jf,{key:qo(O),isPresent:!0,presenceAffectsLayout:c,mode:f},O)}),B.createElement(B.Fragment,null,b.size?C:C.map(O=>B.cloneElement(O)))};var UI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const VI=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nt=(e,t)=>{const n=B.forwardRef(({color:i="currentColor",size:a=24,strokeWidth:c=2,absoluteStrokeWidth:f,children:g,...v},y)=>B.createElement("svg",{ref:y,...UI,width:a,height:a,stroke:i,strokeWidth:f?Number(c)*24/Number(a):c,className:`lucide lucide-${VI(e)}`,...v},[...t.map(([C,b])=>B.createElement(C,b)),...(Array.isArray(g)?g:[g])||[]]));return n.displayName=`${e}`,n},V_=nt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),H_=nt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ms=nt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Wd=nt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),W_=nt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),zc=nt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Z_=nt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),HI=nt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Nh=nt("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),od=nt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),G_=nt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),WI=nt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),xo=nt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Fu=nt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ZI=nt("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]),GI=nt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),YI=nt("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),XI=nt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),qI=nt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),KI=nt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Y_=nt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),QI=nt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),$I=nt("Keyboard",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2",key:"15u882"}],["path",{d:"M6 8h.001",key:"1ej0i3"}],["path",{d:"M10 8h.001",key:"1x2st2"}],["path",{d:"M14 8h.001",key:"1vkmyp"}],["path",{d:"M18 8h.001",key:"kfsenl"}],["path",{d:"M8 12h.001",key:"1sjpby"}],["path",{d:"M12 12h.001",key:"al75ts"}],["path",{d:"M16 12h.001",key:"931bgk"}],["path",{d:"M7 16h10",key:"wp8him"}]]),X_=nt("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),pn=nt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),q_=nt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),JI=nt("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),K_=nt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Rs=nt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),yo=nt("MapPinned",[["path",{d:"M18 8c0 4.5-6 9-6 9s-6-4.5-6-9a6 6 0 0 1 12 0",key:"yrbn30"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.835 14H5a1 1 0 0 0-.9.7l-2 6c-.1.1-.1.2-.1.3 0 .6.4 1 1 1h18c.6 0 1-.4 1-1 0-.1 0-.2-.1-.3l-2-6a1 1 0 0 0-.9-.7h-3.835",key:"112zkj"}]]),Q_=nt("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]),e8=nt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Uc=nt("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),t8=nt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),$_=nt("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),Jx=nt("PackageSearch",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]),Os=nt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Zd=nt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),n8=nt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),mc=nt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ai=nt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),ey=nt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),r8=nt("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]),Ls=nt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),i8=nt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),s8=nt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),o8=nt("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),a8=nt("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),J_=nt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),eb=nt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Gd=nt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Yd=nt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),H1=nt("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]),ip=nt("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),va=nt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),tb=nt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),l8=nt("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),_a=nt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),nb=nt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),rb="Admin",ib="Manager",sb="Dispatcher",ob="Warehouse",ab="Driver",lb="Support",cb="Finance",ub="Viewer",db="Recipient",c8=[rb,ib,sb,ob,ab,lb,cb,ub,db],Gs="status-options:read",Li="stats:read",Pr="shipments:read",ps="shipment:read",qa="shipments:assign",Wo="label:read",Ko="awb:update",yi="logs:read:self",no="logs:read:all",xi="notifications:read",qr="chat:read",ms="chat:write",u8="drivers:sync",Ma="postis:sync",wo="users:read",W1="users:write",d8={[rb]:new Set([Gs,Li,Pr,ps,qa,Wo,Ko,no,yi,xi,qr,ms,u8,Ma,wo,W1]),[ib]:new Set([Gs,Li,Pr,ps,qa,Wo,Ko,no,yi,xi,qr,ms,wo,Ma]),[sb]:new Set([Gs,Li,Pr,ps,qa,Wo,Ko,no,yi,xi,qr,ms,wo,Ma]),[ob]:new Set([Gs,Li,Pr,ps,qa,Wo,Ko,yi,xi,qr,ms,Ma]),[ab]:new Set([Gs,Li,Pr,ps,Wo,Ko,yi,xi,qr,ms,Ma]),[lb]:new Set([Gs,Li,Pr,ps,Wo,no,yi,xi,qr,ms]),[cb]:new Set([Gs,Li,Pr,ps,no,yi,xi,qr,ms]),[ub]:new Set([Gs,Li,Pr,ps,Wo,yi,xi,qr,ms]),[db]:new Set([Pr,ps,xi,qr,ms])},h8=e=>{const t=String(e||"").trim();if(!t)return t;const n=t.toUpperCase();for(const i of c8)if(i.toUpperCase()===n)return i;return t},sp=e=>{const t=h8(e),n=d8[t];return n?Array.from(n).sort():[]},ty=e=>e?e instanceof Set?e:Array.isArray(e)?new Set(e.filter(Boolean)):new Set:new Set,hb=e=>{const t=ty(e==null?void 0:e.permissions);if(t.size>0)return t.has(no)&&t.add(yi),t;const n=ty(sp(e==null?void 0:e.role));return n.has(no)&&n.add(yi),n},Tn=(e,t)=>t?hb(e).has(t):!0,f8=(e,t=[])=>{const n=Array.isArray(t)?t.filter(Boolean):[];if(n.length===0)return!0;const i=hb(e);return n.every(a=>i.has(a))};function fb(e,t){return function(){return e.apply(t,arguments)}}const{toString:p8}=Object.prototype,{getPrototypeOf:Z1}=Object,{iterator:Th,toStringTag:pb}=Symbol,Ih=(e=>t=>{const n=p8.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Vi=e=>(e=e.toLowerCase(),t=>Ih(t)===e),kh=e=>t=>typeof t===e,{isArray:wl}=Array,fl=kh("undefined");function tu(e){return e!==null&&!fl(e)&&e.constructor!==null&&!fl(e.constructor)&&Ur(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const mb=Vi("ArrayBuffer");function m8(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&mb(e.buffer),t}const g8=kh("string"),Ur=kh("function"),gb=kh("number"),nu=e=>e!==null&&typeof e=="object",x8=e=>e===!0||e===!1,ad=e=>{if(Ih(e)!=="object")return!1;const t=Z1(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(pb in e)&&!(Th in e)},y8=e=>{if(!nu(e)||tu(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},w8=Vi("Date"),v8=Vi("File"),_8=Vi("Blob"),b8=Vi("FileList"),C8=e=>nu(e)&&Ur(e.pipe),S8=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ur(e.append)&&((t=Ih(e))==="formdata"||t==="object"&&Ur(e.toString)&&e.toString()==="[object FormData]"))},A8=Vi("URLSearchParams"),[E8,N8,T8,I8]=["ReadableStream","Request","Response","Headers"].map(Vi),k8=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ru(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,a;if(typeof e!="object"&&(e=[e]),wl(e))for(i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else{if(tu(e))return;const c=n?Object.getOwnPropertyNames(e):Object.keys(e),f=c.length;let g;for(i=0;i<f;i++)g=c[i],t.call(null,e[g],g,e)}}function xb(e,t){if(tu(e))return null;t=t.toLowerCase();const n=Object.keys(e);let i=n.length,a;for(;i-- >0;)if(a=n[i],t===a.toLowerCase())return a;return null}const ta=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,yb=e=>!fl(e)&&e!==ta;function op(){const{caseless:e,skipUndefined:t}=yb(this)&&this||{},n={},i=(a,c)=>{if(c==="__proto__"||c==="constructor"||c==="prototype")return;const f=e&&xb(n,c)||c;ad(n[f])&&ad(a)?n[f]=op(n[f],a):ad(a)?n[f]=op({},a):wl(a)?n[f]=a.slice():(!t||!fl(a))&&(n[f]=a)};for(let a=0,c=arguments.length;a<c;a++)arguments[a]&&ru(arguments[a],i);return n}const M8=(e,t,n,{allOwnKeys:i}={})=>(ru(t,(a,c)=>{n&&Ur(a)?Object.defineProperty(e,c,{value:fb(a,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,c,{value:a,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:i}),e),R8=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),O8=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},L8=(e,t,n,i)=>{let a,c,f;const g={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),c=a.length;c-- >0;)f=a[c],(!i||i(f,e,t))&&!g[f]&&(t[f]=e[f],g[f]=!0);e=n!==!1&&Z1(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},P8=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},D8=e=>{if(!e)return null;if(wl(e))return e;let t=e.length;if(!gb(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},j8=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Z1(Uint8Array)),B8=(e,t)=>{const i=(e&&e[Th]).call(e);let a;for(;(a=i.next())&&!a.done;){const c=a.value;t.call(e,c[0],c[1])}},F8=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},z8=Vi("HTMLFormElement"),U8=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,a){return i.toUpperCase()+a}),ny=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),V8=Vi("RegExp"),wb=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};ru(n,(a,c)=>{let f;(f=t(a,c,e))!==!1&&(i[c]=f||a)}),Object.defineProperties(e,i)},H8=e=>{wb(e,(t,n)=>{if(Ur(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(Ur(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},W8=(e,t)=>{const n={},i=a=>{a.forEach(c=>{n[c]=!0})};return wl(e)?i(e):i(String(e).split(t)),n},Z8=()=>{},G8=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Y8(e){return!!(e&&Ur(e.append)&&e[pb]==="FormData"&&e[Th])}const X8=e=>{const t=new Array(10),n=(i,a)=>{if(nu(i)){if(t.indexOf(i)>=0)return;if(tu(i))return i;if(!("toJSON"in i)){t[a]=i;const c=wl(i)?[]:{};return ru(i,(f,g)=>{const v=n(f,a+1);!fl(v)&&(c[g]=v)}),t[a]=void 0,c}}return i};return n(e,0)},q8=Vi("AsyncFunction"),K8=e=>e&&(nu(e)||Ur(e))&&Ur(e.then)&&Ur(e.catch),vb=((e,t)=>e?setImmediate:t?((n,i)=>(ta.addEventListener("message",({source:a,data:c})=>{a===ta&&c===n&&i.length&&i.shift()()},!1),a=>{i.push(a),ta.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ur(ta.postMessage)),Q8=typeof queueMicrotask<"u"?queueMicrotask.bind(ta):typeof process<"u"&&process.nextTick||vb,$8=e=>e!=null&&Ur(e[Th]),xe={isArray:wl,isArrayBuffer:mb,isBuffer:tu,isFormData:S8,isArrayBufferView:m8,isString:g8,isNumber:gb,isBoolean:x8,isObject:nu,isPlainObject:ad,isEmptyObject:y8,isReadableStream:E8,isRequest:N8,isResponse:T8,isHeaders:I8,isUndefined:fl,isDate:w8,isFile:v8,isBlob:_8,isRegExp:V8,isFunction:Ur,isStream:C8,isURLSearchParams:A8,isTypedArray:j8,isFileList:b8,forEach:ru,merge:op,extend:M8,trim:k8,stripBOM:R8,inherits:O8,toFlatObject:L8,kindOf:Ih,kindOfTest:Vi,endsWith:P8,toArray:D8,forEachEntry:B8,matchAll:F8,isHTMLForm:z8,hasOwnProperty:ny,hasOwnProp:ny,reduceDescriptors:wb,freezeMethods:H8,toObjectSet:W8,toCamelCase:U8,noop:Z8,toFiniteNumber:G8,findKey:xb,global:ta,isContextDefined:yb,isSpecCompliantForm:Y8,toJSONObject:X8,isAsyncFn:q8,isThenable:K8,setImmediate:vb,asap:Q8,isIterable:$8};let ht=class _b extends Error{static from(t,n,i,a,c,f){const g=new _b(t.message,n||t.code,i,a,c);return g.cause=t,g.name=t.name,f&&Object.assign(g,f),g}constructor(t,n,i,a,c){super(t),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),i&&(this.config=i),a&&(this.request=a),c&&(this.response=c,this.status=c.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:xe.toJSONObject(this.config),code:this.code,status:this.status}}};ht.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";ht.ERR_BAD_OPTION="ERR_BAD_OPTION";ht.ECONNABORTED="ECONNABORTED";ht.ETIMEDOUT="ETIMEDOUT";ht.ERR_NETWORK="ERR_NETWORK";ht.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";ht.ERR_DEPRECATED="ERR_DEPRECATED";ht.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";ht.ERR_BAD_REQUEST="ERR_BAD_REQUEST";ht.ERR_CANCELED="ERR_CANCELED";ht.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";ht.ERR_INVALID_URL="ERR_INVALID_URL";const J8=null;function ap(e){return xe.isPlainObject(e)||xe.isArray(e)}function bb(e){return xe.endsWith(e,"[]")?e.slice(0,-2):e}function ry(e,t,n){return e?e.concat(t).map(function(a,c){return a=bb(a),!n&&c?"["+a+"]":a}).join(n?".":""):t}function e5(e){return xe.isArray(e)&&!e.some(ap)}const t5=xe.toFlatObject(xe,{},null,function(t){return/^is[A-Z]/.test(t)});function Mh(e,t,n){if(!xe.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=xe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,j){return!xe.isUndefined(j[R])});const i=n.metaTokens,a=n.visitor||C,c=n.dots,f=n.indexes,v=(n.Blob||typeof Blob<"u"&&Blob)&&xe.isSpecCompliantForm(t);if(!xe.isFunction(a))throw new TypeError("visitor must be a function");function y(z){if(z===null)return"";if(xe.isDate(z))return z.toISOString();if(xe.isBoolean(z))return z.toString();if(!v&&xe.isBlob(z))throw new ht("Blob is not supported. Use a Buffer instead.");return xe.isArrayBuffer(z)||xe.isTypedArray(z)?v&&typeof Blob=="function"?new Blob([z]):Buffer.from(z):z}function C(z,R,j){let F=z;if(z&&!j&&typeof z=="object"){if(xe.endsWith(R,"{}"))R=i?R:R.slice(0,-2),z=JSON.stringify(z);else if(xe.isArray(z)&&e5(z)||(xe.isFileList(z)||xe.endsWith(R,"[]"))&&(F=xe.toArray(z)))return R=bb(R),F.forEach(function(k,W){!(xe.isUndefined(k)||k===null)&&t.append(f===!0?ry([R],W,c):f===null?R:R+"[]",y(k))}),!1}return ap(z)?!0:(t.append(ry(j,R,c),y(z)),!1)}const b=[],T=Object.assign(t5,{defaultVisitor:C,convertValue:y,isVisitable:ap});function I(z,R){if(!xe.isUndefined(z)){if(b.indexOf(z)!==-1)throw Error("Circular reference detected in "+R.join("."));b.push(z),xe.forEach(z,function(F,O){(!(xe.isUndefined(F)||F===null)&&a.call(t,F,xe.isString(O)?O.trim():O,R,T))===!0&&I(F,R?R.concat(O):[O])}),b.pop()}}if(!xe.isObject(e))throw new TypeError("data must be an object");return I(e),t}function iy(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function G1(e,t){this._pairs=[],e&&Mh(e,this,t)}const Cb=G1.prototype;Cb.append=function(t,n){this._pairs.push([t,n])};Cb.toString=function(t){const n=t?function(i){return t.call(this,i,iy)}:iy;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function n5(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Sb(e,t,n){if(!t)return e;const i=n&&n.encode||n5,a=xe.isFunction(n)?{serialize:n}:n,c=a&&a.serialize;let f;if(c?f=c(t,a):f=xe.isURLSearchParams(t)?t.toString():new G1(t,a).toString(i),f){const g=e.indexOf("#");g!==-1&&(e=e.slice(0,g)),e+=(e.indexOf("?")===-1?"?":"&")+f}return e}class sy{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){xe.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Y1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},r5=typeof URLSearchParams<"u"?URLSearchParams:G1,i5=typeof FormData<"u"?FormData:null,s5=typeof Blob<"u"?Blob:null,o5={isBrowser:!0,classes:{URLSearchParams:r5,FormData:i5,Blob:s5},protocols:["http","https","file","blob","url","data"]},X1=typeof window<"u"&&typeof document<"u",lp=typeof navigator=="object"&&navigator||void 0,a5=X1&&(!lp||["ReactNative","NativeScript","NS"].indexOf(lp.product)<0),l5=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",c5=X1&&window.location.href||"http://localhost",u5=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:X1,hasStandardBrowserEnv:a5,hasStandardBrowserWebWorkerEnv:l5,navigator:lp,origin:c5},Symbol.toStringTag,{value:"Module"})),xr={...u5,...o5};function d5(e,t){return Mh(e,new xr.classes.URLSearchParams,{visitor:function(n,i,a,c){return xr.isNode&&xe.isBuffer(n)?(this.append(i,n.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)},...t})}function h5(e){return xe.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function f5(e){const t={},n=Object.keys(e);let i;const a=n.length;let c;for(i=0;i<a;i++)c=n[i],t[c]=e[c];return t}function Ab(e){function t(n,i,a,c){let f=n[c++];if(f==="__proto__")return!0;const g=Number.isFinite(+f),v=c>=n.length;return f=!f&&xe.isArray(a)?a.length:f,v?(xe.hasOwnProp(a,f)?a[f]=[a[f],i]:a[f]=i,!g):((!a[f]||!xe.isObject(a[f]))&&(a[f]=[]),t(n,i,a[f],c)&&xe.isArray(a[f])&&(a[f]=f5(a[f])),!g)}if(xe.isFormData(e)&&xe.isFunction(e.entries)){const n={};return xe.forEachEntry(e,(i,a)=>{t(h5(i),a,n,0)}),n}return null}function p5(e,t,n){if(xe.isString(e))try{return(t||JSON.parse)(e),xe.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const iu={transitional:Y1,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const i=n.getContentType()||"",a=i.indexOf("application/json")>-1,c=xe.isObject(t);if(c&&xe.isHTMLForm(t)&&(t=new FormData(t)),xe.isFormData(t))return a?JSON.stringify(Ab(t)):t;if(xe.isArrayBuffer(t)||xe.isBuffer(t)||xe.isStream(t)||xe.isFile(t)||xe.isBlob(t)||xe.isReadableStream(t))return t;if(xe.isArrayBufferView(t))return t.buffer;if(xe.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let g;if(c){if(i.indexOf("application/x-www-form-urlencoded")>-1)return d5(t,this.formSerializer).toString();if((g=xe.isFileList(t))||i.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return Mh(g?{"files[]":t}:t,v&&new v,this.formSerializer)}}return c||a?(n.setContentType("application/json",!1),p5(t)):t}],transformResponse:[function(t){const n=this.transitional||iu.transitional,i=n&&n.forcedJSONParsing,a=this.responseType==="json";if(xe.isResponse(t)||xe.isReadableStream(t))return t;if(t&&xe.isString(t)&&(i&&!this.responseType||a)){const f=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(g){if(f)throw g.name==="SyntaxError"?ht.from(g,ht.ERR_BAD_RESPONSE,this,null,this.response):g}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xr.classes.FormData,Blob:xr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};xe.forEach(["delete","get","head","post","put","patch"],e=>{iu.headers[e]={}});const m5=xe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),g5=e=>{const t={};let n,i,a;return e&&e.split(`
`).forEach(function(f){a=f.indexOf(":"),n=f.substring(0,a).trim().toLowerCase(),i=f.substring(a+1).trim(),!(!n||t[n]&&m5[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},oy=Symbol("internals");function Yl(e){return e&&String(e).trim().toLowerCase()}function ld(e){return e===!1||e==null?e:xe.isArray(e)?e.map(ld):String(e)}function x5(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const y5=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Bf(e,t,n,i,a){if(xe.isFunction(i))return i.call(this,t,n);if(a&&(t=n),!!xe.isString(t)){if(xe.isString(i))return t.indexOf(i)!==-1;if(xe.isRegExp(i))return i.test(t)}}function w5(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function v5(e,t){const n=xe.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(a,c,f){return this[i].call(this,t,a,c,f)},configurable:!0})})}let Vr=class{constructor(t){t&&this.set(t)}set(t,n,i){const a=this;function c(g,v,y){const C=Yl(v);if(!C)throw new Error("header name must be a non-empty string");const b=xe.findKey(a,C);(!b||a[b]===void 0||y===!0||y===void 0&&a[b]!==!1)&&(a[b||v]=ld(g))}const f=(g,v)=>xe.forEach(g,(y,C)=>c(y,C,v));if(xe.isPlainObject(t)||t instanceof this.constructor)f(t,n);else if(xe.isString(t)&&(t=t.trim())&&!y5(t))f(g5(t),n);else if(xe.isObject(t)&&xe.isIterable(t)){let g={},v,y;for(const C of t){if(!xe.isArray(C))throw TypeError("Object iterator must return a key-value pair");g[y=C[0]]=(v=g[y])?xe.isArray(v)?[...v,C[1]]:[v,C[1]]:C[1]}f(g,n)}else t!=null&&c(n,t,i);return this}get(t,n){if(t=Yl(t),t){const i=xe.findKey(this,t);if(i){const a=this[i];if(!n)return a;if(n===!0)return x5(a);if(xe.isFunction(n))return n.call(this,a,i);if(xe.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Yl(t),t){const i=xe.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||Bf(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let a=!1;function c(f){if(f=Yl(f),f){const g=xe.findKey(i,f);g&&(!n||Bf(i,i[g],g,n))&&(delete i[g],a=!0)}}return xe.isArray(t)?t.forEach(c):c(t),a}clear(t){const n=Object.keys(this);let i=n.length,a=!1;for(;i--;){const c=n[i];(!t||Bf(this,this[c],c,t,!0))&&(delete this[c],a=!0)}return a}normalize(t){const n=this,i={};return xe.forEach(this,(a,c)=>{const f=xe.findKey(i,c);if(f){n[f]=ld(a),delete n[c];return}const g=t?w5(c):String(c).trim();g!==c&&delete n[c],n[g]=ld(a),i[g]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return xe.forEach(this,(i,a)=>{i!=null&&i!==!1&&(n[a]=t&&xe.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(a=>i.set(a)),i}static accessor(t){const i=(this[oy]=this[oy]={accessors:{}}).accessors,a=this.prototype;function c(f){const g=Yl(f);i[g]||(v5(a,f),i[g]=!0)}return xe.isArray(t)?t.forEach(c):c(t),this}};Vr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);xe.reduceDescriptors(Vr.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});xe.freezeMethods(Vr);function Ff(e,t){const n=this||iu,i=t||n,a=Vr.from(i.headers);let c=i.data;return xe.forEach(e,function(g){c=g.call(n,c,a.normalize(),t?t.status:void 0)}),a.normalize(),c}function Eb(e){return!!(e&&e.__CANCEL__)}let su=class extends ht{constructor(t,n,i){super(t??"canceled",ht.ERR_CANCELED,n,i),this.name="CanceledError",this.__CANCEL__=!0}};function Nb(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new ht("Request failed with status code "+n.status,[ht.ERR_BAD_REQUEST,ht.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function _5(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function b5(e,t){e=e||10;const n=new Array(e),i=new Array(e);let a=0,c=0,f;return t=t!==void 0?t:1e3,function(v){const y=Date.now(),C=i[c];f||(f=y),n[a]=v,i[a]=y;let b=c,T=0;for(;b!==a;)T+=n[b++],b=b%e;if(a=(a+1)%e,a===c&&(c=(c+1)%e),y-f<t)return;const I=C&&y-C;return I?Math.round(T*1e3/I):void 0}}function C5(e,t){let n=0,i=1e3/t,a,c;const f=(y,C=Date.now())=>{n=C,a=null,c&&(clearTimeout(c),c=null),e(...y)};return[(...y)=>{const C=Date.now(),b=C-n;b>=i?f(y,C):(a=y,c||(c=setTimeout(()=>{c=null,f(a)},i-b)))},()=>a&&f(a)]}const Xd=(e,t,n=3)=>{let i=0;const a=b5(50,250);return C5(c=>{const f=c.loaded,g=c.lengthComputable?c.total:void 0,v=f-i,y=a(v),C=f<=g;i=f;const b={loaded:f,total:g,progress:g?f/g:void 0,bytes:v,rate:y||void 0,estimated:y&&g&&C?(g-f)/y:void 0,event:c,lengthComputable:g!=null,[t?"download":"upload"]:!0};e(b)},n)},ay=(e,t)=>{const n=e!=null;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},ly=e=>(...t)=>xe.asap(()=>e(...t)),S5=xr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,xr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(xr.origin),xr.navigator&&/(msie|trident)/i.test(xr.navigator.userAgent)):()=>!0,A5=xr.hasStandardBrowserEnv?{write(e,t,n,i,a,c,f){if(typeof document>"u")return;const g=[`${e}=${encodeURIComponent(t)}`];xe.isNumber(n)&&g.push(`expires=${new Date(n).toUTCString()}`),xe.isString(i)&&g.push(`path=${i}`),xe.isString(a)&&g.push(`domain=${a}`),c===!0&&g.push("secure"),xe.isString(f)&&g.push(`SameSite=${f}`),document.cookie=g.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function E5(e){return typeof e!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function N5(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Tb(e,t,n){let i=!E5(t);return e&&(i||n==!1)?N5(e,t):t}const cy=e=>e instanceof Vr?{...e}:e;function pa(e,t){t=t||{};const n={};function i(y,C,b,T){return xe.isPlainObject(y)&&xe.isPlainObject(C)?xe.merge.call({caseless:T},y,C):xe.isPlainObject(C)?xe.merge({},C):xe.isArray(C)?C.slice():C}function a(y,C,b,T){if(xe.isUndefined(C)){if(!xe.isUndefined(y))return i(void 0,y,b,T)}else return i(y,C,b,T)}function c(y,C){if(!xe.isUndefined(C))return i(void 0,C)}function f(y,C){if(xe.isUndefined(C)){if(!xe.isUndefined(y))return i(void 0,y)}else return i(void 0,C)}function g(y,C,b){if(b in t)return i(y,C);if(b in e)return i(void 0,y)}const v={url:c,method:c,data:c,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:g,headers:(y,C,b)=>a(cy(y),cy(C),b,!0)};return xe.forEach(Object.keys({...e,...t}),function(C){if(C==="__proto__"||C==="constructor"||C==="prototype")return;const b=xe.hasOwnProp(v,C)?v[C]:a,T=b(e[C],t[C],C);xe.isUndefined(T)&&b!==g||(n[C]=T)}),n}const Ib=e=>{const t=pa({},e);let{data:n,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:c,headers:f,auth:g}=t;if(t.headers=f=Vr.from(f),t.url=Sb(Tb(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),g&&f.set("Authorization","Basic "+btoa((g.username||"")+":"+(g.password?unescape(encodeURIComponent(g.password)):""))),xe.isFormData(n)){if(xr.hasStandardBrowserEnv||xr.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(xe.isFunction(n.getHeaders)){const v=n.getHeaders(),y=["content-type","content-length"];Object.entries(v).forEach(([C,b])=>{y.includes(C.toLowerCase())&&f.set(C,b)})}}if(xr.hasStandardBrowserEnv&&(i&&xe.isFunction(i)&&(i=i(t)),i||i!==!1&&S5(t.url))){const v=a&&c&&A5.read(c);v&&f.set(a,v)}return t},T5=typeof XMLHttpRequest<"u",I5=T5&&function(e){return new Promise(function(n,i){const a=Ib(e);let c=a.data;const f=Vr.from(a.headers).normalize();let{responseType:g,onUploadProgress:v,onDownloadProgress:y}=a,C,b,T,I,z;function R(){I&&I(),z&&z(),a.cancelToken&&a.cancelToken.unsubscribe(C),a.signal&&a.signal.removeEventListener("abort",C)}let j=new XMLHttpRequest;j.open(a.method.toUpperCase(),a.url,!0),j.timeout=a.timeout;function F(){if(!j)return;const k=Vr.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),K={data:!g||g==="text"||g==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:k,config:e,request:j};Nb(function(H){n(H),R()},function(H){i(H),R()},K),j=null}"onloadend"in j?j.onloadend=F:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(F)},j.onabort=function(){j&&(i(new ht("Request aborted",ht.ECONNABORTED,e,j)),j=null)},j.onerror=function(W){const K=W&&W.message?W.message:"Network Error",Y=new ht(K,ht.ERR_NETWORK,e,j);Y.event=W||null,i(Y),j=null},j.ontimeout=function(){let W=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const K=a.transitional||Y1;a.timeoutErrorMessage&&(W=a.timeoutErrorMessage),i(new ht(W,K.clarifyTimeoutError?ht.ETIMEDOUT:ht.ECONNABORTED,e,j)),j=null},c===void 0&&f.setContentType(null),"setRequestHeader"in j&&xe.forEach(f.toJSON(),function(W,K){j.setRequestHeader(K,W)}),xe.isUndefined(a.withCredentials)||(j.withCredentials=!!a.withCredentials),g&&g!=="json"&&(j.responseType=a.responseType),y&&([T,z]=Xd(y,!0),j.addEventListener("progress",T)),v&&j.upload&&([b,I]=Xd(v),j.upload.addEventListener("progress",b),j.upload.addEventListener("loadend",I)),(a.cancelToken||a.signal)&&(C=k=>{j&&(i(!k||k.type?new su(null,e,j):k),j.abort(),j=null)},a.cancelToken&&a.cancelToken.subscribe(C),a.signal&&(a.signal.aborted?C():a.signal.addEventListener("abort",C)));const O=_5(a.url);if(O&&xr.protocols.indexOf(O)===-1){i(new ht("Unsupported protocol "+O+":",ht.ERR_BAD_REQUEST,e));return}j.send(c||null)})},k5=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let i=new AbortController,a;const c=function(y){if(!a){a=!0,g();const C=y instanceof Error?y:this.reason;i.abort(C instanceof ht?C:new su(C instanceof Error?C.message:C))}};let f=t&&setTimeout(()=>{f=null,c(new ht(`timeout of ${t}ms exceeded`,ht.ETIMEDOUT))},t);const g=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(y=>{y.unsubscribe?y.unsubscribe(c):y.removeEventListener("abort",c)}),e=null)};e.forEach(y=>y.addEventListener("abort",c));const{signal:v}=i;return v.unsubscribe=()=>xe.asap(g),v}},M5=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let i=0,a;for(;i<n;)a=i+t,yield e.slice(i,a),i=a},R5=async function*(e,t){for await(const n of O5(e))yield*M5(n,t)},O5=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:i}=await t.read();if(n)break;yield i}}finally{await t.cancel()}},uy=(e,t,n,i)=>{const a=R5(e,t);let c=0,f,g=v=>{f||(f=!0,i&&i(v))};return new ReadableStream({async pull(v){try{const{done:y,value:C}=await a.next();if(y){g(),v.close();return}let b=C.byteLength;if(n){let T=c+=b;n(T)}v.enqueue(new Uint8Array(C))}catch(y){throw g(y),y}},cancel(v){return g(v),a.return()}},{highWaterMark:2})},dy=64*1024,{isFunction:zu}=xe,L5=(({Request:e,Response:t})=>({Request:e,Response:t}))(xe.global),{ReadableStream:hy,TextEncoder:fy}=xe.global,py=(e,...t)=>{try{return!!e(...t)}catch{return!1}},P5=e=>{e=xe.merge.call({skipUndefined:!0},L5,e);const{fetch:t,Request:n,Response:i}=e,a=t?zu(t):typeof fetch=="function",c=zu(n),f=zu(i);if(!a)return!1;const g=a&&zu(hy),v=a&&(typeof fy=="function"?(z=>R=>z.encode(R))(new fy):async z=>new Uint8Array(await new n(z).arrayBuffer())),y=c&&g&&py(()=>{let z=!1;const R=new n(xr.origin,{body:new hy,method:"POST",get duplex(){return z=!0,"half"}}).headers.has("Content-Type");return z&&!R}),C=f&&g&&py(()=>xe.isReadableStream(new i("").body)),b={stream:C&&(z=>z.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(z=>{!b[z]&&(b[z]=(R,j)=>{let F=R&&R[z];if(F)return F.call(R);throw new ht(`Response type '${z}' is not supported`,ht.ERR_NOT_SUPPORT,j)})});const T=async z=>{if(z==null)return 0;if(xe.isBlob(z))return z.size;if(xe.isSpecCompliantForm(z))return(await new n(xr.origin,{method:"POST",body:z}).arrayBuffer()).byteLength;if(xe.isArrayBufferView(z)||xe.isArrayBuffer(z))return z.byteLength;if(xe.isURLSearchParams(z)&&(z=z+""),xe.isString(z))return(await v(z)).byteLength},I=async(z,R)=>{const j=xe.toFiniteNumber(z.getContentLength());return j??T(R)};return async z=>{let{url:R,method:j,data:F,signal:O,cancelToken:k,timeout:W,onDownloadProgress:K,onUploadProgress:Y,responseType:H,headers:Q,withCredentials:M="same-origin",fetchOptions:q}=Ib(z),ie=t||fetch;H=H?(H+"").toLowerCase():"text";let ae=k5([O,k&&k.toAbortSignal()],W),we=null;const Ne=ae&&ae.unsubscribe&&(()=>{ae.unsubscribe()});let oe;try{if(Y&&y&&j!=="get"&&j!=="head"&&(oe=await I(Q,F))!==0){let he=new n(R,{method:"POST",body:F,duplex:"half"}),Te;if(xe.isFormData(F)&&(Te=he.headers.get("content-type"))&&Q.setContentType(Te),he.body){const[ze,Le]=ay(oe,Xd(ly(Y)));F=uy(he.body,dy,ze,Le)}}xe.isString(M)||(M=M?"include":"omit");const se=c&&"credentials"in n.prototype,ve={...q,signal:ae,method:j.toUpperCase(),headers:Q.normalize().toJSON(),body:F,duplex:"half",credentials:se?M:void 0};we=c&&new n(R,ve);let ee=await(c?ie(we,q):ie(R,ve));const _e=C&&(H==="stream"||H==="response");if(C&&(K||_e&&Ne)){const he={};["status","statusText","headers"].forEach(te=>{he[te]=ee[te]});const Te=xe.toFiniteNumber(ee.headers.get("content-length")),[ze,Le]=K&&ay(Te,Xd(ly(K),!0))||[];ee=new i(uy(ee.body,dy,ze,()=>{Le&&Le(),Ne&&Ne()}),he)}H=H||"text";let pe=await b[xe.findKey(b,H)||"text"](ee,z);return!_e&&Ne&&Ne(),await new Promise((he,Te)=>{Nb(he,Te,{data:pe,headers:Vr.from(ee.headers),status:ee.status,statusText:ee.statusText,config:z,request:we})})}catch(se){throw Ne&&Ne(),se&&se.name==="TypeError"&&/Load failed|fetch/i.test(se.message)?Object.assign(new ht("Network Error",ht.ERR_NETWORK,z,we,se&&se.response),{cause:se.cause||se}):ht.from(se,se&&se.code,z,we,se&&se.response)}}},D5=new Map,kb=e=>{let t=e&&e.env||{};const{fetch:n,Request:i,Response:a}=t,c=[i,a,n];let f=c.length,g=f,v,y,C=D5;for(;g--;)v=c[g],y=C.get(v),y===void 0&&C.set(v,y=g?new Map:P5(t)),C=y;return y};kb();const q1={http:J8,xhr:I5,fetch:{get:kb}};xe.forEach(q1,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const my=e=>`- ${e}`,j5=e=>xe.isFunction(e)||e===null||e===!1;function B5(e,t){e=xe.isArray(e)?e:[e];const{length:n}=e;let i,a;const c={};for(let f=0;f<n;f++){i=e[f];let g;if(a=i,!j5(i)&&(a=q1[(g=String(i)).toLowerCase()],a===void 0))throw new ht(`Unknown adapter '${g}'`);if(a&&(xe.isFunction(a)||(a=a.get(t))))break;c[g||"#"+f]=a}if(!a){const f=Object.entries(c).map(([v,y])=>`adapter ${v} `+(y===!1?"is not supported by the environment":"is not available in the build"));let g=n?f.length>1?`since :
`+f.map(my).join(`
`):" "+my(f[0]):"as no adapter specified";throw new ht("There is no suitable adapter to dispatch the request "+g,"ERR_NOT_SUPPORT")}return a}const Mb={getAdapter:B5,adapters:q1};function zf(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new su(null,e)}function gy(e){return zf(e),e.headers=Vr.from(e.headers),e.data=Ff.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Mb.getAdapter(e.adapter||iu.adapter,e)(e).then(function(i){return zf(e),i.data=Ff.call(e,e.transformResponse,i),i.headers=Vr.from(i.headers),i},function(i){return Eb(i)||(zf(e),i&&i.response&&(i.response.data=Ff.call(e,e.transformResponse,i.response),i.response.headers=Vr.from(i.response.headers))),Promise.reject(i)})}const Rb="1.13.5",Rh={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Rh[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const xy={};Rh.transitional=function(t,n,i){function a(c,f){return"[Axios v"+Rb+"] Transitional option '"+c+"'"+f+(i?". "+i:"")}return(c,f,g)=>{if(t===!1)throw new ht(a(f," has been removed"+(n?" in "+n:"")),ht.ERR_DEPRECATED);return n&&!xy[f]&&(xy[f]=!0,console.warn(a(f," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(c,f,g):!0}};Rh.spelling=function(t){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function F5(e,t,n){if(typeof e!="object")throw new ht("options must be an object",ht.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let a=i.length;for(;a-- >0;){const c=i[a],f=t[c];if(f){const g=e[c],v=g===void 0||f(g,c,e);if(v!==!0)throw new ht("option "+c+" must be "+v,ht.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ht("Unknown option "+c,ht.ERR_BAD_OPTION)}}const cd={assertOptions:F5,validators:Rh},pi=cd.validators;let sa=class{constructor(t){this.defaults=t||{},this.interceptors={request:new sy,response:new sy}}async request(t,n){try{return await this._request(t,n)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const c=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?c&&!String(i.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+c):i.stack=c}catch{}}throw i}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=pa(this.defaults,n);const{transitional:i,paramsSerializer:a,headers:c}=n;i!==void 0&&cd.assertOptions(i,{silentJSONParsing:pi.transitional(pi.boolean),forcedJSONParsing:pi.transitional(pi.boolean),clarifyTimeoutError:pi.transitional(pi.boolean),legacyInterceptorReqResOrdering:pi.transitional(pi.boolean)},!1),a!=null&&(xe.isFunction(a)?n.paramsSerializer={serialize:a}:cd.assertOptions(a,{encode:pi.function,serialize:pi.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),cd.assertOptions(n,{baseUrl:pi.spelling("baseURL"),withXsrfToken:pi.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let f=c&&xe.merge(c.common,c[n.method]);c&&xe.forEach(["delete","get","head","post","put","patch","common"],z=>{delete c[z]}),n.headers=Vr.concat(f,c);const g=[];let v=!0;this.interceptors.request.forEach(function(R){if(typeof R.runWhen=="function"&&R.runWhen(n)===!1)return;v=v&&R.synchronous;const j=n.transitional||Y1;j&&j.legacyInterceptorReqResOrdering?g.unshift(R.fulfilled,R.rejected):g.push(R.fulfilled,R.rejected)});const y=[];this.interceptors.response.forEach(function(R){y.push(R.fulfilled,R.rejected)});let C,b=0,T;if(!v){const z=[gy.bind(this),void 0];for(z.unshift(...g),z.push(...y),T=z.length,C=Promise.resolve(n);b<T;)C=C.then(z[b++],z[b++]);return C}T=g.length;let I=n;for(;b<T;){const z=g[b++],R=g[b++];try{I=z(I)}catch(j){R.call(this,j);break}}try{C=gy.call(this,I)}catch(z){return Promise.reject(z)}for(b=0,T=y.length;b<T;)C=C.then(y[b++],y[b++]);return C}getUri(t){t=pa(this.defaults,t);const n=Tb(t.baseURL,t.url,t.allowAbsoluteUrls);return Sb(n,t.params,t.paramsSerializer)}};xe.forEach(["delete","get","head","options"],function(t){sa.prototype[t]=function(n,i){return this.request(pa(i||{},{method:t,url:n,data:(i||{}).data}))}});xe.forEach(["post","put","patch"],function(t){function n(i){return function(c,f,g){return this.request(pa(g||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:c,data:f}))}}sa.prototype[t]=n(),sa.prototype[t+"Form"]=n(!0)});let z5=class Ob{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(c){n=c});const i=this;this.promise.then(a=>{if(!i._listeners)return;let c=i._listeners.length;for(;c-- >0;)i._listeners[c](a);i._listeners=null}),this.promise.then=a=>{let c;const f=new Promise(g=>{i.subscribe(g),c=g}).then(a);return f.cancel=function(){i.unsubscribe(c)},f},t(function(c,f,g){i.reason||(i.reason=new su(c,f,g),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=i=>{t.abort(i)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Ob(function(a){t=a}),cancel:t}}};function U5(e){return function(n){return e.apply(null,n)}}function V5(e){return xe.isObject(e)&&e.isAxiosError===!0}const cp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(cp).forEach(([e,t])=>{cp[t]=e});function Lb(e){const t=new sa(e),n=fb(sa.prototype.request,t);return xe.extend(n,sa.prototype,t,{allOwnKeys:!0}),xe.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return Lb(pa(e,a))},n}const tt=Lb(iu);tt.Axios=sa;tt.CanceledError=su;tt.CancelToken=z5;tt.isCancel=Eb;tt.VERSION=Rb;tt.toFormData=Mh;tt.AxiosError=ht;tt.Cancel=tt.CanceledError;tt.all=function(t){return Promise.all(t)};tt.spread=U5;tt.isAxiosError=V5;tt.mergeConfig=pa;tt.AxiosHeaders=Vr;tt.formToJSON=e=>Ab(xe.isHTMLForm(e)?new FormData(e):e);tt.getAdapter=Mb.getAdapter;tt.HttpStatusCode=cp;tt.default=tt;const{Axios:vM,AxiosError:_M,CanceledError:bM,isCancel:CM,CancelToken:SM,VERSION:AM,all:EM,Cancel:NM,isAxiosError:TM,spread:IM,toFormData:kM,AxiosHeaders:MM,HttpStatusCode:RM,formToJSON:OM,getAdapter:LM,mergeConfig:PM}=tt,H5=[{event_id:"1",label:"Expediere preluata de Curier",description:"Expediere preluata de Curier"},{event_id:"2",label:"Expeditie Livrata",description:"Expeditie Livrata"},{event_id:"3",label:"Refuzare colet",description:"Refuzare colet"},{event_id:"4",label:"Expeditie returnata",description:"Expeditie returnata"},{event_id:"5",label:"Expeditie anulata",description:"Expeditie anulata"},{event_id:"6",label:"Intrare in depozit",description:"Intrare in depozit"},{event_id:"7",label:"Livrare reprogramata",description:"Livrare reprogramata"},{event_id:"R3",label:"Ramburs transferat",description:"Ramburs transferat"}];H5.reduce((e,t)=>(e[t.event_id]=t.label,e),{});const W5=!1,Uf="http://localhost:8000",up="arynik_api_url_v1",tc=e=>String(e||"").trim().replace(/\/+$/,""),Z5=e=>{try{return localStorage.getItem(e)}catch{return null}},G5=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},Y5=e=>{try{localStorage.removeItem(e)}catch{}},Ot=()=>{if(typeof window>"u")return tc(Uf);const t=new URLSearchParams(window.location.search).get("api"),n=Z5(up);return tc(t||n||Uf)||tc(Uf)},Pb=e=>{const t=tc(e);t?G5(up,t):Y5(up)},Ut=e=>e?{Authorization:`Bearer ${e}`}:{},yy=e=>{const t=new TextEncoder().encode(String(e));let n="";return t.forEach(i=>{n+=String.fromCharCode(i)}),btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"")},X5=e=>`${yy(JSON.stringify({alg:"none",typ:"JWT"}))}.${yy(JSON.stringify(e))}.offline`,q5=e=>{const t=String(e).trim().toLowerCase();return t.includes("admin")?"Admin":t.includes("manager")?"Manager":t.replace(/\\D/g,"").length>=9?"Recipient":"Driver"},K5=(e,t)=>{if(e==="Driver"){const n=String(t).trim().toUpperCase();return/^D\\d{3,}$/i.test(n)?n:"D002"}if(e==="Recipient"){const n=String(t).replace(/\\D/g,"");return n?`R${n.slice(-15)}`:"R000"}return"D001"};async function Q5(e,t){const n=Ot(),i=new URLSearchParams;i.append("username",e),i.append("password",t);try{return(await tt.post(`${n}/login`,i,{headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:3e3})).data}catch(a){if(a&&a.response)throw a;console.warn("Login API unavailable; using snapshot/offline token.",a);const c=String(e||"").trim()||"offline",f=q5(c),g={sub:c,driver_id:K5(f,c),role:f,offline:!0,exp:Math.floor(Date.now()/1e3)+7*24*60*60};return{access_token:X5(g),token_type:"bearer",role:f}}}async function Db(e){const t=Ot();return(await tt.post(`${t}/recipient/signup`,e,{headers:{"Content-Type":"application/json"},timeout:7e3})).data}async function jb(e){const t=Ot();return(await tt.get(`${t}/stats`,{headers:Ut(e)})).data}async function dp(e){const t=Ot();return(await tt.get(`${t}/me`,{headers:Ut(e)})).data}async function Bb(e,{scope:t="self",awb_limit:n=200}={}){const i=Ot();return(await tt.get(`${i}/analytics`,{params:{scope:t,awb_limit:n},headers:Ut(e)})).data}async function Fb(e){const t=Ot();return(await tt.get(`${t}/roles`,{headers:Ut(e),timeout:5e3})).data}async function K1(e){const t=Ot();return(await tt.get(`${t}/users`,{headers:Ut(e),timeout:7e3})).data}async function zb(e,t){const n=Ot();return(await tt.post(`${n}/users`,t,{headers:{...Ut(e),"Content-Type":"application/json"},timeout:7e3})).data}async function Ub(e,t,n){const i=String(t||"").trim();if(!i)throw new Error("driver_id is required");const a=Ot();return(await tt.patch(`${a}/users/${encodeURIComponent(i)}`,n,{headers:{...Ut(e),"Content-Type":"application/json"},timeout:7e3})).data}async function $5(e){const t=Ot();return(await tt.post(`${t}/sync-drivers`,null,{headers:Ut(e),timeout:15e3})).data}async function Vb(e){const t=Ot();return(await tt.get(`${t}/postis/sync/status`,{headers:Ut(e),timeout:15e3})).data}async function Hb(e,{wait:t=!1}={}){const n=Ot();return(await tt.post(`${n}/postis/sync`,null,{params:{wait:t?1:void 0},headers:Ut(e),timeout:t?10*60*1e3:15e3})).data}async function Wb(e){const t=Ot();return(await tt.get(`${t}/status-options`,{headers:Ut(e)})).data}async function Oh(e,t){const n=Ot();return(await tt.post(`${n}/update-awb`,t,{headers:Ut(e)})).data}async function Q1(e,t={}){const n=Ot();return(await tt.get(`${n}/logs`,{params:t,headers:Ut(e)})).data}async function ou(e){const t=Ot();try{return(await tt.get(`${t}/shipments`,{headers:Ut(e),timeout:5e3})).data}catch(n){console.warn("Backend API unavailable, attempting to load static snapshot...",n);try{const i="/arynik1/data/shipments.json".replace("//","/"),a=await tt.get(i);console.info("Loaded shipments from static snapshot.");let c=a.data;if(e)try{const g=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),v=decodeURIComponent(window.atob(g).split("").map(function(T){return"%"+("00"+T.charCodeAt(0).toString(16)).slice(-2)}).join("")),y=JSON.parse(v),C=y.role,b=y.driver_id;if(C==="Driver")console.info(`Offline RBAC: Filtering for Driver ${b}`),c=c.filter(T=>T.driver_id===b);else if(C==="Recipient"){const z=String(y.sub||"").trim().replace(/\\D/g,"").slice(-9);z&&(console.info("Offline RBAC: Filtering for Recipient phone"),c=c.filter(R=>String((R==null?void 0:R.recipient_phone)||"").replace(/\\D/g,"").endsWith(z)))}}catch(f){console.warn("Offline RBAC: Failed to decode token",f)}return c}catch(i){throw console.error("Failed to load both API and static snapshot",i),n}}}async function Vc(e,t,{refresh:n=!1}={}){const i=Ot(),a=String(t||"").trim();if(!a)throw new Error("awb is required");try{return(await tt.get(`${i}/shipments/${encodeURIComponent(a)}`,{params:n?{refresh:!0}:{},headers:Ut(e),timeout:7e3})).data}catch(c){console.warn("Backend shipment details unavailable, attempting static snapshot...",c);try{const f="/arynik1/data/shipments.json".replace("//","/"),g=await tt.get(f),y=(Array.isArray(g.data)?g.data:[]).find(C=>String((C==null?void 0:C.awb)||"").toUpperCase()===a.toUpperCase());if(y)return y}catch{}throw c}}async function $1(e,t,n){const i=Ot(),a=String(t||"").trim();if(!a)throw new Error("awb is required");const c=String(n||"").trim();if(!c)throw new Error("driver_id is required");return(await tt.post(`${i}/shipments/${encodeURIComponent(a)}/allocate`,{driver_id:c},{headers:{...Ut(e),"Content-Type":"application/json"},timeout:7e3})).data}async function J1(e,{limit:t=50,unread_only:n=!1}={}){const i=Ot();return(await tt.get(`${i}/notifications`,{params:{limit:t,unread_only:n},headers:Ut(e),timeout:7e3})).data}async function qd(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("notification_id is required");const i=Ot();return(await tt.post(`${i}/notifications/${encodeURIComponent(String(n))}/read`,null,{headers:Ut(e),timeout:7e3})).data}async function Zb(e,t){const n=Ot();return(await tt.post(`${n}/update-location`,t,{headers:{...Ut(e),"Content-Type":"application/json"},timeout:7e3})).data}async function em(e,t){const n=Ot();return(await tt.post(`${n}/tracking/requests`,t,{headers:{...Ut(e),"Content-Type":"application/json"},timeout:7e3})).data}async function Gb(e,{limit:t=20}={}){const n=Ot();return(await tt.get(`${n}/tracking/requests/inbox`,{params:{limit:t},headers:Ut(e),timeout:7e3})).data}async function Yb(e,{limit:t=10}={}){const n=Ot();return(await tt.get(`${n}/tracking/requests/active`,{params:{limit:t},headers:Ut(e),timeout:7e3})).data}async function Xb(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("request_id is required");const i=Ot();return(await tt.get(`${i}/tracking/requests/${encodeURIComponent(String(n))}`,{headers:Ut(e),timeout:7e3})).data}async function qb(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("request_id is required");const i=Ot();return(await tt.get(`${i}/tracking/requests/${encodeURIComponent(String(n))}/latest`,{headers:Ut(e),timeout:7e3})).data}async function Kb(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("request_id is required");const i=Ot();return(await tt.post(`${i}/tracking/requests/${encodeURIComponent(String(n))}/accept`,null,{headers:Ut(e),timeout:7e3})).data}async function Qb(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("request_id is required");const i=Ot();return(await tt.post(`${i}/tracking/requests/${encodeURIComponent(String(n))}/deny`,null,{headers:Ut(e),timeout:7e3})).data}async function tm(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("request_id is required");const i=Ot();return(await tt.post(`${i}/tracking/requests/${encodeURIComponent(String(n))}/stop`,null,{headers:Ut(e),timeout:7e3})).data}async function $b(e,{limit:t=50,awb:n=null}={}){const i=Ot();return(await tt.get(`${i}/chat/threads`,{params:{limit:t,awb:n||void 0},headers:Ut(e),timeout:7e3})).data}async function nm(e,{awb:t}={}){const n=String(t||"").trim().toUpperCase();if(!n)throw new Error("awb is required");const i=Ot();return(await tt.post(`${i}/chat/threads`,{awb:n},{headers:{...Ut(e),"Content-Type":"application/json"},timeout:7e3})).data}async function Jb(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("thread_id is required");const i=Ot();return(await tt.get(`${i}/chat/threads/${encodeURIComponent(String(n))}`,{headers:Ut(e),timeout:7e3})).data}async function eC(e,t,{limit:n=50,before_id:i=null}={}){const a=Number(t);if(!Number.isFinite(a))throw new Error("thread_id is required");const c=Ot();return(await tt.get(`${c}/chat/threads/${encodeURIComponent(String(a))}/messages`,{params:{limit:n,before_id:i??void 0},headers:Ut(e),timeout:7e3})).data}async function hp(e,t,n){const i=Number(t);if(!Number.isFinite(i))throw new Error("thread_id is required");const a=Ot();return(await tt.post(`${a}/chat/threads/${encodeURIComponent(String(i))}/messages`,n,{headers:{...Ut(e),"Content-Type":"application/json"},timeout:7e3})).data}async function tC(e,t,{last_read_message_id:n=null}={}){const i=Number(t);if(!Number.isFinite(i))throw new Error("thread_id is required");const a=Ot();return(await tt.post(`${a}/chat/threads/${encodeURIComponent(String(i))}/read`,{last_read_message_id:n??void 0},{headers:{...Ut(e),"Content-Type":"application/json"},timeout:7e3})).data}const J5=Object.freeze(Object.defineProperty({__proto__:null,acceptTrackingRequest:Kb,allocateShipment:$1,createTrackingRequest:em,createUser:zb,denyTrackingRequest:Qb,ensureChatThread:nm,getAnalytics:Bb,getApiUrl:Ot,getChatThread:Jb,getLogs:Q1,getMe:dp,getNotifications:J1,getPostisSyncStatus:Vb,getRoles:Fb,getShipment:Vc,getShipments:ou,getStats:jb,getStatusOptions:Wb,getTrackingLatest:qb,getTrackingRequest:Xb,isDemoMode:W5,listChatMessages:eC,listChatThreads:$b,listTrackingActive:Yb,listTrackingInbox:Gb,listUsers:K1,login:Q5,markChatRead:tC,markNotificationRead:qd,recipientSignup:Db,sendChatMessage:hp,setApiUrl:Pb,stopTrackingRequest:tm,syncDrivers:$5,triggerPostisSync:Hb,updateAwb:Oh,updateLocation:Zb,updateUser:Ub},Symbol.toStringTag,{value:"Module"})),wy=e=>{try{const n=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(atob(n).split("").map(function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(i)}catch{return null}},nC=B.createContext(),ek=({children:e})=>{const[t,n]=B.useState(null),[i,a]=B.useState(!0);B.useEffect(()=>{let g=!1;return(async()=>{const v=localStorage.getItem("token");if(!v){g||a(!1);return}const y=wy(v);if(!y||!y.sub){console.warn("Invalid/undecodable token in localStorage; clearing it."),localStorage.removeItem("token"),g||a(!1);return}const C={username:y.sub,driver_id:y.driver_id,role:y.role,token:v,permissions:sp(y.role)};g||n(C);try{const b=await dp(v);!g&&b&&n(T=>({...T||C,...b,token:v,permissions:Array.isArray(b==null?void 0:b.permissions)?b.permissions:(T==null?void 0:T.permissions)||C.permissions}))}catch(b){console.warn("Failed to load /me; continuing with token payload only.",b)}finally{g||a(!1)}})(),()=>{g=!0}},[]);const c=async(g,v)=>{localStorage.setItem("token",g);const y=wy(g);if(!y||!y.sub){console.error("Login returned an invalid token; clearing it."),localStorage.removeItem("token"),n(null);return}const C={username:y.sub,driver_id:y.driver_id,role:v||y.role,token:g,permissions:sp(v||y.role)};n(C);try{const b=await dp(g);b&&n(T=>({...T||C,...b,token:g,permissions:Array.isArray(b==null?void 0:b.permissions)?b.permissions:(T==null?void 0:T.permissions)||C.permissions}))}catch(b){console.warn("Failed to load /me after login; continuing with token payload only.",b)}},f=()=>{localStorage.setItem("token",""),localStorage.removeItem("token"),n(null)};return m.jsx(nC.Provider,{value:{user:t,login:c,logout:f,loading:i},children:!i&&e})},sr=()=>B.useContext(nC),tk=({to:e,onClick:t,icon:n,label:i,isActive:a})=>{const c=`relative flex flex-col items-center justify-center gap-1.5 px-3 py-3 rounded-2xl transition-all duration-300 ${a?"text-white":"text-slate-500 hover:text-slate-300"}`,f=m.jsxs(m.Fragment,{children:[a&&m.jsx(et.div,{layoutId:"nav-pill",className:"absolute inset-0 bg-gradient-to-t from-brand-blue/20 to-transparent rounded-2xl border-b-2 border-brand-blue shadow-[0_0_20px_rgba(59,130,246,0.5)]",transition:{type:"spring",stiffness:300,damping:30}}),m.jsx(n,{size:22,className:`relative z-10 transition-all duration-300 ${a?"scale-110 drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]":"scale-100"}`,strokeWidth:a?2.5:2}),m.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wide relative z-10 ${a?"text-white drop-shadow-md":"opacity-70"}`,children:i})]});return e?m.jsx(CE,{to:e,className:c,children:f}):m.jsx("button",{type:"button",onClick:t,className:c,"aria-label":i,children:f})};function nk({onOpenMenu:e}){const n=Io().pathname,{user:i}=sr(),a=Tn(i,Pr),c=["Manager","Admin","Dispatcher","Driver"].includes(i==null?void 0:i.role),f=[{to:"/home",icon:Y_,label:"Home"},...a?[{to:"/shipments",icon:Os,label:"Track"}]:[],...c?[{to:"/routes",icon:yo,label:"Routes"}]:[],{onClick:e,icon:e8,label:"Menu"}];return m.jsx("nav",{className:"fixed bottom-[calc(1.5rem+env(safe-area-inset-bottom))] left-1/2 -translate-x-1/2 z-50 w-full max-w-sm px-4",children:m.jsxs("div",{className:"glass-strong rounded-[32px] border-iridescent shadow-2xl px-2 py-2 flex justify-around items-center relative backdrop-blur-2xl",children:[m.jsx("div",{className:"absolute inset-x-4 top-0 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"}),f.map(g=>m.jsx(tk,{to:g.to,onClick:g.onClick,icon:g.icon,label:g.label,isActive:g.to?n===g.to||g.to!=="/home"&&n.startsWith(g.to)||n==="/"&&g.to==="/home":!1},g.to||g.label))]})})}const Ki=({icon:e,label:t,description:n,onClick:i})=>m.jsxs("button",{type:"button",onClick:i,className:"w-full p-4 glass-light rounded-2xl border border-white/10 hover:border-white/20 hover:bg-white/5 transition-all flex items-center gap-4 text-left",children:[m.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-violet-500/25 to-purple-600/15 border border-white/10",children:m.jsx(e,{size:20,className:"text-violet-300"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-black text-white text-sm uppercase tracking-tight",children:t}),n?m.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:n}):null]})]});function rk({open:e,onClose:t}){const n=wr(),{user:i,logout:a}=sr(),c=B.useMemo(()=>Tn(i,Pr),[i]),f=B.useMemo(()=>["Manager","Admin","Dispatcher","Driver"].includes(i==null?void 0:i.role),[i==null?void 0:i.role]),g=B.useMemo(()=>Tn(i,wo),[i]),v=B.useMemo(()=>Tn(i,no),[i]),y=B.useMemo(()=>Tn(i,yi),[i]),C=B.useMemo(()=>Tn(i,Li),[i]),b=B.useMemo(()=>Tn(i,xi),[i]),T=B.useMemo(()=>Tn(i,qr),[i]);B.useEffect(()=>{if(!e)return;const W=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=W}},[e]);const I=W=>{n(W),t==null||t()},z=()=>{a(),t==null||t(),n("/login",{replace:!0})},R=(i==null?void 0:i.name)||(i==null?void 0:i.username)||"Driver",j=i!=null&&i.truck_plate?String(i.truck_plate).toUpperCase():null,F=(i==null?void 0:i.truck_phone)||null,O=String((i==null?void 0:i.role)||"")==="Recipient",k=O&&((i==null?void 0:i.phone_number)||(i==null?void 0:i.username))||null;return m.jsx(rs,{children:e?m.jsxs(m.Fragment,{children:[m.jsx(et.div,{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[60]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t}),m.jsx(et.aside,{className:"fixed inset-y-0 right-0 w-full max-w-sm z-[61] p-4",initial:{x:60,opacity:0},animate:{x:0,opacity:1},exit:{x:60,opacity:0},transition:{type:"spring",stiffness:260,damping:28},"aria-label":"App menu",role:"dialog","aria-modal":"true",children:m.jsxs("div",{className:"h-full glass-strong rounded-[32px] border-iridescent shadow-2xl overflow-hidden flex flex-col",children:[m.jsxs("div",{className:"p-5 flex items-center justify-between border-b border-white/10",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Menu"}),m.jsx("div",{className:"text-lg font-black text-white mt-1",children:"Navigation"})]}),m.jsx("button",{type:"button",onClick:t,className:"w-11 h-11 rounded-2xl glass-light border border-white/10 flex items-center justify-center hover:bg-white/5 transition-all","aria-label":"Close menu",children:m.jsx(_a,{size:18,className:"text-slate-300"})})]}),m.jsx("div",{className:"p-5",children:m.jsxs("div",{className:"glass-light rounded-3xl border border-white/10 p-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center shadow-glow-md",children:m.jsx(va,{size:22,className:"text-white"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("div",{className:"font-black text-white truncate",children:R}),m.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-0.5",children:[(i==null?void 0:i.role)||"Role","  ID: ",(i==null?void 0:i.driver_id)||"N/A"]})]})]}),m.jsx("div",{className:"mt-4 grid grid-cols-2 gap-3",children:O?m.jsxs("div",{className:"p-3 rounded-2xl bg-slate-900/40 border border-white/10 col-span-2",children:[m.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[m.jsx(Zd,{size:14}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Recipient Phone"})]}),m.jsx("div",{className:"text-sm font-black text-white mt-1 truncate",children:k||"--"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"p-3 rounded-2xl bg-slate-900/40 border border-white/10",children:[m.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[m.jsx(H1,{size:14}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Truck"})]}),m.jsx("div",{className:"text-sm font-black text-white mt-1 truncate",children:j||"Unassigned"})]}),m.jsxs("div",{className:"p-3 rounded-2xl bg-slate-900/40 border border-white/10",children:[m.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[m.jsx(Zd,{size:14}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Phone"})]}),m.jsx("div",{className:"text-sm font-black text-white mt-1 truncate",children:F||"--"})]})]})}),v?m.jsx("div",{className:"mt-3 text-[10px] text-emerald-400 font-black uppercase tracking-widest",children:"Analytics: ALL enabled"}):null]})}),m.jsxs("div",{className:"flex-1 px-5 pb-5 overflow-y-auto space-y-3",children:[m.jsx(Ki,{icon:Y_,label:"Home",description:"Scanner & quick actions",onClick:()=>I("/home")}),c?m.jsxs(m.Fragment,{children:[m.jsx(Ki,{icon:Os,label:"Shipments",description:"Track shipments",onClick:()=>I("/shipments")}),f?m.jsx(Ki,{icon:yo,label:"Routes",description:"Plan deliveries",onClick:()=>I("/routes")}):null]}):null,b?m.jsx(Ki,{icon:zc,label:"Notifications",description:"Allocation updates",onClick:()=>I("/notifications")}):null,T?m.jsx(Ki,{icon:Uc,label:"Chat",description:"Recipient messaging",onClick:()=>I("/chat")}):null,y?m.jsx(Ki,{icon:KI,label:"History",description:"Logs & updates",onClick:()=>I("/history")}):null,c?m.jsx(Ki,{icon:Z_,label:"Calendar",description:"Daily overview",onClick:()=>I("/calendar")}):null,C?m.jsx(Ki,{icon:W_,label:"Statistics",description:"Trucks, drivers, AWBs, ESCH",onClick:()=>I("/analytics")}):null,g?m.jsx(Ki,{icon:tb,label:"Users",description:"Create accounts & roles",onClick:()=>I("/users")}):null,m.jsx(Ki,{icon:s8,label:"Settings",description:"Account & API",onClick:()=>I("/settings")}),m.jsxs("button",{type:"button",onClick:z,className:"w-full p-4 rounded-2xl bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-400 hover:to-rose-500 text-white font-black uppercase tracking-wider shadow-lg flex items-center justify-center gap-3 transition-all",children:[m.jsx(K_,{size:18}),"Sign Out"]})]})]})})]}):null})}function ik(){const e=wr(),{user:t}=sr(),n=(t==null?void 0:t.token)||localStorage.getItem("token"),[i,a]=B.useState(null),c=B.useRef(new Set);B.useEffect(()=>{if(!n)return;let C=!1;const b=async()=>{try{const I=await J1(n,{limit:50,unread_only:!0}).catch(()=>[]),R=(Array.isArray(I)?I:[]).filter(j=>{var F;return String(((F=j==null?void 0:j.data)==null?void 0:F.type)||"")==="chat_message"}).sort((j,F)=>new Date((F==null?void 0:F.created_at)||0)-new Date((j==null?void 0:j.created_at)||0));for(const j of R){const F=String((j==null?void 0:j.id)||"");if(F&&!c.current.has(F)){c.current.add(F),C||a(j);break}}}catch{}};b();const T=setInterval(b,12e3);return()=>{C=!0,clearInterval(T)}},[n]);const f=async()=>{const C=i==null?void 0:i.id;if(a(null),!(!C||!n))try{await qd(n,C)}catch{}},g=async()=>{var T;const C=(T=i==null?void 0:i.data)==null?void 0:T.thread_id,b=i==null?void 0:i.id;if(a(null),b&&n)try{await qd(n,b)}catch{}C&&e(`/chat/${encodeURIComponent(String(C))}`)};if(!i)return null;const v=String((i==null?void 0:i.body)||"").trim(),y=i!=null&&i.awb?String(i.awb).toUpperCase():null;return m.jsx("div",{className:"fixed bottom-[calc(9rem+env(safe-area-inset-bottom))] left-0 right-0 z-[69] px-4",children:m.jsx("div",{className:"max-w-xl mx-auto",children:m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-4 shadow-2xl flex items-start gap-3",children:[m.jsx("div",{className:"w-11 h-11 rounded-2xl bg-violet-500/15 border border-violet-500/20 flex items-center justify-center",children:m.jsx(Uc,{size:18,className:"text-violet-200"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"text-sm font-black text-white truncate",children:["New chat message",y?`  ${y}`:""]}),v?m.jsx("div",{className:"text-[11px] font-bold text-slate-300 mt-1 break-words",children:v}):null,m.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[m.jsx("button",{type:"button",onClick:g,className:"px-4 h-10 rounded-2xl border text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 transition-all bg-emerald-500/15 border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95",children:"Open"}),m.jsx("button",{type:"button",onClick:f,className:"w-10 h-10 rounded-2xl border flex items-center justify-center transition-all bg-slate-900/40 border-white/10 text-slate-300 hover:bg-white/5 active:scale-95",title:"Dismiss",children:m.jsx(_a,{size:18})})]})]})]})})})}function rm(e={}){const t=typeof e=="boolean"?e:(e==null?void 0:e.enabled)??!0,[n,i]=B.useState(null),[a,c]=B.useState(null);return B.useEffect(()=>{if(!t)return;if(!navigator.geolocation){c("Geolocation is not supported by your browser");return}const f=C=>{const{latitude:b,longitude:T,heading:I,speed:z}=C.coords;i({latitude:b,longitude:T,heading:I,speed:z})},g=C=>{c(C.message)},v={enableHighAccuracy:!0,timeout:5e3,maximumAge:0,...typeof e=="object"&&(e!=null&&e.options)?e.options:{}},y=navigator.geolocation.watchPosition(f,g,v);return()=>navigator.geolocation.clearWatch(y)},[t]),{location:n,error:a}}const vy=e=>{try{return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}};function sk(){const{user:e}=sr(),t=(e==null?void 0:e.token)||localStorage.getItem("token"),n=String((e==null?void 0:e.role)||"").trim(),[i,a]=B.useState([]),[c,f]=B.useState(null),[g,v]=B.useState(null),[y,C]=B.useState(""),b=n==="Driver"&&!!c,{location:T,error:I}=rm({enabled:b}),z=B.useMemo(()=>{if(!(c!=null&&c.expires_at))return null;const W=new Date(c.expires_at).getTime();return Number.isFinite(W)?W:null},[c==null?void 0:c.expires_at]);B.useEffect(()=>{if(n!=="Driver"||!t)return;let W=!1;const K=async()=>{try{const H=await Gb(t,{limit:20}).catch(()=>[]);W||a(Array.isArray(H)?H:[]);let Q=null;try{const M=await Yb(t,{limit:5});Q=Array.isArray(M)?M:[]}catch{Q=null}if(W||Q===null)return;f(M=>M?Q.some(ie=>String(ie==null?void 0:ie.id)===String(M==null?void 0:M.id))?M:null:Q[0]||null)}catch{}};K();const Y=setInterval(K,1e4);return()=>{W=!0,clearInterval(Y)}},[n,t]),B.useEffect(()=>{if(!z)return;const W=()=>{Date.now()>=z&&f(null)};W();const K=setInterval(W,1e3);return()=>clearInterval(K)},[z]);const R=B.useRef(0);B.useEffect(()=>{if(!b||!T||!t)return;const W=Date.now();if(W-R.current<8e3)return;R.current=W;const K={latitude:Number(T.latitude),longitude:Number(T.longitude)};!Number.isFinite(K.latitude)||!Number.isFinite(K.longitude)||(async()=>{var Y,H;try{await Zb(t,K),C("")}catch(Q){C(String(((H=(Y=Q==null?void 0:Q.response)==null?void 0:Y.data)==null?void 0:H.detail)||(Q==null?void 0:Q.message)||"Failed to send location"))}})()},[b,T==null?void 0:T.latitude,T==null?void 0:T.longitude,t]);const j=B.useMemo(()=>{if(c)return null;const W=Array.isArray(i)?i:[];return W.length>0?W[0]:null},[i,c]),F=async()=>{var W,K;if(!(!(j!=null&&j.id)||!t)){v(j.id),C("");try{const Y=await Kb(t,j.id);f(Y||null),a(H=>Array.isArray(H)?H.filter(Q=>String(Q==null?void 0:Q.id)!==String(j.id)):H)}catch(Y){C(String(((K=(W=Y==null?void 0:Y.response)==null?void 0:W.data)==null?void 0:K.detail)||(Y==null?void 0:Y.message)||"Failed to accept request"))}finally{v(null)}}},O=async()=>{var W,K;if(!(!(j!=null&&j.id)||!t)){v(j.id),C("");try{await Qb(t,j.id),a(Y=>Array.isArray(Y)?Y.filter(H=>String(H==null?void 0:H.id)!==String(j.id)):Y)}catch(Y){C(String(((K=(W=Y==null?void 0:Y.response)==null?void 0:W.data)==null?void 0:K.detail)||(Y==null?void 0:Y.message)||"Failed to deny request"))}finally{v(null)}}},k=async()=>{var W,K;if(!(!(c!=null&&c.id)||!t)){v(c.id),C("");try{await tm(t,c.id),f(null)}catch(Y){C(String(((K=(W=Y==null?void 0:Y.response)==null?void 0:W.data)==null?void 0:K.detail)||(Y==null?void 0:Y.message)||"Failed to stop tracking"))}finally{v(null)}}};return n!=="Driver"||!j&&!c?null:m.jsx("div",{className:"fixed bottom-[calc(5rem+env(safe-area-inset-bottom))] left-0 right-0 z-[70] px-4",children:m.jsx("div",{className:"max-w-xl mx-auto",children:m.jsx("div",{className:"glass-strong rounded-3xl border-iridescent p-4 shadow-2xl",children:c?m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-11 h-11 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center",children:m.jsx(Rs,{size:18,className:"text-emerald-200"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsx("p",{className:"text-sm font-black text-white truncate",children:"Sharing live location"}),m.jsxs("button",{type:"button",onClick:k,disabled:String(g)===String(c.id),className:`px-3 py-2 rounded-2xl text-[10px] font-black uppercase tracking-widest border transition-all ${String(g)===String(c.id)?"opacity-60 cursor-not-allowed bg-slate-900/40 border-white/10 text-slate-400":"bg-rose-500/15 border-rose-500/20 text-rose-200 hover:bg-rose-500/20 active:scale-95"}`,title:"Stop sharing",children:[m.jsx(eb,{size:14,className:"inline-block mr-1 -mt-0.5"}),"Stop"]})]}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["Until ",c.expires_at?vy(c.expires_at):"--",c.awb?`  AWB ${String(c.awb).toUpperCase()}`:""]}),I?m.jsxs("p",{className:"mt-2 text-[11px] font-bold text-amber-200",children:["Location error: ",I]}):null,y?m.jsx("p",{className:"mt-2 text-[11px] font-bold text-rose-200",children:y}):null]})]}):m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-11 h-11 rounded-2xl bg-violet-500/15 border border-violet-500/20 flex items-center justify-center",children:m.jsx(Rs,{size:18,className:"text-violet-200"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-sm font-black text-white truncate",children:"Location request"}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["Expires ",j!=null&&j.expires_at?vy(j.expires_at):"--",j!=null&&j.awb?`  AWB ${String(j.awb).toUpperCase()}`:""]}),y?m.jsx("p",{className:"mt-2 text-[11px] font-bold text-rose-200",children:y}):null]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{type:"button",onClick:O,disabled:String(g)===String(j==null?void 0:j.id),className:`w-11 h-11 rounded-2xl border flex items-center justify-center transition-all ${String(g)===String(j==null?void 0:j.id)?"opacity-60 cursor-not-allowed bg-slate-900/40 border-white/10 text-slate-500":"bg-slate-900/40 border-white/10 text-slate-300 hover:bg-white/5 active:scale-95"}`,title:"Deny",children:m.jsx(_a,{size:18})}),m.jsxs("button",{type:"button",onClick:F,disabled:String(g)===String(j==null?void 0:j.id),className:`px-4 h-11 rounded-2xl border text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 transition-all ${String(g)===String(j==null?void 0:j.id)?"opacity-60 cursor-not-allowed bg-emerald-500/10 border-emerald-500/20 text-emerald-200":"bg-emerald-500/15 border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95"}`,title:"Start sharing",children:[String(g)===String(j==null?void 0:j.id)?m.jsx(pn,{size:16,className:"animate-spin"}):m.jsx(n8,{size:16}),"Share"]})]})]})})})})}function ok(){const[e,t]=B.useState(!1);return m.jsxs("div",{className:"min-h-screen pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[" ",m.jsx("div",{className:"max-w-xl mx-auto",children:m.jsx(dE,{context:{openMenu:()=>t(!0)}})}),m.jsx(nk,{onOpenMenu:()=>t(!0)}),m.jsx(rk,{open:e,onClose:()=>t(!1)}),m.jsx(ik,{}),m.jsx(sk,{})]})}function ak(){const[e,t]=B.useState(null),[n,i]=B.useState(!0);B.useEffect(()=>{(async()=>{try{const v=localStorage.getItem("token"),y=await jb(v);t(y)}catch(v){console.error("Failed to fetch stats",v)}finally{i(!1)}})()},[]);const a=(g,v=2e3)=>{const[y,C]=B.useState(0);return B.useEffect(()=>{let b=0;const T=g/(v/16),I=setInterval(()=>{b+=T,b>=g?(C(g),clearInterval(I)):C(Math.floor(b))},16);return()=>clearInterval(I)},[g,v]),y},c=a((e==null?void 0:e.today_count)||0),f=a((e==null?void 0:e.total_count)||0);return n?m.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-pulse",children:[m.jsx("div",{className:"h-24 glass-strong rounded-3xl border-iridescent opacity-50"}),m.jsx("div",{className:"h-24 glass-strong rounded-3xl border-iridescent opacity-50"})]}):m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"glass-strong p-5 rounded-3xl shadow-xl shadow-brand-blue/20 border-iridescent flex flex-col justify-between relative overflow-hidden group",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-blue/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),m.jsx("div",{className:"absolute -right-4 -top-4 opacity-10 scale-150 group-hover:rotate-12 transition-transform duration-500",children:m.jsx(Nh,{size:80,className:"text-brand-blue"})}),m.jsxs("div",{className:"relative z-10 flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-1.5 bg-brand-blue/20 rounded-lg",children:m.jsx(Yd,{size:16,className:"text-brand-blue"})}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Today"})]}),m.jsxs("div",{className:"relative z-10",children:[m.jsx("span",{className:"text-3xl font-black text-white",children:c}),m.jsx("p",{className:"text-[10px] font-bold text-slate-400",children:"Success Syncs"})]})]}),m.jsxs("div",{className:"glass-strong p-5 rounded-3xl shadow-sm border-iridescent flex flex-col justify-between relative overflow-hidden group",children:[m.jsx("div",{className:"absolute -right-4 -top-4 opacity-5 scale-150 text-slate-400 group-hover:rotate-12 transition-transform duration-500",children:m.jsx(V_,{size:80})}),m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-1.5 bg-slate-700/50 rounded-lg text-slate-400",children:m.jsx(Os,{size:16})}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"All Time"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-3xl font-black text-white",children:f}),m.jsx("p",{className:"text-[10px] font-bold text-slate-400",children:"Total Updates"})]})]})]})}var qe;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(qe||(qe={}));var _y=new Map([[qe.QR_CODE,"QR_CODE"],[qe.AZTEC,"AZTEC"],[qe.CODABAR,"CODABAR"],[qe.CODE_39,"CODE_39"],[qe.CODE_93,"CODE_93"],[qe.CODE_128,"CODE_128"],[qe.DATA_MATRIX,"DATA_MATRIX"],[qe.MAXICODE,"MAXICODE"],[qe.ITF,"ITF"],[qe.EAN_13,"EAN_13"],[qe.EAN_8,"EAN_8"],[qe.PDF_417,"PDF_417"],[qe.RSS_14,"RSS_14"],[qe.RSS_EXPANDED,"RSS_EXPANDED"],[qe.UPC_A,"UPC_A"],[qe.UPC_E,"UPC_E"],[qe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),by;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(by||(by={}));function lk(e){return Object.values(qe).includes(e)}var So;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(So||(So={}));var Di=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[So.SCAN_TYPE_CAMERA,So.SCAN_TYPE_FILE],e}(),rC=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!_y.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,_y.get(t))},e}(),Cy=function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),fp;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(fp||(fp={}));var iC=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:fp.UNKWOWN_ERROR}},e}(),sC=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function $i(e){return typeof e>"u"||e===null}function ck(e,t,n){return e>n?n:e<t?t:e}var Ka=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),$t=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),Sy=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),oC=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var i=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],c=new Set(a),f=Object.keys(t),g=0,v=f;g<v.length;g++){var y=v[g];if(c.has(y))return n.logError("".concat(y," is not supported videoConstaints."),!0),!1}return!0},e}(),pp={exports:{}};(function(e,t){(function(n,i){i(t)})(ka,function(n){function i(P){return P==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,r){P.__proto__=r}||function(P,r){for(var s in r)r.hasOwnProperty(s)&&(P[s]=r[s])};function c(P,r){a(P,r);function s(){this.constructor=P}P.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function f(P,r){var s=Object.setPrototypeOf;s?s(P,r):P.__proto__=r}function g(P,r){r===void 0&&(r=P.constructor);var s=Error.captureStackTrace;s&&s(P,r)}var v=function(P){c(r,P);function r(s){var l=this.constructor,u=P.call(this,s)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),f(u,l.prototype),g(u),u}return r}(Error);class y extends v{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}y.kind="Exception";class C extends y{}C.kind="ArgumentException";class b extends y{}b.kind="IllegalArgumentException";class T{constructor(r){if(this.binarizer=r,r===null)throw new b("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,l,u){const d=this.binarizer.getLuminanceSource().crop(r,s,l,u);return new T(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new T(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new T(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class I extends y{static getChecksumInstance(){return new I}}I.kind="ChecksumException";class z{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class R{static arraycopy(r,s,l,u,d){for(;d--;)l[u++]=r[s++]}static currentTimeMillis(){return Date.now()}}class j extends y{}j.kind="IndexOutOfBoundsException";class F extends j{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}F.kind="ArrayIndexOutOfBoundsException";class O{static fill(r,s){for(let l=0,u=r.length;l<u;l++)r[l]=s}static fillWithin(r,s,l,u){O.rangeCheck(r.length,s,l);for(let d=s;d<l;d++)r[d]=u}static rangeCheck(r,s,l){if(s>l)throw new b("fromIndex("+s+") > toIndex("+l+")");if(s<0)throw new F(s);if(l>r)throw new F(l)}static asList(...r){return r}static create(r,s,l){return Array.from({length:r}).map(d=>Array.from({length:s}).fill(l))}static createInt32Array(r,s,l){return Array.from({length:r}).map(d=>Int32Array.from({length:s}).fill(l))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let l=0,u=r.length;l<u;l++)if(r[l]!==s[l])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const l of r)s=31*s+l;return s}static fillUint8Array(r,s){for(let l=0;l!==r.length;l++)r[l]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const l=new Uint8Array(s);return l.set(r),l}return r.slice(0,s)}static copyOfRange(r,s,l){const u=l-s,d=new Int32Array(u);return R.arraycopy(r,s,d,0,u),d}static binarySearch(r,s,l){l===void 0&&(l=O.numberComparator);let u=0,d=r.length-1;for(;u<=d;){const p=d+u>>1,x=l(s,r[p]);if(x>0)u=p+1;else if(x<0)d=p-1;else return p}return-u-1}static numberComparator(r,s){return r-s}}class k{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let l=31;return s=r<<16,s!==0&&(l-=16,r=s),s=r<<8,s!==0&&(l-=8,r=s),s=r<<4,s!==0&&(l-=4,r=s),s=r<<2,s!==0&&(l-=2,r=s),l-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}k.MIN_VALUE_32_BITS=-2147483648,k.MAX_VALUE=Number.MAX_SAFE_INTEGER;class W{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=W.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=W.makeArray(r);R.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const l=this.bits;let u=Math.floor(r/32),d=l[u];d&=~((1<<(r&31))-1);const p=l.length;for(;d===0;){if(++u===p)return s;d=l[u]}const x=u*32+k.numberOfTrailingZeros(d);return x>s?s:x}getNextUnset(r){const s=this.size;if(r>=s)return s;const l=this.bits;let u=Math.floor(r/32),d=~l[u];d&=~((1<<(r&31))-1);const p=l.length;for(;d===0;){if(++u===p)return s;d=~l[u]}const x=u*32+k.numberOfTrailingZeros(d);return x>s?s:x}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new b;if(s===r)return;s--;const l=Math.floor(r/32),u=Math.floor(s/32),d=this.bits;for(let p=l;p<=u;p++){const x=p>l?0:r&31,S=(2<<(p<u?31:s&31))-(1<<x);d[p]|=S}}clear(){const r=this.bits.length,s=this.bits;for(let l=0;l<r;l++)s[l]=0}isRange(r,s,l){if(s<r||r<0||s>this.size)throw new b;if(s===r)return!0;s--;const u=Math.floor(r/32),d=Math.floor(s/32),p=this.bits;for(let x=u;x<=d;x++){const _=x>u?0:r&31,E=(2<<(x<d?31:s&31))-(1<<_)&4294967295;if((p[x]&E)!==(l?E:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new b("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let l=s;l>0;l--)this.appendBit((r>>l-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let l=0;l<s;l++)this.appendBit(r.get(l))}xor(r){if(this.size!==r.size)throw new b("Sizes don't match");const s=this.bits;for(let l=0,u=s.length;l<u;l++)s[l]^=r.bits[l]}toBytes(r,s,l,u){for(let d=0;d<u;d++){let p=0;for(let x=0;x<8;x++)this.get(r)&&(p|=1<<7-x),r++;s[l+d]=p}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),l=s+1,u=this.bits;for(let d=0;d<l;d++){let p=u[d];p=p>>1&1431655765|(p&1431655765)<<1,p=p>>2&858993459|(p&858993459)<<2,p=p>>4&252645135|(p&252645135)<<4,p=p>>8&16711935|(p&16711935)<<8,p=p>>16&65535|(p&65535)<<16,r[s-d]=p}if(this.size!==l*32){const d=l*32-this.size;let p=r[0]>>>d;for(let x=1;x<l;x++){const _=r[x];p|=_<<32-d,r[x-1]=p,p=_>>>d}r[l-1]=p}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof W))return!1;const s=r;return this.size===s.size&&O.equals(this.bits,s.bits)}hashCode(){return 31*this.size+O.hashCode(this.bits)}toString(){let r="";for(let s=0,l=this.size;s<l;s++)s&7||(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new W(this.size,this.bits.slice())}}var K;(function(P){P[P.OTHER=0]="OTHER",P[P.PURE_BARCODE=1]="PURE_BARCODE",P[P.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",P[P.TRY_HARDER=3]="TRY_HARDER",P[P.CHARACTER_SET=4]="CHARACTER_SET",P[P.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",P[P.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",P[P.ASSUME_GS1=7]="ASSUME_GS1",P[P.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",P[P.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",P[P.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(K||(K={}));var Y=K;class H extends y{static getFormatInstance(){return new H}}H.kind="FormatException";var Q;(function(P){P[P.Cp437=0]="Cp437",P[P.ISO8859_1=1]="ISO8859_1",P[P.ISO8859_2=2]="ISO8859_2",P[P.ISO8859_3=3]="ISO8859_3",P[P.ISO8859_4=4]="ISO8859_4",P[P.ISO8859_5=5]="ISO8859_5",P[P.ISO8859_6=6]="ISO8859_6",P[P.ISO8859_7=7]="ISO8859_7",P[P.ISO8859_8=8]="ISO8859_8",P[P.ISO8859_9=9]="ISO8859_9",P[P.ISO8859_10=10]="ISO8859_10",P[P.ISO8859_11=11]="ISO8859_11",P[P.ISO8859_13=12]="ISO8859_13",P[P.ISO8859_14=13]="ISO8859_14",P[P.ISO8859_15=14]="ISO8859_15",P[P.ISO8859_16=15]="ISO8859_16",P[P.SJIS=16]="SJIS",P[P.Cp1250=17]="Cp1250",P[P.Cp1251=18]="Cp1251",P[P.Cp1252=19]="Cp1252",P[P.Cp1256=20]="Cp1256",P[P.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",P[P.UTF8=22]="UTF8",P[P.ASCII=23]="ASCII",P[P.Big5=24]="Big5",P[P.GB18030=25]="GB18030",P[P.EUC_KR=26]="EUC_KR"})(Q||(Q={}));class M{constructor(r,s,l,...u){this.valueIdentifier=r,this.name=l,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=u,M.VALUE_IDENTIFIER_TO_ECI.set(r,this),M.NAME_TO_ECI.set(l,this);const d=this.values;for(let p=0,x=d.length;p!==x;p++){const _=d[p];M.VALUES_TO_ECI.set(_,this)}for(const p of u)M.NAME_TO_ECI.set(p,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new H("incorect value");const s=M.VALUES_TO_ECI.get(r);if(s===void 0)throw new H("incorect value");return s}static getCharacterSetECIByName(r){const s=M.NAME_TO_ECI.get(r);if(s===void 0)throw new H("incorect value");return s}equals(r){if(!(r instanceof M))return!1;const s=r;return this.getName()===s.getName()}}M.VALUE_IDENTIFIER_TO_ECI=new Map,M.VALUES_TO_ECI=new Map,M.NAME_TO_ECI=new Map,M.Cp437=new M(Q.Cp437,Int32Array.from([0,2]),"Cp437"),M.ISO8859_1=new M(Q.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),M.ISO8859_2=new M(Q.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),M.ISO8859_3=new M(Q.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),M.ISO8859_4=new M(Q.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),M.ISO8859_5=new M(Q.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),M.ISO8859_6=new M(Q.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),M.ISO8859_7=new M(Q.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),M.ISO8859_8=new M(Q.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),M.ISO8859_9=new M(Q.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),M.ISO8859_10=new M(Q.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),M.ISO8859_11=new M(Q.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),M.ISO8859_13=new M(Q.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),M.ISO8859_14=new M(Q.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),M.ISO8859_15=new M(Q.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),M.ISO8859_16=new M(Q.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),M.SJIS=new M(Q.SJIS,20,"SJIS","Shift_JIS"),M.Cp1250=new M(Q.Cp1250,21,"Cp1250","windows-1250"),M.Cp1251=new M(Q.Cp1251,22,"Cp1251","windows-1251"),M.Cp1252=new M(Q.Cp1252,23,"Cp1252","windows-1252"),M.Cp1256=new M(Q.Cp1256,24,"Cp1256","windows-1256"),M.UnicodeBigUnmarked=new M(Q.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),M.UTF8=new M(Q.UTF8,26,"UTF8","UTF-8"),M.ASCII=new M(Q.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),M.Big5=new M(Q.Big5,28,"Big5"),M.GB18030=new M(Q.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),M.EUC_KR=new M(Q.EUC_KR,30,"EUC_KR","EUC-KR");class q extends y{}q.kind="UnsupportedOperationException";class ie{static decode(r,s){const l=this.encodingName(s);return this.customDecoder?this.customDecoder(r,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(r,l):new TextDecoder(l).decode(r)}static shouldDecodeOnFallback(r){return!ie.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const l=this.encodingName(s);return this.customEncoder?this.customEncoder(r,l):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof M?r:M.getCharacterSetECIByName(r)}static decodeFallback(r,s){const l=this.encodingCharacterSet(s);if(ie.isDecodeFallbackSupported(l)){let u="";for(let d=0,p=r.length;d<p;d++){let x=r[d].toString(16);x.length<2&&(x="0"+x),u+="%"+x}return decodeURIComponent(u)}if(l.equals(M.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new q(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(M.UTF8)||r.equals(M.ISO8859_1)||r.equals(M.ASCII)}static encodeFallback(r){const l=btoa(unescape(encodeURIComponent(r))).split(""),u=[];for(let d=0;d<l.length;d++)u.push(l[d].charCodeAt(0));return new Uint8Array(u)}}class ae{static castAsNonUtf8Char(r,s=null){const l=s?s.getName():this.ISO88591;return ie.decode(new Uint8Array([r]),l)}static guessEncoding(r,s){if(s!=null&&s.get(Y.CHARACTER_SET)!==void 0)return s.get(Y.CHARACTER_SET).toString();const l=r.length;let u=!0,d=!0,p=!0,x=0,_=0,S=0,E=0,D=0,U=0,X=0,J=0,ne=0,ce=0,fe=0;const Ie=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let Me=0;Me<l&&(u||d||p);Me++){const Ee=r[Me]&255;p&&(x>0?Ee&128?x--:p=!1:Ee&128&&(Ee&64?(x++,Ee&32?(x++,Ee&16?(x++,Ee&8?p=!1:E++):S++):_++):p=!1)),u&&(Ee>127&&Ee<160?u=!1:Ee>159&&(Ee<192||Ee===215||Ee===247)&&fe++),d&&(D>0?Ee<64||Ee===127||Ee>252?d=!1:D--:Ee===128||Ee===160||Ee>239?d=!1:Ee>160&&Ee<224?(U++,J=0,X++,X>ne&&(ne=X)):Ee>127?(D++,X=0,J++,J>ce&&(ce=J)):(X=0,J=0))}return p&&x>0&&(p=!1),d&&D>0&&(d=!1),p&&(Ie||_+S+E>0)?ae.UTF8:d&&(ae.ASSUME_SHIFT_JIS||ne>=3||ce>=3)?ae.SHIFT_JIS:u&&d?ne===2&&U===2||fe*10>=l?ae.SHIFT_JIS:ae.ISO88591:u?ae.ISO88591:d?ae.SHIFT_JIS:p?ae.UTF8:ae.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let l=-1;function u(p,x,_,S,E,D){if(p==="%%")return"%";if(s[++l]===void 0)return;p=S?parseInt(S.substr(1)):void 0;let U=E?parseInt(E.substr(1)):void 0,X;switch(D){case"s":X=s[l];break;case"c":X=s[l][0];break;case"f":X=parseFloat(s[l]).toFixed(p);break;case"p":X=parseFloat(s[l]).toPrecision(p);break;case"e":X=parseFloat(s[l]).toExponential(p);break;case"x":X=parseInt(s[l]).toString(U||16);break;case"d":X=parseFloat(parseInt(s[l],U||10).toPrecision(p)).toFixed(0);break}X=typeof X=="object"?JSON.stringify(X):(+X).toString(U);let J=parseInt(_),ne=_&&_[0]+""=="0"?"0":" ";for(;X.length<J;)X=x!==void 0?X+ne:ne+X;return X}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,u)}static getBytes(r,s){return ie.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}ae.SHIFT_JIS=M.SJIS.getName(),ae.GB2312="GB2312",ae.ISO88591=M.ISO8859_1.getName(),ae.EUC_JP="EUC_JP",ae.UTF8=M.UTF8.getName(),ae.PLATFORM_DEFAULT_ENCODING=ae.UTF8,ae.ASSUME_SHIFT_JIS=!1;class we{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=ae.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,l){for(let u=s;s<s+l;u++)this.append(r[u]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class Ne{constructor(r,s,l,u){if(this.width=r,this.height=s,this.rowSize=l,this.bits=u,s==null&&(s=r),this.height=s,r<1||s<1)throw new b("Both dimensions must be greater than 0");l==null&&(l=Math.floor((r+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,l=r[0].length,u=new Ne(l,s);for(let d=0;d<s;d++){const p=r[d];for(let x=0;x<l;x++)p[x]&&u.set(x,d)}return u}static parseFromString(r,s,l){if(r===null)throw new b("stringRepresentation cannot be null");const u=new Array(r.length);let d=0,p=0,x=-1,_=0,S=0;for(;S<r.length;)if(r.charAt(S)===`
`||r.charAt(S)==="\r"){if(d>p){if(x===-1)x=d-p;else if(d-p!==x)throw new b("row lengths do not match");p=d,_++}S++}else if(r.substring(S,S+s.length)===s)S+=s.length,u[d]=!0,d++;else if(r.substring(S,S+l.length)===l)S+=l.length,u[d]=!1,d++;else throw new b("illegal character encountered: "+r.substring(S));if(d>p){if(x===-1)x=d-p;else if(d-p!==x)throw new b("row lengths do not match");_++}const E=new Ne(x,_);for(let D=0;D<d;D++)u[D]&&E.set(Math.floor(D%x),Math.floor(D/x));return E}get(r,s){const l=s*this.rowSize+Math.floor(r/32);return(this.bits[l]>>>(r&31)&1)!==0}set(r,s){const l=s*this.rowSize+Math.floor(r/32);this.bits[l]|=1<<(r&31)&4294967295}unset(r,s){const l=s*this.rowSize+Math.floor(r/32);this.bits[l]&=~(1<<(r&31)&4294967295)}flip(r,s){const l=s*this.rowSize+Math.floor(r/32);this.bits[l]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new b("input matrix dimensions do not match");const s=new W(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let d=0,p=this.height;d<p;d++){const x=d*l,_=r.getRow(d,s).getBitArray();for(let S=0;S<l;S++)u[x+S]^=_[S]}}clear(){const r=this.bits,s=r.length;for(let l=0;l<s;l++)r[l]=0}setRegion(r,s,l,u){if(s<0||r<0)throw new b("Left and top must be nonnegative");if(u<1||l<1)throw new b("Height and width must be at least 1");const d=r+l,p=s+u;if(p>this.height||d>this.width)throw new b("The region must fit inside the matrix");const x=this.rowSize,_=this.bits;for(let S=s;S<p;S++){const E=S*x;for(let D=r;D<d;D++)_[E+Math.floor(D/32)]|=1<<(D&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new W(this.width):s.clear();const l=this.rowSize,u=this.bits,d=r*l;for(let p=0;p<l;p++)s.setBulk(p*32,u[d+p]);return s}setRow(r,s){R.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let l=new W(r),u=new W(r);for(let d=0,p=Math.floor((s+1)/2);d<p;d++)l=this.getRow(d,l),u=this.getRow(s-1-d,u),l.reverse(),u.reverse(),this.setRow(d,u),this.setRow(s-1-d,l)}getEnclosingRectangle(){const r=this.width,s=this.height,l=this.rowSize,u=this.bits;let d=r,p=s,x=-1,_=-1;for(let S=0;S<s;S++)for(let E=0;E<l;E++){const D=u[S*l+E];if(D!==0){if(S<p&&(p=S),S>_&&(_=S),E*32<d){let U=0;for(;!(D<<31-U&4294967295);)U++;E*32+U<d&&(d=E*32+U)}if(E*32+31>x){let U=31;for(;!(D>>>U);)U--;E*32+U>x&&(x=E*32+U)}}}return x<d||_<p?null:Int32Array.from([d,p,x-d+1,_-p+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let l=0;for(;l<s.length&&s[l]===0;)l++;if(l===s.length)return null;const u=l/r;let d=l%r*32;const p=s[l];let x=0;for(;!(p<<31-x&4294967295);)x++;return d+=x,Int32Array.from([d,u])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let l=s.length-1;for(;l>=0&&s[l]===0;)l--;if(l<0)return null;const u=Math.floor(l/r);let d=Math.floor(l%r)*32;const p=s[l];let x=31;for(;!(p>>>x);)x--;return d+=x,Int32Array.from([d,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof Ne))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&O.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+O.hashCode(this.bits),r}toString(r="X ",s="  ",l=`
`){return this.buildToString(r,s,l)}buildToString(r,s,l){let u=new we;for(let d=0,p=this.height;d<p;d++){for(let x=0,_=this.width;x<_;x++)u.append(this.get(x,d)?r:s);u.append(l)}return u.toString()}clone(){return new Ne(this.width,this.height,this.rowSize,this.bits.slice())}}class oe extends y{static getNotFoundInstance(){return new oe}}oe.kind="NotFoundException";class se extends z{constructor(r){super(r),this.luminances=se.EMPTY,this.buckets=new Int32Array(se.LUMINANCE_BUCKETS)}getBlackRow(r,s){const l=this.getLuminanceSource(),u=l.getWidth();s==null||s.getSize()<u?s=new W(u):s.clear(),this.initArrays(u);const d=l.getRow(r,this.luminances),p=this.buckets;for(let _=0;_<u;_++)p[(d[_]&255)>>se.LUMINANCE_SHIFT]++;const x=se.estimateBlackPoint(p);if(u<3)for(let _=0;_<u;_++)(d[_]&255)<x&&s.set(_);else{let _=d[0]&255,S=d[1]&255;for(let E=1;E<u-1;E++){const D=d[E+1]&255;(S*4-_-D)/2<x&&s.set(E),_=S,S=D}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),l=r.getHeight(),u=new Ne(s,l);this.initArrays(s);const d=this.buckets;for(let _=1;_<5;_++){const S=Math.floor(l*_/5),E=r.getRow(S,this.luminances),D=Math.floor(s*4/5);for(let U=Math.floor(s/5);U<D;U++){const X=E[U]&255;d[X>>se.LUMINANCE_SHIFT]++}}const p=se.estimateBlackPoint(d),x=r.getMatrix();for(let _=0;_<l;_++){const S=_*s;for(let E=0;E<s;E++)(x[S+E]&255)<p&&u.set(E,_)}return u}createBinarizer(r){return new se(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let l=0;l<se.LUMINANCE_BUCKETS;l++)s[l]=0}static estimateBlackPoint(r){const s=r.length;let l=0,u=0,d=0;for(let E=0;E<s;E++)r[E]>d&&(u=E,d=r[E]),r[E]>l&&(l=r[E]);let p=0,x=0;for(let E=0;E<s;E++){const D=E-u,U=r[E]*D*D;U>x&&(p=E,x=U)}if(u>p){const E=u;u=p,p=E}if(p-u<=s/16)throw new oe;let _=p-1,S=-1;for(let E=p-1;E>u;E--){const D=E-u,U=D*D*(p-E)*(l-r[E]);U>S&&(_=E,S=U)}return _<<se.LUMINANCE_SHIFT}}se.LUMINANCE_BITS=5,se.LUMINANCE_SHIFT=8-se.LUMINANCE_BITS,se.LUMINANCE_BUCKETS=1<<se.LUMINANCE_BITS,se.EMPTY=Uint8ClampedArray.from([0]);class ve extends se{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),l=r.getHeight();if(s>=ve.MINIMUM_DIMENSION&&l>=ve.MINIMUM_DIMENSION){const u=r.getMatrix();let d=s>>ve.BLOCK_SIZE_POWER;s&ve.BLOCK_SIZE_MASK&&d++;let p=l>>ve.BLOCK_SIZE_POWER;l&ve.BLOCK_SIZE_MASK&&p++;const x=ve.calculateBlackPoints(u,d,p,s,l),_=new Ne(s,l);ve.calculateThresholdForBlock(u,d,p,s,l,x,_),this.matrix=_}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new ve(r)}static calculateThresholdForBlock(r,s,l,u,d,p,x){const _=d-ve.BLOCK_SIZE,S=u-ve.BLOCK_SIZE;for(let E=0;E<l;E++){let D=E<<ve.BLOCK_SIZE_POWER;D>_&&(D=_);const U=ve.cap(E,2,l-3);for(let X=0;X<s;X++){let J=X<<ve.BLOCK_SIZE_POWER;J>S&&(J=S);const ne=ve.cap(X,2,s-3);let ce=0;for(let Ie=-2;Ie<=2;Ie++){const Me=p[U+Ie];ce+=Me[ne-2]+Me[ne-1]+Me[ne]+Me[ne+1]+Me[ne+2]}const fe=ce/25;ve.thresholdBlock(r,J,D,fe,u,x)}}}static cap(r,s,l){return r<s?s:r>l?l:r}static thresholdBlock(r,s,l,u,d,p){for(let x=0,_=l*d+s;x<ve.BLOCK_SIZE;x++,_+=d)for(let S=0;S<ve.BLOCK_SIZE;S++)(r[_+S]&255)<=u&&p.set(s+S,l+x)}static calculateBlackPoints(r,s,l,u,d){const p=d-ve.BLOCK_SIZE,x=u-ve.BLOCK_SIZE,_=new Array(l);for(let S=0;S<l;S++){_[S]=new Int32Array(s);let E=S<<ve.BLOCK_SIZE_POWER;E>p&&(E=p);for(let D=0;D<s;D++){let U=D<<ve.BLOCK_SIZE_POWER;U>x&&(U=x);let X=0,J=255,ne=0;for(let fe=0,Ie=E*u+U;fe<ve.BLOCK_SIZE;fe++,Ie+=u){for(let Me=0;Me<ve.BLOCK_SIZE;Me++){const Ee=r[Ie+Me]&255;X+=Ee,Ee<J&&(J=Ee),Ee>ne&&(ne=Ee)}if(ne-J>ve.MIN_DYNAMIC_RANGE)for(fe++,Ie+=u;fe<ve.BLOCK_SIZE;fe++,Ie+=u)for(let Me=0;Me<ve.BLOCK_SIZE;Me++)X+=r[Ie+Me]&255}let ce=X>>ve.BLOCK_SIZE_POWER*2;if(ne-J<=ve.MIN_DYNAMIC_RANGE&&(ce=J/2,S>0&&D>0)){const fe=(_[S-1][D]+2*_[S][D-1]+_[S-1][D-1])/4;J<fe&&(ce=fe)}_[S][D]=ce}}return _}}ve.BLOCK_SIZE_POWER=3,ve.BLOCK_SIZE=1<<ve.BLOCK_SIZE_POWER,ve.BLOCK_SIZE_MASK=ve.BLOCK_SIZE-1,ve.MINIMUM_DIMENSION=ve.BLOCK_SIZE*5,ve.MIN_DYNAMIC_RANGE=24;class ee{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,l,u){throw new q("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new q("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new q("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new we;for(let l=0;l<this.height;l++){const u=this.getRow(l,r);for(let d=0;d<this.width;d++){const p=u[d]&255;let x;p<64?x="#":p<128?x="+":p<192?x=".":x=" ",s.append(x)}s.append(`
`)}return s.toString()}}class _e extends ee{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const l=this.delegate.getRow(r,s),u=this.getWidth();for(let d=0;d<u;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(s);for(let u=0;u<s;u++)l[u]=255-(r[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,l,u){return new _e(this.delegate.crop(r,s,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new _e(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new _e(this.delegate.rotateCounterClockwise45())}}class pe extends ee{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=pe.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return pe.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,l){const u=new Uint8ClampedArray(s*l);for(let d=0,p=0,x=r.length;d<x;d+=4,p++){let _;if(r[d+3]===0)_=255;else{const E=r[d],D=r[d+1],U=r[d+2];_=306*E+601*D+117*U+512>>10}u[p]=_}return u}getRow(r,s){if(r<0||r>=this.getHeight())throw new b("Requested row is outside the image: "+r);const l=this.getWidth(),u=r*l;return s===null?s=this.buffer.slice(u,u+l):(s.length<l&&(s=new Uint8ClampedArray(l)),s.set(this.buffer.slice(u,u+l))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,l,u){return super.crop(r,s,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),l=s.getContext("2d"),u=r*pe.DEGREE_TO_RADIANS,d=this.canvas.width,p=this.canvas.height,x=Math.ceil(Math.abs(Math.cos(u))*d+Math.abs(Math.sin(u))*p),_=Math.ceil(Math.abs(Math.sin(u))*d+Math.abs(Math.cos(u))*p);return s.width=x,s.height=_,l.translate(x/2,_/2),l.rotate(u),l.drawImage(this.canvas,d/-2,p/-2),this.buffer=pe.makeBufferFromCanvasImageData(s),this}invert(){return new _e(this)}}pe.DEGREE_TO_RADIANS=Math.PI/180;class he{constructor(r,s,l){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Te=(globalThis||ka||self||window||void 0)&&(globalThis||ka||self||window||void 0).__awaiter||function(P,r,s,l){function u(d){return d instanceof s?d:new s(function(p){p(d)})}return new(s||(s=Promise))(function(d,p){function x(E){try{S(l.next(E))}catch(D){p(D)}}function _(E){try{S(l.throw(E))}catch(D){p(D)}}function S(E){E.done?d(E.value):u(E.value).then(x,_)}S((l=l.apply(P,r||[])).next())})};class ze{constructor(r,s=500,l){this.reader=r,this.timeBetweenScansMillis=s,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Te(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const l of r){const u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;const d=l.deviceId||l.id,p=l.label||`Video device ${s.length+1}`,x=l.groupId,_={deviceId:d,label:p,kind:u,groupId:x};s.push(_)}return s})}getVideoInputDevices(){return Te(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new he(s.deviceId,s.label))})}findDeviceById(r){return Te(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(l=>l.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return Te(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return Te(this,void 0,void 0,function*(){this.reset();let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeOnceFromConstraints(u,s)})}decodeOnceFromConstraints(r,s){return Te(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(l,s)})}decodeOnceFromStream(r,s){return Te(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(r,s,l){return Te(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,l)})}decodeFromVideoDevice(r,s,l){return Te(this,void 0,void 0,function*(){let u;r?u={deviceId:{exact:r}}:u={facingMode:"environment"};const d={video:u};return yield this.decodeFromConstraints(d,s,l)})}decodeFromConstraints(r,s,l){return Te(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(u,s,l)})}decodeFromStream(r,s,l){return Te(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return Te(this,void 0,void 0,function*(){const l=this.prepareVideoElement(s);return this.addVideoSource(l,r),this.videoElement=l,this.stream=r,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(r){return new Promise((s,l)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Te(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const l=document.getElementById(r);if(!l)throw new C(`element with id '${r}' not found`);if(l.nodeName.toLowerCase()!==s.toLowerCase())throw new C(`element with id '${r}' must be an ${s} element`);return l}decodeFromImage(r,s){if(!r&&!s)throw new C("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new C("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,l){if(r===void 0&&s===void 0)throw new C("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,l):this.decodeFromVideoElementContinuously(r,l)}decodeFromImageElement(r){if(!r)throw new C("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let l;return this.isImageLoaded(s)?l=this.decodeOnce(s,!1,!0):l=this._decodeOnLoadImage(s),l}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const l=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(l,s)}_decodeFromVideoElementSetup(r){if(!r)throw new C("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new C("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const l=this._decodeOnLoadImage(s);return s.src=r,l}decodeFromVideoUrl(r){if(!r)throw new C("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),l=this.decodeFromVideoElement(s);return s.src=r,l}decodeFromVideoUrlContinuously(r,s){if(!r)throw new C("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,s);return l.src=r,u}_decodeOnLoadImage(r){return new Promise((s,l)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,l),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Te(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return Te(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,l=!0){this._stopAsyncDecode=!1;const u=(d,p)=>{if(this._stopAsyncDecode){p(new oe("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const x=this.decode(r);d(x)}catch(x){const _=s&&x instanceof oe,E=(x instanceof I||x instanceof H)&&l;if(_||E)return setTimeout(u,this._timeBetweenDecodingAttempts,d,p);p(x)}};return new Promise((d,p)=>u(d,p))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(r);s(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){s(null,u);const d=u instanceof I||u instanceof H,p=u instanceof oe;(d||p)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,l){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,l=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),l=new pe(s),u=new ve(l);return new T(u)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let l,u;return typeof r<"u"&&(r instanceof HTMLVideoElement?(l=r.videoWidth,u=r.videoHeight):r instanceof HTMLImageElement&&(l=r.naturalWidth||r.width,u=r.naturalHeight||r.height)),s.style.width=l+"px",s.style.height=u+"px",s.width=l,s.height=u,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class Le{constructor(r,s,l=s==null?0:8*s.length,u,d,p=R.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=l,this.resultPoints=u,this.format=d,this.timestamp=p,this.text=r,this.rawBytes=s,l==null?this.numBits=s==null?0:8*s.length:this.numBits=l,this.resultPoints=u,this.format=d,this.resultMetadata=null,p==null?this.timestamp=R.currentTimeMillis():this.timestamp=p}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const l=new Array(s.length+r.length);R.arraycopy(s,0,l,0,s.length),R.arraycopy(r,0,l,s.length,r.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var te;(function(P){P[P.AZTEC=0]="AZTEC",P[P.CODABAR=1]="CODABAR",P[P.CODE_39=2]="CODE_39",P[P.CODE_93=3]="CODE_93",P[P.CODE_128=4]="CODE_128",P[P.DATA_MATRIX=5]="DATA_MATRIX",P[P.EAN_8=6]="EAN_8",P[P.EAN_13=7]="EAN_13",P[P.ITF=8]="ITF",P[P.MAXICODE=9]="MAXICODE",P[P.PDF_417=10]="PDF_417",P[P.QR_CODE=11]="QR_CODE",P[P.RSS_14=12]="RSS_14",P[P.RSS_EXPANDED=13]="RSS_EXPANDED",P[P.UPC_A=14]="UPC_A",P[P.UPC_E=15]="UPC_E",P[P.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(te||(te={}));var le=te,De;(function(P){P[P.OTHER=0]="OTHER",P[P.ORIENTATION=1]="ORIENTATION",P[P.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",P[P.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",P[P.ISSUE_NUMBER=4]="ISSUE_NUMBER",P[P.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",P[P.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",P[P.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",P[P.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",P[P.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",P[P.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(De||(De={}));var st=De;class Tt{constructor(r,s,l,u,d=-1,p=-1){this.rawBytes=r,this.text=s,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=p,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Wt{exp(r){return this.expTable[r]}log(r){if(r===0)throw new b;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class bt{constructor(r,s){if(s.length===0)throw new b;this.field=r;const l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),R.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let l;if(r===1){l=0;for(let p=0,x=s.length;p!==x;p++){const _=s[p];l=Wt.addOrSubtract(l,_)}return l}l=s[0];const u=s.length,d=this.field;for(let p=1;p<u;p++)l=Wt.addOrSubtract(d.multiply(r,l),s[p]);return l}addOrSubtract(r){if(!this.field.equals(r.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,l=r.coefficients;if(s.length>l.length){const p=s;s=l,l=p}let u=new Int32Array(l.length);const d=l.length-s.length;R.arraycopy(l,0,u,0,d);for(let p=d;p<l.length;p++)u[p]=Wt.addOrSubtract(s[p-d],l[p]);return new bt(this.field,u)}multiply(r){if(!this.field.equals(r.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,l=s.length,u=r.coefficients,d=u.length,p=new Int32Array(l+d-1),x=this.field;for(let _=0;_<l;_++){const S=s[_];for(let E=0;E<d;E++)p[_+E]=Wt.addOrSubtract(p[_+E],x.multiply(S,u[E]))}return new bt(x,p)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,l=this.field,u=new Int32Array(s),d=this.coefficients;for(let p=0;p<s;p++)u[p]=l.multiply(d[p],r);return new bt(l,u)}multiplyByMonomial(r,s){if(r<0)throw new b;if(s===0)return this.field.getZero();const l=this.coefficients,u=l.length,d=new Int32Array(u+r),p=this.field;for(let x=0;x<u;x++)d[x]=p.multiply(l[x],s);return new bt(p,d)}divide(r){if(!this.field.equals(r.field))throw new b("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new b("Divide by 0");const s=this.field;let l=s.getZero(),u=this;const d=r.getCoefficient(r.getDegree()),p=s.inverse(d);for(;u.getDegree()>=r.getDegree()&&!u.isZero();){const x=u.getDegree()-r.getDegree(),_=s.multiply(u.getCoefficient(u.getDegree()),p),S=r.multiplyByMonomial(x,_),E=s.buildMonomial(x,_);l=l.addOrSubtract(E),u=u.addOrSubtract(S)}return[l,u]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);if(l!==0){if(l<0?(r+=" - ",l=-l):r.length>0&&(r+=" + "),s===0||l!==1){const u=this.field.log(l);u===0?r+="1":u===1?r+="a":(r+="a^",r+=u)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class In extends y{}In.kind="ArithmeticException";class ct extends Wt{constructor(r,s,l){super(),this.primitive=r,this.size=s,this.generatorBase=l;const u=new Int32Array(s);let d=1;for(let x=0;x<s;x++)u[x]=d,d*=2,d>=s&&(d^=r,d&=s-1);this.expTable=u;const p=new Int32Array(s);for(let x=0;x<s-1;x++)p[u[x]]=x;this.logTable=p,this.zero=new bt(this,Int32Array.from([0])),this.one=new bt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new b;if(s===0)return this.zero;const l=new Int32Array(r+1);return l[0]=s,new bt(this,l)}inverse(r){if(r===0)throw new In;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+k.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}ct.AZTEC_DATA_12=new ct(4201,4096,1),ct.AZTEC_DATA_10=new ct(1033,1024,1),ct.AZTEC_DATA_6=new ct(67,64,1),ct.AZTEC_PARAM=new ct(19,16,1),ct.QR_CODE_FIELD_256=new ct(285,256,0),ct.DATA_MATRIX_FIELD_256=new ct(301,256,1),ct.AZTEC_DATA_8=ct.DATA_MATRIX_FIELD_256,ct.MAXICODE_FIELD_64=ct.AZTEC_DATA_6;class Sn extends y{}Sn.kind="ReedSolomonException";class Kt extends y{}Kt.kind="IllegalStateException";class Pn{constructor(r){this.field=r}decode(r,s){const l=this.field,u=new bt(l,r),d=new Int32Array(s);let p=!0;for(let X=0;X<s;X++){const J=u.evaluateAt(l.exp(X+l.getGeneratorBase()));d[d.length-1-X]=J,J!==0&&(p=!1)}if(p)return;const x=new bt(l,d),_=this.runEuclideanAlgorithm(l.buildMonomial(s,1),x,s),S=_[0],E=_[1],D=this.findErrorLocations(S),U=this.findErrorMagnitudes(E,D);for(let X=0;X<D.length;X++){const J=r.length-1-l.log(D[X]);if(J<0)throw new Sn("Bad error location");r[J]=ct.addOrSubtract(r[J],U[X])}}runEuclideanAlgorithm(r,s,l){if(r.getDegree()<s.getDegree()){const X=r;r=s,s=X}const u=this.field;let d=r,p=s,x=u.getZero(),_=u.getOne();for(;p.getDegree()>=(l/2|0);){let X=d,J=x;if(d=p,x=_,d.isZero())throw new Sn("r_{i-1} was zero");p=X;let ne=u.getZero();const ce=d.getCoefficient(d.getDegree()),fe=u.inverse(ce);for(;p.getDegree()>=d.getDegree()&&!p.isZero();){const Ie=p.getDegree()-d.getDegree(),Me=u.multiply(p.getCoefficient(p.getDegree()),fe);ne=ne.addOrSubtract(u.buildMonomial(Ie,Me)),p=p.addOrSubtract(d.multiplyByMonomial(Ie,Me))}if(_=ne.multiply(x).addOrSubtract(J),p.getDegree()>=d.getDegree())throw new Kt("Division algorithm failed to reduce polynomial?")}const S=_.getCoefficient(0);if(S===0)throw new Sn("sigmaTilde(0) was zero");const E=u.inverse(S),D=_.multiplyScalar(E),U=p.multiplyScalar(E);return[D,U]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const l=new Int32Array(s);let u=0;const d=this.field;for(let p=1;p<d.getSize()&&u<s;p++)r.evaluateAt(p)===0&&(l[u]=d.inverse(p),u++);if(u!==s)throw new Sn("Error locator degree does not match number of roots");return l}findErrorMagnitudes(r,s){const l=s.length,u=new Int32Array(l),d=this.field;for(let p=0;p<l;p++){const x=d.inverse(s[p]);let _=1;for(let S=0;S<l;S++)if(p!==S){const E=d.multiply(s[S],x),D=E&1?E&-2:E|1;_=d.multiply(_,D)}u[p]=d.multiply(r.evaluateAt(x),d.inverse(_)),d.getGeneratorBase()!==0&&(u[p]=d.multiply(u[p],x))}return u}}var wt;(function(P){P[P.UPPER=0]="UPPER",P[P.LOWER=1]="LOWER",P[P.MIXED=2]="MIXED",P[P.DIGIT=3]="DIGIT",P[P.PUNCT=4]="PUNCT",P[P.BINARY=5]="BINARY"})(wt||(wt={}));class It{decode(r){this.ddata=r;let s=r.getBits(),l=this.extractBits(s),u=this.correctBits(l),d=It.convertBoolArrayToByteArray(u),p=It.getEncodedData(u),x=new Tt(d,p,null,null);return x.setNumBits(u.length),x}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,l=wt.UPPER,u=wt.UPPER,d="",p=0;for(;p<s;)if(u===wt.BINARY){if(s-p<5)break;let x=It.readCode(r,p,5);if(p+=5,x===0){if(s-p<11)break;x=It.readCode(r,p,11)+31,p+=11}for(let _=0;_<x;_++){if(s-p<8){p=s;break}const S=It.readCode(r,p,8);d+=ae.castAsNonUtf8Char(S),p+=8}u=l}else{let x=u===wt.DIGIT?4:5;if(s-p<x)break;let _=It.readCode(r,p,x);p+=x;let S=It.getCharacter(u,_);S.startsWith("CTRL_")?(l=u,u=It.getTable(S.charAt(5)),S.charAt(6)==="L"&&(l=u)):(d+=S,u=l)}return d}static getTable(r){switch(r){case"L":return wt.LOWER;case"P":return wt.PUNCT;case"M":return wt.MIXED;case"D":return wt.DIGIT;case"B":return wt.BINARY;case"U":default:return wt.UPPER}}static getCharacter(r,s){switch(r){case wt.UPPER:return It.UPPER_TABLE[s];case wt.LOWER:return It.LOWER_TABLE[s];case wt.MIXED:return It.MIXED_TABLE[s];case wt.PUNCT:return It.PUNCT_TABLE[s];case wt.DIGIT:return It.DIGIT_TABLE[s];default:throw new Kt("Bad table")}}correctBits(r){let s,l;this.ddata.getNbLayers()<=2?(l=6,s=ct.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,s=ct.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,s=ct.AZTEC_DATA_10):(l=12,s=ct.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),d=r.length/l;if(d<u)throw new H;let p=r.length%l,x=new Int32Array(d);for(let U=0;U<d;U++,p+=l)x[U]=It.readCode(r,p,l);try{new Pn(s).decode(x,d-u)}catch(U){throw new H(U)}let _=(1<<l)-1,S=0;for(let U=0;U<u;U++){let X=x[U];if(X===0||X===_)throw new H;(X===1||X===_-1)&&S++}let E=new Array(u*l-S),D=0;for(let U=0;U<u;U++){let X=x[U];if(X===1||X===_-1)E.fill(X>1,D,D+l-1),D+=l-1;else for(let J=l-1;J>=0;--J)E[D++]=(X&1<<J)!==0}return E}extractBits(r){let s=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(s?11:14)+l*4,d=new Int32Array(u),p=new Array(this.totalBitsInLayer(l,s));if(s)for(let x=0;x<d.length;x++)d[x]=x;else{let x=u+1+2*k.truncDivision(k.truncDivision(u,2)-1,15),_=u/2,S=k.truncDivision(x,2);for(let E=0;E<_;E++){let D=E+k.truncDivision(E,15);d[_-E-1]=S-D-1,d[_+E]=S+D+1}}for(let x=0,_=0;x<l;x++){let S=(l-x)*4+(s?9:12),E=x*2,D=u-1-E;for(let U=0;U<S;U++){let X=U*2;for(let J=0;J<2;J++)p[_+X+J]=r.get(d[E+J],d[E+U]),p[_+2*S+X+J]=r.get(d[E+U],d[D-J]),p[_+4*S+X+J]=r.get(d[D-J],d[D-U]),p[_+6*S+X+J]=r.get(d[D-U],d[E+J])}_+=S*8}return p}static readCode(r,s,l){let u=0;for(let d=s;d<s+l;d++)u<<=1,r[d]&&(u|=1);return u}static readByte(r,s){let l=r.length-s;return l>=8?It.readCode(r,s,8):It.readCode(r,s,l)<<8-l}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let l=0;l<s.length;l++)s[l]=It.readByte(r,8*l);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}It.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],It.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],It.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],It.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],It.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ft{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,l,u){const d=r-l,p=s-u;return Math.sqrt(d*d+p*p)}static sum(r){let s=0;for(let l=0,u=r.length;l!==u;l++){const d=r[l];s+=d}return s}}class Vn{static floatToIntBits(r){return r}}Vn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class We{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof We){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*Vn.floatToIntBits(this.x)+Vn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),l=this.distance(r[1],r[2]),u=this.distance(r[0],r[2]);let d,p,x;if(l>=s&&l>=u?(p=r[0],d=r[1],x=r[2]):u>=l&&u>=s?(p=r[1],d=r[0],x=r[2]):(p=r[2],d=r[0],x=r[1]),this.crossProductZ(d,p,x)<0){const _=d;d=x,x=_}r[0]=d,r[1]=p,r[2]=x}static distance(r,s){return ft.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,l){const u=s.x,d=s.y;return(l.x-u)*(r.y-d)-(l.y-d)*(r.x-u)}}class gt{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class tn extends gt{constructor(r,s,l,u,d){super(r,s),this.compact=l,this.nbDatablocks=u,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class vt{constructor(r,s,l,u){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=vt.INIT_SIZE),l==null&&(l=r.getWidth()/2|0),u==null&&(u=r.getHeight()/2|0);const d=s/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=u-d,this.downInit=u+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new oe}detect(){let r=this.leftInit,s=this.rightInit,l=this.upInit,u=this.downInit,d=!1,p=!0,x=!1,_=!1,S=!1,E=!1,D=!1;const U=this.width,X=this.height;for(;p;){p=!1;let J=!0;for(;(J||!_)&&s<U;)J=this.containsBlackPoint(l,u,s,!1),J?(s++,p=!0,_=!0):_||s++;if(s>=U){d=!0;break}let ne=!0;for(;(ne||!S)&&u<X;)ne=this.containsBlackPoint(r,s,u,!0),ne?(u++,p=!0,S=!0):S||u++;if(u>=X){d=!0;break}let ce=!0;for(;(ce||!E)&&r>=0;)ce=this.containsBlackPoint(l,u,r,!1),ce?(r--,p=!0,E=!0):E||r--;if(r<0){d=!0;break}let fe=!0;for(;(fe||!D)&&l>=0;)fe=this.containsBlackPoint(r,s,l,!0),fe?(l--,p=!0,D=!0):D||l--;if(l<0){d=!0;break}p&&(x=!0)}if(!d&&x){const J=s-r;let ne=null;for(let Me=1;ne===null&&Me<J;Me++)ne=this.getBlackPointOnSegment(r,u-Me,r+Me,u);if(ne==null)throw new oe;let ce=null;for(let Me=1;ce===null&&Me<J;Me++)ce=this.getBlackPointOnSegment(r,l+Me,r+Me,l);if(ce==null)throw new oe;let fe=null;for(let Me=1;fe===null&&Me<J;Me++)fe=this.getBlackPointOnSegment(s,l+Me,s-Me,l);if(fe==null)throw new oe;let Ie=null;for(let Me=1;Ie===null&&Me<J;Me++)Ie=this.getBlackPointOnSegment(s,u-Me,s-Me,u);if(Ie==null)throw new oe;return this.centerEdges(Ie,ne,fe,ce)}else throw new oe}getBlackPointOnSegment(r,s,l,u){const d=ft.round(ft.distance(r,s,l,u)),p=(l-r)/d,x=(u-s)/d,_=this.image;for(let S=0;S<d;S++){const E=ft.round(r+S*p),D=ft.round(s+S*x);if(_.get(E,D))return new We(E,D)}return null}centerEdges(r,s,l,u){const d=r.getX(),p=r.getY(),x=s.getX(),_=s.getY(),S=l.getX(),E=l.getY(),D=u.getX(),U=u.getY(),X=vt.CORR;return d<this.width/2?[new We(D-X,U+X),new We(x+X,_+X),new We(S-X,E-X),new We(d+X,p-X)]:[new We(D+X,U+X),new We(x+X,_-X),new We(S-X,E+X),new We(d-X,p-X)]}containsBlackPoint(r,s,l,u){const d=this.image;if(u){for(let p=r;p<=s;p++)if(d.get(p,l))return!0}else for(let p=r;p<=s;p++)if(d.get(l,p))return!0;return!1}}vt.INIT_SIZE=10,vt.CORR=1;class Bt{static checkAndNudgePoints(r,s){const l=r.getWidth(),u=r.getHeight();let d=!0;for(let p=0;p<s.length&&d;p+=2){const x=Math.floor(s[p]),_=Math.floor(s[p+1]);if(x<-1||x>l||_<-1||_>u)throw new oe;d=!1,x===-1?(s[p]=0,d=!0):x===l&&(s[p]=l-1,d=!0),_===-1?(s[p+1]=0,d=!0):_===u&&(s[p+1]=u-1,d=!0)}d=!0;for(let p=s.length-2;p>=0&&d;p-=2){const x=Math.floor(s[p]),_=Math.floor(s[p+1]);if(x<-1||x>l||_<-1||_>u)throw new oe;d=!1,x===-1?(s[p]=0,d=!0):x===l&&(s[p]=l-1,d=!0),_===-1?(s[p+1]=0,d=!0):_===u&&(s[p+1]=u-1,d=!0)}}}class G{constructor(r,s,l,u,d,p,x,_,S){this.a11=r,this.a21=s,this.a31=l,this.a12=u,this.a22=d,this.a32=p,this.a13=x,this.a23=_,this.a33=S}static quadrilateralToQuadrilateral(r,s,l,u,d,p,x,_,S,E,D,U,X,J,ne,ce){const fe=G.quadrilateralToSquare(r,s,l,u,d,p,x,_);return G.squareToQuadrilateral(S,E,D,U,X,J,ne,ce).times(fe)}transformPoints(r){const s=r.length,l=this.a11,u=this.a12,d=this.a13,p=this.a21,x=this.a22,_=this.a23,S=this.a31,E=this.a32,D=this.a33;for(let U=0;U<s;U+=2){const X=r[U],J=r[U+1],ne=d*X+_*J+D;r[U]=(l*X+p*J+S)/ne,r[U+1]=(u*X+x*J+E)/ne}}transformPointsWithValues(r,s){const l=this.a11,u=this.a12,d=this.a13,p=this.a21,x=this.a22,_=this.a23,S=this.a31,E=this.a32,D=this.a33,U=r.length;for(let X=0;X<U;X++){const J=r[X],ne=s[X],ce=d*J+_*ne+D;r[X]=(l*J+p*ne+S)/ce,s[X]=(u*J+x*ne+E)/ce}}static squareToQuadrilateral(r,s,l,u,d,p,x,_){const S=r-l+d-x,E=s-u+p-_;if(S===0&&E===0)return new G(l-r,d-l,r,u-s,p-u,s,0,0,1);{const D=l-d,U=x-d,X=u-p,J=_-p,ne=D*J-U*X,ce=(S*J-U*E)/ne,fe=(D*E-S*X)/ne;return new G(l-r+ce*l,x-r+fe*x,r,u-s+ce*u,_-s+fe*_,s,ce,fe,1)}}static quadrilateralToSquare(r,s,l,u,d,p,x,_){return G.squareToQuadrilateral(r,s,l,u,d,p,x,_).buildAdjoint()}buildAdjoint(){return new G(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new G(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class ke extends Bt{sampleGrid(r,s,l,u,d,p,x,_,S,E,D,U,X,J,ne,ce,fe,Ie,Me){const Ee=G.quadrilateralToQuadrilateral(u,d,p,x,_,S,E,D,U,X,J,ne,ce,fe,Ie,Me);return this.sampleGridWithTransform(r,s,l,Ee)}sampleGridWithTransform(r,s,l,u){if(s<=0||l<=0)throw new oe;const d=new Ne(s,l),p=new Float32Array(2*s);for(let x=0;x<l;x++){const _=p.length,S=x+.5;for(let E=0;E<_;E+=2)p[E]=E/2+.5,p[E+1]=S;u.transformPoints(p),Bt.checkAndNudgePoints(r,p);try{for(let E=0;E<_;E+=2)r.get(Math.floor(p[E]),Math.floor(p[E+1]))&&d.set(E/2,x)}catch{throw new oe}}return d}}class Ze{static setGridSampler(r){Ze.gridSampler=r}static getInstance(){return Ze.gridSampler}}Ze.gridSampler=new ke;class Pe{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new We(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Oe{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),l=this.getBullsEyeCorners(s);if(r){let p=l[0];l[0]=l[2],l[2]=p}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new tn(u,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new oe;let s=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(l,s);let u=0;for(let p=0;p<4;p++){let x=l[(this.shift+p)%4];this.compact?(u<<=7,u+=x>>1&127):(u<<=10,u+=(x>>2&992)+(x>>1&31))}let d=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(r,s){let l=0;r.forEach((u,d,p)=>{let x=(u>>s-2<<1)+(u&1);l=(l<<3)+x}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(k.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new oe}getCorrectedParameterData(r,s){let l,u;s?(l=7,u=2):(l=10,u=4);let d=l-u,p=new Int32Array(l);for(let _=l-1;_>=0;--_)p[_]=r&15,r>>=4;try{new Pn(ct.AZTEC_PARAM).decode(p,d)}catch{throw new oe}let x=0;for(let _=0;_<u;_++)x=(x<<4)+p[_];return x}getBullsEyeCorners(r){let s=r,l=r,u=r,d=r,p=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let D=this.getFirstDifferent(s,p,1,-1),U=this.getFirstDifferent(l,p,1,1),X=this.getFirstDifferent(u,p,-1,1),J=this.getFirstDifferent(d,p,-1,-1);if(this.nbCenterLayers>2){let ne=this.distancePoint(J,D)*this.nbCenterLayers/(this.distancePoint(d,s)*(this.nbCenterLayers+2));if(ne<.75||ne>1.25||!this.isWhiteOrBlackRectangle(D,U,X,J))break}s=D,l=U,u=X,d=J,p=!p}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new oe;this.compact=this.nbCenterLayers===5;let x=new We(s.getX()+.5,s.getY()-.5),_=new We(l.getX()+.5,l.getY()+.5),S=new We(u.getX()-.5,u.getY()+.5),E=new We(d.getX()-.5,d.getY()-.5);return this.expandSquare([x,_,S,E],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,l,u;try{let x=new vt(this.image).detect();r=x[0],s=x[1],l=x[2],u=x[3]}catch{let _=this.image.getWidth()/2,S=this.image.getHeight()/2;r=this.getFirstDifferent(new Pe(_+7,S-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Pe(_+7,S+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Pe(_-7,S+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Pe(_-7,S-7),!1,-1,-1).toResultPoint()}let d=ft.round((r.getX()+u.getX()+s.getX()+l.getX())/4),p=ft.round((r.getY()+u.getY()+s.getY()+l.getY())/4);try{let x=new vt(this.image,15,d,p).detect();r=x[0],s=x[1],l=x[2],u=x[3]}catch{r=this.getFirstDifferent(new Pe(d+7,p-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Pe(d+7,p+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Pe(d-7,p+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Pe(d-7,p-7),!1,-1,-1).toResultPoint()}return d=ft.round((r.getX()+u.getX()+s.getX()+l.getX())/4),p=ft.round((r.getY()+u.getY()+s.getY()+l.getY())/4),new Pe(d,p)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,l,u,d){let p=Ze.getInstance(),x=this.getDimension(),_=x/2-this.nbCenterLayers,S=x/2+this.nbCenterLayers;return p.sampleGrid(r,x,x,_,_,S,_,S,S,_,S,s.getX(),s.getY(),l.getX(),l.getY(),u.getX(),u.getY(),d.getX(),d.getY())}sampleLine(r,s,l){let u=0,d=this.distanceResultPoint(r,s),p=d/l,x=r.getX(),_=r.getY(),S=p*(s.getX()-r.getX())/d,E=p*(s.getY()-r.getY())/d;for(let D=0;D<l;D++)this.image.get(ft.round(x+D*S),ft.round(_+D*E))&&(u|=1<<l-D-1);return u}isWhiteOrBlackRectangle(r,s,l,u){let d=3;r=new Pe(r.getX()-d,r.getY()+d),s=new Pe(s.getX()-d,s.getY()-d),l=new Pe(l.getX()+d,l.getY()-d),u=new Pe(u.getX()+d,u.getY()+d);let p=this.getColor(u,r);if(p===0)return!1;let x=this.getColor(r,s);return x!==p||(x=this.getColor(s,l),x!==p)?!1:(x=this.getColor(l,u),x===p)}getColor(r,s){let l=this.distancePoint(r,s),u=(s.getX()-r.getX())/l,d=(s.getY()-r.getY())/l,p=0,x=r.getX(),_=r.getY(),S=this.image.get(r.getX(),r.getY()),E=Math.ceil(l);for(let U=0;U<E;U++)x+=u,_+=d,this.image.get(ft.round(x),ft.round(_))!==S&&p++;let D=p/l;return D>.1&&D<.9?0:D<=.1===S?1:-1}getFirstDifferent(r,s,l,u){let d=r.getX()+l,p=r.getY()+u;for(;this.isValid(d,p)&&this.image.get(d,p)===s;)d+=l,p+=u;for(d-=l,p-=u;this.isValid(d,p)&&this.image.get(d,p)===s;)d+=l;for(d-=l;this.isValid(d,p)&&this.image.get(d,p)===s;)p+=u;return p-=u,new Pe(d,p)}expandSquare(r,s,l){let u=l/(2*s),d=r[0].getX()-r[2].getX(),p=r[0].getY()-r[2].getY(),x=(r[0].getX()+r[2].getX())/2,_=(r[0].getY()+r[2].getY())/2,S=new We(x+u*d,_+u*p),E=new We(x-u*d,_-u*p);d=r[1].getX()-r[3].getX(),p=r[1].getY()-r[3].getY(),x=(r[1].getX()+r[3].getX())/2,_=(r[1].getY()+r[3].getY())/2;let D=new We(x+u*d,_+u*p),U=new We(x-u*d,_-u*p);return[S,D,E,U]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=ft.round(r.getX()),l=ft.round(r.getY());return this.isValid(s,l)}distancePoint(r,s){return ft.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return ft.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(k.truncDivision(this.nbLayers-4,8)+1)+15}}class Ye{decode(r,s=null){let l=null,u=new Oe(r.getBlackMatrix()),d=null,p=null;try{let E=u.detectMirror(!1);d=E.getPoints(),this.reportFoundResultPoints(s,d),p=new It().decode(E)}catch(E){l=E}if(p==null)try{let E=u.detectMirror(!0);d=E.getPoints(),this.reportFoundResultPoints(s,d),p=new It().decode(E)}catch(E){throw l??E}let x=new Le(p.getText(),p.getRawBytes(),p.getNumBits(),d,le.AZTEC,R.currentTimeMillis()),_=p.getByteSegments();_!=null&&x.putMetadata(st.BYTE_SEGMENTS,_);let S=p.getECLevel();return S!=null&&x.putMetadata(st.ERROR_CORRECTION_LEVEL,S),x}reportFoundResultPoints(r,s){if(r!=null){let l=r.get(Y.NEED_RESULT_POINT_CALLBACK);l!=null&&s.forEach((u,d,p)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class ut extends ze{constructor(r=500){super(new Ye,r)}}class Fe{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(Y.TRY_HARDER)===!0&&r.isRotateSupported()){const d=r.rotateCounterClockwise(),p=this.doDecode(d,s),x=p.getResultMetadata();let _=270;x!==null&&x.get(st.ORIENTATION)===!0&&(_=_+x.get(st.ORIENTATION)%360),p.putMetadata(st.ORIENTATION,_);const S=p.getResultPoints();if(S!==null){const E=d.getHeight();for(let D=0;D<S.length;D++)S[D]=new We(E-S[D].getY()-1,S[D].getX())}return p}else throw new oe}}reset(){}doDecode(r,s){const l=r.getWidth(),u=r.getHeight();let d=new W(l);const p=s&&s.get(Y.TRY_HARDER)===!0,x=Math.max(1,u>>(p?8:5));let _;p?_=u:_=15;const S=Math.trunc(u/2);for(let E=0;E<_;E++){const D=Math.trunc((E+1)/2),U=(E&1)===0,X=S+x*(U?D:-D);if(X<0||X>=u)break;try{d=r.getBlackRow(X,d)}catch{continue}for(let J=0;J<2;J++){if(J===1&&(d.reverse(),s&&s.get(Y.NEED_RESULT_POINT_CALLBACK)===!0)){const ne=new Map;s.forEach((ce,fe)=>ne.set(fe,ce)),ne.delete(Y.NEED_RESULT_POINT_CALLBACK),s=ne}try{const ne=this.decodeRow(X,d,s);if(J===1){ne.putMetadata(st.ORIENTATION,180);const ce=ne.getResultPoints();ce!==null&&(ce[0]=new We(l-ce[0].getX()-1,ce[0].getY()),ce[1]=new We(l-ce[1].getX()-1,ce[1].getY()))}return ne}catch{}}}throw new oe}static recordPattern(r,s,l){const u=l.length;for(let S=0;S<u;S++)l[S]=0;const d=r.getSize();if(s>=d)throw new oe;let p=!r.get(s),x=0,_=s;for(;_<d;){if(r.get(_)!==p)l[x]++;else{if(++x===u)break;l[x]=1,p=!p}_++}if(!(x===u||x===u-1&&_===d))throw new oe}static recordPatternInReverse(r,s,l){let u=l.length,d=r.get(s);for(;s>0&&u>=0;)r.get(--s)!==d&&(u--,d=!d);if(u>=0)throw new oe;Fe.recordPattern(r,s+1,l)}static patternMatchVariance(r,s,l){const u=r.length;let d=0,p=0;for(let S=0;S<u;S++)d+=r[S],p+=s[S];if(d<p)return Number.POSITIVE_INFINITY;const x=d/p;l*=x;let _=0;for(let S=0;S<u;S++){const E=r[S],D=s[S]*x,U=E>D?E-D:D-E;if(U>l)return Number.POSITIVE_INFINITY;_+=U}return _/d}}class be extends Fe{static findStartPattern(r){const s=r.getSize(),l=r.getNextSet(0);let u=0,d=Int32Array.from([0,0,0,0,0,0]),p=l,x=!1;const _=6;for(let S=l;S<s;S++)if(r.get(S)!==x)d[u]++;else{if(u===_-1){let E=be.MAX_AVG_VARIANCE,D=-1;for(let U=be.CODE_START_A;U<=be.CODE_START_C;U++){const X=Fe.patternMatchVariance(d,be.CODE_PATTERNS[U],be.MAX_INDIVIDUAL_VARIANCE);X<E&&(E=X,D=U)}if(D>=0&&r.isRange(Math.max(0,p-(S-p)/2),p,!1))return Int32Array.from([p,S,D]);p+=d[0]+d[1],d=d.slice(2,d.length-1),d[u-1]=0,d[u]=0,u--}else u++;d[u]=1,x=!x}throw new oe}static decodeCode(r,s,l){Fe.recordPattern(r,l,s);let u=be.MAX_AVG_VARIANCE,d=-1;for(let p=0;p<be.CODE_PATTERNS.length;p++){const x=be.CODE_PATTERNS[p],_=this.patternMatchVariance(s,x,be.MAX_INDIVIDUAL_VARIANCE);_<u&&(u=_,d=p)}if(d>=0)return d;throw new oe}decodeRow(r,s,l){const u=l&&l.get(Y.ASSUME_GS1)===!0,d=be.findStartPattern(s),p=d[2];let x=0;const _=new Uint8Array(20);_[x++]=p;let S;switch(p){case be.CODE_START_A:S=be.CODE_CODE_A;break;case be.CODE_START_B:S=be.CODE_CODE_B;break;case be.CODE_START_C:S=be.CODE_CODE_C;break;default:throw new H}let E=!1,D=!1,U="",X=d[0],J=d[1];const ne=Int32Array.from([0,0,0,0,0,0]);let ce=0,fe=0,Ie=p,Me=0,Ee=!0,Nt=!1,yt=!1;for(;!E;){const di=D;switch(D=!1,ce=fe,fe=be.decodeCode(s,ne,J),_[x++]=fe,fe!==be.CODE_STOP&&(Ee=!0),fe!==be.CODE_STOP&&(Me++,Ie+=Me*fe),X=J,J+=ne.reduce((qh,Ws)=>qh+Ws,0),fe){case be.CODE_START_A:case be.CODE_START_B:case be.CODE_START_C:throw new H}switch(S){case be.CODE_CODE_A:if(fe<64)yt===Nt?U+=String.fromCharCode(32+fe):U+=String.fromCharCode(32+fe+128),yt=!1;else if(fe<96)yt===Nt?U+=String.fromCharCode(fe-64):U+=String.fromCharCode(fe+64),yt=!1;else switch(fe!==be.CODE_STOP&&(Ee=!1),fe){case be.CODE_FNC_1:u&&(U.length===0?U+="]C1":U+="");break;case be.CODE_FNC_2:case be.CODE_FNC_3:break;case be.CODE_FNC_4_A:!Nt&&yt?(Nt=!0,yt=!1):Nt&&yt?(Nt=!1,yt=!1):yt=!0;break;case be.CODE_SHIFT:D=!0,S=be.CODE_CODE_B;break;case be.CODE_CODE_B:S=be.CODE_CODE_B;break;case be.CODE_CODE_C:S=be.CODE_CODE_C;break;case be.CODE_STOP:E=!0;break}break;case be.CODE_CODE_B:if(fe<96)yt===Nt?U+=String.fromCharCode(32+fe):U+=String.fromCharCode(32+fe+128),yt=!1;else switch(fe!==be.CODE_STOP&&(Ee=!1),fe){case be.CODE_FNC_1:u&&(U.length===0?U+="]C1":U+="");break;case be.CODE_FNC_2:case be.CODE_FNC_3:break;case be.CODE_FNC_4_B:!Nt&&yt?(Nt=!0,yt=!1):Nt&&yt?(Nt=!1,yt=!1):yt=!0;break;case be.CODE_SHIFT:D=!0,S=be.CODE_CODE_A;break;case be.CODE_CODE_A:S=be.CODE_CODE_A;break;case be.CODE_CODE_C:S=be.CODE_CODE_C;break;case be.CODE_STOP:E=!0;break}break;case be.CODE_CODE_C:if(fe<100)fe<10&&(U+="0"),U+=fe;else switch(fe!==be.CODE_STOP&&(Ee=!1),fe){case be.CODE_FNC_1:u&&(U.length===0?U+="]C1":U+="");break;case be.CODE_CODE_A:S=be.CODE_CODE_A;break;case be.CODE_CODE_B:S=be.CODE_CODE_B;break;case be.CODE_STOP:E=!0;break}break}di&&(S=S===be.CODE_CODE_A?be.CODE_CODE_B:be.CODE_CODE_A)}const dn=J-X;if(J=s.getNextUnset(J),!s.isRange(J,Math.min(s.getSize(),J+(J-X)/2),!1))throw new oe;if(Ie-=Me*ce,Ie%103!==ce)throw new I;const ur=U.length;if(ur===0)throw new oe;ur>0&&Ee&&(S===be.CODE_CODE_C?U=U.substring(0,ur-2):U=U.substring(0,ur-1));const dr=(d[1]+d[0])/2,Ht=X+dn/2,Yn=_.length,hr=new Uint8Array(Yn);for(let di=0;di<Yn;di++)hr[di]=_[di];const Hs=[new We(dr,r),new We(Ht,r)];return new Le(U,hr,0,Hs,le.CODE_128,new Date().getTime())}}be.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],be.MAX_AVG_VARIANCE=.25,be.MAX_INDIVIDUAL_VARIANCE=.7,be.CODE_SHIFT=98,be.CODE_CODE_C=99,be.CODE_CODE_B=100,be.CODE_CODE_A=101,be.CODE_FNC_1=102,be.CODE_FNC_2=97,be.CODE_FNC_3=96,be.CODE_FNC_4_A=101,be.CODE_FNC_4_B=100,be.CODE_START_A=103,be.CODE_START_B=104,be.CODE_START_C=105,be.CODE_STOP=106;class Dt extends Fe{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let d=Dt.findAsteriskPattern(s,u),p=s.getNextSet(d[1]),x=s.getSize(),_,S;do{Dt.recordPattern(s,p,u);let ne=Dt.toNarrowWidePattern(u);if(ne<0)throw new oe;_=Dt.patternToChar(ne),this.decodeRowResult+=_,S=p;for(let ce of u)p+=ce;p=s.getNextSet(p)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let E=0;for(let ne of u)E+=ne;let D=p-S-E;if(p!==x&&D*2<E)throw new oe;if(this.usingCheckDigit){let ne=this.decodeRowResult.length-1,ce=0;for(let fe=0;fe<ne;fe++)ce+=Dt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(fe));if(this.decodeRowResult.charAt(ne)!==Dt.ALPHABET_STRING.charAt(ce%43))throw new I;this.decodeRowResult=this.decodeRowResult.substring(0,ne)}if(this.decodeRowResult.length===0)throw new oe;let U;this.extendedMode?U=Dt.decodeExtended(this.decodeRowResult):U=this.decodeRowResult;let X=(d[1]+d[0])/2,J=S+E/2;return new Le(U,null,0,[new We(X,r),new We(J,r)],le.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let l=r.getSize(),u=r.getNextSet(0),d=0,p=u,x=!1,_=s.length;for(let S=u;S<l;S++)if(r.get(S)!==x)s[d]++;else{if(d===_-1){if(this.toNarrowWidePattern(s)===Dt.ASTERISK_ENCODING&&r.isRange(Math.max(0,p-Math.floor((S-p)/2)),p,!1))return[p,S];p+=s[0]+s[1],s.copyWithin(0,2,2+d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,x=!x}throw new oe}static toNarrowWidePattern(r){let s=r.length,l=0,u;do{let d=2147483647;for(let _ of r)_<d&&_>l&&(d=_);l=d,u=0;let p=0,x=0;for(let _=0;_<s;_++){let S=r[_];S>l&&(x|=1<<s-1-_,u++,p+=S)}if(u===3){for(let _=0;_<s&&u>0;_++){let S=r[_];if(S>l&&(u--,S*2>=p))return-1}return x}}while(u>3);return-1}static patternToChar(r){for(let s=0;s<Dt.CHARACTER_ENCODINGS.length;s++)if(Dt.CHARACTER_ENCODINGS[s]===r)return Dt.ALPHABET_STRING.charAt(s);if(r===Dt.ASTERISK_ENCODING)return"*";throw new oe}static decodeExtended(r){let s=r.length,l="";for(let u=0;u<s;u++){let d=r.charAt(u);if(d==="+"||d==="$"||d==="%"||d==="/"){let p=r.charAt(u+1),x="\0";switch(d){case"+":if(p>="A"&&p<="Z")x=String.fromCharCode(p.charCodeAt(0)+32);else throw new H;break;case"$":if(p>="A"&&p<="Z")x=String.fromCharCode(p.charCodeAt(0)-64);else throw new H;break;case"%":if(p>="A"&&p<="E")x=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")x=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")x=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")x=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")x="\0";else if(p==="V")x="@";else if(p==="W")x="`";else if(p==="X"||p==="Y"||p==="Z")x="";else throw new H;break;case"/":if(p>="A"&&p<="O")x=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")x=":";else throw new H;break}l+=x,u++}else l+=d}return l}}Dt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Dt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Dt.ASTERISK_ENCODING=148;class Je extends Fe{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,l){let u=this.decodeStart(s),d=this.decodeEnd(s),p=new we;Je.decodeMiddle(s,u[1],d[0],p);let x=p.toString(),_=null;l!=null&&(_=l.get(Y.ALLOWED_LENGTHS)),_==null&&(_=Je.DEFAULT_ALLOWED_LENGTHS);let S=x.length,E=!1,D=0;for(let J of _){if(S===J){E=!0;break}J>D&&(D=J)}if(!E&&S>D&&(E=!0),!E)throw new H;const U=[new We(u[1],r),new We(d[0],r)];return new Le(x,null,0,U,le.ITF,new Date().getTime())}static decodeMiddle(r,s,l,u){let d=new Int32Array(10),p=new Int32Array(5),x=new Int32Array(5);for(d.fill(0),p.fill(0),x.fill(0);s<l;){Fe.recordPattern(r,s,d);for(let S=0;S<5;S++){let E=2*S;p[S]=d[E],x[S]=d[E+1]}let _=Je.decodeDigit(p);u.append(_.toString()),_=this.decodeDigit(x),u.append(_.toString()),d.forEach(function(S){s+=S})}}decodeStart(r){let s=Je.skipWhiteSpace(r),l=Je.findGuardPattern(r,s,Je.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(r,l[0]),l}validateQuietZone(r,s){let l=this.narrowLineWidth*10;l=l<s?l:s;for(let u=s-1;l>0&&u>=0&&!r.get(u);u--)l--;if(l!==0)throw new oe}static skipWhiteSpace(r){const s=r.getSize(),l=r.getNextSet(0);if(l===s)throw new oe;return l}decodeEnd(r){r.reverse();try{let s=Je.skipWhiteSpace(r),l;try{l=Je.findGuardPattern(r,s,Je.END_PATTERN_REVERSED[0])}catch(d){d instanceof oe&&(l=Je.findGuardPattern(r,s,Je.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,l[0]);let u=l[0];return l[0]=r.getSize()-l[1],l[1]=r.getSize()-u,l}finally{r.reverse()}}static findGuardPattern(r,s,l){let u=l.length,d=new Int32Array(u),p=r.getSize(),x=!1,_=0,S=s;d.fill(0);for(let E=s;E<p;E++)if(r.get(E)!==x)d[_]++;else{if(_===u-1){if(Fe.patternMatchVariance(d,l,Je.MAX_INDIVIDUAL_VARIANCE)<Je.MAX_AVG_VARIANCE)return[S,E];S+=d[0]+d[1],R.arraycopy(d,2,d,0,_-1),d[_-1]=0,d[_]=0,_--}else _++;d[_]=1,x=!x}throw new oe}static decodeDigit(r){let s=Je.MAX_AVG_VARIANCE,l=-1,u=Je.PATTERNS.length;for(let d=0;d<u;d++){let p=Je.PATTERNS[d],x=Fe.patternMatchVariance(r,p,Je.MAX_INDIVIDUAL_VARIANCE);x<s?(s=x,l=d):x===s&&(l=-1)}if(l>=0)return l%10;throw new oe}}Je.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Je.MAX_AVG_VARIANCE=.38,Je.MAX_INDIVIDUAL_VARIANCE=.5,Je.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Je.START_PATTERN=Int32Array.from([1,1,1,1]),Je.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class pt extends Fe{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,l,u=0,d=Int32Array.from([0,0,0]);for(;!s;){d=Int32Array.from([0,0,0]),l=pt.findGuardPattern(r,u,!1,this.START_END_PATTERN,d);let p=l[0];u=l[1];let x=p-(u-p);x>=0&&(s=r.isRange(x,p,!1))}return l}static checkChecksum(r){return pt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let l=parseInt(r.charAt(s-1),10);return pt.getStandardUPCEANChecksum(r.substring(0,s-1))===l}static getStandardUPCEANChecksum(r){let s=r.length,l=0;for(let u=s-1;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}l*=3;for(let u=s-2;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}return(1e3-l)%10}static decodeEnd(r,s){return pt.findGuardPattern(r,s,!1,pt.START_END_PATTERN,new Int32Array(pt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,l,u){return this.findGuardPattern(r,s,l,u,new Int32Array(u.length))}static findGuardPattern(r,s,l,u,d){let p=r.getSize();s=l?r.getNextUnset(s):r.getNextSet(s);let x=0,_=s,S=u.length,E=l;for(let D=s;D<p;D++)if(r.get(D)!==E)d[x]++;else{if(x===S-1){if(Fe.patternMatchVariance(d,u,pt.MAX_INDIVIDUAL_VARIANCE)<pt.MAX_AVG_VARIANCE)return Int32Array.from([_,D]);_+=d[0]+d[1];let U=d.slice(2,d.length-1);for(let X=0;X<x-1;X++)d[X]=U[X];d[x-1]=0,d[x]=0,x--}else x++;d[x]=1,E=!E}throw new oe}static decodeDigit(r,s,l,u){this.recordPattern(r,l,s);let d=this.MAX_AVG_VARIANCE,p=-1,x=u.length;for(let _=0;_<x;_++){let S=u[_],E=Fe.patternMatchVariance(s,S,pt.MAX_INDIVIDUAL_VARIANCE);E<d&&(d=E,p=_)}if(p>=0)return p;throw new oe}}pt.MAX_AVG_VARIANCE=.48,pt.MAX_INDIVIDUAL_VARIANCE=.7,pt.START_END_PATTERN=Int32Array.from([1,1,1]),pt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),pt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),pt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class An{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(s,l,u),p=u.toString(),x=An.parseExtensionString(p),_=[new We((l[0]+l[1])/2,r),new We(d,r)],S=new Le(p,null,0,_,le.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&S.putAllMetadata(x),S}decodeMiddle(r,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p=s[1],x=0;for(let S=0;S<5&&p<d;S++){let E=pt.decodeDigit(r,u,p,pt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+E%10);for(let D of u)p+=D;E>=10&&(x|=1<<4-S),S!==4&&(p=r.getNextSet(p),p=r.getNextUnset(p))}if(l.length!==5)throw new oe;let _=this.determineCheckDigit(x);if(An.extensionChecksum(l.toString())!==_)throw new oe;return p}static extensionChecksum(r){let s=r.length,l=0;for(let u=s-2;u>=0;u-=2)l+=r.charAt(u).charCodeAt(0)-48;l*=3;for(let u=s-1;u>=0;u-=2)l+=r.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new oe}static parseExtensionString(r){if(r.length!==5)return null;let s=An.parseExtension5String(r);return s==null?null:new Map([[st.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let l=parseInt(r.substring(1)),u=(l/100).toString(),d=l%100,p=d<10?"0"+d:d.toString();return s+u+"."+p}}class mn{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(s,l,u),p=u.toString(),x=mn.parseExtensionString(p),_=[new We((l[0]+l[1])/2,r),new We(d,r)],S=new Le(p,null,0,_,le.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&S.putAllMetadata(x),S}decodeMiddle(r,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p=s[1],x=0;for(let _=0;_<2&&p<d;_++){let S=pt.decodeDigit(r,u,p,pt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+S%10);for(let E of u)p+=E;S>=10&&(x|=1<<1-_),_!==1&&(p=r.getNextSet(p),p=r.getNextUnset(p))}if(l.length!==2)throw new oe;if(parseInt(l.toString())%4!==x)throw new oe;return p}static parseExtensionString(r){return r.length!==2?null:new Map([[st.ISSUE_NUMBER,parseInt(r)]])}}class Dn{static decodeRow(r,s,l){let u=pt.findGuardPattern(s,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new An().decodeRow(r,s,u)}catch{return new mn().decodeRow(r,s,u)}}}Dn.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class At extends pt{constructor(){super(),this.decodeRowStringBuffer="",At.L_AND_G_PATTERNS=At.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=At.L_PATTERNS[r-10],l=new Int32Array(s.length);for(let u=0;u<s.length;u++)l[u]=s[s.length-u-1];At.L_AND_G_PATTERNS[r]=l}}decodeRow(r,s,l){let u=At.findStartGuardPattern(s),d=l==null?null:l.get(Y.NEED_RESULT_POINT_CALLBACK);if(d!=null){const Ee=new We((u[0]+u[1])/2,r);d.foundPossibleResultPoint(Ee)}let p=this.decodeMiddle(s,u,this.decodeRowStringBuffer),x=p.rowOffset,_=p.resultString;if(d!=null){const Ee=new We(x,r);d.foundPossibleResultPoint(Ee)}let S=this.decodeEnd(s,x);if(d!=null){const Ee=new We((S[0]+S[1])/2,r);d.foundPossibleResultPoint(Ee)}let E=S[1],D=E+(E-S[0]);if(D>=s.getSize()||!s.isRange(E,D,!1))throw new oe;let U=_.toString();if(U.length<8)throw new H;if(!At.checkChecksum(U))throw new I;let X=(u[1]+u[0])/2,J=(S[1]+S[0])/2,ne=this.getBarcodeFormat(),ce=[new We(X,r),new We(J,r)],fe=new Le(U,null,0,ce,ne,new Date().getTime()),Ie=0;try{let Ee=Dn.decodeRow(r,s,S[1]);fe.putMetadata(st.UPC_EAN_EXTENSION,Ee.getText()),fe.putAllMetadata(Ee.getResultMetadata()),fe.addResultPoints(Ee.getResultPoints()),Ie=Ee.getText().length}catch{}let Me=l==null?null:l.get(Y.ALLOWED_EAN_EXTENSIONS);if(Me!=null){let Ee=!1;for(let Nt in Me)if(Ie.toString()===Nt){Ee=!0;break}if(!Ee)throw new oe}return fe}decodeEnd(r,s){return At.findGuardPattern(r,s,!1,At.START_END_PATTERN,new Int32Array(At.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return At.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let l=parseInt(r.charAt(s-1),10);return At.getStandardUPCEANChecksum(r.substring(0,s-1))===l}static getStandardUPCEANChecksum(r){let s=r.length,l=0;for(let u=s-1;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}l*=3;for(let u=s-2;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}return(1e3-l)%10}}class vr extends At{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p=s[1],x=0;for(let S=0;S<6&&p<d;S++){let E=At.decodeDigit(r,u,p,At.L_AND_G_PATTERNS);l+=String.fromCharCode(48+E%10);for(let D of u)p+=D;E>=10&&(x|=1<<5-S)}l=vr.determineFirstDigit(l,x),p=At.findGuardPattern(r,p,!0,At.MIDDLE_PATTERN,new Int32Array(At.MIDDLE_PATTERN.length).fill(0))[1];for(let S=0;S<6&&p<d;S++){let E=At.decodeDigit(r,u,p,At.L_PATTERNS);l+=String.fromCharCode(48+E);for(let D of u)p+=D}return{rowOffset:p,resultString:l}}getBarcodeFormat(){return le.EAN_13}static determineFirstDigit(r,s){for(let l=0;l<10;l++)if(s===this.FIRST_DIGIT_ENCODINGS[l])return r=String.fromCharCode(48+l)+r,r;throw new oe}}vr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ss extends At{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,l){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p=s[1];for(let _=0;_<4&&p<d;_++){let S=At.decodeDigit(r,u,p,At.L_PATTERNS);l+=String.fromCharCode(48+S);for(let E of u)p+=E}p=At.findGuardPattern(r,p,!0,At.MIDDLE_PATTERN,new Int32Array(At.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<4&&p<d;_++){let S=At.decodeDigit(r,u,p,At.L_PATTERNS);l+=String.fromCharCode(48+S);for(let E of u)p+=E}return{rowOffset:p,resultString:l}}getBarcodeFormat(){return le.EAN_8}}class re extends At{constructor(){super(...arguments),this.ean13Reader=new vr}getBarcodeFormat(){return le.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,l))}decodeMiddle(r,s,l){return this.ean13Reader.decodeMiddle(r,s,l)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let l=new Le(s.substring(1),null,null,r.getResultPoints(),le.UPC_A);return r.getResultMetadata()!=null&&l.putAllMetadata(r.getResultMetadata()),l}else throw new oe}reset(){this.ean13Reader.reset()}}class ye extends At{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,l){const u=this.decodeMiddleCounters.map(S=>S);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const d=r.getSize();let p=s[1],x=0;for(let S=0;S<6&&p<d;S++){const E=ye.decodeDigit(r,u,p,ye.L_AND_G_PATTERNS);l+=String.fromCharCode(48+E%10);for(let D of u)p+=D;E>=10&&(x|=1<<5-S)}let _=ye.determineNumSysAndCheckDigit(l,x);return{rowOffset:p,resultString:_}}decodeEnd(r,s){return ye.findGuardPatternWithoutCounters(r,s,!0,ye.MIDDLE_END_PATTERN)}checkChecksum(r){return At.checkChecksum(ye.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let d=String.fromCharCode(48+l),p=String.fromCharCode(48+u);return d+r+p}throw oe.getNotFoundInstance()}getBarcodeFormat(){return le.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new we;l.append(r.charAt(0));let u=s[5];switch(u){case 0:case 1:case 2:l.appendChars(s,0,2),l.append(u),l.append("0000"),l.appendChars(s,2,3);break;case 3:l.appendChars(s,0,3),l.append("00000"),l.appendChars(s,3,2);break;case 4:l.appendChars(s,0,4),l.append("00000"),l.append(s[4]);break;default:l.appendChars(s,0,5),l.append("0000"),l.append(u);break}return r.length>=8&&l.append(r.charAt(7)),l.toString()}}ye.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ye.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ce extends Fe{constructor(r){super();let s=r==null?null:r.get(Y.POSSIBLE_FORMATS),l=[];i(s)?(l.push(new vr),l.push(new re),l.push(new ss),l.push(new ye)):(s.indexOf(le.EAN_13)>-1&&l.push(new vr),s.indexOf(le.UPC_A)>-1&&l.push(new re),s.indexOf(le.EAN_8)>-1&&l.push(new ss),s.indexOf(le.UPC_E)>-1&&l.push(new ye)),this.readers=l}decodeRow(r,s,l){for(let u of this.readers)try{const d=u.decodeRow(r,s,l),p=d.getBarcodeFormat()===le.EAN_13&&d.getText().charAt(0)==="0",x=l==null?null:l.get(Y.POSSIBLE_FORMATS),_=x==null||x.includes(le.UPC_A);if(p&&_){const S=d.getRawBytes(),E=new Le(d.getText().substring(1),S,S?S.length:null,d.getResultPoints(),le.UPC_A);return E.putAllMetadata(d.getResultMetadata()),E}return d}catch{}throw new oe}reset(){for(let r of this.readers)r.reset()}}class je extends Fe{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let l=0;l<s.length;l++)if(Fe.patternMatchVariance(r,s[l],je.MAX_INDIVIDUAL_VARIANCE)<je.MAX_AVG_VARIANCE)return l;throw new oe}static count(r){return ft.sum(new Int32Array(r))}static increment(r,s){let l=0,u=s[0];for(let d=1;d<r.length;d++)s[d]>u&&(u=s[d],l=d);r[l]++}static decrement(r,s){let l=0,u=s[0];for(let d=1;d<r.length;d++)s[d]<u&&(u=s[d],l=d);r[l]--}static isFinderPattern(r){let s=r[0]+r[1],l=s+r[2]+r[3],u=s/l;if(u>=je.MIN_FINDER_PATTERN_RATIO&&u<=je.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let x of r)x>p&&(p=x),x<d&&(d=x);return p<10*d}return!1}}je.MAX_AVG_VARIANCE=.2,je.MAX_INDIVIDUAL_VARIANCE=.45,je.MIN_FINDER_PATTERN_RATIO=9.5/12,je.MAX_FINDER_PATTERN_RATIO=12.5/14;class Xe{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof Xe))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class mt{constructor(r,s,l,u,d){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new We(l,d)),this.resultPoints.push(new We(u,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof mt))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class rt{constructor(){}static getRSSvalue(r,s,l){let u=0;for(let _ of r)u+=_;let d=0,p=0,x=r.length;for(let _=0;_<x-1;_++){let S;for(S=1,p|=1<<_;S<r[_];S++,p&=~(1<<_)){let E=rt.combins(u-S-1,x-_-2);if(l&&p===0&&u-S-(x-_-1)>=x-_-1&&(E-=rt.combins(u-S-(x-_),x-_-2)),x-_-1>1){let D=0;for(let U=u-S-(x-_-2);U>s;U--)D+=rt.combins(u-S-U-1,x-_-3);E-=D*(x-1-_)}else u-S>s&&E--;d+=E}u-=S}return d}static combins(r,s){let l,u;r-s>s?(u=s,l=r-s):(u=r-s,l=s);let d=1,p=1;for(let x=r;x>l;x--)d*=x,p<=u&&(d/=p,p++);for(;p<=u;)d/=p,p++;return d}}class Hn{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let l=12*s,u=new W(l),d=0,x=r[0].getRightChar().getValue();for(let _=11;_>=0;--_)x&1<<_&&u.set(d),d++;for(let _=1;_<r.length;++_){let S=r[_],E=S.getLeftChar().getValue();for(let D=11;D>=0;--D)E&1<<D&&u.set(d),d++;if(S.getRightChar()!=null){let D=S.getRightChar().getValue();for(let U=11;U>=0;--U)D&1<<U&&u.set(d),d++}}return u}}class Zt{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Yt{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class St extends Yt{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===St.FNC1}}St.FNC1="$";class Ue extends Yt{constructor(r,s,l){super(r),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Vt extends Yt{constructor(r,s,l){if(super(r),s<0||s>10||l<0||l>10)throw new H;this.firstDigit=s,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Vt.FNC1}isSecondDigitFNC1(){return this.secondDigit===Vt.FNC1}isAnyFNC1(){return this.firstDigit===Vt.FNC1||this.secondDigit===Vt.FNC1}}Vt.FNC1=10;class Be{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new oe;let s=r.substring(0,2);for(let d of Be.TWO_DIGIT_DATA_LENGTH)if(d[0]===s)return d[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(2,d[2],r):Be.processFixedAI(2,d[1],r);if(r.length<3)throw new oe;let l=r.substring(0,3);for(let d of Be.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(3,d[2],r):Be.processFixedAI(3,d[1],r);for(let d of Be.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(4,d[2],r):Be.processFixedAI(4,d[1],r);if(r.length<4)throw new oe;let u=r.substring(0,4);for(let d of Be.FOUR_DIGIT_DATA_LENGTH)if(d[0]===u)return d[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(4,d[2],r):Be.processFixedAI(4,d[1],r);throw new oe}static processFixedAI(r,s,l){if(l.length<r)throw new oe;let u=l.substring(0,r);if(l.length<r+s)throw new oe;let d=l.substring(r,r+s),p=l.substring(r+s),x="("+u+")"+d,_=Be.parseFieldsInGeneralPurpose(p);return _==null?x:x+_}static processVariableAI(r,s,l){let u=l.substring(0,r),d;l.length<r+s?d=l.length:d=r+s;let p=l.substring(r,d),x=l.substring(d),_="("+u+")"+p,S=Be.parseFieldsInGeneralPurpose(x);return S==null?_:_+S}}Be.VARIABLE_LENGTH=[],Be.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Be.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Be.VARIABLE_LENGTH,20],["22",Be.VARIABLE_LENGTH,29],["30",Be.VARIABLE_LENGTH,8],["37",Be.VARIABLE_LENGTH,8],["90",Be.VARIABLE_LENGTH,30],["91",Be.VARIABLE_LENGTH,30],["92",Be.VARIABLE_LENGTH,30],["93",Be.VARIABLE_LENGTH,30],["94",Be.VARIABLE_LENGTH,30],["95",Be.VARIABLE_LENGTH,30],["96",Be.VARIABLE_LENGTH,30],["97",Be.VARIABLE_LENGTH,3],["98",Be.VARIABLE_LENGTH,30],["99",Be.VARIABLE_LENGTH,30]],Be.THREE_DIGIT_DATA_LENGTH=[["240",Be.VARIABLE_LENGTH,30],["241",Be.VARIABLE_LENGTH,30],["242",Be.VARIABLE_LENGTH,6],["250",Be.VARIABLE_LENGTH,30],["251",Be.VARIABLE_LENGTH,30],["253",Be.VARIABLE_LENGTH,17],["254",Be.VARIABLE_LENGTH,20],["400",Be.VARIABLE_LENGTH,30],["401",Be.VARIABLE_LENGTH,30],["402",17],["403",Be.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Be.VARIABLE_LENGTH,20],["421",Be.VARIABLE_LENGTH,15],["422",3],["423",Be.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Be.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Be.VARIABLE_LENGTH,15],["391",Be.VARIABLE_LENGTH,18],["392",Be.VARIABLE_LENGTH,15],["393",Be.VARIABLE_LENGTH,18],["703",Be.VARIABLE_LENGTH,30]],Be.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Be.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Be.VARIABLE_LENGTH,20],["8003",Be.VARIABLE_LENGTH,30],["8004",Be.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Be.VARIABLE_LENGTH,30],["8008",Be.VARIABLE_LENGTH,12],["8018",18],["8020",Be.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Be.VARIABLE_LENGTH,70],["8200",Be.VARIABLE_LENGTH,70]];class Gt{constructor(r){this.buffer=new we,this.information=r}decodeAllCodes(r,s){let l=s,u=null;do{let d=this.decodeGeneralPurposeField(l,u),p=Be.parseFieldsInGeneralPurpose(d.getNewString());if(p!=null&&r.append(p),d.isRemaining()?u=""+d.getRemainingValue():u=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(r,4);return d===0?new Vt(this.information.getSize(),Vt.FNC1,Vt.FNC1):new Vt(this.information.getSize(),d-1,Vt.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),l=(s-8)/11,u=(s-8)%11;return new Vt(r+7,l,u)}extractNumericValueFromBitArray(r,s){return Gt.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,l){let u=0;for(let d=0;d<l;++d)r.get(s+d)&&(u|=1<<l-d-1);return u}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Ue(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Ue(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let l=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(l!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new Ue(this.current.getPosition(),this.buffer.toString()):s=new Ue(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new Zt(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new Ue(this.current.getPosition(),this.buffer.toString());return new Zt(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Zt(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Ue(this.current.getPosition(),this.buffer.toString());return new Zt(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Zt(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Ue(this.current.getPosition(),this.buffer.toString());return new Zt(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Zt(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<116)return!0;if(r+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(r,8);return u>=232&&u<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new St(r+5,St.FNC1);if(s>=5&&s<15)return new St(r+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<90)return new St(r+7,""+(l+1));if(l>=90&&l<116)return new St(r+7,""+(l+7));let u=this.extractNumericValueFromBitArray(r,8),d;switch(u){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new H}return new St(r+8,d)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,6);return l>=16&&l<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new St(r+5,St.FNC1);if(s>=5&&s<15)return new St(r+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(r,6);if(l>=32&&l<58)return new St(r+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new Kt("Decoding invalid alphanumeric value: "+l)}return new St(r+6,u)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class os{constructor(r){this.information=r,this.generalDecoder=new Gt(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Qn extends os{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let l=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,l)}encodeCompressedGtinWithoutAI(r,s,l){for(let u=0;u<4;++u){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*u,10);d/100===0&&r.append("0"),d/10===0&&r.append("0"),r.append(d)}Qn.appendCheckDigit(r,l)}static appendCheckDigit(r,s){let l=0;for(let u=0;u<13;u++){let d=r.charAt(u+s).charCodeAt(0)-48;l+=u&1?d:3*d}l=10-l%10,l===10&&(l=0),r.append(l)}}Qn.GTIN_SIZE=40;class as extends Qn{constructor(r){super(r)}parseInformation(){let r=new we;r.append("(01)");let s=r.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(as.HEADER_SIZE,4);return r.append(l),this.encodeCompressedGtinWithoutAI(r,as.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,as.HEADER_SIZE+44)}}as.HEADER_SIZE=4;class Ei extends os{constructor(r){super(r)}parseInformation(){let r=new we;return this.getGeneralDecoder().decodeAllCodes(r,Ei.HEADER_SIZE)}}Ei.HEADER_SIZE=5;class Oo extends Qn{constructor(r){super(r)}encodeCompressedWeight(r,s,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s,l);this.addWeightCode(r,u);let d=this.checkWeight(u),p=1e5;for(let x=0;x<5;++x)d/p===0&&r.append("0"),p/=10;r.append(d)}}class si extends Oo{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=si.HEADER_SIZE+Oo.GTIN_SIZE+si.WEIGHT_SIZE)throw new oe;let r=new we;return this.encodeCompressedGtin(r,si.HEADER_SIZE),this.encodeCompressedWeight(r,si.HEADER_SIZE+Oo.GTIN_SIZE,si.WEIGHT_SIZE),r.toString()}}si.HEADER_SIZE=5,si.WEIGHT_SIZE=15;class Uh extends si{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class Vh extends si{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class oi extends Qn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<oi.HEADER_SIZE+Qn.GTIN_SIZE)throw new oe;let r=new we;this.encodeCompressedGtin(r,oi.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(oi.HEADER_SIZE+Qn.GTIN_SIZE,oi.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(oi.HEADER_SIZE+Qn.GTIN_SIZE+oi.LAST_DIGIT_SIZE,null);return r.append(l.getNewString()),r.toString()}}oi.HEADER_SIZE=8,oi.LAST_DIGIT_SIZE=2;class $n extends Qn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<$n.HEADER_SIZE+Qn.GTIN_SIZE)throw new oe;let r=new we;this.encodeCompressedGtin(r,$n.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray($n.HEADER_SIZE+Qn.GTIN_SIZE,$n.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray($n.HEADER_SIZE+Qn.GTIN_SIZE+$n.LAST_DIGIT_SIZE,$n.FIRST_THREE_DIGITS_SIZE);l/100==0&&r.append("0"),l/10==0&&r.append("0"),r.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField($n.HEADER_SIZE+Qn.GTIN_SIZE+$n.LAST_DIGIT_SIZE+$n.FIRST_THREE_DIGITS_SIZE,null);return r.append(u.getNewString()),r.toString()}}$n.HEADER_SIZE=8,$n.LAST_DIGIT_SIZE=2,$n.FIRST_THREE_DIGITS_SIZE=10;class sn extends Oo{constructor(r,s,l){super(r),this.dateCode=l,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=sn.HEADER_SIZE+sn.GTIN_SIZE+sn.WEIGHT_SIZE+sn.DATE_SIZE)throw new oe;let r=new we;return this.encodeCompressedGtin(r,sn.HEADER_SIZE),this.encodeCompressedWeight(r,sn.HEADER_SIZE+sn.GTIN_SIZE,sn.WEIGHT_SIZE),this.encodeCompressedDate(r,sn.HEADER_SIZE+sn.GTIN_SIZE+sn.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,sn.DATE_SIZE);if(l==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let u=l%32;l/=32;let d=l%12+1;l/=12;let p=l;p/10==0&&r.append("0"),r.append(p),d/10==0&&r.append("0"),r.append(d),u/10==0&&r.append("0"),r.append(u)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}sn.HEADER_SIZE=8,sn.WEIGHT_SIZE=20,sn.DATE_SIZE=16;function Lo(P){try{if(P.get(1))return new as(P);if(!P.get(2))return new Ei(P);switch(Gt.extractNumericValueFromBitArray(P,1,4)){case 4:return new Uh(P);case 5:return new Vh(P)}switch(Gt.extractNumericValueFromBitArray(P,1,5)){case 12:return new oi(P);case 13:return new $n(P)}switch(Gt.extractNumericValueFromBitArray(P,1,7)){case 56:return new sn(P,"310","11");case 57:return new sn(P,"320","11");case 58:return new sn(P,"310","13");case 59:return new sn(P,"320","13");case 60:return new sn(P,"310","15");case 61:return new sn(P,"320","15");case 62:return new sn(P,"310","17");case 63:return new sn(P,"320","17")}}catch(r){throw console.log(r),new Kt("unknown decoder: "+P)}}class Hi{constructor(r,s,l,u){this.leftchar=r,this.rightchar=s,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof Hi?Hi.equalsOrNull(r.leftchar,s.leftchar)&&Hi.equalsOrNull(r.rightchar,s.rightchar)&&Hi.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:Hi.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class bl{constructor(r,s,l){this.pairs=r,this.rowNumber=s,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof bl?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let l;return r.forEach((u,d)=>{s.forEach(p=>{u.getLeftChar().getValue()===p.getLeftChar().getValue()&&u.getRightChar().getValue()===p.getRightChar().getValue()&&u.getFinderPatter().getValue()===p.getFinderPatter().getValue()&&(l=!0)})}),l}}class Se extends je{constructor(r){super(...arguments),this.pairs=new Array(Se.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,l){this.pairs.length=0,this.startFromEven=!1;try{return Se.constructResult(this.decodeRow2pairs(r,s))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,Se.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(d){if(d instanceof oe){if(!this.pairs.length)throw new oe;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(r,!1),u){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new oe}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let l=s;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let p of r)this.pairs.push(p.getPairs());if(this.pairs.push(u.getPairs()),!Se.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(r);d.push(u);try{return this.checkRows(d,l+1)}catch(p){this.verbose&&console.log(p)}}throw new oe}static isValidSequence(r){for(let s of Se.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let l=!0;for(let u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!=s[u]){l=!1;break}if(l)return!0}return!1}storeRow(r,s){let l=0,u=!1,d=!1;for(;l<this.rows.length;){let p=this.rows[l];if(p.getRowNumber()>r){d=p.isEquivalent(this.pairs);break}u=p.isEquivalent(this.pairs),l++}d||u||Se.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new bl(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let l of s)if(l.getPairs().length!==r.length){for(let u of l.getPairs())for(let d of r)if(Hi.equals(u,d))break}}static isPartialRow(r,s){for(let l of s){let u=!0;for(let d of r){let p=!1;for(let x of l.getPairs())if(d.equals(x)){p=!0;break}if(!p){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=Hn.buildBitArray(r),u=Lo(s).parseInformation(),d=r[0].getFinderPattern().getResultPoints(),p=r[r.length-1].getFinderPattern().getResultPoints(),x=[d[0],d[1],p[0],p[1]];return new Le(u,null,null,x,le.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),l=r.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),d=2;for(let x=1;x<this.pairs.size();++x){let _=this.pairs.get(x);u+=_.getLeftChar().getChecksumPortion(),d++;let S=_.getRightChar();S!=null&&(u+=S.getChecksumPortion(),d++)}return u%=211,211*(d-4)+u==s.getValue()}static getNextSecondBar(r,s){let l;return r.get(s)?(l=r.getNextUnset(s),l=r.getNextSet(l)):(l=r.getNextSet(s),l=r.getNextUnset(l)),l}retrieveNextPair(r,s,l){let u=s.length%2==0;this.startFromEven&&(u=!u);let d,p=!0,x=-1;do this.findNextPair(r,s,x),d=this.parseFoundFinderPattern(r,l,u),d==null?x=Se.getNextSecondBar(r,this.startEnd[0]):p=!1;while(p);let _=this.decodeDataCharacter(r,d,u,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new oe;let S;try{S=this.decodeDataCharacter(r,d,u,!1)}catch(E){S=null,this.verbose&&console.log(E)}return new Hi(_,S,d,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p;l>=0?p=l:this.isEmptyPair(s)?p=0:p=s[s.length-1].getFinderPattern().getStartEnd()[1];let x=s.length%2!=0;this.startFromEven&&(x=!x);let _=!1;for(;p<d&&(_=!r.get(p),!!_);)p++;let S=0,E=p;for(let D=p;D<d;D++)if(r.get(D)!=_)u[S]++;else{if(S==3){if(x&&Se.reverseCounters(u),Se.isFinderPattern(u)){this.startEnd[0]=E,this.startEnd[1]=D;return}x&&Se.reverseCounters(u),E+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,S--}else S++;u[S]=1,_=!_}throw new oe}static reverseCounters(r){let s=r.length;for(let l=0;l<s/2;++l){let u=r[l];r[l]=r[s-l-1],r[s-l-1]=u}}parseFoundFinderPattern(r,s,l){let u,d,p;if(l){let S=this.startEnd[0]-1;for(;S>=0&&!r.get(S);)S--;S++,u=this.startEnd[0]-S,d=S,p=this.startEnd[1]}else d=this.startEnd[0],p=r.getNextUnset(this.startEnd[1]+1),u=p-this.startEnd[1];let x=this.getDecodeFinderCounters();R.arraycopy(x,0,x,1,x.length-1),x[0]=u;let _;try{_=this.parseFinderValue(x,Se.FINDER_PATTERNS)}catch{return null}return new mt(_,[d,p],d,p,s)}decodeDataCharacter(r,s,l,u){let d=this.getDataCharacterCounters();for(let Ht=0;Ht<d.length;Ht++)d[Ht]=0;if(u)Se.recordPatternInReverse(r,s.getStartEnd()[0],d);else{Se.recordPattern(r,s.getStartEnd()[1],d);for(let Ht=0,Yn=d.length-1;Ht<Yn;Ht++,Yn--){let hr=d[Ht];d[Ht]=d[Yn],d[Yn]=hr}}let p=17,x=ft.sum(new Int32Array(d))/p,_=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(x-_)/_>.3)throw new oe;let S=this.getOddCounts(),E=this.getEvenCounts(),D=this.getOddRoundingErrors(),U=this.getEvenRoundingErrors();for(let Ht=0;Ht<d.length;Ht++){let Yn=1*d[Ht]/x,hr=Yn+.5;if(hr<1){if(Yn<.3)throw new oe;hr=1}else if(hr>8){if(Yn>8.7)throw new oe;hr=8}let Hs=Ht/2;Ht&1?(E[Hs]=hr,U[Hs]=Yn-hr):(S[Hs]=hr,D[Hs]=Yn-hr)}this.adjustOddEvenCounts(p);let X=4*s.getValue()+(l?0:2)+(u?0:1)-1,J=0,ne=0;for(let Ht=S.length-1;Ht>=0;Ht--){if(Se.isNotA1left(s,l,u)){let Yn=Se.WEIGHTS[X][2*Ht];ne+=S[Ht]*Yn}J+=S[Ht]}let ce=0;for(let Ht=E.length-1;Ht>=0;Ht--)if(Se.isNotA1left(s,l,u)){let Yn=Se.WEIGHTS[X][2*Ht+1];ce+=E[Ht]*Yn}let fe=ne+ce;if(J&1||J>13||J<4)throw new oe;let Ie=(13-J)/2,Me=Se.SYMBOL_WIDEST[Ie],Ee=9-Me,Nt=rt.getRSSvalue(S,Me,!0),yt=rt.getRSSvalue(E,Ee,!1),dn=Se.EVEN_TOTAL_SUBSET[Ie],ur=Se.GSUM[Ie],dr=Nt*dn+yt+ur;return new Xe(dr,fe)}static isNotA1left(r,s,l){return!(r.getValue()==0&&s&&l)}adjustOddEvenCounts(r){let s=ft.sum(new Int32Array(this.getOddCounts())),l=ft.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1;s>13?d=!0:s<4&&(u=!0);let p=!1,x=!1;l>13?x=!0:l<4&&(p=!0);let _=s+l-r,S=(s&1)==1,E=(l&1)==0;if(_==1)if(S){if(E)throw new oe;d=!0}else{if(!E)throw new oe;x=!0}else if(_==-1)if(S){if(E)throw new oe;u=!0}else{if(!E)throw new oe;p=!0}else if(_==0){if(S){if(!E)throw new oe;s<l?(u=!0,x=!0):(d=!0,p=!0)}else if(E)throw new oe}else throw new oe;if(u){if(d)throw new oe;Se.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Se.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(x)throw new oe;Se.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&Se.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Se.SYMBOL_WIDEST=[7,5,4,3,1],Se.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Se.GSUM=[0,348,1388,2948,3988],Se.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Se.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Se.FINDER_PAT_A=0,Se.FINDER_PAT_B=1,Se.FINDER_PAT_C=2,Se.FINDER_PAT_D=3,Se.FINDER_PAT_E=4,Se.FINDER_PAT_F=5,Se.FINDER_PATTERN_SEQUENCES=[[Se.FINDER_PAT_A,Se.FINDER_PAT_A],[Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B],[Se.FINDER_PAT_A,Se.FINDER_PAT_C,Se.FINDER_PAT_B,Se.FINDER_PAT_D],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_C],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_D,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_D],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_E],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F]],Se.MAX_PAIRS=11;class Hh extends Xe{constructor(r,s,l){super(r,s),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class gn extends je{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,l){const u=this.decodePair(s,!1,r,l);gn.addOrTally(this.possibleLeftPairs,u),s.reverse();let d=this.decodePair(s,!0,r,l);gn.addOrTally(this.possibleRightPairs,d),s.reverse();for(let p of this.possibleLeftPairs)if(p.getCount()>1){for(let x of this.possibleRightPairs)if(x.getCount()>1&&gn.checkChecksum(p,x))return gn.constructResult(p,x)}throw new oe}static addOrTally(r,s){if(s==null)return;let l=!1;for(let u of r)if(u.getValue()===s.getValue()){u.incrementCount(),l=!0;break}l||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let l=4537077*r.getValue()+s.getValue(),u=new String(l).toString(),d=new we;for(let S=13-u.length;S>0;S--)d.append("0");d.append(u);let p=0;for(let S=0;S<13;S++){let E=d.charAt(S).charCodeAt(0)-48;p+=S&1?E:3*E}p=10-p%10,p===10&&(p=0),d.append(p.toString());let x=r.getFinderPattern().getResultPoints(),_=s.getFinderPattern().getResultPoints();return new Le(d.toString(),null,0,[x[0],x[1],_[0],_[1]],le.RSS_14,new Date().getTime())}static checkChecksum(r,s){let l=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,u=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(r,s,l,u){try{let d=this.findFinderPattern(r,s),p=this.parseFoundFinderPattern(r,l,s,d),x=u==null?null:u.get(Y.NEED_RESULT_POINT_CALLBACK);if(x!=null){let E=(d[0]+d[1])/2;s&&(E=r.getSize()-1-E),x.foundPossibleResultPoint(new We(E,l))}let _=this.decodeDataCharacter(r,p,!0),S=this.decodeDataCharacter(r,p,!1);return new Hh(1597*_.getValue()+S.getValue(),_.getChecksumPortion()+4*S.getChecksumPortion(),p)}catch{return null}}decodeDataCharacter(r,s,l){let u=this.getDataCharacterCounters();for(let ce=0;ce<u.length;ce++)u[ce]=0;if(l)Fe.recordPatternInReverse(r,s.getStartEnd()[0],u);else{Fe.recordPattern(r,s.getStartEnd()[1]+1,u);for(let ce=0,fe=u.length-1;ce<fe;ce++,fe--){let Ie=u[ce];u[ce]=u[fe],u[fe]=Ie}}let d=l?16:15,p=ft.sum(new Int32Array(u))/d,x=this.getOddCounts(),_=this.getEvenCounts(),S=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let ce=0;ce<u.length;ce++){let fe=u[ce]/p,Ie=Math.floor(fe+.5);Ie<1?Ie=1:Ie>8&&(Ie=8);let Me=Math.floor(ce/2);ce&1?(_[Me]=Ie,E[Me]=fe-Ie):(x[Me]=Ie,S[Me]=fe-Ie)}this.adjustOddEvenCounts(l,d);let D=0,U=0;for(let ce=x.length-1;ce>=0;ce--)U*=9,U+=x[ce],D+=x[ce];let X=0,J=0;for(let ce=_.length-1;ce>=0;ce--)X*=9,X+=_[ce],J+=_[ce];let ne=U+3*X;if(l){if(D&1||D>12||D<4)throw new oe;let ce=(12-D)/2,fe=gn.OUTSIDE_ODD_WIDEST[ce],Ie=9-fe,Me=rt.getRSSvalue(x,fe,!1),Ee=rt.getRSSvalue(_,Ie,!0),Nt=gn.OUTSIDE_EVEN_TOTAL_SUBSET[ce],yt=gn.OUTSIDE_GSUM[ce];return new Xe(Me*Nt+Ee+yt,ne)}else{if(J&1||J>10||J<4)throw new oe;let ce=(10-J)/2,fe=gn.INSIDE_ODD_WIDEST[ce],Ie=9-fe,Me=rt.getRSSvalue(x,fe,!0),Ee=rt.getRSSvalue(_,Ie,!1),Nt=gn.INSIDE_ODD_TOTAL_SUBSET[ce],yt=gn.INSIDE_GSUM[ce];return new Xe(Ee*Nt+Me+yt,ne)}}findFinderPattern(r,s){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=r.getSize(),d=!1,p=0;for(;p<u&&(d=!r.get(p),s!==d);)p++;let x=0,_=p;for(let S=p;S<u;S++)if(r.get(S)!==d)l[x]++;else{if(x===3){if(je.isFinderPattern(l))return[_,S];_+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,x--}else x++;l[x]=1,d=!d}throw new oe}parseFoundFinderPattern(r,s,l,u){let d=r.get(u[0]),p=u[0]-1;for(;p>=0&&d!==r.get(p);)p--;p++;const x=u[0]-p,_=this.getDecodeFinderCounters(),S=new Int32Array(_.length);R.arraycopy(_,0,S,1,_.length-1),S[0]=x;const E=this.parseFinderValue(S,gn.FINDER_PATTERNS);let D=p,U=u[1];return l&&(D=r.getSize()-1-D,U=r.getSize()-1-U),new mt(E,[p,u[1]],D,U,s)}adjustOddEvenCounts(r,s){let l=ft.sum(new Int32Array(this.getOddCounts())),u=ft.sum(new Int32Array(this.getEvenCounts())),d=!1,p=!1,x=!1,_=!1;r?(l>12?p=!0:l<4&&(d=!0),u>12?_=!0:u<4&&(x=!0)):(l>11?p=!0:l<5&&(d=!0),u>10?_=!0:u<4&&(x=!0));let S=l+u-s,E=(l&1)===(r?1:0),D=(u&1)===1;if(S===1)if(E){if(D)throw new oe;p=!0}else{if(!D)throw new oe;_=!0}else if(S===-1)if(E){if(D)throw new oe;d=!0}else{if(!D)throw new oe;x=!0}else if(S===0){if(E){if(!D)throw new oe;l<u?(d=!0,_=!0):(p=!0,x=!0)}else if(D)throw new oe}else throw new oe;if(d){if(p)throw new oe;je.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&je.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(_)throw new oe;je.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&je.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}gn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],gn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],gn.OUTSIDE_GSUM=[0,161,961,2015,2715],gn.INSIDE_GSUM=[0,336,1036,1516],gn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],gn.INSIDE_ODD_WIDEST=[2,4,6,8],gn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Wi extends Fe{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const l=r?r.get(Y.POSSIBLE_FORMATS):null,u=r&&r.get(Y.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(le.EAN_13)||l.includes(le.UPC_A)||l.includes(le.EAN_8)||l.includes(le.UPC_E))&&this.readers.push(new Ce(r)),l.includes(le.CODE_39)&&this.readers.push(new Dt(u)),l.includes(le.CODE_128)&&this.readers.push(new be),l.includes(le.ITF)&&this.readers.push(new Je),l.includes(le.RSS_14)&&this.readers.push(new gn),l.includes(le.RSS_EXPANDED)&&this.readers.push(new Se(this.verbose))):(this.readers.push(new Ce(r)),this.readers.push(new Dt),this.readers.push(new Ce(r)),this.readers.push(new be),this.readers.push(new Je),this.readers.push(new gn),this.readers.push(new Se(this.verbose)))}decodeRow(r,s,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(r,s,l)}catch{}throw new oe}reset(){this.readers.forEach(r=>r.reset())}}class Po extends ze{constructor(r=500,s){super(new Wi(s),r,s)}}class Ft{constructor(r,s,l){this.ecCodewords=r,this.ecBlocks=[s],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class jt{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ct{constructor(r,s,l,u,d,p){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=d,this.ecBlocks=p;let x=0;const _=p.getECCodewords(),S=p.getECBlocks();for(let E of S)x+=E.getCount()*(E.getDataCodewords()+_);this.totalCodewords=x}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if(r&1||s&1)throw new H;for(let l of Ct.VERSIONS)if(l.symbolSizeRows===r&&l.symbolSizeColumns===s)return l;throw new H}toString(){return""+this.versionNumber}static buildVersions(){return[new Ct(1,10,10,8,8,new Ft(5,new jt(1,3))),new Ct(2,12,12,10,10,new Ft(7,new jt(1,5))),new Ct(3,14,14,12,12,new Ft(10,new jt(1,8))),new Ct(4,16,16,14,14,new Ft(12,new jt(1,12))),new Ct(5,18,18,16,16,new Ft(14,new jt(1,18))),new Ct(6,20,20,18,18,new Ft(18,new jt(1,22))),new Ct(7,22,22,20,20,new Ft(20,new jt(1,30))),new Ct(8,24,24,22,22,new Ft(24,new jt(1,36))),new Ct(9,26,26,24,24,new Ft(28,new jt(1,44))),new Ct(10,32,32,14,14,new Ft(36,new jt(1,62))),new Ct(11,36,36,16,16,new Ft(42,new jt(1,86))),new Ct(12,40,40,18,18,new Ft(48,new jt(1,114))),new Ct(13,44,44,20,20,new Ft(56,new jt(1,144))),new Ct(14,48,48,22,22,new Ft(68,new jt(1,174))),new Ct(15,52,52,24,24,new Ft(42,new jt(2,102))),new Ct(16,64,64,14,14,new Ft(56,new jt(2,140))),new Ct(17,72,72,16,16,new Ft(36,new jt(4,92))),new Ct(18,80,80,18,18,new Ft(48,new jt(4,114))),new Ct(19,88,88,20,20,new Ft(56,new jt(4,144))),new Ct(20,96,96,22,22,new Ft(68,new jt(4,174))),new Ct(21,104,104,24,24,new Ft(56,new jt(6,136))),new Ct(22,120,120,18,18,new Ft(68,new jt(6,175))),new Ct(23,132,132,20,20,new Ft(62,new jt(8,163))),new Ct(24,144,144,22,22,new Ft(62,new jt(8,156),new jt(2,155))),new Ct(25,8,18,6,16,new Ft(7,new jt(1,5))),new Ct(26,8,32,6,14,new Ft(11,new jt(1,10))),new Ct(27,12,26,10,24,new Ft(14,new jt(1,16))),new Ct(28,12,36,10,16,new Ft(18,new jt(1,22))),new Ct(29,16,36,14,16,new Ft(24,new jt(1,32))),new Ct(30,16,48,14,22,new Ft(28,new jt(1,49)))]}}Ct.VERSIONS=Ct.buildVersions();class Lt{constructor(r){const s=r.getHeight();if(s<8||s>144||s&1)throw new H;this.version=Lt.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new Ne(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),l=r.getWidth();return Ct.getVersionForDimensions(s,l)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,l=4,u=0;const d=this.mappingBitMatrix.getHeight(),p=this.mappingBitMatrix.getWidth();let x=!1,_=!1,S=!1,E=!1;do if(l===d&&u===0&&!x)r[s++]=this.readCorner1(d,p)&255,l-=2,u+=2,x=!0;else if(l===d-2&&u===0&&p&3&&!_)r[s++]=this.readCorner2(d,p)&255,l-=2,u+=2,_=!0;else if(l===d+4&&u===2&&!(p&7)&&!S)r[s++]=this.readCorner3(d,p)&255,l-=2,u+=2,S=!0;else if(l===d-2&&u===0&&(p&7)===4&&!E)r[s++]=this.readCorner4(d,p)&255,l-=2,u+=2,E=!0;else{do l<d&&u>=0&&!this.readMappingMatrix.get(u,l)&&(r[s++]=this.readUtah(l,u,d,p)&255),l-=2,u+=2;while(l>=0&&u<p);l+=1,u+=3;do l>=0&&u<p&&!this.readMappingMatrix.get(u,l)&&(r[s++]=this.readUtah(l,u,d,p)&255),l+=2,u-=2;while(l<d&&u>=0);l+=3,u+=1}while(l<d||u<p);if(s!==this.version.getTotalCodewords())throw new H;return r}readModule(r,s,l,u){return r<0&&(r+=l,s+=4-(l+4&7)),s<0&&(s+=u,r+=4-(u+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,l,u){let d=0;return this.readModule(r-2,s-2,l,u)&&(d|=1),d<<=1,this.readModule(r-2,s-1,l,u)&&(d|=1),d<<=1,this.readModule(r-1,s-2,l,u)&&(d|=1),d<<=1,this.readModule(r-1,s-1,l,u)&&(d|=1),d<<=1,this.readModule(r-1,s,l,u)&&(d|=1),d<<=1,this.readModule(r,s-2,l,u)&&(d|=1),d<<=1,this.readModule(r,s-1,l,u)&&(d|=1),d<<=1,this.readModule(r,s,l,u)&&(d|=1),d}readCorner1(r,s){let l=0;return this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,1,r,s)&&(l|=1),l<<=1,this.readModule(r-1,2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l<<=1,this.readModule(2,s-1,r,s)&&(l|=1),l<<=1,this.readModule(3,s-1,r,s)&&(l|=1),l}readCorner2(r,s){let l=0;return this.readModule(r-3,0,r,s)&&(l|=1),l<<=1,this.readModule(r-2,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(0,s-4,r,s)&&(l|=1),l<<=1,this.readModule(0,s-3,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l}readCorner3(r,s){let l=0;return this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,s-1,r,s)&&(l|=1),l<<=1,this.readModule(0,s-3,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-3,r,s)&&(l|=1),l<<=1,this.readModule(1,s-2,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l}readCorner4(r,s){let l=0;return this.readModule(r-3,0,r,s)&&(l|=1),l<<=1,this.readModule(r-2,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l<<=1,this.readModule(2,s-1,r,s)&&(l|=1),l<<=1,this.readModule(3,s-1,r,s)&&(l|=1),l}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new b("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),p=s/u|0,x=l/d|0,_=p*u,S=x*d,E=new Ne(S,_);for(let D=0;D<p;++D){const U=D*u;for(let X=0;X<x;++X){const J=X*d;for(let ne=0;ne<u;++ne){const ce=D*(u+2)+1+ne,fe=U+ne;for(let Ie=0;Ie<d;++Ie){const Me=X*(d+2)+1+Ie;if(r.get(Me,ce)){const Ee=J+Ie;E.set(Ee,fe)}}}}}return E}}class nn{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const l=s.getECBlocks();let u=0;const d=l.getECBlocks();for(let ne of d)u+=ne.getCount();const p=new Array(u);let x=0;for(let ne of d)for(let ce=0;ce<ne.getCount();ce++){const fe=ne.getDataCodewords(),Ie=l.getECCodewords()+fe;p[x++]=new nn(fe,new Uint8Array(Ie))}const S=p[0].codewords.length-l.getECCodewords(),E=S-1;let D=0;for(let ne=0;ne<E;ne++)for(let ce=0;ce<x;ce++)p[ce].codewords[ne]=r[D++];const U=s.getVersionNumber()===24,X=U?8:x;for(let ne=0;ne<X;ne++)p[ne].codewords[S-1]=r[D++];const J=p[0].codewords.length;for(let ne=S;ne<J;ne++)for(let ce=0;ce<x;ce++){const fe=U?(ce+8)%x:ce,Ie=U&&fe>7?ne-1:ne;p[fe].codewords[Ie]=r[D++]}if(D!==r.length)throw new b;return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ds{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new b(""+r);let s=0,l=this.bitOffset,u=this.byteOffset;const d=this.bytes;if(l>0){const p=8-l,x=r<p?r:p,_=p-x,S=255>>8-x<<_;s=(d[u]&S)>>_,r-=x,l+=x,l===8&&(l=0,u++)}if(r>0){for(;r>=8;)s=s<<8|d[u]&255,u++,r-=8;if(r>0){const p=8-r,x=255>>p<<p;s=s<<r|(d[u]&x)>>p,l+=r}}return this.bitOffset=l,this.byteOffset=u,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var on;(function(P){P[P.PAD_ENCODE=0]="PAD_ENCODE",P[P.ASCII_ENCODE=1]="ASCII_ENCODE",P[P.C40_ENCODE=2]="C40_ENCODE",P[P.TEXT_ENCODE=3]="TEXT_ENCODE",P[P.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",P[P.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",P[P.BASE256_ENCODE=6]="BASE256_ENCODE"})(on||(on={}));class _r{static decode(r){const s=new Ds(r),l=new we,u=new we,d=new Array;let p=on.ASCII_ENCODE;do if(p===on.ASCII_ENCODE)p=this.decodeAsciiSegment(s,l,u);else{switch(p){case on.C40_ENCODE:this.decodeC40Segment(s,l);break;case on.TEXT_ENCODE:this.decodeTextSegment(s,l);break;case on.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,l);break;case on.EDIFACT_ENCODE:this.decodeEdifactSegment(s,l);break;case on.BASE256_ENCODE:this.decodeBase256Segment(s,l,d);break;default:throw new H}p=on.ASCII_ENCODE}while(p!==on.PAD_ENCODE&&s.available()>0);return u.length()>0&&l.append(u.toString()),new Tt(r,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(r,s,l){let u=!1;do{let d=r.readBits(8);if(d===0)throw new H;if(d<=128)return u&&(d+=128),s.append(String.fromCharCode(d-1)),on.ASCII_ENCODE;if(d===129)return on.PAD_ENCODE;if(d<=229){const p=d-130;p<10&&s.append("0"),s.append(""+p)}else switch(d){case 230:return on.C40_ENCODE;case 231:return on.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:s.append("[)>05"),l.insert(0,"");break;case 237:s.append("[)>06"),l.insert(0,"");break;case 238:return on.ANSIX12_ENCODE;case 239:return on.TEXT_ENCODE;case 240:return on.EDIFACT_ENCODE;case 241:break;default:if(d!==254||r.available()!==0)throw new H;break}}while(r.available()>0);return on.ASCII_ENCODE}static decodeC40Segment(r,s){let l=!1;const u=[];let d=0;do{if(r.available()===8)return;const p=r.readBits(8);if(p===254)return;this.parseTwoBytes(p,r.readBits(8),u);for(let x=0;x<3;x++){const _=u[x];switch(d){case 0:if(_<3)d=_+1;else if(_<this.C40_BASIC_SET_CHARS.length){const S=this.C40_BASIC_SET_CHARS[_];l?(s.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):s.append(S)}else throw new H;break;case 1:l?(s.append(String.fromCharCode(_+128)),l=!1):s.append(String.fromCharCode(_)),d=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length){const S=this.C40_SHIFT2_SET_CHARS[_];l?(s.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):s.append(S)}else switch(_){case 27:s.append("");break;case 30:l=!0;break;default:throw new H}d=0;break;case 3:l?(s.append(String.fromCharCode(_+224)),l=!1):s.append(String.fromCharCode(_+96)),d=0;break;default:throw new H}}}while(r.available()>0)}static decodeTextSegment(r,s){let l=!1,u=[],d=0;do{if(r.available()===8)return;const p=r.readBits(8);if(p===254)return;this.parseTwoBytes(p,r.readBits(8),u);for(let x=0;x<3;x++){const _=u[x];switch(d){case 0:if(_<3)d=_+1;else if(_<this.TEXT_BASIC_SET_CHARS.length){const S=this.TEXT_BASIC_SET_CHARS[_];l?(s.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):s.append(S)}else throw new H;break;case 1:l?(s.append(String.fromCharCode(_+128)),l=!1):s.append(String.fromCharCode(_)),d=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length){const S=this.TEXT_SHIFT2_SET_CHARS[_];l?(s.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):s.append(S)}else switch(_){case 27:s.append("");break;case 30:l=!0;break;default:throw new H}d=0;break;case 3:if(_<this.TEXT_SHIFT3_SET_CHARS.length){const S=this.TEXT_SHIFT3_SET_CHARS[_];l?(s.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):s.append(S),d=0}else throw new H;break;default:throw new H}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const l=[];do{if(r.available()===8)return;const u=r.readBits(8);if(u===254)return;this.parseTwoBytes(u,r.readBits(8),l);for(let d=0;d<3;d++){const p=l[d];switch(p){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(p<14)s.append(String.fromCharCode(p+44));else if(p<40)s.append(String.fromCharCode(p+51));else throw new H;break}}}while(r.available()>0)}static parseTwoBytes(r,s,l){let u=(r<<8)+s-1,d=Math.floor(u/1600);l[0]=d,u-=d*1600,d=Math.floor(u/40),l[1]=d,l[2]=u-d*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let l=0;l<4;l++){let u=r.readBits(6);if(u===31){const d=8-r.getBitOffset();d!==8&&r.readBits(d);return}u&32||(u|=64),s.append(String.fromCharCode(u))}}while(r.available()>0)}static decodeBase256Segment(r,s,l){let u=1+r.getByteOffset();const d=this.unrandomize255State(r.readBits(8),u++);let p;if(d===0?p=r.available()/8|0:d<250?p=d:p=250*(d-249)+this.unrandomize255State(r.readBits(8),u++),p<0)throw new H;const x=new Uint8Array(p);for(let _=0;_<p;_++){if(r.available()<8)throw new H;x[_]=this.unrandomize255State(r.readBits(8),u++)}l.push(x);try{s.append(ie.decode(x,ae.ISO88591))}catch(_){throw new Kt("Platform does not support required encoding: "+_.message)}}static unrandomize255State(r,s){const l=149*s%255+1,u=r-l;return u>=0?u:u+256}}_r.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_r.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],_r.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],_r.TEXT_SHIFT2_SET_CHARS=_r.C40_SHIFT2_SET_CHARS,_r.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Cl{constructor(){this.rsDecoder=new Pn(ct.DATA_MATRIX_FIELD_256)}decode(r){const s=new Lt(r),l=s.getVersion(),u=s.readCodewords(),d=nn.getDataBlocks(u,l);let p=0;for(let S of d)p+=S.getNumDataCodewords();const x=new Uint8Array(p),_=d.length;for(let S=0;S<_;S++){const E=d[S],D=E.getCodewords(),U=E.getNumDataCodewords();this.correctErrors(D,U);for(let X=0;X<U;X++)x[X*_+S]=D[X]}return _r.decode(x)}correctErrors(r,s){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-s)}catch{throw new I}for(let u=0;u<s;u++)r[u]=l[u]}}class $e{constructor(r){this.image=r,this.rectangleDetector=new vt(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new oe;s=this.shiftToModuleCenter(s);const l=s[0],u=s[1],d=s[2],p=s[3];let x=this.transitionsBetween(l,p)+1,_=this.transitionsBetween(d,p)+1;(x&1)===1&&(x+=1),(_&1)===1&&(_+=1),4*x<7*_&&4*_<7*x&&(x=_=Math.max(x,_));let S=$e.sampleGrid(this.image,l,u,d,p,x,_);return new gt(S,[l,u,d,p])}static shiftPoint(r,s,l){let u=(s.getX()-r.getX())/(l+1),d=(s.getY()-r.getY())/(l+1);return new We(r.getX()+u,r.getY()+d)}static moveAway(r,s,l){let u=r.getX(),d=r.getY();return u<s?u-=1:u+=1,d<l?d-=1:d+=1,new We(u,d)}detectSolid1(r){let s=r[0],l=r[1],u=r[3],d=r[2],p=this.transitionsBetween(s,l),x=this.transitionsBetween(l,u),_=this.transitionsBetween(u,d),S=this.transitionsBetween(d,s),E=p,D=[d,s,l,u];return E>x&&(E=x,D[0]=s,D[1]=l,D[2]=u,D[3]=d),E>_&&(E=_,D[0]=l,D[1]=u,D[2]=d,D[3]=s),E>S&&(D[0]=u,D[1]=d,D[2]=s,D[3]=l),D}detectSolid2(r){let s=r[0],l=r[1],u=r[2],d=r[3],p=this.transitionsBetween(s,d),x=$e.shiftPoint(l,u,(p+1)*4),_=$e.shiftPoint(u,l,(p+1)*4),S=this.transitionsBetween(x,s),E=this.transitionsBetween(_,d);return S<E?(r[0]=s,r[1]=l,r[2]=u,r[3]=d):(r[0]=l,r[1]=u,r[2]=d,r[3]=s),r}correctTopRight(r){let s=r[0],l=r[1],u=r[2],d=r[3],p=this.transitionsBetween(s,d),x=this.transitionsBetween(l,d),_=$e.shiftPoint(s,l,(x+1)*4),S=$e.shiftPoint(u,l,(p+1)*4);p=this.transitionsBetween(_,d),x=this.transitionsBetween(S,d);let E=new We(d.getX()+(u.getX()-l.getX())/(p+1),d.getY()+(u.getY()-l.getY())/(p+1)),D=new We(d.getX()+(s.getX()-l.getX())/(x+1),d.getY()+(s.getY()-l.getY())/(x+1));if(!this.isValid(E))return this.isValid(D)?D:null;if(!this.isValid(D))return E;let U=this.transitionsBetween(_,E)+this.transitionsBetween(S,E),X=this.transitionsBetween(_,D)+this.transitionsBetween(S,D);return U>X?E:D}shiftToModuleCenter(r){let s=r[0],l=r[1],u=r[2],d=r[3],p=this.transitionsBetween(s,d)+1,x=this.transitionsBetween(u,d)+1,_=$e.shiftPoint(s,l,x*4),S=$e.shiftPoint(u,l,p*4);p=this.transitionsBetween(_,d)+1,x=this.transitionsBetween(S,d)+1,(p&1)===1&&(p+=1),(x&1)===1&&(x+=1);let E=(s.getX()+l.getX()+u.getX()+d.getX())/4,D=(s.getY()+l.getY()+u.getY()+d.getY())/4;s=$e.moveAway(s,E,D),l=$e.moveAway(l,E,D),u=$e.moveAway(u,E,D),d=$e.moveAway(d,E,D);let U,X;return _=$e.shiftPoint(s,l,x*4),_=$e.shiftPoint(_,d,p*4),U=$e.shiftPoint(l,s,x*4),U=$e.shiftPoint(U,u,p*4),S=$e.shiftPoint(u,d,x*4),S=$e.shiftPoint(S,l,p*4),X=$e.shiftPoint(d,u,x*4),X=$e.shiftPoint(X,s,p*4),[_,U,S,X]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,l,u,d,p,x){return Ze.getInstance().sampleGrid(r,p,x,.5,.5,p-.5,.5,p-.5,x-.5,.5,x-.5,s.getX(),s.getY(),d.getX(),d.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(r,s){let l=Math.trunc(r.getX()),u=Math.trunc(r.getY()),d=Math.trunc(s.getX()),p=Math.trunc(s.getY()),x=Math.abs(p-u)>Math.abs(d-l);if(x){let ne=l;l=u,u=ne,ne=d,d=p,p=ne}let _=Math.abs(d-l),S=Math.abs(p-u),E=-_/2,D=u<p?1:-1,U=l<d?1:-1,X=0,J=this.image.get(x?u:l,x?l:u);for(let ne=l,ce=u;ne!==d;ne+=U){let fe=this.image.get(x?ce:ne,x?ne:ce);if(fe!==J&&(X++,J=fe),E+=S,E>0){if(ce===p)break;ce+=D,E-=_}}return X}}class Xt{constructor(){this.decoder=new Cl}decode(r,s=null){let l,u;if(s!=null&&s.has(Y.PURE_BARCODE)){const S=Xt.extractPureBits(r.getBlackMatrix());l=this.decoder.decode(S),u=Xt.NO_POINTS}else{const S=new $e(r.getBlackMatrix()).detect();l=this.decoder.decode(S.getBits()),u=S.getPoints()}const d=l.getRawBytes(),p=new Le(l.getText(),d,8*d.length,u,le.DATA_MATRIX,R.currentTimeMillis()),x=l.getByteSegments();x!=null&&p.putMetadata(st.BYTE_SEGMENTS,x);const _=l.getECLevel();return _!=null&&p.putMetadata(st.ERROR_CORRECTION_LEVEL,_),p}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(s==null||l==null)throw new oe;const u=this.moduleSize(s,r);let d=s[1];const p=l[1];let x=s[0];const S=(l[0]-x+1)/u,E=(p-d+1)/u;if(S<=0||E<=0)throw new oe;const D=u/2;d+=D,x+=D;const U=new Ne(S,E);for(let X=0;X<E;X++){const J=d+X*u;for(let ne=0;ne<S;ne++)r.get(x+ne*u,J)&&U.set(ne,X)}return U}static moduleSize(r,s){const l=s.getWidth();let u=r[0];const d=r[1];for(;u<l&&s.get(u,d);)u++;if(u===l)throw new oe;const p=u-r[0];if(p===0)throw new oe;return p}}Xt.NO_POINTS=[];class Sl extends ze{constructor(r=500){super(new Xt,r)}}var Ni;(function(P){P[P.L=0]="L",P[P.M=1]="M",P[P.Q=2]="Q",P[P.H=3]="H"})(Ni||(Ni={}));class Et{constructor(r,s,l){this.value=r,this.stringValue=s,this.bits=l,Et.FOR_BITS.set(l,this),Et.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return Et.L;case"M":return Et.M;case"Q":return Et.Q;case"H":return Et.H;default:throw new C(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof Et))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=Et.FOR_BITS.size)throw new b;return Et.FOR_BITS.get(r)}}Et.FOR_BITS=new Map,Et.FOR_VALUE=new Map,Et.L=new Et(Ni.L,"L",1),Et.M=new Et(Ni.M,"M",0),Et.Q=new Et(Ni.Q,"Q",3),Et.H=new Et(Ni.H,"H",2);class Jn{constructor(r){this.errorCorrectionLevel=Et.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return k.bitCount(r^s)}static decodeFormatInformation(r,s){const l=Jn.doDecodeFormatInformation(r,s);return l!==null?l:Jn.doDecodeFormatInformation(r^Jn.FORMAT_INFO_MASK_QR,s^Jn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let l=Number.MAX_SAFE_INTEGER,u=0;for(const d of Jn.FORMAT_INFO_DECODE_LOOKUP){const p=d[0];if(p===r||p===s)return new Jn(d[1]);let x=Jn.numBitsDiffering(r,p);x<l&&(u=d[1],l=x),r!==s&&(x=Jn.numBitsDiffering(s,p),x<l&&(u=d[1],l=x))}return l<=3?new Jn(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof Jn))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}Jn.FORMAT_INFO_MASK_QR=21522,Jn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ue{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const l of s)r+=l.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Z{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ve{constructor(r,s,...l){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=l;let u=0;const d=l[0].getECCodewordsPerBlock(),p=l[0].getECBlocks();for(const x of p)u+=x.getCount()*(x.getDataCodewords()+d);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new H;try{return this.getVersionForNumber((r-17)/4)}catch{throw new H}}static getVersionForNumber(r){if(r<1||r>40)throw new b;return Ve.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<Ve.VERSION_DECODE_INFO.length;u++){const d=Ve.VERSION_DECODE_INFO[u];if(d===r)return Ve.getVersionForNumber(u+7);const p=Jn.numBitsDiffering(r,d);p<s&&(l=u+7,s=p)}return s<=3?Ve.getVersionForNumber(l):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new Ne(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){const d=this.alignmentPatternCenters[u]-2;for(let p=0;p<l;p++)u===0&&(p===0||p===l-1)||u===l-1&&p===0||s.setRegion(this.alignmentPatternCenters[p]-2,d,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}Ve.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ve.VERSIONS=[new Ve(1,new Int32Array(0),new ue(7,new Z(1,19)),new ue(10,new Z(1,16)),new ue(13,new Z(1,13)),new ue(17,new Z(1,9))),new Ve(2,Int32Array.from([6,18]),new ue(10,new Z(1,34)),new ue(16,new Z(1,28)),new ue(22,new Z(1,22)),new ue(28,new Z(1,16))),new Ve(3,Int32Array.from([6,22]),new ue(15,new Z(1,55)),new ue(26,new Z(1,44)),new ue(18,new Z(2,17)),new ue(22,new Z(2,13))),new Ve(4,Int32Array.from([6,26]),new ue(20,new Z(1,80)),new ue(18,new Z(2,32)),new ue(26,new Z(2,24)),new ue(16,new Z(4,9))),new Ve(5,Int32Array.from([6,30]),new ue(26,new Z(1,108)),new ue(24,new Z(2,43)),new ue(18,new Z(2,15),new Z(2,16)),new ue(22,new Z(2,11),new Z(2,12))),new Ve(6,Int32Array.from([6,34]),new ue(18,new Z(2,68)),new ue(16,new Z(4,27)),new ue(24,new Z(4,19)),new ue(28,new Z(4,15))),new Ve(7,Int32Array.from([6,22,38]),new ue(20,new Z(2,78)),new ue(18,new Z(4,31)),new ue(18,new Z(2,14),new Z(4,15)),new ue(26,new Z(4,13),new Z(1,14))),new Ve(8,Int32Array.from([6,24,42]),new ue(24,new Z(2,97)),new ue(22,new Z(2,38),new Z(2,39)),new ue(22,new Z(4,18),new Z(2,19)),new ue(26,new Z(4,14),new Z(2,15))),new Ve(9,Int32Array.from([6,26,46]),new ue(30,new Z(2,116)),new ue(22,new Z(3,36),new Z(2,37)),new ue(20,new Z(4,16),new Z(4,17)),new ue(24,new Z(4,12),new Z(4,13))),new Ve(10,Int32Array.from([6,28,50]),new ue(18,new Z(2,68),new Z(2,69)),new ue(26,new Z(4,43),new Z(1,44)),new ue(24,new Z(6,19),new Z(2,20)),new ue(28,new Z(6,15),new Z(2,16))),new Ve(11,Int32Array.from([6,30,54]),new ue(20,new Z(4,81)),new ue(30,new Z(1,50),new Z(4,51)),new ue(28,new Z(4,22),new Z(4,23)),new ue(24,new Z(3,12),new Z(8,13))),new Ve(12,Int32Array.from([6,32,58]),new ue(24,new Z(2,92),new Z(2,93)),new ue(22,new Z(6,36),new Z(2,37)),new ue(26,new Z(4,20),new Z(6,21)),new ue(28,new Z(7,14),new Z(4,15))),new Ve(13,Int32Array.from([6,34,62]),new ue(26,new Z(4,107)),new ue(22,new Z(8,37),new Z(1,38)),new ue(24,new Z(8,20),new Z(4,21)),new ue(22,new Z(12,11),new Z(4,12))),new Ve(14,Int32Array.from([6,26,46,66]),new ue(30,new Z(3,115),new Z(1,116)),new ue(24,new Z(4,40),new Z(5,41)),new ue(20,new Z(11,16),new Z(5,17)),new ue(24,new Z(11,12),new Z(5,13))),new Ve(15,Int32Array.from([6,26,48,70]),new ue(22,new Z(5,87),new Z(1,88)),new ue(24,new Z(5,41),new Z(5,42)),new ue(30,new Z(5,24),new Z(7,25)),new ue(24,new Z(11,12),new Z(7,13))),new Ve(16,Int32Array.from([6,26,50,74]),new ue(24,new Z(5,98),new Z(1,99)),new ue(28,new Z(7,45),new Z(3,46)),new ue(24,new Z(15,19),new Z(2,20)),new ue(30,new Z(3,15),new Z(13,16))),new Ve(17,Int32Array.from([6,30,54,78]),new ue(28,new Z(1,107),new Z(5,108)),new ue(28,new Z(10,46),new Z(1,47)),new ue(28,new Z(1,22),new Z(15,23)),new ue(28,new Z(2,14),new Z(17,15))),new Ve(18,Int32Array.from([6,30,56,82]),new ue(30,new Z(5,120),new Z(1,121)),new ue(26,new Z(9,43),new Z(4,44)),new ue(28,new Z(17,22),new Z(1,23)),new ue(28,new Z(2,14),new Z(19,15))),new Ve(19,Int32Array.from([6,30,58,86]),new ue(28,new Z(3,113),new Z(4,114)),new ue(26,new Z(3,44),new Z(11,45)),new ue(26,new Z(17,21),new Z(4,22)),new ue(26,new Z(9,13),new Z(16,14))),new Ve(20,Int32Array.from([6,34,62,90]),new ue(28,new Z(3,107),new Z(5,108)),new ue(26,new Z(3,41),new Z(13,42)),new ue(30,new Z(15,24),new Z(5,25)),new ue(28,new Z(15,15),new Z(10,16))),new Ve(21,Int32Array.from([6,28,50,72,94]),new ue(28,new Z(4,116),new Z(4,117)),new ue(26,new Z(17,42)),new ue(28,new Z(17,22),new Z(6,23)),new ue(30,new Z(19,16),new Z(6,17))),new Ve(22,Int32Array.from([6,26,50,74,98]),new ue(28,new Z(2,111),new Z(7,112)),new ue(28,new Z(17,46)),new ue(30,new Z(7,24),new Z(16,25)),new ue(24,new Z(34,13))),new Ve(23,Int32Array.from([6,30,54,78,102]),new ue(30,new Z(4,121),new Z(5,122)),new ue(28,new Z(4,47),new Z(14,48)),new ue(30,new Z(11,24),new Z(14,25)),new ue(30,new Z(16,15),new Z(14,16))),new Ve(24,Int32Array.from([6,28,54,80,106]),new ue(30,new Z(6,117),new Z(4,118)),new ue(28,new Z(6,45),new Z(14,46)),new ue(30,new Z(11,24),new Z(16,25)),new ue(30,new Z(30,16),new Z(2,17))),new Ve(25,Int32Array.from([6,32,58,84,110]),new ue(26,new Z(8,106),new Z(4,107)),new ue(28,new Z(8,47),new Z(13,48)),new ue(30,new Z(7,24),new Z(22,25)),new ue(30,new Z(22,15),new Z(13,16))),new Ve(26,Int32Array.from([6,30,58,86,114]),new ue(28,new Z(10,114),new Z(2,115)),new ue(28,new Z(19,46),new Z(4,47)),new ue(28,new Z(28,22),new Z(6,23)),new ue(30,new Z(33,16),new Z(4,17))),new Ve(27,Int32Array.from([6,34,62,90,118]),new ue(30,new Z(8,122),new Z(4,123)),new ue(28,new Z(22,45),new Z(3,46)),new ue(30,new Z(8,23),new Z(26,24)),new ue(30,new Z(12,15),new Z(28,16))),new Ve(28,Int32Array.from([6,26,50,74,98,122]),new ue(30,new Z(3,117),new Z(10,118)),new ue(28,new Z(3,45),new Z(23,46)),new ue(30,new Z(4,24),new Z(31,25)),new ue(30,new Z(11,15),new Z(31,16))),new Ve(29,Int32Array.from([6,30,54,78,102,126]),new ue(30,new Z(7,116),new Z(7,117)),new ue(28,new Z(21,45),new Z(7,46)),new ue(30,new Z(1,23),new Z(37,24)),new ue(30,new Z(19,15),new Z(26,16))),new Ve(30,Int32Array.from([6,26,52,78,104,130]),new ue(30,new Z(5,115),new Z(10,116)),new ue(28,new Z(19,47),new Z(10,48)),new ue(30,new Z(15,24),new Z(25,25)),new ue(30,new Z(23,15),new Z(25,16))),new Ve(31,Int32Array.from([6,30,56,82,108,134]),new ue(30,new Z(13,115),new Z(3,116)),new ue(28,new Z(2,46),new Z(29,47)),new ue(30,new Z(42,24),new Z(1,25)),new ue(30,new Z(23,15),new Z(28,16))),new Ve(32,Int32Array.from([6,34,60,86,112,138]),new ue(30,new Z(17,115)),new ue(28,new Z(10,46),new Z(23,47)),new ue(30,new Z(10,24),new Z(35,25)),new ue(30,new Z(19,15),new Z(35,16))),new Ve(33,Int32Array.from([6,30,58,86,114,142]),new ue(30,new Z(17,115),new Z(1,116)),new ue(28,new Z(14,46),new Z(21,47)),new ue(30,new Z(29,24),new Z(19,25)),new ue(30,new Z(11,15),new Z(46,16))),new Ve(34,Int32Array.from([6,34,62,90,118,146]),new ue(30,new Z(13,115),new Z(6,116)),new ue(28,new Z(14,46),new Z(23,47)),new ue(30,new Z(44,24),new Z(7,25)),new ue(30,new Z(59,16),new Z(1,17))),new Ve(35,Int32Array.from([6,30,54,78,102,126,150]),new ue(30,new Z(12,121),new Z(7,122)),new ue(28,new Z(12,47),new Z(26,48)),new ue(30,new Z(39,24),new Z(14,25)),new ue(30,new Z(22,15),new Z(41,16))),new Ve(36,Int32Array.from([6,24,50,76,102,128,154]),new ue(30,new Z(6,121),new Z(14,122)),new ue(28,new Z(6,47),new Z(34,48)),new ue(30,new Z(46,24),new Z(10,25)),new ue(30,new Z(2,15),new Z(64,16))),new Ve(37,Int32Array.from([6,28,54,80,106,132,158]),new ue(30,new Z(17,122),new Z(4,123)),new ue(28,new Z(29,46),new Z(14,47)),new ue(30,new Z(49,24),new Z(10,25)),new ue(30,new Z(24,15),new Z(46,16))),new Ve(38,Int32Array.from([6,32,58,84,110,136,162]),new ue(30,new Z(4,122),new Z(18,123)),new ue(28,new Z(13,46),new Z(32,47)),new ue(30,new Z(48,24),new Z(14,25)),new ue(30,new Z(42,15),new Z(32,16))),new Ve(39,Int32Array.from([6,26,54,82,110,138,166]),new ue(30,new Z(20,117),new Z(4,118)),new ue(28,new Z(40,47),new Z(7,48)),new ue(30,new Z(43,24),new Z(22,25)),new ue(30,new Z(10,15),new Z(67,16))),new Ve(40,Int32Array.from([6,30,58,86,114,142,170]),new ue(30,new Z(19,118),new Z(6,119)),new ue(28,new Z(18,47),new Z(31,48)),new ue(30,new Z(34,24),new Z(34,25)),new ue(30,new Z(20,15),new Z(61,16)))];var an;(function(P){P[P.DATA_MASK_000=0]="DATA_MASK_000",P[P.DATA_MASK_001=1]="DATA_MASK_001",P[P.DATA_MASK_010=2]="DATA_MASK_010",P[P.DATA_MASK_011=3]="DATA_MASK_011",P[P.DATA_MASK_100=4]="DATA_MASK_100",P[P.DATA_MASK_101=5]="DATA_MASK_101",P[P.DATA_MASK_110=6]="DATA_MASK_110",P[P.DATA_MASK_111=7]="DATA_MASK_111"})(an||(an={}));class er{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let l=0;l<s;l++)for(let u=0;u<s;u++)this.isMasked(l,u)&&r.flip(u,l)}}er.values=new Map([[an.DATA_MASK_000,new er(an.DATA_MASK_000,(P,r)=>(P+r&1)===0)],[an.DATA_MASK_001,new er(an.DATA_MASK_001,(P,r)=>(P&1)===0)],[an.DATA_MASK_010,new er(an.DATA_MASK_010,(P,r)=>r%3===0)],[an.DATA_MASK_011,new er(an.DATA_MASK_011,(P,r)=>(P+r)%3===0)],[an.DATA_MASK_100,new er(an.DATA_MASK_100,(P,r)=>(Math.floor(P/2)+Math.floor(r/3)&1)===0)],[an.DATA_MASK_101,new er(an.DATA_MASK_101,(P,r)=>P*r%6===0)],[an.DATA_MASK_110,new er(an.DATA_MASK_110,(P,r)=>P*r%6<3)],[an.DATA_MASK_111,new er(an.DATA_MASK_111,(P,r)=>(P+r+P*r%3&1)===0)]]);class Do{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new H;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let d=0;d<6;d++)r=this.copyBit(d,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let d=5;d>=0;d--)r=this.copyBit(8,d,r);const s=this.bitMatrix.getHeight();let l=0;const u=s-7;for(let d=s-1;d>=u;d--)l=this.copyBit(8,d,l);for(let d=s-8;d<s;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=Jn.decodeFormatInformation(r,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new H}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return Ve.getVersionForNumber(s);let l=0;const u=r-11;for(let p=5;p>=0;p--)for(let x=r-9;x>=u;x--)l=this.copyBit(x,p,l);let d=Ve.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;l=0;for(let p=5;p>=0;p--)for(let x=r-9;x>=u;x--)l=this.copyBit(p,x,l);if(d=Ve.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;throw new H}copyBit(r,s,l){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?l<<1|1:l<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),l=er.values.get(r.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);const d=s.buildFunctionPattern();let p=!0;const x=new Uint8Array(s.getTotalCodewords());let _=0,S=0,E=0;for(let D=u-1;D>0;D-=2){D===6&&D--;for(let U=0;U<u;U++){const X=p?u-1-U:U;for(let J=0;J<2;J++)d.get(D-J,X)||(E++,S<<=1,this.bitMatrix.get(D-J,X)&&(S|=1),E===8&&(x[_++]=S,E=0,S=0))}p=!p}if(_!==s.getTotalCodewords())throw new H;return x}remask(){if(this.parsedFormatInfo===null)return;const r=er.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,l=r.getWidth();s<l;s++)for(let u=s+1,d=r.getHeight();u<d;u++)r.get(s,u)!==r.get(u,s)&&(r.flip(u,s),r.flip(s,u))}}class jo{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,l){if(r.length!==s.getTotalCodewords())throw new b;const u=s.getECBlocksForLevel(l);let d=0;const p=u.getECBlocks();for(const J of p)d+=J.getCount();const x=new Array(d);let _=0;for(const J of p)for(let ne=0;ne<J.getCount();ne++){const ce=J.getDataCodewords(),fe=u.getECCodewordsPerBlock()+ce;x[_++]=new jo(ce,new Uint8Array(fe))}const S=x[0].codewords.length;let E=x.length-1;for(;E>=0&&x[E].codewords.length!==S;)E--;E++;const D=S-u.getECCodewordsPerBlock();let U=0;for(let J=0;J<D;J++)for(let ne=0;ne<_;ne++)x[ne].codewords[J]=r[U++];for(let J=E;J<_;J++)x[J].codewords[D]=r[U++];const X=x[0].codewords.length;for(let J=D;J<X;J++)for(let ne=0;ne<_;ne++){const ce=ne<E?J:J+1;x[ne].codewords[ce]=r[U++]}return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var tr;(function(P){P[P.TERMINATOR=0]="TERMINATOR",P[P.NUMERIC=1]="NUMERIC",P[P.ALPHANUMERIC=2]="ALPHANUMERIC",P[P.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",P[P.BYTE=4]="BYTE",P[P.ECI=5]="ECI",P[P.KANJI=6]="KANJI",P[P.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",P[P.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",P[P.HANZI=9]="HANZI"})(tr||(tr={}));class it{constructor(r,s,l,u){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=l,this.bits=u,it.FOR_BITS.set(u,this),it.FOR_VALUE.set(r,this)}static forBits(r){const s=it.FOR_BITS.get(r);if(s===void 0)throw new b;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let l;return s<=9?l=0:s<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof it))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}it.FOR_BITS=new Map,it.FOR_VALUE=new Map,it.TERMINATOR=new it(tr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),it.NUMERIC=new it(tr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),it.ALPHANUMERIC=new it(tr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),it.STRUCTURED_APPEND=new it(tr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),it.BYTE=new it(tr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),it.ECI=new it(tr.ECI,"ECI",Int32Array.from([0,0,0]),7),it.KANJI=new it(tr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),it.FNC1_FIRST_POSITION=new it(tr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),it.FNC1_SECOND_POSITION=new it(tr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),it.HANZI=new it(tr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class rn{static decode(r,s,l,u){const d=new Ds(r);let p=new we;const x=new Array;let _=-1,S=-1;try{let E=null,D=!1,U;do{if(d.available()<4)U=it.TERMINATOR;else{const X=d.readBits(4);U=it.forBits(X)}switch(U){case it.TERMINATOR:break;case it.FNC1_FIRST_POSITION:case it.FNC1_SECOND_POSITION:D=!0;break;case it.STRUCTURED_APPEND:if(d.available()<16)throw new H;_=d.readBits(8),S=d.readBits(8);break;case it.ECI:const X=rn.parseECIValue(d);if(E=M.getCharacterSetECIByValue(X),E===null)throw new H;break;case it.HANZI:const J=d.readBits(4),ne=d.readBits(U.getCharacterCountBits(s));J===rn.GB2312_SUBSET&&rn.decodeHanziSegment(d,p,ne);break;default:const ce=d.readBits(U.getCharacterCountBits(s));switch(U){case it.NUMERIC:rn.decodeNumericSegment(d,p,ce);break;case it.ALPHANUMERIC:rn.decodeAlphanumericSegment(d,p,ce,D);break;case it.BYTE:rn.decodeByteSegment(d,p,ce,E,x,u);break;case it.KANJI:rn.decodeKanjiSegment(d,p,ce);break;default:throw new H}break}}while(U!==it.TERMINATOR)}catch{throw new H}return new Tt(r,p.toString(),x.length===0?null:x,l===null?null:l.toString(),_,S)}static decodeHanziSegment(r,s,l){if(l*13>r.available())throw new H;const u=new Uint8Array(2*l);let d=0;for(;l>0;){const p=r.readBits(13);let x=p/96<<8&4294967295|p%96;x<959?x+=41377:x+=42657,u[d]=x>>8&255,u[d+1]=x&255,d+=2,l--}try{s.append(ie.decode(u,ae.GB2312))}catch(p){throw new H(p)}}static decodeKanjiSegment(r,s,l){if(l*13>r.available())throw new H;const u=new Uint8Array(2*l);let d=0;for(;l>0;){const p=r.readBits(13);let x=p/192<<8&4294967295|p%192;x<7936?x+=33088:x+=49472,u[d]=x>>8,u[d+1]=x,d+=2,l--}try{s.append(ie.decode(u,ae.SHIFT_JIS))}catch(p){throw new H(p)}}static decodeByteSegment(r,s,l,u,d,p){if(8*l>r.available())throw new H;const x=new Uint8Array(l);for(let S=0;S<l;S++)x[S]=r.readBits(8);let _;u===null?_=ae.guessEncoding(x,p):_=u.getName();try{s.append(ie.decode(x,_))}catch(S){throw new H(S)}d.push(x)}static toAlphaNumericChar(r){if(r>=rn.ALPHANUMERIC_CHARS.length)throw new H;return rn.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,l,u){const d=s.length();for(;l>1;){if(r.available()<11)throw new H;const p=r.readBits(11);s.append(rn.toAlphaNumericChar(Math.floor(p/45))),s.append(rn.toAlphaNumericChar(p%45)),l-=2}if(l===1){if(r.available()<6)throw new H;s.append(rn.toAlphaNumericChar(r.readBits(6)))}if(u)for(let p=d;p<s.length();p++)s.charAt(p)==="%"&&(p<s.length()-1&&s.charAt(p+1)==="%"?s.deleteCharAt(p+1):s.setCharAt(p,""))}static decodeNumericSegment(r,s,l){for(;l>=3;){if(r.available()<10)throw new H;const u=r.readBits(10);if(u>=1e3)throw new H;s.append(rn.toAlphaNumericChar(Math.floor(u/100))),s.append(rn.toAlphaNumericChar(Math.floor(u/10)%10)),s.append(rn.toAlphaNumericChar(u%10)),l-=3}if(l===2){if(r.available()<7)throw new H;const u=r.readBits(7);if(u>=100)throw new H;s.append(rn.toAlphaNumericChar(Math.floor(u/10))),s.append(rn.toAlphaNumericChar(u%10))}else if(l===1){if(r.available()<4)throw new H;const u=r.readBits(4);if(u>=10)throw new H;s.append(rn.toAlphaNumericChar(u))}}static parseECIValue(r){const s=r.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const l=r.readBits(8);return(s&63)<<8&4294967295|l}if((s&224)===192){const l=r.readBits(16);return(s&31)<<16&4294967295|l}throw new H}}rn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",rn.GB2312_SUBSET=1;class Bo{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class Al{constructor(){this.rsDecoder=new Pn(ct.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(Ne.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const l=new Do(r);let u=null;try{return this.decodeBitMatrixParser(l,s)}catch(d){u=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,s);return d.setOther(new Bo(!0)),d}catch(d){throw u!==null?u:d}}decodeBitMatrixParser(r,s){const l=r.readVersion(),u=r.readFormatInformation().getErrorCorrectionLevel(),d=r.readCodewords(),p=jo.getDataBlocks(d,l,u);let x=0;for(const E of p)x+=E.getNumDataCodewords();const _=new Uint8Array(x);let S=0;for(const E of p){const D=E.getCodewords(),U=E.getNumDataCodewords();this.correctErrors(D,U);for(let X=0;X<U;X++)_[S++]=D[X]}return rn.decode(_,l,u,s)}correctErrors(r,s){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-s)}catch{throw new I}for(let u=0;u<s;u++)r[u]=l[u]}}class Fo extends We{constructor(r,s,l){super(r,s),this.estimatedModuleSize=l}aboutEquals(r,s,l){if(Math.abs(s-this.getY())<=r&&Math.abs(l-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,s,l){const u=(this.getX()+s)/2,d=(this.getY()+r)/2,p=(this.estimatedModuleSize+l)/2;return new Fo(u,d,p)}}class ls{constructor(r,s,l,u,d,p,x){this.image=r,this.startX=s,this.startY=l,this.width=u,this.height=d,this.moduleSize=p,this.resultPointCallback=x,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,l=this.width,u=r+l,d=this.startY+s/2,p=new Int32Array(3),x=this.image;for(let _=0;_<s;_++){const S=d+(_&1?-Math.floor((_+1)/2):Math.floor((_+1)/2));p[0]=0,p[1]=0,p[2]=0;let E=r;for(;E<u&&!x.get(E,S);)E++;let D=0;for(;E<u;){if(x.get(E,S))if(D===1)p[1]++;else if(D===2){if(this.foundPatternCross(p)){const U=this.handlePossibleCenter(p,S,E);if(U!==null)return U}p[0]=p[2],p[1]=1,p[2]=0,D=1}else p[++D]++;else D===1&&D++,p[D]++;E++}if(this.foundPatternCross(p)){const U=this.handlePossibleCenter(p,S,u);if(U!==null)return U}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new oe}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,l=s/2;for(let u=0;u<3;u++)if(Math.abs(s-r[u])>=l)return!1;return!0}crossCheckVertical(r,s,l,u){const d=this.image,p=d.getHeight(),x=this.crossCheckStateCount;x[0]=0,x[1]=0,x[2]=0;let _=r;for(;_>=0&&d.get(s,_)&&x[1]<=l;)x[1]++,_--;if(_<0||x[1]>l)return NaN;for(;_>=0&&!d.get(s,_)&&x[0]<=l;)x[0]++,_--;if(x[0]>l)return NaN;for(_=r+1;_<p&&d.get(s,_)&&x[1]<=l;)x[1]++,_++;if(_===p||x[1]>l)return NaN;for(;_<p&&!d.get(s,_)&&x[2]<=l;)x[2]++,_++;if(x[2]>l)return NaN;const S=x[0]+x[1]+x[2];return 5*Math.abs(S-u)>=2*u?NaN:this.foundPatternCross(x)?ls.centerFromEnd(x,_):NaN}handlePossibleCenter(r,s,l){const u=r[0]+r[1]+r[2],d=ls.centerFromEnd(r,l),p=this.crossCheckVertical(s,d,2*r[1],u);if(!isNaN(p)){const x=(r[0]+r[1]+r[2])/3;for(const S of this.possibleCenters)if(S.aboutEquals(x,p,d))return S.combineEstimate(p,d,x);const _=new Fo(d,p,x);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null}}class ba extends We{constructor(r,s,l,u){super(r,s),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,l){if(Math.abs(s-this.getY())<=r&&Math.abs(l-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,s,l){const u=this.count+1,d=(this.count*this.getX()+s)/u,p=(this.count*this.getY()+r)/u,x=(this.count*this.estimatedModuleSize+l)/u;return new ba(d,p,x,u)}}class El{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class jn{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(Y.TRY_HARDER)!==void 0,l=r!=null&&r.get(Y.PURE_BARCODE)!==void 0,u=this.image,d=u.getHeight(),p=u.getWidth();let x=Math.floor(3*d/(4*jn.MAX_MODULES));(x<jn.MIN_SKIP||s)&&(x=jn.MIN_SKIP);let _=!1;const S=new Int32Array(5);for(let D=x-1;D<d&&!_;D+=x){S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0;let U=0;for(let X=0;X<p;X++)if(u.get(X,D))(U&1)===1&&U++,S[U]++;else if(U&1)S[U]++;else if(U===4)if(jn.foundPatternCross(S)){if(this.handlePossibleCenter(S,D,X,l)===!0)if(x=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{const ne=this.findRowSkip();ne>S[2]&&(D+=ne-S[2]-x,X=p-1)}else{S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,U=3;continue}U=0,S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0}else S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,U=3;else S[++U]++;jn.foundPatternCross(S)&&this.handlePossibleCenter(S,D,p,l)===!0&&(x=S[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}const E=this.selectBestPatterns();return We.orderBestPatterns(E),new El(E)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let d=0;d<5;d++){const p=r[d];if(p===0)return!1;s+=p}if(s<7)return!1;const l=s/7,u=l/2;return Math.abs(l-r[0])<u&&Math.abs(l-r[1])<u&&Math.abs(3*l-r[2])<3*u&&Math.abs(l-r[3])<u&&Math.abs(l-r[4])<u}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,l,u){const d=this.getCrossCheckStateCount();let p=0;const x=this.image;for(;r>=p&&s>=p&&x.get(s-p,r-p);)d[2]++,p++;if(r<p||s<p)return!1;for(;r>=p&&s>=p&&!x.get(s-p,r-p)&&d[1]<=l;)d[1]++,p++;if(r<p||s<p||d[1]>l)return!1;for(;r>=p&&s>=p&&x.get(s-p,r-p)&&d[0]<=l;)d[0]++,p++;if(d[0]>l)return!1;const _=x.getHeight(),S=x.getWidth();for(p=1;r+p<_&&s+p<S&&x.get(s+p,r+p);)d[2]++,p++;if(r+p>=_||s+p>=S)return!1;for(;r+p<_&&s+p<S&&!x.get(s+p,r+p)&&d[3]<l;)d[3]++,p++;if(r+p>=_||s+p>=S||d[3]>=l)return!1;for(;r+p<_&&s+p<S&&x.get(s+p,r+p)&&d[4]<l;)d[4]++,p++;if(d[4]>=l)return!1;const E=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(E-u)<2*u&&jn.foundPatternCross(d)}crossCheckVertical(r,s,l,u){const d=this.image,p=d.getHeight(),x=this.getCrossCheckStateCount();let _=r;for(;_>=0&&d.get(s,_);)x[2]++,_--;if(_<0)return NaN;for(;_>=0&&!d.get(s,_)&&x[1]<=l;)x[1]++,_--;if(_<0||x[1]>l)return NaN;for(;_>=0&&d.get(s,_)&&x[0]<=l;)x[0]++,_--;if(x[0]>l)return NaN;for(_=r+1;_<p&&d.get(s,_);)x[2]++,_++;if(_===p)return NaN;for(;_<p&&!d.get(s,_)&&x[3]<l;)x[3]++,_++;if(_===p||x[3]>=l)return NaN;for(;_<p&&d.get(s,_)&&x[4]<l;)x[4]++,_++;if(x[4]>=l)return NaN;const S=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(S-u)>=2*u?NaN:jn.foundPatternCross(x)?jn.centerFromEnd(x,_):NaN}crossCheckHorizontal(r,s,l,u){const d=this.image,p=d.getWidth(),x=this.getCrossCheckStateCount();let _=r;for(;_>=0&&d.get(_,s);)x[2]++,_--;if(_<0)return NaN;for(;_>=0&&!d.get(_,s)&&x[1]<=l;)x[1]++,_--;if(_<0||x[1]>l)return NaN;for(;_>=0&&d.get(_,s)&&x[0]<=l;)x[0]++,_--;if(x[0]>l)return NaN;for(_=r+1;_<p&&d.get(_,s);)x[2]++,_++;if(_===p)return NaN;for(;_<p&&!d.get(_,s)&&x[3]<l;)x[3]++,_++;if(_===p||x[3]>=l)return NaN;for(;_<p&&d.get(_,s)&&x[4]<l;)x[4]++,_++;if(x[4]>=l)return NaN;const S=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(S-u)>=u?NaN:jn.foundPatternCross(x)?jn.centerFromEnd(x,_):NaN}handlePossibleCenter(r,s,l,u){const d=r[0]+r[1]+r[2]+r[3]+r[4];let p=jn.centerFromEnd(r,l),x=this.crossCheckVertical(s,Math.floor(p),r[2],d);if(!isNaN(x)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(x),r[2],d),!isNaN(p)&&(!u||this.crossCheckDiagonal(Math.floor(x),Math.floor(p),r[2],d)))){const _=d/7;let S=!1;const E=this.possibleCenters;for(let D=0,U=E.length;D<U;D++){const X=E[D];if(X.aboutEquals(_,x,p)){E[D]=X.combineEstimate(x,p,_),S=!0;break}}if(!S){const D=new ba(p,x,_);E.push(D),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(D)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const l of this.possibleCenters)if(l.getCount()>=jn.CENTER_QUORUM)if(s==null)s=l;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-l.getX())-Math.abs(s.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const l=this.possibleCenters.length;for(const p of this.possibleCenters)p.getCount()>=jn.CENTER_QUORUM&&(r++,s+=p.getEstimatedModuleSize());if(r<3)return!1;const u=s/l;let d=0;for(const p of this.possibleCenters)d+=Math.abs(p.getEstimatedModuleSize()-u);return d<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new oe;const s=this.possibleCenters;let l;if(r>3){let u=0,d=0;for(const _ of this.possibleCenters){const S=_.getEstimatedModuleSize();u+=S,d+=S*S}l=u/r;let p=Math.sqrt(d/r-l*l);s.sort((_,S)=>{const E=Math.abs(S.getEstimatedModuleSize()-l),D=Math.abs(_.getEstimatedModuleSize()-l);return E<D?-1:E>D?1:0});const x=Math.max(.2*l,p);for(let _=0;_<s.length&&s.length>3;_++){const S=s[_];Math.abs(S.getEstimatedModuleSize()-l)>x&&(s.splice(_,1),_--)}}if(s.length>3){let u=0;for(const d of s)u+=d.getEstimatedModuleSize();l=u/s.length,s.sort((d,p)=>{if(p.getCount()===d.getCount()){const x=Math.abs(p.getEstimatedModuleSize()-l),_=Math.abs(d.getEstimatedModuleSize()-l);return x<_?1:x>_?-1:0}else return p.getCount()-d.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}jn.CENTER_QUORUM=2,jn.MIN_SKIP=3,jn.MAX_MODULES=57;class dt{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(Y.NEED_RESULT_POINT_CALLBACK);const l=new jn(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(l)}processFinderPatternInfo(r){const s=r.getTopLeft(),l=r.getTopRight(),u=r.getBottomLeft(),d=this.calculateModuleSize(s,l,u);if(d<1)throw new oe("No pattern found in proccess finder.");const p=dt.computeDimension(s,l,u,d),x=Ve.getProvisionalVersionForDimension(p),_=x.getDimensionForVersion()-7;let S=null;if(x.getAlignmentPatternCenters().length>0){const X=l.getX()-s.getX()+u.getX(),J=l.getY()-s.getY()+u.getY(),ne=1-3/_,ce=Math.floor(s.getX()+ne*(X-s.getX())),fe=Math.floor(s.getY()+ne*(J-s.getY()));for(let Ie=4;Ie<=16;Ie<<=1)try{S=this.findAlignmentInRegion(d,ce,fe,Ie);break}catch(Me){if(!(Me instanceof oe))throw Me}}const E=dt.createTransform(s,l,u,S,p),D=dt.sampleGrid(this.image,E,p);let U;return S===null?U=[u,s,l]:U=[u,s,l,S],new gt(D,U)}static createTransform(r,s,l,u,d){const p=d-3.5;let x,_,S,E;return u!==null?(x=u.getX(),_=u.getY(),S=p-3,E=S):(x=s.getX()-r.getX()+l.getX(),_=s.getY()-r.getY()+l.getY(),S=p,E=p),G.quadrilateralToQuadrilateral(3.5,3.5,p,3.5,S,E,3.5,p,r.getX(),r.getY(),s.getX(),s.getY(),x,_,l.getX(),l.getY())}static sampleGrid(r,s,l){return Ze.getInstance().sampleGridWithTransform(r,l,l,s)}static computeDimension(r,s,l,u){const d=ft.round(We.distance(r,s)/u),p=ft.round(We.distance(r,l)/u);let x=Math.floor((d+p)/2)+7;switch(x&3){case 0:x++;break;case 2:x--;break;case 3:throw new oe("Dimensions could be not found.")}return x}calculateModuleSize(r,s,l){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,l))/2}calculateModuleSizeOneWay(r,s){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,l,u){let d=this.sizeOfBlackWhiteBlackRun(r,s,l,u),p=1,x=r-(l-r);x<0?(p=r/(r-x),x=0):x>=this.image.getWidth()&&(p=(this.image.getWidth()-1-r)/(x-r),x=this.image.getWidth()-1);let _=Math.floor(s-(u-s)*p);return p=1,_<0?(p=s/(s-_),_=0):_>=this.image.getHeight()&&(p=(this.image.getHeight()-1-s)/(_-s),_=this.image.getHeight()-1),x=Math.floor(r+(x-r)*p),d+=this.sizeOfBlackWhiteBlackRun(r,s,x,_),d-1}sizeOfBlackWhiteBlackRun(r,s,l,u){const d=Math.abs(u-s)>Math.abs(l-r);if(d){let X=r;r=s,s=X,X=l,l=u,u=X}const p=Math.abs(l-r),x=Math.abs(u-s);let _=-p/2;const S=r<l?1:-1,E=s<u?1:-1;let D=0;const U=l+S;for(let X=r,J=s;X!==U;X+=S){const ne=d?J:X,ce=d?X:J;if(D===1===this.image.get(ne,ce)){if(D===2)return ft.distance(X,J,r,s);D++}if(_+=x,_>0){if(J===u)break;J+=E,_-=p}}return D===2?ft.distance(l+S,u,r,s):NaN}findAlignmentInRegion(r,s,l,u){const d=Math.floor(u*r),p=Math.max(0,s-d),x=Math.min(this.image.getWidth()-1,s+d);if(x-p<r*3)throw new oe("Alignment top exceeds estimated module size.");const _=Math.max(0,l-d),S=Math.min(this.image.getHeight()-1,l+d);if(S-_<r*3)throw new oe("Alignment bottom exceeds estimated module size.");return new ls(this.image,p,_,x-p,S-_,r,this.resultPointCallback).find()}}class Wn{constructor(){this.decoder=new Al}getDecoder(){return this.decoder}decode(r,s){let l,u;if(s!=null&&s.get(Y.PURE_BARCODE)!==void 0){const _=Wn.extractPureBits(r.getBlackMatrix());l=this.decoder.decodeBitMatrix(_,s),u=Wn.NO_POINTS}else{const _=new dt(r.getBlackMatrix()).detect(s);l=this.decoder.decodeBitMatrix(_.getBits(),s),u=_.getPoints()}l.getOther()instanceof Bo&&l.getOther().applyMirroredCorrection(u);const d=new Le(l.getText(),l.getRawBytes(),void 0,u,le.QR_CODE,void 0),p=l.getByteSegments();p!==null&&d.putMetadata(st.BYTE_SEGMENTS,p);const x=l.getECLevel();return x!==null&&d.putMetadata(st.ERROR_CORRECTION_LEVEL,x),l.hasStructuredAppend()&&(d.putMetadata(st.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(st.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(s===null||l===null)throw new oe;const u=this.moduleSize(s,r);let d=s[1],p=l[1],x=s[0],_=l[0];if(x>=_||d>=p)throw new oe;if(p-d!==_-x&&(_=x+(p-d),_>=r.getWidth()))throw new oe;const S=Math.round((_-x+1)/u),E=Math.round((p-d+1)/u);if(S<=0||E<=0)throw new oe;if(E!==S)throw new oe;const D=Math.floor(u/2);d+=D,x+=D;const U=x+Math.floor((S-1)*u)-_;if(U>0){if(U>D)throw new oe;x-=U}const X=d+Math.floor((E-1)*u)-p;if(X>0){if(X>D)throw new oe;d-=X}const J=new Ne(S,E);for(let ne=0;ne<E;ne++){const ce=d+Math.floor(ne*u);for(let fe=0;fe<S;fe++)r.get(x+Math.floor(fe*u),ce)&&J.set(fe,ne)}return J}static moduleSize(r,s){const l=s.getHeight(),u=s.getWidth();let d=r[0],p=r[1],x=!0,_=0;for(;d<u&&p<l;){if(x!==s.get(d,p)){if(++_===5)break;x=!x}d++,p++}if(d===u||p===l)throw new oe;return(d-r[0])/7}}Wn.NO_POINTS=new Array;class He{PDF417Common(){}static getBitCountSum(r){return ft.sum(r)}static toIntArray(r){if(r==null||!r.length)return He.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let l=0;for(const u of r)s[l++]=u;return s}static getCodeword(r){const s=O.binarySearch(He.SYMBOL_TABLE,r&262143);return s<0?-1:(He.CODEWORD_TABLE[s]-1)%He.NUMBER_OF_CODEWORDS}}He.NUMBER_OF_CODEWORDS=929,He.MAX_CODEWORDS_IN_BARCODE=He.NUMBER_OF_CODEWORDS-1,He.MIN_ROWS_IN_BARCODE=3,He.MAX_ROWS_IN_BARCODE=90,He.MODULES_IN_CODEWORD=17,He.MODULES_IN_STOP_PATTERN=18,He.BARS_IN_MODULE=8,He.EMPTY_INT_ARRAY=new Int32Array([]),He.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),He.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class lu{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class xt{static detectMultiple(r,s,l){let u=r.getBlackMatrix(),d=xt.detect(l,u);return d.length||(u=u.clone(),u.rotate180(),d=xt.detect(l,u)),new lu(u,d)}static detect(r,s){const l=new Array;let u=0,d=0,p=!1;for(;u<s.getHeight();){const x=xt.findVertices(s,u,d);if(x[0]==null&&x[3]==null){if(!p)break;p=!1,d=0;for(const _ of l)_[1]!=null&&(u=Math.trunc(Math.max(u,_[1].getY()))),_[3]!=null&&(u=Math.max(u,Math.trunc(_[3].getY())));u+=xt.ROW_STEP;continue}if(p=!0,l.push(x),!r)break;x[2]!=null?(d=Math.trunc(x[2].getX()),u=Math.trunc(x[2].getY())):(d=Math.trunc(x[4].getX()),u=Math.trunc(x[4].getY()))}return l}static findVertices(r,s,l){const u=r.getHeight(),d=r.getWidth(),p=new Array(8);return xt.copyToResult(p,xt.findRowsWithPattern(r,u,d,s,l,xt.START_PATTERN),xt.INDEXES_START_PATTERN),p[4]!=null&&(l=Math.trunc(p[4].getX()),s=Math.trunc(p[4].getY())),xt.copyToResult(p,xt.findRowsWithPattern(r,u,d,s,l,xt.STOP_PATTERN),xt.INDEXES_STOP_PATTERN),p}static copyToResult(r,s,l){for(let u=0;u<l.length;u++)r[l[u]]=s[u]}static findRowsWithPattern(r,s,l,u,d,p){const x=new Array(4);let _=!1;const S=new Int32Array(p.length);for(;u<s;u+=xt.ROW_STEP){let D=xt.findGuardPattern(r,d,u,l,!1,p,S);if(D!=null){for(;u>0;){const U=xt.findGuardPattern(r,d,--u,l,!1,p,S);if(U!=null)D=U;else{u++;break}}x[0]=new We(D[0],u),x[1]=new We(D[1],u),_=!0;break}}let E=u+1;if(_){let D=0,U=Int32Array.from([Math.trunc(x[0].getX()),Math.trunc(x[1].getX())]);for(;E<s;E++){const X=xt.findGuardPattern(r,U[0],E,l,!1,p,S);if(X!=null&&Math.abs(U[0]-X[0])<xt.MAX_PATTERN_DRIFT&&Math.abs(U[1]-X[1])<xt.MAX_PATTERN_DRIFT)U=X,D=0;else{if(D>xt.SKIPPED_ROW_COUNT_MAX)break;D++}}E-=D+1,x[2]=new We(U[0],E),x[3]=new We(U[1],E)}return E-u<xt.BARCODE_MIN_HEIGHT&&O.fill(x,null),x}static findGuardPattern(r,s,l,u,d,p,x){O.fillWithin(x,0,x.length,0);let _=s,S=0;for(;r.get(_,l)&&_>0&&S++<xt.MAX_PIXEL_DRIFT;)_--;let E=_,D=0,U=p.length;for(let X=d;E<u;E++)if(r.get(E,l)!==X)x[D]++;else{if(D===U-1){if(xt.patternMatchVariance(x,p,xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return new Int32Array([_,E]);_+=x[0]+x[1],R.arraycopy(x,2,x,0,D-1),x[D-1]=0,x[D]=0,D--}else D++;x[D]=1,X=!X}return D===U-1&&xt.patternMatchVariance(x,p,xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE?new Int32Array([_,E-1]):null}static patternMatchVariance(r,s,l){let u=r.length,d=0,p=0;for(let S=0;S<u;S++)d+=r[S],p+=s[S];if(d<p)return 1/0;let x=d/p;l*=x;let _=0;for(let S=0;S<u;S++){let E=r[S],D=s[S]*x,U=E>D?E-D:D-E;if(U>l)return 1/0;_+=U}return _/d}}xt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),xt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),xt.MAX_AVG_VARIANCE=.42,xt.MAX_INDIVIDUAL_VARIANCE=.8,xt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),xt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),xt.MAX_PIXEL_DRIFT=3,xt.MAX_PATTERN_DRIFT=5,xt.SKIPPED_ROW_COUNT_MAX=25,xt.ROW_STEP=5,xt.BARCODE_MIN_HEIGHT=10;class kn{constructor(r,s){if(s.length===0)throw new b;this.field=r;let l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),R.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let u=0;for(let d of this.coefficients)u=this.field.add(u,d);return u}let s=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)s=this.field.add(this.field.multiply(r,s),this.coefficients[u]);return s}add(r){if(!this.field.equals(r.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,l=r.coefficients;if(s.length>l.length){let p=s;s=l,l=p}let u=new Int32Array(l.length),d=l.length-s.length;R.arraycopy(l,0,u,0,d);for(let p=d;p<l.length;p++)u[p]=this.field.add(s[p-d],l[p]);return new kn(this.field,u)}subtract(r){if(!this.field.equals(r.field))throw new b("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof kn?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new kn(this.field,new Int32Array([0]));let s=this.coefficients,l=s.length,u=r.coefficients,d=u.length,p=new Int32Array(l+d-1);for(let x=0;x<l;x++){let _=s[x];for(let S=0;S<d;S++)p[x+S]=this.field.add(p[x+S],this.field.multiply(_,u[S]))}return new kn(this.field,p)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let l=0;l<r;l++)s[l]=this.field.subtract(0,this.coefficients[l]);return new kn(this.field,s)}multiplyScalar(r){if(r===0)return new kn(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,l=new Int32Array(s);for(let u=0;u<s;u++)l[u]=this.field.multiply(this.coefficients[u],r);return new kn(this.field,l)}multiplyByMonomial(r,s){if(r<0)throw new b;if(s===0)return new kn(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+r);for(let d=0;d<l;d++)u[d]=this.field.multiply(this.coefficients[d],s);return new kn(this.field,u)}toString(){let r=new we;for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);l!==0&&(l<0?(r.append(" - "),l=-l):r.length()>0&&r.append(" + "),(s===0||l!==1)&&r.append(l),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class Nl{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new b;return this.logTable[r]}inverse(r){if(r===0)throw new In;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class Ti extends Nl{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let l=1;for(let u=0;u<r;u++)this.expTable[u]=l,l=l*s%r;for(let u=0;u<r-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new kn(this,new Int32Array([0])),this.one=new kn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new b;if(s===0)return this.zero;let l=new Int32Array(r+1);return l[0]=s,new kn(this,l)}}Ti.PDF417_GF=new Ti(He.NUMBER_OF_CODEWORDS,3);class Ca{constructor(){this.field=Ti.PDF417_GF}decode(r,s,l){let u=new kn(this.field,r),d=new Int32Array(s),p=!1;for(let J=s;J>0;J--){let ne=u.evaluateAt(this.field.exp(J));d[s-J]=ne,ne!==0&&(p=!0)}if(!p)return 0;let x=this.field.getOne();if(l!=null)for(const J of l){let ne=this.field.exp(r.length-1-J),ce=new kn(this.field,new Int32Array([this.field.subtract(0,ne),1]));x=x.multiply(ce)}let _=new kn(this.field,d),S=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),_,s),E=S[0],D=S[1],U=this.findErrorLocations(E),X=this.findErrorMagnitudes(D,E,U);for(let J=0;J<U.length;J++){let ne=r.length-1-this.field.log(U[J]);if(ne<0)throw I.getChecksumInstance();r[ne]=this.field.subtract(r[ne],X[J])}return U.length}runEuclideanAlgorithm(r,s,l){if(r.getDegree()<s.getDegree()){let U=r;r=s,s=U}let u=r,d=s,p=this.field.getZero(),x=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let U=u,X=p;if(u=d,p=x,u.isZero())throw I.getChecksumInstance();d=U;let J=this.field.getZero(),ne=u.getCoefficient(u.getDegree()),ce=this.field.inverse(ne);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){let fe=d.getDegree()-u.getDegree(),Ie=this.field.multiply(d.getCoefficient(d.getDegree()),ce);J=J.add(this.field.buildMonomial(fe,Ie)),d=d.subtract(u.multiplyByMonomial(fe,Ie))}x=J.multiply(p).subtract(X).negative()}let _=x.getCoefficient(0);if(_===0)throw I.getChecksumInstance();let S=this.field.inverse(_),E=x.multiply(S),D=d.multiply(S);return[E,D]}findErrorLocations(r){let s=r.getDegree(),l=new Int32Array(s),u=0;for(let d=1;d<this.field.getSize()&&u<s;d++)r.evaluateAt(d)===0&&(l[u]=this.field.inverse(d),u++);if(u!==s)throw I.getChecksumInstance();return l}findErrorMagnitudes(r,s,l){let u=s.getDegree(),d=new Int32Array(u);for(let S=1;S<=u;S++)d[u-S]=this.field.multiply(S,s.getCoefficient(S));let p=new kn(this.field,d),x=l.length,_=new Int32Array(x);for(let S=0;S<x;S++){let E=this.field.inverse(l[S]),D=this.field.subtract(0,r.evaluateAt(E)),U=this.field.inverse(p.evaluateAt(E));_[S]=this.field.multiply(D,U)}return _}}class Wr{constructor(r,s,l,u,d){r instanceof Wr?this.constructor_2(r):this.constructor_1(r,s,l,u,d)}constructor_1(r,s,l,u,d){const p=s==null||l==null,x=u==null||d==null;if(p&&x)throw new oe;p?(s=new We(0,u.getY()),l=new We(0,d.getY())):x&&(u=new We(r.getWidth()-1,s.getY()),d=new We(r.getWidth()-1,l.getY())),this.image=r,this.topLeft=s,this.bottomLeft=l,this.topRight=u,this.bottomRight=d,this.minX=Math.trunc(Math.min(s.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),d.getX())),this.minY=Math.trunc(Math.min(s.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new Wr(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,l){let u=this.topLeft,d=this.bottomLeft,p=this.topRight,x=this.bottomRight;if(r>0){let _=l?this.topLeft:this.topRight,S=Math.trunc(_.getY()-r);S<0&&(S=0);let E=new We(_.getX(),S);l?u=E:p=E}if(s>0){let _=l?this.bottomLeft:this.bottomRight,S=Math.trunc(_.getY()+s);S>=this.image.getHeight()&&(S=this.image.getHeight()-1);let E=new We(_.getX(),S);l?d=E:x=E}return new Wr(this.image,u,d,p,x)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Zn{constructor(r,s,l,u){this.columnCount=r,this.errorCorrectionLevel=u,this.rowCountUpperPart=s,this.rowCountLowerPart=l,this.rowCount=s+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Zr{constructor(){this.buffer=""}static form(r,s){let l=-1;function u(p,x,_,S,E,D){if(p==="%%")return"%";if(s[++l]===void 0)return;p=S?parseInt(S.substr(1)):void 0;let U=E?parseInt(E.substr(1)):void 0,X;switch(D){case"s":X=s[l];break;case"c":X=s[l][0];break;case"f":X=parseFloat(s[l]).toFixed(p);break;case"p":X=parseFloat(s[l]).toPrecision(p);break;case"e":X=parseFloat(s[l]).toExponential(p);break;case"x":X=parseInt(s[l]).toString(U||16);break;case"d":X=parseFloat(parseInt(s[l],U||10).toPrecision(p)).toFixed(0);break}X=typeof X=="object"?JSON.stringify(X):(+X).toString(U);let J=parseInt(_),ne=_&&_[0]+""=="0"?"0":" ";for(;X.length<J;)X=x!==void 0?X+ne:ne+X;return X}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,u)}format(r,...s){this.buffer+=Zr.form(r,s)}toString(){return this.buffer}}class js{constructor(r){this.boundingBox=new Wr(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let l=1;l<js.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(r)-l;if(u>=0&&(s=this.codewords[u],s!=null)||(u=this.imageRowToCodewordIndex(r)+l,u<this.codewords.length&&(s=this.codewords[u],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new Zr;let s=0;for(const l of this.codewords){if(l==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,l.getRowNumber(),l.getValue())}return r.toString()}}js.MAX_NEARBY_DISTANCE=5;class Bs{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[l,u]of this.values.entries()){const d={getKey:()=>l,getValue:()=>u};d.getValue()>r?(r=d.getValue(),s=[],s.push(d.getKey())):d.getValue()===r&&s.push(d.getKey())}return He.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class cu extends js{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),x=this.imageRowToCodewordIndex(Math.trunc(d.getY())),_=-1,S=1,E=0;for(let D=p;D<x;D++){if(s[D]==null)continue;let U=s[D],X=U.getRowNumber()-_;if(X===0)E++;else if(X===1)S=Math.max(S,E),E=1,_=U.getRowNumber();else if(X<0||U.getRowNumber()>=r.getRowCount()||X>D)s[D]=null;else{let J;S>2?J=(S-2)*X:J=X;let ne=J>=D;for(let ce=1;ce<=J&&!ne;ce++)ne=s[D-ce]!=null;ne?s[D]=null:(_=U.getRowNumber(),E=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=s.length)continue;s[u]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),l=this._isLeft?s.getTopLeft():s.getTopRight(),u=this._isLeft?s.getBottomLeft():s.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),x=this.getCodewords(),_=-1;for(let S=d;S<p;S++){if(x[S]==null)continue;let E=x[S];E.setRowNumberAsRowIndicatorColumn();let D=E.getRowNumber()-_;D===0||(D===1?_=E.getRowNumber():E.getRowNumber()>=r.getRowCount()?x[S]=null:_=E.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new Bs,l=new Bs,u=new Bs,d=new Bs;for(let x of r){if(x==null)continue;x.setRowNumberAsRowIndicatorColumn();let _=x.getValue()%30,S=x.getRowNumber();switch(this._isLeft||(S+=2),S%3){case 0:l.setValue(_*3+1);break;case 1:d.setValue(_/3),u.setValue(_%3);break;case 2:s.setValue(_+1);break}}if(s.getValue().length===0||l.getValue().length===0||u.getValue().length===0||d.getValue().length===0||s.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<He.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>He.MAX_ROWS_IN_BARCODE)return null;let p=new Zn(s.getValue()[0],l.getValue()[0],u.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(r,p),p}removeIncorrectCodewords(r,s){for(let l=0;l<r.length;l++){let u=r[l];if(r[l]==null)continue;let d=u.getValue()%30,p=u.getRowNumber();if(p>s.getRowCount()){r[l]=null;continue}switch(this._isLeft||(p+=2),p%3){case 0:d*3+1!==s.getRowCountUpperPart()&&(r[l]=null);break;case 1:(Math.trunc(d/3)!==s.getErrorCorrectionLevel()||d%3!==s.getRowCountLowerPart())&&(r[l]=null);break;case 2:d+1!==s.getColumnCount()&&(r[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Fs{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=He.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let l=this.detectionResultColumns[s].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(s,u,l))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<r.length;l++)if(r[l]!=null&&s[l]!=null&&r[l].getRowNumber()===s[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let d=this.detectionResultColumns[u].getCodewords()[l];d!=null&&(d.setRowNumber(r[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),d=0;for(let p=this.barcodeColumnCount+1;p>0&&d<this.ADJUST_ROW_NUMBER_SKIP;p--){let x=this.detectionResultColumns[p].getCodewords()[l];x!=null&&(d=Fs.adjustRowNumberIfValid(u,d,x),x.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),d=0;for(let p=1;p<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;p++){let x=this.detectionResultColumns[p].getCodewords()[l];x!=null&&(d=Fs.adjustRowNumberIfValid(u,d,x),x.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(r)?(l.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,l){if(!this.detectionResultColumns[r-1])return;let u=l[s],d=this.detectionResultColumns[r-1].getCodewords(),p=d;this.detectionResultColumns[r+1]!=null&&(p=this.detectionResultColumns[r+1].getCodewords());let x=new Array(14);x[2]=d[s],x[3]=p[s],s>0&&(x[0]=l[s-1],x[4]=d[s-1],x[5]=p[s-1]),s>1&&(x[8]=l[s-2],x[10]=d[s-2],x[11]=p[s-2]),s<l.length-1&&(x[1]=l[s+1],x[6]=d[s+1],x[7]=p[s+1]),s<l.length-2&&(x[9]=l[s+2],x[12]=d[s+2],x[13]=p[s+2]);for(let _ of x)if(Fs.adjustRowNumber(u,_))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new Zr;for(let l=0;l<r.getCodewords().length;l++){s.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){s.format("    |   ");continue}let d=this.detectionResultColumns[u].getCodewords()[l];if(d==null){s.format("    |   ");continue}s.format(" %3d|%3d",d.getRowNumber(),d.getValue())}s.format("%n")}return s.toString()}}class cs{constructor(r,s,l,u){this.rowNumber=cs.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==cs.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}cs.BARCODE_ROW_UNKNOWN=-1;class cr{static initialize(){for(let r=0;r<He.SYMBOL_TABLE.length;r++){let s=He.SYMBOL_TABLE[r],l=s&1;for(let u=0;u<He.BARS_IN_MODULE;u++){let d=0;for(;(s&1)===l;)d+=1,s>>=1;l=s&1,cr.RATIOS_TABLE[r]||(cr.RATIOS_TABLE[r]=new Array(He.BARS_IN_MODULE)),cr.RATIOS_TABLE[r][He.BARS_IN_MODULE-u-1]=Math.fround(d/He.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=cr.getDecodedCodewordValue(cr.sampleBitCounts(r));return s!==-1?s:cr.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=ft.sum(r),l=new Int32Array(He.BARS_IN_MODULE),u=0,d=0;for(let p=0;p<He.MODULES_IN_CODEWORD;p++){let x=s/(2*He.MODULES_IN_CODEWORD)+p*s/He.MODULES_IN_CODEWORD;d+r[u]<=x&&(d+=r[u],u++),l[u]++}return l}static getDecodedCodewordValue(r){let s=cr.getBitValue(r);return He.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let l=0;l<r.length;l++)for(let u=0;u<r[l];u++)s=s<<1|(l%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=ft.sum(r),l=new Array(He.BARS_IN_MODULE);if(s>1)for(let p=0;p<l.length;p++)l[p]=Math.fround(r[p]/s);let u=Vn.MAX_VALUE,d=-1;this.bSymbolTableReady||cr.initialize();for(let p=0;p<cr.RATIOS_TABLE.length;p++){let x=0,_=cr.RATIOS_TABLE[p];for(let S=0;S<He.BARS_IN_MODULE;S++){let E=Math.fround(_[S]-l[S]);if(x+=Math.fround(E*E),x>=u)break}x<u&&(u=x,d=He.SYMBOL_TABLE[p])}return d}}cr.bSymbolTableReady=!1,cr.RATIOS_TABLE=new Array(He.SYMBOL_TABLE.length).map(P=>new Array(He.BARS_IN_MODULE));class Tl{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class Mt{static parseLong(r,s=void 0){return parseInt(r,s)}}class uu extends y{}uu.kind="NullPointerException";class Gr{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,l){if(r==null)throw new uu;if(s<0||s>r.length||l<0||s+l>r.length||s+l<0)throw new j;if(l===0)return;for(let u=0;u<l;u++)this.write(r[s+u])}flush(){}close(){}}class zo extends y{}class du extends Gr{constructor(r=32){if(super(),this.count=0,r<0)throw new b("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let l=this.buf.length<<1;if(l-r<0&&(l=r),l<0){if(r<0)throw new zo;l=k.MAX_VALUE}this.buf=O.copyOfUint8Array(this.buf,l)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,l){if(s<0||s>r.length||l<0||s+l-r.length>0)throw new j;this.ensureCapacity(this.count+l),R.arraycopy(r,s,this.buf,this.count,l),this.count+=l}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return O.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var qt;(function(P){P[P.ALPHA=0]="ALPHA",P[P.LOWER=1]="LOWER",P[P.MIXED=2]="MIXED",P[P.PUNCT=3]="PUNCT",P[P.ALPHA_SHIFT=4]="ALPHA_SHIFT",P[P.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(qt||(qt={}));function Sa(){if(typeof window<"u")return window.BigInt||null;if(typeof ka<"u")return ka.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Aa;function Ii(P){if(typeof Aa>"u"&&(Aa=Sa()),Aa===null)throw new Error("BigInt is not supported!");return Aa(P)}function Wh(){let P=[];P[0]=Ii(1);let r=Ii(900);P[1]=r;for(let s=2;s<16;s++)P[s]=P[s-1]*r;return P}class me{static decode(r,s){let l=new we(""),u=M.ISO8859_1;l.enableDecoding(u);let d=1,p=r[d++],x=new Tl;for(;d<r[0];){switch(p){case me.TEXT_COMPACTION_MODE_LATCH:d=me.textCompaction(r,d,l);break;case me.BYTE_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:d=me.byteCompaction(p,r,u,d,l);break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[d++]);break;case me.NUMERIC_COMPACTION_MODE_LATCH:d=me.numericCompaction(r,d,l);break;case me.ECI_CHARSET:M.getCharacterSetECIByValue(r[d++]);break;case me.ECI_GENERAL_PURPOSE:d+=2;break;case me.ECI_USER_DEFINED:d++;break;case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=me.decodeMacroBlock(r,d,x);break;case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:throw new H;default:d--,d=me.textCompaction(r,d,l);break}if(d<r.length)p=r[d++];else throw H.getFormatInstance()}if(l.length()===0)throw H.getFormatInstance();let _=new Tt(null,l.toString(),null,s);return _.setOther(x),_}static decodeMacroBlock(r,s,l){if(s+me.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw H.getFormatInstance();let u=new Int32Array(me.NUMBER_OF_SEQUENCE_CODEWORDS);for(let x=0;x<me.NUMBER_OF_SEQUENCE_CODEWORDS;x++,s++)u[x]=r[s];l.setSegmentIndex(k.parseInt(me.decodeBase900toBase10(u,me.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new we;s=me.textCompaction(r,s,d),l.setFileId(d.toString());let p=-1;for(r[s]===me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(p=s+1);s<r[0];)switch(r[s]){case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case me.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let x=new we;s=me.textCompaction(r,s+1,x),l.setFileName(x.toString());break;case me.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let _=new we;s=me.textCompaction(r,s+1,_),l.setSender(_.toString());break;case me.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let S=new we;s=me.textCompaction(r,s+1,S),l.setAddressee(S.toString());break;case me.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let E=new we;s=me.numericCompaction(r,s+1,E),l.setSegmentCount(k.parseInt(E.toString()));break;case me.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let D=new we;s=me.numericCompaction(r,s+1,D),l.setTimestamp(Mt.parseLong(D.toString()));break;case me.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let U=new we;s=me.numericCompaction(r,s+1,U),l.setChecksum(k.parseInt(U.toString()));break;case me.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let X=new we;s=me.numericCompaction(r,s+1,X),l.setFileSize(Mt.parseLong(X.toString()));break;default:throw H.getFormatInstance()}break;case me.MACRO_PDF417_TERMINATOR:s++,l.setLastSegment(!0);break;default:throw H.getFormatInstance()}if(p!==-1){let x=s-p;l.isLastSegment()&&x--,l.setOptionalData(O.copyOfRange(r,p,p+x))}return s}static textCompaction(r,s,l){let u=new Int32Array((r[0]-s)*2),d=new Int32Array((r[0]-s)*2),p=0,x=!1;for(;s<r[0]&&!x;){let _=r[s++];if(_<me.TEXT_COMPACTION_MODE_LATCH)u[p]=_/30,u[p+1]=_%30,p+=2;else switch(_){case me.TEXT_COMPACTION_MODE_LATCH:u[p++]=me.TEXT_COMPACTION_MODE_LATCH;break;case me.BYTE_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.NUMERIC_COMPACTION_MODE_LATCH:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:s--,x=!0;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[p]=me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=r[s++],d[p]=_,p++;break}}return me.decodeTextCompaction(u,d,p,l),s}static decodeTextCompaction(r,s,l,u){let d=qt.ALPHA,p=qt.ALPHA,x=0;for(;x<l;){let _=r[x],S="";switch(d){case qt.ALPHA:if(_<26)S=String.fromCharCode(65+_);else switch(_){case 26:S=" ";break;case me.LL:d=qt.LOWER;break;case me.ML:d=qt.MIXED;break;case me.PS:p=d,d=qt.PUNCT_SHIFT;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[x]);break;case me.TEXT_COMPACTION_MODE_LATCH:d=qt.ALPHA;break}break;case qt.LOWER:if(_<26)S=String.fromCharCode(97+_);else switch(_){case 26:S=" ";break;case me.AS:p=d,d=qt.ALPHA_SHIFT;break;case me.ML:d=qt.MIXED;break;case me.PS:p=d,d=qt.PUNCT_SHIFT;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[x]);break;case me.TEXT_COMPACTION_MODE_LATCH:d=qt.ALPHA;break}break;case qt.MIXED:if(_<me.PL)S=me.MIXED_CHARS[_];else switch(_){case me.PL:d=qt.PUNCT;break;case 26:S=" ";break;case me.LL:d=qt.LOWER;break;case me.AL:d=qt.ALPHA;break;case me.PS:p=d,d=qt.PUNCT_SHIFT;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[x]);break;case me.TEXT_COMPACTION_MODE_LATCH:d=qt.ALPHA;break}break;case qt.PUNCT:if(_<me.PAL)S=me.PUNCT_CHARS[_];else switch(_){case me.PAL:d=qt.ALPHA;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[x]);break;case me.TEXT_COMPACTION_MODE_LATCH:d=qt.ALPHA;break}break;case qt.ALPHA_SHIFT:if(d=p,_<26)S=String.fromCharCode(65+_);else switch(_){case 26:S=" ";break;case me.TEXT_COMPACTION_MODE_LATCH:d=qt.ALPHA;break}break;case qt.PUNCT_SHIFT:if(d=p,_<me.PAL)S=me.PUNCT_CHARS[_];else switch(_){case me.PAL:d=qt.ALPHA;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[x]);break;case me.TEXT_COMPACTION_MODE_LATCH:d=qt.ALPHA;break}break}S!==""&&u.append(S),x++}}static byteCompaction(r,s,l,u,d){let p=new du,x=0,_=0,S=!1;switch(r){case me.BYTE_COMPACTION_MODE_LATCH:let E=new Int32Array(6),D=s[u++];for(;u<s[0]&&!S;)switch(E[x++]=D,_=900*_+D,D=s[u++],D){case me.TEXT_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH:case me.NUMERIC_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:u--,S=!0;break;default:if(x%5===0&&x>0){for(let U=0;U<6;++U)p.write(Number(Ii(_)>>Ii(8*(5-U))));_=0,x=0}break}u===s[0]&&D<me.TEXT_COMPACTION_MODE_LATCH&&(E[x++]=D);for(let U=0;U<x;U++)p.write(E[U]);break;case me.BYTE_COMPACTION_MODE_LATCH_6:for(;u<s[0]&&!S;){let U=s[u++];if(U<me.TEXT_COMPACTION_MODE_LATCH)x++,_=900*_+U;else switch(U){case me.TEXT_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH:case me.NUMERIC_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:u--,S=!0;break}if(x%5===0&&x>0){for(let X=0;X<6;++X)p.write(Number(Ii(_)>>Ii(8*(5-X))));_=0,x=0}}break}return d.append(ie.decode(p.toByteArray(),l)),u}static numericCompaction(r,s,l){let u=0,d=!1,p=new Int32Array(me.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!d;){let x=r[s++];if(s===r[0]&&(d=!0),x<me.TEXT_COMPACTION_MODE_LATCH)p[u]=x,u++;else switch(x){case me.TEXT_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:s--,d=!0;break}(u%me.MAX_NUMERIC_CODEWORDS===0||x===me.NUMERIC_COMPACTION_MODE_LATCH||d)&&u>0&&(l.append(me.decodeBase900toBase10(p,u)),u=0)}return s}static decodeBase900toBase10(r,s){let l=Ii(0);for(let d=0;d<s;d++)l+=me.EXP900[s-d-1]*Ii(r[d]);let u=l.toString();if(u.charAt(0)!=="1")throw new H;return u.substring(1)}}me.TEXT_COMPACTION_MODE_LATCH=900,me.BYTE_COMPACTION_MODE_LATCH=901,me.NUMERIC_COMPACTION_MODE_LATCH=902,me.BYTE_COMPACTION_MODE_LATCH_6=924,me.ECI_USER_DEFINED=925,me.ECI_GENERAL_PURPOSE=926,me.ECI_CHARSET=927,me.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,me.MACRO_PDF417_TERMINATOR=922,me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,me.MAX_NUMERIC_CODEWORDS=15,me.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,me.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,me.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,me.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,me.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,me.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,me.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,me.PL=25,me.LL=27,me.AS=27,me.ML=28,me.AL=28,me.PS=29,me.PAL=29,me.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,me.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",me.EXP900=Sa()?Wh():[],me.NUMBER_OF_SEQUENCE_CODEWORDS=2;class _t{constructor(){}static decode(r,s,l,u,d,p,x){let _=new Wr(r,s,l,u,d),S=null,E=null,D;for(let J=!0;;J=!1){if(s!=null&&(S=_t.getRowIndicatorColumn(r,_,s,!0,p,x)),u!=null&&(E=_t.getRowIndicatorColumn(r,_,u,!1,p,x)),D=_t.merge(S,E),D==null)throw oe.getNotFoundInstance();let ne=D.getBoundingBox();if(J&&ne!=null&&(ne.getMinY()<_.getMinY()||ne.getMaxY()>_.getMaxY()))_=ne;else break}D.setBoundingBox(_);let U=D.getBarcodeColumnCount()+1;D.setDetectionResultColumn(0,S),D.setDetectionResultColumn(U,E);let X=S!=null;for(let J=1;J<=U;J++){let ne=X?J:U-J;if(D.getDetectionResultColumn(ne)!==void 0)continue;let ce;ne===0||ne===U?ce=new cu(_,ne===0):ce=new js(_),D.setDetectionResultColumn(ne,ce);let fe=-1,Ie=fe;for(let Me=_.getMinY();Me<=_.getMaxY();Me++){if(fe=_t.getStartColumn(D,ne,Me,X),fe<0||fe>_.getMaxX()){if(Ie===-1)continue;fe=Ie}let Ee=_t.detectCodeword(r,_.getMinX(),_.getMaxX(),X,fe,Me,p,x);Ee!=null&&(ce.setCodeword(Me,Ee),Ie=fe,p=Math.min(p,Ee.getWidth()),x=Math.max(x,Ee.getWidth()))}}return _t.createDecoderResult(D)}static merge(r,s){if(r==null&&s==null)return null;let l=_t.getBarcodeMetadata(r,s);if(l==null)return null;let u=Wr.merge(_t.adjustBoundingBox(r),_t.adjustBoundingBox(s));return new Fs(l,u)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let l=_t.getMax(s),u=0;for(let x of s)if(u+=l-x,x>0)break;let d=r.getCodewords();for(let x=0;u>0&&d[x]==null;x++)u--;let p=0;for(let x=s.length-1;x>=0&&(p+=l-s[x],!(s[x]>0));x--);for(let x=d.length-1;p>0&&d[x]==null;x--)p--;return r.getBoundingBox().addMissingRows(u,p,r.isLeft())}static getMax(r){let s=-1;for(let l of r)s=Math.max(s,l);return s}static getBarcodeMetadata(r,s){let l;if(r==null||(l=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let u;return s==null||(u=s.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(r,s,l,u,d,p){let x=new cu(s,u);for(let _=0;_<2;_++){let S=_===0?1:-1,E=Math.trunc(Math.trunc(l.getX()));for(let D=Math.trunc(Math.trunc(l.getY()));D<=s.getMaxY()&&D>=s.getMinY();D+=S){let U=_t.detectCodeword(r,0,r.getWidth(),u,E,D,d,p);U!=null&&(x.setCodeword(D,U),u?E=U.getStartX():E=U.getEndX())}}return x}static adjustCodewordCount(r,s){let l=s[0][1],u=l.getValue(),d=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-_t.getNumberOfECCodeWords(r.getBarcodeECLevel());if(u.length===0){if(d<1||d>He.MAX_CODEWORDS_IN_BARCODE)throw oe.getNotFoundInstance();l.setValue(d)}else u[0]!==d&&l.setValue(d)}static createDecoderResult(r){let s=_t.createBarcodeMatrix(r);_t.adjustCodewordCount(r,s);let l=new Array,u=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),d=[],p=new Array;for(let _=0;_<r.getBarcodeRowCount();_++)for(let S=0;S<r.getBarcodeColumnCount();S++){let E=s[_][S+1].getValue(),D=_*r.getBarcodeColumnCount()+S;E.length===0?l.push(D):E.length===1?u[D]=E[0]:(p.push(D),d.push(E))}let x=new Array(d.length);for(let _=0;_<x.length;_++)x[_]=d[_];return _t.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),u,He.toIntArray(l),He.toIntArray(p),x)}static createDecoderResultFromAmbiguousValues(r,s,l,u,d){let p=new Int32Array(u.length),x=100;for(;x-- >0;){for(let _=0;_<p.length;_++)s[u[_]]=d[_][p[_]];try{return _t.decodeCodewords(s,r,l)}catch(_){if(!(_ instanceof I))throw _}if(p.length===0)throw I.getChecksumInstance();for(let _=0;_<p.length;_++)if(p[_]<d[_].length-1){p[_]++;break}else if(p[_]=0,_===p.length-1)throw I.getChecksumInstance()}throw I.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let u=0;u<s.length;u++)for(let d=0;d<s[u].length;d++)s[u][d]=new Bs;let l=0;for(let u of r.getDetectionResultColumns()){if(u!=null){for(let d of u.getCodewords())if(d!=null){let p=d.getRowNumber();if(p>=0){if(p>=s.length)continue;s[p][l].setValue(d.getValue())}}}l++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,l,u){let d=u?1:-1,p=null;if(_t.isValidBarcodeColumn(r,s-d)&&(p=r.getDetectionResultColumn(s-d).getCodeword(l)),p!=null)return u?p.getEndX():p.getStartX();if(p=r.getDetectionResultColumn(s).getCodewordNearby(l),p!=null)return u?p.getStartX():p.getEndX();if(_t.isValidBarcodeColumn(r,s-d)&&(p=r.getDetectionResultColumn(s-d).getCodewordNearby(l)),p!=null)return u?p.getEndX():p.getStartX();let x=0;for(;_t.isValidBarcodeColumn(r,s-d);){s-=d;for(let _ of r.getDetectionResultColumn(s).getCodewords())if(_!=null)return(u?_.getEndX():_.getStartX())+d*x*(_.getEndX()-_.getStartX());x++}return u?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,l,u,d,p,x,_){d=_t.adjustCodewordStartColumn(r,s,l,u,d,p);let S=_t.getModuleBitCount(r,s,l,u,d,p);if(S==null)return null;let E,D=ft.sum(S);if(u)E=d+D;else{for(let J=0;J<S.length/2;J++){let ne=S[J];S[J]=S[S.length-1-J],S[S.length-1-J]=ne}E=d,d=E-D}if(!_t.checkCodewordSkew(D,x,_))return null;let U=cr.getDecodedValue(S),X=He.getCodeword(U);return X===-1?null:new cs(d,E,_t.getCodewordBucketNumber(U),X)}static getModuleBitCount(r,s,l,u,d,p){let x=d,_=new Int32Array(8),S=0,E=u?1:-1,D=u;for(;(u?x<l:x>=s)&&S<_.length;)r.get(x,p)===D?(_[S]++,x+=E):(S++,D=!D);return S===_.length||x===(u?l:s)&&S===_.length-1?_:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,l,u,d,p){let x=d,_=u?-1:1;for(let S=0;S<2;S++){for(;(u?x>=s:x<l)&&u===r.get(x,p);){if(Math.abs(d-x)>_t.CODEWORD_SKEW_SIZE)return d;x+=_}_=-_,u=!u}return x}static checkCodewordSkew(r,s,l){return s-_t.CODEWORD_SKEW_SIZE<=r&&r<=l+_t.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,l){if(r.length===0)throw H.getFormatInstance();let u=1<<s+1,d=_t.correctErrors(r,l,u);_t.verifyCodewordCount(r,u);let p=me.decode(r,""+s);return p.setErrorsCorrected(d),p.setErasures(l.length),p}static correctErrors(r,s,l){if(s!=null&&s.length>l/2+_t.MAX_ERRORS||l<0||l>_t.MAX_EC_CODEWORDS)throw I.getChecksumInstance();return _t.errorCorrection.decode(r,l,s)}static verifyCodewordCount(r,s){if(r.length<4)throw H.getFormatInstance();let l=r[0];if(l>r.length)throw H.getFormatInstance();if(l===0)if(s<r.length)r[0]=r.length-s;else throw H.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),l=0,u=s.length-1;for(;!((r&1)!==l&&(l=r&1,u--,u<0));)s[u]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return _t.getCodewordBucketNumber(_t.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new Zr;for(let l=0;l<r.length;l++){s.format("Row %2d: ",l);for(let u=0;u<r[l].length;u++){let d=r[l][u];d.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}s.format("%n")}return s.toString()}}_t.CODEWORD_SKEW_SIZE=2,_t.MAX_ERRORS=3,_t.MAX_EC_CODEWORDS=512,_t.errorCorrection=new Ca;class Gn{decode(r,s=null){let l=Gn.decode(r,s,!1);if(l==null||l.length===0||l[0]==null)throw oe.getNotFoundInstance();return l[0]}decodeMultiple(r,s=null){try{return Gn.decode(r,s,!0)}catch(l){throw l instanceof H||l instanceof I?oe.getNotFoundInstance():l}}static decode(r,s,l){const u=new Array,d=xt.detectMultiple(r,s,l);for(const p of d.getPoints()){const x=_t.decode(d.getBits(),p[4],p[5],p[6],p[7],Gn.getMinCodewordWidth(p),Gn.getMaxCodewordWidth(p)),_=new Le(x.getText(),x.getRawBytes(),void 0,p,le.PDF_417);_.putMetadata(st.ERROR_CORRECTION_LEVEL,x.getECLevel());const S=x.getOther();S!=null&&_.putMetadata(st.PDF417_EXTRA_METADATA,S),u.push(_)}return u.map(p=>p)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?k.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Gn.getMaxWidth(r[0],r[4]),Gn.getMaxWidth(r[6],r[2])*He.MODULES_IN_CODEWORD/He.MODULES_IN_STOP_PATTERN),Math.max(Gn.getMaxWidth(r[1],r[5]),Gn.getMaxWidth(r[7],r[3])*He.MODULES_IN_CODEWORD/He.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Gn.getMinWidth(r[0],r[4]),Gn.getMinWidth(r[6],r[2])*He.MODULES_IN_CODEWORD/He.MODULES_IN_STOP_PATTERN),Math.min(Gn.getMinWidth(r[1],r[5]),Gn.getMinWidth(r[7],r[3])*He.MODULES_IN_CODEWORD/He.MODULES_IN_STOP_PATTERN)))}reset(){}}class br extends y{}br.kind="ReaderException";class hu{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!i(r)&&r.get(Y.TRY_HARDER)===!0,l=i(r)?null:r.get(Y.POSSIBLE_FORMATS),u=new Array;if(!i(l)){const d=l.some(p=>p===le.UPC_A||p===le.UPC_E||p===le.EAN_13||p===le.EAN_8||p===le.CODABAR||p===le.CODE_39||p===le.CODE_93||p===le.CODE_128||p===le.ITF||p===le.RSS_14||p===le.RSS_EXPANDED);d&&!s&&u.push(new Wi(r,this.verbose)),l.includes(le.QR_CODE)&&u.push(new Wn),l.includes(le.DATA_MATRIX)&&u.push(new Xt),l.includes(le.AZTEC)&&u.push(new Ye),l.includes(le.PDF_417)&&u.push(new Gn),d&&s&&u.push(new Wi(r,this.verbose))}u.length===0&&(s||u.push(new Wi(r,this.verbose)),u.push(new Wn),u.push(new Xt),u.push(new Ye),u.push(new Gn),s&&u.push(new Wi(r,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new br("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(l){if(l instanceof br)continue}throw new oe("No MultiFormat Readers were able to detect the code.")}}class fu extends ze{constructor(r=null,s=500){const l=new hu;l.setHints(r),super(l,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class Zi extends ze{constructor(r=500){super(new Gn,r)}}class pu extends ze{constructor(r=500){super(new Wn,r)}}var Ea;(function(P){P[P.ERROR_CORRECTION=0]="ERROR_CORRECTION",P[P.CHARACTER_SET=1]="CHARACTER_SET",P[P.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",P[P.MIN_SIZE=3]="MIN_SIZE",P[P.MAX_SIZE=4]="MAX_SIZE",P[P.MARGIN=5]="MARGIN",P[P.PDF417_COMPACT=6]="PDF417_COMPACT",P[P.PDF417_COMPACTION=7]="PDF417_COMPACTION",P[P.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",P[P.AZTEC_LAYERS=9]="AZTEC_LAYERS",P[P.QR_VERSION=10]="QR_VERSION"})(Ea||(Ea={}));var yn=Ea;class Il{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new bt(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let l=s[s.length-1];const u=this.field;for(let d=s.length;d<=r;d++){const p=l.multiply(new bt(u,Int32Array.from([1,u.exp(d-1+u.getGeneratorBase())])));s.push(p),l=p}}return s[r]}encode(r,s){if(s===0)throw new b("No error correction bytes");const l=r.length-s;if(l<=0)throw new b("No data bytes provided");const u=this.buildGenerator(s),d=new Int32Array(l);R.arraycopy(r,0,d,0,l);let p=new bt(this.field,d);p=p.multiplyByMonomial(s,1);const _=p.divide(u)[1].getCoefficients(),S=s-_.length;for(let E=0;E<S;E++)r[l+E]=0;R.arraycopy(_,0,r,l+S,_.length)}}class un{constructor(){}static applyMaskPenaltyRule1(r){return un.applyMaskPenaltyRule1Internal(r,!0)+un.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const l=r.getArray(),u=r.getWidth(),d=r.getHeight();for(let p=0;p<d-1;p++){const x=l[p];for(let _=0;_<u-1;_++){const S=x[_];S===x[_+1]&&S===l[p+1][_]&&S===l[p+1][_+1]&&s++}}return un.N2*s}static applyMaskPenaltyRule3(r){let s=0;const l=r.getArray(),u=r.getWidth(),d=r.getHeight();for(let p=0;p<d;p++)for(let x=0;x<u;x++){const _=l[p];x+6<u&&_[x]===1&&_[x+1]===0&&_[x+2]===1&&_[x+3]===1&&_[x+4]===1&&_[x+5]===0&&_[x+6]===1&&(un.isWhiteHorizontal(_,x-4,x)||un.isWhiteHorizontal(_,x+7,x+11))&&s++,p+6<d&&l[p][x]===1&&l[p+1][x]===0&&l[p+2][x]===1&&l[p+3][x]===1&&l[p+4][x]===1&&l[p+5][x]===0&&l[p+6][x]===1&&(un.isWhiteVertical(l,x,p-4,p)||un.isWhiteVertical(l,x,p+7,p+11))&&s++}return s*un.N3}static isWhiteHorizontal(r,s,l){s=Math.max(s,0),l=Math.min(l,r.length);for(let u=s;u<l;u++)if(r[u]===1)return!1;return!0}static isWhiteVertical(r,s,l,u){l=Math.max(l,0),u=Math.min(u,r.length);for(let d=l;d<u;d++)if(r[d][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const l=r.getArray(),u=r.getWidth(),d=r.getHeight();for(let _=0;_<d;_++){const S=l[_];for(let E=0;E<u;E++)S[E]===1&&s++}const p=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-p)*10/p)*un.N4}static getDataMaskBit(r,s,l){let u,d;switch(r){case 0:u=l+s&1;break;case 1:u=l&1;break;case 2:u=s%3;break;case 3:u=(l+s)%3;break;case 4:u=Math.floor(l/2)+Math.floor(s/3)&1;break;case 5:d=l*s,u=(d&1)+d%3;break;case 6:d=l*s,u=(d&1)+d%3&1;break;case 7:d=l*s,u=d%3+(l+s&1)&1;break;default:throw new b("Invalid mask pattern: "+r)}return u===0}static applyMaskPenaltyRule1Internal(r,s){let l=0;const u=s?r.getHeight():r.getWidth(),d=s?r.getWidth():r.getHeight(),p=r.getArray();for(let x=0;x<u;x++){let _=0,S=-1;for(let E=0;E<d;E++){const D=s?p[x][E]:p[E][x];D===S?_++:(_>=5&&(l+=un.N1+(_-5)),_=1,S=D)}_>=5&&(l+=un.N1+(_-5))}return l}}un.N1=3,un.N2=3,un.N3=40,un.N4=10;class Uo{constructor(r,s){this.width=r,this.height=s;const l=new Array(s);for(let u=0;u!==s;u++)l[u]=new Uint8Array(r);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,l){this.bytes[s][r]=l}setBoolean(r,s,l){this.bytes[s][r]=l?1:0}clear(r){for(const s of this.bytes)O.fill(s,r)}equals(r){if(!(r instanceof Uo))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let l=0,u=this.height;l<u;++l){const d=this.bytes[l],p=s.bytes[l];for(let x=0,_=this.width;x<_;++x)if(d[x]!==p[x])return!1}return!0}toString(){const r=new we;for(let s=0,l=this.height;s<l;++s){const u=this.bytes[s];for(let d=0,p=this.width;d<p;++d)switch(u[d]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class us{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new we;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<us.NUM_MASK_PATTERNS}}us.NUM_MASK_PATTERNS=8;class Qt extends y{}Qt.kind="WriterException";class ot{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,l,u,d){ot.clearMatrix(d),ot.embedBasicPatterns(l,d),ot.embedTypeInfo(s,u,d),ot.maybeEmbedVersionInfo(l,d),ot.embedDataBits(r,u,d)}static embedBasicPatterns(r,s){ot.embedPositionDetectionPatternsAndSeparators(s),ot.embedDarkDotAtLeftBottomCorner(s),ot.maybeEmbedPositionAdjustmentPatterns(r,s),ot.embedTimingPatterns(s)}static embedTypeInfo(r,s,l){const u=new W;ot.makeTypeInfoBits(r,s,u);for(let d=0,p=u.getSize();d<p;++d){const x=u.get(u.getSize()-1-d),_=ot.TYPE_INFO_COORDINATES[d],S=_[0],E=_[1];if(l.setBoolean(S,E,x),d<8){const D=l.getWidth()-d-1;l.setBoolean(D,8,x)}else{const U=l.getHeight()-7+(d-8);l.setBoolean(8,U,x)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const l=new W;ot.makeVersionInfoBits(r,l);let u=6*3-1;for(let d=0;d<6;++d)for(let p=0;p<3;++p){const x=l.get(u);u--,s.setBoolean(d,s.getHeight()-11+p,x),s.setBoolean(s.getHeight()-11+p,d,x)}}static embedDataBits(r,s,l){let u=0,d=-1,p=l.getWidth()-1,x=l.getHeight()-1;for(;p>0;){for(p===6&&(p-=1);x>=0&&x<l.getHeight();){for(let _=0;_<2;++_){const S=p-_;if(!ot.isEmpty(l.get(S,x)))continue;let E;u<r.getSize()?(E=r.get(u),++u):E=!1,s!==255&&un.getDataMaskBit(s,S,x)&&(E=!E),l.setBoolean(S,x,E)}x+=d}d=-d,x+=d,p-=2}if(u!==r.getSize())throw new Qt("Not all bits consumed: "+u+"/"+r.getSize())}static findMSBSet(r){return 32-k.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new b("0 polynomial");const l=ot.findMSBSet(s);for(r<<=l-1;ot.findMSBSet(r)>=l;)r^=s<<ot.findMSBSet(r)-l;return r}static makeTypeInfoBits(r,s,l){if(!us.isValidMaskPattern(s))throw new Qt("Invalid mask pattern");const u=r.getBits()<<3|s;l.appendBits(u,5);const d=ot.calculateBCHCode(u,ot.TYPE_INFO_POLY);l.appendBits(d,10);const p=new W;if(p.appendBits(ot.TYPE_INFO_MASK_PATTERN,15),l.xor(p),l.getSize()!==15)throw new Qt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const l=ot.calculateBCHCode(r.getVersionNumber(),ot.VERSION_INFO_POLY);if(s.appendBits(l,12),s.getSize()!==18)throw new Qt("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const l=(s+1)%2;ot.isEmpty(r.get(s,6))&&r.setNumber(s,6,l),ot.isEmpty(r.get(6,s))&&r.setNumber(6,s,l)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new Qt;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,l){for(let u=0;u<8;++u){if(!ot.isEmpty(l.get(r+u,s)))throw new Qt;l.setNumber(r+u,s,0)}}static embedVerticalSeparationPattern(r,s,l){for(let u=0;u<7;++u){if(!ot.isEmpty(l.get(r,s+u)))throw new Qt;l.setNumber(r,s+u,0)}}static embedPositionAdjustmentPattern(r,s,l){for(let u=0;u<5;++u){const d=ot.POSITION_ADJUSTMENT_PATTERN[u];for(let p=0;p<5;++p)l.setNumber(r+p,s+u,d[p])}}static embedPositionDetectionPattern(r,s,l){for(let u=0;u<7;++u){const d=ot.POSITION_DETECTION_PATTERN[u];for(let p=0;p<7;++p)l.setNumber(r+p,s+u,d[p])}}static embedPositionDetectionPatternsAndSeparators(r){const s=ot.POSITION_DETECTION_PATTERN[0].length;ot.embedPositionDetectionPattern(0,0,r),ot.embedPositionDetectionPattern(r.getWidth()-s,0,r),ot.embedPositionDetectionPattern(0,r.getWidth()-s,r);const l=8;ot.embedHorizontalSeparationPattern(0,l-1,r),ot.embedHorizontalSeparationPattern(r.getWidth()-l,l-1,r),ot.embedHorizontalSeparationPattern(0,r.getWidth()-l,r);const u=7;ot.embedVerticalSeparationPattern(u,0,r),ot.embedVerticalSeparationPattern(r.getHeight()-u-1,0,r),ot.embedVerticalSeparationPattern(u,r.getHeight()-u,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const l=r.getVersionNumber()-1,u=ot.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,p=u.length;d!==p;d++){const x=u[d];if(x>=0)for(let _=0;_!==p;_++){const S=u[_];S>=0&&ot.isEmpty(s.get(S,x))&&ot.embedPositionAdjustmentPattern(S-2,x-2,s)}}}}ot.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ot.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ot.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ot.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ot.VERSION_INFO_POLY=7973,ot.TYPE_INFO_POLY=1335,ot.TYPE_INFO_MASK_PATTERN=21522;class Zh{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class en{constructor(){}static calculateMaskPenalty(r){return un.applyMaskPenaltyRule1(r)+un.applyMaskPenaltyRule2(r)+un.applyMaskPenaltyRule3(r)+un.applyMaskPenaltyRule4(r)}static encode(r,s,l=null){let u=en.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get(yn.CHARACTER_SET)!==void 0;d&&(u=l.get(yn.CHARACTER_SET).toString());const p=this.chooseMode(r,u),x=new W;if(p===it.BYTE&&(d||en.DEFAULT_BYTE_MODE_ENCODING!==u)){const Me=M.getCharacterSetECIByName(u);Me!==void 0&&this.appendECI(Me,x)}this.appendModeInfo(p,x);const _=new W;this.appendBytes(r,p,_,u);let S;if(l!==null&&l.get(yn.QR_VERSION)!==void 0){const Me=Number.parseInt(l.get(yn.QR_VERSION).toString(),10);S=Ve.getVersionForNumber(Me);const Ee=this.calculateBitsNeeded(p,x,_,S);if(!this.willFit(Ee,S,s))throw new Qt("Data too big for requested version")}else S=this.recommendVersion(s,p,x,_);const E=new W;E.appendBitArray(x);const D=p===it.BYTE?_.getSizeInBytes():r.length;this.appendLengthInfo(D,S,p,E),E.appendBitArray(_);const U=S.getECBlocksForLevel(s),X=S.getTotalCodewords()-U.getTotalECCodewords();this.terminateBits(X,E);const J=this.interleaveWithECBytes(E,S.getTotalCodewords(),X,U.getNumBlocks()),ne=new us;ne.setECLevel(s),ne.setMode(p),ne.setVersion(S);const ce=S.getDimensionForVersion(),fe=new Uo(ce,ce),Ie=this.chooseMaskPattern(J,s,S,fe);return ne.setMaskPattern(Ie),ot.buildMatrix(J,s,S,Ie,fe),ne.setMatrix(fe),ne}static recommendVersion(r,s,l,u){const d=this.calculateBitsNeeded(s,l,u,Ve.getVersionForNumber(1)),p=this.chooseVersion(d,r),x=this.calculateBitsNeeded(s,l,u,p);return this.chooseVersion(x,r)}static calculateBitsNeeded(r,s,l,u){return s.getSize()+r.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(r){return r<en.ALPHANUMERIC_TABLE.length?en.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if(M.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return it.KANJI;let l=!1,u=!1;for(let d=0,p=r.length;d<p;++d){const x=r.charAt(d);if(en.isDigit(x))l=!0;else if(this.getAlphanumericCode(x.charCodeAt(0))!==-1)u=!0;else return it.BYTE}return u?it.ALPHANUMERIC:l?it.NUMERIC:it.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=ie.encode(r,M.SJIS)}catch{return!1}const l=s.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){const d=s[u]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(r,s,l,u){let d=Number.MAX_SAFE_INTEGER,p=-1;for(let x=0;x<us.NUM_MASK_PATTERNS;x++){ot.buildMatrix(r,s,l,x,u);let _=this.calculateMaskPenalty(u);_<d&&(d=_,p=x)}return p}static chooseVersion(r,s){for(let l=1;l<=40;l++){const u=Ve.getVersionForNumber(l);if(en.willFit(r,u,s))return u}throw new Qt("Data too big")}static willFit(r,s,l){const u=s.getTotalCodewords(),p=s.getECBlocksForLevel(l).getTotalECCodewords(),x=u-p,_=(r+7)/8;return x>=_}static terminateBits(r,s){const l=r*8;if(s.getSize()>l)throw new Qt("data bits cannot fit in the QR Code"+s.getSize()+" > "+l);for(let p=0;p<4&&s.getSize()<l;++p)s.appendBit(!1);const u=s.getSize()&7;if(u>0)for(let p=u;p<8;p++)s.appendBit(!1);const d=r-s.getSizeInBytes();for(let p=0;p<d;++p)s.appendBits(p&1?17:236,8);if(s.getSize()!==l)throw new Qt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,l,u,d,p){if(u>=l)throw new Qt("Block ID too large");const x=r%l,_=l-x,S=Math.floor(r/l),E=S+1,D=Math.floor(s/l),U=D+1,X=S-D,J=E-U;if(X!==J)throw new Qt("EC bytes mismatch");if(l!==_+x)throw new Qt("RS blocks mismatch");if(r!==(D+X)*_+(U+J)*x)throw new Qt("Total bytes mismatch");u<_?(d[0]=D,p[0]=X):(d[0]=U,p[0]=J)}static interleaveWithECBytes(r,s,l,u){if(r.getSizeInBytes()!==l)throw new Qt("Number of bits and data bytes does not match");let d=0,p=0,x=0;const _=new Array;for(let E=0;E<u;++E){const D=new Int32Array(1),U=new Int32Array(1);en.getNumDataBytesAndNumECBytesForBlockID(s,l,u,E,D,U);const X=D[0],J=new Uint8Array(X);r.toBytes(8*d,J,0,X);const ne=en.generateECBytes(J,U[0]);_.push(new Zh(J,ne)),p=Math.max(p,X),x=Math.max(x,ne.length),d+=D[0]}if(l!==d)throw new Qt("Data bytes does not match offset");const S=new W;for(let E=0;E<p;++E)for(const D of _){const U=D.getDataBytes();E<U.length&&S.appendBits(U[E],8)}for(let E=0;E<x;++E)for(const D of _){const U=D.getErrorCorrectionBytes();E<U.length&&S.appendBits(U[E],8)}if(s!==S.getSizeInBytes())throw new Qt("Interleaving error: "+s+" and "+S.getSizeInBytes()+" differ.");return S}static generateECBytes(r,s){const l=r.length,u=new Int32Array(l+s);for(let p=0;p<l;p++)u[p]=r[p]&255;new Il(ct.QR_CODE_FIELD_256).encode(u,s);const d=new Uint8Array(s);for(let p=0;p<s;p++)d[p]=u[l+p];return d}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,l,u){const d=l.getCharacterCountBits(s);if(r>=1<<d)throw new Qt(r+" is bigger than "+((1<<d)-1));u.appendBits(r,d)}static appendBytes(r,s,l,u){switch(s){case it.NUMERIC:en.appendNumericBytes(r,l);break;case it.ALPHANUMERIC:en.appendAlphanumericBytes(r,l);break;case it.BYTE:en.append8BitBytes(r,l,u);break;case it.KANJI:en.appendKanjiBytes(r,l);break;default:throw new Qt("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=en.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const l=r.length;let u=0;for(;u<l;){const d=en.getDigit(r.charAt(u));if(u+2<l){const p=en.getDigit(r.charAt(u+1)),x=en.getDigit(r.charAt(u+2));s.appendBits(d*100+p*10+x,10),u+=3}else if(u+1<l){const p=en.getDigit(r.charAt(u+1));s.appendBits(d*10+p,7),u+=2}else s.appendBits(d,4),u++}}static appendAlphanumericBytes(r,s){const l=r.length;let u=0;for(;u<l;){const d=en.getAlphanumericCode(r.charCodeAt(u));if(d===-1)throw new Qt;if(u+1<l){const p=en.getAlphanumericCode(r.charCodeAt(u+1));if(p===-1)throw new Qt;s.appendBits(d*45+p,11),u+=2}else s.appendBits(d,6),u++}}static append8BitBytes(r,s,l){let u;try{u=ie.encode(r,l)}catch(d){throw new Qt(d)}for(let d=0,p=u.length;d!==p;d++){const x=u[d];s.appendBits(x,8)}}static appendKanjiBytes(r,s){let l;try{l=ie.encode(r,M.SJIS)}catch(d){throw new Qt(d)}const u=l.length;for(let d=0;d<u;d+=2){const p=l[d]&255,x=l[d+1]&255,_=p<<8&4294967295|x;let S=-1;if(_>=33088&&_<=40956?S=_-33088:_>=57408&&_<=60351&&(S=_-49472),S===-1)throw new Qt("Invalid byte sequence");const E=(S>>8)*192+(S&255);s.appendBits(E,13)}}static appendECI(r,s){s.appendBits(it.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}en.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),en.DEFAULT_BYTE_MODE_ENCODING=M.UTF8.getName();class Gi{write(r,s,l,u=null){if(r.length===0)throw new b("Found empty contents");if(s<0||l<0)throw new b("Requested dimensions are too small: "+s+"x"+l);let d=Et.L,p=Gi.QUIET_ZONE_SIZE;u!==null&&(u.get(yn.ERROR_CORRECTION)!==void 0&&(d=Et.fromString(u.get(yn.ERROR_CORRECTION).toString())),u.get(yn.MARGIN)!==void 0&&(p=Number.parseInt(u.get(yn.MARGIN).toString(),10)));const x=en.encode(r,d,u);return this.renderResult(x,s,l,p)}writeToDom(r,s,l,u,d=null){typeof r=="string"&&(r=document.querySelector(r));const p=this.write(s,l,u,d);r&&r.appendChild(p)}renderResult(r,s,l,u){const d=r.getMatrix();if(d===null)throw new Kt;const p=d.getWidth(),x=d.getHeight(),_=p+u*2,S=x+u*2,E=Math.max(s,_),D=Math.max(l,S),U=Math.min(Math.floor(E/_),Math.floor(D/S)),X=Math.floor((E-p*U)/2),J=Math.floor((D-x*U)/2),ne=this.createSVGElement(E,D);for(let ce=0,fe=J;ce<x;ce++,fe+=U)for(let Ie=0,Me=X;Ie<p;Ie++,Me+=U)if(d.get(Ie,ce)===1){const Ee=this.createSvgRectElement(Me,fe,U,U);ne.appendChild(Ee)}return ne}createSVGElement(r,s){const l=document.createElementNS(Gi.SVG_NS,"svg");return l.setAttributeNS(null,"height",r.toString()),l.setAttributeNS(null,"width",s.toString()),l}createSvgRectElement(r,s,l,u){const d=document.createElementNS(Gi.SVG_NS,"rect");return d.setAttributeNS(null,"x",r.toString()),d.setAttributeNS(null,"y",s.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",u.toString()),d.setAttributeNS(null,"fill","#000000"),d}}Gi.QUIET_ZONE_SIZE=4,Gi.SVG_NS="http://www.w3.org/2000/svg";class ki{encode(r,s,l,u,d){if(r.length===0)throw new b("Found empty contents");if(s!==le.QR_CODE)throw new b("Can only encode QR_CODE, but got "+s);if(l<0||u<0)throw new b(`Requested dimensions are too small: ${l}x${u}`);let p=Et.L,x=ki.QUIET_ZONE_SIZE;d!==null&&(d.get(yn.ERROR_CORRECTION)!==void 0&&(p=Et.fromString(d.get(yn.ERROR_CORRECTION).toString())),d.get(yn.MARGIN)!==void 0&&(x=Number.parseInt(d.get(yn.MARGIN).toString(),10)));const _=en.encode(r,p,d);return ki.renderResult(_,l,u,x)}static renderResult(r,s,l,u){const d=r.getMatrix();if(d===null)throw new Kt;const p=d.getWidth(),x=d.getHeight(),_=p+u*2,S=x+u*2,E=Math.max(s,_),D=Math.max(l,S),U=Math.min(Math.floor(E/_),Math.floor(D/S)),X=Math.floor((E-p*U)/2),J=Math.floor((D-x*U)/2),ne=new Ne(E,D);for(let ce=0,fe=J;ce<x;ce++,fe+=U)for(let Ie=0,Me=X;Ie<p;Ie++,Me+=U)d.get(Ie,ce)===1&&ne.setRegion(Me,fe,U,U);return ne}}ki.QUIET_ZONE_SIZE=4;class ds{encode(r,s,l,u,d){let p;switch(s){case le.QR_CODE:p=new ki;break;default:throw new b("No encoder available for format "+s)}return p.encode(r,s,l,u,d)}}class ai extends ee{constructor(r,s,l,u,d,p,x,_){if(super(p,x),this.yuvData=r,this.dataWidth=s,this.dataHeight=l,this.left=u,this.top=d,u+p>s||d+x>l)throw new b("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(p,x)}getRow(r,s){if(r<0||r>=this.getHeight())throw new b("Requested row is outside the image: "+r);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(r+this.top)*this.dataWidth+this.left;return R.arraycopy(this.yuvData,u,s,0,l),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const l=r*s,u=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return R.arraycopy(this.yuvData,d,u,0,l),u;for(let p=0;p<s;p++){const x=p*r;R.arraycopy(this.yuvData,d,u,x,r),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,s,l,u){return new ai(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,l,u,!1)}renderThumbnail(){const r=this.getWidth()/ai.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/ai.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(r*s),u=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let p=0;p<s;p++){const x=p*r;for(let _=0;_<r;_++){const S=u[d+_*ai.THUMBNAIL_SCALE_FACTOR]&255;l[x+_]=4278190080|S*65793}d+=this.dataWidth*ai.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/ai.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ai.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const l=this.yuvData;for(let u=0,d=this.top*this.dataWidth+this.left;u<s;u++,d+=this.dataWidth){const p=d+r/2;for(let x=d,_=d+r-1;x<p;x++,_--){const S=l[x];l[x]=l[_],l[_]=S}}}invert(){return new _e(this)}}ai.THUMBNAIL_SCALE_FACTOR=2;class hs extends ee{constructor(r,s,l,u,d,p,x){if(super(s,l),this.dataWidth=u,this.dataHeight=d,this.left=p,this.top=x,r.BYTES_PER_ELEMENT===4){const _=s*l,S=new Uint8ClampedArray(_);for(let E=0;E<_;E++){const D=r[E],U=D>>16&255,X=D>>7&510,J=D&255;S[E]=(U+X+J)/4&255}this.luminances=S}else this.luminances=r;if(u===void 0&&(this.dataWidth=s),d===void 0&&(this.dataHeight=l),p===void 0&&(this.left=0),x===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+l>this.dataHeight)throw new b("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new b("Requested row is outside the image: "+r);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(r+this.top)*this.dataWidth+this.left;return R.arraycopy(this.luminances,u,s,0,l),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const l=r*s,u=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return R.arraycopy(this.luminances,d,u,0,l),u;for(let p=0;p<s;p++){const x=p*r;R.arraycopy(this.luminances,d,u,x,r),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,s,l,u){return new hs(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new _e(this)}}class Cr extends M{static forName(r){return this.getCharacterSetECIByName(r)}}class Na{}Na.ISO_8859_1=M.ISO8859_1;class kl{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class mu{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class Ml{constructor(r){this.previous=r}getPrevious(){return this.previous}}class Yi extends Ml{constructor(r,s,l){super(r),this.value=s,this.bitCount=l}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new Yi(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Yi(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+k.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class Rl extends Yi{constructor(r,s,l){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=l}appendTo(r,s){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):l===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+l],8)}addBinaryShift(r,s){return new Rl(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Gh(P,r,s){return new Rl(P,r,s)}function zs(P,r,s){return new Yi(P,r,s)}const Yh=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Bn=0,Mi=1,Or=2,li=3,ci=4,Us=new Yi(null,0,0),Ol=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Vo(P){for(let r of P)O.fill(r,-1);return P[Bn][ci]=0,P[Mi][ci]=0,P[Mi][Bn]=28,P[li][ci]=0,P[Or][ci]=0,P[Or][Bn]=15,P}const Ll=Vo(O.createInt32Array(6,6));class Sr{constructor(r,s,l,u){this.token=r,this.mode=s,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let l=this.bitCount,u=this.token;if(r!==this.mode){let p=Ol[this.mode][r];u=zs(u,p&65535,p>>16),l+=p>>16}let d=r===Or?4:5;return u=zs(u,s,d),new Sr(u,r,0,l+d)}shiftAndAppend(r,s){let l=this.token,u=this.mode===Or?4:5;return l=zs(l,Ll[this.mode][r],u),l=zs(l,s,5),new Sr(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(r){let s=this.token,l=this.mode,u=this.bitCount;if(this.mode===ci||this.mode===Or){let x=Ol[l][Bn];s=zs(s,x&65535,x>>16),u+=x>>16,l=Bn}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,p=new Sr(s,l,this.binaryShiftByteCount+1,u+d);return p.binaryShiftByteCount===2078&&(p=p.endBinaryShift(r+1)),p}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=Gh(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new Sr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(Ol[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=Sr.calculateBinaryShiftCost(r)-Sr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let u=this.endBinaryShift(r.length).token;u!==null;u=u.getPrevious())s.unshift(u);let l=new W;for(const u of s)u.appendTo(l,r);return l}toString(){return ae.format("%s bits=%d bytes=%d",Yh[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}Sr.INITIAL_STATE=new Sr(Us,Bn,0,0);function Xh(P){const r=ae.getCharCode(" "),s=ae.getCharCode("."),l=ae.getCharCode(",");P[Bn][r]=1;const u=ae.getCharCode("Z"),d=ae.getCharCode("A");for(let U=d;U<=u;U++)P[Bn][U]=U-d+2;P[Mi][r]=1;const p=ae.getCharCode("z"),x=ae.getCharCode("a");for(let U=x;U<=p;U++)P[Mi][U]=U-x+2;P[Or][r]=1;const _=ae.getCharCode("9"),S=ae.getCharCode("0");for(let U=S;U<=_;U++)P[Or][U]=U-S+2;P[Or][l]=12,P[Or][s]=13;const E=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let U=0;U<E.length;U++)P[li][ae.getCharCode(E[U])]=U;const D=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let U=0;U<D.length;U++)ae.getCharCode(D[U])>0&&(P[ci][ae.getCharCode(D[U])]=U);return P}const ui=Xh(O.createInt32Array(5,256));class Xi{constructor(r){this.text=r}encode(){const r=ae.getCharCode(" "),s=ae.getCharCode(`
`);let l=mu.singletonList(Sr.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let p,x=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case ae.getCharCode("\r"):p=x===s?2:0;break;case ae.getCharCode("."):p=x===r?3:0;break;case ae.getCharCode(","):p=x===r?4:0;break;case ae.getCharCode(":"):p=x===r?5:0;break;default:p=0}p>0?(l=Xi.updateStateListForPair(l,d,p),d++):l=this.updateStateListForChar(l,d)}return mu.min(l,(d,p)=>d.getBitCount()-p.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const l=[];for(let u of r)this.updateStateForChar(u,s,l);return Xi.simplifyStates(l)}updateStateForChar(r,s,l){let u=this.text[s]&255,d=ui[r.getMode()][u]>0,p=null;for(let x=0;x<=ci;x++){let _=ui[x][u];if(_>0){if(p==null&&(p=r.endBinaryShift(s)),!d||x===r.getMode()||x===Or){const S=p.latchAndAppend(x,_);l.push(S)}if(!d&&Ll[r.getMode()][x]>=0){const S=p.shiftAndAppend(x,_);l.push(S)}}}if(r.getBinaryShiftByteCount()>0||ui[r.getMode()][u]===0){let x=r.addBinaryShiftChar(s);l.push(x)}}static updateStateListForPair(r,s,l){const u=[];for(let d of r)this.updateStateForPair(d,s,l,u);return this.simplifyStates(u)}static updateStateForPair(r,s,l,u){let d=r.endBinaryShift(s);if(u.push(d.latchAndAppend(ci,l)),r.getMode()!==ci&&u.push(d.shiftAndAppend(ci,l)),l===3||l===4){let p=d.latchAndAppend(Or,16-l).latchAndAppend(Or,1);u.push(p)}if(r.getBinaryShiftByteCount()>0){let p=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);u.push(p)}}static simplifyStates(r){let s=[];for(const l of r){let u=!0;for(const d of s){if(d.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(d)&&(s=s.filter(p=>p!==d))}u&&s.push(l)}return s}}class Pt{constructor(){}static encodeBytes(r){return Pt.encode(r,Pt.DEFAULT_EC_PERCENT,Pt.DEFAULT_AZTEC_LAYERS)}static encode(r,s,l){let u=new Xi(r).encode(),d=k.truncDivision(u.getSize()*s,100)+11,p=u.getSize()+d,x,_,S,E,D;if(l!==Pt.DEFAULT_AZTEC_LAYERS){if(x=l<0,_=Math.abs(l),_>(x?Pt.MAX_NB_BITS_COMPACT:Pt.MAX_NB_BITS))throw new b(ae.format("Illegal value %s for layers",l));S=Pt.totalBitsInLayer(_,x),E=Pt.WORD_SIZE[_];let Ee=S-S%E;if(D=Pt.stuffBits(u,E),D.getSize()+d>Ee)throw new b("Data to large for user specified layer");if(x&&D.getSize()>E*64)throw new b("Data to large for user specified layer")}else{E=0,D=null;for(let Ee=0;;Ee++){if(Ee>Pt.MAX_NB_BITS)throw new b("Data too large for an Aztec code");if(x=Ee<=3,_=x?Ee+1:Ee,S=Pt.totalBitsInLayer(_,x),p>S)continue;(D==null||E!==Pt.WORD_SIZE[_])&&(E=Pt.WORD_SIZE[_],D=Pt.stuffBits(u,E));let Nt=S-S%E;if(!(x&&D.getSize()>E*64)&&D.getSize()+d<=Nt)break}}let U=Pt.generateCheckWords(D,S,E),X=D.getSize()/E,J=Pt.generateModeMessage(x,_,X),ne=(x?11:14)+_*4,ce=new Int32Array(ne),fe;if(x){fe=ne;for(let Ee=0;Ee<ce.length;Ee++)ce[Ee]=Ee}else{fe=ne+1+2*k.truncDivision(k.truncDivision(ne,2)-1,15);let Ee=k.truncDivision(ne,2),Nt=k.truncDivision(fe,2);for(let yt=0;yt<Ee;yt++){let dn=yt+k.truncDivision(yt,15);ce[Ee-yt-1]=Nt-dn-1,ce[Ee+yt]=Nt+dn+1}}let Ie=new Ne(fe);for(let Ee=0,Nt=0;Ee<_;Ee++){let yt=(_-Ee)*4+(x?9:12);for(let dn=0;dn<yt;dn++){let ur=dn*2;for(let dr=0;dr<2;dr++)U.get(Nt+ur+dr)&&Ie.set(ce[Ee*2+dr],ce[Ee*2+dn]),U.get(Nt+yt*2+ur+dr)&&Ie.set(ce[Ee*2+dn],ce[ne-1-Ee*2-dr]),U.get(Nt+yt*4+ur+dr)&&Ie.set(ce[ne-1-Ee*2-dr],ce[ne-1-Ee*2-dn]),U.get(Nt+yt*6+ur+dr)&&Ie.set(ce[ne-1-Ee*2-dn],ce[Ee*2+dr])}Nt+=yt*8}if(Pt.drawModeMessage(Ie,x,fe,J),x)Pt.drawBullsEye(Ie,k.truncDivision(fe,2),5);else{Pt.drawBullsEye(Ie,k.truncDivision(fe,2),7);for(let Ee=0,Nt=0;Ee<k.truncDivision(ne,2)-1;Ee+=15,Nt+=16)for(let yt=k.truncDivision(fe,2)&1;yt<fe;yt+=2)Ie.set(k.truncDivision(fe,2)-Nt,yt),Ie.set(k.truncDivision(fe,2)+Nt,yt),Ie.set(yt,k.truncDivision(fe,2)-Nt),Ie.set(yt,k.truncDivision(fe,2)+Nt)}let Me=new kl;return Me.setCompact(x),Me.setSize(fe),Me.setLayers(_),Me.setCodeWords(X),Me.setMatrix(Ie),Me}static drawBullsEye(r,s,l){for(let u=0;u<l;u+=2)for(let d=s-u;d<=s+u;d++)r.set(d,s-u),r.set(d,s+u),r.set(s-u,d),r.set(s+u,d);r.set(s-l,s-l),r.set(s-l+1,s-l),r.set(s-l,s-l+1),r.set(s+l,s-l),r.set(s+l,s-l+1),r.set(s+l,s+l-1)}static generateModeMessage(r,s,l){let u=new W;return r?(u.appendBits(s-1,2),u.appendBits(l-1,6),u=Pt.generateCheckWords(u,28,4)):(u.appendBits(s-1,5),u.appendBits(l-1,11),u=Pt.generateCheckWords(u,40,4)),u}static drawModeMessage(r,s,l,u){let d=k.truncDivision(l,2);if(s)for(let p=0;p<7;p++){let x=d-3+p;u.get(p)&&r.set(x,d-5),u.get(p+7)&&r.set(d+5,x),u.get(20-p)&&r.set(x,d+5),u.get(27-p)&&r.set(d-5,x)}else for(let p=0;p<10;p++){let x=d-5+p+k.truncDivision(p,5);u.get(p)&&r.set(x,d-7),u.get(p+10)&&r.set(d+7,x),u.get(29-p)&&r.set(x,d+7),u.get(39-p)&&r.set(d-7,x)}}static generateCheckWords(r,s,l){let u=r.getSize()/l,d=new Il(Pt.getGF(l)),p=k.truncDivision(s,l),x=Pt.bitsToWords(r,l,p);d.encode(x,p-u);let _=s%l,S=new W;S.appendBits(0,_);for(const E of Array.from(x))S.appendBits(E,l);return S}static bitsToWords(r,s,l){let u=new Int32Array(l),d,p;for(d=0,p=r.getSize()/s;d<p;d++){let x=0;for(let _=0;_<s;_++)x|=r.get(d*s+_)?1<<s-_-1:0;u[d]=x}return u}static getGF(r){switch(r){case 4:return ct.AZTEC_PARAM;case 6:return ct.AZTEC_DATA_6;case 8:return ct.AZTEC_DATA_8;case 10:return ct.AZTEC_DATA_10;case 12:return ct.AZTEC_DATA_12;default:throw new b("Unsupported word size "+r)}}static stuffBits(r,s){let l=new W,u=r.getSize(),d=(1<<s)-2;for(let p=0;p<u;p+=s){let x=0;for(let _=0;_<s;_++)(p+_>=u||r.get(p+_))&&(x|=1<<s-1-_);(x&d)===d?(l.appendBits(x&d,s),p--):x&d?l.appendBits(x,s):(l.appendBits(x|1,s),p--)}return l}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}Pt.DEFAULT_EC_PERCENT=33,Pt.DEFAULT_AZTEC_LAYERS=0,Pt.MAX_NB_BITS=32,Pt.MAX_NB_BITS_COMPACT=4,Pt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Vs{encode(r,s,l,u){return this.encodeWithHints(r,s,l,u,null)}encodeWithHints(r,s,l,u,d){let p=Na.ISO_8859_1,x=Pt.DEFAULT_EC_PERCENT,_=Pt.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(yn.CHARACTER_SET)&&(p=Cr.forName(d.get(yn.CHARACTER_SET).toString())),d.has(yn.ERROR_CORRECTION)&&(x=k.parseInt(d.get(yn.ERROR_CORRECTION).toString())),d.has(yn.AZTEC_LAYERS)&&(_=k.parseInt(d.get(yn.AZTEC_LAYERS).toString()))),Vs.encodeLayers(r,s,l,u,p,x,_)}static encodeLayers(r,s,l,u,d,p,x){if(s!==le.AZTEC)throw new b("Can only encode AZTEC, but got "+s);let _=Pt.encode(ae.getBytes(r,d),p,x);return Vs.renderResult(_,l,u)}static renderResult(r,s,l){let u=r.getMatrix();if(u==null)throw new Kt;let d=u.getWidth(),p=u.getHeight(),x=Math.max(s,d),_=Math.max(l,p),S=Math.min(x/d,_/p),E=(x-d*S)/2,D=(_-p*S)/2,U=new Ne(x,_);for(let X=0,J=D;X<p;X++,J+=S)for(let ne=0,ce=E;ne<d;ne++,ce+=S)u.get(ne,X)&&U.setRegion(ce,J,S,S);return U}}n.AbstractExpandedDecoder=os,n.ArgumentException=C,n.ArithmeticException=In,n.AztecCode=kl,n.AztecCodeReader=Ye,n.AztecCodeWriter=Vs,n.AztecDecoder=It,n.AztecDetector=Oe,n.AztecDetectorResult=tn,n.AztecEncoder=Pt,n.AztecHighLevelEncoder=Xi,n.AztecPoint=Pe,n.BarcodeFormat=le,n.Binarizer=z,n.BinaryBitmap=T,n.BitArray=W,n.BitMatrix=Ne,n.BitSource=Ds,n.BrowserAztecCodeReader=ut,n.BrowserBarcodeReader=Po,n.BrowserCodeReader=ze,n.BrowserDatamatrixCodeReader=Sl,n.BrowserMultiFormatReader=fu,n.BrowserPDF417Reader=Zi,n.BrowserQRCodeReader=pu,n.BrowserQRCodeSvgWriter=Gi,n.CharacterSetECI=M,n.ChecksumException=I,n.Code128Reader=be,n.Code39Reader=Dt,n.DataMatrixDecodedBitStreamParser=_r,n.DataMatrixReader=Xt,n.DecodeHintType=Y,n.DecoderResult=Tt,n.DefaultGridSampler=ke,n.DetectorResult=gt,n.EAN13Reader=vr,n.EncodeHintType=yn,n.Exception=y,n.FormatException=H,n.GenericGF=ct,n.GenericGFPoly=bt,n.GlobalHistogramBinarizer=se,n.GridSampler=Bt,n.GridSamplerInstance=Ze,n.HTMLCanvasElementLuminanceSource=pe,n.HybridBinarizer=ve,n.ITFReader=Je,n.IllegalArgumentException=b,n.IllegalStateException=Kt,n.InvertedLuminanceSource=_e,n.LuminanceSource=ee,n.MathUtils=ft,n.MultiFormatOneDReader=Wi,n.MultiFormatReader=hu,n.MultiFormatWriter=ds,n.NotFoundException=oe,n.OneDReader=Fe,n.PDF417DecodedBitStreamParser=me,n.PDF417DecoderErrorCorrection=Ca,n.PDF417Reader=Gn,n.PDF417ResultMetadata=Tl,n.PerspectiveTransform=G,n.PlanarYUVLuminanceSource=ai,n.QRCodeByteMatrix=Uo,n.QRCodeDataMask=er,n.QRCodeDecodedBitStreamParser=rn,n.QRCodeDecoderErrorCorrectionLevel=Et,n.QRCodeDecoderFormatInformation=Jn,n.QRCodeEncoder=en,n.QRCodeEncoderQRCode=us,n.QRCodeMaskUtil=un,n.QRCodeMatrixUtil=ot,n.QRCodeMode=it,n.QRCodeReader=Wn,n.QRCodeVersion=Ve,n.QRCodeWriter=ki,n.RGBLuminanceSource=hs,n.RSS14Reader=gn,n.RSSExpandedReader=Se,n.ReaderException=br,n.ReedSolomonDecoder=Pn,n.ReedSolomonEncoder=Il,n.ReedSolomonException=Sn,n.Result=Le,n.ResultMetadataType=st,n.ResultPoint=We,n.StringUtils=ae,n.UnsupportedOperationException=q,n.VideoInputDevice=he,n.WhiteRectangleDetector=vt,n.WriterException=Qt,n.ZXingArrays=O,n.ZXingCharset=Cr,n.ZXingInteger=k,n.ZXingStandardCharsets=Na,n.ZXingStringBuilder=we,n.ZXingStringEncoding=ie,n.ZXingSystem=R,n.createAbstractExpandedDecoder=Lo,Object.defineProperty(n,"__esModule",{value:!0})})})(pp,pp.exports);var wn=pp.exports;const uk=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var Ay=function(){function e(t,n,i){if(this.formatMap=new Map([[qe.QR_CODE,wn.BarcodeFormat.QR_CODE],[qe.AZTEC,wn.BarcodeFormat.AZTEC],[qe.CODABAR,wn.BarcodeFormat.CODABAR],[qe.CODE_39,wn.BarcodeFormat.CODE_39],[qe.CODE_93,wn.BarcodeFormat.CODE_93],[qe.CODE_128,wn.BarcodeFormat.CODE_128],[qe.DATA_MATRIX,wn.BarcodeFormat.DATA_MATRIX],[qe.MAXICODE,wn.BarcodeFormat.MAXICODE],[qe.ITF,wn.BarcodeFormat.ITF],[qe.EAN_13,wn.BarcodeFormat.EAN_13],[qe.EAN_8,wn.BarcodeFormat.EAN_8],[qe.PDF_417,wn.BarcodeFormat.PDF_417],[qe.RSS_14,wn.BarcodeFormat.RSS_14],[qe.RSS_EXPANDED,wn.BarcodeFormat.RSS_EXPANDED],[qe.UPC_A,wn.BarcodeFormat.UPC_A],[qe.UPC_E,wn.BarcodeFormat.UPC_E],[qe.UPC_EAN_EXTENSION,wn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!uk)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var a=this.createZXingFormats(t),c=new Map;c.set(wn.DecodeHintType.POSSIBLE_FORMATS,a),c.set(wn.DecodeHintType.TRY_HARDER,!1),this.hints=c}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(i,a){try{i(n.decode(t))}catch(c){a(c)}})},e.prototype.decode=function(t){var n=new wn.MultiFormatReader(this.verbose,this.hints),i=new wn.HTMLCanvasElementLuminanceSource(t),a=new wn.BinaryBitmap(new wn.HybridBinarizer(i)),c=n.decode(a);return{text:c.text,format:rC.create(this.toHtml5QrcodeSupportedFormats(c.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,a){t.set(n,i)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],i=0,a=t;i<a.length;i++){var c=a[i];this.formatMap.has(c)?n.push(this.formatMap.get(c)):this.logger.logError("".concat(c," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),dk=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(C){try{y(i.next(C))}catch(b){f(b)}}function v(C){try{y(i.throw(C))}catch(b){f(b)}}function y(C){C.done?c(C.value):a(C.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},hk=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(C){return v([y,C])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Ey=function(){function e(t,n,i){if(this.formatMap=new Map([[qe.QR_CODE,"qr_code"],[qe.AZTEC,"aztec"],[qe.CODABAR,"codabar"],[qe.CODE_39,"code_39"],[qe.CODE_93,"code_93"],[qe.CODE_128,"code_128"],[qe.DATA_MATRIX,"data_matrix"],[qe.ITF,"itf"],[qe.EAN_13,"ean_13"],[qe.EAN_8,"ean_8"],[qe.PDF_417,"pdf417"],[qe.UPC_A,"upc_a"],[qe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return dk(this,void 0,void 0,function(){var n,i;return hk(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=a.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:rC.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,i=0,a=0,c=t;a<c.length;a++){var f=c[a],g=f.boundingBox.width*f.boundingBox.height;g>i&&(i=g,n=f)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],i=0,a=t;i<a.length;i++){var c=a[i];this.formatMap.has(c)?n.push(this.formatMap.get(c)):this.logger.warn("".concat(c," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,a){t.set(n,i)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),Ny=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(C){try{y(i.next(C))}catch(b){f(b)}}function v(C){try{y(i.throw(C))}catch(b){f(b)}}function y(C){C.done?c(C.value):a(C.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},Ty=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(C){return v([y,C])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},fk=function(){function e(t,n,i,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&Ey.isSupported()?(this.primaryDecoder=new Ey(t,i,a),this.secondaryDecoder=new Ay(t,i,a)):this.primaryDecoder=new Ay(t,i,a)}return e.prototype.decodeAsync=function(t){return Ny(this,void 0,void 0,function(){var n;return Ty(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return Ny(this,void 0,void 0,function(){var n,i;return Ty(this,function(a){switch(a.label){case 0:n=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,a.sent()];case 3:if(i=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,i=this.executionResults;n<i.length;n++){var a=i[n];t+=a}var c=t/this.executionResults.length;console.log("".concat(c," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),im=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Kd=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(C){try{y(i.next(C))}catch(b){f(b)}}function v(C){try{y(i.throw(C))}catch(b){f(b)}}function y(C){C.done?c(C.value):a(C.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},Qd=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(C){return v([y,C])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},aC=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var i={advanced:[n]};return this.track.applyConstraints(i)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e}(),pk=function(e){im(t,e);function t(n,i){return e.call(this,n,i)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var i={};i[this.name]=n;var a={advanced:[i]};return this.track.applyConstraints(a)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(aC),mk=function(e){im(t,e);function t(n){return e.call(this,"zoom",n)||this}return t}(pk),gk=function(e){im(t,e);function t(n){return e.call(this,"torch",n)||this}return t}(aC),xk=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new mk(this.track)},e.prototype.torchFeature=function(){return new gk(this.track)},e}(),yk=function(){function e(t,n,i){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=t.surface.clientWidth,a=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(i,a),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,i,a){return Kd(this,void 0,void 0,function(){var c,f;return Qd(this,function(g){switch(g.label){case 0:return c=new e(t,n,a),i.aspectRatio?(f={aspectRatio:i.aspectRatio},[4,c.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:g.sent(),g.label=2;case 2:return c.setupSurface(),[2,c]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,i=function(){setTimeout(t,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Kd(this,void 0,void 0,function(){return Qd(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,i){var a=t.mediaStream.getVideoTracks(),c=a.length,f=0;t.mediaStream.getVideoTracks().forEach(function(g){t.mediaStream.removeTrack(g),g.stop(),++f,f>=c&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new xk(this.getFirstTrackOrFail())},e}(),wk=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,i){return Kd(this,void 0,void 0,function(){return Qd(this,function(a){return[2,yk.create(t,this.mediaStream,n,i)]})})},e.create=function(t){return Kd(this,void 0,void 0,function(){var n,i;return Qd(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=a.sent(),[2,new e(i)]}})})},e}(),Iy=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(C){try{y(i.next(C))}catch(b){f(b)}}function v(C){try{y(i.throw(C))}catch(b){f(b)}}function y(C){C.done?c(C.value):a(C.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},ky=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(C){return v([y,C])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},vk=function(){function e(){}return e.failIfNotSupported=function(){return Iy(this,void 0,void 0,function(){return ky(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return Iy(this,void 0,void 0,function(){return ky(this,function(n){return[2,wk.create(t)]})})},e}(),_k=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(C){try{y(i.next(C))}catch(b){f(b)}}function v(C){try{y(i.throw(C))}catch(b){f(b)}}function y(C){C.done?c(C.value):a(C.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},bk=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(C){return v([y,C])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Ck=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Ka.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Ka.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return _k(this,void 0,void 0,function(){var t,n,i,a,c,f,g;return bk(this,function(v){switch(v.label){case 0:return t=function(y){for(var C=y.getVideoTracks(),b=0,T=C;b<T.length;b++){var I=T[b];I.enabled=!1,I.stop(),y.removeTrack(I)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=v.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=v.sent(),a=[],c=0,f=i;c<f.length;c++)g=f[c],g.kind==="videoinput"&&a.push({id:g.deviceId,label:g.label});return t(n),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var i=function(c){for(var f=[],g=0,v=c;g<v.length;g++){var y=v[g];y.kind==="video"&&f.push({id:y.id,label:y.label})}t(f)},a=MediaStreamTrack;a.getSources(i)})},e}(),En;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(En||(En={}));var Sk=function(){function e(){this.state=En.NOT_STARTED,this.onGoingTransactionNewState=En.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===En.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=En.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===En.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=En.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==En.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case En.UNKNOWN:throw"Transition from unknown is not allowed";case En.NOT_STARTED:this.failIfNewStateIs(t,[En.PAUSED]);break;case En.SCANNING:break;case En.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var i=0,a=n;i<a.length;i++){var c=a[i];if(t===c)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),Ak=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===En.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==En.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===En.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===En.PAUSED},e}(),Ek=function(){function e(){}return e.create=function(){return new Ak(new Sk)},e}(),Nk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Yr=function(e){Nk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(Di),Tk=function(){function e(t,n){this.logger=n,this.fps=Yr.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Yr.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?oC.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!$i(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),My=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new sC(this.verbose),this.qrcode=new fk(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Ek.create()}return e.prototype.start=function(t,n,i,a){var c=this;if(!t)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;a?f=a:f=this.verbose?this.logger.log:function(){};var g=Tk.create(n,this.logger);this.clearElement();var v=!1;g.videoConstraints&&(g.isMediaStreamConstraintsValid()?v=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var y=v,C=document.getElementById(this.elementId);C.clientWidth?C.clientWidth:Yr.DEFAULT_WIDTH,C.style.position="relative",this.shouldScan=!0,this.element=C;var b=this,T=this.stateManagerProxy.startTransition(En.SCANNING);return new Promise(function(I,z){var R=y?g.videoConstraints:b.createVideoConstraints(t);if(!R){T.cancel(),z("videoConstraints should be defined");return}var j={};(!y||g.aspectRatio)&&(j.aspectRatio=g.aspectRatio);var F={onRenderSurfaceReady:function(O,k){b.setupUi(O,k,g),b.isScanning=!0,b.foreverScan(g,i,f)}};vk.failIfNotSupported().then(function(O){O.create(R).then(function(k){return k.render(c.element,j,F).then(function(W){b.renderedCamera=W,T.execute(),I(null)}).catch(function(W){T.cancel(),z(W)})}).catch(function(k){T.cancel(),z(Ka.errorGettingUserMedia(k))})}).catch(function(O){T.cancel(),z(Ka.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(En.PAUSED),this.showPausedState(),($i(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(En.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(En.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(t.element){var c=document.getElementById(Yr.SHADED_REGION_ELEMENT_ID);c&&t.element.removeChild(c)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),i(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),n.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(i){return i.decodedText})},e.prototype.scanFileV2=function(t,n){var i=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if($i(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,c){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(t);var f=new Image;f.onload=function(){var g=f.width,v=f.height,y=document.getElementById(i.elementId),C=y.clientWidth?y.clientWidth:Yr.DEFAULT_WIDTH,b=Math.max(y.clientHeight?y.clientHeight:v,Yr.FILE_SCAN_MIN_HEIGHT),T=i.computeCanvasDrawConfig(g,v,C,b);if(n){var I=i.createCanvasElement(C,b,"qr-canvas-visible");I.style.display="inline-block",y.appendChild(I);var z=I.getContext("2d");if(!z)throw"Unable to get 2d context from canvas";z.canvas.width=C,z.canvas.height=b,z.drawImage(f,0,0,g,v,T.x,T.y,T.width,T.height)}var R=Yr.FILE_SCAN_HIDDEN_CANVAS_PADDING,j=Math.max(f.width,T.width),F=Math.max(f.height,T.height),O=j+2*R,k=F+2*R,W=i.createCanvasElement(O,k);y.appendChild(W);var K=W.getContext("2d");if(!K)throw"Unable to get 2d context from canvas";K.canvas.width=O,K.canvas.height=k,K.drawImage(f,0,0,g,v,R,R,j,F);try{i.qrcode.decodeRobustlyAsync(W).then(function(Y){a(Cy.createFromQrcodeResult(Y))}).catch(c)}catch(Y){c("QR code parse error, error = ".concat(Y))}},f.onerror=c,f.onabort=c,f.onstalled=c,f.onsuspend=c,f.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return Ck.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!oC.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[qe.QR_CODE,qe.AZTEC,qe.CODABAR,qe.CODE_39,qe.CODE_93,qe.CODE_128,qe.DATA_MATRIX,qe.MAXICODE,qe.ITF,qe.EAN_13,qe.EAN_8,qe.PDF_417,qe.RSS_14,qe.RSS_EXPANDED,qe.UPC_A,qe.UPC_E,qe.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],a=0,c=t.formatsToSupport;a<c.length;a++){var f=c[a];lk(f)?i.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if($i(t))return!0;if(!$i(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if($i(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return $i(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,i){var a=this,c=i.qrbox;this.validateQrboxConfig(c);var f=this.toQrdimensions(t,n,c),g=function(y){if(y<Yr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Yr.MIN_QR_BOX_SIZE,"px.")},v=function(y){return y>t&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),y=t),y};g(f.width),g(f.height),f.width=v(f.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(t,n)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return i},e.prototype.setupUi=function(t,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,i);var a=$i(i.qrbox)?{width:t,height:n}:i.qrbox;this.validateQrboxConfig(a);var c=this.toQrdimensions(t,n,a);c.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=i.isShadedBoxEnabled()&&c.height<=n,g={x:0,y:0,width:t,height:n},v=f?this.getShadedRegionBounds(t,n,c):g,y=this.createCanvasElement(v.width,v.height),C={willReadFrequently:!0},b=y.getContext("2d",C);b.canvas.width=v.width,b.canvas.height=v.height,this.element.append(y),f&&this.possiblyInsertShadingElement(this.element,t,n,c),this.createScannerPausedUiElement(this.element),this.qrRegion=v,this.context=b,this.canvasElement=y},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=Ka.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return t(a.text,Cy.createFromQrcodeResult(a)),i.possiblyUpdateShaders(!0),!0}).catch(function(a){i.possiblyUpdateShaders(!1);var c=Ka.codeParseError(a);return n(c,iC.createFrom(c)),!1})},e.prototype.foreverScan=function(t,n,i){var a=this;if(this.shouldScan&&this.renderedCamera){var c=this.renderedCamera.getSurface(),f=c.videoWidth/c.clientWidth,g=c.videoHeight/c.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var v=this.qrRegion.width*f,y=this.qrRegion.height*g,C=this.qrRegion.x*f,b=this.qrRegion.y*g;this.context.drawImage(c,C,b,v,y,0,0,this.qrRegion.width,this.qrRegion.height);var T=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(t,n,i)},a.getTimeoutFps(t.fps))};this.scanContext(n,i).then(function(I){!I&&t.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(n,i).finally(function(){T()})):T()}).catch(function(I){a.logger.logError("Error happend while scanning context",I),T()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",i="deviceId",a={user:!0,environment:!0},c="exact",f=function(z){if(z in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(z,"'")},g=Object.keys(t);if(g.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(g.length," keys");var v=Object.keys(t)[0];if(v!==n&&v!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(v===n){var y=t.facingMode;if(typeof y=="string"){if(f(y))return{facingMode:y}}else if(typeof y=="object")if(c in y){if(f(y["".concat(c)]))return{facingMode:{exact:y["".concat(c)]}}}else throw"'facingMode' should be string or object with"+" ".concat(c," as key.");else{var C=typeof y;throw"Invalid type of 'facingMode' = ".concat(C)}}else{var b=t.deviceId;if(typeof b=="string")return{deviceId:b};if(typeof b=="object"){if(c in b)return{deviceId:{exact:b["".concat(c)]}};throw"'deviceId' should be string or object with"+" ".concat(c," as key.")}else{var T=typeof b;throw"Invalid type of 'deviceId' = ".concat(T)}}}var I=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(I)},e.prototype.computeCanvasDrawConfig=function(t,n,i,a){if(t<=i&&n<=a){var c=(i-t)/2,f=(a-n)/2;return{x:c,y:f,width:t,height:n}}else{var g=t,v=n;return t>i&&(n=i/t*n,t=i),n>a&&(t=a/n*t,n=a),this.logger.log("Image downsampled from "+"".concat(g,"X").concat(v)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,i,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Yr.BORDER_SHADER_MATCH_COLOR:Yr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,i){var a=t,c=n,f=document.createElement("canvas");return f.style.width="".concat(a,"px"),f.style.height="".concat(c,"px"),f.style.display="none",f.id=$i(i)?"qr-canvas":i,f},e.prototype.getShadedRegionBounds=function(t,n,i){if(i.width>t||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},e.prototype.possiblyInsertShadingElement=function(t,n,i,a){if(!(n-a.width<1||i-a.height<1)){var c=document.createElement("div");c.style.position="absolute";var f=(n-a.width)/2,g=(i-a.height)/2;if(c.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderTop="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderBottom="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),c.style.boxSizing="border-box",c.style.top="0px",c.style.bottom="0px",c.style.left="0px",c.style.right="0px",c.id="".concat(Yr.SHADED_REGION_ELEMENT_ID),n-a.width<11||i-a.height<11)this.hasBorderShaders=!1;else{var v=5,y=40;this.insertShaderBorders(c,y,v,-v,null,0,!0),this.insertShaderBorders(c,y,v,-v,null,0,!1),this.insertShaderBorders(c,y,v,null,-v,0,!0),this.insertShaderBorders(c,y,v,null,-v,0,!1),this.insertShaderBorders(c,v,y+v,-v,null,-v,!0),this.insertShaderBorders(c,v,y+v,null,-v,-v,!0),this.insertShaderBorders(c,v,y+v,-v,null,-v,!1),this.insertShaderBorders(c,v,y+v,null,-v,-v,!1),this.hasBorderShaders=!0}t.append(c)}},e.prototype.insertShaderBorders=function(t,n,i,a,c,f,g){var v=document.createElement("div");v.style.position="absolute",v.style.backgroundColor=Yr.BORDER_SHADER_DEFAULT_COLOR,v.style.width="".concat(n,"px"),v.style.height="".concat(i,"px"),a!==null&&(v.style.top="".concat(a,"px")),c!==null&&(v.style.bottom="".concat(c,"px")),g?v.style.left="".concat(f,"px"):v.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(v),t.appendChild(v)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),sm="data:image/svg+xml;base64,",Ik=sm+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",kk=sm+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Ry=sm+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",Mk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Oy=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),Rk=function(){function e(){this.data=Oy.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=Oy.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),Ok=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Sy.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var i=document.createElement("br"),a=document.createElement("br");this.infoDiv.appendChild(i),this.infoDiv.appendChild(a);var c=document.createElement("a");c.innerText=Sy.reportIssues(),c.href="https://github.com/mebjas/html5-qrcode/issues",c.target="new",c.style.color="white",this.infoDiv.appendChild(c),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),Lk=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Ry,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(i){return n.onHoverIn()},this.infoIcon.onmouseout=function(i){return n.onHoverOut()},this.infoIcon.onclick=function(i){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=Mk,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Ry,this.infoIcon.style.opacity="0.6")},e}(),Pk=function(){function e(){var t=this;this.infoDiv=new Ok,this.infoIcon=new Lk(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}(),Dk=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(C){try{y(i.next(C))}catch(b){f(b)}}function v(C){try{y(i.throw(C))}catch(b){f(b)}}function y(C){C.done?c(C.value):a(C.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},jk=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(C){return v([y,C])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Ly=function(){function e(){}return e.hasPermissions=function(){return Dk(this,void 0,void 0,function(){var t,n,i,a;return jk(this,function(c){switch(c.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=c.sent(),n=0,i=t;n<i.length;n++)if(a=i[n],a.kind==="videoinput"&&a.label)return[2,!0];return[2,!1]}})})},e}(),Ys=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var i=n[t];if(e.isCameraScanType(i))return!0}return!1},e.isCameraScanType=function(t){return t===So.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===So.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return Di.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Di.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var i=0,a=t;i<a.length;i++){var c=a[i];if(!Di.DEFAULT_SUPPORTED_SCAN_TYPE.includes(c))throw"Unsupported scan type ".concat(c)}return t},e}(),$r=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),_s=function(){function e(){}return e.createElement=function(t,n){var i=document.createElement(t);return i.id=n,i.classList.add($r.ALL_ELEMENT_CLASS),t==="button"&&i.setAttribute("type","button"),i},e}(),lC=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(C){try{y(i.next(C))}catch(b){f(b)}}function v(C){try{y(i.throw(C))}catch(b){f(b)}}function y(C){C.done?c(C.value):a(C.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},cC=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(C){return v([y,C])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Py=function(){function e(t,n,i){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=i}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return lC(this,void 0,void 0,function(){var t,n;return cC(this,function(i){switch(i.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return i.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=i.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?$t.torchOffButton():$t.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var i=t?$t.torchOnFailedMessage():$t.torchOffFailedMessage();n&&(i+="; Error = "+n),this.onTorchActionFailureCallback(i)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),Bk=function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=_s.createElement("button",$r.TORCH_BUTTON_ID),this.torchController=new Py(t,this,n)}return e.prototype.render=function(t,n){var i=this;this.torchButton.innerText=$t.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var a=this;this.torchButton.addEventListener("click",function(c){return lC(i,void 0,void 0,function(){return cC(this,function(f){switch(f.label){case 0:return[4,a.torchController.flipState()];case 1:return f.sent(),a.torchController.isTorchEnabled()?(a.torchButton.classList.remove($r.TORCH_BUTTON_CLASS_TORCH_OFF),a.torchButton.classList.add($r.TORCH_BUTTON_CLASS_TORCH_ON)):(a.torchButton.classList.remove($r.TORCH_BUTTON_CLASS_TORCH_ON),a.torchButton.classList.add($r.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new Py(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=$t.torchOnButton(),this.torchController.reset()},e.create=function(t,n,i,a){var c=new e(n,a);return c.render(t,i),c},e}(),Fk=function(){function e(t,n,i){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var a=document.createElement("label");a.setAttribute("for",this.getFileScanInputId()),a.style.display="inline-block",this.fileBasedScanRegion.appendChild(a),this.fileSelectionButton=_s.createElement("button",$r.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(g){a.click()}),a.append(this.fileSelectionButton),this.fileScanInput=_s.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",a.appendChild(this.fileScanInput);var c=this;this.fileScanInput.addEventListener("change",function(g){if(!(g==null||g.target==null)){var v=g.target;if(!(v.files&&v.files.length===0)){var y=v.files,C=y[0],b=C.name;c.setImageNameToButton(b),i(C)}}});var f=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(f),this.fileBasedScanRegion.addEventListener("dragenter",function(g){c.fileBasedScanRegion.style.border=c.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(g){c.fileBasedScanRegion.style.border=c.fileBasedScanRegionDefaultBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(g){c.fileBasedScanRegion.style.border=c.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(g){g.stopPropagation(),g.preventDefault(),c.fileBasedScanRegion.style.border=c.fileBasedScanRegionDefaultBorder();var v=g.dataTransfer;if(v){var y=v.files;if(!y||y.length===0)return;for(var C=!1,b=0;b<y.length;++b){var T=y.item(b);if(T){var I=/image.*/;if(T.type.match(I)){C=!0;var z=T.name;c.setImageNameToButton(z),i(T),f.innerText=$t.dragAndDropMessage();break}}}C||(f.innerText=$t.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=$t.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var n=20;if(t.length>n){var i=t.substring(0,8),a=t.length,c=t.substring(a-8,a);t="".concat(i,"....").concat(c)}var f=$t.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=f},e.prototype.setInitialValueToButton=function(){var t=$t.fileSelectionChooseImage()+" - "+$t.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,i){var a=new e(t,n,i);return a},e}(),zk=function(){function e(t){this.selectElement=_s.createElement("select",$r.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var i=this.cameras.length;if(i===0)throw new Error("No cameras found");if(i===1)n.style.display="none";else{var a=$t.selectCamera();n.innerText="".concat(a," (").concat(this.cameras.length,")  ")}for(var c=1,f=0,g=this.cameras;f<g.length;f++){var v=g[f],y=v.id,C=v.label==null?y:v.label;(!C||C==="")&&(C=[$t.anonymousCameraPrefix(),c++].join(" "));var b=document.createElement("option");b.value=y,b.innerText=C,this.options.push(b),this.selectElement.appendChild(b)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,i=this.options;n<i.length;n++){var a=i[n];if(a.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var i=new e(n);return i.render(t),i},e}(),Uk=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=_s.createElement("input",$r.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var i=$t.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(i),this.rangeText.style.marginRight="10px";var a=this;this.rangeInput.addEventListener("input",function(){return a.onValueChange()}),this.rangeInput.addEventListener("change",function(){return a.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=$t.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,i,a){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=a.toString(),this.rangeInput.value=i.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var i=new e;return i.render(t,n),i},e}(),Xr;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Xr||(Xr={}));function Vk(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function Hk(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var Wk=function(){function e(t,n,i){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=i===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new Ys(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new sC(this.verbose),this.persistedDataManager=new Rk,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var i=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(c,f){if(t)t(c,f);else{if(i.lastMatchFound===c)return;i.lastMatchFound=c,i.setHeaderMessage($t.lastMatch(c),Xr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(c,f){n&&n(c,f)};var a=document.getElementById(this.elementId);if(!a)throw"HTML Element with id=".concat(this.elementId," not found");a.innerHTML="",this.createBasicLayout(a),this.html5Qrcode=new My(this.getScanRegionId(),Hk(this.config,this.verbose))},e.prototype.pause=function(t){($i(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var i=document.getElementById(t.elementId);i&&(i.innerHTML="",t.resetBasicLayout(i))};return this.html5Qrcode?new Promise(function(i,a){if(!t.html5Qrcode){i();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(c){if(!t.html5Qrcode){i();return}t.html5Qrcode.clear(),n(),i()}).catch(function(c){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",c),a(c)}):(t.html5Qrcode.clear(),n(),i())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=Di.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!Di.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=Di.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=Di.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:Di.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Di.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Di.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),i=this.getScanRegionId();n.id=i,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),Ys.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var a=document.createElement("div"),c=this.getDashboardId();a.id=c,a.style.width="100%",t.appendChild(a),this.setupInitialDashboard(a)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n);var i=new Pk;i.renderInto(n);var a=document.createElement("div");a.id=this.getHeaderMessageContainerId(),a.style.display="none",a.style.textAlign="center",a.style.fontSize="14px",a.style.padding="2px 10px",a.style.margin="4px",a.style.borderTop="1px solid #f6f6f6",n.appendChild(a)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,i){var a=this;a.showHideScanTypeSwapLink(!1),a.setHeaderMessage($t.cameraPermissionRequesting());var c=function(){i||a.createPermissionButton(t,n)};My.getCameras().then(function(f){a.persistedDataManager.setHasPermission(!0),a.showHideScanTypeSwapLink(!0),a.resetHeaderMessage(),f&&f.length>0?(t.removeChild(n),a.renderCameraSelection(f)):(a.setHeaderMessage($t.noCameraFound(),Xr.STATUS_WARNING),c())}).catch(function(f){a.persistedDataManager.setHasPermission(!1),i?i.disabled=!1:c(),a.setHeaderMessage(f,Xr.STATUS_WARNING),a.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var i=this,a=_s.createElement("button",this.getCameraPermissionButtonId());a.innerText=$t.cameraPermissionTitle(),a.addEventListener("click",function(){a.disabled=!0,i.createCameraListUi(t,n,a)}),n.appendChild(a)},e.prototype.createPermissionsUi=function(t,n){var i=this;if(Ys.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Ly.hasPermissions().then(function(a){a?i.createCameraListUi(t,n):(i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,n))}).catch(function(a){i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,n)});return}this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var i=document.createElement("div");i.id=this.getDashboardSectionCameraScanRegionId(),i.style.display=Ys.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(i);var a=document.createElement("div");a.style.textAlign="center",i.appendChild(a),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(i,a),this.renderFileScanUi(n)},e.prototype.renderFileScanUi=function(t){var n=Ys.isFileScanType(this.currentScanType),i=this,a=function(c){if(!i.html5Qrcode)throw"html5Qrcode not defined";Ys.isFileScanType(i.currentScanType)&&(i.setHeaderMessage($t.loadingImage()),i.html5Qrcode.scanFileV2(c,!0).then(function(f){i.resetHeaderMessage(),i.qrCodeSuccessCallback(f.decodedText,f)}).catch(function(f){i.setHeaderMessage(f,Xr.STATUS_WARNING),i.qrCodeErrorCallback(f,iC.createFrom(f))}))};this.fileSelectionUi=Fk.create(t,n,a)},e.prototype.renderCameraSelection=function(t){var n=this,i=this,a=document.getElementById(this.getDashboardSectionCameraScanRegionId());a.style.textAlign="center";var c=Uk.create(a,!1),f=function(R){var j=R.zoomFeature();if(j.isSupported()){c.setOnCameraZoomValueChangeCallback(function(O){j.apply(O)});var F=1;n.config.defaultZoomValueIfSupported&&(F=n.config.defaultZoomValueIfSupported),F=ck(F,j.min(),j.max()),c.setValues(j.min(),j.max(),F,j.step()),c.show()}},g=zk.create(a,t),v=document.createElement("span"),y=_s.createElement("button",$r.CAMERA_START_BUTTON_ID);y.innerText=$t.scanButtonStartScanningText(),v.appendChild(y);var C=_s.createElement("button",$r.CAMERA_STOP_BUTTON_ID);C.innerText=$t.scanButtonStopScanningText(),C.style.display="none",C.disabled=!0,v.appendChild(C);var b,T=function(R){if(!R.torchFeature().isSupported()){b&&b.hide();return}b?b.updateTorchCapability(R.torchFeature()):b=Bk.create(v,R.torchFeature(),{display:"none",marginLeft:"5px"},function(j){i.setHeaderMessage(j,Xr.STATUS_WARNING)}),b.show()};a.appendChild(v);var I=function(R){R||(y.style.display="none"),y.innerText=$t.scanButtonStartScanningText(),y.style.opacity="1",y.disabled=!1,R&&(y.style.display="inline-block")};if(y.addEventListener("click",function(R){y.innerText=$t.scanButtonScanningStarting(),g.disable(),y.disabled=!0,y.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!1),i.resetHeaderMessage();var j=g.getValue();i.persistedDataManager.setLastUsedCameraId(j),i.html5Qrcode.start(j,Vk(i.config),i.qrCodeSuccessCallback,i.qrCodeErrorCallback).then(function(F){C.disabled=!1,C.style.display="inline-block",I(!1);var O=i.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&T(O),n.config.showZoomSliderIfSupported===!0&&f(O)}).catch(function(F){i.showHideScanTypeSwapLink(!0),g.enable(),I(!0),i.setHeaderMessage(F,Xr.STATUS_WARNING)})}),g.hasSingleItem()&&y.click(),C.addEventListener("click",function(R){if(!i.html5Qrcode)throw"html5Qrcode not defined";C.disabled=!0,i.html5Qrcode.stop().then(function(j){n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!0),g.enable(),y.disabled=!1,C.style.display="none",y.style.display="inline-block",b&&(b.reset(),b.hide()),c.removeOnCameraZoomValueChangeCallback(),c.hide(),i.insertCameraScanImageToScanRegion()}).catch(function(j){C.disabled=!1,i.setHeaderMessage(j,Xr.STATUS_WARNING)})}),i.persistedDataManager.getLastUsedCameraId()){var z=i.persistedDataManager.getLastUsedCameraId();g.hasValue(z)?(g.setValue(z),y.click()):i.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=$t.textIfCameraScanSelected(),i=$t.textIfFileScanSelected(),a=document.getElementById(this.getDashboardSectionId()),c=document.createElement("div");c.style.textAlign="center";var f=_s.createElement("span",this.getDashboardSectionSwapLinkId());f.style.textDecoration="underline",f.style.cursor="pointer",f.innerText=Ys.isCameraScanType(this.currentScanType)?n:i,f.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,Ys.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),f.innerText=i,t.currentScanType=So.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),f.innerText=n,t.currentScanType=So.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),c.appendChild(f),a.appendChild(c)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){Ly.hasPermissions().then(function(i){if(i){var a=document.getElementById(n.getCameraPermissionButtonId());if(!a)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";a.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(i){n.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=Xr.STATUS_DEFAULT);var i=this.getHeaderMessageDiv();switch(i.innerText=t,i.style.display="block",n){case Xr.STATUS_SUCCESS:i.style.background="rgba(106, 175, 80, 0.26)",i.style.color="#477735";break;case Xr.STATUS_WARNING:i.style.background="rgba(203, 36, 49, 0.14)",i.style.color="#cb2431";break;case Xr.STATUS_DEFAULT:default:i.style.background="rgba(0, 0, 0, 0)",i.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=Ik,this.cameraScanImage.alt=$t.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=kk,this.fileScanImage.alt=$t.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return $r.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return $r.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();function Zk({onScan:e,onClose:t}){const[n,i]=B.useState(""),[a,c]=B.useState("camera");B.useEffect(()=>{if(a==="camera"){const g=new Wk("reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1,videoConstraints:{facingMode:{ideal:"environment"}}});return g.render(v=>{g.clear(),e(v)},v=>{}),()=>{g.clear()}}},[a,e]);const f=g=>{g.preventDefault(),n.trim()&&e(n.trim())};return m.jsxs("div",{className:"fixed inset-0 bg-black/90 z-50 flex flex-col pt-safe",children:[m.jsxs("div",{className:"flex justify-between items-center p-4 text-white",children:[m.jsx("h2",{className:"text-lg font-bold",children:"Scan AWB Barcode"}),m.jsx("button",{onClick:t,className:"p-2",children:m.jsx(_a,{})})]}),m.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:a==="camera"?m.jsx("div",{id:"reader",className:"w-full max-w-sm rounded-xl overflow-hidden bg-gray-800 border-2 border-primary-500"}):m.jsxs("form",{onSubmit:f,className:"w-full max-w-sm space-y-4",children:[m.jsx("input",{autoFocus:!0,className:"w-full p-4 rounded-xl bg-gray-800 text-white border border-gray-700 outline-none focus:border-primary-500 text-center text-2xl tracking-widest",placeholder:"ENTER AWB #",value:n,onChange:g=>i(g.target.value.toUpperCase())}),m.jsx("button",{className:"w-full py-4 bg-primary-600 text-white rounded-xl font-bold",children:"Submit Manually"})]})}),m.jsxs("div",{className:"p-8 flex justify-center gap-4",children:[m.jsxs("button",{onClick:()=>c("camera"),className:`p-4 rounded-full flex items-center gap-2 ${a==="camera"?"bg-primary-600 text-white":"bg-gray-800 text-gray-400"}`,children:[m.jsx(HI,{size:24})," ",m.jsx("span",{children:"Camera"})]}),m.jsxs("button",{onClick:()=>c("manual"),className:`p-4 rounded-full flex items-center gap-2 ${a==="manual"?"bg-primary-600 text-white":"bg-gray-800 text-gray-400"}`,children:[m.jsx($I,{size:24})," ",m.jsx("span",{children:"Manual"})]})]})]})}function vl(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function Gk(e,t){let n;const i=()=>{if(n)return n;const a=indexedDB.open(e);return a.onupgradeneeded=()=>a.result.createObjectStore(t),n=vl(a),n.then(c=>{c.onclose=()=>n=void 0},()=>{}),n};return(a,c)=>i().then(f=>c(f.transaction(t,a).objectStore(t)))}let Vf;function Lh(){return Vf||(Vf=Gk("keyval-store","keyval")),Vf}function Yk(e,t=Lh()){return t("readonly",n=>vl(n.get(e)))}function uC(e,t,n=Lh()){return n("readwrite",i=>(i.put(t,e),vl(i.transaction)))}function Xk(e,t=Lh()){return t("readwrite",n=>(n.delete(e),vl(n.transaction)))}function qk(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},vl(e.transaction)}function dC(e=Lh()){return e("readonly",t=>{if(t.getAllKeys)return vl(t.getAllKeys());const n=[];return qk(t,i=>n.push(i.key)).then(()=>n)})}const om=async(e,t,n={})=>{const i=`${e}-${t}-${Date.now()}`,a={id:i,awb:e,event_id:t,payload:n,timestamp:new Date().toISOString(),status:"pending"};return await uC(`queue-${i}`,a),a},am=async()=>{const t=(await dC()).filter(i=>i.startsWith("queue-"));return(await Promise.all(t.map(i=>Yk(i)))).sort((i,a)=>new Date(a.timestamp)-new Date(i.timestamp))},hC=async e=>{const n=(await am()).filter(i=>i.status==="pending");for(const i of n)try{await Oh(e,{awb:i.awb,event_id:i.event_id,timestamp:i.timestamp,payload:i.payload}),i.status="synced",await uC(`queue-${i.id}`,i)}catch(a){console.error("Sync failed for item",i.id,a)}},Kk=async()=>{const e=await dC(),t=(Array.isArray(e)?e:[]).filter(n=>String(n).startsWith("queue-"));return await Promise.all(t.map(n=>Xk(n))),t.length},Qk=Object.freeze(Object.defineProperty({__proto__:null,clearQueue:Kk,getQueue:am,queueItem:om,syncQueue:hC},Symbol.toStringTag,{value:"Module"})),Qa=e=>String(e||"").trim().toUpperCase().replace(/\s+/g,"").replace(/[^A-Z0-9]/g,""),Dy=e=>{const t=Qa(e);if(!t)return{normalized:"",candidates:[],coreCandidate:null,parcelSuffixCandidate:null};const n=[t],i=t.slice(-3),a=t.slice(0,-3);return/[A-Z]/.test(t)&&t.length>=11&&/^\d{3}$/.test(i)&&i!=="000"&&a&&a!==t?(n.push(a),{normalized:t,candidates:n,coreCandidate:a,parcelSuffixCandidate:i}):{normalized:t,candidates:n,coreCandidate:null,parcelSuffixCandidate:null}};function $k({awb:e,onBack:t,onComplete:n}){var we,Ne,oe,se,ve,ee,_e,pe,he,Te,ze,Le,te,le,De,st,Tt,Wt,bt,In,ct,Sn,Kt,Pn,wt,It,ft,Vn,We;const[i,a]=B.useState([]),[c,f]=B.useState(null),[g,v]=B.useState(!0),[y,C]=B.useState(!0),[b,T]=B.useState(null),[I,z]=B.useState(""),[R,j]=B.useState(null),[F,O]=B.useState(null),[k,W]=B.useState(!1),[K,Y]=B.useState(""),[H,Q]=B.useState(""),M=(()=>{if(!b)return null;const gt=Number(b.number_of_parcels);if(Number.isFinite(gt)&&gt>0)return gt;const tn=(b==null?void 0:b.raw_data)||{},vt=Number((tn==null?void 0:tn.numberOfDistinctBarcodes)??(tn==null?void 0:tn.numberOfParcels)??1);return Number.isFinite(vt)&&vt>0?vt:1})();B.useEffect(()=>{let gt=!1;const tn=localStorage.getItem("token"),vt=Dy(e);return z(vt.normalized),j(vt.normalized||null),O(null),v(!0),Y(""),Wb(tn).then(Bt=>{gt||a(Bt)}).catch(()=>{gt||Y("Failed to load status options")}).finally(()=>{gt||v(!1)}),C(!0),Q(""),T(null),(async()=>{var ke,Ze;let Bt=null;for(const Pe of vt.candidates)try{const Oe=await Vc(tn,Pe,{refresh:!0});if(gt)return;T(Oe);const Ye=Qa((Oe==null?void 0:Oe.awb)||"")||Pe;j(Ye||Pe),vt.coreCandidate&&vt.parcelSuffixCandidate&&vt.normalized&&Ye&&vt.normalized===`${vt.coreCandidate}${vt.parcelSuffixCandidate}`&&Ye===vt.coreCandidate?O(Number(vt.parcelSuffixCandidate)):O(null);return}catch(Oe){Bt=Oe;continue}if(gt)return;const G=(Ze=(ke=Bt==null?void 0:Bt.response)==null?void 0:ke.data)==null?void 0:Ze.detail;Q(G?String(G):"Failed to load shipment details")})().finally(()=>{gt||C(!1)}),()=>{gt=!0}},[e]);const q=async()=>{var gt,tn;C(!0),Q("");try{const vt=localStorage.getItem("token"),Bt=Dy(e);let G=null;for(const ke of Bt.candidates)try{const Ze=await Vc(vt,ke,{refresh:!0});T(Ze);const Pe=Qa((Ze==null?void 0:Ze.awb)||"")||ke;j(Pe||ke),Bt.coreCandidate&&Bt.parcelSuffixCandidate&&Bt.normalized&&Pe&&Bt.normalized===`${Bt.coreCandidate}${Bt.parcelSuffixCandidate}`&&Pe===Bt.coreCandidate?O(Number(Bt.parcelSuffixCandidate)):O(null),G=null;break}catch(Ze){G=Ze}if(G)throw G}catch(vt){const Bt=(tn=(gt=vt==null?void 0:vt.response)==null?void 0:gt.data)==null?void 0:tn.detail;Q(Bt?String(Bt):"Failed to load shipment details")}finally{C(!1)}},ie=(gt,tn="RON")=>{if(gt==null||gt==="")return"--";const vt=Number(gt);return Number.isFinite(vt)?`${vt.toFixed(2)} ${String(tn||"RON").toUpperCase()}`:"--"},ae=async()=>{var gt,tn,vt,Bt,G,ke,Ze,Pe;if(c){W(!0);try{const Oe=localStorage.getItem("token"),Ye=R||Qa(e),ut=(b==null?void 0:b.locality)||((tn=(gt=b==null?void 0:b.raw_data)==null?void 0:gt.recipientLocation)==null?void 0:tn.locality)||((Bt=(vt=b==null?void 0:b.raw_data)==null?void 0:vt.recipientLocation)==null?void 0:Bt.localityName)||"",Fe={};ut&&(Fe.locality=ut),Number.isInteger(F)&&F>0&&(Fe.parcel_index=F),Number.isFinite(M)&&M>0&&(Fe.parcels_total=M),I&&Ye&&I!==Ye&&(Fe.scanned_identifier=I);const be=Object.keys(Fe).length?Fe:void 0;await Oh(Oe,{awb:Ye,event_id:c,timestamp:new Date().toISOString(),payload:be}),n("SUCCESS",{awb:Ye,parcel_index:Fe.parcel_index,parcels_total:Fe.parcels_total})}catch{const Oe=(b==null?void 0:b.locality)||((ke=(G=b==null?void 0:b.raw_data)==null?void 0:G.recipientLocation)==null?void 0:ke.locality)||((Pe=(Ze=b==null?void 0:b.raw_data)==null?void 0:Ze.recipientLocation)==null?void 0:Pe.localityName)||"",Ye=R||Qa(e),ut={};Oe&&(ut.locality=Oe),Number.isInteger(F)&&F>0&&(ut.parcel_index=F),Number.isFinite(M)&&M>0&&(ut.parcels_total=M),I&&Ye&&I!==Ye&&(ut.scanned_identifier=I);const Fe=Object.keys(ut).length?ut:void 0;await om(Ye,c,Fe||{}),n("QUEUED",{awb:Ye,parcel_index:ut.parcel_index,parcels_total:ut.parcels_total})}finally{W(!1)}}};return m.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[m.jsxs("div",{className:"p-4 flex items-center gap-4 bg-white dark:bg-gray-800 shadow-sm",children:[m.jsx("button",{onClick:t,className:"p-2 -ml-2 text-gray-600",children:m.jsx(Ms,{})}),m.jsxs("div",{children:[m.jsx("h1",{className:"font-bold text-gray-900 dark:text-white",children:"Update AWB"}),m.jsxs("p",{className:"text-xs text-primary-600 font-mono tracking-wider",children:[R||I||e,Number.isInteger(F)&&F>0?m.jsxs("span",{className:"ml-2 text-[10px] font-black uppercase tracking-widest text-primary-600",children:["Parcel ",F,Number.isFinite(M)&&M>0?`/${M}`:""]}):null]}),I&&R&&I!==R?m.jsxs("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-mono mt-1",children:["Scanned: ",I]}):null]})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[m.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Shipment"}),m.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white truncate",children:y?"Loading details...":(b==null?void 0:b.recipient_name)||"--"})]}),m.jsx("button",{type:"button",onClick:q,disabled:y,className:"p-2 rounded-xl border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 disabled:opacity-50",title:"Refresh shipment details","aria-label":"Refresh shipment details",children:m.jsx(Ai,{size:16,className:y?"animate-spin":""})})]}),H?m.jsx("div",{className:"mt-3 p-3 bg-amber-100 text-amber-800 rounded-xl text-xs font-bold",children:H}):null,b?m.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"col-span-2",children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Address"}),m.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-200",children:b.delivery_address||b.locality||"--"})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Phone"}),m.jsx("p",{className:"text-sm font-mono text-gray-900 dark:text-white truncate",children:b.recipient_phone||"--"})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Content"}),m.jsx("p",{className:"text-sm text-gray-900 dark:text-white truncate",children:b.content_description||((we=b==null?void 0:b.raw_data)==null?void 0:we.contentDescription)||((Ne=b==null?void 0:b.raw_data)==null?void 0:Ne.contents)||((oe=b==null?void 0:b.raw_data)==null?void 0:oe.content)||((se=b==null?void 0:b.raw_data)==null?void 0:se.packingList)||((ve=b==null?void 0:b.raw_data)==null?void 0:ve.packingListNumber)||((ee=b==null?void 0:b.raw_data)==null?void 0:ee.packingListId)||((_e=b==null?void 0:b.raw_data)==null?void 0:_e.packing_list)||((pe=b==null?void 0:b.raw_data)==null?void 0:pe.packing_list_number)||((he=b==null?void 0:b.raw_data)==null?void 0:he.packing_list_id)||((Te=b==null?void 0:b.raw_data)==null?void 0:Te.packageContent)||((ze=b==null?void 0:b.raw_data)==null?void 0:ze.shipmentContent)||((Le=b==null?void 0:b.raw_data)==null?void 0:Le.goodsDescription)||((le=(te=b==null?void 0:b.raw_data)==null?void 0:te.additionalServices)==null?void 0:le.contentDescription)||((st=(De=b==null?void 0:b.raw_data)==null?void 0:De.additionalServices)==null?void 0:st.contents)||((Wt=(Tt=b==null?void 0:b.raw_data)==null?void 0:Tt.additionalServices)==null?void 0:Wt.content)||((In=(bt=b==null?void 0:b.raw_data)==null?void 0:bt.additionalServices)==null?void 0:In.packingList)||((Sn=(ct=b==null?void 0:b.raw_data)==null?void 0:ct.additionalServices)==null?void 0:Sn.packingListNumber)||((Pn=(Kt=b==null?void 0:b.raw_data)==null?void 0:Kt.additionalServices)==null?void 0:Pn.packingListId)||((It=(wt=b==null?void 0:b.raw_data)==null?void 0:wt.productCategory)==null?void 0:It.name)||(typeof((ft=b==null?void 0:b.raw_data)==null?void 0:ft.productCategory)=="string"?b.raw_data.productCategory:"")||"--"})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"COD"}),m.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:ie(b.cod_amount,b.currency||"RON")})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Parcels"}),m.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:Number.isFinite(Number(b.number_of_parcels))?Number(b.number_of_parcels):((Vn=b==null?void 0:b.raw_data)==null?void 0:Vn.numberOfDistinctBarcodes)||((We=b==null?void 0:b.raw_data)==null?void 0:We.numberOfParcels)||1})]}),Number.isInteger(F)&&F>0?m.jsxs("div",{children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Parcel"}),m.jsxs("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[F,Number.isFinite(M)&&M>0?`/${M}`:""]})]}):null]}):null]}),g?m.jsx("div",{className:"flex justify-center p-8",children:m.jsx(pn,{className:"animate-spin text-primary-500"})}):K?m.jsxs("div",{className:"p-4 bg-red-100 text-red-700 rounded-xl flex items-center gap-3",children:[m.jsx(H_,{size:20})," ",K]}):i.map(gt=>m.jsxs("button",{onClick:()=>f(gt.event_id),className:`w-full p-4 rounded-2xl text-left border-2 transition-all ${c===gt.event_id?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-white dark:border-gray-800 bg-white dark:bg-gray-800"}`,children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:gt.label}),c===gt.event_id&&m.jsx(G_,{className:"text-primary-500",size:20})]}),m.jsx("p",{className:"text-sm text-gray-500",children:gt.description})]},gt.event_id))]}),m.jsx("div",{className:"p-4 bg-white dark:bg-gray-800 shadow-up",children:m.jsx("button",{disabled:!c||k,onClick:ae,className:"w-full py-4 bg-primary-600 disabled:opacity-50 text-white rounded-xl font-bold flex items-center justify-center gap-2",children:k?m.jsx(pn,{className:"animate-spin"}):"Confirm Status Update"})})]})}function jy(){const[e,t]=B.useState(!1),[n,i]=B.useState(null),[a,c]=B.useState(null),[f,g]=B.useState(""),v=wr(),{user:y}=sr();B.useEffect(()=>{const W=localStorage.getItem("token");W&&hC(W);const K=new Date().getHours();K<12?g("Good Morning"):K<18?g("Good Afternoon"):g("Good Evening")},[]);const C=W=>{const K=Qa(W);K&&(i(K),t(!1))},b=(W,K=null)=>{const Y=String((K==null?void 0:K.awb)||n||"").trim().toUpperCase(),H=Number(K==null?void 0:K.parcel_index),Q=Number.isFinite(H)&&H>0?H:null,M=Number(K==null?void 0:K.parcels_total),q=Number.isFinite(M)&&M>0?M:null;c({awb:Y||n,outcome:W,parcel_index:Q,parcels_total:q}),i(null),setTimeout(()=>c(null),3e3)};if(n)return m.jsx($k,{awb:n,onBack:()=>i(null),onComplete:b});const T=Tn(y,Ko),I=Tn(y,Pr),z=Tn(y,wo),R=Tn(y,Li),j=Tn(y,xi),F=String((y==null?void 0:y.role)||"")==="Recipient",O={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},k={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return m.jsxs(et.div,{initial:"hidden",animate:"visible",exit:{opacity:0,y:-20},variants:O,className:"flex flex-col min-h-screen relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-violet-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"0s"}}),m.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"3s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-glow-md animate-float",children:m.jsx("span",{className:"text-white font-black italic tracking-tighter text-xl",children:"AN"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-lg font-black text-gradient leading-none",children:"AryNik"}),m.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[m.jsxs("span",{className:"relative flex h-2 w-2",children:[m.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),m.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]}),m.jsx("span",{className:"text-[10px] font-bold text-emerald-400 uppercase tracking-widest",children:"Online"})]})]})]}),m.jsx("button",{type:"button",onClick:()=>v("/settings"),className:"w-10 h-10 rounded-full glass-light flex items-center justify-center border border-white/10 hover:bg-white/10 transition-colors","aria-label":"Account",title:"Account",children:m.jsx(va,{size:18,className:"text-violet-300"})})]}),m.jsxs("main",{className:"flex-1 p-6 space-y-8 pb-32 relative z-10",children:[m.jsxs(et.div,{variants:k,children:[m.jsx("h2",{className:"text-3xl font-black text-white mb-1",children:f}),m.jsxs("p",{className:"text-slate-400 font-medium",children:[(y==null?void 0:y.name)||(y==null?void 0:y.username)||"Driver","  ",F?"Recipient Tracking":y!=null&&y.truck_plate?`Truck ${String(y.truck_plate).toUpperCase()}`:"Truck Unassigned"]}),!F&&(y!=null&&y.truck_phone)?m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-1",children:["Truck phone: ",y.truck_phone]}):null,F?m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-1",children:["Login: ",(y==null?void 0:y.username)||"--"]}):null]}),R?m.jsx(et.div,{variants:k,children:m.jsx(ak,{})}):null,a&&m.jsxs(et.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`p-4 rounded-2xl flex items-center gap-4 shadow-lg ${a.outcome==="SUCCESS"?"bg-gradient-to-r from-emerald-500 to-emerald-600 shadow-emerald-500/20":"bg-gradient-to-r from-violet-500 to-purple-600 shadow-violet-500/20"}`,children:[m.jsx("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-sm",children:m.jsx(od,{size:20,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("span",{className:"font-black text-sm uppercase tracking-wide text-white",children:["Update ",a.outcome==="SUCCESS"?"Confirmed":"Queued"]}),m.jsxs("p",{className:"text-xs font-bold text-white/80",children:[a.awb,Number.isFinite(a.parcel_index)&&a.parcel_index>0?m.jsxs("span",{className:"ml-2 text-[10px] font-black uppercase tracking-widest text-white/80",children:["Parcel ",a.parcel_index,Number.isFinite(a.parcels_total)&&a.parcels_total>0?`/${a.parcels_total}`:""]}):null]})]})]}),m.jsxs(et.div,{variants:k,className:"space-y-4",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Quick Actions"}),T?m.jsxs(et.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(!0),className:"w-full py-12 bg-gradient-to-br from-violet-600 via-purple-600 to-violet-700 rounded-[32px] shadow-glow-lg flex flex-col items-center justify-center text-white space-y-5 relative overflow-hidden group",children:[m.jsx("div",{className:"absolute inset-0 shimmer opacity-30"}),m.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-white/10 rounded-full blur-3xl -ml-12 -mb-12"}),m.jsx("div",{className:"p-6 bg-white/10 rounded-3xl backdrop-blur-sm border border-white/20 group-hover:scale-110 group-hover:rotate-3 transition-all duration-500 shadow-inner-glow",children:m.jsx(r8,{size:52,strokeWidth:1.5,className:"animate-glow"})}),m.jsxs("div",{className:"text-center relative z-10",children:[m.jsx("h2",{className:"text-2xl font-black uppercase tracking-tight",children:"Scan Package"}),m.jsxs("p",{className:"text-violet-100 text-xs font-bold opacity-90 uppercase tracking-widest mt-1 flex items-center justify-center gap-2",children:[m.jsx(nb,{size:12}),"Tap to open scanner"]})]})]}):m.jsxs(et.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v("/shipments"),className:"w-full py-10 bg-gradient-to-br from-emerald-600 via-emerald-700 to-emerald-800 rounded-[32px] shadow-glow-lg flex flex-col items-center justify-center text-white space-y-4 relative overflow-hidden group",disabled:!I,children:[m.jsx("div",{className:"absolute inset-0 shimmer opacity-25"}),m.jsx("div",{className:"p-5 bg-white/10 rounded-3xl backdrop-blur-sm border border-white/20 group-hover:scale-110 group-hover:-rotate-2 transition-all duration-500 shadow-inner-glow",children:m.jsx(Ls,{size:44,strokeWidth:1.5})}),m.jsxs("div",{className:"text-center relative z-10",children:[m.jsx("h2",{className:"text-xl font-black uppercase tracking-tight",children:"Browse Shipments"}),m.jsxs("p",{className:"text-emerald-100 text-xs font-bold opacity-90 uppercase tracking-widest mt-1 flex items-center justify-center gap-2",children:[m.jsx(Yd,{size:12}),"View tracking list"]})]})]}),I&&m.jsxs(et.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v("/shipments"),className:"w-full p-5 glass-strong rounded-[28px] shadow-lg flex items-center gap-4 text-left group border-iridescent",children:[m.jsx("div",{className:"p-4 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-[20px] group-hover:shadow-glow-sm transition-all duration-300",children:m.jsx(Ls,{size:24,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("h3",{className:"font-black text-white uppercase text-sm tracking-tight flex items-center gap-2",children:["Search Shipments",m.jsx("span",{className:"text-[8px] bg-emerald-500/20 text-emerald-400 px-2 py-0.5 rounded-full font-bold",children:"LIVE"})]}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-0.5 flex items-center gap-1",children:[m.jsx(Yd,{size:10}),"Real-time tracking"]})]}),m.jsx("div",{className:"w-10 h-10 rounded-full glass-light flex items-center justify-center group-hover:translate-x-1 transition-transform border border-white/10",children:m.jsx(xo,{className:"text-slate-400",size:18})})]}),j&&m.jsxs(et.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v("/notifications"),className:"w-full p-5 glass-strong rounded-[28px] shadow-lg flex items-center gap-4 text-left group border-iridescent",children:[m.jsx("div",{className:"p-4 bg-gradient-to-br from-amber-500 to-orange-600 rounded-[20px] group-hover:shadow-glow-sm transition-all duration-300",children:m.jsx(zc,{size:24,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"font-black text-white uppercase text-sm tracking-tight",children:"Notifications"}),m.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-0.5",children:"Allocation updates"})]}),m.jsx("div",{className:"w-10 h-10 rounded-full glass-light flex items-center justify-center group-hover:translate-x-1 transition-transform border border-white/10",children:m.jsx(xo,{className:"text-slate-400",size:18})})]}),z&&m.jsxs(et.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v("/users"),className:"w-full p-5 glass-strong rounded-[28px] shadow-lg flex items-center gap-4 text-left group border-iridescent",children:[m.jsx("div",{className:"p-4 bg-gradient-to-br from-violet-500 to-purple-600 rounded-[20px] group-hover:shadow-glow-sm transition-all duration-300",children:m.jsx(ip,{size:24,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("h3",{className:"font-black text-white uppercase text-sm tracking-tight flex items-center gap-2",children:["Manage Users",m.jsx("span",{className:"text-[8px] bg-violet-500/20 text-violet-300 px-2 py-0.5 rounded-full font-bold",children:"RBAC"})]}),m.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-0.5",children:"Create accounts and set roles"})]}),m.jsx("div",{className:"w-10 h-10 rounded-full glass-light flex items-center justify-center group-hover:translate-x-1 transition-transform border border-white/10",children:m.jsx(xo,{className:"text-slate-400",size:18})})]})]})]}),e&&m.jsx(Zk,{onScan:C,onClose:()=>t(!1)})]})}const Jk="modulepreload",e6=function(e){return"/arynik1/"+e},By={},fC=function(t,n,i){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),g=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));a=Promise.allSettled(n.map(v=>{if(v=e6(v),v in By)return;By[v]=!0;const y=v.endsWith(".css"),C=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${C}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":Jk,y||(b.as="script"),b.crossOrigin="",b.href=v,g&&b.setAttribute("nonce",g),document.head.appendChild(b),y)return new Promise((T,I)=>{b.addEventListener("load",T),b.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${v}`)))})}))}function c(f){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=f,window.dispatchEvent(g),!g.defaultPrevented)throw f}return a.then(f=>{for(const g of f||[])g.status==="rejected"&&c(g.reason);return t().catch(c)})};function t6(){const[e,t]=B.useState(""),[n,i]=B.useState(""),[a,c]=B.useState(!1),[f,g]=B.useState(""),{login:v}=sr(),y=wr(),C=async b=>{var T,I;b.preventDefault(),g(""),c(!0);try{const{login:z}=await fC(async()=>{const{login:j}=await Promise.resolve().then(()=>J5);return{login:j}},void 0),R=await z(e,n);if(R&&R.access_token)await v(R.access_token,R.role),y("/");else throw new Error("Invalid response from server")}catch(z){console.error("Login error:",z),g(((I=(T=z.response)==null?void 0:T.data)==null?void 0:I.detail)||z.message||"Invalid credentials. Please try again.")}finally{c(!1)}};return m.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center p-4",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-600/20 via-purple-600/10 to-pink-600/20 animate-pulse-slow"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-blue-600/10 via-transparent to-emerald-600/10"}),[...Array(20)].map((b,T)=>m.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*8}s`,animationDuration:`${8+Math.random()*4}s`}},T)),m.jsx("div",{className:"absolute top-10 left-20 w-72 h-72 bg-violet-500/30 rounded-full blur-3xl animate-float",style:{animationDelay:"0s"}}),m.jsx("div",{className:"absolute bottom-20 right-10 w-80 h-80 bg-pink-500/20 rounded-full blur-3xl animate-float",style:{animationDelay:"4s"}}),m.jsx("div",{className:"absolute top-40 right-40 w-60 h-60 bg-blue-500/20 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"relative z-10 w-full max-w-md animate-scale-in",children:[m.jsxs("div",{className:"text-center mb-8 animate-slide-down",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-violet-500 to-purple-600 rounded-3xl shadow-glow-md mb-4 animate-float",children:m.jsx(J_,{className:"w-10 h-10 text-white"})}),m.jsx("h1",{className:"text-4xl font-black text-gradient mb-2 tracking-tight",children:"AryNik Driver"}),m.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Welcome back, let's get started"})]}),m.jsxs("form",{onSubmit:C,className:"glass-strong rounded-3xl p-8 border-iridescent space-y-6 relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"}),m.jsxs("div",{className:"relative",children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(va,{size:14,className:"text-violet-400"}),"Username"]}),m.jsx("input",{type:"text",value:e,onChange:b=>t(b.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-violet-500/50 focus:ring-2 focus:ring-violet-500/20 transition-all duration-300",placeholder:"Enter your username",required:!0,autoFocus:!0})]}),m.jsxs("div",{className:"relative",children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(q_,{size:14,className:"text-violet-400"}),"Password"]}),m.jsx("input",{type:"password",value:n,onChange:b=>i(b.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-violet-500/50 focus:ring-2 focus:ring-violet-500/20 transition-all duration-300",placeholder:"Enter your password",required:!0})]}),f&&m.jsx("div",{className:"bg-rose-500/10 border border-rose-500/30 text-rose-400 px-4 py-3 rounded-xl text-sm font-medium animate-slide-down",children:f}),m.jsx("button",{type:"submit",disabled:a,className:"btn-premium w-full py-4 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-glow-md hover:shadow-glow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 text-sm uppercase tracking-wider magnetic",children:a?m.jsxs(m.Fragment,{children:[m.jsx(pn,{className:"animate-spin",size:20}),"Authenticating..."]}):m.jsxs(m.Fragment,{children:[m.jsx(JI,{size:20}),"Login to Dashboard"]})}),m.jsxs("p",{className:"text-center text-xs text-slate-500 mt-4",children:["Demo: ",m.jsx("span",{className:"text-violet-400 font-mono",children:"demo / demo"})]}),m.jsx("button",{type:"button",onClick:()=>y("/signup"),className:"w-full py-3 rounded-xl bg-emerald-500/10 border border-emerald-500/20 text-emerald-200 font-black uppercase tracking-wider text-xs hover:bg-emerald-500/15 transition-all",children:"Recipient: Create tracking account"})]}),m.jsx("p",{className:"text-center text-xs text-slate-600 mt-6",children:"Secure driver authentication  AryNik  2026"})]})]})}function n6(){const e=wr(),{login:t}=sr(),[n,i]=B.useState(""),[a,c]=B.useState(""),[f,g]=B.useState(""),[v,y]=B.useState(""),[C,b]=B.useState(!1),[T,I]=B.useState(""),z=async R=>{var j,F;R.preventDefault(),I(""),b(!0);try{const O=await Db({awb:String(n||"").trim(),phone:String(a||"").trim(),password:String(f||""),name:String(v||"").trim()||void 0});if(O!=null&&O.access_token)await t(O.access_token,O.role),e("/shipments",{replace:!0});else throw new Error("Invalid response from server")}catch(O){I(((F=(j=O==null?void 0:O.response)==null?void 0:j.data)==null?void 0:F.detail)||(O==null?void 0:O.message)||"Failed to create account")}finally{b(!1)}};return m.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center p-4",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-600/15 via-slate-950 to-violet-600/10"}),m.jsx("div",{className:"absolute top-10 left-10 w-72 h-72 bg-emerald-500/20 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-20 right-10 w-80 h-80 bg-violet-500/15 rounded-full blur-3xl animate-float",style:{animationDelay:"3s"}}),m.jsxs("div",{className:"relative z-10 w-full max-w-md",children:[m.jsxs("button",{type:"button",onClick:()=>e("/login"),className:"mb-4 inline-flex items-center gap-2 text-slate-300 hover:text-white text-xs font-black uppercase tracking-widest",children:[m.jsx(Ms,{size:16}),"Back to login"]}),m.jsxs("div",{className:"glass-strong rounded-3xl p-8 border-iridescent space-y-6 relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-emerald-500 to-emerald-700 rounded-3xl shadow-glow-md mb-4",children:m.jsx(Jx,{className:"w-8 h-8 text-white"})}),m.jsx("h1",{className:"text-2xl font-black text-white tracking-tight",children:"Track Your Delivery"}),m.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider mt-2",children:"Create an account using your AWB"})]}),m.jsxs("form",{onSubmit:z,className:"space-y-4 relative",children:[m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(Jx,{size:14,className:"text-emerald-400"}),"AWB"]}),m.jsx("input",{value:n,onChange:R=>i(R.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 font-mono",placeholder:"e.g. AWB1234567",required:!0,autoFocus:!0})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(Zd,{size:14,className:"text-emerald-400"}),"WhatsApp Number"]}),m.jsx("input",{value:a,onChange:R=>c(R.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300",placeholder:"+40 712 345 678",required:!0})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(q_,{size:14,className:"text-emerald-400"}),"Password"]}),m.jsx("input",{type:"password",value:f,onChange:R=>g(R.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300",placeholder:"Choose a password",required:!0})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(va,{size:14,className:"text-emerald-400"}),"Name (Optional)"]}),m.jsx("input",{value:v,onChange:R=>y(R.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300",placeholder:"Your name"})]}),T&&m.jsx("div",{className:"bg-rose-500/10 border border-rose-500/30 text-rose-400 px-4 py-3 rounded-xl text-sm font-medium",children:T}),m.jsx("button",{type:"submit",disabled:C,className:"btn-premium w-full py-4 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white font-bold rounded-xl shadow-glow-md hover:shadow-glow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 text-sm uppercase tracking-wider",children:C?m.jsxs(m.Fragment,{children:[m.jsx(pn,{className:"animate-spin",size:20}),"Creating..."]}):"Create Account"})]}),m.jsx("p",{className:"text-center text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:"Already have an account? Use your phone number as username on the login screen."})]})]})]})}function r6(){const[e,t]=B.useState([]),[n,i]=B.useState(!0),[a,c]=B.useState(!1),[f,g]=B.useState("delivered"),v=wr(),y=async(k=!1)=>{k?c(!0):i(!0);try{const W=await am();let K=[];try{const Q=localStorage.getItem("token");K=(await Q1(Q,{limit:2e3})).map(q=>({...q,id:q.id,status:"synced",label:q.event_id}))}catch{console.log("Could not fetch server logs, showing local only")}let Y=new Map;try{const Q=localStorage.getItem("token"),M=await ou(Q);(Array.isArray(M)?M:[]).forEach(q=>{const ie=String((q==null?void 0:q.awb)||"").toUpperCase();ie&&Y.set(ie,q)})}catch{}const H=[...W,...K].sort((Q,M)=>new Date(M.timestamp)-new Date(Q.timestamp));t(H.map(Q=>{const M=String((Q==null?void 0:Q.awb)||"").toUpperCase(),q=Y.get(M),ie=(q==null?void 0:q.raw_data)||{},ae=(ie==null?void 0:ie.client)||(ie==null?void 0:ie.clientData)||{},we=(ie==null?void 0:ie.senderLocation)||{},Ne=String((q==null?void 0:q.sender_shop_name)||(ae==null?void 0:ae.name)||(ae==null?void 0:ae.clientName)||(we==null?void 0:we.name)||(we==null?void 0:we.shopName)||"").trim()||null,oe=(Q!=null&&Q.payload?Q.payload.parcels_total:void 0)??(Q==null?void 0:Q.parcels_total)??(q==null?void 0:q.number_of_parcels)??(ie==null?void 0:ie.numberOfDistinctBarcodes)??(ie==null?void 0:ie.numberOfParcels),se=Number(oe),ve=Number.isFinite(se)&&se>0?Math.trunc(se):null;return{...Q,payment_amount:(q==null?void 0:q.payment_amount)??(q==null?void 0:q.shipping_cost)??(q==null?void 0:q.estimated_shipping_cost)??null,currency:(q==null?void 0:q.currency)||"RON",client_name:Ne,parcels_total:ve}}))}finally{i(!1),c(!1)}};B.useEffect(()=>{y()},[]);const C=k=>k==="synced"?{bg:"bg-emerald-500/20",text:"text-emerald-400",border:"border-emerald-500/30",icon:od,label:"Synced"}:{bg:"bg-violet-500/20",text:"text-violet-400",border:"border-violet-500/30",icon:Fu,label:"Pending"},b=e.filter(k=>k.status==="synced").length,T=e.filter(k=>k.status!=="synced").length,I=e.filter(k=>k.status==="synced"&&String(k.event_id||"")==="2"),z=I.length,R=I.reduce((k,W)=>{const K=Number(W==null?void 0:W.payment_amount);return Number.isFinite(K)?k+K:k},0),j=f==="delivered"?e.filter(k=>String(k.event_id||"")==="2"):e,F={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},O={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0}};return m.jsxs(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-20 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"px-4 py-4 flex items-center justify-between glass-strong sticky top-0 z-30 backdrop-blur-xl border-b border-white/10 animate-slide-down",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("button",{onClick:()=>v(-1),className:"p-2 -ml-2 rounded-xl glass-light text-slate-300 hover:text-white transition-colors border border-white/10",children:m.jsx(Ms,{size:20})}),m.jsxs("div",{children:[m.jsx("h1",{className:"font-black text-lg text-gradient tracking-tight",children:"Update History"}),m.jsx("p",{className:"text-xs text-slate-500 font-medium mt-0.5",children:"Recent activity timeline"})]})]}),m.jsx("button",{onClick:()=>y(!0),className:`p-2.5 rounded-xl glass-light hover:bg-violet-500/20 text-violet-400 transition-all border border-white/10 ${a?"animate-spin":""}`,children:m.jsx(Ai,{size:20})})]}),m.jsxs("div",{className:"p-4 space-y-3 relative z-10",children:[m.jsxs("div",{className:"flex glass-strong p-1 rounded-xl border border-white/10 w-fit",children:[m.jsx("button",{onClick:()=>g("delivered"),className:`px-3 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${f==="delivered"?"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:"Delivered"}),m.jsx("button",{onClick:()=>g("all"),className:`px-3 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${f==="all"?"bg-gradient-to-r from-violet-600 to-purple-600 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:"All"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs(et.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"glass-strong p-4 rounded-2xl border-iridescent",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:m.jsx(od,{size:14,className:"text-emerald-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Synced"})]}),m.jsx("p",{className:"text-2xl font-black text-gradient-blue",children:b})]}),m.jsxs(et.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},className:"glass-strong p-4 rounded-2xl border-iridescent",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-2 bg-violet-500/20 rounded-lg",children:m.jsx(Fu,{size:14,className:"text-violet-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Pending"})]}),m.jsx("p",{className:"text-2xl font-black text-gradient-purple",children:T})]}),m.jsxs(et.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"glass-strong p-4 rounded-2xl border-iridescent",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:m.jsx(od,{size:14,className:"text-emerald-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Delivered"})]}),m.jsx("p",{className:"text-2xl font-black text-gradient-blue",children:z})]}),m.jsxs(et.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"glass-strong p-4 rounded-2xl border-iridescent",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-2 bg-amber-500/20 rounded-lg",children:m.jsx(GI,{size:14,className:"text-amber-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Pay (RON)"})]}),m.jsx("p",{className:"text-2xl font-black text-gradient-purple",children:R.toFixed(2)})]})]})]}),m.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-32 relative z-10",children:n?m.jsxs("div",{className:"text-center py-20",children:[m.jsxs("div",{className:"relative inline-block",children:[m.jsx("div",{className:"absolute inset-0 bg-violet-500/20 blur-xl rounded-full animate-pulse"}),m.jsx(Os,{className:"animate-spin relative z-10 text-violet-400 mx-auto",size:48})]}),m.jsx("p",{className:"mt-6 text-sm font-bold text-slate-500 uppercase tracking-wide",children:"Loading history..."})]}):j.length===0?m.jsxs(et.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(Fu,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No recent updates"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Your activity will appear here"})]}):m.jsx(et.div,{variants:F,initial:"hidden",animate:"visible",className:"space-y-3 py-2",children:j.map((k,W)=>{var ae;const K=C(k.status),Y=K.icon,H=Number(k==null?void 0:k.payment_amount),Q=Number.isFinite(k==null?void 0:k.parcels_total)&&k.parcels_total>0?k.parcels_total:null,M=((ae=k==null?void 0:k.payload)==null?void 0:ae.parcel_index)??(k==null?void 0:k.parcel_index),q=Number(M),ie=Number.isFinite(q)&&q>0?Math.trunc(q):null;return m.jsxs(et.div,{variants:O,className:"glass-strong p-5 rounded-2xl border border-white/10 relative overflow-hidden group hover:border-violet-500/30 transition-all",children:[W<e.length-1&&m.jsx("div",{className:"absolute left-11 top-full w-0.5 h-3 bg-gradient-to-b from-white/10 to-transparent"}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx("div",{className:`flex-shrink-0 w-12 h-12 ${K.bg} rounded-2xl flex items-center justify-center border ${K.border}`,children:m.jsx(Y,{size:20,className:K.text,strokeWidth:2.5})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex justify-between items-start mb-2",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs font-mono text-slate-500 tracking-wider",children:k.awb}),ie?m.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mt-1",children:["Parcel ",ie,Q?`/${Q}`:""]}):null,m.jsx("h3",{className:"font-bold text-white mt-1",children:k.event_id||k.label}),k.client_name&&m.jsx("p",{className:"text-[10px] text-slate-400 font-bold mt-1 truncate",children:k.client_name})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[Number.isFinite(H)&&m.jsxs("span",{className:"text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border bg-amber-500/15 text-amber-300 border-amber-500/20",children:[H.toFixed(2)," ",String((k==null?void 0:k.currency)||"RON").toUpperCase()]}),m.jsx("span",{className:`text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border ${K.bg} ${K.text} ${K.border}`,children:K.label})]})]}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-medium flex items-center gap-1.5",children:[m.jsx(Fu,{size:10}),new Date(k.timestamp).toLocaleString()]}),k.error_message&&m.jsxs("div",{className:"mt-3 px-3 py-2 bg-red-500/10 border border-red-500/20 rounded-xl flex items-start gap-2",children:[m.jsx(H_,{size:14,className:"text-red-400 mt-0.5 flex-shrink-0"}),m.jsx("p",{className:"text-xs text-red-400 font-medium",children:k.error_message})]})]})]})]},W)})})})]})}const pC="arynik_warehouse_origin_v1",Fy=e=>{const t=Number(e);return!Number.isFinite(t)||Math.abs(t)<1e-4?null:t},Ra={lat:Fy(void 0)??46.5667,lon:Fy(void 0)??26.9167,label:"Warehouse (Bacau)"},i6=e=>{try{return localStorage.getItem(e)}catch{return null}},s6=(e,t)=>{try{return localStorage.setItem(e,t),!0}catch{return!1}},mC=(e,t)=>Number.isFinite(Number(e))&&Number.isFinite(Number(t))&&Math.abs(Number(e))>1e-4&&Math.abs(Number(t))>1e-4,Hc=()=>{if(typeof window>"u")return Ra;const e=i6(pC);if(!e)return Ra;try{const t=JSON.parse(e),n=Number(t==null?void 0:t.lat),i=Number(t==null?void 0:t.lon);return mC(n,i)?{lat:n,lon:i,label:String((t==null?void 0:t.label)||Ra.label||"Warehouse")}:Ra}catch{return Ra}},o6=({lat:e,lon:t,label:n}={})=>{const i=Number(e),a=Number(t);return mC(i,a)?s6(pC,JSON.stringify({lat:i,lon:a,label:String(n||Ra.label||"Warehouse"),ts:Date.now()})):!1};function a6(){const{user:e,logout:t}=sr(),n=wr(),[i,a]=B.useState(Ot()),[c,f]=B.useState(()=>{const se=Hc();return{label:String((se==null?void 0:se.label)||""),lat:String((se==null?void 0:se.lat)??""),lon:String((se==null?void 0:se.lon)??"")}}),[g,v]=B.useState(""),[y,C]=B.useState(!1),[b,T]=B.useState(""),[I,z]=B.useState(!1),[R,j]=B.useState(""),[F,O]=B.useState(null),k=Tn(e,wo),W=Tn(e,Ma),K=()=>{t(),n("/login",{replace:!0})},Y=()=>{Pb(i),window.location.reload()},H=()=>{const se=o6({label:c.label,lat:c.lat,lon:c.lon});v(se?"Warehouse origin saved.":"Invalid warehouse coordinates."),setTimeout(()=>v(""),2500)},Q=async()=>{var pe;if(!window.confirm(`Clear cached data on this device?

This removes:
- Offline queue (pending updates)
- Local route allocations
- Geocode cache
- Service worker caches

You will stay signed in.`))return;C(!0),T("");let ve=0,ee=0;try{const{clearQueue:he}=await fC(async()=>{const{clearQueue:Te}=await Promise.resolve().then(()=>Qk);return{clearQueue:Te}},void 0);ve=await he()}catch{}if(["arynik_geocode_cache_v1","arynik_routes_v1","arynik_demo_logs_v1","arynik_demo_shipments_v1","arynik_last_vehicle_plate_v1","arynik_warehouse_origin_v1"].forEach(he=>{try{localStorage.removeItem(he)}catch{}}),typeof window<"u"&&"caches"in window)try{const he=await caches.keys();await Promise.all(he.map(Te=>caches.delete(Te))),ee=he.length}catch{}if((pe=navigator==null?void 0:navigator.serviceWorker)!=null&&pe.getRegistrations)try{const he=await navigator.serviceWorker.getRegistrations();await Promise.all(he.map(Te=>Te.unregister()))}catch{}T(`Cleared ${ee} cache(s) and ${ve} queued update(s). Reloading...`),setTimeout(()=>{window.location.reload()},600)},M=async()=>{const se=e==null?void 0:e.token;if(!se)return null;try{const ve=await Vb(se);return O(ve),ve}catch{return null}},q=async()=>{var ee,_e;if(!window.confirm(`Sync shipments with Postis now?

This will refresh shipment data in the server database. It may take a few minutes.`))return;const ve=e==null?void 0:e.token;if(!ve){j("Not signed in."),setTimeout(()=>j(""),4e3);return}z(!0),j("");try{const pe=await Hb(ve);O(pe);const he=!!(pe!=null&&pe.started);j(he?"Postis sync started.":"Postis sync is already running.");const Te=Date.now()+8*60*1e3;for(;Date.now()<Te;){await new Promise(te=>setTimeout(te,2500));const Le=await M();if(!(Le!=null&&Le.running))break}const ze=await M();if(ze!=null&&ze.running)j("Postis sync is still running in the background.");else if(ze!=null&&ze.last_error)j(`Postis sync failed: ${ze.last_error}`);else if(ze!=null&&ze.last_stats){const Le=ze.last_stats;j(`Postis sync done. List: ${Le.upserted_list}  Details: ${Le.upserted_details}.`)}else j("Postis sync done.")}catch(pe){const he=((_e=(ee=pe==null?void 0:pe.response)==null?void 0:ee.data)==null?void 0:_e.detail)||(pe==null?void 0:pe.message)||"Failed to sync with Postis.";j(String(he))}finally{z(!1),setTimeout(()=>j(""),9e3)}};B.useEffect(()=>{let se=!1;if(W)return(async()=>{const ve=await M();if(se||!(ve!=null&&ve.running))return;const ee=Date.now()+60*1e3;for(;!se&&Date.now()<ee;){await new Promise(pe=>setTimeout(pe,2500));const _e=await M();if(!(_e!=null&&_e.running))break}})(),()=>{se=!0}},[W]);const ie=[{title:"Preferences",items:[{icon:zc,label:"Notifications",value:"Enabled",color:"violet"},{icon:XI,label:"Language",value:"English",color:"emerald"},{icon:t8,label:"Dark Mode",value:"Auto",color:"amber"}]},{title:"Account",items:[{icon:a8,label:"Security",value:null,color:"violet"},...k?[{icon:tb,label:"Manage Users",value:null,color:"emerald",onClick:()=>n("/users")}]:[],...W?[{icon:Ai,label:"Sync with Postis",value:I||F!=null&&F.running?"Running":null,color:"emerald",onClick:()=>{I||F!=null&&F.running||q()},disabled:I||(F==null?void 0:F.running),loading:I||(F==null?void 0:F.running)}]:[],{icon:Gd,label:"Clear Cache",value:y?"Working":null,color:"slate",onClick:()=>{y||Q()},disabled:y,loading:y},{icon:QI,label:"App Info",value:"v1.0.0",color:"slate"}]}],ae=se=>{const ve={violet:"bg-violet-500/20",emerald:"bg-emerald-500/20",amber:"bg-amber-500/20",slate:"bg-slate-500/20"};return ve[se]||ve.slate},we=se=>{const ve={violet:"text-violet-400",emerald:"text-emerald-400",amber:"text-amber-400",slate:"text-slate-400"};return ve[se]||ve.slate},Ne={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},oe={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return m.jsxs(et.div,{initial:"hidden",animate:"visible",exit:{opacity:0,y:-20},variants:Ne,className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-600 via-purple-600 to-violet-700"}),m.jsx("div",{className:"absolute inset-0 shimmer opacity-20"}),m.jsxs("header",{className:"relative z-10 px-6 pt-6 pb-4",children:[m.jsx("h1",{className:"text-xl font-black text-white uppercase tracking-tight mb-1",children:"Settings"}),m.jsx("p",{className:"text-sm text-violet-100 font-medium",children:"Manage your preferences"})]}),m.jsxs("div",{className:"relative z-10 px-8 pb-8 flex flex-col items-center",children:[m.jsx(et.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:15},className:"w-28 h-28 bg-gradient-to-br from-white/20 to-white/10 backdrop-blur-xl rounded-[32px] shadow-2xl flex items-center justify-center text-white mb-5 border-4 border-white/30 animate-float",children:m.jsx(va,{size:56,strokeWidth:1.5})}),m.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight mb-2",children:(e==null?void 0:e.username)||"Driver"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-[10px] font-black bg-white/20 backdrop-blur-sm text-white px-3 py-1.5 rounded-full uppercase tracking-widest border border-white/30",children:(e==null?void 0:e.role)||"Carrier"}),m.jsxs("span",{className:"text-[10px] font-bold text-violet-200 uppercase tracking-widest",children:["ID: ",(e==null?void 0:e.driver_id)||"N/A"]})]})]})]}),m.jsxs("div",{className:"flex-1 p-4 space-y-6 pb-32 relative z-10 -mt-6",children:[m.jsxs(et.div,{variants:oe,className:"space-y-3",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Connection"}),m.jsxs("div",{className:"glass-strong rounded-2xl overflow-hidden border-iridescent p-4 space-y-3",children:[m.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"API Base URL"}),m.jsx("input",{value:i,onChange:se=>a(se.target.value),placeholder:"https://YOUR-BACKEND",className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-violet-500/50 focus:ring-2 focus:ring-violet-500/20 transition-all duration-300 text-sm font-medium"}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-medium leading-relaxed",children:["Tip: on GitHub Pages (HTTPS), your backend must be HTTPS. You can also set via URL: ",m.jsx("span",{className:"font-mono text-slate-400",children:"?api=https://YOUR-BACKEND"})]}),m.jsx("button",{onClick:Y,className:"w-full btn-premium py-3 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white rounded-xl font-bold shadow-lg hover:shadow-glow-md transition-all text-sm uppercase tracking-wider",children:"Apply API URL"})]})]}),m.jsxs(et.div,{variants:oe,className:"space-y-3",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Warehouse"}),m.jsxs("div",{className:"glass-strong rounded-2xl overflow-hidden border-iridescent p-4 space-y-3",children:[m.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Routing Origin (Used For KM/Routes)"}),m.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[m.jsx("input",{value:c.label,onChange:se=>f(ve=>({...ve,label:se.target.value})),placeholder:"Warehouse (Bacau)",className:"col-span-3 px-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium"}),m.jsx("input",{value:c.lat,onChange:se=>f(ve=>({...ve,lat:se.target.value})),placeholder:"Latitude",className:"px-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium font-mono"}),m.jsx("input",{value:c.lon,onChange:se=>f(ve=>({...ve,lon:se.target.value})),placeholder:"Longitude",className:"px-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium font-mono"}),m.jsx("button",{onClick:H,className:"btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white rounded-xl font-bold shadow-lg hover:shadow-glow-md transition-all text-sm uppercase tracking-wider",children:"Save Warehouse"})]}),g&&m.jsx("div",{className:"glass-light p-3 rounded-xl border border-emerald-500/20 text-emerald-200 text-xs font-bold",children:g}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium leading-relaxed",children:"Driver GPS is still shown on the map, but routing always starts from this warehouse origin."})]})]}),ie.map((se,ve)=>m.jsxs(et.div,{variants:oe,className:"space-y-3",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:se.title}),m.jsx("div",{className:"glass-strong rounded-2xl overflow-hidden border-iridescent",children:se.items.map((ee,_e)=>{const pe=ee.icon;return m.jsxs("button",{type:"button",onClick:()=>ee.onClick&&ee.onClick(),disabled:!!ee.disabled,className:`w-full p-4 flex items-center gap-4 hover:bg-white/5 transition-all group ${_e<se.items.length-1?"border-b border-white/5":""}`,children:[m.jsx("div",{className:`p-3 ${ae(ee.color)} rounded-xl group-hover:scale-110 transition-transform`,children:ee.loading?m.jsx(pn,{className:"animate-spin text-slate-400",size:20,strokeWidth:2}):m.jsx(pe,{className:we(ee.color),size:20,strokeWidth:2})}),m.jsx("span",{className:"flex-1 text-left font-bold text-white",children:ee.label}),ee.value&&m.jsx("span",{className:"text-xs text-slate-400 font-medium",children:ee.value}),m.jsx(xo,{className:"text-slate-500 group-hover:text-violet-400 group-hover:translate-x-1 transition-all",size:18})]},_e)})})]},ve)),b&&m.jsx(et.div,{variants:oe,className:"glass-strong p-4 rounded-2xl border border-emerald-500/20 text-emerald-200 text-xs font-bold",children:b}),R&&m.jsx(et.div,{variants:oe,className:"glass-strong p-4 rounded-2xl border border-emerald-500/20 text-emerald-200 text-xs font-bold",children:R}),m.jsxs(et.div,{variants:oe,className:"glass-strong p-5 rounded-2xl border-iridescent relative overflow-hidden group",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/10 to-amber-600/5 opacity-0 group-hover:opacity-100 transition-opacity"}),m.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[m.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl shadow-glow-sm",children:m.jsx(J_,{size:24,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"font-black text-white text-sm",children:"Premium Features"}),m.jsx("p",{className:"text-[10px] text-slate-400 font-medium mt-1",children:"Unlock advanced analytics & insights"})]}),m.jsx(xo,{className:"text-amber-400",size:20})]})]}),m.jsxs(et.button,{variants:oe,onClick:K,whileTap:{scale:.98},className:"w-full btn-premium py-4 bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-400 hover:to-rose-500 text-white rounded-2xl font-bold flex items-center justify-center gap-2 shadow-lg hover:shadow-glow-md transition-all",children:[m.jsx(K_,{size:20,strokeWidth:2.5}),"Sign Out"]})]}),m.jsxs(et.div,{variants:oe,className:"p-6 text-center relative z-10",children:[m.jsx("p",{className:"text-[10px] text-slate-500 font-medium",children:"Powered by Postis Bridge"}),m.jsx("p",{className:"text-[9px] text-slate-600 font-medium mt-1",children:" 2025 AryNik Driver App"})]})]})}const gC="arynik_geocode_cache_v1",l6=1100;let zy=0,Uy=Promise.resolve(),Xs=null,mp=!1,Hf=null;const Uu=new Map,Vy=5e3,c6=250,u6=e=>{try{return localStorage.getItem(e)}catch{return null}},d6=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},h6=e=>new Promise(t=>setTimeout(t,e)),lm=()=>{if(Xs)return Xs;const e=u6(gC);if(!e)return Xs={},Xs;try{const t=JSON.parse(e);return Xs=t&&typeof t=="object"?t:{},Xs}catch{return Xs={},Xs}},f6=e=>{const t=Object.entries(e||{});if(t.length<=Vy)return;t.sort((i,a)=>{var c,f;return Number(((c=i==null?void 0:i[1])==null?void 0:c.ts)||0)-Number(((f=a==null?void 0:a[1])==null?void 0:f.ts)||0)});const n=t.length-Vy;for(let i=0;i<n;i+=1)delete e[t[i][0]]},p6=()=>{Hf||(Hf=setTimeout(()=>{if(Hf=null,!mp)return;mp=!1;const e=lm();try{f6(e),d6(gC,JSON.stringify(e||{}))}catch{}},c6))},Hy=(e,t)=>{const n=lm();n[e]=t,mp=!0,p6()},m6=e=>{const t=lm(),n=t?t[e]:null;return n&&typeof n=="object"?n:null},Wc=e=>{const t=String(e||"").trim();if(!t)return null;const n=m6(t);if(!n)return null;if(n.lat===null&&n.lon===null)return{lat:null,lon:null,display_name:n.display_name||t,ts:n.ts||0};const i=Number(n.lat),a=Number(n.lon);return!Number.isFinite(i)||!Number.isFinite(a)?null:{...n,lat:i,lon:a}},g6=(e,{timeoutMs:t=15e3}={})=>new Promise((n,i)=>{const a=`__arynik_jsonp_${Date.now()}_${Math.floor(Math.random()*1e5)}`,c=document.createElement("script"),f=setTimeout(()=>{g(),i(new Error("Geocode timeout"))},t),g=()=>{clearTimeout(f);try{delete window[a]}catch{window[a]=void 0}c&&c.parentNode&&c.parentNode.removeChild(c)};window[a]=v=>{g(),n(v)},c.onerror=()=>{g(),i(new Error("Geocode network error"))},c.async=!0,c.src=`${e}${e.includes("?")?"&":"?"}json_callback=${encodeURIComponent(a)}`,document.body.appendChild(c)}),x6=e=>{const t=async()=>{const i=l6-(Date.now()-zy);return i>0&&await h6(i),zy=Date.now(),e()},n=Uy.then(t,t);return Uy=n.catch(()=>{}),n},$d=async e=>{const t=String(e||"").trim();if(!t)return null;const n=Wc(t);if(n){if(Number.isFinite(n.lat)&&Number.isFinite(n.lon))return n;if(n.lat===null&&n.lon===null)return null}if(Uu.has(t))return Uu.get(t);const i=(async()=>{const c=`https://nominatim.openstreetmap.org/search?format=json&limit=1&q=${encodeURIComponent(t)}`;try{const f=await x6(()=>g6(c)),g=Array.isArray(f)?f[0]:null,v=g?Number(g.lat):NaN,y=g?Number(g.lon):NaN;if(!Number.isFinite(v)||!Number.isFinite(y))return Hy(t,{lat:null,lon:null,display_name:t,ts:Date.now()}),null;const C={lat:v,lon:y,display_name:g.display_name||t,ts:Date.now()};return Hy(t,C),C}catch(f){return console.warn("Geocode failed",f),null}})();Uu.set(t,i);try{return await i}finally{Uu.delete(t)}},xC="https://router.project-osrm.org/route/v1/driving";async function y6(e,t){if(!e||!t)return null;try{const n=`${xC}/${e.lon},${e.lat};${t.lon},${t.lat}?overview=full&geometries=geojson`,i=await tt.get(n);return i.data.code==="Ok"&&i.data.routes.length>0?i.data.routes[0].geometry:null}catch(n){return console.error("Error fetching route:",n),null}}async function w6(e){const t=Array.isArray(e)?e.filter(Boolean):[];if(t.length<2)return null;const n=t.map(i=>`${i.lon},${i.lat}`).join(";");try{const i=`${xC}/${n}?overview=full&geometries=geojson&steps=false`,a=await tt.get(i);if(a.data.code==="Ok"&&a.data.routes.length>0){const c=a.data.routes[0]||{};return{geometry:c.geometry||null,distance_m:Number.isFinite(Number(c.distance))?Number(c.distance):0,duration_s:Number.isFinite(Number(c.duration))?Number(c.duration):0}}return null}catch(i){return console.error("Error fetching multi-route:",i),null}}const Qe=e=>{const t=Number(e);return Number.isFinite(t)&&Math.abs(t)>1e-4},Wf=e=>String(e||"").trim().replace(/[_-]+/g," ").replace(/\\s+/g," ").trim(),oa=e=>{var c,f,g,v,y,C;const t=Wf(e==null?void 0:e.delivery_address),n=Wf((e==null?void 0:e.locality)||((f=(c=e==null?void 0:e.raw_data)==null?void 0:c.recipientLocation)==null?void 0:f.locality)),i=Wf((e==null?void 0:e.county)||((v=(g=e==null?void 0:e.raw_data)==null?void 0:g.recipientLocation)==null?void 0:v.county)||((C=(y=e==null?void 0:e.raw_data)==null?void 0:y.recipientLocation)==null?void 0:C.countyName)),a=[];return t&&a.push(t),n&&!t.toLowerCase().includes(n.toLowerCase())&&a.push(n),i&&!a.some(b=>b.toLowerCase().includes(i.toLowerCase()))&&a.push(i),a.push("Romania"),a.filter(Boolean).join(", ")};function yC(e,t){const n=B.useRef(t);B.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}const v6=1;function _6(e){return Object.freeze({__version:v6,map:e})}function wC(e,t){return Object.freeze({...e,...t})}const vC=B.createContext(null),_C=vC.Provider;function Ph(){const e=B.useContext(vC);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function bC(e){function t(n,i){const{instance:a,context:c}=e(n).current;return B.useImperativeHandle(i,()=>a),n.children==null?null:la.createElement(_C,{value:c},n.children)}return B.forwardRef(t)}function b6(e){function t(n,i){const[a,c]=B.useState(!1),{instance:f}=e(n,c).current;B.useImperativeHandle(i,()=>f),B.useEffect(function(){a&&f.update()},[f,a,n.children]);const g=f._contentNode;return g?uv.createPortal(n.children,g):null}return B.forwardRef(t)}function C6(e){function t(n,i){const{instance:a}=e(n).current;return B.useImperativeHandle(i,()=>a),null}return B.forwardRef(t)}function cm(e,t){const n=B.useRef();B.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function Dh(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function S6(e,t){return function(i,a){const c=Ph(),f=e(Dh(i,c),c);return yC(c.map,i.attribution),cm(f.current,i.eventHandlers),t(f.current,c,i,a),f}}var gp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,i){i(t)})(ka,function(n){var i="1.9.4";function a(o){var h,w,A,N;for(w=1,A=arguments.length;w<A;w++){N=arguments[w];for(h in N)o[h]=N[h]}return o}var c=Object.create||function(){function o(){}return function(h){return o.prototype=h,new o}}();function f(o,h){var w=Array.prototype.slice;if(o.bind)return o.bind.apply(o,w.call(arguments,1));var A=w.call(arguments,2);return function(){return o.apply(h,A.length?A.concat(w.call(arguments)):arguments)}}var g=0;function v(o){return"_leaflet_id"in o||(o._leaflet_id=++g),o._leaflet_id}function y(o,h,w){var A,N,V,$;return $=function(){A=!1,N&&(V.apply(w,N),N=!1)},V=function(){A?N=arguments:(o.apply(w,arguments),setTimeout($,h),A=!0)},V}function C(o,h,w){var A=h[1],N=h[0],V=A-N;return o===A&&w?o:((o-N)%V+V)%V+N}function b(){return!1}function T(o,h){if(h===!1)return o;var w=Math.pow(10,h===void 0?6:h);return Math.round(o*w)/w}function I(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function z(o){return I(o).split(/\s+/)}function R(o,h){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?c(o.options):{});for(var w in h)o.options[w]=h[w];return o.options}function j(o,h,w){var A=[];for(var N in o)A.push(encodeURIComponent(w?N.toUpperCase():N)+"="+encodeURIComponent(o[N]));return(!h||h.indexOf("?")===-1?"?":"&")+A.join("&")}var F=/\{ *([\w_ -]+) *\}/g;function O(o,h){return o.replace(F,function(w,A){var N=h[A];if(N===void 0)throw new Error("No value provided for variable "+w);return typeof N=="function"&&(N=N(h)),N})}var k=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function W(o,h){for(var w=0;w<o.length;w++)if(o[w]===h)return w;return-1}var K="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Y(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var H=0;function Q(o){var h=+new Date,w=Math.max(0,16-(h-H));return H=h+w,window.setTimeout(o,w)}var M=window.requestAnimationFrame||Y("RequestAnimationFrame")||Q,q=window.cancelAnimationFrame||Y("CancelAnimationFrame")||Y("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function ie(o,h,w){if(w&&M===Q)o.call(h);else return M.call(window,f(o,h))}function ae(o){o&&q.call(window,o)}var we={__proto__:null,extend:a,create:c,bind:f,get lastId(){return g},stamp:v,throttle:y,wrapNum:C,falseFn:b,formatNum:T,trim:I,splitWords:z,setOptions:R,getParamString:j,template:O,isArray:k,indexOf:W,emptyImageUrl:K,requestFn:M,cancelFn:q,requestAnimFrame:ie,cancelAnimFrame:ae};function Ne(){}Ne.extend=function(o){var h=function(){R(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},w=h.__super__=this.prototype,A=c(w);A.constructor=h,h.prototype=A;for(var N in this)Object.prototype.hasOwnProperty.call(this,N)&&N!=="prototype"&&N!=="__super__"&&(h[N]=this[N]);return o.statics&&a(h,o.statics),o.includes&&(oe(o.includes),a.apply(null,[A].concat(o.includes))),a(A,o),delete A.statics,delete A.includes,A.options&&(A.options=w.options?c(w.options):{},a(A.options,o.options)),A._initHooks=[],A.callInitHooks=function(){if(!this._initHooksCalled){w.callInitHooks&&w.callInitHooks.call(this),this._initHooksCalled=!0;for(var V=0,$=A._initHooks.length;V<$;V++)A._initHooks[V].call(this)}},h},Ne.include=function(o){var h=this.prototype.options;return a(this.prototype,o),o.options&&(this.prototype.options=h,this.mergeOptions(o.options)),this},Ne.mergeOptions=function(o){return a(this.prototype.options,o),this},Ne.addInitHook=function(o){var h=Array.prototype.slice.call(arguments,1),w=typeof o=="function"?o:function(){this[o].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(w),this};function oe(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=k(o)?o:[o];for(var h=0;h<o.length;h++)o[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var se={on:function(o,h,w){if(typeof o=="object")for(var A in o)this._on(A,o[A],h);else{o=z(o);for(var N=0,V=o.length;N<V;N++)this._on(o[N],h,w)}return this},off:function(o,h,w){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var A in o)this._off(A,o[A],h);else{o=z(o);for(var N=arguments.length===1,V=0,$=o.length;V<$;V++)N?this._off(o[V]):this._off(o[V],h,w)}return this},_on:function(o,h,w,A){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(o,h,w)===!1){w===this&&(w=void 0);var N={fn:h,ctx:w};A&&(N.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(N)}},_off:function(o,h,w){var A,N,V;if(this._events&&(A=this._events[o],!!A)){if(arguments.length===1){if(this._firingCount)for(N=0,V=A.length;N<V;N++)A[N].fn=b;delete this._events[o];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var $=this._listens(o,h,w);if($!==!1){var de=A[$];this._firingCount&&(de.fn=b,this._events[o]=A=A.slice()),A.splice($,1)}}},fire:function(o,h,w){if(!this.listens(o,w))return this;var A=a({},h,{type:o,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var N=this._events[o];if(N){this._firingCount=this._firingCount+1||1;for(var V=0,$=N.length;V<$;V++){var de=N[V],ge=de.fn;de.once&&this.off(o,ge,de.ctx),ge.call(de.ctx||this,A)}this._firingCount--}}return w&&this._propagateEvent(A),this},listens:function(o,h,w,A){typeof o!="string"&&console.warn('"string" type argument expected');var N=h;typeof h!="function"&&(A=!!h,N=void 0,w=void 0);var V=this._events&&this._events[o];if(V&&V.length&&this._listens(o,N,w)!==!1)return!0;if(A){for(var $ in this._eventParents)if(this._eventParents[$].listens(o,h,w,A))return!0}return!1},_listens:function(o,h,w){if(!this._events)return!1;var A=this._events[o]||[];if(!h)return!!A.length;w===this&&(w=void 0);for(var N=0,V=A.length;N<V;N++)if(A[N].fn===h&&A[N].ctx===w)return N;return!1},once:function(o,h,w){if(typeof o=="object")for(var A in o)this._on(A,o[A],h,!0);else{o=z(o);for(var N=0,V=o.length;N<V;N++)this._on(o[N],h,w,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[v(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[v(o)],this},_propagateEvent:function(o){for(var h in this._eventParents)this._eventParents[h].fire(o.type,a({layer:o.target,propagatedFrom:o.target},o),!0)}};se.addEventListener=se.on,se.removeEventListener=se.clearAllEventListeners=se.off,se.addOneTimeEventListener=se.once,se.fireEvent=se.fire,se.hasEventListeners=se.listens;var ve=Ne.extend(se);function ee(o,h,w){this.x=w?Math.round(o):o,this.y=w?Math.round(h):h}var _e=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};ee.prototype={clone:function(){return new ee(this.x,this.y)},add:function(o){return this.clone()._add(pe(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(pe(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new ee(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new ee(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=_e(this.x),this.y=_e(this.y),this},distanceTo:function(o){o=pe(o);var h=o.x-this.x,w=o.y-this.y;return Math.sqrt(h*h+w*w)},equals:function(o){return o=pe(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=pe(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function pe(o,h,w){return o instanceof ee?o:k(o)?new ee(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new ee(o.x,o.y):new ee(o,h,w)}function he(o,h){if(o)for(var w=h?[o,h]:o,A=0,N=w.length;A<N;A++)this.extend(w[A])}he.prototype={extend:function(o){var h,w;if(!o)return this;if(o instanceof ee||typeof o[0]=="number"||"x"in o)h=w=pe(o);else if(o=Te(o),h=o.min,w=o.max,!h||!w)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=w.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(w.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(w.y,this.max.y)),this},getCenter:function(o){return pe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return pe(this.min.x,this.max.y)},getTopRight:function(){return pe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var h,w;return typeof o[0]=="number"||o instanceof ee?o=pe(o):o=Te(o),o instanceof he?(h=o.min,w=o.max):h=w=o,h.x>=this.min.x&&w.x<=this.max.x&&h.y>=this.min.y&&w.y<=this.max.y},intersects:function(o){o=Te(o);var h=this.min,w=this.max,A=o.min,N=o.max,V=N.x>=h.x&&A.x<=w.x,$=N.y>=h.y&&A.y<=w.y;return V&&$},overlaps:function(o){o=Te(o);var h=this.min,w=this.max,A=o.min,N=o.max,V=N.x>h.x&&A.x<w.x,$=N.y>h.y&&A.y<w.y;return V&&$},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var h=this.min,w=this.max,A=Math.abs(h.x-w.x)*o,N=Math.abs(h.y-w.y)*o;return Te(pe(h.x-A,h.y-N),pe(w.x+A,w.y+N))},equals:function(o){return o?(o=Te(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function Te(o,h){return!o||o instanceof he?o:new he(o,h)}function ze(o,h){if(o)for(var w=h?[o,h]:o,A=0,N=w.length;A<N;A++)this.extend(w[A])}ze.prototype={extend:function(o){var h=this._southWest,w=this._northEast,A,N;if(o instanceof te)A=o,N=o;else if(o instanceof ze){if(A=o._southWest,N=o._northEast,!A||!N)return this}else return o?this.extend(le(o)||Le(o)):this;return!h&&!w?(this._southWest=new te(A.lat,A.lng),this._northEast=new te(N.lat,N.lng)):(h.lat=Math.min(A.lat,h.lat),h.lng=Math.min(A.lng,h.lng),w.lat=Math.max(N.lat,w.lat),w.lng=Math.max(N.lng,w.lng)),this},pad:function(o){var h=this._southWest,w=this._northEast,A=Math.abs(h.lat-w.lat)*o,N=Math.abs(h.lng-w.lng)*o;return new ze(new te(h.lat-A,h.lng-N),new te(w.lat+A,w.lng+N))},getCenter:function(){return new te((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new te(this.getNorth(),this.getWest())},getSouthEast:function(){return new te(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof te||"lat"in o?o=le(o):o=Le(o);var h=this._southWest,w=this._northEast,A,N;return o instanceof ze?(A=o.getSouthWest(),N=o.getNorthEast()):A=N=o,A.lat>=h.lat&&N.lat<=w.lat&&A.lng>=h.lng&&N.lng<=w.lng},intersects:function(o){o=Le(o);var h=this._southWest,w=this._northEast,A=o.getSouthWest(),N=o.getNorthEast(),V=N.lat>=h.lat&&A.lat<=w.lat,$=N.lng>=h.lng&&A.lng<=w.lng;return V&&$},overlaps:function(o){o=Le(o);var h=this._southWest,w=this._northEast,A=o.getSouthWest(),N=o.getNorthEast(),V=N.lat>h.lat&&A.lat<w.lat,$=N.lng>h.lng&&A.lng<w.lng;return V&&$},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,h){return o?(o=Le(o),this._southWest.equals(o.getSouthWest(),h)&&this._northEast.equals(o.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Le(o,h){return o instanceof ze?o:new ze(o,h)}function te(o,h,w){if(isNaN(o)||isNaN(h))throw new Error("Invalid LatLng object: ("+o+", "+h+")");this.lat=+o,this.lng=+h,w!==void 0&&(this.alt=+w)}te.prototype={equals:function(o,h){if(!o)return!1;o=le(o);var w=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return w<=(h===void 0?1e-9:h)},toString:function(o){return"LatLng("+T(this.lat,o)+", "+T(this.lng,o)+")"},distanceTo:function(o){return st.distance(this,le(o))},wrap:function(){return st.wrapLatLng(this)},toBounds:function(o){var h=180*o/40075017,w=h/Math.cos(Math.PI/180*this.lat);return Le([this.lat-h,this.lng-w],[this.lat+h,this.lng+w])},clone:function(){return new te(this.lat,this.lng,this.alt)}};function le(o,h,w){return o instanceof te?o:k(o)&&typeof o[0]!="object"?o.length===3?new te(o[0],o[1],o[2]):o.length===2?new te(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new te(o.lat,"lng"in o?o.lng:o.lon,o.alt):h===void 0?null:new te(o,h,w)}var De={latLngToPoint:function(o,h){var w=this.projection.project(o),A=this.scale(h);return this.transformation._transform(w,A)},pointToLatLng:function(o,h){var w=this.scale(h),A=this.transformation.untransform(o,w);return this.projection.unproject(A)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var h=this.projection.bounds,w=this.scale(o),A=this.transformation.transform(h.min,w),N=this.transformation.transform(h.max,w);return new he(A,N)},infinite:!1,wrapLatLng:function(o){var h=this.wrapLng?C(o.lng,this.wrapLng,!0):o.lng,w=this.wrapLat?C(o.lat,this.wrapLat,!0):o.lat,A=o.alt;return new te(w,h,A)},wrapLatLngBounds:function(o){var h=o.getCenter(),w=this.wrapLatLng(h),A=h.lat-w.lat,N=h.lng-w.lng;if(A===0&&N===0)return o;var V=o.getSouthWest(),$=o.getNorthEast(),de=new te(V.lat-A,V.lng-N),ge=new te($.lat-A,$.lng-N);return new ze(de,ge)}},st=a({},De,{wrapLng:[-180,180],R:6371e3,distance:function(o,h){var w=Math.PI/180,A=o.lat*w,N=h.lat*w,V=Math.sin((h.lat-o.lat)*w/2),$=Math.sin((h.lng-o.lng)*w/2),de=V*V+Math.cos(A)*Math.cos(N)*$*$,ge=2*Math.atan2(Math.sqrt(de),Math.sqrt(1-de));return this.R*ge}}),Tt=6378137,Wt={R:Tt,MAX_LATITUDE:85.0511287798,project:function(o){var h=Math.PI/180,w=this.MAX_LATITUDE,A=Math.max(Math.min(w,o.lat),-w),N=Math.sin(A*h);return new ee(this.R*o.lng*h,this.R*Math.log((1+N)/(1-N))/2)},unproject:function(o){var h=180/Math.PI;return new te((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*h,o.x*h/this.R)},bounds:function(){var o=Tt*Math.PI;return new he([-o,-o],[o,o])}()};function bt(o,h,w,A){if(k(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=h,this._c=w,this._d=A}bt.prototype={transform:function(o,h){return this._transform(o.clone(),h)},_transform:function(o,h){return h=h||1,o.x=h*(this._a*o.x+this._b),o.y=h*(this._c*o.y+this._d),o},untransform:function(o,h){return h=h||1,new ee((o.x/h-this._b)/this._a,(o.y/h-this._d)/this._c)}};function In(o,h,w,A){return new bt(o,h,w,A)}var ct=a({},st,{code:"EPSG:3857",projection:Wt,transformation:function(){var o=.5/(Math.PI*Wt.R);return In(o,.5,-o,.5)}()}),Sn=a({},ct,{code:"EPSG:900913"});function Kt(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Pn(o,h){var w="",A,N,V,$,de,ge;for(A=0,V=o.length;A<V;A++){for(de=o[A],N=0,$=de.length;N<$;N++)ge=de[N],w+=(N?"L":"M")+ge.x+" "+ge.y;w+=h?Ue.svg?"z":"x":""}return w||"M0 0"}var wt=document.documentElement.style,It="ActiveXObject"in window,ft=It&&!document.addEventListener,Vn="msLaunchUri"in navigator&&!("documentMode"in document),We=St("webkit"),gt=St("android"),tn=St("android 2")||St("android 3"),vt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Bt=gt&&St("Google")&&vt<537&&!("AudioNode"in window),G=!!window.opera,ke=!Vn&&St("chrome"),Ze=St("gecko")&&!We&&!G&&!It,Pe=!ke&&St("safari"),Oe=St("phantom"),Ye="OTransition"in wt,ut=navigator.platform.indexOf("Win")===0,Fe=It&&"transition"in wt,be="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!tn,Dt="MozPerspective"in wt,Je=!window.L_DISABLE_3D&&(Fe||be||Dt)&&!Ye&&!Oe,pt=typeof orientation<"u"||St("mobile"),An=pt&&We,mn=pt&&be,Dn=!window.PointerEvent&&window.MSPointerEvent,At=!!(window.PointerEvent||Dn),vr="ontouchstart"in window||!!window.TouchEvent,ss=!window.L_NO_TOUCH&&(vr||At),re=pt&&G,ye=pt&&Ze,Ce=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,je=function(){var o=!1;try{var h=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",b,h),window.removeEventListener("testPassiveEventSupport",b,h)}catch{}return o}(),Xe=function(){return!!document.createElement("canvas").getContext}(),mt=!!(document.createElementNS&&Kt("svg").createSVGRect),rt=!!mt&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Hn=!mt&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var h=o.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),Zt=navigator.platform.indexOf("Mac")===0,Yt=navigator.platform.indexOf("Linux")===0;function St(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Ue={ie:It,ielt9:ft,edge:Vn,webkit:We,android:gt,android23:tn,androidStock:Bt,opera:G,chrome:ke,gecko:Ze,safari:Pe,phantom:Oe,opera12:Ye,win:ut,ie3d:Fe,webkit3d:be,gecko3d:Dt,any3d:Je,mobile:pt,mobileWebkit:An,mobileWebkit3d:mn,msPointer:Dn,pointer:At,touch:ss,touchNative:vr,mobileOpera:re,mobileGecko:ye,retina:Ce,passiveEvents:je,canvas:Xe,svg:mt,vml:Hn,inlineSvg:rt,mac:Zt,linux:Yt},Vt=Ue.msPointer?"MSPointerDown":"pointerdown",Be=Ue.msPointer?"MSPointerMove":"pointermove",Gt=Ue.msPointer?"MSPointerUp":"pointerup",os=Ue.msPointer?"MSPointerCancel":"pointercancel",Qn={touchstart:Vt,touchmove:Be,touchend:Gt,touchcancel:os},as={touchstart:Hi,touchmove:Lo,touchend:Lo,touchcancel:Lo},Ei={},Oo=!1;function si(o,h,w){return h==="touchstart"&&sn(),as[h]?(w=as[h].bind(this,w),o.addEventListener(Qn[h],w,!1),w):(console.warn("wrong event specified:",h),b)}function Uh(o,h,w){if(!Qn[h]){console.warn("wrong event specified:",h);return}o.removeEventListener(Qn[h],w,!1)}function Vh(o){Ei[o.pointerId]=o}function oi(o){Ei[o.pointerId]&&(Ei[o.pointerId]=o)}function $n(o){delete Ei[o.pointerId]}function sn(){Oo||(document.addEventListener(Vt,Vh,!0),document.addEventListener(Be,oi,!0),document.addEventListener(Gt,$n,!0),document.addEventListener(os,$n,!0),Oo=!0)}function Lo(o,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var w in Ei)h.touches.push(Ei[w]);h.changedTouches=[h],o(h)}}function Hi(o,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&Zn(h),Lo(o,h)}function bl(o){var h={},w,A;for(A in o)w=o[A],h[A]=w&&w.bind?w.bind(o):w;return o=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var Se=200;function Hh(o,h){o.addEventListener("dblclick",h);var w=0,A;function N(V){if(V.detail!==1){A=V.detail;return}if(!(V.pointerType==="mouse"||V.sourceCapabilities&&!V.sourceCapabilities.firesTouchEvents)){var $=js(V);if(!($.some(function(ge){return ge instanceof HTMLLabelElement&&ge.attributes.for})&&!$.some(function(ge){return ge instanceof HTMLInputElement||ge instanceof HTMLSelectElement}))){var de=Date.now();de-w<=Se?(A++,A===2&&h(bl(V))):A=1,w=de}}}return o.addEventListener("click",N),{dblclick:h,simDblclick:N}}function gn(o,h){o.removeEventListener("dblclick",h.dblclick),o.removeEventListener("click",h.simDblclick)}var Wi=ue(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Po=ue(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ft=Po==="webkitTransition"||Po==="OTransition"?Po+"End":"transitionend";function jt(o){return typeof o=="string"?document.getElementById(o):o}function Ct(o,h){var w=o.style[h]||o.currentStyle&&o.currentStyle[h];if((!w||w==="auto")&&document.defaultView){var A=document.defaultView.getComputedStyle(o,null);w=A?A[h]:null}return w==="auto"?null:w}function Lt(o,h,w){var A=document.createElement(o);return A.className=h||"",w&&w.appendChild(A),A}function nn(o){var h=o.parentNode;h&&h.removeChild(o)}function Ds(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function on(o){var h=o.parentNode;h&&h.lastChild!==o&&h.appendChild(o)}function _r(o){var h=o.parentNode;h&&h.firstChild!==o&&h.insertBefore(o,h.firstChild)}function Cl(o,h){if(o.classList!==void 0)return o.classList.contains(h);var w=Ni(o);return w.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(w)}function $e(o,h){if(o.classList!==void 0)for(var w=z(h),A=0,N=w.length;A<N;A++)o.classList.add(w[A]);else if(!Cl(o,h)){var V=Ni(o);Sl(o,(V?V+" ":"")+h)}}function Xt(o,h){o.classList!==void 0?o.classList.remove(h):Sl(o,I((" "+Ni(o)+" ").replace(" "+h+" "," ")))}function Sl(o,h){o.className.baseVal===void 0?o.className=h:o.className.baseVal=h}function Ni(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function Et(o,h){"opacity"in o.style?o.style.opacity=h:"filter"in o.style&&Jn(o,h)}function Jn(o,h){var w=!1,A="DXImageTransform.Microsoft.Alpha";try{w=o.filters.item(A)}catch{if(h===1)return}h=Math.round(h*100),w?(w.Enabled=h!==100,w.Opacity=h):o.style.filter+=" progid:"+A+"(opacity="+h+")"}function ue(o){for(var h=document.documentElement.style,w=0;w<o.length;w++)if(o[w]in h)return o[w];return!1}function Z(o,h,w){var A=h||new ee(0,0);o.style[Wi]=(Ue.ie3d?"translate("+A.x+"px,"+A.y+"px)":"translate3d("+A.x+"px,"+A.y+"px,0)")+(w?" scale("+w+")":"")}function Ve(o,h){o._leaflet_pos=h,Ue.any3d?Z(o,h):(o.style.left=h.x+"px",o.style.top=h.y+"px")}function an(o){return o._leaflet_pos||new ee(0,0)}var er,Do,jo;if("onselectstart"in document)er=function(){dt(window,"selectstart",Zn)},Do=function(){He(window,"selectstart",Zn)};else{var tr=ue(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);er=function(){if(tr){var o=document.documentElement.style;jo=o[tr],o[tr]="none"}},Do=function(){tr&&(document.documentElement.style[tr]=jo,jo=void 0)}}function it(){dt(window,"dragstart",Zn)}function rn(){He(window,"dragstart",Zn)}var Bo,Al;function Fo(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(ls(),Bo=o,Al=o.style.outlineStyle,o.style.outlineStyle="none",dt(window,"keydown",ls))}function ls(){Bo&&(Bo.style.outlineStyle=Al,Bo=void 0,Al=void 0,He(window,"keydown",ls))}function ba(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function El(o){var h=o.getBoundingClientRect();return{x:h.width/o.offsetWidth||1,y:h.height/o.offsetHeight||1,boundingClientRect:h}}var jn={__proto__:null,TRANSFORM:Wi,TRANSITION:Po,TRANSITION_END:Ft,get:jt,getStyle:Ct,create:Lt,remove:nn,empty:Ds,toFront:on,toBack:_r,hasClass:Cl,addClass:$e,removeClass:Xt,setClass:Sl,getClass:Ni,setOpacity:Et,testProp:ue,setTransform:Z,setPosition:Ve,getPosition:an,get disableTextSelection(){return er},get enableTextSelection(){return Do},disableImageDrag:it,enableImageDrag:rn,preventOutline:Fo,restoreOutline:ls,getSizedParentNode:ba,getScale:El};function dt(o,h,w,A){if(h&&typeof h=="object")for(var N in h)kn(o,N,h[N],w);else{h=z(h);for(var V=0,$=h.length;V<$;V++)kn(o,h[V],w,A)}return this}var Wn="_leaflet_events";function He(o,h,w,A){if(arguments.length===1)lu(o),delete o[Wn];else if(h&&typeof h=="object")for(var N in h)Nl(o,N,h[N],w);else if(h=z(h),arguments.length===2)lu(o,function(de){return W(h,de)!==-1});else for(var V=0,$=h.length;V<$;V++)Nl(o,h[V],w,A);return this}function lu(o,h){for(var w in o[Wn]){var A=w.split(/\d/)[0];(!h||h(A))&&Nl(o,A,null,null,w)}}var xt={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function kn(o,h,w,A){var N=h+v(w)+(A?"_"+v(A):"");if(o[Wn]&&o[Wn][N])return this;var V=function(de){return w.call(A||o,de||window.event)},$=V;!Ue.touchNative&&Ue.pointer&&h.indexOf("touch")===0?V=si(o,h,V):Ue.touch&&h==="dblclick"?V=Hh(o,V):"addEventListener"in o?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?o.addEventListener(xt[h]||h,V,Ue.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(V=function(de){de=de||window.event,cs(o,de)&&$(de)},o.addEventListener(xt[h],V,!1)):o.addEventListener(h,$,!1):o.attachEvent("on"+h,V),o[Wn]=o[Wn]||{},o[Wn][N]=V}function Nl(o,h,w,A,N){N=N||h+v(w)+(A?"_"+v(A):"");var V=o[Wn]&&o[Wn][N];if(!V)return this;!Ue.touchNative&&Ue.pointer&&h.indexOf("touch")===0?Uh(o,h,V):Ue.touch&&h==="dblclick"?gn(o,V):"removeEventListener"in o?o.removeEventListener(xt[h]||h,V,!1):o.detachEvent("on"+h,V),o[Wn][N]=null}function Ti(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Ca(o){return kn(o,"wheel",Ti),this}function Wr(o){return dt(o,"mousedown touchstart dblclick contextmenu",Ti),o._leaflet_disable_click=!0,this}function Zn(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function Zr(o){return Zn(o),Ti(o),this}function js(o){if(o.composedPath)return o.composedPath();for(var h=[],w=o.target;w;)h.push(w),w=w.parentNode;return h}function Bs(o,h){if(!h)return new ee(o.clientX,o.clientY);var w=El(h),A=w.boundingClientRect;return new ee((o.clientX-A.left)/w.x-h.clientLeft,(o.clientY-A.top)/w.y-h.clientTop)}var cu=Ue.linux&&Ue.chrome?window.devicePixelRatio:Ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Fs(o){return Ue.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/cu:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function cs(o,h){var w=h.relatedTarget;if(!w)return!0;try{for(;w&&w!==o;)w=w.parentNode}catch{return!1}return w!==o}var cr={__proto__:null,on:dt,off:He,stopPropagation:Ti,disableScrollPropagation:Ca,disableClickPropagation:Wr,preventDefault:Zn,stop:Zr,getPropagationPath:js,getMousePosition:Bs,getWheelDelta:Fs,isExternalTarget:cs,addListener:dt,removeListener:He},Tl=ve.extend({run:function(o,h,w,A){this.stop(),this._el=o,this._inProgress=!0,this._duration=w||.25,this._easeOutPower=1/Math.max(A||.5,.2),this._startPos=an(o),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ie(this._animate,this),this._step()},_step:function(o){var h=+new Date-this._startTime,w=this._duration*1e3;h<w?this._runFrame(this._easeOut(h/w),o):(this._runFrame(1),this._complete())},_runFrame:function(o,h){var w=this._startPos.add(this._offset.multiplyBy(o));h&&w._round(),Ve(this._el,w),this.fire("step")},_complete:function(){ae(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),Mt=ve.extend({options:{crs:ct,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,h){h=R(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(le(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Po&&Ue.any3d&&!Ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),dt(this._proxy,Ft,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,h,w){if(h=h===void 0?this._zoom:this._limitZoom(h),o=this._limitCenter(le(o),h,this.options.maxBounds),w=w||{},this._stop(),this._loaded&&!w.reset&&w!==!0){w.animate!==void 0&&(w.zoom=a({animate:w.animate},w.zoom),w.pan=a({animate:w.animate,duration:w.duration},w.pan));var A=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,h,w.zoom):this._tryAnimatedPan(o,w.pan);if(A)return clearTimeout(this._sizeTimer),this}return this._resetView(o,h,w.pan&&w.pan.noMoveStart),this},setZoom:function(o,h){return this._loaded?this.setView(this.getCenter(),o,{zoom:h}):(this._zoom=o,this)},zoomIn:function(o,h){return o=o||(Ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,h)},zoomOut:function(o,h){return o=o||(Ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,h)},setZoomAround:function(o,h,w){var A=this.getZoomScale(h),N=this.getSize().divideBy(2),V=o instanceof ee?o:this.latLngToContainerPoint(o),$=V.subtract(N).multiplyBy(1-1/A),de=this.containerPointToLatLng(N.add($));return this.setView(de,h,{zoom:w})},_getBoundsCenterZoom:function(o,h){h=h||{},o=o.getBounds?o.getBounds():Le(o);var w=pe(h.paddingTopLeft||h.padding||[0,0]),A=pe(h.paddingBottomRight||h.padding||[0,0]),N=this.getBoundsZoom(o,!1,w.add(A));if(N=typeof h.maxZoom=="number"?Math.min(h.maxZoom,N):N,N===1/0)return{center:o.getCenter(),zoom:N};var V=A.subtract(w).divideBy(2),$=this.project(o.getSouthWest(),N),de=this.project(o.getNorthEast(),N),ge=this.unproject($.add(de).divideBy(2).add(V),N);return{center:ge,zoom:N}},fitBounds:function(o,h){if(o=Le(o),!o.isValid())throw new Error("Bounds are not valid.");var w=this._getBoundsCenterZoom(o,h);return this.setView(w.center,w.zoom,h)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,h){return this.setView(o,this._zoom,{pan:h})},panBy:function(o,h){if(o=pe(o).round(),h=h||{},!o.x&&!o.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Tl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){$e(this._mapPane,"leaflet-pan-anim");var w=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,w,h.duration||.25,h.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,h,w){if(w=w||{},w.animate===!1||!Ue.any3d)return this.setView(o,h,w);this._stop();var A=this.project(this.getCenter()),N=this.project(o),V=this.getSize(),$=this._zoom;o=le(o),h=h===void 0?$:h;var de=Math.max(V.x,V.y),ge=de*this.getZoomScale($,h),Ae=N.distanceTo(A)||1,Ge=1.42,at=Ge*Ge;function kt(Fn){var xu=Fn?-1:1,VC=Fn?ge:de,HC=ge*ge-de*de+xu*at*at*Ae*Ae,WC=2*VC*at*Ae,Kh=HC/WC,Mm=Math.sqrt(Kh*Kh+1)-Kh,ZC=Mm<1e-9?-18:Math.log(Mm);return ZC}function Ar(Fn){return(Math.exp(Fn)-Math.exp(-Fn))/2}function nr(Fn){return(Math.exp(Fn)+Math.exp(-Fn))/2}function hi(Fn){return Ar(Fn)/nr(Fn)}var Lr=kt(0);function Ta(Fn){return de*(nr(Lr)/nr(Lr+Ge*Fn))}function BC(Fn){return de*(nr(Lr)*hi(Lr+Ge*Fn)-Ar(Lr))/at}function FC(Fn){return 1-Math.pow(1-Fn,1.5)}var zC=Date.now(),Im=(kt(1)-Lr)/Ge,UC=w.duration?1e3*w.duration:1e3*Im*.8;function km(){var Fn=(Date.now()-zC)/UC,xu=FC(Fn)*Im;Fn<=1?(this._flyToFrame=ie(km,this),this._move(this.unproject(A.add(N.subtract(A).multiplyBy(BC(xu)/Ae)),$),this.getScaleZoom(de/Ta(xu),$),{flyTo:!0})):this._move(o,h)._moveEnd(!0)}return this._moveStart(!0,w.noMoveStart),km.call(this),this},flyToBounds:function(o,h){var w=this._getBoundsCenterZoom(o,h);return this.flyTo(w.center,w.zoom,h)},setMaxBounds:function(o){return o=Le(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var h=this.options.minZoom;return this.options.minZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var h=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,h){this._enforcingBounds=!0;var w=this.getCenter(),A=this._limitCenter(w,this._zoom,Le(o));return w.equals(A)||this.panTo(A,h),this._enforcingBounds=!1,this},panInside:function(o,h){h=h||{};var w=pe(h.paddingTopLeft||h.padding||[0,0]),A=pe(h.paddingBottomRight||h.padding||[0,0]),N=this.project(this.getCenter()),V=this.project(o),$=this.getPixelBounds(),de=Te([$.min.add(w),$.max.subtract(A)]),ge=de.getSize();if(!de.contains(V)){this._enforcingBounds=!0;var Ae=V.subtract(de.getCenter()),Ge=de.extend(V).getSize().subtract(ge);N.x+=Ae.x<0?-Ge.x:Ge.x,N.y+=Ae.y<0?-Ge.y:Ge.y,this.panTo(this.unproject(N),h),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=a({animate:!1,pan:!0},o===!0?{animate:!0}:o);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var w=this.getSize(),A=h.divideBy(2).round(),N=w.divideBy(2).round(),V=A.subtract(N);return!V.x&&!V.y?this:(o.animate&&o.pan?this.panBy(V):(o.pan&&this._rawPanBy(V),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:w}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=a({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=f(this._handleGeolocationResponse,this),w=f(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,w,o):navigator.geolocation.getCurrentPosition(h,w,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var h=o.code,w=o.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+w+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var h=o.coords.latitude,w=o.coords.longitude,A=new te(h,w),N=A.toBounds(o.coords.accuracy*2),V=this._locateOptions;if(V.setView){var $=this.getBoundsZoom(N);this.setView(A,V.maxZoom?Math.min($,V.maxZoom):$)}var de={latlng:A,bounds:N,timestamp:o.timestamp};for(var ge in o.coords)typeof o.coords[ge]=="number"&&(de[ge]=o.coords[ge]);this.fire("locationfound",de)}},addHandler:function(o,h){if(!h)return this;var w=this[o]=new h(this);return this._handlers.push(w),this.options[o]&&w.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),nn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ae(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)nn(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,h){var w="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),A=Lt("div",w,h||this._mapPane);return o&&(this._panes[o]=A),A},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),h=this.unproject(o.getBottomLeft()),w=this.unproject(o.getTopRight());return new ze(h,w)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,h,w){o=Le(o),w=pe(w||[0,0]);var A=this.getZoom()||0,N=this.getMinZoom(),V=this.getMaxZoom(),$=o.getNorthWest(),de=o.getSouthEast(),ge=this.getSize().subtract(w),Ae=Te(this.project(de,A),this.project($,A)).getSize(),Ge=Ue.any3d?this.options.zoomSnap:1,at=ge.x/Ae.x,kt=ge.y/Ae.y,Ar=h?Math.max(at,kt):Math.min(at,kt);return A=this.getScaleZoom(Ar,A),Ge&&(A=Math.round(A/(Ge/100))*(Ge/100),A=h?Math.ceil(A/Ge)*Ge:Math.floor(A/Ge)*Ge),Math.max(N,Math.min(V,A))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ee(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,h){var w=this._getTopLeftPoint(o,h);return new he(w,w.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,h){var w=this.options.crs;return h=h===void 0?this._zoom:h,w.scale(o)/w.scale(h)},getScaleZoom:function(o,h){var w=this.options.crs;h=h===void 0?this._zoom:h;var A=w.zoom(o*w.scale(h));return isNaN(A)?1/0:A},project:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(le(o),h)},unproject:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(pe(o),h)},layerPointToLatLng:function(o){var h=pe(o).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(o){var h=this.project(le(o))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(le(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(Le(o))},distance:function(o,h){return this.options.crs.distance(le(o),le(h))},containerPointToLayerPoint:function(o){return pe(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return pe(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var h=this.containerPointToLayerPoint(pe(o));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(le(o)))},mouseEventToContainerPoint:function(o){return Bs(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var h=this._container=jt(o);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");dt(h,"scroll",this._onScroll,this),this._containerId=v(h)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ue.any3d,$e(o,"leaflet-container"+(Ue.touch?" leaflet-touch":"")+(Ue.retina?" leaflet-retina":"")+(Ue.ielt9?" leaflet-oldie":"")+(Ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=Ct(o,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ve(this._mapPane,new ee(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||($e(o.markerPane,"leaflet-zoom-hide"),$e(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,h,w){Ve(this._mapPane,new ee(0,0));var A=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var N=this._zoom!==h;this._moveStart(N,w)._move(o,h)._moveEnd(N),this.fire("viewreset"),A&&this.fire("load")},_moveStart:function(o,h){return o&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(o,h,w,A){h===void 0&&(h=this._zoom);var N=this._zoom!==h;return this._zoom=h,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),A?w&&w.pinch&&this.fire("zoom",w):((N||w&&w.pinch)&&this.fire("zoom",w),this.fire("move",w)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ae(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){Ve(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[v(this._container)]=this;var h=o?He:dt;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),Ue.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ae(this._resizeRequest),this._resizeRequest=ie(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,h){for(var w=[],A,N=h==="mouseout"||h==="mouseover",V=o.target||o.srcElement,$=!1;V;){if(A=this._targets[v(V)],A&&(h==="click"||h==="preclick")&&this._draggableMoved(A)){$=!0;break}if(A&&A.listens(h,!0)&&(N&&!cs(V,o)||(w.push(A),N))||V===this._container)break;V=V.parentNode}return!w.length&&!$&&!N&&this.listens(h,!0)&&(w=[this]),w},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var h=o.target||o.srcElement;if(!(!this._loaded||h._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(h))){var w=o.type;w==="mousedown"&&Fo(h),this._fireDOMEvent(o,w)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,h,w){if(o.type==="click"){var A=a({},o);A.type="preclick",this._fireDOMEvent(A,A.type,w)}var N=this._findEventTargets(o,h);if(w){for(var V=[],$=0;$<w.length;$++)w[$].listens(h,!0)&&V.push(w[$]);N=V.concat(N)}if(N.length){h==="contextmenu"&&Zn(o);var de=N[0],ge={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var Ae=de.getLatLng&&(!de._radius||de._radius<=10);ge.containerPoint=Ae?this.latLngToContainerPoint(de.getLatLng()):this.mouseEventToContainerPoint(o),ge.layerPoint=this.containerPointToLayerPoint(ge.containerPoint),ge.latlng=Ae?de.getLatLng():this.layerPointToLatLng(ge.layerPoint)}for($=0;$<N.length;$++)if(N[$].fire(h,ge,!0),ge.originalEvent._stopped||N[$].options.bubblingMouseEvents===!1&&W(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,h=this._handlers.length;o<h;o++)this._handlers[o].disable()},whenReady:function(o,h){return this._loaded?o.call(h||this,{target:this}):this.on("load",o,h),this},_getMapPanePos:function(){return an(this._mapPane)||new ee(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,h){var w=o&&h!==void 0?this._getNewPixelOrigin(o,h):this.getPixelOrigin();return w.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,h){var w=this.getSize()._divideBy(2);return this.project(o,h)._subtract(w)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,h,w){var A=this._getNewPixelOrigin(w,h);return this.project(o,h)._subtract(A)},_latLngBoundsToNewLayerBounds:function(o,h,w){var A=this._getNewPixelOrigin(w,h);return Te([this.project(o.getSouthWest(),h)._subtract(A),this.project(o.getNorthWest(),h)._subtract(A),this.project(o.getSouthEast(),h)._subtract(A),this.project(o.getNorthEast(),h)._subtract(A)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,h,w){if(!w)return o;var A=this.project(o,h),N=this.getSize().divideBy(2),V=new he(A.subtract(N),A.add(N)),$=this._getBoundsOffset(V,w,h);return Math.abs($.x)<=1&&Math.abs($.y)<=1?o:this.unproject(A.add($),h)},_limitOffset:function(o,h){if(!h)return o;var w=this.getPixelBounds(),A=new he(w.min.add(o),w.max.add(o));return o.add(this._getBoundsOffset(A,h))},_getBoundsOffset:function(o,h,w){var A=Te(this.project(h.getNorthEast(),w),this.project(h.getSouthWest(),w)),N=A.min.subtract(o.min),V=A.max.subtract(o.max),$=this._rebound(N.x,-V.x),de=this._rebound(N.y,-V.y);return new ee($,de)},_rebound:function(o,h){return o+h>0?Math.round(o-h)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(h))},_limitZoom:function(o){var h=this.getMinZoom(),w=this.getMaxZoom(),A=Ue.any3d?this.options.zoomSnap:1;return A&&(o=Math.round(o/A)*A),Math.max(h,Math.min(w,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Xt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,h){var w=this._getCenterOffset(o)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(w)?!1:(this.panBy(w,h),!0)},_createAnimProxy:function(){var o=this._proxy=Lt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(h){var w=Wi,A=this._proxy.style[w];Z(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),A===this._proxy.style[w]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){nn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),h=this.getZoom();Z(this._proxy,this.project(o,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,h,w){if(this._animatingZoom)return!0;if(w=w||{},!this._zoomAnimated||w.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var A=this.getZoomScale(h),N=this._getCenterOffset(o)._divideBy(1-1/A);return w.animate!==!0&&!this.getSize().contains(N)?!1:(ie(function(){this._moveStart(!0,w.noMoveStart||!1)._animateZoom(o,h,!0)},this),!0)},_animateZoom:function(o,h,w,A){this._mapPane&&(w&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=h,$e(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:h,noUpdate:A}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Xt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function uu(o,h){return new Mt(o,h)}var Gr=Ne.extend({options:{position:"topright"},initialize:function(o){R(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var h=this._map;return h&&h.removeControl(this),this.options.position=o,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var h=this._container=this.onAdd(o),w=this.getPosition(),A=o._controlCorners[w];return $e(h,"leaflet-control"),w.indexOf("bottom")!==-1?A.insertBefore(h,A.firstChild):A.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(nn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),zo=function(o){return new Gr(o)};Mt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},h="leaflet-",w=this._controlContainer=Lt("div",h+"control-container",this._container);function A(N,V){var $=h+N+" "+h+V;o[N+V]=Lt("div",$,w)}A("top","left"),A("top","right"),A("bottom","left"),A("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)nn(this._controlCorners[o]);nn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var du=Gr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,h,w,A){return w<A?-1:A<w?1:0}},initialize:function(o,h,w){R(this,w),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var A in o)this._addLayer(o[A],A);for(A in h)this._addLayer(h[A],A,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return Gr.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,h){return this._addLayer(o,h),this._map?this._update():this},addOverlay:function(o,h){return this._addLayer(o,h,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var h=this._getLayer(v(o));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){$e(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?($e(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Xt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Xt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",h=this._container=Lt("div",o),w=this.options.collapsed;h.setAttribute("aria-haspopup",!0),Wr(h),Ca(h);var A=this._section=Lt("section",o+"-list");w&&(this._map.on("click",this.collapse,this),dt(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var N=this._layersLink=Lt("a",o+"-toggle",h);N.href="#",N.title="Layers",N.setAttribute("role","button"),dt(N,{keydown:function(V){V.keyCode===13&&this._expandSafely()},click:function(V){Zn(V),this._expandSafely()}},this),w||this.expand(),this._baseLayersList=Lt("div",o+"-base",A),this._separator=Lt("div",o+"-separator",A),this._overlaysList=Lt("div",o+"-overlays",A),h.appendChild(A)},_getLayer:function(o){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&v(this._layers[h].layer)===o)return this._layers[h]},_addLayer:function(o,h,w){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:h,overlay:w}),this.options.sortLayers&&this._layers.sort(f(function(A,N){return this.options.sortFunction(A.layer,N.layer,A.name,N.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ds(this._baseLayersList),Ds(this._overlaysList),this._layerControlInputs=[];var o,h,w,A,N=0;for(w=0;w<this._layers.length;w++)A=this._layers[w],this._addItem(A),h=h||A.overlay,o=o||!A.overlay,N+=A.overlay?0:1;return this.options.hideSingleBase&&(o=o&&N>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=h&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var h=this._getLayer(v(o.target)),w=h.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;w&&this._map.fire(w,h)},_createRadioElement:function(o,h){var w='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(h?' checked="checked"':"")+"/>",A=document.createElement("div");return A.innerHTML=w,A.firstChild},_addItem:function(o){var h=document.createElement("label"),w=this._map.hasLayer(o.layer),A;o.overlay?(A=document.createElement("input"),A.type="checkbox",A.className="leaflet-control-layers-selector",A.defaultChecked=w):A=this._createRadioElement("leaflet-base-layers_"+v(this),w),this._layerControlInputs.push(A),A.layerId=v(o.layer),dt(A,"click",this._onInputClick,this);var N=document.createElement("span");N.innerHTML=" "+o.name;var V=document.createElement("span");h.appendChild(V),V.appendChild(A),V.appendChild(N);var $=o.overlay?this._overlaysList:this._baseLayersList;return $.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,h,w,A=[],N=[];this._handlingClick=!0;for(var V=o.length-1;V>=0;V--)h=o[V],w=this._getLayer(h.layerId).layer,h.checked?A.push(w):h.checked||N.push(w);for(V=0;V<N.length;V++)this._map.hasLayer(N[V])&&this._map.removeLayer(N[V]);for(V=0;V<A.length;V++)this._map.hasLayer(A[V])||this._map.addLayer(A[V]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,h,w,A=this._map.getZoom(),N=o.length-1;N>=0;N--)h=o[N],w=this._getLayer(h.layerId).layer,h.disabled=w.options.minZoom!==void 0&&A<w.options.minZoom||w.options.maxZoom!==void 0&&A>w.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,dt(o,"click",Zn),this.expand();var h=this;setTimeout(function(){He(o,"click",Zn),h._preventClick=!1})}}),qt=function(o,h,w){return new du(o,h,w)},Sa=Gr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var h="leaflet-control-zoom",w=Lt("div",h+" leaflet-bar"),A=this.options;return this._zoomInButton=this._createButton(A.zoomInText,A.zoomInTitle,h+"-in",w,this._zoomIn),this._zoomOutButton=this._createButton(A.zoomOutText,A.zoomOutTitle,h+"-out",w,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),w},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,h,w,A,N){var V=Lt("a",w,A);return V.innerHTML=o,V.href="#",V.title=h,V.setAttribute("role","button"),V.setAttribute("aria-label",h),Wr(V),dt(V,"click",Zr),dt(V,"click",N,this),dt(V,"click",this._refocusOnMap,this),V},_updateDisabled:function(){var o=this._map,h="leaflet-disabled";Xt(this._zoomInButton,h),Xt(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&($e(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&($e(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});Mt.mergeOptions({zoomControl:!0}),Mt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Sa,this.addControl(this.zoomControl))});var Aa=function(o){return new Sa(o)},Ii=Gr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var h="leaflet-control-scale",w=Lt("div",h),A=this.options;return this._addScales(A,h+"-line",w),o.on(A.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),w},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,h,w){o.metric&&(this._mScale=Lt("div",h,w)),o.imperial&&(this._iScale=Lt("div",h,w))},_update:function(){var o=this._map,h=o.getSize().y/2,w=o.distance(o.containerPointToLatLng([0,h]),o.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(w)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var h=this._getRoundNum(o),w=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,w,h/o)},_updateImperial:function(o){var h=o*3.2808399,w,A,N;h>5280?(w=h/5280,A=this._getRoundNum(w),this._updateScale(this._iScale,A+" mi",A/w)):(N=this._getRoundNum(h),this._updateScale(this._iScale,N+" ft",N/h))},_updateScale:function(o,h,w){o.style.width=Math.round(this.options.maxWidth*w)+"px",o.innerHTML=h},_getRoundNum:function(o){var h=Math.pow(10,(Math.floor(o)+"").length-1),w=o/h;return w=w>=10?10:w>=5?5:w>=3?3:w>=2?2:1,h*w}}),Wh=function(o){return new Ii(o)},me='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',_t=Gr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ue.inlineSvg?me+" ":"")+"Leaflet</a>"},initialize:function(o){R(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Lt("div","leaflet-control-attribution"),Wr(this._container);for(var h in o._layers)o._layers[h].getAttribution&&this.addAttribution(o._layers[h].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var h in this._attributions)this._attributions[h]&&o.push(h);var w=[];this.options.prefix&&w.push(this.options.prefix),o.length&&w.push(o.join(", ")),this._container.innerHTML=w.join(' <span aria-hidden="true">|</span> ')}}});Mt.mergeOptions({attributionControl:!0}),Mt.addInitHook(function(){this.options.attributionControl&&new _t().addTo(this)});var Gn=function(o){return new _t(o)};Gr.Layers=du,Gr.Zoom=Sa,Gr.Scale=Ii,Gr.Attribution=_t,zo.layers=qt,zo.zoom=Aa,zo.scale=Wh,zo.attribution=Gn;var br=Ne.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});br.addTo=function(o,h){return o.addHandler(h,this),this};var hu={Events:se},fu=Ue.touch?"touchstart mousedown":"mousedown",Zi=ve.extend({options:{clickTolerance:3},initialize:function(o,h,w,A){R(this,A),this._element=o,this._dragStartTarget=h||o,this._preventOutline=w},enable:function(){this._enabled||(dt(this._dragStartTarget,fu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Zi._dragging===this&&this.finishDrag(!0),He(this._dragStartTarget,fu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Cl(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){Zi._dragging===this&&this.finishDrag();return}if(!(Zi._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(Zi._dragging=this,this._preventOutline&&Fo(this._element),it(),er(),!this._moving)){this.fire("down");var h=o.touches?o.touches[0]:o,w=ba(this._element);this._startPoint=new ee(h.clientX,h.clientY),this._startPos=an(this._element),this._parentScale=El(w);var A=o.type==="mousedown";dt(document,A?"mousemove":"touchmove",this._onMove,this),dt(document,A?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var h=o.touches&&o.touches.length===1?o.touches[0]:o,w=new ee(h.clientX,h.clientY)._subtract(this._startPoint);!w.x&&!w.y||Math.abs(w.x)+Math.abs(w.y)<this.options.clickTolerance||(w.x/=this._parentScale.x,w.y/=this._parentScale.y,Zn(o),this._moved||(this.fire("dragstart"),this._moved=!0,$e(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),$e(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(w),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),Ve(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Xt(document.body,"leaflet-dragging"),this._lastTarget&&(Xt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),He(document,"mousemove touchmove",this._onMove,this),He(document,"mouseup touchend touchcancel",this._onUp,this),rn(),Do();var h=this._moved&&this._moving;this._moving=!1,Zi._dragging=!1,h&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function pu(o,h,w){var A,N=[1,4,2,8],V,$,de,ge,Ae,Ge,at,kt;for(V=0,Ge=o.length;V<Ge;V++)o[V]._code=ds(o[V],h);for(de=0;de<4;de++){for(at=N[de],A=[],V=0,Ge=o.length,$=Ge-1;V<Ge;$=V++)ge=o[V],Ae=o[$],ge._code&at?Ae._code&at||(kt=ki(Ae,ge,at,h,w),kt._code=ds(kt,h),A.push(kt)):(Ae._code&at&&(kt=ki(Ae,ge,at,h,w),kt._code=ds(kt,h),A.push(kt)),A.push(ge));o=A}return o}function Ea(o,h){var w,A,N,V,$,de,ge,Ae,Ge;if(!o||o.length===0)throw new Error("latlngs not passed");Cr(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var at=le([0,0]),kt=Le(o),Ar=kt.getNorthWest().distanceTo(kt.getSouthWest())*kt.getNorthEast().distanceTo(kt.getNorthWest());Ar<1700&&(at=yn(o));var nr=o.length,hi=[];for(w=0;w<nr;w++){var Lr=le(o[w]);hi.push(h.project(le([Lr.lat-at.lat,Lr.lng-at.lng])))}for(de=ge=Ae=0,w=0,A=nr-1;w<nr;A=w++)N=hi[w],V=hi[A],$=N.y*V.x-V.y*N.x,ge+=(N.x+V.x)*$,Ae+=(N.y+V.y)*$,de+=$*3;de===0?Ge=hi[0]:Ge=[ge/de,Ae/de];var Ta=h.unproject(pe(Ge));return le([Ta.lat+at.lat,Ta.lng+at.lng])}function yn(o){for(var h=0,w=0,A=0,N=0;N<o.length;N++){var V=le(o[N]);h+=V.lat,w+=V.lng,A++}return le([h/A,w/A])}var Il={__proto__:null,clipPolygon:pu,polygonCenter:Ea,centroid:yn};function un(o,h){if(!h||!o.length)return o.slice();var w=h*h;return o=Zh(o,w),o=Qt(o,w),o}function Uo(o,h,w){return Math.sqrt(hs(o,h,w,!0))}function us(o,h,w){return hs(o,h,w)}function Qt(o,h){var w=o.length,A=typeof Uint8Array<"u"?Uint8Array:Array,N=new A(w);N[0]=N[w-1]=1,ot(o,N,h,0,w-1);var V,$=[];for(V=0;V<w;V++)N[V]&&$.push(o[V]);return $}function ot(o,h,w,A,N){var V=0,$,de,ge;for(de=A+1;de<=N-1;de++)ge=hs(o[de],o[A],o[N],!0),ge>V&&($=de,V=ge);V>w&&(h[$]=1,ot(o,h,w,A,$),ot(o,h,w,$,N))}function Zh(o,h){for(var w=[o[0]],A=1,N=0,V=o.length;A<V;A++)ai(o[A],o[N])>h&&(w.push(o[A]),N=A);return N<V-1&&w.push(o[V-1]),w}var en;function Gi(o,h,w,A,N){var V=A?en:ds(o,w),$=ds(h,w),de,ge,Ae;for(en=$;;){if(!(V|$))return[o,h];if(V&$)return!1;de=V||$,ge=ki(o,h,de,w,N),Ae=ds(ge,w),de===V?(o=ge,V=Ae):(h=ge,$=Ae)}}function ki(o,h,w,A,N){var V=h.x-o.x,$=h.y-o.y,de=A.min,ge=A.max,Ae,Ge;return w&8?(Ae=o.x+V*(ge.y-o.y)/$,Ge=ge.y):w&4?(Ae=o.x+V*(de.y-o.y)/$,Ge=de.y):w&2?(Ae=ge.x,Ge=o.y+$*(ge.x-o.x)/V):w&1&&(Ae=de.x,Ge=o.y+$*(de.x-o.x)/V),new ee(Ae,Ge,N)}function ds(o,h){var w=0;return o.x<h.min.x?w|=1:o.x>h.max.x&&(w|=2),o.y<h.min.y?w|=4:o.y>h.max.y&&(w|=8),w}function ai(o,h){var w=h.x-o.x,A=h.y-o.y;return w*w+A*A}function hs(o,h,w,A){var N=h.x,V=h.y,$=w.x-N,de=w.y-V,ge=$*$+de*de,Ae;return ge>0&&(Ae=((o.x-N)*$+(o.y-V)*de)/ge,Ae>1?(N=w.x,V=w.y):Ae>0&&(N+=$*Ae,V+=de*Ae)),$=o.x-N,de=o.y-V,A?$*$+de*de:new ee(N,V)}function Cr(o){return!k(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function Na(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Cr(o)}function kl(o,h){var w,A,N,V,$,de,ge,Ae;if(!o||o.length===0)throw new Error("latlngs not passed");Cr(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Ge=le([0,0]),at=Le(o),kt=at.getNorthWest().distanceTo(at.getSouthWest())*at.getNorthEast().distanceTo(at.getNorthWest());kt<1700&&(Ge=yn(o));var Ar=o.length,nr=[];for(w=0;w<Ar;w++){var hi=le(o[w]);nr.push(h.project(le([hi.lat-Ge.lat,hi.lng-Ge.lng])))}for(w=0,A=0;w<Ar-1;w++)A+=nr[w].distanceTo(nr[w+1])/2;if(A===0)Ae=nr[0];else for(w=0,V=0;w<Ar-1;w++)if($=nr[w],de=nr[w+1],N=$.distanceTo(de),V+=N,V>A){ge=(V-A)/N,Ae=[de.x-ge*(de.x-$.x),de.y-ge*(de.y-$.y)];break}var Lr=h.unproject(pe(Ae));return le([Lr.lat+Ge.lat,Lr.lng+Ge.lng])}var mu={__proto__:null,simplify:un,pointToSegmentDistance:Uo,closestPointOnSegment:us,clipSegment:Gi,_getEdgeIntersection:ki,_getBitCode:ds,_sqClosestPointOnSegment:hs,isFlat:Cr,_flat:Na,polylineCenter:kl},Ml={project:function(o){return new ee(o.lng,o.lat)},unproject:function(o){return new te(o.y,o.x)},bounds:new he([-180,-90],[180,90])},Yi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new he([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var h=Math.PI/180,w=this.R,A=o.lat*h,N=this.R_MINOR/w,V=Math.sqrt(1-N*N),$=V*Math.sin(A),de=Math.tan(Math.PI/4-A/2)/Math.pow((1-$)/(1+$),V/2);return A=-w*Math.log(Math.max(de,1e-10)),new ee(o.lng*h*w,A)},unproject:function(o){for(var h=180/Math.PI,w=this.R,A=this.R_MINOR/w,N=Math.sqrt(1-A*A),V=Math.exp(-o.y/w),$=Math.PI/2-2*Math.atan(V),de=0,ge=.1,Ae;de<15&&Math.abs(ge)>1e-7;de++)Ae=N*Math.sin($),Ae=Math.pow((1-Ae)/(1+Ae),N/2),ge=Math.PI/2-2*Math.atan(V*Ae)-$,$+=ge;return new te($*h,o.x*h/w)}},Rl={__proto__:null,LonLat:Ml,Mercator:Yi,SphericalMercator:Wt},Gh=a({},st,{code:"EPSG:3395",projection:Yi,transformation:function(){var o=.5/(Math.PI*Yi.R);return In(o,.5,-o,.5)}()}),zs=a({},st,{code:"EPSG:4326",projection:Ml,transformation:In(1/180,1,-1/180,.5)}),Yh=a({},De,{projection:Ml,transformation:In(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,h){var w=h.lng-o.lng,A=h.lat-o.lat;return Math.sqrt(w*w+A*A)},infinite:!0});De.Earth=st,De.EPSG3395=Gh,De.EPSG3857=ct,De.EPSG900913=Sn,De.EPSG4326=zs,De.Simple=Yh;var Bn=ve.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[v(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[v(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var h=o.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var w=this.getEvents();h.on(w,this),this.once("remove",function(){h.off(w,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});Mt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var h=v(o);return this._layers[h]?this:(this._layers[h]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var h=v(o);return this._layers[h]?(this._loaded&&o.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return v(o)in this._layers},eachLayer:function(o,h){for(var w in this._layers)o.call(h,this._layers[w]);return this},_addLayers:function(o){o=o?k(o)?o:[o]:[];for(var h=0,w=o.length;h<w;h++)this.addLayer(o[h])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[v(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var h=v(o);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,h=-1/0,w=this._getZoomSpan();for(var A in this._zoomBoundLayers){var N=this._zoomBoundLayers[A].options;o=N.minZoom===void 0?o:Math.min(o,N.minZoom),h=N.maxZoom===void 0?h:Math.max(h,N.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=o===1/0?void 0:o,w!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Mi=Bn.extend({initialize:function(o,h){R(this,h),this._layers={};var w,A;if(o)for(w=0,A=o.length;w<A;w++)this.addLayer(o[w])},addLayer:function(o){var h=this.getLayerId(o);return this._layers[h]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var h=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(o){var h=typeof o=="number"?o:this.getLayerId(o);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var h=Array.prototype.slice.call(arguments,1),w,A;for(w in this._layers)A=this._layers[w],A[o]&&A[o].apply(A,h);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,h){for(var w in this._layers)o.call(h,this._layers[w]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return v(o)}}),Or=function(o,h){return new Mi(o,h)},li=Mi.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),Mi.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),Mi.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new ze;for(var h in this._layers){var w=this._layers[h];o.extend(w.getBounds?w.getBounds():w.getLatLng())}return o}}),ci=function(o,h){return new li(o,h)},Us=Ne.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){R(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,h){var w=this._getIconUrl(o);if(!w){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var A=this._createImg(w,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(A,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(A.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),A},_setIconStyles:function(o,h){var w=this.options,A=w[h+"Size"];typeof A=="number"&&(A=[A,A]);var N=pe(A),V=pe(h==="shadow"&&w.shadowAnchor||w.iconAnchor||N&&N.divideBy(2,!0));o.className="leaflet-marker-"+h+" "+(w.className||""),V&&(o.style.marginLeft=-V.x+"px",o.style.marginTop=-V.y+"px"),N&&(o.style.width=N.x+"px",o.style.height=N.y+"px")},_createImg:function(o,h){return h=h||document.createElement("img"),h.src=o,h},_getIconUrl:function(o){return Ue.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function Ol(o){return new Us(o)}var Vo=Us.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof Vo.imagePath!="string"&&(Vo.imagePath=this._detectIconPath()),(this.options.imagePath||Vo.imagePath)+Us.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var h=function(w,A,N){var V=A.exec(w);return V&&V[N]};return o=h(o,/^url\((['"])?(.+)\1\)$/,2),o&&h(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Lt("div","leaflet-default-icon-path",document.body),h=Ct(o,"background-image")||Ct(o,"backgroundImage");if(document.body.removeChild(o),h=this._stripUrl(h),h)return h;var w=document.querySelector('link[href$="leaflet.css"]');return w?w.href.substring(0,w.href.length-11-1):""}}),Ll=br.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new Zi(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),$e(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Xt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var h=this._marker,w=h._map,A=this._marker.options.autoPanSpeed,N=this._marker.options.autoPanPadding,V=an(h._icon),$=w.getPixelBounds(),de=w.getPixelOrigin(),ge=Te($.min._subtract(de).add(N),$.max._subtract(de).subtract(N));if(!ge.contains(V)){var Ae=pe((Math.max(ge.max.x,V.x)-ge.max.x)/($.max.x-ge.max.x)-(Math.min(ge.min.x,V.x)-ge.min.x)/($.min.x-ge.min.x),(Math.max(ge.max.y,V.y)-ge.max.y)/($.max.y-ge.max.y)-(Math.min(ge.min.y,V.y)-ge.min.y)/($.min.y-ge.min.y)).multiplyBy(A);w.panBy(Ae,{animate:!1}),this._draggable._newPos._add(Ae),this._draggable._startPos._add(Ae),Ve(h._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=ie(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(ae(this._panRequest),this._panRequest=ie(this._adjustPan.bind(this,o)))},_onDrag:function(o){var h=this._marker,w=h._shadow,A=an(h._icon),N=h._map.layerPointToLatLng(A);w&&Ve(w,A),h._latlng=N,o.latlng=N,o.oldLatLng=this._oldLatLng,h.fire("move",o).fire("drag",o)},_onDragEnd:function(o){ae(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),Sr=Bn.extend({options:{icon:new Vo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,h){R(this,h),this._latlng=le(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var h=this._latlng;return this._latlng=le(o),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),w=o.icon.createIcon(this._icon),A=!1;w!==this._icon&&(this._icon&&this._removeIcon(),A=!0,o.title&&(w.title=o.title),w.tagName==="IMG"&&(w.alt=o.alt||"")),$e(w,h),o.keyboard&&(w.tabIndex="0",w.setAttribute("role","button")),this._icon=w,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&dt(w,"focus",this._panOnFocus,this);var N=o.icon.createShadow(this._shadow),V=!1;N!==this._shadow&&(this._removeShadow(),V=!0),N&&($e(N,h),N.alt=""),this._shadow=N,o.opacity<1&&this._updateOpacity(),A&&this.getPane().appendChild(this._icon),this._initInteraction(),N&&V&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&He(this._icon,"focus",this._panOnFocus,this),nn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&nn(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&Ve(this._icon,o),this._shadow&&Ve(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&($e(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ll)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ll(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&Et(this._icon,o),this._shadow&&Et(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var h=this.options.icon.options,w=h.iconSize?pe(h.iconSize):pe(0,0),A=h.iconAnchor?pe(h.iconAnchor):pe(0,0);o.panInside(this._latlng,{paddingTopLeft:A,paddingBottomRight:w.subtract(A)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Xh(o,h){return new Sr(o,h)}var ui=Bn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return R(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Xi=ui.extend({options:{fill:!0,radius:10},initialize:function(o,h){R(this,h),this._latlng=le(o),this._radius=this.options.radius},setLatLng:function(o){var h=this._latlng;return this._latlng=le(o),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var h=o&&o.radius||this._radius;return ui.prototype.setStyle.call(this,o),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,h=this._radiusY||o,w=this._clickTolerance(),A=[o+w,h+w];this._pxBounds=new he(this._point.subtract(A),this._point.add(A))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Pt(o,h){return new Xi(o,h)}var Vs=Xi.extend({initialize:function(o,h,w){if(typeof h=="number"&&(h=a({},w,{radius:h})),R(this,h),this._latlng=le(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new ze(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:ui.prototype.setStyle,_project:function(){var o=this._latlng.lng,h=this._latlng.lat,w=this._map,A=w.options.crs;if(A.distance===st.distance){var N=Math.PI/180,V=this._mRadius/st.R/N,$=w.project([h+V,o]),de=w.project([h-V,o]),ge=$.add(de).divideBy(2),Ae=w.unproject(ge).lat,Ge=Math.acos((Math.cos(V*N)-Math.sin(h*N)*Math.sin(Ae*N))/(Math.cos(h*N)*Math.cos(Ae*N)))/N;(isNaN(Ge)||Ge===0)&&(Ge=V/Math.cos(Math.PI/180*h)),this._point=ge.subtract(w.getPixelOrigin()),this._radius=isNaN(Ge)?0:ge.x-w.project([Ae,o-Ge]).x,this._radiusY=ge.y-$.y}else{var at=A.unproject(A.project(this._latlng).subtract([this._mRadius,0]));this._point=w.latLngToLayerPoint(this._latlng),this._radius=this._point.x-w.latLngToLayerPoint(at).x}this._updateBounds()}});function P(o,h,w){return new Vs(o,h,w)}var r=ui.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,h){R(this,h),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var h=1/0,w=null,A=hs,N,V,$=0,de=this._parts.length;$<de;$++)for(var ge=this._parts[$],Ae=1,Ge=ge.length;Ae<Ge;Ae++){N=ge[Ae-1],V=ge[Ae];var at=A(o,N,V,!0);at<h&&(h=at,w=A(o,N,V))}return w&&(w.distance=Math.sqrt(h)),w},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return kl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,h){return h=h||this._defaultShape(),o=le(o),h.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new ze,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return Cr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var h=[],w=Cr(o),A=0,N=o.length;A<N;A++)w?(h[A]=le(o[A]),this._bounds.extend(h[A])):h[A]=this._convertLatLngs(o[A]);return h},_project:function(){var o=new he;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),h=new ee(o,o);this._rawPxBounds&&(this._pxBounds=new he([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(o,h,w){var A=o[0]instanceof te,N=o.length,V,$;if(A){for($=[],V=0;V<N;V++)$[V]=this._map.latLngToLayerPoint(o[V]),w.extend($[V]);h.push($)}else for(V=0;V<N;V++)this._projectLatlngs(o[V],h,w)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,w,A,N,V,$,de,ge;for(w=0,N=0,V=this._rings.length;w<V;w++)for(ge=this._rings[w],A=0,$=ge.length;A<$-1;A++)de=Gi(ge[A],ge[A+1],o,A,!0),de&&(h[N]=h[N]||[],h[N].push(de[0]),(de[1]!==ge[A+1]||A===$-2)&&(h[N].push(de[1]),N++))}},_simplifyPoints:function(){for(var o=this._parts,h=this.options.smoothFactor,w=0,A=o.length;w<A;w++)o[w]=un(o[w],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,h){var w,A,N,V,$,de,ge=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(w=0,V=this._parts.length;w<V;w++)for(de=this._parts[w],A=0,$=de.length,N=$-1;A<$;N=A++)if(!(!h&&A===0)&&Uo(o,de[N],de[A])<=ge)return!0;return!1}});function s(o,h){return new r(o,h)}r._flat=Na;var l=r.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ea(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var h=r.prototype._convertLatLngs.call(this,o),w=h.length;return w>=2&&h[0]instanceof te&&h[0].equals(h[w-1])&&h.pop(),h},_setLatLngs:function(o){r.prototype._setLatLngs.call(this,o),Cr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Cr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,h=this.options.weight,w=new ee(h,h);if(o=new he(o.min.subtract(w),o.max.add(w)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var A=0,N=this._rings.length,V;A<N;A++)V=pu(this._rings[A],o,!0),V.length&&this._parts.push(V)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var h=!1,w,A,N,V,$,de,ge,Ae;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(V=0,ge=this._parts.length;V<ge;V++)for(w=this._parts[V],$=0,Ae=w.length,de=Ae-1;$<Ae;de=$++)A=w[$],N=w[de],A.y>o.y!=N.y>o.y&&o.x<(N.x-A.x)*(o.y-A.y)/(N.y-A.y)+A.x&&(h=!h);return h||r.prototype._containsPoint.call(this,o,!0)}});function u(o,h){return new l(o,h)}var d=li.extend({initialize:function(o,h){R(this,h),this._layers={},o&&this.addData(o)},addData:function(o){var h=k(o)?o:o.features,w,A,N;if(h){for(w=0,A=h.length;w<A;w++)N=h[w],(N.geometries||N.geometry||N.features||N.coordinates)&&this.addData(N);return this}var V=this.options;if(V.filter&&!V.filter(o))return this;var $=p(o,V);return $?($.feature=X(o),$.defaultOptions=$.options,this.resetStyle($),V.onEachFeature&&V.onEachFeature(o,$),this.addLayer($)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=a({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(h){this._setLayerStyle(h,o)},this)},_setLayerStyle:function(o,h){o.setStyle&&(typeof h=="function"&&(h=h(o.feature)),o.setStyle(h))}});function p(o,h){var w=o.type==="Feature"?o.geometry:o,A=w?w.coordinates:null,N=[],V=h&&h.pointToLayer,$=h&&h.coordsToLatLng||_,de,ge,Ae,Ge;if(!A&&!w)return null;switch(w.type){case"Point":return de=$(A),x(V,o,de,h);case"MultiPoint":for(Ae=0,Ge=A.length;Ae<Ge;Ae++)de=$(A[Ae]),N.push(x(V,o,de,h));return new li(N);case"LineString":case"MultiLineString":return ge=S(A,w.type==="LineString"?0:1,$),new r(ge,h);case"Polygon":case"MultiPolygon":return ge=S(A,w.type==="Polygon"?1:2,$),new l(ge,h);case"GeometryCollection":for(Ae=0,Ge=w.geometries.length;Ae<Ge;Ae++){var at=p({geometry:w.geometries[Ae],type:"Feature",properties:o.properties},h);at&&N.push(at)}return new li(N);case"FeatureCollection":for(Ae=0,Ge=w.features.length;Ae<Ge;Ae++){var kt=p(w.features[Ae],h);kt&&N.push(kt)}return new li(N);default:throw new Error("Invalid GeoJSON object.")}}function x(o,h,w,A){return o?o(h,w):new Sr(w,A&&A.markersInheritOptions&&A)}function _(o){return new te(o[1],o[0],o[2])}function S(o,h,w){for(var A=[],N=0,V=o.length,$;N<V;N++)$=h?S(o[N],h-1,w):(w||_)(o[N]),A.push($);return A}function E(o,h){return o=le(o),o.alt!==void 0?[T(o.lng,h),T(o.lat,h),T(o.alt,h)]:[T(o.lng,h),T(o.lat,h)]}function D(o,h,w,A){for(var N=[],V=0,$=o.length;V<$;V++)N.push(h?D(o[V],Cr(o[V])?0:h-1,w,A):E(o[V],A));return!h&&w&&N.length>0&&N.push(N[0].slice()),N}function U(o,h){return o.feature?a({},o.feature,{geometry:h}):X(h)}function X(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var J={toGeoJSON:function(o){return U(this,{type:"Point",coordinates:E(this.getLatLng(),o)})}};Sr.include(J),Vs.include(J),Xi.include(J),r.include({toGeoJSON:function(o){var h=!Cr(this._latlngs),w=D(this._latlngs,h?1:0,!1,o);return U(this,{type:(h?"Multi":"")+"LineString",coordinates:w})}}),l.include({toGeoJSON:function(o){var h=!Cr(this._latlngs),w=h&&!Cr(this._latlngs[0]),A=D(this._latlngs,w?2:h?1:0,!0,o);return h||(A=[A]),U(this,{type:(w?"Multi":"")+"Polygon",coordinates:A})}}),Mi.include({toMultiPoint:function(o){var h=[];return this.eachLayer(function(w){h.push(w.toGeoJSON(o).geometry.coordinates)}),U(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(o){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(o);var w=h==="GeometryCollection",A=[];return this.eachLayer(function(N){if(N.toGeoJSON){var V=N.toGeoJSON(o);if(w)A.push(V.geometry);else{var $=X(V);$.type==="FeatureCollection"?A.push.apply(A,$.features):A.push($)}}}),w?U(this,{geometries:A,type:"GeometryCollection"}):{type:"FeatureCollection",features:A}}});function ne(o,h){return new d(o,h)}var ce=ne,fe=Bn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,h,w){this._url=o,this._bounds=Le(h),R(this,w)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&($e(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){nn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&on(this._image),this},bringToBack:function(){return this._map&&_r(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=Le(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",h=this._image=o?this._url:Lt("img");if($e(h,"leaflet-image-layer"),this._zoomAnimated&&$e(h,"leaflet-zoom-animated"),this.options.className&&$e(h,this.options.className),h.onselectstart=b,h.onmousemove=b,h.onload=f(this.fire,this,"load"),h.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(o){var h=this._map.getZoomScale(o.zoom),w=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;Z(this._image,w,h)},_reset:function(){var o=this._image,h=new he(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),w=h.getSize();Ve(o,h.min),o.style.width=w.x+"px",o.style.height=w.y+"px"},_updateOpacity:function(){Et(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),Ie=function(o,h,w){return new fe(o,h,w)},Me=fe.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",h=this._image=o?this._url:Lt("video");if($e(h,"leaflet-image-layer"),this._zoomAnimated&&$e(h,"leaflet-zoom-animated"),this.options.className&&$e(h,this.options.className),h.onselectstart=b,h.onmousemove=b,h.onloadeddata=f(this.fire,this,"load"),o){for(var w=h.getElementsByTagName("source"),A=[],N=0;N<w.length;N++)A.push(w[N].src);this._url=w.length>0?A:[h.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var V=0;V<this._url.length;V++){var $=Lt("source");$.src=this._url[V],h.appendChild($)}}});function Ee(o,h,w){return new Me(o,h,w)}var Nt=fe.extend({_initImage:function(){var o=this._image=this._url;$e(o,"leaflet-image-layer"),this._zoomAnimated&&$e(o,"leaflet-zoom-animated"),this.options.className&&$e(o,this.options.className),o.onselectstart=b,o.onmousemove=b}});function yt(o,h,w){return new Nt(o,h,w)}var dn=Bn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,h){o&&(o instanceof te||k(o))?(this._latlng=le(o),R(this,h)):(R(this,o),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&Et(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&Et(this._container,1),this.bringToFront(),this.options.interactive&&($e(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(Et(this._container,0),this._removeTimeout=setTimeout(f(nn,void 0,this._container),200)):nn(this._container),this.options.interactive&&(Xt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=le(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&on(this._container),this},bringToBack:function(){return this._map&&_r(this._container),this},_prepareOpen:function(o){var h=this._source;if(!h._map)return!1;if(h instanceof li){h=null;var w=this._source._layers;for(var A in w)if(w[A]._map){h=w[A];break}if(!h)return!1;this._source=h}if(!o)if(h.getCenter)o=h.getCenter();else if(h.getLatLng)o=h.getLatLng();else if(h.getBounds)o=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")o.innerHTML=h;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),h=pe(this.options.offset),w=this._getAnchor();this._zoomAnimated?Ve(this._container,o.add(w)):h=h.add(o).add(w);var A=this._containerBottom=-h.y,N=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=A+"px",this._container.style.left=N+"px"}},_getAnchor:function(){return[0,0]}});Mt.include({_initOverlay:function(o,h,w,A){var N=h;return N instanceof o||(N=new o(A).setContent(h)),w&&N.setLatLng(w),N}}),Bn.include({_initOverlay:function(o,h,w,A){var N=w;return N instanceof o?(R(N,A),N._source=this):(N=h&&!A?h:new o(A,this),N.setContent(w)),N}});var ur=dn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,dn.prototype.openOn.call(this,o)},onAdd:function(o){dn.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ui||this._source.on("preclick",Ti))},onRemove:function(o){dn.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ui||this._source.off("preclick",Ti))},getEvents:function(){var o=dn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",h=this._container=Lt("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),w=this._wrapper=Lt("div",o+"-content-wrapper",h);if(this._contentNode=Lt("div",o+"-content",w),Wr(h),Ca(this._contentNode),dt(h,"contextmenu",Ti),this._tipContainer=Lt("div",o+"-tip-container",h),this._tip=Lt("div",o+"-tip",this._tipContainer),this.options.closeButton){var A=this._closeButton=Lt("a",o+"-close-button",h);A.setAttribute("role","button"),A.setAttribute("aria-label","Close popup"),A.href="#close",A.innerHTML='<span aria-hidden="true">&#215;</span>',dt(A,"click",function(N){Zn(N),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,h=o.style;h.width="",h.whiteSpace="nowrap";var w=o.offsetWidth;w=Math.min(w,this.options.maxWidth),w=Math.max(w,this.options.minWidth),h.width=w+1+"px",h.whiteSpace="",h.height="";var A=o.offsetHeight,N=this.options.maxHeight,V="leaflet-popup-scrolled";N&&A>N?(h.height=N+"px",$e(o,V)):Xt(o,V),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),w=this._getAnchor();Ve(this._container,h.add(w))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,h=parseInt(Ct(this._container,"marginBottom"),10)||0,w=this._container.offsetHeight+h,A=this._containerWidth,N=new ee(this._containerLeft,-w-this._containerBottom);N._add(an(this._container));var V=o.layerPointToContainerPoint(N),$=pe(this.options.autoPanPadding),de=pe(this.options.autoPanPaddingTopLeft||$),ge=pe(this.options.autoPanPaddingBottomRight||$),Ae=o.getSize(),Ge=0,at=0;V.x+A+ge.x>Ae.x&&(Ge=V.x+A-Ae.x+ge.x),V.x-Ge-de.x<0&&(Ge=V.x-de.x),V.y+w+ge.y>Ae.y&&(at=V.y+w-Ae.y+ge.y),V.y-at-de.y<0&&(at=V.y-de.y),(Ge||at)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([Ge,at]))}},_getAnchor:function(){return pe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),dr=function(o,h){return new ur(o,h)};Mt.mergeOptions({closePopupOnClick:!0}),Mt.include({openPopup:function(o,h,w){return this._initOverlay(ur,o,h,w).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),Bn.include({bindPopup:function(o,h){return this._popup=this._initOverlay(ur,this._popup,o,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof li||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){Zr(o);var h=o.layer||o.target;if(this._popup._source===h&&!(h instanceof ui)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=h,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var Ht=dn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){dn.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){dn.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=dn.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",h=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Lt("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var h,w,A=this._map,N=this._container,V=A.latLngToContainerPoint(A.getCenter()),$=A.layerPointToContainerPoint(o),de=this.options.direction,ge=N.offsetWidth,Ae=N.offsetHeight,Ge=pe(this.options.offset),at=this._getAnchor();de==="top"?(h=ge/2,w=Ae):de==="bottom"?(h=ge/2,w=0):de==="center"?(h=ge/2,w=Ae/2):de==="right"?(h=0,w=Ae/2):de==="left"?(h=ge,w=Ae/2):$.x<V.x?(de="right",h=0,w=Ae/2):(de="left",h=ge+(Ge.x+at.x)*2,w=Ae/2),o=o.subtract(pe(h,w,!0)).add(Ge).add(at),Xt(N,"leaflet-tooltip-right"),Xt(N,"leaflet-tooltip-left"),Xt(N,"leaflet-tooltip-top"),Xt(N,"leaflet-tooltip-bottom"),$e(N,"leaflet-tooltip-"+de),Ve(N,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&Et(this._container,o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(h)},_getAnchor:function(){return pe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Yn=function(o,h){return new Ht(o,h)};Mt.include({openTooltip:function(o,h,w){return this._initOverlay(Ht,o,h,w).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),Bn.include({bindTooltip:function(o,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ht,this._tooltip,o,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var h=o?"off":"on",w={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?w.add=this._openTooltip:(w.mouseover=this._openTooltip,w.mouseout=this.closeTooltip,w.click=this._openTooltip,this._map?this._addFocusListeners():w.add=this._addFocusListeners),this._tooltip.options.sticky&&(w.mousemove=this._moveTooltip),this[h](w),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof li||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&(dt(h,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),dt(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var h=o.latlng,w,A;this._tooltip.options.sticky&&o.originalEvent&&(w=this._map.mouseEventToContainerPoint(o.originalEvent),A=this._map.containerPointToLayerPoint(w),h=this._map.layerPointToLatLng(A)),this._tooltip.setLatLng(h)}});var hr=Us.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var h=o&&o.tagName==="DIV"?o:document.createElement("div"),w=this.options;if(w.html instanceof Element?(Ds(h),h.appendChild(w.html)):h.innerHTML=w.html!==!1?w.html:"",w.bgPos){var A=pe(w.bgPos);h.style.backgroundPosition=-A.x+"px "+-A.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function Hs(o){return new hr(o)}Us.Default=Vo;var di=Bn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){R(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),nn(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(on(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(_r(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=y(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof ee?o:new ee(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var h=this.getPane().children,w=-o(-1/0,1/0),A=0,N=h.length,V;A<N;A++)V=h[A].style.zIndex,h[A]!==this._container&&V&&(w=o(w,+V));isFinite(w)&&(this.options.zIndex=w+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ue.ielt9){Et(this._container,this.options.opacity);var o=+new Date,h=!1,w=!1;for(var A in this._tiles){var N=this._tiles[A];if(!(!N.current||!N.loaded)){var V=Math.min(1,(o-N.loaded)/200);Et(N.el,V),V<1?h=!0:(N.active?w=!0:this._onOpaqueTile(N),N.active=!0)}}w&&!this._noPrune&&this._pruneTiles(),h&&(ae(this._fadeFrame),this._fadeFrame=ie(this._updateOpacity,this))}},_onOpaqueTile:b,_initContainer:function(){this._container||(this._container=Lt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,h=this.options.maxZoom;if(o!==void 0){for(var w in this._levels)w=Number(w),this._levels[w].el.children.length||w===o?(this._levels[w].el.style.zIndex=h-Math.abs(o-w),this._onUpdateLevel(w)):(nn(this._levels[w].el),this._removeTilesAtZoom(w),this._onRemoveLevel(w),delete this._levels[w]);var A=this._levels[o],N=this._map;return A||(A=this._levels[o]={},A.el=Lt("div","leaflet-tile-container leaflet-zoom-animated",this._container),A.el.style.zIndex=h,A.origin=N.project(N.unproject(N.getPixelOrigin()),o).round(),A.zoom=o,this._setZoomTransform(A,N.getCenter(),N.getZoom()),b(A.el.offsetWidth),this._onCreateLevel(A)),this._level=A,A}},_onUpdateLevel:b,_onRemoveLevel:b,_onCreateLevel:b,_pruneTiles:function(){if(this._map){var o,h,w=this._map.getZoom();if(w>this.options.maxZoom||w<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)h=this._tiles[o],h.retain=h.current;for(o in this._tiles)if(h=this._tiles[o],h.current&&!h.active){var A=h.coords;this._retainParent(A.x,A.y,A.z,A.z-5)||this._retainChildren(A.x,A.y,A.z,A.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var h in this._tiles)this._tiles[h].coords.z===o&&this._removeTile(h)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)nn(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,h,w,A){var N=Math.floor(o/2),V=Math.floor(h/2),$=w-1,de=new ee(+N,+V);de.z=+$;var ge=this._tileCoordsToKey(de),Ae=this._tiles[ge];return Ae&&Ae.active?(Ae.retain=!0,!0):(Ae&&Ae.loaded&&(Ae.retain=!0),$>A?this._retainParent(N,V,$,A):!1)},_retainChildren:function(o,h,w,A){for(var N=2*o;N<2*o+2;N++)for(var V=2*h;V<2*h+2;V++){var $=new ee(N,V);$.z=w+1;var de=this._tileCoordsToKey($),ge=this._tiles[de];if(ge&&ge.active){ge.retain=!0;continue}else ge&&ge.loaded&&(ge.retain=!0);w+1<A&&this._retainChildren(N,V,w+1,A)}},_resetView:function(o){var h=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var h=this.options;return h.minNativeZoom!==void 0&&o<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<o?h.maxNativeZoom:o},_setView:function(o,h,w,A){var N=Math.round(h);this.options.maxZoom!==void 0&&N>this.options.maxZoom||this.options.minZoom!==void 0&&N<this.options.minZoom?N=void 0:N=this._clampZoom(N);var V=this.options.updateWhenZooming&&N!==this._tileZoom;(!A||V)&&(this._tileZoom=N,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),N!==void 0&&this._update(o),w||this._pruneTiles(),this._noPrune=!!w),this._setZoomTransforms(o,h)},_setZoomTransforms:function(o,h){for(var w in this._levels)this._setZoomTransform(this._levels[w],o,h)},_setZoomTransform:function(o,h,w){var A=this._map.getZoomScale(w,o.zoom),N=o.origin.multiplyBy(A).subtract(this._map._getNewPixelOrigin(h,w)).round();Ue.any3d?Z(o.el,N,A):Ve(o.el,N)},_resetGrid:function(){var o=this._map,h=o.options.crs,w=this._tileSize=this.getTileSize(),A=this._tileZoom,N=this._map.getPixelWorldBounds(this._tileZoom);N&&(this._globalTileRange=this._pxBoundsToTileRange(N)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,h.wrapLng[0]],A).x/w.x),Math.ceil(o.project([0,h.wrapLng[1]],A).x/w.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([h.wrapLat[0],0],A).y/w.x),Math.ceil(o.project([h.wrapLat[1],0],A).y/w.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var h=this._map,w=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),A=h.getZoomScale(w,this._tileZoom),N=h.project(o,this._tileZoom).floor(),V=h.getSize().divideBy(A*2);return new he(N.subtract(V),N.add(V))},_update:function(o){var h=this._map;if(h){var w=this._clampZoom(h.getZoom());if(o===void 0&&(o=h.getCenter()),this._tileZoom!==void 0){var A=this._getTiledPixelBounds(o),N=this._pxBoundsToTileRange(A),V=N.getCenter(),$=[],de=this.options.keepBuffer,ge=new he(N.getBottomLeft().subtract([de,-de]),N.getTopRight().add([de,-de]));if(!(isFinite(N.min.x)&&isFinite(N.min.y)&&isFinite(N.max.x)&&isFinite(N.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ae in this._tiles){var Ge=this._tiles[Ae].coords;(Ge.z!==this._tileZoom||!ge.contains(new ee(Ge.x,Ge.y)))&&(this._tiles[Ae].current=!1)}if(Math.abs(w-this._tileZoom)>1){this._setView(o,w);return}for(var at=N.min.y;at<=N.max.y;at++)for(var kt=N.min.x;kt<=N.max.x;kt++){var Ar=new ee(kt,at);if(Ar.z=this._tileZoom,!!this._isValidTile(Ar)){var nr=this._tiles[this._tileCoordsToKey(Ar)];nr?nr.current=!0:$.push(Ar)}}if($.sort(function(Lr,Ta){return Lr.distanceTo(V)-Ta.distanceTo(V)}),$.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var hi=document.createDocumentFragment();for(kt=0;kt<$.length;kt++)this._addTile($[kt],hi);this._level.el.appendChild(hi)}}}},_isValidTile:function(o){var h=this._map.options.crs;if(!h.infinite){var w=this._globalTileRange;if(!h.wrapLng&&(o.x<w.min.x||o.x>w.max.x)||!h.wrapLat&&(o.y<w.min.y||o.y>w.max.y))return!1}if(!this.options.bounds)return!0;var A=this._tileCoordsToBounds(o);return Le(this.options.bounds).overlaps(A)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var h=this._map,w=this.getTileSize(),A=o.scaleBy(w),N=A.add(w),V=h.unproject(A,o.z),$=h.unproject(N,o.z);return[V,$]},_tileCoordsToBounds:function(o){var h=this._tileCoordsToNwSe(o),w=new ze(h[0],h[1]);return this.options.noWrap||(w=this._map.wrapLatLngBounds(w)),w},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var h=o.split(":"),w=new ee(+h[0],+h[1]);return w.z=+h[2],w},_removeTile:function(o){var h=this._tiles[o];h&&(nn(h.el),delete this._tiles[o],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){$e(o,"leaflet-tile");var h=this.getTileSize();o.style.width=h.x+"px",o.style.height=h.y+"px",o.onselectstart=b,o.onmousemove=b,Ue.ielt9&&this.options.opacity<1&&Et(o,this.options.opacity)},_addTile:function(o,h){var w=this._getTilePos(o),A=this._tileCoordsToKey(o),N=this.createTile(this._wrapCoords(o),f(this._tileReady,this,o));this._initTile(N),this.createTile.length<2&&ie(f(this._tileReady,this,o,null,N)),Ve(N,w),this._tiles[A]={el:N,coords:o,current:!0},h.appendChild(N),this.fire("tileloadstart",{tile:N,coords:o})},_tileReady:function(o,h,w){h&&this.fire("tileerror",{error:h,tile:w,coords:o});var A=this._tileCoordsToKey(o);w=this._tiles[A],w&&(w.loaded=+new Date,this._map._fadeAnimated?(Et(w.el,0),ae(this._fadeFrame),this._fadeFrame=ie(this._updateOpacity,this)):(w.active=!0,this._pruneTiles()),h||($e(w.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:w.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ue.ielt9||!this._map._fadeAnimated?ie(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var h=new ee(this._wrapX?C(o.x,this._wrapX):o.x,this._wrapY?C(o.y,this._wrapY):o.y);return h.z=o.z,h},_pxBoundsToTileRange:function(o){var h=this.getTileSize();return new he(o.min.unscaleBy(h).floor(),o.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function qh(o){return new di(o)}var Ws=di.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,h){this._url=o,h=R(this,h),h.detectRetina&&Ue.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,h){return this._url===o&&h===void 0&&(h=!0),this._url=o,h||this.redraw(),this},createTile:function(o,h){var w=document.createElement("img");return dt(w,"load",f(this._tileOnLoad,this,h,w)),dt(w,"error",f(this._tileOnError,this,h,w)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(w.referrerPolicy=this.options.referrerPolicy),w.alt="",w.src=this.getTileUrl(o),w},getTileUrl:function(o){var h={r:Ue.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var w=this._globalTileRange.max.y-o.y;this.options.tms&&(h.y=w),h["-y"]=w}return O(this._url,a(h,this.options))},_tileOnLoad:function(o,h){Ue.ielt9?setTimeout(f(o,this,null,h),0):o(null,h)},_tileOnError:function(o,h,w){var A=this.options.errorTileUrl;A&&h.getAttribute("src")!==A&&(h.src=A),o(w,h)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,h=this.options.maxZoom,w=this.options.zoomReverse,A=this.options.zoomOffset;return w&&(o=h-o),o+A},_getSubdomain:function(o){var h=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var o,h;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(h=this._tiles[o].el,h.onload=b,h.onerror=b,!h.complete)){h.src=K;var w=this._tiles[o].coords;nn(h),delete this._tiles[o],this.fire("tileabort",{tile:h,coords:w})}},_removeTile:function(o){var h=this._tiles[o];if(h)return h.el.setAttribute("src",K),di.prototype._removeTile.call(this,o)},_tileReady:function(o,h,w){if(!(!this._map||w&&w.getAttribute("src")===K))return di.prototype._tileReady.call(this,o,h,w)}});function gm(o,h){return new Ws(o,h)}var xm=Ws.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,h){this._url=o;var w=a({},this.defaultWmsParams);for(var A in h)A in this.options||(w[A]=h[A]);h=R(this,h);var N=h.detectRetina&&Ue.retina?2:1,V=this.getTileSize();w.width=V.x*N,w.height=V.y*N,this.wmsParams=w},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,Ws.prototype.onAdd.call(this,o)},getTileUrl:function(o){var h=this._tileCoordsToNwSe(o),w=this._crs,A=Te(w.project(h[0]),w.project(h[1])),N=A.min,V=A.max,$=(this._wmsVersion>=1.3&&this._crs===zs?[N.y,N.x,V.y,V.x]:[N.x,N.y,V.x,V.y]).join(","),de=Ws.prototype.getTileUrl.call(this,o);return de+j(this.wmsParams,de,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+$},setParams:function(o,h){return a(this.wmsParams,o),h||this.redraw(),this}});function OC(o,h){return new xm(o,h)}Ws.WMS=xm,gm.wms=OC;var fs=Bn.extend({options:{padding:.1},initialize:function(o){R(this,o),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),$e(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,h){var w=this._map.getZoomScale(h,this._zoom),A=this._map.getSize().multiplyBy(.5+this.options.padding),N=this._map.project(this._center,h),V=A.multiplyBy(-w).add(N).subtract(this._map._getNewPixelOrigin(o,h));Ue.any3d?Z(this._container,V,w):Ve(this._container,V)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,h=this._map.getSize(),w=this._map.containerPointToLayerPoint(h.multiplyBy(-o)).round();this._bounds=new he(w,w.add(h.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ym=fs.extend({options:{tolerance:0},getEvents:function(){var o=fs.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){fs.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");dt(o,"mousemove",this._onMouseMove,this),dt(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),dt(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){ae(this._redrawRequest),delete this._ctx,nn(this._container),He(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var h in this._layers)o=this._layers[h],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fs.prototype._update.call(this);var o=this._bounds,h=this._container,w=o.getSize(),A=Ue.retina?2:1;Ve(h,o.min),h.width=A*w.x,h.height=A*w.y,h.style.width=w.x+"px",h.style.height=w.y+"px",Ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){fs.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[v(o)]=o;var h=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var h=o._order,w=h.next,A=h.prev;w?w.prev=A:this._drawLast=A,A?A.next=w:this._drawFirst=w,delete o._order,delete this._layers[v(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var h=o.options.dashArray.split(/[, ]+/),w=[],A,N;for(N=0;N<h.length;N++){if(A=Number(h[N]),isNaN(A))return;w.push(A)}o.options._dashArray=w}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||ie(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var h=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new he,this._redrawBounds.extend(o._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(o._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var h=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,h=this._redrawBounds;if(this._ctx.save(),h){var w=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,w.x,w.y),this._ctx.clip()}this._drawing=!0;for(var A=this._drawFirst;A;A=A.next)o=A.layer,(!h||o._pxBounds&&o._pxBounds.intersects(h))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,h){if(this._drawing){var w,A,N,V,$=o._parts,de=$.length,ge=this._ctx;if(de){for(ge.beginPath(),w=0;w<de;w++){for(A=0,N=$[w].length;A<N;A++)V=$[w][A],ge[A?"lineTo":"moveTo"](V.x,V.y);h&&ge.closePath()}this._fillStroke(ge,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var h=o._point,w=this._ctx,A=Math.max(Math.round(o._radius),1),N=(Math.max(Math.round(o._radiusY),1)||A)/A;N!==1&&(w.save(),w.scale(1,N)),w.beginPath(),w.arc(h.x,h.y/N,A,0,Math.PI*2,!1),N!==1&&w.restore(),this._fillStroke(w,o)}},_fillStroke:function(o,h){var w=h.options;w.fill&&(o.globalAlpha=w.fillOpacity,o.fillStyle=w.fillColor||w.color,o.fill(w.fillRule||"evenodd")),w.stroke&&w.weight!==0&&(o.setLineDash&&o.setLineDash(h.options&&h.options._dashArray||[]),o.globalAlpha=w.opacity,o.lineWidth=w.weight,o.strokeStyle=w.color,o.lineCap=w.lineCap,o.lineJoin=w.lineJoin,o.stroke())},_onClick:function(o){for(var h=this._map.mouseEventToLayerPoint(o),w,A,N=this._drawFirst;N;N=N.next)w=N.layer,w.options.interactive&&w._containsPoint(h)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(w))&&(A=w);this._fireEvent(A?[A]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,h)}},_handleMouseOut:function(o){var h=this._hoveredLayer;h&&(Xt(this._container,"leaflet-interactive"),this._fireEvent([h],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,h){if(!this._mouseHoverThrottled){for(var w,A,N=this._drawFirst;N;N=N.next)w=N.layer,w.options.interactive&&w._containsPoint(h)&&(A=w);A!==this._hoveredLayer&&(this._handleMouseOut(o),A&&($e(this._container,"leaflet-interactive"),this._fireEvent([A],o,"mouseover"),this._hoveredLayer=A)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,h,w){this._map._fireDOMEvent(h,w||h.type,o)},_bringToFront:function(o){var h=o._order;if(h){var w=h.next,A=h.prev;if(w)w.prev=A;else return;A?A.next=w:w&&(this._drawFirst=w),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(o)}},_bringToBack:function(o){var h=o._order;if(h){var w=h.next,A=h.prev;if(A)A.next=w;else return;w?w.prev=A:A&&(this._drawLast=A),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(o)}}});function wm(o){return Ue.canvas?new ym(o):null}var Pl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),LC={_initContainer:function(){this._container=Lt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(fs.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var h=o._container=Pl("shape");$e(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",o._path=Pl("path"),h.appendChild(o._path),this._updateStyle(o),this._layers[v(o)]=o},_addPath:function(o){var h=o._container;this._container.appendChild(h),o.options.interactive&&o.addInteractiveTarget(h)},_removePath:function(o){var h=o._container;nn(h),o.removeInteractiveTarget(h),delete this._layers[v(o)]},_updateStyle:function(o){var h=o._stroke,w=o._fill,A=o.options,N=o._container;N.stroked=!!A.stroke,N.filled=!!A.fill,A.stroke?(h||(h=o._stroke=Pl("stroke")),N.appendChild(h),h.weight=A.weight+"px",h.color=A.color,h.opacity=A.opacity,A.dashArray?h.dashStyle=k(A.dashArray)?A.dashArray.join(" "):A.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=A.lineCap.replace("butt","flat"),h.joinstyle=A.lineJoin):h&&(N.removeChild(h),o._stroke=null),A.fill?(w||(w=o._fill=Pl("fill")),N.appendChild(w),w.color=A.fillColor||A.color,w.opacity=A.fillOpacity):w&&(N.removeChild(w),o._fill=null)},_updateCircle:function(o){var h=o._point.round(),w=Math.round(o._radius),A=Math.round(o._radiusY||w);this._setPath(o,o._empty()?"M0 0":"AL "+h.x+","+h.y+" "+w+","+A+" 0,"+65535*360)},_setPath:function(o,h){o._path.v=h},_bringToFront:function(o){on(o._container)},_bringToBack:function(o){_r(o._container)}},gu=Ue.vml?Pl:Kt,Dl=fs.extend({_initContainer:function(){this._container=gu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=gu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){nn(this._container),He(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fs.prototype._update.call(this);var o=this._bounds,h=o.getSize(),w=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,w.setAttribute("width",h.x),w.setAttribute("height",h.y)),Ve(w,o.min),w.setAttribute("viewBox",[o.min.x,o.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(o){var h=o._path=gu("path");o.options.className&&$e(h,o.options.className),o.options.interactive&&$e(h,"leaflet-interactive"),this._updateStyle(o),this._layers[v(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){nn(o._path),o.removeInteractiveTarget(o._path),delete this._layers[v(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var h=o._path,w=o.options;h&&(w.stroke?(h.setAttribute("stroke",w.color),h.setAttribute("stroke-opacity",w.opacity),h.setAttribute("stroke-width",w.weight),h.setAttribute("stroke-linecap",w.lineCap),h.setAttribute("stroke-linejoin",w.lineJoin),w.dashArray?h.setAttribute("stroke-dasharray",w.dashArray):h.removeAttribute("stroke-dasharray"),w.dashOffset?h.setAttribute("stroke-dashoffset",w.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),w.fill?(h.setAttribute("fill",w.fillColor||w.color),h.setAttribute("fill-opacity",w.fillOpacity),h.setAttribute("fill-rule",w.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(o,h){this._setPath(o,Pn(o._parts,h))},_updateCircle:function(o){var h=o._point,w=Math.max(Math.round(o._radius),1),A=Math.max(Math.round(o._radiusY),1)||w,N="a"+w+","+A+" 0 1,0 ",V=o._empty()?"M0 0":"M"+(h.x-w)+","+h.y+N+w*2+",0 "+N+-w*2+",0 ";this._setPath(o,V)},_setPath:function(o,h){o._path.setAttribute("d",h)},_bringToFront:function(o){on(o._path)},_bringToBack:function(o){_r(o._path)}});Ue.vml&&Dl.include(LC);function vm(o){return Ue.svg||Ue.vml?new Dl(o):null}Mt.include({getRenderer:function(o){var h=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var h=this._paneRenderers[o];return h===void 0&&(h=this._createRenderer({pane:o}),this._paneRenderers[o]=h),h},_createRenderer:function(o){return this.options.preferCanvas&&wm(o)||vm(o)}});var _m=l.extend({initialize:function(o,h){l.prototype.initialize.call(this,this._boundsToLatLngs(o),h)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=Le(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function PC(o,h){return new _m(o,h)}Dl.create=gu,Dl.pointsToPath=Pn,d.geometryToLayer=p,d.coordsToLatLng=_,d.coordsToLatLngs=S,d.latLngToCoords=E,d.latLngsToCoords=D,d.getFeature=U,d.asFeature=X,Mt.mergeOptions({boxZoom:!0});var bm=br.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){dt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){He(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){nn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),er(),it(),this._startPoint=this._map.mouseEventToContainerPoint(o),dt(document,{contextmenu:Zr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Lt("div","leaflet-zoom-box",this._container),$e(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var h=new he(this._point,this._startPoint),w=h.getSize();Ve(this._box,h.min),this._box.style.width=w.x+"px",this._box.style.height=w.y+"px"},_finish:function(){this._moved&&(nn(this._box),Xt(this._container,"leaflet-crosshair")),Do(),rn(),He(document,{contextmenu:Zr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var h=new ze(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Mt.addInitHook("addHandler","boxZoom",bm),Mt.mergeOptions({doubleClickZoom:!0});var Cm=br.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var h=this._map,w=h.getZoom(),A=h.options.zoomDelta,N=o.originalEvent.shiftKey?w-A:w+A;h.options.doubleClickZoom==="center"?h.setZoom(N):h.setZoomAround(o.containerPoint,N)}});Mt.addInitHook("addHandler","doubleClickZoom",Cm),Mt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Sm=br.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new Zi(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}$e(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Xt(this._map._container,"leaflet-grab"),Xt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=Le(this._map.options.maxBounds);this._offsetLimit=Te(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var h=this._lastTime=+new Date,w=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(w),this._times.push(h),this._prunePositions(h)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,h){return o-(o-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;o.x<h.min.x&&(o.x=this._viscousLimit(o.x,h.min.x)),o.y<h.min.y&&(o.y=this._viscousLimit(o.y,h.min.y)),o.x>h.max.x&&(o.x=this._viscousLimit(o.x,h.max.x)),o.y>h.max.y&&(o.y=this._viscousLimit(o.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,h=Math.round(o/2),w=this._initialWorldOffset,A=this._draggable._newPos.x,N=(A-h+w)%o+h-w,V=(A+h+w)%o-h-w,$=Math.abs(N+w)<Math.abs(V+w)?N:V;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=$},_onDragEnd:function(o){var h=this._map,w=h.options,A=!w.inertia||o.noInertia||this._times.length<2;if(h.fire("dragend",o),A)h.fire("moveend");else{this._prunePositions(+new Date);var N=this._lastPos.subtract(this._positions[0]),V=(this._lastTime-this._times[0])/1e3,$=w.easeLinearity,de=N.multiplyBy($/V),ge=de.distanceTo([0,0]),Ae=Math.min(w.inertiaMaxSpeed,ge),Ge=de.multiplyBy(Ae/ge),at=Ae/(w.inertiaDeceleration*$),kt=Ge.multiplyBy(-at/2).round();!kt.x&&!kt.y?h.fire("moveend"):(kt=h._limitOffset(kt,h.options.maxBounds),ie(function(){h.panBy(kt,{duration:at,easeLinearity:$,noMoveStart:!0,animate:!0})}))}}});Mt.addInitHook("addHandler","dragging",Sm),Mt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Am=br.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),dt(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),He(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,h=document.documentElement,w=o.scrollTop||h.scrollTop,A=o.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(A,w)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var h=this._panKeys={},w=this.keyCodes,A,N;for(A=0,N=w.left.length;A<N;A++)h[w.left[A]]=[-1*o,0];for(A=0,N=w.right.length;A<N;A++)h[w.right[A]]=[o,0];for(A=0,N=w.down.length;A<N;A++)h[w.down[A]]=[0,o];for(A=0,N=w.up.length;A<N;A++)h[w.up[A]]=[0,-1*o]},_setZoomDelta:function(o){var h=this._zoomKeys={},w=this.keyCodes,A,N;for(A=0,N=w.zoomIn.length;A<N;A++)h[w.zoomIn[A]]=o;for(A=0,N=w.zoomOut.length;A<N;A++)h[w.zoomOut[A]]=-o},_addHooks:function(){dt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){He(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var h=o.keyCode,w=this._map,A;if(h in this._panKeys){if(!w._panAnim||!w._panAnim._inProgress)if(A=this._panKeys[h],o.shiftKey&&(A=pe(A).multiplyBy(3)),w.options.maxBounds&&(A=w._limitOffset(pe(A),w.options.maxBounds)),w.options.worldCopyJump){var N=w.wrapLatLng(w.unproject(w.project(w.getCenter()).add(A)));w.panTo(N)}else w.panBy(A)}else if(h in this._zoomKeys)w.setZoom(w.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&w._popup&&w._popup.options.closeOnEscapeKey)w.closePopup();else return;Zr(o)}}});Mt.addInitHook("addHandler","keyboard",Am),Mt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Em=br.extend({addHooks:function(){dt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){He(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var h=Fs(o),w=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var A=Math.max(w-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),A),Zr(o)},_performZoom:function(){var o=this._map,h=o.getZoom(),w=this._map.options.zoomSnap||0;o._stop();var A=this._delta/(this._map.options.wheelPxPerZoomLevel*4),N=4*Math.log(2/(1+Math.exp(-Math.abs(A))))/Math.LN2,V=w?Math.ceil(N/w)*w:N,$=o._limitZoom(h+(this._delta>0?V:-V))-h;this._delta=0,this._startTime=null,$&&(o.options.scrollWheelZoom==="center"?o.setZoom(h+$):o.setZoomAround(this._lastMousePos,h+$))}});Mt.addInitHook("addHandler","scrollWheelZoom",Em);var DC=600;Mt.mergeOptions({tapHold:Ue.touchNative&&Ue.safari&&Ue.mobile,tapTolerance:15});var Nm=br.extend({addHooks:function(){dt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){He(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var h=o.touches[0];this._startPos=this._newPos=new ee(h.clientX,h.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(dt(document,"touchend",Zn),dt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),DC),dt(document,"touchend touchcancel contextmenu",this._cancel,this),dt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){He(document,"touchend",Zn),He(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),He(document,"touchend touchcancel contextmenu",this._cancel,this),He(document,"touchmove",this._onMove,this)},_onMove:function(o){var h=o.touches[0];this._newPos=new ee(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,h){var w=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});w._simulated=!0,h.target.dispatchEvent(w)}});Mt.addInitHook("addHandler","tapHold",Nm),Mt.mergeOptions({touchZoom:Ue.touch,bounceAtZoomLimits:!0});var Tm=br.extend({addHooks:function(){$e(this._map._container,"leaflet-touch-zoom"),dt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Xt(this._map._container,"leaflet-touch-zoom"),He(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var h=this._map;if(!(!o.touches||o.touches.length!==2||h._animatingZoom||this._zooming)){var w=h.mouseEventToContainerPoint(o.touches[0]),A=h.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(w.add(A)._divideBy(2))),this._startDist=w.distanceTo(A),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),dt(document,"touchmove",this._onTouchMove,this),dt(document,"touchend touchcancel",this._onTouchEnd,this),Zn(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var h=this._map,w=h.mouseEventToContainerPoint(o.touches[0]),A=h.mouseEventToContainerPoint(o.touches[1]),N=w.distanceTo(A)/this._startDist;if(this._zoom=h.getScaleZoom(N,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&N<1||this._zoom>h.getMaxZoom()&&N>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,N===1)return}else{var V=w._add(A)._divideBy(2)._subtract(this._centerPoint);if(N===1&&V.x===0&&V.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(V),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),ae(this._animRequest);var $=f(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ie($,this,!0),Zn(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ae(this._animRequest),He(document,"touchmove",this._onTouchMove,this),He(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Mt.addInitHook("addHandler","touchZoom",Tm),Mt.BoxZoom=bm,Mt.DoubleClickZoom=Cm,Mt.Drag=Sm,Mt.Keyboard=Am,Mt.ScrollWheelZoom=Em,Mt.TapHold=Nm,Mt.TouchZoom=Tm,n.Bounds=he,n.Browser=Ue,n.CRS=De,n.Canvas=ym,n.Circle=Vs,n.CircleMarker=Xi,n.Class=Ne,n.Control=Gr,n.DivIcon=hr,n.DivOverlay=dn,n.DomEvent=cr,n.DomUtil=jn,n.Draggable=Zi,n.Evented=ve,n.FeatureGroup=li,n.GeoJSON=d,n.GridLayer=di,n.Handler=br,n.Icon=Us,n.ImageOverlay=fe,n.LatLng=te,n.LatLngBounds=ze,n.Layer=Bn,n.LayerGroup=Mi,n.LineUtil=mu,n.Map=Mt,n.Marker=Sr,n.Mixin=hu,n.Path=ui,n.Point=ee,n.PolyUtil=Il,n.Polygon=l,n.Polyline=r,n.Popup=ur,n.PosAnimation=Tl,n.Projection=Rl,n.Rectangle=_m,n.Renderer=fs,n.SVG=Dl,n.SVGOverlay=Nt,n.TileLayer=Ws,n.Tooltip=Ht,n.Transformation=bt,n.Util=we,n.VideoOverlay=Me,n.bind=f,n.bounds=Te,n.canvas=wm,n.circle=P,n.circleMarker=Pt,n.control=zo,n.divIcon=Hs,n.extend=a,n.featureGroup=ci,n.geoJSON=ne,n.geoJson=ce,n.gridLayer=qh,n.icon=Ol,n.imageOverlay=Ie,n.latLng=le,n.latLngBounds=Le,n.layerGroup=Or,n.map=uu,n.marker=Xh,n.point=pe,n.polygon=u,n.polyline=s,n.popup=dr,n.rectangle=PC,n.setOptions=R,n.stamp=v,n.svg=vm,n.svgOverlay=yt,n.tileLayer=gm,n.tooltip=Yn,n.transformation=In,n.version=i,n.videoOverlay=Ee;var jC=window.L;n.noConflict=function(){return window.L=jC,this},window.L=n})})(gp,gp.exports);var _l=gp.exports;const Mo=Qy(_l);function jh(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function Bh(e,t){return t==null?function(i,a){const c=B.useRef();return c.current||(c.current=e(i,a)),c}:function(i,a){const c=B.useRef();c.current||(c.current=e(i,a));const f=B.useRef(i),{instance:g}=c.current;return B.useEffect(function(){f.current!==i&&(t(g,i,f.current),f.current=i)},[g,i,a]),c}}function CC(e,t){B.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var c;(c=t.layerContainer)==null||c.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function SC(e){return function(n){const i=Ph(),a=e(Dh(n,i),i);return yC(i.map,n.attribution),cm(a.current,n.eventHandlers),CC(a.current,i),a}}function A6(e,t){const n=B.useRef();B.useEffect(function(){if(t.pathOptions!==n.current){const a=t.pathOptions??{};e.instance.setStyle(a),n.current=a}},[e,t])}function E6(e){return function(n){const i=Ph(),a=e(Dh(n,i),i);return cm(a.current,n.eventHandlers),CC(a.current,i),A6(a.current,n),a}}function N6(e,t){const n=Bh(e,t),i=SC(n);return bC(i)}function T6(e,t){const n=Bh(e),i=S6(n,t);return b6(i)}function I6(e,t){const n=Bh(e,t),i=E6(n);return bC(i)}function k6(e,t){const n=Bh(e,t),i=SC(n);return C6(i)}function M6(e,t,n){const{opacity:i,zIndex:a}=t;i!=null&&i!==n.opacity&&e.setOpacity(i),a!=null&&a!==n.zIndex&&e.setZIndex(a)}function Fh(){return Ph().map}function R6(e){const t=Fh();return B.useEffect(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}function xp(){return xp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},xp.apply(this,arguments)}function O6({bounds:e,boundsOptions:t,center:n,children:i,className:a,id:c,placeholder:f,style:g,whenReady:v,zoom:y,...C},b){const[T]=B.useState({className:a,id:c,style:g}),[I,z]=B.useState(null);B.useImperativeHandle(b,()=>(I==null?void 0:I.map)??null,[I]);const R=B.useCallback(F=>{if(F!==null&&I===null){const O=new _l.Map(F,C);n!=null&&y!=null?O.setView(n,y):e!=null&&O.fitBounds(e,t),v!=null&&O.whenReady(v),z(_6(O))}},[]);B.useEffect(()=>()=>{I==null||I.map.remove()},[I]);const j=I?la.createElement(_C,{value:I},i):f??null;return la.createElement("div",xp({},T,{ref:R}),j)}const AC=B.forwardRef(O6),ud=N6(function({position:t,...n},i){const a=new _l.Marker(t,n);return jh(a,wC(i,{overlayContainer:a}))},function(t,n,i){n.position!==i.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),L6=I6(function({positions:t,...n},i){const a=new _l.Polyline(t,n);return jh(a,wC(i,{overlayContainer:a}))},function(t,n,i){n.positions!==i.positions&&t.setLatLngs(n.positions)}),Zf=T6(function(t,n){const i=new _l.Popup(t,n.overlayContainer);return jh(i,n)},function(t,n,{position:i},a){B.useEffect(function(){const{instance:f}=t;function g(y){y.popup===f&&(f.update(),a(!0))}function v(y){y.popup===f&&a(!1)}return n.map.on({popupopen:g,popupclose:v}),n.overlayContainer==null?(i!=null&&f.setLatLng(i),f.openOn(n.map)):n.overlayContainer.bindPopup(f),function(){var C;n.map.off({popupopen:g,popupclose:v}),(C=n.overlayContainer)==null||C.unbindPopup(),n.map.removeLayer(f)}},[t,n,a,i])}),EC=k6(function({url:t,...n},i){const a=new _l.TileLayer(t,Dh(n,i));return jh(a,i)},function(t,n,i){M6(t,n,i);const{url:a}=n;a!=null&&a!==i.url&&t.setUrl(a)});delete Mo.Icon.Default.prototype._getIconUrl;Mo.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const um=e=>new Mo.DivIcon({className:"custom-icon",html:`<div style="background-color: ${e}; width: 24px; height: 24px; border-radius: 50%; border: 2px solid white; box-shadow: 0 4px 6px rgba(0,0,0,0.1);"></div>`,iconSize:[24,24],iconAnchor:[12,12]}),Gf=new Map,P6=(e,t)=>{const n=Number(e);if(!Number.isFinite(n)||n<=0)return um(t);const i=`${n}:${t}`;if(Gf.has(i))return Gf.get(i);const a=new Mo.DivIcon({className:"stop-number-icon",html:`<div style="background-color: ${t}; width: 28px; height: 28px; border-radius: 9999px; border: 2px solid white; box-shadow: 0 6px 10px rgba(0,0,0,0.25); display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 14px; color: white; line-height: 1;">${n}</div>`,iconSize:[28,28],iconAnchor:[14,14]});return Gf.set(i,a),a},D6=new Mo.DivIcon({className:"truck-icon",html:`<div style="background-color: #0052cc; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 2px solid white; box-shadow: 0 4px 6px rgba(0,0,0,0.2);">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle></svg>
    </div>`,iconSize:[32,32],iconAnchor:[16,16]}),j6=um("#8b5cf6");function B6({center:e}){const t=Fh();return B.useEffect(()=>{e&&t.setView(e,t.getZoom())},[e,t]),null}function F6({points:e}){const t=Fh();return B.useEffect(()=>{if(!t)return;const n=Array.isArray(e)?e.filter(Boolean):[];if(n.length!==0)try{const i=Mo.latLngBounds(n);t.fitBounds(i,{padding:[30,30]})}catch{}},[e,t]),null}function dm({shipments:e,routeGeometry:t,currentLocation:n,originLocation:i,showStopNumbers:a=!1,currentLocationLabel:c="You are here"}){const g=n?[n.lat,n.lon]:i?[i.lat,i.lon]:[44.4268,26.1025],[v,y]=B.useState([]);B.useEffect(()=>{if(t&&t.coordinates){const I=t.coordinates.map(z=>[z[1],z[0]]);y(I)}},[t]);const C=(e||[]).map(I=>{var O,k,W,K;const z=(I==null?void 0:I.latitude)??((k=(O=I==null?void 0:I.raw_data)==null?void 0:O.recipientLocation)==null?void 0:k.latitude),R=(I==null?void 0:I.longitude)??((K=(W=I==null?void 0:I.raw_data)==null?void 0:W.recipientLocation)==null?void 0:K.longitude),j=Number(z),F=Number(R);return!Number.isFinite(j)||!Number.isFinite(F)||Math.abs(j)<1e-4&&Math.abs(F)<1e-4?null:[j,F]}).filter(Boolean),b=new Map;a&&(Array.isArray(e)?e:[]).forEach((I,z)=>{const R=String((I==null?void 0:I.awb)||"").toUpperCase();R&&b.set(R,z+1)});const T=[...n?[[n.lat,n.lon]]:[],...i?[[i.lat,i.lon]]:[],...C,...v];return m.jsxs("div",{className:"h-[400px] w-full rounded-3xl overflow-hidden shadow-inner border border-white/20 relative z-0",children:[m.jsxs(AC,{center:g,zoom:13,style:{height:"100%",width:"100%"},zoomControl:!1,children:[m.jsx(EC,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors  <a href="https://carto.com/attributions">CARTO</a>'}),m.jsx(B6,{center:g}),m.jsx(F6,{points:T}),n&&m.jsx(ud,{position:[n.lat,n.lon],icon:D6,children:m.jsx(Zf,{children:m.jsx("div",{className:"font-sans font-bold text-brand-600",children:c||"You are here"})})}),i&&m.jsx(ud,{position:[i.lat,i.lon],icon:j6,children:m.jsx(Zf,{children:m.jsx("div",{className:"font-sans font-bold text-slate-800",children:i.label||"Warehouse"})})}),e.map(I=>{var W,K,Y,H;const z=Number((I==null?void 0:I.latitude)??((K=(W=I==null?void 0:I.raw_data)==null?void 0:W.recipientLocation)==null?void 0:K.latitude)),R=Number((I==null?void 0:I.longitude)??((H=(Y=I==null?void 0:I.raw_data)==null?void 0:Y.recipientLocation)==null?void 0:H.longitude));if(!Number.isFinite(z)||!Number.isFinite(R)||Math.abs(z)<1e-4&&Math.abs(R)<1e-4)return null;const j=String((I==null?void 0:I.awb)||"").toUpperCase(),F=I.status==="Delivered",O=F?"#22c55e":"#f59e0b",k=a?b.get(j):null;return m.jsx(ud,{position:[z,R],icon:a?P6(k,O):um(O),children:m.jsx(Zf,{className:"glass-popup",children:m.jsxs("div",{className:"p-1 min-w-[150px]",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:`w-2 h-2 rounded-full ${F?"bg-green-500":"bg-amber-500"}`}),m.jsxs("span",{className:"text-xs font-black uppercase text-slate-500 tracking-wider",children:[a&&k?`Stop ${k}  `:"",j]})]}),m.jsx("p",{className:"font-bold text-slate-800 text-sm mb-1",children:I.recipient_name}),m.jsx("p",{className:"text-xs text-slate-500 truncate",children:I.delivery_address})]})})},j||I.awb)}),v.length>0&&m.jsx(L6,{positions:v,color:"#4c9aff",weight:4,opacity:.8,dashArray:"10, 10"})]}),m.jsx("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2 z-[1000]",children:m.jsx("button",{className:"glass-strong p-3 rounded-xl text-white hover:text-brand-400 hover:border-brand-500/50 transition-all shadow-lg active:scale-95",onClick:I=>{I.stopPropagation()},children:m.jsx($_,{size:20})})})]})}const Qr=(e,t)=>{const n=y=>y*Math.PI/180,a=n(Number(t.lat)-Number(e.lat)),c=n(Number(t.lon)-Number(e.lon)),f=n(Number(e.lat)),g=n(Number(t.lat)),v=Math.sin(a/2)**2+Math.cos(f)*Math.cos(g)*Math.sin(c/2)**2;return 2*6371*Math.asin(Math.sqrt(v))},z6=(e,t,n)=>{const i=Array.isArray(t)?t:[];if(!e||!n)return{index:i.length,delta_km:Number.POSITIVE_INFINITY};let a=0,c=Number.POSITIVE_INFINITY;for(let f=0;f<=i.length;f+=1){const g=f===0?e:i[f-1],v=f===i.length?e:i[f],y=Qr(g,n)+Qr(n,v)-Qr(g,v);y<c&&(c=y,a=f)}return{index:a,delta_km:c}},yp=(e,t,{max_passes:n=2}={})=>{const i=Array.isArray(t)?t.filter(Boolean).slice():[];if(!e||i.length<2)return i;const a=i.slice(),c=[];let f=e;for(;a.length;){a.sort((v,y)=>Qr(f,v)-Qr(f,y));const g=a.shift();c.push(g),f=g}for(let g=0;g<Math.max(1,Number(n)||1);g+=1){let v=!1;for(let y=0;y<c.length-1;y+=1){const C=y===0?e:c[y-1];for(let b=y+1;b<c.length;b+=1){const T=b===c.length-1?e:c[b+1],I=c[y],z=c[b];if(Qr(C,z)+Qr(I,T)-Qr(C,I)-Qr(z,T)<-1e-6){for(let j=y,F=b;j<F;j+=1,F-=1){const O=c[j];c[j]=c[F],c[F]=O}v=!0}}}if(!v)break}return c},NC="arynik_routes_v1",Jd=(e,t)=>Number.isFinite(Number(e))&&Number.isFinite(Number(t))&&Math.abs(Number(e))>1e-4&&Math.abs(Number(t))>1e-4,U6=e=>{var g,v,y,C,b,T,I,z,R,j;const t=(e==null?void 0:e.latitude)??((v=(g=e==null?void 0:e.raw_data)==null?void 0:g.recipientLocation)==null?void 0:v.latitude)??((C=(y=e==null?void 0:e.raw_data)==null?void 0:y.recipientLocation)==null?void 0:C.lat),n=(e==null?void 0:e.longitude)??((T=(b=e==null?void 0:e.raw_data)==null?void 0:b.recipientLocation)==null?void 0:T.longitude)??((z=(I=e==null?void 0:e.raw_data)==null?void 0:I.recipientLocation)==null?void 0:z.lon)??((j=(R=e==null?void 0:e.raw_data)==null?void 0:R.recipientLocation)==null?void 0:j.lng),i=Number(t),a=Number(n);if(Jd(i,a))return{lat:i,lon:a};const c=oa(e);if(String(c||"").trim().toLowerCase()==="romania")return null;const f=Wc(c);return f&&Jd(f.lat,f.lon)?{lat:Number(f.lat),lon:Number(f.lon)}:null},V6=e=>{try{return localStorage.getItem(e)}catch{return null}},H6=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},bs=()=>new Date().toISOString(),hm=()=>new Date().toISOString().slice(0,10),TC=()=>{try{return crypto.randomUUID()}catch{return`route-${Date.now()}-${Math.floor(Math.random()*1e5)}`}},ji=e=>String(e||"").trim().toUpperCase(),fm=e=>String(e||"").trim().toUpperCase()||null,zh=e=>String(e||"").trim().toUpperCase()||null,pl=e=>String(e||"").trim()||null,IC=e=>{try{return String(e||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"")}catch{return String(e||"")}},Ir=e=>IC(String(e||"")).trim().replace(/[_-]+/g," ").replace(/\s+/g," ").toLowerCase(),Ro=()=>{const e=V6(NC);if(!e)return[];try{const t=JSON.parse(e);if(Array.isArray(t))return t}catch{}return[]},au=e=>{const t=Array.isArray(e)?e:[];return H6(NC,JSON.stringify(t)),t},aa=[{name:"Bacau",code:"BC",aliases:["bacau","bacu","bc"],seed:{lat:46.5667,lon:26.9167}},{name:"Iasi",code:"IS",aliases:["iasi","iai","is"],seed:{lat:47.1585,lon:27.6014}},{name:"Neamt",code:"NT",aliases:["neamt","neam","nt"],seed:{lat:46.9274,lon:26.37}},{name:"Galati",code:"GL",aliases:["galati","galai","gl"],seed:{lat:45.4353,lon:28.008}},{name:"Botosani",code:"BT",aliases:["botosani","botoani","bt"],seed:{lat:47.7486,lon:26.6694}},{name:"Suceava",code:"SV",aliases:["suceava","sv"],seed:{lat:47.6514,lon:26.2556}},{name:"Vaslui",code:"VS",aliases:["vaslui","vs"],seed:{lat:46.6407,lon:27.7276}}],W6=e=>{var i,a,c,f,g,v,y,C,b,T;const t=(e==null?void 0:e.county)||((a=(i=e==null?void 0:e.raw_data)==null?void 0:i.recipientLocation)==null?void 0:a.county)||((f=(c=e==null?void 0:e.raw_data)==null?void 0:c.recipientLocation)==null?void 0:f.countyName)||((v=(g=e==null?void 0:e.raw_data)==null?void 0:g.recipientLocation)==null?void 0:v.region)||((C=(y=e==null?void 0:e.raw_data)==null?void 0:y.recipientLocation)==null?void 0:C.regionName)||((b=e==null?void 0:e.raw_data)==null?void 0:b.county)||((T=e==null?void 0:e.raw_data)==null?void 0:T.countyName),n=Ir(t);if(!n)return null;for(const I of aa){const z=Array.isArray(I.aliases)?I.aliases:[];for(const R of z){const j=Ir(R);if(j&&(n===j||n.includes(` ${j} `)||n.startsWith(`${j} `)||n.endsWith(` ${j}`)||n.includes(j)))return I.name}if(Ir(I.name)===n)return I.name}return null},Z6=e=>{const t=IC(String((e==null?void 0:e.status)||"")).trim().toLowerCase();return t?!(t.includes("delivered")||t.includes("livrat")||t.includes("return")||t.includes("returnat")||t.includes("returnata")||t.includes("anulat")||t.includes("anulata")||t.includes("cancel")||t.includes("refuz")):!0},gc=()=>Ro().filter(Boolean).sort((e,t)=>String(t.updated_at||"").localeCompare(String(e.updated_at||""))),pm=e=>Ro().find(t=>t&&t.id===e)||null,kC=({name:e,driver_id:t,driver_name:n,helper_name:i,vehicle_plate:a,date:c,county:f,kind:g,region:v}={})=>{const y=Ro(),C={id:TC(),name:String(e||"").trim()||"New Route",driver_id:fm(t),driver_name:pl(n),vehicle_plate:zh(a),helper_name:pl(i),date:c?String(c):hm(),kind:g?String(g):void 0,region:v?String(v):void 0,county:f?String(f):void 0,awbs:[],created_at:bs(),updated_at:bs()};return y.unshift(C),au(y),C},Js=(e,t={})=>{const n=Ro(),i=n.findIndex(C=>C&&C.id===e);if(i===-1)return null;const a=n[i]||{},c=Object.prototype.hasOwnProperty.call(t,"driver_id")?fm(t.driver_id):a.driver_id??null,f=Object.prototype.hasOwnProperty.call(t,"vehicle_plate")?zh(t.vehicle_plate):a.vehicle_plate??null,g=Object.prototype.hasOwnProperty.call(t,"driver_name")?pl(t.driver_name):a.driver_name??null,v=Object.prototype.hasOwnProperty.call(t,"helper_name")?pl(t.helper_name):a.helper_name??null,y={...a,...t,id:a.id,driver_id:c,vehicle_plate:f,driver_name:g,helper_name:v,updated_at:bs()};return n[i]=y,au(n),y},MC=e=>{const t=zh(e==null?void 0:e.vehicle_plate),n=pl(e==null?void 0:e.driver_name)||String((e==null?void 0:e.driver_id)||"").trim()||null,i=pl(e==null?void 0:e.helper_name),a=[];t&&a.push(t),n&&a.push(n);let c=a.join(" - ");return i&&(c=c?`${c} + ${i}`:i),c||""},Zc=e=>{const t=MC(e);return t||String((e==null?void 0:e.name)||(e==null?void 0:e.county)||"").trim()||"Route"},G6=e=>{const t=Ro().filter(n=>n&&n.id!==e);return au(t),!0},Y6=(e,t)=>{const n=ji(t),i=pm(e);if(!i)return null;const a=Array.isArray(i.awbs)?i.awbs:[];return Js(e,{awbs:a.filter(c=>c!==n)})},Wy=(e,t)=>{if(!pm(e))return null;const i=(Array.isArray(t)?t:[]).map(ji).filter(Boolean);return Js(e,{awbs:i})},X6=e=>{const t=ji(e);return t&&Ro().find(a=>Array.isArray(a==null?void 0:a.awbs)&&a.awbs.includes(t))||null},Zy=e=>{const t=String(e||"").trim()||hm(),n=new Set(aa.map(i=>Ir(i.name)));return gc().filter(i=>String((i==null?void 0:i.date)||"")===t).filter(i=>String((i==null?void 0:i.kind)||"").toLowerCase()==="county"||String((i==null?void 0:i.region)||"").toLowerCase()==="moldova").filter(i=>{const a=Ir((i==null?void 0:i.county)||(i==null?void 0:i.name));return a&&n.has(a)}).sort((i,a)=>Ir((i==null?void 0:i.county)||(i==null?void 0:i.name)).localeCompare(Ir((a==null?void 0:a.county)||(a==null?void 0:a.name))))},wp=(e,t,{scopeDate:n=!0}={})=>{const i=ji(t);if(!i)return null;const a=Ro(),c=a.findIndex(C=>C&&C.id===e);if(c===-1)return null;const f=a[c],g=String((f==null?void 0:f.date)||""),v=Array.isArray(f==null?void 0:f.awbs)?f.awbs:[];let y=!1;for(let C=0;C<a.length;C+=1){const b=a[C];!b||!Array.isArray(b.awbs)||b.awbs.length===0||C!==c&&(n&&g&&String(b.date||"")!==g||b.awbs.includes(i)&&(a[C]={...b,awbs:b.awbs.filter(T=>T!==i),updated_at:bs()},y=!0))}return v.includes(i)||(a[c]={...f,awbs:[...v,i],updated_at:bs()},y=!0),y&&au(a),a[c]},vp=({date:e,shipments:t,driver_id:n}={})=>{const i=String(e||"").trim()||hm(),a=Array.isArray(t)?t:[],c=Ro(),f=new Map(aa.map(M=>[Ir(M.name),M])),g=new Map(aa.map(M=>[Ir(M.name),M==null?void 0:M.seed]).filter(M=>{var q,ie;return M[0]&&Jd((q=M[1])==null?void 0:q.lat,(ie=M[1])==null?void 0:ie.lon)}).map(([M,q])=>[M,{lat:Number(q.lat),lon:Number(q.lon)}])),v=new Map;for(const M of c){if(!M||String(M.date||"")!==i)continue;const q=Ir(M.county||M.name);q&&f.has(q)&&v.set(q,M)}let y=0;const C=[];for(const M of aa){const q=Ir(M.name);let ie=v.get(q);if(ie){let ae=!1;String(ie.kind||"").toLowerCase()!=="county"&&(ie.kind="county",ae=!0),String(ie.region||"").toLowerCase()!=="moldova"&&(ie.region="Moldova",ae=!0),ie.county||(ie.county=M.name,ae=!0),ae&&(ie.updated_at=bs())}else{const ae=c.find(we=>we&&Ir(we.county||we.name)===q&&(we.vehicle_plate||we.driver_id));ie={id:TC(),name:M.name,driver_id:fm((ae==null?void 0:ae.driver_id)||n),driver_name:(ae==null?void 0:ae.driver_name)||null,vehicle_plate:zh(ae==null?void 0:ae.vehicle_plate)||null,helper_name:(ae==null?void 0:ae.helper_name)||null,date:i,kind:"county",region:"Moldova",county:M.name,awbs:[],created_at:bs(),updated_at:bs()},c.unshift(ie),v.set(q,ie),y+=1}C.push(ie)}const b=new Set;for(const M of c)M&&String(M.date||"")===i&&(Array.isArray(M.awbs)?M.awbs:[]).forEach(q=>{const ie=ji(q);ie&&b.add(ie)});const T=new Map;for(const M of a){const q=ji(M==null?void 0:M.awb);if(!q)continue;const ie=U6(M);ie&&T.set(q,ie)}const I=Hc(),z=Jd(I==null?void 0:I.lat,I==null?void 0:I.lon)?{lat:Number(I.lat),lon:Number(I.lon)}:null,R=new Map;for(const M of C){const q=Ir((M==null?void 0:M.county)||(M==null?void 0:M.name)),ie=(Array.isArray(M==null?void 0:M.awbs)?M.awbs:[]).map(ji).filter(Boolean),ae=[];for(const we of ie){const Ne=T.get(we);Ne&&ae.push({awb:we,lat:Ne.lat,lon:Ne.lon})}R.set(M.id,{route:M,county_key:q,seed:g.get(q)||null,stops:z?yp(z,ae):ae,appended:[],touched:!1})}let j=0,F=0,O=0,k=0,W=0,K=0;const Y=new Set,H=[],Q=[];for(const M of a){if(!Z6(M))continue;j+=1;const q=ji(M==null?void 0:M.awb);if(!q)continue;const ie=W6(M);if(!ie){W+=1;continue}const ae=Ir(ie),we=f.get(ae);if(!we){K+=1;continue}if(F+=1,b.has(q)){k+=1;continue}const Ne=T.get(q)||null;if(z&&Ne){H.push({awb:q,lat:Ne.lat,lon:Ne.lon});continue}Q.push({awb:q,county_key:Ir(we.name)})}if(z&&H.length>0){H.sort((q,ie)=>Qr(z,ie)-Qr(z,q));const M=.25;for(const q of H){if(b.has(q.awb))continue;let ie=null;for(const ae of R.values()){const{index:we,delta_km:Ne}=z6(z,ae.stops,q);if(!Number.isFinite(Ne))continue;const oe=ae.seed?Qr(ae.seed,q):Number.POSITIVE_INFINITY,se=ae.stops.length;if(!ie){ie={state:ae,index:we,delta_km:Ne,seedDist:oe,load:se};continue}if(Ne<ie.delta_km-M){ie={state:ae,index:we,delta_km:Ne,seedDist:oe,load:se};continue}if(Math.abs(Ne-ie.delta_km)<=M){if(oe<ie.seedDist-1e-6){ie={state:ae,index:we,delta_km:Ne,seedDist:oe,load:se};continue}if(Math.abs(oe-ie.seedDist)<=1e-6&&se<ie.load){ie={state:ae,index:we,delta_km:Ne,seedDist:oe,load:se};continue}}}ie&&(ie.state.stops.splice(ie.index,0,q),ie.state.touched=!0,b.add(q.awb),O+=1)}}for(const M of Q){if(b.has(M.awb))continue;const q=v.get(M.county_key);if(!q)continue;const ie=R.get(q.id);ie&&(ie.appended.push(M.awb),ie.touched=!0,b.add(M.awb),O+=1)}for(const M of R.values()){if(!M.touched)continue;const q=M.route,ie=(Array.isArray(q.awbs)?q.awbs:[]).map(ji).filter(Boolean),we=(z?yp(z,M.stops):M.stops).map(_e=>ji(_e==null?void 0:_e.awb)).filter(Boolean),Ne=[],oe=new Set,se=_e=>{const pe=ji(_e);!pe||oe.has(pe)||(Ne.push(pe),oe.add(pe))};we.forEach(se),M.appended.forEach(se),ie.forEach(se);const ve=JSON.stringify(ie),ee=JSON.stringify(Ne);ve!==ee&&(q.awbs=Ne,q.updated_at=bs(),Y.add(q.id))}return(y||Y.size>0||O)&&au(c),{date:i,created_routes:y,allocated_awbs:O,deliverable_total:j,deliverable_in_moldova:F,already_assigned:k,missing_county:W,outside_region:K,routes:C}},q6=200;function K6(){const[e,t]=B.useState([]),[n,i]=B.useState(!0),[a,c]=B.useState(""),[f,g]=B.useState(null),[v,y]=B.useState("list"),[C,b]=B.useState(null),[T,I]=B.useState({}),z=B.useRef({}),[R,j]=B.useState({active:!1,done:0,total:0,current:""}),[F,O]=B.useState({open:!1,awb:null}),[k,W]=B.useState([]),[K,Y]=B.useState(""),[H,Q]=B.useState({}),[M,q]=B.useState({}),[ie,ae]=B.useState({}),[we,Ne]=B.useState({}),oe=wr(),{user:se}=sr(),{location:ve}=rm(),ee=Tn(se,Ko),_e=Tn(se,qa),pe=Tn(se,qr),he=["Manager","Admin","Dispatcher","Driver"].includes(se==null?void 0:se.role),Te=["Admin","Manager","Dispatcher","Support","Recipient"].includes(String((se==null?void 0:se.role)||"").trim()),ze=async()=>{i(!0);try{const G=se.token,ke=await ou(G);t(ke)}catch(G){console.error("Failed to fetch shipments",G)}finally{i(!1)}};B.useEffect(()=>{ze()},[]),B.useEffect(()=>{W(gc())},[]);const Le=(G,ke="RON")=>{const Ze=Number(G);return Number.isFinite(Ze)?`${Ze.toFixed(2)} ${String(ke||"RON").toUpperCase()}`:"--"},te=G=>{const ke=(G==null?void 0:G.raw_data)||{},Ze=(ke==null?void 0:ke.client)||(ke==null?void 0:ke.clientData)||{},Pe=(ke==null?void 0:ke.senderLocation)||{},Oe=(G==null?void 0:G.sender_shop_name)||(Ze==null?void 0:Ze.name)||(Ze==null?void 0:Ze.clientName)||(Pe==null?void 0:Pe.name)||(Pe==null?void 0:Pe.shopName)||"";return String(Oe||"").trim()},le=async(G,{refresh:ke=!0}={})=>{const Ze=String(G||"").toUpperCase();if(Ze){Q(Pe=>({...Pe,[Ze]:!0}));try{const Pe=se==null?void 0:se.token,Oe=await Vc(Pe,Ze,{refresh:ke});t(Ye=>(Array.isArray(Ye)?Ye:[]).map(ut=>String((ut==null?void 0:ut.awb)||"").toUpperCase()===Ze?{...ut,...Oe}:ut))}catch(Pe){console.warn("Failed to load shipment details",Pe),Y(`Failed to load details for ${Ze}`),setTimeout(()=>Y(""),2500)}finally{Q(Pe=>({...Pe,[Ze]:!1}))}}},De=async G=>{var Oe,Ye,ut,Fe;if(!ee)return;const ke=String((G==null?void 0:G.awb)||"").toUpperCase();if(!ke)return;const Ze=(G==null?void 0:G.locality)||((Ye=(Oe=G==null?void 0:G.raw_data)==null?void 0:Oe.recipientLocation)==null?void 0:Ye.locality)||((Fe=(ut=G==null?void 0:G.raw_data)==null?void 0:ut.recipientLocation)==null?void 0:Fe.localityName)||"",Pe=Ze?{locality:Ze}:{};q(be=>({...be,[ke]:!0}));try{const be=se==null?void 0:se.token;await Oh(be,{awb:ke,event_id:"2",timestamp:new Date().toISOString(),payload:Pe}),t(Dt=>(Array.isArray(Dt)?Dt:[]).map(Je=>String((Je==null?void 0:Je.awb)||"").toUpperCase()===ke?{...Je,status:"Delivered"}:Je)),Y(`Marked ${ke} as Delivered`),setTimeout(()=>Y(""),2500),le(ke,{refresh:!0})}catch{try{await om(ke,"2",Pe),Y(`Queued Delivered for ${ke}`),setTimeout(()=>Y(""),2500)}catch{Y(`Failed to mark Delivered for ${ke}`),setTimeout(()=>Y(""),2500)}}finally{q(be=>({...be,[ke]:!1}))}},st=async G=>{var Ze,Pe;if(!Te)return;const ke=String(G||"").trim().toUpperCase();if(!(!ke||!(se!=null&&se.token))){ae(Oe=>({...Oe||{},[ke]:!0})),Y("");try{const Oe=await em(se.token,{awb:ke,duration_sec:1800}),Ye=Oe==null?void 0:Oe.id;Ye?oe(`/tracking/${encodeURIComponent(String(Ye))}`):(Y("Tracking request created."),setTimeout(()=>Y(""),2500))}catch(Oe){const Ye=((Pe=(Ze=Oe==null?void 0:Oe.response)==null?void 0:Ze.data)==null?void 0:Pe.detail)||(Oe==null?void 0:Oe.message)||"Failed to request tracking";Y(String(Ye)),setTimeout(()=>Y(""),3e3)}finally{ae(Oe=>({...Oe||{},[ke]:!1}))}}},Tt=async G=>{var Ze,Pe;if(!pe)return;const ke=String(G||"").trim().toUpperCase();if(!(!ke||!(se!=null&&se.token))){Ne(Oe=>({...Oe||{},[ke]:!0})),Y("");try{const Oe=await nm(se.token,{awb:ke});Oe!=null&&Oe.id?oe(`/chat/${encodeURIComponent(String(Oe.id))}`):(Y("Chat unavailable."),setTimeout(()=>Y(""),2500))}catch(Oe){const Ye=((Pe=(Ze=Oe==null?void 0:Oe.response)==null?void 0:Ze.data)==null?void 0:Pe.detail)||(Oe==null?void 0:Oe.message)||"Failed to open chat";Y(String(Ye)),setTimeout(()=>Y(""),3e3)}finally{Ne(Oe=>({...Oe||{},[ke]:!1}))}}},Wt=ve?{lat:ve.latitude,lon:ve.longitude}:null;B.useEffect(()=>{z.current=T},[T]);const bt=async G=>{var ut;const ke=String((G==null?void 0:G.awb)||"").toUpperCase(),Ze=oa(G);let Pe=Number(G==null?void 0:G.latitude),Oe=Number(G==null?void 0:G.longitude);if(y("map"),b(null),!Qe(Pe)||!Qe(Oe)){const Fe=(ut=z.current)==null?void 0:ut[ke];Fe&&(!Fe.q||Fe.q===Ze)&&Qe(Fe.lat)&&Qe(Fe.lon)&&(Pe=Number(Fe.lat),Oe=Number(Fe.lon))}if(!Qe(Pe)||!Qe(Oe)){const Fe=Wc(Ze);Fe&&Qe(Fe.lat)&&Qe(Fe.lon)&&(Pe=Number(Fe.lat),Oe=Number(Fe.lon),ke&&I(be=>({...be,[ke]:{lat:Pe,lon:Oe,ts:Date.now(),source:"cache",q:Ze}})))}if(!Qe(Pe)||!Qe(Oe)){const Fe=await $d(Ze);Fe&&Qe(Fe.lat)&&Qe(Fe.lon)&&(Pe=Number(Fe.lat),Oe=Number(Fe.lon),ke&&I(be=>({...be,[ke]:{lat:Pe,lon:Oe,ts:Date.now(),source:"geocode",q:Ze}})))}const Ye=Hc();if(Ye&&Qe(Ye.lat)&&Qe(Ye.lon)&&Qe(Pe)&&Qe(Oe)){const Fe=await y6({lat:Ye.lat,lon:Ye.lon},{lat:Pe,lon:Oe});b(Fe)}else b(null)},In=G=>{if(he){try{vp({date:new Date().toISOString().slice(0,10),shipments:[],driver_id:(se==null?void 0:se.driver_id)||null})}catch{}W(gc()),O({open:!0,awb:String(G||"").toUpperCase()})}},ct=async G=>{var Pe,Oe;const ke=F.awb;if(!ke)return;if(wp(G,ke,{scopeDate:!0})){const Ye=gc().find(ut=>ut.id===G);if(Y(`Assigned ${ke} to ${(Ye==null?void 0:Ye.name)||"route"}${Ye!=null&&Ye.vehicle_plate?` (${Ye.vehicle_plate})`:""}`),setTimeout(()=>Y(""),2500),_e){const ut=String((Ye==null?void 0:Ye.driver_id)||"").trim();if(!ut)Y("Route has no driver assigned; allocation not sent."),setTimeout(()=>Y(""),3e3);else try{await $1(se==null?void 0:se.token,ke,ut),Y(`Allocated ${ke} to ${ut} and notified recipient.`),setTimeout(()=>Y(""),3e3)}catch(Fe){console.warn("Allocation API failed",Fe);const be=(Oe=(Pe=Fe==null?void 0:Fe.response)==null?void 0:Pe.data)==null?void 0:Oe.detail;Y(be?`Allocation failed: ${be}`:"Allocated locally only (API failed)."),setTimeout(()=>Y(""),3e3)}}}O({open:!1,awb:null})},Sn=()=>{const G=F.awb;if(!G)return;let ke="";try{ke=localStorage.getItem("arynik_last_vehicle_plate_v1")||""}catch{}const Ze=kC({name:`Route ${new Date().toLocaleDateString()}`,driver_id:(se==null?void 0:se.driver_id)||null,driver_name:(se==null?void 0:se.name)||null,helper_name:(se==null?void 0:se.helper_name)||null,vehicle_plate:String(ke||"").trim().toUpperCase()||null,date:new Date().toISOString().slice(0,10)});wp(Ze.id,G,{scopeDate:!0}),O({open:!1,awb:null}),Y(`Created route and assigned ${G}`),setTimeout(()=>Y(""),2500),oe(`/routes/${Ze.id}`)},Kt=e.filter(G=>{var ke,Ze;return((ke=G.awb)==null?void 0:ke.toLowerCase().includes(a.toLowerCase()))||G.recipient_name&&((Ze=G.recipient_name)==null?void 0:Ze.toLowerCase().includes(a.toLowerCase()))}),Pn=B.useMemo(()=>Kt.slice(0,q6),[Kt]),wt=B.useMemo(()=>Pn.map(G=>String((G==null?void 0:G.awb)||"").toUpperCase()).join("|"),[Pn]);B.useEffect(()=>{if(v!=="map"||!Pn||Pn.length===0)return;let G=!1;return(async()=>{const ke=Pn.length,Ze=z.current||{},Pe={},Oe=[];let Ye=0;for(const Je of Pn){if(G)return;const pt=String((Je==null?void 0:Je.awb)||"").toUpperCase();if(!pt){Ye+=1;continue}const An=oa(Je);if(Qe(Je==null?void 0:Je.latitude)&&Qe(Je==null?void 0:Je.longitude)){Pe[pt]={lat:Number(Je.latitude),lon:Number(Je.longitude),ts:Date.now(),source:"shipment",q:An},Ye+=1;continue}const mn=Ze[pt];if(mn&&(!mn.q||mn.q===An)&&Qe(mn.lat)&&Qe(mn.lon)){mn.q||(Pe[pt]={...mn,q:An}),Ye+=1;continue}const Dn=Wc(An);if(Dn){Qe(Dn.lat)&&Qe(Dn.lon)&&(Pe[pt]={lat:Number(Dn.lat),lon:Number(Dn.lon),ts:Number(Dn.ts||Date.now()),source:"cache",q:An}),Ye+=1;continue}Oe.push({awb:pt,query:An})}if(G)return;if(Object.keys(Pe).length>0&&I(Je=>({...Je,...Pe})),Oe.length===0){j({active:!1,done:ke,total:ke,current:""});return}j({active:!0,done:Ye,total:ke,current:""});let ut={},Fe=0,be=Date.now();const Dt=()=>{if(G||Object.keys(ut).length===0)return;const Je=ut;ut={},Fe=0,be=Date.now(),I(pt=>({...pt,...Je}))};for(const Je of Oe){if(G)return;const{awb:pt,query:An}=Je;j({active:!0,done:Ye,total:ke,current:pt});const mn=await $d(An);mn&&Qe(mn.lat)&&Qe(mn.lon)&&pt&&(ut[pt]={lat:Number(mn.lat),lon:Number(mn.lon),ts:Date.now(),source:"geocode",q:An},Fe+=1),Ye+=1;const Dn=Date.now()-be;(Fe>=5||Dn>300)&&Dt()}Dt(),!G&&j({active:!1,done:Ye,total:ke,current:""})})(),()=>{G=!0}},[v,wt]);const It=B.useMemo(()=>{if(v!=="map")return Kt;const G=T||{};return Kt.map(ke=>{const Ze=String((ke==null?void 0:ke.awb)||"").toUpperCase(),Pe=G[Ze],Oe=oa(ke);return Pe&&(!Pe.q||Pe.q===Oe)&&Qe(Pe.lat)&&Qe(Pe.lon)?{...ke,latitude:Number(Pe.lat),longitude:Number(Pe.lon)}:ke})},[v,Kt,T]),ft=20,[Vn,We]=B.useState(1);B.useEffect(()=>{We(1)},[a,v]);const gt=Math.ceil(Kt.length/ft),tn=v==="list"?Kt.slice((Vn-1)*ft,Vn*ft):Kt,vt=G=>G==="Delivered"?"from-emerald-500 to-emerald-600":G==="In Transit"?"from-blue-500 to-blue-600":"from-amber-500 to-amber-600",Bt=G=>G==="Delivered"?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":G==="In Transit"?"bg-blue-500/20 text-blue-400 border-blue-500/30":"bg-amber-500/20 text-amber-400 border-amber-500/30";return m.jsxs(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-20 right-0 w-72 h-72 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"sticky top-0 z-40 glass-strong backdrop-blur-xl border-b border-white/10 pb-2 shadow-sm",children:[m.jsxs("div",{className:"p-4 flex items-center gap-4",children:[m.jsx("button",{onClick:()=>oe(-1),className:"p-2 -ml-2 rounded-xl glass-light text-slate-300 hover:text-white transition-colors border border-white/10",children:m.jsx(Ms,{})}),m.jsx("h1",{className:"flex-1 font-black text-xl text-gradient tracking-tight",children:"Shipments"}),m.jsxs("div",{className:"flex glass-strong p-1 rounded-xl border border-white/10",children:[m.jsx("button",{onClick:()=>y("list"),className:`p-2 rounded-lg transition-all ${v==="list"?"bg-gradient-to-r from-violet-600 to-purple-600 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:m.jsx(X_,{size:20})}),m.jsx("button",{onClick:()=>y("map"),className:`p-2 rounded-lg transition-all ${v==="map"?"bg-gradient-to-r from-violet-600 to-purple-600 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:m.jsx(Q_,{size:20})})]}),m.jsx("button",{onClick:ze,className:`p-2 rounded-xl glass-light hover:bg-violet-500/20 text-violet-400 transition-all border border-white/10 ${n?"animate-spin":""}`,children:m.jsx(Ai,{size:20})})]}),m.jsx("div",{className:"px-4 pb-2",children:m.jsxs("div",{className:"relative group",children:[m.jsx(Ls,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-violet-400 transition-colors z-10",size:18}),m.jsx("input",{type:"text",placeholder:"Search AWB, Client...",className:"w-full pl-12 pr-4 py-3.5 glass-strong rounded-2xl outline-none focus:ring-2 focus:ring-violet-500/30 border border-white/10 text-sm font-medium text-white placeholder-slate-500 transition-all",value:a,onChange:G=>c(G.target.value)})]})})]}),m.jsx("div",{className:"flex-1 p-4 space-y-3 pb-32 relative z-10",children:m.jsxs(rs,{mode:"wait",children:[K&&m.jsx(et.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"glass-strong p-4 rounded-2xl border border-emerald-500/20 text-emerald-300 text-xs font-bold",children:K}),n&&e.length===0?m.jsxs(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-violet-500/20 blur-xl rounded-full animate-pulse"}),m.jsx(pn,{className:"animate-spin relative z-10 text-violet-400",size:48})]}),m.jsx("p",{className:"mt-6 font-bold text-xs uppercase tracking-widest text-slate-500",children:"Syncing Data..."})]}):Kt.length===0?m.jsxs(et.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(Os,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No shipments found"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Try adjusting your search"})]}):v==="map"?m.jsxs(et.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"h-[70vh] w-full rounded-3xl overflow-hidden border-iridescent shadow-2xl relative",children:[m.jsx(dm,{shipments:It,currentLocation:Wt,originLocation:Hc(),routeGeometry:C}),R.active&&m.jsxs("div",{className:"absolute top-4 left-4 glass-strong rounded-2xl border border-white/10 px-4 py-3 text-white text-xs font-bold shadow-lg",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(pn,{className:"animate-spin text-violet-300",size:14}),m.jsx("span",{className:"uppercase tracking-widest text-[10px] text-slate-300",children:"Geocoding"})]}),m.jsxs("div",{className:"mt-1 text-[10px] text-slate-400 font-black uppercase tracking-wider",children:[R.done,"/",R.total," ",R.current?`(${R.current})`:""]}),m.jsx("div",{className:"mt-2 h-1.5 w-48 bg-white/10 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-gradient-to-r from-violet-500 to-purple-500",style:{width:`${Math.min(100,Math.round(R.done/Math.max(1,R.total)*100))}%`}})}),m.jsx("div",{className:"mt-2 text-[9px] text-slate-500 font-bold",children:"Tip: search a city/awb first to reduce requests."})]})]}):m.jsxs("div",{className:"space-y-3",children:[tn.map((G,ke)=>{var Ze,Pe,Oe,Ye,ut,Fe,be,Dt,Je,pt,An,mn,Dn,At,vr,ss,re,ye,Ce,je,Xe,mt,rt,Hn,Zt,Yt,St,Ue,Vt,Be;return m.jsxs(et.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:ke*.05},className:`glass-strong rounded-3xl overflow-hidden transition-all duration-300 border border-white/10 ${f===ke?"ring-2 ring-violet-500/30 shadow-glow-sm":""}`,children:[m.jsxs("div",{onClick:()=>{const Gt=f===ke?null:ke;g(Gt),Gt!==null&&le(G.awb,{refresh:!1})},className:"p-5 flex items-center gap-4 cursor-pointer relative",children:[m.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shadow-sm bg-gradient-to-br ${vt(G.status)}`,children:m.jsx(Os,{size:24,strokeWidth:2,className:"text-white"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[m.jsx("h3",{className:"font-mono text-[10px] font-black uppercase tracking-widest text-slate-500",children:G.awb}),m.jsxs("div",{className:"flex items-center gap-2",children:[(()=>{const Gt=X6(G.awb);return Gt?m.jsx("span",{className:"text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border bg-emerald-500/15 text-emerald-300 border-emerald-500/20",children:Zc(Gt)}):null})(),m.jsx("span",{className:`text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border ${Bt(G.status)}`,children:G.status||"Active"})]})]}),m.jsx("p",{className:"text-sm font-bold text-white truncate leading-tight mb-2",children:G.recipient_name}),m.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400",children:[m.jsx(Rs,{size:11,strokeWidth:2.5}),m.jsx("p",{className:"text-[10px] font-medium truncate",children:G.delivery_address||G.locality||"No Address"})]})]}),m.jsx(xo,{className:`text-slate-500 transition-transform duration-300 ${f===ke?"rotate-90 text-violet-400":""}`,size:20})]}),m.jsx(rs,{children:f===ke&&m.jsx(et.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},children:m.jsxs("div",{className:"p-5 space-y-4 bg-black/20 border-t border-white/5",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"glass-light p-4 rounded-2xl flex items-center gap-3 border border-white/10",children:[m.jsx("div",{className:"p-2 bg-violet-500/20 rounded-xl",children:m.jsx(Zd,{size:16,className:"text-violet-400"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-0.5",children:"Contact"}),m.jsx("p",{className:"text-xs font-bold text-white truncate",children:G.recipient_phone||"--"})]})]}),m.jsxs("div",{className:"glass-light p-4 rounded-2xl flex items-center gap-3 border border-white/10",children:[m.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl",children:m.jsx(va,{size:16,className:"text-emerald-400"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-0.5",children:"Recipient"}),m.jsx("p",{className:"text-xs font-bold text-white truncate",children:G.recipient_name})]})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Packages"}),m.jsx("p",{className:"text-sm font-black text-white",children:Number.isFinite(Number(G.number_of_parcels))?Number(G.number_of_parcels):((Ze=G==null?void 0:G.raw_data)==null?void 0:Ze.numberOfDistinctBarcodes)||((Pe=G==null?void 0:G.raw_data)==null?void 0:Pe.numberOfParcels)||1})]}),m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Payment"}),m.jsx("p",{className:"text-sm font-black text-white",children:Le(G.payment_amount??G.shipping_cost??G.estimated_shipping_cost,G.currency||((Oe=G==null?void 0:G.raw_data)==null?void 0:Oe.currency)||"RON")}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold mt-1 truncate",children:(()=>{const Gt=[];return Number.isFinite(Number(G.shipping_cost))&&Gt.push(`Cost: ${Le(G.shipping_cost,G.currency||"RON")}`),Number.isFinite(Number(G.estimated_shipping_cost))&&(Number(G.shipping_cost)===Number(G.estimated_shipping_cost)||Gt.push(`Est: ${Le(G.estimated_shipping_cost,G.currency||"RON")}`)),Gt.length?Gt.join("  "):"Not loaded"})()})]}),m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"COD"}),m.jsx("p",{className:"text-sm font-black text-white",children:Le(G.cod_amount,G.currency||"RON")})]}),m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Declared"}),m.jsx("p",{className:"text-sm font-black text-white",children:Le(G.declared_value,G.currency||"RON")})]}),m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10 col-span-2",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Content"}),m.jsx("p",{className:"text-xs font-bold text-white truncate",children:G.content_description||((Ye=G==null?void 0:G.raw_data)==null?void 0:Ye.contentDescription)||((ut=G==null?void 0:G.raw_data)==null?void 0:ut.contents)||((Fe=G==null?void 0:G.raw_data)==null?void 0:Fe.content)||((be=G==null?void 0:G.raw_data)==null?void 0:be.packingList)||((Dt=G==null?void 0:G.raw_data)==null?void 0:Dt.packingListNumber)||((Je=G==null?void 0:G.raw_data)==null?void 0:Je.packingListId)||((pt=G==null?void 0:G.raw_data)==null?void 0:pt.packing_list)||((An=G==null?void 0:G.raw_data)==null?void 0:An.packing_list_number)||((mn=G==null?void 0:G.raw_data)==null?void 0:mn.packing_list_id)||((Dn=G==null?void 0:G.raw_data)==null?void 0:Dn.packageContent)||((At=G==null?void 0:G.raw_data)==null?void 0:At.shipmentContent)||((vr=G==null?void 0:G.raw_data)==null?void 0:vr.goodsDescription)||((re=(ss=G==null?void 0:G.raw_data)==null?void 0:ss.additionalServices)==null?void 0:re.contentDescription)||((Ce=(ye=G==null?void 0:G.raw_data)==null?void 0:ye.additionalServices)==null?void 0:Ce.contents)||((Xe=(je=G==null?void 0:G.raw_data)==null?void 0:je.additionalServices)==null?void 0:Xe.content)||((rt=(mt=G==null?void 0:G.raw_data)==null?void 0:mt.additionalServices)==null?void 0:rt.packingList)||((Zt=(Hn=G==null?void 0:G.raw_data)==null?void 0:Hn.additionalServices)==null?void 0:Zt.packingListNumber)||((St=(Yt=G==null?void 0:G.raw_data)==null?void 0:Yt.additionalServices)==null?void 0:St.packingListId)||((Vt=(Ue=G==null?void 0:G.raw_data)==null?void 0:Ue.productCategory)==null?void 0:Vt.name)||(typeof((Be=G==null?void 0:G.raw_data)==null?void 0:Be.productCategory)=="string"?G.raw_data.productCategory:"")||"--"}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold mt-1 truncate",children:[G.dimensions?`Dims: ${G.dimensions}`:"",G.weight?`  W: ${Number(G.weight).toFixed(2)} kg`:"",G.volumetric_weight?`  Vol: ${Number(G.volumetric_weight).toFixed(2)} kg`:""]}),G.delivery_instructions?m.jsx("p",{className:"text-[10px] text-slate-500 font-bold mt-1 truncate",children:`Instr: ${String(G.delivery_instructions)}`}):null,G.processing_status||G.send_type?m.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:[G.processing_status?`Proc: ${G.processing_status}`:"",G.send_type?`${G.processing_status?"  ":""}Type: ${G.send_type}`:""]}):null,m.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:[G.shipment_reference?`Ref: ${G.shipment_reference}`:"",G.client_order_id?`  Order: ${G.client_order_id}`:""]}),m.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:[te(G)?`Client: ${te(G)}`:"",G.source_channel?`${te(G)?"  ":""}Channel: ${G.source_channel}`:""]})]})]}),Array.isArray(G.tracking_history)&&G.tracking_history.length>0&&m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-2",children:"History"}),m.jsx("div",{className:"space-y-2",children:G.tracking_history.slice(0,4).map((Gt,os)=>m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsx("p",{className:"text-[11px] font-bold text-slate-200 truncate",children:(Gt==null?void 0:Gt.eventDescription)||(Gt==null?void 0:Gt.statusDescription)||"Update"}),m.jsx("p",{className:"text-[10px] font-bold text-slate-500 whitespace-nowrap",children:Gt!=null&&Gt.eventDate?new Date(Gt.eventDate).toLocaleString():""})]},os))})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("button",{onClick:()=>le(G.awb,{refresh:!0}),className:`w-full btn-premium py-3 bg-gradient-to-r from-slate-700 to-slate-800 hover:from-slate-600 hover:to-slate-700 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm ${H[String((G==null?void 0:G.awb)||"").toUpperCase()]?"opacity-70 cursor-not-allowed":""}`,disabled:H[String((G==null?void 0:G.awb)||"").toUpperCase()],title:"Fetch full details + history from Postis",children:[m.jsx(Ai,{size:16,className:H[String((G==null?void 0:G.awb)||"").toUpperCase()]?"animate-spin":""}),"Details"]}),ee?m.jsxs("button",{onClick:()=>De(G),className:`w-full btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm ${M[String((G==null?void 0:G.awb)||"").toUpperCase()]?"opacity-70 cursor-not-allowed":""}`,disabled:M[String((G==null?void 0:G.awb)||"").toUpperCase()]||String((G==null?void 0:G.status)||"").toLowerCase()==="delivered",title:"Mark as Delivered",children:[m.jsx(Nh,{size:16}),"Delivered"]}):m.jsx("div",{className:"w-full glass-light rounded-xl border border-white/10 flex items-center justify-center text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Read-only"})]}),m.jsxs("button",{onClick:()=>bt(G),className:"w-full btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm",children:[m.jsx($_,{size:16}),"View on Map"]}),Te&&String((G==null?void 0:G.driver_id)||"").trim()?m.jsxs("button",{onClick:()=>st(G.awb),disabled:!!ie[String((G==null?void 0:G.awb)||"").toUpperCase()],className:`w-full btn-premium py-3 bg-gradient-to-r from-sky-600 to-indigo-700 hover:from-sky-500 hover:to-indigo-600 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm ${ie[String((G==null?void 0:G.awb)||"").toUpperCase()]?"opacity-70 cursor-not-allowed":""}`,title:"Request driver live location",children:[ie[String((G==null?void 0:G.awb)||"").toUpperCase()]?m.jsx(pn,{size:16,className:"animate-spin"}):m.jsx(Rs,{size:16}),"Track Driver"]}):null,pe?m.jsxs("button",{onClick:()=>Tt(G.awb),disabled:!!we[String((G==null?void 0:G.awb)||"").toUpperCase()],className:`w-full btn-premium py-3 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm ${we[String((G==null?void 0:G.awb)||"").toUpperCase()]?"opacity-70 cursor-not-allowed":""}`,title:"Open chat",children:[we[String((G==null?void 0:G.awb)||"").toUpperCase()]?m.jsx(pn,{size:16,className:"animate-spin"}):m.jsx(Uc,{size:16}),"Chat"]}):null,he?m.jsxs("button",{onClick:()=>In(G.awb),className:"w-full btn-premium py-3 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm",children:[m.jsx(yo,{size:16}),_e?"Allocate to Truck":"Assign to Route"]}):null]})})})]},G.awb||ke)}),gt>1&&m.jsxs("div",{className:"flex items-center justify-between pt-4 glass-strong rounded-2xl p-4 border border-white/10",children:[m.jsx("button",{onClick:()=>We(G=>Math.max(1,G-1)),disabled:Vn===1,className:"p-2 rounded-xl hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-white",children:m.jsx(Ms,{size:20})}),m.jsxs("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:["Page ",Vn," of ",gt]}),m.jsx("button",{onClick:()=>We(G=>Math.min(gt,G+1)),disabled:Vn===gt,className:"p-2 rounded-xl hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-white",children:m.jsx(xo,{size:20})})]})]})]})}),m.jsx(rs,{children:F.open&&m.jsx(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-end justify-center bg-black/60 backdrop-blur-sm p-4",onClick:()=>O({open:!1,awb:null}),children:m.jsxs(et.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},exit:{y:30,opacity:0},className:"w-full max-w-md glass-strong rounded-3xl border-iridescent p-5 space-y-4",onClick:G=>G.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Assign AWB"}),m.jsx("p",{className:"text-sm font-bold text-white font-mono mt-1",children:F.awb})]}),m.jsx("button",{onClick:Sn,className:"px-4 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-300 text-[10px] font-black uppercase tracking-widest active:scale-95 transition-all",children:"Create Route"})]}),m.jsx("div",{className:"space-y-2 max-h-[45vh] overflow-y-auto",children:k.length===0?m.jsx("p",{className:"text-xs text-slate-500",children:"No routes yet. Tap Create Route."}):k.map(G=>m.jsxs("button",{onClick:()=>ct(G.id),className:"w-full p-4 rounded-2xl border border-white/10 hover:border-emerald-500/30 transition-all text-left glass-light flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-sm font-bold text-white truncate",children:Zc(G)}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1",children:[G.date,"  ",Array.isArray(G.awbs)?G.awbs.length:0," stops",G.vehicle_plate?`  ${G.vehicle_plate}`:""]})]}),m.jsx("span",{className:"text-[10px] font-black text-emerald-300 uppercase tracking-wide",children:"Select"})]},G.id))})]})})})]})}function Q6(){const[e,t]=B.useState(new Date),[n,i]=B.useState({}),[a,c]=B.useState(!0),f=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),g=new Date(e.getFullYear(),e.getMonth(),1).getDay(),v=()=>t(new Date(e.getFullYear(),e.getMonth()-1,1)),y=()=>t(new Date(e.getFullYear(),e.getMonth()+1,1)),C=e.toLocaleString("default",{month:"long"}),b=e.getFullYear();B.useEffect(()=>{(async()=>{c(!0);try{const j=localStorage.getItem("token"),F=new Date(e.getFullYear(),e.getMonth(),1).toISOString(),O=new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59).toISOString(),W=(await Q1(j,{start_date:F,end_date:O,limit:2e3})).reduce((K,Y)=>{const H=new Date(Y.timestamp).getDate();return K[H]||(K[H]=[]),K[H].push(Y),K},{});i(W)}catch(j){console.error("Failed to fetch monthly deliveries",j)}finally{c(!1)}})()},[e]);const T=[];for(let R=0;R<g;R+=1)T.push(m.jsx("div",{className:"h-24"},`empty-${R}`));for(let R=1;R<=f;R+=1){const j=n[R]||[],F=j.length>0,O=R===new Date().getDate()&&e.getMonth()===new Date().getMonth()&&e.getFullYear()===new Date().getFullYear();T.push(m.jsxs("div",{className:`h-24 border-t border-white/5 p-2 relative flex flex-col items-center justify-center gap-1 transition-all duration-300 hover:bg-white/5 cursor-pointer group ${O?"bg-violet-500/10 border-violet-500/30":""}`,children:[m.jsx("span",{className:`text-xs font-black absolute top-2 right-2 transition-all ${O?"text-violet-400":"text-slate-500 group-hover:text-violet-300"}`,children:R}),F&&m.jsxs("div",{className:"flex flex-col items-center animate-scale-in",children:[m.jsx("div",{className:"p-2 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl text-white shadow-glow-sm",children:m.jsx(Os,{size:16,strokeWidth:2.5})}),m.jsxs("span",{className:"text-[9px] font-black text-emerald-400 uppercase mt-1.5 tracking-wide",children:[j.length," AWB"]})]})]},R))}const I=Object.values(n).flat().length,z=I>0?(I/new Date().getDate()).toFixed(1):0;return m.jsxs("div",{className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-xl font-black text-gradient tracking-tight",children:"Delivery Calendar"}),m.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"Track your monthly performance"})]}),m.jsx("div",{className:"w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10",children:m.jsx(Z_,{size:20,className:"text-violet-400"})})]}),m.jsxs("div",{className:"flex-1 p-4 pb-32 space-y-6 relative z-10",children:[m.jsxs("div",{className:"glass-strong rounded-[32px] shadow-2xl border-iridescent overflow-hidden animate-scale-in",children:[m.jsxs("div",{className:"p-6 flex items-center justify-between bg-gradient-to-r from-violet-600 via-purple-600 to-violet-700 text-white relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 shimmer opacity-20"}),m.jsx("button",{onClick:v,className:"p-2.5 hover:bg-white/20 rounded-xl transition-all active:scale-95 relative z-10 magnetic",children:m.jsx(WI,{size:20,strokeWidth:2.5})}),m.jsxs("h2",{className:"text-lg font-black uppercase tracking-widest relative z-10",children:[C," ",b]}),m.jsx("button",{onClick:y,className:"p-2.5 hover:bg-white/20 rounded-xl transition-all active:scale-95 relative z-10 magnetic",children:m.jsx(xo,{size:20,strokeWidth:2.5})})]}),m.jsxs("div",{className:"grid grid-cols-7 text-center py-4 bg-black/20 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:[m.jsx("div",{children:"Sun"}),m.jsx("div",{children:"Mon"}),m.jsx("div",{children:"Tue"}),m.jsx("div",{children:"Wed"}),m.jsx("div",{children:"Thu"}),m.jsx("div",{children:"Fri"}),m.jsx("div",{children:"Sat"})]}),m.jsxs("div",{className:"grid grid-cols-7 relative min-h-[400px]",children:[a&&m.jsx("div",{className:"absolute inset-0 glass-strong z-10 flex items-center justify-center backdrop-blur-sm",children:m.jsxs("div",{className:"text-center",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-violet-500/20 blur-xl rounded-full animate-pulse"}),m.jsx(pn,{className:"animate-spin relative z-10 text-violet-400",size:48})]}),m.jsx("p",{className:"mt-6 font-bold text-xs uppercase tracking-widest text-slate-500",children:"Loading..."})]})}),T]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Monthly Insights"}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"glass-strong p-5 rounded-2xl border-iridescent animate-scale-in",style:{animationDelay:"0.1s"},children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("div",{className:"p-2 bg-violet-500/20 rounded-lg",children:m.jsx(Os,{size:16,className:"text-violet-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Total"})]}),m.jsx("p",{className:"text-3xl font-black text-gradient-purple",children:I}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium mt-1",children:"Deliveries"})]}),m.jsxs("div",{className:"glass-strong p-5 rounded-2xl border-iridescent animate-scale-in",style:{animationDelay:"0.2s"},children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:m.jsx(Yd,{size:16,className:"text-emerald-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Average"})]}),m.jsx("p",{className:"text-3xl font-black text-gradient-blue",children:z}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium mt-1",children:"Per Day"})]})]}),m.jsxs("div",{className:"glass-strong p-5 rounded-2xl border-iridescent flex items-center gap-4 animate-scale-in",style:{animationDelay:"0.3s"},children:[m.jsx("div",{className:"p-4 bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl shadow-glow-sm",children:m.jsx(nb,{size:24,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:"text-sm font-black text-white",children:"Active Month"}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-medium uppercase tracking-wide mt-1",children:[I," shipments processed in ",C]})]})]})]})]})]})}const Gy=e=>{try{return String(e||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim().toLowerCase()}catch{return String(e||"").trim().toLowerCase()}};function $6(){const e=wr(),{user:t}=sr(),[n,i]=B.useState([]),[a,c]=B.useState(""),[f,g]=B.useState(new Date().toISOString().slice(0,10)),[v,y]=B.useState(()=>{try{return localStorage.getItem("arynik_last_vehicle_plate_v1")||""}catch{return""}}),[C,b]=B.useState([]),[T,I]=B.useState(!1),[z,R]=B.useState(""),j=()=>i(gc()),F=()=>b(Zy(f));B.useEffect(()=>{j()},[]),B.useEffect(()=>{try{const Y=Zy(f);(!Y||Y.length<aa.length)&&vp({date:f,shipments:[],driver_id:(t==null?void 0:t.driver_id)||null})}catch{}j(),F()},[f]);const O=()=>{const H=String(a||"").trim()||`Route ${new Date().toLocaleDateString()}`,Q=String(v||"").trim().toUpperCase(),M=kC({name:H,driver_id:(t==null?void 0:t.driver_id)||null,driver_name:(t==null?void 0:t.name)||null,helper_name:(t==null?void 0:t.helper_name)||null,vehicle_plate:Q||null,date:f});if(c(""),Q)try{localStorage.setItem("arynik_last_vehicle_plate_v1",Q)}catch{}j(),e(`/routes/${M.id}`)},k=async()=>{I(!0),R("");try{const Y=t==null?void 0:t.token,H=await ou(Y),Q=vp({date:f,shipments:H,driver_id:(t==null?void 0:t.driver_id)||null});R(`Created ${Q.created_routes} routes  Allocated ${Q.allocated_awbs} AWBs  Moldova deliverables: ${Q.deliverable_in_moldova}`+(Q.missing_county?`  Missing county: ${Q.missing_county}`:""))}catch(Y){console.warn("Daily route generation failed",Y),R("Failed to generate daily routes (check API / shipment sync).")}finally{I(!1),j(),F()}},W=Y=>{window.confirm("Delete this route?")&&(G6(Y),j())},K=B.useMemo(()=>{const Y=new Map;return(Array.isArray(C)?C:[]).forEach(H=>{const Q=Gy((H==null?void 0:H.county)||(H==null?void 0:H.name));Q&&Y.set(Q,H)}),Y},[C]);return m.jsxs(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-violet-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-xl font-black text-gradient tracking-tight",children:"Routes"}),m.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"Create routes and allocate AWBs"})]}),m.jsx("div",{className:"w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10",children:m.jsx(yo,{size:20,className:"text-emerald-400"})})]}),m.jsxs("div",{className:"flex-1 p-4 pb-32 space-y-6 relative z-10",children:[m.jsxs("div",{className:"glass-strong p-5 rounded-3xl border-iridescent space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Daily Routes (Moldova)"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1 truncate",children:"Bacau, Iasi, Neamt, Galati, Botosani, Suceava, Vaslui"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"date",value:f,onChange:Y=>g(Y.target.value),className:"px-3 py-2 bg-slate-900/50 border border-slate-700/50 rounded-2xl text-white focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-xs font-bold"}),m.jsxs("button",{onClick:k,disabled:T,className:`px-4 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 text-[10px] font-black uppercase tracking-widest active:scale-95 transition-all flex items-center gap-2 ${T?"opacity-60 cursor-not-allowed":""}`,title:"Create the 7 county routes and auto-allocate deliverable AWBs",children:[m.jsx(Ai,{size:14,className:T?"animate-spin":""}),"Generate"]})]})]}),z&&m.jsx("div",{className:"glass-light p-4 rounded-2xl border border-emerald-500/20 text-emerald-200 text-xs font-bold",children:z}),m.jsx("div",{className:"grid grid-cols-2 gap-3",children:aa.map(Y=>{const H=K.get(Gy(Y.name)),Q=Array.isArray(H==null?void 0:H.awbs)?H.awbs.length:0,M=H?MC(H):"";return m.jsxs("button",{onClick:()=>H&&e(`/routes/${H.id}`),disabled:!H,className:`p-4 rounded-3xl border transition-all text-left flex items-center justify-between gap-3 ${H?"glass-strong border-white/10 hover:border-emerald-500/30":"bg-slate-900/30 border-slate-800/50 opacity-60 cursor-not-allowed"}`,title:H?"Open route":"Generate routes first",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-white font-black truncate",children:Y.name}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1",children:[f,"  ",Q," stops"]}),M&&m.jsx("p",{className:"text-[10px] text-emerald-200 font-black uppercase tracking-wide mt-1 truncate",children:M})]}),m.jsx("div",{className:`w-10 h-10 rounded-2xl flex items-center justify-center border ${H?"bg-emerald-500/15 border-emerald-500/20 text-emerald-300":"bg-slate-800/30 border-white/5 text-slate-500"}`,children:m.jsx(Wd,{size:18})})]},Y.code)})})]}),m.jsxs("div",{className:"glass-strong p-5 rounded-3xl border-iridescent space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"New Route"}),m.jsxs("span",{className:"text-[10px] font-bold text-slate-500",children:["Driver: ",m.jsx("span",{className:"text-slate-300 font-mono",children:(t==null?void 0:t.name)||(t==null?void 0:t.driver_id)||"N/A"})]})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[m.jsx("input",{value:a,onChange:Y=>c(Y.target.value),placeholder:"Route label (optional)",className:"col-span-2 px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-2xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium"}),m.jsx("input",{type:"date",value:f,onChange:Y=>g(Y.target.value),className:"px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-2xl text-white focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium"}),m.jsx("input",{value:v,onChange:Y=>y(Y.target.value),placeholder:"Vehicle plate (ex: BC75ARI)",className:"col-span-3 px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-2xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium font-mono tracking-wider"})]}),m.jsxs("button",{onClick:O,className:"w-full btn-premium py-4 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white rounded-2xl font-bold shadow-lg hover:shadow-glow-md transition-all flex items-center justify-center gap-2",children:[m.jsx(mc,{size:18}),"Create Route"]})]}),n.length===0?m.jsxs("div",{className:"text-center py-16 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(yo,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No routes yet"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Create your first route above"})]}):m.jsxs("div",{className:"space-y-3",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Your Routes"}),n.map(Y=>m.jsx("div",{className:"glass-strong p-5 rounded-3xl border border-white/10 hover:border-emerald-500/30 transition-all group",children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-emerald-600 to-emerald-700 flex items-center justify-center shadow-glow-sm",children:m.jsx(yo,{size:18,className:"text-white"})}),m.jsx("div",{className:"flex-1 min-w-0",children:m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-white font-black truncate",children:Zc(Y)}),String((Y==null?void 0:Y.county)||(Y==null?void 0:Y.name)||"").trim()&&String((Y==null?void 0:Y.county)||(Y==null?void 0:Y.name)||"").trim()!==Zc(Y)&&m.jsx("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-wide mt-1 truncate",children:String((Y==null?void 0:Y.county)||(Y==null?void 0:Y.name)||"").trim()}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1",children:[Y.date||"No date","  ",Array.isArray(Y.awbs)?Y.awbs.length:0," stops",Y.vehicle_plate?`  ${Y.vehicle_plate}`:""]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>W(Y.id),className:"p-2 rounded-xl glass-light border border-white/10 text-rose-400 hover:bg-rose-500/10 active:scale-95 transition-all",title:"Delete route",children:m.jsx(Gd,{size:18})}),m.jsx("button",{onClick:()=>e(`/routes/${Y.id}`),className:"p-2 rounded-xl glass-light border border-white/10 text-emerald-400 hover:bg-emerald-500/10 active:scale-95 transition-all",title:"Open route",children:m.jsx(Wd,{size:18})})]})]})})]})},Y.id))]})]})]})}const RC="arynik_helpers_v1",J6=e=>{try{return localStorage.getItem(e)}catch{return null}},eM=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},mm=e=>{const t=String(e||"").trim();return t?t.replace(/\s+/g," "):""},eh=e=>mm(e).toLowerCase(),_p=()=>{const e=J6(RC);if(!e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t.map(mm).filter(Boolean).filter((n,i,a)=>a.findIndex(c=>eh(c)===eh(n))===i).sort((n,i)=>n.localeCompare(i,void 0,{sensitivity:"base"})):[]}catch{return[]}},tM=e=>{const t=mm(e);if(!t)return _p();const n=_p();if(n.some(c=>eh(c)===eh(t)))return n;const a=[...n,t].sort((c,f)=>c.localeCompare(f,void 0,{sensitivity:"base"}));return eM(RC,JSON.stringify(a)),a},nM=(e,t,n)=>{const i=Array.isArray(e)?e.slice():[],a=String(t||"").trim().toUpperCase(),c=String(n||"").trim().toUpperCase();if(!a||!c)return i;const f=i.findIndex(C=>String(C||"").toUpperCase()===a),g=i.findIndex(C=>String(C||"").toUpperCase()===c);if(f===-1||g===-1||f===g)return i;const[v]=i.splice(f,1),y=f<g?Math.max(0,g-1):g;return i.splice(y,0,v),i},rM=({open:e,title:t,children:n,onClose:i})=>m.jsx(rs,{children:e&&m.jsx(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[70] flex items-end justify-center bg-black/70 backdrop-blur-sm p-4",onClick:i,children:m.jsxs(et.div,{initial:{y:24,opacity:0},animate:{y:0,opacity:1},exit:{y:24,opacity:0},className:"w-full max-w-md glass-strong rounded-3xl border-iridescent p-5 space-y-4",onClick:a=>a.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsx("div",{className:"min-w-0",children:m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:t})}),m.jsx("button",{type:"button",onClick:i,className:"p-2 rounded-2xl glass-light border border-white/10 text-slate-300 hover:text-white active:scale-95 transition-all","aria-label":"Close",children:m.jsx(_a,{size:18})})]}),n]})})});function iM(){const{routeId:e}=v1(),t=wr(),{user:n}=sr(),i=Tn(n,qa),a=B.useMemo(()=>Tn(n,wo),[n]),c=B.useMemo(()=>Tn(n,W1),[n]),{location:f}=rm(),[g,v]=B.useState(null),[y,C]=B.useState([]),[b,T]=B.useState(!0),[I,z]=B.useState(""),[R,j]=B.useState(""),[F,O]=B.useState("list"),[k,W]=B.useState(""),[K,Y]=B.useState(""),[H,Q]=B.useState(""),[M,q]=B.useState([]),[ie,ae]=B.useState(!1),[we,Ne]=B.useState(()=>_p()),[oe,se]=B.useState(!1),[ve,ee]=B.useState(""),[_e,pe]=B.useState(""),[he,Te]=B.useState({}),[ze,Le]=B.useState({active:!1,done:0,total:0,current:""}),[te,le]=B.useState(null),[De,st]=B.useState({distance_km:null,duration_min:null}),[Tt,Wt]=B.useState(null),[bt,In]=B.useState({active:!1,dragging:"",over:""}),ct=B.useRef({active:!1,dragging:"",over:"",pointer_id:null,last_over:""}),Sn=B.useRef(null),Kt=B.useRef(null),Pn=f?{lat:f.latitude,lon:f.longitude}:null,wt=Hc();B.useEffect(()=>{Kt.current=g},[g]);const It=(re,ye="RON")=>{const Ce=Number(re);return Number.isFinite(Ce)?`${Ce.toFixed(2)} ${String(ye||"RON").toUpperCase()}`:"--"};B.useEffect(()=>{const re=pm(e);v(re)},[e]),B.useEffect(()=>{W(String((g==null?void 0:g.vehicle_plate)||"").toUpperCase()),Y(String((g==null?void 0:g.driver_name)||"").trim()),Q(String((g==null?void 0:g.helper_name)||"").trim())},[g==null?void 0:g.vehicle_plate,g==null?void 0:g.driver_name,g==null?void 0:g.helper_name,g==null?void 0:g.id]),B.useEffect(()=>{if(!a)return;let re=!1;return(async()=>{ae(!0);try{const ye=n==null?void 0:n.token,Ce=await K1(ye);re||q(Array.isArray(Ce)?Ce:[])}catch(ye){console.warn("Failed to load users list",ye),re||q([])}finally{re||ae(!1)}})(),()=>{re=!0}},[a,n==null?void 0:n.token]);const ft=B.useMemo(()=>{const re=new Map;return(Array.isArray(M)?M:[]).forEach(ye=>{const Ce=String((ye==null?void 0:ye.driver_id)||"").trim().toUpperCase();Ce&&re.set(Ce,ye)}),re},[M]),Vn=B.useMemo(()=>(Array.isArray(M)?M:[]).filter(re=>String((re==null?void 0:re.role)||"").trim().toLowerCase()==="driver"&&(re==null?void 0:re.active)!==!1).slice().sort((re,ye)=>String((re==null?void 0:re.driver_id)||"").localeCompare(String((ye==null?void 0:ye.driver_id)||""))),[M]),We=B.useMemo(()=>{const re=new Set,ye=[],Ce=je=>{const Xe=String(je||"").trim().replace(/\s+/g," ");if(!Xe)return;const mt=Xe.toLowerCase();re.has(mt)||(re.add(mt),ye.push(Xe))};return(Array.isArray(we)?we:[]).forEach(Ce),(Array.isArray(M)?M:[]).forEach(je=>Ce(je==null?void 0:je.helper_name)),Ce(H),ye.sort((je,Xe)=>je.localeCompare(Xe,void 0,{sensitivity:"base"}))},[we,M,H]),gt=()=>{if(!g)return;const re=String(k||"").trim().toUpperCase(),ye=Js(g.id,{vehicle_plate:re||null});if(ye&&v(ye),re)try{localStorage.setItem("arynik_last_vehicle_plate_v1",re)}catch{}},tn=()=>{if(!g)return;const re=String(K||"").trim(),ye=Js(g.id,{driver_name:re||null});ye&&v(ye)},vt=()=>{if(!g)return;const re=String(H||"").trim(),ye=Js(g.id,{helper_name:re||null});ye&&v(ye)},Bt=re=>{if(!g)return;const ye=String(re||"").trim();Q(ye);const Ce=Js(g.id,{helper_name:ye||null});Ce&&v(Ce)},G=re=>{if(!g)return;const ye=String(re||"").trim().toUpperCase(),Ce=ye?ft.get(ye):null,je={driver_id:ye||null,driver_name:((Ce==null?void 0:Ce.name)||"").trim()||null};!g.vehicle_plate&&(Ce!=null&&Ce.truck_plate)&&(je.vehicle_plate=String(Ce.truck_plate).trim().toUpperCase()),!g.helper_name&&(Ce!=null&&Ce.helper_name)&&(je.helper_name=String(Ce.helper_name).trim());const Xe=Js(g.id,je);Xe&&v(Xe)},ke=()=>{const re=String(ve||"").trim();if(!re){pe("Helper name is required.");return}const ye=tM(re);Ne(ye),se(!1),ee(""),pe(""),Bt(re)};B.useEffect(()=>{if(!g||ft.size===0)return;const re=String((g==null?void 0:g.driver_id)||"").trim().toUpperCase();if(!re)return;const ye=ft.get(re);if(!ye)return;const Ce={},je=String((ye==null?void 0:ye.name)||"").trim(),Xe=String((ye==null?void 0:ye.helper_name)||"").trim(),mt=String((ye==null?void 0:ye.truck_plate)||"").trim().toUpperCase();if(je&&!String((g==null?void 0:g.driver_name)||"").trim()&&(Ce.driver_name=je),Xe&&!String((g==null?void 0:g.helper_name)||"").trim()&&(Ce.helper_name=Xe),mt&&!String((g==null?void 0:g.vehicle_plate)||"").trim()&&(Ce.vehicle_plate=mt),Object.keys(Ce).length===0)return;const rt=Js(g.id,Ce);rt&&v(rt)},[g==null?void 0:g.id,g==null?void 0:g.driver_id,ft]);const Ze=async()=>{T(!0);try{const re=n==null?void 0:n.token,ye=await ou(re);C(Array.isArray(ye)?ye:[])}catch(re){console.warn("Failed to load shipments",re),C([])}finally{T(!1)}};B.useEffect(()=>{Ze()},[]);const Pe=B.useMemo(()=>{const re=new Map;return y.forEach(ye=>{ye!=null&&ye.awb&&re.set(String(ye.awb).toUpperCase(),ye)}),re},[y]),Oe=Array.isArray(g==null?void 0:g.awbs)?g.awbs:[],Ye=B.useRef(Oe);B.useEffect(()=>{Ye.current=Oe,ct.current.active&&(ct.current={active:!1,dragging:"",over:"",pointer_id:null,last_over:""},In({active:!1,dragging:"",over:""}),Wt(null),Sn.current=null)},[Oe.join("|")]);const ut=Tt!==null?Tt:Oe,Fe=B.useMemo(()=>ut.map(re=>{const ye=Pe.get(String(re).toUpperCase());return ye||{awb:re,status:"Unknown",recipient_name:"Unknown",delivery_address:"",locality:""}}),[ut,Pe]),be=B.useMemo(()=>Fe.map(re=>{const ye=String((re==null?void 0:re.awb)||"").toUpperCase(),Ce=oa(re),je=he[ye],Xe=je&&(!je.q||je.q===Ce)&&Qe(je.lat)&&Qe(je.lon),mt=Qe(re==null?void 0:re.latitude)?Number(re.latitude):Xe?Number(je.lat):null,rt=Qe(re==null?void 0:re.longitude)?Number(re.longitude):Xe?Number(je.lon):null;return{...re,latitude:Number.isFinite(mt)?mt:null,longitude:Number.isFinite(rt)?rt:null}}),[Fe,he]),Dt=B.useMemo(()=>{const re=String(I||"").trim().toLowerCase();if(!re)return[];const ye=new Set(ut.map(Ce=>String(Ce).toUpperCase()));return y.filter(Ce=>{const je=String((Ce==null?void 0:Ce.awb)||"").toLowerCase(),Xe=String((Ce==null?void 0:Ce.recipient_name)||"").toLowerCase();return(je.includes(re)||Xe.includes(re))&&!ye.has(String((Ce==null?void 0:Ce.awb)||"").toUpperCase())}).slice(0,30)},[I,y,ut]),Je=async re=>{if(!g)return;const ye=wp(g.id,re,{scopeDate:!0});if(v(ye),j(""),z(""),ye&&i){const Ce=String((ye==null?void 0:ye.driver_id)||"").trim();if(!Ce)return;try{await $1(n==null?void 0:n.token,re,Ce)}catch(je){console.warn("Allocation API failed",je)}}},pt=re=>{if(!g)return;const ye=Y6(g.id,re);v(ye)};B.useEffect(()=>{Sn.current=Tt},[Tt]);const An=(re,ye)=>{var Xe;if(!g)return;const Ce=String(re||"").trim().toUpperCase();if(!Ce||ct.current.active)return;if(ye){try{ye.preventDefault()}catch{}try{ye.stopPropagation()}catch{}}const je=Array.isArray(ut)?ut.slice():[];Wt(je),Sn.current=je,ct.current={active:!0,dragging:Ce,over:Ce,pointer_id:(ye==null?void 0:ye.pointerId)??null,last_over:Ce},In({active:!0,dragging:Ce,over:Ce});try{(Xe=ye==null?void 0:ye.currentTarget)!=null&&Xe.setPointerCapture&&Number.isFinite(Number(ye.pointerId))&&ye.currentTarget.setPointerCapture(ye.pointerId)}catch{}},mn=()=>{if(!ct.current.active)return;const re=Sn.current,ye=Ye.current,Ce=Kt.current;if(ct.current={active:!1,dragging:"",over:"",pointer_id:null,last_over:""},In({active:!1,dragging:"",over:""}),!Ce||!Ce.id){Wt(null),Sn.current=null;return}if(!Array.isArray(re)||!Array.isArray(ye)||re.join("|")===ye.join("|")){Wt(null),Sn.current=null;return}const je=Wy(Ce.id,re);je&&v(je)};B.useEffect(()=>{if(!bt.active)return;const re=Ce=>{const je=ct.current;if(!je.active||je.pointer_id!==null&&Ce.pointerId!==je.pointer_id)return;const Xe=document.elementFromPoint(Ce.clientX,Ce.clientY),mt=Xe&&Xe.closest?Xe.closest("[data-stop-awb]"):null,rt=mt?String(mt.getAttribute("data-stop-awb")||"").trim().toUpperCase():"";rt&&rt!==je.dragging&&rt!==je.last_over&&(je.last_over=rt,je.over=rt,In(Hn=>Hn.over===rt?Hn:{...Hn,over:rt}),Wt(Hn=>{const Zt=Array.isArray(Hn)?Hn:Ye.current||[],Yt=nM(Zt,je.dragging,rt);return Sn.current=Yt,Yt}))},ye=()=>mn();return window.addEventListener("pointermove",re),window.addEventListener("pointerup",ye),window.addEventListener("pointercancel",ye),()=>{window.removeEventListener("pointermove",re),window.removeEventListener("pointerup",ye),window.removeEventListener("pointercancel",ye)}},[bt.active]),B.useEffect(()=>{Tt!==null&&Array.isArray(Tt)&&Tt.join("|")===Oe.join("|")&&(Wt(null),Sn.current=null)},[Oe.join("|")]);const Dn=async()=>{if(!Fe||Fe.length===0)return;const re=Fe.length,ye=he||{},Ce={},je=[];let Xe=0;for(const Yt of Fe){const St=String((Yt==null?void 0:Yt.awb)||"").toUpperCase();if(!St){Xe+=1;continue}const Ue=oa(Yt);if(Qe(Yt==null?void 0:Yt.latitude)&&Qe(Yt==null?void 0:Yt.longitude)){Ce[St]={lat:Number(Yt.latitude),lon:Number(Yt.longitude),ts:Date.now(),source:"shipment",q:Ue},Xe+=1;continue}const Vt=ye[St];if(Vt&&(!Vt.q||Vt.q===Ue)&&Qe(Vt.lat)&&Qe(Vt.lon)){Vt.q||(Ce[St]={...Vt,q:Ue}),Xe+=1;continue}const Be=Wc(Ue);if(Be){Qe(Be.lat)&&Qe(Be.lon)&&(Ce[St]={lat:Number(Be.lat),lon:Number(Be.lon),ts:Number(Be.ts||Date.now()),source:"cache",q:Ue}),Xe+=1;continue}je.push({awb:St,query:Ue})}if(Object.keys(Ce).length>0&&Te(Yt=>({...Yt,...Ce})),je.length===0){Le({active:!1,done:re,total:re,current:""});return}Le({active:!0,done:Xe,total:re,current:""});let mt={},rt=0,Hn=Date.now();const Zt=()=>{if(Object.keys(mt).length===0)return;const Yt=mt;mt={},rt=0,Hn=Date.now(),Te(St=>({...St,...Yt}))};for(const Yt of je){const{awb:St,query:Ue}=Yt;Le({active:!0,done:Xe,total:re,current:St});const Vt=await $d(Ue);Vt&&Qe(Vt.lat)&&Qe(Vt.lon)&&(mt[St]={lat:Number(Vt.lat),lon:Number(Vt.lon),ts:Date.now(),source:"geocode",q:Ue},rt+=1),Xe+=1;const Be=Date.now()-Hn;(rt>=3||Be>300)&&Zt()}Zt(),Le({active:!1,done:Xe,total:re,current:""})},At=async re=>{const ye=Array.isArray(re)?re:[],Ce=[],je=wt&&Qe(wt.lat)&&Qe(wt.lon)?{lat:Number(wt.lat),lon:Number(wt.lon)}:null;if(je&&Ce.push(je),ye.forEach(Zt=>{Qe(Zt==null?void 0:Zt.latitude)&&Qe(Zt==null?void 0:Zt.longitude)&&Ce.push({lat:Number(Zt.latitude),lon:Number(Zt.longitude)})}),je&&Ce.length>1&&Ce.push(je),Ce.length<2){le(null),st({distance_km:null,duration_min:null});return}const Xe=await w6(Ce);Xe!=null&&Xe.geometry?le(Xe.geometry):le(null);const mt=Number((Xe==null?void 0:Xe.distance_m)||0),rt=Number((Xe==null?void 0:Xe.duration_s)||0);if(mt>0){st({distance_km:Math.round(mt/1e3*10)/10,duration_min:rt>0?Math.round(rt/60):null});return}let Hn=0;for(let Zt=0;Zt<Ce.length-1;Zt+=1)Hn+=Qr(Ce[Zt],Ce[Zt+1]);st({distance_km:Math.round(Hn*10)/10,duration_min:null})};B.useEffect(()=>{F==="map"&&(async()=>await Dn())()},[F,Oe.join("|")]),B.useEffect(()=>{F==="map"&&(ze.active||bt.active||At(be))},[F,ze.active,bt.active,JSON.stringify(be.map(re=>[re.awb,re.latitude,re.longitude]))]);const vr=()=>{if(!g)return;const re=be.map(rt=>({awb:String((rt==null?void 0:rt.awb)||"").toUpperCase(),lat:Number(rt==null?void 0:rt.latitude),lon:Number(rt==null?void 0:rt.longitude)})).filter(rt=>rt.awb&&Qe(rt.lat)&&Qe(rt.lon));if(re.length<2)return;const ye=wt&&Qe(wt.lat)&&Qe(wt.lon)?{lat:Number(wt.lat),lon:Number(wt.lon)}:{lat:re[0].lat,lon:re[0].lon},je=yp(ye,re).map(rt=>rt.awb),Xe=Oe.filter(rt=>!je.includes(String(rt).toUpperCase())),mt=Wy(g.id,[...je,...Xe]);v(mt)},ss=()=>{const re=be.filter(mt=>Qe(mt==null?void 0:mt.latitude)&&Qe(mt==null?void 0:mt.longitude)).map(mt=>`${Number(mt.latitude)},${Number(mt.longitude)}`);if(re.length===0)return;const ye=wt&&Qe(wt.lat)&&Qe(wt.lon),Ce=ye?`${Number(wt.lat)},${Number(wt.lon)}`:re[0],je=ye&&re.length<=23,Xe=new URL("https://www.google.com/maps/dir/");if(Xe.searchParams.set("api","1"),Xe.searchParams.set("origin",Ce),je)Xe.searchParams.set("destination",Ce),Xe.searchParams.set("waypoints",re.join("|"));else{const mt=re[re.length-1];Xe.searchParams.set("destination",mt);const rt=ye?re.slice(0,-1):re.slice(1,-1);rt.length>0&&Xe.searchParams.set("waypoints",rt.join("|"))}window.open(Xe.toString(),"_blank","noopener,noreferrer")};return g?m.jsxs(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-violet-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"sticky top-0 z-40 glass-strong backdrop-blur-xl border-b border-white/10 pb-2 shadow-sm",children:[m.jsxs("div",{className:"p-4 flex items-center gap-4",children:[m.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-xl glass-light text-slate-300 hover:text-white transition-colors border border-white/10",children:m.jsx(Ms,{})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h1",{className:"font-black text-xl text-gradient tracking-tight truncate",children:Zc(g)}),m.jsxs("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wide mt-1",children:[g.date,"  ",Oe.length," stops",g.county?`  ${g.county}`:g.name?`  ${g.name}`:""]})]}),m.jsxs("div",{className:"flex glass-strong p-1 rounded-xl border border-white/10",children:[m.jsx("button",{onClick:()=>O("list"),className:`p-2 rounded-lg transition-all ${F==="list"?"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:m.jsx(X_,{size:20})}),m.jsx("button",{onClick:()=>O("map"),className:`p-2 rounded-lg transition-all ${F==="map"?"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:m.jsx(Q_,{size:20})})]})]}),m.jsxs("div",{className:"px-4 pb-2 space-y-3",children:[m.jsxs("div",{className:"glass-strong rounded-2xl border border-white/10 p-4 space-y-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center",children:m.jsx(H1,{size:18,className:"text-emerald-300"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[9px] uppercase font-black text-slate-500 tracking-[0.2em]",children:"Truck & Crew"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold mt-1 truncate",children:"Route title = plate + driver (+ helper)"})]}),ie&&m.jsx("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide",children:"Loading..."})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("div",{className:"glass-light rounded-2xl border border-white/10 p-3",children:[m.jsx("p",{className:"text-[9px] uppercase font-black text-slate-500 tracking-[0.2em] mb-1",children:"Plate"}),m.jsx("input",{value:k,onChange:re=>W(re.target.value.toUpperCase()),onBlur:gt,placeholder:"BC75ARI",className:"w-full bg-transparent outline-none text-white font-mono text-sm tracking-wider placeholder-slate-600"})]}),m.jsxs("div",{className:"glass-light rounded-2xl border border-white/10 p-3",children:[m.jsx("p",{className:"text-[9px] uppercase font-black text-slate-500 tracking-[0.2em] mb-1",children:"Driver"}),a?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("select",{value:String((g==null?void 0:g.driver_id)||"").trim().toUpperCase(),onChange:re=>G(re.target.value),className:"w-full bg-transparent outline-none text-white text-xs font-bold",children:[m.jsx("option",{value:"",children:"Unassigned"}),(()=>{const re=String((g==null?void 0:g.driver_id)||"").trim().toUpperCase(),ye=re&&Vn.some(Ce=>String((Ce==null?void 0:Ce.driver_id)||"").trim().toUpperCase()===re);return re&&!ye?m.jsx("option",{value:re,children:re}):null})(),Vn.map(re=>m.jsxs("option",{value:String(re.driver_id||"").trim().toUpperCase(),children:[String(re.driver_id||"").trim().toUpperCase(),"  ",String(re.name||"").trim()||"Unnamed"]},re.driver_id))]}),c&&m.jsx("button",{type:"button",onClick:()=>t(`/users?create=1&role=Driver&returnTo=${encodeURIComponent(`/routes/${e}`)}`),className:"p-2 rounded-xl glass-strong border border-white/10 text-emerald-300 hover:bg-emerald-500/10 active:scale-95 transition-all",title:"Add driver","aria-label":"Add driver",children:m.jsx(mc,{size:16})})]}):m.jsx("input",{value:K,onChange:re=>Y(re.target.value),onBlur:tn,placeholder:g!=null&&g.driver_id?`Driver name (for ${g.driver_id})`:"Driver name",className:"w-full bg-transparent outline-none text-white text-sm font-bold placeholder-slate-600"})]}),m.jsxs("div",{className:"glass-light rounded-2xl border border-white/10 p-3 col-span-2",children:[m.jsx("p",{className:"text-[9px] uppercase font-black text-slate-500 tracking-[0.2em] mb-1",children:"Helper"}),a?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("select",{value:String(H||"").trim(),onChange:re=>Bt(re.target.value),className:"w-full bg-transparent outline-none text-white text-xs font-bold",children:[m.jsx("option",{value:"",children:"Unassigned"}),(()=>{const re=String(H||"").trim(),ye=re&&We.some(Ce=>String(Ce||"").trim().toLowerCase()===re.toLowerCase());return re&&!ye?m.jsx("option",{value:re,children:re}):null})(),We.map(re=>m.jsx("option",{value:re,children:re},String(re).toLowerCase()))]}),c&&m.jsx("button",{type:"button",onClick:()=>{se(!0),ee(""),pe("")},className:"p-2 rounded-xl glass-strong border border-white/10 text-emerald-300 hover:bg-emerald-500/10 active:scale-95 transition-all",title:"Add helper","aria-label":"Add helper",children:m.jsx(mc,{size:16})})]}):m.jsx("input",{value:H,onChange:re=>Q(re.target.value),onBlur:vt,placeholder:"Helper name (optional)",className:"w-full bg-transparent outline-none text-white text-sm font-bold placeholder-slate-600"})]})]})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[m.jsx("input",{value:R,onChange:re=>j(re.target.value),placeholder:"Add AWB...",className:"col-span-2 w-full px-4 py-3.5 glass-strong rounded-2xl outline-none focus:ring-2 focus:ring-emerald-500/30 border border-white/10 text-sm font-medium text-white placeholder-slate-500 transition-all"}),m.jsxs("button",{onClick:()=>Je(R),className:"btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white rounded-2xl font-bold shadow-lg hover:shadow-glow-md transition-all flex items-center justify-center gap-2",children:[m.jsx(mc,{size:18}),"Add"]})]}),m.jsxs("div",{className:"relative group",children:[m.jsx(Ls,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-emerald-400 transition-colors z-10",size:18}),m.jsx("input",{type:"text",placeholder:"Search shipments to add...",className:"w-full pl-12 pr-4 py-3.5 glass-strong rounded-2xl outline-none focus:ring-2 focus:ring-emerald-500/30 border border-white/10 text-sm font-medium text-white placeholder-slate-500 transition-all",value:I,onChange:re=>z(re.target.value)})]}),I&&Dt.length>0&&m.jsx("div",{className:"glass-strong rounded-2xl border border-white/10 overflow-hidden",children:Dt.map(re=>m.jsxs("button",{onClick:()=>Je(re.awb),className:"w-full p-4 flex items-center gap-3 hover:bg-white/5 transition-all text-left border-b border-white/5 last:border-b-0",children:[m.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center",children:m.jsx(yo,{size:16,className:"text-emerald-400"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[10px] font-mono font-black text-slate-500 uppercase tracking-widest truncate",children:re.awb}),m.jsx("p",{className:"text-sm font-bold text-white truncate",children:re.recipient_name||"Unknown"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate",children:re.delivery_address||re.locality||""})]}),m.jsx("span",{className:"text-[10px] font-black text-emerald-400 uppercase tracking-wide",children:"Add"})]},re.awb))})]})]}),m.jsx("div",{className:"flex-1 p-4 space-y-3 pb-32 relative z-10",children:F==="map"?m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"glass-strong rounded-2xl border border-white/10 p-4 flex items-center justify-between gap-2",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Route Map"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate",children:ze.active?`Geocoding ${ze.done}/${ze.total} (${ze.current})`:'Tap "Optimize" for a quick route order'}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-bold mt-1",children:[De.distance_km?`~${De.distance_km} km`:"Distance: N/A",De.duration_min?`  ~${De.duration_min} min`:""]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:Dn,className:`p-2 rounded-xl glass-light border border-white/10 text-emerald-400 hover:bg-emerald-500/10 active:scale-95 transition-all ${ze.active?"opacity-60 cursor-not-allowed":""}`,disabled:ze.active,title:"Geocode stops",children:m.jsx(Ai,{size:18,className:ze.active?"animate-spin":""})}),m.jsx("button",{onClick:vr,className:"p-2 rounded-xl glass-light border border-white/10 text-amber-400 hover:bg-amber-500/10 active:scale-95 transition-all",title:"Optimize order",children:m.jsx(l8,{size:18})}),m.jsx("button",{onClick:ss,className:"p-2 rounded-xl glass-light border border-white/10 text-slate-200 hover:bg-white/10 active:scale-95 transition-all",title:"Open in Google Maps",children:m.jsx(YI,{size:18})})]})]}),m.jsx("div",{className:"h-[70vh] w-full rounded-3xl overflow-hidden border-iridescent shadow-2xl",children:m.jsx(dm,{shipments:be,currentLocation:Pn,originLocation:wt,routeGeometry:te,showStopNumbers:!0})}),m.jsxs("div",{className:"glass-strong rounded-2xl border border-white/10 p-4",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Stops"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate",children:"Drag the handle to reorder stops. Numbers on the map update automatically."})]}),bt.active&&m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-amber-300",children:"Reordering"})]}),m.jsx("div",{className:"mt-3 space-y-2 max-h-[32vh] overflow-y-auto",children:Fe.map((re,ye)=>{const Ce=String((re==null?void 0:re.awb)||"").toUpperCase(),je=bt.active&&bt.dragging===Ce,Xe=bt.active&&bt.over===Ce;return m.jsxs("div",{"data-stop-awb":Ce,className:`glass-light rounded-2xl border p-3 flex items-center gap-3 ${Xe?"border-emerald-500/40":"border-white/10"} ${je?"opacity-70":""}`,children:[m.jsx("button",{type:"button",className:"p-2 rounded-xl glass-strong border border-white/10 text-slate-200 active:scale-95 transition-all cursor-grab touch-none",onPointerDown:mt=>An(Ce,mt),title:"Drag to reorder","aria-label":"Drag to reorder",children:m.jsx(qI,{size:18})}),m.jsx("div",{className:"w-9 h-9 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center text-emerald-300 font-black",children:ye+1}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[10px] font-mono font-black text-slate-500 uppercase tracking-widest truncate",children:Ce}),m.jsx("p",{className:"text-sm font-bold text-white truncate mt-1",children:re.recipient_name||"Unknown"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate mt-1",children:re.delivery_address||re.locality||""})]}),m.jsx("button",{onClick:()=>pt(Ce),className:"p-2 rounded-xl glass-light border border-white/10 text-rose-400 hover:bg-rose-500/10 active:scale-95 transition-all",title:"Remove from route",children:m.jsx(Gd,{size:18})})]},Ce||ye)})})]})]}):m.jsx(rs,{mode:"wait",children:Fe.length===0?m.jsxs(et.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(yo,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No stops yet"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Add an AWB above to allocate it to this route"})]}):m.jsx("div",{className:"space-y-3",children:Fe.map((re,ye)=>{var Ce,je;return m.jsx(et.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:ye*.02},className:"glass-strong p-5 rounded-3xl border border-white/10",children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center text-emerald-400 font-black",children:ye+1}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[10px] font-mono font-black text-slate-500 uppercase tracking-widest truncate",children:re.awb}),m.jsx("p",{className:"text-sm font-bold text-white truncate mt-1",children:re.recipient_name||"Unknown"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate mt-1",children:re.delivery_address||re.locality||""}),m.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:[Number.isFinite(Number(re==null?void 0:re.number_of_parcels))?Number(re.number_of_parcels):((Ce=re==null?void 0:re.raw_data)==null?void 0:Ce.numberOfDistinctBarcodes)||((je=re==null?void 0:re.raw_data)==null?void 0:je.numberOfParcels)||1," ","pkg  ",It(re.payment_amount??re.shipping_cost??re.estimated_shipping_cost,re.currency||"RON")]})]}),m.jsx("button",{onClick:()=>pt(re.awb),className:"p-2 rounded-xl glass-light border border-white/10 text-rose-400 hover:bg-rose-500/10 active:scale-95 transition-all",title:"Remove from route",children:m.jsx(Gd,{size:18})})]})},`${re.awb}-${ye}`)})})})}),m.jsx(rM,{open:oe,title:"Add Helper",onClose:()=>se(!1),children:m.jsxs("div",{className:"space-y-3",children:[m.jsx("input",{value:ve,onChange:re=>{ee(re.target.value),pe("")},placeholder:"Helper name (ex: Andrei Popescu)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"}),_e&&m.jsx("div",{className:"text-xs font-bold text-rose-200",children:_e}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{type:"button",onClick:()=>se(!1),className:"flex-1 px-4 py-3 rounded-2xl glass-light border border-white/10 text-slate-200 text-xs font-black uppercase tracking-widest hover:bg-white/10 active:scale-[0.99] transition-all",children:"Cancel"}),m.jsx("button",{type:"button",onClick:ke,className:"flex-1 px-4 py-3 rounded-2xl bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white text-xs font-black uppercase tracking-widest active:scale-[0.99] transition-all",children:"Add"})]})]})})]}):m.jsx("div",{className:"min-h-screen flex items-center justify-center text-slate-400",children:"Route not found."})}const Xl=(e,t)=>{const n=Number(e)||0,i=Number(t)||0;return i?Math.round(n/i*100):0},ql=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString()},Er=(e,t)=>String(e||"").toLowerCase().includes(t),Mn=({label:e,value:t,tone:n="slate"})=>{const i={slate:"bg-slate-500/15 text-slate-300 border-white/10",emerald:"bg-emerald-500/15 text-emerald-300 border-emerald-400/20",rose:"bg-rose-500/15 text-rose-300 border-rose-400/20",violet:"bg-violet-500/15 text-violet-300 border-violet-400/20",amber:"bg-amber-500/15 text-amber-200 border-amber-400/20"};return m.jsxs("div",{className:`px-3 py-2 rounded-2xl border ${i[n]||i.slate}`,children:[m.jsx("div",{className:"text-[9px] font-black uppercase tracking-widest opacity-80",children:e}),m.jsx("div",{className:"text-sm font-black mt-0.5",children:t})]})},Vu=({active:e,icon:t,label:n,onClick:i})=>m.jsxs("button",{type:"button",onClick:i,className:`flex-1 p-3 rounded-2xl border transition-all flex items-center justify-center gap-2 ${e?"bg-gradient-to-br from-violet-600/30 to-purple-600/10 border-violet-400/30 text-white":"bg-slate-900/30 border-white/10 text-slate-300 hover:bg-white/5"}`,children:[m.jsx(t,{size:16,className:e?"text-violet-200":"text-slate-400"}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:n})]});function sM(){const{user:e}=sr(),t=(e==null?void 0:e.token)||localStorage.getItem("token"),n=B.useMemo(()=>["Admin","Manager","Dispatcher","Support","Finance"].includes(e==null?void 0:e.role),[e==null?void 0:e.role]),[i,a]=B.useState(n?"all":"self"),[c,f]=B.useState("trucks"),[g,v]=B.useState(""),[y,C]=B.useState(null),[b,T]=B.useState(!0),[I,z]=B.useState("");B.useEffect(()=>{n||a("self")},[n]);const R=async()=>{var M,q;T(!0),z("");try{const ie=await Bb(t,{scope:i});C(ie)}catch(ie){const ae=((q=(M=ie==null?void 0:ie.response)==null?void 0:M.data)==null?void 0:q.detail)||(ie==null?void 0:ie.message)||"Failed to load analytics";z(String(ae))}finally{T(!1)}};B.useEffect(()=>{R()},[t,i]);const j=B.useMemo(()=>String(g||"").trim().toLowerCase(),[g]),F=B.useMemo(()=>{const M=Array.isArray(y==null?void 0:y.trucks)?y.trucks:[];return j?M.filter(q=>Er(q==null?void 0:q.truck_plate,j)||Er(q==null?void 0:q.truck_phone,j)||Array.isArray(q==null?void 0:q.drivers)&&q.drivers.some(ie=>Er(ie==null?void 0:ie.name,j)||Er(ie==null?void 0:ie.driver_id,j))):M},[y==null?void 0:y.trucks,j]),O=B.useMemo(()=>{const M=Array.isArray(y==null?void 0:y.drivers)?y.drivers:[];return j?M.filter(q=>Er(q==null?void 0:q.name,j)||Er(q==null?void 0:q.driver_id,j)||Er(q==null?void 0:q.truck_plate,j)||Er(q==null?void 0:q.truck_phone,j)||Er(q==null?void 0:q.role,j)):M},[y==null?void 0:y.drivers,j]),k=B.useMemo(()=>{const M=Array.isArray(y==null?void 0:y.awbs)?y.awbs:[];return j?M.filter(q=>Er(q==null?void 0:q.awb,j)||Er(q==null?void 0:q.status,j)||Er(q==null?void 0:q.driver_id,j)):M},[y==null?void 0:y.awbs,j]),W=B.useMemo(()=>{const M=Array.isArray(y==null?void 0:y.events)?y.events:[];return j?M.filter(q=>Er(q==null?void 0:q.event_id,j)||Er(q==null?void 0:q.label,j)||Er(q==null?void 0:q.description,j)):M},[y==null?void 0:y.events,j]),K=(y==null?void 0:y.totals)||{},Y=Number(K==null?void 0:K.updates_total)||0,H=Number(K==null?void 0:K.updates_success)||0,Q=Number(K==null?void 0:K.shipments_total)||0;return m.jsxs(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,y:-20},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-glow-md",children:m.jsx(W_,{size:20,className:"text-white"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-lg font-black text-white leading-none",children:"Statistics"}),m.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mt-1",children:y!=null&&y.generated_at?`Updated ${ql(y.generated_at)}`:"Mobile analytics"})]})]}),m.jsx("button",{type:"button",onClick:R,className:"w-11 h-11 rounded-2xl glass-light border border-white/10 flex items-center justify-center hover:bg-white/5 transition-all","aria-label":"Refresh analytics",children:m.jsx(Ai,{size:18,className:b?"animate-spin text-slate-300":"text-slate-300"})})]}),m.jsxs("div",{className:"mt-5 flex items-center gap-3",children:[m.jsx(Mn,{label:"Shipments",value:Q,tone:"violet"}),m.jsx(Mn,{label:"Updates",value:Y,tone:"slate"}),m.jsx(Mn,{label:"Success",value:`${Xl(H,Y)}%`,tone:"emerald"})]}),m.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[m.jsx("div",{className:"flex-1",children:m.jsxs("div",{className:"relative",children:[m.jsx(Ls,{size:16,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500"}),m.jsx("input",{value:g,onChange:M=>v(M.target.value),placeholder:"Search truck, driver, AWB, ESCH...",className:"w-full pl-11 pr-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-500 focus:outline-none focus:border-violet-500/40 focus:ring-2 focus:ring-violet-500/20 transition-all text-sm font-medium"})]})}),n?m.jsxs("div",{className:"p-1 rounded-2xl bg-slate-900/40 border border-white/10 flex",children:[m.jsx("button",{type:"button",onClick:()=>a("self"),className:`px-3 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${i==="self"?"bg-white/10 text-white":"text-slate-400 hover:text-slate-200"}`,children:"My"}),m.jsx("button",{type:"button",onClick:()=>a("all"),className:`px-3 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${i==="all"?"bg-white/10 text-white":"text-slate-400 hover:text-slate-200"}`,children:"All"})]}):null]}),m.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[m.jsx(Vu,{active:c==="trucks",icon:H1,label:"Trucks",onClick:()=>f("trucks")}),m.jsx(Vu,{active:c==="drivers",icon:va,label:"Drivers",onClick:()=>f("drivers")}),m.jsx(Vu,{active:c==="awbs",icon:Os,label:"AWB",onClick:()=>f("awbs")}),m.jsx(Vu,{active:c==="events",icon:V_,label:"ESCH",onClick:()=>f("events")})]})]}),m.jsx("main",{className:"flex-1 p-6 pb-32 relative z-10",children:m.jsx(rs,{mode:"wait",children:b?m.jsxs(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"glass-strong rounded-3xl border-iridescent p-8 flex items-center justify-center gap-3",children:[m.jsx(pn,{className:"animate-spin text-violet-300",size:20}),m.jsx("span",{className:"text-sm font-black text-white uppercase tracking-wider",children:"Loading analytics"})]},"loading"):I?m.jsx(et.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"bg-rose-500/10 border border-rose-500/30 text-rose-300 px-6 py-5 rounded-3xl font-bold",children:I},"error"):m.jsxs(et.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4",children:[c==="trucks"?m.jsx(m.Fragment,{children:F.length===0?m.jsx("div",{className:"text-slate-400 font-bold text-sm",children:"No trucks found."}):F.map(M=>{const q=Number(M==null?void 0:M.updates_total)||0,ie=Number(M==null?void 0:M.updates_success)||0,ae=(M==null?void 0:M.shipments_by_bucket)||{};return m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-5",children:[m.jsxs("div",{className:"flex items-start justify-between gap-4",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Truck"}),m.jsx("div",{className:"text-xl font-black text-white truncate mt-1",children:(M==null?void 0:M.truck_plate)||"Unassigned"}),m.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["Phone: ",(M==null?void 0:M.truck_phone)||"--","  Drivers: ",Array.isArray(M==null?void 0:M.drivers)?M.drivers.length:0]})]}),m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("div",{className:"p-3 rounded-2xl bg-emerald-500/10 border border-emerald-400/20",children:m.jsx(Nh,{size:18,className:"text-emerald-300"})})})]}),m.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[m.jsx(Mn,{label:"Shipments",value:(M==null?void 0:M.shipments_total)||0,tone:"violet"}),m.jsx(Mn,{label:"Delivered",value:(ae==null?void 0:ae.delivered)||0,tone:"emerald"}),m.jsx(Mn,{label:"Active",value:(ae==null?void 0:ae.active)||0,tone:"amber"})]}),m.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-3",children:[m.jsx(Mn,{label:"Updates",value:q,tone:"slate"}),m.jsx(Mn,{label:"Success",value:`${Xl(ie,q)}%`,tone:"emerald"}),m.jsx(Mn,{label:"Last",value:M!=null&&M.last_update?ql(M.last_update):"--",tone:"slate"})]})]},(M==null?void 0:M.truck_plate)||"unassigned")})}):null,c==="drivers"?m.jsx(m.Fragment,{children:O.length===0?m.jsx("div",{className:"text-slate-400 font-bold text-sm",children:"No drivers found."}):O.map(M=>{const q=Number(M==null?void 0:M.updates_total)||0,ie=Number(M==null?void 0:M.updates_success)||0,ae=(M==null?void 0:M.shipments_by_bucket)||{};return m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-5",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Driver"}),m.jsx("div",{className:"text-xl font-black text-white truncate mt-1",children:(M==null?void 0:M.name)||(M==null?void 0:M.username)||(M==null?void 0:M.driver_id)}),m.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["ID: ",M==null?void 0:M.driver_id,"  ",(M==null?void 0:M.role)||"Role","  Truck: ",(M==null?void 0:M.truck_plate)||"--"]})]})}),m.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[m.jsx(Mn,{label:"Shipments",value:(M==null?void 0:M.shipments_total)||0,tone:"violet"}),m.jsx(Mn,{label:"Delivered",value:(ae==null?void 0:ae.delivered)||0,tone:"emerald"}),m.jsx(Mn,{label:"Active",value:(ae==null?void 0:ae.active)||0,tone:"amber"})]}),m.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-3",children:[m.jsx(Mn,{label:"Updates",value:q,tone:"slate"}),m.jsx(Mn,{label:"Success",value:`${Xl(ie,q)}%`,tone:"emerald"}),m.jsx(Mn,{label:"Last",value:M!=null&&M.last_update?ql(M.last_update):"--",tone:"slate"})]}),m.jsxs("div",{className:"mt-3 text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["Last login: ",M!=null&&M.last_login?ql(M.last_login):"--","  Truck phone: ",(M==null?void 0:M.truck_phone)||"--"]})]},M==null?void 0:M.driver_id)})}):null,c==="awbs"?m.jsx(m.Fragment,{children:k.length===0?m.jsx("div",{className:"text-slate-400 font-bold text-sm",children:"No AWBs found."}):k.map(M=>{const q=Number(M==null?void 0:M.updates_total)||0,ie=Number(M==null?void 0:M.updates_success)||0;return m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-5",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"AWB"}),m.jsx("div",{className:"text-lg font-black text-white truncate mt-1",children:M==null?void 0:M.awb}),m.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["Status: ",(M==null?void 0:M.status)||"--","  Driver: ",(M==null?void 0:M.driver_id)||"--"]})]})}),m.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[m.jsx(Mn,{label:"Updates",value:q,tone:"slate"}),m.jsx(Mn,{label:"Success",value:`${Xl(ie,q)}%`,tone:"emerald"}),m.jsx(Mn,{label:"Last",value:M!=null&&M.last_update?ql(M.last_update):"--",tone:"slate"})]}),m.jsxs("div",{className:"mt-3 text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["ESCH: ",(M==null?void 0:M.last_event_id)||"--","  Outcome: ",(M==null?void 0:M.last_outcome)||"--"]})]},M==null?void 0:M.awb)})}):null,c==="events"?m.jsx(m.Fragment,{children:W.length===0?m.jsx("div",{className:"text-slate-400 font-bold text-sm",children:"No ESCH events found."}):W.map(M=>{const q=Number(M==null?void 0:M.total)||0,ie=Number(M==null?void 0:M.success)||0;return m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-5",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"ESCH"}),m.jsxs("div",{className:"text-lg font-black text-white truncate mt-1",children:[M==null?void 0:M.event_id," ",M!=null&&M.label?` ${M.label}`:""]}),M!=null&&M.description?m.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:M.description}):null]})}),m.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[m.jsx(Mn,{label:"Total",value:q,tone:"slate"}),m.jsx(Mn,{label:"Success",value:`${Xl(ie,q)}%`,tone:"emerald"}),m.jsx(Mn,{label:"Failed",value:Number(M==null?void 0:M.failed)||0,tone:"rose"})]})]},M==null?void 0:M.event_id)})}):null]},c)})})]})}function oM(){const{user:e}=sr(),t=(e==null?void 0:e.token)||localStorage.getItem("token"),[n,i]=B.useState([]),[a,c]=B.useState(!0),[f,g]=B.useState(null),[v,y]=B.useState(""),C=B.useMemo(()=>Array.isArray(n)?n.filter(I=>!(I!=null&&I.read_at)).length:0,[n]),b=async()=>{var I,z;c(!0),y("");try{const R=await J1(t,{limit:100,unread_only:!1});i(Array.isArray(R)?R:[])}catch(R){y(String(((z=(I=R==null?void 0:R.response)==null?void 0:I.data)==null?void 0:z.detail)||(R==null?void 0:R.message)||"Failed to load notifications")),i([])}finally{c(!1)}};B.useEffect(()=>{b()},[]);const T=async I=>{var R,j;const z=I;if(z){g(z);try{const F=await qd(t,z);i(O=>Array.isArray(O)?O.map(k=>String(k==null?void 0:k.id)===String(z)?F:k):O)}catch(F){y(String(((j=(R=F==null?void 0:F.response)==null?void 0:R.data)==null?void 0:j.detail)||(F==null?void 0:F.message)||"Failed to mark read"))}finally{g(null)}}};return m.jsxs(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsxs("h1",{className:"text-xl font-black text-gradient tracking-tight flex items-center gap-2",children:[m.jsx(zc,{size:18,className:"text-violet-300"}),"Notifications"]}),m.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1 truncate",children:[C," unread"]})]}),m.jsx("button",{type:"button",onClick:b,className:`w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10 text-slate-200 hover:bg-white/5 active:scale-95 transition-all ${a?"opacity-60 cursor-not-allowed":""}`,disabled:a,"aria-label":"Refresh",children:m.jsx(Ai,{size:18,className:a?"animate-spin":""})})]}),m.jsxs("main",{className:"flex-1 p-4 pb-32 space-y-3 relative z-10",children:[v?m.jsx("div",{className:"glass-strong p-4 rounded-2xl border border-rose-500/30 text-rose-300 text-sm font-bold",children:v}):null,a?m.jsxs("div",{className:"glass-strong p-6 rounded-3xl border border-white/10 flex items-center gap-3 text-slate-300",children:[m.jsx(pn,{className:"animate-spin",size:18}),m.jsx("span",{className:"text-sm font-bold",children:"Loading..."})]}):null,!a&&(!n||n.length===0)?m.jsxs("div",{className:"text-center py-16 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(zc,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No notifications yet"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Allocation updates will appear here"})]}):null,!a&&Array.isArray(n)?n.map(I=>{const z=!(I!=null&&I.read_at);return m.jsx("div",{className:`glass-strong p-5 rounded-3xl border transition-all ${z?"border-emerald-500/30":"border-white/10 opacity-90"}`,children:m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-sm font-black text-white truncate",children:I.title||"Notification"}),m.jsx("p",{className:"text-xs text-slate-300 font-medium mt-1 break-words",children:I.body||""}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-2",children:[I.created_at?new Date(I.created_at).toLocaleString():"",I.awb?`  ${String(I.awb).toUpperCase()}`:""]})]}),z?m.jsx("button",{type:"button",onClick:()=>T(I.id),disabled:String(f)===String(I.id),className:`p-2 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95 transition-all ${String(f)===String(I.id)?"opacity-60 cursor-not-allowed":""}`,title:"Mark as read",children:m.jsx(G_,{size:18})}):null]})},I.id)}):null]})]})}const xc="Driver",Hu=()=>({driver_id:"",name:"",username:"",password:"",role:xc,active:!0,truck_plate:"",phone_number:"",helper_name:""}),Yf=e=>String(e||"").trim()||xc,Yy=({open:e,title:t,children:n,onClose:i})=>m.jsx(rs,{children:e&&m.jsx(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-end justify-center bg-black/70 backdrop-blur-sm p-4",onClick:i,children:m.jsxs(et.div,{initial:{y:24,opacity:0},animate:{y:0,opacity:1},exit:{y:24,opacity:0},className:"w-full max-w-md glass-strong rounded-3xl border-iridescent p-5 space-y-4",onClick:a=>a.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsx("div",{className:"min-w-0",children:m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:t})}),m.jsx("button",{type:"button",onClick:i,className:"p-2 rounded-2xl glass-light border border-white/10 text-slate-300 hover:text-white active:scale-95 transition-all","aria-label":"Close",children:m.jsx(_a,{size:18})})]}),n]})})});function aM(){const e=wr(),t=Io(),{user:n}=sr(),i=(n==null?void 0:n.token)||localStorage.getItem("token"),a=B.useMemo(()=>Tn(n,W1),[n]),c=B.useMemo(()=>["Admin","Manager","Dispatcher","Support"].includes(String((n==null?void 0:n.role)||"").trim()),[n==null?void 0:n.role]),f=B.useRef(!1),g=B.useMemo(()=>{const te=new URLSearchParams(t.search),le=String(te.get("returnTo")||"").trim();return le.startsWith("/")?le:""},[t.search]),[v,y]=B.useState(!0),[C,b]=B.useState(!1),[T,I]=B.useState(""),[z,R]=B.useState(""),[j,F]=B.useState(""),[O,k]=B.useState([]),[W,K]=B.useState([]),[Y,H]=B.useState(""),[Q,M]=B.useState(!1),[q,ie]=B.useState(Hu),[ae,we]=B.useState(!1),[Ne,oe]=B.useState(null),[se,ve]=B.useState({name:"",username:"",password:"",role:xc,active:!0,truck_plate:"",phone_number:"",helper_name:""}),ee=async()=>{var te,le;y(!0),I("");try{const[De,st]=await Promise.all([Fb(i).catch(()=>null),K1(i)]),Tt=Array.isArray(De)?De:[];k(Tt),K(Array.isArray(st)?st:[])}catch(De){const st=((le=(te=De==null?void 0:De.response)==null?void 0:te.data)==null?void 0:le.detail)||(De==null?void 0:De.message)||"Failed to load users";I(String(st))}finally{y(!1)}};B.useEffect(()=>{ee()},[]),B.useEffect(()=>{if(f.current)return;const te=new URLSearchParams(t.search);if(!["1","true","yes","on"].includes(String(te.get("create")||"").toLowerCase())){f.current=!0;return}if(!a){f.current=!0;return}const De=String(te.get("role")||"").trim();ie(st=>({...Hu(),role:De||st.role||xc})),M(!0),f.current=!0},[t.search,a]);const _e=B.useMemo(()=>O.length>0?O.map(te=>te==null?void 0:te.role).filter(Boolean):[xc,"Admin","Manager","Dispatcher","Warehouse","Support","Finance","Viewer","Recipient"],[O]),pe=B.useMemo(()=>{const te=String(Y||"").trim().toLowerCase(),le=Array.isArray(W)?W:[];return te?le.filter(De=>String((De==null?void 0:De.driver_id)||"").toLowerCase().includes(te)||String((De==null?void 0:De.username)||"").toLowerCase().includes(te)||String((De==null?void 0:De.name)||"").toLowerCase().includes(te)||String((De==null?void 0:De.role)||"").toLowerCase().includes(te)):le},[W,Y]),he=te=>{te&&(oe(te),ve({name:String((te==null?void 0:te.name)||""),username:String((te==null?void 0:te.username)||""),password:"",role:Yf(te==null?void 0:te.role),active:!!(te!=null&&te.active),truck_plate:String((te==null?void 0:te.truck_plate)||""),phone_number:String((te==null?void 0:te.phone_number)||""),helper_name:String((te==null?void 0:te.helper_name)||"")}),we(!0))},Te=async()=>{var te,le;b(!0),I(""),R("");try{const De={driver_id:String(q.driver_id||"").trim(),name:String(q.name||"").trim(),username:String(q.username||"").trim(),password:String(q.password||""),role:Yf(q.role),active:!!q.active,truck_plate:String(q.truck_plate||"").trim(),phone_number:String(q.phone_number||"").trim(),helper_name:String(q.helper_name||"").trim()};if(!De.driver_id||!De.username||!De.name||!De.password){I("driver_id, name, username and password are required.");return}await zb(i,De),R("Account created."),M(!1),ie(Hu()),await ee()}catch(De){const st=((le=(te=De==null?void 0:De.response)==null?void 0:te.data)==null?void 0:le.detail)||(De==null?void 0:De.message)||"Failed to create user";I(String(st))}finally{b(!1)}},ze=async()=>{var te,le;if(Ne!=null&&Ne.driver_id){b(!0),I(""),R("");try{const De={name:String(se.name||"").trim(),username:String(se.username||"").trim(),role:Yf(se.role),active:!!se.active,truck_plate:String(se.truck_plate||"").trim(),phone_number:String(se.phone_number||"").trim(),helper_name:String(se.helper_name||"").trim()},st=String(se.password||"").trim();st&&(De.password=st),await Ub(i,Ne.driver_id,De),R("Account updated."),we(!1),oe(null),await ee()}catch(De){const st=((le=(te=De==null?void 0:De.response)==null?void 0:te.data)==null?void 0:le.detail)||(De==null?void 0:De.message)||"Failed to update user";I(String(st))}finally{b(!1)}}},Le=async te=>{var De,st;if(!c)return;const le=String((te==null?void 0:te.driver_id)||"").trim().toUpperCase();if(!(!le||!i)){F(le),I(""),R("");try{const Tt=await em(i,{driver_id:le,duration_sec:1800}),Wt=Tt==null?void 0:Tt.id;if(Wt){e(`/tracking/${encodeURIComponent(String(Wt))}`);return}R("Tracking request created.")}catch(Tt){const Wt=((st=(De=Tt==null?void 0:Tt.response)==null?void 0:De.data)==null?void 0:st.detail)||(Tt==null?void 0:Tt.message)||"Failed to request tracking";I(String(Wt))}finally{F("")}}};return m.jsxs(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"sticky top-0 z-40 glass-strong backdrop-blur-xl border-b border-white/10 pb-2 shadow-sm",children:[m.jsxs("div",{className:"p-4 flex items-center gap-4",children:[m.jsx("button",{onClick:()=>e(g||-1),className:"p-2 -ml-2 rounded-xl glass-light text-slate-300 hover:text-white transition-colors border border-white/10","aria-label":"Back",children:m.jsx(Ms,{})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h1",{className:"font-black text-xl text-gradient tracking-tight truncate",children:"Users"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1 truncate",children:a?"Create and manage accounts":"Read-only access"})]}),m.jsx("button",{onClick:ee,className:`p-2 rounded-xl glass-light hover:bg-violet-500/20 text-violet-400 transition-all border border-white/10 ${v?"animate-spin":""}`,title:"Refresh",children:m.jsx(Ai,{size:20})}),m.jsx("button",{onClick:()=>{M(!0),ie(Hu())},disabled:!a,className:`p-2 rounded-xl glass-light border border-white/10 transition-all ${a?"text-emerald-300 hover:bg-emerald-500/10 active:scale-95":"text-slate-600 cursor-not-allowed opacity-60"}`,title:a?"Create account":"Not allowed","aria-label":"Create account",children:m.jsx(mc,{size:20})})]}),m.jsx("div",{className:"px-4 pb-3",children:m.jsxs("div",{className:"relative group",children:[m.jsx(Ls,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-violet-400 transition-colors z-10",size:18}),m.jsx("input",{type:"text",placeholder:"Search driver_id, username, name, role...",className:"w-full pl-12 pr-4 py-3.5 glass-strong rounded-2xl outline-none focus:ring-2 focus:ring-violet-500/30 border border-white/10 text-sm font-medium text-white placeholder-slate-500 transition-all",value:Y,onChange:te=>H(te.target.value)})]})})]}),m.jsxs("div",{className:"flex-1 p-4 pb-32 relative z-10 space-y-3",children:[T&&m.jsxs("div",{className:"glass-strong rounded-2xl border border-rose-500/20 p-4 text-rose-200 text-xs font-bold flex items-center gap-3",children:[m.jsx(o8,{size:16,className:"text-rose-300"}),m.jsx("span",{className:"flex-1",children:T})]}),z&&m.jsxs("div",{className:"glass-strong rounded-2xl border border-emerald-500/20 p-4 text-emerald-200 text-xs font-bold flex items-center gap-3",children:[m.jsx(Nh,{size:16,className:"text-emerald-300"}),m.jsx("span",{className:"flex-1",children:z})]}),v?m.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-violet-500/20 blur-xl rounded-full animate-pulse"}),m.jsx(pn,{className:"animate-spin relative z-10 text-violet-400",size:48})]}),m.jsx("p",{className:"mt-6 font-bold text-xs uppercase tracking-widest text-slate-500",children:"Loading users..."})]}):pe.length===0?m.jsxs("div",{className:"text-center py-20 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(ip,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No users"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Try changing your search"})]}):m.jsx("div",{className:"space-y-3",children:pe.map(te=>m.jsx("div",{className:"glass-strong p-5 rounded-3xl border border-white/10 hover:border-violet-500/25 transition-all",children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-2xl bg-violet-500/15 border border-violet-500/20 flex items-center justify-center",children:m.jsx(ip,{size:20,className:"text-violet-300"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center justify-between gap-2",children:[m.jsx("p",{className:"text-sm font-black text-white truncate",children:(te==null?void 0:te.name)||(te==null?void 0:te.username)||(te==null?void 0:te.driver_id)}),m.jsx("span",{className:`text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border ${te!=null&&te.active?"bg-emerald-500/15 text-emerald-300 border-emerald-500/20":"bg-rose-500/15 text-rose-200 border-rose-500/20"}`,children:te!=null&&te.active?"Active":"Inactive"})]}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1 truncate",children:[m.jsx("span",{className:"font-mono text-slate-300",children:te==null?void 0:te.driver_id}),"  ",m.jsx("span",{className:"font-mono",children:te==null?void 0:te.username}),"  ",(te==null?void 0:te.role)||""]}),(te==null?void 0:te.last_login)&&m.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:["Last login: ",new Date(te.last_login).toLocaleString()]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[c&&String((te==null?void 0:te.role)||"")!=="Recipient"?m.jsxs("button",{type:"button",onClick:()=>Le(te),disabled:String(j)===String(String((te==null?void 0:te.driver_id)||"").trim().toUpperCase()),className:`px-3 py-2 rounded-2xl border text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2 ${String(j)===String(String((te==null?void 0:te.driver_id)||"").trim().toUpperCase())?"bg-emerald-500/10 border-emerald-500/20 text-emerald-200 opacity-70 cursor-not-allowed":"bg-emerald-500/15 border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95"}`,title:"Request live location",children:[String(j)===String(String((te==null?void 0:te.driver_id)||"").trim().toUpperCase())?m.jsx(pn,{size:14,className:"animate-spin"}):m.jsx(Rs,{size:14}),"Track"]}):null,m.jsx("button",{type:"button",onClick:()=>he(te),disabled:!a,className:`px-4 py-2 rounded-2xl border text-[10px] font-black uppercase tracking-widest transition-all ${a?"bg-white/5 border-white/10 text-slate-200 hover:bg-white/10 active:scale-95":"bg-slate-900/30 border-white/5 text-slate-600 cursor-not-allowed opacity-60"}`,title:a?"Edit":"Not allowed",children:"Edit"})]})]})},(te==null?void 0:te.driver_id)||(te==null?void 0:te.id)))})]}),m.jsx(Yy,{open:Q,title:"Create Account",onClose:()=>{C||M(!1)},children:m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsx("input",{value:q.driver_id,onChange:te=>ie(le=>({...le,driver_id:te.target.value})),placeholder:"driver_id (ex: D004)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30 font-mono"}),m.jsx("input",{value:q.username,onChange:te=>ie(le=>({...le,username:te.target.value})),placeholder:"username",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"})]}),m.jsx("input",{value:q.name,onChange:te=>ie(le=>({...le,name:te.target.value})),placeholder:"Full name",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"}),m.jsx("input",{value:q.password,onChange:te=>ie(le=>({...le,password:te.target.value})),placeholder:"Temporary password",type:"password",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsx("select",{value:q.role,onChange:te=>ie(le=>({...le,role:te.target.value})),className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white outline-none focus:ring-2 focus:ring-emerald-500/30",children:_e.map(te=>m.jsx("option",{value:te,children:te},te))}),m.jsxs("label",{className:"flex items-center gap-2 px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white select-none",children:[m.jsx("input",{type:"checkbox",checked:q.active,onChange:te=>ie(le=>({...le,active:te.target.checked}))}),m.jsx("span",{className:"text-xs font-bold",children:"Active"})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsx("input",{value:q.truck_plate,onChange:te=>ie(le=>({...le,truck_plate:te.target.value})),placeholder:"Truck plate (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30 font-mono"}),m.jsx("input",{value:q.phone_number,onChange:te=>ie(le=>({...le,phone_number:te.target.value})),placeholder:"Truck phone (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"})]}),m.jsx("input",{value:q.helper_name,onChange:te=>ie(le=>({...le,helper_name:te.target.value})),placeholder:"Default helper name (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"}),m.jsxs("button",{type:"button",onClick:Te,disabled:!a||C,className:`w-full btn-premium py-4 rounded-2xl font-black uppercase tracking-widest flex items-center justify-center gap-2 shadow-lg transition-all ${!a||C?"bg-slate-800/40 text-slate-500 cursor-not-allowed opacity-70":"bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white active:scale-[0.99]"}`,children:[C?m.jsx(pn,{className:"animate-spin",size:18}):m.jsx(ey,{size:18}),"Create"]})]})}),m.jsx(Yy,{open:ae,title:`Edit Account  ${(Ne==null?void 0:Ne.driver_id)||""}`,onClose:()=>{C||we(!1)},children:m.jsxs("div",{className:"space-y-3",children:[m.jsx("input",{value:se.name,onChange:te=>ve(le=>({...le,name:te.target.value})),placeholder:"Full name",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"}),m.jsx("input",{value:se.username,onChange:te=>ve(le=>({...le,username:te.target.value})),placeholder:"username",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"}),m.jsx("input",{value:se.password,onChange:te=>ve(le=>({...le,password:te.target.value})),placeholder:"New password (optional)",type:"password",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsx("select",{value:se.role,onChange:te=>ve(le=>({...le,role:te.target.value})),className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white outline-none focus:ring-2 focus:ring-violet-500/30",children:_e.map(te=>m.jsx("option",{value:te,children:te},te))}),m.jsxs("label",{className:"flex items-center gap-2 px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white select-none",children:[m.jsx("input",{type:"checkbox",checked:se.active,onChange:te=>ve(le=>({...le,active:te.target.checked}))}),m.jsx("span",{className:"text-xs font-bold",children:"Active"})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsx("input",{value:se.truck_plate,onChange:te=>ve(le=>({...le,truck_plate:te.target.value})),placeholder:"Truck plate (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30 font-mono"}),m.jsx("input",{value:se.phone_number,onChange:te=>ve(le=>({...le,phone_number:te.target.value})),placeholder:"Truck phone (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"})]}),m.jsx("input",{value:se.helper_name,onChange:te=>ve(le=>({...le,helper_name:te.target.value})),placeholder:"Default helper name (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"}),m.jsxs("button",{type:"button",onClick:ze,disabled:!a||C,className:`w-full btn-premium py-4 rounded-2xl font-black uppercase tracking-widest flex items-center justify-center gap-2 shadow-lg transition-all ${!a||C?"bg-slate-800/40 text-slate-500 cursor-not-allowed opacity-70":"bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white active:scale-[0.99]"}`,children:[C?m.jsx(pn,{className:"animate-spin",size:18}):m.jsx(ey,{size:18}),"Save Changes"]})]})})]})}const Wu=e=>{try{return new Date(e).toLocaleString()}catch{return""}};function lM(){const e=wr(),{requestId:t}=v1(),{user:n}=sr(),i=(n==null?void 0:n.token)||localStorage.getItem("token"),[a,c]=B.useState(null),[f,g]=B.useState(null),[v,y]=B.useState(!0),[C,b]=B.useState(!1),[T,I]=B.useState(""),[z,R]=B.useState(""),j=B.useMemo(()=>{const W=String((n==null?void 0:n.driver_id)||"").trim();return!W||!(a!=null&&a.id)?!1:W===String((a==null?void 0:a.created_by_user_id)||"").trim()||W===String((a==null?void 0:a.target_driver_id)||"").trim()},[n==null?void 0:n.driver_id,a==null?void 0:a.id,a==null?void 0:a.created_by_user_id,a==null?void 0:a.target_driver_id]),F=async({withDetails:W=!0}={})=>{var K,Y,H,Q;if(i){I("");try{let M=a;if(W){const q=await Xb(i,t);c(q),M=q}try{const q=await qb(i,t);g(q),R("")}catch(q){const ie=String(((Y=(K=q==null?void 0:q.response)==null?void 0:K.data)==null?void 0:Y.detail)||(q==null?void 0:q.message)||"");g(null);const ae=String((M==null?void 0:M.status)||"").trim();ae==="Pending"?R("Waiting for driver to accept..."):ae==="Denied"?R("Driver denied the request."):ae==="Stopped"?R("Tracking was stopped."):ae==="Accepted"&&ie.toLowerCase().includes("no location")?R("Waiting for first GPS update..."):R(ie||"No location yet")}}catch(M){I(String(((Q=(H=M==null?void 0:M.response)==null?void 0:H.data)==null?void 0:Q.detail)||(M==null?void 0:M.message)||"Failed to load tracking")),c(null),g(null)}finally{y(!1)}}};B.useEffect(()=>{y(!0),F({withDetails:!0})},[t,i]),B.useEffect(()=>{if(!i)return;const W=setInterval(()=>F({withDetails:!1}),5e3),K=setInterval(()=>F({withDetails:!0}),2e4);return()=>{clearInterval(W),clearInterval(K)}},[t,i]);const O=async()=>{var W,K;if(!(!j||!(a!=null&&a.id)||!i)){b(!0),I("");try{const Y=await tm(i,a.id);c(Y||a)}catch(Y){I(String(((K=(W=Y==null?void 0:Y.response)==null?void 0:W.data)==null?void 0:K.detail)||(Y==null?void 0:Y.message)||"Failed to stop tracking"))}finally{b(!1)}}},k=f?{lat:Number(f.latitude),lon:Number(f.longitude)}:null;return m.jsxs(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{className:"min-w-0 flex items-center gap-3",children:[m.jsx("button",{type:"button",onClick:()=>e(-1),className:"w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10 text-slate-200 hover:bg-white/5 active:scale-95 transition-all","aria-label":"Back",children:m.jsx(Ms,{size:18})}),m.jsxs("div",{className:"min-w-0",children:[m.jsxs("h1",{className:"text-xl font-black text-gradient tracking-tight flex items-center gap-2",children:[m.jsx(Rs,{size:18,className:"text-emerald-300"}),"Live Tracking"]}),m.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1 truncate",children:["Request #",t]})]})]}),m.jsx("button",{type:"button",onClick:()=>F({withDetails:!0}),className:`w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10 text-slate-200 hover:bg-white/5 active:scale-95 transition-all ${v?"opacity-60 cursor-not-allowed":""}`,disabled:v,"aria-label":"Refresh",children:m.jsx(Ai,{size:18,className:v?"animate-spin":""})})]}),m.jsxs("main",{className:"flex-1 p-4 pb-32 space-y-3 relative z-10",children:[T?m.jsx("div",{className:"glass-strong p-4 rounded-2xl border border-rose-500/30 text-rose-300 text-sm font-bold",children:T}):null,v?m.jsxs("div",{className:"glass-strong p-6 rounded-3xl border border-white/10 flex items-center gap-3 text-slate-300",children:[m.jsx(pn,{className:"animate-spin",size:18}),m.jsx("span",{className:"text-sm font-bold",children:"Loading..."})]}):null,a?m.jsxs("div",{className:"glass-strong p-5 rounded-3xl border border-white/10 space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-xs text-slate-500 font-black uppercase tracking-widest",children:"Status"}),m.jsx("p",{className:"text-sm font-black text-white truncate",children:String(a.status||"")})]}),j&&String(a.status||"")==="Accepted"?m.jsxs("button",{type:"button",onClick:O,disabled:C,className:`px-4 py-2 rounded-2xl text-[10px] font-black uppercase tracking-widest border transition-all ${C?"opacity-60 cursor-not-allowed bg-slate-900/40 border-white/10 text-slate-400":"bg-rose-500/15 border-rose-500/20 text-rose-200 hover:bg-rose-500/20 active:scale-95"}`,title:"Stop tracking",children:[C?m.jsx(pn,{size:14,className:"animate-spin inline-block mr-1 -mt-0.5"}):m.jsx(eb,{size:14,className:"inline-block mr-1 -mt-0.5"}),"Stop"]}):null]}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["Created: ",a.created_at?Wu(a.created_at):"--",a.awb?`  AWB ${String(a.awb).toUpperCase()}`:""]}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["Driver: ",a.target_driver_name?String(a.target_driver_name).trim():String(a.target_driver_id||"--"),a.target_truck_plate?`  Truck ${String(a.target_truck_plate).toUpperCase()}`:"",a.target_truck_phone?`  Phone ${a.target_truck_phone}`:""]}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["Expires: ",a.expires_at?Wu(a.expires_at):"--",a.last_location_at?`  Last update ${Wu(a.last_location_at)}`:""]})]}):null,m.jsxs("div",{className:"glass-strong p-4 rounded-3xl border border-white/10",children:[m.jsx(dm,{shipments:[],routeGeometry:null,currentLocation:k,originLocation:null,showStopNumbers:!1,currentLocationLabel:"Truck location"}),m.jsx("div",{className:"mt-3 text-xs text-slate-300 font-bold",children:f!=null&&f.timestamp?`Last GPS: ${Wu(f.timestamp)}`:z||"Waiting for driver location..."})]})]})]})}const Xy=e=>{try{return new Date(e).toLocaleString()}catch{return""}};function cM(){const e=wr(),{user:t}=sr(),n=(t==null?void 0:t.token)||localStorage.getItem("token"),[i,a]=B.useState([]),[c,f]=B.useState(!0),[g,v]=B.useState(""),[y,C]=B.useState(""),[b,T]=B.useState(!1),I=B.useMemo(()=>(Array.isArray(i)?i:[]).reduce((j,F)=>j+(Number(F==null?void 0:F.unread_count)||0),0),[i]),z=async()=>{var j,F;if(n){f(!0),v("");try{const O=await $b(n,{limit:100});a(Array.isArray(O)?O:[])}catch(O){a([]),v(String(((F=(j=O==null?void 0:O.response)==null?void 0:j.data)==null?void 0:F.detail)||(O==null?void 0:O.message)||"Failed to load chat"))}finally{f(!1)}}};B.useEffect(()=>{if(z(),!n)return;const j=setInterval(()=>z(),15e3);return()=>clearInterval(j)},[n]);const R=async()=>{var F,O;if(!n)return;const j=String(y||"").trim().toUpperCase();if(j){T(!0),v("");try{const k=await nm(n,{awb:j});k!=null&&k.id?e(`/chat/${encodeURIComponent(String(k.id))}`):v("Failed to open chat")}catch(k){v(String(((O=(F=k==null?void 0:k.response)==null?void 0:F.data)==null?void 0:O.detail)||(k==null?void 0:k.message)||"Failed to open chat"))}finally{T(!1)}}};return m.jsxs(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsxs("h1",{className:"text-xl font-black text-gradient tracking-tight flex items-center gap-2",children:[m.jsx(Uc,{size:18,className:"text-violet-300"}),"Chat"]}),m.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1 truncate",children:[I," unread"]})]}),m.jsx("button",{type:"button",onClick:z,className:`w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10 text-slate-200 hover:bg-white/5 active:scale-95 transition-all ${c?"opacity-60 cursor-not-allowed":""}`,disabled:c,"aria-label":"Refresh",children:m.jsx(Ai,{size:18,className:c?"animate-spin":""})})]}),m.jsxs("main",{className:"flex-1 p-4 pb-32 space-y-3 relative z-10",children:[g?m.jsx("div",{className:"glass-strong p-4 rounded-2xl border border-rose-500/30 text-rose-300 text-sm font-bold",children:g}):null,m.jsxs("div",{className:"glass-strong p-4 rounded-3xl border border-white/10 space-y-3",children:[m.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Open chat by AWB"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:"flex-1 flex items-center gap-2 glass-light rounded-2xl border border-white/10 px-3 py-3",children:[m.jsx(Ls,{size:16,className:"text-slate-500"}),m.jsx("input",{value:y,onChange:j=>C(j.target.value),placeholder:"Enter AWB (e.g. AWB123...)",className:"w-full bg-transparent outline-none text-sm font-bold text-white placeholder:text-slate-600"})]}),m.jsx("button",{type:"button",onClick:R,disabled:b,className:`w-12 h-12 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95 transition-all flex items-center justify-center ${b?"opacity-60 cursor-not-allowed":""}`,title:"Open",children:b?m.jsx(pn,{size:18,className:"animate-spin"}):m.jsx(Wd,{size:18})})]}),m.jsx("div",{className:"text-[11px] font-bold text-slate-400",children:"Tip: recipients can also open chat from the shipment details screen, then pin the delivery location."})]}),c?m.jsxs("div",{className:"glass-strong p-6 rounded-3xl border border-white/10 flex items-center gap-3 text-slate-300",children:[m.jsx(pn,{className:"animate-spin",size:18}),m.jsx("span",{className:"text-sm font-bold",children:"Loading..."})]}):null,!c&&(!i||i.length===0)?m.jsxs("div",{className:"text-center py-16 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(Uc,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No conversations yet"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Open a chat by AWB to start messaging"})]}):null,!c&&Array.isArray(i)?i.map(j=>{const F=Number(j==null?void 0:j.unread_count)||0;return m.jsx("button",{type:"button",onClick:()=>e(`/chat/${encodeURIComponent(String(j.id))}`),className:"w-full text-left glass-strong p-5 rounded-3xl border border-white/10 hover:bg-white/5 transition-all",children:m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-sm font-black text-white truncate",children:j!=null&&j.awb?String(j.awb).toUpperCase():(j==null?void 0:j.subject)||"Chat"}),m.jsx("p",{className:"text-xs text-slate-300 font-medium mt-1 break-words",children:String((j==null?void 0:j.last_message_preview)||"No messages yet")}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-2",children:j!=null&&j.last_message_at?`Last: ${Xy(j.last_message_at)}`:j!=null&&j.created_at?`Created: ${Xy(j.created_at)}`:""})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[F>0?m.jsx("div",{className:"px-2.5 py-1 rounded-full bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 text-[10px] font-black uppercase tracking-widest",children:F}):null,m.jsx("div",{className:"w-10 h-10 rounded-2xl glass-light border border-white/10 flex items-center justify-center text-slate-400",children:m.jsx(Wd,{size:18})})]})]})},j.id)}):null]})]})}delete Mo.Icon.Default.prototype._getIconUrl;Mo.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Xf=e=>{try{return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}},qy=e=>{try{return new Date(e).toLocaleDateString()}catch{return""}},Ky=(e,t)=>{const n=Number(e),i=Number(t);return!Number.isFinite(n)||!Number.isFinite(i)?null:`https://www.openstreetmap.org/?mlat=${encodeURIComponent(String(n))}&mlon=${encodeURIComponent(String(i))}#map=18/${encodeURIComponent(String(n))}/${encodeURIComponent(String(i))}`},uM=({onPick:e})=>(R6({click(t){e==null||e({lat:t.latlng.lat,lon:t.latlng.lng,source:"map"})}}),null),dM=({center:e})=>{const t=Fh();return B.useEffect(()=>{if(e)try{t.setView(e,t.getZoom())}catch{}},[e,t]),null};function hM({open:e,onClose:t,shipment:n,onConfirm:i}){const[a,c]=B.useState(""),[f,g]=B.useState(""),[v,y]=B.useState(null),[C,b]=B.useState("manual"),[T,I]=B.useState(!1),[z,R]=B.useState(!1),[j,F]=B.useState(""),O=B.useMemo(()=>oa(n),[n]),k=B.useMemo(()=>{var ae;const H=(n==null?void 0:n.recipient_pin)||((ae=n==null?void 0:n.raw_data)==null?void 0:ae.recipientPin)||null,Q=Number((H==null?void 0:H.latitude)??(H==null?void 0:H.lat)),M=Number((H==null?void 0:H.longitude)??(H==null?void 0:H.lon)??(H==null?void 0:H.lng));if(Qe(Q)&&Qe(M))return{lat:Q,lon:M};const q=Number(n==null?void 0:n.latitude),ie=Number(n==null?void 0:n.longitude);return Qe(q)&&Qe(ie)?{lat:q,lon:ie}:{lat:44.4268,lon:26.1025}},[n]);B.useEffect(()=>{e&&(c(O),g(""),y(k),b("extracted"),F(""))},[e,O,k]);const W=async()=>{I(!0),F("");try{if(!navigator.geolocation)throw new Error("Geolocation is not supported");const H=await new Promise((q,ie)=>{navigator.geolocation.getCurrentPosition(ae=>q(ae.coords),ae=>ie(new Error((ae==null?void 0:ae.message)||"GPS error")),{enableHighAccuracy:!0,timeout:8e3,maximumAge:0})}),Q=Number(H==null?void 0:H.latitude),M=Number(H==null?void 0:H.longitude);if(!Qe(Q)||!Qe(M))throw new Error("Invalid GPS coordinates");y({lat:Q,lon:M}),b("gps")}catch(H){F(String((H==null?void 0:H.message)||"Failed to detect GPS"))}finally{I(!1)}},K=async()=>{const H=String(a||"").trim();if(H){R(!0),F("");try{const Q=await $d(H);if(!Q||!Qe(Q.lat)||!Qe(Q.lon))throw new Error("Address not found");y({lat:Number(Q.lat),lon:Number(Q.lon)}),b("geocode")}catch(Q){F(String((Q==null?void 0:Q.message)||"Search failed"))}finally{R(!1)}}},Y=()=>{if(!v||!Qe(v.lat)||!Qe(v.lon)){F("Pick a valid location");return}i==null||i({latitude:Number(v.lat),longitude:Number(v.lon),source:C||"manual",address:String(a||"").trim()||null,note:String(f||"").trim()||null})};return m.jsx(rs,{children:e?m.jsx(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[80] flex items-end justify-center bg-black/60 backdrop-blur-sm p-4",onClick:t,children:m.jsxs(et.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},exit:{y:30,opacity:0},className:"w-full max-w-md glass-strong rounded-3xl border-iridescent p-5 space-y-4",onClick:H=>H.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Pin delivery location"}),m.jsx("p",{className:"text-sm font-black text-white truncate",children:n!=null&&n.awb?String(n.awb).toUpperCase():"Shipment"})]}),m.jsx("button",{type:"button",onClick:t,className:"w-11 h-11 rounded-2xl glass-light border border-white/10 flex items-center justify-center hover:bg-white/5 transition-all","aria-label":"Close",children:m.jsx(_a,{size:18,className:"text-slate-300"})})]}),j?m.jsx("div",{className:"glass-light p-3 rounded-2xl border border-rose-500/30 text-rose-200 text-xs font-bold",children:j}):null,m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:"flex-1 flex items-center gap-2 glass-light rounded-2xl border border-white/10 px-3 py-3",children:[m.jsx(Ls,{size:16,className:"text-slate-500"}),m.jsx("input",{value:a,onChange:H=>c(H.target.value),placeholder:"Search address",className:"w-full bg-transparent outline-none text-sm font-bold text-white placeholder:text-slate-600"})]}),m.jsx("button",{type:"button",onClick:K,disabled:z,className:`w-12 h-12 rounded-2xl bg-violet-500/15 border border-violet-500/20 text-violet-200 hover:bg-violet-500/20 active:scale-95 transition-all flex items-center justify-center ${z?"opacity-60 cursor-not-allowed":""}`,title:"Search",children:z?m.jsx(pn,{size:18,className:"animate-spin"}):m.jsx(Ls,{size:18})}),m.jsx("button",{type:"button",onClick:W,disabled:T,className:`w-12 h-12 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95 transition-all flex items-center justify-center ${T?"opacity-60 cursor-not-allowed":""}`,title:"Use GPS",children:T?m.jsx(pn,{size:18,className:"animate-spin"}):m.jsx(ZI,{size:18})})]}),m.jsx("div",{className:"text-[11px] font-bold text-slate-400",children:"Move the marker to the exact place where the truck should deliver."})]}),m.jsx("div",{className:"h-[260px] w-full rounded-3xl overflow-hidden shadow-inner border border-white/20",children:m.jsxs(AC,{center:[(v==null?void 0:v.lat)||k.lat,(v==null?void 0:v.lon)||k.lon],zoom:16,style:{height:"100%",width:"100%"},zoomControl:!1,children:[m.jsx(EC,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors  <a href="https://carto.com/attributions">CARTO</a>'}),m.jsx(dM,{center:[(v==null?void 0:v.lat)||k.lat,(v==null?void 0:v.lon)||k.lon]}),m.jsx(uM,{onPick:H=>{y({lat:H.lat,lon:H.lon}),b(H.source||"map")}}),v?m.jsx(ud,{position:[v.lat,v.lon],draggable:!0,eventHandlers:{dragend:H=>{var Q,M;try{const q=(M=(Q=H==null?void 0:H.target)==null?void 0:Q.getLatLng)==null?void 0:M.call(Q),ie=Number(q==null?void 0:q.lat),ae=Number(q==null?void 0:q.lng);if(!Number.isFinite(ie)||!Number.isFinite(ae))return;y({lat:ie,lon:ae}),b("drag")}catch{}}}}):null]})}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"glass-light p-3 rounded-2xl border border-white/10",children:[m.jsx("div",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Latitude"}),m.jsx("div",{className:"text-sm font-black text-white font-mono truncate",children:v?String(Number(v.lat).toFixed(6)):"--"})]}),m.jsxs("div",{className:"glass-light p-3 rounded-2xl border border-white/10",children:[m.jsx("div",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Longitude"}),m.jsx("div",{className:"text-sm font-black text-white font-mono truncate",children:v?String(Number(v.lon).toFixed(6)):"--"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"Note (optional)"}),m.jsx("textarea",{value:f,onChange:H=>g(H.target.value),rows:2,placeholder:"Gate code, building entrance, landmark...",className:"w-full glass-light rounded-2xl border border-white/10 p-3 text-sm font-bold text-white placeholder:text-slate-600 outline-none"})]}),m.jsxs("button",{type:"button",onClick:Y,className:"w-full btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm",children:[m.jsx(Rs,{size:16}),"Send pinned location"]}),m.jsxs("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["Source: ",String(C||"manual")]})]})}):null})}function fM(){var ve;const e=wr(),{threadId:t}=v1(),{user:n}=sr(),i=(n==null?void 0:n.token)||localStorage.getItem("token"),a=String((n==null?void 0:n.driver_id)||"").trim(),c=String((n==null?void 0:n.role)||"")==="Recipient",[f,g]=B.useState(null),[v,y]=B.useState(null),[C,b]=B.useState([]),[T,I]=B.useState(!0),[z,R]=B.useState(""),[j,F]=B.useState(""),[O,k]=B.useState(!1),[W,K]=B.useState(!1),Y=B.useRef(null),H=B.useMemo(()=>{const ee=Array.isArray(C)?C:[],_e=ee.length?ee[ee.length-1]:null;return _e!=null&&_e.id?Number(_e.id):0},[C]),Q=()=>{var ee,_e;try{(_e=(ee=Y.current)==null?void 0:ee.scrollIntoView)==null||_e.call(ee,{behavior:"smooth"})}catch{}},M=async({withThread:ee=!1}={})=>{var _e,pe;if(i){R("");try{if(ee){const Le=await Jb(i,t);if(g(Le),Le!=null&&Le.awb)try{const te=await Vc(i,Le.awb,{refresh:!1});y(te||null)}catch{y(null)}else y(null)}const he=await eC(i,t,{limit:80}),Te=Array.isArray(he)?he:[];b(Te);const ze=Te.length?Te[Te.length-1]:null;ze!=null&&ze.id&&await tC(i,t,{last_read_message_id:Number(ze.id)}).catch(()=>{})}catch(he){R(String(((pe=(_e=he==null?void 0:he.response)==null?void 0:_e.data)==null?void 0:pe.detail)||(he==null?void 0:he.message)||"Failed to load chat"))}finally{I(!1)}}};B.useEffect(()=>{I(!0),M({withThread:!0})},[t,i]),B.useEffect(()=>{if(!i)return;const ee=setInterval(()=>M({withThread:!1}),5e3),_e=setInterval(()=>M({withThread:!0}),3e4);return()=>{clearInterval(ee),clearInterval(_e)}},[t,i]),B.useEffect(()=>{Q()},[H]);const q=async()=>{var _e,pe;if(!i)return;const ee=String(j||"").trim();if(ee){k(!0),R("");try{const he=await hp(i,t,{message_type:"text",text:ee});F(""),b(Te=>[...Array.isArray(Te)?Te:[],he].filter(Boolean)),Q()}catch(he){R(String(((pe=(_e=he==null?void 0:he.response)==null?void 0:_e.data)==null?void 0:pe.detail)||(he==null?void 0:he.message)||"Failed to send"))}finally{k(!1)}}},ie=async({latitude:ee,longitude:_e,source:pe,address:he,note:Te})=>{var ze,Le;if(i){k(!0),R("");try{const te=await hp(i,t,{message_type:"location",text:null,data:{latitude:ee,longitude:_e,source:pe,address:he,note:Te}});K(!1),b(le=>[...Array.isArray(le)?le:[],te].filter(Boolean)),Q()}catch(te){R(String(((Le=(ze=te==null?void 0:te.response)==null?void 0:ze.data)==null?void 0:Le.detail)||(te==null?void 0:te.message)||"Failed to send location"))}finally{k(!1)}}},ae=f!=null&&f.awb?String(f.awb).toUpperCase():`Thread #${String(t)}`,we=(v==null?void 0:v.recipient_pin)||((ve=v==null?void 0:v.raw_data)==null?void 0:ve.recipientPin)||null,Ne=Number((we==null?void 0:we.latitude)??(we==null?void 0:we.lat)),oe=Number((we==null?void 0:we.longitude)??(we==null?void 0:we.lon)??(we==null?void 0:we.lng)),se=Qe(Ne)&&Qe(oe)?Ky(Ne,oe):null;return m.jsxs(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{className:"min-w-0 flex items-center gap-3",children:[m.jsx("button",{type:"button",onClick:()=>e(-1),className:"w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10 text-slate-200 hover:bg-white/5 active:scale-95 transition-all","aria-label":"Back",children:m.jsx(Ms,{size:18})}),m.jsxs("div",{className:"min-w-0",children:[m.jsx("h1",{className:"text-lg font-black text-white truncate",children:ae}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-1 truncate",children:f!=null&&f.last_message_at?`Last message ${Xf(f.last_message_at)}`:f!=null&&f.created_at?`Created ${qy(f.created_at)}`:""})]})]}),c?m.jsxs("button",{type:"button",onClick:()=>K(!0),className:"px-4 h-11 rounded-2xl border text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 transition-all bg-emerald-500/15 border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95",title:"Pin delivery location",children:[m.jsx(Rs,{size:16}),"Pin"]}):null]}),m.jsxs("main",{className:"flex-1 p-4 pb-32 space-y-3 relative z-10",children:[z?m.jsx("div",{className:"glass-strong p-4 rounded-2xl border border-rose-500/30 text-rose-300 text-sm font-bold",children:z}):null,se?m.jsx("div",{className:"glass-strong p-4 rounded-3xl border border-emerald-500/20",children:m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Current pinned location"}),m.jsxs("div",{className:"text-sm font-black text-white font-mono truncate",children:[Number(Ne).toFixed(6),", ",Number(oe).toFixed(6)]}),we!=null&&we.note?m.jsx("div",{className:"text-xs font-bold text-slate-300 mt-1 break-words",children:String(we.note)}):null,we!=null&&we.updated_at?m.jsxs("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-2",children:["Updated ",Xf(we.updated_at)," ",qy(we.updated_at)]}):null]}),m.jsx("a",{href:se,target:"_blank",rel:"noreferrer",className:"px-3 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 text-[10px] font-black uppercase tracking-widest hover:bg-emerald-500/20 active:scale-95 transition-all whitespace-nowrap",title:"Open in OpenStreetMap",children:"Open map"})]})}):null,T?m.jsxs("div",{className:"glass-strong p-6 rounded-3xl border border-white/10 flex items-center gap-3 text-slate-300",children:[m.jsx(pn,{className:"animate-spin",size:18}),m.jsx("span",{className:"text-sm font-bold",children:"Loading..."})]}):null,m.jsxs("div",{className:"space-y-2",children:[(Array.isArray(C)?C:[]).map(ee=>{const _e=String((ee==null?void 0:ee.sender_user_id)||"").trim()===a,pe=String((ee==null?void 0:ee.message_type)||"text").toLowerCase(),he=ee!=null&&ee.data&&typeof ee.data=="object"?ee.data:null,Te=Number((he==null?void 0:he.latitude)??(he==null?void 0:he.lat)),ze=Number((he==null?void 0:he.longitude)??(he==null?void 0:he.lon)??(he==null?void 0:he.lng)),Le=pe==="location"&&Qe(Te)&&Qe(ze)?Ky(Te,ze):null;return m.jsx("div",{className:`flex ${_e?"justify-end":"justify-start"}`,children:m.jsxs("div",{className:`max-w-[85%] rounded-3xl border px-4 py-3 ${_e?"bg-sky-500/15 border-sky-500/20 text-white":"glass-strong border-white/10 text-slate-100"}`,children:[m.jsxs("div",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 flex items-center justify-between gap-3",children:[m.jsx("span",{className:"truncate",children:_e?"You":(ee==null?void 0:ee.sender_role)||"User"}),m.jsx("span",{className:"whitespace-nowrap",children:ee!=null&&ee.created_at?Xf(ee.created_at):""})]}),pe==="location"?m.jsxs("div",{className:"mt-2 space-y-2",children:[m.jsxs("div",{className:"text-sm font-black flex items-center gap-2",children:[m.jsx(Rs,{size:16,className:"text-emerald-300"}),"Pinned location"]}),Le?m.jsx("a",{href:Le,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 text-[10px] font-black uppercase tracking-widest hover:bg-emerald-500/20 active:scale-95 transition-all",children:"Open map"}):null,m.jsx("div",{className:"text-xs font-bold text-slate-200 font-mono",children:Qe(Te)&&Qe(ze)?`${Te.toFixed(6)}, ${ze.toFixed(6)}`:"Coordinates unavailable"}),he!=null&&he.note?m.jsx("div",{className:"text-xs font-bold text-slate-200 break-words",children:String(he.note)}):null]}):m.jsx("div",{className:"mt-2 text-sm font-bold break-words",children:String((ee==null?void 0:ee.text)||"")})]})},ee==null?void 0:ee.id)}),m.jsx("div",{ref:Y})]})]}),m.jsx("div",{className:"fixed bottom-[calc(5rem+env(safe-area-inset-bottom))] left-0 right-0 z-[70] px-4",children:m.jsx("div",{className:"max-w-xl mx-auto",children:m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-3 shadow-2xl flex items-center gap-2",children:[m.jsx("input",{value:j,onChange:ee=>F(ee.target.value),placeholder:"Type a message...",className:"flex-1 bg-transparent outline-none text-sm font-bold text-white placeholder:text-slate-600 px-3 py-3",onKeyDown:ee=>{ee.key==="Enter"&&!ee.shiftKey&&(ee.preventDefault(),q())}}),m.jsx("button",{type:"button",onClick:q,disabled:O,className:`w-12 h-12 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95 transition-all flex items-center justify-center ${O?"opacity-60 cursor-not-allowed":""}`,title:"Send",children:O?m.jsx(pn,{size:18,className:"animate-spin"}):m.jsx(i8,{size:18})})]})})}),m.jsx(hM,{open:W,onClose:()=>K(!1),shipment:v||{awb:f==null?void 0:f.awb},onConfirm:ie})]})}const mi=({children:e,allowedRoles:t,allowedPermissions:n})=>{const{user:i,loading:a}=sr();return a?m.jsx("div",{children:"Loading..."}):i?t&&!t.includes(i.role)?m.jsx(rd,{to:"/",replace:!0}):n&&!f8(i,n)?m.jsx(rd,{to:"/",replace:!0}):e:m.jsx(rd,{to:"/login",replace:!0})};function pM(){return m.jsx(vE,{children:m.jsx(mM,{})})}const mM=()=>{const e=Io();return m.jsx(rs,{mode:"wait",children:m.jsxs(fE,{location:e,children:[m.jsx(Xn,{path:"/login",element:m.jsx(t6,{})}),m.jsx(Xn,{path:"/signup",element:m.jsx(n6,{})}),m.jsxs(Xn,{element:m.jsx(mi,{children:m.jsx(ok,{})}),children:[m.jsx(Xn,{path:"/",element:m.jsx(jy,{})}),m.jsx(Xn,{path:"/home",element:m.jsx(jy,{})}),m.jsx(Xn,{path:"/history",element:m.jsx(mi,{allowedPermissions:[yi],children:m.jsx(r6,{})})}),m.jsx(Xn,{path:"/shipments",element:m.jsx(mi,{allowedPermissions:[Pr],children:m.jsx(K6,{})})}),m.jsx(Xn,{path:"/routes",element:m.jsx(mi,{allowedRoles:["Manager","Admin","Dispatcher","Driver"],children:m.jsx($6,{})})}),m.jsx(Xn,{path:"/routes/:routeId",element:m.jsx(mi,{allowedRoles:["Manager","Admin","Dispatcher","Driver"],children:m.jsx(iM,{})})}),m.jsx(Xn,{path:"/users",element:m.jsx(mi,{allowedPermissions:[wo],children:m.jsx(aM,{})})}),m.jsx(Xn,{path:"/notifications",element:m.jsx(mi,{allowedPermissions:[xi],children:m.jsx(oM,{})})}),m.jsx(Xn,{path:"/chat",element:m.jsx(mi,{allowedPermissions:[qr],children:m.jsx(cM,{})})}),m.jsx(Xn,{path:"/chat/:threadId",element:m.jsx(mi,{allowedPermissions:[qr],children:m.jsx(fM,{})})}),m.jsx(Xn,{path:"/tracking/:requestId",element:m.jsx(mi,{children:m.jsx(lM,{})})}),m.jsx(Xn,{path:"/settings",element:m.jsx(a6,{})}),m.jsx(Xn,{path:"/calendar",element:m.jsx(mi,{allowedPermissions:[Pr],children:m.jsx(Q6,{})})}),m.jsx(Xn,{path:"/analytics",element:m.jsx(mi,{allowedPermissions:[Li],children:m.jsx(sM,{})})})]}),m.jsx(Xn,{path:"*",element:m.jsx(rd,{to:"/",replace:!0})})]},e.pathname)})};qf.createRoot(document.getElementById("root")).render(m.jsx(la.StrictMode,{children:m.jsx(ek,{children:m.jsx(pM,{})})}));
