function SC(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const c=Object.getOwnPropertyDescriptor(i,a);c&&Object.defineProperty(e,a,c.get?c:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();var va=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Oy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ly={exports:{}},Wd={},Py={exports:{}},Mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dc=Symbol.for("react.element"),AC=Symbol.for("react.portal"),EC=Symbol.for("react.fragment"),NC=Symbol.for("react.strict_mode"),TC=Symbol.for("react.profiler"),IC=Symbol.for("react.provider"),kC=Symbol.for("react.context"),MC=Symbol.for("react.forward_ref"),RC=Symbol.for("react.suspense"),OC=Symbol.for("react.memo"),LC=Symbol.for("react.lazy"),xm=Symbol.iterator;function PC(e){return e===null||typeof e!="object"?null:(e=xm&&e[xm]||e["@@iterator"],typeof e=="function"?e:null)}var Dy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jy=Object.assign,By={};function al(e,t,n){this.props=e,this.context=t,this.refs=By,this.updater=n||Dy}al.prototype.isReactComponent={};al.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};al.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Fy(){}Fy.prototype=al.prototype;function u1(e,t,n){this.props=e,this.context=t,this.refs=By,this.updater=n||Dy}var d1=u1.prototype=new Fy;d1.constructor=u1;jy(d1,al.prototype);d1.isPureReactComponent=!0;var ym=Array.isArray,zy=Object.prototype.hasOwnProperty,h1={current:null},Uy={key:!0,ref:!0,__self:!0,__source:!0};function Vy(e,t,n){var i,a={},c=null,f=null;if(t!=null)for(i in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(c=""+t.key),t)zy.call(t,i)&&!Uy.hasOwnProperty(i)&&(a[i]=t[i]);var g=arguments.length-2;if(g===1)a.children=n;else if(1<g){for(var v=Array(g),y=0;y<g;y++)v[y]=arguments[y+2];a.children=v}if(e&&e.defaultProps)for(i in g=e.defaultProps,g)a[i]===void 0&&(a[i]=g[i]);return{$$typeof:Dc,type:e,key:c,ref:f,props:a,_owner:h1.current}}function DC(e,t){return{$$typeof:Dc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function f1(e){return typeof e=="object"&&e!==null&&e.$$typeof===Dc}function jC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var wm=/\/+/g;function Fh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jC(""+e.key):t.toString(36)}function Du(e,t,n,i,a){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(c){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case Dc:case AC:f=!0}}if(f)return f=e,a=a(f),e=i===""?"."+Fh(f,0):i,ym(a)?(n="",e!=null&&(n=e.replace(wm,"$&/")+"/"),Du(a,t,n,"",function(y){return y})):a!=null&&(f1(a)&&(a=DC(a,n+(!a.key||f&&f.key===a.key?"":(""+a.key).replace(wm,"$&/")+"/")+e)),t.push(a)),1;if(f=0,i=i===""?".":i+":",ym(e))for(var g=0;g<e.length;g++){c=e[g];var v=i+Fh(c,g);f+=Du(c,t,n,v,a)}else if(v=PC(e),typeof v=="function")for(e=v.call(e),g=0;!(c=e.next()).done;)c=c.value,v=i+Fh(c,g++),f+=Du(c,t,n,v,a);else if(c==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function cu(e,t,n){if(e==null)return e;var i=[],a=0;return Du(e,i,"","",function(c){return t.call(n,c,a++)}),i}function BC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Cr={current:null},ju={transition:null},FC={ReactCurrentDispatcher:Cr,ReactCurrentBatchConfig:ju,ReactCurrentOwner:h1};function Hy(){throw Error("act(...) is not supported in production builds of React.")}Mt.Children={map:cu,forEach:function(e,t,n){cu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return cu(e,function(){t++}),t},toArray:function(e){return cu(e,function(t){return t})||[]},only:function(e){if(!f1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Mt.Component=al;Mt.Fragment=EC;Mt.Profiler=TC;Mt.PureComponent=u1;Mt.StrictMode=NC;Mt.Suspense=RC;Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FC;Mt.act=Hy;Mt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=jy({},e.props),a=e.key,c=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(c=t.ref,f=h1.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var g=e.type.defaultProps;for(v in t)zy.call(t,v)&&!Uy.hasOwnProperty(v)&&(i[v]=t[v]===void 0&&g!==void 0?g[v]:t[v])}var v=arguments.length-2;if(v===1)i.children=n;else if(1<v){g=Array(v);for(var y=0;y<v;y++)g[y]=arguments[y+2];i.children=g}return{$$typeof:Dc,type:e.type,key:a,ref:c,props:i,_owner:f}};Mt.createContext=function(e){return e={$$typeof:kC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:IC,_context:e},e.Consumer=e};Mt.createElement=Vy;Mt.createFactory=function(e){var t=Vy.bind(null,e);return t.type=e,t};Mt.createRef=function(){return{current:null}};Mt.forwardRef=function(e){return{$$typeof:MC,render:e}};Mt.isValidElement=f1;Mt.lazy=function(e){return{$$typeof:LC,_payload:{_status:-1,_result:e},_init:BC}};Mt.memo=function(e,t){return{$$typeof:OC,type:e,compare:t===void 0?null:t}};Mt.startTransition=function(e){var t=ju.transition;ju.transition={};try{e()}finally{ju.transition=t}};Mt.unstable_act=Hy;Mt.useCallback=function(e,t){return Cr.current.useCallback(e,t)};Mt.useContext=function(e){return Cr.current.useContext(e)};Mt.useDebugValue=function(){};Mt.useDeferredValue=function(e){return Cr.current.useDeferredValue(e)};Mt.useEffect=function(e,t){return Cr.current.useEffect(e,t)};Mt.useId=function(){return Cr.current.useId()};Mt.useImperativeHandle=function(e,t,n){return Cr.current.useImperativeHandle(e,t,n)};Mt.useInsertionEffect=function(e,t){return Cr.current.useInsertionEffect(e,t)};Mt.useLayoutEffect=function(e,t){return Cr.current.useLayoutEffect(e,t)};Mt.useMemo=function(e,t){return Cr.current.useMemo(e,t)};Mt.useReducer=function(e,t,n){return Cr.current.useReducer(e,t,n)};Mt.useRef=function(e){return Cr.current.useRef(e)};Mt.useState=function(e){return Cr.current.useState(e)};Mt.useSyncExternalStore=function(e,t,n){return Cr.current.useSyncExternalStore(e,t,n)};Mt.useTransition=function(){return Cr.current.useTransition()};Mt.version="18.3.1";Py.exports=Mt;var j=Py.exports;const $o=Oy(j),zC=SC({__proto__:null,default:$o},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UC=j,VC=Symbol.for("react.element"),HC=Symbol.for("react.fragment"),WC=Object.prototype.hasOwnProperty,ZC=UC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GC={key:!0,ref:!0,__self:!0,__source:!0};function Wy(e,t,n){var i,a={},c=null,f=null;n!==void 0&&(c=""+n),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(f=t.ref);for(i in t)WC.call(t,i)&&!GC.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:VC,type:e,key:c,ref:f,props:a,_owner:ZC.current}}Wd.Fragment=HC;Wd.jsx=Wy;Wd.jsxs=Wy;Ly.exports=Wd;var m=Ly.exports,Bf={},Zy={exports:{}},qr={},Gy={exports:{}},Yy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ue,je){var ge=ue.length;ue.push(je);e:for(;0<ge;){var Se=ge-1>>>1,Be=ue[Se];if(0<a(Be,je))ue[Se]=je,ue[ge]=Be,ge=Se;else break e}}function n(ue){return ue.length===0?null:ue[0]}function i(ue){if(ue.length===0)return null;var je=ue[0],ge=ue.pop();if(ge!==je){ue[0]=ge;e:for(var Se=0,Be=ue.length,Pe=Be>>>1;Se<Pe;){var ze=2*(Se+1)-1,$=ue[ze],re=ze+1,Ie=ue[re];if(0>a($,ge))re<Be&&0>a(Ie,$)?(ue[Se]=Ie,ue[re]=ge,Se=re):(ue[Se]=$,ue[ze]=ge,Se=ze);else if(re<Be&&0>a(Ie,ge))ue[Se]=Ie,ue[re]=ge,Se=re;else break e}}return je}function a(ue,je){var ge=ue.sortIndex-je.sortIndex;return ge!==0?ge:ue.id-je.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var f=Date,g=f.now();e.unstable_now=function(){return f.now()-g}}var v=[],y=[],S=1,b=null,T=3,I=!1,D=!1,P=!1,U=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(ue){for(var je=n(y);je!==null;){if(je.callback===null)i(y);else if(je.startTime<=ue)i(y),je.sortIndex=je.expirationTime,t(v,je);else break;je=n(y)}}function H(ue){if(P=!1,k(ue),!D)if(n(v)!==null)D=!0,Ce(X);else{var je=n(y);je!==null&&ke(H,je.startTime-ue)}}function X(ue,je){D=!1,P&&(P=!1,V(J),J=-1),I=!0;var ge=T;try{for(k(je),b=n(v);b!==null&&(!(b.expirationTime>je)||ue&&!me());){var Se=b.callback;if(typeof Se=="function"){b.callback=null,T=b.priorityLevel;var Be=Se(b.expirationTime<=je);je=e.unstable_now(),typeof Be=="function"?b.callback=Be:b===n(v)&&i(v),k(je)}else i(v);b=n(v)}if(b!==null)var Pe=!0;else{var ze=n(y);ze!==null&&ke(H,ze.startTime-je),Pe=!1}return Pe}finally{b=null,T=ge,I=!1}}var G=!1,Z=null,J=-1,z=5,te=-1;function me(){return!(e.unstable_now()-te<z)}function fe(){if(Z!==null){var ue=e.unstable_now();te=ue;var je=!0;try{je=Z(!0,ue)}finally{je?Me():(G=!1,Z=null)}}else G=!1}var Me;if(typeof O=="function")Me=function(){O(fe)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,ae=we.port2;we.port1.onmessage=fe,Me=function(){ae.postMessage(null)}}else Me=function(){U(fe,0)};function Ce(ue){Z=ue,G||(G=!0,Me())}function ke(ue,je){J=U(function(){ue(e.unstable_now())},je)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ue){ue.callback=null},e.unstable_continueExecution=function(){D||I||(D=!0,Ce(X))},e.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<ue?Math.floor(1e3/ue):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return n(v)},e.unstable_next=function(ue){switch(T){case 1:case 2:case 3:var je=3;break;default:je=T}var ge=T;T=je;try{return ue()}finally{T=ge}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ue,je){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var ge=T;T=ue;try{return je()}finally{T=ge}},e.unstable_scheduleCallback=function(ue,je,ge){var Se=e.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Se+ge:Se):ge=Se,ue){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=ge+Be,ue={id:S++,callback:je,priorityLevel:ue,startTime:ge,expirationTime:Be,sortIndex:-1},ge>Se?(ue.sortIndex=ge,t(y,ue),n(v)===null&&ue===n(y)&&(P?(V(J),J=-1):P=!0,ke(H,ge-Se))):(ue.sortIndex=Be,t(v,ue),D||I||(D=!0,Ce(X))),ue},e.unstable_shouldYield=me,e.unstable_wrapCallback=function(ue){var je=T;return function(){var ge=T;T=je;try{return ue.apply(this,arguments)}finally{T=ge}}}})(Yy);Gy.exports=Yy;var YC=Gy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XC=j,Yr=YC;function Ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xy=new Set,hc={};function sa(e,t){Ga(e,t),Ga(e+"Capture",t)}function Ga(e,t){for(hc[e]=t,e=0;e<t.length;e++)Xy.add(t[e])}var vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ff=Object.prototype.hasOwnProperty,qC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vm={},_m={};function KC(e){return Ff.call(_m,e)?!0:Ff.call(vm,e)?!1:qC.test(e)?_m[e]=!0:(vm[e]=!0,!1)}function QC(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $C(e,t,n,i){if(t===null||typeof t>"u"||QC(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Sr(e,t,n,i,a,c,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=c,this.removeEmptyString=f}var nr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){nr[e]=new Sr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];nr[t]=new Sr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){nr[e]=new Sr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){nr[e]=new Sr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){nr[e]=new Sr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){nr[e]=new Sr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){nr[e]=new Sr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){nr[e]=new Sr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){nr[e]=new Sr(e,5,!1,e.toLowerCase(),null,!1,!1)});var p1=/[\-:]([a-z])/g;function m1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(p1,m1);nr[t]=new Sr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(p1,m1);nr[t]=new Sr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(p1,m1);nr[t]=new Sr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){nr[e]=new Sr(e,1,!1,e.toLowerCase(),null,!1,!1)});nr.xlinkHref=new Sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){nr[e]=new Sr(e,1,!1,e.toLowerCase(),null,!0,!0)});function g1(e,t,n,i){var a=nr.hasOwnProperty(t)?nr[t]:null;(a!==null?a.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($C(t,n,a,i)&&(n=null),i||a===null?KC(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,i=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var Es=XC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,uu=Symbol.for("react.element"),ba=Symbol.for("react.portal"),Ca=Symbol.for("react.fragment"),x1=Symbol.for("react.strict_mode"),zf=Symbol.for("react.profiler"),qy=Symbol.for("react.provider"),Ky=Symbol.for("react.context"),y1=Symbol.for("react.forward_ref"),Uf=Symbol.for("react.suspense"),Vf=Symbol.for("react.suspense_list"),w1=Symbol.for("react.memo"),Vs=Symbol.for("react.lazy"),Qy=Symbol.for("react.offscreen"),bm=Symbol.iterator;function kl(e){return e===null||typeof e!="object"?null:(e=bm&&e[bm]||e["@@iterator"],typeof e=="function"?e:null)}var _n=Object.assign,zh;function Hl(e){if(zh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);zh=t&&t[1]||""}return`
`+zh+e}var Uh=!1;function Vh(e,t){if(!e||Uh)return"";Uh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(y){var i=y}Reflect.construct(e,[],t)}else{try{t.call()}catch(y){i=y}e.call(t.prototype)}else{try{throw Error()}catch(y){i=y}e()}}catch(y){if(y&&i&&typeof y.stack=="string"){for(var a=y.stack.split(`
`),c=i.stack.split(`
`),f=a.length-1,g=c.length-1;1<=f&&0<=g&&a[f]!==c[g];)g--;for(;1<=f&&0<=g;f--,g--)if(a[f]!==c[g]){if(f!==1||g!==1)do if(f--,g--,0>g||a[f]!==c[g]){var v=`
`+a[f].replace(" at new "," at ");return e.displayName&&v.includes("<anonymous>")&&(v=v.replace("<anonymous>",e.displayName)),v}while(1<=f&&0<=g);break}}}finally{Uh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Hl(e):""}function JC(e){switch(e.tag){case 5:return Hl(e.type);case 16:return Hl("Lazy");case 13:return Hl("Suspense");case 19:return Hl("SuspenseList");case 0:case 2:case 15:return e=Vh(e.type,!1),e;case 11:return e=Vh(e.type.render,!1),e;case 1:return e=Vh(e.type,!0),e;default:return""}}function Hf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ca:return"Fragment";case ba:return"Portal";case zf:return"Profiler";case x1:return"StrictMode";case Uf:return"Suspense";case Vf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ky:return(e.displayName||"Context")+".Consumer";case qy:return(e._context.displayName||"Context")+".Provider";case y1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case w1:return t=e.displayName||null,t!==null?t:Hf(e.type)||"Memo";case Vs:t=e._payload,e=e._init;try{return Hf(e(t))}catch{}}return null}function e3(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hf(t);case 8:return t===x1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ho(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $y(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function t3(e){var t=$y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,c=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(f){i=""+f,c.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function du(e){e._valueTracker||(e._valueTracker=t3(e))}function Jy(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=$y(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function td(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Wf(e,t){var n=t.checked;return _n({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Cm(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=ho(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function e2(e,t){t=t.checked,t!=null&&g1(e,"checked",t,!1)}function Zf(e,t){e2(e,t);var n=ho(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Gf(e,t.type,n):t.hasOwnProperty("defaultValue")&&Gf(e,t.type,ho(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Sm(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Gf(e,t,n){(t!=="number"||td(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Wl=Array.isArray;function za(e,t,n,i){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ho(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Yf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ne(91));return _n({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Am(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ne(92));if(Wl(n)){if(1<n.length)throw Error(Ne(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ho(n)}}function t2(e,t){var n=ho(t.value),i=ho(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function Em(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function n2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?n2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var hu,r2=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(hu=hu||document.createElement("div"),hu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=hu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function fc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ql={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},n3=["Webkit","ms","Moz","O"];Object.keys(ql).forEach(function(e){n3.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ql[t]=ql[e]})});function i2(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ql.hasOwnProperty(e)&&ql[e]?(""+t).trim():t+"px"}function s2(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,a=i2(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,a):e[n]=a}}var r3=_n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qf(e,t){if(t){if(r3[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ne(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ne(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ne(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ne(62))}}function Kf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qf=null;function v1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $f=null,Ua=null,Va=null;function Nm(e){if(e=Fc(e)){if(typeof $f!="function")throw Error(Ne(280));var t=e.stateNode;t&&(t=qd(t),$f(e.stateNode,e.type,t))}}function o2(e){Ua?Va?Va.push(e):Va=[e]:Ua=e}function a2(){if(Ua){var e=Ua,t=Va;if(Va=Ua=null,Nm(e),t)for(e=0;e<t.length;e++)Nm(t[e])}}function l2(e,t){return e(t)}function c2(){}var Hh=!1;function u2(e,t,n){if(Hh)return e(t,n);Hh=!0;try{return l2(e,t,n)}finally{Hh=!1,(Ua!==null||Va!==null)&&(c2(),a2())}}function pc(e,t){var n=e.stateNode;if(n===null)return null;var i=qd(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ne(231,t,typeof n));return n}var Jf=!1;if(vs)try{var Ml={};Object.defineProperty(Ml,"passive",{get:function(){Jf=!0}}),window.addEventListener("test",Ml,Ml),window.removeEventListener("test",Ml,Ml)}catch{Jf=!1}function i3(e,t,n,i,a,c,f,g,v){var y=Array.prototype.slice.call(arguments,3);try{t.apply(n,y)}catch(S){this.onError(S)}}var Kl=!1,nd=null,rd=!1,e0=null,s3={onError:function(e){Kl=!0,nd=e}};function o3(e,t,n,i,a,c,f,g,v){Kl=!1,nd=null,i3.apply(s3,arguments)}function a3(e,t,n,i,a,c,f,g,v){if(o3.apply(this,arguments),Kl){if(Kl){var y=nd;Kl=!1,nd=null}else throw Error(Ne(198));rd||(rd=!0,e0=y)}}function oa(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function d2(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Tm(e){if(oa(e)!==e)throw Error(Ne(188))}function l3(e){var t=e.alternate;if(!t){if(t=oa(e),t===null)throw Error(Ne(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(a===null)break;var c=a.alternate;if(c===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===n)return Tm(a),e;if(c===i)return Tm(a),t;c=c.sibling}throw Error(Ne(188))}if(n.return!==i.return)n=a,i=c;else{for(var f=!1,g=a.child;g;){if(g===n){f=!0,n=a,i=c;break}if(g===i){f=!0,i=a,n=c;break}g=g.sibling}if(!f){for(g=c.child;g;){if(g===n){f=!0,n=c,i=a;break}if(g===i){f=!0,i=c,n=a;break}g=g.sibling}if(!f)throw Error(Ne(189))}}if(n.alternate!==i)throw Error(Ne(190))}if(n.tag!==3)throw Error(Ne(188));return n.stateNode.current===n?e:t}function h2(e){return e=l3(e),e!==null?f2(e):null}function f2(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=f2(e);if(t!==null)return t;e=e.sibling}return null}var p2=Yr.unstable_scheduleCallback,Im=Yr.unstable_cancelCallback,c3=Yr.unstable_shouldYield,u3=Yr.unstable_requestPaint,En=Yr.unstable_now,d3=Yr.unstable_getCurrentPriorityLevel,_1=Yr.unstable_ImmediatePriority,m2=Yr.unstable_UserBlockingPriority,id=Yr.unstable_NormalPriority,h3=Yr.unstable_LowPriority,g2=Yr.unstable_IdlePriority,Zd=null,Xi=null;function f3(e){if(Xi&&typeof Xi.onCommitFiberRoot=="function")try{Xi.onCommitFiberRoot(Zd,e,void 0,(e.current.flags&128)===128)}catch{}}var Ri=Math.clz32?Math.clz32:g3,p3=Math.log,m3=Math.LN2;function g3(e){return e>>>=0,e===0?32:31-(p3(e)/m3|0)|0}var fu=64,pu=4194304;function Zl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function sd(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,a=e.suspendedLanes,c=e.pingedLanes,f=n&268435455;if(f!==0){var g=f&~a;g!==0?i=Zl(g):(c&=f,c!==0&&(i=Zl(c)))}else f=n&~a,f!==0?i=Zl(f):c!==0&&(i=Zl(c));if(i===0)return 0;if(t!==0&&t!==i&&!(t&a)&&(a=i&-i,c=t&-t,a>=c||a===16&&(c&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-Ri(t),a=1<<n,i|=e[n],t&=~a;return i}function x3(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function y3(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,c=e.pendingLanes;0<c;){var f=31-Ri(c),g=1<<f,v=a[f];v===-1?(!(g&n)||g&i)&&(a[f]=x3(g,t)):v<=t&&(e.expiredLanes|=g),c&=~g}}function t0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function x2(){var e=fu;return fu<<=1,!(fu&4194240)&&(fu=64),e}function Wh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function jc(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ri(t),e[t]=n}function w3(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Ri(n),c=1<<a;t[a]=0,i[a]=-1,e[a]=-1,n&=~c}}function b1(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Ri(n),a=1<<i;a&t|e[i]&t&&(e[i]|=t),n&=~a}}var Qt=0;function y2(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var w2,C1,v2,_2,b2,n0=!1,mu=[],$s=null,Js=null,eo=null,mc=new Map,gc=new Map,Gs=[],v3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function km(e,t){switch(e){case"focusin":case"focusout":$s=null;break;case"dragenter":case"dragleave":Js=null;break;case"mouseover":case"mouseout":eo=null;break;case"pointerover":case"pointerout":mc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gc.delete(t.pointerId)}}function Rl(e,t,n,i,a,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:c,targetContainers:[a]},t!==null&&(t=Fc(t),t!==null&&C1(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function _3(e,t,n,i,a){switch(t){case"focusin":return $s=Rl($s,e,t,n,i,a),!0;case"dragenter":return Js=Rl(Js,e,t,n,i,a),!0;case"mouseover":return eo=Rl(eo,e,t,n,i,a),!0;case"pointerover":var c=a.pointerId;return mc.set(c,Rl(mc.get(c)||null,e,t,n,i,a)),!0;case"gotpointercapture":return c=a.pointerId,gc.set(c,Rl(gc.get(c)||null,e,t,n,i,a)),!0}return!1}function C2(e){var t=Ho(e.target);if(t!==null){var n=oa(t);if(n!==null){if(t=n.tag,t===13){if(t=d2(n),t!==null){e.blockedOn=t,b2(e.priority,function(){v2(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=r0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Qf=i,n.target.dispatchEvent(i),Qf=null}else return t=Fc(n),t!==null&&C1(t),e.blockedOn=n,!1;t.shift()}return!0}function Mm(e,t,n){Bu(e)&&n.delete(t)}function b3(){n0=!1,$s!==null&&Bu($s)&&($s=null),Js!==null&&Bu(Js)&&(Js=null),eo!==null&&Bu(eo)&&(eo=null),mc.forEach(Mm),gc.forEach(Mm)}function Ol(e,t){e.blockedOn===t&&(e.blockedOn=null,n0||(n0=!0,Yr.unstable_scheduleCallback(Yr.unstable_NormalPriority,b3)))}function xc(e){function t(a){return Ol(a,e)}if(0<mu.length){Ol(mu[0],e);for(var n=1;n<mu.length;n++){var i=mu[n];i.blockedOn===e&&(i.blockedOn=null)}}for($s!==null&&Ol($s,e),Js!==null&&Ol(Js,e),eo!==null&&Ol(eo,e),mc.forEach(t),gc.forEach(t),n=0;n<Gs.length;n++)i=Gs[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<Gs.length&&(n=Gs[0],n.blockedOn===null);)C2(n),n.blockedOn===null&&Gs.shift()}var Ha=Es.ReactCurrentBatchConfig,od=!0;function C3(e,t,n,i){var a=Qt,c=Ha.transition;Ha.transition=null;try{Qt=1,S1(e,t,n,i)}finally{Qt=a,Ha.transition=c}}function S3(e,t,n,i){var a=Qt,c=Ha.transition;Ha.transition=null;try{Qt=4,S1(e,t,n,i)}finally{Qt=a,Ha.transition=c}}function S1(e,t,n,i){if(od){var a=r0(e,t,n,i);if(a===null)ef(e,t,i,ad,n),km(e,i);else if(_3(a,e,t,n,i))i.stopPropagation();else if(km(e,i),t&4&&-1<v3.indexOf(e)){for(;a!==null;){var c=Fc(a);if(c!==null&&w2(c),c=r0(e,t,n,i),c===null&&ef(e,t,i,ad,n),c===a)break;a=c}a!==null&&i.stopPropagation()}else ef(e,t,i,null,n)}}var ad=null;function r0(e,t,n,i){if(ad=null,e=v1(i),e=Ho(e),e!==null)if(t=oa(e),t===null)e=null;else if(n=t.tag,n===13){if(e=d2(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ad=e,null}function S2(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(d3()){case _1:return 1;case m2:return 4;case id:case h3:return 16;case g2:return 536870912;default:return 16}default:return 16}}var qs=null,A1=null,Fu=null;function A2(){if(Fu)return Fu;var e,t=A1,n=t.length,i,a="value"in qs?qs.value:qs.textContent,c=a.length;for(e=0;e<n&&t[e]===a[e];e++);var f=n-e;for(i=1;i<=f&&t[n-i]===a[c-i];i++);return Fu=a.slice(e,1<i?1-i:void 0)}function zu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function gu(){return!0}function Rm(){return!1}function Kr(e){function t(n,i,a,c,f){this._reactName=n,this._targetInst=a,this.type=i,this.nativeEvent=c,this.target=f,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(n=e[g],this[g]=n?n(c):c[g]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?gu:Rm,this.isPropagationStopped=Rm,this}return _n(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gu)},persist:function(){},isPersistent:gu}),t}var ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},E1=Kr(ll),Bc=_n({},ll,{view:0,detail:0}),A3=Kr(Bc),Zh,Gh,Ll,Gd=_n({},Bc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:N1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ll&&(Ll&&e.type==="mousemove"?(Zh=e.screenX-Ll.screenX,Gh=e.screenY-Ll.screenY):Gh=Zh=0,Ll=e),Zh)},movementY:function(e){return"movementY"in e?e.movementY:Gh}}),Om=Kr(Gd),E3=_n({},Gd,{dataTransfer:0}),N3=Kr(E3),T3=_n({},Bc,{relatedTarget:0}),Yh=Kr(T3),I3=_n({},ll,{animationName:0,elapsedTime:0,pseudoElement:0}),k3=Kr(I3),M3=_n({},ll,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),R3=Kr(M3),O3=_n({},ll,{data:0}),Lm=Kr(O3),L3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},P3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},D3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=D3[e])?!!t[e]:!1}function N1(){return j3}var B3=_n({},Bc,{key:function(e){if(e.key){var t=L3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=zu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?P3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:N1,charCode:function(e){return e.type==="keypress"?zu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),F3=Kr(B3),z3=_n({},Gd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pm=Kr(z3),U3=_n({},Bc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:N1}),V3=Kr(U3),H3=_n({},ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),W3=Kr(H3),Z3=_n({},Gd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),G3=Kr(Z3),Y3=[9,13,27,32],T1=vs&&"CompositionEvent"in window,Ql=null;vs&&"documentMode"in document&&(Ql=document.documentMode);var X3=vs&&"TextEvent"in window&&!Ql,E2=vs&&(!T1||Ql&&8<Ql&&11>=Ql),Dm=" ",jm=!1;function N2(e,t){switch(e){case"keyup":return Y3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Sa=!1;function q3(e,t){switch(e){case"compositionend":return T2(t);case"keypress":return t.which!==32?null:(jm=!0,Dm);case"textInput":return e=t.data,e===Dm&&jm?null:e;default:return null}}function K3(e,t){if(Sa)return e==="compositionend"||!T1&&N2(e,t)?(e=A2(),Fu=A1=qs=null,Sa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return E2&&t.locale!=="ko"?null:t.data;default:return null}}var Q3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Q3[e.type]:t==="textarea"}function I2(e,t,n,i){o2(i),t=ld(t,"onChange"),0<t.length&&(n=new E1("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var $l=null,yc=null;function $3(e){z2(e,0)}function Yd(e){var t=Na(e);if(Jy(t))return e}function J3(e,t){if(e==="change")return t}var k2=!1;if(vs){var Xh;if(vs){var qh="oninput"in document;if(!qh){var Fm=document.createElement("div");Fm.setAttribute("oninput","return;"),qh=typeof Fm.oninput=="function"}Xh=qh}else Xh=!1;k2=Xh&&(!document.documentMode||9<document.documentMode)}function zm(){$l&&($l.detachEvent("onpropertychange",M2),yc=$l=null)}function M2(e){if(e.propertyName==="value"&&Yd(yc)){var t=[];I2(t,yc,e,v1(e)),u2($3,t)}}function eS(e,t,n){e==="focusin"?(zm(),$l=t,yc=n,$l.attachEvent("onpropertychange",M2)):e==="focusout"&&zm()}function tS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yd(yc)}function nS(e,t){if(e==="click")return Yd(t)}function rS(e,t){if(e==="input"||e==="change")return Yd(t)}function iS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Li=typeof Object.is=="function"?Object.is:iS;function wc(e,t){if(Li(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!Ff.call(t,a)||!Li(e[a],t[a]))return!1}return!0}function Um(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vm(e,t){var n=Um(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Um(n)}}function R2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?R2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function O2(){for(var e=window,t=td();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=td(e.document)}return t}function I1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function sS(e){var t=O2(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&R2(n.ownerDocument.documentElement,n)){if(i!==null&&I1(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,c=Math.min(i.start,a);i=i.end===void 0?c:Math.min(i.end,a),!e.extend&&c>i&&(a=i,i=c,c=a),a=Vm(n,c);var f=Vm(n,i);a&&f&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),c>i?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var oS=vs&&"documentMode"in document&&11>=document.documentMode,Aa=null,i0=null,Jl=null,s0=!1;function Hm(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;s0||Aa==null||Aa!==td(i)||(i=Aa,"selectionStart"in i&&I1(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Jl&&wc(Jl,i)||(Jl=i,i=ld(i0,"onSelect"),0<i.length&&(t=new E1("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Aa)))}function xu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ea={animationend:xu("Animation","AnimationEnd"),animationiteration:xu("Animation","AnimationIteration"),animationstart:xu("Animation","AnimationStart"),transitionend:xu("Transition","TransitionEnd")},Kh={},L2={};vs&&(L2=document.createElement("div").style,"AnimationEvent"in window||(delete Ea.animationend.animation,delete Ea.animationiteration.animation,delete Ea.animationstart.animation),"TransitionEvent"in window||delete Ea.transitionend.transition);function Xd(e){if(Kh[e])return Kh[e];if(!Ea[e])return e;var t=Ea[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in L2)return Kh[e]=t[n];return e}var P2=Xd("animationend"),D2=Xd("animationiteration"),j2=Xd("animationstart"),B2=Xd("transitionend"),F2=new Map,Wm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yo(e,t){F2.set(e,t),sa(t,[e])}for(var Qh=0;Qh<Wm.length;Qh++){var $h=Wm[Qh],aS=$h.toLowerCase(),lS=$h[0].toUpperCase()+$h.slice(1);yo(aS,"on"+lS)}yo(P2,"onAnimationEnd");yo(D2,"onAnimationIteration");yo(j2,"onAnimationStart");yo("dblclick","onDoubleClick");yo("focusin","onFocus");yo("focusout","onBlur");yo(B2,"onTransitionEnd");Ga("onMouseEnter",["mouseout","mouseover"]);Ga("onMouseLeave",["mouseout","mouseover"]);Ga("onPointerEnter",["pointerout","pointerover"]);Ga("onPointerLeave",["pointerout","pointerover"]);sa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sa("onBeforeInput",["compositionend","keypress","textInput","paste"]);sa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gl));function Zm(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,a3(i,t,void 0,e),e.currentTarget=null}function z2(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],a=i.event;i=i.listeners;e:{var c=void 0;if(t)for(var f=i.length-1;0<=f;f--){var g=i[f],v=g.instance,y=g.currentTarget;if(g=g.listener,v!==c&&a.isPropagationStopped())break e;Zm(a,g,y),c=v}else for(f=0;f<i.length;f++){if(g=i[f],v=g.instance,y=g.currentTarget,g=g.listener,v!==c&&a.isPropagationStopped())break e;Zm(a,g,y),c=v}}}if(rd)throw e=e0,rd=!1,e0=null,e}function dn(e,t){var n=t[u0];n===void 0&&(n=t[u0]=new Set);var i=e+"__bubble";n.has(i)||(U2(t,e,2,!1),n.add(i))}function Jh(e,t,n){var i=0;t&&(i|=4),U2(n,e,i,t)}var yu="_reactListening"+Math.random().toString(36).slice(2);function vc(e){if(!e[yu]){e[yu]=!0,Xy.forEach(function(n){n!=="selectionchange"&&(cS.has(n)||Jh(n,!1,e),Jh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[yu]||(t[yu]=!0,Jh("selectionchange",!1,t))}}function U2(e,t,n,i){switch(S2(t)){case 1:var a=C3;break;case 4:a=S3;break;default:a=S1}n=a.bind(null,t,n,e),a=void 0,!Jf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function ef(e,t,n,i,a){var c=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var g=i.stateNode.containerInfo;if(g===a||g.nodeType===8&&g.parentNode===a)break;if(f===4)for(f=i.return;f!==null;){var v=f.tag;if((v===3||v===4)&&(v=f.stateNode.containerInfo,v===a||v.nodeType===8&&v.parentNode===a))return;f=f.return}for(;g!==null;){if(f=Ho(g),f===null)return;if(v=f.tag,v===5||v===6){i=c=f;continue e}g=g.parentNode}}i=i.return}u2(function(){var y=c,S=v1(n),b=[];e:{var T=F2.get(e);if(T!==void 0){var I=E1,D=e;switch(e){case"keypress":if(zu(n)===0)break e;case"keydown":case"keyup":I=F3;break;case"focusin":D="focus",I=Yh;break;case"focusout":D="blur",I=Yh;break;case"beforeblur":case"afterblur":I=Yh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Om;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=N3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=V3;break;case P2:case D2:case j2:I=k3;break;case B2:I=W3;break;case"scroll":I=A3;break;case"wheel":I=G3;break;case"copy":case"cut":case"paste":I=R3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Pm}var P=(t&4)!==0,U=!P&&e==="scroll",V=P?T!==null?T+"Capture":null:T;P=[];for(var O=y,k;O!==null;){k=O;var H=k.stateNode;if(k.tag===5&&H!==null&&(k=H,V!==null&&(H=pc(O,V),H!=null&&P.push(_c(O,H,k)))),U)break;O=O.return}0<P.length&&(T=new I(T,D,null,n,S),b.push({event:T,listeners:P}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",T&&n!==Qf&&(D=n.relatedTarget||n.fromElement)&&(Ho(D)||D[_s]))break e;if((I||T)&&(T=S.window===S?S:(T=S.ownerDocument)?T.defaultView||T.parentWindow:window,I?(D=n.relatedTarget||n.toElement,I=y,D=D?Ho(D):null,D!==null&&(U=oa(D),D!==U||D.tag!==5&&D.tag!==6)&&(D=null)):(I=null,D=y),I!==D)){if(P=Om,H="onMouseLeave",V="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(P=Pm,H="onPointerLeave",V="onPointerEnter",O="pointer"),U=I==null?T:Na(I),k=D==null?T:Na(D),T=new P(H,O+"leave",I,n,S),T.target=U,T.relatedTarget=k,H=null,Ho(S)===y&&(P=new P(V,O+"enter",D,n,S),P.target=k,P.relatedTarget=U,H=P),U=H,I&&D)t:{for(P=I,V=D,O=0,k=P;k;k=wa(k))O++;for(k=0,H=V;H;H=wa(H))k++;for(;0<O-k;)P=wa(P),O--;for(;0<k-O;)V=wa(V),k--;for(;O--;){if(P===V||V!==null&&P===V.alternate)break t;P=wa(P),V=wa(V)}P=null}else P=null;I!==null&&Gm(b,T,I,P,!1),D!==null&&U!==null&&Gm(b,U,D,P,!0)}}e:{if(T=y?Na(y):window,I=T.nodeName&&T.nodeName.toLowerCase(),I==="select"||I==="input"&&T.type==="file")var X=J3;else if(Bm(T))if(k2)X=rS;else{X=tS;var G=eS}else(I=T.nodeName)&&I.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(X=nS);if(X&&(X=X(e,y))){I2(b,X,n,S);break e}G&&G(e,T,y),e==="focusout"&&(G=T._wrapperState)&&G.controlled&&T.type==="number"&&Gf(T,"number",T.value)}switch(G=y?Na(y):window,e){case"focusin":(Bm(G)||G.contentEditable==="true")&&(Aa=G,i0=y,Jl=null);break;case"focusout":Jl=i0=Aa=null;break;case"mousedown":s0=!0;break;case"contextmenu":case"mouseup":case"dragend":s0=!1,Hm(b,n,S);break;case"selectionchange":if(oS)break;case"keydown":case"keyup":Hm(b,n,S)}var Z;if(T1)e:{switch(e){case"compositionstart":var J="onCompositionStart";break e;case"compositionend":J="onCompositionEnd";break e;case"compositionupdate":J="onCompositionUpdate";break e}J=void 0}else Sa?N2(e,n)&&(J="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(J="onCompositionStart");J&&(E2&&n.locale!=="ko"&&(Sa||J!=="onCompositionStart"?J==="onCompositionEnd"&&Sa&&(Z=A2()):(qs=S,A1="value"in qs?qs.value:qs.textContent,Sa=!0)),G=ld(y,J),0<G.length&&(J=new Lm(J,e,null,n,S),b.push({event:J,listeners:G}),Z?J.data=Z:(Z=T2(n),Z!==null&&(J.data=Z)))),(Z=X3?q3(e,n):K3(e,n))&&(y=ld(y,"onBeforeInput"),0<y.length&&(S=new Lm("onBeforeInput","beforeinput",null,n,S),b.push({event:S,listeners:y}),S.data=Z))}z2(b,t)})}function _c(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ld(e,t){for(var n=t+"Capture",i=[];e!==null;){var a=e,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=pc(e,n),c!=null&&i.unshift(_c(e,c,a)),c=pc(e,t),c!=null&&i.push(_c(e,c,a))),e=e.return}return i}function wa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Gm(e,t,n,i,a){for(var c=t._reactName,f=[];n!==null&&n!==i;){var g=n,v=g.alternate,y=g.stateNode;if(v!==null&&v===i)break;g.tag===5&&y!==null&&(g=y,a?(v=pc(n,c),v!=null&&f.unshift(_c(n,v,g))):a||(v=pc(n,c),v!=null&&f.push(_c(n,v,g)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var uS=/\r\n?/g,dS=/\u0000|\uFFFD/g;function Ym(e){return(typeof e=="string"?e:""+e).replace(uS,`
`).replace(dS,"")}function wu(e,t,n){if(t=Ym(t),Ym(e)!==t&&n)throw Error(Ne(425))}function cd(){}var o0=null,a0=null;function l0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var c0=typeof setTimeout=="function"?setTimeout:void 0,hS=typeof clearTimeout=="function"?clearTimeout:void 0,Xm=typeof Promise=="function"?Promise:void 0,fS=typeof queueMicrotask=="function"?queueMicrotask:typeof Xm<"u"?function(e){return Xm.resolve(null).then(e).catch(pS)}:c0;function pS(e){setTimeout(function(){throw e})}function tf(e,t){var n=t,i=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(i===0){e.removeChild(a),xc(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=a}while(n);xc(t)}function to(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var cl=Math.random().toString(36).slice(2),Yi="__reactFiber$"+cl,bc="__reactProps$"+cl,_s="__reactContainer$"+cl,u0="__reactEvents$"+cl,mS="__reactListeners$"+cl,gS="__reactHandles$"+cl;function Ho(e){var t=e[Yi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[_s]||n[Yi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=qm(e);e!==null;){if(n=e[Yi])return n;e=qm(e)}return t}e=n,n=e.parentNode}return null}function Fc(e){return e=e[Yi]||e[_s],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Na(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ne(33))}function qd(e){return e[bc]||null}var d0=[],Ta=-1;function wo(e){return{current:e}}function hn(e){0>Ta||(e.current=d0[Ta],d0[Ta]=null,Ta--)}function an(e,t){Ta++,d0[Ta]=e.current,e.current=t}var fo={},fr=wo(fo),Mr=wo(!1),Jo=fo;function Ya(e,t){var n=e.type.contextTypes;if(!n)return fo;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in n)a[c]=t[c];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Rr(e){return e=e.childContextTypes,e!=null}function ud(){hn(Mr),hn(fr)}function Km(e,t,n){if(fr.current!==fo)throw Error(Ne(168));an(fr,t),an(Mr,n)}function V2(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var a in i)if(!(a in t))throw Error(Ne(108,e3(e)||"Unknown",a));return _n({},n,i)}function dd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fo,Jo=fr.current,an(fr,e),an(Mr,Mr.current),!0}function Qm(e,t,n){var i=e.stateNode;if(!i)throw Error(Ne(169));n?(e=V2(e,t,Jo),i.__reactInternalMemoizedMergedChildContext=e,hn(Mr),hn(fr),an(fr,e)):hn(Mr),an(Mr,n)}var us=null,Kd=!1,nf=!1;function H2(e){us===null?us=[e]:us.push(e)}function xS(e){Kd=!0,H2(e)}function vo(){if(!nf&&us!==null){nf=!0;var e=0,t=Qt;try{var n=us;for(Qt=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}us=null,Kd=!1}catch(a){throw us!==null&&(us=us.slice(e+1)),p2(_1,vo),a}finally{Qt=t,nf=!1}}return null}var Ia=[],ka=0,hd=null,fd=0,fi=[],pi=0,ea=null,ds=1,hs="";function jo(e,t){Ia[ka++]=fd,Ia[ka++]=hd,hd=e,fd=t}function W2(e,t,n){fi[pi++]=ds,fi[pi++]=hs,fi[pi++]=ea,ea=e;var i=ds;e=hs;var a=32-Ri(i)-1;i&=~(1<<a),n+=1;var c=32-Ri(t)+a;if(30<c){var f=a-a%5;c=(i&(1<<f)-1).toString(32),i>>=f,a-=f,ds=1<<32-Ri(t)+a|n<<a|i,hs=c+e}else ds=1<<c|n<<a|i,hs=e}function k1(e){e.return!==null&&(jo(e,1),W2(e,1,0))}function M1(e){for(;e===hd;)hd=Ia[--ka],Ia[ka]=null,fd=Ia[--ka],Ia[ka]=null;for(;e===ea;)ea=fi[--pi],fi[pi]=null,hs=fi[--pi],fi[pi]=null,ds=fi[--pi],fi[pi]=null}var Gr=null,Zr=null,mn=!1,Mi=null;function Z2(e,t){var n=mi(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function $m(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Gr=e,Zr=to(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Gr=e,Zr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ea!==null?{id:ds,overflow:hs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=mi(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Gr=e,Zr=null,!0):!1;default:return!1}}function h0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function f0(e){if(mn){var t=Zr;if(t){var n=t;if(!$m(e,t)){if(h0(e))throw Error(Ne(418));t=to(n.nextSibling);var i=Gr;t&&$m(e,t)?Z2(i,n):(e.flags=e.flags&-4097|2,mn=!1,Gr=e)}}else{if(h0(e))throw Error(Ne(418));e.flags=e.flags&-4097|2,mn=!1,Gr=e}}}function Jm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Gr=e}function vu(e){if(e!==Gr)return!1;if(!mn)return Jm(e),mn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!l0(e.type,e.memoizedProps)),t&&(t=Zr)){if(h0(e))throw G2(),Error(Ne(418));for(;t;)Z2(e,t),t=to(t.nextSibling)}if(Jm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Zr=to(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Zr=null}}else Zr=Gr?to(e.stateNode.nextSibling):null;return!0}function G2(){for(var e=Zr;e;)e=to(e.nextSibling)}function Xa(){Zr=Gr=null,mn=!1}function R1(e){Mi===null?Mi=[e]:Mi.push(e)}var yS=Es.ReactCurrentBatchConfig;function Pl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ne(309));var i=n.stateNode}if(!i)throw Error(Ne(147,e));var a=i,c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(f){var g=a.refs;f===null?delete g[c]:g[c]=f},t._stringRef=c,t)}if(typeof e!="string")throw Error(Ne(284));if(!n._owner)throw Error(Ne(290,e))}return e}function _u(e,t){throw e=Object.prototype.toString.call(t),Error(Ne(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function eg(e){var t=e._init;return t(e._payload)}function Y2(e){function t(V,O){if(e){var k=V.deletions;k===null?(V.deletions=[O],V.flags|=16):k.push(O)}}function n(V,O){if(!e)return null;for(;O!==null;)t(V,O),O=O.sibling;return null}function i(V,O){for(V=new Map;O!==null;)O.key!==null?V.set(O.key,O):V.set(O.index,O),O=O.sibling;return V}function a(V,O){return V=so(V,O),V.index=0,V.sibling=null,V}function c(V,O,k){return V.index=k,e?(k=V.alternate,k!==null?(k=k.index,k<O?(V.flags|=2,O):k):(V.flags|=2,O)):(V.flags|=1048576,O)}function f(V){return e&&V.alternate===null&&(V.flags|=2),V}function g(V,O,k,H){return O===null||O.tag!==6?(O=uf(k,V.mode,H),O.return=V,O):(O=a(O,k),O.return=V,O)}function v(V,O,k,H){var X=k.type;return X===Ca?S(V,O,k.props.children,H,k.key):O!==null&&(O.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Vs&&eg(X)===O.type)?(H=a(O,k.props),H.ref=Pl(V,O,k),H.return=V,H):(H=Yu(k.type,k.key,k.props,null,V.mode,H),H.ref=Pl(V,O,k),H.return=V,H)}function y(V,O,k,H){return O===null||O.tag!==4||O.stateNode.containerInfo!==k.containerInfo||O.stateNode.implementation!==k.implementation?(O=df(k,V.mode,H),O.return=V,O):(O=a(O,k.children||[]),O.return=V,O)}function S(V,O,k,H,X){return O===null||O.tag!==7?(O=qo(k,V.mode,H,X),O.return=V,O):(O=a(O,k),O.return=V,O)}function b(V,O,k){if(typeof O=="string"&&O!==""||typeof O=="number")return O=uf(""+O,V.mode,k),O.return=V,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case uu:return k=Yu(O.type,O.key,O.props,null,V.mode,k),k.ref=Pl(V,null,O),k.return=V,k;case ba:return O=df(O,V.mode,k),O.return=V,O;case Vs:var H=O._init;return b(V,H(O._payload),k)}if(Wl(O)||kl(O))return O=qo(O,V.mode,k,null),O.return=V,O;_u(V,O)}return null}function T(V,O,k,H){var X=O!==null?O.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return X!==null?null:g(V,O,""+k,H);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case uu:return k.key===X?v(V,O,k,H):null;case ba:return k.key===X?y(V,O,k,H):null;case Vs:return X=k._init,T(V,O,X(k._payload),H)}if(Wl(k)||kl(k))return X!==null?null:S(V,O,k,H,null);_u(V,k)}return null}function I(V,O,k,H,X){if(typeof H=="string"&&H!==""||typeof H=="number")return V=V.get(k)||null,g(O,V,""+H,X);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case uu:return V=V.get(H.key===null?k:H.key)||null,v(O,V,H,X);case ba:return V=V.get(H.key===null?k:H.key)||null,y(O,V,H,X);case Vs:var G=H._init;return I(V,O,k,G(H._payload),X)}if(Wl(H)||kl(H))return V=V.get(k)||null,S(O,V,H,X,null);_u(O,H)}return null}function D(V,O,k,H){for(var X=null,G=null,Z=O,J=O=0,z=null;Z!==null&&J<k.length;J++){Z.index>J?(z=Z,Z=null):z=Z.sibling;var te=T(V,Z,k[J],H);if(te===null){Z===null&&(Z=z);break}e&&Z&&te.alternate===null&&t(V,Z),O=c(te,O,J),G===null?X=te:G.sibling=te,G=te,Z=z}if(J===k.length)return n(V,Z),mn&&jo(V,J),X;if(Z===null){for(;J<k.length;J++)Z=b(V,k[J],H),Z!==null&&(O=c(Z,O,J),G===null?X=Z:G.sibling=Z,G=Z);return mn&&jo(V,J),X}for(Z=i(V,Z);J<k.length;J++)z=I(Z,V,J,k[J],H),z!==null&&(e&&z.alternate!==null&&Z.delete(z.key===null?J:z.key),O=c(z,O,J),G===null?X=z:G.sibling=z,G=z);return e&&Z.forEach(function(me){return t(V,me)}),mn&&jo(V,J),X}function P(V,O,k,H){var X=kl(k);if(typeof X!="function")throw Error(Ne(150));if(k=X.call(k),k==null)throw Error(Ne(151));for(var G=X=null,Z=O,J=O=0,z=null,te=k.next();Z!==null&&!te.done;J++,te=k.next()){Z.index>J?(z=Z,Z=null):z=Z.sibling;var me=T(V,Z,te.value,H);if(me===null){Z===null&&(Z=z);break}e&&Z&&me.alternate===null&&t(V,Z),O=c(me,O,J),G===null?X=me:G.sibling=me,G=me,Z=z}if(te.done)return n(V,Z),mn&&jo(V,J),X;if(Z===null){for(;!te.done;J++,te=k.next())te=b(V,te.value,H),te!==null&&(O=c(te,O,J),G===null?X=te:G.sibling=te,G=te);return mn&&jo(V,J),X}for(Z=i(V,Z);!te.done;J++,te=k.next())te=I(Z,V,J,te.value,H),te!==null&&(e&&te.alternate!==null&&Z.delete(te.key===null?J:te.key),O=c(te,O,J),G===null?X=te:G.sibling=te,G=te);return e&&Z.forEach(function(fe){return t(V,fe)}),mn&&jo(V,J),X}function U(V,O,k,H){if(typeof k=="object"&&k!==null&&k.type===Ca&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case uu:e:{for(var X=k.key,G=O;G!==null;){if(G.key===X){if(X=k.type,X===Ca){if(G.tag===7){n(V,G.sibling),O=a(G,k.props.children),O.return=V,V=O;break e}}else if(G.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Vs&&eg(X)===G.type){n(V,G.sibling),O=a(G,k.props),O.ref=Pl(V,G,k),O.return=V,V=O;break e}n(V,G);break}else t(V,G);G=G.sibling}k.type===Ca?(O=qo(k.props.children,V.mode,H,k.key),O.return=V,V=O):(H=Yu(k.type,k.key,k.props,null,V.mode,H),H.ref=Pl(V,O,k),H.return=V,V=H)}return f(V);case ba:e:{for(G=k.key;O!==null;){if(O.key===G)if(O.tag===4&&O.stateNode.containerInfo===k.containerInfo&&O.stateNode.implementation===k.implementation){n(V,O.sibling),O=a(O,k.children||[]),O.return=V,V=O;break e}else{n(V,O);break}else t(V,O);O=O.sibling}O=df(k,V.mode,H),O.return=V,V=O}return f(V);case Vs:return G=k._init,U(V,O,G(k._payload),H)}if(Wl(k))return D(V,O,k,H);if(kl(k))return P(V,O,k,H);_u(V,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,O!==null&&O.tag===6?(n(V,O.sibling),O=a(O,k),O.return=V,V=O):(n(V,O),O=uf(k,V.mode,H),O.return=V,V=O),f(V)):n(V,O)}return U}var qa=Y2(!0),X2=Y2(!1),pd=wo(null),md=null,Ma=null,O1=null;function L1(){O1=Ma=md=null}function P1(e){var t=pd.current;hn(pd),e._currentValue=t}function p0(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Wa(e,t){md=e,O1=Ma=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(kr=!0),e.firstContext=null)}function xi(e){var t=e._currentValue;if(O1!==e)if(e={context:e,memoizedValue:t,next:null},Ma===null){if(md===null)throw Error(Ne(308));Ma=e,md.dependencies={lanes:0,firstContext:e}}else Ma=Ma.next=e;return t}var Wo=null;function D1(e){Wo===null?Wo=[e]:Wo.push(e)}function q2(e,t,n,i){var a=t.interleaved;return a===null?(n.next=n,D1(t)):(n.next=a.next,a.next=n),t.interleaved=n,bs(e,i)}function bs(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Hs=!1;function j1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function K2(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function no(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,zt&2){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,bs(e,n)}return a=i.interleaved,a===null?(t.next=t,D1(i)):(t.next=a.next,a.next=t),i.interleaved=t,bs(e,n)}function Uu(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,b1(e,n)}}function tg(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var a=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};c===null?a=c=f:c=c.next=f,n=n.next}while(n!==null);c===null?a=c=t:c=c.next=t}else a=c=t;n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function gd(e,t,n,i){var a=e.updateQueue;Hs=!1;var c=a.firstBaseUpdate,f=a.lastBaseUpdate,g=a.shared.pending;if(g!==null){a.shared.pending=null;var v=g,y=v.next;v.next=null,f===null?c=y:f.next=y,f=v;var S=e.alternate;S!==null&&(S=S.updateQueue,g=S.lastBaseUpdate,g!==f&&(g===null?S.firstBaseUpdate=y:g.next=y,S.lastBaseUpdate=v))}if(c!==null){var b=a.baseState;f=0,S=y=v=null,g=c;do{var T=g.lane,I=g.eventTime;if((i&T)===T){S!==null&&(S=S.next={eventTime:I,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var D=e,P=g;switch(T=t,I=n,P.tag){case 1:if(D=P.payload,typeof D=="function"){b=D.call(I,b,T);break e}b=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=P.payload,T=typeof D=="function"?D.call(I,b,T):D,T==null)break e;b=_n({},b,T);break e;case 2:Hs=!0}}g.callback!==null&&g.lane!==0&&(e.flags|=64,T=a.effects,T===null?a.effects=[g]:T.push(g))}else I={eventTime:I,lane:T,tag:g.tag,payload:g.payload,callback:g.callback,next:null},S===null?(y=S=I,v=b):S=S.next=I,f|=T;if(g=g.next,g===null){if(g=a.shared.pending,g===null)break;T=g,g=T.next,T.next=null,a.lastBaseUpdate=T,a.shared.pending=null}}while(!0);if(S===null&&(v=b),a.baseState=v,a.firstBaseUpdate=y,a.lastBaseUpdate=S,t=a.shared.interleaved,t!==null){a=t;do f|=a.lane,a=a.next;while(a!==t)}else c===null&&(a.shared.lanes=0);na|=f,e.lanes=f,e.memoizedState=b}}function ng(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],a=i.callback;if(a!==null){if(i.callback=null,i=n,typeof a!="function")throw Error(Ne(191,a));a.call(i)}}}var zc={},qi=wo(zc),Cc=wo(zc),Sc=wo(zc);function Zo(e){if(e===zc)throw Error(Ne(174));return e}function B1(e,t){switch(an(Sc,t),an(Cc,e),an(qi,zc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Xf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Xf(t,e)}hn(qi),an(qi,t)}function Ka(){hn(qi),hn(Cc),hn(Sc)}function Q2(e){Zo(Sc.current);var t=Zo(qi.current),n=Xf(t,e.type);t!==n&&(an(Cc,e),an(qi,n))}function F1(e){Cc.current===e&&(hn(qi),hn(Cc))}var yn=wo(0);function xd(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rf=[];function z1(){for(var e=0;e<rf.length;e++)rf[e]._workInProgressVersionPrimary=null;rf.length=0}var Vu=Es.ReactCurrentDispatcher,sf=Es.ReactCurrentBatchConfig,ta=0,vn=null,Un=null,Kn=null,yd=!1,ec=!1,Ac=0,wS=0;function lr(){throw Error(Ne(321))}function U1(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Li(e[n],t[n]))return!1;return!0}function V1(e,t,n,i,a,c){if(ta=c,vn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Vu.current=e===null||e.memoizedState===null?CS:SS,e=n(i,a),ec){c=0;do{if(ec=!1,Ac=0,25<=c)throw Error(Ne(301));c+=1,Kn=Un=null,t.updateQueue=null,Vu.current=AS,e=n(i,a)}while(ec)}if(Vu.current=wd,t=Un!==null&&Un.next!==null,ta=0,Kn=Un=vn=null,yd=!1,t)throw Error(Ne(300));return e}function H1(){var e=Ac!==0;return Ac=0,e}function Zi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kn===null?vn.memoizedState=Kn=e:Kn=Kn.next=e,Kn}function yi(){if(Un===null){var e=vn.alternate;e=e!==null?e.memoizedState:null}else e=Un.next;var t=Kn===null?vn.memoizedState:Kn.next;if(t!==null)Kn=t,Un=e;else{if(e===null)throw Error(Ne(310));Un=e,e={memoizedState:Un.memoizedState,baseState:Un.baseState,baseQueue:Un.baseQueue,queue:Un.queue,next:null},Kn===null?vn.memoizedState=Kn=e:Kn=Kn.next=e}return Kn}function Ec(e,t){return typeof t=="function"?t(e):t}function of(e){var t=yi(),n=t.queue;if(n===null)throw Error(Ne(311));n.lastRenderedReducer=e;var i=Un,a=i.baseQueue,c=n.pending;if(c!==null){if(a!==null){var f=a.next;a.next=c.next,c.next=f}i.baseQueue=a=c,n.pending=null}if(a!==null){c=a.next,i=i.baseState;var g=f=null,v=null,y=c;do{var S=y.lane;if((ta&S)===S)v!==null&&(v=v.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),i=y.hasEagerState?y.eagerState:e(i,y.action);else{var b={lane:S,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};v===null?(g=v=b,f=i):v=v.next=b,vn.lanes|=S,na|=S}y=y.next}while(y!==null&&y!==c);v===null?f=i:v.next=g,Li(i,t.memoizedState)||(kr=!0),t.memoizedState=i,t.baseState=f,t.baseQueue=v,n.lastRenderedState=i}if(e=n.interleaved,e!==null){a=e;do c=a.lane,vn.lanes|=c,na|=c,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function af(e){var t=yi(),n=t.queue;if(n===null)throw Error(Ne(311));n.lastRenderedReducer=e;var i=n.dispatch,a=n.pending,c=t.memoizedState;if(a!==null){n.pending=null;var f=a=a.next;do c=e(c,f.action),f=f.next;while(f!==a);Li(c,t.memoizedState)||(kr=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),n.lastRenderedState=c}return[c,i]}function $2(){}function J2(e,t){var n=vn,i=yi(),a=t(),c=!Li(i.memoizedState,a);if(c&&(i.memoizedState=a,kr=!0),i=i.queue,W1(nw.bind(null,n,i,e),[e]),i.getSnapshot!==t||c||Kn!==null&&Kn.memoizedState.tag&1){if(n.flags|=2048,Nc(9,tw.bind(null,n,i,a,t),void 0,null),$n===null)throw Error(Ne(349));ta&30||ew(n,t,a)}return a}function ew(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=vn.updateQueue,t===null?(t={lastEffect:null,stores:null},vn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function tw(e,t,n,i){t.value=n,t.getSnapshot=i,rw(t)&&iw(e)}function nw(e,t,n){return n(function(){rw(t)&&iw(e)})}function rw(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Li(e,n)}catch{return!0}}function iw(e){var t=bs(e,1);t!==null&&Oi(t,e,1,-1)}function rg(e){var t=Zi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ec,lastRenderedState:e},t.queue=e,e=e.dispatch=bS.bind(null,vn,e),[t.memoizedState,e]}function Nc(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=vn.updateQueue,t===null?(t={lastEffect:null,stores:null},vn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function sw(){return yi().memoizedState}function Hu(e,t,n,i){var a=Zi();vn.flags|=e,a.memoizedState=Nc(1|t,n,void 0,i===void 0?null:i)}function Qd(e,t,n,i){var a=yi();i=i===void 0?null:i;var c=void 0;if(Un!==null){var f=Un.memoizedState;if(c=f.destroy,i!==null&&U1(i,f.deps)){a.memoizedState=Nc(t,n,c,i);return}}vn.flags|=e,a.memoizedState=Nc(1|t,n,c,i)}function ig(e,t){return Hu(8390656,8,e,t)}function W1(e,t){return Qd(2048,8,e,t)}function ow(e,t){return Qd(4,2,e,t)}function aw(e,t){return Qd(4,4,e,t)}function lw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cw(e,t,n){return n=n!=null?n.concat([e]):null,Qd(4,4,lw.bind(null,t,e),n)}function Z1(){}function uw(e,t){var n=yi();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&U1(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function dw(e,t){var n=yi();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&U1(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function hw(e,t,n){return ta&21?(Li(n,t)||(n=x2(),vn.lanes|=n,na|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,kr=!0),e.memoizedState=n)}function vS(e,t){var n=Qt;Qt=n!==0&&4>n?n:4,e(!0);var i=sf.transition;sf.transition={};try{e(!1),t()}finally{Qt=n,sf.transition=i}}function fw(){return yi().memoizedState}function _S(e,t,n){var i=io(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},pw(e))mw(t,n);else if(n=q2(e,t,n,i),n!==null){var a=br();Oi(n,e,i,a),gw(n,t,i)}}function bS(e,t,n){var i=io(e),a={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(pw(e))mw(t,a);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var f=t.lastRenderedState,g=c(f,n);if(a.hasEagerState=!0,a.eagerState=g,Li(g,f)){var v=t.interleaved;v===null?(a.next=a,D1(t)):(a.next=v.next,v.next=a),t.interleaved=a;return}}catch{}finally{}n=q2(e,t,a,i),n!==null&&(a=br(),Oi(n,e,i,a),gw(n,t,i))}}function pw(e){var t=e.alternate;return e===vn||t!==null&&t===vn}function mw(e,t){ec=yd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function gw(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,b1(e,n)}}var wd={readContext:xi,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useInsertionEffect:lr,useLayoutEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useMutableSource:lr,useSyncExternalStore:lr,useId:lr,unstable_isNewReconciler:!1},CS={readContext:xi,useCallback:function(e,t){return Zi().memoizedState=[e,t===void 0?null:t],e},useContext:xi,useEffect:ig,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Hu(4194308,4,lw.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Hu(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hu(4,2,e,t)},useMemo:function(e,t){var n=Zi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Zi();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=_S.bind(null,vn,e),[i.memoizedState,e]},useRef:function(e){var t=Zi();return e={current:e},t.memoizedState=e},useState:rg,useDebugValue:Z1,useDeferredValue:function(e){return Zi().memoizedState=e},useTransition:function(){var e=rg(!1),t=e[0];return e=vS.bind(null,e[1]),Zi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=vn,a=Zi();if(mn){if(n===void 0)throw Error(Ne(407));n=n()}else{if(n=t(),$n===null)throw Error(Ne(349));ta&30||ew(i,t,n)}a.memoizedState=n;var c={value:n,getSnapshot:t};return a.queue=c,ig(nw.bind(null,i,c,e),[e]),i.flags|=2048,Nc(9,tw.bind(null,i,c,n,t),void 0,null),n},useId:function(){var e=Zi(),t=$n.identifierPrefix;if(mn){var n=hs,i=ds;n=(i&~(1<<32-Ri(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ac++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=wS++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},SS={readContext:xi,useCallback:uw,useContext:xi,useEffect:W1,useImperativeHandle:cw,useInsertionEffect:ow,useLayoutEffect:aw,useMemo:dw,useReducer:of,useRef:sw,useState:function(){return of(Ec)},useDebugValue:Z1,useDeferredValue:function(e){var t=yi();return hw(t,Un.memoizedState,e)},useTransition:function(){var e=of(Ec)[0],t=yi().memoizedState;return[e,t]},useMutableSource:$2,useSyncExternalStore:J2,useId:fw,unstable_isNewReconciler:!1},AS={readContext:xi,useCallback:uw,useContext:xi,useEffect:W1,useImperativeHandle:cw,useInsertionEffect:ow,useLayoutEffect:aw,useMemo:dw,useReducer:af,useRef:sw,useState:function(){return af(Ec)},useDebugValue:Z1,useDeferredValue:function(e){var t=yi();return Un===null?t.memoizedState=e:hw(t,Un.memoizedState,e)},useTransition:function(){var e=af(Ec)[0],t=yi().memoizedState;return[e,t]},useMutableSource:$2,useSyncExternalStore:J2,useId:fw,unstable_isNewReconciler:!1};function Ni(e,t){if(e&&e.defaultProps){t=_n({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function m0(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:_n({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var $d={isMounted:function(e){return(e=e._reactInternals)?oa(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=br(),a=io(e),c=gs(i,a);c.payload=t,n!=null&&(c.callback=n),t=no(e,c,a),t!==null&&(Oi(t,e,a,i),Uu(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=br(),a=io(e),c=gs(i,a);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=no(e,c,a),t!==null&&(Oi(t,e,a,i),Uu(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=br(),i=io(e),a=gs(n,i);a.tag=2,t!=null&&(a.callback=t),t=no(e,a,i),t!==null&&(Oi(t,e,i,n),Uu(t,e,i))}};function sg(e,t,n,i,a,c,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,c,f):t.prototype&&t.prototype.isPureReactComponent?!wc(n,i)||!wc(a,c):!0}function xw(e,t,n){var i=!1,a=fo,c=t.contextType;return typeof c=="object"&&c!==null?c=xi(c):(a=Rr(t)?Jo:fr.current,i=t.contextTypes,c=(i=i!=null)?Ya(e,a):fo),t=new t(n,c),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=$d,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=c),t}function og(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&$d.enqueueReplaceState(t,t.state,null)}function g0(e,t,n,i){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},j1(e);var c=t.contextType;typeof c=="object"&&c!==null?a.context=xi(c):(c=Rr(t)?Jo:fr.current,a.context=Ya(e,c)),a.state=e.memoizedState,c=t.getDerivedStateFromProps,typeof c=="function"&&(m0(e,t,c,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&$d.enqueueReplaceState(a,a.state,null),gd(e,n,a,i),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Qa(e,t){try{var n="",i=t;do n+=JC(i),i=i.return;while(i);var a=n}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:t,stack:a,digest:null}}function lf(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function x0(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ES=typeof WeakMap=="function"?WeakMap:Map;function yw(e,t,n){n=gs(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){_d||(_d=!0,N0=i),x0(e,t)},n}function ww(e,t,n){n=gs(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var a=t.value;n.payload=function(){return i(a)},n.callback=function(){x0(e,t)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(n.callback=function(){x0(e,t),typeof i!="function"&&(ro===null?ro=new Set([this]):ro.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),n}function ag(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new ES;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(n)||(a.add(n),e=zS.bind(null,e,t,n),t.then(e,e))}function lg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function cg(e,t,n,i,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=gs(-1,1),t.tag=2,no(n,t,1))),n.lanes|=1),e)}var NS=Es.ReactCurrentOwner,kr=!1;function _r(e,t,n,i){t.child=e===null?X2(t,null,n,i):qa(t,e.child,n,i)}function ug(e,t,n,i,a){n=n.render;var c=t.ref;return Wa(t,a),i=V1(e,t,n,i,c,a),n=H1(),e!==null&&!kr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Cs(e,t,a)):(mn&&n&&k1(t),t.flags|=1,_r(e,t,i,a),t.child)}function dg(e,t,n,i,a){if(e===null){var c=n.type;return typeof c=="function"&&!J1(c)&&c.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=c,vw(e,t,c,i,a)):(e=Yu(n.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!(e.lanes&a)){var f=c.memoizedProps;if(n=n.compare,n=n!==null?n:wc,n(f,i)&&e.ref===t.ref)return Cs(e,t,a)}return t.flags|=1,e=so(c,i),e.ref=t.ref,e.return=t,t.child=e}function vw(e,t,n,i,a){if(e!==null){var c=e.memoizedProps;if(wc(c,i)&&e.ref===t.ref)if(kr=!1,t.pendingProps=i=c,(e.lanes&a)!==0)e.flags&131072&&(kr=!0);else return t.lanes=e.lanes,Cs(e,t,a)}return y0(e,t,n,i,a)}function _w(e,t,n){var i=t.pendingProps,a=i.children,c=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},an(Oa,Vr),Vr|=n;else{if(!(n&1073741824))return e=c!==null?c.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,an(Oa,Vr),Vr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=c!==null?c.baseLanes:n,an(Oa,Vr),Vr|=i}else c!==null?(i=c.baseLanes|n,t.memoizedState=null):i=n,an(Oa,Vr),Vr|=i;return _r(e,t,a,n),t.child}function bw(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function y0(e,t,n,i,a){var c=Rr(n)?Jo:fr.current;return c=Ya(t,c),Wa(t,a),n=V1(e,t,n,i,c,a),i=H1(),e!==null&&!kr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Cs(e,t,a)):(mn&&i&&k1(t),t.flags|=1,_r(e,t,n,a),t.child)}function hg(e,t,n,i,a){if(Rr(n)){var c=!0;dd(t)}else c=!1;if(Wa(t,a),t.stateNode===null)Wu(e,t),xw(t,n,i),g0(t,n,i,a),i=!0;else if(e===null){var f=t.stateNode,g=t.memoizedProps;f.props=g;var v=f.context,y=n.contextType;typeof y=="object"&&y!==null?y=xi(y):(y=Rr(n)?Jo:fr.current,y=Ya(t,y));var S=n.getDerivedStateFromProps,b=typeof S=="function"||typeof f.getSnapshotBeforeUpdate=="function";b||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==i||v!==y)&&og(t,f,i,y),Hs=!1;var T=t.memoizedState;f.state=T,gd(t,i,f,a),v=t.memoizedState,g!==i||T!==v||Mr.current||Hs?(typeof S=="function"&&(m0(t,n,S,i),v=t.memoizedState),(g=Hs||sg(t,n,g,i,T,v,y))?(b||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=v),f.props=i,f.state=v,f.context=y,i=g):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{f=t.stateNode,K2(e,t),g=t.memoizedProps,y=t.type===t.elementType?g:Ni(t.type,g),f.props=y,b=t.pendingProps,T=f.context,v=n.contextType,typeof v=="object"&&v!==null?v=xi(v):(v=Rr(n)?Jo:fr.current,v=Ya(t,v));var I=n.getDerivedStateFromProps;(S=typeof I=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==b||T!==v)&&og(t,f,i,v),Hs=!1,T=t.memoizedState,f.state=T,gd(t,i,f,a);var D=t.memoizedState;g!==b||T!==D||Mr.current||Hs?(typeof I=="function"&&(m0(t,n,I,i),D=t.memoizedState),(y=Hs||sg(t,n,y,i,T,D,v)||!1)?(S||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,D,v),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,D,v)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=D),f.props=i,f.state=D,f.context=v,i=y):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),i=!1)}return w0(e,t,n,i,c,a)}function w0(e,t,n,i,a,c){bw(e,t);var f=(t.flags&128)!==0;if(!i&&!f)return a&&Qm(t,n,!1),Cs(e,t,c);i=t.stateNode,NS.current=t;var g=f&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&f?(t.child=qa(t,e.child,null,c),t.child=qa(t,null,g,c)):_r(e,t,g,c),t.memoizedState=i.state,a&&Qm(t,n,!0),t.child}function Cw(e){var t=e.stateNode;t.pendingContext?Km(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Km(e,t.context,!1),B1(e,t.containerInfo)}function fg(e,t,n,i,a){return Xa(),R1(a),t.flags|=256,_r(e,t,n,i),t.child}var v0={dehydrated:null,treeContext:null,retryLane:0};function _0(e){return{baseLanes:e,cachePool:null,transitions:null}}function Sw(e,t,n){var i=t.pendingProps,a=yn.current,c=!1,f=(t.flags&128)!==0,g;if((g=f)||(g=e!==null&&e.memoizedState===null?!1:(a&2)!==0),g?(c=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),an(yn,a&1),e===null)return f0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=i.children,e=i.fallback,c?(i=t.mode,c=t.child,f={mode:"hidden",children:f},!(i&1)&&c!==null?(c.childLanes=0,c.pendingProps=f):c=th(f,i,0,null),e=qo(e,i,n,null),c.return=t,e.return=t,c.sibling=e,t.child=c,t.child.memoizedState=_0(n),t.memoizedState=v0,e):G1(t,f));if(a=e.memoizedState,a!==null&&(g=a.dehydrated,g!==null))return TS(e,t,f,i,g,a,n);if(c){c=i.fallback,f=t.mode,a=e.child,g=a.sibling;var v={mode:"hidden",children:i.children};return!(f&1)&&t.child!==a?(i=t.child,i.childLanes=0,i.pendingProps=v,t.deletions=null):(i=so(a,v),i.subtreeFlags=a.subtreeFlags&14680064),g!==null?c=so(g,c):(c=qo(c,f,n,null),c.flags|=2),c.return=t,i.return=t,i.sibling=c,t.child=i,i=c,c=t.child,f=e.child.memoizedState,f=f===null?_0(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},c.memoizedState=f,c.childLanes=e.childLanes&~n,t.memoizedState=v0,i}return c=e.child,e=c.sibling,i=so(c,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function G1(e,t){return t=th({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function bu(e,t,n,i){return i!==null&&R1(i),qa(t,e.child,null,n),e=G1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function TS(e,t,n,i,a,c,f){if(n)return t.flags&256?(t.flags&=-257,i=lf(Error(Ne(422))),bu(e,t,f,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(c=i.fallback,a=t.mode,i=th({mode:"visible",children:i.children},a,0,null),c=qo(c,a,f,null),c.flags|=2,i.return=t,c.return=t,i.sibling=c,t.child=i,t.mode&1&&qa(t,e.child,null,f),t.child.memoizedState=_0(f),t.memoizedState=v0,c);if(!(t.mode&1))return bu(e,t,f,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var g=i.dgst;return i=g,c=Error(Ne(419)),i=lf(c,i,void 0),bu(e,t,f,i)}if(g=(f&e.childLanes)!==0,kr||g){if(i=$n,i!==null){switch(f&-f){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|f)?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,bs(e,a),Oi(i,e,a,-1))}return $1(),i=lf(Error(Ne(421))),bu(e,t,f,i)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=US.bind(null,e),a._reactRetry=t,null):(e=c.treeContext,Zr=to(a.nextSibling),Gr=t,mn=!0,Mi=null,e!==null&&(fi[pi++]=ds,fi[pi++]=hs,fi[pi++]=ea,ds=e.id,hs=e.overflow,ea=t),t=G1(t,i.children),t.flags|=4096,t)}function pg(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),p0(e.return,t,n)}function cf(e,t,n,i,a){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=i,c.tail=n,c.tailMode=a)}function Aw(e,t,n){var i=t.pendingProps,a=i.revealOrder,c=i.tail;if(_r(e,t,i.children,n),i=yn.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pg(e,n,t);else if(e.tag===19)pg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(an(yn,i),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&xd(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),cf(t,!1,a,n,c);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&xd(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}cf(t,!0,n,null,c);break;case"together":cf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Cs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),na|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ne(153));if(t.child!==null){for(e=t.child,n=so(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=so(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function IS(e,t,n){switch(t.tag){case 3:Cw(t),Xa();break;case 5:Q2(t);break;case 1:Rr(t.type)&&dd(t);break;case 4:B1(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,a=t.memoizedProps.value;an(pd,i._currentValue),i._currentValue=a;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(an(yn,yn.current&1),t.flags|=128,null):n&t.child.childLanes?Sw(e,t,n):(an(yn,yn.current&1),e=Cs(e,t,n),e!==null?e.sibling:null);an(yn,yn.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return Aw(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),an(yn,yn.current),i)break;return null;case 22:case 23:return t.lanes=0,_w(e,t,n)}return Cs(e,t,n)}var Ew,b0,Nw,Tw;Ew=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};b0=function(){};Nw=function(e,t,n,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,Zo(qi.current);var c=null;switch(n){case"input":a=Wf(e,a),i=Wf(e,i),c=[];break;case"select":a=_n({},a,{value:void 0}),i=_n({},i,{value:void 0}),c=[];break;case"textarea":a=Yf(e,a),i=Yf(e,i),c=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=cd)}qf(n,i);var f;n=null;for(y in a)if(!i.hasOwnProperty(y)&&a.hasOwnProperty(y)&&a[y]!=null)if(y==="style"){var g=a[y];for(f in g)g.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(hc.hasOwnProperty(y)?c||(c=[]):(c=c||[]).push(y,null));for(y in i){var v=i[y];if(g=a!=null?a[y]:void 0,i.hasOwnProperty(y)&&v!==g&&(v!=null||g!=null))if(y==="style")if(g){for(f in g)!g.hasOwnProperty(f)||v&&v.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in v)v.hasOwnProperty(f)&&g[f]!==v[f]&&(n||(n={}),n[f]=v[f])}else n||(c||(c=[]),c.push(y,n)),n=v;else y==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,g=g?g.__html:void 0,v!=null&&g!==v&&(c=c||[]).push(y,v)):y==="children"?typeof v!="string"&&typeof v!="number"||(c=c||[]).push(y,""+v):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(hc.hasOwnProperty(y)?(v!=null&&y==="onScroll"&&dn("scroll",e),c||g===v||(c=[])):(c=c||[]).push(y,v))}n&&(c=c||[]).push("style",n);var y=c;(t.updateQueue=y)&&(t.flags|=4)}};Tw=function(e,t,n,i){n!==i&&(t.flags|=4)};function Dl(e,t){if(!mn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function cr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function kS(e,t,n){var i=t.pendingProps;switch(M1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cr(t),null;case 1:return Rr(t.type)&&ud(),cr(t),null;case 3:return i=t.stateNode,Ka(),hn(Mr),hn(fr),z1(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(vu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Mi!==null&&(k0(Mi),Mi=null))),b0(e,t),cr(t),null;case 5:F1(t);var a=Zo(Sc.current);if(n=t.type,e!==null&&t.stateNode!=null)Nw(e,t,n,i,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Ne(166));return cr(t),null}if(e=Zo(qi.current),vu(t)){i=t.stateNode,n=t.type;var c=t.memoizedProps;switch(i[Yi]=t,i[bc]=c,e=(t.mode&1)!==0,n){case"dialog":dn("cancel",i),dn("close",i);break;case"iframe":case"object":case"embed":dn("load",i);break;case"video":case"audio":for(a=0;a<Gl.length;a++)dn(Gl[a],i);break;case"source":dn("error",i);break;case"img":case"image":case"link":dn("error",i),dn("load",i);break;case"details":dn("toggle",i);break;case"input":Cm(i,c),dn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!c.multiple},dn("invalid",i);break;case"textarea":Am(i,c),dn("invalid",i)}qf(n,c),a=null;for(var f in c)if(c.hasOwnProperty(f)){var g=c[f];f==="children"?typeof g=="string"?i.textContent!==g&&(c.suppressHydrationWarning!==!0&&wu(i.textContent,g,e),a=["children",g]):typeof g=="number"&&i.textContent!==""+g&&(c.suppressHydrationWarning!==!0&&wu(i.textContent,g,e),a=["children",""+g]):hc.hasOwnProperty(f)&&g!=null&&f==="onScroll"&&dn("scroll",i)}switch(n){case"input":du(i),Sm(i,c,!0);break;case"textarea":du(i),Em(i);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(i.onclick=cd)}i=a,t.updateQueue=i,i!==null&&(t.flags|=4)}else{f=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=n2(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=f.createElement(n,{is:i.is}):(e=f.createElement(n),n==="select"&&(f=e,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):e=f.createElementNS(e,n),e[Yi]=t,e[bc]=i,Ew(e,t,!1,!1),t.stateNode=e;e:{switch(f=Kf(n,i),n){case"dialog":dn("cancel",e),dn("close",e),a=i;break;case"iframe":case"object":case"embed":dn("load",e),a=i;break;case"video":case"audio":for(a=0;a<Gl.length;a++)dn(Gl[a],e);a=i;break;case"source":dn("error",e),a=i;break;case"img":case"image":case"link":dn("error",e),dn("load",e),a=i;break;case"details":dn("toggle",e),a=i;break;case"input":Cm(e,i),a=Wf(e,i),dn("invalid",e);break;case"option":a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=_n({},i,{value:void 0}),dn("invalid",e);break;case"textarea":Am(e,i),a=Yf(e,i),dn("invalid",e);break;default:a=i}qf(n,a),g=a;for(c in g)if(g.hasOwnProperty(c)){var v=g[c];c==="style"?s2(e,v):c==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,v!=null&&r2(e,v)):c==="children"?typeof v=="string"?(n!=="textarea"||v!=="")&&fc(e,v):typeof v=="number"&&fc(e,""+v):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(hc.hasOwnProperty(c)?v!=null&&c==="onScroll"&&dn("scroll",e):v!=null&&g1(e,c,v,f))}switch(n){case"input":du(e),Sm(e,i,!1);break;case"textarea":du(e),Em(e);break;case"option":i.value!=null&&e.setAttribute("value",""+ho(i.value));break;case"select":e.multiple=!!i.multiple,c=i.value,c!=null?za(e,!!i.multiple,c,!1):i.defaultValue!=null&&za(e,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=cd)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return cr(t),null;case 6:if(e&&t.stateNode!=null)Tw(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Ne(166));if(n=Zo(Sc.current),Zo(qi.current),vu(t)){if(i=t.stateNode,n=t.memoizedProps,i[Yi]=t,(c=i.nodeValue!==n)&&(e=Gr,e!==null))switch(e.tag){case 3:wu(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&wu(i.nodeValue,n,(e.mode&1)!==0)}c&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Yi]=t,t.stateNode=i}return cr(t),null;case 13:if(hn(yn),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(mn&&Zr!==null&&t.mode&1&&!(t.flags&128))G2(),Xa(),t.flags|=98560,c=!1;else if(c=vu(t),i!==null&&i.dehydrated!==null){if(e===null){if(!c)throw Error(Ne(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(Ne(317));c[Yi]=t}else Xa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;cr(t),c=!1}else Mi!==null&&(k0(Mi),Mi=null),c=!0;if(!c)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||yn.current&1?Hn===0&&(Hn=3):$1())),t.updateQueue!==null&&(t.flags|=4),cr(t),null);case 4:return Ka(),b0(e,t),e===null&&vc(t.stateNode.containerInfo),cr(t),null;case 10:return P1(t.type._context),cr(t),null;case 17:return Rr(t.type)&&ud(),cr(t),null;case 19:if(hn(yn),c=t.memoizedState,c===null)return cr(t),null;if(i=(t.flags&128)!==0,f=c.rendering,f===null)if(i)Dl(c,!1);else{if(Hn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=xd(e),f!==null){for(t.flags|=128,Dl(c,!1),i=f.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)c=n,e=i,c.flags&=14680066,f=c.alternate,f===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=f.childLanes,c.lanes=f.lanes,c.child=f.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=f.memoizedProps,c.memoizedState=f.memoizedState,c.updateQueue=f.updateQueue,c.type=f.type,e=f.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return an(yn,yn.current&1|2),t.child}e=e.sibling}c.tail!==null&&En()>$a&&(t.flags|=128,i=!0,Dl(c,!1),t.lanes=4194304)}else{if(!i)if(e=xd(f),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Dl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!mn)return cr(t),null}else 2*En()-c.renderingStartTime>$a&&n!==1073741824&&(t.flags|=128,i=!0,Dl(c,!1),t.lanes=4194304);c.isBackwards?(f.sibling=t.child,t.child=f):(n=c.last,n!==null?n.sibling=f:t.child=f,c.last=f)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=En(),t.sibling=null,n=yn.current,an(yn,i?n&1|2:n&1),t):(cr(t),null);case 22:case 23:return Q1(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Vr&1073741824&&(cr(t),t.subtreeFlags&6&&(t.flags|=8192)):cr(t),null;case 24:return null;case 25:return null}throw Error(Ne(156,t.tag))}function MS(e,t){switch(M1(t),t.tag){case 1:return Rr(t.type)&&ud(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ka(),hn(Mr),hn(fr),z1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return F1(t),null;case 13:if(hn(yn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ne(340));Xa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return hn(yn),null;case 4:return Ka(),null;case 10:return P1(t.type._context),null;case 22:case 23:return Q1(),null;case 24:return null;default:return null}}var Cu=!1,dr=!1,RS=typeof WeakSet=="function"?WeakSet:Set,We=null;function Ra(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Cn(e,t,i)}else n.current=null}function C0(e,t,n){try{n()}catch(i){Cn(e,t,i)}}var mg=!1;function OS(e,t){if(o0=od,e=O2(),I1(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var a=i.anchorOffset,c=i.focusNode;i=i.focusOffset;try{n.nodeType,c.nodeType}catch{n=null;break e}var f=0,g=-1,v=-1,y=0,S=0,b=e,T=null;t:for(;;){for(var I;b!==n||a!==0&&b.nodeType!==3||(g=f+a),b!==c||i!==0&&b.nodeType!==3||(v=f+i),b.nodeType===3&&(f+=b.nodeValue.length),(I=b.firstChild)!==null;)T=b,b=I;for(;;){if(b===e)break t;if(T===n&&++y===a&&(g=f),T===c&&++S===i&&(v=f),(I=b.nextSibling)!==null)break;b=T,T=b.parentNode}b=I}n=g===-1||v===-1?null:{start:g,end:v}}else n=null}n=n||{start:0,end:0}}else n=null;for(a0={focusedElem:e,selectionRange:n},od=!1,We=t;We!==null;)if(t=We,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,We=e;else for(;We!==null;){t=We;try{var D=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var P=D.memoizedProps,U=D.memoizedState,V=t.stateNode,O=V.getSnapshotBeforeUpdate(t.elementType===t.type?P:Ni(t.type,P),U);V.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var k=t.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ne(163))}}catch(H){Cn(t,t.return,H)}if(e=t.sibling,e!==null){e.return=t.return,We=e;break}We=t.return}return D=mg,mg=!1,D}function tc(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var c=a.destroy;a.destroy=void 0,c!==void 0&&C0(t,n,c)}a=a.next}while(a!==i)}}function Jd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function S0(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Iw(e){var t=e.alternate;t!==null&&(e.alternate=null,Iw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Yi],delete t[bc],delete t[u0],delete t[mS],delete t[gS])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function kw(e){return e.tag===5||e.tag===3||e.tag===4}function gg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||kw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function A0(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=cd));else if(i!==4&&(e=e.child,e!==null))for(A0(e,t,n),e=e.sibling;e!==null;)A0(e,t,n),e=e.sibling}function E0(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(E0(e,t,n),e=e.sibling;e!==null;)E0(e,t,n),e=e.sibling}var er=null,Ii=!1;function js(e,t,n){for(n=n.child;n!==null;)Mw(e,t,n),n=n.sibling}function Mw(e,t,n){if(Xi&&typeof Xi.onCommitFiberUnmount=="function")try{Xi.onCommitFiberUnmount(Zd,n)}catch{}switch(n.tag){case 5:dr||Ra(n,t);case 6:var i=er,a=Ii;er=null,js(e,t,n),er=i,Ii=a,er!==null&&(Ii?(e=er,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):er.removeChild(n.stateNode));break;case 18:er!==null&&(Ii?(e=er,n=n.stateNode,e.nodeType===8?tf(e.parentNode,n):e.nodeType===1&&tf(e,n),xc(e)):tf(er,n.stateNode));break;case 4:i=er,a=Ii,er=n.stateNode.containerInfo,Ii=!0,js(e,t,n),er=i,Ii=a;break;case 0:case 11:case 14:case 15:if(!dr&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var c=a,f=c.destroy;c=c.tag,f!==void 0&&(c&2||c&4)&&C0(n,t,f),a=a.next}while(a!==i)}js(e,t,n);break;case 1:if(!dr&&(Ra(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(g){Cn(n,t,g)}js(e,t,n);break;case 21:js(e,t,n);break;case 22:n.mode&1?(dr=(i=dr)||n.memoizedState!==null,js(e,t,n),dr=i):js(e,t,n);break;default:js(e,t,n)}}function xg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new RS),t.forEach(function(i){var a=VS.bind(null,e,i);n.has(i)||(n.add(i),i.then(a,a))})}}function Ei(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];try{var c=e,f=t,g=f;e:for(;g!==null;){switch(g.tag){case 5:er=g.stateNode,Ii=!1;break e;case 3:er=g.stateNode.containerInfo,Ii=!0;break e;case 4:er=g.stateNode.containerInfo,Ii=!0;break e}g=g.return}if(er===null)throw Error(Ne(160));Mw(c,f,a),er=null,Ii=!1;var v=a.alternate;v!==null&&(v.return=null),a.return=null}catch(y){Cn(a,t,y)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Rw(t,e),t=t.sibling}function Rw(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ei(t,e),Hi(e),i&4){try{tc(3,e,e.return),Jd(3,e)}catch(P){Cn(e,e.return,P)}try{tc(5,e,e.return)}catch(P){Cn(e,e.return,P)}}break;case 1:Ei(t,e),Hi(e),i&512&&n!==null&&Ra(n,n.return);break;case 5:if(Ei(t,e),Hi(e),i&512&&n!==null&&Ra(n,n.return),e.flags&32){var a=e.stateNode;try{fc(a,"")}catch(P){Cn(e,e.return,P)}}if(i&4&&(a=e.stateNode,a!=null)){var c=e.memoizedProps,f=n!==null?n.memoizedProps:c,g=e.type,v=e.updateQueue;if(e.updateQueue=null,v!==null)try{g==="input"&&c.type==="radio"&&c.name!=null&&e2(a,c),Kf(g,f);var y=Kf(g,c);for(f=0;f<v.length;f+=2){var S=v[f],b=v[f+1];S==="style"?s2(a,b):S==="dangerouslySetInnerHTML"?r2(a,b):S==="children"?fc(a,b):g1(a,S,b,y)}switch(g){case"input":Zf(a,c);break;case"textarea":t2(a,c);break;case"select":var T=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var I=c.value;I!=null?za(a,!!c.multiple,I,!1):T!==!!c.multiple&&(c.defaultValue!=null?za(a,!!c.multiple,c.defaultValue,!0):za(a,!!c.multiple,c.multiple?[]:"",!1))}a[bc]=c}catch(P){Cn(e,e.return,P)}}break;case 6:if(Ei(t,e),Hi(e),i&4){if(e.stateNode===null)throw Error(Ne(162));a=e.stateNode,c=e.memoizedProps;try{a.nodeValue=c}catch(P){Cn(e,e.return,P)}}break;case 3:if(Ei(t,e),Hi(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{xc(t.containerInfo)}catch(P){Cn(e,e.return,P)}break;case 4:Ei(t,e),Hi(e);break;case 13:Ei(t,e),Hi(e),a=e.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(q1=En())),i&4&&xg(e);break;case 22:if(S=n!==null&&n.memoizedState!==null,e.mode&1?(dr=(y=dr)||S,Ei(t,e),dr=y):Ei(t,e),Hi(e),i&8192){if(y=e.memoizedState!==null,(e.stateNode.isHidden=y)&&!S&&e.mode&1)for(We=e,S=e.child;S!==null;){for(b=We=S;We!==null;){switch(T=We,I=T.child,T.tag){case 0:case 11:case 14:case 15:tc(4,T,T.return);break;case 1:Ra(T,T.return);var D=T.stateNode;if(typeof D.componentWillUnmount=="function"){i=T,n=T.return;try{t=i,D.props=t.memoizedProps,D.state=t.memoizedState,D.componentWillUnmount()}catch(P){Cn(i,n,P)}}break;case 5:Ra(T,T.return);break;case 22:if(T.memoizedState!==null){wg(b);continue}}I!==null?(I.return=T,We=I):wg(b)}S=S.sibling}e:for(S=null,b=e;;){if(b.tag===5){if(S===null){S=b;try{a=b.stateNode,y?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(g=b.stateNode,v=b.memoizedProps.style,f=v!=null&&v.hasOwnProperty("display")?v.display:null,g.style.display=i2("display",f))}catch(P){Cn(e,e.return,P)}}}else if(b.tag===6){if(S===null)try{b.stateNode.nodeValue=y?"":b.memoizedProps}catch(P){Cn(e,e.return,P)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;S===b&&(S=null),b=b.return}S===b&&(S=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:Ei(t,e),Hi(e),i&4&&xg(e);break;case 21:break;default:Ei(t,e),Hi(e)}}function Hi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(kw(n)){var i=n;break e}n=n.return}throw Error(Ne(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(fc(a,""),i.flags&=-33);var c=gg(e);E0(e,c,a);break;case 3:case 4:var f=i.stateNode.containerInfo,g=gg(e);A0(e,g,f);break;default:throw Error(Ne(161))}}catch(v){Cn(e,e.return,v)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function LS(e,t,n){We=e,Ow(e)}function Ow(e,t,n){for(var i=(e.mode&1)!==0;We!==null;){var a=We,c=a.child;if(a.tag===22&&i){var f=a.memoizedState!==null||Cu;if(!f){var g=a.alternate,v=g!==null&&g.memoizedState!==null||dr;g=Cu;var y=dr;if(Cu=f,(dr=v)&&!y)for(We=a;We!==null;)f=We,v=f.child,f.tag===22&&f.memoizedState!==null?vg(a):v!==null?(v.return=f,We=v):vg(a);for(;c!==null;)We=c,Ow(c),c=c.sibling;We=a,Cu=g,dr=y}yg(e)}else a.subtreeFlags&8772&&c!==null?(c.return=a,We=c):yg(e)}}function yg(e){for(;We!==null;){var t=We;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dr||Jd(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!dr)if(n===null)i.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Ni(t.type,n.memoizedProps);i.componentDidUpdate(a,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var c=t.updateQueue;c!==null&&ng(t,c,i);break;case 3:var f=t.updateQueue;if(f!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ng(t,f,n)}break;case 5:var g=t.stateNode;if(n===null&&t.flags&4){n=g;var v=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":v.autoFocus&&n.focus();break;case"img":v.src&&(n.src=v.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var y=t.alternate;if(y!==null){var S=y.memoizedState;if(S!==null){var b=S.dehydrated;b!==null&&xc(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ne(163))}dr||t.flags&512&&S0(t)}catch(T){Cn(t,t.return,T)}}if(t===e){We=null;break}if(n=t.sibling,n!==null){n.return=t.return,We=n;break}We=t.return}}function wg(e){for(;We!==null;){var t=We;if(t===e){We=null;break}var n=t.sibling;if(n!==null){n.return=t.return,We=n;break}We=t.return}}function vg(e){for(;We!==null;){var t=We;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Jd(4,t)}catch(v){Cn(t,n,v)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var a=t.return;try{i.componentDidMount()}catch(v){Cn(t,a,v)}}var c=t.return;try{S0(t)}catch(v){Cn(t,c,v)}break;case 5:var f=t.return;try{S0(t)}catch(v){Cn(t,f,v)}}}catch(v){Cn(t,t.return,v)}if(t===e){We=null;break}var g=t.sibling;if(g!==null){g.return=t.return,We=g;break}We=t.return}}var PS=Math.ceil,vd=Es.ReactCurrentDispatcher,Y1=Es.ReactCurrentOwner,gi=Es.ReactCurrentBatchConfig,zt=0,$n=null,Pn=null,tr=0,Vr=0,Oa=wo(0),Hn=0,Tc=null,na=0,eh=0,X1=0,nc=null,Ir=null,q1=0,$a=1/0,cs=null,_d=!1,N0=null,ro=null,Su=!1,Ks=null,bd=0,rc=0,T0=null,Zu=-1,Gu=0;function br(){return zt&6?En():Zu!==-1?Zu:Zu=En()}function io(e){return e.mode&1?zt&2&&tr!==0?tr&-tr:yS.transition!==null?(Gu===0&&(Gu=x2()),Gu):(e=Qt,e!==0||(e=window.event,e=e===void 0?16:S2(e.type)),e):1}function Oi(e,t,n,i){if(50<rc)throw rc=0,T0=null,Error(Ne(185));jc(e,n,i),(!(zt&2)||e!==$n)&&(e===$n&&(!(zt&2)&&(eh|=n),Hn===4&&Ys(e,tr)),Or(e,i),n===1&&zt===0&&!(t.mode&1)&&($a=En()+500,Kd&&vo()))}function Or(e,t){var n=e.callbackNode;y3(e,t);var i=sd(e,e===$n?tr:0);if(i===0)n!==null&&Im(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&Im(n),t===1)e.tag===0?xS(_g.bind(null,e)):H2(_g.bind(null,e)),fS(function(){!(zt&6)&&vo()}),n=null;else{switch(y2(i)){case 1:n=_1;break;case 4:n=m2;break;case 16:n=id;break;case 536870912:n=g2;break;default:n=id}n=Uw(n,Lw.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Lw(e,t){if(Zu=-1,Gu=0,zt&6)throw Error(Ne(327));var n=e.callbackNode;if(Za()&&e.callbackNode!==n)return null;var i=sd(e,e===$n?tr:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Cd(e,i);else{t=i;var a=zt;zt|=2;var c=Dw();($n!==e||tr!==t)&&(cs=null,$a=En()+500,Xo(e,t));do try{BS();break}catch(g){Pw(e,g)}while(!0);L1(),vd.current=c,zt=a,Pn!==null?t=0:($n=null,tr=0,t=Hn)}if(t!==0){if(t===2&&(a=t0(e),a!==0&&(i=a,t=I0(e,a))),t===1)throw n=Tc,Xo(e,0),Ys(e,i),Or(e,En()),n;if(t===6)Ys(e,i);else{if(a=e.current.alternate,!(i&30)&&!DS(a)&&(t=Cd(e,i),t===2&&(c=t0(e),c!==0&&(i=c,t=I0(e,c))),t===1))throw n=Tc,Xo(e,0),Ys(e,i),Or(e,En()),n;switch(e.finishedWork=a,e.finishedLanes=i,t){case 0:case 1:throw Error(Ne(345));case 2:Bo(e,Ir,cs);break;case 3:if(Ys(e,i),(i&130023424)===i&&(t=q1+500-En(),10<t)){if(sd(e,0)!==0)break;if(a=e.suspendedLanes,(a&i)!==i){br(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=c0(Bo.bind(null,e,Ir,cs),t);break}Bo(e,Ir,cs);break;case 4:if(Ys(e,i),(i&4194240)===i)break;for(t=e.eventTimes,a=-1;0<i;){var f=31-Ri(i);c=1<<f,f=t[f],f>a&&(a=f),i&=~c}if(i=a,i=En()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*PS(i/1960))-i,10<i){e.timeoutHandle=c0(Bo.bind(null,e,Ir,cs),i);break}Bo(e,Ir,cs);break;case 5:Bo(e,Ir,cs);break;default:throw Error(Ne(329))}}}return Or(e,En()),e.callbackNode===n?Lw.bind(null,e):null}function I0(e,t){var n=nc;return e.current.memoizedState.isDehydrated&&(Xo(e,t).flags|=256),e=Cd(e,t),e!==2&&(t=Ir,Ir=n,t!==null&&k0(t)),e}function k0(e){Ir===null?Ir=e:Ir.push.apply(Ir,e)}function DS(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var a=n[i],c=a.getSnapshot;a=a.value;try{if(!Li(c(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ys(e,t){for(t&=~X1,t&=~eh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ri(t),i=1<<n;e[n]=-1,t&=~i}}function _g(e){if(zt&6)throw Error(Ne(327));Za();var t=sd(e,0);if(!(t&1))return Or(e,En()),null;var n=Cd(e,t);if(e.tag!==0&&n===2){var i=t0(e);i!==0&&(t=i,n=I0(e,i))}if(n===1)throw n=Tc,Xo(e,0),Ys(e,t),Or(e,En()),n;if(n===6)throw Error(Ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Bo(e,Ir,cs),Or(e,En()),null}function K1(e,t){var n=zt;zt|=1;try{return e(t)}finally{zt=n,zt===0&&($a=En()+500,Kd&&vo())}}function ra(e){Ks!==null&&Ks.tag===0&&!(zt&6)&&Za();var t=zt;zt|=1;var n=gi.transition,i=Qt;try{if(gi.transition=null,Qt=1,e)return e()}finally{Qt=i,gi.transition=n,zt=t,!(zt&6)&&vo()}}function Q1(){Vr=Oa.current,hn(Oa)}function Xo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,hS(n)),Pn!==null)for(n=Pn.return;n!==null;){var i=n;switch(M1(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ud();break;case 3:Ka(),hn(Mr),hn(fr),z1();break;case 5:F1(i);break;case 4:Ka();break;case 13:hn(yn);break;case 19:hn(yn);break;case 10:P1(i.type._context);break;case 22:case 23:Q1()}n=n.return}if($n=e,Pn=e=so(e.current,null),tr=Vr=t,Hn=0,Tc=null,X1=eh=na=0,Ir=nc=null,Wo!==null){for(t=0;t<Wo.length;t++)if(n=Wo[t],i=n.interleaved,i!==null){n.interleaved=null;var a=i.next,c=n.pending;if(c!==null){var f=c.next;c.next=a,i.next=f}n.pending=i}Wo=null}return e}function Pw(e,t){do{var n=Pn;try{if(L1(),Vu.current=wd,yd){for(var i=vn.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}yd=!1}if(ta=0,Kn=Un=vn=null,ec=!1,Ac=0,Y1.current=null,n===null||n.return===null){Hn=1,Tc=t,Pn=null;break}e:{var c=e,f=n.return,g=n,v=t;if(t=tr,g.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){var y=v,S=g,b=S.tag;if(!(S.mode&1)&&(b===0||b===11||b===15)){var T=S.alternate;T?(S.updateQueue=T.updateQueue,S.memoizedState=T.memoizedState,S.lanes=T.lanes):(S.updateQueue=null,S.memoizedState=null)}var I=lg(f);if(I!==null){I.flags&=-257,cg(I,f,g,c,t),I.mode&1&&ag(c,y,t),t=I,v=y;var D=t.updateQueue;if(D===null){var P=new Set;P.add(v),t.updateQueue=P}else D.add(v);break e}else{if(!(t&1)){ag(c,y,t),$1();break e}v=Error(Ne(426))}}else if(mn&&g.mode&1){var U=lg(f);if(U!==null){!(U.flags&65536)&&(U.flags|=256),cg(U,f,g,c,t),R1(Qa(v,g));break e}}c=v=Qa(v,g),Hn!==4&&(Hn=2),nc===null?nc=[c]:nc.push(c),c=f;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t;var V=yw(c,v,t);tg(c,V);break e;case 1:g=v;var O=c.type,k=c.stateNode;if(!(c.flags&128)&&(typeof O.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(ro===null||!ro.has(k)))){c.flags|=65536,t&=-t,c.lanes|=t;var H=ww(c,g,t);tg(c,H);break e}}c=c.return}while(c!==null)}Bw(n)}catch(X){t=X,Pn===n&&n!==null&&(Pn=n=n.return);continue}break}while(!0)}function Dw(){var e=vd.current;return vd.current=wd,e===null?wd:e}function $1(){(Hn===0||Hn===3||Hn===2)&&(Hn=4),$n===null||!(na&268435455)&&!(eh&268435455)||Ys($n,tr)}function Cd(e,t){var n=zt;zt|=2;var i=Dw();($n!==e||tr!==t)&&(cs=null,Xo(e,t));do try{jS();break}catch(a){Pw(e,a)}while(!0);if(L1(),zt=n,vd.current=i,Pn!==null)throw Error(Ne(261));return $n=null,tr=0,Hn}function jS(){for(;Pn!==null;)jw(Pn)}function BS(){for(;Pn!==null&&!c3();)jw(Pn)}function jw(e){var t=zw(e.alternate,e,Vr);e.memoizedProps=e.pendingProps,t===null?Bw(e):Pn=t,Y1.current=null}function Bw(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=MS(n,t),n!==null){n.flags&=32767,Pn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Hn=6,Pn=null;return}}else if(n=kS(n,t,Vr),n!==null){Pn=n;return}if(t=t.sibling,t!==null){Pn=t;return}Pn=t=e}while(t!==null);Hn===0&&(Hn=5)}function Bo(e,t,n){var i=Qt,a=gi.transition;try{gi.transition=null,Qt=1,FS(e,t,n,i)}finally{gi.transition=a,Qt=i}return null}function FS(e,t,n,i){do Za();while(Ks!==null);if(zt&6)throw Error(Ne(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ne(177));e.callbackNode=null,e.callbackPriority=0;var c=n.lanes|n.childLanes;if(w3(e,c),e===$n&&(Pn=$n=null,tr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Su||(Su=!0,Uw(id,function(){return Za(),null})),c=(n.flags&15990)!==0,n.subtreeFlags&15990||c){c=gi.transition,gi.transition=null;var f=Qt;Qt=1;var g=zt;zt|=4,Y1.current=null,OS(e,n),Rw(n,e),sS(a0),od=!!o0,a0=o0=null,e.current=n,LS(n),u3(),zt=g,Qt=f,gi.transition=c}else e.current=n;if(Su&&(Su=!1,Ks=e,bd=a),c=e.pendingLanes,c===0&&(ro=null),f3(n.stateNode),Or(e,En()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],i(a.value,{componentStack:a.stack,digest:a.digest});if(_d)throw _d=!1,e=N0,N0=null,e;return bd&1&&e.tag!==0&&Za(),c=e.pendingLanes,c&1?e===T0?rc++:(rc=0,T0=e):rc=0,vo(),null}function Za(){if(Ks!==null){var e=y2(bd),t=gi.transition,n=Qt;try{if(gi.transition=null,Qt=16>e?16:e,Ks===null)var i=!1;else{if(e=Ks,Ks=null,bd=0,zt&6)throw Error(Ne(331));var a=zt;for(zt|=4,We=e.current;We!==null;){var c=We,f=c.child;if(We.flags&16){var g=c.deletions;if(g!==null){for(var v=0;v<g.length;v++){var y=g[v];for(We=y;We!==null;){var S=We;switch(S.tag){case 0:case 11:case 15:tc(8,S,c)}var b=S.child;if(b!==null)b.return=S,We=b;else for(;We!==null;){S=We;var T=S.sibling,I=S.return;if(Iw(S),S===y){We=null;break}if(T!==null){T.return=I,We=T;break}We=I}}}var D=c.alternate;if(D!==null){var P=D.child;if(P!==null){D.child=null;do{var U=P.sibling;P.sibling=null,P=U}while(P!==null)}}We=c}}if(c.subtreeFlags&2064&&f!==null)f.return=c,We=f;else e:for(;We!==null;){if(c=We,c.flags&2048)switch(c.tag){case 0:case 11:case 15:tc(9,c,c.return)}var V=c.sibling;if(V!==null){V.return=c.return,We=V;break e}We=c.return}}var O=e.current;for(We=O;We!==null;){f=We;var k=f.child;if(f.subtreeFlags&2064&&k!==null)k.return=f,We=k;else e:for(f=O;We!==null;){if(g=We,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:Jd(9,g)}}catch(X){Cn(g,g.return,X)}if(g===f){We=null;break e}var H=g.sibling;if(H!==null){H.return=g.return,We=H;break e}We=g.return}}if(zt=a,vo(),Xi&&typeof Xi.onPostCommitFiberRoot=="function")try{Xi.onPostCommitFiberRoot(Zd,e)}catch{}i=!0}return i}finally{Qt=n,gi.transition=t}}return!1}function bg(e,t,n){t=Qa(n,t),t=yw(e,t,1),e=no(e,t,1),t=br(),e!==null&&(jc(e,1,t),Or(e,t))}function Cn(e,t,n){if(e.tag===3)bg(e,e,n);else for(;t!==null;){if(t.tag===3){bg(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ro===null||!ro.has(i))){e=Qa(n,e),e=ww(t,e,1),t=no(t,e,1),e=br(),t!==null&&(jc(t,1,e),Or(t,e));break}}t=t.return}}function zS(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=br(),e.pingedLanes|=e.suspendedLanes&n,$n===e&&(tr&n)===n&&(Hn===4||Hn===3&&(tr&130023424)===tr&&500>En()-q1?Xo(e,0):X1|=n),Or(e,t)}function Fw(e,t){t===0&&(e.mode&1?(t=pu,pu<<=1,!(pu&130023424)&&(pu=4194304)):t=1);var n=br();e=bs(e,t),e!==null&&(jc(e,t,n),Or(e,n))}function US(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Fw(e,n)}function VS(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Ne(314))}i!==null&&i.delete(t),Fw(e,n)}var zw;zw=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mr.current)kr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return kr=!1,IS(e,t,n);kr=!!(e.flags&131072)}else kr=!1,mn&&t.flags&1048576&&W2(t,fd,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Wu(e,t),e=t.pendingProps;var a=Ya(t,fr.current);Wa(t,n),a=V1(null,t,i,e,a,n);var c=H1();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rr(i)?(c=!0,dd(t)):c=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,j1(t),a.updater=$d,t.stateNode=a,a._reactInternals=t,g0(t,i,e,n),t=w0(null,t,i,!0,c,n)):(t.tag=0,mn&&c&&k1(t),_r(null,t,a,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Wu(e,t),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=WS(i),e=Ni(i,e),a){case 0:t=y0(null,t,i,e,n);break e;case 1:t=hg(null,t,i,e,n);break e;case 11:t=ug(null,t,i,e,n);break e;case 14:t=dg(null,t,i,Ni(i.type,e),n);break e}throw Error(Ne(306,i,""))}return t;case 0:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Ni(i,a),y0(e,t,i,a,n);case 1:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Ni(i,a),hg(e,t,i,a,n);case 3:e:{if(Cw(t),e===null)throw Error(Ne(387));i=t.pendingProps,c=t.memoizedState,a=c.element,K2(e,t),gd(t,i,null,n);var f=t.memoizedState;if(i=f.element,c.isDehydrated)if(c={element:i,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){a=Qa(Error(Ne(423)),t),t=fg(e,t,i,n,a);break e}else if(i!==a){a=Qa(Error(Ne(424)),t),t=fg(e,t,i,n,a);break e}else for(Zr=to(t.stateNode.containerInfo.firstChild),Gr=t,mn=!0,Mi=null,n=X2(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xa(),i===a){t=Cs(e,t,n);break e}_r(e,t,i,n)}t=t.child}return t;case 5:return Q2(t),e===null&&f0(t),i=t.type,a=t.pendingProps,c=e!==null?e.memoizedProps:null,f=a.children,l0(i,a)?f=null:c!==null&&l0(i,c)&&(t.flags|=32),bw(e,t),_r(e,t,f,n),t.child;case 6:return e===null&&f0(t),null;case 13:return Sw(e,t,n);case 4:return B1(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=qa(t,null,i,n):_r(e,t,i,n),t.child;case 11:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Ni(i,a),ug(e,t,i,a,n);case 7:return _r(e,t,t.pendingProps,n),t.child;case 8:return _r(e,t,t.pendingProps.children,n),t.child;case 12:return _r(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,a=t.pendingProps,c=t.memoizedProps,f=a.value,an(pd,i._currentValue),i._currentValue=f,c!==null)if(Li(c.value,f)){if(c.children===a.children&&!Mr.current){t=Cs(e,t,n);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var g=c.dependencies;if(g!==null){f=c.child;for(var v=g.firstContext;v!==null;){if(v.context===i){if(c.tag===1){v=gs(-1,n&-n),v.tag=2;var y=c.updateQueue;if(y!==null){y=y.shared;var S=y.pending;S===null?v.next=v:(v.next=S.next,S.next=v),y.pending=v}}c.lanes|=n,v=c.alternate,v!==null&&(v.lanes|=n),p0(c.return,n,t),g.lanes|=n;break}v=v.next}}else if(c.tag===10)f=c.type===t.type?null:c.child;else if(c.tag===18){if(f=c.return,f===null)throw Error(Ne(341));f.lanes|=n,g=f.alternate,g!==null&&(g.lanes|=n),p0(f,n,t),f=c.sibling}else f=c.child;if(f!==null)f.return=c;else for(f=c;f!==null;){if(f===t){f=null;break}if(c=f.sibling,c!==null){c.return=f.return,f=c;break}f=f.return}c=f}_r(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,i=t.pendingProps.children,Wa(t,n),a=xi(a),i=i(a),t.flags|=1,_r(e,t,i,n),t.child;case 14:return i=t.type,a=Ni(i,t.pendingProps),a=Ni(i.type,a),dg(e,t,i,a,n);case 15:return vw(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Ni(i,a),Wu(e,t),t.tag=1,Rr(i)?(e=!0,dd(t)):e=!1,Wa(t,n),xw(t,i,a),g0(t,i,a,n),w0(null,t,i,!0,e,n);case 19:return Aw(e,t,n);case 22:return _w(e,t,n)}throw Error(Ne(156,t.tag))};function Uw(e,t){return p2(e,t)}function HS(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(e,t,n,i){return new HS(e,t,n,i)}function J1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function WS(e){if(typeof e=="function")return J1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===y1)return 11;if(e===w1)return 14}return 2}function so(e,t){var n=e.alternate;return n===null?(n=mi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Yu(e,t,n,i,a,c){var f=2;if(i=e,typeof e=="function")J1(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case Ca:return qo(n.children,a,c,t);case x1:f=8,a|=8;break;case zf:return e=mi(12,n,t,a|2),e.elementType=zf,e.lanes=c,e;case Uf:return e=mi(13,n,t,a),e.elementType=Uf,e.lanes=c,e;case Vf:return e=mi(19,n,t,a),e.elementType=Vf,e.lanes=c,e;case Qy:return th(n,a,c,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case qy:f=10;break e;case Ky:f=9;break e;case y1:f=11;break e;case w1:f=14;break e;case Vs:f=16,i=null;break e}throw Error(Ne(130,e==null?e:typeof e,""))}return t=mi(f,n,t,a),t.elementType=e,t.type=i,t.lanes=c,t}function qo(e,t,n,i){return e=mi(7,e,i,t),e.lanes=n,e}function th(e,t,n,i){return e=mi(22,e,i,t),e.elementType=Qy,e.lanes=n,e.stateNode={isHidden:!1},e}function uf(e,t,n){return e=mi(6,e,null,t),e.lanes=n,e}function df(e,t,n){return t=mi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ZS(e,t,n,i,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wh(0),this.expirationTimes=Wh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wh(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ep(e,t,n,i,a,c,f,g,v){return e=new ZS(e,t,n,g,v),t===1?(t=1,c===!0&&(t|=8)):t=0,c=mi(3,null,null,t),e.current=c,c.stateNode=e,c.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},j1(c),e}function GS(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ba,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function Vw(e){if(!e)return fo;e=e._reactInternals;e:{if(oa(e)!==e||e.tag!==1)throw Error(Ne(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ne(171))}if(e.tag===1){var n=e.type;if(Rr(n))return V2(e,n,t)}return t}function Hw(e,t,n,i,a,c,f,g,v){return e=ep(n,i,!0,e,a,c,f,g,v),e.context=Vw(null),n=e.current,i=br(),a=io(n),c=gs(i,a),c.callback=t??null,no(n,c,a),e.current.lanes=a,jc(e,a,i),Or(e,i),e}function nh(e,t,n,i){var a=t.current,c=br(),f=io(a);return n=Vw(n),t.context===null?t.context=n:t.pendingContext=n,t=gs(c,f),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=no(a,t,f),e!==null&&(Oi(e,a,f,c),Uu(e,a,f)),f}function Sd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Cg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function tp(e,t){Cg(e,t),(e=e.alternate)&&Cg(e,t)}function YS(){return null}var Ww=typeof reportError=="function"?reportError:function(e){console.error(e)};function np(e){this._internalRoot=e}rh.prototype.render=np.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ne(409));nh(e,t,null,null)};rh.prototype.unmount=np.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ra(function(){nh(null,e,null,null)}),t[_s]=null}};function rh(e){this._internalRoot=e}rh.prototype.unstable_scheduleHydration=function(e){if(e){var t=_2();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Gs.length&&t!==0&&t<Gs[n].priority;n++);Gs.splice(n,0,e),n===0&&C2(e)}};function rp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ih(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Sg(){}function XS(e,t,n,i,a){if(a){if(typeof i=="function"){var c=i;i=function(){var y=Sd(f);c.call(y)}}var f=Hw(t,i,e,0,null,!1,!1,"",Sg);return e._reactRootContainer=f,e[_s]=f.current,vc(e.nodeType===8?e.parentNode:e),ra(),f}for(;a=e.lastChild;)e.removeChild(a);if(typeof i=="function"){var g=i;i=function(){var y=Sd(v);g.call(y)}}var v=ep(e,0,!1,null,null,!1,!1,"",Sg);return e._reactRootContainer=v,e[_s]=v.current,vc(e.nodeType===8?e.parentNode:e),ra(function(){nh(t,v,n,i)}),v}function sh(e,t,n,i,a){var c=n._reactRootContainer;if(c){var f=c;if(typeof a=="function"){var g=a;a=function(){var v=Sd(f);g.call(v)}}nh(t,f,e,a)}else f=XS(n,t,e,a,i);return Sd(f)}w2=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Zl(t.pendingLanes);n!==0&&(b1(t,n|1),Or(t,En()),!(zt&6)&&($a=En()+500,vo()))}break;case 13:ra(function(){var i=bs(e,1);if(i!==null){var a=br();Oi(i,e,1,a)}}),tp(e,1)}};C1=function(e){if(e.tag===13){var t=bs(e,134217728);if(t!==null){var n=br();Oi(t,e,134217728,n)}tp(e,134217728)}};v2=function(e){if(e.tag===13){var t=io(e),n=bs(e,t);if(n!==null){var i=br();Oi(n,e,t,i)}tp(e,t)}};_2=function(){return Qt};b2=function(e,t){var n=Qt;try{return Qt=e,t()}finally{Qt=n}};$f=function(e,t,n){switch(t){case"input":if(Zf(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var a=qd(i);if(!a)throw Error(Ne(90));Jy(i),Zf(i,a)}}}break;case"textarea":t2(e,n);break;case"select":t=n.value,t!=null&&za(e,!!n.multiple,t,!1)}};l2=K1;c2=ra;var qS={usingClientEntryPoint:!1,Events:[Fc,Na,qd,o2,a2,K1]},jl={findFiberByHostInstance:Ho,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KS={bundleType:jl.bundleType,version:jl.version,rendererPackageName:jl.rendererPackageName,rendererConfig:jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Es.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=h2(e),e===null?null:e.stateNode},findFiberByHostInstance:jl.findFiberByHostInstance||YS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Au.isDisabled&&Au.supportsFiber)try{Zd=Au.inject(KS),Xi=Au}catch{}}qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qS;qr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rp(t))throw Error(Ne(200));return GS(e,t,null,n)};qr.createRoot=function(e,t){if(!rp(e))throw Error(Ne(299));var n=!1,i="",a=Ww;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=ep(e,1,!1,null,null,n,!1,i,a),e[_s]=t.current,vc(e.nodeType===8?e.parentNode:e),new np(t)};qr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ne(188)):(e=Object.keys(e).join(","),Error(Ne(268,e)));return e=h2(t),e=e===null?null:e.stateNode,e};qr.flushSync=function(e){return ra(e)};qr.hydrate=function(e,t,n){if(!ih(t))throw Error(Ne(200));return sh(null,e,t,!0,n)};qr.hydrateRoot=function(e,t,n){if(!rp(e))throw Error(Ne(405));var i=n!=null&&n.hydratedSources||null,a=!1,c="",f=Ww;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),t=Hw(t,null,e,1,n??null,a,!1,c,f),e[_s]=t.current,vc(e),i)for(e=0;e<i.length;e++)n=i[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new rh(t)};qr.render=function(e,t,n){if(!ih(t))throw Error(Ne(200));return sh(null,e,t,!1,n)};qr.unmountComponentAtNode=function(e){if(!ih(e))throw Error(Ne(40));return e._reactRootContainer?(ra(function(){sh(null,null,e,!1,function(){e._reactRootContainer=null,e[_s]=null})}),!0):!1};qr.unstable_batchedUpdates=K1;qr.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!ih(n))throw Error(Ne(200));if(e==null||e._reactInternals===void 0)throw Error(Ne(38));return sh(e,t,n,!1,i)};qr.version="18.3.1-next-f1338f8080-20240426";function Zw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zw)}catch(e){console.error(e)}}Zw(),Zy.exports=qr;var Gw=Zy.exports,Ag=Gw;Bf.createRoot=Ag.createRoot,Bf.hydrateRoot=Ag.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ic(){return Ic=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ic.apply(this,arguments)}var Qs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Qs||(Qs={}));const Eg="popstate";function QS(e){e===void 0&&(e={});function t(a,c){let{pathname:f="/",search:g="",hash:v=""}=aa(a.location.hash.substr(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),M0("",{pathname:f,search:g,hash:v},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(a,c){let f=a.document.querySelector("base"),g="";if(f&&f.getAttribute("href")){let v=a.location.href,y=v.indexOf("#");g=y===-1?v:v.slice(0,y)}return g+"#"+(typeof c=="string"?c:Ad(c))}function i(a,c){oh(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(c)+")")}return JS(t,n,i,e)}function Tn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function oh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $S(){return Math.random().toString(36).substr(2,8)}function Ng(e,t){return{usr:e.state,key:e.key,idx:t}}function M0(e,t,n,i){return n===void 0&&(n=null),Ic({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?aa(t):t,{state:n,key:t&&t.key||i||$S()})}function Ad(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function aa(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function JS(e,t,n,i){i===void 0&&(i={});let{window:a=document.defaultView,v5Compat:c=!1}=i,f=a.history,g=Qs.Pop,v=null,y=S();y==null&&(y=0,f.replaceState(Ic({},f.state,{idx:y}),""));function S(){return(f.state||{idx:null}).idx}function b(){g=Qs.Pop;let U=S(),V=U==null?null:U-y;y=U,v&&v({action:g,location:P.location,delta:V})}function T(U,V){g=Qs.Push;let O=M0(P.location,U,V);n&&n(O,U),y=S()+1;let k=Ng(O,y),H=P.createHref(O);try{f.pushState(k,"",H)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;a.location.assign(H)}c&&v&&v({action:g,location:P.location,delta:1})}function I(U,V){g=Qs.Replace;let O=M0(P.location,U,V);n&&n(O,U),y=S();let k=Ng(O,y),H=P.createHref(O);f.replaceState(k,"",H),c&&v&&v({action:g,location:P.location,delta:0})}function D(U){let V=a.location.origin!=="null"?a.location.origin:a.location.href,O=typeof U=="string"?U:Ad(U);return O=O.replace(/ $/,"%20"),Tn(V,"No window.location.(origin|href) available to create URL for href: "+O),new URL(O,V)}let P={get action(){return g},get location(){return e(a,f)},listen(U){if(v)throw new Error("A history only accepts one active listener");return a.addEventListener(Eg,b),v=U,()=>{a.removeEventListener(Eg,b),v=null}},createHref(U){return t(a,U)},createURL:D,encodeLocation(U){let V=D(U);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:T,replace:I,go(U){return f.go(U)}};return P}var Tg;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Tg||(Tg={}));function eA(e,t,n){return n===void 0&&(n="/"),tA(e,t,n)}function tA(e,t,n,i){let a=typeof t=="string"?aa(t):t,c=ip(a.pathname||"/",n);if(c==null)return null;let f=Yw(e);nA(f);let g=null;for(let v=0;g==null&&v<f.length;++v){let y=pA(c);g=dA(f[v],y)}return g}function Yw(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let a=(c,f,g)=>{let v={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};v.relativePath.startsWith("/")&&(Tn(v.relativePath.startsWith(i),'Absolute route path "'+v.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),v.relativePath=v.relativePath.slice(i.length));let y=oo([i,v.relativePath]),S=n.concat(v);c.children&&c.children.length>0&&(Tn(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),Yw(c.children,t,S,y)),!(c.path==null&&!c.index)&&t.push({path:y,score:cA(y,c.index),routesMeta:S})};return e.forEach((c,f)=>{var g;if(c.path===""||!((g=c.path)!=null&&g.includes("?")))a(c,f);else for(let v of Xw(c.path))a(c,f,v)}),t}function Xw(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,a=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return a?[c,""]:[c];let f=Xw(i.join("/")),g=[];return g.push(...f.map(v=>v===""?c:[c,v].join("/"))),a&&g.push(...f),g.map(v=>e.startsWith("/")&&v===""?"/":v)}function nA(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:uA(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const rA=/^:[\w-]+$/,iA=3,sA=2,oA=1,aA=10,lA=-2,Ig=e=>e==="*";function cA(e,t){let n=e.split("/"),i=n.length;return n.some(Ig)&&(i+=lA),t&&(i+=sA),n.filter(a=>!Ig(a)).reduce((a,c)=>a+(rA.test(c)?iA:c===""?oA:aA),i)}function uA(e,t){return e.length===t.length&&e.slice(0,-1).every((i,a)=>i===t[a])?e[e.length-1]-t[t.length-1]:0}function dA(e,t,n){let{routesMeta:i}=e,a={},c="/",f=[];for(let g=0;g<i.length;++g){let v=i[g],y=g===i.length-1,S=c==="/"?t:t.slice(c.length)||"/",b=hA({path:v.relativePath,caseSensitive:v.caseSensitive,end:y},S),T=v.route;if(!b)return null;Object.assign(a,b.params),f.push({params:a,pathname:oo([c,b.pathname]),pathnameBase:wA(oo([c,b.pathnameBase])),route:T}),b.pathnameBase!=="/"&&(c=oo([c,b.pathnameBase]))}return f}function hA(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=fA(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let c=a[0],f=c.replace(/(.)\/+$/,"$1"),g=a.slice(1);return{params:i.reduce((y,S,b)=>{let{paramName:T,isOptional:I}=S;if(T==="*"){let P=g[b]||"";f=c.slice(0,c.length-P.length).replace(/(.)\/+$/,"$1")}const D=g[b];return I&&!D?y[T]=void 0:y[T]=(D||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:f,pattern:e}}function fA(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),oh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,g,v)=>(i.push({paramName:g,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function pA(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return oh(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ip(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}const mA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gA=e=>mA.test(e);function xA(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:a=""}=typeof e=="string"?aa(e):e,c;if(n)if(gA(n))c=n;else{if(n.includes("//")){let f=n;n=n.replace(/\/\/+/g,"/"),oh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(f+" -> "+n))}n.startsWith("/")?c=kg(n.substring(1),"/"):c=kg(n,t)}else c=t;return{pathname:c,search:vA(i),hash:_A(a)}}function kg(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function hf(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yA(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function sp(e,t){let n=yA(e);return t?n.map((i,a)=>a===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function op(e,t,n,i){i===void 0&&(i=!1);let a;typeof e=="string"?a=aa(e):(a=Ic({},e),Tn(!a.pathname||!a.pathname.includes("?"),hf("?","pathname","search",a)),Tn(!a.pathname||!a.pathname.includes("#"),hf("#","pathname","hash",a)),Tn(!a.search||!a.search.includes("#"),hf("#","search","hash",a)));let c=e===""||a.pathname==="",f=c?"/":a.pathname,g;if(f==null)g=n;else{let b=t.length-1;if(!i&&f.startsWith("..")){let T=f.split("/");for(;T[0]==="..";)T.shift(),b-=1;a.pathname=T.join("/")}g=b>=0?t[b]:"/"}let v=xA(a,g),y=f&&f!=="/"&&f.endsWith("/"),S=(c||f===".")&&n.endsWith("/");return!v.pathname.endsWith("/")&&(y||S)&&(v.pathname+="/"),v}const oo=e=>e.join("/").replace(/\/\/+/g,"/"),wA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),vA=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,_A=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function bA(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const qw=["post","put","patch","delete"];new Set(qw);const CA=["get",...qw];new Set(CA);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kc(){return kc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},kc.apply(this,arguments)}const ap=j.createContext(null),SA=j.createContext(null),_o=j.createContext(null),ah=j.createContext(null),$i=j.createContext({outlet:null,matches:[],isDataRoute:!1}),Kw=j.createContext(null);function AA(e,t){let{relative:n}=t===void 0?{}:t;ul()||Tn(!1);let{basename:i,navigator:a}=j.useContext(_o),{hash:c,pathname:f,search:g}=Jw(e,{relative:n}),v=f;return i!=="/"&&(v=f==="/"?i:oo([i,f])),a.createHref({pathname:v,search:g,hash:c})}function ul(){return j.useContext(ah)!=null}function bo(){return ul()||Tn(!1),j.useContext(ah).location}function Qw(e){j.useContext(_o).static||j.useLayoutEffect(e)}function Qr(){let{isDataRoute:e}=j.useContext($i);return e?zA():EA()}function EA(){ul()||Tn(!1);let e=j.useContext(ap),{basename:t,future:n,navigator:i}=j.useContext(_o),{matches:a}=j.useContext($i),{pathname:c}=bo(),f=JSON.stringify(sp(a,n.v7_relativeSplatPath)),g=j.useRef(!1);return Qw(()=>{g.current=!0}),j.useCallback(function(y,S){if(S===void 0&&(S={}),!g.current)return;if(typeof y=="number"){i.go(y);return}let b=op(y,JSON.parse(f),c,S.relative==="path");e==null&&t!=="/"&&(b.pathname=b.pathname==="/"?t:oo([t,b.pathname])),(S.replace?i.replace:i.push)(b,S.state,S)},[t,i,f,c,e])}const NA=j.createContext(null);function TA(e){let t=j.useContext($i).outlet;return t&&j.createElement(NA.Provider,{value:e},t)}function $w(){let{matches:e}=j.useContext($i),t=e[e.length-1];return t?t.params:{}}function Jw(e,t){let{relative:n}=t===void 0?{}:t,{future:i}=j.useContext(_o),{matches:a}=j.useContext($i),{pathname:c}=bo(),f=JSON.stringify(sp(a,i.v7_relativeSplatPath));return j.useMemo(()=>op(e,JSON.parse(f),c,n==="path"),[e,f,c,n])}function IA(e,t){return kA(e,t)}function kA(e,t,n,i){ul()||Tn(!1);let{navigator:a}=j.useContext(_o),{matches:c}=j.useContext($i),f=c[c.length-1],g=f?f.params:{};f&&f.pathname;let v=f?f.pathnameBase:"/";f&&f.route;let y=bo(),S;if(t){var b;let U=typeof t=="string"?aa(t):t;v==="/"||(b=U.pathname)!=null&&b.startsWith(v)||Tn(!1),S=U}else S=y;let T=S.pathname||"/",I=T;if(v!=="/"){let U=v.replace(/^\//,"").split("/");I="/"+T.replace(/^\//,"").split("/").slice(U.length).join("/")}let D=eA(e,{pathname:I}),P=PA(D&&D.map(U=>Object.assign({},U,{params:Object.assign({},g,U.params),pathname:oo([v,a.encodeLocation?a.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?v:oo([v,a.encodeLocation?a.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),c,n,i);return t&&P?j.createElement(ah.Provider,{value:{location:kc({pathname:"/",search:"",hash:"",state:null,key:"default"},S),navigationType:Qs.Pop}},P):P}function MA(){let e=FA(),t=bA(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),n?j.createElement("pre",{style:a},n):null,null)}const RA=j.createElement(MA,null);class OA extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?j.createElement($i.Provider,{value:this.props.routeContext},j.createElement(Kw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function LA(e){let{routeContext:t,match:n,children:i}=e,a=j.useContext(ap);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement($i.Provider,{value:t},i)}function PA(e,t,n,i){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),i===void 0&&(i=null),e==null){var c;if(!n)return null;if(n.errors)e=n.matches;else if((c=i)!=null&&c.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let f=e,g=(a=n)==null?void 0:a.errors;if(g!=null){let S=f.findIndex(b=>b.route.id&&(g==null?void 0:g[b.route.id])!==void 0);S>=0||Tn(!1),f=f.slice(0,Math.min(f.length,S+1))}let v=!1,y=-1;if(n&&i&&i.v7_partialHydration)for(let S=0;S<f.length;S++){let b=f[S];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(y=S),b.route.id){let{loaderData:T,errors:I}=n,D=b.route.loader&&T[b.route.id]===void 0&&(!I||I[b.route.id]===void 0);if(b.route.lazy||D){v=!0,y>=0?f=f.slice(0,y+1):f=[f[0]];break}}}return f.reduceRight((S,b,T)=>{let I,D=!1,P=null,U=null;n&&(I=g&&b.route.id?g[b.route.id]:void 0,P=b.route.errorElement||RA,v&&(y<0&&T===0?(UA("route-fallback"),D=!0,U=null):y===T&&(D=!0,U=b.route.hydrateFallbackElement||null)));let V=t.concat(f.slice(0,T+1)),O=()=>{let k;return I?k=P:D?k=U:b.route.Component?k=j.createElement(b.route.Component,null):b.route.element?k=b.route.element:k=S,j.createElement(LA,{match:b,routeContext:{outlet:S,matches:V,isDataRoute:n!=null},children:k})};return n&&(b.route.ErrorBoundary||b.route.errorElement||T===0)?j.createElement(OA,{location:n.location,revalidation:n.revalidation,component:P,error:I,children:O(),routeContext:{outlet:null,matches:V,isDataRoute:!0}}):O()},null)}var ev=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ev||{}),tv=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(tv||{});function DA(e){let t=j.useContext(ap);return t||Tn(!1),t}function jA(e){let t=j.useContext(SA);return t||Tn(!1),t}function BA(e){let t=j.useContext($i);return t||Tn(!1),t}function nv(e){let t=BA(),n=t.matches[t.matches.length-1];return n.route.id||Tn(!1),n.route.id}function FA(){var e;let t=j.useContext(Kw),n=jA(),i=nv();return t!==void 0?t:(e=n.errors)==null?void 0:e[i]}function zA(){let{router:e}=DA(ev.UseNavigateStable),t=nv(tv.UseNavigateStable),n=j.useRef(!1);return Qw(()=>{n.current=!0}),j.useCallback(function(a,c){c===void 0&&(c={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,kc({fromRouteId:t},c)))},[e,t])}const Mg={};function UA(e,t,n){Mg[e]||(Mg[e]=!0)}function VA(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Xu(e){let{to:t,replace:n,state:i,relative:a}=e;ul()||Tn(!1);let{future:c,static:f}=j.useContext(_o),{matches:g}=j.useContext($i),{pathname:v}=bo(),y=Qr(),S=op(t,sp(g,c.v7_relativeSplatPath),v,a==="path"),b=JSON.stringify(S);return j.useEffect(()=>y(JSON.parse(b),{replace:n,state:i,relative:a}),[y,b,a,n,i]),null}function HA(e){return TA(e.context)}function Jn(e){Tn(!1)}function WA(e){let{basename:t="/",children:n=null,location:i,navigationType:a=Qs.Pop,navigator:c,static:f=!1,future:g}=e;ul()&&Tn(!1);let v=t.replace(/^\/*/,"/"),y=j.useMemo(()=>({basename:v,navigator:c,static:f,future:kc({v7_relativeSplatPath:!1},g)}),[v,g,c,f]);typeof i=="string"&&(i=aa(i));let{pathname:S="/",search:b="",hash:T="",state:I=null,key:D="default"}=i,P=j.useMemo(()=>{let U=ip(S,v);return U==null?null:{location:{pathname:U,search:b,hash:T,state:I,key:D},navigationType:a}},[v,S,b,T,I,D,a]);return P==null?null:j.createElement(_o.Provider,{value:y},j.createElement(ah.Provider,{children:n,value:P}))}function ZA(e){let{children:t,location:n}=e;return IA(R0(t),n)}new Promise(()=>{});function R0(e,t){t===void 0&&(t=[]);let n=[];return j.Children.forEach(e,(i,a)=>{if(!j.isValidElement(i))return;let c=[...t,a];if(i.type===j.Fragment){n.push.apply(n,R0(i.props.children,c));return}i.type!==Jn&&Tn(!1),!i.props.index||!i.props.children||Tn(!1);let f={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=R0(i.props.children,c)),n.push(f)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function O0(){return O0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},O0.apply(this,arguments)}function GA(e,t){if(e==null)return{};var n={},i=Object.keys(e),a,c;for(c=0;c<i.length;c++)a=i[c],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function YA(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function XA(e,t){return e.button===0&&(!t||t==="_self")&&!YA(e)}const qA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],KA="6";try{window.__reactRouterVersion=KA}catch{}const QA="startTransition",Rg=zC[QA];function $A(e){let{basename:t,children:n,future:i,window:a}=e,c=j.useRef();c.current==null&&(c.current=QS({window:a,v5Compat:!0}));let f=c.current,[g,v]=j.useState({action:f.action,location:f.location}),{v7_startTransition:y}=i||{},S=j.useCallback(b=>{y&&Rg?Rg(()=>v(b)):v(b)},[v,y]);return j.useLayoutEffect(()=>f.listen(S),[f,S]),j.useEffect(()=>VA(i),[i]),j.createElement(WA,{basename:t,children:n,location:g.location,navigationType:g.action,navigator:f,future:i})}const JA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tE=j.forwardRef(function(t,n){let{onClick:i,relative:a,reloadDocument:c,replace:f,state:g,target:v,to:y,preventScrollReset:S,viewTransition:b}=t,T=GA(t,qA),{basename:I}=j.useContext(_o),D,P=!1;if(typeof y=="string"&&eE.test(y)&&(D=y,JA))try{let k=new URL(window.location.href),H=y.startsWith("//")?new URL(k.protocol+y):new URL(y),X=ip(H.pathname,I);H.origin===k.origin&&X!=null?y=X+H.search+H.hash:P=!0}catch{}let U=AA(y,{relative:a}),V=nE(y,{replace:f,state:g,target:v,preventScrollReset:S,relative:a,viewTransition:b});function O(k){i&&i(k),k.defaultPrevented||V(k)}return j.createElement("a",O0({},T,{href:D||U,onClick:P||c?i:O,ref:n,target:v}))});var Og;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Og||(Og={}));var Lg;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Lg||(Lg={}));function nE(e,t){let{target:n,replace:i,state:a,preventScrollReset:c,relative:f,viewTransition:g}=t===void 0?{}:t,v=Qr(),y=bo(),S=Jw(e,{relative:f});return j.useCallback(b=>{if(XA(b,n)){b.preventDefault();let T=i!==void 0?i:Ad(y)===Ad(S);v(e,{replace:T,state:a,preventScrollReset:c,relative:f,viewTransition:g})}},[y,v,S,i,a,n,e,c,f,g])}const rv=j.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),lh=j.createContext({}),ch=j.createContext(null),uh=typeof document<"u",lp=uh?j.useLayoutEffect:j.useEffect,iv=j.createContext({strict:!1}),cp=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),rE="framerAppearId",sv="data-"+cp(rE);function iE(e,t,n,i){const{visualElement:a}=j.useContext(lh),c=j.useContext(iv),f=j.useContext(ch),g=j.useContext(rv).reducedMotion,v=j.useRef();i=i||c.renderer,!v.current&&i&&(v.current=i(e,{visualState:t,parent:a,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:g}));const y=v.current;j.useInsertionEffect(()=>{y&&y.update(n,f)});const S=j.useRef(!!(n[sv]&&!window.HandoffComplete));return lp(()=>{y&&(y.render(),S.current&&y.animationState&&y.animationState.animateChanges())}),j.useEffect(()=>{y&&(y.updateFeatures(),!S.current&&y.animationState&&y.animationState.animateChanges(),S.current&&(S.current=!1,window.HandoffComplete=!0))}),y}function La(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function sE(e,t,n){return j.useCallback(i=>{i&&e.mount&&e.mount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):La(n)&&(n.current=i))},[t])}function Mc(e){return typeof e=="string"||Array.isArray(e)}function dh(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const up=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],dp=["initial",...up];function hh(e){return dh(e.animate)||dp.some(t=>Mc(e[t]))}function ov(e){return!!(hh(e)||e.variants)}function oE(e,t){if(hh(e)){const{initial:n,animate:i}=e;return{initial:n===!1||Mc(n)?n:void 0,animate:Mc(i)?i:void 0}}return e.inherit!==!1?t:{}}function aE(e){const{initial:t,animate:n}=oE(e,j.useContext(lh));return j.useMemo(()=>({initial:t,animate:n}),[Pg(t),Pg(n)])}function Pg(e){return Array.isArray(e)?e.join(" "):e}const Dg={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Rc={};for(const e in Dg)Rc[e]={isEnabled:t=>Dg[e].some(n=>!!t[n])};function lE(e){for(const t in e)Rc[t]={...Rc[t],...e[t]}}const hp=j.createContext({}),av=j.createContext({}),cE=Symbol.for("motionComponentSymbol");function uE({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:i,Component:a}){e&&lE(e);function c(g,v){let y;const S={...j.useContext(rv),...g,layoutId:dE(g)},{isStatic:b}=S,T=aE(g),I=i(g,b);if(!b&&uh){T.visualElement=iE(a,I,S,t);const D=j.useContext(av),P=j.useContext(iv).strict;T.visualElement&&(y=T.visualElement.loadFeatures(S,P,e,D))}return j.createElement(lh.Provider,{value:T},y&&T.visualElement?j.createElement(y,{visualElement:T.visualElement,...S}):null,n(a,g,sE(I,T.visualElement,v),I,b,T.visualElement))}const f=j.forwardRef(c);return f[cE]=a,f}function dE({layoutId:e}){const t=j.useContext(hp).id;return t&&e!==void 0?t+"-"+e:e}function hE(e){function t(i,a={}){return uE(e(i,a))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(i,a)=>(n.has(a)||n.set(a,t(a)),n.get(a))})}const fE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fp(e){return typeof e!="string"||e.includes("-")?!1:!!(fE.indexOf(e)>-1||/[A-Z]/.test(e))}const Ed={};function pE(e){Object.assign(Ed,e)}const Uc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],la=new Set(Uc);function lv(e,{layout:t,layoutId:n}){return la.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Ed[e]||e==="opacity")}const Dr=e=>!!(e&&e.getVelocity),mE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},gE=Uc.length;function xE(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},i,a){let c="";for(let f=0;f<gE;f++){const g=Uc[f];if(e[g]!==void 0){const v=mE[g]||g;c+=`${v}(${e[g]}) `}}return t&&!e.z&&(c+="translateZ(0)"),c=c.trim(),a?c=a(e,i?"":c):n&&i&&(c="none"),c}const cv=e=>t=>typeof t=="string"&&t.startsWith(e),uv=cv("--"),L0=cv("var(--"),yE=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,wE=(e,t)=>t&&typeof e=="number"?t.transform(e):e,po=(e,t,n)=>Math.min(Math.max(n,e),t),ca={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ic={...ca,transform:e=>po(0,1,e)},Eu={...ca,default:1},sc=e=>Math.round(e*1e5)/1e5,fh=/(-)?([\d]*\.?[\d])+/g,dv=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,vE=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Vc(e){return typeof e=="string"}const Hc=e=>({test:t=>Vc(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Us=Hc("deg"),Ki=Hc("%"),at=Hc("px"),_E=Hc("vh"),bE=Hc("vw"),jg={...Ki,parse:e=>Ki.parse(e)/100,transform:e=>Ki.transform(e*100)},Bg={...ca,transform:Math.round},hv={borderWidth:at,borderTopWidth:at,borderRightWidth:at,borderBottomWidth:at,borderLeftWidth:at,borderRadius:at,radius:at,borderTopLeftRadius:at,borderTopRightRadius:at,borderBottomRightRadius:at,borderBottomLeftRadius:at,width:at,maxWidth:at,height:at,maxHeight:at,size:at,top:at,right:at,bottom:at,left:at,padding:at,paddingTop:at,paddingRight:at,paddingBottom:at,paddingLeft:at,margin:at,marginTop:at,marginRight:at,marginBottom:at,marginLeft:at,rotate:Us,rotateX:Us,rotateY:Us,rotateZ:Us,scale:Eu,scaleX:Eu,scaleY:Eu,scaleZ:Eu,skew:Us,skewX:Us,skewY:Us,distance:at,translateX:at,translateY:at,translateZ:at,x:at,y:at,z:at,perspective:at,transformPerspective:at,opacity:ic,originX:jg,originY:jg,originZ:at,zIndex:Bg,fillOpacity:ic,strokeOpacity:ic,numOctaves:Bg};function pp(e,t,n,i){const{style:a,vars:c,transform:f,transformOrigin:g}=e;let v=!1,y=!1,S=!0;for(const b in t){const T=t[b];if(uv(b)){c[b]=T;continue}const I=hv[b],D=wE(T,I);if(la.has(b)){if(v=!0,f[b]=D,!S)continue;T!==(I.default||0)&&(S=!1)}else b.startsWith("origin")?(y=!0,g[b]=D):a[b]=D}if(t.transform||(v||i?a.transform=xE(e.transform,n,S,i):a.transform&&(a.transform="none")),y){const{originX:b="50%",originY:T="50%",originZ:I=0}=g;a.transformOrigin=`${b} ${T} ${I}`}}const mp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function fv(e,t,n){for(const i in t)!Dr(t[i])&&!lv(i,n)&&(e[i]=t[i])}function CE({transformTemplate:e},t,n){return j.useMemo(()=>{const i=mp();return pp(i,t,{enableHardwareAcceleration:!n},e),Object.assign({},i.vars,i.style)},[t])}function SE(e,t,n){const i=e.style||{},a={};return fv(a,i,e),Object.assign(a,CE(e,t,n)),e.transformValues?e.transformValues(a):a}function AE(e,t,n){const i={},a=SE(e,t,n);return e.drag&&e.dragListener!==!1&&(i.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=a,i}const EE=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Nd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||EE.has(e)}let pv=e=>!Nd(e);function NE(e){e&&(pv=t=>t.startsWith("on")?!Nd(t):e(t))}try{NE(require("@emotion/is-prop-valid").default)}catch{}function TE(e,t,n){const i={};for(const a in e)a==="values"&&typeof e.values=="object"||(pv(a)||n===!0&&Nd(a)||!t&&!Nd(a)||e.draggable&&a.startsWith("onDrag"))&&(i[a]=e[a]);return i}function Fg(e,t,n){return typeof e=="string"?e:at.transform(t+n*e)}function IE(e,t,n){const i=Fg(t,e.x,e.width),a=Fg(n,e.y,e.height);return`${i} ${a}`}const kE={offset:"stroke-dashoffset",array:"stroke-dasharray"},ME={offset:"strokeDashoffset",array:"strokeDasharray"};function RE(e,t,n=1,i=0,a=!0){e.pathLength=1;const c=a?kE:ME;e[c.offset]=at.transform(-i);const f=at.transform(t),g=at.transform(n);e[c.array]=`${f} ${g}`}function gp(e,{attrX:t,attrY:n,attrScale:i,originX:a,originY:c,pathLength:f,pathSpacing:g=1,pathOffset:v=0,...y},S,b,T){if(pp(e,y,S,T),b){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:I,style:D,dimensions:P}=e;I.transform&&(P&&(D.transform=I.transform),delete I.transform),P&&(a!==void 0||c!==void 0||D.transform)&&(D.transformOrigin=IE(P,a!==void 0?a:.5,c!==void 0?c:.5)),t!==void 0&&(I.x=t),n!==void 0&&(I.y=n),i!==void 0&&(I.scale=i),f!==void 0&&RE(I,f,g,v,!1)}const mv=()=>({...mp(),attrs:{}}),xp=e=>typeof e=="string"&&e.toLowerCase()==="svg";function OE(e,t,n,i){const a=j.useMemo(()=>{const c=mv();return gp(c,t,{enableHardwareAcceleration:!1},xp(i),e.transformTemplate),{...c.attrs,style:{...c.style}}},[t]);if(e.style){const c={};fv(c,e.style,e),a.style={...c,...a.style}}return a}function LE(e=!1){return(n,i,a,{latestValues:c},f)=>{const v=(fp(n)?OE:AE)(i,c,f,n),S={...TE(i,typeof n=="string",e),...v,ref:a},{children:b}=i,T=j.useMemo(()=>Dr(b)?b.get():b,[b]);return j.createElement(n,{...S,children:T})}}function gv(e,{style:t,vars:n},i,a){Object.assign(e.style,t,a&&a.getProjectionStyles(i));for(const c in n)e.style.setProperty(c,n[c])}const xv=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function yv(e,t,n,i){gv(e,t,void 0,i);for(const a in t.attrs)e.setAttribute(xv.has(a)?a:cp(a),t.attrs[a])}function yp(e,t){const{style:n}=e,i={};for(const a in n)(Dr(n[a])||t.style&&Dr(t.style[a])||lv(a,e))&&(i[a]=n[a]);return i}function wv(e,t){const n=yp(e,t);for(const i in e)if(Dr(e[i])||Dr(t[i])){const a=Uc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[a]=e[i]}return n}function wp(e,t,n,i={},a={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,i,a)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,i,a)),t}function vv(e){const t=j.useRef(null);return t.current===null&&(t.current=e()),t.current}const Td=e=>Array.isArray(e),PE=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),DE=e=>Td(e)?e[e.length-1]||0:e;function qu(e){const t=Dr(e)?e.get():e;return PE(t)?t.toValue():t}function jE({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},i,a,c){const f={latestValues:BE(i,a,c,e),renderState:t()};return n&&(f.mount=g=>n(i,g,f)),f}const _v=e=>(t,n)=>{const i=j.useContext(lh),a=j.useContext(ch),c=()=>jE(e,t,i,a);return n?c():vv(c)};function BE(e,t,n,i){const a={},c=i(e,{});for(const T in c)a[T]=qu(c[T]);let{initial:f,animate:g}=e;const v=hh(e),y=ov(e);t&&y&&!v&&e.inherit!==!1&&(f===void 0&&(f=t.initial),g===void 0&&(g=t.animate));let S=n?n.initial===!1:!1;S=S||f===!1;const b=S?g:f;return b&&typeof b!="boolean"&&!dh(b)&&(Array.isArray(b)?b:[b]).forEach(I=>{const D=wp(e,I);if(!D)return;const{transitionEnd:P,transition:U,...V}=D;for(const O in V){let k=V[O];if(Array.isArray(k)){const H=S?k.length-1:0;k=k[H]}k!==null&&(a[O]=k)}for(const O in P)a[O]=P[O]}),a}const Nn=e=>e;class zg{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function FE(e){let t=new zg,n=new zg,i=0,a=!1,c=!1;const f=new WeakSet,g={schedule:(v,y=!1,S=!1)=>{const b=S&&a,T=b?t:n;return y&&f.add(v),T.add(v)&&b&&a&&(i=t.order.length),v},cancel:v=>{n.remove(v),f.delete(v)},process:v=>{if(a){c=!0;return}if(a=!0,[t,n]=[n,t],n.clear(),i=t.order.length,i)for(let y=0;y<i;y++){const S=t.order[y];S(v),f.has(S)&&(g.schedule(S),e())}a=!1,c&&(c=!1,g.process(v))}};return g}const Nu=["prepare","read","update","preRender","render","postRender"],zE=40;function UE(e,t){let n=!1,i=!0;const a={delta:0,timestamp:0,isProcessing:!1},c=Nu.reduce((b,T)=>(b[T]=FE(()=>n=!0),b),{}),f=b=>c[b].process(a),g=()=>{const b=performance.now();n=!1,a.delta=i?1e3/60:Math.max(Math.min(b-a.timestamp,zE),1),a.timestamp=b,a.isProcessing=!0,Nu.forEach(f),a.isProcessing=!1,n&&t&&(i=!1,e(g))},v=()=>{n=!0,i=!0,a.isProcessing||e(g)};return{schedule:Nu.reduce((b,T)=>{const I=c[T];return b[T]=(D,P=!1,U=!1)=>(n||v(),I.schedule(D,P,U)),b},{}),cancel:b=>Nu.forEach(T=>c[T].cancel(b)),state:a,steps:c}}const{schedule:ln,cancel:Ss,state:ur,steps:ff}=UE(typeof requestAnimationFrame<"u"?requestAnimationFrame:Nn,!0),VE={useVisualState:_v({scrapeMotionValuesFromProps:wv,createRenderState:mv,onMount:(e,t,{renderState:n,latestValues:i})=>{ln.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),ln.render(()=>{gp(n,i,{enableHardwareAcceleration:!1},xp(t.tagName),e.transformTemplate),yv(t,n)})}})},HE={useVisualState:_v({scrapeMotionValuesFromProps:yp,createRenderState:mp})};function WE(e,{forwardMotionProps:t=!1},n,i){return{...fp(e)?VE:HE,preloadedFeatures:n,useRender:LE(t),createVisualElement:i,Component:e}}function fs(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}const bv=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function ph(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const ZE=e=>t=>bv(t)&&e(t,ph(t));function xs(e,t,n,i){return fs(e,t,ZE(n),i)}const GE=(e,t)=>n=>t(e(n)),ao=(...e)=>e.reduce(GE);function Cv(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const Ug=Cv("dragHorizontal"),Vg=Cv("dragVertical");function Sv(e){let t=!1;if(e==="y")t=Vg();else if(e==="x")t=Ug();else{const n=Ug(),i=Vg();n&&i?t=()=>{n(),i()}:(n&&n(),i&&i())}return t}function Av(){const e=Sv(!0);return e?(e(),!1):!0}class Co{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Hg(e,t){const n="pointer"+(t?"enter":"leave"),i="onHover"+(t?"Start":"End"),a=(c,f)=>{if(c.pointerType==="touch"||Av())return;const g=e.getProps();e.animationState&&g.whileHover&&e.animationState.setActive("whileHover",t),g[i]&&ln.update(()=>g[i](c,f))};return xs(e.current,n,a,{passive:!e.getProps()[i]})}class YE extends Co{mount(){this.unmount=ao(Hg(this.node,!0),Hg(this.node,!1))}unmount(){}}class XE extends Co{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ao(fs(this.node.current,"focus",()=>this.onFocus()),fs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Ev=(e,t)=>t?e===t?!0:Ev(e,t.parentElement):!1;function pf(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,ph(n))}class qE extends Co{constructor(){super(...arguments),this.removeStartListeners=Nn,this.removeEndListeners=Nn,this.removeAccessibleListeners=Nn,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),c=xs(window,"pointerup",(g,v)=>{if(!this.checkPressEnd())return;const{onTap:y,onTapCancel:S,globalTapTarget:b}=this.node.getProps();ln.update(()=>{!b&&!Ev(this.node.current,g.target)?S&&S(g,v):y&&y(g,v)})},{passive:!(i.onTap||i.onPointerUp)}),f=xs(window,"pointercancel",(g,v)=>this.cancelPress(g,v),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=ao(c,f),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=c=>{if(c.key!=="Enter"||this.isPressing)return;const f=g=>{g.key!=="Enter"||!this.checkPressEnd()||pf("up",(v,y)=>{const{onTap:S}=this.node.getProps();S&&ln.update(()=>S(v,y))})};this.removeEndListeners(),this.removeEndListeners=fs(this.node.current,"keyup",f),pf("down",(g,v)=>{this.startPress(g,v)})},n=fs(this.node.current,"keydown",t),i=()=>{this.isPressing&&pf("cancel",(c,f)=>this.cancelPress(c,f))},a=fs(this.node.current,"blur",i);this.removeAccessibleListeners=ao(n,a)}}startPress(t,n){this.isPressing=!0;const{onTapStart:i,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&ln.update(()=>i(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Av()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&ln.update(()=>i(t,n))}mount(){const t=this.node.getProps(),n=xs(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),i=fs(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ao(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const P0=new WeakMap,mf=new WeakMap,KE=e=>{const t=P0.get(e.target);t&&t(e)},QE=e=>{e.forEach(KE)};function $E({root:e,...t}){const n=e||document;mf.has(n)||mf.set(n,{});const i=mf.get(n),a=JSON.stringify(t);return i[a]||(i[a]=new IntersectionObserver(QE,{root:e,...t})),i[a]}function JE(e,t,n){const i=$E(t);return P0.set(e,n),i.observe(e),()=>{P0.delete(e),i.unobserve(e)}}const eN={some:0,all:1};class tN extends Co{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:a="some",once:c}=t,f={root:n?n.current:void 0,rootMargin:i,threshold:typeof a=="number"?a:eN[a]},g=v=>{const{isIntersecting:y}=v;if(this.isInView===y||(this.isInView=y,c&&!y&&this.hasEnteredView))return;y&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",y);const{onViewportEnter:S,onViewportLeave:b}=this.node.getProps(),T=y?S:b;T&&T(v)};return JE(this.node.current,f,g)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(nN(t,n))&&this.startObserver()}unmount(){}}function nN({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const rN={inView:{Feature:tN},tap:{Feature:qE},focus:{Feature:XE},hover:{Feature:YE}};function Nv(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function iN(e){const t={};return e.values.forEach((n,i)=>t[i]=n.get()),t}function sN(e){const t={};return e.values.forEach((n,i)=>t[i]=n.getVelocity()),t}function mh(e,t,n){const i=e.getProps();return wp(i,t,n!==void 0?n:i.custom,iN(e),sN(e))}let vp=Nn;const Ko=e=>e*1e3,ys=e=>e/1e3,oN={current:!1},Tv=e=>Array.isArray(e)&&typeof e[0]=="number";function Iv(e){return!!(!e||typeof e=="string"&&kv[e]||Tv(e)||Array.isArray(e)&&e.every(Iv))}const Yl=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,kv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yl([0,.65,.55,1]),circOut:Yl([.55,0,1,.45]),backIn:Yl([.31,.01,.66,-.59]),backOut:Yl([.33,1.53,.69,.99])};function Mv(e){if(e)return Tv(e)?Yl(e):Array.isArray(e)?e.map(Mv):kv[e]}function aN(e,t,n,{delay:i=0,duration:a,repeat:c=0,repeatType:f="loop",ease:g,times:v}={}){const y={[t]:n};v&&(y.offset=v);const S=Mv(g);return Array.isArray(S)&&(y.easing=S),e.animate(y,{delay:i,duration:a,easing:Array.isArray(S)?"linear":S,fill:"both",iterations:c+1,direction:f==="reverse"?"alternate":"normal"})}function lN(e,{repeat:t,repeatType:n="loop"}){const i=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[i]}const Rv=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,cN=1e-7,uN=12;function dN(e,t,n,i,a){let c,f,g=0;do f=t+(n-t)/2,c=Rv(f,i,a)-e,c>0?n=f:t=f;while(Math.abs(c)>cN&&++g<uN);return f}function Wc(e,t,n,i){if(e===t&&n===i)return Nn;const a=c=>dN(c,0,1,e,n);return c=>c===0||c===1?c:Rv(a(c),t,i)}const hN=Wc(.42,0,1,1),fN=Wc(0,0,.58,1),Ov=Wc(.42,0,.58,1),pN=e=>Array.isArray(e)&&typeof e[0]!="number",Lv=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Pv=e=>t=>1-e(1-t),_p=e=>1-Math.sin(Math.acos(e)),Dv=Pv(_p),mN=Lv(_p),jv=Wc(.33,1.53,.69,.99),bp=Pv(jv),gN=Lv(bp),xN=e=>(e*=2)<1?.5*bp(e):.5*(2-Math.pow(2,-10*(e-1))),yN={linear:Nn,easeIn:hN,easeInOut:Ov,easeOut:fN,circIn:_p,circInOut:mN,circOut:Dv,backIn:bp,backInOut:gN,backOut:jv,anticipate:xN},Wg=e=>{if(Array.isArray(e)){vp(e.length===4);const[t,n,i,a]=e;return Wc(t,n,i,a)}else if(typeof e=="string")return yN[e];return e},Cp=(e,t)=>n=>!!(Vc(n)&&vE.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),Bv=(e,t,n)=>i=>{if(!Vc(i))return i;const[a,c,f,g]=i.match(fh);return{[e]:parseFloat(a),[t]:parseFloat(c),[n]:parseFloat(f),alpha:g!==void 0?parseFloat(g):1}},wN=e=>po(0,255,e),gf={...ca,transform:e=>Math.round(wN(e))},Go={test:Cp("rgb","red"),parse:Bv("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+gf.transform(e)+", "+gf.transform(t)+", "+gf.transform(n)+", "+sc(ic.transform(i))+")"};function vN(e){let t="",n="",i="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,i+=i,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:a?parseInt(a,16)/255:1}}const D0={test:Cp("#"),parse:vN,transform:Go.transform},Pa={test:Cp("hsl","hue"),parse:Bv("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+Ki.transform(sc(t))+", "+Ki.transform(sc(n))+", "+sc(ic.transform(i))+")"},vr={test:e=>Go.test(e)||D0.test(e)||Pa.test(e),parse:e=>Go.test(e)?Go.parse(e):Pa.test(e)?Pa.parse(e):D0.parse(e),transform:e=>Vc(e)?e:e.hasOwnProperty("red")?Go.transform(e):Pa.transform(e)},wn=(e,t,n)=>-n*e+n*t+e;function xf(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function _N({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let a=0,c=0,f=0;if(!t)a=c=f=n;else{const g=n<.5?n*(1+t):n+t-n*t,v=2*n-g;a=xf(v,g,e+1/3),c=xf(v,g,e),f=xf(v,g,e-1/3)}return{red:Math.round(a*255),green:Math.round(c*255),blue:Math.round(f*255),alpha:i}}const yf=(e,t,n)=>{const i=e*e;return Math.sqrt(Math.max(0,n*(t*t-i)+i))},bN=[D0,Go,Pa],CN=e=>bN.find(t=>t.test(e));function Zg(e){const t=CN(e);let n=t.parse(e);return t===Pa&&(n=_N(n)),n}const Fv=(e,t)=>{const n=Zg(e),i=Zg(t),a={...n};return c=>(a.red=yf(n.red,i.red,c),a.green=yf(n.green,i.green,c),a.blue=yf(n.blue,i.blue,c),a.alpha=wn(n.alpha,i.alpha,c),Go.transform(a))};function SN(e){var t,n;return isNaN(e)&&Vc(e)&&(((t=e.match(fh))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(dv))===null||n===void 0?void 0:n.length)||0)>0}const zv={regex:yE,countKey:"Vars",token:"${v}",parse:Nn},Uv={regex:dv,countKey:"Colors",token:"${c}",parse:vr.parse},Vv={regex:fh,countKey:"Numbers",token:"${n}",parse:ca.parse};function wf(e,{regex:t,countKey:n,token:i,parse:a}){const c=e.tokenised.match(t);c&&(e["num"+n]=c.length,e.tokenised=e.tokenised.replace(t,i),e.values.push(...c.map(a)))}function Id(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&wf(n,zv),wf(n,Uv),wf(n,Vv),n}function Hv(e){return Id(e).values}function Wv(e){const{values:t,numColors:n,numVars:i,tokenised:a}=Id(e),c=t.length;return f=>{let g=a;for(let v=0;v<c;v++)v<i?g=g.replace(zv.token,f[v]):v<i+n?g=g.replace(Uv.token,vr.transform(f[v])):g=g.replace(Vv.token,sc(f[v]));return g}}const AN=e=>typeof e=="number"?0:e;function EN(e){const t=Hv(e);return Wv(e)(t.map(AN))}const mo={test:SN,parse:Hv,createTransformer:Wv,getAnimatableNone:EN},Zv=(e,t)=>n=>`${n>0?t:e}`;function Gv(e,t){return typeof e=="number"?n=>wn(e,t,n):vr.test(e)?Fv(e,t):e.startsWith("var(")?Zv(e,t):Xv(e,t)}const Yv=(e,t)=>{const n=[...e],i=n.length,a=e.map((c,f)=>Gv(c,t[f]));return c=>{for(let f=0;f<i;f++)n[f]=a[f](c);return n}},NN=(e,t)=>{const n={...e,...t},i={};for(const a in n)e[a]!==void 0&&t[a]!==void 0&&(i[a]=Gv(e[a],t[a]));return a=>{for(const c in i)n[c]=i[c](a);return n}},Xv=(e,t)=>{const n=mo.createTransformer(t),i=Id(e),a=Id(t);return i.numVars===a.numVars&&i.numColors===a.numColors&&i.numNumbers>=a.numNumbers?ao(Yv(i.values,a.values),n):Zv(e,t)},Oc=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i},Gg=(e,t)=>n=>wn(e,t,n);function TN(e){return typeof e=="number"?Gg:typeof e=="string"?vr.test(e)?Fv:Xv:Array.isArray(e)?Yv:typeof e=="object"?NN:Gg}function IN(e,t,n){const i=[],a=n||TN(e[0]),c=e.length-1;for(let f=0;f<c;f++){let g=a(e[f],e[f+1]);if(t){const v=Array.isArray(t)?t[f]||Nn:t;g=ao(v,g)}i.push(g)}return i}function qv(e,t,{clamp:n=!0,ease:i,mixer:a}={}){const c=e.length;if(vp(c===t.length),c===1)return()=>t[0];e[0]>e[c-1]&&(e=[...e].reverse(),t=[...t].reverse());const f=IN(t,i,a),g=f.length,v=y=>{let S=0;if(g>1)for(;S<e.length-2&&!(y<e[S+1]);S++);const b=Oc(e[S],e[S+1],y);return f[S](b)};return n?y=>v(po(e[0],e[c-1],y)):v}function kN(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const a=Oc(0,t,i);e.push(wn(n,1,a))}}function MN(e){const t=[0];return kN(t,e.length-1),t}function RN(e,t){return e.map(n=>n*t)}function ON(e,t){return e.map(()=>t||Ov).splice(0,e.length-1)}function kd({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const a=pN(i)?i.map(Wg):Wg(i),c={done:!1,value:t[0]},f=RN(n&&n.length===t.length?n:MN(t),e),g=qv(f,t,{ease:Array.isArray(a)?a:ON(t,a)});return{calculatedDuration:e,next:v=>(c.value=g(v),c.done=v>=e,c)}}function Kv(e,t){return t?e*(1e3/t):0}const LN=5;function Qv(e,t,n){const i=Math.max(t-LN,0);return Kv(n-e(i),t-i)}const vf=.001,PN=.01,DN=10,jN=.05,BN=1;function FN({duration:e=800,bounce:t=.25,velocity:n=0,mass:i=1}){let a,c,f=1-t;f=po(jN,BN,f),e=po(PN,DN,ys(e)),f<1?(a=y=>{const S=y*f,b=S*e,T=S-n,I=j0(y,f),D=Math.exp(-b);return vf-T/I*D},c=y=>{const b=y*f*e,T=b*n+n,I=Math.pow(f,2)*Math.pow(y,2)*e,D=Math.exp(-b),P=j0(Math.pow(y,2),f);return(-a(y)+vf>0?-1:1)*((T-I)*D)/P}):(a=y=>{const S=Math.exp(-y*e),b=(y-n)*e+1;return-vf+S*b},c=y=>{const S=Math.exp(-y*e),b=(n-y)*(e*e);return S*b});const g=5/e,v=UN(a,c,g);if(e=Ko(e),isNaN(v))return{stiffness:100,damping:10,duration:e};{const y=Math.pow(v,2)*i;return{stiffness:y,damping:f*2*Math.sqrt(i*y),duration:e}}}const zN=12;function UN(e,t,n){let i=n;for(let a=1;a<zN;a++)i=i-e(i)/t(i);return i}function j0(e,t){return e*Math.sqrt(1-t*t)}const VN=["duration","bounce"],HN=["stiffness","damping","mass"];function Yg(e,t){return t.some(n=>e[n]!==void 0)}function WN(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Yg(e,HN)&&Yg(e,VN)){const n=FN(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function $v({keyframes:e,restDelta:t,restSpeed:n,...i}){const a=e[0],c=e[e.length-1],f={done:!1,value:a},{stiffness:g,damping:v,mass:y,duration:S,velocity:b,isResolvedFromDuration:T}=WN({...i,velocity:-ys(i.velocity||0)}),I=b||0,D=v/(2*Math.sqrt(g*y)),P=c-a,U=ys(Math.sqrt(g/y)),V=Math.abs(P)<5;n||(n=V?.01:2),t||(t=V?.005:.5);let O;if(D<1){const k=j0(U,D);O=H=>{const X=Math.exp(-D*U*H);return c-X*((I+D*U*P)/k*Math.sin(k*H)+P*Math.cos(k*H))}}else if(D===1)O=k=>c-Math.exp(-U*k)*(P+(I+U*P)*k);else{const k=U*Math.sqrt(D*D-1);O=H=>{const X=Math.exp(-D*U*H),G=Math.min(k*H,300);return c-X*((I+D*U*P)*Math.sinh(G)+k*P*Math.cosh(G))/k}}return{calculatedDuration:T&&S||null,next:k=>{const H=O(k);if(T)f.done=k>=S;else{let X=I;k!==0&&(D<1?X=Qv(O,k,H):X=0);const G=Math.abs(X)<=n,Z=Math.abs(c-H)<=t;f.done=G&&Z}return f.value=f.done?c:H,f}}}function Xg({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:a=10,bounceStiffness:c=500,modifyTarget:f,min:g,max:v,restDelta:y=.5,restSpeed:S}){const b=e[0],T={done:!1,value:b},I=J=>g!==void 0&&J<g||v!==void 0&&J>v,D=J=>g===void 0?v:v===void 0||Math.abs(g-J)<Math.abs(v-J)?g:v;let P=n*t;const U=b+P,V=f===void 0?U:f(U);V!==U&&(P=V-b);const O=J=>-P*Math.exp(-J/i),k=J=>V+O(J),H=J=>{const z=O(J),te=k(J);T.done=Math.abs(z)<=y,T.value=T.done?V:te};let X,G;const Z=J=>{I(T.value)&&(X=J,G=$v({keyframes:[T.value,D(T.value)],velocity:Qv(k,J,T.value),damping:a,stiffness:c,restDelta:y,restSpeed:S}))};return Z(0),{calculatedDuration:null,next:J=>{let z=!1;return!G&&X===void 0&&(z=!0,H(J),Z(J)),X!==void 0&&J>X?G.next(J-X):(!z&&H(J),T)}}}const ZN=e=>{const t=({timestamp:n})=>e(n);return{start:()=>ln.update(t,!0),stop:()=>Ss(t),now:()=>ur.isProcessing?ur.timestamp:performance.now()}},qg=2e4;function Kg(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<qg;)t+=n,i=e.next(t);return t>=qg?1/0:t}const GN={decay:Xg,inertia:Xg,tween:kd,keyframes:kd,spring:$v};function Md({autoplay:e=!0,delay:t=0,driver:n=ZN,keyframes:i,type:a="keyframes",repeat:c=0,repeatDelay:f=0,repeatType:g="loop",onPlay:v,onStop:y,onComplete:S,onUpdate:b,...T}){let I=1,D=!1,P,U;const V=()=>{U=new Promise(Se=>{P=Se})};V();let O;const k=GN[a]||kd;let H;k!==kd&&typeof i[0]!="number"&&(H=qv([0,100],i,{clamp:!1}),i=[0,100]);const X=k({...T,keyframes:i});let G;g==="mirror"&&(G=k({...T,keyframes:[...i].reverse(),velocity:-(T.velocity||0)}));let Z="idle",J=null,z=null,te=null;X.calculatedDuration===null&&c&&(X.calculatedDuration=Kg(X));const{calculatedDuration:me}=X;let fe=1/0,Me=1/0;me!==null&&(fe=me+f,Me=fe*(c+1)-f);let we=0;const ae=Se=>{if(z===null)return;I>0&&(z=Math.min(z,Se)),I<0&&(z=Math.min(Se-Me/I,z)),J!==null?we=J:we=Math.round(Se-z)*I;const Be=we-t*(I>=0?1:-1),Pe=I>=0?Be<0:Be>Me;we=Math.max(Be,0),Z==="finished"&&J===null&&(we=Me);let ze=we,$=X;if(c){const Et=Math.min(we,Me)/fe;let Vt=Math.floor(Et),nt=Et%1;!nt&&Et>=1&&(nt=1),nt===1&&Vt--,Vt=Math.min(Vt,c+1),!!(Vt%2)&&(g==="reverse"?(nt=1-nt,f&&(nt-=f/fe)):g==="mirror"&&($=G)),ze=po(0,1,nt)*fe}const re=Pe?{done:!1,value:i[0]}:$.next(ze);H&&(re.value=H(re.value));let{done:Ie}=re;!Pe&&me!==null&&(Ie=I>=0?we>=Me:we<=0);const Xe=J===null&&(Z==="finished"||Z==="running"&&Ie);return b&&b(re.value),Xe&&ue(),re},Ce=()=>{O&&O.stop(),O=void 0},ke=()=>{Z="idle",Ce(),P(),V(),z=te=null},ue=()=>{Z="finished",S&&S(),Ce(),P()},je=()=>{if(D)return;O||(O=n(ae));const Se=O.now();v&&v(),J!==null?z=Se-J:(!z||Z==="finished")&&(z=Se),Z==="finished"&&V(),te=z,J=null,Z="running",O.start()};e&&je();const ge={then(Se,Be){return U.then(Se,Be)},get time(){return ys(we)},set time(Se){Se=Ko(Se),we=Se,J!==null||!O||I===0?J=Se:z=O.now()-Se/I},get duration(){const Se=X.calculatedDuration===null?Kg(X):X.calculatedDuration;return ys(Se)},get speed(){return I},set speed(Se){Se===I||!O||(I=Se,ge.time=ys(we))},get state(){return Z},play:je,pause:()=>{Z="paused",J=we},stop:()=>{D=!0,Z!=="idle"&&(Z="idle",y&&y(),ke())},cancel:()=>{te!==null&&ae(te),ke()},complete:()=>{Z="finished"},sample:Se=>(z=0,ae(Se))};return ge}function YN(e){let t;return()=>(t===void 0&&(t=e()),t)}const XN=YN(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),qN=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Tu=10,KN=2e4,QN=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Iv(t.ease);function $N(e,t,{onUpdate:n,onComplete:i,...a}){if(!(XN()&&qN.has(t)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let f=!1,g,v,y=!1;const S=()=>{v=new Promise(k=>{g=k})};S();let{keyframes:b,duration:T=300,ease:I,times:D}=a;if(QN(t,a)){const k=Md({...a,repeat:0,delay:0});let H={done:!1,value:b[0]};const X=[];let G=0;for(;!H.done&&G<KN;)H=k.sample(G),X.push(H.value),G+=Tu;D=void 0,b=X,T=G-Tu,I="linear"}const P=aN(e.owner.current,t,b,{...a,duration:T,ease:I,times:D}),U=()=>{y=!1,P.cancel()},V=()=>{y=!0,ln.update(U),g(),S()};return P.onfinish=()=>{y||(e.set(lN(b,a)),i&&i(),V())},{then(k,H){return v.then(k,H)},attachTimeline(k){return P.timeline=k,P.onfinish=null,Nn},get time(){return ys(P.currentTime||0)},set time(k){P.currentTime=Ko(k)},get speed(){return P.playbackRate},set speed(k){P.playbackRate=k},get duration(){return ys(T)},play:()=>{f||(P.play(),Ss(U))},pause:()=>P.pause(),stop:()=>{if(f=!0,P.playState==="idle")return;const{currentTime:k}=P;if(k){const H=Md({...a,autoplay:!1});e.setWithVelocity(H.sample(k-Tu).value,H.sample(k).value,Tu)}V()},complete:()=>{y||P.finish()},cancel:V}}function JN({keyframes:e,delay:t,onUpdate:n,onComplete:i}){const a=()=>(n&&n(e[e.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Nn,pause:Nn,stop:Nn,then:c=>(c(),Promise.resolve()),cancel:Nn,complete:Nn});return t?Md({keyframes:[0,1],duration:0,delay:t,onComplete:a}):a()}const e4={type:"spring",stiffness:500,damping:25,restSpeed:10},t4=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),n4={type:"keyframes",duration:.8},r4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},i4=(e,{keyframes:t})=>t.length>2?n4:la.has(e)?e.startsWith("scale")?t4(t[1]):e4:r4,B0=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(mo.test(t)||t==="0")&&!t.startsWith("url(")),s4=new Set(["brightness","contrast","saturate","opacity"]);function o4(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(fh)||[];if(!i)return e;const a=n.replace(i,"");let c=s4.has(t)?1:0;return i!==n&&(c*=100),t+"("+c+a+")"}const a4=/([a-z-]*)\(.*?\)/g,F0={...mo,getAnimatableNone:e=>{const t=e.match(a4);return t?t.map(o4).join(" "):e}},l4={...hv,color:vr,backgroundColor:vr,outlineColor:vr,fill:vr,stroke:vr,borderColor:vr,borderTopColor:vr,borderRightColor:vr,borderBottomColor:vr,borderLeftColor:vr,filter:F0,WebkitFilter:F0},Sp=e=>l4[e];function Jv(e,t){let n=Sp(e);return n!==F0&&(n=mo),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const e_=e=>/^0[^.\s]+$/.test(e);function c4(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||e_(e)}function u4(e,t,n,i){const a=B0(t,n);let c;Array.isArray(n)?c=[...n]:c=[null,n];const f=i.from!==void 0?i.from:e.get();let g;const v=[];for(let y=0;y<c.length;y++)c[y]===null&&(c[y]=y===0?f:c[y-1]),c4(c[y])&&v.push(y),typeof c[y]=="string"&&c[y]!=="none"&&c[y]!=="0"&&(g=c[y]);if(a&&v.length&&g)for(let y=0;y<v.length;y++){const S=v[y];c[S]=Jv(t,g)}return c}function d4({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:a,repeat:c,repeatType:f,repeatDelay:g,from:v,elapsed:y,...S}){return!!Object.keys(S).length}function Ap(e,t){return e[t]||e.default||e}const h4={skipAnimations:!1},Ep=(e,t,n,i={})=>a=>{const c=Ap(i,e)||{},f=c.delay||i.delay||0;let{elapsed:g=0}=i;g=g-Ko(f);const v=u4(t,e,n,c),y=v[0],S=v[v.length-1],b=B0(e,y),T=B0(e,S);let I={keyframes:v,velocity:t.getVelocity(),ease:"easeOut",...c,delay:-g,onUpdate:D=>{t.set(D),c.onUpdate&&c.onUpdate(D)},onComplete:()=>{a(),c.onComplete&&c.onComplete()}};if(d4(c)||(I={...I,...i4(e,I)}),I.duration&&(I.duration=Ko(I.duration)),I.repeatDelay&&(I.repeatDelay=Ko(I.repeatDelay)),!b||!T||oN.current||c.type===!1||h4.skipAnimations)return JN(I);if(!i.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const D=$N(t,e,I);if(D)return D}return Md(I)};function Rd(e){return!!(Dr(e)&&e.add)}const t_=e=>/^\-?\d*\.?\d+$/.test(e);function Np(e,t){e.indexOf(t)===-1&&e.push(t)}function Tp(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Ip{constructor(){this.subscriptions=[]}add(t){return Np(this.subscriptions,t),()=>Tp(this.subscriptions,t)}notify(t,n,i){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,n,i);else for(let c=0;c<a;c++){const f=this.subscriptions[c];f&&f(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const f4=e=>!isNaN(parseFloat(e));class p4{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,a=!0)=>{this.prev=this.current,this.current=i;const{delta:c,timestamp:f}=ur;this.lastUpdated!==f&&(this.timeDelta=c,this.lastUpdated=f,ln.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ln.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=f4(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Ip);const i=this.events[t].add(n);return t==="change"?()=>{i(),ln.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,i){this.set(n),this.prev=t,this.timeDelta=i}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Kv(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ja(e,t){return new p4(e,t)}const n_=e=>t=>t.test(e),m4={test:e=>e==="auto",parse:e=>e},r_=[ca,at,Ki,Us,bE,_E,m4],Bl=e=>r_.find(n_(e)),g4=[...r_,vr,mo],x4=e=>g4.find(n_(e));function y4(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ja(n))}function w4(e,t){const n=mh(e,t);let{transitionEnd:i={},transition:a={},...c}=n?e.makeTargetAnimatable(n,!1):{};c={...c,...i};for(const f in c){const g=DE(c[f]);y4(e,f,g)}}function v4(e,t,n){var i,a;const c=Object.keys(t).filter(g=>!e.hasValue(g)),f=c.length;if(f)for(let g=0;g<f;g++){const v=c[g],y=t[v];let S=null;Array.isArray(y)&&(S=y[0]),S===null&&(S=(a=(i=n[v])!==null&&i!==void 0?i:e.readValue(v))!==null&&a!==void 0?a:t[v]),S!=null&&(typeof S=="string"&&(t_(S)||e_(S))?S=parseFloat(S):!x4(S)&&mo.test(y)&&(S=Jv(v,y)),e.addValue(v,Ja(S,{owner:e})),n[v]===void 0&&(n[v]=S),S!==null&&e.setBaseTarget(v,S))}}function _4(e,t){return t?(t[e]||t.default||t).from:void 0}function b4(e,t,n){const i={};for(const a in e){const c=_4(a,t);if(c!==void 0)i[a]=c;else{const f=n.getValue(a);f&&(i[a]=f.get())}}return i}function C4({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function S4(e,t){const n=e.get();if(Array.isArray(t)){for(let i=0;i<t.length;i++)if(t[i]!==n)return!0}else return n!==t}function i_(e,t,{delay:n=0,transitionOverride:i,type:a}={}){let{transition:c=e.getDefaultTransition(),transitionEnd:f,...g}=e.makeTargetAnimatable(t);const v=e.getValue("willChange");i&&(c=i);const y=[],S=a&&e.animationState&&e.animationState.getState()[a];for(const b in g){const T=e.getValue(b),I=g[b];if(!T||I===void 0||S&&C4(S,b))continue;const D={delay:n,elapsed:0,...Ap(c||{},b)};if(window.HandoffAppearAnimations){const V=e.getProps()[sv];if(V){const O=window.HandoffAppearAnimations(V,b,T,ln);O!==null&&(D.elapsed=O,D.isHandoff=!0)}}let P=!D.isHandoff&&!S4(T,I);if(D.type==="spring"&&(T.getVelocity()||D.velocity)&&(P=!1),T.animation&&(P=!1),P)continue;T.start(Ep(b,T,I,e.shouldReduceMotion&&la.has(b)?{type:!1}:D));const U=T.animation;Rd(v)&&(v.add(b),U.then(()=>v.remove(b))),y.push(U)}return f&&Promise.all(y).then(()=>{f&&w4(e,f)}),y}function z0(e,t,n={}){const i=mh(e,t,n.custom);let{transition:a=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const c=i?()=>Promise.all(i_(e,i,n)):()=>Promise.resolve(),f=e.variantChildren&&e.variantChildren.size?(v=0)=>{const{delayChildren:y=0,staggerChildren:S,staggerDirection:b}=a;return A4(e,t,y+v,S,b,n)}:()=>Promise.resolve(),{when:g}=a;if(g){const[v,y]=g==="beforeChildren"?[c,f]:[f,c];return v().then(()=>y())}else return Promise.all([c(),f(n.delay)])}function A4(e,t,n=0,i=0,a=1,c){const f=[],g=(e.variantChildren.size-1)*i,v=a===1?(y=0)=>y*i:(y=0)=>g-y*i;return Array.from(e.variantChildren).sort(E4).forEach((y,S)=>{y.notify("AnimationStart",t),f.push(z0(y,t,{...c,delay:n+v(S)}).then(()=>y.notify("AnimationComplete",t)))}),Promise.all(f)}function E4(e,t){return e.sortNodePosition(t)}function N4(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const a=t.map(c=>z0(e,c,n));i=Promise.all(a)}else if(typeof t=="string")i=z0(e,t,n);else{const a=typeof t=="function"?mh(e,t,n.custom):t;i=Promise.all(i_(e,a,n))}return i.then(()=>e.notify("AnimationComplete",t))}const T4=[...up].reverse(),I4=up.length;function k4(e){return t=>Promise.all(t.map(({animation:n,options:i})=>N4(e,n,i)))}function M4(e){let t=k4(e);const n=O4();let i=!0;const a=(v,y)=>{const S=mh(e,y);if(S){const{transition:b,transitionEnd:T,...I}=S;v={...v,...I,...T}}return v};function c(v){t=v(e)}function f(v,y){const S=e.getProps(),b=e.getVariantContext(!0)||{},T=[],I=new Set;let D={},P=1/0;for(let V=0;V<I4;V++){const O=T4[V],k=n[O],H=S[O]!==void 0?S[O]:b[O],X=Mc(H),G=O===y?k.isActive:null;G===!1&&(P=V);let Z=H===b[O]&&H!==S[O]&&X;if(Z&&i&&e.manuallyAnimateOnMount&&(Z=!1),k.protectedKeys={...D},!k.isActive&&G===null||!H&&!k.prevProp||dh(H)||typeof H=="boolean")continue;let z=R4(k.prevProp,H)||O===y&&k.isActive&&!Z&&X||V>P&&X,te=!1;const me=Array.isArray(H)?H:[H];let fe=me.reduce(a,{});G===!1&&(fe={});const{prevResolvedValues:Me={}}=k,we={...Me,...fe},ae=Ce=>{z=!0,I.has(Ce)&&(te=!0,I.delete(Ce)),k.needsAnimating[Ce]=!0};for(const Ce in we){const ke=fe[Ce],ue=Me[Ce];if(D.hasOwnProperty(Ce))continue;let je=!1;Td(ke)&&Td(ue)?je=!Nv(ke,ue):je=ke!==ue,je?ke!==void 0?ae(Ce):I.add(Ce):ke!==void 0&&I.has(Ce)?ae(Ce):k.protectedKeys[Ce]=!0}k.prevProp=H,k.prevResolvedValues=fe,k.isActive&&(D={...D,...fe}),i&&e.blockInitialAnimation&&(z=!1),z&&(!Z||te)&&T.push(...me.map(Ce=>({animation:Ce,options:{type:O,...v}})))}if(I.size){const V={};I.forEach(O=>{const k=e.getBaseTarget(O);k!==void 0&&(V[O]=k)}),T.push({animation:V})}let U=!!T.length;return i&&(S.initial===!1||S.initial===S.animate)&&!e.manuallyAnimateOnMount&&(U=!1),i=!1,U?t(T):Promise.resolve()}function g(v,y,S){var b;if(n[v].isActive===y)return Promise.resolve();(b=e.variantChildren)===null||b===void 0||b.forEach(I=>{var D;return(D=I.animationState)===null||D===void 0?void 0:D.setActive(v,y)}),n[v].isActive=y;const T=f(S,v);for(const I in n)n[I].protectedKeys={};return T}return{animateChanges:f,setActive:g,setAnimateFunction:c,getState:()=>n}}function R4(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Nv(t,e):!1}function Po(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function O4(){return{animate:Po(!0),whileInView:Po(),whileHover:Po(),whileTap:Po(),whileDrag:Po(),whileFocus:Po(),exit:Po()}}class L4 extends Co{constructor(t){super(t),t.animationState||(t.animationState=M4(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),dh(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let P4=0;class D4 extends Co{constructor(){super(...arguments),this.id=P4++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const c=this.node.animationState.setActive("exit",!t,{custom:i??this.node.getProps().custom});n&&!t&&c.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const j4={animation:{Feature:L4},exit:{Feature:D4}},Qg=(e,t)=>Math.abs(e-t);function B4(e,t){const n=Qg(e.x,t.x),i=Qg(e.y,t.y);return Math.sqrt(n**2+i**2)}class s_{constructor(t,n,{transformPagePoint:i,contextWindow:a,dragSnapToOrigin:c=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=bf(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,I=B4(b.offset,{x:0,y:0})>=3;if(!T&&!I)return;const{point:D}=b,{timestamp:P}=ur;this.history.push({...D,timestamp:P});const{onStart:U,onMove:V}=this.handlers;T||(U&&U(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,b)},this.handlePointerMove=(b,T)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=_f(T,this.transformPagePoint),ln.update(this.updatePoint,!0)},this.handlePointerUp=(b,T)=>{this.end();const{onEnd:I,onSessionEnd:D,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const U=bf(b.type==="pointercancel"?this.lastMoveEventInfo:_f(T,this.transformPagePoint),this.history);this.startEvent&&I&&I(b,U),D&&D(b,U)},!bv(t))return;this.dragSnapToOrigin=c,this.handlers=n,this.transformPagePoint=i,this.contextWindow=a||window;const f=ph(t),g=_f(f,this.transformPagePoint),{point:v}=g,{timestamp:y}=ur;this.history=[{...v,timestamp:y}];const{onSessionStart:S}=n;S&&S(t,bf(g,this.history)),this.removeListeners=ao(xs(this.contextWindow,"pointermove",this.handlePointerMove),xs(this.contextWindow,"pointerup",this.handlePointerUp),xs(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ss(this.updatePoint)}}function _f(e,t){return t?{point:t(e.point)}:e}function $g(e,t){return{x:e.x-t.x,y:e.y-t.y}}function bf({point:e},t){return{point:e,delta:$g(e,o_(t)),offset:$g(e,F4(t)),velocity:z4(t,.1)}}function F4(e){return e[0]}function o_(e){return e[e.length-1]}function z4(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const a=o_(e);for(;n>=0&&(i=e[n],!(a.timestamp-i.timestamp>Ko(t)));)n--;if(!i)return{x:0,y:0};const c=ys(a.timestamp-i.timestamp);if(c===0)return{x:0,y:0};const f={x:(a.x-i.x)/c,y:(a.y-i.y)/c};return f.x===1/0&&(f.x=0),f.y===1/0&&(f.y=0),f}function Xr(e){return e.max-e.min}function U0(e,t=0,n=.01){return Math.abs(e-t)<=n}function Jg(e,t,n,i=.5){e.origin=i,e.originPoint=wn(t.min,t.max,e.origin),e.scale=Xr(n)/Xr(t),(U0(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=wn(n.min,n.max,e.origin)-e.originPoint,(U0(e.translate)||isNaN(e.translate))&&(e.translate=0)}function oc(e,t,n,i){Jg(e.x,t.x,n.x,i?i.originX:void 0),Jg(e.y,t.y,n.y,i?i.originY:void 0)}function ex(e,t,n){e.min=n.min+t.min,e.max=e.min+Xr(t)}function U4(e,t,n){ex(e.x,t.x,n.x),ex(e.y,t.y,n.y)}function tx(e,t,n){e.min=t.min-n.min,e.max=e.min+Xr(t)}function ac(e,t,n){tx(e.x,t.x,n.x),tx(e.y,t.y,n.y)}function V4(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?wn(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?wn(n,e,i.max):Math.min(e,n)),e}function nx(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function H4(e,{top:t,left:n,bottom:i,right:a}){return{x:nx(e.x,n,a),y:nx(e.y,t,i)}}function rx(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function W4(e,t){return{x:rx(e.x,t.x),y:rx(e.y,t.y)}}function Z4(e,t){let n=.5;const i=Xr(e),a=Xr(t);return a>i?n=Oc(t.min,t.max-i,e.min):i>a&&(n=Oc(e.min,e.max-a,t.min)),po(0,1,n)}function G4(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const V0=.35;function Y4(e=V0){return e===!1?e=0:e===!0&&(e=V0),{x:ix(e,"left","right"),y:ix(e,"top","bottom")}}function ix(e,t,n){return{min:sx(e,t),max:sx(e,n)}}function sx(e,t){return typeof e=="number"?e:e[t]||0}const ox=()=>({translate:0,scale:1,origin:0,originPoint:0}),Da=()=>({x:ox(),y:ox()}),ax=()=>({min:0,max:0}),Ln=()=>({x:ax(),y:ax()});function ui(e){return[e("x"),e("y")]}function a_({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function X4({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function q4(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Cf(e){return e===void 0||e===1}function H0({scale:e,scaleX:t,scaleY:n}){return!Cf(e)||!Cf(t)||!Cf(n)}function Fo(e){return H0(e)||l_(e)||e.z||e.rotate||e.rotateX||e.rotateY}function l_(e){return lx(e.x)||lx(e.y)}function lx(e){return e&&e!=="0%"}function Od(e,t,n){const i=e-n,a=t*i;return n+a}function cx(e,t,n,i,a){return a!==void 0&&(e=Od(e,a,i)),Od(e,n,i)+t}function W0(e,t=0,n=1,i,a){e.min=cx(e.min,t,n,i,a),e.max=cx(e.max,t,n,i,a)}function c_(e,{x:t,y:n}){W0(e.x,t.translate,t.scale,t.originPoint),W0(e.y,n.translate,n.scale,n.originPoint)}function K4(e,t,n,i=!1){const a=n.length;if(!a)return;t.x=t.y=1;let c,f;for(let g=0;g<a;g++){c=n[g],f=c.projectionDelta;const v=c.instance;v&&v.style&&v.style.display==="contents"||(i&&c.options.layoutScroll&&c.scroll&&c!==c.root&&ja(e,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),f&&(t.x*=f.x.scale,t.y*=f.y.scale,c_(e,f)),i&&Fo(c.latestValues)&&ja(e,c.latestValues))}t.x=ux(t.x),t.y=ux(t.y)}function ux(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Ws(e,t){e.min=e.min+t,e.max=e.max+t}function dx(e,t,[n,i,a]){const c=t[a]!==void 0?t[a]:.5,f=wn(e.min,e.max,c);W0(e,t[n],t[i],f,t.scale)}const Q4=["x","scaleX","originX"],$4=["y","scaleY","originY"];function ja(e,t){dx(e.x,t,Q4),dx(e.y,t,$4)}function u_(e,t){return a_(q4(e.getBoundingClientRect(),t))}function J4(e,t,n){const i=u_(e,n),{scroll:a}=t;return a&&(Ws(i.x,a.offset.x),Ws(i.y,a.offset.y)),i}const d_=({current:e})=>e?e.ownerDocument.defaultView:null,eT=new WeakMap;class tT{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ln(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=S=>{const{dragSnapToOrigin:b}=this.getProps();b?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ph(S,"page").point)},c=(S,b)=>{const{drag:T,dragPropagation:I,onDragStart:D}=this.getProps();if(T&&!I&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Sv(T),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ui(U=>{let V=this.getAxisMotionValue(U).get()||0;if(Ki.test(V)){const{projection:O}=this.visualElement;if(O&&O.layout){const k=O.layout.layoutBox[U];k&&(V=Xr(k)*(parseFloat(V)/100))}}this.originPoint[U]=V}),D&&ln.update(()=>D(S,b),!1,!0);const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},f=(S,b)=>{const{dragPropagation:T,dragDirectionLock:I,onDirectionLock:D,onDrag:P}=this.getProps();if(!T&&!this.openGlobalLock)return;const{offset:U}=b;if(I&&this.currentDirection===null){this.currentDirection=nT(U),this.currentDirection!==null&&D&&D(this.currentDirection);return}this.updateAxis("x",b.point,U),this.updateAxis("y",b.point,U),this.visualElement.render(),P&&P(S,b)},g=(S,b)=>this.stop(S,b),v=()=>ui(S=>{var b;return this.getAnimationState(S)==="paused"&&((b=this.getAxisMotionValue(S).animation)===null||b===void 0?void 0:b.play())}),{dragSnapToOrigin:y}=this.getProps();this.panSession=new s_(t,{onSessionStart:a,onStart:c,onMove:f,onSessionEnd:g,resumeAnimation:v},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,contextWindow:d_(this.visualElement)})}stop(t,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:c}=this.getProps();c&&ln.update(()=>c(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:a}=this.getProps();if(!i||!Iu(t,a,this.currentDirection))return;const c=this.getAxisMotionValue(t);let f=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(f=V4(f,this.constraints[t],this.elastic[t])),c.set(f)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:i}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,c=this.constraints;n&&La(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&a?this.constraints=H4(a.layoutBox,n):this.constraints=!1,this.elastic=Y4(i),c!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&ui(f=>{this.getAxisMotionValue(f)&&(this.constraints[f]=G4(a.layoutBox[f],this.constraints[f]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!La(t))return!1;const i=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const c=J4(i,a.root,this.visualElement.getTransformPagePoint());let f=W4(a.layout.layoutBox,c);if(n){const g=n(X4(f));this.hasMutatedConstraints=!!g,g&&(f=a_(g))}return f}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:a,dragTransition:c,dragSnapToOrigin:f,onDragTransitionEnd:g}=this.getProps(),v=this.constraints||{},y=ui(S=>{if(!Iu(S,n,this.currentDirection))return;let b=v&&v[S]||{};f&&(b={min:0,max:0});const T=a?200:1e6,I=a?40:1e7,D={type:"inertia",velocity:i?t[S]:0,bounceStiffness:T,bounceDamping:I,timeConstant:750,restDelta:1,restSpeed:10,...c,...b};return this.startAxisValueAnimation(S,D)});return Promise.all(y).then(g)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return i.start(Ep(t,i,0,n))}stopAnimation(){ui(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ui(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),i=this.visualElement.getProps(),a=i[n];return a||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){ui(n=>{const{drag:i}=this.getProps();if(!Iu(n,i,this.currentDirection))return;const{projection:a}=this.visualElement,c=this.getAxisMotionValue(n);if(a&&a.layout){const{min:f,max:g}=a.layout.layoutBox[n];c.set(t[n]-wn(f,g,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!La(n)||!i||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ui(f=>{const g=this.getAxisMotionValue(f);if(g){const v=g.get();a[f]=Z4({min:v,max:v},this.constraints[f])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),ui(f=>{if(!Iu(f,t,null))return;const g=this.getAxisMotionValue(f),{min:v,max:y}=this.constraints[f];g.set(wn(v,y,a[f]))})}addListeners(){if(!this.visualElement.current)return;eT.set(this.visualElement,this);const t=this.visualElement.current,n=xs(t,"pointerdown",v=>{const{drag:y,dragListener:S=!0}=this.getProps();y&&S&&this.start(v)}),i=()=>{const{dragConstraints:v}=this.getProps();La(v)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,c=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),i();const f=fs(window,"resize",()=>this.scalePositionWithinConstraints()),g=a.addEventListener("didUpdate",({delta:v,hasLayoutChanged:y})=>{this.isDragging&&y&&(ui(S=>{const b=this.getAxisMotionValue(S);b&&(this.originPoint[S]+=v[S].translate,b.set(b.get()+v[S].translate))}),this.visualElement.render())});return()=>{f(),n(),c(),g&&g()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:a=!1,dragConstraints:c=!1,dragElastic:f=V0,dragMomentum:g=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:a,dragConstraints:c,dragElastic:f,dragMomentum:g}}}function Iu(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function nT(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class rT extends Co{constructor(t){super(t),this.removeGroupControls=Nn,this.removeListeners=Nn,this.controls=new tT(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Nn}unmount(){this.removeGroupControls(),this.removeListeners()}}const hx=e=>(t,n)=>{e&&ln.update(()=>e(t,n))};class iT extends Co{constructor(){super(...arguments),this.removePointerDownListener=Nn}onPointerDown(t){this.session=new s_(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:d_(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:a}=this.node.getProps();return{onSessionStart:hx(t),onStart:hx(n),onMove:i,onEnd:(c,f)=>{delete this.session,a&&ln.update(()=>a(c,f))}}}mount(){this.removePointerDownListener=xs(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function sT(){const e=j.useContext(ch);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,a=j.useId();return j.useEffect(()=>i(a),[]),!t&&n?[!1,()=>n&&n(a)]:[!0]}const Ku={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function fx(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Fl={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(at.test(e))e=parseFloat(e);else return e;const n=fx(e,t.target.x),i=fx(e,t.target.y);return`${n}% ${i}%`}},oT={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,a=mo.parse(e);if(a.length>5)return i;const c=mo.createTransformer(e),f=typeof a[0]!="number"?1:0,g=n.x.scale*t.x,v=n.y.scale*t.y;a[0+f]/=g,a[1+f]/=v;const y=wn(g,v,.5);return typeof a[2+f]=="number"&&(a[2+f]/=y),typeof a[3+f]=="number"&&(a[3+f]/=y),c(a)}};class aT extends $o.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:a}=this.props,{projection:c}=t;pE(lT),c&&(n.group&&n.group.add(c),i&&i.register&&a&&i.register(c),c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),Ku.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:a,isPresent:c}=this.props,f=i.projection;return f&&(f.isPresent=c,a||t.layoutDependency!==n||n===void 0?f.willUpdate():this.safeToRemove(),t.isPresent!==c&&(c?f.promote():f.relegate()||ln.postRender(()=>{const g=f.getStack();(!g||!g.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),i&&i.deregister&&i.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function h_(e){const[t,n]=sT(),i=j.useContext(hp);return $o.createElement(aT,{...e,layoutGroup:i,switchLayoutGroup:j.useContext(av),isPresent:t,safeToRemove:n})}const lT={borderRadius:{...Fl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fl,borderTopRightRadius:Fl,borderBottomLeftRadius:Fl,borderBottomRightRadius:Fl,boxShadow:oT},f_=["TopLeft","TopRight","BottomLeft","BottomRight"],cT=f_.length,px=e=>typeof e=="string"?parseFloat(e):e,mx=e=>typeof e=="number"||at.test(e);function uT(e,t,n,i,a,c){a?(e.opacity=wn(0,n.opacity!==void 0?n.opacity:1,dT(i)),e.opacityExit=wn(t.opacity!==void 0?t.opacity:1,0,hT(i))):c&&(e.opacity=wn(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let f=0;f<cT;f++){const g=`border${f_[f]}Radius`;let v=gx(t,g),y=gx(n,g);if(v===void 0&&y===void 0)continue;v||(v=0),y||(y=0),v===0||y===0||mx(v)===mx(y)?(e[g]=Math.max(wn(px(v),px(y),i),0),(Ki.test(y)||Ki.test(v))&&(e[g]+="%")):e[g]=y}(t.rotate||n.rotate)&&(e.rotate=wn(t.rotate||0,n.rotate||0,i))}function gx(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const dT=p_(0,.5,Dv),hT=p_(.5,.95,Nn);function p_(e,t,n){return i=>i<e?0:i>t?1:n(Oc(e,t,i))}function xx(e,t){e.min=t.min,e.max=t.max}function li(e,t){xx(e.x,t.x),xx(e.y,t.y)}function yx(e,t,n,i,a){return e-=t,e=Od(e,1/n,i),a!==void 0&&(e=Od(e,1/a,i)),e}function fT(e,t=0,n=1,i=.5,a,c=e,f=e){if(Ki.test(t)&&(t=parseFloat(t),t=wn(f.min,f.max,t/100)-f.min),typeof t!="number")return;let g=wn(c.min,c.max,i);e===c&&(g-=t),e.min=yx(e.min,t,n,g,a),e.max=yx(e.max,t,n,g,a)}function wx(e,t,[n,i,a],c,f){fT(e,t[n],t[i],t[a],t.scale,c,f)}const pT=["x","scaleX","originX"],mT=["y","scaleY","originY"];function vx(e,t,n,i){wx(e.x,t,pT,n?n.x:void 0,i?i.x:void 0),wx(e.y,t,mT,n?n.y:void 0,i?i.y:void 0)}function _x(e){return e.translate===0&&e.scale===1}function m_(e){return _x(e.x)&&_x(e.y)}function gT(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function g_(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function bx(e){return Xr(e.x)/Xr(e.y)}class xT{constructor(){this.members=[]}add(t){Np(this.members,t),t.scheduleRender()}remove(t){if(Tp(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(a=>t===a);if(n===0)return!1;let i;for(let a=n;a>=0;a--){const c=this.members[a];if(c.isPresent!==!1){i=c;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Cx(e,t,n){let i="";const a=e.x.translate/t.x,c=e.y.translate/t.y;if((a||c)&&(i=`translate3d(${a}px, ${c}px, 0) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:v,rotateX:y,rotateY:S}=n;v&&(i+=`rotate(${v}deg) `),y&&(i+=`rotateX(${y}deg) `),S&&(i+=`rotateY(${S}deg) `)}const f=e.x.scale*t.x,g=e.y.scale*t.y;return(f!==1||g!==1)&&(i+=`scale(${f}, ${g})`),i||"none"}const yT=(e,t)=>e.depth-t.depth;class wT{constructor(){this.children=[],this.isDirty=!1}add(t){Np(this.children,t),this.isDirty=!0}remove(t){Tp(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(yT),this.isDirty=!1,this.children.forEach(t)}}function vT(e,t){const n=performance.now(),i=({timestamp:a})=>{const c=a-n;c>=t&&(Ss(i),e(c-t))};return ln.read(i,!0),()=>Ss(i)}function _T(e){window.MotionDebug&&window.MotionDebug.record(e)}function bT(e){return e instanceof SVGElement&&e.tagName!=="svg"}function CT(e,t,n){const i=Dr(e)?e:Ja(e);return i.start(Ep("",i,t,n)),i.animation}const Sx=["","X","Y","Z"],ST={visibility:"hidden"},Ax=1e3;let AT=0;const zo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function x_({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:a}){return class{constructor(f={},g=t==null?void 0:t()){this.id=AT++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,zo.totalNodes=zo.resolvedTargetDeltas=zo.recalculatedProjection=0,this.nodes.forEach(TT),this.nodes.forEach(OT),this.nodes.forEach(LT),this.nodes.forEach(IT),_T(zo)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=f,this.root=g?g.root||g:this,this.path=g?[...g.path,g]:[],this.parent=g,this.depth=g?g.depth+1:0;for(let v=0;v<this.path.length;v++)this.path[v].shouldResetTransform=!0;this.root===this&&(this.nodes=new wT)}addEventListener(f,g){return this.eventHandlers.has(f)||this.eventHandlers.set(f,new Ip),this.eventHandlers.get(f).add(g)}notifyListeners(f,...g){const v=this.eventHandlers.get(f);v&&v.notify(...g)}hasListeners(f){return this.eventHandlers.has(f)}mount(f,g=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=bT(f),this.instance=f;const{layoutId:v,layout:y,visualElement:S}=this.options;if(S&&!S.current&&S.mount(f),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),g&&(y||v)&&(this.isLayoutDirty=!0),e){let b;const T=()=>this.root.updateBlockedByResize=!1;e(f,()=>{this.root.updateBlockedByResize=!0,b&&b(),b=vT(T,250),Ku.hasAnimatedSinceResize&&(Ku.hasAnimatedSinceResize=!1,this.nodes.forEach(Nx))})}v&&this.root.registerSharedNode(v,this),this.options.animate!==!1&&S&&(v||y)&&this.addEventListener("didUpdate",({delta:b,hasLayoutChanged:T,hasRelativeTargetChanged:I,layout:D})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const P=this.options.transition||S.getDefaultTransition()||FT,{onLayoutAnimationStart:U,onLayoutAnimationComplete:V}=S.getProps(),O=!this.targetLayout||!g_(this.targetLayout,D)||I,k=!T&&I;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||k||T&&(O||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(b,k);const H={...Ap(P,"layout"),onPlay:U,onComplete:V};(S.shouldReduceMotion||this.options.layoutRoot)&&(H.delay=0,H.type=!1),this.startAnimation(H)}else T||Nx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=D})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const f=this.getStack();f&&f.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ss(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(PT),this.animationId++)}getTransformTemplate(){const{visualElement:f}=this.options;return f&&f.getProps().transformTemplate}willUpdate(f=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let S=0;S<this.path.length;S++){const b=this.path[S];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:g,layout:v}=this.options;if(g===void 0&&!v)return;const y=this.getTransformTemplate();this.prevTransformTemplateValue=y?y(this.latestValues,""):void 0,this.updateSnapshot(),f&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ex);return}this.isUpdating||this.nodes.forEach(MT),this.isUpdating=!1,this.nodes.forEach(RT),this.nodes.forEach(ET),this.nodes.forEach(NT),this.clearAllSnapshots();const g=performance.now();ur.delta=po(0,1e3/60,g-ur.timestamp),ur.timestamp=g,ur.isProcessing=!0,ff.update.process(ur),ff.preRender.process(ur),ff.render.process(ur),ur.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(kT),this.sharedNodes.forEach(DT)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ln.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ln.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let v=0;v<this.path.length;v++)this.path[v].updateScroll();const f=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ln(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:g}=this.options;g&&g.notify("LayoutMeasure",this.layout.layoutBox,f?f.layoutBox:void 0)}updateScroll(f="measure"){let g=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===f&&(g=!1),g&&(this.scroll={animationId:this.root.animationId,phase:f,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!a)return;const f=this.isLayoutDirty||this.shouldResetTransform,g=this.projectionDelta&&!m_(this.projectionDelta),v=this.getTransformTemplate(),y=v?v(this.latestValues,""):void 0,S=y!==this.prevTransformTemplateValue;f&&(g||Fo(this.latestValues)||S)&&(a(this.instance,y),this.shouldResetTransform=!1,this.scheduleRender())}measure(f=!0){const g=this.measurePageBox();let v=this.removeElementScroll(g);return f&&(v=this.removeTransform(v)),zT(v),{animationId:this.root.animationId,measuredBox:g,layoutBox:v,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:f}=this.options;if(!f)return Ln();const g=f.measureViewportBox(),{scroll:v}=this.root;return v&&(Ws(g.x,v.offset.x),Ws(g.y,v.offset.y)),g}removeElementScroll(f){const g=Ln();li(g,f);for(let v=0;v<this.path.length;v++){const y=this.path[v],{scroll:S,options:b}=y;if(y!==this.root&&S&&b.layoutScroll){if(S.isRoot){li(g,f);const{scroll:T}=this.root;T&&(Ws(g.x,-T.offset.x),Ws(g.y,-T.offset.y))}Ws(g.x,S.offset.x),Ws(g.y,S.offset.y)}}return g}applyTransform(f,g=!1){const v=Ln();li(v,f);for(let y=0;y<this.path.length;y++){const S=this.path[y];!g&&S.options.layoutScroll&&S.scroll&&S!==S.root&&ja(v,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),Fo(S.latestValues)&&ja(v,S.latestValues)}return Fo(this.latestValues)&&ja(v,this.latestValues),v}removeTransform(f){const g=Ln();li(g,f);for(let v=0;v<this.path.length;v++){const y=this.path[v];if(!y.instance||!Fo(y.latestValues))continue;H0(y.latestValues)&&y.updateSnapshot();const S=Ln(),b=y.measurePageBox();li(S,b),vx(g,y.latestValues,y.snapshot?y.snapshot.layoutBox:void 0,S)}return Fo(this.latestValues)&&vx(g,this.latestValues),g}setTargetDelta(f){this.targetDelta=f,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(f){this.options={...this.options,...f,crossfade:f.crossfade!==void 0?f.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ur.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(f=!1){var g;const v=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=v.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=v.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=v.isSharedProjectionDirty);const y=!!this.resumingFrom||this!==v;if(!(f||y&&this.isSharedProjectionDirty||this.isProjectionDirty||!((g=this.parent)===null||g===void 0)&&g.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:b,layoutId:T}=this.options;if(!(!this.layout||!(b||T))){if(this.resolvedRelativeTargetAt=ur.timestamp,!this.targetDelta&&!this.relativeTarget){const I=this.getClosestProjectingParent();I&&I.layout&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ln(),this.relativeTargetOrigin=Ln(),ac(this.relativeTargetOrigin,this.layout.layoutBox,I.layout.layoutBox),li(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ln(),this.targetWithTransforms=Ln()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),U4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):li(this.target,this.layout.layoutBox),c_(this.target,this.targetDelta)):li(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const I=this.getClosestProjectingParent();I&&!!I.resumingFrom==!!this.resumingFrom&&!I.options.layoutScroll&&I.target&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ln(),this.relativeTargetOrigin=Ln(),ac(this.relativeTargetOrigin,this.target,I.target),li(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}zo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||H0(this.parent.latestValues)||l_(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var f;const g=this.getLead(),v=!!this.resumingFrom||this!==g;let y=!0;if((this.isProjectionDirty||!((f=this.parent)===null||f===void 0)&&f.isProjectionDirty)&&(y=!1),v&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(y=!1),this.resolvedRelativeTargetAt===ur.timestamp&&(y=!1),y)return;const{layout:S,layoutId:b}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(S||b))return;li(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,I=this.treeScale.y;K4(this.layoutCorrected,this.treeScale,this.path,v),g.layout&&!g.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(g.target=g.layout.layoutBox);const{target:D}=g;if(!D){this.projectionTransform&&(this.projectionDelta=Da(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Da(),this.projectionDeltaWithTransform=Da());const P=this.projectionTransform;oc(this.projectionDelta,this.layoutCorrected,D,this.latestValues),this.projectionTransform=Cx(this.projectionDelta,this.treeScale),(this.projectionTransform!==P||this.treeScale.x!==T||this.treeScale.y!==I)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",D)),zo.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(f=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),f){const g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(f,g=!1){const v=this.snapshot,y=v?v.latestValues:{},S={...this.latestValues},b=Da();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!g;const T=Ln(),I=v?v.source:void 0,D=this.layout?this.layout.source:void 0,P=I!==D,U=this.getStack(),V=!U||U.members.length<=1,O=!!(P&&!V&&this.options.crossfade===!0&&!this.path.some(BT));this.animationProgress=0;let k;this.mixTargetDelta=H=>{const X=H/1e3;Tx(b.x,f.x,X),Tx(b.y,f.y,X),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ac(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),jT(this.relativeTarget,this.relativeTargetOrigin,T,X),k&&gT(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=Ln()),li(k,this.relativeTarget)),P&&(this.animationValues=S,uT(S,y,this.latestValues,X,O,V)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=X},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(f){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ss(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ln.update(()=>{Ku.hasAnimatedSinceResize=!0,this.currentAnimation=CT(0,Ax,{...f,onUpdate:g=>{this.mixTargetDelta(g),f.onUpdate&&f.onUpdate(g)},onComplete:()=>{f.onComplete&&f.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const f=this.getStack();f&&f.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ax),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const f=this.getLead();let{targetWithTransforms:g,target:v,layout:y,latestValues:S}=f;if(!(!g||!v||!y)){if(this!==f&&this.layout&&y&&y_(this.options.animationType,this.layout.layoutBox,y.layoutBox)){v=this.target||Ln();const b=Xr(this.layout.layoutBox.x);v.x.min=f.target.x.min,v.x.max=v.x.min+b;const T=Xr(this.layout.layoutBox.y);v.y.min=f.target.y.min,v.y.max=v.y.min+T}li(g,v),ja(g,S),oc(this.projectionDeltaWithTransform,this.layoutCorrected,g,S)}}registerSharedNode(f,g){this.sharedNodes.has(f)||this.sharedNodes.set(f,new xT),this.sharedNodes.get(f).add(g);const y=g.options.initialPromotionConfig;g.promote({transition:y?y.transition:void 0,preserveFollowOpacity:y&&y.shouldPreserveFollowOpacity?y.shouldPreserveFollowOpacity(g):void 0})}isLead(){const f=this.getStack();return f?f.lead===this:!0}getLead(){var f;const{layoutId:g}=this.options;return g?((f=this.getStack())===null||f===void 0?void 0:f.lead)||this:this}getPrevLead(){var f;const{layoutId:g}=this.options;return g?(f=this.getStack())===null||f===void 0?void 0:f.prevLead:void 0}getStack(){const{layoutId:f}=this.options;if(f)return this.root.sharedNodes.get(f)}promote({needsReset:f,transition:g,preserveFollowOpacity:v}={}){const y=this.getStack();y&&y.promote(this,v),f&&(this.projectionDelta=void 0,this.needsReset=!0),g&&this.setOptions({transition:g})}relegate(){const f=this.getStack();return f?f.relegate(this):!1}resetRotation(){const{visualElement:f}=this.options;if(!f)return;let g=!1;const{latestValues:v}=f;if((v.rotate||v.rotateX||v.rotateY||v.rotateZ)&&(g=!0),!g)return;const y={};for(let S=0;S<Sx.length;S++){const b="rotate"+Sx[S];v[b]&&(y[b]=v[b],f.setStaticValue(b,0))}f.render();for(const S in y)f.setStaticValue(S,y[S]);f.scheduleRender()}getProjectionStyles(f){var g,v;if(!this.instance||this.isSVG)return;if(!this.isVisible)return ST;const y={visibility:""},S=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,y.opacity="",y.pointerEvents=qu(f==null?void 0:f.pointerEvents)||"",y.transform=S?S(this.latestValues,""):"none",y;const b=this.getLead();if(!this.projectionDelta||!this.layout||!b.target){const P={};return this.options.layoutId&&(P.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,P.pointerEvents=qu(f==null?void 0:f.pointerEvents)||""),this.hasProjected&&!Fo(this.latestValues)&&(P.transform=S?S({},""):"none",this.hasProjected=!1),P}const T=b.animationValues||b.latestValues;this.applyTransformsToTarget(),y.transform=Cx(this.projectionDeltaWithTransform,this.treeScale,T),S&&(y.transform=S(T,y.transform));const{x:I,y:D}=this.projectionDelta;y.transformOrigin=`${I.origin*100}% ${D.origin*100}% 0`,b.animationValues?y.opacity=b===this?(v=(g=T.opacity)!==null&&g!==void 0?g:this.latestValues.opacity)!==null&&v!==void 0?v:1:this.preserveOpacity?this.latestValues.opacity:T.opacityExit:y.opacity=b===this?T.opacity!==void 0?T.opacity:"":T.opacityExit!==void 0?T.opacityExit:0;for(const P in Ed){if(T[P]===void 0)continue;const{correct:U,applyTo:V}=Ed[P],O=y.transform==="none"?T[P]:U(T[P],b);if(V){const k=V.length;for(let H=0;H<k;H++)y[V[H]]=O}else y[P]=O}return this.options.layoutId&&(y.pointerEvents=b===this?qu(f==null?void 0:f.pointerEvents)||"":"none"),y}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(f=>{var g;return(g=f.currentAnimation)===null||g===void 0?void 0:g.stop()}),this.root.nodes.forEach(Ex),this.root.sharedNodes.clear()}}}function ET(e){e.updateLayout()}function NT(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:a}=e.layout,{animationType:c}=e.options,f=n.source!==e.layout.source;c==="size"?ui(b=>{const T=f?n.measuredBox[b]:n.layoutBox[b],I=Xr(T);T.min=i[b].min,T.max=T.min+I}):y_(c,n.layoutBox,i)&&ui(b=>{const T=f?n.measuredBox[b]:n.layoutBox[b],I=Xr(i[b]);T.max=T.min+I,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[b].max=e.relativeTarget[b].min+I)});const g=Da();oc(g,i,n.layoutBox);const v=Da();f?oc(v,e.applyTransform(a,!0),n.measuredBox):oc(v,i,n.layoutBox);const y=!m_(g);let S=!1;if(!e.resumeFrom){const b=e.getClosestProjectingParent();if(b&&!b.resumeFrom){const{snapshot:T,layout:I}=b;if(T&&I){const D=Ln();ac(D,n.layoutBox,T.layoutBox);const P=Ln();ac(P,i,I.layoutBox),g_(D,P)||(S=!0),b.options.layoutRoot&&(e.relativeTarget=P,e.relativeTargetOrigin=D,e.relativeParent=b)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:v,layoutDelta:g,hasLayoutChanged:y,hasRelativeTargetChanged:S})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function TT(e){zo.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function IT(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function kT(e){e.clearSnapshot()}function Ex(e){e.clearMeasurements()}function MT(e){e.isLayoutDirty=!1}function RT(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Nx(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function OT(e){e.resolveTargetDelta()}function LT(e){e.calcProjection()}function PT(e){e.resetRotation()}function DT(e){e.removeLeadSnapshot()}function Tx(e,t,n){e.translate=wn(t.translate,0,n),e.scale=wn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Ix(e,t,n,i){e.min=wn(t.min,n.min,i),e.max=wn(t.max,n.max,i)}function jT(e,t,n,i){Ix(e.x,t.x,n.x,i),Ix(e.y,t.y,n.y,i)}function BT(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const FT={duration:.45,ease:[.4,0,.1,1]},kx=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Mx=kx("applewebkit/")&&!kx("chrome/")?Math.round:Nn;function Rx(e){e.min=Mx(e.min),e.max=Mx(e.max)}function zT(e){Rx(e.x),Rx(e.y)}function y_(e,t,n){return e==="position"||e==="preserve-aspect"&&!U0(bx(t),bx(n),.2)}const UT=x_({attachResizeListener:(e,t)=>fs(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Sf={current:void 0},w_=x_({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Sf.current){const e=new UT({});e.mount(window),e.setOptions({layoutScroll:!0}),Sf.current=e}return Sf.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),VT={pan:{Feature:iT},drag:{Feature:rT,ProjectionNode:w_,MeasureLayout:h_}},HT=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function WT(e){const t=HT.exec(e);if(!t)return[,];const[,n,i]=t;return[n,i]}function Z0(e,t,n=1){const[i,a]=WT(e);if(!i)return;const c=window.getComputedStyle(t).getPropertyValue(i);if(c){const f=c.trim();return t_(f)?parseFloat(f):f}else return L0(a)?Z0(a,t,n+1):a}function ZT(e,{...t},n){const i=e.current;if(!(i instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(a=>{const c=a.get();if(!L0(c))return;const f=Z0(c,i);f&&a.set(f)});for(const a in t){const c=t[a];if(!L0(c))continue;const f=Z0(c,i);f&&(t[a]=f,n||(n={}),n[a]===void 0&&(n[a]=c))}return{target:t,transitionEnd:n}}const GT=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),v_=e=>GT.has(e),YT=e=>Object.keys(e).some(v_),Ox=e=>e===ca||e===at,Lx=(e,t)=>parseFloat(e.split(", ")[t]),Px=(e,t)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const a=i.match(/^matrix3d\((.+)\)$/);if(a)return Lx(a[1],t);{const c=i.match(/^matrix\((.+)\)$/);return c?Lx(c[1],e):0}},XT=new Set(["x","y","z"]),qT=Uc.filter(e=>!XT.has(e));function KT(e){const t=[];return qT.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const el={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Px(4,13),y:Px(5,14)};el.translateX=el.x;el.translateY=el.y;const QT=(e,t,n)=>{const i=t.measureViewportBox(),a=t.current,c=getComputedStyle(a),{display:f}=c,g={};f==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(y=>{g[y]=el[y](i,c)}),t.render();const v=t.measureViewportBox();return n.forEach(y=>{const S=t.getValue(y);S&&S.jump(g[y]),e[y]=el[y](v,c)}),e},$T=(e,t,n={},i={})=>{t={...t},i={...i};const a=Object.keys(t).filter(v_);let c=[],f=!1;const g=[];if(a.forEach(v=>{const y=e.getValue(v);if(!e.hasValue(v))return;let S=n[v],b=Bl(S);const T=t[v];let I;if(Td(T)){const D=T.length,P=T[0]===null?1:0;S=T[P],b=Bl(S);for(let U=P;U<D&&T[U]!==null;U++)I?vp(Bl(T[U])===I):I=Bl(T[U])}else I=Bl(T);if(b!==I)if(Ox(b)&&Ox(I)){const D=y.get();typeof D=="string"&&y.set(parseFloat(D)),typeof T=="string"?t[v]=parseFloat(T):Array.isArray(T)&&I===at&&(t[v]=T.map(parseFloat))}else b!=null&&b.transform&&(I!=null&&I.transform)&&(S===0||T===0)?S===0?y.set(I.transform(S)):t[v]=b.transform(T):(f||(c=KT(e),f=!0),g.push(v),i[v]=i[v]!==void 0?i[v]:t[v],y.jump(T))}),g.length){const v=g.indexOf("height")>=0?window.pageYOffset:null,y=QT(t,e,g);return c.length&&c.forEach(([S,b])=>{e.getValue(S).set(b)}),e.render(),uh&&v!==null&&window.scrollTo({top:v}),{target:y,transitionEnd:i}}else return{target:t,transitionEnd:i}};function JT(e,t,n,i){return YT(t)?$T(e,t,n,i):{target:t,transitionEnd:i}}const eI=(e,t,n,i)=>{const a=ZT(e,t,i);return t=a.target,i=a.transitionEnd,JT(e,t,n,i)},G0={current:null},__={current:!1};function tI(){if(__.current=!0,!!uh)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>G0.current=e.matches;e.addListener(t),t()}else G0.current=!1}function nI(e,t,n){const{willChange:i}=t;for(const a in t){const c=t[a],f=n[a];if(Dr(c))e.addValue(a,c),Rd(i)&&i.add(a);else if(Dr(f))e.addValue(a,Ja(c,{owner:e})),Rd(i)&&i.remove(a);else if(f!==c)if(e.hasValue(a)){const g=e.getValue(a);!g.hasAnimated&&g.set(c)}else{const g=e.getStaticValue(a);e.addValue(a,Ja(g!==void 0?g:c,{owner:e}))}}for(const a in n)t[a]===void 0&&e.removeValue(a);return t}const Dx=new WeakMap,b_=Object.keys(Rc),rI=b_.length,jx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],iI=dp.length;class sI{constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:a,visualState:c},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ln.render(this.render,!1,!0);const{latestValues:g,renderState:v}=c;this.latestValues=g,this.baseTarget={...g},this.initialValues=n.initial?{...g}:{},this.renderState=v,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=f,this.isControllingVariants=hh(n),this.isVariantNode=ov(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:y,...S}=this.scrapeMotionValuesFromProps(n,{});for(const b in S){const T=S[b];g[b]!==void 0&&Dr(T)&&(T.set(g[b],!1),Rd(y)&&y.add(b))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,Dx.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),__.current||tI(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:G0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Dx.delete(this.current),this.projection&&this.projection.unmount(),Ss(this.notifyUpdate),Ss(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const i=la.has(t),a=n.on("change",f=>{this.latestValues[t]=f,this.props.onUpdate&&ln.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),c=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{a(),c()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},i,a,c){let f,g;for(let v=0;v<rI;v++){const y=b_[v],{isEnabled:S,Feature:b,ProjectionNode:T,MeasureLayout:I}=Rc[y];T&&(f=T),S(n)&&(!this.features[y]&&b&&(this.features[y]=new b(this)),I&&(g=I))}if((this.type==="html"||this.type==="svg")&&!this.projection&&f){this.projection=new f(this.latestValues,this.parent&&this.parent.projection);const{layoutId:v,layout:y,drag:S,dragConstraints:b,layoutScroll:T,layoutRoot:I}=n;this.projection.setOptions({layoutId:v,layout:y,alwaysMeasureLayout:!!S||b&&La(b),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof y=="string"?y:"both",initialPromotionConfig:c,layoutScroll:T,layoutRoot:I})}return g}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ln()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<jx.length;i++){const a=jx[i];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const c=t["on"+a];c&&(this.propEventSubscriptions[a]=this.on(a,c))}this.prevMotionValues=nI(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<iI;i++){const a=dp[i],c=this.props[a];(Mc(c)||c===!1)&&(n[a]=c)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=Ja(n,{owner:this}),this.addValue(t,i)),i}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:i}=this.props,a=typeof i=="string"||typeof i=="object"?(n=wp(this.props,i))===null||n===void 0?void 0:n[t]:void 0;if(i&&a!==void 0)return a;const c=this.getBaseTargetFromProps(this.props,t);return c!==void 0&&!Dr(c)?c:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Ip),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class C_ extends sI{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...i},{transformValues:a},c){let f=b4(i,t||{},this);if(a&&(n&&(n=a(n)),i&&(i=a(i)),f&&(f=a(f))),c){v4(this,i,f);const g=eI(this,i,f,n);n=g.transitionEnd,i=g.target}return{transition:t,transitionEnd:n,...i}}}function oI(e){return window.getComputedStyle(e)}class aI extends C_{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(la.has(n)){const i=Sp(n);return i&&i.default||0}else{const i=oI(t),a=(uv(n)?i.getPropertyValue(n):i[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:n}){return u_(t,n)}build(t,n,i,a){pp(t,n,i,a.transformTemplate)}scrapeMotionValuesFromProps(t,n){return yp(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Dr(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,i,a){gv(t,n,i,a)}}class lI extends C_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(la.has(n)){const i=Sp(n);return i&&i.default||0}return n=xv.has(n)?n:cp(n),t.getAttribute(n)}measureInstanceViewportBox(){return Ln()}scrapeMotionValuesFromProps(t,n){return wv(t,n)}build(t,n,i,a){gp(t,n,i,this.isSVGTag,a.transformTemplate)}renderInstance(t,n,i,a){yv(t,n,i,a)}mount(t){this.isSVGTag=xp(t.tagName),super.mount(t)}}const cI=(e,t)=>fp(e)?new lI(t,{enableHardwareAcceleration:!1}):new aI(t,{enableHardwareAcceleration:!0}),uI={layout:{ProjectionNode:w_,MeasureLayout:h_}},dI={...j4,...rN,...VT,...uI},tt=hE((e,t)=>WE(e,t,dI,cI));function S_(){const e=j.useRef(!1);return lp(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function hI(){const e=S_(),[t,n]=j.useState(0),i=j.useCallback(()=>{e.current&&n(t+1)},[t]);return[j.useCallback(()=>ln.postRender(i),[i]),t]}class fI extends j.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function pI({children:e,isPresent:t}){const n=j.useId(),i=j.useRef(null),a=j.useRef({width:0,height:0,top:0,left:0});return j.useInsertionEffect(()=>{const{width:c,height:f,top:g,left:v}=a.current;if(t||!i.current||!c||!f)return;i.current.dataset.motionPopId=n;const y=document.createElement("style");return document.head.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${f}px !important;
            top: ${g}px !important;
            left: ${v}px !important;
          }
        `),()=>{document.head.removeChild(y)}},[t]),j.createElement(fI,{isPresent:t,childRef:i,sizeRef:a},j.cloneElement(e,{ref:i}))}const Af=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:a,presenceAffectsLayout:c,mode:f})=>{const g=vv(mI),v=j.useId(),y=j.useMemo(()=>({id:v,initial:t,isPresent:n,custom:a,onExitComplete:S=>{g.set(S,!0);for(const b of g.values())if(!b)return;i&&i()},register:S=>(g.set(S,!1),()=>g.delete(S))}),c?void 0:[n]);return j.useMemo(()=>{g.forEach((S,b)=>g.set(b,!1))},[n]),j.useEffect(()=>{!n&&!g.size&&i&&i()},[n]),f==="popLayout"&&(e=j.createElement(pI,{isPresent:n},e)),j.createElement(ch.Provider,{value:y},e)};function mI(){return new Map}function gI(e){return j.useEffect(()=>()=>e(),[])}const Uo=e=>e.key||"";function xI(e,t){e.forEach(n=>{const i=Uo(n);t.set(i,n)})}function yI(e){const t=[];return j.Children.forEach(e,n=>{j.isValidElement(n)&&t.push(n)}),t}const ws=({children:e,custom:t,initial:n=!0,onExitComplete:i,exitBeforeEnter:a,presenceAffectsLayout:c=!0,mode:f="sync"})=>{const g=j.useContext(hp).forceRender||hI()[0],v=S_(),y=yI(e);let S=y;const b=j.useRef(new Map).current,T=j.useRef(S),I=j.useRef(new Map).current,D=j.useRef(!0);if(lp(()=>{D.current=!1,xI(y,I),T.current=S}),gI(()=>{D.current=!0,I.clear(),b.clear()}),D.current)return j.createElement(j.Fragment,null,S.map(O=>j.createElement(Af,{key:Uo(O),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:c,mode:f},O)));S=[...S];const P=T.current.map(Uo),U=y.map(Uo),V=P.length;for(let O=0;O<V;O++){const k=P[O];U.indexOf(k)===-1&&!b.has(k)&&b.set(k,void 0)}return f==="wait"&&b.size&&(S=[]),b.forEach((O,k)=>{if(U.indexOf(k)!==-1)return;const H=I.get(k);if(!H)return;const X=P.indexOf(k);let G=O;if(!G){const Z=()=>{b.delete(k);const J=Array.from(I.keys()).filter(z=>!U.includes(z));if(J.forEach(z=>I.delete(z)),T.current=y.filter(z=>{const te=Uo(z);return te===k||J.includes(te)}),!b.size){if(v.current===!1)return;g(),i&&i()}};G=j.createElement(Af,{key:Uo(H),isPresent:!1,onExitComplete:Z,custom:t,presenceAffectsLayout:c,mode:f},H),b.set(k,G)}S.splice(X,0,G)}),S=S.map(O=>{const k=O.key;return b.has(k)?O:j.createElement(Af,{key:Uo(O),isPresent:!0,presenceAffectsLayout:c,mode:f},O)}),j.createElement(j.Fragment,null,b.size?S:S.map(O=>j.cloneElement(O)))};var wI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const vI=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Je=(e,t)=>{const n=j.forwardRef(({color:i="currentColor",size:a=24,strokeWidth:c=2,absoluteStrokeWidth:f,children:g,...v},y)=>j.createElement("svg",{ref:y,...wI,width:a,height:a,stroke:i,strokeWidth:f?Number(c)*24/Number(a):c,className:`lucide lucide-${vI(e)}`,...v},[...t.map(([S,b])=>j.createElement(S,b)),...(Array.isArray(g)?g:[g])||[]]));return n.displayName=`${e}`,n},A_=Je("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),E_=Je("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),go=Je("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Bx=Je("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),N_=Je("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Lc=Je("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),T_=Je("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),_I=Je("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),gh=Je("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Qu=Je("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),I_=Je("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),bI=Je("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),lo=Je("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ku=Je("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),CI=Je("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),SI=Je("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),AI=Je("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),EI=Je("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),NI=Je("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),k_=Je("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),TI=Je("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),II=Je("Keyboard",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2",key:"15u882"}],["path",{d:"M6 8h.001",key:"1ej0i3"}],["path",{d:"M10 8h.001",key:"1x2st2"}],["path",{d:"M14 8h.001",key:"1vkmyp"}],["path",{d:"M18 8h.001",key:"kfsenl"}],["path",{d:"M8 12h.001",key:"1sjpby"}],["path",{d:"M12 12h.001",key:"al75ts"}],["path",{d:"M16 12h.001",key:"931bgk"}],["path",{d:"M7 16h10",key:"wp8him"}]]),M_=Je("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Qn=Je("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),R_=Je("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),kI=Je("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),O_=Je("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),tl=Je("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),co=Je("MapPinned",[["path",{d:"M18 8c0 4.5-6 9-6 9s-6-4.5-6-9a6 6 0 0 1 12 0",key:"yrbn30"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.835 14H5a1 1 0 0 0-.9.7l-2 6c-.1.1-.1.2-.1.3 0 .6.4 1 1 1h18c.6 0 1-.4 1-1 0-.1 0-.2-.1-.3l-2-6a1 1 0 0 0-.9-.7h-3.835",key:"112zkj"}]]),L_=Je("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]),MI=Je("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),RI=Je("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),P_=Je("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),Fx=Je("PackageSearch",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]),As=Je("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Ld=Je("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),OI=Je("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),lc=Je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Qi=Je("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),zx=Je("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),LI=Je("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]),nl=Je("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),PI=Je("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),DI=Je("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),jI=Je("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),D_=Je("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),j_=Je("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Pd=Je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Dd=Je("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),kp=Je("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]),Y0=Je("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),ua=Je("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),B_=Je("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),BI=Je("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Zc=Je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),F_=Je("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),z_="Admin",U_="Manager",V_="Dispatcher",H_="Warehouse",W_="Driver",Z_="Support",G_="Finance",Y_="Viewer",X_="Recipient",FI=[z_,U_,V_,H_,W_,Z_,G_,Y_,X_],Bs="status-options:read",Ti="stats:read",Tr="shipments:read",as="shipment:read",Ba="shipments:assign",Do="label:read",Vo="awb:update",hi="logs:read:self",Xs="logs:read:all",di="notifications:read",zI="drivers:sync",uo="users:read",Mp="users:write",UI={[z_]:new Set([Bs,Ti,Tr,as,Ba,Do,Vo,Xs,hi,di,zI,uo,Mp]),[U_]:new Set([Bs,Ti,Tr,as,Ba,Do,Vo,Xs,hi,di,uo]),[V_]:new Set([Bs,Ti,Tr,as,Ba,Do,Vo,Xs,hi,di,uo]),[H_]:new Set([Bs,Ti,Tr,as,Ba,Do,Vo,hi,di]),[W_]:new Set([Bs,Ti,Tr,as,Do,Vo,hi,di]),[Z_]:new Set([Bs,Ti,Tr,as,Do,Xs,hi,di]),[G_]:new Set([Bs,Ti,Tr,as,Xs,hi,di]),[Y_]:new Set([Bs,Ti,Tr,as,Do,hi,di]),[X_]:new Set([Tr,as,di])},VI=e=>{const t=String(e||"").trim();if(!t)return t;const n=t.toUpperCase();for(const i of FI)if(i.toUpperCase()===n)return i;return t},X0=e=>{const t=VI(e),n=UI[t];return n?Array.from(n).sort():[]},Ux=e=>e?e instanceof Set?e:Array.isArray(e)?new Set(e.filter(Boolean)):new Set:new Set,q_=e=>{const t=Ux(e==null?void 0:e.permissions);if(t.size>0)return t.has(Xs)&&t.add(hi),t;const n=Ux(X0(e==null?void 0:e.role));return n.has(Xs)&&n.add(hi),n},Vn=(e,t)=>t?q_(e).has(t):!0,HI=(e,t=[])=>{const n=Array.isArray(t)?t.filter(Boolean):[];if(n.length===0)return!0;const i=q_(e);return n.every(a=>i.has(a))};function K_(e,t){return function(){return e.apply(t,arguments)}}const{toString:WI}=Object.prototype,{getPrototypeOf:Rp}=Object,{iterator:xh,toStringTag:Q_}=Symbol,yh=(e=>t=>{const n=WI.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Pi=e=>(e=e.toLowerCase(),t=>yh(t)===e),wh=e=>t=>typeof t===e,{isArray:dl}=Array,rl=wh("undefined");function Gc(e){return e!==null&&!rl(e)&&e.constructor!==null&&!rl(e.constructor)&&Lr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const $_=Pi("ArrayBuffer");function ZI(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&$_(e.buffer),t}const GI=wh("string"),Lr=wh("function"),J_=wh("number"),Yc=e=>e!==null&&typeof e=="object",YI=e=>e===!0||e===!1,$u=e=>{if(yh(e)!=="object")return!1;const t=Rp(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Q_ in e)&&!(xh in e)},XI=e=>{if(!Yc(e)||Gc(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},qI=Pi("Date"),KI=Pi("File"),QI=Pi("Blob"),$I=Pi("FileList"),JI=e=>Yc(e)&&Lr(e.pipe),e8=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Lr(e.append)&&((t=yh(e))==="formdata"||t==="object"&&Lr(e.toString)&&e.toString()==="[object FormData]"))},t8=Pi("URLSearchParams"),[n8,r8,i8,s8]=["ReadableStream","Request","Response","Headers"].map(Pi),o8=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xc(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,a;if(typeof e!="object"&&(e=[e]),dl(e))for(i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else{if(Gc(e))return;const c=n?Object.getOwnPropertyNames(e):Object.keys(e),f=c.length;let g;for(i=0;i<f;i++)g=c[i],t.call(null,e[g],g,e)}}function eb(e,t){if(Gc(e))return null;t=t.toLowerCase();const n=Object.keys(e);let i=n.length,a;for(;i-- >0;)if(a=n[i],t===a.toLowerCase())return a;return null}const Yo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,tb=e=>!rl(e)&&e!==Yo;function q0(){const{caseless:e,skipUndefined:t}=tb(this)&&this||{},n={},i=(a,c)=>{if(c==="__proto__"||c==="constructor"||c==="prototype")return;const f=e&&eb(n,c)||c;$u(n[f])&&$u(a)?n[f]=q0(n[f],a):$u(a)?n[f]=q0({},a):dl(a)?n[f]=a.slice():(!t||!rl(a))&&(n[f]=a)};for(let a=0,c=arguments.length;a<c;a++)arguments[a]&&Xc(arguments[a],i);return n}const a8=(e,t,n,{allOwnKeys:i}={})=>(Xc(t,(a,c)=>{n&&Lr(a)?Object.defineProperty(e,c,{value:K_(a,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,c,{value:a,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:i}),e),l8=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),c8=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},u8=(e,t,n,i)=>{let a,c,f;const g={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),c=a.length;c-- >0;)f=a[c],(!i||i(f,e,t))&&!g[f]&&(t[f]=e[f],g[f]=!0);e=n!==!1&&Rp(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},d8=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},h8=e=>{if(!e)return null;if(dl(e))return e;let t=e.length;if(!J_(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},f8=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Rp(Uint8Array)),p8=(e,t)=>{const i=(e&&e[xh]).call(e);let a;for(;(a=i.next())&&!a.done;){const c=a.value;t.call(e,c[0],c[1])}},m8=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},g8=Pi("HTMLFormElement"),x8=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,a){return i.toUpperCase()+a}),Vx=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),y8=Pi("RegExp"),nb=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};Xc(n,(a,c)=>{let f;(f=t(a,c,e))!==!1&&(i[c]=f||a)}),Object.defineProperties(e,i)},w8=e=>{nb(e,(t,n)=>{if(Lr(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(Lr(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},v8=(e,t)=>{const n={},i=a=>{a.forEach(c=>{n[c]=!0})};return dl(e)?i(e):i(String(e).split(t)),n},_8=()=>{},b8=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function C8(e){return!!(e&&Lr(e.append)&&e[Q_]==="FormData"&&e[xh])}const S8=e=>{const t=new Array(10),n=(i,a)=>{if(Yc(i)){if(t.indexOf(i)>=0)return;if(Gc(i))return i;if(!("toJSON"in i)){t[a]=i;const c=dl(i)?[]:{};return Xc(i,(f,g)=>{const v=n(f,a+1);!rl(v)&&(c[g]=v)}),t[a]=void 0,c}}return i};return n(e,0)},A8=Pi("AsyncFunction"),E8=e=>e&&(Yc(e)||Lr(e))&&Lr(e.then)&&Lr(e.catch),rb=((e,t)=>e?setImmediate:t?((n,i)=>(Yo.addEventListener("message",({source:a,data:c})=>{a===Yo&&c===n&&i.length&&i.shift()()},!1),a=>{i.push(a),Yo.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Lr(Yo.postMessage)),N8=typeof queueMicrotask<"u"?queueMicrotask.bind(Yo):typeof process<"u"&&process.nextTick||rb,T8=e=>e!=null&&Lr(e[xh]),he={isArray:dl,isArrayBuffer:$_,isBuffer:Gc,isFormData:e8,isArrayBufferView:ZI,isString:GI,isNumber:J_,isBoolean:YI,isObject:Yc,isPlainObject:$u,isEmptyObject:XI,isReadableStream:n8,isRequest:r8,isResponse:i8,isHeaders:s8,isUndefined:rl,isDate:qI,isFile:KI,isBlob:QI,isRegExp:y8,isFunction:Lr,isStream:JI,isURLSearchParams:t8,isTypedArray:f8,isFileList:$I,forEach:Xc,merge:q0,extend:a8,trim:o8,stripBOM:l8,inherits:c8,toFlatObject:u8,kindOf:yh,kindOfTest:Pi,endsWith:d8,toArray:h8,forEachEntry:p8,matchAll:m8,isHTMLForm:g8,hasOwnProperty:Vx,hasOwnProp:Vx,reduceDescriptors:nb,freezeMethods:w8,toObjectSet:v8,toCamelCase:x8,noop:_8,toFiniteNumber:b8,findKey:eb,global:Yo,isContextDefined:tb,isSpecCompliantForm:C8,toJSONObject:S8,isAsyncFn:A8,isThenable:E8,setImmediate:rb,asap:N8,isIterable:T8};let ct=class ib extends Error{static from(t,n,i,a,c,f){const g=new ib(t.message,n||t.code,i,a,c);return g.cause=t,g.name=t.name,f&&Object.assign(g,f),g}constructor(t,n,i,a,c){super(t),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),i&&(this.config=i),a&&(this.request=a),c&&(this.response=c,this.status=c.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:he.toJSONObject(this.config),code:this.code,status:this.status}}};ct.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";ct.ERR_BAD_OPTION="ERR_BAD_OPTION";ct.ECONNABORTED="ECONNABORTED";ct.ETIMEDOUT="ETIMEDOUT";ct.ERR_NETWORK="ERR_NETWORK";ct.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";ct.ERR_DEPRECATED="ERR_DEPRECATED";ct.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";ct.ERR_BAD_REQUEST="ERR_BAD_REQUEST";ct.ERR_CANCELED="ERR_CANCELED";ct.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";ct.ERR_INVALID_URL="ERR_INVALID_URL";const I8=null;function K0(e){return he.isPlainObject(e)||he.isArray(e)}function sb(e){return he.endsWith(e,"[]")?e.slice(0,-2):e}function Hx(e,t,n){return e?e.concat(t).map(function(a,c){return a=sb(a),!n&&c?"["+a+"]":a}).join(n?".":""):t}function k8(e){return he.isArray(e)&&!e.some(K0)}const M8=he.toFlatObject(he,{},null,function(t){return/^is[A-Z]/.test(t)});function vh(e,t,n){if(!he.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=he.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(P,U){return!he.isUndefined(U[P])});const i=n.metaTokens,a=n.visitor||S,c=n.dots,f=n.indexes,v=(n.Blob||typeof Blob<"u"&&Blob)&&he.isSpecCompliantForm(t);if(!he.isFunction(a))throw new TypeError("visitor must be a function");function y(D){if(D===null)return"";if(he.isDate(D))return D.toISOString();if(he.isBoolean(D))return D.toString();if(!v&&he.isBlob(D))throw new ct("Blob is not supported. Use a Buffer instead.");return he.isArrayBuffer(D)||he.isTypedArray(D)?v&&typeof Blob=="function"?new Blob([D]):Buffer.from(D):D}function S(D,P,U){let V=D;if(D&&!U&&typeof D=="object"){if(he.endsWith(P,"{}"))P=i?P:P.slice(0,-2),D=JSON.stringify(D);else if(he.isArray(D)&&k8(D)||(he.isFileList(D)||he.endsWith(P,"[]"))&&(V=he.toArray(D)))return P=sb(P),V.forEach(function(k,H){!(he.isUndefined(k)||k===null)&&t.append(f===!0?Hx([P],H,c):f===null?P:P+"[]",y(k))}),!1}return K0(D)?!0:(t.append(Hx(U,P,c),y(D)),!1)}const b=[],T=Object.assign(M8,{defaultVisitor:S,convertValue:y,isVisitable:K0});function I(D,P){if(!he.isUndefined(D)){if(b.indexOf(D)!==-1)throw Error("Circular reference detected in "+P.join("."));b.push(D),he.forEach(D,function(V,O){(!(he.isUndefined(V)||V===null)&&a.call(t,V,he.isString(O)?O.trim():O,P,T))===!0&&I(V,P?P.concat(O):[O])}),b.pop()}}if(!he.isObject(e))throw new TypeError("data must be an object");return I(e),t}function Wx(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function Op(e,t){this._pairs=[],e&&vh(e,this,t)}const ob=Op.prototype;ob.append=function(t,n){this._pairs.push([t,n])};ob.toString=function(t){const n=t?function(i){return t.call(this,i,Wx)}:Wx;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function R8(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ab(e,t,n){if(!t)return e;const i=n&&n.encode||R8,a=he.isFunction(n)?{serialize:n}:n,c=a&&a.serialize;let f;if(c?f=c(t,a):f=he.isURLSearchParams(t)?t.toString():new Op(t,a).toString(i),f){const g=e.indexOf("#");g!==-1&&(e=e.slice(0,g)),e+=(e.indexOf("?")===-1?"?":"&")+f}return e}class Zx{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){he.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Lp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},O8=typeof URLSearchParams<"u"?URLSearchParams:Op,L8=typeof FormData<"u"?FormData:null,P8=typeof Blob<"u"?Blob:null,D8={isBrowser:!0,classes:{URLSearchParams:O8,FormData:L8,Blob:P8},protocols:["http","https","file","blob","url","data"]},Pp=typeof window<"u"&&typeof document<"u",Q0=typeof navigator=="object"&&navigator||void 0,j8=Pp&&(!Q0||["ReactNative","NativeScript","NS"].indexOf(Q0.product)<0),B8=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",F8=Pp&&window.location.href||"http://localhost",z8=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Pp,hasStandardBrowserEnv:j8,hasStandardBrowserWebWorkerEnv:B8,navigator:Q0,origin:F8},Symbol.toStringTag,{value:"Module"})),hr={...z8,...D8};function U8(e,t){return vh(e,new hr.classes.URLSearchParams,{visitor:function(n,i,a,c){return hr.isNode&&he.isBuffer(n)?(this.append(i,n.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)},...t})}function V8(e){return he.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function H8(e){const t={},n=Object.keys(e);let i;const a=n.length;let c;for(i=0;i<a;i++)c=n[i],t[c]=e[c];return t}function lb(e){function t(n,i,a,c){let f=n[c++];if(f==="__proto__")return!0;const g=Number.isFinite(+f),v=c>=n.length;return f=!f&&he.isArray(a)?a.length:f,v?(he.hasOwnProp(a,f)?a[f]=[a[f],i]:a[f]=i,!g):((!a[f]||!he.isObject(a[f]))&&(a[f]=[]),t(n,i,a[f],c)&&he.isArray(a[f])&&(a[f]=H8(a[f])),!g)}if(he.isFormData(e)&&he.isFunction(e.entries)){const n={};return he.forEachEntry(e,(i,a)=>{t(V8(i),a,n,0)}),n}return null}function W8(e,t,n){if(he.isString(e))try{return(t||JSON.parse)(e),he.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const qc={transitional:Lp,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const i=n.getContentType()||"",a=i.indexOf("application/json")>-1,c=he.isObject(t);if(c&&he.isHTMLForm(t)&&(t=new FormData(t)),he.isFormData(t))return a?JSON.stringify(lb(t)):t;if(he.isArrayBuffer(t)||he.isBuffer(t)||he.isStream(t)||he.isFile(t)||he.isBlob(t)||he.isReadableStream(t))return t;if(he.isArrayBufferView(t))return t.buffer;if(he.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let g;if(c){if(i.indexOf("application/x-www-form-urlencoded")>-1)return U8(t,this.formSerializer).toString();if((g=he.isFileList(t))||i.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return vh(g?{"files[]":t}:t,v&&new v,this.formSerializer)}}return c||a?(n.setContentType("application/json",!1),W8(t)):t}],transformResponse:[function(t){const n=this.transitional||qc.transitional,i=n&&n.forcedJSONParsing,a=this.responseType==="json";if(he.isResponse(t)||he.isReadableStream(t))return t;if(t&&he.isString(t)&&(i&&!this.responseType||a)){const f=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(g){if(f)throw g.name==="SyntaxError"?ct.from(g,ct.ERR_BAD_RESPONSE,this,null,this.response):g}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hr.classes.FormData,Blob:hr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};he.forEach(["delete","get","head","post","put","patch"],e=>{qc.headers[e]={}});const Z8=he.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),G8=e=>{const t={};let n,i,a;return e&&e.split(`
`).forEach(function(f){a=f.indexOf(":"),n=f.substring(0,a).trim().toLowerCase(),i=f.substring(a+1).trim(),!(!n||t[n]&&Z8[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},Gx=Symbol("internals");function zl(e){return e&&String(e).trim().toLowerCase()}function Ju(e){return e===!1||e==null?e:he.isArray(e)?e.map(Ju):String(e)}function Y8(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const X8=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ef(e,t,n,i,a){if(he.isFunction(i))return i.call(this,t,n);if(a&&(t=n),!!he.isString(t)){if(he.isString(i))return t.indexOf(i)!==-1;if(he.isRegExp(i))return i.test(t)}}function q8(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function K8(e,t){const n=he.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(a,c,f){return this[i].call(this,t,a,c,f)},configurable:!0})})}let Pr=class{constructor(t){t&&this.set(t)}set(t,n,i){const a=this;function c(g,v,y){const S=zl(v);if(!S)throw new Error("header name must be a non-empty string");const b=he.findKey(a,S);(!b||a[b]===void 0||y===!0||y===void 0&&a[b]!==!1)&&(a[b||v]=Ju(g))}const f=(g,v)=>he.forEach(g,(y,S)=>c(y,S,v));if(he.isPlainObject(t)||t instanceof this.constructor)f(t,n);else if(he.isString(t)&&(t=t.trim())&&!X8(t))f(G8(t),n);else if(he.isObject(t)&&he.isIterable(t)){let g={},v,y;for(const S of t){if(!he.isArray(S))throw TypeError("Object iterator must return a key-value pair");g[y=S[0]]=(v=g[y])?he.isArray(v)?[...v,S[1]]:[v,S[1]]:S[1]}f(g,n)}else t!=null&&c(n,t,i);return this}get(t,n){if(t=zl(t),t){const i=he.findKey(this,t);if(i){const a=this[i];if(!n)return a;if(n===!0)return Y8(a);if(he.isFunction(n))return n.call(this,a,i);if(he.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=zl(t),t){const i=he.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||Ef(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let a=!1;function c(f){if(f=zl(f),f){const g=he.findKey(i,f);g&&(!n||Ef(i,i[g],g,n))&&(delete i[g],a=!0)}}return he.isArray(t)?t.forEach(c):c(t),a}clear(t){const n=Object.keys(this);let i=n.length,a=!1;for(;i--;){const c=n[i];(!t||Ef(this,this[c],c,t,!0))&&(delete this[c],a=!0)}return a}normalize(t){const n=this,i={};return he.forEach(this,(a,c)=>{const f=he.findKey(i,c);if(f){n[f]=Ju(a),delete n[c];return}const g=t?q8(c):String(c).trim();g!==c&&delete n[c],n[g]=Ju(a),i[g]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return he.forEach(this,(i,a)=>{i!=null&&i!==!1&&(n[a]=t&&he.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(a=>i.set(a)),i}static accessor(t){const i=(this[Gx]=this[Gx]={accessors:{}}).accessors,a=this.prototype;function c(f){const g=zl(f);i[g]||(K8(a,f),i[g]=!0)}return he.isArray(t)?t.forEach(c):c(t),this}};Pr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);he.reduceDescriptors(Pr.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});he.freezeMethods(Pr);function Nf(e,t){const n=this||qc,i=t||n,a=Pr.from(i.headers);let c=i.data;return he.forEach(e,function(g){c=g.call(n,c,a.normalize(),t?t.status:void 0)}),a.normalize(),c}function cb(e){return!!(e&&e.__CANCEL__)}let Kc=class extends ct{constructor(t,n,i){super(t??"canceled",ct.ERR_CANCELED,n,i),this.name="CanceledError",this.__CANCEL__=!0}};function ub(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new ct("Request failed with status code "+n.status,[ct.ERR_BAD_REQUEST,ct.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Q8(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function $8(e,t){e=e||10;const n=new Array(e),i=new Array(e);let a=0,c=0,f;return t=t!==void 0?t:1e3,function(v){const y=Date.now(),S=i[c];f||(f=y),n[a]=v,i[a]=y;let b=c,T=0;for(;b!==a;)T+=n[b++],b=b%e;if(a=(a+1)%e,a===c&&(c=(c+1)%e),y-f<t)return;const I=S&&y-S;return I?Math.round(T*1e3/I):void 0}}function J8(e,t){let n=0,i=1e3/t,a,c;const f=(y,S=Date.now())=>{n=S,a=null,c&&(clearTimeout(c),c=null),e(...y)};return[(...y)=>{const S=Date.now(),b=S-n;b>=i?f(y,S):(a=y,c||(c=setTimeout(()=>{c=null,f(a)},i-b)))},()=>a&&f(a)]}const jd=(e,t,n=3)=>{let i=0;const a=$8(50,250);return J8(c=>{const f=c.loaded,g=c.lengthComputable?c.total:void 0,v=f-i,y=a(v),S=f<=g;i=f;const b={loaded:f,total:g,progress:g?f/g:void 0,bytes:v,rate:y||void 0,estimated:y&&g&&S?(g-f)/y:void 0,event:c,lengthComputable:g!=null,[t?"download":"upload"]:!0};e(b)},n)},Yx=(e,t)=>{const n=e!=null;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},Xx=e=>(...t)=>he.asap(()=>e(...t)),e5=hr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,hr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(hr.origin),hr.navigator&&/(msie|trident)/i.test(hr.navigator.userAgent)):()=>!0,t5=hr.hasStandardBrowserEnv?{write(e,t,n,i,a,c,f){if(typeof document>"u")return;const g=[`${e}=${encodeURIComponent(t)}`];he.isNumber(n)&&g.push(`expires=${new Date(n).toUTCString()}`),he.isString(i)&&g.push(`path=${i}`),he.isString(a)&&g.push(`domain=${a}`),c===!0&&g.push("secure"),he.isString(f)&&g.push(`SameSite=${f}`),document.cookie=g.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function n5(e){return typeof e!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function r5(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function db(e,t,n){let i=!n5(t);return e&&(i||n==!1)?r5(e,t):t}const qx=e=>e instanceof Pr?{...e}:e;function ia(e,t){t=t||{};const n={};function i(y,S,b,T){return he.isPlainObject(y)&&he.isPlainObject(S)?he.merge.call({caseless:T},y,S):he.isPlainObject(S)?he.merge({},S):he.isArray(S)?S.slice():S}function a(y,S,b,T){if(he.isUndefined(S)){if(!he.isUndefined(y))return i(void 0,y,b,T)}else return i(y,S,b,T)}function c(y,S){if(!he.isUndefined(S))return i(void 0,S)}function f(y,S){if(he.isUndefined(S)){if(!he.isUndefined(y))return i(void 0,y)}else return i(void 0,S)}function g(y,S,b){if(b in t)return i(y,S);if(b in e)return i(void 0,y)}const v={url:c,method:c,data:c,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:g,headers:(y,S,b)=>a(qx(y),qx(S),b,!0)};return he.forEach(Object.keys({...e,...t}),function(S){if(S==="__proto__"||S==="constructor"||S==="prototype")return;const b=he.hasOwnProp(v,S)?v[S]:a,T=b(e[S],t[S],S);he.isUndefined(T)&&b!==g||(n[S]=T)}),n}const hb=e=>{const t=ia({},e);let{data:n,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:c,headers:f,auth:g}=t;if(t.headers=f=Pr.from(f),t.url=ab(db(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),g&&f.set("Authorization","Basic "+btoa((g.username||"")+":"+(g.password?unescape(encodeURIComponent(g.password)):""))),he.isFormData(n)){if(hr.hasStandardBrowserEnv||hr.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(he.isFunction(n.getHeaders)){const v=n.getHeaders(),y=["content-type","content-length"];Object.entries(v).forEach(([S,b])=>{y.includes(S.toLowerCase())&&f.set(S,b)})}}if(hr.hasStandardBrowserEnv&&(i&&he.isFunction(i)&&(i=i(t)),i||i!==!1&&e5(t.url))){const v=a&&c&&t5.read(c);v&&f.set(a,v)}return t},i5=typeof XMLHttpRequest<"u",s5=i5&&function(e){return new Promise(function(n,i){const a=hb(e);let c=a.data;const f=Pr.from(a.headers).normalize();let{responseType:g,onUploadProgress:v,onDownloadProgress:y}=a,S,b,T,I,D;function P(){I&&I(),D&&D(),a.cancelToken&&a.cancelToken.unsubscribe(S),a.signal&&a.signal.removeEventListener("abort",S)}let U=new XMLHttpRequest;U.open(a.method.toUpperCase(),a.url,!0),U.timeout=a.timeout;function V(){if(!U)return;const k=Pr.from("getAllResponseHeaders"in U&&U.getAllResponseHeaders()),X={data:!g||g==="text"||g==="json"?U.responseText:U.response,status:U.status,statusText:U.statusText,headers:k,config:e,request:U};ub(function(Z){n(Z),P()},function(Z){i(Z),P()},X),U=null}"onloadend"in U?U.onloadend=V:U.onreadystatechange=function(){!U||U.readyState!==4||U.status===0&&!(U.responseURL&&U.responseURL.indexOf("file:")===0)||setTimeout(V)},U.onabort=function(){U&&(i(new ct("Request aborted",ct.ECONNABORTED,e,U)),U=null)},U.onerror=function(H){const X=H&&H.message?H.message:"Network Error",G=new ct(X,ct.ERR_NETWORK,e,U);G.event=H||null,i(G),U=null},U.ontimeout=function(){let H=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const X=a.transitional||Lp;a.timeoutErrorMessage&&(H=a.timeoutErrorMessage),i(new ct(H,X.clarifyTimeoutError?ct.ETIMEDOUT:ct.ECONNABORTED,e,U)),U=null},c===void 0&&f.setContentType(null),"setRequestHeader"in U&&he.forEach(f.toJSON(),function(H,X){U.setRequestHeader(X,H)}),he.isUndefined(a.withCredentials)||(U.withCredentials=!!a.withCredentials),g&&g!=="json"&&(U.responseType=a.responseType),y&&([T,D]=jd(y,!0),U.addEventListener("progress",T)),v&&U.upload&&([b,I]=jd(v),U.upload.addEventListener("progress",b),U.upload.addEventListener("loadend",I)),(a.cancelToken||a.signal)&&(S=k=>{U&&(i(!k||k.type?new Kc(null,e,U):k),U.abort(),U=null)},a.cancelToken&&a.cancelToken.subscribe(S),a.signal&&(a.signal.aborted?S():a.signal.addEventListener("abort",S)));const O=Q8(a.url);if(O&&hr.protocols.indexOf(O)===-1){i(new ct("Unsupported protocol "+O+":",ct.ERR_BAD_REQUEST,e));return}U.send(c||null)})},o5=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let i=new AbortController,a;const c=function(y){if(!a){a=!0,g();const S=y instanceof Error?y:this.reason;i.abort(S instanceof ct?S:new Kc(S instanceof Error?S.message:S))}};let f=t&&setTimeout(()=>{f=null,c(new ct(`timeout of ${t}ms exceeded`,ct.ETIMEDOUT))},t);const g=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(y=>{y.unsubscribe?y.unsubscribe(c):y.removeEventListener("abort",c)}),e=null)};e.forEach(y=>y.addEventListener("abort",c));const{signal:v}=i;return v.unsubscribe=()=>he.asap(g),v}},a5=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let i=0,a;for(;i<n;)a=i+t,yield e.slice(i,a),i=a},l5=async function*(e,t){for await(const n of c5(e))yield*a5(n,t)},c5=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:i}=await t.read();if(n)break;yield i}}finally{await t.cancel()}},Kx=(e,t,n,i)=>{const a=l5(e,t);let c=0,f,g=v=>{f||(f=!0,i&&i(v))};return new ReadableStream({async pull(v){try{const{done:y,value:S}=await a.next();if(y){g(),v.close();return}let b=S.byteLength;if(n){let T=c+=b;n(T)}v.enqueue(new Uint8Array(S))}catch(y){throw g(y),y}},cancel(v){return g(v),a.return()}},{highWaterMark:2})},Qx=64*1024,{isFunction:Mu}=he,u5=(({Request:e,Response:t})=>({Request:e,Response:t}))(he.global),{ReadableStream:$x,TextEncoder:Jx}=he.global,ey=(e,...t)=>{try{return!!e(...t)}catch{return!1}},d5=e=>{e=he.merge.call({skipUndefined:!0},u5,e);const{fetch:t,Request:n,Response:i}=e,a=t?Mu(t):typeof fetch=="function",c=Mu(n),f=Mu(i);if(!a)return!1;const g=a&&Mu($x),v=a&&(typeof Jx=="function"?(D=>P=>D.encode(P))(new Jx):async D=>new Uint8Array(await new n(D).arrayBuffer())),y=c&&g&&ey(()=>{let D=!1;const P=new n(hr.origin,{body:new $x,method:"POST",get duplex(){return D=!0,"half"}}).headers.has("Content-Type");return D&&!P}),S=f&&g&&ey(()=>he.isReadableStream(new i("").body)),b={stream:S&&(D=>D.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(D=>{!b[D]&&(b[D]=(P,U)=>{let V=P&&P[D];if(V)return V.call(P);throw new ct(`Response type '${D}' is not supported`,ct.ERR_NOT_SUPPORT,U)})});const T=async D=>{if(D==null)return 0;if(he.isBlob(D))return D.size;if(he.isSpecCompliantForm(D))return(await new n(hr.origin,{method:"POST",body:D}).arrayBuffer()).byteLength;if(he.isArrayBufferView(D)||he.isArrayBuffer(D))return D.byteLength;if(he.isURLSearchParams(D)&&(D=D+""),he.isString(D))return(await v(D)).byteLength},I=async(D,P)=>{const U=he.toFiniteNumber(D.getContentLength());return U??T(P)};return async D=>{let{url:P,method:U,data:V,signal:O,cancelToken:k,timeout:H,onDownloadProgress:X,onUploadProgress:G,responseType:Z,headers:J,withCredentials:z="same-origin",fetchOptions:te}=hb(D),me=t||fetch;Z=Z?(Z+"").toLowerCase():"text";let fe=o5([O,k&&k.toAbortSignal()],H),Me=null;const we=fe&&fe.unsubscribe&&(()=>{fe.unsubscribe()});let ae;try{if(G&&y&&U!=="get"&&U!=="head"&&(ae=await I(J,V))!==0){let Se=new n(P,{method:"POST",body:V,duplex:"half"}),Be;if(he.isFormData(V)&&(Be=Se.headers.get("content-type"))&&J.setContentType(Be),Se.body){const[Pe,ze]=Yx(ae,jd(Xx(G)));V=Kx(Se.body,Qx,Pe,ze)}}he.isString(z)||(z=z?"include":"omit");const Ce=c&&"credentials"in n.prototype,ke={...te,signal:fe,method:U.toUpperCase(),headers:J.normalize().toJSON(),body:V,duplex:"half",credentials:Ce?z:void 0};Me=c&&new n(P,ke);let ue=await(c?me(Me,te):me(P,ke));const je=S&&(Z==="stream"||Z==="response");if(S&&(X||je&&we)){const Se={};["status","statusText","headers"].forEach($=>{Se[$]=ue[$]});const Be=he.toFiniteNumber(ue.headers.get("content-length")),[Pe,ze]=X&&Yx(Be,jd(Xx(X),!0))||[];ue=new i(Kx(ue.body,Qx,Pe,()=>{ze&&ze(),we&&we()}),Se)}Z=Z||"text";let ge=await b[he.findKey(b,Z)||"text"](ue,D);return!je&&we&&we(),await new Promise((Se,Be)=>{ub(Se,Be,{data:ge,headers:Pr.from(ue.headers),status:ue.status,statusText:ue.statusText,config:D,request:Me})})}catch(Ce){throw we&&we(),Ce&&Ce.name==="TypeError"&&/Load failed|fetch/i.test(Ce.message)?Object.assign(new ct("Network Error",ct.ERR_NETWORK,D,Me,Ce&&Ce.response),{cause:Ce.cause||Ce}):ct.from(Ce,Ce&&Ce.code,D,Me,Ce&&Ce.response)}}},h5=new Map,fb=e=>{let t=e&&e.env||{};const{fetch:n,Request:i,Response:a}=t,c=[i,a,n];let f=c.length,g=f,v,y,S=h5;for(;g--;)v=c[g],y=S.get(v),y===void 0&&S.set(v,y=g?new Map:d5(t)),S=y;return y};fb();const Dp={http:I8,xhr:s5,fetch:{get:fb}};he.forEach(Dp,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const ty=e=>`- ${e}`,f5=e=>he.isFunction(e)||e===null||e===!1;function p5(e,t){e=he.isArray(e)?e:[e];const{length:n}=e;let i,a;const c={};for(let f=0;f<n;f++){i=e[f];let g;if(a=i,!f5(i)&&(a=Dp[(g=String(i)).toLowerCase()],a===void 0))throw new ct(`Unknown adapter '${g}'`);if(a&&(he.isFunction(a)||(a=a.get(t))))break;c[g||"#"+f]=a}if(!a){const f=Object.entries(c).map(([v,y])=>`adapter ${v} `+(y===!1?"is not supported by the environment":"is not available in the build"));let g=n?f.length>1?`since :
`+f.map(ty).join(`
`):" "+ty(f[0]):"as no adapter specified";throw new ct("There is no suitable adapter to dispatch the request "+g,"ERR_NOT_SUPPORT")}return a}const pb={getAdapter:p5,adapters:Dp};function Tf(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Kc(null,e)}function ny(e){return Tf(e),e.headers=Pr.from(e.headers),e.data=Nf.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),pb.getAdapter(e.adapter||qc.adapter,e)(e).then(function(i){return Tf(e),i.data=Nf.call(e,e.transformResponse,i),i.headers=Pr.from(i.headers),i},function(i){return cb(i)||(Tf(e),i&&i.response&&(i.response.data=Nf.call(e,e.transformResponse,i.response),i.response.headers=Pr.from(i.response.headers))),Promise.reject(i)})}const mb="1.13.5",_h={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{_h[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const ry={};_h.transitional=function(t,n,i){function a(c,f){return"[Axios v"+mb+"] Transitional option '"+c+"'"+f+(i?". "+i:"")}return(c,f,g)=>{if(t===!1)throw new ct(a(f," has been removed"+(n?" in "+n:"")),ct.ERR_DEPRECATED);return n&&!ry[f]&&(ry[f]=!0,console.warn(a(f," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(c,f,g):!0}};_h.spelling=function(t){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function m5(e,t,n){if(typeof e!="object")throw new ct("options must be an object",ct.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let a=i.length;for(;a-- >0;){const c=i[a],f=t[c];if(f){const g=e[c],v=g===void 0||f(g,c,e);if(v!==!0)throw new ct("option "+c+" must be "+v,ct.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ct("Unknown option "+c,ct.ERR_BAD_OPTION)}}const ed={assertOptions:m5,validators:_h},ci=ed.validators;let Qo=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Zx,response:new Zx}}async request(t,n){try{return await this._request(t,n)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const c=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?c&&!String(i.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+c):i.stack=c}catch{}}throw i}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ia(this.defaults,n);const{transitional:i,paramsSerializer:a,headers:c}=n;i!==void 0&&ed.assertOptions(i,{silentJSONParsing:ci.transitional(ci.boolean),forcedJSONParsing:ci.transitional(ci.boolean),clarifyTimeoutError:ci.transitional(ci.boolean),legacyInterceptorReqResOrdering:ci.transitional(ci.boolean)},!1),a!=null&&(he.isFunction(a)?n.paramsSerializer={serialize:a}:ed.assertOptions(a,{encode:ci.function,serialize:ci.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ed.assertOptions(n,{baseUrl:ci.spelling("baseURL"),withXsrfToken:ci.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let f=c&&he.merge(c.common,c[n.method]);c&&he.forEach(["delete","get","head","post","put","patch","common"],D=>{delete c[D]}),n.headers=Pr.concat(f,c);const g=[];let v=!0;this.interceptors.request.forEach(function(P){if(typeof P.runWhen=="function"&&P.runWhen(n)===!1)return;v=v&&P.synchronous;const U=n.transitional||Lp;U&&U.legacyInterceptorReqResOrdering?g.unshift(P.fulfilled,P.rejected):g.push(P.fulfilled,P.rejected)});const y=[];this.interceptors.response.forEach(function(P){y.push(P.fulfilled,P.rejected)});let S,b=0,T;if(!v){const D=[ny.bind(this),void 0];for(D.unshift(...g),D.push(...y),T=D.length,S=Promise.resolve(n);b<T;)S=S.then(D[b++],D[b++]);return S}T=g.length;let I=n;for(;b<T;){const D=g[b++],P=g[b++];try{I=D(I)}catch(U){P.call(this,U);break}}try{S=ny.call(this,I)}catch(D){return Promise.reject(D)}for(b=0,T=y.length;b<T;)S=S.then(y[b++],y[b++]);return S}getUri(t){t=ia(this.defaults,t);const n=db(t.baseURL,t.url,t.allowAbsoluteUrls);return ab(n,t.params,t.paramsSerializer)}};he.forEach(["delete","get","head","options"],function(t){Qo.prototype[t]=function(n,i){return this.request(ia(i||{},{method:t,url:n,data:(i||{}).data}))}});he.forEach(["post","put","patch"],function(t){function n(i){return function(c,f,g){return this.request(ia(g||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:c,data:f}))}}Qo.prototype[t]=n(),Qo.prototype[t+"Form"]=n(!0)});let g5=class gb{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(c){n=c});const i=this;this.promise.then(a=>{if(!i._listeners)return;let c=i._listeners.length;for(;c-- >0;)i._listeners[c](a);i._listeners=null}),this.promise.then=a=>{let c;const f=new Promise(g=>{i.subscribe(g),c=g}).then(a);return f.cancel=function(){i.unsubscribe(c)},f},t(function(c,f,g){i.reason||(i.reason=new Kc(c,f,g),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=i=>{t.abort(i)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new gb(function(a){t=a}),cancel:t}}};function x5(e){return function(n){return e.apply(null,n)}}function y5(e){return he.isObject(e)&&e.isAxiosError===!0}const $0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries($0).forEach(([e,t])=>{$0[t]=e});function xb(e){const t=new Qo(e),n=K_(Qo.prototype.request,t);return he.extend(n,Qo.prototype,t,{allOwnKeys:!0}),he.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return xb(ia(e,a))},n}const rt=xb(qc);rt.Axios=Qo;rt.CanceledError=Kc;rt.CancelToken=g5;rt.isCancel=cb;rt.VERSION=mb;rt.toFormData=vh;rt.AxiosError=ct;rt.Cancel=rt.CanceledError;rt.all=function(t){return Promise.all(t)};rt.spread=x5;rt.isAxiosError=y5;rt.mergeConfig=ia;rt.AxiosHeaders=Pr;rt.formToJSON=e=>lb(he.isHTMLForm(e)?new FormData(e):e);rt.getAdapter=pb.getAdapter;rt.HttpStatusCode=$0;rt.default=rt;const{Axios:HM,AxiosError:WM,CanceledError:ZM,isCancel:GM,CancelToken:YM,VERSION:XM,all:qM,Cancel:KM,isAxiosError:QM,spread:$M,toFormData:JM,AxiosHeaders:e6,HttpStatusCode:t6,formToJSON:n6,getAdapter:r6,mergeConfig:i6}=rt,w5=[{event_id:"1",label:"Expediere preluata de Curier",description:"Expediere preluata de Curier"},{event_id:"2",label:"Expeditie Livrata",description:"Expeditie Livrata"},{event_id:"3",label:"Refuzare colet",description:"Refuzare colet"},{event_id:"4",label:"Expeditie returnata",description:"Expeditie returnata"},{event_id:"5",label:"Expeditie anulata",description:"Expeditie anulata"},{event_id:"6",label:"Intrare in depozit",description:"Intrare in depozit"},{event_id:"7",label:"Livrare reprogramata",description:"Livrare reprogramata"},{event_id:"R3",label:"Ramburs transferat",description:"Ramburs transferat"}];w5.reduce((e,t)=>(e[t.event_id]=t.label,e),{});const v5=!1,If="http://localhost:8000",J0="arynik_api_url_v1",Xl=e=>String(e||"").trim().replace(/\/+$/,""),_5=e=>{try{return localStorage.getItem(e)}catch{return null}},b5=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},C5=e=>{try{localStorage.removeItem(e)}catch{}},$t=()=>{if(typeof window>"u")return Xl(If);const t=new URLSearchParams(window.location.search).get("api"),n=_5(J0);return Xl(t||n||If)||Xl(If)},yb=e=>{const t=Xl(e);t?b5(J0,t):C5(J0)},fn=e=>e?{Authorization:`Bearer ${e}`}:{},iy=e=>{const t=new TextEncoder().encode(String(e));let n="";return t.forEach(i=>{n+=String.fromCharCode(i)}),btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"")},S5=e=>`${iy(JSON.stringify({alg:"none",typ:"JWT"}))}.${iy(JSON.stringify(e))}.offline`,A5=e=>{const t=String(e).trim().toLowerCase();return t.includes("admin")?"Admin":t.includes("manager")?"Manager":t.replace(/\\D/g,"").length>=9?"Recipient":"Driver"},E5=(e,t)=>{if(e==="Driver"){const n=String(t).trim().toUpperCase();return/^D\\d{3,}$/i.test(n)?n:"D002"}if(e==="Recipient"){const n=String(t).replace(/\\D/g,"");return n?`R${n.slice(-15)}`:"R000"}return"D001"};async function N5(e,t){const n=$t(),i=new URLSearchParams;i.append("username",e),i.append("password",t);try{return(await rt.post(`${n}/login`,i,{headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:3e3})).data}catch(a){if(a&&a.response)throw a;console.warn("Login API unavailable; using snapshot/offline token.",a);const c=String(e||"").trim()||"offline",f=A5(c),g={sub:c,driver_id:E5(f,c),role:f,offline:!0,exp:Math.floor(Date.now()/1e3)+7*24*60*60};return{access_token:S5(g),token_type:"bearer",role:f}}}async function wb(e){const t=$t();return(await rt.post(`${t}/recipient/signup`,e,{headers:{"Content-Type":"application/json"},timeout:7e3})).data}async function vb(e){const t=$t();return(await rt.get(`${t}/stats`,{headers:fn(e)})).data}async function e1(e){const t=$t();return(await rt.get(`${t}/me`,{headers:fn(e)})).data}async function _b(e,{scope:t="self",awb_limit:n=200}={}){const i=$t();return(await rt.get(`${i}/analytics`,{params:{scope:t,awb_limit:n},headers:fn(e)})).data}async function bb(e){const t=$t();return(await rt.get(`${t}/roles`,{headers:fn(e),timeout:5e3})).data}async function jp(e){const t=$t();return(await rt.get(`${t}/users`,{headers:fn(e),timeout:7e3})).data}async function Cb(e,t){const n=$t();return(await rt.post(`${n}/users`,t,{headers:{...fn(e),"Content-Type":"application/json"},timeout:7e3})).data}async function Sb(e,t,n){const i=String(t||"").trim();if(!i)throw new Error("driver_id is required");const a=$t();return(await rt.patch(`${a}/users/${encodeURIComponent(i)}`,n,{headers:{...fn(e),"Content-Type":"application/json"},timeout:7e3})).data}async function T5(e){const t=$t();return(await rt.post(`${t}/sync-drivers`,null,{headers:fn(e),timeout:15e3})).data}async function Ab(e){const t=$t();return(await rt.get(`${t}/status-options`,{headers:fn(e)})).data}async function bh(e,t){const n=$t();return(await rt.post(`${n}/update-awb`,t,{headers:fn(e)})).data}async function Bp(e,t={}){const n=$t();return(await rt.get(`${n}/logs`,{params:t,headers:fn(e)})).data}async function Qc(e){const t=$t();try{return(await rt.get(`${t}/shipments`,{headers:fn(e),timeout:5e3})).data}catch(n){console.warn("Backend API unavailable, attempting to load static snapshot...",n);try{const i="/arynik1/data/shipments.json".replace("//","/"),a=await rt.get(i);console.info("Loaded shipments from static snapshot.");let c=a.data;if(e)try{const g=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),v=decodeURIComponent(window.atob(g).split("").map(function(T){return"%"+("00"+T.charCodeAt(0).toString(16)).slice(-2)}).join("")),y=JSON.parse(v),S=y.role,b=y.driver_id;if(S==="Driver")console.info(`Offline RBAC: Filtering for Driver ${b}`),c=c.filter(T=>T.driver_id===b);else if(S==="Recipient"){const D=String(y.sub||"").trim().replace(/\\D/g,"").slice(-9);D&&(console.info("Offline RBAC: Filtering for Recipient phone"),c=c.filter(P=>String((P==null?void 0:P.recipient_phone)||"").replace(/\\D/g,"").endsWith(D)))}}catch(f){console.warn("Offline RBAC: Failed to decode token",f)}return c}catch(i){throw console.error("Failed to load both API and static snapshot",i),n}}}async function Bd(e,t,{refresh:n=!1}={}){const i=$t(),a=String(t||"").trim();if(!a)throw new Error("awb is required");try{return(await rt.get(`${i}/shipments/${encodeURIComponent(a)}`,{params:n?{refresh:!0}:{},headers:fn(e),timeout:7e3})).data}catch(c){console.warn("Backend shipment details unavailable, attempting static snapshot...",c);try{const f="/arynik1/data/shipments.json".replace("//","/"),g=await rt.get(f),y=(Array.isArray(g.data)?g.data:[]).find(S=>String((S==null?void 0:S.awb)||"").toUpperCase()===a.toUpperCase());if(y)return y}catch{}throw c}}async function Fp(e,t,n){const i=$t(),a=String(t||"").trim();if(!a)throw new Error("awb is required");const c=String(n||"").trim();if(!c)throw new Error("driver_id is required");return(await rt.post(`${i}/shipments/${encodeURIComponent(a)}/allocate`,{driver_id:c},{headers:{...fn(e),"Content-Type":"application/json"},timeout:7e3})).data}async function Eb(e,{limit:t=50,unread_only:n=!1}={}){const i=$t();return(await rt.get(`${i}/notifications`,{params:{limit:t,unread_only:n},headers:fn(e),timeout:7e3})).data}async function Nb(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("notification_id is required");const i=$t();return(await rt.post(`${i}/notifications/${encodeURIComponent(String(n))}/read`,null,{headers:fn(e),timeout:7e3})).data}async function Tb(e,t){const n=$t();return(await rt.post(`${n}/update-location`,t,{headers:{...fn(e),"Content-Type":"application/json"},timeout:7e3})).data}async function zp(e,t){const n=$t();return(await rt.post(`${n}/tracking/requests`,t,{headers:{...fn(e),"Content-Type":"application/json"},timeout:7e3})).data}async function Ib(e,{limit:t=20}={}){const n=$t();return(await rt.get(`${n}/tracking/requests/inbox`,{params:{limit:t},headers:fn(e),timeout:7e3})).data}async function kb(e,{limit:t=10}={}){const n=$t();return(await rt.get(`${n}/tracking/requests/active`,{params:{limit:t},headers:fn(e),timeout:7e3})).data}async function Mb(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("request_id is required");const i=$t();return(await rt.get(`${i}/tracking/requests/${encodeURIComponent(String(n))}`,{headers:fn(e),timeout:7e3})).data}async function Rb(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("request_id is required");const i=$t();return(await rt.get(`${i}/tracking/requests/${encodeURIComponent(String(n))}/latest`,{headers:fn(e),timeout:7e3})).data}async function Ob(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("request_id is required");const i=$t();return(await rt.post(`${i}/tracking/requests/${encodeURIComponent(String(n))}/accept`,null,{headers:fn(e),timeout:7e3})).data}async function Lb(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("request_id is required");const i=$t();return(await rt.post(`${i}/tracking/requests/${encodeURIComponent(String(n))}/deny`,null,{headers:fn(e),timeout:7e3})).data}async function Up(e,t){const n=Number(t);if(!Number.isFinite(n))throw new Error("request_id is required");const i=$t();return(await rt.post(`${i}/tracking/requests/${encodeURIComponent(String(n))}/stop`,null,{headers:fn(e),timeout:7e3})).data}const I5=Object.freeze(Object.defineProperty({__proto__:null,acceptTrackingRequest:Ob,allocateShipment:Fp,createTrackingRequest:zp,createUser:Cb,denyTrackingRequest:Lb,getAnalytics:_b,getApiUrl:$t,getLogs:Bp,getMe:e1,getNotifications:Eb,getRoles:bb,getShipment:Bd,getShipments:Qc,getStats:vb,getStatusOptions:Ab,getTrackingLatest:Rb,getTrackingRequest:Mb,isDemoMode:v5,listTrackingActive:kb,listTrackingInbox:Ib,listUsers:jp,login:N5,markNotificationRead:Nb,recipientSignup:wb,setApiUrl:yb,stopTrackingRequest:Up,syncDrivers:T5,updateAwb:bh,updateLocation:Tb,updateUser:Sb},Symbol.toStringTag,{value:"Module"})),sy=e=>{try{const n=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(atob(n).split("").map(function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(i)}catch{return null}},Pb=j.createContext(),k5=({children:e})=>{const[t,n]=j.useState(null),[i,a]=j.useState(!0);j.useEffect(()=>{let g=!1;return(async()=>{const v=localStorage.getItem("token");if(!v){g||a(!1);return}const y=sy(v);if(!y||!y.sub){console.warn("Invalid/undecodable token in localStorage; clearing it."),localStorage.removeItem("token"),g||a(!1);return}const S={username:y.sub,driver_id:y.driver_id,role:y.role,token:v,permissions:X0(y.role)};g||n(S);try{const b=await e1(v);!g&&b&&n(T=>({...T||S,...b,token:v,permissions:Array.isArray(b==null?void 0:b.permissions)?b.permissions:(T==null?void 0:T.permissions)||S.permissions}))}catch(b){console.warn("Failed to load /me; continuing with token payload only.",b)}finally{g||a(!1)}})(),()=>{g=!0}},[]);const c=async(g,v)=>{localStorage.setItem("token",g);const y=sy(g);if(!y||!y.sub){console.error("Login returned an invalid token; clearing it."),localStorage.removeItem("token"),n(null);return}const S={username:y.sub,driver_id:y.driver_id,role:v||y.role,token:g,permissions:X0(v||y.role)};n(S);try{const b=await e1(g);b&&n(T=>({...T||S,...b,token:g,permissions:Array.isArray(b==null?void 0:b.permissions)?b.permissions:(T==null?void 0:T.permissions)||S.permissions}))}catch(b){console.warn("Failed to load /me after login; continuing with token payload only.",b)}},f=()=>{localStorage.setItem("token",""),localStorage.removeItem("token"),n(null)};return m.jsx(Pb.Provider,{value:{user:t,login:c,logout:f,loading:i},children:!i&&e})},Ar=()=>j.useContext(Pb),M5=({to:e,onClick:t,icon:n,label:i,isActive:a})=>{const c=`relative flex flex-col items-center justify-center gap-1.5 px-3 py-3 rounded-2xl transition-all duration-300 ${a?"text-white":"text-slate-500 hover:text-slate-300"}`,f=m.jsxs(m.Fragment,{children:[a&&m.jsx(tt.div,{layoutId:"nav-pill",className:"absolute inset-0 bg-gradient-to-t from-brand-blue/20 to-transparent rounded-2xl border-b-2 border-brand-blue shadow-[0_0_20px_rgba(59,130,246,0.5)]",transition:{type:"spring",stiffness:300,damping:30}}),m.jsx(n,{size:22,className:`relative z-10 transition-all duration-300 ${a?"scale-110 drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]":"scale-100"}`,strokeWidth:a?2.5:2}),m.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wide relative z-10 ${a?"text-white drop-shadow-md":"opacity-70"}`,children:i})]});return e?m.jsx(tE,{to:e,className:c,children:f}):m.jsx("button",{type:"button",onClick:t,className:c,"aria-label":i,children:f})};function R5({onOpenMenu:e}){const n=bo().pathname,{user:i}=Ar(),a=Vn(i,Tr),c=["Manager","Admin","Dispatcher","Driver"].includes(i==null?void 0:i.role),f=[{to:"/home",icon:k_,label:"Home"},...a?[{to:"/shipments",icon:As,label:"Track"}]:[],...c?[{to:"/routes",icon:co,label:"Routes"}]:[],{onClick:e,icon:MI,label:"Menu"}];return m.jsx("nav",{className:"fixed bottom-[calc(1.5rem+env(safe-area-inset-bottom))] left-1/2 -translate-x-1/2 z-50 w-full max-w-sm px-4",children:m.jsxs("div",{className:"glass-strong rounded-[32px] border-iridescent shadow-2xl px-2 py-2 flex justify-around items-center relative backdrop-blur-2xl",children:[m.jsx("div",{className:"absolute inset-x-4 top-0 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"}),f.map(g=>m.jsx(M5,{to:g.to,onClick:g.onClick,icon:g.icon,label:g.label,isActive:g.to?n===g.to||g.to!=="/home"&&n.startsWith(g.to)||n==="/"&&g.to==="/home":!1},g.to||g.label))]})})}const ls=({icon:e,label:t,description:n,onClick:i})=>m.jsxs("button",{type:"button",onClick:i,className:"w-full p-4 glass-light rounded-2xl border border-white/10 hover:border-white/20 hover:bg-white/5 transition-all flex items-center gap-4 text-left",children:[m.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-violet-500/25 to-purple-600/15 border border-white/10",children:m.jsx(e,{size:20,className:"text-violet-300"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-black text-white text-sm uppercase tracking-tight",children:t}),n?m.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:n}):null]})]});function O5({open:e,onClose:t}){const n=Qr(),{user:i,logout:a}=Ar(),c=j.useMemo(()=>Vn(i,Tr),[i]),f=j.useMemo(()=>["Manager","Admin","Dispatcher","Driver"].includes(i==null?void 0:i.role),[i==null?void 0:i.role]),g=j.useMemo(()=>Vn(i,uo),[i]),v=j.useMemo(()=>Vn(i,Xs),[i]),y=j.useMemo(()=>Vn(i,hi),[i]),S=j.useMemo(()=>Vn(i,Ti),[i]),b=j.useMemo(()=>Vn(i,di),[i]);j.useEffect(()=>{if(!e)return;const k=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=k}},[e]);const T=k=>{n(k),t==null||t()},I=()=>{a(),t==null||t(),n("/login",{replace:!0})},D=(i==null?void 0:i.name)||(i==null?void 0:i.username)||"Driver",P=i!=null&&i.truck_plate?String(i.truck_plate).toUpperCase():null,U=(i==null?void 0:i.truck_phone)||null,V=String((i==null?void 0:i.role)||"")==="Recipient",O=V&&((i==null?void 0:i.phone_number)||(i==null?void 0:i.username))||null;return m.jsx(ws,{children:e?m.jsxs(m.Fragment,{children:[m.jsx(tt.div,{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[60]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t}),m.jsx(tt.aside,{className:"fixed inset-y-0 right-0 w-full max-w-sm z-[61] p-4",initial:{x:60,opacity:0},animate:{x:0,opacity:1},exit:{x:60,opacity:0},transition:{type:"spring",stiffness:260,damping:28},"aria-label":"App menu",role:"dialog","aria-modal":"true",children:m.jsxs("div",{className:"h-full glass-strong rounded-[32px] border-iridescent shadow-2xl overflow-hidden flex flex-col",children:[m.jsxs("div",{className:"p-5 flex items-center justify-between border-b border-white/10",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Menu"}),m.jsx("div",{className:"text-lg font-black text-white mt-1",children:"Navigation"})]}),m.jsx("button",{type:"button",onClick:t,className:"w-11 h-11 rounded-2xl glass-light border border-white/10 flex items-center justify-center hover:bg-white/5 transition-all","aria-label":"Close menu",children:m.jsx(Zc,{size:18,className:"text-slate-300"})})]}),m.jsx("div",{className:"p-5",children:m.jsxs("div",{className:"glass-light rounded-3xl border border-white/10 p-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center shadow-glow-md",children:m.jsx(ua,{size:22,className:"text-white"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("div",{className:"font-black text-white truncate",children:D}),m.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-0.5",children:[(i==null?void 0:i.role)||"Role","  ID: ",(i==null?void 0:i.driver_id)||"N/A"]})]})]}),m.jsx("div",{className:"mt-4 grid grid-cols-2 gap-3",children:V?m.jsxs("div",{className:"p-3 rounded-2xl bg-slate-900/40 border border-white/10 col-span-2",children:[m.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[m.jsx(Ld,{size:14}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Recipient Phone"})]}),m.jsx("div",{className:"text-sm font-black text-white mt-1 truncate",children:O||"--"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"p-3 rounded-2xl bg-slate-900/40 border border-white/10",children:[m.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[m.jsx(kp,{size:14}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Truck"})]}),m.jsx("div",{className:"text-sm font-black text-white mt-1 truncate",children:P||"Unassigned"})]}),m.jsxs("div",{className:"p-3 rounded-2xl bg-slate-900/40 border border-white/10",children:[m.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[m.jsx(Ld,{size:14}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Phone"})]}),m.jsx("div",{className:"text-sm font-black text-white mt-1 truncate",children:U||"--"})]})]})}),v?m.jsx("div",{className:"mt-3 text-[10px] text-emerald-400 font-black uppercase tracking-widest",children:"Analytics: ALL enabled"}):null]})}),m.jsxs("div",{className:"flex-1 px-5 pb-5 overflow-y-auto space-y-3",children:[m.jsx(ls,{icon:k_,label:"Home",description:"Scanner & quick actions",onClick:()=>T("/home")}),c?m.jsxs(m.Fragment,{children:[m.jsx(ls,{icon:As,label:"Shipments",description:"Track shipments",onClick:()=>T("/shipments")}),f?m.jsx(ls,{icon:co,label:"Routes",description:"Plan deliveries",onClick:()=>T("/routes")}):null]}):null,b?m.jsx(ls,{icon:Lc,label:"Notifications",description:"Allocation updates",onClick:()=>T("/notifications")}):null,y?m.jsx(ls,{icon:NI,label:"History",description:"Logs & updates",onClick:()=>T("/history")}):null,c?m.jsx(ls,{icon:T_,label:"Calendar",description:"Daily overview",onClick:()=>T("/calendar")}):null,S?m.jsx(ls,{icon:N_,label:"Statistics",description:"Trucks, drivers, AWBs, ESCH",onClick:()=>T("/analytics")}):null,g?m.jsx(ls,{icon:B_,label:"Users",description:"Create accounts & roles",onClick:()=>T("/users")}):null,m.jsx(ls,{icon:PI,label:"Settings",description:"Account & API",onClick:()=>T("/settings")}),m.jsxs("button",{type:"button",onClick:I,className:"w-full p-4 rounded-2xl bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-400 hover:to-rose-500 text-white font-black uppercase tracking-wider shadow-lg flex items-center justify-center gap-3 transition-all",children:[m.jsx(O_,{size:18}),"Sign Out"]})]})]})})]}):null})}function Vp(e={}){const t=typeof e=="boolean"?e:(e==null?void 0:e.enabled)??!0,[n,i]=j.useState(null),[a,c]=j.useState(null);return j.useEffect(()=>{if(!t)return;if(!navigator.geolocation){c("Geolocation is not supported by your browser");return}const f=S=>{const{latitude:b,longitude:T,heading:I,speed:D}=S.coords;i({latitude:b,longitude:T,heading:I,speed:D})},g=S=>{c(S.message)},v={enableHighAccuracy:!0,timeout:5e3,maximumAge:0,...typeof e=="object"&&(e!=null&&e.options)?e.options:{}},y=navigator.geolocation.watchPosition(f,g,v);return()=>navigator.geolocation.clearWatch(y)},[t]),{location:n,error:a}}const oy=e=>{try{return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}};function L5(){const{user:e}=Ar(),t=(e==null?void 0:e.token)||localStorage.getItem("token"),n=String((e==null?void 0:e.role)||"").trim(),[i,a]=j.useState([]),[c,f]=j.useState(null),[g,v]=j.useState(null),[y,S]=j.useState(""),b=n==="Driver"&&!!c,{location:T,error:I}=Vp({enabled:b}),D=j.useMemo(()=>{if(!(c!=null&&c.expires_at))return null;const H=new Date(c.expires_at).getTime();return Number.isFinite(H)?H:null},[c==null?void 0:c.expires_at]);j.useEffect(()=>{if(n!=="Driver"||!t)return;let H=!1;const X=async()=>{try{const Z=await Ib(t,{limit:20}).catch(()=>[]);H||a(Array.isArray(Z)?Z:[]);let J=null;try{const z=await kb(t,{limit:5});J=Array.isArray(z)?z:[]}catch{J=null}if(H||J===null)return;f(z=>z?J.some(me=>String(me==null?void 0:me.id)===String(z==null?void 0:z.id))?z:null:J[0]||null)}catch{}};X();const G=setInterval(X,1e4);return()=>{H=!0,clearInterval(G)}},[n,t]),j.useEffect(()=>{if(!D)return;const H=()=>{Date.now()>=D&&f(null)};H();const X=setInterval(H,1e3);return()=>clearInterval(X)},[D]);const P=j.useRef(0);j.useEffect(()=>{if(!b||!T||!t)return;const H=Date.now();if(H-P.current<8e3)return;P.current=H;const X={latitude:Number(T.latitude),longitude:Number(T.longitude)};!Number.isFinite(X.latitude)||!Number.isFinite(X.longitude)||(async()=>{var G,Z;try{await Tb(t,X),S("")}catch(J){S(String(((Z=(G=J==null?void 0:J.response)==null?void 0:G.data)==null?void 0:Z.detail)||(J==null?void 0:J.message)||"Failed to send location"))}})()},[b,T==null?void 0:T.latitude,T==null?void 0:T.longitude,t]);const U=j.useMemo(()=>{if(c)return null;const H=Array.isArray(i)?i:[];return H.length>0?H[0]:null},[i,c]),V=async()=>{var H,X;if(!(!(U!=null&&U.id)||!t)){v(U.id),S("");try{const G=await Ob(t,U.id);f(G||null),a(Z=>Array.isArray(Z)?Z.filter(J=>String(J==null?void 0:J.id)!==String(U.id)):Z)}catch(G){S(String(((X=(H=G==null?void 0:G.response)==null?void 0:H.data)==null?void 0:X.detail)||(G==null?void 0:G.message)||"Failed to accept request"))}finally{v(null)}}},O=async()=>{var H,X;if(!(!(U!=null&&U.id)||!t)){v(U.id),S("");try{await Lb(t,U.id),a(G=>Array.isArray(G)?G.filter(Z=>String(Z==null?void 0:Z.id)!==String(U.id)):G)}catch(G){S(String(((X=(H=G==null?void 0:G.response)==null?void 0:H.data)==null?void 0:X.detail)||(G==null?void 0:G.message)||"Failed to deny request"))}finally{v(null)}}},k=async()=>{var H,X;if(!(!(c!=null&&c.id)||!t)){v(c.id),S("");try{await Up(t,c.id),f(null)}catch(G){S(String(((X=(H=G==null?void 0:G.response)==null?void 0:H.data)==null?void 0:X.detail)||(G==null?void 0:G.message)||"Failed to stop tracking"))}finally{v(null)}}};return n!=="Driver"||!U&&!c?null:m.jsx("div",{className:"fixed bottom-[calc(5rem+env(safe-area-inset-bottom))] left-0 right-0 z-[70] px-4",children:m.jsx("div",{className:"max-w-xl mx-auto",children:m.jsx("div",{className:"glass-strong rounded-3xl border-iridescent p-4 shadow-2xl",children:c?m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-11 h-11 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center",children:m.jsx(tl,{size:18,className:"text-emerald-200"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsx("p",{className:"text-sm font-black text-white truncate",children:"Sharing live location"}),m.jsxs("button",{type:"button",onClick:k,disabled:String(g)===String(c.id),className:`px-3 py-2 rounded-2xl text-[10px] font-black uppercase tracking-widest border transition-all ${String(g)===String(c.id)?"opacity-60 cursor-not-allowed bg-slate-900/40 border-white/10 text-slate-400":"bg-rose-500/15 border-rose-500/20 text-rose-200 hover:bg-rose-500/20 active:scale-95"}`,title:"Stop sharing",children:[m.jsx(j_,{size:14,className:"inline-block mr-1 -mt-0.5"}),"Stop"]})]}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["Until ",c.expires_at?oy(c.expires_at):"--",c.awb?`  AWB ${String(c.awb).toUpperCase()}`:""]}),I?m.jsxs("p",{className:"mt-2 text-[11px] font-bold text-amber-200",children:["Location error: ",I]}):null,y?m.jsx("p",{className:"mt-2 text-[11px] font-bold text-rose-200",children:y}):null]})]}):m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-11 h-11 rounded-2xl bg-violet-500/15 border border-violet-500/20 flex items-center justify-center",children:m.jsx(tl,{size:18,className:"text-violet-200"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-sm font-black text-white truncate",children:"Location request"}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["Expires ",U!=null&&U.expires_at?oy(U.expires_at):"--",U!=null&&U.awb?`  AWB ${String(U.awb).toUpperCase()}`:""]}),y?m.jsx("p",{className:"mt-2 text-[11px] font-bold text-rose-200",children:y}):null]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{type:"button",onClick:O,disabled:String(g)===String(U==null?void 0:U.id),className:`w-11 h-11 rounded-2xl border flex items-center justify-center transition-all ${String(g)===String(U==null?void 0:U.id)?"opacity-60 cursor-not-allowed bg-slate-900/40 border-white/10 text-slate-500":"bg-slate-900/40 border-white/10 text-slate-300 hover:bg-white/5 active:scale-95"}`,title:"Deny",children:m.jsx(Zc,{size:18})}),m.jsxs("button",{type:"button",onClick:V,disabled:String(g)===String(U==null?void 0:U.id),className:`px-4 h-11 rounded-2xl border text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 transition-all ${String(g)===String(U==null?void 0:U.id)?"opacity-60 cursor-not-allowed bg-emerald-500/10 border-emerald-500/20 text-emerald-200":"bg-emerald-500/15 border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95"}`,title:"Start sharing",children:[String(g)===String(U==null?void 0:U.id)?m.jsx(Qn,{size:16,className:"animate-spin"}):m.jsx(OI,{size:16}),"Share"]})]})]})})})})}function P5(){const[e,t]=j.useState(!1);return m.jsxs("div",{className:"min-h-screen pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[" ",m.jsx("div",{className:"max-w-xl mx-auto",children:m.jsx(HA,{context:{openMenu:()=>t(!0)}})}),m.jsx(R5,{onOpenMenu:()=>t(!0)}),m.jsx(O5,{open:e,onClose:()=>t(!1)}),m.jsx(L5,{})]})}function D5(){const[e,t]=j.useState(null),[n,i]=j.useState(!0);j.useEffect(()=>{(async()=>{try{const v=localStorage.getItem("token"),y=await vb(v);t(y)}catch(v){console.error("Failed to fetch stats",v)}finally{i(!1)}})()},[]);const a=(g,v=2e3)=>{const[y,S]=j.useState(0);return j.useEffect(()=>{let b=0;const T=g/(v/16),I=setInterval(()=>{b+=T,b>=g?(S(g),clearInterval(I)):S(Math.floor(b))},16);return()=>clearInterval(I)},[g,v]),y},c=a((e==null?void 0:e.today_count)||0),f=a((e==null?void 0:e.total_count)||0);return n?m.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-pulse",children:[m.jsx("div",{className:"h-24 glass-strong rounded-3xl border-iridescent opacity-50"}),m.jsx("div",{className:"h-24 glass-strong rounded-3xl border-iridescent opacity-50"})]}):m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"glass-strong p-5 rounded-3xl shadow-xl shadow-brand-blue/20 border-iridescent flex flex-col justify-between relative overflow-hidden group",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-blue/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),m.jsx("div",{className:"absolute -right-4 -top-4 opacity-10 scale-150 group-hover:rotate-12 transition-transform duration-500",children:m.jsx(gh,{size:80,className:"text-brand-blue"})}),m.jsxs("div",{className:"relative z-10 flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-1.5 bg-brand-blue/20 rounded-lg",children:m.jsx(Dd,{size:16,className:"text-brand-blue"})}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Today"})]}),m.jsxs("div",{className:"relative z-10",children:[m.jsx("span",{className:"text-3xl font-black text-white",children:c}),m.jsx("p",{className:"text-[10px] font-bold text-slate-400",children:"Success Syncs"})]})]}),m.jsxs("div",{className:"glass-strong p-5 rounded-3xl shadow-sm border-iridescent flex flex-col justify-between relative overflow-hidden group",children:[m.jsx("div",{className:"absolute -right-4 -top-4 opacity-5 scale-150 text-slate-400 group-hover:rotate-12 transition-transform duration-500",children:m.jsx(A_,{size:80})}),m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-1.5 bg-slate-700/50 rounded-lg text-slate-400",children:m.jsx(As,{size:16})}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"All Time"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-3xl font-black text-white",children:f}),m.jsx("p",{className:"text-[10px] font-bold text-slate-400",children:"Total Updates"})]})]})]})}var He;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(He||(He={}));var ay=new Map([[He.QR_CODE,"QR_CODE"],[He.AZTEC,"AZTEC"],[He.CODABAR,"CODABAR"],[He.CODE_39,"CODE_39"],[He.CODE_93,"CODE_93"],[He.CODE_128,"CODE_128"],[He.DATA_MATRIX,"DATA_MATRIX"],[He.MAXICODE,"MAXICODE"],[He.ITF,"ITF"],[He.EAN_13,"EAN_13"],[He.EAN_8,"EAN_8"],[He.PDF_417,"PDF_417"],[He.RSS_14,"RSS_14"],[He.RSS_EXPANDED,"RSS_EXPANDED"],[He.UPC_A,"UPC_A"],[He.UPC_E,"UPC_E"],[He.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),ly;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(ly||(ly={}));function j5(e){return Object.values(He).includes(e)}var xo;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(xo||(xo={}));var ki=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[xo.SCAN_TYPE_CAMERA,xo.SCAN_TYPE_FILE],e}(),Db=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!ay.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,ay.get(t))},e}(),cy=function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),t1;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(t1||(t1={}));var jb=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:t1.UNKWOWN_ERROR}},e}(),Bb=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Gi(e){return typeof e>"u"||e===null}function B5(e,t,n){return e>n?n:e<t?t:e}var Fa=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),Kt=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),uy=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),Fb=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var i=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],c=new Set(a),f=Object.keys(t),g=0,v=f;g<v.length;g++){var y=v[g];if(c.has(y))return n.logError("".concat(y," is not supported videoConstaints."),!0),!1}return!0},e}(),n1={exports:{}};(function(e,t){(function(n,i){i(t)})(va,function(n){function i(M){return M==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,r){M.__proto__=r}||function(M,r){for(var s in r)r.hasOwnProperty(s)&&(M[s]=r[s])};function c(M,r){a(M,r);function s(){this.constructor=M}M.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function f(M,r){var s=Object.setPrototypeOf;s?s(M,r):M.__proto__=r}function g(M,r){r===void 0&&(r=M.constructor);var s=Error.captureStackTrace;s&&s(M,r)}var v=function(M){c(r,M);function r(s){var l=this.constructor,u=M.call(this,s)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),f(u,l.prototype),g(u),u}return r}(Error);class y extends v{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}y.kind="Exception";class S extends y{}S.kind="ArgumentException";class b extends y{}b.kind="IllegalArgumentException";class T{constructor(r){if(this.binarizer=r,r===null)throw new b("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,l,u){const d=this.binarizer.getLuminanceSource().crop(r,s,l,u);return new T(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new T(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new T(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class I extends y{static getChecksumInstance(){return new I}}I.kind="ChecksumException";class D{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class P{static arraycopy(r,s,l,u,d){for(;d--;)l[u++]=r[s++]}static currentTimeMillis(){return Date.now()}}class U extends y{}U.kind="IndexOutOfBoundsException";class V extends U{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}V.kind="ArrayIndexOutOfBoundsException";class O{static fill(r,s){for(let l=0,u=r.length;l<u;l++)r[l]=s}static fillWithin(r,s,l,u){O.rangeCheck(r.length,s,l);for(let d=s;d<l;d++)r[d]=u}static rangeCheck(r,s,l){if(s>l)throw new b("fromIndex("+s+") > toIndex("+l+")");if(s<0)throw new V(s);if(l>r)throw new V(l)}static asList(...r){return r}static create(r,s,l){return Array.from({length:r}).map(d=>Array.from({length:s}).fill(l))}static createInt32Array(r,s,l){return Array.from({length:r}).map(d=>Int32Array.from({length:s}).fill(l))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let l=0,u=r.length;l<u;l++)if(r[l]!==s[l])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const l of r)s=31*s+l;return s}static fillUint8Array(r,s){for(let l=0;l!==r.length;l++)r[l]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const l=new Uint8Array(s);return l.set(r),l}return r.slice(0,s)}static copyOfRange(r,s,l){const u=l-s,d=new Int32Array(u);return P.arraycopy(r,s,d,0,u),d}static binarySearch(r,s,l){l===void 0&&(l=O.numberComparator);let u=0,d=r.length-1;for(;u<=d;){const p=d+u>>1,x=l(s,r[p]);if(x>0)u=p+1;else if(x<0)d=p-1;else return p}return-u-1}static numberComparator(r,s){return r-s}}class k{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let l=31;return s=r<<16,s!==0&&(l-=16,r=s),s=r<<8,s!==0&&(l-=8,r=s),s=r<<4,s!==0&&(l-=4,r=s),s=r<<2,s!==0&&(l-=2,r=s),l-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}k.MIN_VALUE_32_BITS=-2147483648,k.MAX_VALUE=Number.MAX_SAFE_INTEGER;class H{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=H.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=H.makeArray(r);P.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const l=this.bits;let u=Math.floor(r/32),d=l[u];d&=~((1<<(r&31))-1);const p=l.length;for(;d===0;){if(++u===p)return s;d=l[u]}const x=u*32+k.numberOfTrailingZeros(d);return x>s?s:x}getNextUnset(r){const s=this.size;if(r>=s)return s;const l=this.bits;let u=Math.floor(r/32),d=~l[u];d&=~((1<<(r&31))-1);const p=l.length;for(;d===0;){if(++u===p)return s;d=~l[u]}const x=u*32+k.numberOfTrailingZeros(d);return x>s?s:x}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new b;if(s===r)return;s--;const l=Math.floor(r/32),u=Math.floor(s/32),d=this.bits;for(let p=l;p<=u;p++){const x=p>l?0:r&31,C=(2<<(p<u?31:s&31))-(1<<x);d[p]|=C}}clear(){const r=this.bits.length,s=this.bits;for(let l=0;l<r;l++)s[l]=0}isRange(r,s,l){if(s<r||r<0||s>this.size)throw new b;if(s===r)return!0;s--;const u=Math.floor(r/32),d=Math.floor(s/32),p=this.bits;for(let x=u;x<=d;x++){const _=x>u?0:r&31,E=(2<<(x<d?31:s&31))-(1<<_)&4294967295;if((p[x]&E)!==(l?E:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new b("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let l=s;l>0;l--)this.appendBit((r>>l-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let l=0;l<s;l++)this.appendBit(r.get(l))}xor(r){if(this.size!==r.size)throw new b("Sizes don't match");const s=this.bits;for(let l=0,u=s.length;l<u;l++)s[l]^=r.bits[l]}toBytes(r,s,l,u){for(let d=0;d<u;d++){let p=0;for(let x=0;x<8;x++)this.get(r)&&(p|=1<<7-x),r++;s[l+d]=p}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),l=s+1,u=this.bits;for(let d=0;d<l;d++){let p=u[d];p=p>>1&1431655765|(p&1431655765)<<1,p=p>>2&858993459|(p&858993459)<<2,p=p>>4&252645135|(p&252645135)<<4,p=p>>8&16711935|(p&16711935)<<8,p=p>>16&65535|(p&65535)<<16,r[s-d]=p}if(this.size!==l*32){const d=l*32-this.size;let p=r[0]>>>d;for(let x=1;x<l;x++){const _=r[x];p|=_<<32-d,r[x-1]=p,p=_>>>d}r[l-1]=p}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof H))return!1;const s=r;return this.size===s.size&&O.equals(this.bits,s.bits)}hashCode(){return 31*this.size+O.hashCode(this.bits)}toString(){let r="";for(let s=0,l=this.size;s<l;s++)s&7||(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new H(this.size,this.bits.slice())}}var X;(function(M){M[M.OTHER=0]="OTHER",M[M.PURE_BARCODE=1]="PURE_BARCODE",M[M.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",M[M.TRY_HARDER=3]="TRY_HARDER",M[M.CHARACTER_SET=4]="CHARACTER_SET",M[M.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",M[M.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",M[M.ASSUME_GS1=7]="ASSUME_GS1",M[M.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",M[M.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",M[M.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(X||(X={}));var G=X;class Z extends y{static getFormatInstance(){return new Z}}Z.kind="FormatException";var J;(function(M){M[M.Cp437=0]="Cp437",M[M.ISO8859_1=1]="ISO8859_1",M[M.ISO8859_2=2]="ISO8859_2",M[M.ISO8859_3=3]="ISO8859_3",M[M.ISO8859_4=4]="ISO8859_4",M[M.ISO8859_5=5]="ISO8859_5",M[M.ISO8859_6=6]="ISO8859_6",M[M.ISO8859_7=7]="ISO8859_7",M[M.ISO8859_8=8]="ISO8859_8",M[M.ISO8859_9=9]="ISO8859_9",M[M.ISO8859_10=10]="ISO8859_10",M[M.ISO8859_11=11]="ISO8859_11",M[M.ISO8859_13=12]="ISO8859_13",M[M.ISO8859_14=13]="ISO8859_14",M[M.ISO8859_15=14]="ISO8859_15",M[M.ISO8859_16=15]="ISO8859_16",M[M.SJIS=16]="SJIS",M[M.Cp1250=17]="Cp1250",M[M.Cp1251=18]="Cp1251",M[M.Cp1252=19]="Cp1252",M[M.Cp1256=20]="Cp1256",M[M.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",M[M.UTF8=22]="UTF8",M[M.ASCII=23]="ASCII",M[M.Big5=24]="Big5",M[M.GB18030=25]="GB18030",M[M.EUC_KR=26]="EUC_KR"})(J||(J={}));class z{constructor(r,s,l,...u){this.valueIdentifier=r,this.name=l,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=u,z.VALUE_IDENTIFIER_TO_ECI.set(r,this),z.NAME_TO_ECI.set(l,this);const d=this.values;for(let p=0,x=d.length;p!==x;p++){const _=d[p];z.VALUES_TO_ECI.set(_,this)}for(const p of u)z.NAME_TO_ECI.set(p,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new Z("incorect value");const s=z.VALUES_TO_ECI.get(r);if(s===void 0)throw new Z("incorect value");return s}static getCharacterSetECIByName(r){const s=z.NAME_TO_ECI.get(r);if(s===void 0)throw new Z("incorect value");return s}equals(r){if(!(r instanceof z))return!1;const s=r;return this.getName()===s.getName()}}z.VALUE_IDENTIFIER_TO_ECI=new Map,z.VALUES_TO_ECI=new Map,z.NAME_TO_ECI=new Map,z.Cp437=new z(J.Cp437,Int32Array.from([0,2]),"Cp437"),z.ISO8859_1=new z(J.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),z.ISO8859_2=new z(J.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),z.ISO8859_3=new z(J.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),z.ISO8859_4=new z(J.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),z.ISO8859_5=new z(J.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),z.ISO8859_6=new z(J.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),z.ISO8859_7=new z(J.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),z.ISO8859_8=new z(J.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),z.ISO8859_9=new z(J.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),z.ISO8859_10=new z(J.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),z.ISO8859_11=new z(J.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),z.ISO8859_13=new z(J.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),z.ISO8859_14=new z(J.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),z.ISO8859_15=new z(J.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),z.ISO8859_16=new z(J.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),z.SJIS=new z(J.SJIS,20,"SJIS","Shift_JIS"),z.Cp1250=new z(J.Cp1250,21,"Cp1250","windows-1250"),z.Cp1251=new z(J.Cp1251,22,"Cp1251","windows-1251"),z.Cp1252=new z(J.Cp1252,23,"Cp1252","windows-1252"),z.Cp1256=new z(J.Cp1256,24,"Cp1256","windows-1256"),z.UnicodeBigUnmarked=new z(J.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),z.UTF8=new z(J.UTF8,26,"UTF8","UTF-8"),z.ASCII=new z(J.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),z.Big5=new z(J.Big5,28,"Big5"),z.GB18030=new z(J.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),z.EUC_KR=new z(J.EUC_KR,30,"EUC_KR","EUC-KR");class te extends y{}te.kind="UnsupportedOperationException";class me{static decode(r,s){const l=this.encodingName(s);return this.customDecoder?this.customDecoder(r,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(r,l):new TextDecoder(l).decode(r)}static shouldDecodeOnFallback(r){return!me.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const l=this.encodingName(s);return this.customEncoder?this.customEncoder(r,l):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof z?r:z.getCharacterSetECIByName(r)}static decodeFallback(r,s){const l=this.encodingCharacterSet(s);if(me.isDecodeFallbackSupported(l)){let u="";for(let d=0,p=r.length;d<p;d++){let x=r[d].toString(16);x.length<2&&(x="0"+x),u+="%"+x}return decodeURIComponent(u)}if(l.equals(z.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new te(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(z.UTF8)||r.equals(z.ISO8859_1)||r.equals(z.ASCII)}static encodeFallback(r){const l=btoa(unescape(encodeURIComponent(r))).split(""),u=[];for(let d=0;d<l.length;d++)u.push(l[d].charCodeAt(0));return new Uint8Array(u)}}class fe{static castAsNonUtf8Char(r,s=null){const l=s?s.getName():this.ISO88591;return me.decode(new Uint8Array([r]),l)}static guessEncoding(r,s){if(s!=null&&s.get(G.CHARACTER_SET)!==void 0)return s.get(G.CHARACTER_SET).toString();const l=r.length;let u=!0,d=!0,p=!0,x=0,_=0,C=0,E=0,R=0,B=0,Y=0,Q=0,ee=0,ie=0,le=0;const Ae=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let Ee=0;Ee<l&&(u||d||p);Ee++){const be=r[Ee]&255;p&&(x>0?be&128?x--:p=!1:be&128&&(be&64?(x++,be&32?(x++,be&16?(x++,be&8?p=!1:E++):C++):_++):p=!1)),u&&(be>127&&be<160?u=!1:be>159&&(be<192||be===215||be===247)&&le++),d&&(R>0?be<64||be===127||be>252?d=!1:R--:be===128||be===160||be>239?d=!1:be>160&&be<224?(B++,Q=0,Y++,Y>ee&&(ee=Y)):be>127?(R++,Y=0,Q++,Q>ie&&(ie=Q)):(Y=0,Q=0))}return p&&x>0&&(p=!1),d&&R>0&&(d=!1),p&&(Ae||_+C+E>0)?fe.UTF8:d&&(fe.ASSUME_SHIFT_JIS||ee>=3||ie>=3)?fe.SHIFT_JIS:u&&d?ee===2&&B===2||le*10>=l?fe.SHIFT_JIS:fe.ISO88591:u?fe.ISO88591:d?fe.SHIFT_JIS:p?fe.UTF8:fe.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let l=-1;function u(p,x,_,C,E,R){if(p==="%%")return"%";if(s[++l]===void 0)return;p=C?parseInt(C.substr(1)):void 0;let B=E?parseInt(E.substr(1)):void 0,Y;switch(R){case"s":Y=s[l];break;case"c":Y=s[l][0];break;case"f":Y=parseFloat(s[l]).toFixed(p);break;case"p":Y=parseFloat(s[l]).toPrecision(p);break;case"e":Y=parseFloat(s[l]).toExponential(p);break;case"x":Y=parseInt(s[l]).toString(B||16);break;case"d":Y=parseFloat(parseInt(s[l],B||10).toPrecision(p)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString(B);let Q=parseInt(_),ee=_&&_[0]+""=="0"?"0":" ";for(;Y.length<Q;)Y=x!==void 0?Y+ee:ee+Y;return Y}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,u)}static getBytes(r,s){return me.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}fe.SHIFT_JIS=z.SJIS.getName(),fe.GB2312="GB2312",fe.ISO88591=z.ISO8859_1.getName(),fe.EUC_JP="EUC_JP",fe.UTF8=z.UTF8.getName(),fe.PLATFORM_DEFAULT_ENCODING=fe.UTF8,fe.ASSUME_SHIFT_JIS=!1;class Me{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=fe.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,l){for(let u=s;s<s+l;u++)this.append(r[u]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class we{constructor(r,s,l,u){if(this.width=r,this.height=s,this.rowSize=l,this.bits=u,s==null&&(s=r),this.height=s,r<1||s<1)throw new b("Both dimensions must be greater than 0");l==null&&(l=Math.floor((r+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,l=r[0].length,u=new we(l,s);for(let d=0;d<s;d++){const p=r[d];for(let x=0;x<l;x++)p[x]&&u.set(x,d)}return u}static parseFromString(r,s,l){if(r===null)throw new b("stringRepresentation cannot be null");const u=new Array(r.length);let d=0,p=0,x=-1,_=0,C=0;for(;C<r.length;)if(r.charAt(C)===`
`||r.charAt(C)==="\r"){if(d>p){if(x===-1)x=d-p;else if(d-p!==x)throw new b("row lengths do not match");p=d,_++}C++}else if(r.substring(C,C+s.length)===s)C+=s.length,u[d]=!0,d++;else if(r.substring(C,C+l.length)===l)C+=l.length,u[d]=!1,d++;else throw new b("illegal character encountered: "+r.substring(C));if(d>p){if(x===-1)x=d-p;else if(d-p!==x)throw new b("row lengths do not match");_++}const E=new we(x,_);for(let R=0;R<d;R++)u[R]&&E.set(Math.floor(R%x),Math.floor(R/x));return E}get(r,s){const l=s*this.rowSize+Math.floor(r/32);return(this.bits[l]>>>(r&31)&1)!==0}set(r,s){const l=s*this.rowSize+Math.floor(r/32);this.bits[l]|=1<<(r&31)&4294967295}unset(r,s){const l=s*this.rowSize+Math.floor(r/32);this.bits[l]&=~(1<<(r&31)&4294967295)}flip(r,s){const l=s*this.rowSize+Math.floor(r/32);this.bits[l]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new b("input matrix dimensions do not match");const s=new H(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let d=0,p=this.height;d<p;d++){const x=d*l,_=r.getRow(d,s).getBitArray();for(let C=0;C<l;C++)u[x+C]^=_[C]}}clear(){const r=this.bits,s=r.length;for(let l=0;l<s;l++)r[l]=0}setRegion(r,s,l,u){if(s<0||r<0)throw new b("Left and top must be nonnegative");if(u<1||l<1)throw new b("Height and width must be at least 1");const d=r+l,p=s+u;if(p>this.height||d>this.width)throw new b("The region must fit inside the matrix");const x=this.rowSize,_=this.bits;for(let C=s;C<p;C++){const E=C*x;for(let R=r;R<d;R++)_[E+Math.floor(R/32)]|=1<<(R&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new H(this.width):s.clear();const l=this.rowSize,u=this.bits,d=r*l;for(let p=0;p<l;p++)s.setBulk(p*32,u[d+p]);return s}setRow(r,s){P.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let l=new H(r),u=new H(r);for(let d=0,p=Math.floor((s+1)/2);d<p;d++)l=this.getRow(d,l),u=this.getRow(s-1-d,u),l.reverse(),u.reverse(),this.setRow(d,u),this.setRow(s-1-d,l)}getEnclosingRectangle(){const r=this.width,s=this.height,l=this.rowSize,u=this.bits;let d=r,p=s,x=-1,_=-1;for(let C=0;C<s;C++)for(let E=0;E<l;E++){const R=u[C*l+E];if(R!==0){if(C<p&&(p=C),C>_&&(_=C),E*32<d){let B=0;for(;!(R<<31-B&4294967295);)B++;E*32+B<d&&(d=E*32+B)}if(E*32+31>x){let B=31;for(;!(R>>>B);)B--;E*32+B>x&&(x=E*32+B)}}}return x<d||_<p?null:Int32Array.from([d,p,x-d+1,_-p+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let l=0;for(;l<s.length&&s[l]===0;)l++;if(l===s.length)return null;const u=l/r;let d=l%r*32;const p=s[l];let x=0;for(;!(p<<31-x&4294967295);)x++;return d+=x,Int32Array.from([d,u])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let l=s.length-1;for(;l>=0&&s[l]===0;)l--;if(l<0)return null;const u=Math.floor(l/r);let d=Math.floor(l%r)*32;const p=s[l];let x=31;for(;!(p>>>x);)x--;return d+=x,Int32Array.from([d,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof we))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&O.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+O.hashCode(this.bits),r}toString(r="X ",s="  ",l=`
`){return this.buildToString(r,s,l)}buildToString(r,s,l){let u=new Me;for(let d=0,p=this.height;d<p;d++){for(let x=0,_=this.width;x<_;x++)u.append(this.get(x,d)?r:s);u.append(l)}return u.toString()}clone(){return new we(this.width,this.height,this.rowSize,this.bits.slice())}}class ae extends y{static getNotFoundInstance(){return new ae}}ae.kind="NotFoundException";class Ce extends D{constructor(r){super(r),this.luminances=Ce.EMPTY,this.buckets=new Int32Array(Ce.LUMINANCE_BUCKETS)}getBlackRow(r,s){const l=this.getLuminanceSource(),u=l.getWidth();s==null||s.getSize()<u?s=new H(u):s.clear(),this.initArrays(u);const d=l.getRow(r,this.luminances),p=this.buckets;for(let _=0;_<u;_++)p[(d[_]&255)>>Ce.LUMINANCE_SHIFT]++;const x=Ce.estimateBlackPoint(p);if(u<3)for(let _=0;_<u;_++)(d[_]&255)<x&&s.set(_);else{let _=d[0]&255,C=d[1]&255;for(let E=1;E<u-1;E++){const R=d[E+1]&255;(C*4-_-R)/2<x&&s.set(E),_=C,C=R}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),l=r.getHeight(),u=new we(s,l);this.initArrays(s);const d=this.buckets;for(let _=1;_<5;_++){const C=Math.floor(l*_/5),E=r.getRow(C,this.luminances),R=Math.floor(s*4/5);for(let B=Math.floor(s/5);B<R;B++){const Y=E[B]&255;d[Y>>Ce.LUMINANCE_SHIFT]++}}const p=Ce.estimateBlackPoint(d),x=r.getMatrix();for(let _=0;_<l;_++){const C=_*s;for(let E=0;E<s;E++)(x[C+E]&255)<p&&u.set(E,_)}return u}createBinarizer(r){return new Ce(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let l=0;l<Ce.LUMINANCE_BUCKETS;l++)s[l]=0}static estimateBlackPoint(r){const s=r.length;let l=0,u=0,d=0;for(let E=0;E<s;E++)r[E]>d&&(u=E,d=r[E]),r[E]>l&&(l=r[E]);let p=0,x=0;for(let E=0;E<s;E++){const R=E-u,B=r[E]*R*R;B>x&&(p=E,x=B)}if(u>p){const E=u;u=p,p=E}if(p-u<=s/16)throw new ae;let _=p-1,C=-1;for(let E=p-1;E>u;E--){const R=E-u,B=R*R*(p-E)*(l-r[E]);B>C&&(_=E,C=B)}return _<<Ce.LUMINANCE_SHIFT}}Ce.LUMINANCE_BITS=5,Ce.LUMINANCE_SHIFT=8-Ce.LUMINANCE_BITS,Ce.LUMINANCE_BUCKETS=1<<Ce.LUMINANCE_BITS,Ce.EMPTY=Uint8ClampedArray.from([0]);class ke extends Ce{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),l=r.getHeight();if(s>=ke.MINIMUM_DIMENSION&&l>=ke.MINIMUM_DIMENSION){const u=r.getMatrix();let d=s>>ke.BLOCK_SIZE_POWER;s&ke.BLOCK_SIZE_MASK&&d++;let p=l>>ke.BLOCK_SIZE_POWER;l&ke.BLOCK_SIZE_MASK&&p++;const x=ke.calculateBlackPoints(u,d,p,s,l),_=new we(s,l);ke.calculateThresholdForBlock(u,d,p,s,l,x,_),this.matrix=_}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new ke(r)}static calculateThresholdForBlock(r,s,l,u,d,p,x){const _=d-ke.BLOCK_SIZE,C=u-ke.BLOCK_SIZE;for(let E=0;E<l;E++){let R=E<<ke.BLOCK_SIZE_POWER;R>_&&(R=_);const B=ke.cap(E,2,l-3);for(let Y=0;Y<s;Y++){let Q=Y<<ke.BLOCK_SIZE_POWER;Q>C&&(Q=C);const ee=ke.cap(Y,2,s-3);let ie=0;for(let Ae=-2;Ae<=2;Ae++){const Ee=p[B+Ae];ie+=Ee[ee-2]+Ee[ee-1]+Ee[ee]+Ee[ee+1]+Ee[ee+2]}const le=ie/25;ke.thresholdBlock(r,Q,R,le,u,x)}}}static cap(r,s,l){return r<s?s:r>l?l:r}static thresholdBlock(r,s,l,u,d,p){for(let x=0,_=l*d+s;x<ke.BLOCK_SIZE;x++,_+=d)for(let C=0;C<ke.BLOCK_SIZE;C++)(r[_+C]&255)<=u&&p.set(s+C,l+x)}static calculateBlackPoints(r,s,l,u,d){const p=d-ke.BLOCK_SIZE,x=u-ke.BLOCK_SIZE,_=new Array(l);for(let C=0;C<l;C++){_[C]=new Int32Array(s);let E=C<<ke.BLOCK_SIZE_POWER;E>p&&(E=p);for(let R=0;R<s;R++){let B=R<<ke.BLOCK_SIZE_POWER;B>x&&(B=x);let Y=0,Q=255,ee=0;for(let le=0,Ae=E*u+B;le<ke.BLOCK_SIZE;le++,Ae+=u){for(let Ee=0;Ee<ke.BLOCK_SIZE;Ee++){const be=r[Ae+Ee]&255;Y+=be,be<Q&&(Q=be),be>ee&&(ee=be)}if(ee-Q>ke.MIN_DYNAMIC_RANGE)for(le++,Ae+=u;le<ke.BLOCK_SIZE;le++,Ae+=u)for(let Ee=0;Ee<ke.BLOCK_SIZE;Ee++)Y+=r[Ae+Ee]&255}let ie=Y>>ke.BLOCK_SIZE_POWER*2;if(ee-Q<=ke.MIN_DYNAMIC_RANGE&&(ie=Q/2,C>0&&R>0)){const le=(_[C-1][R]+2*_[C][R-1]+_[C-1][R-1])/4;Q<le&&(ie=le)}_[C][R]=ie}}return _}}ke.BLOCK_SIZE_POWER=3,ke.BLOCK_SIZE=1<<ke.BLOCK_SIZE_POWER,ke.BLOCK_SIZE_MASK=ke.BLOCK_SIZE-1,ke.MINIMUM_DIMENSION=ke.BLOCK_SIZE*5,ke.MIN_DYNAMIC_RANGE=24;class ue{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,l,u){throw new te("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new te("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new te("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new Me;for(let l=0;l<this.height;l++){const u=this.getRow(l,r);for(let d=0;d<this.width;d++){const p=u[d]&255;let x;p<64?x="#":p<128?x="+":p<192?x=".":x=" ",s.append(x)}s.append(`
`)}return s.toString()}}class je extends ue{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const l=this.delegate.getRow(r,s),u=this.getWidth();for(let d=0;d<u;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(s);for(let u=0;u<s;u++)l[u]=255-(r[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,l,u){return new je(this.delegate.crop(r,s,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new je(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new je(this.delegate.rotateCounterClockwise45())}}class ge extends ue{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=ge.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return ge.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,l){const u=new Uint8ClampedArray(s*l);for(let d=0,p=0,x=r.length;d<x;d+=4,p++){let _;if(r[d+3]===0)_=255;else{const E=r[d],R=r[d+1],B=r[d+2];_=306*E+601*R+117*B+512>>10}u[p]=_}return u}getRow(r,s){if(r<0||r>=this.getHeight())throw new b("Requested row is outside the image: "+r);const l=this.getWidth(),u=r*l;return s===null?s=this.buffer.slice(u,u+l):(s.length<l&&(s=new Uint8ClampedArray(l)),s.set(this.buffer.slice(u,u+l))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,l,u){return super.crop(r,s,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),l=s.getContext("2d"),u=r*ge.DEGREE_TO_RADIANS,d=this.canvas.width,p=this.canvas.height,x=Math.ceil(Math.abs(Math.cos(u))*d+Math.abs(Math.sin(u))*p),_=Math.ceil(Math.abs(Math.sin(u))*d+Math.abs(Math.cos(u))*p);return s.width=x,s.height=_,l.translate(x/2,_/2),l.rotate(u),l.drawImage(this.canvas,d/-2,p/-2),this.buffer=ge.makeBufferFromCanvasImageData(s),this}invert(){return new je(this)}}ge.DEGREE_TO_RADIANS=Math.PI/180;class Se{constructor(r,s,l){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Be=(globalThis||va||self||window||void 0)&&(globalThis||va||self||window||void 0).__awaiter||function(M,r,s,l){function u(d){return d instanceof s?d:new s(function(p){p(d)})}return new(s||(s=Promise))(function(d,p){function x(E){try{C(l.next(E))}catch(R){p(R)}}function _(E){try{C(l.throw(E))}catch(R){p(R)}}function C(E){E.done?d(E.value):u(E.value).then(x,_)}C((l=l.apply(M,r||[])).next())})};class Pe{constructor(r,s=500,l){this.reader=r,this.timeBetweenScansMillis=s,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Be(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const l of r){const u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;const d=l.deviceId||l.id,p=l.label||`Video device ${s.length+1}`,x=l.groupId,_={deviceId:d,label:p,kind:u,groupId:x};s.push(_)}return s})}getVideoInputDevices(){return Be(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new Se(s.deviceId,s.label))})}findDeviceById(r){return Be(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(l=>l.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return Be(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return Be(this,void 0,void 0,function*(){this.reset();let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeOnceFromConstraints(u,s)})}decodeOnceFromConstraints(r,s){return Be(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(l,s)})}decodeOnceFromStream(r,s){return Be(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(r,s,l){return Be(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,l)})}decodeFromVideoDevice(r,s,l){return Be(this,void 0,void 0,function*(){let u;r?u={deviceId:{exact:r}}:u={facingMode:"environment"};const d={video:u};return yield this.decodeFromConstraints(d,s,l)})}decodeFromConstraints(r,s,l){return Be(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(u,s,l)})}decodeFromStream(r,s,l){return Be(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return Be(this,void 0,void 0,function*(){const l=this.prepareVideoElement(s);return this.addVideoSource(l,r),this.videoElement=l,this.stream=r,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(r){return new Promise((s,l)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Be(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const l=document.getElementById(r);if(!l)throw new S(`element with id '${r}' not found`);if(l.nodeName.toLowerCase()!==s.toLowerCase())throw new S(`element with id '${r}' must be an ${s} element`);return l}decodeFromImage(r,s){if(!r&&!s)throw new S("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new S("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,l){if(r===void 0&&s===void 0)throw new S("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,l):this.decodeFromVideoElementContinuously(r,l)}decodeFromImageElement(r){if(!r)throw new S("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let l;return this.isImageLoaded(s)?l=this.decodeOnce(s,!1,!0):l=this._decodeOnLoadImage(s),l}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const l=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(l,s)}_decodeFromVideoElementSetup(r){if(!r)throw new S("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const l=this._decodeOnLoadImage(s);return s.src=r,l}decodeFromVideoUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),l=this.decodeFromVideoElement(s);return s.src=r,l}decodeFromVideoUrlContinuously(r,s){if(!r)throw new S("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,s);return l.src=r,u}_decodeOnLoadImage(r){return new Promise((s,l)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,l),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Be(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return Be(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,l=!0){this._stopAsyncDecode=!1;const u=(d,p)=>{if(this._stopAsyncDecode){p(new ae("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const x=this.decode(r);d(x)}catch(x){const _=s&&x instanceof ae,E=(x instanceof I||x instanceof Z)&&l;if(_||E)return setTimeout(u,this._timeBetweenDecodingAttempts,d,p);p(x)}};return new Promise((d,p)=>u(d,p))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(r);s(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){s(null,u);const d=u instanceof I||u instanceof Z,p=u instanceof ae;(d||p)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,l){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,l=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),l=new ge(s),u=new ke(l);return new T(u)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let l,u;return typeof r<"u"&&(r instanceof HTMLVideoElement?(l=r.videoWidth,u=r.videoHeight):r instanceof HTMLImageElement&&(l=r.naturalWidth||r.width,u=r.naturalHeight||r.height)),s.style.width=l+"px",s.style.height=u+"px",s.width=l,s.height=u,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class ze{constructor(r,s,l=s==null?0:8*s.length,u,d,p=P.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=l,this.resultPoints=u,this.format=d,this.timestamp=p,this.text=r,this.rawBytes=s,l==null?this.numBits=s==null?0:8*s.length:this.numBits=l,this.resultPoints=u,this.format=d,this.resultMetadata=null,p==null?this.timestamp=P.currentTimeMillis():this.timestamp=p}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const l=new Array(s.length+r.length);P.arraycopy(s,0,l,0,s.length),P.arraycopy(r,0,l,s.length,r.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var $;(function(M){M[M.AZTEC=0]="AZTEC",M[M.CODABAR=1]="CODABAR",M[M.CODE_39=2]="CODE_39",M[M.CODE_93=3]="CODE_93",M[M.CODE_128=4]="CODE_128",M[M.DATA_MATRIX=5]="DATA_MATRIX",M[M.EAN_8=6]="EAN_8",M[M.EAN_13=7]="EAN_13",M[M.ITF=8]="ITF",M[M.MAXICODE=9]="MAXICODE",M[M.PDF_417=10]="PDF_417",M[M.QR_CODE=11]="QR_CODE",M[M.RSS_14=12]="RSS_14",M[M.RSS_EXPANDED=13]="RSS_EXPANDED",M[M.UPC_A=14]="UPC_A",M[M.UPC_E=15]="UPC_E",M[M.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})($||($={}));var re=$,Ie;(function(M){M[M.OTHER=0]="OTHER",M[M.ORIENTATION=1]="ORIENTATION",M[M.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",M[M.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",M[M.ISSUE_NUMBER=4]="ISSUE_NUMBER",M[M.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",M[M.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",M[M.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",M[M.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",M[M.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",M[M.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ie||(Ie={}));var Xe=Ie;class Et{constructor(r,s,l,u,d=-1,p=-1){this.rawBytes=r,this.text=s,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=p,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Vt{exp(r){return this.expTable[r]}log(r){if(r===0)throw new b;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class nt{constructor(r,s){if(s.length===0)throw new b;this.field=r;const l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),P.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let l;if(r===1){l=0;for(let p=0,x=s.length;p!==x;p++){const _=s[p];l=Vt.addOrSubtract(l,_)}return l}l=s[0];const u=s.length,d=this.field;for(let p=1;p<u;p++)l=Vt.addOrSubtract(d.multiply(r,l),s[p]);return l}addOrSubtract(r){if(!this.field.equals(r.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,l=r.coefficients;if(s.length>l.length){const p=s;s=l,l=p}let u=new Int32Array(l.length);const d=l.length-s.length;P.arraycopy(l,0,u,0,d);for(let p=d;p<l.length;p++)u[p]=Vt.addOrSubtract(s[p-d],l[p]);return new nt(this.field,u)}multiply(r){if(!this.field.equals(r.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,l=s.length,u=r.coefficients,d=u.length,p=new Int32Array(l+d-1),x=this.field;for(let _=0;_<l;_++){const C=s[_];for(let E=0;E<d;E++)p[_+E]=Vt.addOrSubtract(p[_+E],x.multiply(C,u[E]))}return new nt(x,p)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,l=this.field,u=new Int32Array(s),d=this.coefficients;for(let p=0;p<s;p++)u[p]=l.multiply(d[p],r);return new nt(l,u)}multiplyByMonomial(r,s){if(r<0)throw new b;if(s===0)return this.field.getZero();const l=this.coefficients,u=l.length,d=new Int32Array(u+r),p=this.field;for(let x=0;x<u;x++)d[x]=p.multiply(l[x],s);return new nt(p,d)}divide(r){if(!this.field.equals(r.field))throw new b("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new b("Divide by 0");const s=this.field;let l=s.getZero(),u=this;const d=r.getCoefficient(r.getDegree()),p=s.inverse(d);for(;u.getDegree()>=r.getDegree()&&!u.isZero();){const x=u.getDegree()-r.getDegree(),_=s.multiply(u.getCoefficient(u.getDegree()),p),C=r.multiplyByMonomial(x,_),E=s.buildMonomial(x,_);l=l.addOrSubtract(E),u=u.addOrSubtract(C)}return[l,u]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);if(l!==0){if(l<0?(r+=" - ",l=-l):r.length>0&&(r+=" + "),s===0||l!==1){const u=this.field.log(l);u===0?r+="1":u===1?r+="a":(r+="a^",r+=u)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class en extends y{}en.kind="ArithmeticException";class ut extends Vt{constructor(r,s,l){super(),this.primitive=r,this.size=s,this.generatorBase=l;const u=new Int32Array(s);let d=1;for(let x=0;x<s;x++)u[x]=d,d*=2,d>=s&&(d^=r,d&=s-1);this.expTable=u;const p=new Int32Array(s);for(let x=0;x<s-1;x++)p[u[x]]=x;this.logTable=p,this.zero=new nt(this,Int32Array.from([0])),this.one=new nt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new b;if(s===0)return this.zero;const l=new Int32Array(r+1);return l[0]=s,new nt(this,l)}inverse(r){if(r===0)throw new en;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+k.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}ut.AZTEC_DATA_12=new ut(4201,4096,1),ut.AZTEC_DATA_10=new ut(1033,1024,1),ut.AZTEC_DATA_6=new ut(67,64,1),ut.AZTEC_PARAM=new ut(19,16,1),ut.QR_CODE_FIELD_256=new ut(285,256,0),ut.DATA_MATRIX_FIELD_256=new ut(301,256,1),ut.AZTEC_DATA_8=ut.DATA_MATRIX_FIELD_256,ut.MAXICODE_FIELD_64=ut.AZTEC_DATA_6;class Dn extends y{}Dn.kind="ReedSolomonException";class In extends y{}In.kind="IllegalStateException";class rr{constructor(r){this.field=r}decode(r,s){const l=this.field,u=new nt(l,r),d=new Int32Array(s);let p=!0;for(let Y=0;Y<s;Y++){const Q=u.evaluateAt(l.exp(Y+l.getGeneratorBase()));d[d.length-1-Y]=Q,Q!==0&&(p=!1)}if(p)return;const x=new nt(l,d),_=this.runEuclideanAlgorithm(l.buildMonomial(s,1),x,s),C=_[0],E=_[1],R=this.findErrorLocations(C),B=this.findErrorMagnitudes(E,R);for(let Y=0;Y<R.length;Y++){const Q=r.length-1-l.log(R[Y]);if(Q<0)throw new Dn("Bad error location");r[Q]=ut.addOrSubtract(r[Q],B[Y])}}runEuclideanAlgorithm(r,s,l){if(r.getDegree()<s.getDegree()){const Y=r;r=s,s=Y}const u=this.field;let d=r,p=s,x=u.getZero(),_=u.getOne();for(;p.getDegree()>=(l/2|0);){let Y=d,Q=x;if(d=p,x=_,d.isZero())throw new Dn("r_{i-1} was zero");p=Y;let ee=u.getZero();const ie=d.getCoefficient(d.getDegree()),le=u.inverse(ie);for(;p.getDegree()>=d.getDegree()&&!p.isZero();){const Ae=p.getDegree()-d.getDegree(),Ee=u.multiply(p.getCoefficient(p.getDegree()),le);ee=ee.addOrSubtract(u.buildMonomial(Ae,Ee)),p=p.addOrSubtract(d.multiplyByMonomial(Ae,Ee))}if(_=ee.multiply(x).addOrSubtract(Q),p.getDegree()>=d.getDegree())throw new In("Division algorithm failed to reduce polynomial?")}const C=_.getCoefficient(0);if(C===0)throw new Dn("sigmaTilde(0) was zero");const E=u.inverse(C),R=_.multiplyScalar(E),B=p.multiplyScalar(E);return[R,B]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const l=new Int32Array(s);let u=0;const d=this.field;for(let p=1;p<d.getSize()&&u<s;p++)r.evaluateAt(p)===0&&(l[u]=d.inverse(p),u++);if(u!==s)throw new Dn("Error locator degree does not match number of roots");return l}findErrorMagnitudes(r,s){const l=s.length,u=new Int32Array(l),d=this.field;for(let p=0;p<l;p++){const x=d.inverse(s[p]);let _=1;for(let C=0;C<l;C++)if(p!==C){const E=d.multiply(s[C],x),R=E&1?E&-2:E|1;_=d.multiply(_,R)}u[p]=d.multiply(r.evaluateAt(x),d.inverse(_)),d.getGeneratorBase()!==0&&(u[p]=d.multiply(u[p],x))}return u}}var xt;(function(M){M[M.UPPER=0]="UPPER",M[M.LOWER=1]="LOWER",M[M.MIXED=2]="MIXED",M[M.DIGIT=3]="DIGIT",M[M.PUNCT=4]="PUNCT",M[M.BINARY=5]="BINARY"})(xt||(xt={}));class Nt{decode(r){this.ddata=r;let s=r.getBits(),l=this.extractBits(s),u=this.correctBits(l),d=Nt.convertBoolArrayToByteArray(u),p=Nt.getEncodedData(u),x=new Et(d,p,null,null);return x.setNumBits(u.length),x}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,l=xt.UPPER,u=xt.UPPER,d="",p=0;for(;p<s;)if(u===xt.BINARY){if(s-p<5)break;let x=Nt.readCode(r,p,5);if(p+=5,x===0){if(s-p<11)break;x=Nt.readCode(r,p,11)+31,p+=11}for(let _=0;_<x;_++){if(s-p<8){p=s;break}const C=Nt.readCode(r,p,8);d+=fe.castAsNonUtf8Char(C),p+=8}u=l}else{let x=u===xt.DIGIT?4:5;if(s-p<x)break;let _=Nt.readCode(r,p,x);p+=x;let C=Nt.getCharacter(u,_);C.startsWith("CTRL_")?(l=u,u=Nt.getTable(C.charAt(5)),C.charAt(6)==="L"&&(l=u)):(d+=C,u=l)}return d}static getTable(r){switch(r){case"L":return xt.LOWER;case"P":return xt.PUNCT;case"M":return xt.MIXED;case"D":return xt.DIGIT;case"B":return xt.BINARY;case"U":default:return xt.UPPER}}static getCharacter(r,s){switch(r){case xt.UPPER:return Nt.UPPER_TABLE[s];case xt.LOWER:return Nt.LOWER_TABLE[s];case xt.MIXED:return Nt.MIXED_TABLE[s];case xt.PUNCT:return Nt.PUNCT_TABLE[s];case xt.DIGIT:return Nt.DIGIT_TABLE[s];default:throw new In("Bad table")}}correctBits(r){let s,l;this.ddata.getNbLayers()<=2?(l=6,s=ut.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,s=ut.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,s=ut.AZTEC_DATA_10):(l=12,s=ut.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),d=r.length/l;if(d<u)throw new Z;let p=r.length%l,x=new Int32Array(d);for(let B=0;B<d;B++,p+=l)x[B]=Nt.readCode(r,p,l);try{new rr(s).decode(x,d-u)}catch(B){throw new Z(B)}let _=(1<<l)-1,C=0;for(let B=0;B<u;B++){let Y=x[B];if(Y===0||Y===_)throw new Z;(Y===1||Y===_-1)&&C++}let E=new Array(u*l-C),R=0;for(let B=0;B<u;B++){let Y=x[B];if(Y===1||Y===_-1)E.fill(Y>1,R,R+l-1),R+=l-1;else for(let Q=l-1;Q>=0;--Q)E[R++]=(Y&1<<Q)!==0}return E}extractBits(r){let s=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(s?11:14)+l*4,d=new Int32Array(u),p=new Array(this.totalBitsInLayer(l,s));if(s)for(let x=0;x<d.length;x++)d[x]=x;else{let x=u+1+2*k.truncDivision(k.truncDivision(u,2)-1,15),_=u/2,C=k.truncDivision(x,2);for(let E=0;E<_;E++){let R=E+k.truncDivision(E,15);d[_-E-1]=C-R-1,d[_+E]=C+R+1}}for(let x=0,_=0;x<l;x++){let C=(l-x)*4+(s?9:12),E=x*2,R=u-1-E;for(let B=0;B<C;B++){let Y=B*2;for(let Q=0;Q<2;Q++)p[_+Y+Q]=r.get(d[E+Q],d[E+B]),p[_+2*C+Y+Q]=r.get(d[E+B],d[R-Q]),p[_+4*C+Y+Q]=r.get(d[R-Q],d[R-B]),p[_+6*C+Y+Q]=r.get(d[R-B],d[E+Q])}_+=C*8}return p}static readCode(r,s,l){let u=0;for(let d=s;d<s+l;d++)u<<=1,r[d]&&(u|=1);return u}static readByte(r,s){let l=r.length-s;return l>=8?Nt.readCode(r,s,8):Nt.readCode(r,s,l)<<8-l}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let l=0;l<s.length;l++)s[l]=Nt.readByte(r,8*l);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}Nt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Nt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Nt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Nt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Nt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class yt{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,l,u){const d=r-l,p=s-u;return Math.sqrt(d*d+p*p)}static sum(r){let s=0;for(let l=0,u=r.length;l!==u;l++){const d=r[l];s+=d}return s}}class $r{static floatToIntBits(r){return r}}$r.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ue{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof Ue){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*$r.floatToIntBits(this.x)+$r.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),l=this.distance(r[1],r[2]),u=this.distance(r[0],r[2]);let d,p,x;if(l>=s&&l>=u?(p=r[0],d=r[1],x=r[2]):u>=l&&u>=s?(p=r[1],d=r[0],x=r[2]):(p=r[2],d=r[0],x=r[1]),this.crossProductZ(d,p,x)<0){const _=d;d=x,x=_}r[0]=d,r[1]=p,r[2]=x}static distance(r,s){return yt.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,l){const u=s.x,d=s.y;return(l.x-u)*(r.y-d)-(l.y-d)*(r.x-u)}}class q{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Oe extends q{constructor(r,s,l,u,d){super(r,s),this.compact=l,this.nbDatablocks=u,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Qe{constructor(r,s,l,u){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=Qe.INIT_SIZE),l==null&&(l=r.getWidth()/2|0),u==null&&(u=r.getHeight()/2|0);const d=s/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=u-d,this.downInit=u+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ae}detect(){let r=this.leftInit,s=this.rightInit,l=this.upInit,u=this.downInit,d=!1,p=!0,x=!1,_=!1,C=!1,E=!1,R=!1;const B=this.width,Y=this.height;for(;p;){p=!1;let Q=!0;for(;(Q||!_)&&s<B;)Q=this.containsBlackPoint(l,u,s,!1),Q?(s++,p=!0,_=!0):_||s++;if(s>=B){d=!0;break}let ee=!0;for(;(ee||!C)&&u<Y;)ee=this.containsBlackPoint(r,s,u,!0),ee?(u++,p=!0,C=!0):C||u++;if(u>=Y){d=!0;break}let ie=!0;for(;(ie||!E)&&r>=0;)ie=this.containsBlackPoint(l,u,r,!1),ie?(r--,p=!0,E=!0):E||r--;if(r<0){d=!0;break}let le=!0;for(;(le||!R)&&l>=0;)le=this.containsBlackPoint(r,s,l,!0),le?(l--,p=!0,R=!0):R||l--;if(l<0){d=!0;break}p&&(x=!0)}if(!d&&x){const Q=s-r;let ee=null;for(let Ee=1;ee===null&&Ee<Q;Ee++)ee=this.getBlackPointOnSegment(r,u-Ee,r+Ee,u);if(ee==null)throw new ae;let ie=null;for(let Ee=1;ie===null&&Ee<Q;Ee++)ie=this.getBlackPointOnSegment(r,l+Ee,r+Ee,l);if(ie==null)throw new ae;let le=null;for(let Ee=1;le===null&&Ee<Q;Ee++)le=this.getBlackPointOnSegment(s,l+Ee,s-Ee,l);if(le==null)throw new ae;let Ae=null;for(let Ee=1;Ae===null&&Ee<Q;Ee++)Ae=this.getBlackPointOnSegment(s,u-Ee,s-Ee,u);if(Ae==null)throw new ae;return this.centerEdges(Ae,ee,le,ie)}else throw new ae}getBlackPointOnSegment(r,s,l,u){const d=yt.round(yt.distance(r,s,l,u)),p=(l-r)/d,x=(u-s)/d,_=this.image;for(let C=0;C<d;C++){const E=yt.round(r+C*p),R=yt.round(s+C*x);if(_.get(E,R))return new Ue(E,R)}return null}centerEdges(r,s,l,u){const d=r.getX(),p=r.getY(),x=s.getX(),_=s.getY(),C=l.getX(),E=l.getY(),R=u.getX(),B=u.getY(),Y=Qe.CORR;return d<this.width/2?[new Ue(R-Y,B+Y),new Ue(x+Y,_+Y),new Ue(C-Y,E-Y),new Ue(d+Y,p-Y)]:[new Ue(R+Y,B+Y),new Ue(x+Y,_-Y),new Ue(C-Y,E+Y),new Ue(d-Y,p-Y)]}containsBlackPoint(r,s,l,u){const d=this.image;if(u){for(let p=r;p<=s;p++)if(d.get(p,l))return!0}else for(let p=r;p<=s;p++)if(d.get(l,p))return!0;return!1}}Qe.INIT_SIZE=10,Qe.CORR=1;class Ye{static checkAndNudgePoints(r,s){const l=r.getWidth(),u=r.getHeight();let d=!0;for(let p=0;p<s.length&&d;p+=2){const x=Math.floor(s[p]),_=Math.floor(s[p+1]);if(x<-1||x>l||_<-1||_>u)throw new ae;d=!1,x===-1?(s[p]=0,d=!0):x===l&&(s[p]=l-1,d=!0),_===-1?(s[p+1]=0,d=!0):_===u&&(s[p+1]=u-1,d=!0)}d=!0;for(let p=s.length-2;p>=0&&d;p-=2){const x=Math.floor(s[p]),_=Math.floor(s[p+1]);if(x<-1||x>l||_<-1||_>u)throw new ae;d=!1,x===-1?(s[p]=0,d=!0):x===l&&(s[p]=l-1,d=!0),_===-1?(s[p+1]=0,d=!0):_===u&&(s[p+1]=u-1,d=!0)}}}class Ze{constructor(r,s,l,u,d,p,x,_,C){this.a11=r,this.a21=s,this.a31=l,this.a12=u,this.a22=d,this.a32=p,this.a13=x,this.a23=_,this.a33=C}static quadrilateralToQuadrilateral(r,s,l,u,d,p,x,_,C,E,R,B,Y,Q,ee,ie){const le=Ze.quadrilateralToSquare(r,s,l,u,d,p,x,_);return Ze.squareToQuadrilateral(C,E,R,B,Y,Q,ee,ie).times(le)}transformPoints(r){const s=r.length,l=this.a11,u=this.a12,d=this.a13,p=this.a21,x=this.a22,_=this.a23,C=this.a31,E=this.a32,R=this.a33;for(let B=0;B<s;B+=2){const Y=r[B],Q=r[B+1],ee=d*Y+_*Q+R;r[B]=(l*Y+p*Q+C)/ee,r[B+1]=(u*Y+x*Q+E)/ee}}transformPointsWithValues(r,s){const l=this.a11,u=this.a12,d=this.a13,p=this.a21,x=this.a22,_=this.a23,C=this.a31,E=this.a32,R=this.a33,B=r.length;for(let Y=0;Y<B;Y++){const Q=r[Y],ee=s[Y],ie=d*Q+_*ee+R;r[Y]=(l*Q+p*ee+C)/ie,s[Y]=(u*Q+x*ee+E)/ie}}static squareToQuadrilateral(r,s,l,u,d,p,x,_){const C=r-l+d-x,E=s-u+p-_;if(C===0&&E===0)return new Ze(l-r,d-l,r,u-s,p-u,s,0,0,1);{const R=l-d,B=x-d,Y=u-p,Q=_-p,ee=R*Q-B*Y,ie=(C*Q-B*E)/ee,le=(R*E-C*Y)/ee;return new Ze(l-r+ie*l,x-r+le*x,r,u-s+ie*u,_-s+le*_,s,ie,le,1)}}static quadrilateralToSquare(r,s,l,u,d,p,x,_){return Ze.squareToQuadrilateral(r,s,l,u,d,p,x,_).buildAdjoint()}buildAdjoint(){return new Ze(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new Ze(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class dt extends Ye{sampleGrid(r,s,l,u,d,p,x,_,C,E,R,B,Y,Q,ee,ie,le,Ae,Ee){const be=Ze.quadrilateralToQuadrilateral(u,d,p,x,_,C,E,R,B,Y,Q,ee,ie,le,Ae,Ee);return this.sampleGridWithTransform(r,s,l,be)}sampleGridWithTransform(r,s,l,u){if(s<=0||l<=0)throw new ae;const d=new we(s,l),p=new Float32Array(2*s);for(let x=0;x<l;x++){const _=p.length,C=x+.5;for(let E=0;E<_;E+=2)p[E]=E/2+.5,p[E+1]=C;u.transformPoints(p),Ye.checkAndNudgePoints(r,p);try{for(let E=0;E<_;E+=2)r.get(Math.floor(p[E]),Math.floor(p[E+1]))&&d.set(E/2,x)}catch{throw new ae}}return d}}class _t{static setGridSampler(r){_t.gridSampler=r}static getInstance(){return _t.gridSampler}}_t.gridSampler=new dt;class qe{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new Ue(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Lt{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),l=this.getBullsEyeCorners(s);if(r){let p=l[0];l[0]=l[2],l[2]=p}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new Oe(u,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new ae;let s=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(l,s);let u=0;for(let p=0;p<4;p++){let x=l[(this.shift+p)%4];this.compact?(u<<=7,u+=x>>1&127):(u<<=10,u+=(x>>2&992)+(x>>1&31))}let d=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(r,s){let l=0;r.forEach((u,d,p)=>{let x=(u>>s-2<<1)+(u&1);l=(l<<3)+x}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(k.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new ae}getCorrectedParameterData(r,s){let l,u;s?(l=7,u=2):(l=10,u=4);let d=l-u,p=new Int32Array(l);for(let _=l-1;_>=0;--_)p[_]=r&15,r>>=4;try{new rr(ut.AZTEC_PARAM).decode(p,d)}catch{throw new ae}let x=0;for(let _=0;_<u;_++)x=(x<<4)+p[_];return x}getBullsEyeCorners(r){let s=r,l=r,u=r,d=r,p=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let R=this.getFirstDifferent(s,p,1,-1),B=this.getFirstDifferent(l,p,1,1),Y=this.getFirstDifferent(u,p,-1,1),Q=this.getFirstDifferent(d,p,-1,-1);if(this.nbCenterLayers>2){let ee=this.distancePoint(Q,R)*this.nbCenterLayers/(this.distancePoint(d,s)*(this.nbCenterLayers+2));if(ee<.75||ee>1.25||!this.isWhiteOrBlackRectangle(R,B,Y,Q))break}s=R,l=B,u=Y,d=Q,p=!p}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ae;this.compact=this.nbCenterLayers===5;let x=new Ue(s.getX()+.5,s.getY()-.5),_=new Ue(l.getX()+.5,l.getY()+.5),C=new Ue(u.getX()-.5,u.getY()+.5),E=new Ue(d.getX()-.5,d.getY()-.5);return this.expandSquare([x,_,C,E],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,l,u;try{let x=new Qe(this.image).detect();r=x[0],s=x[1],l=x[2],u=x[3]}catch{let _=this.image.getWidth()/2,C=this.image.getHeight()/2;r=this.getFirstDifferent(new qe(_+7,C-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new qe(_+7,C+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new qe(_-7,C+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new qe(_-7,C-7),!1,-1,-1).toResultPoint()}let d=yt.round((r.getX()+u.getX()+s.getX()+l.getX())/4),p=yt.round((r.getY()+u.getY()+s.getY()+l.getY())/4);try{let x=new Qe(this.image,15,d,p).detect();r=x[0],s=x[1],l=x[2],u=x[3]}catch{r=this.getFirstDifferent(new qe(d+7,p-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new qe(d+7,p+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new qe(d-7,p+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new qe(d-7,p-7),!1,-1,-1).toResultPoint()}return d=yt.round((r.getX()+u.getX()+s.getX()+l.getX())/4),p=yt.round((r.getY()+u.getY()+s.getY()+l.getY())/4),new qe(d,p)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,l,u,d){let p=_t.getInstance(),x=this.getDimension(),_=x/2-this.nbCenterLayers,C=x/2+this.nbCenterLayers;return p.sampleGrid(r,x,x,_,_,C,_,C,C,_,C,s.getX(),s.getY(),l.getX(),l.getY(),u.getX(),u.getY(),d.getX(),d.getY())}sampleLine(r,s,l){let u=0,d=this.distanceResultPoint(r,s),p=d/l,x=r.getX(),_=r.getY(),C=p*(s.getX()-r.getX())/d,E=p*(s.getY()-r.getY())/d;for(let R=0;R<l;R++)this.image.get(yt.round(x+R*C),yt.round(_+R*E))&&(u|=1<<l-R-1);return u}isWhiteOrBlackRectangle(r,s,l,u){let d=3;r=new qe(r.getX()-d,r.getY()+d),s=new qe(s.getX()-d,s.getY()-d),l=new qe(l.getX()+d,l.getY()-d),u=new qe(u.getX()+d,u.getY()+d);let p=this.getColor(u,r);if(p===0)return!1;let x=this.getColor(r,s);return x!==p||(x=this.getColor(s,l),x!==p)?!1:(x=this.getColor(l,u),x===p)}getColor(r,s){let l=this.distancePoint(r,s),u=(s.getX()-r.getX())/l,d=(s.getY()-r.getY())/l,p=0,x=r.getX(),_=r.getY(),C=this.image.get(r.getX(),r.getY()),E=Math.ceil(l);for(let B=0;B<E;B++)x+=u,_+=d,this.image.get(yt.round(x),yt.round(_))!==C&&p++;let R=p/l;return R>.1&&R<.9?0:R<=.1===C?1:-1}getFirstDifferent(r,s,l,u){let d=r.getX()+l,p=r.getY()+u;for(;this.isValid(d,p)&&this.image.get(d,p)===s;)d+=l,p+=u;for(d-=l,p-=u;this.isValid(d,p)&&this.image.get(d,p)===s;)d+=l;for(d-=l;this.isValid(d,p)&&this.image.get(d,p)===s;)p+=u;return p-=u,new qe(d,p)}expandSquare(r,s,l){let u=l/(2*s),d=r[0].getX()-r[2].getX(),p=r[0].getY()-r[2].getY(),x=(r[0].getX()+r[2].getX())/2,_=(r[0].getY()+r[2].getY())/2,C=new Ue(x+u*d,_+u*p),E=new Ue(x-u*d,_-u*p);d=r[1].getX()-r[3].getX(),p=r[1].getY()-r[3].getY(),x=(r[1].getX()+r[3].getX())/2,_=(r[1].getY()+r[3].getY())/2;let R=new Ue(x+u*d,_+u*p),B=new Ue(x-u*d,_-u*p);return[C,R,E,B]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=yt.round(r.getX()),l=yt.round(r.getY());return this.isValid(s,l)}distancePoint(r,s){return yt.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return yt.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(k.truncDivision(this.nbLayers-4,8)+1)+15}}class kn{decode(r,s=null){let l=null,u=new Lt(r.getBlackMatrix()),d=null,p=null;try{let E=u.detectMirror(!1);d=E.getPoints(),this.reportFoundResultPoints(s,d),p=new Nt().decode(E)}catch(E){l=E}if(p==null)try{let E=u.detectMirror(!0);d=E.getPoints(),this.reportFoundResultPoints(s,d),p=new Nt().decode(E)}catch(E){throw l??E}let x=new ze(p.getText(),p.getRawBytes(),p.getNumBits(),d,re.AZTEC,P.currentTimeMillis()),_=p.getByteSegments();_!=null&&x.putMetadata(Xe.BYTE_SEGMENTS,_);let C=p.getECLevel();return C!=null&&x.putMetadata(Xe.ERROR_CORRECTION_LEVEL,C),x}reportFoundResultPoints(r,s){if(r!=null){let l=r.get(G.NEED_RESULT_POINT_CALLBACK);l!=null&&s.forEach((u,d,p)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class Tt extends Pe{constructor(r=500){super(new kn,r)}}class st{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(G.TRY_HARDER)===!0&&r.isRotateSupported()){const d=r.rotateCounterClockwise(),p=this.doDecode(d,s),x=p.getResultMetadata();let _=270;x!==null&&x.get(Xe.ORIENTATION)===!0&&(_=_+x.get(Xe.ORIENTATION)%360),p.putMetadata(Xe.ORIENTATION,_);const C=p.getResultPoints();if(C!==null){const E=d.getHeight();for(let R=0;R<C.length;R++)C[R]=new Ue(E-C[R].getY()-1,C[R].getX())}return p}else throw new ae}}reset(){}doDecode(r,s){const l=r.getWidth(),u=r.getHeight();let d=new H(l);const p=s&&s.get(G.TRY_HARDER)===!0,x=Math.max(1,u>>(p?8:5));let _;p?_=u:_=15;const C=Math.trunc(u/2);for(let E=0;E<_;E++){const R=Math.trunc((E+1)/2),B=(E&1)===0,Y=C+x*(B?R:-R);if(Y<0||Y>=u)break;try{d=r.getBlackRow(Y,d)}catch{continue}for(let Q=0;Q<2;Q++){if(Q===1&&(d.reverse(),s&&s.get(G.NEED_RESULT_POINT_CALLBACK)===!0)){const ee=new Map;s.forEach((ie,le)=>ee.set(le,ie)),ee.delete(G.NEED_RESULT_POINT_CALLBACK),s=ee}try{const ee=this.decodeRow(Y,d,s);if(Q===1){ee.putMetadata(Xe.ORIENTATION,180);const ie=ee.getResultPoints();ie!==null&&(ie[0]=new Ue(l-ie[0].getX()-1,ie[0].getY()),ie[1]=new Ue(l-ie[1].getX()-1,ie[1].getY()))}return ee}catch{}}}throw new ae}static recordPattern(r,s,l){const u=l.length;for(let C=0;C<u;C++)l[C]=0;const d=r.getSize();if(s>=d)throw new ae;let p=!r.get(s),x=0,_=s;for(;_<d;){if(r.get(_)!==p)l[x]++;else{if(++x===u)break;l[x]=1,p=!p}_++}if(!(x===u||x===u-1&&_===d))throw new ae}static recordPatternInReverse(r,s,l){let u=l.length,d=r.get(s);for(;s>0&&u>=0;)r.get(--s)!==d&&(u--,d=!d);if(u>=0)throw new ae;st.recordPattern(r,s+1,l)}static patternMatchVariance(r,s,l){const u=r.length;let d=0,p=0;for(let C=0;C<u;C++)d+=r[C],p+=s[C];if(d<p)return Number.POSITIVE_INFINITY;const x=d/p;l*=x;let _=0;for(let C=0;C<u;C++){const E=r[C],R=s[C]*x,B=E>R?E-R:R-E;if(B>l)return Number.POSITIVE_INFINITY;_+=B}return _/d}}class _e extends st{static findStartPattern(r){const s=r.getSize(),l=r.getNextSet(0);let u=0,d=Int32Array.from([0,0,0,0,0,0]),p=l,x=!1;const _=6;for(let C=l;C<s;C++)if(r.get(C)!==x)d[u]++;else{if(u===_-1){let E=_e.MAX_AVG_VARIANCE,R=-1;for(let B=_e.CODE_START_A;B<=_e.CODE_START_C;B++){const Y=st.patternMatchVariance(d,_e.CODE_PATTERNS[B],_e.MAX_INDIVIDUAL_VARIANCE);Y<E&&(E=Y,R=B)}if(R>=0&&r.isRange(Math.max(0,p-(C-p)/2),p,!1))return Int32Array.from([p,C,R]);p+=d[0]+d[1],d=d.slice(2,d.length-1),d[u-1]=0,d[u]=0,u--}else u++;d[u]=1,x=!x}throw new ae}static decodeCode(r,s,l){st.recordPattern(r,l,s);let u=_e.MAX_AVG_VARIANCE,d=-1;for(let p=0;p<_e.CODE_PATTERNS.length;p++){const x=_e.CODE_PATTERNS[p],_=this.patternMatchVariance(s,x,_e.MAX_INDIVIDUAL_VARIANCE);_<u&&(u=_,d=p)}if(d>=0)return d;throw new ae}decodeRow(r,s,l){const u=l&&l.get(G.ASSUME_GS1)===!0,d=_e.findStartPattern(s),p=d[2];let x=0;const _=new Uint8Array(20);_[x++]=p;let C;switch(p){case _e.CODE_START_A:C=_e.CODE_CODE_A;break;case _e.CODE_START_B:C=_e.CODE_CODE_B;break;case _e.CODE_START_C:C=_e.CODE_CODE_C;break;default:throw new Z}let E=!1,R=!1,B="",Y=d[0],Q=d[1];const ee=Int32Array.from([0,0,0,0,0,0]);let ie=0,le=0,Ae=p,Ee=0,be=!0,At=!1,pt=!1;for(;!E;){const oi=R;switch(R=!1,ie=le,le=_e.decodeCode(s,ee,Q),_[x++]=le,le!==_e.CODE_STOP&&(be=!0),le!==_e.CODE_STOP&&(Ee++,Ae+=Ee*le),Y=Q,Q+=ee.reduce((jh,Ds)=>jh+Ds,0),le){case _e.CODE_START_A:case _e.CODE_START_B:case _e.CODE_START_C:throw new Z}switch(C){case _e.CODE_CODE_A:if(le<64)pt===At?B+=String.fromCharCode(32+le):B+=String.fromCharCode(32+le+128),pt=!1;else if(le<96)pt===At?B+=String.fromCharCode(le-64):B+=String.fromCharCode(le+64),pt=!1;else switch(le!==_e.CODE_STOP&&(be=!1),le){case _e.CODE_FNC_1:u&&(B.length===0?B+="]C1":B+="");break;case _e.CODE_FNC_2:case _e.CODE_FNC_3:break;case _e.CODE_FNC_4_A:!At&&pt?(At=!0,pt=!1):At&&pt?(At=!1,pt=!1):pt=!0;break;case _e.CODE_SHIFT:R=!0,C=_e.CODE_CODE_B;break;case _e.CODE_CODE_B:C=_e.CODE_CODE_B;break;case _e.CODE_CODE_C:C=_e.CODE_CODE_C;break;case _e.CODE_STOP:E=!0;break}break;case _e.CODE_CODE_B:if(le<96)pt===At?B+=String.fromCharCode(32+le):B+=String.fromCharCode(32+le+128),pt=!1;else switch(le!==_e.CODE_STOP&&(be=!1),le){case _e.CODE_FNC_1:u&&(B.length===0?B+="]C1":B+="");break;case _e.CODE_FNC_2:case _e.CODE_FNC_3:break;case _e.CODE_FNC_4_B:!At&&pt?(At=!0,pt=!1):At&&pt?(At=!1,pt=!1):pt=!0;break;case _e.CODE_SHIFT:R=!0,C=_e.CODE_CODE_A;break;case _e.CODE_CODE_A:C=_e.CODE_CODE_A;break;case _e.CODE_CODE_C:C=_e.CODE_CODE_C;break;case _e.CODE_STOP:E=!0;break}break;case _e.CODE_CODE_C:if(le<100)le<10&&(B+="0"),B+=le;else switch(le!==_e.CODE_STOP&&(be=!1),le){case _e.CODE_FNC_1:u&&(B.length===0?B+="]C1":B+="");break;case _e.CODE_CODE_A:C=_e.CODE_CODE_A;break;case _e.CODE_CODE_B:C=_e.CODE_CODE_B;break;case _e.CODE_STOP:E=!0;break}break}oi&&(C=C===_e.CODE_CODE_A?_e.CODE_CODE_B:_e.CODE_CODE_A)}const un=Q-Y;if(Q=s.getNextUnset(Q),!s.isRange(Q,Math.min(s.getSize(),Q+(Q-Y)/2),!1))throw new ae;if(Ae-=Ee*ie,Ae%103!==ie)throw new I;const sr=B.length;if(sr===0)throw new ae;sr>0&&be&&(C===_e.CODE_CODE_C?B=B.substring(0,sr-2):B=B.substring(0,sr-1));const or=(d[1]+d[0])/2,Ut=Y+un/2,zn=_.length,ar=new Uint8Array(zn);for(let oi=0;oi<zn;oi++)ar[oi]=_[oi];const Ps=[new Ue(or,r),new Ue(Ut,r)];return new ze(B,ar,0,Ps,re.CODE_128,new Date().getTime())}}_e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],_e.MAX_AVG_VARIANCE=.25,_e.MAX_INDIVIDUAL_VARIANCE=.7,_e.CODE_SHIFT=98,_e.CODE_CODE_C=99,_e.CODE_CODE_B=100,_e.CODE_CODE_A=101,_e.CODE_FNC_1=102,_e.CODE_FNC_2=97,_e.CODE_FNC_3=96,_e.CODE_FNC_4_A=101,_e.CODE_FNC_4_B=100,_e.CODE_START_A=103,_e.CODE_START_B=104,_e.CODE_START_C=105,_e.CODE_STOP=106;class wt extends st{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let d=wt.findAsteriskPattern(s,u),p=s.getNextSet(d[1]),x=s.getSize(),_,C;do{wt.recordPattern(s,p,u);let ee=wt.toNarrowWidePattern(u);if(ee<0)throw new ae;_=wt.patternToChar(ee),this.decodeRowResult+=_,C=p;for(let ie of u)p+=ie;p=s.getNextSet(p)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let E=0;for(let ee of u)E+=ee;let R=p-C-E;if(p!==x&&R*2<E)throw new ae;if(this.usingCheckDigit){let ee=this.decodeRowResult.length-1,ie=0;for(let le=0;le<ee;le++)ie+=wt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(le));if(this.decodeRowResult.charAt(ee)!==wt.ALPHABET_STRING.charAt(ie%43))throw new I;this.decodeRowResult=this.decodeRowResult.substring(0,ee)}if(this.decodeRowResult.length===0)throw new ae;let B;this.extendedMode?B=wt.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;let Y=(d[1]+d[0])/2,Q=C+E/2;return new ze(B,null,0,[new Ue(Y,r),new Ue(Q,r)],re.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let l=r.getSize(),u=r.getNextSet(0),d=0,p=u,x=!1,_=s.length;for(let C=u;C<l;C++)if(r.get(C)!==x)s[d]++;else{if(d===_-1){if(this.toNarrowWidePattern(s)===wt.ASTERISK_ENCODING&&r.isRange(Math.max(0,p-Math.floor((C-p)/2)),p,!1))return[p,C];p+=s[0]+s[1],s.copyWithin(0,2,2+d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,x=!x}throw new ae}static toNarrowWidePattern(r){let s=r.length,l=0,u;do{let d=2147483647;for(let _ of r)_<d&&_>l&&(d=_);l=d,u=0;let p=0,x=0;for(let _=0;_<s;_++){let C=r[_];C>l&&(x|=1<<s-1-_,u++,p+=C)}if(u===3){for(let _=0;_<s&&u>0;_++){let C=r[_];if(C>l&&(u--,C*2>=p))return-1}return x}}while(u>3);return-1}static patternToChar(r){for(let s=0;s<wt.CHARACTER_ENCODINGS.length;s++)if(wt.CHARACTER_ENCODINGS[s]===r)return wt.ALPHABET_STRING.charAt(s);if(r===wt.ASTERISK_ENCODING)return"*";throw new ae}static decodeExtended(r){let s=r.length,l="";for(let u=0;u<s;u++){let d=r.charAt(u);if(d==="+"||d==="$"||d==="%"||d==="/"){let p=r.charAt(u+1),x="\0";switch(d){case"+":if(p>="A"&&p<="Z")x=String.fromCharCode(p.charCodeAt(0)+32);else throw new Z;break;case"$":if(p>="A"&&p<="Z")x=String.fromCharCode(p.charCodeAt(0)-64);else throw new Z;break;case"%":if(p>="A"&&p<="E")x=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")x=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")x=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")x=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")x="\0";else if(p==="V")x="@";else if(p==="W")x="`";else if(p==="X"||p==="Y"||p==="Z")x="";else throw new Z;break;case"/":if(p>="A"&&p<="O")x=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")x=":";else throw new Z;break}l+=x,u++}else l+=d}return l}}wt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",wt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],wt.ASTERISK_ENCODING=148;class ht extends st{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,l){let u=this.decodeStart(s),d=this.decodeEnd(s),p=new Me;ht.decodeMiddle(s,u[1],d[0],p);let x=p.toString(),_=null;l!=null&&(_=l.get(G.ALLOWED_LENGTHS)),_==null&&(_=ht.DEFAULT_ALLOWED_LENGTHS);let C=x.length,E=!1,R=0;for(let Q of _){if(C===Q){E=!0;break}Q>R&&(R=Q)}if(!E&&C>R&&(E=!0),!E)throw new Z;const B=[new Ue(u[1],r),new Ue(d[0],r)];return new ze(x,null,0,B,re.ITF,new Date().getTime())}static decodeMiddle(r,s,l,u){let d=new Int32Array(10),p=new Int32Array(5),x=new Int32Array(5);for(d.fill(0),p.fill(0),x.fill(0);s<l;){st.recordPattern(r,s,d);for(let C=0;C<5;C++){let E=2*C;p[C]=d[E],x[C]=d[E+1]}let _=ht.decodeDigit(p);u.append(_.toString()),_=this.decodeDigit(x),u.append(_.toString()),d.forEach(function(C){s+=C})}}decodeStart(r){let s=ht.skipWhiteSpace(r),l=ht.findGuardPattern(r,s,ht.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(r,l[0]),l}validateQuietZone(r,s){let l=this.narrowLineWidth*10;l=l<s?l:s;for(let u=s-1;l>0&&u>=0&&!r.get(u);u--)l--;if(l!==0)throw new ae}static skipWhiteSpace(r){const s=r.getSize(),l=r.getNextSet(0);if(l===s)throw new ae;return l}decodeEnd(r){r.reverse();try{let s=ht.skipWhiteSpace(r),l;try{l=ht.findGuardPattern(r,s,ht.END_PATTERN_REVERSED[0])}catch(d){d instanceof ae&&(l=ht.findGuardPattern(r,s,ht.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,l[0]);let u=l[0];return l[0]=r.getSize()-l[1],l[1]=r.getSize()-u,l}finally{r.reverse()}}static findGuardPattern(r,s,l){let u=l.length,d=new Int32Array(u),p=r.getSize(),x=!1,_=0,C=s;d.fill(0);for(let E=s;E<p;E++)if(r.get(E)!==x)d[_]++;else{if(_===u-1){if(st.patternMatchVariance(d,l,ht.MAX_INDIVIDUAL_VARIANCE)<ht.MAX_AVG_VARIANCE)return[C,E];C+=d[0]+d[1],P.arraycopy(d,2,d,0,_-1),d[_-1]=0,d[_]=0,_--}else _++;d[_]=1,x=!x}throw new ae}static decodeDigit(r){let s=ht.MAX_AVG_VARIANCE,l=-1,u=ht.PATTERNS.length;for(let d=0;d<u;d++){let p=ht.PATTERNS[d],x=st.patternMatchVariance(r,p,ht.MAX_INDIVIDUAL_VARIANCE);x<s?(s=x,l=d):x===s&&(l=-1)}if(l>=0)return l%10;throw new ae}}ht.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ht.MAX_AVG_VARIANCE=.38,ht.MAX_INDIVIDUAL_VARIANCE=.5,ht.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ht.START_PATTERN=Int32Array.from([1,1,1,1]),ht.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class jt extends st{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,l,u=0,d=Int32Array.from([0,0,0]);for(;!s;){d=Int32Array.from([0,0,0]),l=jt.findGuardPattern(r,u,!1,this.START_END_PATTERN,d);let p=l[0];u=l[1];let x=p-(u-p);x>=0&&(s=r.isRange(x,p,!1))}return l}static checkChecksum(r){return jt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let l=parseInt(r.charAt(s-1),10);return jt.getStandardUPCEANChecksum(r.substring(0,s-1))===l}static getStandardUPCEANChecksum(r){let s=r.length,l=0;for(let u=s-1;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new Z;l+=d}l*=3;for(let u=s-2;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new Z;l+=d}return(1e3-l)%10}static decodeEnd(r,s){return jt.findGuardPattern(r,s,!1,jt.START_END_PATTERN,new Int32Array(jt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,l,u){return this.findGuardPattern(r,s,l,u,new Int32Array(u.length))}static findGuardPattern(r,s,l,u,d){let p=r.getSize();s=l?r.getNextUnset(s):r.getNextSet(s);let x=0,_=s,C=u.length,E=l;for(let R=s;R<p;R++)if(r.get(R)!==E)d[x]++;else{if(x===C-1){if(st.patternMatchVariance(d,u,jt.MAX_INDIVIDUAL_VARIANCE)<jt.MAX_AVG_VARIANCE)return Int32Array.from([_,R]);_+=d[0]+d[1];let B=d.slice(2,d.length-1);for(let Y=0;Y<x-1;Y++)d[Y]=B[Y];d[x-1]=0,d[x]=0,x--}else x++;d[x]=1,E=!E}throw new ae}static decodeDigit(r,s,l,u){this.recordPattern(r,l,s);let d=this.MAX_AVG_VARIANCE,p=-1,x=u.length;for(let _=0;_<x;_++){let C=u[_],E=st.patternMatchVariance(s,C,jt.MAX_INDIVIDUAL_VARIANCE);E<d&&(d=E,p=_)}if(p>=0)return p;throw new ae}}jt.MAX_AVG_VARIANCE=.48,jt.MAX_INDIVIDUAL_VARIANCE=.7,jt.START_END_PATTERN=Int32Array.from([1,1,1]),jt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),jt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),jt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Jr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(s,l,u),p=u.toString(),x=Jr.parseExtensionString(p),_=[new Ue((l[0]+l[1])/2,r),new Ue(d,r)],C=new ze(p,null,0,_,re.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&C.putAllMetadata(x),C}decodeMiddle(r,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p=s[1],x=0;for(let C=0;C<5&&p<d;C++){let E=jt.decodeDigit(r,u,p,jt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+E%10);for(let R of u)p+=R;E>=10&&(x|=1<<4-C),C!==4&&(p=r.getNextSet(p),p=r.getNextUnset(p))}if(l.length!==5)throw new ae;let _=this.determineCheckDigit(x);if(Jr.extensionChecksum(l.toString())!==_)throw new ae;return p}static extensionChecksum(r){let s=r.length,l=0;for(let u=s-2;u>=0;u-=2)l+=r.charAt(u).charCodeAt(0)-48;l*=3;for(let u=s-1;u>=0;u-=2)l+=r.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new ae}static parseExtensionString(r){if(r.length!==5)return null;let s=Jr.parseExtension5String(r);return s==null?null:new Map([[Xe.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let l=parseInt(r.substring(1)),u=(l/100).toString(),d=l%100,p=d<10?"0"+d:d.toString();return s+u+"."+p}}class Di{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(s,l,u),p=u.toString(),x=Di.parseExtensionString(p),_=[new Ue((l[0]+l[1])/2,r),new Ue(d,r)],C=new ze(p,null,0,_,re.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&C.putAllMetadata(x),C}decodeMiddle(r,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p=s[1],x=0;for(let _=0;_<2&&p<d;_++){let C=jt.decodeDigit(r,u,p,jt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let E of u)p+=E;C>=10&&(x|=1<<1-_),_!==1&&(p=r.getNextSet(p),p=r.getNextUnset(p))}if(l.length!==2)throw new ae;if(parseInt(l.toString())%4!==x)throw new ae;return p}static parseExtensionString(r){return r.length!==2?null:new Map([[Xe.ISSUE_NUMBER,parseInt(r)]])}}class wi{static decodeRow(r,s,l){let u=jt.findGuardPattern(s,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Jr().decodeRow(r,s,u)}catch{return new Di().decodeRow(r,s,u)}}}wi.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class bt extends jt{constructor(){super(),this.decodeRowStringBuffer="",bt.L_AND_G_PATTERNS=bt.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=bt.L_PATTERNS[r-10],l=new Int32Array(s.length);for(let u=0;u<s.length;u++)l[u]=s[s.length-u-1];bt.L_AND_G_PATTERNS[r]=l}}decodeRow(r,s,l){let u=bt.findStartGuardPattern(s),d=l==null?null:l.get(G.NEED_RESULT_POINT_CALLBACK);if(d!=null){const be=new Ue((u[0]+u[1])/2,r);d.foundPossibleResultPoint(be)}let p=this.decodeMiddle(s,u,this.decodeRowStringBuffer),x=p.rowOffset,_=p.resultString;if(d!=null){const be=new Ue(x,r);d.foundPossibleResultPoint(be)}let C=this.decodeEnd(s,x);if(d!=null){const be=new Ue((C[0]+C[1])/2,r);d.foundPossibleResultPoint(be)}let E=C[1],R=E+(E-C[0]);if(R>=s.getSize()||!s.isRange(E,R,!1))throw new ae;let B=_.toString();if(B.length<8)throw new Z;if(!bt.checkChecksum(B))throw new I;let Y=(u[1]+u[0])/2,Q=(C[1]+C[0])/2,ee=this.getBarcodeFormat(),ie=[new Ue(Y,r),new Ue(Q,r)],le=new ze(B,null,0,ie,ee,new Date().getTime()),Ae=0;try{let be=wi.decodeRow(r,s,C[1]);le.putMetadata(Xe.UPC_EAN_EXTENSION,be.getText()),le.putAllMetadata(be.getResultMetadata()),le.addResultPoints(be.getResultPoints()),Ae=be.getText().length}catch{}let Ee=l==null?null:l.get(G.ALLOWED_EAN_EXTENSIONS);if(Ee!=null){let be=!1;for(let At in Ee)if(Ae.toString()===At){be=!0;break}if(!be)throw new ae}return le}decodeEnd(r,s){return bt.findGuardPattern(r,s,!1,bt.START_END_PATTERN,new Int32Array(bt.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return bt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let l=parseInt(r.charAt(s-1),10);return bt.getStandardUPCEANChecksum(r.substring(0,s-1))===l}static getStandardUPCEANChecksum(r){let s=r.length,l=0;for(let u=s-1;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new Z;l+=d}l*=3;for(let u=s-2;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new Z;l+=d}return(1e3-l)%10}}class Zt extends bt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p=s[1],x=0;for(let C=0;C<6&&p<d;C++){let E=bt.decodeDigit(r,u,p,bt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+E%10);for(let R of u)p+=R;E>=10&&(x|=1<<5-C)}l=Zt.determineFirstDigit(l,x),p=bt.findGuardPattern(r,p,!0,bt.MIDDLE_PATTERN,new Int32Array(bt.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&p<d;C++){let E=bt.decodeDigit(r,u,p,bt.L_PATTERNS);l+=String.fromCharCode(48+E);for(let R of u)p+=R}return{rowOffset:p,resultString:l}}getBarcodeFormat(){return re.EAN_13}static determineFirstDigit(r,s){for(let l=0;l<10;l++)if(s===this.FIRST_DIGIT_ENCODINGS[l])return r=String.fromCharCode(48+l)+r,r;throw new ae}}Zt.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ns extends bt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,l){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p=s[1];for(let _=0;_<4&&p<d;_++){let C=bt.decodeDigit(r,u,p,bt.L_PATTERNS);l+=String.fromCharCode(48+C);for(let E of u)p+=E}p=bt.findGuardPattern(r,p,!0,bt.MIDDLE_PATTERN,new Int32Array(bt.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<4&&p<d;_++){let C=bt.decodeDigit(r,u,p,bt.L_PATTERNS);l+=String.fromCharCode(48+C);for(let E of u)p+=E}return{rowOffset:p,resultString:l}}getBarcodeFormat(){return re.EAN_8}}class ne extends bt{constructor(){super(...arguments),this.ean13Reader=new Zt}getBarcodeFormat(){return re.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,l))}decodeMiddle(r,s,l){return this.ean13Reader.decodeMiddle(r,s,l)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let l=new ze(s.substring(1),null,null,r.getResultPoints(),re.UPC_A);return r.getResultMetadata()!=null&&l.putAllMetadata(r.getResultMetadata()),l}else throw new ae}reset(){this.ean13Reader.reset()}}class pe extends bt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,l){const u=this.decodeMiddleCounters.map(C=>C);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const d=r.getSize();let p=s[1],x=0;for(let C=0;C<6&&p<d;C++){const E=pe.decodeDigit(r,u,p,pe.L_AND_G_PATTERNS);l+=String.fromCharCode(48+E%10);for(let R of u)p+=R;E>=10&&(x|=1<<5-C)}let _=pe.determineNumSysAndCheckDigit(l,x);return{rowOffset:p,resultString:_}}decodeEnd(r,s){return pe.findGuardPatternWithoutCounters(r,s,!0,pe.MIDDLE_END_PATTERN)}checkChecksum(r){return bt.checkChecksum(pe.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let d=String.fromCharCode(48+l),p=String.fromCharCode(48+u);return d+r+p}throw ae.getNotFoundInstance()}getBarcodeFormat(){return re.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new Me;l.append(r.charAt(0));let u=s[5];switch(u){case 0:case 1:case 2:l.appendChars(s,0,2),l.append(u),l.append("0000"),l.appendChars(s,2,3);break;case 3:l.appendChars(s,0,3),l.append("00000"),l.appendChars(s,3,2);break;case 4:l.appendChars(s,0,4),l.append("00000"),l.append(s[4]);break;default:l.appendChars(s,0,5),l.append("0000"),l.append(u);break}return r.length>=8&&l.append(r.charAt(7)),l.toString()}}pe.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),pe.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class xe extends st{constructor(r){super();let s=r==null?null:r.get(G.POSSIBLE_FORMATS),l=[];i(s)?(l.push(new Zt),l.push(new ne),l.push(new Ns),l.push(new pe)):(s.indexOf(re.EAN_13)>-1&&l.push(new Zt),s.indexOf(re.UPC_A)>-1&&l.push(new ne),s.indexOf(re.EAN_8)>-1&&l.push(new Ns),s.indexOf(re.UPC_E)>-1&&l.push(new pe)),this.readers=l}decodeRow(r,s,l){for(let u of this.readers)try{const d=u.decodeRow(r,s,l),p=d.getBarcodeFormat()===re.EAN_13&&d.getText().charAt(0)==="0",x=l==null?null:l.get(G.POSSIBLE_FORMATS),_=x==null||x.includes(re.UPC_A);if(p&&_){const C=d.getRawBytes(),E=new ze(d.getText().substring(1),C,C?C.length:null,d.getResultPoints(),re.UPC_A);return E.putAllMetadata(d.getResultMetadata()),E}return d}catch{}throw new ae}reset(){for(let r of this.readers)r.reset()}}class Te extends st{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let l=0;l<s.length;l++)if(st.patternMatchVariance(r,s[l],Te.MAX_INDIVIDUAL_VARIANCE)<Te.MAX_AVG_VARIANCE)return l;throw new ae}static count(r){return yt.sum(new Int32Array(r))}static increment(r,s){let l=0,u=s[0];for(let d=1;d<r.length;d++)s[d]>u&&(u=s[d],l=d);r[l]++}static decrement(r,s){let l=0,u=s[0];for(let d=1;d<r.length;d++)s[d]<u&&(u=s[d],l=d);r[l]--}static isFinderPattern(r){let s=r[0]+r[1],l=s+r[2]+r[3],u=s/l;if(u>=Te.MIN_FINDER_PATTERN_RATIO&&u<=Te.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let x of r)x>p&&(p=x),x<d&&(d=x);return p<10*d}return!1}}Te.MAX_AVG_VARIANCE=.2,Te.MAX_INDIVIDUAL_VARIANCE=.45,Te.MIN_FINDER_PATTERN_RATIO=9.5/12,Te.MAX_FINDER_PATTERN_RATIO=12.5/14;class $e{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof $e))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class mt{constructor(r,s,l,u,d){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new Ue(l,d)),this.resultPoints.push(new Ue(u,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof mt))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class Rt{constructor(){}static getRSSvalue(r,s,l){let u=0;for(let _ of r)u+=_;let d=0,p=0,x=r.length;for(let _=0;_<x-1;_++){let C;for(C=1,p|=1<<_;C<r[_];C++,p&=~(1<<_)){let E=Rt.combins(u-C-1,x-_-2);if(l&&p===0&&u-C-(x-_-1)>=x-_-1&&(E-=Rt.combins(u-C-(x-_),x-_-2)),x-_-1>1){let R=0;for(let B=u-C-(x-_-2);B>s;B--)R+=Rt.combins(u-C-B-1,x-_-3);E-=R*(x-1-_)}else u-C>s&&E--;d+=E}u-=C}return d}static combins(r,s){let l,u;r-s>s?(u=s,l=r-s):(u=r-s,l=s);let d=1,p=1;for(let x=r;x>l;x--)d*=x,p<=u&&(d/=p,p++);for(;p<=u;)d/=p,p++;return d}}class Gt{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let l=12*s,u=new H(l),d=0,x=r[0].getRightChar().getValue();for(let _=11;_>=0;--_)x&1<<_&&u.set(d),d++;for(let _=1;_<r.length;++_){let C=r[_],E=C.getLeftChar().getValue();for(let R=11;R>=0;--R)E&1<<R&&u.set(d),d++;if(C.getRightChar()!=null){let R=C.getRightChar().getValue();for(let B=11;B>=0;--B)R&1<<B&&u.set(d),d++}}return u}}class Pt{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Yt{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class Ct extends Yt{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===Ct.FNC1}}Ct.FNC1="$";class Fe extends Yt{constructor(r,s,l){super(r),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Xt extends Yt{constructor(r,s,l){if(super(r),s<0||s>10||l<0||l>10)throw new Z;this.firstDigit=s,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Xt.FNC1}isSecondDigitFNC1(){return this.secondDigit===Xt.FNC1}isAnyFNC1(){return this.firstDigit===Xt.FNC1||this.secondDigit===Xt.FNC1}}Xt.FNC1=10;class Re{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new ae;let s=r.substring(0,2);for(let d of Re.TWO_DIGIT_DATA_LENGTH)if(d[0]===s)return d[1]===Re.VARIABLE_LENGTH?Re.processVariableAI(2,d[2],r):Re.processFixedAI(2,d[1],r);if(r.length<3)throw new ae;let l=r.substring(0,3);for(let d of Re.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===Re.VARIABLE_LENGTH?Re.processVariableAI(3,d[2],r):Re.processFixedAI(3,d[1],r);for(let d of Re.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===Re.VARIABLE_LENGTH?Re.processVariableAI(4,d[2],r):Re.processFixedAI(4,d[1],r);if(r.length<4)throw new ae;let u=r.substring(0,4);for(let d of Re.FOUR_DIGIT_DATA_LENGTH)if(d[0]===u)return d[1]===Re.VARIABLE_LENGTH?Re.processVariableAI(4,d[2],r):Re.processFixedAI(4,d[1],r);throw new ae}static processFixedAI(r,s,l){if(l.length<r)throw new ae;let u=l.substring(0,r);if(l.length<r+s)throw new ae;let d=l.substring(r,r+s),p=l.substring(r+s),x="("+u+")"+d,_=Re.parseFieldsInGeneralPurpose(p);return _==null?x:x+_}static processVariableAI(r,s,l){let u=l.substring(0,r),d;l.length<r+s?d=l.length:d=r+s;let p=l.substring(r,d),x=l.substring(d),_="("+u+")"+p,C=Re.parseFieldsInGeneralPurpose(x);return C==null?_:_+C}}Re.VARIABLE_LENGTH=[],Re.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Re.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Re.VARIABLE_LENGTH,20],["22",Re.VARIABLE_LENGTH,29],["30",Re.VARIABLE_LENGTH,8],["37",Re.VARIABLE_LENGTH,8],["90",Re.VARIABLE_LENGTH,30],["91",Re.VARIABLE_LENGTH,30],["92",Re.VARIABLE_LENGTH,30],["93",Re.VARIABLE_LENGTH,30],["94",Re.VARIABLE_LENGTH,30],["95",Re.VARIABLE_LENGTH,30],["96",Re.VARIABLE_LENGTH,30],["97",Re.VARIABLE_LENGTH,3],["98",Re.VARIABLE_LENGTH,30],["99",Re.VARIABLE_LENGTH,30]],Re.THREE_DIGIT_DATA_LENGTH=[["240",Re.VARIABLE_LENGTH,30],["241",Re.VARIABLE_LENGTH,30],["242",Re.VARIABLE_LENGTH,6],["250",Re.VARIABLE_LENGTH,30],["251",Re.VARIABLE_LENGTH,30],["253",Re.VARIABLE_LENGTH,17],["254",Re.VARIABLE_LENGTH,20],["400",Re.VARIABLE_LENGTH,30],["401",Re.VARIABLE_LENGTH,30],["402",17],["403",Re.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Re.VARIABLE_LENGTH,20],["421",Re.VARIABLE_LENGTH,15],["422",3],["423",Re.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Re.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Re.VARIABLE_LENGTH,15],["391",Re.VARIABLE_LENGTH,18],["392",Re.VARIABLE_LENGTH,15],["393",Re.VARIABLE_LENGTH,18],["703",Re.VARIABLE_LENGTH,30]],Re.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Re.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Re.VARIABLE_LENGTH,20],["8003",Re.VARIABLE_LENGTH,30],["8004",Re.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Re.VARIABLE_LENGTH,30],["8008",Re.VARIABLE_LENGTH,12],["8018",18],["8020",Re.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Re.VARIABLE_LENGTH,70],["8200",Re.VARIABLE_LENGTH,70]];class Ji{constructor(r){this.buffer=new Me,this.information=r}decodeAllCodes(r,s){let l=s,u=null;do{let d=this.decodeGeneralPurposeField(l,u),p=Re.parseFieldsInGeneralPurpose(d.getNewString());if(p!=null&&r.append(p),d.isRemaining()?u=""+d.getRemainingValue():u=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(r,4);return d===0?new Xt(this.information.getSize(),Xt.FNC1,Xt.FNC1):new Xt(this.information.getSize(),d-1,Xt.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),l=(s-8)/11,u=(s-8)%11;return new Xt(r+7,l,u)}extractNumericValueFromBitArray(r,s){return Ji.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,l){let u=0;for(let d=0;d<l;++d)r.get(s+d)&&(u|=1<<l-d-1);return u}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Fe(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Fe(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let l=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(l!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new Fe(this.current.getPosition(),this.buffer.toString()):s=new Fe(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new Pt(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new Fe(this.current.getPosition(),this.buffer.toString());return new Pt(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Pt(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Fe(this.current.getPosition(),this.buffer.toString());return new Pt(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Pt(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Fe(this.current.getPosition(),this.buffer.toString());return new Pt(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Pt(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<116)return!0;if(r+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(r,8);return u>=232&&u<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new Ct(r+5,Ct.FNC1);if(s>=5&&s<15)return new Ct(r+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<90)return new Ct(r+7,""+(l+1));if(l>=90&&l<116)return new Ct(r+7,""+(l+7));let u=this.extractNumericValueFromBitArray(r,8),d;switch(u){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new Z}return new Ct(r+8,d)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,6);return l>=16&&l<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new Ct(r+5,Ct.FNC1);if(s>=5&&s<15)return new Ct(r+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(r,6);if(l>=32&&l<58)return new Ct(r+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new In("Decoding invalid alphanumeric value: "+l)}return new Ct(r+6,u)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class da{constructor(r){this.information=r,this.generalDecoder=new Ji(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Wn extends da{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let l=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,l)}encodeCompressedGtinWithoutAI(r,s,l){for(let u=0;u<4;++u){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*u,10);d/100===0&&r.append("0"),d/10===0&&r.append("0"),r.append(d)}Wn.appendCheckDigit(r,l)}static appendCheckDigit(r,s){let l=0;for(let u=0;u<13;u++){let d=r.charAt(u+s).charCodeAt(0)-48;l+=u&1?d:3*d}l=10-l%10,l===10&&(l=0),r.append(l)}}Wn.GTIN_SIZE=40;class es extends Wn{constructor(r){super(r)}parseInformation(){let r=new Me;r.append("(01)");let s=r.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(es.HEADER_SIZE,4);return r.append(l),this.encodeCompressedGtinWithoutAI(r,es.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,es.HEADER_SIZE+44)}}es.HEADER_SIZE=4;class vi extends da{constructor(r){super(r)}parseInformation(){let r=new Me;return this.getGeneralDecoder().decodeAllCodes(r,vi.HEADER_SIZE)}}vi.HEADER_SIZE=5;class Ao extends Wn{constructor(r){super(r)}encodeCompressedWeight(r,s,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s,l);this.addWeightCode(r,u);let d=this.checkWeight(u),p=1e5;for(let x=0;x<5;++x)d/p===0&&r.append("0"),p/=10;r.append(d)}}class ei extends Ao{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=ei.HEADER_SIZE+Ao.GTIN_SIZE+ei.WEIGHT_SIZE)throw new ae;let r=new Me;return this.encodeCompressedGtin(r,ei.HEADER_SIZE),this.encodeCompressedWeight(r,ei.HEADER_SIZE+Ao.GTIN_SIZE,ei.WEIGHT_SIZE),r.toString()}}ei.HEADER_SIZE=5,ei.WEIGHT_SIZE=15;class Ih extends ei{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class kh extends ei{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class ti extends Wn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<ti.HEADER_SIZE+Wn.GTIN_SIZE)throw new ae;let r=new Me;this.encodeCompressedGtin(r,ti.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(ti.HEADER_SIZE+Wn.GTIN_SIZE,ti.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(ti.HEADER_SIZE+Wn.GTIN_SIZE+ti.LAST_DIGIT_SIZE,null);return r.append(l.getNewString()),r.toString()}}ti.HEADER_SIZE=8,ti.LAST_DIGIT_SIZE=2;class Zn extends Wn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Zn.HEADER_SIZE+Wn.GTIN_SIZE)throw new ae;let r=new Me;this.encodeCompressedGtin(r,Zn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Zn.HEADER_SIZE+Wn.GTIN_SIZE,Zn.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(Zn.HEADER_SIZE+Wn.GTIN_SIZE+Zn.LAST_DIGIT_SIZE,Zn.FIRST_THREE_DIGITS_SIZE);l/100==0&&r.append("0"),l/10==0&&r.append("0"),r.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField(Zn.HEADER_SIZE+Wn.GTIN_SIZE+Zn.LAST_DIGIT_SIZE+Zn.FIRST_THREE_DIGITS_SIZE,null);return r.append(u.getNewString()),r.toString()}}Zn.HEADER_SIZE=8,Zn.LAST_DIGIT_SIZE=2,Zn.FIRST_THREE_DIGITS_SIZE=10;class rn extends Ao{constructor(r,s,l){super(r),this.dateCode=l,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=rn.HEADER_SIZE+rn.GTIN_SIZE+rn.WEIGHT_SIZE+rn.DATE_SIZE)throw new ae;let r=new Me;return this.encodeCompressedGtin(r,rn.HEADER_SIZE),this.encodeCompressedWeight(r,rn.HEADER_SIZE+rn.GTIN_SIZE,rn.WEIGHT_SIZE),this.encodeCompressedDate(r,rn.HEADER_SIZE+rn.GTIN_SIZE+rn.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,rn.DATE_SIZE);if(l==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let u=l%32;l/=32;let d=l%12+1;l/=12;let p=l;p/10==0&&r.append("0"),r.append(p),d/10==0&&r.append("0"),r.append(d),u/10==0&&r.append("0"),r.append(u)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}rn.HEADER_SIZE=8,rn.WEIGHT_SIZE=20,rn.DATE_SIZE=16;function Eo(M){try{if(M.get(1))return new es(M);if(!M.get(2))return new vi(M);switch(Ji.extractNumericValueFromBitArray(M,1,4)){case 4:return new Ih(M);case 5:return new kh(M)}switch(Ji.extractNumericValueFromBitArray(M,1,5)){case 12:return new ti(M);case 13:return new Zn(M)}switch(Ji.extractNumericValueFromBitArray(M,1,7)){case 56:return new rn(M,"310","11");case 57:return new rn(M,"320","11");case 58:return new rn(M,"310","13");case 59:return new rn(M,"320","13");case 60:return new rn(M,"310","15");case 61:return new rn(M,"320","15");case 62:return new rn(M,"310","17");case 63:return new rn(M,"320","17")}}catch(r){throw console.log(r),new In("unknown decoder: "+M)}}class ji{constructor(r,s,l,u){this.leftchar=r,this.rightchar=s,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof ji?ji.equalsOrNull(r.leftchar,s.leftchar)&&ji.equalsOrNull(r.rightchar,s.rightchar)&&ji.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:ji.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class ml{constructor(r,s,l){this.pairs=r,this.rowNumber=s,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof ml?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let l;return r.forEach((u,d)=>{s.forEach(p=>{u.getLeftChar().getValue()===p.getLeftChar().getValue()&&u.getRightChar().getValue()===p.getRightChar().getValue()&&u.getFinderPatter().getValue()===p.getFinderPatter().getValue()&&(l=!0)})}),l}}class ye extends Te{constructor(r){super(...arguments),this.pairs=new Array(ye.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,l){this.pairs.length=0,this.startFromEven=!1;try{return ye.constructResult(this.decodeRow2pairs(r,s))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,ye.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(d){if(d instanceof ae){if(!this.pairs.length)throw new ae;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(r,!1),u){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new ae}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let l=s;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let p of r)this.pairs.push(p.getPairs());if(this.pairs.push(u.getPairs()),!ye.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(r);d.push(u);try{return this.checkRows(d,l+1)}catch(p){this.verbose&&console.log(p)}}throw new ae}static isValidSequence(r){for(let s of ye.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let l=!0;for(let u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!=s[u]){l=!1;break}if(l)return!0}return!1}storeRow(r,s){let l=0,u=!1,d=!1;for(;l<this.rows.length;){let p=this.rows[l];if(p.getRowNumber()>r){d=p.isEquivalent(this.pairs);break}u=p.isEquivalent(this.pairs),l++}d||u||ye.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new ml(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let l of s)if(l.getPairs().length!==r.length){for(let u of l.getPairs())for(let d of r)if(ji.equals(u,d))break}}static isPartialRow(r,s){for(let l of s){let u=!0;for(let d of r){let p=!1;for(let x of l.getPairs())if(d.equals(x)){p=!0;break}if(!p){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=Gt.buildBitArray(r),u=Eo(s).parseInformation(),d=r[0].getFinderPattern().getResultPoints(),p=r[r.length-1].getFinderPattern().getResultPoints(),x=[d[0],d[1],p[0],p[1]];return new ze(u,null,null,x,re.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),l=r.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),d=2;for(let x=1;x<this.pairs.size();++x){let _=this.pairs.get(x);u+=_.getLeftChar().getChecksumPortion(),d++;let C=_.getRightChar();C!=null&&(u+=C.getChecksumPortion(),d++)}return u%=211,211*(d-4)+u==s.getValue()}static getNextSecondBar(r,s){let l;return r.get(s)?(l=r.getNextUnset(s),l=r.getNextSet(l)):(l=r.getNextSet(s),l=r.getNextUnset(l)),l}retrieveNextPair(r,s,l){let u=s.length%2==0;this.startFromEven&&(u=!u);let d,p=!0,x=-1;do this.findNextPair(r,s,x),d=this.parseFoundFinderPattern(r,l,u),d==null?x=ye.getNextSecondBar(r,this.startEnd[0]):p=!1;while(p);let _=this.decodeDataCharacter(r,d,u,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new ae;let C;try{C=this.decodeDataCharacter(r,d,u,!1)}catch(E){C=null,this.verbose&&console.log(E)}return new ji(_,C,d,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),p;l>=0?p=l:this.isEmptyPair(s)?p=0:p=s[s.length-1].getFinderPattern().getStartEnd()[1];let x=s.length%2!=0;this.startFromEven&&(x=!x);let _=!1;for(;p<d&&(_=!r.get(p),!!_);)p++;let C=0,E=p;for(let R=p;R<d;R++)if(r.get(R)!=_)u[C]++;else{if(C==3){if(x&&ye.reverseCounters(u),ye.isFinderPattern(u)){this.startEnd[0]=E,this.startEnd[1]=R;return}x&&ye.reverseCounters(u),E+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,C--}else C++;u[C]=1,_=!_}throw new ae}static reverseCounters(r){let s=r.length;for(let l=0;l<s/2;++l){let u=r[l];r[l]=r[s-l-1],r[s-l-1]=u}}parseFoundFinderPattern(r,s,l){let u,d,p;if(l){let C=this.startEnd[0]-1;for(;C>=0&&!r.get(C);)C--;C++,u=this.startEnd[0]-C,d=C,p=this.startEnd[1]}else d=this.startEnd[0],p=r.getNextUnset(this.startEnd[1]+1),u=p-this.startEnd[1];let x=this.getDecodeFinderCounters();P.arraycopy(x,0,x,1,x.length-1),x[0]=u;let _;try{_=this.parseFinderValue(x,ye.FINDER_PATTERNS)}catch{return null}return new mt(_,[d,p],d,p,s)}decodeDataCharacter(r,s,l,u){let d=this.getDataCharacterCounters();for(let Ut=0;Ut<d.length;Ut++)d[Ut]=0;if(u)ye.recordPatternInReverse(r,s.getStartEnd()[0],d);else{ye.recordPattern(r,s.getStartEnd()[1],d);for(let Ut=0,zn=d.length-1;Ut<zn;Ut++,zn--){let ar=d[Ut];d[Ut]=d[zn],d[zn]=ar}}let p=17,x=yt.sum(new Int32Array(d))/p,_=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(x-_)/_>.3)throw new ae;let C=this.getOddCounts(),E=this.getEvenCounts(),R=this.getOddRoundingErrors(),B=this.getEvenRoundingErrors();for(let Ut=0;Ut<d.length;Ut++){let zn=1*d[Ut]/x,ar=zn+.5;if(ar<1){if(zn<.3)throw new ae;ar=1}else if(ar>8){if(zn>8.7)throw new ae;ar=8}let Ps=Ut/2;Ut&1?(E[Ps]=ar,B[Ps]=zn-ar):(C[Ps]=ar,R[Ps]=zn-ar)}this.adjustOddEvenCounts(p);let Y=4*s.getValue()+(l?0:2)+(u?0:1)-1,Q=0,ee=0;for(let Ut=C.length-1;Ut>=0;Ut--){if(ye.isNotA1left(s,l,u)){let zn=ye.WEIGHTS[Y][2*Ut];ee+=C[Ut]*zn}Q+=C[Ut]}let ie=0;for(let Ut=E.length-1;Ut>=0;Ut--)if(ye.isNotA1left(s,l,u)){let zn=ye.WEIGHTS[Y][2*Ut+1];ie+=E[Ut]*zn}let le=ee+ie;if(Q&1||Q>13||Q<4)throw new ae;let Ae=(13-Q)/2,Ee=ye.SYMBOL_WIDEST[Ae],be=9-Ee,At=Rt.getRSSvalue(C,Ee,!0),pt=Rt.getRSSvalue(E,be,!1),un=ye.EVEN_TOTAL_SUBSET[Ae],sr=ye.GSUM[Ae],or=At*un+pt+sr;return new $e(or,le)}static isNotA1left(r,s,l){return!(r.getValue()==0&&s&&l)}adjustOddEvenCounts(r){let s=yt.sum(new Int32Array(this.getOddCounts())),l=yt.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1;s>13?d=!0:s<4&&(u=!0);let p=!1,x=!1;l>13?x=!0:l<4&&(p=!0);let _=s+l-r,C=(s&1)==1,E=(l&1)==0;if(_==1)if(C){if(E)throw new ae;d=!0}else{if(!E)throw new ae;x=!0}else if(_==-1)if(C){if(E)throw new ae;u=!0}else{if(!E)throw new ae;p=!0}else if(_==0){if(C){if(!E)throw new ae;s<l?(u=!0,x=!0):(d=!0,p=!0)}else if(E)throw new ae}else throw new ae;if(u){if(d)throw new ae;ye.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&ye.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(x)throw new ae;ye.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&ye.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ye.SYMBOL_WIDEST=[7,5,4,3,1],ye.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ye.GSUM=[0,348,1388,2948,3988],ye.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ye.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ye.FINDER_PAT_A=0,ye.FINDER_PAT_B=1,ye.FINDER_PAT_C=2,ye.FINDER_PAT_D=3,ye.FINDER_PAT_E=4,ye.FINDER_PAT_F=5,ye.FINDER_PATTERN_SEQUENCES=[[ye.FINDER_PAT_A,ye.FINDER_PAT_A],[ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B],[ye.FINDER_PAT_A,ye.FINDER_PAT_C,ye.FINDER_PAT_B,ye.FINDER_PAT_D],[ye.FINDER_PAT_A,ye.FINDER_PAT_E,ye.FINDER_PAT_B,ye.FINDER_PAT_D,ye.FINDER_PAT_C],[ye.FINDER_PAT_A,ye.FINDER_PAT_E,ye.FINDER_PAT_B,ye.FINDER_PAT_D,ye.FINDER_PAT_D,ye.FINDER_PAT_F],[ye.FINDER_PAT_A,ye.FINDER_PAT_E,ye.FINDER_PAT_B,ye.FINDER_PAT_D,ye.FINDER_PAT_E,ye.FINDER_PAT_F,ye.FINDER_PAT_F],[ye.FINDER_PAT_A,ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B,ye.FINDER_PAT_C,ye.FINDER_PAT_C,ye.FINDER_PAT_D,ye.FINDER_PAT_D],[ye.FINDER_PAT_A,ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B,ye.FINDER_PAT_C,ye.FINDER_PAT_C,ye.FINDER_PAT_D,ye.FINDER_PAT_E,ye.FINDER_PAT_E],[ye.FINDER_PAT_A,ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B,ye.FINDER_PAT_C,ye.FINDER_PAT_C,ye.FINDER_PAT_D,ye.FINDER_PAT_E,ye.FINDER_PAT_F,ye.FINDER_PAT_F],[ye.FINDER_PAT_A,ye.FINDER_PAT_A,ye.FINDER_PAT_B,ye.FINDER_PAT_B,ye.FINDER_PAT_C,ye.FINDER_PAT_D,ye.FINDER_PAT_D,ye.FINDER_PAT_E,ye.FINDER_PAT_E,ye.FINDER_PAT_F,ye.FINDER_PAT_F]],ye.MAX_PAIRS=11;class Mh extends $e{constructor(r,s,l){super(r,s),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class pn extends Te{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,l){const u=this.decodePair(s,!1,r,l);pn.addOrTally(this.possibleLeftPairs,u),s.reverse();let d=this.decodePair(s,!0,r,l);pn.addOrTally(this.possibleRightPairs,d),s.reverse();for(let p of this.possibleLeftPairs)if(p.getCount()>1){for(let x of this.possibleRightPairs)if(x.getCount()>1&&pn.checkChecksum(p,x))return pn.constructResult(p,x)}throw new ae}static addOrTally(r,s){if(s==null)return;let l=!1;for(let u of r)if(u.getValue()===s.getValue()){u.incrementCount(),l=!0;break}l||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let l=4537077*r.getValue()+s.getValue(),u=new String(l).toString(),d=new Me;for(let C=13-u.length;C>0;C--)d.append("0");d.append(u);let p=0;for(let C=0;C<13;C++){let E=d.charAt(C).charCodeAt(0)-48;p+=C&1?E:3*E}p=10-p%10,p===10&&(p=0),d.append(p.toString());let x=r.getFinderPattern().getResultPoints(),_=s.getFinderPattern().getResultPoints();return new ze(d.toString(),null,0,[x[0],x[1],_[0],_[1]],re.RSS_14,new Date().getTime())}static checkChecksum(r,s){let l=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,u=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(r,s,l,u){try{let d=this.findFinderPattern(r,s),p=this.parseFoundFinderPattern(r,l,s,d),x=u==null?null:u.get(G.NEED_RESULT_POINT_CALLBACK);if(x!=null){let E=(d[0]+d[1])/2;s&&(E=r.getSize()-1-E),x.foundPossibleResultPoint(new Ue(E,l))}let _=this.decodeDataCharacter(r,p,!0),C=this.decodeDataCharacter(r,p,!1);return new Mh(1597*_.getValue()+C.getValue(),_.getChecksumPortion()+4*C.getChecksumPortion(),p)}catch{return null}}decodeDataCharacter(r,s,l){let u=this.getDataCharacterCounters();for(let ie=0;ie<u.length;ie++)u[ie]=0;if(l)st.recordPatternInReverse(r,s.getStartEnd()[0],u);else{st.recordPattern(r,s.getStartEnd()[1]+1,u);for(let ie=0,le=u.length-1;ie<le;ie++,le--){let Ae=u[ie];u[ie]=u[le],u[le]=Ae}}let d=l?16:15,p=yt.sum(new Int32Array(u))/d,x=this.getOddCounts(),_=this.getEvenCounts(),C=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let ie=0;ie<u.length;ie++){let le=u[ie]/p,Ae=Math.floor(le+.5);Ae<1?Ae=1:Ae>8&&(Ae=8);let Ee=Math.floor(ie/2);ie&1?(_[Ee]=Ae,E[Ee]=le-Ae):(x[Ee]=Ae,C[Ee]=le-Ae)}this.adjustOddEvenCounts(l,d);let R=0,B=0;for(let ie=x.length-1;ie>=0;ie--)B*=9,B+=x[ie],R+=x[ie];let Y=0,Q=0;for(let ie=_.length-1;ie>=0;ie--)Y*=9,Y+=_[ie],Q+=_[ie];let ee=B+3*Y;if(l){if(R&1||R>12||R<4)throw new ae;let ie=(12-R)/2,le=pn.OUTSIDE_ODD_WIDEST[ie],Ae=9-le,Ee=Rt.getRSSvalue(x,le,!1),be=Rt.getRSSvalue(_,Ae,!0),At=pn.OUTSIDE_EVEN_TOTAL_SUBSET[ie],pt=pn.OUTSIDE_GSUM[ie];return new $e(Ee*At+be+pt,ee)}else{if(Q&1||Q>10||Q<4)throw new ae;let ie=(10-Q)/2,le=pn.INSIDE_ODD_WIDEST[ie],Ae=9-le,Ee=Rt.getRSSvalue(x,le,!0),be=Rt.getRSSvalue(_,Ae,!1),At=pn.INSIDE_ODD_TOTAL_SUBSET[ie],pt=pn.INSIDE_GSUM[ie];return new $e(be*At+Ee+pt,ee)}}findFinderPattern(r,s){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=r.getSize(),d=!1,p=0;for(;p<u&&(d=!r.get(p),s!==d);)p++;let x=0,_=p;for(let C=p;C<u;C++)if(r.get(C)!==d)l[x]++;else{if(x===3){if(Te.isFinderPattern(l))return[_,C];_+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,x--}else x++;l[x]=1,d=!d}throw new ae}parseFoundFinderPattern(r,s,l,u){let d=r.get(u[0]),p=u[0]-1;for(;p>=0&&d!==r.get(p);)p--;p++;const x=u[0]-p,_=this.getDecodeFinderCounters(),C=new Int32Array(_.length);P.arraycopy(_,0,C,1,_.length-1),C[0]=x;const E=this.parseFinderValue(C,pn.FINDER_PATTERNS);let R=p,B=u[1];return l&&(R=r.getSize()-1-R,B=r.getSize()-1-B),new mt(E,[p,u[1]],R,B,s)}adjustOddEvenCounts(r,s){let l=yt.sum(new Int32Array(this.getOddCounts())),u=yt.sum(new Int32Array(this.getEvenCounts())),d=!1,p=!1,x=!1,_=!1;r?(l>12?p=!0:l<4&&(d=!0),u>12?_=!0:u<4&&(x=!0)):(l>11?p=!0:l<5&&(d=!0),u>10?_=!0:u<4&&(x=!0));let C=l+u-s,E=(l&1)===(r?1:0),R=(u&1)===1;if(C===1)if(E){if(R)throw new ae;p=!0}else{if(!R)throw new ae;_=!0}else if(C===-1)if(E){if(R)throw new ae;d=!0}else{if(!R)throw new ae;x=!0}else if(C===0){if(E){if(!R)throw new ae;l<u?(d=!0,_=!0):(p=!0,x=!0)}else if(R)throw new ae}else throw new ae;if(d){if(p)throw new ae;Te.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&Te.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(_)throw new ae;Te.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&Te.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}pn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],pn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],pn.OUTSIDE_GSUM=[0,161,961,2015,2715],pn.INSIDE_GSUM=[0,336,1036,1516],pn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],pn.INSIDE_ODD_WIDEST=[2,4,6,8],pn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Bi extends st{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const l=r?r.get(G.POSSIBLE_FORMATS):null,u=r&&r.get(G.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(re.EAN_13)||l.includes(re.UPC_A)||l.includes(re.EAN_8)||l.includes(re.UPC_E))&&this.readers.push(new xe(r)),l.includes(re.CODE_39)&&this.readers.push(new wt(u)),l.includes(re.CODE_128)&&this.readers.push(new _e),l.includes(re.ITF)&&this.readers.push(new ht),l.includes(re.RSS_14)&&this.readers.push(new pn),l.includes(re.RSS_EXPANDED)&&this.readers.push(new ye(this.verbose))):(this.readers.push(new xe(r)),this.readers.push(new wt),this.readers.push(new xe(r)),this.readers.push(new _e),this.readers.push(new ht),this.readers.push(new pn),this.readers.push(new ye(this.verbose)))}decodeRow(r,s,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(r,s,l)}catch{}throw new ae}reset(){this.readers.forEach(r=>r.reset())}}class No extends Pe{constructor(r=500,s){super(new Bi(s),r,s)}}class Ft{constructor(r,s,l){this.ecCodewords=r,this.ecBlocks=[s],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Bt{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class vt{constructor(r,s,l,u,d,p){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=d,this.ecBlocks=p;let x=0;const _=p.getECCodewords(),C=p.getECBlocks();for(let E of C)x+=E.getCount()*(E.getDataCodewords()+_);this.totalCodewords=x}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if(r&1||s&1)throw new Z;for(let l of vt.VERSIONS)if(l.symbolSizeRows===r&&l.symbolSizeColumns===s)return l;throw new Z}toString(){return""+this.versionNumber}static buildVersions(){return[new vt(1,10,10,8,8,new Ft(5,new Bt(1,3))),new vt(2,12,12,10,10,new Ft(7,new Bt(1,5))),new vt(3,14,14,12,12,new Ft(10,new Bt(1,8))),new vt(4,16,16,14,14,new Ft(12,new Bt(1,12))),new vt(5,18,18,16,16,new Ft(14,new Bt(1,18))),new vt(6,20,20,18,18,new Ft(18,new Bt(1,22))),new vt(7,22,22,20,20,new Ft(20,new Bt(1,30))),new vt(8,24,24,22,22,new Ft(24,new Bt(1,36))),new vt(9,26,26,24,24,new Ft(28,new Bt(1,44))),new vt(10,32,32,14,14,new Ft(36,new Bt(1,62))),new vt(11,36,36,16,16,new Ft(42,new Bt(1,86))),new vt(12,40,40,18,18,new Ft(48,new Bt(1,114))),new vt(13,44,44,20,20,new Ft(56,new Bt(1,144))),new vt(14,48,48,22,22,new Ft(68,new Bt(1,174))),new vt(15,52,52,24,24,new Ft(42,new Bt(2,102))),new vt(16,64,64,14,14,new Ft(56,new Bt(2,140))),new vt(17,72,72,16,16,new Ft(36,new Bt(4,92))),new vt(18,80,80,18,18,new Ft(48,new Bt(4,114))),new vt(19,88,88,20,20,new Ft(56,new Bt(4,144))),new vt(20,96,96,22,22,new Ft(68,new Bt(4,174))),new vt(21,104,104,24,24,new Ft(56,new Bt(6,136))),new vt(22,120,120,18,18,new Ft(68,new Bt(6,175))),new vt(23,132,132,20,20,new Ft(62,new Bt(8,163))),new vt(24,144,144,22,22,new Ft(62,new Bt(8,156),new Bt(2,155))),new vt(25,8,18,6,16,new Ft(7,new Bt(1,5))),new vt(26,8,32,6,14,new Ft(11,new Bt(1,10))),new vt(27,12,26,10,24,new Ft(14,new Bt(1,16))),new vt(28,12,36,10,16,new Ft(18,new Bt(1,22))),new vt(29,16,36,14,16,new Ft(24,new Bt(1,32))),new vt(30,16,48,14,22,new Ft(28,new Bt(1,49)))]}}vt.VERSIONS=vt.buildVersions();class Ot{constructor(r){const s=r.getHeight();if(s<8||s>144||s&1)throw new Z;this.version=Ot.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new we(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),l=r.getWidth();return vt.getVersionForDimensions(s,l)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,l=4,u=0;const d=this.mappingBitMatrix.getHeight(),p=this.mappingBitMatrix.getWidth();let x=!1,_=!1,C=!1,E=!1;do if(l===d&&u===0&&!x)r[s++]=this.readCorner1(d,p)&255,l-=2,u+=2,x=!0;else if(l===d-2&&u===0&&p&3&&!_)r[s++]=this.readCorner2(d,p)&255,l-=2,u+=2,_=!0;else if(l===d+4&&u===2&&!(p&7)&&!C)r[s++]=this.readCorner3(d,p)&255,l-=2,u+=2,C=!0;else if(l===d-2&&u===0&&(p&7)===4&&!E)r[s++]=this.readCorner4(d,p)&255,l-=2,u+=2,E=!0;else{do l<d&&u>=0&&!this.readMappingMatrix.get(u,l)&&(r[s++]=this.readUtah(l,u,d,p)&255),l-=2,u+=2;while(l>=0&&u<p);l+=1,u+=3;do l>=0&&u<p&&!this.readMappingMatrix.get(u,l)&&(r[s++]=this.readUtah(l,u,d,p)&255),l+=2,u-=2;while(l<d&&u>=0);l+=3,u+=1}while(l<d||u<p);if(s!==this.version.getTotalCodewords())throw new Z;return r}readModule(r,s,l,u){return r<0&&(r+=l,s+=4-(l+4&7)),s<0&&(s+=u,r+=4-(u+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,l,u){let d=0;return this.readModule(r-2,s-2,l,u)&&(d|=1),d<<=1,this.readModule(r-2,s-1,l,u)&&(d|=1),d<<=1,this.readModule(r-1,s-2,l,u)&&(d|=1),d<<=1,this.readModule(r-1,s-1,l,u)&&(d|=1),d<<=1,this.readModule(r-1,s,l,u)&&(d|=1),d<<=1,this.readModule(r,s-2,l,u)&&(d|=1),d<<=1,this.readModule(r,s-1,l,u)&&(d|=1),d<<=1,this.readModule(r,s,l,u)&&(d|=1),d}readCorner1(r,s){let l=0;return this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,1,r,s)&&(l|=1),l<<=1,this.readModule(r-1,2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l<<=1,this.readModule(2,s-1,r,s)&&(l|=1),l<<=1,this.readModule(3,s-1,r,s)&&(l|=1),l}readCorner2(r,s){let l=0;return this.readModule(r-3,0,r,s)&&(l|=1),l<<=1,this.readModule(r-2,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(0,s-4,r,s)&&(l|=1),l<<=1,this.readModule(0,s-3,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l}readCorner3(r,s){let l=0;return this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,s-1,r,s)&&(l|=1),l<<=1,this.readModule(0,s-3,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-3,r,s)&&(l|=1),l<<=1,this.readModule(1,s-2,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l}readCorner4(r,s){let l=0;return this.readModule(r-3,0,r,s)&&(l|=1),l<<=1,this.readModule(r-2,0,r,s)&&(l|=1),l<<=1,this.readModule(r-1,0,r,s)&&(l|=1),l<<=1,this.readModule(0,s-2,r,s)&&(l|=1),l<<=1,this.readModule(0,s-1,r,s)&&(l|=1),l<<=1,this.readModule(1,s-1,r,s)&&(l|=1),l<<=1,this.readModule(2,s-1,r,s)&&(l|=1),l<<=1,this.readModule(3,s-1,r,s)&&(l|=1),l}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new b("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),p=s/u|0,x=l/d|0,_=p*u,C=x*d,E=new we(C,_);for(let R=0;R<p;++R){const B=R*u;for(let Y=0;Y<x;++Y){const Q=Y*d;for(let ee=0;ee<u;++ee){const ie=R*(u+2)+1+ee,le=B+ee;for(let Ae=0;Ae<d;++Ae){const Ee=Y*(d+2)+1+Ae;if(r.get(Ee,ie)){const be=Q+Ae;E.set(be,le)}}}}}return E}}class tn{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const l=s.getECBlocks();let u=0;const d=l.getECBlocks();for(let ee of d)u+=ee.getCount();const p=new Array(u);let x=0;for(let ee of d)for(let ie=0;ie<ee.getCount();ie++){const le=ee.getDataCodewords(),Ae=l.getECCodewords()+le;p[x++]=new tn(le,new Uint8Array(Ae))}const C=p[0].codewords.length-l.getECCodewords(),E=C-1;let R=0;for(let ee=0;ee<E;ee++)for(let ie=0;ie<x;ie++)p[ie].codewords[ee]=r[R++];const B=s.getVersionNumber()===24,Y=B?8:x;for(let ee=0;ee<Y;ee++)p[ee].codewords[C-1]=r[R++];const Q=p[0].codewords.length;for(let ee=C;ee<Q;ee++)for(let ie=0;ie<x;ie++){const le=B?(ie+8)%x:ie,Ae=B&&le>7?ee-1:ee;p[le].codewords[Ae]=r[R++]}if(R!==r.length)throw new b;return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ts{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new b(""+r);let s=0,l=this.bitOffset,u=this.byteOffset;const d=this.bytes;if(l>0){const p=8-l,x=r<p?r:p,_=p-x,C=255>>8-x<<_;s=(d[u]&C)>>_,r-=x,l+=x,l===8&&(l=0,u++)}if(r>0){for(;r>=8;)s=s<<8|d[u]&255,u++,r-=8;if(r>0){const p=8-r,x=255>>p<<p;s=s<<r|(d[u]&x)>>p,l+=r}}return this.bitOffset=l,this.byteOffset=u,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var sn;(function(M){M[M.PAD_ENCODE=0]="PAD_ENCODE",M[M.ASCII_ENCODE=1]="ASCII_ENCODE",M[M.C40_ENCODE=2]="C40_ENCODE",M[M.TEXT_ENCODE=3]="TEXT_ENCODE",M[M.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",M[M.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",M[M.BASE256_ENCODE=6]="BASE256_ENCODE"})(sn||(sn={}));class pr{static decode(r){const s=new Ts(r),l=new Me,u=new Me,d=new Array;let p=sn.ASCII_ENCODE;do if(p===sn.ASCII_ENCODE)p=this.decodeAsciiSegment(s,l,u);else{switch(p){case sn.C40_ENCODE:this.decodeC40Segment(s,l);break;case sn.TEXT_ENCODE:this.decodeTextSegment(s,l);break;case sn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,l);break;case sn.EDIFACT_ENCODE:this.decodeEdifactSegment(s,l);break;case sn.BASE256_ENCODE:this.decodeBase256Segment(s,l,d);break;default:throw new Z}p=sn.ASCII_ENCODE}while(p!==sn.PAD_ENCODE&&s.available()>0);return u.length()>0&&l.append(u.toString()),new Et(r,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(r,s,l){let u=!1;do{let d=r.readBits(8);if(d===0)throw new Z;if(d<=128)return u&&(d+=128),s.append(String.fromCharCode(d-1)),sn.ASCII_ENCODE;if(d===129)return sn.PAD_ENCODE;if(d<=229){const p=d-130;p<10&&s.append("0"),s.append(""+p)}else switch(d){case 230:return sn.C40_ENCODE;case 231:return sn.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:s.append("[)>05"),l.insert(0,"");break;case 237:s.append("[)>06"),l.insert(0,"");break;case 238:return sn.ANSIX12_ENCODE;case 239:return sn.TEXT_ENCODE;case 240:return sn.EDIFACT_ENCODE;case 241:break;default:if(d!==254||r.available()!==0)throw new Z;break}}while(r.available()>0);return sn.ASCII_ENCODE}static decodeC40Segment(r,s){let l=!1;const u=[];let d=0;do{if(r.available()===8)return;const p=r.readBits(8);if(p===254)return;this.parseTwoBytes(p,r.readBits(8),u);for(let x=0;x<3;x++){const _=u[x];switch(d){case 0:if(_<3)d=_+1;else if(_<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[_];l?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):s.append(C)}else throw new Z;break;case 1:l?(s.append(String.fromCharCode(_+128)),l=!1):s.append(String.fromCharCode(_)),d=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[_];l?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):s.append(C)}else switch(_){case 27:s.append("");break;case 30:l=!0;break;default:throw new Z}d=0;break;case 3:l?(s.append(String.fromCharCode(_+224)),l=!1):s.append(String.fromCharCode(_+96)),d=0;break;default:throw new Z}}}while(r.available()>0)}static decodeTextSegment(r,s){let l=!1,u=[],d=0;do{if(r.available()===8)return;const p=r.readBits(8);if(p===254)return;this.parseTwoBytes(p,r.readBits(8),u);for(let x=0;x<3;x++){const _=u[x];switch(d){case 0:if(_<3)d=_+1;else if(_<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[_];l?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):s.append(C)}else throw new Z;break;case 1:l?(s.append(String.fromCharCode(_+128)),l=!1):s.append(String.fromCharCode(_)),d=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[_];l?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):s.append(C)}else switch(_){case 27:s.append("");break;case 30:l=!0;break;default:throw new Z}d=0;break;case 3:if(_<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[_];l?(s.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):s.append(C),d=0}else throw new Z;break;default:throw new Z}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const l=[];do{if(r.available()===8)return;const u=r.readBits(8);if(u===254)return;this.parseTwoBytes(u,r.readBits(8),l);for(let d=0;d<3;d++){const p=l[d];switch(p){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(p<14)s.append(String.fromCharCode(p+44));else if(p<40)s.append(String.fromCharCode(p+51));else throw new Z;break}}}while(r.available()>0)}static parseTwoBytes(r,s,l){let u=(r<<8)+s-1,d=Math.floor(u/1600);l[0]=d,u-=d*1600,d=Math.floor(u/40),l[1]=d,l[2]=u-d*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let l=0;l<4;l++){let u=r.readBits(6);if(u===31){const d=8-r.getBitOffset();d!==8&&r.readBits(d);return}u&32||(u|=64),s.append(String.fromCharCode(u))}}while(r.available()>0)}static decodeBase256Segment(r,s,l){let u=1+r.getByteOffset();const d=this.unrandomize255State(r.readBits(8),u++);let p;if(d===0?p=r.available()/8|0:d<250?p=d:p=250*(d-249)+this.unrandomize255State(r.readBits(8),u++),p<0)throw new Z;const x=new Uint8Array(p);for(let _=0;_<p;_++){if(r.available()<8)throw new Z;x[_]=this.unrandomize255State(r.readBits(8),u++)}l.push(x);try{s.append(me.decode(x,fe.ISO88591))}catch(_){throw new In("Platform does not support required encoding: "+_.message)}}static unrandomize255State(r,s){const l=149*s%255+1,u=r-l;return u>=0?u:u+256}}pr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],pr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],pr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],pr.TEXT_SHIFT2_SET_CHARS=pr.C40_SHIFT2_SET_CHARS,pr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class gl{constructor(){this.rsDecoder=new rr(ut.DATA_MATRIX_FIELD_256)}decode(r){const s=new Ot(r),l=s.getVersion(),u=s.readCodewords(),d=tn.getDataBlocks(u,l);let p=0;for(let C of d)p+=C.getNumDataCodewords();const x=new Uint8Array(p),_=d.length;for(let C=0;C<_;C++){const E=d[C],R=E.getCodewords(),B=E.getNumDataCodewords();this.correctErrors(R,B);for(let Y=0;Y<B;Y++)x[Y*_+C]=R[Y]}return pr.decode(x)}correctErrors(r,s){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-s)}catch{throw new I}for(let u=0;u<s;u++)r[u]=l[u]}}class Ge{constructor(r){this.image=r,this.rectangleDetector=new Qe(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new ae;s=this.shiftToModuleCenter(s);const l=s[0],u=s[1],d=s[2],p=s[3];let x=this.transitionsBetween(l,p)+1,_=this.transitionsBetween(d,p)+1;(x&1)===1&&(x+=1),(_&1)===1&&(_+=1),4*x<7*_&&4*_<7*x&&(x=_=Math.max(x,_));let C=Ge.sampleGrid(this.image,l,u,d,p,x,_);return new q(C,[l,u,d,p])}static shiftPoint(r,s,l){let u=(s.getX()-r.getX())/(l+1),d=(s.getY()-r.getY())/(l+1);return new Ue(r.getX()+u,r.getY()+d)}static moveAway(r,s,l){let u=r.getX(),d=r.getY();return u<s?u-=1:u+=1,d<l?d-=1:d+=1,new Ue(u,d)}detectSolid1(r){let s=r[0],l=r[1],u=r[3],d=r[2],p=this.transitionsBetween(s,l),x=this.transitionsBetween(l,u),_=this.transitionsBetween(u,d),C=this.transitionsBetween(d,s),E=p,R=[d,s,l,u];return E>x&&(E=x,R[0]=s,R[1]=l,R[2]=u,R[3]=d),E>_&&(E=_,R[0]=l,R[1]=u,R[2]=d,R[3]=s),E>C&&(R[0]=u,R[1]=d,R[2]=s,R[3]=l),R}detectSolid2(r){let s=r[0],l=r[1],u=r[2],d=r[3],p=this.transitionsBetween(s,d),x=Ge.shiftPoint(l,u,(p+1)*4),_=Ge.shiftPoint(u,l,(p+1)*4),C=this.transitionsBetween(x,s),E=this.transitionsBetween(_,d);return C<E?(r[0]=s,r[1]=l,r[2]=u,r[3]=d):(r[0]=l,r[1]=u,r[2]=d,r[3]=s),r}correctTopRight(r){let s=r[0],l=r[1],u=r[2],d=r[3],p=this.transitionsBetween(s,d),x=this.transitionsBetween(l,d),_=Ge.shiftPoint(s,l,(x+1)*4),C=Ge.shiftPoint(u,l,(p+1)*4);p=this.transitionsBetween(_,d),x=this.transitionsBetween(C,d);let E=new Ue(d.getX()+(u.getX()-l.getX())/(p+1),d.getY()+(u.getY()-l.getY())/(p+1)),R=new Ue(d.getX()+(s.getX()-l.getX())/(x+1),d.getY()+(s.getY()-l.getY())/(x+1));if(!this.isValid(E))return this.isValid(R)?R:null;if(!this.isValid(R))return E;let B=this.transitionsBetween(_,E)+this.transitionsBetween(C,E),Y=this.transitionsBetween(_,R)+this.transitionsBetween(C,R);return B>Y?E:R}shiftToModuleCenter(r){let s=r[0],l=r[1],u=r[2],d=r[3],p=this.transitionsBetween(s,d)+1,x=this.transitionsBetween(u,d)+1,_=Ge.shiftPoint(s,l,x*4),C=Ge.shiftPoint(u,l,p*4);p=this.transitionsBetween(_,d)+1,x=this.transitionsBetween(C,d)+1,(p&1)===1&&(p+=1),(x&1)===1&&(x+=1);let E=(s.getX()+l.getX()+u.getX()+d.getX())/4,R=(s.getY()+l.getY()+u.getY()+d.getY())/4;s=Ge.moveAway(s,E,R),l=Ge.moveAway(l,E,R),u=Ge.moveAway(u,E,R),d=Ge.moveAway(d,E,R);let B,Y;return _=Ge.shiftPoint(s,l,x*4),_=Ge.shiftPoint(_,d,p*4),B=Ge.shiftPoint(l,s,x*4),B=Ge.shiftPoint(B,u,p*4),C=Ge.shiftPoint(u,d,x*4),C=Ge.shiftPoint(C,l,p*4),Y=Ge.shiftPoint(d,u,x*4),Y=Ge.shiftPoint(Y,s,p*4),[_,B,C,Y]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,l,u,d,p,x){return _t.getInstance().sampleGrid(r,p,x,.5,.5,p-.5,.5,p-.5,x-.5,.5,x-.5,s.getX(),s.getY(),d.getX(),d.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(r,s){let l=Math.trunc(r.getX()),u=Math.trunc(r.getY()),d=Math.trunc(s.getX()),p=Math.trunc(s.getY()),x=Math.abs(p-u)>Math.abs(d-l);if(x){let ee=l;l=u,u=ee,ee=d,d=p,p=ee}let _=Math.abs(d-l),C=Math.abs(p-u),E=-_/2,R=u<p?1:-1,B=l<d?1:-1,Y=0,Q=this.image.get(x?u:l,x?l:u);for(let ee=l,ie=u;ee!==d;ee+=B){let le=this.image.get(x?ie:ee,x?ee:ie);if(le!==Q&&(Y++,Q=le),E+=C,E>0){if(ie===p)break;ie+=R,E-=_}}return Y}}class Ht{constructor(){this.decoder=new gl}decode(r,s=null){let l,u;if(s!=null&&s.has(G.PURE_BARCODE)){const C=Ht.extractPureBits(r.getBlackMatrix());l=this.decoder.decode(C),u=Ht.NO_POINTS}else{const C=new Ge(r.getBlackMatrix()).detect();l=this.decoder.decode(C.getBits()),u=C.getPoints()}const d=l.getRawBytes(),p=new ze(l.getText(),d,8*d.length,u,re.DATA_MATRIX,P.currentTimeMillis()),x=l.getByteSegments();x!=null&&p.putMetadata(Xe.BYTE_SEGMENTS,x);const _=l.getECLevel();return _!=null&&p.putMetadata(Xe.ERROR_CORRECTION_LEVEL,_),p}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(s==null||l==null)throw new ae;const u=this.moduleSize(s,r);let d=s[1];const p=l[1];let x=s[0];const C=(l[0]-x+1)/u,E=(p-d+1)/u;if(C<=0||E<=0)throw new ae;const R=u/2;d+=R,x+=R;const B=new we(C,E);for(let Y=0;Y<E;Y++){const Q=d+Y*u;for(let ee=0;ee<C;ee++)r.get(x+ee*u,Q)&&B.set(ee,Y)}return B}static moduleSize(r,s){const l=s.getWidth();let u=r[0];const d=r[1];for(;u<l&&s.get(u,d);)u++;if(u===l)throw new ae;const p=u-r[0];if(p===0)throw new ae;return p}}Ht.NO_POINTS=[];class xl extends Pe{constructor(r=500){super(new Ht,r)}}var _i;(function(M){M[M.L=0]="L",M[M.M=1]="M",M[M.Q=2]="Q",M[M.H=3]="H"})(_i||(_i={}));class St{constructor(r,s,l){this.value=r,this.stringValue=s,this.bits=l,St.FOR_BITS.set(l,this),St.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return St.L;case"M":return St.M;case"Q":return St.Q;case"H":return St.H;default:throw new S(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof St))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=St.FOR_BITS.size)throw new b;return St.FOR_BITS.get(r)}}St.FOR_BITS=new Map,St.FOR_VALUE=new Map,St.L=new St(_i.L,"L",1),St.M=new St(_i.M,"M",0),St.Q=new St(_i.Q,"Q",3),St.H=new St(_i.H,"H",2);class Gn{constructor(r){this.errorCorrectionLevel=St.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return k.bitCount(r^s)}static decodeFormatInformation(r,s){const l=Gn.doDecodeFormatInformation(r,s);return l!==null?l:Gn.doDecodeFormatInformation(r^Gn.FORMAT_INFO_MASK_QR,s^Gn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let l=Number.MAX_SAFE_INTEGER,u=0;for(const d of Gn.FORMAT_INFO_DECODE_LOOKUP){const p=d[0];if(p===r||p===s)return new Gn(d[1]);let x=Gn.numBitsDiffering(r,p);x<l&&(u=d[1],l=x),r!==s&&(x=Gn.numBitsDiffering(s,p),x<l&&(u=d[1],l=x))}return l<=3?new Gn(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof Gn))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}Gn.FORMAT_INFO_MASK_QR=21522,Gn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class se{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const l of s)r+=l.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class W{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Le{constructor(r,s,...l){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=l;let u=0;const d=l[0].getECCodewordsPerBlock(),p=l[0].getECBlocks();for(const x of p)u+=x.getCount()*(x.getDataCodewords()+d);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new Z;try{return this.getVersionForNumber((r-17)/4)}catch{throw new Z}}static getVersionForNumber(r){if(r<1||r>40)throw new b;return Le.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<Le.VERSION_DECODE_INFO.length;u++){const d=Le.VERSION_DECODE_INFO[u];if(d===r)return Le.getVersionForNumber(u+7);const p=Gn.numBitsDiffering(r,d);p<s&&(l=u+7,s=p)}return s<=3?Le.getVersionForNumber(l):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new we(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){const d=this.alignmentPatternCenters[u]-2;for(let p=0;p<l;p++)u===0&&(p===0||p===l-1)||u===l-1&&p===0||s.setRegion(this.alignmentPatternCenters[p]-2,d,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}Le.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Le.VERSIONS=[new Le(1,new Int32Array(0),new se(7,new W(1,19)),new se(10,new W(1,16)),new se(13,new W(1,13)),new se(17,new W(1,9))),new Le(2,Int32Array.from([6,18]),new se(10,new W(1,34)),new se(16,new W(1,28)),new se(22,new W(1,22)),new se(28,new W(1,16))),new Le(3,Int32Array.from([6,22]),new se(15,new W(1,55)),new se(26,new W(1,44)),new se(18,new W(2,17)),new se(22,new W(2,13))),new Le(4,Int32Array.from([6,26]),new se(20,new W(1,80)),new se(18,new W(2,32)),new se(26,new W(2,24)),new se(16,new W(4,9))),new Le(5,Int32Array.from([6,30]),new se(26,new W(1,108)),new se(24,new W(2,43)),new se(18,new W(2,15),new W(2,16)),new se(22,new W(2,11),new W(2,12))),new Le(6,Int32Array.from([6,34]),new se(18,new W(2,68)),new se(16,new W(4,27)),new se(24,new W(4,19)),new se(28,new W(4,15))),new Le(7,Int32Array.from([6,22,38]),new se(20,new W(2,78)),new se(18,new W(4,31)),new se(18,new W(2,14),new W(4,15)),new se(26,new W(4,13),new W(1,14))),new Le(8,Int32Array.from([6,24,42]),new se(24,new W(2,97)),new se(22,new W(2,38),new W(2,39)),new se(22,new W(4,18),new W(2,19)),new se(26,new W(4,14),new W(2,15))),new Le(9,Int32Array.from([6,26,46]),new se(30,new W(2,116)),new se(22,new W(3,36),new W(2,37)),new se(20,new W(4,16),new W(4,17)),new se(24,new W(4,12),new W(4,13))),new Le(10,Int32Array.from([6,28,50]),new se(18,new W(2,68),new W(2,69)),new se(26,new W(4,43),new W(1,44)),new se(24,new W(6,19),new W(2,20)),new se(28,new W(6,15),new W(2,16))),new Le(11,Int32Array.from([6,30,54]),new se(20,new W(4,81)),new se(30,new W(1,50),new W(4,51)),new se(28,new W(4,22),new W(4,23)),new se(24,new W(3,12),new W(8,13))),new Le(12,Int32Array.from([6,32,58]),new se(24,new W(2,92),new W(2,93)),new se(22,new W(6,36),new W(2,37)),new se(26,new W(4,20),new W(6,21)),new se(28,new W(7,14),new W(4,15))),new Le(13,Int32Array.from([6,34,62]),new se(26,new W(4,107)),new se(22,new W(8,37),new W(1,38)),new se(24,new W(8,20),new W(4,21)),new se(22,new W(12,11),new W(4,12))),new Le(14,Int32Array.from([6,26,46,66]),new se(30,new W(3,115),new W(1,116)),new se(24,new W(4,40),new W(5,41)),new se(20,new W(11,16),new W(5,17)),new se(24,new W(11,12),new W(5,13))),new Le(15,Int32Array.from([6,26,48,70]),new se(22,new W(5,87),new W(1,88)),new se(24,new W(5,41),new W(5,42)),new se(30,new W(5,24),new W(7,25)),new se(24,new W(11,12),new W(7,13))),new Le(16,Int32Array.from([6,26,50,74]),new se(24,new W(5,98),new W(1,99)),new se(28,new W(7,45),new W(3,46)),new se(24,new W(15,19),new W(2,20)),new se(30,new W(3,15),new W(13,16))),new Le(17,Int32Array.from([6,30,54,78]),new se(28,new W(1,107),new W(5,108)),new se(28,new W(10,46),new W(1,47)),new se(28,new W(1,22),new W(15,23)),new se(28,new W(2,14),new W(17,15))),new Le(18,Int32Array.from([6,30,56,82]),new se(30,new W(5,120),new W(1,121)),new se(26,new W(9,43),new W(4,44)),new se(28,new W(17,22),new W(1,23)),new se(28,new W(2,14),new W(19,15))),new Le(19,Int32Array.from([6,30,58,86]),new se(28,new W(3,113),new W(4,114)),new se(26,new W(3,44),new W(11,45)),new se(26,new W(17,21),new W(4,22)),new se(26,new W(9,13),new W(16,14))),new Le(20,Int32Array.from([6,34,62,90]),new se(28,new W(3,107),new W(5,108)),new se(26,new W(3,41),new W(13,42)),new se(30,new W(15,24),new W(5,25)),new se(28,new W(15,15),new W(10,16))),new Le(21,Int32Array.from([6,28,50,72,94]),new se(28,new W(4,116),new W(4,117)),new se(26,new W(17,42)),new se(28,new W(17,22),new W(6,23)),new se(30,new W(19,16),new W(6,17))),new Le(22,Int32Array.from([6,26,50,74,98]),new se(28,new W(2,111),new W(7,112)),new se(28,new W(17,46)),new se(30,new W(7,24),new W(16,25)),new se(24,new W(34,13))),new Le(23,Int32Array.from([6,30,54,78,102]),new se(30,new W(4,121),new W(5,122)),new se(28,new W(4,47),new W(14,48)),new se(30,new W(11,24),new W(14,25)),new se(30,new W(16,15),new W(14,16))),new Le(24,Int32Array.from([6,28,54,80,106]),new se(30,new W(6,117),new W(4,118)),new se(28,new W(6,45),new W(14,46)),new se(30,new W(11,24),new W(16,25)),new se(30,new W(30,16),new W(2,17))),new Le(25,Int32Array.from([6,32,58,84,110]),new se(26,new W(8,106),new W(4,107)),new se(28,new W(8,47),new W(13,48)),new se(30,new W(7,24),new W(22,25)),new se(30,new W(22,15),new W(13,16))),new Le(26,Int32Array.from([6,30,58,86,114]),new se(28,new W(10,114),new W(2,115)),new se(28,new W(19,46),new W(4,47)),new se(28,new W(28,22),new W(6,23)),new se(30,new W(33,16),new W(4,17))),new Le(27,Int32Array.from([6,34,62,90,118]),new se(30,new W(8,122),new W(4,123)),new se(28,new W(22,45),new W(3,46)),new se(30,new W(8,23),new W(26,24)),new se(30,new W(12,15),new W(28,16))),new Le(28,Int32Array.from([6,26,50,74,98,122]),new se(30,new W(3,117),new W(10,118)),new se(28,new W(3,45),new W(23,46)),new se(30,new W(4,24),new W(31,25)),new se(30,new W(11,15),new W(31,16))),new Le(29,Int32Array.from([6,30,54,78,102,126]),new se(30,new W(7,116),new W(7,117)),new se(28,new W(21,45),new W(7,46)),new se(30,new W(1,23),new W(37,24)),new se(30,new W(19,15),new W(26,16))),new Le(30,Int32Array.from([6,26,52,78,104,130]),new se(30,new W(5,115),new W(10,116)),new se(28,new W(19,47),new W(10,48)),new se(30,new W(15,24),new W(25,25)),new se(30,new W(23,15),new W(25,16))),new Le(31,Int32Array.from([6,30,56,82,108,134]),new se(30,new W(13,115),new W(3,116)),new se(28,new W(2,46),new W(29,47)),new se(30,new W(42,24),new W(1,25)),new se(30,new W(23,15),new W(28,16))),new Le(32,Int32Array.from([6,34,60,86,112,138]),new se(30,new W(17,115)),new se(28,new W(10,46),new W(23,47)),new se(30,new W(10,24),new W(35,25)),new se(30,new W(19,15),new W(35,16))),new Le(33,Int32Array.from([6,30,58,86,114,142]),new se(30,new W(17,115),new W(1,116)),new se(28,new W(14,46),new W(21,47)),new se(30,new W(29,24),new W(19,25)),new se(30,new W(11,15),new W(46,16))),new Le(34,Int32Array.from([6,34,62,90,118,146]),new se(30,new W(13,115),new W(6,116)),new se(28,new W(14,46),new W(23,47)),new se(30,new W(44,24),new W(7,25)),new se(30,new W(59,16),new W(1,17))),new Le(35,Int32Array.from([6,30,54,78,102,126,150]),new se(30,new W(12,121),new W(7,122)),new se(28,new W(12,47),new W(26,48)),new se(30,new W(39,24),new W(14,25)),new se(30,new W(22,15),new W(41,16))),new Le(36,Int32Array.from([6,24,50,76,102,128,154]),new se(30,new W(6,121),new W(14,122)),new se(28,new W(6,47),new W(34,48)),new se(30,new W(46,24),new W(10,25)),new se(30,new W(2,15),new W(64,16))),new Le(37,Int32Array.from([6,28,54,80,106,132,158]),new se(30,new W(17,122),new W(4,123)),new se(28,new W(29,46),new W(14,47)),new se(30,new W(49,24),new W(10,25)),new se(30,new W(24,15),new W(46,16))),new Le(38,Int32Array.from([6,32,58,84,110,136,162]),new se(30,new W(4,122),new W(18,123)),new se(28,new W(13,46),new W(32,47)),new se(30,new W(48,24),new W(14,25)),new se(30,new W(42,15),new W(32,16))),new Le(39,Int32Array.from([6,26,54,82,110,138,166]),new se(30,new W(20,117),new W(4,118)),new se(28,new W(40,47),new W(7,48)),new se(30,new W(43,24),new W(22,25)),new se(30,new W(10,15),new W(67,16))),new Le(40,Int32Array.from([6,30,58,86,114,142,170]),new se(30,new W(19,118),new W(6,119)),new se(28,new W(18,47),new W(31,48)),new se(30,new W(34,24),new W(34,25)),new se(30,new W(20,15),new W(61,16)))];var on;(function(M){M[M.DATA_MASK_000=0]="DATA_MASK_000",M[M.DATA_MASK_001=1]="DATA_MASK_001",M[M.DATA_MASK_010=2]="DATA_MASK_010",M[M.DATA_MASK_011=3]="DATA_MASK_011",M[M.DATA_MASK_100=4]="DATA_MASK_100",M[M.DATA_MASK_101=5]="DATA_MASK_101",M[M.DATA_MASK_110=6]="DATA_MASK_110",M[M.DATA_MASK_111=7]="DATA_MASK_111"})(on||(on={}));class Yn{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let l=0;l<s;l++)for(let u=0;u<s;u++)this.isMasked(l,u)&&r.flip(u,l)}}Yn.values=new Map([[on.DATA_MASK_000,new Yn(on.DATA_MASK_000,(M,r)=>(M+r&1)===0)],[on.DATA_MASK_001,new Yn(on.DATA_MASK_001,(M,r)=>(M&1)===0)],[on.DATA_MASK_010,new Yn(on.DATA_MASK_010,(M,r)=>r%3===0)],[on.DATA_MASK_011,new Yn(on.DATA_MASK_011,(M,r)=>(M+r)%3===0)],[on.DATA_MASK_100,new Yn(on.DATA_MASK_100,(M,r)=>(Math.floor(M/2)+Math.floor(r/3)&1)===0)],[on.DATA_MASK_101,new Yn(on.DATA_MASK_101,(M,r)=>M*r%6===0)],[on.DATA_MASK_110,new Yn(on.DATA_MASK_110,(M,r)=>M*r%6<3)],[on.DATA_MASK_111,new Yn(on.DATA_MASK_111,(M,r)=>(M+r+M*r%3&1)===0)]]);class To{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new Z;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let d=0;d<6;d++)r=this.copyBit(d,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let d=5;d>=0;d--)r=this.copyBit(8,d,r);const s=this.bitMatrix.getHeight();let l=0;const u=s-7;for(let d=s-1;d>=u;d--)l=this.copyBit(8,d,l);for(let d=s-8;d<s;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=Gn.decodeFormatInformation(r,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Z}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return Le.getVersionForNumber(s);let l=0;const u=r-11;for(let p=5;p>=0;p--)for(let x=r-9;x>=u;x--)l=this.copyBit(x,p,l);let d=Le.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;l=0;for(let p=5;p>=0;p--)for(let x=r-9;x>=u;x--)l=this.copyBit(p,x,l);if(d=Le.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;throw new Z}copyBit(r,s,l){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?l<<1|1:l<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),l=Yn.values.get(r.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);const d=s.buildFunctionPattern();let p=!0;const x=new Uint8Array(s.getTotalCodewords());let _=0,C=0,E=0;for(let R=u-1;R>0;R-=2){R===6&&R--;for(let B=0;B<u;B++){const Y=p?u-1-B:B;for(let Q=0;Q<2;Q++)d.get(R-Q,Y)||(E++,C<<=1,this.bitMatrix.get(R-Q,Y)&&(C|=1),E===8&&(x[_++]=C,E=0,C=0))}p=!p}if(_!==s.getTotalCodewords())throw new Z;return x}remask(){if(this.parsedFormatInfo===null)return;const r=Yn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,l=r.getWidth();s<l;s++)for(let u=s+1,d=r.getHeight();u<d;u++)r.get(s,u)!==r.get(u,s)&&(r.flip(u,s),r.flip(s,u))}}class Io{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,l){if(r.length!==s.getTotalCodewords())throw new b;const u=s.getECBlocksForLevel(l);let d=0;const p=u.getECBlocks();for(const Q of p)d+=Q.getCount();const x=new Array(d);let _=0;for(const Q of p)for(let ee=0;ee<Q.getCount();ee++){const ie=Q.getDataCodewords(),le=u.getECCodewordsPerBlock()+ie;x[_++]=new Io(ie,new Uint8Array(le))}const C=x[0].codewords.length;let E=x.length-1;for(;E>=0&&x[E].codewords.length!==C;)E--;E++;const R=C-u.getECCodewordsPerBlock();let B=0;for(let Q=0;Q<R;Q++)for(let ee=0;ee<_;ee++)x[ee].codewords[Q]=r[B++];for(let Q=E;Q<_;Q++)x[Q].codewords[R]=r[B++];const Y=x[0].codewords.length;for(let Q=R;Q<Y;Q++)for(let ee=0;ee<_;ee++){const ie=ee<E?Q:Q+1;x[ee].codewords[ie]=r[B++]}return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Xn;(function(M){M[M.TERMINATOR=0]="TERMINATOR",M[M.NUMERIC=1]="NUMERIC",M[M.ALPHANUMERIC=2]="ALPHANUMERIC",M[M.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",M[M.BYTE=4]="BYTE",M[M.ECI=5]="ECI",M[M.KANJI=6]="KANJI",M[M.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",M[M.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",M[M.HANZI=9]="HANZI"})(Xn||(Xn={}));class Ke{constructor(r,s,l,u){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=l,this.bits=u,Ke.FOR_BITS.set(u,this),Ke.FOR_VALUE.set(r,this)}static forBits(r){const s=Ke.FOR_BITS.get(r);if(s===void 0)throw new b;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let l;return s<=9?l=0:s<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof Ke))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}Ke.FOR_BITS=new Map,Ke.FOR_VALUE=new Map,Ke.TERMINATOR=new Ke(Xn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ke.NUMERIC=new Ke(Xn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ke.ALPHANUMERIC=new Ke(Xn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ke.STRUCTURED_APPEND=new Ke(Xn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ke.BYTE=new Ke(Xn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ke.ECI=new Ke(Xn.ECI,"ECI",Int32Array.from([0,0,0]),7),Ke.KANJI=new Ke(Xn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ke.FNC1_FIRST_POSITION=new Ke(Xn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ke.FNC1_SECOND_POSITION=new Ke(Xn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ke.HANZI=new Ke(Xn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class nn{static decode(r,s,l,u){const d=new Ts(r);let p=new Me;const x=new Array;let _=-1,C=-1;try{let E=null,R=!1,B;do{if(d.available()<4)B=Ke.TERMINATOR;else{const Y=d.readBits(4);B=Ke.forBits(Y)}switch(B){case Ke.TERMINATOR:break;case Ke.FNC1_FIRST_POSITION:case Ke.FNC1_SECOND_POSITION:R=!0;break;case Ke.STRUCTURED_APPEND:if(d.available()<16)throw new Z;_=d.readBits(8),C=d.readBits(8);break;case Ke.ECI:const Y=nn.parseECIValue(d);if(E=z.getCharacterSetECIByValue(Y),E===null)throw new Z;break;case Ke.HANZI:const Q=d.readBits(4),ee=d.readBits(B.getCharacterCountBits(s));Q===nn.GB2312_SUBSET&&nn.decodeHanziSegment(d,p,ee);break;default:const ie=d.readBits(B.getCharacterCountBits(s));switch(B){case Ke.NUMERIC:nn.decodeNumericSegment(d,p,ie);break;case Ke.ALPHANUMERIC:nn.decodeAlphanumericSegment(d,p,ie,R);break;case Ke.BYTE:nn.decodeByteSegment(d,p,ie,E,x,u);break;case Ke.KANJI:nn.decodeKanjiSegment(d,p,ie);break;default:throw new Z}break}}while(B!==Ke.TERMINATOR)}catch{throw new Z}return new Et(r,p.toString(),x.length===0?null:x,l===null?null:l.toString(),_,C)}static decodeHanziSegment(r,s,l){if(l*13>r.available())throw new Z;const u=new Uint8Array(2*l);let d=0;for(;l>0;){const p=r.readBits(13);let x=p/96<<8&4294967295|p%96;x<959?x+=41377:x+=42657,u[d]=x>>8&255,u[d+1]=x&255,d+=2,l--}try{s.append(me.decode(u,fe.GB2312))}catch(p){throw new Z(p)}}static decodeKanjiSegment(r,s,l){if(l*13>r.available())throw new Z;const u=new Uint8Array(2*l);let d=0;for(;l>0;){const p=r.readBits(13);let x=p/192<<8&4294967295|p%192;x<7936?x+=33088:x+=49472,u[d]=x>>8,u[d+1]=x,d+=2,l--}try{s.append(me.decode(u,fe.SHIFT_JIS))}catch(p){throw new Z(p)}}static decodeByteSegment(r,s,l,u,d,p){if(8*l>r.available())throw new Z;const x=new Uint8Array(l);for(let C=0;C<l;C++)x[C]=r.readBits(8);let _;u===null?_=fe.guessEncoding(x,p):_=u.getName();try{s.append(me.decode(x,_))}catch(C){throw new Z(C)}d.push(x)}static toAlphaNumericChar(r){if(r>=nn.ALPHANUMERIC_CHARS.length)throw new Z;return nn.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,l,u){const d=s.length();for(;l>1;){if(r.available()<11)throw new Z;const p=r.readBits(11);s.append(nn.toAlphaNumericChar(Math.floor(p/45))),s.append(nn.toAlphaNumericChar(p%45)),l-=2}if(l===1){if(r.available()<6)throw new Z;s.append(nn.toAlphaNumericChar(r.readBits(6)))}if(u)for(let p=d;p<s.length();p++)s.charAt(p)==="%"&&(p<s.length()-1&&s.charAt(p+1)==="%"?s.deleteCharAt(p+1):s.setCharAt(p,""))}static decodeNumericSegment(r,s,l){for(;l>=3;){if(r.available()<10)throw new Z;const u=r.readBits(10);if(u>=1e3)throw new Z;s.append(nn.toAlphaNumericChar(Math.floor(u/100))),s.append(nn.toAlphaNumericChar(Math.floor(u/10)%10)),s.append(nn.toAlphaNumericChar(u%10)),l-=3}if(l===2){if(r.available()<7)throw new Z;const u=r.readBits(7);if(u>=100)throw new Z;s.append(nn.toAlphaNumericChar(Math.floor(u/10))),s.append(nn.toAlphaNumericChar(u%10))}else if(l===1){if(r.available()<4)throw new Z;const u=r.readBits(4);if(u>=10)throw new Z;s.append(nn.toAlphaNumericChar(u))}}static parseECIValue(r){const s=r.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const l=r.readBits(8);return(s&63)<<8&4294967295|l}if((s&224)===192){const l=r.readBits(16);return(s&31)<<16&4294967295|l}throw new Z}}nn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",nn.GB2312_SUBSET=1;class ko{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class yl{constructor(){this.rsDecoder=new rr(ut.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(we.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const l=new To(r);let u=null;try{return this.decodeBitMatrixParser(l,s)}catch(d){u=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,s);return d.setOther(new ko(!0)),d}catch(d){throw u!==null?u:d}}decodeBitMatrixParser(r,s){const l=r.readVersion(),u=r.readFormatInformation().getErrorCorrectionLevel(),d=r.readCodewords(),p=Io.getDataBlocks(d,l,u);let x=0;for(const E of p)x+=E.getNumDataCodewords();const _=new Uint8Array(x);let C=0;for(const E of p){const R=E.getCodewords(),B=E.getNumDataCodewords();this.correctErrors(R,B);for(let Y=0;Y<B;Y++)_[C++]=R[Y]}return nn.decode(_,l,u,s)}correctErrors(r,s){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-s)}catch{throw new I}for(let u=0;u<s;u++)r[u]=l[u]}}class Mo extends Ue{constructor(r,s,l){super(r,s),this.estimatedModuleSize=l}aboutEquals(r,s,l){if(Math.abs(s-this.getY())<=r&&Math.abs(l-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,s,l){const u=(this.getX()+s)/2,d=(this.getY()+r)/2,p=(this.estimatedModuleSize+l)/2;return new Mo(u,d,p)}}class ts{constructor(r,s,l,u,d,p,x){this.image=r,this.startX=s,this.startY=l,this.width=u,this.height=d,this.moduleSize=p,this.resultPointCallback=x,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,l=this.width,u=r+l,d=this.startY+s/2,p=new Int32Array(3),x=this.image;for(let _=0;_<s;_++){const C=d+(_&1?-Math.floor((_+1)/2):Math.floor((_+1)/2));p[0]=0,p[1]=0,p[2]=0;let E=r;for(;E<u&&!x.get(E,C);)E++;let R=0;for(;E<u;){if(x.get(E,C))if(R===1)p[1]++;else if(R===2){if(this.foundPatternCross(p)){const B=this.handlePossibleCenter(p,C,E);if(B!==null)return B}p[0]=p[2],p[1]=1,p[2]=0,R=1}else p[++R]++;else R===1&&R++,p[R]++;E++}if(this.foundPatternCross(p)){const B=this.handlePossibleCenter(p,C,u);if(B!==null)return B}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ae}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,l=s/2;for(let u=0;u<3;u++)if(Math.abs(s-r[u])>=l)return!1;return!0}crossCheckVertical(r,s,l,u){const d=this.image,p=d.getHeight(),x=this.crossCheckStateCount;x[0]=0,x[1]=0,x[2]=0;let _=r;for(;_>=0&&d.get(s,_)&&x[1]<=l;)x[1]++,_--;if(_<0||x[1]>l)return NaN;for(;_>=0&&!d.get(s,_)&&x[0]<=l;)x[0]++,_--;if(x[0]>l)return NaN;for(_=r+1;_<p&&d.get(s,_)&&x[1]<=l;)x[1]++,_++;if(_===p||x[1]>l)return NaN;for(;_<p&&!d.get(s,_)&&x[2]<=l;)x[2]++,_++;if(x[2]>l)return NaN;const C=x[0]+x[1]+x[2];return 5*Math.abs(C-u)>=2*u?NaN:this.foundPatternCross(x)?ts.centerFromEnd(x,_):NaN}handlePossibleCenter(r,s,l){const u=r[0]+r[1]+r[2],d=ts.centerFromEnd(r,l),p=this.crossCheckVertical(s,d,2*r[1],u);if(!isNaN(p)){const x=(r[0]+r[1]+r[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(x,p,d))return C.combineEstimate(p,d,x);const _=new Mo(d,p,x);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null}}class ha extends Ue{constructor(r,s,l,u){super(r,s),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,l){if(Math.abs(s-this.getY())<=r&&Math.abs(l-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,s,l){const u=this.count+1,d=(this.count*this.getX()+s)/u,p=(this.count*this.getY()+r)/u,x=(this.count*this.estimatedModuleSize+l)/u;return new ha(d,p,x,u)}}class wl{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Mn{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(G.TRY_HARDER)!==void 0,l=r!=null&&r.get(G.PURE_BARCODE)!==void 0,u=this.image,d=u.getHeight(),p=u.getWidth();let x=Math.floor(3*d/(4*Mn.MAX_MODULES));(x<Mn.MIN_SKIP||s)&&(x=Mn.MIN_SKIP);let _=!1;const C=new Int32Array(5);for(let R=x-1;R<d&&!_;R+=x){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let B=0;for(let Y=0;Y<p;Y++)if(u.get(Y,R))(B&1)===1&&B++,C[B]++;else if(B&1)C[B]++;else if(B===4)if(Mn.foundPatternCross(C)){if(this.handlePossibleCenter(C,R,Y,l)===!0)if(x=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{const ee=this.findRowSkip();ee>C[2]&&(R+=ee-C[2]-x,Y=p-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,B=3;continue}B=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,B=3;else C[++B]++;Mn.foundPatternCross(C)&&this.handlePossibleCenter(C,R,p,l)===!0&&(x=C[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}const E=this.selectBestPatterns();return Ue.orderBestPatterns(E),new wl(E)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let d=0;d<5;d++){const p=r[d];if(p===0)return!1;s+=p}if(s<7)return!1;const l=s/7,u=l/2;return Math.abs(l-r[0])<u&&Math.abs(l-r[1])<u&&Math.abs(3*l-r[2])<3*u&&Math.abs(l-r[3])<u&&Math.abs(l-r[4])<u}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,l,u){const d=this.getCrossCheckStateCount();let p=0;const x=this.image;for(;r>=p&&s>=p&&x.get(s-p,r-p);)d[2]++,p++;if(r<p||s<p)return!1;for(;r>=p&&s>=p&&!x.get(s-p,r-p)&&d[1]<=l;)d[1]++,p++;if(r<p||s<p||d[1]>l)return!1;for(;r>=p&&s>=p&&x.get(s-p,r-p)&&d[0]<=l;)d[0]++,p++;if(d[0]>l)return!1;const _=x.getHeight(),C=x.getWidth();for(p=1;r+p<_&&s+p<C&&x.get(s+p,r+p);)d[2]++,p++;if(r+p>=_||s+p>=C)return!1;for(;r+p<_&&s+p<C&&!x.get(s+p,r+p)&&d[3]<l;)d[3]++,p++;if(r+p>=_||s+p>=C||d[3]>=l)return!1;for(;r+p<_&&s+p<C&&x.get(s+p,r+p)&&d[4]<l;)d[4]++,p++;if(d[4]>=l)return!1;const E=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(E-u)<2*u&&Mn.foundPatternCross(d)}crossCheckVertical(r,s,l,u){const d=this.image,p=d.getHeight(),x=this.getCrossCheckStateCount();let _=r;for(;_>=0&&d.get(s,_);)x[2]++,_--;if(_<0)return NaN;for(;_>=0&&!d.get(s,_)&&x[1]<=l;)x[1]++,_--;if(_<0||x[1]>l)return NaN;for(;_>=0&&d.get(s,_)&&x[0]<=l;)x[0]++,_--;if(x[0]>l)return NaN;for(_=r+1;_<p&&d.get(s,_);)x[2]++,_++;if(_===p)return NaN;for(;_<p&&!d.get(s,_)&&x[3]<l;)x[3]++,_++;if(_===p||x[3]>=l)return NaN;for(;_<p&&d.get(s,_)&&x[4]<l;)x[4]++,_++;if(x[4]>=l)return NaN;const C=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(C-u)>=2*u?NaN:Mn.foundPatternCross(x)?Mn.centerFromEnd(x,_):NaN}crossCheckHorizontal(r,s,l,u){const d=this.image,p=d.getWidth(),x=this.getCrossCheckStateCount();let _=r;for(;_>=0&&d.get(_,s);)x[2]++,_--;if(_<0)return NaN;for(;_>=0&&!d.get(_,s)&&x[1]<=l;)x[1]++,_--;if(_<0||x[1]>l)return NaN;for(;_>=0&&d.get(_,s)&&x[0]<=l;)x[0]++,_--;if(x[0]>l)return NaN;for(_=r+1;_<p&&d.get(_,s);)x[2]++,_++;if(_===p)return NaN;for(;_<p&&!d.get(_,s)&&x[3]<l;)x[3]++,_++;if(_===p||x[3]>=l)return NaN;for(;_<p&&d.get(_,s)&&x[4]<l;)x[4]++,_++;if(x[4]>=l)return NaN;const C=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(C-u)>=u?NaN:Mn.foundPatternCross(x)?Mn.centerFromEnd(x,_):NaN}handlePossibleCenter(r,s,l,u){const d=r[0]+r[1]+r[2]+r[3]+r[4];let p=Mn.centerFromEnd(r,l),x=this.crossCheckVertical(s,Math.floor(p),r[2],d);if(!isNaN(x)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(x),r[2],d),!isNaN(p)&&(!u||this.crossCheckDiagonal(Math.floor(x),Math.floor(p),r[2],d)))){const _=d/7;let C=!1;const E=this.possibleCenters;for(let R=0,B=E.length;R<B;R++){const Y=E[R];if(Y.aboutEquals(_,x,p)){E[R]=Y.combineEstimate(x,p,_),C=!0;break}}if(!C){const R=new ha(p,x,_);E.push(R),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(R)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const l of this.possibleCenters)if(l.getCount()>=Mn.CENTER_QUORUM)if(s==null)s=l;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-l.getX())-Math.abs(s.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const l=this.possibleCenters.length;for(const p of this.possibleCenters)p.getCount()>=Mn.CENTER_QUORUM&&(r++,s+=p.getEstimatedModuleSize());if(r<3)return!1;const u=s/l;let d=0;for(const p of this.possibleCenters)d+=Math.abs(p.getEstimatedModuleSize()-u);return d<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new ae;const s=this.possibleCenters;let l;if(r>3){let u=0,d=0;for(const _ of this.possibleCenters){const C=_.getEstimatedModuleSize();u+=C,d+=C*C}l=u/r;let p=Math.sqrt(d/r-l*l);s.sort((_,C)=>{const E=Math.abs(C.getEstimatedModuleSize()-l),R=Math.abs(_.getEstimatedModuleSize()-l);return E<R?-1:E>R?1:0});const x=Math.max(.2*l,p);for(let _=0;_<s.length&&s.length>3;_++){const C=s[_];Math.abs(C.getEstimatedModuleSize()-l)>x&&(s.splice(_,1),_--)}}if(s.length>3){let u=0;for(const d of s)u+=d.getEstimatedModuleSize();l=u/s.length,s.sort((d,p)=>{if(p.getCount()===d.getCount()){const x=Math.abs(p.getEstimatedModuleSize()-l),_=Math.abs(d.getEstimatedModuleSize()-l);return x<_?1:x>_?-1:0}else return p.getCount()-d.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}Mn.CENTER_QUORUM=2,Mn.MIN_SKIP=3,Mn.MAX_MODULES=57;class lt{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(G.NEED_RESULT_POINT_CALLBACK);const l=new Mn(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(l)}processFinderPatternInfo(r){const s=r.getTopLeft(),l=r.getTopRight(),u=r.getBottomLeft(),d=this.calculateModuleSize(s,l,u);if(d<1)throw new ae("No pattern found in proccess finder.");const p=lt.computeDimension(s,l,u,d),x=Le.getProvisionalVersionForDimension(p),_=x.getDimensionForVersion()-7;let C=null;if(x.getAlignmentPatternCenters().length>0){const Y=l.getX()-s.getX()+u.getX(),Q=l.getY()-s.getY()+u.getY(),ee=1-3/_,ie=Math.floor(s.getX()+ee*(Y-s.getX())),le=Math.floor(s.getY()+ee*(Q-s.getY()));for(let Ae=4;Ae<=16;Ae<<=1)try{C=this.findAlignmentInRegion(d,ie,le,Ae);break}catch(Ee){if(!(Ee instanceof ae))throw Ee}}const E=lt.createTransform(s,l,u,C,p),R=lt.sampleGrid(this.image,E,p);let B;return C===null?B=[u,s,l]:B=[u,s,l,C],new q(R,B)}static createTransform(r,s,l,u,d){const p=d-3.5;let x,_,C,E;return u!==null?(x=u.getX(),_=u.getY(),C=p-3,E=C):(x=s.getX()-r.getX()+l.getX(),_=s.getY()-r.getY()+l.getY(),C=p,E=p),Ze.quadrilateralToQuadrilateral(3.5,3.5,p,3.5,C,E,3.5,p,r.getX(),r.getY(),s.getX(),s.getY(),x,_,l.getX(),l.getY())}static sampleGrid(r,s,l){return _t.getInstance().sampleGridWithTransform(r,l,l,s)}static computeDimension(r,s,l,u){const d=yt.round(Ue.distance(r,s)/u),p=yt.round(Ue.distance(r,l)/u);let x=Math.floor((d+p)/2)+7;switch(x&3){case 0:x++;break;case 2:x--;break;case 3:throw new ae("Dimensions could be not found.")}return x}calculateModuleSize(r,s,l){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,l))/2}calculateModuleSizeOneWay(r,s){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,l,u){let d=this.sizeOfBlackWhiteBlackRun(r,s,l,u),p=1,x=r-(l-r);x<0?(p=r/(r-x),x=0):x>=this.image.getWidth()&&(p=(this.image.getWidth()-1-r)/(x-r),x=this.image.getWidth()-1);let _=Math.floor(s-(u-s)*p);return p=1,_<0?(p=s/(s-_),_=0):_>=this.image.getHeight()&&(p=(this.image.getHeight()-1-s)/(_-s),_=this.image.getHeight()-1),x=Math.floor(r+(x-r)*p),d+=this.sizeOfBlackWhiteBlackRun(r,s,x,_),d-1}sizeOfBlackWhiteBlackRun(r,s,l,u){const d=Math.abs(u-s)>Math.abs(l-r);if(d){let Y=r;r=s,s=Y,Y=l,l=u,u=Y}const p=Math.abs(l-r),x=Math.abs(u-s);let _=-p/2;const C=r<l?1:-1,E=s<u?1:-1;let R=0;const B=l+C;for(let Y=r,Q=s;Y!==B;Y+=C){const ee=d?Q:Y,ie=d?Y:Q;if(R===1===this.image.get(ee,ie)){if(R===2)return yt.distance(Y,Q,r,s);R++}if(_+=x,_>0){if(Q===u)break;Q+=E,_-=p}}return R===2?yt.distance(l+C,u,r,s):NaN}findAlignmentInRegion(r,s,l,u){const d=Math.floor(u*r),p=Math.max(0,s-d),x=Math.min(this.image.getWidth()-1,s+d);if(x-p<r*3)throw new ae("Alignment top exceeds estimated module size.");const _=Math.max(0,l-d),C=Math.min(this.image.getHeight()-1,l+d);if(C-_<r*3)throw new ae("Alignment bottom exceeds estimated module size.");return new ts(this.image,p,_,x-p,C-_,r,this.resultPointCallback).find()}}class jn{constructor(){this.decoder=new yl}getDecoder(){return this.decoder}decode(r,s){let l,u;if(s!=null&&s.get(G.PURE_BARCODE)!==void 0){const _=jn.extractPureBits(r.getBlackMatrix());l=this.decoder.decodeBitMatrix(_,s),u=jn.NO_POINTS}else{const _=new lt(r.getBlackMatrix()).detect(s);l=this.decoder.decodeBitMatrix(_.getBits(),s),u=_.getPoints()}l.getOther()instanceof ko&&l.getOther().applyMirroredCorrection(u);const d=new ze(l.getText(),l.getRawBytes(),void 0,u,re.QR_CODE,void 0),p=l.getByteSegments();p!==null&&d.putMetadata(Xe.BYTE_SEGMENTS,p);const x=l.getECLevel();return x!==null&&d.putMetadata(Xe.ERROR_CORRECTION_LEVEL,x),l.hasStructuredAppend()&&(d.putMetadata(Xe.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(Xe.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(s===null||l===null)throw new ae;const u=this.moduleSize(s,r);let d=s[1],p=l[1],x=s[0],_=l[0];if(x>=_||d>=p)throw new ae;if(p-d!==_-x&&(_=x+(p-d),_>=r.getWidth()))throw new ae;const C=Math.round((_-x+1)/u),E=Math.round((p-d+1)/u);if(C<=0||E<=0)throw new ae;if(E!==C)throw new ae;const R=Math.floor(u/2);d+=R,x+=R;const B=x+Math.floor((C-1)*u)-_;if(B>0){if(B>R)throw new ae;x-=B}const Y=d+Math.floor((E-1)*u)-p;if(Y>0){if(Y>R)throw new ae;d-=Y}const Q=new we(C,E);for(let ee=0;ee<E;ee++){const ie=d+Math.floor(ee*u);for(let le=0;le<C;le++)r.get(x+Math.floor(le*u),ie)&&Q.set(le,ee)}return Q}static moduleSize(r,s){const l=s.getHeight(),u=s.getWidth();let d=r[0],p=r[1],x=!0,_=0;for(;d<u&&p<l;){if(x!==s.get(d,p)){if(++_===5)break;x=!x}d++,p++}if(d===u||p===l)throw new ae;return(d-r[0])/7}}jn.NO_POINTS=new Array;class De{PDF417Common(){}static getBitCountSum(r){return yt.sum(r)}static toIntArray(r){if(r==null||!r.length)return De.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let l=0;for(const u of r)s[l++]=u;return s}static getCodeword(r){const s=O.binarySearch(De.SYMBOL_TABLE,r&262143);return s<0?-1:(De.CODEWORD_TABLE[s]-1)%De.NUMBER_OF_CODEWORDS}}De.NUMBER_OF_CODEWORDS=929,De.MAX_CODEWORDS_IN_BARCODE=De.NUMBER_OF_CODEWORDS-1,De.MIN_ROWS_IN_BARCODE=3,De.MAX_ROWS_IN_BARCODE=90,De.MODULES_IN_CODEWORD=17,De.MODULES_IN_STOP_PATTERN=18,De.BARS_IN_MODULE=8,De.EMPTY_INT_ARRAY=new Int32Array([]),De.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),De.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Jc{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class ft{static detectMultiple(r,s,l){let u=r.getBlackMatrix(),d=ft.detect(l,u);return d.length||(u=u.clone(),u.rotate180(),d=ft.detect(l,u)),new Jc(u,d)}static detect(r,s){const l=new Array;let u=0,d=0,p=!1;for(;u<s.getHeight();){const x=ft.findVertices(s,u,d);if(x[0]==null&&x[3]==null){if(!p)break;p=!1,d=0;for(const _ of l)_[1]!=null&&(u=Math.trunc(Math.max(u,_[1].getY()))),_[3]!=null&&(u=Math.max(u,Math.trunc(_[3].getY())));u+=ft.ROW_STEP;continue}if(p=!0,l.push(x),!r)break;x[2]!=null?(d=Math.trunc(x[2].getX()),u=Math.trunc(x[2].getY())):(d=Math.trunc(x[4].getX()),u=Math.trunc(x[4].getY()))}return l}static findVertices(r,s,l){const u=r.getHeight(),d=r.getWidth(),p=new Array(8);return ft.copyToResult(p,ft.findRowsWithPattern(r,u,d,s,l,ft.START_PATTERN),ft.INDEXES_START_PATTERN),p[4]!=null&&(l=Math.trunc(p[4].getX()),s=Math.trunc(p[4].getY())),ft.copyToResult(p,ft.findRowsWithPattern(r,u,d,s,l,ft.STOP_PATTERN),ft.INDEXES_STOP_PATTERN),p}static copyToResult(r,s,l){for(let u=0;u<l.length;u++)r[l[u]]=s[u]}static findRowsWithPattern(r,s,l,u,d,p){const x=new Array(4);let _=!1;const C=new Int32Array(p.length);for(;u<s;u+=ft.ROW_STEP){let R=ft.findGuardPattern(r,d,u,l,!1,p,C);if(R!=null){for(;u>0;){const B=ft.findGuardPattern(r,d,--u,l,!1,p,C);if(B!=null)R=B;else{u++;break}}x[0]=new Ue(R[0],u),x[1]=new Ue(R[1],u),_=!0;break}}let E=u+1;if(_){let R=0,B=Int32Array.from([Math.trunc(x[0].getX()),Math.trunc(x[1].getX())]);for(;E<s;E++){const Y=ft.findGuardPattern(r,B[0],E,l,!1,p,C);if(Y!=null&&Math.abs(B[0]-Y[0])<ft.MAX_PATTERN_DRIFT&&Math.abs(B[1]-Y[1])<ft.MAX_PATTERN_DRIFT)B=Y,R=0;else{if(R>ft.SKIPPED_ROW_COUNT_MAX)break;R++}}E-=R+1,x[2]=new Ue(B[0],E),x[3]=new Ue(B[1],E)}return E-u<ft.BARCODE_MIN_HEIGHT&&O.fill(x,null),x}static findGuardPattern(r,s,l,u,d,p,x){O.fillWithin(x,0,x.length,0);let _=s,C=0;for(;r.get(_,l)&&_>0&&C++<ft.MAX_PIXEL_DRIFT;)_--;let E=_,R=0,B=p.length;for(let Y=d;E<u;E++)if(r.get(E,l)!==Y)x[R]++;else{if(R===B-1){if(ft.patternMatchVariance(x,p,ft.MAX_INDIVIDUAL_VARIANCE)<ft.MAX_AVG_VARIANCE)return new Int32Array([_,E]);_+=x[0]+x[1],P.arraycopy(x,2,x,0,R-1),x[R-1]=0,x[R]=0,R--}else R++;x[R]=1,Y=!Y}return R===B-1&&ft.patternMatchVariance(x,p,ft.MAX_INDIVIDUAL_VARIANCE)<ft.MAX_AVG_VARIANCE?new Int32Array([_,E-1]):null}static patternMatchVariance(r,s,l){let u=r.length,d=0,p=0;for(let C=0;C<u;C++)d+=r[C],p+=s[C];if(d<p)return 1/0;let x=d/p;l*=x;let _=0;for(let C=0;C<u;C++){let E=r[C],R=s[C]*x,B=E>R?E-R:R-E;if(B>l)return 1/0;_+=B}return _/d}}ft.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ft.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ft.MAX_AVG_VARIANCE=.42,ft.MAX_INDIVIDUAL_VARIANCE=.8,ft.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ft.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ft.MAX_PIXEL_DRIFT=3,ft.MAX_PATTERN_DRIFT=5,ft.SKIPPED_ROW_COUNT_MAX=25,ft.ROW_STEP=5,ft.BARCODE_MIN_HEIGHT=10;class Sn{constructor(r,s){if(s.length===0)throw new b;this.field=r;let l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),P.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let u=0;for(let d of this.coefficients)u=this.field.add(u,d);return u}let s=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)s=this.field.add(this.field.multiply(r,s),this.coefficients[u]);return s}add(r){if(!this.field.equals(r.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,l=r.coefficients;if(s.length>l.length){let p=s;s=l,l=p}let u=new Int32Array(l.length),d=l.length-s.length;P.arraycopy(l,0,u,0,d);for(let p=d;p<l.length;p++)u[p]=this.field.add(s[p-d],l[p]);return new Sn(this.field,u)}subtract(r){if(!this.field.equals(r.field))throw new b("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof Sn?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new Sn(this.field,new Int32Array([0]));let s=this.coefficients,l=s.length,u=r.coefficients,d=u.length,p=new Int32Array(l+d-1);for(let x=0;x<l;x++){let _=s[x];for(let C=0;C<d;C++)p[x+C]=this.field.add(p[x+C],this.field.multiply(_,u[C]))}return new Sn(this.field,p)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let l=0;l<r;l++)s[l]=this.field.subtract(0,this.coefficients[l]);return new Sn(this.field,s)}multiplyScalar(r){if(r===0)return new Sn(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,l=new Int32Array(s);for(let u=0;u<s;u++)l[u]=this.field.multiply(this.coefficients[u],r);return new Sn(this.field,l)}multiplyByMonomial(r,s){if(r<0)throw new b;if(s===0)return new Sn(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+r);for(let d=0;d<l;d++)u[d]=this.field.multiply(this.coefficients[d],s);return new Sn(this.field,u)}toString(){let r=new Me;for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);l!==0&&(l<0?(r.append(" - "),l=-l):r.length()>0&&r.append(" + "),(s===0||l!==1)&&r.append(l),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class vl{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new b;return this.logTable[r]}inverse(r){if(r===0)throw new en;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class bi extends vl{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let l=1;for(let u=0;u<r;u++)this.expTable[u]=l,l=l*s%r;for(let u=0;u<r-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new Sn(this,new Int32Array([0])),this.one=new Sn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new b;if(s===0)return this.zero;let l=new Int32Array(r+1);return l[0]=s,new Sn(this,l)}}bi.PDF417_GF=new bi(De.NUMBER_OF_CODEWORDS,3);class fa{constructor(){this.field=bi.PDF417_GF}decode(r,s,l){let u=new Sn(this.field,r),d=new Int32Array(s),p=!1;for(let Q=s;Q>0;Q--){let ee=u.evaluateAt(this.field.exp(Q));d[s-Q]=ee,ee!==0&&(p=!0)}if(!p)return 0;let x=this.field.getOne();if(l!=null)for(const Q of l){let ee=this.field.exp(r.length-1-Q),ie=new Sn(this.field,new Int32Array([this.field.subtract(0,ee),1]));x=x.multiply(ie)}let _=new Sn(this.field,d),C=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),_,s),E=C[0],R=C[1],B=this.findErrorLocations(E),Y=this.findErrorMagnitudes(R,E,B);for(let Q=0;Q<B.length;Q++){let ee=r.length-1-this.field.log(B[Q]);if(ee<0)throw I.getChecksumInstance();r[ee]=this.field.subtract(r[ee],Y[Q])}return B.length}runEuclideanAlgorithm(r,s,l){if(r.getDegree()<s.getDegree()){let B=r;r=s,s=B}let u=r,d=s,p=this.field.getZero(),x=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let B=u,Y=p;if(u=d,p=x,u.isZero())throw I.getChecksumInstance();d=B;let Q=this.field.getZero(),ee=u.getCoefficient(u.getDegree()),ie=this.field.inverse(ee);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){let le=d.getDegree()-u.getDegree(),Ae=this.field.multiply(d.getCoefficient(d.getDegree()),ie);Q=Q.add(this.field.buildMonomial(le,Ae)),d=d.subtract(u.multiplyByMonomial(le,Ae))}x=Q.multiply(p).subtract(Y).negative()}let _=x.getCoefficient(0);if(_===0)throw I.getChecksumInstance();let C=this.field.inverse(_),E=x.multiply(C),R=d.multiply(C);return[E,R]}findErrorLocations(r){let s=r.getDegree(),l=new Int32Array(s),u=0;for(let d=1;d<this.field.getSize()&&u<s;d++)r.evaluateAt(d)===0&&(l[u]=this.field.inverse(d),u++);if(u!==s)throw I.getChecksumInstance();return l}findErrorMagnitudes(r,s,l){let u=s.getDegree(),d=new Int32Array(u);for(let C=1;C<=u;C++)d[u-C]=this.field.multiply(C,s.getCoefficient(C));let p=new Sn(this.field,d),x=l.length,_=new Int32Array(x);for(let C=0;C<x;C++){let E=this.field.inverse(l[C]),R=this.field.subtract(0,r.evaluateAt(E)),B=this.field.inverse(p.evaluateAt(E));_[C]=this.field.multiply(R,B)}return _}}class jr{constructor(r,s,l,u,d){r instanceof jr?this.constructor_2(r):this.constructor_1(r,s,l,u,d)}constructor_1(r,s,l,u,d){const p=s==null||l==null,x=u==null||d==null;if(p&&x)throw new ae;p?(s=new Ue(0,u.getY()),l=new Ue(0,d.getY())):x&&(u=new Ue(r.getWidth()-1,s.getY()),d=new Ue(r.getWidth()-1,l.getY())),this.image=r,this.topLeft=s,this.bottomLeft=l,this.topRight=u,this.bottomRight=d,this.minX=Math.trunc(Math.min(s.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),d.getX())),this.minY=Math.trunc(Math.min(s.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new jr(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,l){let u=this.topLeft,d=this.bottomLeft,p=this.topRight,x=this.bottomRight;if(r>0){let _=l?this.topLeft:this.topRight,C=Math.trunc(_.getY()-r);C<0&&(C=0);let E=new Ue(_.getX(),C);l?u=E:p=E}if(s>0){let _=l?this.bottomLeft:this.bottomRight,C=Math.trunc(_.getY()+s);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let E=new Ue(_.getX(),C);l?d=E:x=E}return new jr(this.image,u,d,p,x)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Bn{constructor(r,s,l,u){this.columnCount=r,this.errorCorrectionLevel=u,this.rowCountUpperPart=s,this.rowCountLowerPart=l,this.rowCount=s+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Br{constructor(){this.buffer=""}static form(r,s){let l=-1;function u(p,x,_,C,E,R){if(p==="%%")return"%";if(s[++l]===void 0)return;p=C?parseInt(C.substr(1)):void 0;let B=E?parseInt(E.substr(1)):void 0,Y;switch(R){case"s":Y=s[l];break;case"c":Y=s[l][0];break;case"f":Y=parseFloat(s[l]).toFixed(p);break;case"p":Y=parseFloat(s[l]).toPrecision(p);break;case"e":Y=parseFloat(s[l]).toExponential(p);break;case"x":Y=parseInt(s[l]).toString(B||16);break;case"d":Y=parseFloat(parseInt(s[l],B||10).toPrecision(p)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString(B);let Q=parseInt(_),ee=_&&_[0]+""=="0"?"0":" ";for(;Y.length<Q;)Y=x!==void 0?Y+ee:ee+Y;return Y}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,u)}format(r,...s){this.buffer+=Br.form(r,s)}toString(){return this.buffer}}class Is{constructor(r){this.boundingBox=new jr(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let l=1;l<Is.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(r)-l;if(u>=0&&(s=this.codewords[u],s!=null)||(u=this.imageRowToCodewordIndex(r)+l,u<this.codewords.length&&(s=this.codewords[u],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new Br;let s=0;for(const l of this.codewords){if(l==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,l.getRowNumber(),l.getValue())}return r.toString()}}Is.MAX_NEARBY_DISTANCE=5;class ks{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[l,u]of this.values.entries()){const d={getKey:()=>l,getValue:()=>u};d.getValue()>r?(r=d.getValue(),s=[],s.push(d.getKey())):d.getValue()===r&&s.push(d.getKey())}return De.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class eu extends Is{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),x=this.imageRowToCodewordIndex(Math.trunc(d.getY())),_=-1,C=1,E=0;for(let R=p;R<x;R++){if(s[R]==null)continue;let B=s[R],Y=B.getRowNumber()-_;if(Y===0)E++;else if(Y===1)C=Math.max(C,E),E=1,_=B.getRowNumber();else if(Y<0||B.getRowNumber()>=r.getRowCount()||Y>R)s[R]=null;else{let Q;C>2?Q=(C-2)*Y:Q=Y;let ee=Q>=R;for(let ie=1;ie<=Q&&!ee;ie++)ee=s[R-ie]!=null;ee?s[R]=null:(_=B.getRowNumber(),E=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=s.length)continue;s[u]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),l=this._isLeft?s.getTopLeft():s.getTopRight(),u=this._isLeft?s.getBottomLeft():s.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),x=this.getCodewords(),_=-1;for(let C=d;C<p;C++){if(x[C]==null)continue;let E=x[C];E.setRowNumberAsRowIndicatorColumn();let R=E.getRowNumber()-_;R===0||(R===1?_=E.getRowNumber():E.getRowNumber()>=r.getRowCount()?x[C]=null:_=E.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new ks,l=new ks,u=new ks,d=new ks;for(let x of r){if(x==null)continue;x.setRowNumberAsRowIndicatorColumn();let _=x.getValue()%30,C=x.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:l.setValue(_*3+1);break;case 1:d.setValue(_/3),u.setValue(_%3);break;case 2:s.setValue(_+1);break}}if(s.getValue().length===0||l.getValue().length===0||u.getValue().length===0||d.getValue().length===0||s.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<De.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>De.MAX_ROWS_IN_BARCODE)return null;let p=new Bn(s.getValue()[0],l.getValue()[0],u.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(r,p),p}removeIncorrectCodewords(r,s){for(let l=0;l<r.length;l++){let u=r[l];if(r[l]==null)continue;let d=u.getValue()%30,p=u.getRowNumber();if(p>s.getRowCount()){r[l]=null;continue}switch(this._isLeft||(p+=2),p%3){case 0:d*3+1!==s.getRowCountUpperPart()&&(r[l]=null);break;case 1:(Math.trunc(d/3)!==s.getErrorCorrectionLevel()||d%3!==s.getRowCountLowerPart())&&(r[l]=null);break;case 2:d+1!==s.getColumnCount()&&(r[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ms{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=De.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let l=this.detectionResultColumns[s].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(s,u,l))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<r.length;l++)if(r[l]!=null&&s[l]!=null&&r[l].getRowNumber()===s[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let d=this.detectionResultColumns[u].getCodewords()[l];d!=null&&(d.setRowNumber(r[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),d=0;for(let p=this.barcodeColumnCount+1;p>0&&d<this.ADJUST_ROW_NUMBER_SKIP;p--){let x=this.detectionResultColumns[p].getCodewords()[l];x!=null&&(d=Ms.adjustRowNumberIfValid(u,d,x),x.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),d=0;for(let p=1;p<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;p++){let x=this.detectionResultColumns[p].getCodewords()[l];x!=null&&(d=Ms.adjustRowNumberIfValid(u,d,x),x.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(r)?(l.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,l){if(!this.detectionResultColumns[r-1])return;let u=l[s],d=this.detectionResultColumns[r-1].getCodewords(),p=d;this.detectionResultColumns[r+1]!=null&&(p=this.detectionResultColumns[r+1].getCodewords());let x=new Array(14);x[2]=d[s],x[3]=p[s],s>0&&(x[0]=l[s-1],x[4]=d[s-1],x[5]=p[s-1]),s>1&&(x[8]=l[s-2],x[10]=d[s-2],x[11]=p[s-2]),s<l.length-1&&(x[1]=l[s+1],x[6]=d[s+1],x[7]=p[s+1]),s<l.length-2&&(x[9]=l[s+2],x[12]=d[s+2],x[13]=p[s+2]);for(let _ of x)if(Ms.adjustRowNumber(u,_))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new Br;for(let l=0;l<r.getCodewords().length;l++){s.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){s.format("    |   ");continue}let d=this.detectionResultColumns[u].getCodewords()[l];if(d==null){s.format("    |   ");continue}s.format(" %3d|%3d",d.getRowNumber(),d.getValue())}s.format("%n")}return s.toString()}}class ns{constructor(r,s,l,u){this.rowNumber=ns.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==ns.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}ns.BARCODE_ROW_UNKNOWN=-1;class ir{static initialize(){for(let r=0;r<De.SYMBOL_TABLE.length;r++){let s=De.SYMBOL_TABLE[r],l=s&1;for(let u=0;u<De.BARS_IN_MODULE;u++){let d=0;for(;(s&1)===l;)d+=1,s>>=1;l=s&1,ir.RATIOS_TABLE[r]||(ir.RATIOS_TABLE[r]=new Array(De.BARS_IN_MODULE)),ir.RATIOS_TABLE[r][De.BARS_IN_MODULE-u-1]=Math.fround(d/De.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=ir.getDecodedCodewordValue(ir.sampleBitCounts(r));return s!==-1?s:ir.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=yt.sum(r),l=new Int32Array(De.BARS_IN_MODULE),u=0,d=0;for(let p=0;p<De.MODULES_IN_CODEWORD;p++){let x=s/(2*De.MODULES_IN_CODEWORD)+p*s/De.MODULES_IN_CODEWORD;d+r[u]<=x&&(d+=r[u],u++),l[u]++}return l}static getDecodedCodewordValue(r){let s=ir.getBitValue(r);return De.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let l=0;l<r.length;l++)for(let u=0;u<r[l];u++)s=s<<1|(l%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=yt.sum(r),l=new Array(De.BARS_IN_MODULE);if(s>1)for(let p=0;p<l.length;p++)l[p]=Math.fround(r[p]/s);let u=$r.MAX_VALUE,d=-1;this.bSymbolTableReady||ir.initialize();for(let p=0;p<ir.RATIOS_TABLE.length;p++){let x=0,_=ir.RATIOS_TABLE[p];for(let C=0;C<De.BARS_IN_MODULE;C++){let E=Math.fround(_[C]-l[C]);if(x+=Math.fround(E*E),x>=u)break}x<u&&(u=x,d=De.SYMBOL_TABLE[p])}return d}}ir.bSymbolTableReady=!1,ir.RATIOS_TABLE=new Array(De.SYMBOL_TABLE.length).map(M=>new Array(De.BARS_IN_MODULE));class _l{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class kt{static parseLong(r,s=void 0){return parseInt(r,s)}}class tu extends y{}tu.kind="NullPointerException";class Fr{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,l){if(r==null)throw new tu;if(s<0||s>r.length||l<0||s+l>r.length||s+l<0)throw new U;if(l===0)return;for(let u=0;u<l;u++)this.write(r[s+u])}flush(){}close(){}}class Ro extends y{}class nu extends Fr{constructor(r=32){if(super(),this.count=0,r<0)throw new b("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let l=this.buf.length<<1;if(l-r<0&&(l=r),l<0){if(r<0)throw new Ro;l=k.MAX_VALUE}this.buf=O.copyOfUint8Array(this.buf,l)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,l){if(s<0||s>r.length||l<0||s+l-r.length>0)throw new U;this.ensureCapacity(this.count+l),P.arraycopy(r,s,this.buf,this.count,l),this.count+=l}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return O.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var Wt;(function(M){M[M.ALPHA=0]="ALPHA",M[M.LOWER=1]="LOWER",M[M.MIXED=2]="MIXED",M[M.PUNCT=3]="PUNCT",M[M.ALPHA_SHIFT=4]="ALPHA_SHIFT",M[M.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Wt||(Wt={}));function pa(){if(typeof window<"u")return window.BigInt||null;if(typeof va<"u")return va.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ma;function Ci(M){if(typeof ma>"u"&&(ma=pa()),ma===null)throw new Error("BigInt is not supported!");return ma(M)}function Rh(){let M=[];M[0]=Ci(1);let r=Ci(900);M[1]=r;for(let s=2;s<16;s++)M[s]=M[s-1]*r;return M}class ce{static decode(r,s){let l=new Me(""),u=z.ISO8859_1;l.enableDecoding(u);let d=1,p=r[d++],x=new _l;for(;d<r[0];){switch(p){case ce.TEXT_COMPACTION_MODE_LATCH:d=ce.textCompaction(r,d,l);break;case ce.BYTE_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:d=ce.byteCompaction(p,r,u,d,l);break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[d++]);break;case ce.NUMERIC_COMPACTION_MODE_LATCH:d=ce.numericCompaction(r,d,l);break;case ce.ECI_CHARSET:z.getCharacterSetECIByValue(r[d++]);break;case ce.ECI_GENERAL_PURPOSE:d+=2;break;case ce.ECI_USER_DEFINED:d++;break;case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=ce.decodeMacroBlock(r,d,x);break;case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:throw new Z;default:d--,d=ce.textCompaction(r,d,l);break}if(d<r.length)p=r[d++];else throw Z.getFormatInstance()}if(l.length()===0)throw Z.getFormatInstance();let _=new Et(null,l.toString(),null,s);return _.setOther(x),_}static decodeMacroBlock(r,s,l){if(s+ce.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw Z.getFormatInstance();let u=new Int32Array(ce.NUMBER_OF_SEQUENCE_CODEWORDS);for(let x=0;x<ce.NUMBER_OF_SEQUENCE_CODEWORDS;x++,s++)u[x]=r[s];l.setSegmentIndex(k.parseInt(ce.decodeBase900toBase10(u,ce.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new Me;s=ce.textCompaction(r,s,d),l.setFileId(d.toString());let p=-1;for(r[s]===ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(p=s+1);s<r[0];)switch(r[s]){case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case ce.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let x=new Me;s=ce.textCompaction(r,s+1,x),l.setFileName(x.toString());break;case ce.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let _=new Me;s=ce.textCompaction(r,s+1,_),l.setSender(_.toString());break;case ce.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new Me;s=ce.textCompaction(r,s+1,C),l.setAddressee(C.toString());break;case ce.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let E=new Me;s=ce.numericCompaction(r,s+1,E),l.setSegmentCount(k.parseInt(E.toString()));break;case ce.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let R=new Me;s=ce.numericCompaction(r,s+1,R),l.setTimestamp(kt.parseLong(R.toString()));break;case ce.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let B=new Me;s=ce.numericCompaction(r,s+1,B),l.setChecksum(k.parseInt(B.toString()));break;case ce.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Y=new Me;s=ce.numericCompaction(r,s+1,Y),l.setFileSize(kt.parseLong(Y.toString()));break;default:throw Z.getFormatInstance()}break;case ce.MACRO_PDF417_TERMINATOR:s++,l.setLastSegment(!0);break;default:throw Z.getFormatInstance()}if(p!==-1){let x=s-p;l.isLastSegment()&&x--,l.setOptionalData(O.copyOfRange(r,p,p+x))}return s}static textCompaction(r,s,l){let u=new Int32Array((r[0]-s)*2),d=new Int32Array((r[0]-s)*2),p=0,x=!1;for(;s<r[0]&&!x;){let _=r[s++];if(_<ce.TEXT_COMPACTION_MODE_LATCH)u[p]=_/30,u[p+1]=_%30,p+=2;else switch(_){case ce.TEXT_COMPACTION_MODE_LATCH:u[p++]=ce.TEXT_COMPACTION_MODE_LATCH;break;case ce.BYTE_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:case ce.NUMERIC_COMPACTION_MODE_LATCH:case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:s--,x=!0;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[p]=ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=r[s++],d[p]=_,p++;break}}return ce.decodeTextCompaction(u,d,p,l),s}static decodeTextCompaction(r,s,l,u){let d=Wt.ALPHA,p=Wt.ALPHA,x=0;for(;x<l;){let _=r[x],C="";switch(d){case Wt.ALPHA:if(_<26)C=String.fromCharCode(65+_);else switch(_){case 26:C=" ";break;case ce.LL:d=Wt.LOWER;break;case ce.ML:d=Wt.MIXED;break;case ce.PS:p=d,d=Wt.PUNCT_SHIFT;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[x]);break;case ce.TEXT_COMPACTION_MODE_LATCH:d=Wt.ALPHA;break}break;case Wt.LOWER:if(_<26)C=String.fromCharCode(97+_);else switch(_){case 26:C=" ";break;case ce.AS:p=d,d=Wt.ALPHA_SHIFT;break;case ce.ML:d=Wt.MIXED;break;case ce.PS:p=d,d=Wt.PUNCT_SHIFT;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[x]);break;case ce.TEXT_COMPACTION_MODE_LATCH:d=Wt.ALPHA;break}break;case Wt.MIXED:if(_<ce.PL)C=ce.MIXED_CHARS[_];else switch(_){case ce.PL:d=Wt.PUNCT;break;case 26:C=" ";break;case ce.LL:d=Wt.LOWER;break;case ce.AL:d=Wt.ALPHA;break;case ce.PS:p=d,d=Wt.PUNCT_SHIFT;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[x]);break;case ce.TEXT_COMPACTION_MODE_LATCH:d=Wt.ALPHA;break}break;case Wt.PUNCT:if(_<ce.PAL)C=ce.PUNCT_CHARS[_];else switch(_){case ce.PAL:d=Wt.ALPHA;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[x]);break;case ce.TEXT_COMPACTION_MODE_LATCH:d=Wt.ALPHA;break}break;case Wt.ALPHA_SHIFT:if(d=p,_<26)C=String.fromCharCode(65+_);else switch(_){case 26:C=" ";break;case ce.TEXT_COMPACTION_MODE_LATCH:d=Wt.ALPHA;break}break;case Wt.PUNCT_SHIFT:if(d=p,_<ce.PAL)C=ce.PUNCT_CHARS[_];else switch(_){case ce.PAL:d=Wt.ALPHA;break;case ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[x]);break;case ce.TEXT_COMPACTION_MODE_LATCH:d=Wt.ALPHA;break}break}C!==""&&u.append(C),x++}}static byteCompaction(r,s,l,u,d){let p=new nu,x=0,_=0,C=!1;switch(r){case ce.BYTE_COMPACTION_MODE_LATCH:let E=new Int32Array(6),R=s[u++];for(;u<s[0]&&!C;)switch(E[x++]=R,_=900*_+R,R=s[u++],R){case ce.TEXT_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH:case ce.NUMERIC_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:u--,C=!0;break;default:if(x%5===0&&x>0){for(let B=0;B<6;++B)p.write(Number(Ci(_)>>Ci(8*(5-B))));_=0,x=0}break}u===s[0]&&R<ce.TEXT_COMPACTION_MODE_LATCH&&(E[x++]=R);for(let B=0;B<x;B++)p.write(E[B]);break;case ce.BYTE_COMPACTION_MODE_LATCH_6:for(;u<s[0]&&!C;){let B=s[u++];if(B<ce.TEXT_COMPACTION_MODE_LATCH)x++,_=900*_+B;else switch(B){case ce.TEXT_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH:case ce.NUMERIC_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:u--,C=!0;break}if(x%5===0&&x>0){for(let Y=0;Y<6;++Y)p.write(Number(Ci(_)>>Ci(8*(5-Y))));_=0,x=0}}break}return d.append(me.decode(p.toByteArray(),l)),u}static numericCompaction(r,s,l){let u=0,d=!1,p=new Int32Array(ce.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!d;){let x=r[s++];if(s===r[0]&&(d=!0),x<ce.TEXT_COMPACTION_MODE_LATCH)p[u]=x,u++;else switch(x){case ce.TEXT_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH:case ce.BYTE_COMPACTION_MODE_LATCH_6:case ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ce.MACRO_PDF417_TERMINATOR:s--,d=!0;break}(u%ce.MAX_NUMERIC_CODEWORDS===0||x===ce.NUMERIC_COMPACTION_MODE_LATCH||d)&&u>0&&(l.append(ce.decodeBase900toBase10(p,u)),u=0)}return s}static decodeBase900toBase10(r,s){let l=Ci(0);for(let d=0;d<s;d++)l+=ce.EXP900[s-d-1]*Ci(r[d]);let u=l.toString();if(u.charAt(0)!=="1")throw new Z;return u.substring(1)}}ce.TEXT_COMPACTION_MODE_LATCH=900,ce.BYTE_COMPACTION_MODE_LATCH=901,ce.NUMERIC_COMPACTION_MODE_LATCH=902,ce.BYTE_COMPACTION_MODE_LATCH_6=924,ce.ECI_USER_DEFINED=925,ce.ECI_GENERAL_PURPOSE=926,ce.ECI_CHARSET=927,ce.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ce.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ce.MACRO_PDF417_TERMINATOR=922,ce.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ce.MAX_NUMERIC_CODEWORDS=15,ce.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ce.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ce.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ce.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ce.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ce.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ce.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ce.PL=25,ce.LL=27,ce.AS=27,ce.ML=28,ce.AL=28,ce.PS=29,ce.PAL=29,ce.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ce.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ce.EXP900=pa()?Rh():[],ce.NUMBER_OF_SEQUENCE_CODEWORDS=2;class gt{constructor(){}static decode(r,s,l,u,d,p,x){let _=new jr(r,s,l,u,d),C=null,E=null,R;for(let Q=!0;;Q=!1){if(s!=null&&(C=gt.getRowIndicatorColumn(r,_,s,!0,p,x)),u!=null&&(E=gt.getRowIndicatorColumn(r,_,u,!1,p,x)),R=gt.merge(C,E),R==null)throw ae.getNotFoundInstance();let ee=R.getBoundingBox();if(Q&&ee!=null&&(ee.getMinY()<_.getMinY()||ee.getMaxY()>_.getMaxY()))_=ee;else break}R.setBoundingBox(_);let B=R.getBarcodeColumnCount()+1;R.setDetectionResultColumn(0,C),R.setDetectionResultColumn(B,E);let Y=C!=null;for(let Q=1;Q<=B;Q++){let ee=Y?Q:B-Q;if(R.getDetectionResultColumn(ee)!==void 0)continue;let ie;ee===0||ee===B?ie=new eu(_,ee===0):ie=new Is(_),R.setDetectionResultColumn(ee,ie);let le=-1,Ae=le;for(let Ee=_.getMinY();Ee<=_.getMaxY();Ee++){if(le=gt.getStartColumn(R,ee,Ee,Y),le<0||le>_.getMaxX()){if(Ae===-1)continue;le=Ae}let be=gt.detectCodeword(r,_.getMinX(),_.getMaxX(),Y,le,Ee,p,x);be!=null&&(ie.setCodeword(Ee,be),Ae=le,p=Math.min(p,be.getWidth()),x=Math.max(x,be.getWidth()))}}return gt.createDecoderResult(R)}static merge(r,s){if(r==null&&s==null)return null;let l=gt.getBarcodeMetadata(r,s);if(l==null)return null;let u=jr.merge(gt.adjustBoundingBox(r),gt.adjustBoundingBox(s));return new Ms(l,u)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let l=gt.getMax(s),u=0;for(let x of s)if(u+=l-x,x>0)break;let d=r.getCodewords();for(let x=0;u>0&&d[x]==null;x++)u--;let p=0;for(let x=s.length-1;x>=0&&(p+=l-s[x],!(s[x]>0));x--);for(let x=d.length-1;p>0&&d[x]==null;x--)p--;return r.getBoundingBox().addMissingRows(u,p,r.isLeft())}static getMax(r){let s=-1;for(let l of r)s=Math.max(s,l);return s}static getBarcodeMetadata(r,s){let l;if(r==null||(l=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let u;return s==null||(u=s.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(r,s,l,u,d,p){let x=new eu(s,u);for(let _=0;_<2;_++){let C=_===0?1:-1,E=Math.trunc(Math.trunc(l.getX()));for(let R=Math.trunc(Math.trunc(l.getY()));R<=s.getMaxY()&&R>=s.getMinY();R+=C){let B=gt.detectCodeword(r,0,r.getWidth(),u,E,R,d,p);B!=null&&(x.setCodeword(R,B),u?E=B.getStartX():E=B.getEndX())}}return x}static adjustCodewordCount(r,s){let l=s[0][1],u=l.getValue(),d=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-gt.getNumberOfECCodeWords(r.getBarcodeECLevel());if(u.length===0){if(d<1||d>De.MAX_CODEWORDS_IN_BARCODE)throw ae.getNotFoundInstance();l.setValue(d)}else u[0]!==d&&l.setValue(d)}static createDecoderResult(r){let s=gt.createBarcodeMatrix(r);gt.adjustCodewordCount(r,s);let l=new Array,u=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),d=[],p=new Array;for(let _=0;_<r.getBarcodeRowCount();_++)for(let C=0;C<r.getBarcodeColumnCount();C++){let E=s[_][C+1].getValue(),R=_*r.getBarcodeColumnCount()+C;E.length===0?l.push(R):E.length===1?u[R]=E[0]:(p.push(R),d.push(E))}let x=new Array(d.length);for(let _=0;_<x.length;_++)x[_]=d[_];return gt.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),u,De.toIntArray(l),De.toIntArray(p),x)}static createDecoderResultFromAmbiguousValues(r,s,l,u,d){let p=new Int32Array(u.length),x=100;for(;x-- >0;){for(let _=0;_<p.length;_++)s[u[_]]=d[_][p[_]];try{return gt.decodeCodewords(s,r,l)}catch(_){if(!(_ instanceof I))throw _}if(p.length===0)throw I.getChecksumInstance();for(let _=0;_<p.length;_++)if(p[_]<d[_].length-1){p[_]++;break}else if(p[_]=0,_===p.length-1)throw I.getChecksumInstance()}throw I.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let u=0;u<s.length;u++)for(let d=0;d<s[u].length;d++)s[u][d]=new ks;let l=0;for(let u of r.getDetectionResultColumns()){if(u!=null){for(let d of u.getCodewords())if(d!=null){let p=d.getRowNumber();if(p>=0){if(p>=s.length)continue;s[p][l].setValue(d.getValue())}}}l++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,l,u){let d=u?1:-1,p=null;if(gt.isValidBarcodeColumn(r,s-d)&&(p=r.getDetectionResultColumn(s-d).getCodeword(l)),p!=null)return u?p.getEndX():p.getStartX();if(p=r.getDetectionResultColumn(s).getCodewordNearby(l),p!=null)return u?p.getStartX():p.getEndX();if(gt.isValidBarcodeColumn(r,s-d)&&(p=r.getDetectionResultColumn(s-d).getCodewordNearby(l)),p!=null)return u?p.getEndX():p.getStartX();let x=0;for(;gt.isValidBarcodeColumn(r,s-d);){s-=d;for(let _ of r.getDetectionResultColumn(s).getCodewords())if(_!=null)return(u?_.getEndX():_.getStartX())+d*x*(_.getEndX()-_.getStartX());x++}return u?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,l,u,d,p,x,_){d=gt.adjustCodewordStartColumn(r,s,l,u,d,p);let C=gt.getModuleBitCount(r,s,l,u,d,p);if(C==null)return null;let E,R=yt.sum(C);if(u)E=d+R;else{for(let Q=0;Q<C.length/2;Q++){let ee=C[Q];C[Q]=C[C.length-1-Q],C[C.length-1-Q]=ee}E=d,d=E-R}if(!gt.checkCodewordSkew(R,x,_))return null;let B=ir.getDecodedValue(C),Y=De.getCodeword(B);return Y===-1?null:new ns(d,E,gt.getCodewordBucketNumber(B),Y)}static getModuleBitCount(r,s,l,u,d,p){let x=d,_=new Int32Array(8),C=0,E=u?1:-1,R=u;for(;(u?x<l:x>=s)&&C<_.length;)r.get(x,p)===R?(_[C]++,x+=E):(C++,R=!R);return C===_.length||x===(u?l:s)&&C===_.length-1?_:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,l,u,d,p){let x=d,_=u?-1:1;for(let C=0;C<2;C++){for(;(u?x>=s:x<l)&&u===r.get(x,p);){if(Math.abs(d-x)>gt.CODEWORD_SKEW_SIZE)return d;x+=_}_=-_,u=!u}return x}static checkCodewordSkew(r,s,l){return s-gt.CODEWORD_SKEW_SIZE<=r&&r<=l+gt.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,l){if(r.length===0)throw Z.getFormatInstance();let u=1<<s+1,d=gt.correctErrors(r,l,u);gt.verifyCodewordCount(r,u);let p=ce.decode(r,""+s);return p.setErrorsCorrected(d),p.setErasures(l.length),p}static correctErrors(r,s,l){if(s!=null&&s.length>l/2+gt.MAX_ERRORS||l<0||l>gt.MAX_EC_CODEWORDS)throw I.getChecksumInstance();return gt.errorCorrection.decode(r,l,s)}static verifyCodewordCount(r,s){if(r.length<4)throw Z.getFormatInstance();let l=r[0];if(l>r.length)throw Z.getFormatInstance();if(l===0)if(s<r.length)r[0]=r.length-s;else throw Z.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),l=0,u=s.length-1;for(;!((r&1)!==l&&(l=r&1,u--,u<0));)s[u]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return gt.getCodewordBucketNumber(gt.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new Br;for(let l=0;l<r.length;l++){s.format("Row %2d: ",l);for(let u=0;u<r[l].length;u++){let d=r[l][u];d.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}s.format("%n")}return s.toString()}}gt.CODEWORD_SKEW_SIZE=2,gt.MAX_ERRORS=3,gt.MAX_EC_CODEWORDS=512,gt.errorCorrection=new fa;class Fn{decode(r,s=null){let l=Fn.decode(r,s,!1);if(l==null||l.length===0||l[0]==null)throw ae.getNotFoundInstance();return l[0]}decodeMultiple(r,s=null){try{return Fn.decode(r,s,!0)}catch(l){throw l instanceof Z||l instanceof I?ae.getNotFoundInstance():l}}static decode(r,s,l){const u=new Array,d=ft.detectMultiple(r,s,l);for(const p of d.getPoints()){const x=gt.decode(d.getBits(),p[4],p[5],p[6],p[7],Fn.getMinCodewordWidth(p),Fn.getMaxCodewordWidth(p)),_=new ze(x.getText(),x.getRawBytes(),void 0,p,re.PDF_417);_.putMetadata(Xe.ERROR_CORRECTION_LEVEL,x.getECLevel());const C=x.getOther();C!=null&&_.putMetadata(Xe.PDF417_EXTRA_METADATA,C),u.push(_)}return u.map(p=>p)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?k.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Fn.getMaxWidth(r[0],r[4]),Fn.getMaxWidth(r[6],r[2])*De.MODULES_IN_CODEWORD/De.MODULES_IN_STOP_PATTERN),Math.max(Fn.getMaxWidth(r[1],r[5]),Fn.getMaxWidth(r[7],r[3])*De.MODULES_IN_CODEWORD/De.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Fn.getMinWidth(r[0],r[4]),Fn.getMinWidth(r[6],r[2])*De.MODULES_IN_CODEWORD/De.MODULES_IN_STOP_PATTERN),Math.min(Fn.getMinWidth(r[1],r[5]),Fn.getMinWidth(r[7],r[3])*De.MODULES_IN_CODEWORD/De.MODULES_IN_STOP_PATTERN)))}reset(){}}class mr extends y{}mr.kind="ReaderException";class ru{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!i(r)&&r.get(G.TRY_HARDER)===!0,l=i(r)?null:r.get(G.POSSIBLE_FORMATS),u=new Array;if(!i(l)){const d=l.some(p=>p===re.UPC_A||p===re.UPC_E||p===re.EAN_13||p===re.EAN_8||p===re.CODABAR||p===re.CODE_39||p===re.CODE_93||p===re.CODE_128||p===re.ITF||p===re.RSS_14||p===re.RSS_EXPANDED);d&&!s&&u.push(new Bi(r,this.verbose)),l.includes(re.QR_CODE)&&u.push(new jn),l.includes(re.DATA_MATRIX)&&u.push(new Ht),l.includes(re.AZTEC)&&u.push(new kn),l.includes(re.PDF_417)&&u.push(new Fn),d&&s&&u.push(new Bi(r,this.verbose))}u.length===0&&(s||u.push(new Bi(r,this.verbose)),u.push(new jn),u.push(new Ht),u.push(new kn),u.push(new Fn),s&&u.push(new Bi(r,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new mr("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(l){if(l instanceof mr)continue}throw new ae("No MultiFormat Readers were able to detect the code.")}}class iu extends Pe{constructor(r=null,s=500){const l=new ru;l.setHints(r),super(l,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class Fi extends Pe{constructor(r=500){super(new Fn,r)}}class su extends Pe{constructor(r=500){super(new jn,r)}}var ga;(function(M){M[M.ERROR_CORRECTION=0]="ERROR_CORRECTION",M[M.CHARACTER_SET=1]="CHARACTER_SET",M[M.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",M[M.MIN_SIZE=3]="MIN_SIZE",M[M.MAX_SIZE=4]="MAX_SIZE",M[M.MARGIN=5]="MARGIN",M[M.PDF417_COMPACT=6]="PDF417_COMPACT",M[M.PDF417_COMPACTION=7]="PDF417_COMPACTION",M[M.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",M[M.AZTEC_LAYERS=9]="AZTEC_LAYERS",M[M.QR_VERSION=10]="QR_VERSION"})(ga||(ga={}));var gn=ga;class bl{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new nt(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let l=s[s.length-1];const u=this.field;for(let d=s.length;d<=r;d++){const p=l.multiply(new nt(u,Int32Array.from([1,u.exp(d-1+u.getGeneratorBase())])));s.push(p),l=p}}return s[r]}encode(r,s){if(s===0)throw new b("No error correction bytes");const l=r.length-s;if(l<=0)throw new b("No data bytes provided");const u=this.buildGenerator(s),d=new Int32Array(l);P.arraycopy(r,0,d,0,l);let p=new nt(this.field,d);p=p.multiplyByMonomial(s,1);const _=p.divide(u)[1].getCoefficients(),C=s-_.length;for(let E=0;E<C;E++)r[l+E]=0;P.arraycopy(_,0,r,l+C,_.length)}}class cn{constructor(){}static applyMaskPenaltyRule1(r){return cn.applyMaskPenaltyRule1Internal(r,!0)+cn.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const l=r.getArray(),u=r.getWidth(),d=r.getHeight();for(let p=0;p<d-1;p++){const x=l[p];for(let _=0;_<u-1;_++){const C=x[_];C===x[_+1]&&C===l[p+1][_]&&C===l[p+1][_+1]&&s++}}return cn.N2*s}static applyMaskPenaltyRule3(r){let s=0;const l=r.getArray(),u=r.getWidth(),d=r.getHeight();for(let p=0;p<d;p++)for(let x=0;x<u;x++){const _=l[p];x+6<u&&_[x]===1&&_[x+1]===0&&_[x+2]===1&&_[x+3]===1&&_[x+4]===1&&_[x+5]===0&&_[x+6]===1&&(cn.isWhiteHorizontal(_,x-4,x)||cn.isWhiteHorizontal(_,x+7,x+11))&&s++,p+6<d&&l[p][x]===1&&l[p+1][x]===0&&l[p+2][x]===1&&l[p+3][x]===1&&l[p+4][x]===1&&l[p+5][x]===0&&l[p+6][x]===1&&(cn.isWhiteVertical(l,x,p-4,p)||cn.isWhiteVertical(l,x,p+7,p+11))&&s++}return s*cn.N3}static isWhiteHorizontal(r,s,l){s=Math.max(s,0),l=Math.min(l,r.length);for(let u=s;u<l;u++)if(r[u]===1)return!1;return!0}static isWhiteVertical(r,s,l,u){l=Math.max(l,0),u=Math.min(u,r.length);for(let d=l;d<u;d++)if(r[d][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const l=r.getArray(),u=r.getWidth(),d=r.getHeight();for(let _=0;_<d;_++){const C=l[_];for(let E=0;E<u;E++)C[E]===1&&s++}const p=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-p)*10/p)*cn.N4}static getDataMaskBit(r,s,l){let u,d;switch(r){case 0:u=l+s&1;break;case 1:u=l&1;break;case 2:u=s%3;break;case 3:u=(l+s)%3;break;case 4:u=Math.floor(l/2)+Math.floor(s/3)&1;break;case 5:d=l*s,u=(d&1)+d%3;break;case 6:d=l*s,u=(d&1)+d%3&1;break;case 7:d=l*s,u=d%3+(l+s&1)&1;break;default:throw new b("Invalid mask pattern: "+r)}return u===0}static applyMaskPenaltyRule1Internal(r,s){let l=0;const u=s?r.getHeight():r.getWidth(),d=s?r.getWidth():r.getHeight(),p=r.getArray();for(let x=0;x<u;x++){let _=0,C=-1;for(let E=0;E<d;E++){const R=s?p[x][E]:p[E][x];R===C?_++:(_>=5&&(l+=cn.N1+(_-5)),_=1,C=R)}_>=5&&(l+=cn.N1+(_-5))}return l}}cn.N1=3,cn.N2=3,cn.N3=40,cn.N4=10;class Oo{constructor(r,s){this.width=r,this.height=s;const l=new Array(s);for(let u=0;u!==s;u++)l[u]=new Uint8Array(r);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,l){this.bytes[s][r]=l}setBoolean(r,s,l){this.bytes[s][r]=l?1:0}clear(r){for(const s of this.bytes)O.fill(s,r)}equals(r){if(!(r instanceof Oo))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let l=0,u=this.height;l<u;++l){const d=this.bytes[l],p=s.bytes[l];for(let x=0,_=this.width;x<_;++x)if(d[x]!==p[x])return!1}return!0}toString(){const r=new Me;for(let s=0,l=this.height;s<l;++s){const u=this.bytes[s];for(let d=0,p=this.width;d<p;++d)switch(u[d]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class rs{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new Me;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<rs.NUM_MASK_PATTERNS}}rs.NUM_MASK_PATTERNS=8;class qt extends y{}qt.kind="WriterException";class et{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,l,u,d){et.clearMatrix(d),et.embedBasicPatterns(l,d),et.embedTypeInfo(s,u,d),et.maybeEmbedVersionInfo(l,d),et.embedDataBits(r,u,d)}static embedBasicPatterns(r,s){et.embedPositionDetectionPatternsAndSeparators(s),et.embedDarkDotAtLeftBottomCorner(s),et.maybeEmbedPositionAdjustmentPatterns(r,s),et.embedTimingPatterns(s)}static embedTypeInfo(r,s,l){const u=new H;et.makeTypeInfoBits(r,s,u);for(let d=0,p=u.getSize();d<p;++d){const x=u.get(u.getSize()-1-d),_=et.TYPE_INFO_COORDINATES[d],C=_[0],E=_[1];if(l.setBoolean(C,E,x),d<8){const R=l.getWidth()-d-1;l.setBoolean(R,8,x)}else{const B=l.getHeight()-7+(d-8);l.setBoolean(8,B,x)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const l=new H;et.makeVersionInfoBits(r,l);let u=6*3-1;for(let d=0;d<6;++d)for(let p=0;p<3;++p){const x=l.get(u);u--,s.setBoolean(d,s.getHeight()-11+p,x),s.setBoolean(s.getHeight()-11+p,d,x)}}static embedDataBits(r,s,l){let u=0,d=-1,p=l.getWidth()-1,x=l.getHeight()-1;for(;p>0;){for(p===6&&(p-=1);x>=0&&x<l.getHeight();){for(let _=0;_<2;++_){const C=p-_;if(!et.isEmpty(l.get(C,x)))continue;let E;u<r.getSize()?(E=r.get(u),++u):E=!1,s!==255&&cn.getDataMaskBit(s,C,x)&&(E=!E),l.setBoolean(C,x,E)}x+=d}d=-d,x+=d,p-=2}if(u!==r.getSize())throw new qt("Not all bits consumed: "+u+"/"+r.getSize())}static findMSBSet(r){return 32-k.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new b("0 polynomial");const l=et.findMSBSet(s);for(r<<=l-1;et.findMSBSet(r)>=l;)r^=s<<et.findMSBSet(r)-l;return r}static makeTypeInfoBits(r,s,l){if(!rs.isValidMaskPattern(s))throw new qt("Invalid mask pattern");const u=r.getBits()<<3|s;l.appendBits(u,5);const d=et.calculateBCHCode(u,et.TYPE_INFO_POLY);l.appendBits(d,10);const p=new H;if(p.appendBits(et.TYPE_INFO_MASK_PATTERN,15),l.xor(p),l.getSize()!==15)throw new qt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const l=et.calculateBCHCode(r.getVersionNumber(),et.VERSION_INFO_POLY);if(s.appendBits(l,12),s.getSize()!==18)throw new qt("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const l=(s+1)%2;et.isEmpty(r.get(s,6))&&r.setNumber(s,6,l),et.isEmpty(r.get(6,s))&&r.setNumber(6,s,l)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new qt;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,l){for(let u=0;u<8;++u){if(!et.isEmpty(l.get(r+u,s)))throw new qt;l.setNumber(r+u,s,0)}}static embedVerticalSeparationPattern(r,s,l){for(let u=0;u<7;++u){if(!et.isEmpty(l.get(r,s+u)))throw new qt;l.setNumber(r,s+u,0)}}static embedPositionAdjustmentPattern(r,s,l){for(let u=0;u<5;++u){const d=et.POSITION_ADJUSTMENT_PATTERN[u];for(let p=0;p<5;++p)l.setNumber(r+p,s+u,d[p])}}static embedPositionDetectionPattern(r,s,l){for(let u=0;u<7;++u){const d=et.POSITION_DETECTION_PATTERN[u];for(let p=0;p<7;++p)l.setNumber(r+p,s+u,d[p])}}static embedPositionDetectionPatternsAndSeparators(r){const s=et.POSITION_DETECTION_PATTERN[0].length;et.embedPositionDetectionPattern(0,0,r),et.embedPositionDetectionPattern(r.getWidth()-s,0,r),et.embedPositionDetectionPattern(0,r.getWidth()-s,r);const l=8;et.embedHorizontalSeparationPattern(0,l-1,r),et.embedHorizontalSeparationPattern(r.getWidth()-l,l-1,r),et.embedHorizontalSeparationPattern(0,r.getWidth()-l,r);const u=7;et.embedVerticalSeparationPattern(u,0,r),et.embedVerticalSeparationPattern(r.getHeight()-u-1,0,r),et.embedVerticalSeparationPattern(u,r.getHeight()-u,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const l=r.getVersionNumber()-1,u=et.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,p=u.length;d!==p;d++){const x=u[d];if(x>=0)for(let _=0;_!==p;_++){const C=u[_];C>=0&&et.isEmpty(s.get(C,x))&&et.embedPositionAdjustmentPattern(C-2,x-2,s)}}}}et.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),et.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),et.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),et.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),et.VERSION_INFO_POLY=7973,et.TYPE_INFO_POLY=1335,et.TYPE_INFO_MASK_PATTERN=21522;class Oh{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Jt{constructor(){}static calculateMaskPenalty(r){return cn.applyMaskPenaltyRule1(r)+cn.applyMaskPenaltyRule2(r)+cn.applyMaskPenaltyRule3(r)+cn.applyMaskPenaltyRule4(r)}static encode(r,s,l=null){let u=Jt.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get(gn.CHARACTER_SET)!==void 0;d&&(u=l.get(gn.CHARACTER_SET).toString());const p=this.chooseMode(r,u),x=new H;if(p===Ke.BYTE&&(d||Jt.DEFAULT_BYTE_MODE_ENCODING!==u)){const Ee=z.getCharacterSetECIByName(u);Ee!==void 0&&this.appendECI(Ee,x)}this.appendModeInfo(p,x);const _=new H;this.appendBytes(r,p,_,u);let C;if(l!==null&&l.get(gn.QR_VERSION)!==void 0){const Ee=Number.parseInt(l.get(gn.QR_VERSION).toString(),10);C=Le.getVersionForNumber(Ee);const be=this.calculateBitsNeeded(p,x,_,C);if(!this.willFit(be,C,s))throw new qt("Data too big for requested version")}else C=this.recommendVersion(s,p,x,_);const E=new H;E.appendBitArray(x);const R=p===Ke.BYTE?_.getSizeInBytes():r.length;this.appendLengthInfo(R,C,p,E),E.appendBitArray(_);const B=C.getECBlocksForLevel(s),Y=C.getTotalCodewords()-B.getTotalECCodewords();this.terminateBits(Y,E);const Q=this.interleaveWithECBytes(E,C.getTotalCodewords(),Y,B.getNumBlocks()),ee=new rs;ee.setECLevel(s),ee.setMode(p),ee.setVersion(C);const ie=C.getDimensionForVersion(),le=new Oo(ie,ie),Ae=this.chooseMaskPattern(Q,s,C,le);return ee.setMaskPattern(Ae),et.buildMatrix(Q,s,C,Ae,le),ee.setMatrix(le),ee}static recommendVersion(r,s,l,u){const d=this.calculateBitsNeeded(s,l,u,Le.getVersionForNumber(1)),p=this.chooseVersion(d,r),x=this.calculateBitsNeeded(s,l,u,p);return this.chooseVersion(x,r)}static calculateBitsNeeded(r,s,l,u){return s.getSize()+r.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(r){return r<Jt.ALPHANUMERIC_TABLE.length?Jt.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if(z.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return Ke.KANJI;let l=!1,u=!1;for(let d=0,p=r.length;d<p;++d){const x=r.charAt(d);if(Jt.isDigit(x))l=!0;else if(this.getAlphanumericCode(x.charCodeAt(0))!==-1)u=!0;else return Ke.BYTE}return u?Ke.ALPHANUMERIC:l?Ke.NUMERIC:Ke.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=me.encode(r,z.SJIS)}catch{return!1}const l=s.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){const d=s[u]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(r,s,l,u){let d=Number.MAX_SAFE_INTEGER,p=-1;for(let x=0;x<rs.NUM_MASK_PATTERNS;x++){et.buildMatrix(r,s,l,x,u);let _=this.calculateMaskPenalty(u);_<d&&(d=_,p=x)}return p}static chooseVersion(r,s){for(let l=1;l<=40;l++){const u=Le.getVersionForNumber(l);if(Jt.willFit(r,u,s))return u}throw new qt("Data too big")}static willFit(r,s,l){const u=s.getTotalCodewords(),p=s.getECBlocksForLevel(l).getTotalECCodewords(),x=u-p,_=(r+7)/8;return x>=_}static terminateBits(r,s){const l=r*8;if(s.getSize()>l)throw new qt("data bits cannot fit in the QR Code"+s.getSize()+" > "+l);for(let p=0;p<4&&s.getSize()<l;++p)s.appendBit(!1);const u=s.getSize()&7;if(u>0)for(let p=u;p<8;p++)s.appendBit(!1);const d=r-s.getSizeInBytes();for(let p=0;p<d;++p)s.appendBits(p&1?17:236,8);if(s.getSize()!==l)throw new qt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,l,u,d,p){if(u>=l)throw new qt("Block ID too large");const x=r%l,_=l-x,C=Math.floor(r/l),E=C+1,R=Math.floor(s/l),B=R+1,Y=C-R,Q=E-B;if(Y!==Q)throw new qt("EC bytes mismatch");if(l!==_+x)throw new qt("RS blocks mismatch");if(r!==(R+Y)*_+(B+Q)*x)throw new qt("Total bytes mismatch");u<_?(d[0]=R,p[0]=Y):(d[0]=B,p[0]=Q)}static interleaveWithECBytes(r,s,l,u){if(r.getSizeInBytes()!==l)throw new qt("Number of bits and data bytes does not match");let d=0,p=0,x=0;const _=new Array;for(let E=0;E<u;++E){const R=new Int32Array(1),B=new Int32Array(1);Jt.getNumDataBytesAndNumECBytesForBlockID(s,l,u,E,R,B);const Y=R[0],Q=new Uint8Array(Y);r.toBytes(8*d,Q,0,Y);const ee=Jt.generateECBytes(Q,B[0]);_.push(new Oh(Q,ee)),p=Math.max(p,Y),x=Math.max(x,ee.length),d+=R[0]}if(l!==d)throw new qt("Data bytes does not match offset");const C=new H;for(let E=0;E<p;++E)for(const R of _){const B=R.getDataBytes();E<B.length&&C.appendBits(B[E],8)}for(let E=0;E<x;++E)for(const R of _){const B=R.getErrorCorrectionBytes();E<B.length&&C.appendBits(B[E],8)}if(s!==C.getSizeInBytes())throw new qt("Interleaving error: "+s+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(r,s){const l=r.length,u=new Int32Array(l+s);for(let p=0;p<l;p++)u[p]=r[p]&255;new bl(ut.QR_CODE_FIELD_256).encode(u,s);const d=new Uint8Array(s);for(let p=0;p<s;p++)d[p]=u[l+p];return d}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,l,u){const d=l.getCharacterCountBits(s);if(r>=1<<d)throw new qt(r+" is bigger than "+((1<<d)-1));u.appendBits(r,d)}static appendBytes(r,s,l,u){switch(s){case Ke.NUMERIC:Jt.appendNumericBytes(r,l);break;case Ke.ALPHANUMERIC:Jt.appendAlphanumericBytes(r,l);break;case Ke.BYTE:Jt.append8BitBytes(r,l,u);break;case Ke.KANJI:Jt.appendKanjiBytes(r,l);break;default:throw new qt("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=Jt.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const l=r.length;let u=0;for(;u<l;){const d=Jt.getDigit(r.charAt(u));if(u+2<l){const p=Jt.getDigit(r.charAt(u+1)),x=Jt.getDigit(r.charAt(u+2));s.appendBits(d*100+p*10+x,10),u+=3}else if(u+1<l){const p=Jt.getDigit(r.charAt(u+1));s.appendBits(d*10+p,7),u+=2}else s.appendBits(d,4),u++}}static appendAlphanumericBytes(r,s){const l=r.length;let u=0;for(;u<l;){const d=Jt.getAlphanumericCode(r.charCodeAt(u));if(d===-1)throw new qt;if(u+1<l){const p=Jt.getAlphanumericCode(r.charCodeAt(u+1));if(p===-1)throw new qt;s.appendBits(d*45+p,11),u+=2}else s.appendBits(d,6),u++}}static append8BitBytes(r,s,l){let u;try{u=me.encode(r,l)}catch(d){throw new qt(d)}for(let d=0,p=u.length;d!==p;d++){const x=u[d];s.appendBits(x,8)}}static appendKanjiBytes(r,s){let l;try{l=me.encode(r,z.SJIS)}catch(d){throw new qt(d)}const u=l.length;for(let d=0;d<u;d+=2){const p=l[d]&255,x=l[d+1]&255,_=p<<8&4294967295|x;let C=-1;if(_>=33088&&_<=40956?C=_-33088:_>=57408&&_<=60351&&(C=_-49472),C===-1)throw new qt("Invalid byte sequence");const E=(C>>8)*192+(C&255);s.appendBits(E,13)}}static appendECI(r,s){s.appendBits(Ke.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}Jt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Jt.DEFAULT_BYTE_MODE_ENCODING=z.UTF8.getName();class zi{write(r,s,l,u=null){if(r.length===0)throw new b("Found empty contents");if(s<0||l<0)throw new b("Requested dimensions are too small: "+s+"x"+l);let d=St.L,p=zi.QUIET_ZONE_SIZE;u!==null&&(u.get(gn.ERROR_CORRECTION)!==void 0&&(d=St.fromString(u.get(gn.ERROR_CORRECTION).toString())),u.get(gn.MARGIN)!==void 0&&(p=Number.parseInt(u.get(gn.MARGIN).toString(),10)));const x=Jt.encode(r,d,u);return this.renderResult(x,s,l,p)}writeToDom(r,s,l,u,d=null){typeof r=="string"&&(r=document.querySelector(r));const p=this.write(s,l,u,d);r&&r.appendChild(p)}renderResult(r,s,l,u){const d=r.getMatrix();if(d===null)throw new In;const p=d.getWidth(),x=d.getHeight(),_=p+u*2,C=x+u*2,E=Math.max(s,_),R=Math.max(l,C),B=Math.min(Math.floor(E/_),Math.floor(R/C)),Y=Math.floor((E-p*B)/2),Q=Math.floor((R-x*B)/2),ee=this.createSVGElement(E,R);for(let ie=0,le=Q;ie<x;ie++,le+=B)for(let Ae=0,Ee=Y;Ae<p;Ae++,Ee+=B)if(d.get(Ae,ie)===1){const be=this.createSvgRectElement(Ee,le,B,B);ee.appendChild(be)}return ee}createSVGElement(r,s){const l=document.createElementNS(zi.SVG_NS,"svg");return l.setAttributeNS(null,"height",r.toString()),l.setAttributeNS(null,"width",s.toString()),l}createSvgRectElement(r,s,l,u){const d=document.createElementNS(zi.SVG_NS,"rect");return d.setAttributeNS(null,"x",r.toString()),d.setAttributeNS(null,"y",s.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",u.toString()),d.setAttributeNS(null,"fill","#000000"),d}}zi.QUIET_ZONE_SIZE=4,zi.SVG_NS="http://www.w3.org/2000/svg";class Si{encode(r,s,l,u,d){if(r.length===0)throw new b("Found empty contents");if(s!==re.QR_CODE)throw new b("Can only encode QR_CODE, but got "+s);if(l<0||u<0)throw new b(`Requested dimensions are too small: ${l}x${u}`);let p=St.L,x=Si.QUIET_ZONE_SIZE;d!==null&&(d.get(gn.ERROR_CORRECTION)!==void 0&&(p=St.fromString(d.get(gn.ERROR_CORRECTION).toString())),d.get(gn.MARGIN)!==void 0&&(x=Number.parseInt(d.get(gn.MARGIN).toString(),10)));const _=Jt.encode(r,p,d);return Si.renderResult(_,l,u,x)}static renderResult(r,s,l,u){const d=r.getMatrix();if(d===null)throw new In;const p=d.getWidth(),x=d.getHeight(),_=p+u*2,C=x+u*2,E=Math.max(s,_),R=Math.max(l,C),B=Math.min(Math.floor(E/_),Math.floor(R/C)),Y=Math.floor((E-p*B)/2),Q=Math.floor((R-x*B)/2),ee=new we(E,R);for(let ie=0,le=Q;ie<x;ie++,le+=B)for(let Ae=0,Ee=Y;Ae<p;Ae++,Ee+=B)d.get(Ae,ie)===1&&ee.setRegion(Ee,le,B,B);return ee}}Si.QUIET_ZONE_SIZE=4;class is{encode(r,s,l,u,d){let p;switch(s){case re.QR_CODE:p=new Si;break;default:throw new b("No encoder available for format "+s)}return p.encode(r,s,l,u,d)}}class ni extends ue{constructor(r,s,l,u,d,p,x,_){if(super(p,x),this.yuvData=r,this.dataWidth=s,this.dataHeight=l,this.left=u,this.top=d,u+p>s||d+x>l)throw new b("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(p,x)}getRow(r,s){if(r<0||r>=this.getHeight())throw new b("Requested row is outside the image: "+r);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(r+this.top)*this.dataWidth+this.left;return P.arraycopy(this.yuvData,u,s,0,l),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const l=r*s,u=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return P.arraycopy(this.yuvData,d,u,0,l),u;for(let p=0;p<s;p++){const x=p*r;P.arraycopy(this.yuvData,d,u,x,r),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,s,l,u){return new ni(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,l,u,!1)}renderThumbnail(){const r=this.getWidth()/ni.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/ni.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(r*s),u=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let p=0;p<s;p++){const x=p*r;for(let _=0;_<r;_++){const C=u[d+_*ni.THUMBNAIL_SCALE_FACTOR]&255;l[x+_]=4278190080|C*65793}d+=this.dataWidth*ni.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/ni.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ni.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const l=this.yuvData;for(let u=0,d=this.top*this.dataWidth+this.left;u<s;u++,d+=this.dataWidth){const p=d+r/2;for(let x=d,_=d+r-1;x<p;x++,_--){const C=l[x];l[x]=l[_],l[_]=C}}}invert(){return new je(this)}}ni.THUMBNAIL_SCALE_FACTOR=2;class ss extends ue{constructor(r,s,l,u,d,p,x){if(super(s,l),this.dataWidth=u,this.dataHeight=d,this.left=p,this.top=x,r.BYTES_PER_ELEMENT===4){const _=s*l,C=new Uint8ClampedArray(_);for(let E=0;E<_;E++){const R=r[E],B=R>>16&255,Y=R>>7&510,Q=R&255;C[E]=(B+Y+Q)/4&255}this.luminances=C}else this.luminances=r;if(u===void 0&&(this.dataWidth=s),d===void 0&&(this.dataHeight=l),p===void 0&&(this.left=0),x===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+l>this.dataHeight)throw new b("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new b("Requested row is outside the image: "+r);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(r+this.top)*this.dataWidth+this.left;return P.arraycopy(this.luminances,u,s,0,l),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const l=r*s,u=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return P.arraycopy(this.luminances,d,u,0,l),u;for(let p=0;p<s;p++){const x=p*r;P.arraycopy(this.luminances,d,u,x,r),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,s,l,u){return new ss(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new je(this)}}class gr extends z{static forName(r){return this.getCharacterSetECIByName(r)}}class xa{}xa.ISO_8859_1=z.ISO8859_1;class Cl{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class ou{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class Sl{constructor(r){this.previous=r}getPrevious(){return this.previous}}class Ui extends Sl{constructor(r,s,l){super(r),this.value=s,this.bitCount=l}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new Ui(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ui(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+k.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class Al extends Ui{constructor(r,s,l){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=l}appendTo(r,s){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):l===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+l],8)}addBinaryShift(r,s){return new Al(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Lh(M,r,s){return new Al(M,r,s)}function Rs(M,r,s){return new Ui(M,r,s)}const Ph=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Rn=0,Ai=1,Er=2,ri=3,ii=4,Os=new Ui(null,0,0),El=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Lo(M){for(let r of M)O.fill(r,-1);return M[Rn][ii]=0,M[Ai][ii]=0,M[Ai][Rn]=28,M[ri][ii]=0,M[Er][ii]=0,M[Er][Rn]=15,M}const Nl=Lo(O.createInt32Array(6,6));class xr{constructor(r,s,l,u){this.token=r,this.mode=s,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let l=this.bitCount,u=this.token;if(r!==this.mode){let p=El[this.mode][r];u=Rs(u,p&65535,p>>16),l+=p>>16}let d=r===Er?4:5;return u=Rs(u,s,d),new xr(u,r,0,l+d)}shiftAndAppend(r,s){let l=this.token,u=this.mode===Er?4:5;return l=Rs(l,Nl[this.mode][r],u),l=Rs(l,s,5),new xr(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(r){let s=this.token,l=this.mode,u=this.bitCount;if(this.mode===ii||this.mode===Er){let x=El[l][Rn];s=Rs(s,x&65535,x>>16),u+=x>>16,l=Rn}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,p=new xr(s,l,this.binaryShiftByteCount+1,u+d);return p.binaryShiftByteCount===2078&&(p=p.endBinaryShift(r+1)),p}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=Lh(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new xr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(El[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=xr.calculateBinaryShiftCost(r)-xr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let u=this.endBinaryShift(r.length).token;u!==null;u=u.getPrevious())s.unshift(u);let l=new H;for(const u of s)u.appendTo(l,r);return l}toString(){return fe.format("%s bits=%d bytes=%d",Ph[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}xr.INITIAL_STATE=new xr(Os,Rn,0,0);function Dh(M){const r=fe.getCharCode(" "),s=fe.getCharCode("."),l=fe.getCharCode(",");M[Rn][r]=1;const u=fe.getCharCode("Z"),d=fe.getCharCode("A");for(let B=d;B<=u;B++)M[Rn][B]=B-d+2;M[Ai][r]=1;const p=fe.getCharCode("z"),x=fe.getCharCode("a");for(let B=x;B<=p;B++)M[Ai][B]=B-x+2;M[Er][r]=1;const _=fe.getCharCode("9"),C=fe.getCharCode("0");for(let B=C;B<=_;B++)M[Er][B]=B-C+2;M[Er][l]=12,M[Er][s]=13;const E=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let B=0;B<E.length;B++)M[ri][fe.getCharCode(E[B])]=B;const R=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let B=0;B<R.length;B++)fe.getCharCode(R[B])>0&&(M[ii][fe.getCharCode(R[B])]=B);return M}const si=Dh(O.createInt32Array(5,256));class Vi{constructor(r){this.text=r}encode(){const r=fe.getCharCode(" "),s=fe.getCharCode(`
`);let l=ou.singletonList(xr.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let p,x=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case fe.getCharCode("\r"):p=x===s?2:0;break;case fe.getCharCode("."):p=x===r?3:0;break;case fe.getCharCode(","):p=x===r?4:0;break;case fe.getCharCode(":"):p=x===r?5:0;break;default:p=0}p>0?(l=Vi.updateStateListForPair(l,d,p),d++):l=this.updateStateListForChar(l,d)}return ou.min(l,(d,p)=>d.getBitCount()-p.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const l=[];for(let u of r)this.updateStateForChar(u,s,l);return Vi.simplifyStates(l)}updateStateForChar(r,s,l){let u=this.text[s]&255,d=si[r.getMode()][u]>0,p=null;for(let x=0;x<=ii;x++){let _=si[x][u];if(_>0){if(p==null&&(p=r.endBinaryShift(s)),!d||x===r.getMode()||x===Er){const C=p.latchAndAppend(x,_);l.push(C)}if(!d&&Nl[r.getMode()][x]>=0){const C=p.shiftAndAppend(x,_);l.push(C)}}}if(r.getBinaryShiftByteCount()>0||si[r.getMode()][u]===0){let x=r.addBinaryShiftChar(s);l.push(x)}}static updateStateListForPair(r,s,l){const u=[];for(let d of r)this.updateStateForPair(d,s,l,u);return this.simplifyStates(u)}static updateStateForPair(r,s,l,u){let d=r.endBinaryShift(s);if(u.push(d.latchAndAppend(ii,l)),r.getMode()!==ii&&u.push(d.shiftAndAppend(ii,l)),l===3||l===4){let p=d.latchAndAppend(Er,16-l).latchAndAppend(Er,1);u.push(p)}if(r.getBinaryShiftByteCount()>0){let p=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);u.push(p)}}static simplifyStates(r){let s=[];for(const l of r){let u=!0;for(const d of s){if(d.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(d)&&(s=s.filter(p=>p!==d))}u&&s.push(l)}return s}}class Dt{constructor(){}static encodeBytes(r){return Dt.encode(r,Dt.DEFAULT_EC_PERCENT,Dt.DEFAULT_AZTEC_LAYERS)}static encode(r,s,l){let u=new Vi(r).encode(),d=k.truncDivision(u.getSize()*s,100)+11,p=u.getSize()+d,x,_,C,E,R;if(l!==Dt.DEFAULT_AZTEC_LAYERS){if(x=l<0,_=Math.abs(l),_>(x?Dt.MAX_NB_BITS_COMPACT:Dt.MAX_NB_BITS))throw new b(fe.format("Illegal value %s for layers",l));C=Dt.totalBitsInLayer(_,x),E=Dt.WORD_SIZE[_];let be=C-C%E;if(R=Dt.stuffBits(u,E),R.getSize()+d>be)throw new b("Data to large for user specified layer");if(x&&R.getSize()>E*64)throw new b("Data to large for user specified layer")}else{E=0,R=null;for(let be=0;;be++){if(be>Dt.MAX_NB_BITS)throw new b("Data too large for an Aztec code");if(x=be<=3,_=x?be+1:be,C=Dt.totalBitsInLayer(_,x),p>C)continue;(R==null||E!==Dt.WORD_SIZE[_])&&(E=Dt.WORD_SIZE[_],R=Dt.stuffBits(u,E));let At=C-C%E;if(!(x&&R.getSize()>E*64)&&R.getSize()+d<=At)break}}let B=Dt.generateCheckWords(R,C,E),Y=R.getSize()/E,Q=Dt.generateModeMessage(x,_,Y),ee=(x?11:14)+_*4,ie=new Int32Array(ee),le;if(x){le=ee;for(let be=0;be<ie.length;be++)ie[be]=be}else{le=ee+1+2*k.truncDivision(k.truncDivision(ee,2)-1,15);let be=k.truncDivision(ee,2),At=k.truncDivision(le,2);for(let pt=0;pt<be;pt++){let un=pt+k.truncDivision(pt,15);ie[be-pt-1]=At-un-1,ie[be+pt]=At+un+1}}let Ae=new we(le);for(let be=0,At=0;be<_;be++){let pt=(_-be)*4+(x?9:12);for(let un=0;un<pt;un++){let sr=un*2;for(let or=0;or<2;or++)B.get(At+sr+or)&&Ae.set(ie[be*2+or],ie[be*2+un]),B.get(At+pt*2+sr+or)&&Ae.set(ie[be*2+un],ie[ee-1-be*2-or]),B.get(At+pt*4+sr+or)&&Ae.set(ie[ee-1-be*2-or],ie[ee-1-be*2-un]),B.get(At+pt*6+sr+or)&&Ae.set(ie[ee-1-be*2-un],ie[be*2+or])}At+=pt*8}if(Dt.drawModeMessage(Ae,x,le,Q),x)Dt.drawBullsEye(Ae,k.truncDivision(le,2),5);else{Dt.drawBullsEye(Ae,k.truncDivision(le,2),7);for(let be=0,At=0;be<k.truncDivision(ee,2)-1;be+=15,At+=16)for(let pt=k.truncDivision(le,2)&1;pt<le;pt+=2)Ae.set(k.truncDivision(le,2)-At,pt),Ae.set(k.truncDivision(le,2)+At,pt),Ae.set(pt,k.truncDivision(le,2)-At),Ae.set(pt,k.truncDivision(le,2)+At)}let Ee=new Cl;return Ee.setCompact(x),Ee.setSize(le),Ee.setLayers(_),Ee.setCodeWords(Y),Ee.setMatrix(Ae),Ee}static drawBullsEye(r,s,l){for(let u=0;u<l;u+=2)for(let d=s-u;d<=s+u;d++)r.set(d,s-u),r.set(d,s+u),r.set(s-u,d),r.set(s+u,d);r.set(s-l,s-l),r.set(s-l+1,s-l),r.set(s-l,s-l+1),r.set(s+l,s-l),r.set(s+l,s-l+1),r.set(s+l,s+l-1)}static generateModeMessage(r,s,l){let u=new H;return r?(u.appendBits(s-1,2),u.appendBits(l-1,6),u=Dt.generateCheckWords(u,28,4)):(u.appendBits(s-1,5),u.appendBits(l-1,11),u=Dt.generateCheckWords(u,40,4)),u}static drawModeMessage(r,s,l,u){let d=k.truncDivision(l,2);if(s)for(let p=0;p<7;p++){let x=d-3+p;u.get(p)&&r.set(x,d-5),u.get(p+7)&&r.set(d+5,x),u.get(20-p)&&r.set(x,d+5),u.get(27-p)&&r.set(d-5,x)}else for(let p=0;p<10;p++){let x=d-5+p+k.truncDivision(p,5);u.get(p)&&r.set(x,d-7),u.get(p+10)&&r.set(d+7,x),u.get(29-p)&&r.set(x,d+7),u.get(39-p)&&r.set(d-7,x)}}static generateCheckWords(r,s,l){let u=r.getSize()/l,d=new bl(Dt.getGF(l)),p=k.truncDivision(s,l),x=Dt.bitsToWords(r,l,p);d.encode(x,p-u);let _=s%l,C=new H;C.appendBits(0,_);for(const E of Array.from(x))C.appendBits(E,l);return C}static bitsToWords(r,s,l){let u=new Int32Array(l),d,p;for(d=0,p=r.getSize()/s;d<p;d++){let x=0;for(let _=0;_<s;_++)x|=r.get(d*s+_)?1<<s-_-1:0;u[d]=x}return u}static getGF(r){switch(r){case 4:return ut.AZTEC_PARAM;case 6:return ut.AZTEC_DATA_6;case 8:return ut.AZTEC_DATA_8;case 10:return ut.AZTEC_DATA_10;case 12:return ut.AZTEC_DATA_12;default:throw new b("Unsupported word size "+r)}}static stuffBits(r,s){let l=new H,u=r.getSize(),d=(1<<s)-2;for(let p=0;p<u;p+=s){let x=0;for(let _=0;_<s;_++)(p+_>=u||r.get(p+_))&&(x|=1<<s-1-_);(x&d)===d?(l.appendBits(x&d,s),p--):x&d?l.appendBits(x,s):(l.appendBits(x|1,s),p--)}return l}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}Dt.DEFAULT_EC_PERCENT=33,Dt.DEFAULT_AZTEC_LAYERS=0,Dt.MAX_NB_BITS=32,Dt.MAX_NB_BITS_COMPACT=4,Dt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ls{encode(r,s,l,u){return this.encodeWithHints(r,s,l,u,null)}encodeWithHints(r,s,l,u,d){let p=xa.ISO_8859_1,x=Dt.DEFAULT_EC_PERCENT,_=Dt.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(gn.CHARACTER_SET)&&(p=gr.forName(d.get(gn.CHARACTER_SET).toString())),d.has(gn.ERROR_CORRECTION)&&(x=k.parseInt(d.get(gn.ERROR_CORRECTION).toString())),d.has(gn.AZTEC_LAYERS)&&(_=k.parseInt(d.get(gn.AZTEC_LAYERS).toString()))),Ls.encodeLayers(r,s,l,u,p,x,_)}static encodeLayers(r,s,l,u,d,p,x){if(s!==re.AZTEC)throw new b("Can only encode AZTEC, but got "+s);let _=Dt.encode(fe.getBytes(r,d),p,x);return Ls.renderResult(_,l,u)}static renderResult(r,s,l){let u=r.getMatrix();if(u==null)throw new In;let d=u.getWidth(),p=u.getHeight(),x=Math.max(s,d),_=Math.max(l,p),C=Math.min(x/d,_/p),E=(x-d*C)/2,R=(_-p*C)/2,B=new we(x,_);for(let Y=0,Q=R;Y<p;Y++,Q+=C)for(let ee=0,ie=E;ee<d;ee++,ie+=C)u.get(ee,Y)&&B.setRegion(ie,Q,C,C);return B}}n.AbstractExpandedDecoder=da,n.ArgumentException=S,n.ArithmeticException=en,n.AztecCode=Cl,n.AztecCodeReader=kn,n.AztecCodeWriter=Ls,n.AztecDecoder=Nt,n.AztecDetector=Lt,n.AztecDetectorResult=Oe,n.AztecEncoder=Dt,n.AztecHighLevelEncoder=Vi,n.AztecPoint=qe,n.BarcodeFormat=re,n.Binarizer=D,n.BinaryBitmap=T,n.BitArray=H,n.BitMatrix=we,n.BitSource=Ts,n.BrowserAztecCodeReader=Tt,n.BrowserBarcodeReader=No,n.BrowserCodeReader=Pe,n.BrowserDatamatrixCodeReader=xl,n.BrowserMultiFormatReader=iu,n.BrowserPDF417Reader=Fi,n.BrowserQRCodeReader=su,n.BrowserQRCodeSvgWriter=zi,n.CharacterSetECI=z,n.ChecksumException=I,n.Code128Reader=_e,n.Code39Reader=wt,n.DataMatrixDecodedBitStreamParser=pr,n.DataMatrixReader=Ht,n.DecodeHintType=G,n.DecoderResult=Et,n.DefaultGridSampler=dt,n.DetectorResult=q,n.EAN13Reader=Zt,n.EncodeHintType=gn,n.Exception=y,n.FormatException=Z,n.GenericGF=ut,n.GenericGFPoly=nt,n.GlobalHistogramBinarizer=Ce,n.GridSampler=Ye,n.GridSamplerInstance=_t,n.HTMLCanvasElementLuminanceSource=ge,n.HybridBinarizer=ke,n.ITFReader=ht,n.IllegalArgumentException=b,n.IllegalStateException=In,n.InvertedLuminanceSource=je,n.LuminanceSource=ue,n.MathUtils=yt,n.MultiFormatOneDReader=Bi,n.MultiFormatReader=ru,n.MultiFormatWriter=is,n.NotFoundException=ae,n.OneDReader=st,n.PDF417DecodedBitStreamParser=ce,n.PDF417DecoderErrorCorrection=fa,n.PDF417Reader=Fn,n.PDF417ResultMetadata=_l,n.PerspectiveTransform=Ze,n.PlanarYUVLuminanceSource=ni,n.QRCodeByteMatrix=Oo,n.QRCodeDataMask=Yn,n.QRCodeDecodedBitStreamParser=nn,n.QRCodeDecoderErrorCorrectionLevel=St,n.QRCodeDecoderFormatInformation=Gn,n.QRCodeEncoder=Jt,n.QRCodeEncoderQRCode=rs,n.QRCodeMaskUtil=cn,n.QRCodeMatrixUtil=et,n.QRCodeMode=Ke,n.QRCodeReader=jn,n.QRCodeVersion=Le,n.QRCodeWriter=Si,n.RGBLuminanceSource=ss,n.RSS14Reader=pn,n.RSSExpandedReader=ye,n.ReaderException=mr,n.ReedSolomonDecoder=rr,n.ReedSolomonEncoder=bl,n.ReedSolomonException=Dn,n.Result=ze,n.ResultMetadataType=Xe,n.ResultPoint=Ue,n.StringUtils=fe,n.UnsupportedOperationException=te,n.VideoInputDevice=Se,n.WhiteRectangleDetector=Qe,n.WriterException=qt,n.ZXingArrays=O,n.ZXingCharset=gr,n.ZXingInteger=k,n.ZXingStandardCharsets=xa,n.ZXingStringBuilder=Me,n.ZXingStringEncoding=me,n.ZXingSystem=P,n.createAbstractExpandedDecoder=Eo,Object.defineProperty(n,"__esModule",{value:!0})})})(n1,n1.exports);var xn=n1.exports;const F5=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var dy=function(){function e(t,n,i){if(this.formatMap=new Map([[He.QR_CODE,xn.BarcodeFormat.QR_CODE],[He.AZTEC,xn.BarcodeFormat.AZTEC],[He.CODABAR,xn.BarcodeFormat.CODABAR],[He.CODE_39,xn.BarcodeFormat.CODE_39],[He.CODE_93,xn.BarcodeFormat.CODE_93],[He.CODE_128,xn.BarcodeFormat.CODE_128],[He.DATA_MATRIX,xn.BarcodeFormat.DATA_MATRIX],[He.MAXICODE,xn.BarcodeFormat.MAXICODE],[He.ITF,xn.BarcodeFormat.ITF],[He.EAN_13,xn.BarcodeFormat.EAN_13],[He.EAN_8,xn.BarcodeFormat.EAN_8],[He.PDF_417,xn.BarcodeFormat.PDF_417],[He.RSS_14,xn.BarcodeFormat.RSS_14],[He.RSS_EXPANDED,xn.BarcodeFormat.RSS_EXPANDED],[He.UPC_A,xn.BarcodeFormat.UPC_A],[He.UPC_E,xn.BarcodeFormat.UPC_E],[He.UPC_EAN_EXTENSION,xn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!F5)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var a=this.createZXingFormats(t),c=new Map;c.set(xn.DecodeHintType.POSSIBLE_FORMATS,a),c.set(xn.DecodeHintType.TRY_HARDER,!1),this.hints=c}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(i,a){try{i(n.decode(t))}catch(c){a(c)}})},e.prototype.decode=function(t){var n=new xn.MultiFormatReader(this.verbose,this.hints),i=new xn.HTMLCanvasElementLuminanceSource(t),a=new xn.BinaryBitmap(new xn.HybridBinarizer(i)),c=n.decode(a);return{text:c.text,format:Db.create(this.toHtml5QrcodeSupportedFormats(c.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,a){t.set(n,i)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],i=0,a=t;i<a.length;i++){var c=a[i];this.formatMap.has(c)?n.push(this.formatMap.get(c)):this.logger.logError("".concat(c," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),z5=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(S){try{y(i.next(S))}catch(b){f(b)}}function v(S){try{y(i.throw(S))}catch(b){f(b)}}function y(S){S.done?c(S.value):a(S.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},U5=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(S){return v([y,S])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(S){y=[6,S],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},hy=function(){function e(t,n,i){if(this.formatMap=new Map([[He.QR_CODE,"qr_code"],[He.AZTEC,"aztec"],[He.CODABAR,"codabar"],[He.CODE_39,"code_39"],[He.CODE_93,"code_93"],[He.CODE_128,"code_128"],[He.DATA_MATRIX,"data_matrix"],[He.ITF,"itf"],[He.EAN_13,"ean_13"],[He.EAN_8,"ean_8"],[He.PDF_417,"pdf417"],[He.UPC_A,"upc_a"],[He.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return z5(this,void 0,void 0,function(){var n,i;return U5(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=a.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:Db.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,i=0,a=0,c=t;a<c.length;a++){var f=c[a],g=f.boundingBox.width*f.boundingBox.height;g>i&&(i=g,n=f)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],i=0,a=t;i<a.length;i++){var c=a[i];this.formatMap.has(c)?n.push(this.formatMap.get(c)):this.logger.warn("".concat(c," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,a){t.set(n,i)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),fy=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(S){try{y(i.next(S))}catch(b){f(b)}}function v(S){try{y(i.throw(S))}catch(b){f(b)}}function y(S){S.done?c(S.value):a(S.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},py=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(S){return v([y,S])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(S){y=[6,S],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},V5=function(){function e(t,n,i,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&hy.isSupported()?(this.primaryDecoder=new hy(t,i,a),this.secondaryDecoder=new dy(t,i,a)):this.primaryDecoder=new dy(t,i,a)}return e.prototype.decodeAsync=function(t){return fy(this,void 0,void 0,function(){var n;return py(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return fy(this,void 0,void 0,function(){var n,i;return py(this,function(a){switch(a.label){case 0:n=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,a.sent()];case 3:if(i=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,i=this.executionResults;n<i.length;n++){var a=i[n];t+=a}var c=t/this.executionResults.length;console.log("".concat(c," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),Hp=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Fd=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(S){try{y(i.next(S))}catch(b){f(b)}}function v(S){try{y(i.throw(S))}catch(b){f(b)}}function y(S){S.done?c(S.value):a(S.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},zd=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(S){return v([y,S])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(S){y=[6,S],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},zb=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var i={advanced:[n]};return this.track.applyConstraints(i)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e}(),H5=function(e){Hp(t,e);function t(n,i){return e.call(this,n,i)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var i={};i[this.name]=n;var a={advanced:[i]};return this.track.applyConstraints(a)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(zb),W5=function(e){Hp(t,e);function t(n){return e.call(this,"zoom",n)||this}return t}(H5),Z5=function(e){Hp(t,e);function t(n){return e.call(this,"torch",n)||this}return t}(zb),G5=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new W5(this.track)},e.prototype.torchFeature=function(){return new Z5(this.track)},e}(),Y5=function(){function e(t,n,i){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=t.surface.clientWidth,a=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(i,a),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,i,a){return Fd(this,void 0,void 0,function(){var c,f;return zd(this,function(g){switch(g.label){case 0:return c=new e(t,n,a),i.aspectRatio?(f={aspectRatio:i.aspectRatio},[4,c.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:g.sent(),g.label=2;case 2:return c.setupSurface(),[2,c]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,i=function(){setTimeout(t,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Fd(this,void 0,void 0,function(){return zd(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,i){var a=t.mediaStream.getVideoTracks(),c=a.length,f=0;t.mediaStream.getVideoTracks().forEach(function(g){t.mediaStream.removeTrack(g),g.stop(),++f,f>=c&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new G5(this.getFirstTrackOrFail())},e}(),X5=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,i){return Fd(this,void 0,void 0,function(){return zd(this,function(a){return[2,Y5.create(t,this.mediaStream,n,i)]})})},e.create=function(t){return Fd(this,void 0,void 0,function(){var n,i;return zd(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=a.sent(),[2,new e(i)]}})})},e}(),my=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(S){try{y(i.next(S))}catch(b){f(b)}}function v(S){try{y(i.throw(S))}catch(b){f(b)}}function y(S){S.done?c(S.value):a(S.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},gy=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(S){return v([y,S])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(S){y=[6,S],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},q5=function(){function e(){}return e.failIfNotSupported=function(){return my(this,void 0,void 0,function(){return gy(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return my(this,void 0,void 0,function(){return gy(this,function(n){return[2,X5.create(t)]})})},e}(),K5=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(S){try{y(i.next(S))}catch(b){f(b)}}function v(S){try{y(i.throw(S))}catch(b){f(b)}}function y(S){S.done?c(S.value):a(S.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},Q5=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(S){return v([y,S])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(S){y=[6,S],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},$5=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Fa.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Fa.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return K5(this,void 0,void 0,function(){var t,n,i,a,c,f,g;return Q5(this,function(v){switch(v.label){case 0:return t=function(y){for(var S=y.getVideoTracks(),b=0,T=S;b<T.length;b++){var I=T[b];I.enabled=!1,I.stop(),y.removeTrack(I)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=v.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=v.sent(),a=[],c=0,f=i;c<f.length;c++)g=f[c],g.kind==="videoinput"&&a.push({id:g.deviceId,label:g.label});return t(n),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var i=function(c){for(var f=[],g=0,v=c;g<v.length;g++){var y=v[g];y.kind==="video"&&f.push({id:y.id,label:y.label})}t(f)},a=MediaStreamTrack;a.getSources(i)})},e}(),bn;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(bn||(bn={}));var J5=function(){function e(){this.state=bn.NOT_STARTED,this.onGoingTransactionNewState=bn.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===bn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=bn.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===bn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=bn.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==bn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case bn.UNKNOWN:throw"Transition from unknown is not allowed";case bn.NOT_STARTED:this.failIfNewStateIs(t,[bn.PAUSED]);break;case bn.SCANNING:break;case bn.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var i=0,a=n;i<a.length;i++){var c=a[i];if(t===c)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),ek=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===bn.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==bn.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===bn.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===bn.PAUSED},e}(),tk=function(){function e(){}return e.create=function(){return new ek(new J5)},e}(),nk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),zr=function(e){nk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(ki),rk=function(){function e(t,n){this.logger=n,this.fps=zr.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=zr.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Fb.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Gi(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),xy=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new Bb(this.verbose),this.qrcode=new V5(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=tk.create()}return e.prototype.start=function(t,n,i,a){var c=this;if(!t)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;a?f=a:f=this.verbose?this.logger.log:function(){};var g=rk.create(n,this.logger);this.clearElement();var v=!1;g.videoConstraints&&(g.isMediaStreamConstraintsValid()?v=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var y=v,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:zr.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var b=this,T=this.stateManagerProxy.startTransition(bn.SCANNING);return new Promise(function(I,D){var P=y?g.videoConstraints:b.createVideoConstraints(t);if(!P){T.cancel(),D("videoConstraints should be defined");return}var U={};(!y||g.aspectRatio)&&(U.aspectRatio=g.aspectRatio);var V={onRenderSurfaceReady:function(O,k){b.setupUi(O,k,g),b.isScanning=!0,b.foreverScan(g,i,f)}};q5.failIfNotSupported().then(function(O){O.create(P).then(function(k){return k.render(c.element,U,V).then(function(H){b.renderedCamera=H,T.execute(),I(null)}).catch(function(H){T.cancel(),D(H)})}).catch(function(k){T.cancel(),D(Fa.errorGettingUserMedia(k))})}).catch(function(O){T.cancel(),D(Fa.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(bn.PAUSED),this.showPausedState(),(Gi(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(bn.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(bn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(t.element){var c=document.getElementById(zr.SHADED_REGION_ELEMENT_ID);c&&t.element.removeChild(c)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),i(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),n.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(i){return i.decodedText})},e.prototype.scanFileV2=function(t,n){var i=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Gi(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,c){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(t);var f=new Image;f.onload=function(){var g=f.width,v=f.height,y=document.getElementById(i.elementId),S=y.clientWidth?y.clientWidth:zr.DEFAULT_WIDTH,b=Math.max(y.clientHeight?y.clientHeight:v,zr.FILE_SCAN_MIN_HEIGHT),T=i.computeCanvasDrawConfig(g,v,S,b);if(n){var I=i.createCanvasElement(S,b,"qr-canvas-visible");I.style.display="inline-block",y.appendChild(I);var D=I.getContext("2d");if(!D)throw"Unable to get 2d context from canvas";D.canvas.width=S,D.canvas.height=b,D.drawImage(f,0,0,g,v,T.x,T.y,T.width,T.height)}var P=zr.FILE_SCAN_HIDDEN_CANVAS_PADDING,U=Math.max(f.width,T.width),V=Math.max(f.height,T.height),O=U+2*P,k=V+2*P,H=i.createCanvasElement(O,k);y.appendChild(H);var X=H.getContext("2d");if(!X)throw"Unable to get 2d context from canvas";X.canvas.width=O,X.canvas.height=k,X.drawImage(f,0,0,g,v,P,P,U,V);try{i.qrcode.decodeRobustlyAsync(H).then(function(G){a(cy.createFromQrcodeResult(G))}).catch(c)}catch(G){c("QR code parse error, error = ".concat(G))}},f.onerror=c,f.onabort=c,f.onstalled=c,f.onsuspend=c,f.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return $5.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!Fb.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[He.QR_CODE,He.AZTEC,He.CODABAR,He.CODE_39,He.CODE_93,He.CODE_128,He.DATA_MATRIX,He.MAXICODE,He.ITF,He.EAN_13,He.EAN_8,He.PDF_417,He.RSS_14,He.RSS_EXPANDED,He.UPC_A,He.UPC_E,He.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],a=0,c=t.formatsToSupport;a<c.length;a++){var f=c[a];j5(f)?i.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Gi(t))return!0;if(!Gi(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Gi(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return Gi(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,i){var a=this,c=i.qrbox;this.validateQrboxConfig(c);var f=this.toQrdimensions(t,n,c),g=function(y){if(y<zr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(zr.MIN_QR_BOX_SIZE,"px.")},v=function(y){return y>t&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),y=t),y};g(f.width),g(f.height),f.width=v(f.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(t,n)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return i},e.prototype.setupUi=function(t,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,i);var a=Gi(i.qrbox)?{width:t,height:n}:i.qrbox;this.validateQrboxConfig(a);var c=this.toQrdimensions(t,n,a);c.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=i.isShadedBoxEnabled()&&c.height<=n,g={x:0,y:0,width:t,height:n},v=f?this.getShadedRegionBounds(t,n,c):g,y=this.createCanvasElement(v.width,v.height),S={willReadFrequently:!0},b=y.getContext("2d",S);b.canvas.width=v.width,b.canvas.height=v.height,this.element.append(y),f&&this.possiblyInsertShadingElement(this.element,t,n,c),this.createScannerPausedUiElement(this.element),this.qrRegion=v,this.context=b,this.canvasElement=y},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=Fa.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return t(a.text,cy.createFromQrcodeResult(a)),i.possiblyUpdateShaders(!0),!0}).catch(function(a){i.possiblyUpdateShaders(!1);var c=Fa.codeParseError(a);return n(c,jb.createFrom(c)),!1})},e.prototype.foreverScan=function(t,n,i){var a=this;if(this.shouldScan&&this.renderedCamera){var c=this.renderedCamera.getSurface(),f=c.videoWidth/c.clientWidth,g=c.videoHeight/c.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var v=this.qrRegion.width*f,y=this.qrRegion.height*g,S=this.qrRegion.x*f,b=this.qrRegion.y*g;this.context.drawImage(c,S,b,v,y,0,0,this.qrRegion.width,this.qrRegion.height);var T=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(t,n,i)},a.getTimeoutFps(t.fps))};this.scanContext(n,i).then(function(I){!I&&t.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(n,i).finally(function(){T()})):T()}).catch(function(I){a.logger.logError("Error happend while scanning context",I),T()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",i="deviceId",a={user:!0,environment:!0},c="exact",f=function(D){if(D in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(D,"'")},g=Object.keys(t);if(g.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(g.length," keys");var v=Object.keys(t)[0];if(v!==n&&v!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(v===n){var y=t.facingMode;if(typeof y=="string"){if(f(y))return{facingMode:y}}else if(typeof y=="object")if(c in y){if(f(y["".concat(c)]))return{facingMode:{exact:y["".concat(c)]}}}else throw"'facingMode' should be string or object with"+" ".concat(c," as key.");else{var S=typeof y;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var b=t.deviceId;if(typeof b=="string")return{deviceId:b};if(typeof b=="object"){if(c in b)return{deviceId:{exact:b["".concat(c)]}};throw"'deviceId' should be string or object with"+" ".concat(c," as key.")}else{var T=typeof b;throw"Invalid type of 'deviceId' = ".concat(T)}}}var I=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(I)},e.prototype.computeCanvasDrawConfig=function(t,n,i,a){if(t<=i&&n<=a){var c=(i-t)/2,f=(a-n)/2;return{x:c,y:f,width:t,height:n}}else{var g=t,v=n;return t>i&&(n=i/t*n,t=i),n>a&&(t=a/n*t,n=a),this.logger.log("Image downsampled from "+"".concat(g,"X").concat(v)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,i,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?zr.BORDER_SHADER_MATCH_COLOR:zr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,i){var a=t,c=n,f=document.createElement("canvas");return f.style.width="".concat(a,"px"),f.style.height="".concat(c,"px"),f.style.display="none",f.id=Gi(i)?"qr-canvas":i,f},e.prototype.getShadedRegionBounds=function(t,n,i){if(i.width>t||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},e.prototype.possiblyInsertShadingElement=function(t,n,i,a){if(!(n-a.width<1||i-a.height<1)){var c=document.createElement("div");c.style.position="absolute";var f=(n-a.width)/2,g=(i-a.height)/2;if(c.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderTop="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderBottom="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),c.style.boxSizing="border-box",c.style.top="0px",c.style.bottom="0px",c.style.left="0px",c.style.right="0px",c.id="".concat(zr.SHADED_REGION_ELEMENT_ID),n-a.width<11||i-a.height<11)this.hasBorderShaders=!1;else{var v=5,y=40;this.insertShaderBorders(c,y,v,-v,null,0,!0),this.insertShaderBorders(c,y,v,-v,null,0,!1),this.insertShaderBorders(c,y,v,null,-v,0,!0),this.insertShaderBorders(c,y,v,null,-v,0,!1),this.insertShaderBorders(c,v,y+v,-v,null,-v,!0),this.insertShaderBorders(c,v,y+v,null,-v,-v,!0),this.insertShaderBorders(c,v,y+v,-v,null,-v,!1),this.insertShaderBorders(c,v,y+v,null,-v,-v,!1),this.hasBorderShaders=!0}t.append(c)}},e.prototype.insertShaderBorders=function(t,n,i,a,c,f,g){var v=document.createElement("div");v.style.position="absolute",v.style.backgroundColor=zr.BORDER_SHADER_DEFAULT_COLOR,v.style.width="".concat(n,"px"),v.style.height="".concat(i,"px"),a!==null&&(v.style.top="".concat(a,"px")),c!==null&&(v.style.bottom="".concat(c,"px")),g?v.style.left="".concat(f,"px"):v.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(v),t.appendChild(v)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),Wp="data:image/svg+xml;base64,",ik=Wp+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",sk=Wp+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",yy=Wp+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",ok="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",wy=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),ak=function(){function e(){this.data=wy.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=wy.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),lk=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=uy.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var i=document.createElement("br"),a=document.createElement("br");this.infoDiv.appendChild(i),this.infoDiv.appendChild(a);var c=document.createElement("a");c.innerText=uy.reportIssues(),c.href="https://github.com/mebjas/html5-qrcode/issues",c.target="new",c.style.color="white",this.infoDiv.appendChild(c),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),ck=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=yy,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(i){return n.onHoverIn()},this.infoIcon.onmouseout=function(i){return n.onHoverOut()},this.infoIcon.onclick=function(i){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=ok,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=yy,this.infoIcon.style.opacity="0.6")},e}(),uk=function(){function e(){var t=this;this.infoDiv=new lk,this.infoIcon=new ck(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}(),dk=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(S){try{y(i.next(S))}catch(b){f(b)}}function v(S){try{y(i.throw(S))}catch(b){f(b)}}function y(S){S.done?c(S.value):a(S.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},hk=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(S){return v([y,S])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(S){y=[6,S],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},vy=function(){function e(){}return e.hasPermissions=function(){return dk(this,void 0,void 0,function(){var t,n,i,a;return hk(this,function(c){switch(c.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=c.sent(),n=0,i=t;n<i.length;n++)if(a=i[n],a.kind==="videoinput"&&a.label)return[2,!0];return[2,!1]}})})},e}(),Fs=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var i=n[t];if(e.isCameraScanType(i))return!0}return!1},e.isCameraScanType=function(t){return t===xo.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===xo.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return ki.DEFAULT_SUPPORTED_SCAN_TYPE;var n=ki.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var i=0,a=t;i<a.length;i++){var c=a[i];if(!ki.DEFAULT_SUPPORTED_SCAN_TYPE.includes(c))throw"Unsupported scan type ".concat(c)}return t},e}(),Wr=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),ps=function(){function e(){}return e.createElement=function(t,n){var i=document.createElement(t);return i.id=n,i.classList.add(Wr.ALL_ELEMENT_CLASS),t==="button"&&i.setAttribute("type","button"),i},e}(),Ub=function(e,t,n,i){function a(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function g(S){try{y(i.next(S))}catch(b){f(b)}}function v(S){try{y(i.throw(S))}catch(b){f(b)}}function y(S){S.done?c(S.value):a(S.value).then(g,v)}y((i=i.apply(e,t||[])).next())})},Vb=function(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,f;return f={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function g(y){return function(S){return v([y,S])}}function v(y){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(S){y=[6,S],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},_y=function(){function e(t,n,i){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=i}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return Ub(this,void 0,void 0,function(){var t,n;return Vb(this,function(i){switch(i.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return i.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=i.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?Kt.torchOffButton():Kt.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var i=t?Kt.torchOnFailedMessage():Kt.torchOffFailedMessage();n&&(i+="; Error = "+n),this.onTorchActionFailureCallback(i)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),fk=function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=ps.createElement("button",Wr.TORCH_BUTTON_ID),this.torchController=new _y(t,this,n)}return e.prototype.render=function(t,n){var i=this;this.torchButton.innerText=Kt.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var a=this;this.torchButton.addEventListener("click",function(c){return Ub(i,void 0,void 0,function(){return Vb(this,function(f){switch(f.label){case 0:return[4,a.torchController.flipState()];case 1:return f.sent(),a.torchController.isTorchEnabled()?(a.torchButton.classList.remove(Wr.TORCH_BUTTON_CLASS_TORCH_OFF),a.torchButton.classList.add(Wr.TORCH_BUTTON_CLASS_TORCH_ON)):(a.torchButton.classList.remove(Wr.TORCH_BUTTON_CLASS_TORCH_ON),a.torchButton.classList.add(Wr.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new _y(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=Kt.torchOnButton(),this.torchController.reset()},e.create=function(t,n,i,a){var c=new e(n,a);return c.render(t,i),c},e}(),pk=function(){function e(t,n,i){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var a=document.createElement("label");a.setAttribute("for",this.getFileScanInputId()),a.style.display="inline-block",this.fileBasedScanRegion.appendChild(a),this.fileSelectionButton=ps.createElement("button",Wr.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(g){a.click()}),a.append(this.fileSelectionButton),this.fileScanInput=ps.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",a.appendChild(this.fileScanInput);var c=this;this.fileScanInput.addEventListener("change",function(g){if(!(g==null||g.target==null)){var v=g.target;if(!(v.files&&v.files.length===0)){var y=v.files,S=y[0],b=S.name;c.setImageNameToButton(b),i(S)}}});var f=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(f),this.fileBasedScanRegion.addEventListener("dragenter",function(g){c.fileBasedScanRegion.style.border=c.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(g){c.fileBasedScanRegion.style.border=c.fileBasedScanRegionDefaultBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(g){c.fileBasedScanRegion.style.border=c.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(g){g.stopPropagation(),g.preventDefault(),c.fileBasedScanRegion.style.border=c.fileBasedScanRegionDefaultBorder();var v=g.dataTransfer;if(v){var y=v.files;if(!y||y.length===0)return;for(var S=!1,b=0;b<y.length;++b){var T=y.item(b);if(T){var I=/image.*/;if(T.type.match(I)){S=!0;var D=T.name;c.setImageNameToButton(D),i(T),f.innerText=Kt.dragAndDropMessage();break}}}S||(f.innerText=Kt.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=Kt.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var n=20;if(t.length>n){var i=t.substring(0,8),a=t.length,c=t.substring(a-8,a);t="".concat(i,"....").concat(c)}var f=Kt.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=f},e.prototype.setInitialValueToButton=function(){var t=Kt.fileSelectionChooseImage()+" - "+Kt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,i){var a=new e(t,n,i);return a},e}(),mk=function(){function e(t){this.selectElement=ps.createElement("select",Wr.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var i=this.cameras.length;if(i===0)throw new Error("No cameras found");if(i===1)n.style.display="none";else{var a=Kt.selectCamera();n.innerText="".concat(a," (").concat(this.cameras.length,")  ")}for(var c=1,f=0,g=this.cameras;f<g.length;f++){var v=g[f],y=v.id,S=v.label==null?y:v.label;(!S||S==="")&&(S=[Kt.anonymousCameraPrefix(),c++].join(" "));var b=document.createElement("option");b.value=y,b.innerText=S,this.options.push(b),this.selectElement.appendChild(b)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,i=this.options;n<i.length;n++){var a=i[n];if(a.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var i=new e(n);return i.render(t),i},e}(),gk=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=ps.createElement("input",Wr.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var i=Kt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(i),this.rangeText.style.marginRight="10px";var a=this;this.rangeInput.addEventListener("input",function(){return a.onValueChange()}),this.rangeInput.addEventListener("change",function(){return a.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=Kt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,i,a){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=a.toString(),this.rangeInput.value=i.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var i=new e;return i.render(t,n),i},e}(),Ur;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ur||(Ur={}));function xk(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function yk(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var wk=function(){function e(t,n,i){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=i===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new Fs(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Bb(this.verbose),this.persistedDataManager=new ak,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var i=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(c,f){if(t)t(c,f);else{if(i.lastMatchFound===c)return;i.lastMatchFound=c,i.setHeaderMessage(Kt.lastMatch(c),Ur.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(c,f){n&&n(c,f)};var a=document.getElementById(this.elementId);if(!a)throw"HTML Element with id=".concat(this.elementId," not found");a.innerHTML="",this.createBasicLayout(a),this.html5Qrcode=new xy(this.getScanRegionId(),yk(this.config,this.verbose))},e.prototype.pause=function(t){(Gi(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var i=document.getElementById(t.elementId);i&&(i.innerHTML="",t.resetBasicLayout(i))};return this.html5Qrcode?new Promise(function(i,a){if(!t.html5Qrcode){i();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(c){if(!t.html5Qrcode){i();return}t.html5Qrcode.clear(),n(),i()}).catch(function(c){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",c),a(c)}):(t.html5Qrcode.clear(),n(),i())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=ki.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!ki.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=ki.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=ki.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:ki.SCAN_DEFAULT_FPS,rememberLastUsedCamera:ki.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:ki.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),i=this.getScanRegionId();n.id=i,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),Fs.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var a=document.createElement("div"),c=this.getDashboardId();a.id=c,a.style.width="100%",t.appendChild(a),this.setupInitialDashboard(a)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n);var i=new uk;i.renderInto(n);var a=document.createElement("div");a.id=this.getHeaderMessageContainerId(),a.style.display="none",a.style.textAlign="center",a.style.fontSize="14px",a.style.padding="2px 10px",a.style.margin="4px",a.style.borderTop="1px solid #f6f6f6",n.appendChild(a)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,i){var a=this;a.showHideScanTypeSwapLink(!1),a.setHeaderMessage(Kt.cameraPermissionRequesting());var c=function(){i||a.createPermissionButton(t,n)};xy.getCameras().then(function(f){a.persistedDataManager.setHasPermission(!0),a.showHideScanTypeSwapLink(!0),a.resetHeaderMessage(),f&&f.length>0?(t.removeChild(n),a.renderCameraSelection(f)):(a.setHeaderMessage(Kt.noCameraFound(),Ur.STATUS_WARNING),c())}).catch(function(f){a.persistedDataManager.setHasPermission(!1),i?i.disabled=!1:c(),a.setHeaderMessage(f,Ur.STATUS_WARNING),a.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var i=this,a=ps.createElement("button",this.getCameraPermissionButtonId());a.innerText=Kt.cameraPermissionTitle(),a.addEventListener("click",function(){a.disabled=!0,i.createCameraListUi(t,n,a)}),n.appendChild(a)},e.prototype.createPermissionsUi=function(t,n){var i=this;if(Fs.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){vy.hasPermissions().then(function(a){a?i.createCameraListUi(t,n):(i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,n))}).catch(function(a){i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,n)});return}this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var i=document.createElement("div");i.id=this.getDashboardSectionCameraScanRegionId(),i.style.display=Fs.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(i);var a=document.createElement("div");a.style.textAlign="center",i.appendChild(a),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(i,a),this.renderFileScanUi(n)},e.prototype.renderFileScanUi=function(t){var n=Fs.isFileScanType(this.currentScanType),i=this,a=function(c){if(!i.html5Qrcode)throw"html5Qrcode not defined";Fs.isFileScanType(i.currentScanType)&&(i.setHeaderMessage(Kt.loadingImage()),i.html5Qrcode.scanFileV2(c,!0).then(function(f){i.resetHeaderMessage(),i.qrCodeSuccessCallback(f.decodedText,f)}).catch(function(f){i.setHeaderMessage(f,Ur.STATUS_WARNING),i.qrCodeErrorCallback(f,jb.createFrom(f))}))};this.fileSelectionUi=pk.create(t,n,a)},e.prototype.renderCameraSelection=function(t){var n=this,i=this,a=document.getElementById(this.getDashboardSectionCameraScanRegionId());a.style.textAlign="center";var c=gk.create(a,!1),f=function(P){var U=P.zoomFeature();if(U.isSupported()){c.setOnCameraZoomValueChangeCallback(function(O){U.apply(O)});var V=1;n.config.defaultZoomValueIfSupported&&(V=n.config.defaultZoomValueIfSupported),V=B5(V,U.min(),U.max()),c.setValues(U.min(),U.max(),V,U.step()),c.show()}},g=mk.create(a,t),v=document.createElement("span"),y=ps.createElement("button",Wr.CAMERA_START_BUTTON_ID);y.innerText=Kt.scanButtonStartScanningText(),v.appendChild(y);var S=ps.createElement("button",Wr.CAMERA_STOP_BUTTON_ID);S.innerText=Kt.scanButtonStopScanningText(),S.style.display="none",S.disabled=!0,v.appendChild(S);var b,T=function(P){if(!P.torchFeature().isSupported()){b&&b.hide();return}b?b.updateTorchCapability(P.torchFeature()):b=fk.create(v,P.torchFeature(),{display:"none",marginLeft:"5px"},function(U){i.setHeaderMessage(U,Ur.STATUS_WARNING)}),b.show()};a.appendChild(v);var I=function(P){P||(y.style.display="none"),y.innerText=Kt.scanButtonStartScanningText(),y.style.opacity="1",y.disabled=!1,P&&(y.style.display="inline-block")};if(y.addEventListener("click",function(P){y.innerText=Kt.scanButtonScanningStarting(),g.disable(),y.disabled=!0,y.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!1),i.resetHeaderMessage();var U=g.getValue();i.persistedDataManager.setLastUsedCameraId(U),i.html5Qrcode.start(U,xk(i.config),i.qrCodeSuccessCallback,i.qrCodeErrorCallback).then(function(V){S.disabled=!1,S.style.display="inline-block",I(!1);var O=i.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&T(O),n.config.showZoomSliderIfSupported===!0&&f(O)}).catch(function(V){i.showHideScanTypeSwapLink(!0),g.enable(),I(!0),i.setHeaderMessage(V,Ur.STATUS_WARNING)})}),g.hasSingleItem()&&y.click(),S.addEventListener("click",function(P){if(!i.html5Qrcode)throw"html5Qrcode not defined";S.disabled=!0,i.html5Qrcode.stop().then(function(U){n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!0),g.enable(),y.disabled=!1,S.style.display="none",y.style.display="inline-block",b&&(b.reset(),b.hide()),c.removeOnCameraZoomValueChangeCallback(),c.hide(),i.insertCameraScanImageToScanRegion()}).catch(function(U){S.disabled=!1,i.setHeaderMessage(U,Ur.STATUS_WARNING)})}),i.persistedDataManager.getLastUsedCameraId()){var D=i.persistedDataManager.getLastUsedCameraId();g.hasValue(D)?(g.setValue(D),y.click()):i.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=Kt.textIfCameraScanSelected(),i=Kt.textIfFileScanSelected(),a=document.getElementById(this.getDashboardSectionId()),c=document.createElement("div");c.style.textAlign="center";var f=ps.createElement("span",this.getDashboardSectionSwapLinkId());f.style.textDecoration="underline",f.style.cursor="pointer",f.innerText=Fs.isCameraScanType(this.currentScanType)?n:i,f.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,Fs.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),f.innerText=i,t.currentScanType=xo.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),f.innerText=n,t.currentScanType=xo.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),c.appendChild(f),a.appendChild(c)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){vy.hasPermissions().then(function(i){if(i){var a=document.getElementById(n.getCameraPermissionButtonId());if(!a)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";a.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(i){n.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=Ur.STATUS_DEFAULT);var i=this.getHeaderMessageDiv();switch(i.innerText=t,i.style.display="block",n){case Ur.STATUS_SUCCESS:i.style.background="rgba(106, 175, 80, 0.26)",i.style.color="#477735";break;case Ur.STATUS_WARNING:i.style.background="rgba(203, 36, 49, 0.14)",i.style.color="#cb2431";break;case Ur.STATUS_DEFAULT:default:i.style.background="rgba(0, 0, 0, 0)",i.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=ik,this.cameraScanImage.alt=Kt.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=sk,this.fileScanImage.alt=Kt.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return Wr.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return Wr.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();function vk({onScan:e,onClose:t}){const[n,i]=j.useState(""),[a,c]=j.useState("camera");j.useEffect(()=>{if(a==="camera"){const g=new wk("reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1});return g.render(v=>{g.clear(),e(v)},v=>{}),()=>{g.clear()}}},[a,e]);const f=g=>{g.preventDefault(),n.trim()&&e(n.trim())};return m.jsxs("div",{className:"fixed inset-0 bg-black/90 z-50 flex flex-col pt-safe",children:[m.jsxs("div",{className:"flex justify-between items-center p-4 text-white",children:[m.jsx("h2",{className:"text-lg font-bold",children:"Scan AWB Barcode"}),m.jsx("button",{onClick:t,className:"p-2",children:m.jsx(Zc,{})})]}),m.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:a==="camera"?m.jsx("div",{id:"reader",className:"w-full max-w-sm rounded-xl overflow-hidden bg-gray-800 border-2 border-primary-500"}):m.jsxs("form",{onSubmit:f,className:"w-full max-w-sm space-y-4",children:[m.jsx("input",{autoFocus:!0,className:"w-full p-4 rounded-xl bg-gray-800 text-white border border-gray-700 outline-none focus:border-primary-500 text-center text-2xl tracking-widest",placeholder:"ENTER AWB #",value:n,onChange:g=>i(g.target.value.toUpperCase())}),m.jsx("button",{className:"w-full py-4 bg-primary-600 text-white rounded-xl font-bold",children:"Submit Manually"})]})}),m.jsxs("div",{className:"p-8 flex justify-center gap-4",children:[m.jsxs("button",{onClick:()=>c("camera"),className:`p-4 rounded-full flex items-center gap-2 ${a==="camera"?"bg-primary-600 text-white":"bg-gray-800 text-gray-400"}`,children:[m.jsx(_I,{size:24})," ",m.jsx("span",{children:"Camera"})]}),m.jsxs("button",{onClick:()=>c("manual"),className:`p-4 rounded-full flex items-center gap-2 ${a==="manual"?"bg-primary-600 text-white":"bg-gray-800 text-gray-400"}`,children:[m.jsx(II,{size:24})," ",m.jsx("span",{children:"Manual"})]})]})]})}function hl(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function _k(e,t){let n;const i=()=>{if(n)return n;const a=indexedDB.open(e);return a.onupgradeneeded=()=>a.result.createObjectStore(t),n=hl(a),n.then(c=>{c.onclose=()=>n=void 0},()=>{}),n};return(a,c)=>i().then(f=>c(f.transaction(t,a).objectStore(t)))}let kf;function Ch(){return kf||(kf=_k("keyval-store","keyval")),kf}function bk(e,t=Ch()){return t("readonly",n=>hl(n.get(e)))}function Hb(e,t,n=Ch()){return n("readwrite",i=>(i.put(t,e),hl(i.transaction)))}function Ck(e,t=Ch()){return t("readwrite",n=>(n.delete(e),hl(n.transaction)))}function Sk(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},hl(e.transaction)}function Wb(e=Ch()){return e("readonly",t=>{if(t.getAllKeys)return hl(t.getAllKeys());const n=[];return Sk(t,i=>n.push(i.key)).then(()=>n)})}const Zp=async(e,t,n={})=>{const i=`${e}-${t}-${Date.now()}`,a={id:i,awb:e,event_id:t,payload:n,timestamp:new Date().toISOString(),status:"pending"};return await Hb(`queue-${i}`,a),a},Gp=async()=>{const t=(await Wb()).filter(i=>i.startsWith("queue-"));return(await Promise.all(t.map(i=>bk(i)))).sort((i,a)=>new Date(a.timestamp)-new Date(i.timestamp))},Zb=async e=>{const n=(await Gp()).filter(i=>i.status==="pending");for(const i of n)try{await bh(e,{awb:i.awb,event_id:i.event_id,timestamp:i.timestamp,payload:i.payload}),i.status="synced",await Hb(`queue-${i.id}`,i)}catch(a){console.error("Sync failed for item",i.id,a)}},Ak=async()=>{const e=await Wb(),t=(Array.isArray(e)?e:[]).filter(n=>String(n).startsWith("queue-"));return await Promise.all(t.map(n=>Ck(n))),t.length},Ek=Object.freeze(Object.defineProperty({__proto__:null,clearQueue:Ak,getQueue:Gp,queueItem:Zp,syncQueue:Zb},Symbol.toStringTag,{value:"Module"}));function Nk({awb:e,onBack:t,onComplete:n}){var G,Z,J,z,te,me,fe,Me,we,ae,Ce,ke,ue,je,ge,Se,Be;const[i,a]=j.useState([]),[c,f]=j.useState(null),[g,v]=j.useState(!0),[y,S]=j.useState(!0),[b,T]=j.useState(null),[I,D]=j.useState(!1),[P,U]=j.useState(""),[V,O]=j.useState("");j.useEffect(()=>{let Pe=!1;const ze=localStorage.getItem("token");return v(!0),U(""),Ab(ze).then($=>{Pe||a($)}).catch(()=>{Pe||U("Failed to load status options")}).finally(()=>{Pe||v(!1)}),S(!0),O(""),T(null),Bd(ze,e,{refresh:!0}).then($=>{Pe||T($)}).catch($=>{var Ie,Xe;if(Pe)return;const re=(Xe=(Ie=$==null?void 0:$.response)==null?void 0:Ie.data)==null?void 0:Xe.detail;O(re?String(re):"Failed to load shipment details")}).finally(()=>{Pe||S(!1)}),()=>{Pe=!0}},[e]);const k=async()=>{var Pe,ze;S(!0),O("");try{const $=localStorage.getItem("token"),re=await Bd($,e,{refresh:!0});T(re)}catch($){const re=(ze=(Pe=$==null?void 0:$.response)==null?void 0:Pe.data)==null?void 0:ze.detail;O(re?String(re):"Failed to load shipment details")}finally{S(!1)}},H=(Pe,ze="RON")=>{if(Pe==null||Pe==="")return"--";const $=Number(Pe);return Number.isFinite($)?`${$.toFixed(2)} ${String(ze||"RON").toUpperCase()}`:"--"},X=async()=>{var Pe,ze,$,re,Ie,Xe,Et,Vt;if(c){D(!0);try{const nt=localStorage.getItem("token"),en=(b==null?void 0:b.locality)||((ze=(Pe=b==null?void 0:b.raw_data)==null?void 0:Pe.recipientLocation)==null?void 0:ze.locality)||((re=($=b==null?void 0:b.raw_data)==null?void 0:$.recipientLocation)==null?void 0:re.localityName)||"",ut=en?{locality:en}:void 0;await bh(nt,{awb:e,event_id:c,timestamp:new Date().toISOString(),payload:ut}),n("SUCCESS")}catch{const nt=(b==null?void 0:b.locality)||((Xe=(Ie=b==null?void 0:b.raw_data)==null?void 0:Ie.recipientLocation)==null?void 0:Xe.locality)||((Vt=(Et=b==null?void 0:b.raw_data)==null?void 0:Et.recipientLocation)==null?void 0:Vt.localityName)||"";await Zp(e,c,nt?{locality:nt}:void 0),n("QUEUED")}finally{D(!1)}}};return m.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[m.jsxs("div",{className:"p-4 flex items-center gap-4 bg-white dark:bg-gray-800 shadow-sm",children:[m.jsx("button",{onClick:t,className:"p-2 -ml-2 text-gray-600",children:m.jsx(go,{})}),m.jsxs("div",{children:[m.jsx("h1",{className:"font-bold text-gray-900 dark:text-white",children:"Update AWB"}),m.jsx("p",{className:"text-xs text-primary-600 font-mono tracking-wider",children:e})]})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[m.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Shipment"}),m.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white truncate",children:y?"Loading details...":(b==null?void 0:b.recipient_name)||"--"}),b!=null&&b.awb&&String(b.awb).toUpperCase()!==String(e||"").toUpperCase()?m.jsxs("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-mono mt-1",children:["Resolved AWB: ",String(b.awb).toUpperCase()]}):null]}),m.jsx("button",{type:"button",onClick:k,disabled:y,className:"p-2 rounded-xl border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 disabled:opacity-50",title:"Refresh shipment details","aria-label":"Refresh shipment details",children:m.jsx(Qi,{size:16,className:y?"animate-spin":""})})]}),V?m.jsx("div",{className:"mt-3 p-3 bg-amber-100 text-amber-800 rounded-xl text-xs font-bold",children:V}):null,b?m.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"col-span-2",children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Address"}),m.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-200",children:b.delivery_address||b.locality||"--"})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Phone"}),m.jsx("p",{className:"text-sm font-mono text-gray-900 dark:text-white truncate",children:b.recipient_phone||"--"})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Content"}),m.jsx("p",{className:"text-sm text-gray-900 dark:text-white truncate",children:b.content_description||((G=b==null?void 0:b.raw_data)==null?void 0:G.contentDescription)||((Z=b==null?void 0:b.raw_data)==null?void 0:Z.contents)||((J=b==null?void 0:b.raw_data)==null?void 0:J.content)||((z=b==null?void 0:b.raw_data)==null?void 0:z.packageContent)||((te=b==null?void 0:b.raw_data)==null?void 0:te.shipmentContent)||((me=b==null?void 0:b.raw_data)==null?void 0:me.goodsDescription)||((Me=(fe=b==null?void 0:b.raw_data)==null?void 0:fe.additionalServices)==null?void 0:Me.contentDescription)||((ae=(we=b==null?void 0:b.raw_data)==null?void 0:we.additionalServices)==null?void 0:ae.contents)||((ke=(Ce=b==null?void 0:b.raw_data)==null?void 0:Ce.additionalServices)==null?void 0:ke.content)||((je=(ue=b==null?void 0:b.raw_data)==null?void 0:ue.productCategory)==null?void 0:je.name)||(typeof((ge=b==null?void 0:b.raw_data)==null?void 0:ge.productCategory)=="string"?b.raw_data.productCategory:"")||"--"})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"COD"}),m.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:H(b.cod_amount,b.currency||"RON")})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-500 dark:text-gray-400",children:"Parcels"}),m.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:Number.isFinite(Number(b.number_of_parcels))?Number(b.number_of_parcels):((Se=b==null?void 0:b.raw_data)==null?void 0:Se.numberOfDistinctBarcodes)||((Be=b==null?void 0:b.raw_data)==null?void 0:Be.numberOfParcels)||1})]})]}):null]}),g?m.jsx("div",{className:"flex justify-center p-8",children:m.jsx(Qn,{className:"animate-spin text-primary-500"})}):P?m.jsxs("div",{className:"p-4 bg-red-100 text-red-700 rounded-xl flex items-center gap-3",children:[m.jsx(E_,{size:20})," ",P]}):i.map(Pe=>m.jsxs("button",{onClick:()=>f(Pe.event_id),className:`w-full p-4 rounded-2xl text-left border-2 transition-all ${c===Pe.event_id?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-white dark:border-gray-800 bg-white dark:bg-gray-800"}`,children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:Pe.label}),c===Pe.event_id&&m.jsx(I_,{className:"text-primary-500",size:20})]}),m.jsx("p",{className:"text-sm text-gray-500",children:Pe.description})]},Pe.event_id))]}),m.jsx("div",{className:"p-4 bg-white dark:bg-gray-800 shadow-up",children:m.jsx("button",{disabled:!c||I,onClick:X,className:"w-full py-4 bg-primary-600 disabled:opacity-50 text-white rounded-xl font-bold flex items-center justify-center gap-2",children:I?m.jsx(Qn,{className:"animate-spin"}):"Confirm Status Update"})})]})}function by(){const[e,t]=j.useState(!1),[n,i]=j.useState(null),[a,c]=j.useState(null),[f,g]=j.useState(""),v=Qr(),{user:y}=Ar();j.useEffect(()=>{const H=localStorage.getItem("token");H&&Zb(H);const X=new Date().getHours();X<12?g("Good Morning"):X<18?g("Good Afternoon"):g("Good Evening")},[]);const S=H=>{const X=String(H||"").trim().toUpperCase();X&&(i(X),t(!1))},b=H=>{c({awb:n,outcome:H}),i(null),setTimeout(()=>c(null),3e3)};if(n)return m.jsx(Nk,{awb:n,onBack:()=>i(null),onComplete:b});const T=Vn(y,Vo),I=Vn(y,Tr),D=Vn(y,uo),P=Vn(y,Ti),U=Vn(y,di),V=String((y==null?void 0:y.role)||"")==="Recipient",O={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},k={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return m.jsxs(tt.div,{initial:"hidden",animate:"visible",exit:{opacity:0,y:-20},variants:O,className:"flex flex-col min-h-screen relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-violet-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"0s"}}),m.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"3s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-glow-md animate-float",children:m.jsx("span",{className:"text-white font-black italic tracking-tighter text-xl",children:"AN"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-lg font-black text-gradient leading-none",children:"AryNik"}),m.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[m.jsxs("span",{className:"relative flex h-2 w-2",children:[m.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),m.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]}),m.jsx("span",{className:"text-[10px] font-bold text-emerald-400 uppercase tracking-widest",children:"Online"})]})]})]}),m.jsx("button",{type:"button",onClick:()=>v("/settings"),className:"w-10 h-10 rounded-full glass-light flex items-center justify-center border border-white/10 hover:bg-white/10 transition-colors","aria-label":"Account",title:"Account",children:m.jsx(ua,{size:18,className:"text-violet-300"})})]}),m.jsxs("main",{className:"flex-1 p-6 space-y-8 pb-32 relative z-10",children:[m.jsxs(tt.div,{variants:k,children:[m.jsx("h2",{className:"text-3xl font-black text-white mb-1",children:f}),m.jsxs("p",{className:"text-slate-400 font-medium",children:[(y==null?void 0:y.name)||(y==null?void 0:y.username)||"Driver","  ",V?"Recipient Tracking":y!=null&&y.truck_plate?`Truck ${String(y.truck_plate).toUpperCase()}`:"Truck Unassigned"]}),!V&&(y!=null&&y.truck_phone)?m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-1",children:["Truck phone: ",y.truck_phone]}):null,V?m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-1",children:["Login: ",(y==null?void 0:y.username)||"--"]}):null]}),P?m.jsx(tt.div,{variants:k,children:m.jsx(D5,{})}):null,a&&m.jsxs(tt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`p-4 rounded-2xl flex items-center gap-4 shadow-lg ${a.outcome==="SUCCESS"?"bg-gradient-to-r from-emerald-500 to-emerald-600 shadow-emerald-500/20":"bg-gradient-to-r from-violet-500 to-purple-600 shadow-violet-500/20"}`,children:[m.jsx("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-sm",children:m.jsx(Qu,{size:20,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("span",{className:"font-black text-sm uppercase tracking-wide text-white",children:["Update ",a.outcome==="SUCCESS"?"Confirmed":"Queued"]}),m.jsx("p",{className:"text-xs font-bold text-white/80",children:a.awb})]})]}),m.jsxs(tt.div,{variants:k,className:"space-y-4",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Quick Actions"}),T?m.jsxs(tt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(!0),className:"w-full py-12 bg-gradient-to-br from-violet-600 via-purple-600 to-violet-700 rounded-[32px] shadow-glow-lg flex flex-col items-center justify-center text-white space-y-5 relative overflow-hidden group",children:[m.jsx("div",{className:"absolute inset-0 shimmer opacity-30"}),m.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-white/10 rounded-full blur-3xl -ml-12 -mb-12"}),m.jsx("div",{className:"p-6 bg-white/10 rounded-3xl backdrop-blur-sm border border-white/20 group-hover:scale-110 group-hover:rotate-3 transition-all duration-500 shadow-inner-glow",children:m.jsx(LI,{size:52,strokeWidth:1.5,className:"animate-glow"})}),m.jsxs("div",{className:"text-center relative z-10",children:[m.jsx("h2",{className:"text-2xl font-black uppercase tracking-tight",children:"Scan Package"}),m.jsxs("p",{className:"text-violet-100 text-xs font-bold opacity-90 uppercase tracking-widest mt-1 flex items-center justify-center gap-2",children:[m.jsx(F_,{size:12}),"Tap to open scanner"]})]})]}):m.jsxs(tt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v("/shipments"),className:"w-full py-10 bg-gradient-to-br from-emerald-600 via-emerald-700 to-emerald-800 rounded-[32px] shadow-glow-lg flex flex-col items-center justify-center text-white space-y-4 relative overflow-hidden group",disabled:!I,children:[m.jsx("div",{className:"absolute inset-0 shimmer opacity-25"}),m.jsx("div",{className:"p-5 bg-white/10 rounded-3xl backdrop-blur-sm border border-white/20 group-hover:scale-110 group-hover:-rotate-2 transition-all duration-500 shadow-inner-glow",children:m.jsx(nl,{size:44,strokeWidth:1.5})}),m.jsxs("div",{className:"text-center relative z-10",children:[m.jsx("h2",{className:"text-xl font-black uppercase tracking-tight",children:"Browse Shipments"}),m.jsxs("p",{className:"text-emerald-100 text-xs font-bold opacity-90 uppercase tracking-widest mt-1 flex items-center justify-center gap-2",children:[m.jsx(Dd,{size:12}),"View tracking list"]})]})]}),I&&m.jsxs(tt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v("/shipments"),className:"w-full p-5 glass-strong rounded-[28px] shadow-lg flex items-center gap-4 text-left group border-iridescent",children:[m.jsx("div",{className:"p-4 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-[20px] group-hover:shadow-glow-sm transition-all duration-300",children:m.jsx(nl,{size:24,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("h3",{className:"font-black text-white uppercase text-sm tracking-tight flex items-center gap-2",children:["Search Shipments",m.jsx("span",{className:"text-[8px] bg-emerald-500/20 text-emerald-400 px-2 py-0.5 rounded-full font-bold",children:"LIVE"})]}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-0.5 flex items-center gap-1",children:[m.jsx(Dd,{size:10}),"Real-time tracking"]})]}),m.jsx("div",{className:"w-10 h-10 rounded-full glass-light flex items-center justify-center group-hover:translate-x-1 transition-transform border border-white/10",children:m.jsx(lo,{className:"text-slate-400",size:18})})]}),U&&m.jsxs(tt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v("/notifications"),className:"w-full p-5 glass-strong rounded-[28px] shadow-lg flex items-center gap-4 text-left group border-iridescent",children:[m.jsx("div",{className:"p-4 bg-gradient-to-br from-amber-500 to-orange-600 rounded-[20px] group-hover:shadow-glow-sm transition-all duration-300",children:m.jsx(Lc,{size:24,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"font-black text-white uppercase text-sm tracking-tight",children:"Notifications"}),m.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-0.5",children:"Allocation updates"})]}),m.jsx("div",{className:"w-10 h-10 rounded-full glass-light flex items-center justify-center group-hover:translate-x-1 transition-transform border border-white/10",children:m.jsx(lo,{className:"text-slate-400",size:18})})]}),D&&m.jsxs(tt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v("/users"),className:"w-full p-5 glass-strong rounded-[28px] shadow-lg flex items-center gap-4 text-left group border-iridescent",children:[m.jsx("div",{className:"p-4 bg-gradient-to-br from-violet-500 to-purple-600 rounded-[20px] group-hover:shadow-glow-sm transition-all duration-300",children:m.jsx(Y0,{size:24,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("h3",{className:"font-black text-white uppercase text-sm tracking-tight flex items-center gap-2",children:["Manage Users",m.jsx("span",{className:"text-[8px] bg-violet-500/20 text-violet-300 px-2 py-0.5 rounded-full font-bold",children:"RBAC"})]}),m.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-0.5",children:"Create accounts and set roles"})]}),m.jsx("div",{className:"w-10 h-10 rounded-full glass-light flex items-center justify-center group-hover:translate-x-1 transition-transform border border-white/10",children:m.jsx(lo,{className:"text-slate-400",size:18})})]})]})]}),e&&m.jsx(vk,{onScan:S,onClose:()=>t(!1)})]})}const Tk="modulepreload",Ik=function(e){return"/arynik1/"+e},Cy={},Gb=function(t,n,i){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),g=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));a=Promise.allSettled(n.map(v=>{if(v=Ik(v),v in Cy)return;Cy[v]=!0;const y=v.endsWith(".css"),S=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${S}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":Tk,y||(b.as="script"),b.crossOrigin="",b.href=v,g&&b.setAttribute("nonce",g),document.head.appendChild(b),y)return new Promise((T,I)=>{b.addEventListener("load",T),b.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${v}`)))})}))}function c(f){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=f,window.dispatchEvent(g),!g.defaultPrevented)throw f}return a.then(f=>{for(const g of f||[])g.status==="rejected"&&c(g.reason);return t().catch(c)})};function kk(){const[e,t]=j.useState(""),[n,i]=j.useState(""),[a,c]=j.useState(!1),[f,g]=j.useState(""),{login:v}=Ar(),y=Qr(),S=async b=>{var T,I;b.preventDefault(),g(""),c(!0);try{const{login:D}=await Gb(async()=>{const{login:U}=await Promise.resolve().then(()=>I5);return{login:U}},void 0),P=await D(e,n);if(P&&P.access_token)await v(P.access_token,P.role),y("/");else throw new Error("Invalid response from server")}catch(D){console.error("Login error:",D),g(((I=(T=D.response)==null?void 0:T.data)==null?void 0:I.detail)||D.message||"Invalid credentials. Please try again.")}finally{c(!1)}};return m.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center p-4",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-600/20 via-purple-600/10 to-pink-600/20 animate-pulse-slow"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-blue-600/10 via-transparent to-emerald-600/10"}),[...Array(20)].map((b,T)=>m.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*8}s`,animationDuration:`${8+Math.random()*4}s`}},T)),m.jsx("div",{className:"absolute top-10 left-20 w-72 h-72 bg-violet-500/30 rounded-full blur-3xl animate-float",style:{animationDelay:"0s"}}),m.jsx("div",{className:"absolute bottom-20 right-10 w-80 h-80 bg-pink-500/20 rounded-full blur-3xl animate-float",style:{animationDelay:"4s"}}),m.jsx("div",{className:"absolute top-40 right-40 w-60 h-60 bg-blue-500/20 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"relative z-10 w-full max-w-md animate-scale-in",children:[m.jsxs("div",{className:"text-center mb-8 animate-slide-down",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-violet-500 to-purple-600 rounded-3xl shadow-glow-md mb-4 animate-float",children:m.jsx(D_,{className:"w-10 h-10 text-white"})}),m.jsx("h1",{className:"text-4xl font-black text-gradient mb-2 tracking-tight",children:"AryNik Driver"}),m.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Welcome back, let's get started"})]}),m.jsxs("form",{onSubmit:S,className:"glass-strong rounded-3xl p-8 border-iridescent space-y-6 relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"}),m.jsxs("div",{className:"relative",children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(ua,{size:14,className:"text-violet-400"}),"Username"]}),m.jsx("input",{type:"text",value:e,onChange:b=>t(b.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-violet-500/50 focus:ring-2 focus:ring-violet-500/20 transition-all duration-300",placeholder:"Enter your username",required:!0,autoFocus:!0})]}),m.jsxs("div",{className:"relative",children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(R_,{size:14,className:"text-violet-400"}),"Password"]}),m.jsx("input",{type:"password",value:n,onChange:b=>i(b.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-violet-500/50 focus:ring-2 focus:ring-violet-500/20 transition-all duration-300",placeholder:"Enter your password",required:!0})]}),f&&m.jsx("div",{className:"bg-rose-500/10 border border-rose-500/30 text-rose-400 px-4 py-3 rounded-xl text-sm font-medium animate-slide-down",children:f}),m.jsx("button",{type:"submit",disabled:a,className:"btn-premium w-full py-4 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-glow-md hover:shadow-glow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 text-sm uppercase tracking-wider magnetic",children:a?m.jsxs(m.Fragment,{children:[m.jsx(Qn,{className:"animate-spin",size:20}),"Authenticating..."]}):m.jsxs(m.Fragment,{children:[m.jsx(kI,{size:20}),"Login to Dashboard"]})}),m.jsxs("p",{className:"text-center text-xs text-slate-500 mt-4",children:["Demo: ",m.jsx("span",{className:"text-violet-400 font-mono",children:"demo / demo"})]}),m.jsx("button",{type:"button",onClick:()=>y("/signup"),className:"w-full py-3 rounded-xl bg-emerald-500/10 border border-emerald-500/20 text-emerald-200 font-black uppercase tracking-wider text-xs hover:bg-emerald-500/15 transition-all",children:"Recipient: Create tracking account"})]}),m.jsx("p",{className:"text-center text-xs text-slate-600 mt-6",children:"Secure driver authentication  AryNik  2026"})]})]})}function Mk(){const e=Qr(),{login:t}=Ar(),[n,i]=j.useState(""),[a,c]=j.useState(""),[f,g]=j.useState(""),[v,y]=j.useState(""),[S,b]=j.useState(!1),[T,I]=j.useState(""),D=async P=>{var U,V;P.preventDefault(),I(""),b(!0);try{const O=await wb({awb:String(n||"").trim(),phone:String(a||"").trim(),password:String(f||""),name:String(v||"").trim()||void 0});if(O!=null&&O.access_token)await t(O.access_token,O.role),e("/shipments",{replace:!0});else throw new Error("Invalid response from server")}catch(O){I(((V=(U=O==null?void 0:O.response)==null?void 0:U.data)==null?void 0:V.detail)||(O==null?void 0:O.message)||"Failed to create account")}finally{b(!1)}};return m.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center p-4",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-600/15 via-slate-950 to-violet-600/10"}),m.jsx("div",{className:"absolute top-10 left-10 w-72 h-72 bg-emerald-500/20 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-20 right-10 w-80 h-80 bg-violet-500/15 rounded-full blur-3xl animate-float",style:{animationDelay:"3s"}}),m.jsxs("div",{className:"relative z-10 w-full max-w-md",children:[m.jsxs("button",{type:"button",onClick:()=>e("/login"),className:"mb-4 inline-flex items-center gap-2 text-slate-300 hover:text-white text-xs font-black uppercase tracking-widest",children:[m.jsx(go,{size:16}),"Back to login"]}),m.jsxs("div",{className:"glass-strong rounded-3xl p-8 border-iridescent space-y-6 relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-emerald-500 to-emerald-700 rounded-3xl shadow-glow-md mb-4",children:m.jsx(Fx,{className:"w-8 h-8 text-white"})}),m.jsx("h1",{className:"text-2xl font-black text-white tracking-tight",children:"Track Your Delivery"}),m.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider mt-2",children:"Create an account using your AWB"})]}),m.jsxs("form",{onSubmit:D,className:"space-y-4 relative",children:[m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(Fx,{size:14,className:"text-emerald-400"}),"AWB"]}),m.jsx("input",{value:n,onChange:P=>i(P.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 font-mono",placeholder:"e.g. AWB1234567",required:!0,autoFocus:!0})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(Ld,{size:14,className:"text-emerald-400"}),"WhatsApp Number"]}),m.jsx("input",{value:a,onChange:P=>c(P.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300",placeholder:"+40 712 345 678",required:!0})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(R_,{size:14,className:"text-emerald-400"}),"Password"]}),m.jsx("input",{type:"password",value:f,onChange:P=>g(P.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300",placeholder:"Choose a password",required:!0})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-slate-400 mb-2 flex items-center gap-2",children:[m.jsx(ua,{size:14,className:"text-emerald-400"}),"Name (Optional)"]}),m.jsx("input",{value:v,onChange:P=>y(P.target.value),className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300",placeholder:"Your name"})]}),T&&m.jsx("div",{className:"bg-rose-500/10 border border-rose-500/30 text-rose-400 px-4 py-3 rounded-xl text-sm font-medium",children:T}),m.jsx("button",{type:"submit",disabled:S,className:"btn-premium w-full py-4 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white font-bold rounded-xl shadow-glow-md hover:shadow-glow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 text-sm uppercase tracking-wider",children:S?m.jsxs(m.Fragment,{children:[m.jsx(Qn,{className:"animate-spin",size:20}),"Creating..."]}):"Create Account"})]}),m.jsx("p",{className:"text-center text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:"Already have an account? Use your phone number as username on the login screen."})]})]})]})}function Rk(){const[e,t]=j.useState([]),[n,i]=j.useState(!0),[a,c]=j.useState(!1),[f,g]=j.useState("delivered"),v=Qr(),y=async(k=!1)=>{k?c(!0):i(!0);try{const H=await Gp();let X=[];try{const J=localStorage.getItem("token");X=(await Bp(J,{limit:2e3})).map(te=>({...te,id:te.id,status:"synced",label:te.event_id}))}catch{console.log("Could not fetch server logs, showing local only")}let G=new Map;try{const J=localStorage.getItem("token"),z=await Qc(J);(Array.isArray(z)?z:[]).forEach(te=>{const me=String((te==null?void 0:te.awb)||"").toUpperCase();me&&G.set(me,te)})}catch{}const Z=[...H,...X].sort((J,z)=>new Date(z.timestamp)-new Date(J.timestamp));t(Z.map(J=>{const z=String((J==null?void 0:J.awb)||"").toUpperCase(),te=G.get(z),me=(te==null?void 0:te.raw_data)||{},fe=(me==null?void 0:me.client)||(me==null?void 0:me.clientData)||{},Me=(me==null?void 0:me.senderLocation)||{},we=String((te==null?void 0:te.sender_shop_name)||(fe==null?void 0:fe.name)||(fe==null?void 0:fe.clientName)||(Me==null?void 0:Me.name)||(Me==null?void 0:Me.shopName)||"").trim()||null;return{...J,payment_amount:(te==null?void 0:te.payment_amount)??(te==null?void 0:te.shipping_cost)??(te==null?void 0:te.estimated_shipping_cost)??null,currency:(te==null?void 0:te.currency)||"RON",client_name:we}}))}finally{i(!1),c(!1)}};j.useEffect(()=>{y()},[]);const S=k=>k==="synced"?{bg:"bg-emerald-500/20",text:"text-emerald-400",border:"border-emerald-500/30",icon:Qu,label:"Synced"}:{bg:"bg-violet-500/20",text:"text-violet-400",border:"border-violet-500/30",icon:ku,label:"Pending"},b=e.filter(k=>k.status==="synced").length,T=e.filter(k=>k.status!=="synced").length,I=e.filter(k=>k.status==="synced"&&String(k.event_id||"")==="2"),D=I.length,P=I.reduce((k,H)=>{const X=Number(H==null?void 0:H.payment_amount);return Number.isFinite(X)?k+X:k},0),U=f==="delivered"?e.filter(k=>String(k.event_id||"")==="2"):e,V={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},O={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0}};return m.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-20 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"px-4 py-4 flex items-center justify-between glass-strong sticky top-0 z-30 backdrop-blur-xl border-b border-white/10 animate-slide-down",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("button",{onClick:()=>v(-1),className:"p-2 -ml-2 rounded-xl glass-light text-slate-300 hover:text-white transition-colors border border-white/10",children:m.jsx(go,{size:20})}),m.jsxs("div",{children:[m.jsx("h1",{className:"font-black text-lg text-gradient tracking-tight",children:"Update History"}),m.jsx("p",{className:"text-xs text-slate-500 font-medium mt-0.5",children:"Recent activity timeline"})]})]}),m.jsx("button",{onClick:()=>y(!0),className:`p-2.5 rounded-xl glass-light hover:bg-violet-500/20 text-violet-400 transition-all border border-white/10 ${a?"animate-spin":""}`,children:m.jsx(Qi,{size:20})})]}),m.jsxs("div",{className:"p-4 space-y-3 relative z-10",children:[m.jsxs("div",{className:"flex glass-strong p-1 rounded-xl border border-white/10 w-fit",children:[m.jsx("button",{onClick:()=>g("delivered"),className:`px-3 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${f==="delivered"?"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:"Delivered"}),m.jsx("button",{onClick:()=>g("all"),className:`px-3 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${f==="all"?"bg-gradient-to-r from-violet-600 to-purple-600 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:"All"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs(tt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"glass-strong p-4 rounded-2xl border-iridescent",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:m.jsx(Qu,{size:14,className:"text-emerald-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Synced"})]}),m.jsx("p",{className:"text-2xl font-black text-gradient-blue",children:b})]}),m.jsxs(tt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},className:"glass-strong p-4 rounded-2xl border-iridescent",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-2 bg-violet-500/20 rounded-lg",children:m.jsx(ku,{size:14,className:"text-violet-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Pending"})]}),m.jsx("p",{className:"text-2xl font-black text-gradient-purple",children:T})]}),m.jsxs(tt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"glass-strong p-4 rounded-2xl border-iridescent",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:m.jsx(Qu,{size:14,className:"text-emerald-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Delivered"})]}),m.jsx("p",{className:"text-2xl font-black text-gradient-blue",children:D})]}),m.jsxs(tt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"glass-strong p-4 rounded-2xl border-iridescent",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"p-2 bg-amber-500/20 rounded-lg",children:m.jsx(CI,{size:14,className:"text-amber-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Pay (RON)"})]}),m.jsx("p",{className:"text-2xl font-black text-gradient-purple",children:P.toFixed(2)})]})]})]}),m.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-32 relative z-10",children:n?m.jsxs("div",{className:"text-center py-20",children:[m.jsxs("div",{className:"relative inline-block",children:[m.jsx("div",{className:"absolute inset-0 bg-violet-500/20 blur-xl rounded-full animate-pulse"}),m.jsx(As,{className:"animate-spin relative z-10 text-violet-400 mx-auto",size:48})]}),m.jsx("p",{className:"mt-6 text-sm font-bold text-slate-500 uppercase tracking-wide",children:"Loading history..."})]}):U.length===0?m.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(ku,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No recent updates"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Your activity will appear here"})]}):m.jsx(tt.div,{variants:V,initial:"hidden",animate:"visible",className:"space-y-3 py-2",children:U.map((k,H)=>{const X=S(k.status),G=X.icon,Z=Number(k==null?void 0:k.payment_amount);return m.jsxs(tt.div,{variants:O,className:"glass-strong p-5 rounded-2xl border border-white/10 relative overflow-hidden group hover:border-violet-500/30 transition-all",children:[H<e.length-1&&m.jsx("div",{className:"absolute left-11 top-full w-0.5 h-3 bg-gradient-to-b from-white/10 to-transparent"}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx("div",{className:`flex-shrink-0 w-12 h-12 ${X.bg} rounded-2xl flex items-center justify-center border ${X.border}`,children:m.jsx(G,{size:20,className:X.text,strokeWidth:2.5})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex justify-between items-start mb-2",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs font-mono text-slate-500 tracking-wider",children:k.awb}),m.jsx("h3",{className:"font-bold text-white mt-1",children:k.event_id||k.label}),k.client_name&&m.jsx("p",{className:"text-[10px] text-slate-400 font-bold mt-1 truncate",children:k.client_name})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[Number.isFinite(Z)&&m.jsxs("span",{className:"text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border bg-amber-500/15 text-amber-300 border-amber-500/20",children:[Z.toFixed(2)," ",String((k==null?void 0:k.currency)||"RON").toUpperCase()]}),m.jsx("span",{className:`text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border ${X.bg} ${X.text} ${X.border}`,children:X.label})]})]}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-medium flex items-center gap-1.5",children:[m.jsx(ku,{size:10}),new Date(k.timestamp).toLocaleString()]}),k.error_message&&m.jsxs("div",{className:"mt-3 px-3 py-2 bg-red-500/10 border border-red-500/20 rounded-xl flex items-start gap-2",children:[m.jsx(E_,{size:14,className:"text-red-400 mt-0.5 flex-shrink-0"}),m.jsx("p",{className:"text-xs text-red-400 font-medium",children:k.error_message})]})]})]})]},H)})})})]})}const Yb="arynik_warehouse_origin_v1",Sy=e=>{const t=Number(e);return!Number.isFinite(t)||Math.abs(t)<1e-4?null:t},_a={lat:Sy(void 0)??46.5667,lon:Sy(void 0)??26.9167,label:"Warehouse (Bacau)"},Ok=e=>{try{return localStorage.getItem(e)}catch{return null}},Lk=(e,t)=>{try{return localStorage.setItem(e,t),!0}catch{return!1}},Xb=(e,t)=>Number.isFinite(Number(e))&&Number.isFinite(Number(t))&&Math.abs(Number(e))>1e-4&&Math.abs(Number(t))>1e-4,Ud=()=>{if(typeof window>"u")return _a;const e=Ok(Yb);if(!e)return _a;try{const t=JSON.parse(e),n=Number(t==null?void 0:t.lat),i=Number(t==null?void 0:t.lon);return Xb(n,i)?{lat:n,lon:i,label:String((t==null?void 0:t.label)||_a.label||"Warehouse")}:_a}catch{return _a}},Pk=({lat:e,lon:t,label:n}={})=>{const i=Number(e),a=Number(t);return Xb(i,a)?Lk(Yb,JSON.stringify({lat:i,lon:a,label:String(n||_a.label||"Warehouse"),ts:Date.now()})):!1};function Dk(){const{user:e,logout:t}=Ar(),n=Qr(),[i,a]=j.useState($t()),[c,f]=j.useState(()=>{const Z=Ud();return{label:String((Z==null?void 0:Z.label)||""),lat:String((Z==null?void 0:Z.lat)??""),lon:String((Z==null?void 0:Z.lon)??"")}}),[g,v]=j.useState(""),[y,S]=j.useState(!1),[b,T]=j.useState(""),I=Vn(e,uo),D=()=>{t(),n("/login",{replace:!0})},P=()=>{yb(i),window.location.reload()},U=()=>{const Z=Pk({label:c.label,lat:c.lat,lon:c.lon});v(Z?"Warehouse origin saved.":"Invalid warehouse coordinates."),setTimeout(()=>v(""),2500)},V=async()=>{var me;if(!window.confirm(`Clear cached data on this device?

This removes:
- Offline queue (pending updates)
- Local route allocations
- Geocode cache
- Service worker caches

You will stay signed in.`))return;S(!0),T("");let J=0,z=0;try{const{clearQueue:fe}=await Gb(async()=>{const{clearQueue:Me}=await Promise.resolve().then(()=>Ek);return{clearQueue:Me}},void 0);J=await fe()}catch{}if(["arynik_geocode_cache_v1","arynik_routes_v1","arynik_demo_logs_v1","arynik_demo_shipments_v1","arynik_last_vehicle_plate_v1","arynik_warehouse_origin_v1"].forEach(fe=>{try{localStorage.removeItem(fe)}catch{}}),typeof window<"u"&&"caches"in window)try{const fe=await caches.keys();await Promise.all(fe.map(Me=>caches.delete(Me))),z=fe.length}catch{}if((me=navigator==null?void 0:navigator.serviceWorker)!=null&&me.getRegistrations)try{const fe=await navigator.serviceWorker.getRegistrations();await Promise.all(fe.map(Me=>Me.unregister()))}catch{}T(`Cleared ${z} cache(s) and ${J} queued update(s). Reloading...`),setTimeout(()=>{window.location.reload()},600)},O=[{title:"Preferences",items:[{icon:Lc,label:"Notifications",value:"Enabled",color:"violet"},{icon:AI,label:"Language",value:"English",color:"emerald"},{icon:RI,label:"Dark Mode",value:"Auto",color:"amber"}]},{title:"Account",items:[{icon:jI,label:"Security",value:null,color:"violet"},...I?[{icon:B_,label:"Manage Users",value:null,color:"emerald",onClick:()=>n("/users")}]:[],{icon:Pd,label:"Clear Cache",value:y?"Working":null,color:"slate",onClick:()=>{y||V()}},{icon:TI,label:"App Info",value:"v1.0.0",color:"slate"}]}],k=Z=>{const J={violet:"bg-violet-500/20",emerald:"bg-emerald-500/20",amber:"bg-amber-500/20",slate:"bg-slate-500/20"};return J[Z]||J.slate},H=Z=>{const J={violet:"text-violet-400",emerald:"text-emerald-400",amber:"text-amber-400",slate:"text-slate-400"};return J[Z]||J.slate},X={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},G={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return m.jsxs(tt.div,{initial:"hidden",animate:"visible",exit:{opacity:0,y:-20},variants:X,className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-600 via-purple-600 to-violet-700"}),m.jsx("div",{className:"absolute inset-0 shimmer opacity-20"}),m.jsxs("header",{className:"relative z-10 px-6 pt-6 pb-4",children:[m.jsx("h1",{className:"text-xl font-black text-white uppercase tracking-tight mb-1",children:"Settings"}),m.jsx("p",{className:"text-sm text-violet-100 font-medium",children:"Manage your preferences"})]}),m.jsxs("div",{className:"relative z-10 px-8 pb-8 flex flex-col items-center",children:[m.jsx(tt.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:15},className:"w-28 h-28 bg-gradient-to-br from-white/20 to-white/10 backdrop-blur-xl rounded-[32px] shadow-2xl flex items-center justify-center text-white mb-5 border-4 border-white/30 animate-float",children:m.jsx(ua,{size:56,strokeWidth:1.5})}),m.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight mb-2",children:(e==null?void 0:e.username)||"Driver"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-[10px] font-black bg-white/20 backdrop-blur-sm text-white px-3 py-1.5 rounded-full uppercase tracking-widest border border-white/30",children:(e==null?void 0:e.role)||"Carrier"}),m.jsxs("span",{className:"text-[10px] font-bold text-violet-200 uppercase tracking-widest",children:["ID: ",(e==null?void 0:e.driver_id)||"N/A"]})]})]})]}),m.jsxs("div",{className:"flex-1 p-4 space-y-6 pb-32 relative z-10 -mt-6",children:[m.jsxs(tt.div,{variants:G,className:"space-y-3",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Connection"}),m.jsxs("div",{className:"glass-strong rounded-2xl overflow-hidden border-iridescent p-4 space-y-3",children:[m.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"API Base URL"}),m.jsx("input",{value:i,onChange:Z=>a(Z.target.value),placeholder:"https://YOUR-BACKEND",className:"w-full px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-violet-500/50 focus:ring-2 focus:ring-violet-500/20 transition-all duration-300 text-sm font-medium"}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-medium leading-relaxed",children:["Tip: on GitHub Pages (HTTPS), your backend must be HTTPS. You can also set via URL: ",m.jsx("span",{className:"font-mono text-slate-400",children:"?api=https://YOUR-BACKEND"})]}),m.jsx("button",{onClick:P,className:"w-full btn-premium py-3 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white rounded-xl font-bold shadow-lg hover:shadow-glow-md transition-all text-sm uppercase tracking-wider",children:"Apply API URL"})]})]}),m.jsxs(tt.div,{variants:G,className:"space-y-3",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Warehouse"}),m.jsxs("div",{className:"glass-strong rounded-2xl overflow-hidden border-iridescent p-4 space-y-3",children:[m.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Routing Origin (Used For KM/Routes)"}),m.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[m.jsx("input",{value:c.label,onChange:Z=>f(J=>({...J,label:Z.target.value})),placeholder:"Warehouse (Bacau)",className:"col-span-3 px-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium"}),m.jsx("input",{value:c.lat,onChange:Z=>f(J=>({...J,lat:Z.target.value})),placeholder:"Latitude",className:"px-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium font-mono"}),m.jsx("input",{value:c.lon,onChange:Z=>f(J=>({...J,lon:Z.target.value})),placeholder:"Longitude",className:"px-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium font-mono"}),m.jsx("button",{onClick:U,className:"btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white rounded-xl font-bold shadow-lg hover:shadow-glow-md transition-all text-sm uppercase tracking-wider",children:"Save Warehouse"})]}),g&&m.jsx("div",{className:"glass-light p-3 rounded-xl border border-emerald-500/20 text-emerald-200 text-xs font-bold",children:g}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium leading-relaxed",children:"Driver GPS is still shown on the map, but routing always starts from this warehouse origin."})]})]}),O.map((Z,J)=>m.jsxs(tt.div,{variants:G,className:"space-y-3",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:Z.title}),m.jsx("div",{className:"glass-strong rounded-2xl overflow-hidden border-iridescent",children:Z.items.map((z,te)=>{const me=z.icon;return m.jsxs("button",{type:"button",onClick:()=>z.onClick&&z.onClick(),disabled:y&&z.label==="Clear Cache",className:`w-full p-4 flex items-center gap-4 hover:bg-white/5 transition-all group ${te<Z.items.length-1?"border-b border-white/5":""}`,children:[m.jsx("div",{className:`p-3 ${k(z.color)} rounded-xl group-hover:scale-110 transition-transform`,children:y&&z.label==="Clear Cache"?m.jsx(Qn,{className:"animate-spin text-slate-400",size:20,strokeWidth:2}):m.jsx(me,{className:H(z.color),size:20,strokeWidth:2})}),m.jsx("span",{className:"flex-1 text-left font-bold text-white",children:z.label}),z.value&&m.jsx("span",{className:"text-xs text-slate-400 font-medium",children:z.value}),m.jsx(lo,{className:"text-slate-500 group-hover:text-violet-400 group-hover:translate-x-1 transition-all",size:18})]},te)})})]},J)),b&&m.jsx(tt.div,{variants:G,className:"glass-strong p-4 rounded-2xl border border-emerald-500/20 text-emerald-200 text-xs font-bold",children:b}),m.jsxs(tt.div,{variants:G,className:"glass-strong p-5 rounded-2xl border-iridescent relative overflow-hidden group",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/10 to-amber-600/5 opacity-0 group-hover:opacity-100 transition-opacity"}),m.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[m.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl shadow-glow-sm",children:m.jsx(D_,{size:24,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"font-black text-white text-sm",children:"Premium Features"}),m.jsx("p",{className:"text-[10px] text-slate-400 font-medium mt-1",children:"Unlock advanced analytics & insights"})]}),m.jsx(lo,{className:"text-amber-400",size:20})]})]}),m.jsxs(tt.button,{variants:G,onClick:D,whileTap:{scale:.98},className:"w-full btn-premium py-4 bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-400 hover:to-rose-500 text-white rounded-2xl font-bold flex items-center justify-center gap-2 shadow-lg hover:shadow-glow-md transition-all",children:[m.jsx(O_,{size:20,strokeWidth:2.5}),"Sign Out"]})]}),m.jsxs(tt.div,{variants:G,className:"p-6 text-center relative z-10",children:[m.jsx("p",{className:"text-[10px] text-slate-500 font-medium",children:"Powered by Postis Bridge"}),m.jsx("p",{className:"text-[9px] text-slate-600 font-medium mt-1",children:" 2025 AryNik Driver App"})]})]})}const qb="arynik_geocode_cache_v1",jk=1100;let Ay=0,Ey=Promise.resolve(),zs=null,r1=!1,Mf=null;const Ru=new Map,Ny=5e3,Bk=250,Fk=e=>{try{return localStorage.getItem(e)}catch{return null}},zk=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},Uk=e=>new Promise(t=>setTimeout(t,e)),Yp=()=>{if(zs)return zs;const e=Fk(qb);if(!e)return zs={},zs;try{const t=JSON.parse(e);return zs=t&&typeof t=="object"?t:{},zs}catch{return zs={},zs}},Vk=e=>{const t=Object.entries(e||{});if(t.length<=Ny)return;t.sort((i,a)=>{var c,f;return Number(((c=i==null?void 0:i[1])==null?void 0:c.ts)||0)-Number(((f=a==null?void 0:a[1])==null?void 0:f.ts)||0)});const n=t.length-Ny;for(let i=0;i<n;i+=1)delete e[t[i][0]]},Hk=()=>{Mf||(Mf=setTimeout(()=>{if(Mf=null,!r1)return;r1=!1;const e=Yp();try{Vk(e),zk(qb,JSON.stringify(e||{}))}catch{}},Bk))},Ty=(e,t)=>{const n=Yp();n[e]=t,r1=!0,Hk()},Wk=e=>{const t=Yp(),n=t?t[e]:null;return n&&typeof n=="object"?n:null},Vd=e=>{const t=String(e||"").trim();if(!t)return null;const n=Wk(t);if(!n)return null;if(n.lat===null&&n.lon===null)return{lat:null,lon:null,display_name:n.display_name||t,ts:n.ts||0};const i=Number(n.lat),a=Number(n.lon);return!Number.isFinite(i)||!Number.isFinite(a)?null:{...n,lat:i,lon:a}},Zk=(e,{timeoutMs:t=15e3}={})=>new Promise((n,i)=>{const a=`__arynik_jsonp_${Date.now()}_${Math.floor(Math.random()*1e5)}`,c=document.createElement("script"),f=setTimeout(()=>{g(),i(new Error("Geocode timeout"))},t),g=()=>{clearTimeout(f);try{delete window[a]}catch{window[a]=void 0}c&&c.parentNode&&c.parentNode.removeChild(c)};window[a]=v=>{g(),n(v)},c.onerror=()=>{g(),i(new Error("Geocode network error"))},c.async=!0,c.src=`${e}${e.includes("?")?"&":"?"}json_callback=${encodeURIComponent(a)}`,document.body.appendChild(c)}),Gk=e=>{const t=async()=>{const i=jk-(Date.now()-Ay);return i>0&&await Uk(i),Ay=Date.now(),e()},n=Ey.then(t,t);return Ey=n.catch(()=>{}),n},i1=async e=>{const t=String(e||"").trim();if(!t)return null;const n=Vd(t);if(n){if(Number.isFinite(n.lat)&&Number.isFinite(n.lon))return n;if(n.lat===null&&n.lon===null)return null}if(Ru.has(t))return Ru.get(t);const i=(async()=>{const c=`https://nominatim.openstreetmap.org/search?format=json&limit=1&q=${encodeURIComponent(t)}`;try{const f=await Gk(()=>Zk(c)),g=Array.isArray(f)?f[0]:null,v=g?Number(g.lat):NaN,y=g?Number(g.lon):NaN;if(!Number.isFinite(v)||!Number.isFinite(y))return Ty(t,{lat:null,lon:null,display_name:t,ts:Date.now()}),null;const S={lat:v,lon:y,display_name:g.display_name||t,ts:Date.now()};return Ty(t,S),S}catch(f){return console.warn("Geocode failed",f),null}})();Ru.set(t,i);try{return await i}finally{Ru.delete(t)}},Kb="https://router.project-osrm.org/route/v1/driving";async function Yk(e,t){if(!e||!t)return null;try{const n=`${Kb}/${e.lon},${e.lat};${t.lon},${t.lat}?overview=full&geometries=geojson`,i=await rt.get(n);return i.data.code==="Ok"&&i.data.routes.length>0?i.data.routes[0].geometry:null}catch(n){return console.error("Error fetching route:",n),null}}async function Xk(e){const t=Array.isArray(e)?e.filter(Boolean):[];if(t.length<2)return null;const n=t.map(i=>`${i.lon},${i.lat}`).join(";");try{const i=`${Kb}/${n}?overview=full&geometries=geojson&steps=false`,a=await rt.get(i);if(a.data.code==="Ok"&&a.data.routes.length>0){const c=a.data.routes[0]||{};return{geometry:c.geometry||null,distance_m:Number.isFinite(Number(c.distance))?Number(c.distance):0,duration_s:Number.isFinite(Number(c.duration))?Number(c.duration):0}}return null}catch(i){return console.error("Error fetching multi-route:",i),null}}const it=e=>{const t=Number(e);return Number.isFinite(t)&&Math.abs(t)>1e-4},Rf=e=>String(e||"").trim().replace(/[_-]+/g," ").replace(/\\s+/g," ").trim(),cc=e=>{var c,f,g,v,y,S;const t=Rf(e==null?void 0:e.delivery_address),n=Rf((e==null?void 0:e.locality)||((f=(c=e==null?void 0:e.raw_data)==null?void 0:c.recipientLocation)==null?void 0:f.locality)),i=Rf((e==null?void 0:e.county)||((v=(g=e==null?void 0:e.raw_data)==null?void 0:g.recipientLocation)==null?void 0:v.county)||((S=(y=e==null?void 0:e.raw_data)==null?void 0:y.recipientLocation)==null?void 0:S.countyName)),a=[];return t&&a.push(t),n&&!t.toLowerCase().includes(n.toLowerCase())&&a.push(n),i&&!a.some(b=>b.toLowerCase().includes(i.toLowerCase()))&&a.push(i),a.push("Romania"),a.filter(Boolean).join(", ")};function Qb(e,t){const n=j.useRef(t);j.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}const qk=1;function Kk(e){return Object.freeze({__version:qk,map:e})}function $b(e,t){return Object.freeze({...e,...t})}const Jb=j.createContext(null),eC=Jb.Provider;function Sh(){const e=j.useContext(Jb);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function tC(e){function t(n,i){const{instance:a,context:c}=e(n).current;return j.useImperativeHandle(i,()=>a),n.children==null?null:$o.createElement(eC,{value:c},n.children)}return j.forwardRef(t)}function Qk(e){function t(n,i){const[a,c]=j.useState(!1),{instance:f}=e(n,c).current;j.useImperativeHandle(i,()=>f),j.useEffect(function(){a&&f.update()},[f,a,n.children]);const g=f._contentNode;return g?Gw.createPortal(n.children,g):null}return j.forwardRef(t)}function $k(e){function t(n,i){const{instance:a}=e(n).current;return j.useImperativeHandle(i,()=>a),null}return j.forwardRef(t)}function Xp(e,t){const n=j.useRef();j.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function Ah(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function Jk(e,t){return function(i,a){const c=Sh(),f=e(Ah(i,c),c);return Qb(c.map,i.attribution),Xp(f.current,i.eventHandlers),t(f.current,c,i,a),f}}var s1={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,i){i(t)})(va,function(n){var i="1.9.4";function a(o){var h,w,A,N;for(w=1,A=arguments.length;w<A;w++){N=arguments[w];for(h in N)o[h]=N[h]}return o}var c=Object.create||function(){function o(){}return function(h){return o.prototype=h,new o}}();function f(o,h){var w=Array.prototype.slice;if(o.bind)return o.bind.apply(o,w.call(arguments,1));var A=w.call(arguments,2);return function(){return o.apply(h,A.length?A.concat(w.call(arguments)):arguments)}}var g=0;function v(o){return"_leaflet_id"in o||(o._leaflet_id=++g),o._leaflet_id}function y(o,h,w){var A,N,F,K;return K=function(){A=!1,N&&(F.apply(w,N),N=!1)},F=function(){A?N=arguments:(o.apply(w,arguments),setTimeout(K,h),A=!0)},F}function S(o,h,w){var A=h[1],N=h[0],F=A-N;return o===A&&w?o:((o-N)%F+F)%F+N}function b(){return!1}function T(o,h){if(h===!1)return o;var w=Math.pow(10,h===void 0?6:h);return Math.round(o*w)/w}function I(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function D(o){return I(o).split(/\s+/)}function P(o,h){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?c(o.options):{});for(var w in h)o.options[w]=h[w];return o.options}function U(o,h,w){var A=[];for(var N in o)A.push(encodeURIComponent(w?N.toUpperCase():N)+"="+encodeURIComponent(o[N]));return(!h||h.indexOf("?")===-1?"?":"&")+A.join("&")}var V=/\{ *([\w_ -]+) *\}/g;function O(o,h){return o.replace(V,function(w,A){var N=h[A];if(N===void 0)throw new Error("No value provided for variable "+w);return typeof N=="function"&&(N=N(h)),N})}var k=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function H(o,h){for(var w=0;w<o.length;w++)if(o[w]===h)return w;return-1}var X="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function G(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var Z=0;function J(o){var h=+new Date,w=Math.max(0,16-(h-Z));return Z=h+w,window.setTimeout(o,w)}var z=window.requestAnimationFrame||G("RequestAnimationFrame")||J,te=window.cancelAnimationFrame||G("CancelAnimationFrame")||G("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function me(o,h,w){if(w&&z===J)o.call(h);else return z.call(window,f(o,h))}function fe(o){o&&te.call(window,o)}var Me={__proto__:null,extend:a,create:c,bind:f,get lastId(){return g},stamp:v,throttle:y,wrapNum:S,falseFn:b,formatNum:T,trim:I,splitWords:D,setOptions:P,getParamString:U,template:O,isArray:k,indexOf:H,emptyImageUrl:X,requestFn:z,cancelFn:te,requestAnimFrame:me,cancelAnimFrame:fe};function we(){}we.extend=function(o){var h=function(){P(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},w=h.__super__=this.prototype,A=c(w);A.constructor=h,h.prototype=A;for(var N in this)Object.prototype.hasOwnProperty.call(this,N)&&N!=="prototype"&&N!=="__super__"&&(h[N]=this[N]);return o.statics&&a(h,o.statics),o.includes&&(ae(o.includes),a.apply(null,[A].concat(o.includes))),a(A,o),delete A.statics,delete A.includes,A.options&&(A.options=w.options?c(w.options):{},a(A.options,o.options)),A._initHooks=[],A.callInitHooks=function(){if(!this._initHooksCalled){w.callInitHooks&&w.callInitHooks.call(this),this._initHooksCalled=!0;for(var F=0,K=A._initHooks.length;F<K;F++)A._initHooks[F].call(this)}},h},we.include=function(o){var h=this.prototype.options;return a(this.prototype,o),o.options&&(this.prototype.options=h,this.mergeOptions(o.options)),this},we.mergeOptions=function(o){return a(this.prototype.options,o),this},we.addInitHook=function(o){var h=Array.prototype.slice.call(arguments,1),w=typeof o=="function"?o:function(){this[o].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(w),this};function ae(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=k(o)?o:[o];for(var h=0;h<o.length;h++)o[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ce={on:function(o,h,w){if(typeof o=="object")for(var A in o)this._on(A,o[A],h);else{o=D(o);for(var N=0,F=o.length;N<F;N++)this._on(o[N],h,w)}return this},off:function(o,h,w){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var A in o)this._off(A,o[A],h);else{o=D(o);for(var N=arguments.length===1,F=0,K=o.length;F<K;F++)N?this._off(o[F]):this._off(o[F],h,w)}return this},_on:function(o,h,w,A){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(o,h,w)===!1){w===this&&(w=void 0);var N={fn:h,ctx:w};A&&(N.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(N)}},_off:function(o,h,w){var A,N,F;if(this._events&&(A=this._events[o],!!A)){if(arguments.length===1){if(this._firingCount)for(N=0,F=A.length;N<F;N++)A[N].fn=b;delete this._events[o];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var K=this._listens(o,h,w);if(K!==!1){var oe=A[K];this._firingCount&&(oe.fn=b,this._events[o]=A=A.slice()),A.splice(K,1)}}},fire:function(o,h,w){if(!this.listens(o,w))return this;var A=a({},h,{type:o,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var N=this._events[o];if(N){this._firingCount=this._firingCount+1||1;for(var F=0,K=N.length;F<K;F++){var oe=N[F],de=oe.fn;oe.once&&this.off(o,de,oe.ctx),de.call(oe.ctx||this,A)}this._firingCount--}}return w&&this._propagateEvent(A),this},listens:function(o,h,w,A){typeof o!="string"&&console.warn('"string" type argument expected');var N=h;typeof h!="function"&&(A=!!h,N=void 0,w=void 0);var F=this._events&&this._events[o];if(F&&F.length&&this._listens(o,N,w)!==!1)return!0;if(A){for(var K in this._eventParents)if(this._eventParents[K].listens(o,h,w,A))return!0}return!1},_listens:function(o,h,w){if(!this._events)return!1;var A=this._events[o]||[];if(!h)return!!A.length;w===this&&(w=void 0);for(var N=0,F=A.length;N<F;N++)if(A[N].fn===h&&A[N].ctx===w)return N;return!1},once:function(o,h,w){if(typeof o=="object")for(var A in o)this._on(A,o[A],h,!0);else{o=D(o);for(var N=0,F=o.length;N<F;N++)this._on(o[N],h,w,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[v(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[v(o)],this},_propagateEvent:function(o){for(var h in this._eventParents)this._eventParents[h].fire(o.type,a({layer:o.target,propagatedFrom:o.target},o),!0)}};Ce.addEventListener=Ce.on,Ce.removeEventListener=Ce.clearAllEventListeners=Ce.off,Ce.addOneTimeEventListener=Ce.once,Ce.fireEvent=Ce.fire,Ce.hasEventListeners=Ce.listens;var ke=we.extend(Ce);function ue(o,h,w){this.x=w?Math.round(o):o,this.y=w?Math.round(h):h}var je=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};ue.prototype={clone:function(){return new ue(this.x,this.y)},add:function(o){return this.clone()._add(ge(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(ge(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new ue(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new ue(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=je(this.x),this.y=je(this.y),this},distanceTo:function(o){o=ge(o);var h=o.x-this.x,w=o.y-this.y;return Math.sqrt(h*h+w*w)},equals:function(o){return o=ge(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=ge(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function ge(o,h,w){return o instanceof ue?o:k(o)?new ue(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new ue(o.x,o.y):new ue(o,h,w)}function Se(o,h){if(o)for(var w=h?[o,h]:o,A=0,N=w.length;A<N;A++)this.extend(w[A])}Se.prototype={extend:function(o){var h,w;if(!o)return this;if(o instanceof ue||typeof o[0]=="number"||"x"in o)h=w=ge(o);else if(o=Be(o),h=o.min,w=o.max,!h||!w)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=w.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(w.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(w.y,this.max.y)),this},getCenter:function(o){return ge((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return ge(this.min.x,this.max.y)},getTopRight:function(){return ge(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var h,w;return typeof o[0]=="number"||o instanceof ue?o=ge(o):o=Be(o),o instanceof Se?(h=o.min,w=o.max):h=w=o,h.x>=this.min.x&&w.x<=this.max.x&&h.y>=this.min.y&&w.y<=this.max.y},intersects:function(o){o=Be(o);var h=this.min,w=this.max,A=o.min,N=o.max,F=N.x>=h.x&&A.x<=w.x,K=N.y>=h.y&&A.y<=w.y;return F&&K},overlaps:function(o){o=Be(o);var h=this.min,w=this.max,A=o.min,N=o.max,F=N.x>h.x&&A.x<w.x,K=N.y>h.y&&A.y<w.y;return F&&K},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var h=this.min,w=this.max,A=Math.abs(h.x-w.x)*o,N=Math.abs(h.y-w.y)*o;return Be(ge(h.x-A,h.y-N),ge(w.x+A,w.y+N))},equals:function(o){return o?(o=Be(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function Be(o,h){return!o||o instanceof Se?o:new Se(o,h)}function Pe(o,h){if(o)for(var w=h?[o,h]:o,A=0,N=w.length;A<N;A++)this.extend(w[A])}Pe.prototype={extend:function(o){var h=this._southWest,w=this._northEast,A,N;if(o instanceof $)A=o,N=o;else if(o instanceof Pe){if(A=o._southWest,N=o._northEast,!A||!N)return this}else return o?this.extend(re(o)||ze(o)):this;return!h&&!w?(this._southWest=new $(A.lat,A.lng),this._northEast=new $(N.lat,N.lng)):(h.lat=Math.min(A.lat,h.lat),h.lng=Math.min(A.lng,h.lng),w.lat=Math.max(N.lat,w.lat),w.lng=Math.max(N.lng,w.lng)),this},pad:function(o){var h=this._southWest,w=this._northEast,A=Math.abs(h.lat-w.lat)*o,N=Math.abs(h.lng-w.lng)*o;return new Pe(new $(h.lat-A,h.lng-N),new $(w.lat+A,w.lng+N))},getCenter:function(){return new $((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new $(this.getNorth(),this.getWest())},getSouthEast:function(){return new $(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof $||"lat"in o?o=re(o):o=ze(o);var h=this._southWest,w=this._northEast,A,N;return o instanceof Pe?(A=o.getSouthWest(),N=o.getNorthEast()):A=N=o,A.lat>=h.lat&&N.lat<=w.lat&&A.lng>=h.lng&&N.lng<=w.lng},intersects:function(o){o=ze(o);var h=this._southWest,w=this._northEast,A=o.getSouthWest(),N=o.getNorthEast(),F=N.lat>=h.lat&&A.lat<=w.lat,K=N.lng>=h.lng&&A.lng<=w.lng;return F&&K},overlaps:function(o){o=ze(o);var h=this._southWest,w=this._northEast,A=o.getSouthWest(),N=o.getNorthEast(),F=N.lat>h.lat&&A.lat<w.lat,K=N.lng>h.lng&&A.lng<w.lng;return F&&K},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,h){return o?(o=ze(o),this._southWest.equals(o.getSouthWest(),h)&&this._northEast.equals(o.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ze(o,h){return o instanceof Pe?o:new Pe(o,h)}function $(o,h,w){if(isNaN(o)||isNaN(h))throw new Error("Invalid LatLng object: ("+o+", "+h+")");this.lat=+o,this.lng=+h,w!==void 0&&(this.alt=+w)}$.prototype={equals:function(o,h){if(!o)return!1;o=re(o);var w=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return w<=(h===void 0?1e-9:h)},toString:function(o){return"LatLng("+T(this.lat,o)+", "+T(this.lng,o)+")"},distanceTo:function(o){return Xe.distance(this,re(o))},wrap:function(){return Xe.wrapLatLng(this)},toBounds:function(o){var h=180*o/40075017,w=h/Math.cos(Math.PI/180*this.lat);return ze([this.lat-h,this.lng-w],[this.lat+h,this.lng+w])},clone:function(){return new $(this.lat,this.lng,this.alt)}};function re(o,h,w){return o instanceof $?o:k(o)&&typeof o[0]!="object"?o.length===3?new $(o[0],o[1],o[2]):o.length===2?new $(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new $(o.lat,"lng"in o?o.lng:o.lon,o.alt):h===void 0?null:new $(o,h,w)}var Ie={latLngToPoint:function(o,h){var w=this.projection.project(o),A=this.scale(h);return this.transformation._transform(w,A)},pointToLatLng:function(o,h){var w=this.scale(h),A=this.transformation.untransform(o,w);return this.projection.unproject(A)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var h=this.projection.bounds,w=this.scale(o),A=this.transformation.transform(h.min,w),N=this.transformation.transform(h.max,w);return new Se(A,N)},infinite:!1,wrapLatLng:function(o){var h=this.wrapLng?S(o.lng,this.wrapLng,!0):o.lng,w=this.wrapLat?S(o.lat,this.wrapLat,!0):o.lat,A=o.alt;return new $(w,h,A)},wrapLatLngBounds:function(o){var h=o.getCenter(),w=this.wrapLatLng(h),A=h.lat-w.lat,N=h.lng-w.lng;if(A===0&&N===0)return o;var F=o.getSouthWest(),K=o.getNorthEast(),oe=new $(F.lat-A,F.lng-N),de=new $(K.lat-A,K.lng-N);return new Pe(oe,de)}},Xe=a({},Ie,{wrapLng:[-180,180],R:6371e3,distance:function(o,h){var w=Math.PI/180,A=o.lat*w,N=h.lat*w,F=Math.sin((h.lat-o.lat)*w/2),K=Math.sin((h.lng-o.lng)*w/2),oe=F*F+Math.cos(A)*Math.cos(N)*K*K,de=2*Math.atan2(Math.sqrt(oe),Math.sqrt(1-oe));return this.R*de}}),Et=6378137,Vt={R:Et,MAX_LATITUDE:85.0511287798,project:function(o){var h=Math.PI/180,w=this.MAX_LATITUDE,A=Math.max(Math.min(w,o.lat),-w),N=Math.sin(A*h);return new ue(this.R*o.lng*h,this.R*Math.log((1+N)/(1-N))/2)},unproject:function(o){var h=180/Math.PI;return new $((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*h,o.x*h/this.R)},bounds:function(){var o=Et*Math.PI;return new Se([-o,-o],[o,o])}()};function nt(o,h,w,A){if(k(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=h,this._c=w,this._d=A}nt.prototype={transform:function(o,h){return this._transform(o.clone(),h)},_transform:function(o,h){return h=h||1,o.x=h*(this._a*o.x+this._b),o.y=h*(this._c*o.y+this._d),o},untransform:function(o,h){return h=h||1,new ue((o.x/h-this._b)/this._a,(o.y/h-this._d)/this._c)}};function en(o,h,w,A){return new nt(o,h,w,A)}var ut=a({},Xe,{code:"EPSG:3857",projection:Vt,transformation:function(){var o=.5/(Math.PI*Vt.R);return en(o,.5,-o,.5)}()}),Dn=a({},ut,{code:"EPSG:900913"});function In(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function rr(o,h){var w="",A,N,F,K,oe,de;for(A=0,F=o.length;A<F;A++){for(oe=o[A],N=0,K=oe.length;N<K;N++)de=oe[N],w+=(N?"L":"M")+de.x+" "+de.y;w+=h?Fe.svg?"z":"x":""}return w||"M0 0"}var xt=document.documentElement.style,Nt="ActiveXObject"in window,yt=Nt&&!document.addEventListener,$r="msLaunchUri"in navigator&&!("documentMode"in document),Ue=Ct("webkit"),q=Ct("android"),Oe=Ct("android 2")||Ct("android 3"),Qe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ye=q&&Ct("Google")&&Qe<537&&!("AudioNode"in window),Ze=!!window.opera,dt=!$r&&Ct("chrome"),_t=Ct("gecko")&&!Ue&&!Ze&&!Nt,qe=!dt&&Ct("safari"),Lt=Ct("phantom"),kn="OTransition"in xt,Tt=navigator.platform.indexOf("Win")===0,st=Nt&&"transition"in xt,_e="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Oe,wt="MozPerspective"in xt,ht=!window.L_DISABLE_3D&&(st||_e||wt)&&!kn&&!Lt,jt=typeof orientation<"u"||Ct("mobile"),Jr=jt&&Ue,Di=jt&&_e,wi=!window.PointerEvent&&window.MSPointerEvent,bt=!!(window.PointerEvent||wi),Zt="ontouchstart"in window||!!window.TouchEvent,Ns=!window.L_NO_TOUCH&&(Zt||bt),ne=jt&&Ze,pe=jt&&_t,xe=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Te=function(){var o=!1;try{var h=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",b,h),window.removeEventListener("testPassiveEventSupport",b,h)}catch{}return o}(),$e=function(){return!!document.createElement("canvas").getContext}(),mt=!!(document.createElementNS&&In("svg").createSVGRect),Rt=!!mt&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Gt=!mt&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var h=o.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),Pt=navigator.platform.indexOf("Mac")===0,Yt=navigator.platform.indexOf("Linux")===0;function Ct(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Fe={ie:Nt,ielt9:yt,edge:$r,webkit:Ue,android:q,android23:Oe,androidStock:Ye,opera:Ze,chrome:dt,gecko:_t,safari:qe,phantom:Lt,opera12:kn,win:Tt,ie3d:st,webkit3d:_e,gecko3d:wt,any3d:ht,mobile:jt,mobileWebkit:Jr,mobileWebkit3d:Di,msPointer:wi,pointer:bt,touch:Ns,touchNative:Zt,mobileOpera:ne,mobileGecko:pe,retina:xe,passiveEvents:Te,canvas:$e,svg:mt,vml:Gt,inlineSvg:Rt,mac:Pt,linux:Yt},Xt=Fe.msPointer?"MSPointerDown":"pointerdown",Re=Fe.msPointer?"MSPointerMove":"pointermove",Ji=Fe.msPointer?"MSPointerUp":"pointerup",da=Fe.msPointer?"MSPointerCancel":"pointercancel",Wn={touchstart:Xt,touchmove:Re,touchend:Ji,touchcancel:da},es={touchstart:ji,touchmove:Eo,touchend:Eo,touchcancel:Eo},vi={},Ao=!1;function ei(o,h,w){return h==="touchstart"&&rn(),es[h]?(w=es[h].bind(this,w),o.addEventListener(Wn[h],w,!1),w):(console.warn("wrong event specified:",h),b)}function Ih(o,h,w){if(!Wn[h]){console.warn("wrong event specified:",h);return}o.removeEventListener(Wn[h],w,!1)}function kh(o){vi[o.pointerId]=o}function ti(o){vi[o.pointerId]&&(vi[o.pointerId]=o)}function Zn(o){delete vi[o.pointerId]}function rn(){Ao||(document.addEventListener(Xt,kh,!0),document.addEventListener(Re,ti,!0),document.addEventListener(Ji,Zn,!0),document.addEventListener(da,Zn,!0),Ao=!0)}function Eo(o,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var w in vi)h.touches.push(vi[w]);h.changedTouches=[h],o(h)}}function ji(o,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&Bn(h),Eo(o,h)}function ml(o){var h={},w,A;for(A in o)w=o[A],h[A]=w&&w.bind?w.bind(o):w;return o=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var ye=200;function Mh(o,h){o.addEventListener("dblclick",h);var w=0,A;function N(F){if(F.detail!==1){A=F.detail;return}if(!(F.pointerType==="mouse"||F.sourceCapabilities&&!F.sourceCapabilities.firesTouchEvents)){var K=Is(F);if(!(K.some(function(de){return de instanceof HTMLLabelElement&&de.attributes.for})&&!K.some(function(de){return de instanceof HTMLInputElement||de instanceof HTMLSelectElement}))){var oe=Date.now();oe-w<=ye?(A++,A===2&&h(ml(F))):A=1,w=oe}}}return o.addEventListener("click",N),{dblclick:h,simDblclick:N}}function pn(o,h){o.removeEventListener("dblclick",h.dblclick),o.removeEventListener("click",h.simDblclick)}var Bi=se(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),No=se(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ft=No==="webkitTransition"||No==="OTransition"?No+"End":"transitionend";function Bt(o){return typeof o=="string"?document.getElementById(o):o}function vt(o,h){var w=o.style[h]||o.currentStyle&&o.currentStyle[h];if((!w||w==="auto")&&document.defaultView){var A=document.defaultView.getComputedStyle(o,null);w=A?A[h]:null}return w==="auto"?null:w}function Ot(o,h,w){var A=document.createElement(o);return A.className=h||"",w&&w.appendChild(A),A}function tn(o){var h=o.parentNode;h&&h.removeChild(o)}function Ts(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function sn(o){var h=o.parentNode;h&&h.lastChild!==o&&h.appendChild(o)}function pr(o){var h=o.parentNode;h&&h.firstChild!==o&&h.insertBefore(o,h.firstChild)}function gl(o,h){if(o.classList!==void 0)return o.classList.contains(h);var w=_i(o);return w.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(w)}function Ge(o,h){if(o.classList!==void 0)for(var w=D(h),A=0,N=w.length;A<N;A++)o.classList.add(w[A]);else if(!gl(o,h)){var F=_i(o);xl(o,(F?F+" ":"")+h)}}function Ht(o,h){o.classList!==void 0?o.classList.remove(h):xl(o,I((" "+_i(o)+" ").replace(" "+h+" "," ")))}function xl(o,h){o.className.baseVal===void 0?o.className=h:o.className.baseVal=h}function _i(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function St(o,h){"opacity"in o.style?o.style.opacity=h:"filter"in o.style&&Gn(o,h)}function Gn(o,h){var w=!1,A="DXImageTransform.Microsoft.Alpha";try{w=o.filters.item(A)}catch{if(h===1)return}h=Math.round(h*100),w?(w.Enabled=h!==100,w.Opacity=h):o.style.filter+=" progid:"+A+"(opacity="+h+")"}function se(o){for(var h=document.documentElement.style,w=0;w<o.length;w++)if(o[w]in h)return o[w];return!1}function W(o,h,w){var A=h||new ue(0,0);o.style[Bi]=(Fe.ie3d?"translate("+A.x+"px,"+A.y+"px)":"translate3d("+A.x+"px,"+A.y+"px,0)")+(w?" scale("+w+")":"")}function Le(o,h){o._leaflet_pos=h,Fe.any3d?W(o,h):(o.style.left=h.x+"px",o.style.top=h.y+"px")}function on(o){return o._leaflet_pos||new ue(0,0)}var Yn,To,Io;if("onselectstart"in document)Yn=function(){lt(window,"selectstart",Bn)},To=function(){De(window,"selectstart",Bn)};else{var Xn=se(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Yn=function(){if(Xn){var o=document.documentElement.style;Io=o[Xn],o[Xn]="none"}},To=function(){Xn&&(document.documentElement.style[Xn]=Io,Io=void 0)}}function Ke(){lt(window,"dragstart",Bn)}function nn(){De(window,"dragstart",Bn)}var ko,yl;function Mo(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(ts(),ko=o,yl=o.style.outlineStyle,o.style.outlineStyle="none",lt(window,"keydown",ts))}function ts(){ko&&(ko.style.outlineStyle=yl,ko=void 0,yl=void 0,De(window,"keydown",ts))}function ha(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function wl(o){var h=o.getBoundingClientRect();return{x:h.width/o.offsetWidth||1,y:h.height/o.offsetHeight||1,boundingClientRect:h}}var Mn={__proto__:null,TRANSFORM:Bi,TRANSITION:No,TRANSITION_END:Ft,get:Bt,getStyle:vt,create:Ot,remove:tn,empty:Ts,toFront:sn,toBack:pr,hasClass:gl,addClass:Ge,removeClass:Ht,setClass:xl,getClass:_i,setOpacity:St,testProp:se,setTransform:W,setPosition:Le,getPosition:on,get disableTextSelection(){return Yn},get enableTextSelection(){return To},disableImageDrag:Ke,enableImageDrag:nn,preventOutline:Mo,restoreOutline:ts,getSizedParentNode:ha,getScale:wl};function lt(o,h,w,A){if(h&&typeof h=="object")for(var N in h)Sn(o,N,h[N],w);else{h=D(h);for(var F=0,K=h.length;F<K;F++)Sn(o,h[F],w,A)}return this}var jn="_leaflet_events";function De(o,h,w,A){if(arguments.length===1)Jc(o),delete o[jn];else if(h&&typeof h=="object")for(var N in h)vl(o,N,h[N],w);else if(h=D(h),arguments.length===2)Jc(o,function(oe){return H(h,oe)!==-1});else for(var F=0,K=h.length;F<K;F++)vl(o,h[F],w,A);return this}function Jc(o,h){for(var w in o[jn]){var A=w.split(/\d/)[0];(!h||h(A))&&vl(o,A,null,null,w)}}var ft={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Sn(o,h,w,A){var N=h+v(w)+(A?"_"+v(A):"");if(o[jn]&&o[jn][N])return this;var F=function(oe){return w.call(A||o,oe||window.event)},K=F;!Fe.touchNative&&Fe.pointer&&h.indexOf("touch")===0?F=ei(o,h,F):Fe.touch&&h==="dblclick"?F=Mh(o,F):"addEventListener"in o?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?o.addEventListener(ft[h]||h,F,Fe.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(F=function(oe){oe=oe||window.event,ns(o,oe)&&K(oe)},o.addEventListener(ft[h],F,!1)):o.addEventListener(h,K,!1):o.attachEvent("on"+h,F),o[jn]=o[jn]||{},o[jn][N]=F}function vl(o,h,w,A,N){N=N||h+v(w)+(A?"_"+v(A):"");var F=o[jn]&&o[jn][N];if(!F)return this;!Fe.touchNative&&Fe.pointer&&h.indexOf("touch")===0?Ih(o,h,F):Fe.touch&&h==="dblclick"?pn(o,F):"removeEventListener"in o?o.removeEventListener(ft[h]||h,F,!1):o.detachEvent("on"+h,F),o[jn][N]=null}function bi(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function fa(o){return Sn(o,"wheel",bi),this}function jr(o){return lt(o,"mousedown touchstart dblclick contextmenu",bi),o._leaflet_disable_click=!0,this}function Bn(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function Br(o){return Bn(o),bi(o),this}function Is(o){if(o.composedPath)return o.composedPath();for(var h=[],w=o.target;w;)h.push(w),w=w.parentNode;return h}function ks(o,h){if(!h)return new ue(o.clientX,o.clientY);var w=wl(h),A=w.boundingClientRect;return new ue((o.clientX-A.left)/w.x-h.clientLeft,(o.clientY-A.top)/w.y-h.clientTop)}var eu=Fe.linux&&Fe.chrome?window.devicePixelRatio:Fe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ms(o){return Fe.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/eu:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function ns(o,h){var w=h.relatedTarget;if(!w)return!0;try{for(;w&&w!==o;)w=w.parentNode}catch{return!1}return w!==o}var ir={__proto__:null,on:lt,off:De,stopPropagation:bi,disableScrollPropagation:fa,disableClickPropagation:jr,preventDefault:Bn,stop:Br,getPropagationPath:Is,getMousePosition:ks,getWheelDelta:Ms,isExternalTarget:ns,addListener:lt,removeListener:De},_l=ke.extend({run:function(o,h,w,A){this.stop(),this._el=o,this._inProgress=!0,this._duration=w||.25,this._easeOutPower=1/Math.max(A||.5,.2),this._startPos=on(o),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=me(this._animate,this),this._step()},_step:function(o){var h=+new Date-this._startTime,w=this._duration*1e3;h<w?this._runFrame(this._easeOut(h/w),o):(this._runFrame(1),this._complete())},_runFrame:function(o,h){var w=this._startPos.add(this._offset.multiplyBy(o));h&&w._round(),Le(this._el,w),this.fire("step")},_complete:function(){fe(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),kt=ke.extend({options:{crs:ut,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,h){h=P(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(re(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=No&&Fe.any3d&&!Fe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),lt(this._proxy,Ft,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,h,w){if(h=h===void 0?this._zoom:this._limitZoom(h),o=this._limitCenter(re(o),h,this.options.maxBounds),w=w||{},this._stop(),this._loaded&&!w.reset&&w!==!0){w.animate!==void 0&&(w.zoom=a({animate:w.animate},w.zoom),w.pan=a({animate:w.animate,duration:w.duration},w.pan));var A=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,h,w.zoom):this._tryAnimatedPan(o,w.pan);if(A)return clearTimeout(this._sizeTimer),this}return this._resetView(o,h,w.pan&&w.pan.noMoveStart),this},setZoom:function(o,h){return this._loaded?this.setView(this.getCenter(),o,{zoom:h}):(this._zoom=o,this)},zoomIn:function(o,h){return o=o||(Fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,h)},zoomOut:function(o,h){return o=o||(Fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,h)},setZoomAround:function(o,h,w){var A=this.getZoomScale(h),N=this.getSize().divideBy(2),F=o instanceof ue?o:this.latLngToContainerPoint(o),K=F.subtract(N).multiplyBy(1-1/A),oe=this.containerPointToLatLng(N.add(K));return this.setView(oe,h,{zoom:w})},_getBoundsCenterZoom:function(o,h){h=h||{},o=o.getBounds?o.getBounds():ze(o);var w=ge(h.paddingTopLeft||h.padding||[0,0]),A=ge(h.paddingBottomRight||h.padding||[0,0]),N=this.getBoundsZoom(o,!1,w.add(A));if(N=typeof h.maxZoom=="number"?Math.min(h.maxZoom,N):N,N===1/0)return{center:o.getCenter(),zoom:N};var F=A.subtract(w).divideBy(2),K=this.project(o.getSouthWest(),N),oe=this.project(o.getNorthEast(),N),de=this.unproject(K.add(oe).divideBy(2).add(F),N);return{center:de,zoom:N}},fitBounds:function(o,h){if(o=ze(o),!o.isValid())throw new Error("Bounds are not valid.");var w=this._getBoundsCenterZoom(o,h);return this.setView(w.center,w.zoom,h)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,h){return this.setView(o,this._zoom,{pan:h})},panBy:function(o,h){if(o=ge(o).round(),h=h||{},!o.x&&!o.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new _l,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){Ge(this._mapPane,"leaflet-pan-anim");var w=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,w,h.duration||.25,h.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,h,w){if(w=w||{},w.animate===!1||!Fe.any3d)return this.setView(o,h,w);this._stop();var A=this.project(this.getCenter()),N=this.project(o),F=this.getSize(),K=this._zoom;o=re(o),h=h===void 0?K:h;var oe=Math.max(F.x,F.y),de=oe*this.getZoomScale(K,h),ve=N.distanceTo(A)||1,Ve=1.42,ot=Ve*Ve;function It(On){var lu=On?-1:1,vC=On?de:oe,_C=de*de-oe*oe+lu*ot*ot*ve*ve,bC=2*vC*ot*ve,Bh=_C/bC,gm=Math.sqrt(Bh*Bh+1)-Bh,CC=gm<1e-9?-18:Math.log(gm);return CC}function yr(On){return(Math.exp(On)-Math.exp(-On))/2}function qn(On){return(Math.exp(On)+Math.exp(-On))/2}function ai(On){return yr(On)/qn(On)}var Nr=It(0);function ya(On){return oe*(qn(Nr)/qn(Nr+Ve*On))}function gC(On){return oe*(qn(Nr)*ai(Nr+Ve*On)-yr(Nr))/ot}function xC(On){return 1-Math.pow(1-On,1.5)}var yC=Date.now(),pm=(It(1)-Nr)/Ve,wC=w.duration?1e3*w.duration:1e3*pm*.8;function mm(){var On=(Date.now()-yC)/wC,lu=xC(On)*pm;On<=1?(this._flyToFrame=me(mm,this),this._move(this.unproject(A.add(N.subtract(A).multiplyBy(gC(lu)/ve)),K),this.getScaleZoom(oe/ya(lu),K),{flyTo:!0})):this._move(o,h)._moveEnd(!0)}return this._moveStart(!0,w.noMoveStart),mm.call(this),this},flyToBounds:function(o,h){var w=this._getBoundsCenterZoom(o,h);return this.flyTo(w.center,w.zoom,h)},setMaxBounds:function(o){return o=ze(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var h=this.options.minZoom;return this.options.minZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var h=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,h){this._enforcingBounds=!0;var w=this.getCenter(),A=this._limitCenter(w,this._zoom,ze(o));return w.equals(A)||this.panTo(A,h),this._enforcingBounds=!1,this},panInside:function(o,h){h=h||{};var w=ge(h.paddingTopLeft||h.padding||[0,0]),A=ge(h.paddingBottomRight||h.padding||[0,0]),N=this.project(this.getCenter()),F=this.project(o),K=this.getPixelBounds(),oe=Be([K.min.add(w),K.max.subtract(A)]),de=oe.getSize();if(!oe.contains(F)){this._enforcingBounds=!0;var ve=F.subtract(oe.getCenter()),Ve=oe.extend(F).getSize().subtract(de);N.x+=ve.x<0?-Ve.x:Ve.x,N.y+=ve.y<0?-Ve.y:Ve.y,this.panTo(this.unproject(N),h),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=a({animate:!1,pan:!0},o===!0?{animate:!0}:o);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var w=this.getSize(),A=h.divideBy(2).round(),N=w.divideBy(2).round(),F=A.subtract(N);return!F.x&&!F.y?this:(o.animate&&o.pan?this.panBy(F):(o.pan&&this._rawPanBy(F),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:w}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=a({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=f(this._handleGeolocationResponse,this),w=f(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,w,o):navigator.geolocation.getCurrentPosition(h,w,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var h=o.code,w=o.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+w+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var h=o.coords.latitude,w=o.coords.longitude,A=new $(h,w),N=A.toBounds(o.coords.accuracy*2),F=this._locateOptions;if(F.setView){var K=this.getBoundsZoom(N);this.setView(A,F.maxZoom?Math.min(K,F.maxZoom):K)}var oe={latlng:A,bounds:N,timestamp:o.timestamp};for(var de in o.coords)typeof o.coords[de]=="number"&&(oe[de]=o.coords[de]);this.fire("locationfound",oe)}},addHandler:function(o,h){if(!h)return this;var w=this[o]=new h(this);return this._handlers.push(w),this.options[o]&&w.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),tn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(fe(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)tn(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,h){var w="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),A=Ot("div",w,h||this._mapPane);return o&&(this._panes[o]=A),A},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),h=this.unproject(o.getBottomLeft()),w=this.unproject(o.getTopRight());return new Pe(h,w)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,h,w){o=ze(o),w=ge(w||[0,0]);var A=this.getZoom()||0,N=this.getMinZoom(),F=this.getMaxZoom(),K=o.getNorthWest(),oe=o.getSouthEast(),de=this.getSize().subtract(w),ve=Be(this.project(oe,A),this.project(K,A)).getSize(),Ve=Fe.any3d?this.options.zoomSnap:1,ot=de.x/ve.x,It=de.y/ve.y,yr=h?Math.max(ot,It):Math.min(ot,It);return A=this.getScaleZoom(yr,A),Ve&&(A=Math.round(A/(Ve/100))*(Ve/100),A=h?Math.ceil(A/Ve)*Ve:Math.floor(A/Ve)*Ve),Math.max(N,Math.min(F,A))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ue(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,h){var w=this._getTopLeftPoint(o,h);return new Se(w,w.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,h){var w=this.options.crs;return h=h===void 0?this._zoom:h,w.scale(o)/w.scale(h)},getScaleZoom:function(o,h){var w=this.options.crs;h=h===void 0?this._zoom:h;var A=w.zoom(o*w.scale(h));return isNaN(A)?1/0:A},project:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(re(o),h)},unproject:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(ge(o),h)},layerPointToLatLng:function(o){var h=ge(o).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(o){var h=this.project(re(o))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(re(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(ze(o))},distance:function(o,h){return this.options.crs.distance(re(o),re(h))},containerPointToLayerPoint:function(o){return ge(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return ge(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var h=this.containerPointToLayerPoint(ge(o));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(re(o)))},mouseEventToContainerPoint:function(o){return ks(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var h=this._container=Bt(o);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");lt(h,"scroll",this._onScroll,this),this._containerId=v(h)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Fe.any3d,Ge(o,"leaflet-container"+(Fe.touch?" leaflet-touch":"")+(Fe.retina?" leaflet-retina":"")+(Fe.ielt9?" leaflet-oldie":"")+(Fe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=vt(o,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Le(this._mapPane,new ue(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ge(o.markerPane,"leaflet-zoom-hide"),Ge(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,h,w){Le(this._mapPane,new ue(0,0));var A=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var N=this._zoom!==h;this._moveStart(N,w)._move(o,h)._moveEnd(N),this.fire("viewreset"),A&&this.fire("load")},_moveStart:function(o,h){return o&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(o,h,w,A){h===void 0&&(h=this._zoom);var N=this._zoom!==h;return this._zoom=h,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),A?w&&w.pinch&&this.fire("zoom",w):((N||w&&w.pinch)&&this.fire("zoom",w),this.fire("move",w)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return fe(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){Le(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[v(this._container)]=this;var h=o?De:lt;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),Fe.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){fe(this._resizeRequest),this._resizeRequest=me(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,h){for(var w=[],A,N=h==="mouseout"||h==="mouseover",F=o.target||o.srcElement,K=!1;F;){if(A=this._targets[v(F)],A&&(h==="click"||h==="preclick")&&this._draggableMoved(A)){K=!0;break}if(A&&A.listens(h,!0)&&(N&&!ns(F,o)||(w.push(A),N))||F===this._container)break;F=F.parentNode}return!w.length&&!K&&!N&&this.listens(h,!0)&&(w=[this]),w},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var h=o.target||o.srcElement;if(!(!this._loaded||h._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(h))){var w=o.type;w==="mousedown"&&Mo(h),this._fireDOMEvent(o,w)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,h,w){if(o.type==="click"){var A=a({},o);A.type="preclick",this._fireDOMEvent(A,A.type,w)}var N=this._findEventTargets(o,h);if(w){for(var F=[],K=0;K<w.length;K++)w[K].listens(h,!0)&&F.push(w[K]);N=F.concat(N)}if(N.length){h==="contextmenu"&&Bn(o);var oe=N[0],de={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var ve=oe.getLatLng&&(!oe._radius||oe._radius<=10);de.containerPoint=ve?this.latLngToContainerPoint(oe.getLatLng()):this.mouseEventToContainerPoint(o),de.layerPoint=this.containerPointToLayerPoint(de.containerPoint),de.latlng=ve?oe.getLatLng():this.layerPointToLatLng(de.layerPoint)}for(K=0;K<N.length;K++)if(N[K].fire(h,de,!0),de.originalEvent._stopped||N[K].options.bubblingMouseEvents===!1&&H(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,h=this._handlers.length;o<h;o++)this._handlers[o].disable()},whenReady:function(o,h){return this._loaded?o.call(h||this,{target:this}):this.on("load",o,h),this},_getMapPanePos:function(){return on(this._mapPane)||new ue(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,h){var w=o&&h!==void 0?this._getNewPixelOrigin(o,h):this.getPixelOrigin();return w.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,h){var w=this.getSize()._divideBy(2);return this.project(o,h)._subtract(w)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,h,w){var A=this._getNewPixelOrigin(w,h);return this.project(o,h)._subtract(A)},_latLngBoundsToNewLayerBounds:function(o,h,w){var A=this._getNewPixelOrigin(w,h);return Be([this.project(o.getSouthWest(),h)._subtract(A),this.project(o.getNorthWest(),h)._subtract(A),this.project(o.getSouthEast(),h)._subtract(A),this.project(o.getNorthEast(),h)._subtract(A)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,h,w){if(!w)return o;var A=this.project(o,h),N=this.getSize().divideBy(2),F=new Se(A.subtract(N),A.add(N)),K=this._getBoundsOffset(F,w,h);return Math.abs(K.x)<=1&&Math.abs(K.y)<=1?o:this.unproject(A.add(K),h)},_limitOffset:function(o,h){if(!h)return o;var w=this.getPixelBounds(),A=new Se(w.min.add(o),w.max.add(o));return o.add(this._getBoundsOffset(A,h))},_getBoundsOffset:function(o,h,w){var A=Be(this.project(h.getNorthEast(),w),this.project(h.getSouthWest(),w)),N=A.min.subtract(o.min),F=A.max.subtract(o.max),K=this._rebound(N.x,-F.x),oe=this._rebound(N.y,-F.y);return new ue(K,oe)},_rebound:function(o,h){return o+h>0?Math.round(o-h)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(h))},_limitZoom:function(o){var h=this.getMinZoom(),w=this.getMaxZoom(),A=Fe.any3d?this.options.zoomSnap:1;return A&&(o=Math.round(o/A)*A),Math.max(h,Math.min(w,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ht(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,h){var w=this._getCenterOffset(o)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(w)?!1:(this.panBy(w,h),!0)},_createAnimProxy:function(){var o=this._proxy=Ot("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(h){var w=Bi,A=this._proxy.style[w];W(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),A===this._proxy.style[w]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){tn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),h=this.getZoom();W(this._proxy,this.project(o,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,h,w){if(this._animatingZoom)return!0;if(w=w||{},!this._zoomAnimated||w.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var A=this.getZoomScale(h),N=this._getCenterOffset(o)._divideBy(1-1/A);return w.animate!==!0&&!this.getSize().contains(N)?!1:(me(function(){this._moveStart(!0,w.noMoveStart||!1)._animateZoom(o,h,!0)},this),!0)},_animateZoom:function(o,h,w,A){this._mapPane&&(w&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=h,Ge(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:h,noUpdate:A}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ht(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function tu(o,h){return new kt(o,h)}var Fr=we.extend({options:{position:"topright"},initialize:function(o){P(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var h=this._map;return h&&h.removeControl(this),this.options.position=o,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var h=this._container=this.onAdd(o),w=this.getPosition(),A=o._controlCorners[w];return Ge(h,"leaflet-control"),w.indexOf("bottom")!==-1?A.insertBefore(h,A.firstChild):A.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(tn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),Ro=function(o){return new Fr(o)};kt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},h="leaflet-",w=this._controlContainer=Ot("div",h+"control-container",this._container);function A(N,F){var K=h+N+" "+h+F;o[N+F]=Ot("div",K,w)}A("top","left"),A("top","right"),A("bottom","left"),A("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)tn(this._controlCorners[o]);tn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var nu=Fr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,h,w,A){return w<A?-1:A<w?1:0}},initialize:function(o,h,w){P(this,w),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var A in o)this._addLayer(o[A],A);for(A in h)this._addLayer(h[A],A,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return Fr.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,h){return this._addLayer(o,h),this._map?this._update():this},addOverlay:function(o,h){return this._addLayer(o,h,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var h=this._getLayer(v(o));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){Ge(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(Ge(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Ht(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ht(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",h=this._container=Ot("div",o),w=this.options.collapsed;h.setAttribute("aria-haspopup",!0),jr(h),fa(h);var A=this._section=Ot("section",o+"-list");w&&(this._map.on("click",this.collapse,this),lt(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var N=this._layersLink=Ot("a",o+"-toggle",h);N.href="#",N.title="Layers",N.setAttribute("role","button"),lt(N,{keydown:function(F){F.keyCode===13&&this._expandSafely()},click:function(F){Bn(F),this._expandSafely()}},this),w||this.expand(),this._baseLayersList=Ot("div",o+"-base",A),this._separator=Ot("div",o+"-separator",A),this._overlaysList=Ot("div",o+"-overlays",A),h.appendChild(A)},_getLayer:function(o){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&v(this._layers[h].layer)===o)return this._layers[h]},_addLayer:function(o,h,w){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:h,overlay:w}),this.options.sortLayers&&this._layers.sort(f(function(A,N){return this.options.sortFunction(A.layer,N.layer,A.name,N.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ts(this._baseLayersList),Ts(this._overlaysList),this._layerControlInputs=[];var o,h,w,A,N=0;for(w=0;w<this._layers.length;w++)A=this._layers[w],this._addItem(A),h=h||A.overlay,o=o||!A.overlay,N+=A.overlay?0:1;return this.options.hideSingleBase&&(o=o&&N>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=h&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var h=this._getLayer(v(o.target)),w=h.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;w&&this._map.fire(w,h)},_createRadioElement:function(o,h){var w='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(h?' checked="checked"':"")+"/>",A=document.createElement("div");return A.innerHTML=w,A.firstChild},_addItem:function(o){var h=document.createElement("label"),w=this._map.hasLayer(o.layer),A;o.overlay?(A=document.createElement("input"),A.type="checkbox",A.className="leaflet-control-layers-selector",A.defaultChecked=w):A=this._createRadioElement("leaflet-base-layers_"+v(this),w),this._layerControlInputs.push(A),A.layerId=v(o.layer),lt(A,"click",this._onInputClick,this);var N=document.createElement("span");N.innerHTML=" "+o.name;var F=document.createElement("span");h.appendChild(F),F.appendChild(A),F.appendChild(N);var K=o.overlay?this._overlaysList:this._baseLayersList;return K.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,h,w,A=[],N=[];this._handlingClick=!0;for(var F=o.length-1;F>=0;F--)h=o[F],w=this._getLayer(h.layerId).layer,h.checked?A.push(w):h.checked||N.push(w);for(F=0;F<N.length;F++)this._map.hasLayer(N[F])&&this._map.removeLayer(N[F]);for(F=0;F<A.length;F++)this._map.hasLayer(A[F])||this._map.addLayer(A[F]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,h,w,A=this._map.getZoom(),N=o.length-1;N>=0;N--)h=o[N],w=this._getLayer(h.layerId).layer,h.disabled=w.options.minZoom!==void 0&&A<w.options.minZoom||w.options.maxZoom!==void 0&&A>w.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,lt(o,"click",Bn),this.expand();var h=this;setTimeout(function(){De(o,"click",Bn),h._preventClick=!1})}}),Wt=function(o,h,w){return new nu(o,h,w)},pa=Fr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var h="leaflet-control-zoom",w=Ot("div",h+" leaflet-bar"),A=this.options;return this._zoomInButton=this._createButton(A.zoomInText,A.zoomInTitle,h+"-in",w,this._zoomIn),this._zoomOutButton=this._createButton(A.zoomOutText,A.zoomOutTitle,h+"-out",w,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),w},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,h,w,A,N){var F=Ot("a",w,A);return F.innerHTML=o,F.href="#",F.title=h,F.setAttribute("role","button"),F.setAttribute("aria-label",h),jr(F),lt(F,"click",Br),lt(F,"click",N,this),lt(F,"click",this._refocusOnMap,this),F},_updateDisabled:function(){var o=this._map,h="leaflet-disabled";Ht(this._zoomInButton,h),Ht(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(Ge(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(Ge(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});kt.mergeOptions({zoomControl:!0}),kt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new pa,this.addControl(this.zoomControl))});var ma=function(o){return new pa(o)},Ci=Fr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var h="leaflet-control-scale",w=Ot("div",h),A=this.options;return this._addScales(A,h+"-line",w),o.on(A.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),w},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,h,w){o.metric&&(this._mScale=Ot("div",h,w)),o.imperial&&(this._iScale=Ot("div",h,w))},_update:function(){var o=this._map,h=o.getSize().y/2,w=o.distance(o.containerPointToLatLng([0,h]),o.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(w)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var h=this._getRoundNum(o),w=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,w,h/o)},_updateImperial:function(o){var h=o*3.2808399,w,A,N;h>5280?(w=h/5280,A=this._getRoundNum(w),this._updateScale(this._iScale,A+" mi",A/w)):(N=this._getRoundNum(h),this._updateScale(this._iScale,N+" ft",N/h))},_updateScale:function(o,h,w){o.style.width=Math.round(this.options.maxWidth*w)+"px",o.innerHTML=h},_getRoundNum:function(o){var h=Math.pow(10,(Math.floor(o)+"").length-1),w=o/h;return w=w>=10?10:w>=5?5:w>=3?3:w>=2?2:1,h*w}}),Rh=function(o){return new Ci(o)},ce='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',gt=Fr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Fe.inlineSvg?ce+" ":"")+"Leaflet</a>"},initialize:function(o){P(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Ot("div","leaflet-control-attribution"),jr(this._container);for(var h in o._layers)o._layers[h].getAttribution&&this.addAttribution(o._layers[h].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var h in this._attributions)this._attributions[h]&&o.push(h);var w=[];this.options.prefix&&w.push(this.options.prefix),o.length&&w.push(o.join(", ")),this._container.innerHTML=w.join(' <span aria-hidden="true">|</span> ')}}});kt.mergeOptions({attributionControl:!0}),kt.addInitHook(function(){this.options.attributionControl&&new gt().addTo(this)});var Fn=function(o){return new gt(o)};Fr.Layers=nu,Fr.Zoom=pa,Fr.Scale=Ci,Fr.Attribution=gt,Ro.layers=Wt,Ro.zoom=ma,Ro.scale=Rh,Ro.attribution=Fn;var mr=we.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});mr.addTo=function(o,h){return o.addHandler(h,this),this};var ru={Events:Ce},iu=Fe.touch?"touchstart mousedown":"mousedown",Fi=ke.extend({options:{clickTolerance:3},initialize:function(o,h,w,A){P(this,A),this._element=o,this._dragStartTarget=h||o,this._preventOutline=w},enable:function(){this._enabled||(lt(this._dragStartTarget,iu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Fi._dragging===this&&this.finishDrag(!0),De(this._dragStartTarget,iu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!gl(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){Fi._dragging===this&&this.finishDrag();return}if(!(Fi._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(Fi._dragging=this,this._preventOutline&&Mo(this._element),Ke(),Yn(),!this._moving)){this.fire("down");var h=o.touches?o.touches[0]:o,w=ha(this._element);this._startPoint=new ue(h.clientX,h.clientY),this._startPos=on(this._element),this._parentScale=wl(w);var A=o.type==="mousedown";lt(document,A?"mousemove":"touchmove",this._onMove,this),lt(document,A?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var h=o.touches&&o.touches.length===1?o.touches[0]:o,w=new ue(h.clientX,h.clientY)._subtract(this._startPoint);!w.x&&!w.y||Math.abs(w.x)+Math.abs(w.y)<this.options.clickTolerance||(w.x/=this._parentScale.x,w.y/=this._parentScale.y,Bn(o),this._moved||(this.fire("dragstart"),this._moved=!0,Ge(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ge(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(w),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),Le(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Ht(document.body,"leaflet-dragging"),this._lastTarget&&(Ht(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),De(document,"mousemove touchmove",this._onMove,this),De(document,"mouseup touchend touchcancel",this._onUp,this),nn(),To();var h=this._moved&&this._moving;this._moving=!1,Fi._dragging=!1,h&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function su(o,h,w){var A,N=[1,4,2,8],F,K,oe,de,ve,Ve,ot,It;for(F=0,Ve=o.length;F<Ve;F++)o[F]._code=is(o[F],h);for(oe=0;oe<4;oe++){for(ot=N[oe],A=[],F=0,Ve=o.length,K=Ve-1;F<Ve;K=F++)de=o[F],ve=o[K],de._code&ot?ve._code&ot||(It=Si(ve,de,ot,h,w),It._code=is(It,h),A.push(It)):(ve._code&ot&&(It=Si(ve,de,ot,h,w),It._code=is(It,h),A.push(It)),A.push(de));o=A}return o}function ga(o,h){var w,A,N,F,K,oe,de,ve,Ve;if(!o||o.length===0)throw new Error("latlngs not passed");gr(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var ot=re([0,0]),It=ze(o),yr=It.getNorthWest().distanceTo(It.getSouthWest())*It.getNorthEast().distanceTo(It.getNorthWest());yr<1700&&(ot=gn(o));var qn=o.length,ai=[];for(w=0;w<qn;w++){var Nr=re(o[w]);ai.push(h.project(re([Nr.lat-ot.lat,Nr.lng-ot.lng])))}for(oe=de=ve=0,w=0,A=qn-1;w<qn;A=w++)N=ai[w],F=ai[A],K=N.y*F.x-F.y*N.x,de+=(N.x+F.x)*K,ve+=(N.y+F.y)*K,oe+=K*3;oe===0?Ve=ai[0]:Ve=[de/oe,ve/oe];var ya=h.unproject(ge(Ve));return re([ya.lat+ot.lat,ya.lng+ot.lng])}function gn(o){for(var h=0,w=0,A=0,N=0;N<o.length;N++){var F=re(o[N]);h+=F.lat,w+=F.lng,A++}return re([h/A,w/A])}var bl={__proto__:null,clipPolygon:su,polygonCenter:ga,centroid:gn};function cn(o,h){if(!h||!o.length)return o.slice();var w=h*h;return o=Oh(o,w),o=qt(o,w),o}function Oo(o,h,w){return Math.sqrt(ss(o,h,w,!0))}function rs(o,h,w){return ss(o,h,w)}function qt(o,h){var w=o.length,A=typeof Uint8Array<"u"?Uint8Array:Array,N=new A(w);N[0]=N[w-1]=1,et(o,N,h,0,w-1);var F,K=[];for(F=0;F<w;F++)N[F]&&K.push(o[F]);return K}function et(o,h,w,A,N){var F=0,K,oe,de;for(oe=A+1;oe<=N-1;oe++)de=ss(o[oe],o[A],o[N],!0),de>F&&(K=oe,F=de);F>w&&(h[K]=1,et(o,h,w,A,K),et(o,h,w,K,N))}function Oh(o,h){for(var w=[o[0]],A=1,N=0,F=o.length;A<F;A++)ni(o[A],o[N])>h&&(w.push(o[A]),N=A);return N<F-1&&w.push(o[F-1]),w}var Jt;function zi(o,h,w,A,N){var F=A?Jt:is(o,w),K=is(h,w),oe,de,ve;for(Jt=K;;){if(!(F|K))return[o,h];if(F&K)return!1;oe=F||K,de=Si(o,h,oe,w,N),ve=is(de,w),oe===F?(o=de,F=ve):(h=de,K=ve)}}function Si(o,h,w,A,N){var F=h.x-o.x,K=h.y-o.y,oe=A.min,de=A.max,ve,Ve;return w&8?(ve=o.x+F*(de.y-o.y)/K,Ve=de.y):w&4?(ve=o.x+F*(oe.y-o.y)/K,Ve=oe.y):w&2?(ve=de.x,Ve=o.y+K*(de.x-o.x)/F):w&1&&(ve=oe.x,Ve=o.y+K*(oe.x-o.x)/F),new ue(ve,Ve,N)}function is(o,h){var w=0;return o.x<h.min.x?w|=1:o.x>h.max.x&&(w|=2),o.y<h.min.y?w|=4:o.y>h.max.y&&(w|=8),w}function ni(o,h){var w=h.x-o.x,A=h.y-o.y;return w*w+A*A}function ss(o,h,w,A){var N=h.x,F=h.y,K=w.x-N,oe=w.y-F,de=K*K+oe*oe,ve;return de>0&&(ve=((o.x-N)*K+(o.y-F)*oe)/de,ve>1?(N=w.x,F=w.y):ve>0&&(N+=K*ve,F+=oe*ve)),K=o.x-N,oe=o.y-F,A?K*K+oe*oe:new ue(N,F)}function gr(o){return!k(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function xa(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),gr(o)}function Cl(o,h){var w,A,N,F,K,oe,de,ve;if(!o||o.length===0)throw new Error("latlngs not passed");gr(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Ve=re([0,0]),ot=ze(o),It=ot.getNorthWest().distanceTo(ot.getSouthWest())*ot.getNorthEast().distanceTo(ot.getNorthWest());It<1700&&(Ve=gn(o));var yr=o.length,qn=[];for(w=0;w<yr;w++){var ai=re(o[w]);qn.push(h.project(re([ai.lat-Ve.lat,ai.lng-Ve.lng])))}for(w=0,A=0;w<yr-1;w++)A+=qn[w].distanceTo(qn[w+1])/2;if(A===0)ve=qn[0];else for(w=0,F=0;w<yr-1;w++)if(K=qn[w],oe=qn[w+1],N=K.distanceTo(oe),F+=N,F>A){de=(F-A)/N,ve=[oe.x-de*(oe.x-K.x),oe.y-de*(oe.y-K.y)];break}var Nr=h.unproject(ge(ve));return re([Nr.lat+Ve.lat,Nr.lng+Ve.lng])}var ou={__proto__:null,simplify:cn,pointToSegmentDistance:Oo,closestPointOnSegment:rs,clipSegment:zi,_getEdgeIntersection:Si,_getBitCode:is,_sqClosestPointOnSegment:ss,isFlat:gr,_flat:xa,polylineCenter:Cl},Sl={project:function(o){return new ue(o.lng,o.lat)},unproject:function(o){return new $(o.y,o.x)},bounds:new Se([-180,-90],[180,90])},Ui={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Se([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var h=Math.PI/180,w=this.R,A=o.lat*h,N=this.R_MINOR/w,F=Math.sqrt(1-N*N),K=F*Math.sin(A),oe=Math.tan(Math.PI/4-A/2)/Math.pow((1-K)/(1+K),F/2);return A=-w*Math.log(Math.max(oe,1e-10)),new ue(o.lng*h*w,A)},unproject:function(o){for(var h=180/Math.PI,w=this.R,A=this.R_MINOR/w,N=Math.sqrt(1-A*A),F=Math.exp(-o.y/w),K=Math.PI/2-2*Math.atan(F),oe=0,de=.1,ve;oe<15&&Math.abs(de)>1e-7;oe++)ve=N*Math.sin(K),ve=Math.pow((1-ve)/(1+ve),N/2),de=Math.PI/2-2*Math.atan(F*ve)-K,K+=de;return new $(K*h,o.x*h/w)}},Al={__proto__:null,LonLat:Sl,Mercator:Ui,SphericalMercator:Vt},Lh=a({},Xe,{code:"EPSG:3395",projection:Ui,transformation:function(){var o=.5/(Math.PI*Ui.R);return en(o,.5,-o,.5)}()}),Rs=a({},Xe,{code:"EPSG:4326",projection:Sl,transformation:en(1/180,1,-1/180,.5)}),Ph=a({},Ie,{projection:Sl,transformation:en(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,h){var w=h.lng-o.lng,A=h.lat-o.lat;return Math.sqrt(w*w+A*A)},infinite:!0});Ie.Earth=Xe,Ie.EPSG3395=Lh,Ie.EPSG3857=ut,Ie.EPSG900913=Dn,Ie.EPSG4326=Rs,Ie.Simple=Ph;var Rn=ke.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[v(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[v(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var h=o.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var w=this.getEvents();h.on(w,this),this.once("remove",function(){h.off(w,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});kt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var h=v(o);return this._layers[h]?this:(this._layers[h]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var h=v(o);return this._layers[h]?(this._loaded&&o.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return v(o)in this._layers},eachLayer:function(o,h){for(var w in this._layers)o.call(h,this._layers[w]);return this},_addLayers:function(o){o=o?k(o)?o:[o]:[];for(var h=0,w=o.length;h<w;h++)this.addLayer(o[h])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[v(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var h=v(o);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,h=-1/0,w=this._getZoomSpan();for(var A in this._zoomBoundLayers){var N=this._zoomBoundLayers[A].options;o=N.minZoom===void 0?o:Math.min(o,N.minZoom),h=N.maxZoom===void 0?h:Math.max(h,N.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=o===1/0?void 0:o,w!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ai=Rn.extend({initialize:function(o,h){P(this,h),this._layers={};var w,A;if(o)for(w=0,A=o.length;w<A;w++)this.addLayer(o[w])},addLayer:function(o){var h=this.getLayerId(o);return this._layers[h]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var h=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(o){var h=typeof o=="number"?o:this.getLayerId(o);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var h=Array.prototype.slice.call(arguments,1),w,A;for(w in this._layers)A=this._layers[w],A[o]&&A[o].apply(A,h);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,h){for(var w in this._layers)o.call(h,this._layers[w]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return v(o)}}),Er=function(o,h){return new Ai(o,h)},ri=Ai.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),Ai.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),Ai.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new Pe;for(var h in this._layers){var w=this._layers[h];o.extend(w.getBounds?w.getBounds():w.getLatLng())}return o}}),ii=function(o,h){return new ri(o,h)},Os=we.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){P(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,h){var w=this._getIconUrl(o);if(!w){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var A=this._createImg(w,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(A,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(A.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),A},_setIconStyles:function(o,h){var w=this.options,A=w[h+"Size"];typeof A=="number"&&(A=[A,A]);var N=ge(A),F=ge(h==="shadow"&&w.shadowAnchor||w.iconAnchor||N&&N.divideBy(2,!0));o.className="leaflet-marker-"+h+" "+(w.className||""),F&&(o.style.marginLeft=-F.x+"px",o.style.marginTop=-F.y+"px"),N&&(o.style.width=N.x+"px",o.style.height=N.y+"px")},_createImg:function(o,h){return h=h||document.createElement("img"),h.src=o,h},_getIconUrl:function(o){return Fe.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function El(o){return new Os(o)}var Lo=Os.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof Lo.imagePath!="string"&&(Lo.imagePath=this._detectIconPath()),(this.options.imagePath||Lo.imagePath)+Os.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var h=function(w,A,N){var F=A.exec(w);return F&&F[N]};return o=h(o,/^url\((['"])?(.+)\1\)$/,2),o&&h(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Ot("div","leaflet-default-icon-path",document.body),h=vt(o,"background-image")||vt(o,"backgroundImage");if(document.body.removeChild(o),h=this._stripUrl(h),h)return h;var w=document.querySelector('link[href$="leaflet.css"]');return w?w.href.substring(0,w.href.length-11-1):""}}),Nl=mr.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new Fi(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ge(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ht(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var h=this._marker,w=h._map,A=this._marker.options.autoPanSpeed,N=this._marker.options.autoPanPadding,F=on(h._icon),K=w.getPixelBounds(),oe=w.getPixelOrigin(),de=Be(K.min._subtract(oe).add(N),K.max._subtract(oe).subtract(N));if(!de.contains(F)){var ve=ge((Math.max(de.max.x,F.x)-de.max.x)/(K.max.x-de.max.x)-(Math.min(de.min.x,F.x)-de.min.x)/(K.min.x-de.min.x),(Math.max(de.max.y,F.y)-de.max.y)/(K.max.y-de.max.y)-(Math.min(de.min.y,F.y)-de.min.y)/(K.min.y-de.min.y)).multiplyBy(A);w.panBy(ve,{animate:!1}),this._draggable._newPos._add(ve),this._draggable._startPos._add(ve),Le(h._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=me(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(fe(this._panRequest),this._panRequest=me(this._adjustPan.bind(this,o)))},_onDrag:function(o){var h=this._marker,w=h._shadow,A=on(h._icon),N=h._map.layerPointToLatLng(A);w&&Le(w,A),h._latlng=N,o.latlng=N,o.oldLatLng=this._oldLatLng,h.fire("move",o).fire("drag",o)},_onDragEnd:function(o){fe(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),xr=Rn.extend({options:{icon:new Lo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,h){P(this,h),this._latlng=re(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var h=this._latlng;return this._latlng=re(o),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),w=o.icon.createIcon(this._icon),A=!1;w!==this._icon&&(this._icon&&this._removeIcon(),A=!0,o.title&&(w.title=o.title),w.tagName==="IMG"&&(w.alt=o.alt||"")),Ge(w,h),o.keyboard&&(w.tabIndex="0",w.setAttribute("role","button")),this._icon=w,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&lt(w,"focus",this._panOnFocus,this);var N=o.icon.createShadow(this._shadow),F=!1;N!==this._shadow&&(this._removeShadow(),F=!0),N&&(Ge(N,h),N.alt=""),this._shadow=N,o.opacity<1&&this._updateOpacity(),A&&this.getPane().appendChild(this._icon),this._initInteraction(),N&&F&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&De(this._icon,"focus",this._panOnFocus,this),tn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&tn(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&Le(this._icon,o),this._shadow&&Le(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(Ge(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Nl)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Nl(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&St(this._icon,o),this._shadow&&St(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var h=this.options.icon.options,w=h.iconSize?ge(h.iconSize):ge(0,0),A=h.iconAnchor?ge(h.iconAnchor):ge(0,0);o.panInside(this._latlng,{paddingTopLeft:A,paddingBottomRight:w.subtract(A)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Dh(o,h){return new xr(o,h)}var si=Rn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return P(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Vi=si.extend({options:{fill:!0,radius:10},initialize:function(o,h){P(this,h),this._latlng=re(o),this._radius=this.options.radius},setLatLng:function(o){var h=this._latlng;return this._latlng=re(o),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var h=o&&o.radius||this._radius;return si.prototype.setStyle.call(this,o),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,h=this._radiusY||o,w=this._clickTolerance(),A=[o+w,h+w];this._pxBounds=new Se(this._point.subtract(A),this._point.add(A))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Dt(o,h){return new Vi(o,h)}var Ls=Vi.extend({initialize:function(o,h,w){if(typeof h=="number"&&(h=a({},w,{radius:h})),P(this,h),this._latlng=re(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new Pe(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:si.prototype.setStyle,_project:function(){var o=this._latlng.lng,h=this._latlng.lat,w=this._map,A=w.options.crs;if(A.distance===Xe.distance){var N=Math.PI/180,F=this._mRadius/Xe.R/N,K=w.project([h+F,o]),oe=w.project([h-F,o]),de=K.add(oe).divideBy(2),ve=w.unproject(de).lat,Ve=Math.acos((Math.cos(F*N)-Math.sin(h*N)*Math.sin(ve*N))/(Math.cos(h*N)*Math.cos(ve*N)))/N;(isNaN(Ve)||Ve===0)&&(Ve=F/Math.cos(Math.PI/180*h)),this._point=de.subtract(w.getPixelOrigin()),this._radius=isNaN(Ve)?0:de.x-w.project([ve,o-Ve]).x,this._radiusY=de.y-K.y}else{var ot=A.unproject(A.project(this._latlng).subtract([this._mRadius,0]));this._point=w.latLngToLayerPoint(this._latlng),this._radius=this._point.x-w.latLngToLayerPoint(ot).x}this._updateBounds()}});function M(o,h,w){return new Ls(o,h,w)}var r=si.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,h){P(this,h),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var h=1/0,w=null,A=ss,N,F,K=0,oe=this._parts.length;K<oe;K++)for(var de=this._parts[K],ve=1,Ve=de.length;ve<Ve;ve++){N=de[ve-1],F=de[ve];var ot=A(o,N,F,!0);ot<h&&(h=ot,w=A(o,N,F))}return w&&(w.distance=Math.sqrt(h)),w},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Cl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,h){return h=h||this._defaultShape(),o=re(o),h.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new Pe,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return gr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var h=[],w=gr(o),A=0,N=o.length;A<N;A++)w?(h[A]=re(o[A]),this._bounds.extend(h[A])):h[A]=this._convertLatLngs(o[A]);return h},_project:function(){var o=new Se;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),h=new ue(o,o);this._rawPxBounds&&(this._pxBounds=new Se([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(o,h,w){var A=o[0]instanceof $,N=o.length,F,K;if(A){for(K=[],F=0;F<N;F++)K[F]=this._map.latLngToLayerPoint(o[F]),w.extend(K[F]);h.push(K)}else for(F=0;F<N;F++)this._projectLatlngs(o[F],h,w)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,w,A,N,F,K,oe,de;for(w=0,N=0,F=this._rings.length;w<F;w++)for(de=this._rings[w],A=0,K=de.length;A<K-1;A++)oe=zi(de[A],de[A+1],o,A,!0),oe&&(h[N]=h[N]||[],h[N].push(oe[0]),(oe[1]!==de[A+1]||A===K-2)&&(h[N].push(oe[1]),N++))}},_simplifyPoints:function(){for(var o=this._parts,h=this.options.smoothFactor,w=0,A=o.length;w<A;w++)o[w]=cn(o[w],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,h){var w,A,N,F,K,oe,de=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(w=0,F=this._parts.length;w<F;w++)for(oe=this._parts[w],A=0,K=oe.length,N=K-1;A<K;N=A++)if(!(!h&&A===0)&&Oo(o,oe[N],oe[A])<=de)return!0;return!1}});function s(o,h){return new r(o,h)}r._flat=xa;var l=r.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ga(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var h=r.prototype._convertLatLngs.call(this,o),w=h.length;return w>=2&&h[0]instanceof $&&h[0].equals(h[w-1])&&h.pop(),h},_setLatLngs:function(o){r.prototype._setLatLngs.call(this,o),gr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return gr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,h=this.options.weight,w=new ue(h,h);if(o=new Se(o.min.subtract(w),o.max.add(w)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var A=0,N=this._rings.length,F;A<N;A++)F=su(this._rings[A],o,!0),F.length&&this._parts.push(F)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var h=!1,w,A,N,F,K,oe,de,ve;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(F=0,de=this._parts.length;F<de;F++)for(w=this._parts[F],K=0,ve=w.length,oe=ve-1;K<ve;oe=K++)A=w[K],N=w[oe],A.y>o.y!=N.y>o.y&&o.x<(N.x-A.x)*(o.y-A.y)/(N.y-A.y)+A.x&&(h=!h);return h||r.prototype._containsPoint.call(this,o,!0)}});function u(o,h){return new l(o,h)}var d=ri.extend({initialize:function(o,h){P(this,h),this._layers={},o&&this.addData(o)},addData:function(o){var h=k(o)?o:o.features,w,A,N;if(h){for(w=0,A=h.length;w<A;w++)N=h[w],(N.geometries||N.geometry||N.features||N.coordinates)&&this.addData(N);return this}var F=this.options;if(F.filter&&!F.filter(o))return this;var K=p(o,F);return K?(K.feature=Y(o),K.defaultOptions=K.options,this.resetStyle(K),F.onEachFeature&&F.onEachFeature(o,K),this.addLayer(K)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=a({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(h){this._setLayerStyle(h,o)},this)},_setLayerStyle:function(o,h){o.setStyle&&(typeof h=="function"&&(h=h(o.feature)),o.setStyle(h))}});function p(o,h){var w=o.type==="Feature"?o.geometry:o,A=w?w.coordinates:null,N=[],F=h&&h.pointToLayer,K=h&&h.coordsToLatLng||_,oe,de,ve,Ve;if(!A&&!w)return null;switch(w.type){case"Point":return oe=K(A),x(F,o,oe,h);case"MultiPoint":for(ve=0,Ve=A.length;ve<Ve;ve++)oe=K(A[ve]),N.push(x(F,o,oe,h));return new ri(N);case"LineString":case"MultiLineString":return de=C(A,w.type==="LineString"?0:1,K),new r(de,h);case"Polygon":case"MultiPolygon":return de=C(A,w.type==="Polygon"?1:2,K),new l(de,h);case"GeometryCollection":for(ve=0,Ve=w.geometries.length;ve<Ve;ve++){var ot=p({geometry:w.geometries[ve],type:"Feature",properties:o.properties},h);ot&&N.push(ot)}return new ri(N);case"FeatureCollection":for(ve=0,Ve=w.features.length;ve<Ve;ve++){var It=p(w.features[ve],h);It&&N.push(It)}return new ri(N);default:throw new Error("Invalid GeoJSON object.")}}function x(o,h,w,A){return o?o(h,w):new xr(w,A&&A.markersInheritOptions&&A)}function _(o){return new $(o[1],o[0],o[2])}function C(o,h,w){for(var A=[],N=0,F=o.length,K;N<F;N++)K=h?C(o[N],h-1,w):(w||_)(o[N]),A.push(K);return A}function E(o,h){return o=re(o),o.alt!==void 0?[T(o.lng,h),T(o.lat,h),T(o.alt,h)]:[T(o.lng,h),T(o.lat,h)]}function R(o,h,w,A){for(var N=[],F=0,K=o.length;F<K;F++)N.push(h?R(o[F],gr(o[F])?0:h-1,w,A):E(o[F],A));return!h&&w&&N.length>0&&N.push(N[0].slice()),N}function B(o,h){return o.feature?a({},o.feature,{geometry:h}):Y(h)}function Y(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var Q={toGeoJSON:function(o){return B(this,{type:"Point",coordinates:E(this.getLatLng(),o)})}};xr.include(Q),Ls.include(Q),Vi.include(Q),r.include({toGeoJSON:function(o){var h=!gr(this._latlngs),w=R(this._latlngs,h?1:0,!1,o);return B(this,{type:(h?"Multi":"")+"LineString",coordinates:w})}}),l.include({toGeoJSON:function(o){var h=!gr(this._latlngs),w=h&&!gr(this._latlngs[0]),A=R(this._latlngs,w?2:h?1:0,!0,o);return h||(A=[A]),B(this,{type:(w?"Multi":"")+"Polygon",coordinates:A})}}),Ai.include({toMultiPoint:function(o){var h=[];return this.eachLayer(function(w){h.push(w.toGeoJSON(o).geometry.coordinates)}),B(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(o){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(o);var w=h==="GeometryCollection",A=[];return this.eachLayer(function(N){if(N.toGeoJSON){var F=N.toGeoJSON(o);if(w)A.push(F.geometry);else{var K=Y(F);K.type==="FeatureCollection"?A.push.apply(A,K.features):A.push(K)}}}),w?B(this,{geometries:A,type:"GeometryCollection"}):{type:"FeatureCollection",features:A}}});function ee(o,h){return new d(o,h)}var ie=ee,le=Rn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,h,w){this._url=o,this._bounds=ze(h),P(this,w)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ge(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){tn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&sn(this._image),this},bringToBack:function(){return this._map&&pr(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=ze(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",h=this._image=o?this._url:Ot("img");if(Ge(h,"leaflet-image-layer"),this._zoomAnimated&&Ge(h,"leaflet-zoom-animated"),this.options.className&&Ge(h,this.options.className),h.onselectstart=b,h.onmousemove=b,h.onload=f(this.fire,this,"load"),h.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(o){var h=this._map.getZoomScale(o.zoom),w=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;W(this._image,w,h)},_reset:function(){var o=this._image,h=new Se(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),w=h.getSize();Le(o,h.min),o.style.width=w.x+"px",o.style.height=w.y+"px"},_updateOpacity:function(){St(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),Ae=function(o,h,w){return new le(o,h,w)},Ee=le.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",h=this._image=o?this._url:Ot("video");if(Ge(h,"leaflet-image-layer"),this._zoomAnimated&&Ge(h,"leaflet-zoom-animated"),this.options.className&&Ge(h,this.options.className),h.onselectstart=b,h.onmousemove=b,h.onloadeddata=f(this.fire,this,"load"),o){for(var w=h.getElementsByTagName("source"),A=[],N=0;N<w.length;N++)A.push(w[N].src);this._url=w.length>0?A:[h.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var F=0;F<this._url.length;F++){var K=Ot("source");K.src=this._url[F],h.appendChild(K)}}});function be(o,h,w){return new Ee(o,h,w)}var At=le.extend({_initImage:function(){var o=this._image=this._url;Ge(o,"leaflet-image-layer"),this._zoomAnimated&&Ge(o,"leaflet-zoom-animated"),this.options.className&&Ge(o,this.options.className),o.onselectstart=b,o.onmousemove=b}});function pt(o,h,w){return new At(o,h,w)}var un=Rn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,h){o&&(o instanceof $||k(o))?(this._latlng=re(o),P(this,h)):(P(this,o),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&St(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&St(this._container,1),this.bringToFront(),this.options.interactive&&(Ge(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(St(this._container,0),this._removeTimeout=setTimeout(f(tn,void 0,this._container),200)):tn(this._container),this.options.interactive&&(Ht(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=re(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&sn(this._container),this},bringToBack:function(){return this._map&&pr(this._container),this},_prepareOpen:function(o){var h=this._source;if(!h._map)return!1;if(h instanceof ri){h=null;var w=this._source._layers;for(var A in w)if(w[A]._map){h=w[A];break}if(!h)return!1;this._source=h}if(!o)if(h.getCenter)o=h.getCenter();else if(h.getLatLng)o=h.getLatLng();else if(h.getBounds)o=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")o.innerHTML=h;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),h=ge(this.options.offset),w=this._getAnchor();this._zoomAnimated?Le(this._container,o.add(w)):h=h.add(o).add(w);var A=this._containerBottom=-h.y,N=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=A+"px",this._container.style.left=N+"px"}},_getAnchor:function(){return[0,0]}});kt.include({_initOverlay:function(o,h,w,A){var N=h;return N instanceof o||(N=new o(A).setContent(h)),w&&N.setLatLng(w),N}}),Rn.include({_initOverlay:function(o,h,w,A){var N=w;return N instanceof o?(P(N,A),N._source=this):(N=h&&!A?h:new o(A,this),N.setContent(w)),N}});var sr=un.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,un.prototype.openOn.call(this,o)},onAdd:function(o){un.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof si||this._source.on("preclick",bi))},onRemove:function(o){un.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof si||this._source.off("preclick",bi))},getEvents:function(){var o=un.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",h=this._container=Ot("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),w=this._wrapper=Ot("div",o+"-content-wrapper",h);if(this._contentNode=Ot("div",o+"-content",w),jr(h),fa(this._contentNode),lt(h,"contextmenu",bi),this._tipContainer=Ot("div",o+"-tip-container",h),this._tip=Ot("div",o+"-tip",this._tipContainer),this.options.closeButton){var A=this._closeButton=Ot("a",o+"-close-button",h);A.setAttribute("role","button"),A.setAttribute("aria-label","Close popup"),A.href="#close",A.innerHTML='<span aria-hidden="true">&#215;</span>',lt(A,"click",function(N){Bn(N),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,h=o.style;h.width="",h.whiteSpace="nowrap";var w=o.offsetWidth;w=Math.min(w,this.options.maxWidth),w=Math.max(w,this.options.minWidth),h.width=w+1+"px",h.whiteSpace="",h.height="";var A=o.offsetHeight,N=this.options.maxHeight,F="leaflet-popup-scrolled";N&&A>N?(h.height=N+"px",Ge(o,F)):Ht(o,F),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),w=this._getAnchor();Le(this._container,h.add(w))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,h=parseInt(vt(this._container,"marginBottom"),10)||0,w=this._container.offsetHeight+h,A=this._containerWidth,N=new ue(this._containerLeft,-w-this._containerBottom);N._add(on(this._container));var F=o.layerPointToContainerPoint(N),K=ge(this.options.autoPanPadding),oe=ge(this.options.autoPanPaddingTopLeft||K),de=ge(this.options.autoPanPaddingBottomRight||K),ve=o.getSize(),Ve=0,ot=0;F.x+A+de.x>ve.x&&(Ve=F.x+A-ve.x+de.x),F.x-Ve-oe.x<0&&(Ve=F.x-oe.x),F.y+w+de.y>ve.y&&(ot=F.y+w-ve.y+de.y),F.y-ot-oe.y<0&&(ot=F.y-oe.y),(Ve||ot)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([Ve,ot]))}},_getAnchor:function(){return ge(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),or=function(o,h){return new sr(o,h)};kt.mergeOptions({closePopupOnClick:!0}),kt.include({openPopup:function(o,h,w){return this._initOverlay(sr,o,h,w).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),Rn.include({bindPopup:function(o,h){return this._popup=this._initOverlay(sr,this._popup,o,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof ri||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){Br(o);var h=o.layer||o.target;if(this._popup._source===h&&!(h instanceof si)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=h,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var Ut=un.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){un.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){un.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=un.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",h=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ot("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var h,w,A=this._map,N=this._container,F=A.latLngToContainerPoint(A.getCenter()),K=A.layerPointToContainerPoint(o),oe=this.options.direction,de=N.offsetWidth,ve=N.offsetHeight,Ve=ge(this.options.offset),ot=this._getAnchor();oe==="top"?(h=de/2,w=ve):oe==="bottom"?(h=de/2,w=0):oe==="center"?(h=de/2,w=ve/2):oe==="right"?(h=0,w=ve/2):oe==="left"?(h=de,w=ve/2):K.x<F.x?(oe="right",h=0,w=ve/2):(oe="left",h=de+(Ve.x+ot.x)*2,w=ve/2),o=o.subtract(ge(h,w,!0)).add(Ve).add(ot),Ht(N,"leaflet-tooltip-right"),Ht(N,"leaflet-tooltip-left"),Ht(N,"leaflet-tooltip-top"),Ht(N,"leaflet-tooltip-bottom"),Ge(N,"leaflet-tooltip-"+oe),Le(N,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&St(this._container,o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(h)},_getAnchor:function(){return ge(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),zn=function(o,h){return new Ut(o,h)};kt.include({openTooltip:function(o,h,w){return this._initOverlay(Ut,o,h,w).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),Rn.include({bindTooltip:function(o,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ut,this._tooltip,o,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var h=o?"off":"on",w={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?w.add=this._openTooltip:(w.mouseover=this._openTooltip,w.mouseout=this.closeTooltip,w.click=this._openTooltip,this._map?this._addFocusListeners():w.add=this._addFocusListeners),this._tooltip.options.sticky&&(w.mousemove=this._moveTooltip),this[h](w),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof ri||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&(lt(h,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),lt(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var h=o.latlng,w,A;this._tooltip.options.sticky&&o.originalEvent&&(w=this._map.mouseEventToContainerPoint(o.originalEvent),A=this._map.containerPointToLayerPoint(w),h=this._map.layerPointToLatLng(A)),this._tooltip.setLatLng(h)}});var ar=Os.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var h=o&&o.tagName==="DIV"?o:document.createElement("div"),w=this.options;if(w.html instanceof Element?(Ts(h),h.appendChild(w.html)):h.innerHTML=w.html!==!1?w.html:"",w.bgPos){var A=ge(w.bgPos);h.style.backgroundPosition=-A.x+"px "+-A.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function Ps(o){return new ar(o)}Os.Default=Lo;var oi=Rn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Fe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){P(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),tn(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(sn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(pr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=y(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof ue?o:new ue(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var h=this.getPane().children,w=-o(-1/0,1/0),A=0,N=h.length,F;A<N;A++)F=h[A].style.zIndex,h[A]!==this._container&&F&&(w=o(w,+F));isFinite(w)&&(this.options.zIndex=w+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Fe.ielt9){St(this._container,this.options.opacity);var o=+new Date,h=!1,w=!1;for(var A in this._tiles){var N=this._tiles[A];if(!(!N.current||!N.loaded)){var F=Math.min(1,(o-N.loaded)/200);St(N.el,F),F<1?h=!0:(N.active?w=!0:this._onOpaqueTile(N),N.active=!0)}}w&&!this._noPrune&&this._pruneTiles(),h&&(fe(this._fadeFrame),this._fadeFrame=me(this._updateOpacity,this))}},_onOpaqueTile:b,_initContainer:function(){this._container||(this._container=Ot("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,h=this.options.maxZoom;if(o!==void 0){for(var w in this._levels)w=Number(w),this._levels[w].el.children.length||w===o?(this._levels[w].el.style.zIndex=h-Math.abs(o-w),this._onUpdateLevel(w)):(tn(this._levels[w].el),this._removeTilesAtZoom(w),this._onRemoveLevel(w),delete this._levels[w]);var A=this._levels[o],N=this._map;return A||(A=this._levels[o]={},A.el=Ot("div","leaflet-tile-container leaflet-zoom-animated",this._container),A.el.style.zIndex=h,A.origin=N.project(N.unproject(N.getPixelOrigin()),o).round(),A.zoom=o,this._setZoomTransform(A,N.getCenter(),N.getZoom()),b(A.el.offsetWidth),this._onCreateLevel(A)),this._level=A,A}},_onUpdateLevel:b,_onRemoveLevel:b,_onCreateLevel:b,_pruneTiles:function(){if(this._map){var o,h,w=this._map.getZoom();if(w>this.options.maxZoom||w<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)h=this._tiles[o],h.retain=h.current;for(o in this._tiles)if(h=this._tiles[o],h.current&&!h.active){var A=h.coords;this._retainParent(A.x,A.y,A.z,A.z-5)||this._retainChildren(A.x,A.y,A.z,A.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var h in this._tiles)this._tiles[h].coords.z===o&&this._removeTile(h)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)tn(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,h,w,A){var N=Math.floor(o/2),F=Math.floor(h/2),K=w-1,oe=new ue(+N,+F);oe.z=+K;var de=this._tileCoordsToKey(oe),ve=this._tiles[de];return ve&&ve.active?(ve.retain=!0,!0):(ve&&ve.loaded&&(ve.retain=!0),K>A?this._retainParent(N,F,K,A):!1)},_retainChildren:function(o,h,w,A){for(var N=2*o;N<2*o+2;N++)for(var F=2*h;F<2*h+2;F++){var K=new ue(N,F);K.z=w+1;var oe=this._tileCoordsToKey(K),de=this._tiles[oe];if(de&&de.active){de.retain=!0;continue}else de&&de.loaded&&(de.retain=!0);w+1<A&&this._retainChildren(N,F,w+1,A)}},_resetView:function(o){var h=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var h=this.options;return h.minNativeZoom!==void 0&&o<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<o?h.maxNativeZoom:o},_setView:function(o,h,w,A){var N=Math.round(h);this.options.maxZoom!==void 0&&N>this.options.maxZoom||this.options.minZoom!==void 0&&N<this.options.minZoom?N=void 0:N=this._clampZoom(N);var F=this.options.updateWhenZooming&&N!==this._tileZoom;(!A||F)&&(this._tileZoom=N,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),N!==void 0&&this._update(o),w||this._pruneTiles(),this._noPrune=!!w),this._setZoomTransforms(o,h)},_setZoomTransforms:function(o,h){for(var w in this._levels)this._setZoomTransform(this._levels[w],o,h)},_setZoomTransform:function(o,h,w){var A=this._map.getZoomScale(w,o.zoom),N=o.origin.multiplyBy(A).subtract(this._map._getNewPixelOrigin(h,w)).round();Fe.any3d?W(o.el,N,A):Le(o.el,N)},_resetGrid:function(){var o=this._map,h=o.options.crs,w=this._tileSize=this.getTileSize(),A=this._tileZoom,N=this._map.getPixelWorldBounds(this._tileZoom);N&&(this._globalTileRange=this._pxBoundsToTileRange(N)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,h.wrapLng[0]],A).x/w.x),Math.ceil(o.project([0,h.wrapLng[1]],A).x/w.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([h.wrapLat[0],0],A).y/w.x),Math.ceil(o.project([h.wrapLat[1],0],A).y/w.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var h=this._map,w=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),A=h.getZoomScale(w,this._tileZoom),N=h.project(o,this._tileZoom).floor(),F=h.getSize().divideBy(A*2);return new Se(N.subtract(F),N.add(F))},_update:function(o){var h=this._map;if(h){var w=this._clampZoom(h.getZoom());if(o===void 0&&(o=h.getCenter()),this._tileZoom!==void 0){var A=this._getTiledPixelBounds(o),N=this._pxBoundsToTileRange(A),F=N.getCenter(),K=[],oe=this.options.keepBuffer,de=new Se(N.getBottomLeft().subtract([oe,-oe]),N.getTopRight().add([oe,-oe]));if(!(isFinite(N.min.x)&&isFinite(N.min.y)&&isFinite(N.max.x)&&isFinite(N.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ve in this._tiles){var Ve=this._tiles[ve].coords;(Ve.z!==this._tileZoom||!de.contains(new ue(Ve.x,Ve.y)))&&(this._tiles[ve].current=!1)}if(Math.abs(w-this._tileZoom)>1){this._setView(o,w);return}for(var ot=N.min.y;ot<=N.max.y;ot++)for(var It=N.min.x;It<=N.max.x;It++){var yr=new ue(It,ot);if(yr.z=this._tileZoom,!!this._isValidTile(yr)){var qn=this._tiles[this._tileCoordsToKey(yr)];qn?qn.current=!0:K.push(yr)}}if(K.sort(function(Nr,ya){return Nr.distanceTo(F)-ya.distanceTo(F)}),K.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ai=document.createDocumentFragment();for(It=0;It<K.length;It++)this._addTile(K[It],ai);this._level.el.appendChild(ai)}}}},_isValidTile:function(o){var h=this._map.options.crs;if(!h.infinite){var w=this._globalTileRange;if(!h.wrapLng&&(o.x<w.min.x||o.x>w.max.x)||!h.wrapLat&&(o.y<w.min.y||o.y>w.max.y))return!1}if(!this.options.bounds)return!0;var A=this._tileCoordsToBounds(o);return ze(this.options.bounds).overlaps(A)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var h=this._map,w=this.getTileSize(),A=o.scaleBy(w),N=A.add(w),F=h.unproject(A,o.z),K=h.unproject(N,o.z);return[F,K]},_tileCoordsToBounds:function(o){var h=this._tileCoordsToNwSe(o),w=new Pe(h[0],h[1]);return this.options.noWrap||(w=this._map.wrapLatLngBounds(w)),w},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var h=o.split(":"),w=new ue(+h[0],+h[1]);return w.z=+h[2],w},_removeTile:function(o){var h=this._tiles[o];h&&(tn(h.el),delete this._tiles[o],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){Ge(o,"leaflet-tile");var h=this.getTileSize();o.style.width=h.x+"px",o.style.height=h.y+"px",o.onselectstart=b,o.onmousemove=b,Fe.ielt9&&this.options.opacity<1&&St(o,this.options.opacity)},_addTile:function(o,h){var w=this._getTilePos(o),A=this._tileCoordsToKey(o),N=this.createTile(this._wrapCoords(o),f(this._tileReady,this,o));this._initTile(N),this.createTile.length<2&&me(f(this._tileReady,this,o,null,N)),Le(N,w),this._tiles[A]={el:N,coords:o,current:!0},h.appendChild(N),this.fire("tileloadstart",{tile:N,coords:o})},_tileReady:function(o,h,w){h&&this.fire("tileerror",{error:h,tile:w,coords:o});var A=this._tileCoordsToKey(o);w=this._tiles[A],w&&(w.loaded=+new Date,this._map._fadeAnimated?(St(w.el,0),fe(this._fadeFrame),this._fadeFrame=me(this._updateOpacity,this)):(w.active=!0,this._pruneTiles()),h||(Ge(w.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:w.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Fe.ielt9||!this._map._fadeAnimated?me(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var h=new ue(this._wrapX?S(o.x,this._wrapX):o.x,this._wrapY?S(o.y,this._wrapY):o.y);return h.z=o.z,h},_pxBoundsToTileRange:function(o){var h=this.getTileSize();return new Se(o.min.unscaleBy(h).floor(),o.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function jh(o){return new oi(o)}var Ds=oi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,h){this._url=o,h=P(this,h),h.detectRetina&&Fe.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,h){return this._url===o&&h===void 0&&(h=!0),this._url=o,h||this.redraw(),this},createTile:function(o,h){var w=document.createElement("img");return lt(w,"load",f(this._tileOnLoad,this,h,w)),lt(w,"error",f(this._tileOnError,this,h,w)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(w.referrerPolicy=this.options.referrerPolicy),w.alt="",w.src=this.getTileUrl(o),w},getTileUrl:function(o){var h={r:Fe.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var w=this._globalTileRange.max.y-o.y;this.options.tms&&(h.y=w),h["-y"]=w}return O(this._url,a(h,this.options))},_tileOnLoad:function(o,h){Fe.ielt9?setTimeout(f(o,this,null,h),0):o(null,h)},_tileOnError:function(o,h,w){var A=this.options.errorTileUrl;A&&h.getAttribute("src")!==A&&(h.src=A),o(w,h)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,h=this.options.maxZoom,w=this.options.zoomReverse,A=this.options.zoomOffset;return w&&(o=h-o),o+A},_getSubdomain:function(o){var h=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var o,h;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(h=this._tiles[o].el,h.onload=b,h.onerror=b,!h.complete)){h.src=X;var w=this._tiles[o].coords;tn(h),delete this._tiles[o],this.fire("tileabort",{tile:h,coords:w})}},_removeTile:function(o){var h=this._tiles[o];if(h)return h.el.setAttribute("src",X),oi.prototype._removeTile.call(this,o)},_tileReady:function(o,h,w){if(!(!this._map||w&&w.getAttribute("src")===X))return oi.prototype._tileReady.call(this,o,h,w)}});function tm(o,h){return new Ds(o,h)}var nm=Ds.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,h){this._url=o;var w=a({},this.defaultWmsParams);for(var A in h)A in this.options||(w[A]=h[A]);h=P(this,h);var N=h.detectRetina&&Fe.retina?2:1,F=this.getTileSize();w.width=F.x*N,w.height=F.y*N,this.wmsParams=w},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,Ds.prototype.onAdd.call(this,o)},getTileUrl:function(o){var h=this._tileCoordsToNwSe(o),w=this._crs,A=Be(w.project(h[0]),w.project(h[1])),N=A.min,F=A.max,K=(this._wmsVersion>=1.3&&this._crs===Rs?[N.y,N.x,F.y,F.x]:[N.x,N.y,F.x,F.y]).join(","),oe=Ds.prototype.getTileUrl.call(this,o);return oe+U(this.wmsParams,oe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+K},setParams:function(o,h){return a(this.wmsParams,o),h||this.redraw(),this}});function dC(o,h){return new nm(o,h)}Ds.WMS=nm,tm.wms=dC;var os=Rn.extend({options:{padding:.1},initialize:function(o){P(this,o),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ge(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,h){var w=this._map.getZoomScale(h,this._zoom),A=this._map.getSize().multiplyBy(.5+this.options.padding),N=this._map.project(this._center,h),F=A.multiplyBy(-w).add(N).subtract(this._map._getNewPixelOrigin(o,h));Fe.any3d?W(this._container,F,w):Le(this._container,F)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,h=this._map.getSize(),w=this._map.containerPointToLayerPoint(h.multiplyBy(-o)).round();this._bounds=new Se(w,w.add(h.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),rm=os.extend({options:{tolerance:0},getEvents:function(){var o=os.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){os.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");lt(o,"mousemove",this._onMouseMove,this),lt(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),lt(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){fe(this._redrawRequest),delete this._ctx,tn(this._container),De(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var h in this._layers)o=this._layers[h],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){os.prototype._update.call(this);var o=this._bounds,h=this._container,w=o.getSize(),A=Fe.retina?2:1;Le(h,o.min),h.width=A*w.x,h.height=A*w.y,h.style.width=w.x+"px",h.style.height=w.y+"px",Fe.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){os.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[v(o)]=o;var h=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var h=o._order,w=h.next,A=h.prev;w?w.prev=A:this._drawLast=A,A?A.next=w:this._drawFirst=w,delete o._order,delete this._layers[v(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var h=o.options.dashArray.split(/[, ]+/),w=[],A,N;for(N=0;N<h.length;N++){if(A=Number(h[N]),isNaN(A))return;w.push(A)}o.options._dashArray=w}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||me(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var h=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Se,this._redrawBounds.extend(o._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(o._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var h=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,h=this._redrawBounds;if(this._ctx.save(),h){var w=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,w.x,w.y),this._ctx.clip()}this._drawing=!0;for(var A=this._drawFirst;A;A=A.next)o=A.layer,(!h||o._pxBounds&&o._pxBounds.intersects(h))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,h){if(this._drawing){var w,A,N,F,K=o._parts,oe=K.length,de=this._ctx;if(oe){for(de.beginPath(),w=0;w<oe;w++){for(A=0,N=K[w].length;A<N;A++)F=K[w][A],de[A?"lineTo":"moveTo"](F.x,F.y);h&&de.closePath()}this._fillStroke(de,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var h=o._point,w=this._ctx,A=Math.max(Math.round(o._radius),1),N=(Math.max(Math.round(o._radiusY),1)||A)/A;N!==1&&(w.save(),w.scale(1,N)),w.beginPath(),w.arc(h.x,h.y/N,A,0,Math.PI*2,!1),N!==1&&w.restore(),this._fillStroke(w,o)}},_fillStroke:function(o,h){var w=h.options;w.fill&&(o.globalAlpha=w.fillOpacity,o.fillStyle=w.fillColor||w.color,o.fill(w.fillRule||"evenodd")),w.stroke&&w.weight!==0&&(o.setLineDash&&o.setLineDash(h.options&&h.options._dashArray||[]),o.globalAlpha=w.opacity,o.lineWidth=w.weight,o.strokeStyle=w.color,o.lineCap=w.lineCap,o.lineJoin=w.lineJoin,o.stroke())},_onClick:function(o){for(var h=this._map.mouseEventToLayerPoint(o),w,A,N=this._drawFirst;N;N=N.next)w=N.layer,w.options.interactive&&w._containsPoint(h)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(w))&&(A=w);this._fireEvent(A?[A]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,h)}},_handleMouseOut:function(o){var h=this._hoveredLayer;h&&(Ht(this._container,"leaflet-interactive"),this._fireEvent([h],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,h){if(!this._mouseHoverThrottled){for(var w,A,N=this._drawFirst;N;N=N.next)w=N.layer,w.options.interactive&&w._containsPoint(h)&&(A=w);A!==this._hoveredLayer&&(this._handleMouseOut(o),A&&(Ge(this._container,"leaflet-interactive"),this._fireEvent([A],o,"mouseover"),this._hoveredLayer=A)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,h,w){this._map._fireDOMEvent(h,w||h.type,o)},_bringToFront:function(o){var h=o._order;if(h){var w=h.next,A=h.prev;if(w)w.prev=A;else return;A?A.next=w:w&&(this._drawFirst=w),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(o)}},_bringToBack:function(o){var h=o._order;if(h){var w=h.next,A=h.prev;if(A)A.next=w;else return;w?w.prev=A:A&&(this._drawLast=A),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(o)}}});function im(o){return Fe.canvas?new rm(o):null}var Tl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),hC={_initContainer:function(){this._container=Ot("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(os.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var h=o._container=Tl("shape");Ge(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",o._path=Tl("path"),h.appendChild(o._path),this._updateStyle(o),this._layers[v(o)]=o},_addPath:function(o){var h=o._container;this._container.appendChild(h),o.options.interactive&&o.addInteractiveTarget(h)},_removePath:function(o){var h=o._container;tn(h),o.removeInteractiveTarget(h),delete this._layers[v(o)]},_updateStyle:function(o){var h=o._stroke,w=o._fill,A=o.options,N=o._container;N.stroked=!!A.stroke,N.filled=!!A.fill,A.stroke?(h||(h=o._stroke=Tl("stroke")),N.appendChild(h),h.weight=A.weight+"px",h.color=A.color,h.opacity=A.opacity,A.dashArray?h.dashStyle=k(A.dashArray)?A.dashArray.join(" "):A.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=A.lineCap.replace("butt","flat"),h.joinstyle=A.lineJoin):h&&(N.removeChild(h),o._stroke=null),A.fill?(w||(w=o._fill=Tl("fill")),N.appendChild(w),w.color=A.fillColor||A.color,w.opacity=A.fillOpacity):w&&(N.removeChild(w),o._fill=null)},_updateCircle:function(o){var h=o._point.round(),w=Math.round(o._radius),A=Math.round(o._radiusY||w);this._setPath(o,o._empty()?"M0 0":"AL "+h.x+","+h.y+" "+w+","+A+" 0,"+65535*360)},_setPath:function(o,h){o._path.v=h},_bringToFront:function(o){sn(o._container)},_bringToBack:function(o){pr(o._container)}},au=Fe.vml?Tl:In,Il=os.extend({_initContainer:function(){this._container=au("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=au("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){tn(this._container),De(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){os.prototype._update.call(this);var o=this._bounds,h=o.getSize(),w=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,w.setAttribute("width",h.x),w.setAttribute("height",h.y)),Le(w,o.min),w.setAttribute("viewBox",[o.min.x,o.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(o){var h=o._path=au("path");o.options.className&&Ge(h,o.options.className),o.options.interactive&&Ge(h,"leaflet-interactive"),this._updateStyle(o),this._layers[v(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){tn(o._path),o.removeInteractiveTarget(o._path),delete this._layers[v(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var h=o._path,w=o.options;h&&(w.stroke?(h.setAttribute("stroke",w.color),h.setAttribute("stroke-opacity",w.opacity),h.setAttribute("stroke-width",w.weight),h.setAttribute("stroke-linecap",w.lineCap),h.setAttribute("stroke-linejoin",w.lineJoin),w.dashArray?h.setAttribute("stroke-dasharray",w.dashArray):h.removeAttribute("stroke-dasharray"),w.dashOffset?h.setAttribute("stroke-dashoffset",w.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),w.fill?(h.setAttribute("fill",w.fillColor||w.color),h.setAttribute("fill-opacity",w.fillOpacity),h.setAttribute("fill-rule",w.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(o,h){this._setPath(o,rr(o._parts,h))},_updateCircle:function(o){var h=o._point,w=Math.max(Math.round(o._radius),1),A=Math.max(Math.round(o._radiusY),1)||w,N="a"+w+","+A+" 0 1,0 ",F=o._empty()?"M0 0":"M"+(h.x-w)+","+h.y+N+w*2+",0 "+N+-w*2+",0 ";this._setPath(o,F)},_setPath:function(o,h){o._path.setAttribute("d",h)},_bringToFront:function(o){sn(o._path)},_bringToBack:function(o){pr(o._path)}});Fe.vml&&Il.include(hC);function sm(o){return Fe.svg||Fe.vml?new Il(o):null}kt.include({getRenderer:function(o){var h=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var h=this._paneRenderers[o];return h===void 0&&(h=this._createRenderer({pane:o}),this._paneRenderers[o]=h),h},_createRenderer:function(o){return this.options.preferCanvas&&im(o)||sm(o)}});var om=l.extend({initialize:function(o,h){l.prototype.initialize.call(this,this._boundsToLatLngs(o),h)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=ze(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function fC(o,h){return new om(o,h)}Il.create=au,Il.pointsToPath=rr,d.geometryToLayer=p,d.coordsToLatLng=_,d.coordsToLatLngs=C,d.latLngToCoords=E,d.latLngsToCoords=R,d.getFeature=B,d.asFeature=Y,kt.mergeOptions({boxZoom:!0});var am=mr.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){lt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){De(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){tn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Yn(),Ke(),this._startPoint=this._map.mouseEventToContainerPoint(o),lt(document,{contextmenu:Br,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Ot("div","leaflet-zoom-box",this._container),Ge(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var h=new Se(this._point,this._startPoint),w=h.getSize();Le(this._box,h.min),this._box.style.width=w.x+"px",this._box.style.height=w.y+"px"},_finish:function(){this._moved&&(tn(this._box),Ht(this._container,"leaflet-crosshair")),To(),nn(),De(document,{contextmenu:Br,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var h=new Pe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});kt.addInitHook("addHandler","boxZoom",am),kt.mergeOptions({doubleClickZoom:!0});var lm=mr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var h=this._map,w=h.getZoom(),A=h.options.zoomDelta,N=o.originalEvent.shiftKey?w-A:w+A;h.options.doubleClickZoom==="center"?h.setZoom(N):h.setZoomAround(o.containerPoint,N)}});kt.addInitHook("addHandler","doubleClickZoom",lm),kt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var cm=mr.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new Fi(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}Ge(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ht(this._map._container,"leaflet-grab"),Ht(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=ze(this._map.options.maxBounds);this._offsetLimit=Be(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var h=this._lastTime=+new Date,w=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(w),this._times.push(h),this._prunePositions(h)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,h){return o-(o-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;o.x<h.min.x&&(o.x=this._viscousLimit(o.x,h.min.x)),o.y<h.min.y&&(o.y=this._viscousLimit(o.y,h.min.y)),o.x>h.max.x&&(o.x=this._viscousLimit(o.x,h.max.x)),o.y>h.max.y&&(o.y=this._viscousLimit(o.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,h=Math.round(o/2),w=this._initialWorldOffset,A=this._draggable._newPos.x,N=(A-h+w)%o+h-w,F=(A+h+w)%o-h-w,K=Math.abs(N+w)<Math.abs(F+w)?N:F;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=K},_onDragEnd:function(o){var h=this._map,w=h.options,A=!w.inertia||o.noInertia||this._times.length<2;if(h.fire("dragend",o),A)h.fire("moveend");else{this._prunePositions(+new Date);var N=this._lastPos.subtract(this._positions[0]),F=(this._lastTime-this._times[0])/1e3,K=w.easeLinearity,oe=N.multiplyBy(K/F),de=oe.distanceTo([0,0]),ve=Math.min(w.inertiaMaxSpeed,de),Ve=oe.multiplyBy(ve/de),ot=ve/(w.inertiaDeceleration*K),It=Ve.multiplyBy(-ot/2).round();!It.x&&!It.y?h.fire("moveend"):(It=h._limitOffset(It,h.options.maxBounds),me(function(){h.panBy(It,{duration:ot,easeLinearity:K,noMoveStart:!0,animate:!0})}))}}});kt.addInitHook("addHandler","dragging",cm),kt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var um=mr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),lt(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),De(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,h=document.documentElement,w=o.scrollTop||h.scrollTop,A=o.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(A,w)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var h=this._panKeys={},w=this.keyCodes,A,N;for(A=0,N=w.left.length;A<N;A++)h[w.left[A]]=[-1*o,0];for(A=0,N=w.right.length;A<N;A++)h[w.right[A]]=[o,0];for(A=0,N=w.down.length;A<N;A++)h[w.down[A]]=[0,o];for(A=0,N=w.up.length;A<N;A++)h[w.up[A]]=[0,-1*o]},_setZoomDelta:function(o){var h=this._zoomKeys={},w=this.keyCodes,A,N;for(A=0,N=w.zoomIn.length;A<N;A++)h[w.zoomIn[A]]=o;for(A=0,N=w.zoomOut.length;A<N;A++)h[w.zoomOut[A]]=-o},_addHooks:function(){lt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){De(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var h=o.keyCode,w=this._map,A;if(h in this._panKeys){if(!w._panAnim||!w._panAnim._inProgress)if(A=this._panKeys[h],o.shiftKey&&(A=ge(A).multiplyBy(3)),w.options.maxBounds&&(A=w._limitOffset(ge(A),w.options.maxBounds)),w.options.worldCopyJump){var N=w.wrapLatLng(w.unproject(w.project(w.getCenter()).add(A)));w.panTo(N)}else w.panBy(A)}else if(h in this._zoomKeys)w.setZoom(w.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&w._popup&&w._popup.options.closeOnEscapeKey)w.closePopup();else return;Br(o)}}});kt.addInitHook("addHandler","keyboard",um),kt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var dm=mr.extend({addHooks:function(){lt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){De(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var h=Ms(o),w=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var A=Math.max(w-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),A),Br(o)},_performZoom:function(){var o=this._map,h=o.getZoom(),w=this._map.options.zoomSnap||0;o._stop();var A=this._delta/(this._map.options.wheelPxPerZoomLevel*4),N=4*Math.log(2/(1+Math.exp(-Math.abs(A))))/Math.LN2,F=w?Math.ceil(N/w)*w:N,K=o._limitZoom(h+(this._delta>0?F:-F))-h;this._delta=0,this._startTime=null,K&&(o.options.scrollWheelZoom==="center"?o.setZoom(h+K):o.setZoomAround(this._lastMousePos,h+K))}});kt.addInitHook("addHandler","scrollWheelZoom",dm);var pC=600;kt.mergeOptions({tapHold:Fe.touchNative&&Fe.safari&&Fe.mobile,tapTolerance:15});var hm=mr.extend({addHooks:function(){lt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){De(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var h=o.touches[0];this._startPos=this._newPos=new ue(h.clientX,h.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(lt(document,"touchend",Bn),lt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),pC),lt(document,"touchend touchcancel contextmenu",this._cancel,this),lt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){De(document,"touchend",Bn),De(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),De(document,"touchend touchcancel contextmenu",this._cancel,this),De(document,"touchmove",this._onMove,this)},_onMove:function(o){var h=o.touches[0];this._newPos=new ue(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,h){var w=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});w._simulated=!0,h.target.dispatchEvent(w)}});kt.addInitHook("addHandler","tapHold",hm),kt.mergeOptions({touchZoom:Fe.touch,bounceAtZoomLimits:!0});var fm=mr.extend({addHooks:function(){Ge(this._map._container,"leaflet-touch-zoom"),lt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ht(this._map._container,"leaflet-touch-zoom"),De(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var h=this._map;if(!(!o.touches||o.touches.length!==2||h._animatingZoom||this._zooming)){var w=h.mouseEventToContainerPoint(o.touches[0]),A=h.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(w.add(A)._divideBy(2))),this._startDist=w.distanceTo(A),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),lt(document,"touchmove",this._onTouchMove,this),lt(document,"touchend touchcancel",this._onTouchEnd,this),Bn(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var h=this._map,w=h.mouseEventToContainerPoint(o.touches[0]),A=h.mouseEventToContainerPoint(o.touches[1]),N=w.distanceTo(A)/this._startDist;if(this._zoom=h.getScaleZoom(N,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&N<1||this._zoom>h.getMaxZoom()&&N>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,N===1)return}else{var F=w._add(A)._divideBy(2)._subtract(this._centerPoint);if(N===1&&F.x===0&&F.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(F),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),fe(this._animRequest);var K=f(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=me(K,this,!0),Bn(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,fe(this._animRequest),De(document,"touchmove",this._onTouchMove,this),De(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});kt.addInitHook("addHandler","touchZoom",fm),kt.BoxZoom=am,kt.DoubleClickZoom=lm,kt.Drag=cm,kt.Keyboard=um,kt.ScrollWheelZoom=dm,kt.TapHold=hm,kt.TouchZoom=fm,n.Bounds=Se,n.Browser=Fe,n.CRS=Ie,n.Canvas=rm,n.Circle=Ls,n.CircleMarker=Vi,n.Class=we,n.Control=Fr,n.DivIcon=ar,n.DivOverlay=un,n.DomEvent=ir,n.DomUtil=Mn,n.Draggable=Fi,n.Evented=ke,n.FeatureGroup=ri,n.GeoJSON=d,n.GridLayer=oi,n.Handler=mr,n.Icon=Os,n.ImageOverlay=le,n.LatLng=$,n.LatLngBounds=Pe,n.Layer=Rn,n.LayerGroup=Ai,n.LineUtil=ou,n.Map=kt,n.Marker=xr,n.Mixin=ru,n.Path=si,n.Point=ue,n.PolyUtil=bl,n.Polygon=l,n.Polyline=r,n.Popup=sr,n.PosAnimation=_l,n.Projection=Al,n.Rectangle=om,n.Renderer=os,n.SVG=Il,n.SVGOverlay=At,n.TileLayer=Ds,n.Tooltip=Ut,n.Transformation=nt,n.Util=Me,n.VideoOverlay=Ee,n.bind=f,n.bounds=Be,n.canvas=im,n.circle=M,n.circleMarker=Dt,n.control=Ro,n.divIcon=Ps,n.extend=a,n.featureGroup=ii,n.geoJSON=ee,n.geoJson=ie,n.gridLayer=jh,n.icon=El,n.imageOverlay=Ae,n.latLng=re,n.latLngBounds=ze,n.layerGroup=Er,n.map=tu,n.marker=Dh,n.point=ge,n.polygon=u,n.polyline=s,n.popup=or,n.rectangle=fC,n.setOptions=P,n.stamp=v,n.svg=sm,n.svgOverlay=pt,n.tileLayer=tm,n.tooltip=zn,n.transformation=en,n.version=i,n.videoOverlay=be;var mC=window.L;n.noConflict=function(){return window.L=mC,this},window.L=n})})(s1,s1.exports);var fl=s1.exports;const pl=Oy(fl);function Eh(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function Nh(e,t){return t==null?function(i,a){const c=j.useRef();return c.current||(c.current=e(i,a)),c}:function(i,a){const c=j.useRef();c.current||(c.current=e(i,a));const f=j.useRef(i),{instance:g}=c.current;return j.useEffect(function(){f.current!==i&&(t(g,i,f.current),f.current=i)},[g,i,a]),c}}function nC(e,t){j.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var c;(c=t.layerContainer)==null||c.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function rC(e){return function(n){const i=Sh(),a=e(Ah(n,i),i);return Qb(i.map,n.attribution),Xp(a.current,n.eventHandlers),nC(a.current,i),a}}function eM(e,t){const n=j.useRef();j.useEffect(function(){if(t.pathOptions!==n.current){const a=t.pathOptions??{};e.instance.setStyle(a),n.current=a}},[e,t])}function tM(e){return function(n){const i=Sh(),a=e(Ah(n,i),i);return Xp(a.current,n.eventHandlers),nC(a.current,i),eM(a.current,n),a}}function nM(e,t){const n=Nh(e,t),i=rC(n);return tC(i)}function rM(e,t){const n=Nh(e),i=Jk(n,t);return Qk(i)}function iM(e,t){const n=Nh(e,t),i=tM(n);return tC(i)}function sM(e,t){const n=Nh(e,t),i=rC(n);return $k(i)}function oM(e,t,n){const{opacity:i,zIndex:a}=t;i!=null&&i!==n.opacity&&e.setOpacity(i),a!=null&&a!==n.zIndex&&e.setZIndex(a)}function iC(){return Sh().map}function o1(){return o1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o1.apply(this,arguments)}function aM({bounds:e,boundsOptions:t,center:n,children:i,className:a,id:c,placeholder:f,style:g,whenReady:v,zoom:y,...S},b){const[T]=j.useState({className:a,id:c,style:g}),[I,D]=j.useState(null);j.useImperativeHandle(b,()=>(I==null?void 0:I.map)??null,[I]);const P=j.useCallback(V=>{if(V!==null&&I===null){const O=new fl.Map(V,S);n!=null&&y!=null?O.setView(n,y):e!=null&&O.fitBounds(e,t),v!=null&&O.whenReady(v),D(Kk(O))}},[]);j.useEffect(()=>()=>{I==null||I.map.remove()},[I]);const U=I?$o.createElement(eC,{value:I},i):f??null;return $o.createElement("div",o1({},T,{ref:P}),U)}const lM=j.forwardRef(aM),Of=nM(function({position:t,...n},i){const a=new fl.Marker(t,n);return Eh(a,$b(i,{overlayContainer:a}))},function(t,n,i){n.position!==i.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),cM=iM(function({positions:t,...n},i){const a=new fl.Polyline(t,n);return Eh(a,$b(i,{overlayContainer:a}))},function(t,n,i){n.positions!==i.positions&&t.setLatLngs(n.positions)}),Lf=rM(function(t,n){const i=new fl.Popup(t,n.overlayContainer);return Eh(i,n)},function(t,n,{position:i},a){j.useEffect(function(){const{instance:f}=t;function g(y){y.popup===f&&(f.update(),a(!0))}function v(y){y.popup===f&&a(!1)}return n.map.on({popupopen:g,popupclose:v}),n.overlayContainer==null?(i!=null&&f.setLatLng(i),f.openOn(n.map)):n.overlayContainer.bindPopup(f),function(){var S;n.map.off({popupopen:g,popupclose:v}),(S=n.overlayContainer)==null||S.unbindPopup(),n.map.removeLayer(f)}},[t,n,a,i])}),uM=sM(function({url:t,...n},i){const a=new fl.TileLayer(t,Ah(n,i));return Eh(a,i)},function(t,n,i){oM(t,n,i);const{url:a}=n;a!=null&&a!==i.url&&t.setUrl(a)});delete pl.Icon.Default.prototype._getIconUrl;pl.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const qp=e=>new pl.DivIcon({className:"custom-icon",html:`<div style="background-color: ${e}; width: 24px; height: 24px; border-radius: 50%; border: 2px solid white; box-shadow: 0 4px 6px rgba(0,0,0,0.1);"></div>`,iconSize:[24,24],iconAnchor:[12,12]}),Pf=new Map,dM=(e,t)=>{const n=Number(e);if(!Number.isFinite(n)||n<=0)return qp(t);const i=`${n}:${t}`;if(Pf.has(i))return Pf.get(i);const a=new pl.DivIcon({className:"stop-number-icon",html:`<div style="background-color: ${t}; width: 28px; height: 28px; border-radius: 9999px; border: 2px solid white; box-shadow: 0 6px 10px rgba(0,0,0,0.25); display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 14px; color: white; line-height: 1;">${n}</div>`,iconSize:[28,28],iconAnchor:[14,14]});return Pf.set(i,a),a},hM=new pl.DivIcon({className:"truck-icon",html:`<div style="background-color: #0052cc; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 2px solid white; box-shadow: 0 4px 6px rgba(0,0,0,0.2);">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle></svg>
    </div>`,iconSize:[32,32],iconAnchor:[16,16]}),fM=qp("#8b5cf6");function pM({center:e}){const t=iC();return j.useEffect(()=>{e&&t.setView(e,t.getZoom())},[e,t]),null}function mM({points:e}){const t=iC();return j.useEffect(()=>{if(!t)return;const n=Array.isArray(e)?e.filter(Boolean):[];if(n.length!==0)try{const i=pl.latLngBounds(n);t.fitBounds(i,{padding:[30,30]})}catch{}},[e,t]),null}function Kp({shipments:e,routeGeometry:t,currentLocation:n,originLocation:i,showStopNumbers:a=!1,currentLocationLabel:c="You are here"}){const g=n?[n.lat,n.lon]:i?[i.lat,i.lon]:[44.4268,26.1025],[v,y]=j.useState([]);j.useEffect(()=>{if(t&&t.coordinates){const I=t.coordinates.map(D=>[D[1],D[0]]);y(I)}},[t]);const S=(e||[]).map(I=>{var O,k,H,X;const D=(I==null?void 0:I.latitude)??((k=(O=I==null?void 0:I.raw_data)==null?void 0:O.recipientLocation)==null?void 0:k.latitude),P=(I==null?void 0:I.longitude)??((X=(H=I==null?void 0:I.raw_data)==null?void 0:H.recipientLocation)==null?void 0:X.longitude),U=Number(D),V=Number(P);return!Number.isFinite(U)||!Number.isFinite(V)||Math.abs(U)<1e-4&&Math.abs(V)<1e-4?null:[U,V]}).filter(Boolean),b=new Map;a&&(Array.isArray(e)?e:[]).forEach((I,D)=>{const P=String((I==null?void 0:I.awb)||"").toUpperCase();P&&b.set(P,D+1)});const T=[...n?[[n.lat,n.lon]]:[],...i?[[i.lat,i.lon]]:[],...S,...v];return m.jsxs("div",{className:"h-[400px] w-full rounded-3xl overflow-hidden shadow-inner border border-white/20 relative z-0",children:[m.jsxs(lM,{center:g,zoom:13,style:{height:"100%",width:"100%"},zoomControl:!1,children:[m.jsx(uM,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors  <a href="https://carto.com/attributions">CARTO</a>'}),m.jsx(pM,{center:g}),m.jsx(mM,{points:T}),n&&m.jsx(Of,{position:[n.lat,n.lon],icon:hM,children:m.jsx(Lf,{children:m.jsx("div",{className:"font-sans font-bold text-brand-600",children:c||"You are here"})})}),i&&m.jsx(Of,{position:[i.lat,i.lon],icon:fM,children:m.jsx(Lf,{children:m.jsx("div",{className:"font-sans font-bold text-slate-800",children:i.label||"Warehouse"})})}),e.map(I=>{var H,X,G,Z;const D=Number((I==null?void 0:I.latitude)??((X=(H=I==null?void 0:I.raw_data)==null?void 0:H.recipientLocation)==null?void 0:X.latitude)),P=Number((I==null?void 0:I.longitude)??((Z=(G=I==null?void 0:I.raw_data)==null?void 0:G.recipientLocation)==null?void 0:Z.longitude));if(!Number.isFinite(D)||!Number.isFinite(P)||Math.abs(D)<1e-4&&Math.abs(P)<1e-4)return null;const U=String((I==null?void 0:I.awb)||"").toUpperCase(),V=I.status==="Delivered",O=V?"#22c55e":"#f59e0b",k=a?b.get(U):null;return m.jsx(Of,{position:[D,P],icon:a?dM(k,O):qp(O),children:m.jsx(Lf,{className:"glass-popup",children:m.jsxs("div",{className:"p-1 min-w-[150px]",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:`w-2 h-2 rounded-full ${V?"bg-green-500":"bg-amber-500"}`}),m.jsxs("span",{className:"text-xs font-black uppercase text-slate-500 tracking-wider",children:[a&&k?`Stop ${k}  `:"",U]})]}),m.jsx("p",{className:"font-bold text-slate-800 text-sm mb-1",children:I.recipient_name}),m.jsx("p",{className:"text-xs text-slate-500 truncate",children:I.delivery_address})]})})},U||I.awb)}),v.length>0&&m.jsx(cM,{positions:v,color:"#4c9aff",weight:4,opacity:.8,dashArray:"10, 10"})]}),m.jsx("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2 z-[1000]",children:m.jsx("button",{className:"glass-strong p-3 rounded-xl text-white hover:text-brand-400 hover:border-brand-500/50 transition-all shadow-lg active:scale-95",onClick:I=>{I.stopPropagation()},children:m.jsx(P_,{size:20})})})]})}const sC="arynik_routes_v1",gM=e=>{try{return localStorage.getItem(e)}catch{return null}},xM=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},ms=()=>new Date().toISOString(),Qp=()=>new Date().toISOString().slice(0,10),oC=()=>{try{return crypto.randomUUID()}catch{return`route-${Date.now()}-${Math.floor(Math.random()*1e5)}`}},il=e=>String(e||"").trim().toUpperCase(),$p=e=>String(e||"").trim().toUpperCase()||null,Th=e=>String(e||"").trim().toUpperCase()||null,sl=e=>String(e||"").trim()||null,aC=e=>{try{return String(e||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"")}catch{return String(e||"")}},Hr=e=>aC(String(e||"")).trim().replace(/[_-]+/g," ").replace(/\s+/g," ").toLowerCase(),So=()=>{const e=gM(sC);if(!e)return[];try{const t=JSON.parse(e);if(Array.isArray(t))return t}catch{}return[]},$c=e=>{const t=Array.isArray(e)?e:[];return xM(sC,JSON.stringify(t)),t},ol=[{name:"Bacau",code:"BC",aliases:["bacau","bacu","bc"]},{name:"Iasi",code:"IS",aliases:["iasi","iai","is"]},{name:"Neamt",code:"NT",aliases:["neamt","neam","nt"]},{name:"Galati",code:"GL",aliases:["galati","galai","gl"]},{name:"Botosani",code:"BT",aliases:["botosani","botoani","bt"]},{name:"Suceava",code:"SV",aliases:["suceava","sv"]},{name:"Vaslui",code:"VS",aliases:["vaslui","vs"]}],yM=e=>{var i,a,c,f,g,v,y,S,b,T;const t=(e==null?void 0:e.county)||((a=(i=e==null?void 0:e.raw_data)==null?void 0:i.recipientLocation)==null?void 0:a.county)||((f=(c=e==null?void 0:e.raw_data)==null?void 0:c.recipientLocation)==null?void 0:f.countyName)||((v=(g=e==null?void 0:e.raw_data)==null?void 0:g.recipientLocation)==null?void 0:v.region)||((S=(y=e==null?void 0:e.raw_data)==null?void 0:y.recipientLocation)==null?void 0:S.regionName)||((b=e==null?void 0:e.raw_data)==null?void 0:b.county)||((T=e==null?void 0:e.raw_data)==null?void 0:T.countyName),n=Hr(t);if(!n)return null;for(const I of ol){const D=Array.isArray(I.aliases)?I.aliases:[];for(const P of D){const U=Hr(P);if(U&&(n===U||n.includes(` ${U} `)||n.startsWith(`${U} `)||n.endsWith(` ${U}`)||n.includes(U)))return I.name}if(Hr(I.name)===n)return I.name}return null},wM=e=>{const t=aC(String((e==null?void 0:e.status)||"")).trim().toLowerCase();return t?!(t.includes("delivered")||t.includes("livrat")||t.includes("return")||t.includes("returnat")||t.includes("returnata")||t.includes("anulat")||t.includes("anulata")||t.includes("cancel")||t.includes("refuz")):!0},uc=()=>So().filter(Boolean).sort((e,t)=>String(t.updated_at||"").localeCompare(String(e.updated_at||""))),Jp=e=>So().find(t=>t&&t.id===e)||null,lC=({name:e,driver_id:t,driver_name:n,helper_name:i,vehicle_plate:a,date:c,county:f,kind:g,region:v}={})=>{const y=So(),S={id:oC(),name:String(e||"").trim()||"New Route",driver_id:$p(t),driver_name:sl(n),vehicle_plate:Th(a),helper_name:sl(i),date:c?String(c):Qp(),kind:g?String(g):void 0,region:v?String(v):void 0,county:f?String(f):void 0,awbs:[],created_at:ms(),updated_at:ms()};return y.unshift(S),$c(y),S},Zs=(e,t={})=>{const n=So(),i=n.findIndex(S=>S&&S.id===e);if(i===-1)return null;const a=n[i]||{},c=Object.prototype.hasOwnProperty.call(t,"driver_id")?$p(t.driver_id):a.driver_id??null,f=Object.prototype.hasOwnProperty.call(t,"vehicle_plate")?Th(t.vehicle_plate):a.vehicle_plate??null,g=Object.prototype.hasOwnProperty.call(t,"driver_name")?sl(t.driver_name):a.driver_name??null,v=Object.prototype.hasOwnProperty.call(t,"helper_name")?sl(t.helper_name):a.helper_name??null,y={...a,...t,id:a.id,driver_id:c,vehicle_plate:f,driver_name:g,helper_name:v,updated_at:ms()};return n[i]=y,$c(n),y},cC=e=>{const t=Th(e==null?void 0:e.vehicle_plate),n=sl(e==null?void 0:e.driver_name)||String((e==null?void 0:e.driver_id)||"").trim()||null,i=sl(e==null?void 0:e.helper_name),a=[];t&&a.push(t),n&&a.push(n);let c=a.join(" - ");return i&&(c=c?`${c} + ${i}`:i),c||""},Pc=e=>{const t=cC(e);return t||String((e==null?void 0:e.name)||(e==null?void 0:e.county)||"").trim()||"Route"},vM=e=>{const t=So().filter(n=>n&&n.id!==e);return $c(t),!0},_M=(e,t)=>{const n=il(t),i=Jp(e);if(!i)return null;const a=Array.isArray(i.awbs)?i.awbs:[];return Zs(e,{awbs:a.filter(c=>c!==n)})},Iy=(e,t)=>{if(!Jp(e))return null;const i=(Array.isArray(t)?t:[]).map(il).filter(Boolean);return Zs(e,{awbs:i})},bM=e=>{const t=il(e);return t&&So().find(a=>Array.isArray(a==null?void 0:a.awbs)&&a.awbs.includes(t))||null},ky=e=>{const t=String(e||"").trim()||Qp(),n=new Set(ol.map(i=>Hr(i.name)));return uc().filter(i=>String((i==null?void 0:i.date)||"")===t).filter(i=>String((i==null?void 0:i.kind)||"").toLowerCase()==="county"||String((i==null?void 0:i.region)||"").toLowerCase()==="moldova").filter(i=>{const a=Hr((i==null?void 0:i.county)||(i==null?void 0:i.name));return a&&n.has(a)}).sort((i,a)=>Hr((i==null?void 0:i.county)||(i==null?void 0:i.name)).localeCompare(Hr((a==null?void 0:a.county)||(a==null?void 0:a.name))))},a1=(e,t,{scopeDate:n=!0}={})=>{const i=il(t);if(!i)return null;const a=So(),c=a.findIndex(S=>S&&S.id===e);if(c===-1)return null;const f=a[c],g=String((f==null?void 0:f.date)||""),v=Array.isArray(f==null?void 0:f.awbs)?f.awbs:[];let y=!1;for(let S=0;S<a.length;S+=1){const b=a[S];!b||!Array.isArray(b.awbs)||b.awbs.length===0||S!==c&&(n&&g&&String(b.date||"")!==g||b.awbs.includes(i)&&(a[S]={...b,awbs:b.awbs.filter(T=>T!==i),updated_at:ms()},y=!0))}return v.includes(i)||(a[c]={...f,awbs:[...v,i],updated_at:ms()},y=!0),y&&$c(a),a[c]},l1=({date:e,shipments:t,driver_id:n}={})=>{const i=String(e||"").trim()||Qp(),a=Array.isArray(t)?t:[],c=So(),f=new Map(ol.map(O=>[Hr(O.name),O])),g=new Map;for(const O of c){if(!O||String(O.date||"")!==i)continue;const k=Hr(O.county||O.name);k&&f.has(k)&&g.set(k,O)}let v=0;const y=[];for(const O of ol){const k=Hr(O.name);let H=g.get(k);if(H){let X=!1;String(H.kind||"").toLowerCase()!=="county"&&(H.kind="county",X=!0),String(H.region||"").toLowerCase()!=="moldova"&&(H.region="Moldova",X=!0),H.county||(H.county=O.name,X=!0),X&&(H.updated_at=ms())}else{const X=c.find(G=>G&&Hr(G.county||G.name)===k&&(G.vehicle_plate||G.driver_id));H={id:oC(),name:O.name,driver_id:$p((X==null?void 0:X.driver_id)||n),driver_name:(X==null?void 0:X.driver_name)||null,vehicle_plate:Th(X==null?void 0:X.vehicle_plate)||null,helper_name:(X==null?void 0:X.helper_name)||null,date:i,kind:"county",region:"Moldova",county:O.name,awbs:[],created_at:ms(),updated_at:ms()},c.unshift(H),g.set(k,H),v+=1}y.push(H)}const S=new Set;for(const O of c)O&&String(O.date||"")===i&&(Array.isArray(O.awbs)?O.awbs:[]).forEach(k=>{const H=il(k);H&&S.add(H)});let b=0,T=0,I=0,D=0,P=0,U=0;const V=new Set;for(const O of a){if(!wM(O))continue;b+=1;const k=il(O==null?void 0:O.awb);if(!k)continue;const H=yM(O);if(!H){P+=1;continue}const X=Hr(H),G=f.get(X);if(!G){U+=1;continue}if(T+=1,S.has(k)){D+=1;continue}const Z=g.get(Hr(G.name));if(!Z)continue;const J=Array.isArray(Z.awbs)?Z.awbs:[];J.includes(k)||(Z.awbs=[...J,k],Z.updated_at=ms(),V.add(Z.id),S.add(k),I+=1)}return(v||V.size>0||I)&&$c(c),{date:i,created_routes:v,allocated_awbs:I,deliverable_total:b,deliverable_in_moldova:T,already_assigned:D,missing_county:P,outside_region:U,routes:y}},CM=200;function SM(){const[e,t]=j.useState([]),[n,i]=j.useState(!0),[a,c]=j.useState(""),[f,g]=j.useState(null),[v,y]=j.useState("list"),[S,b]=j.useState(null),[T,I]=j.useState({}),D=j.useRef({}),[P,U]=j.useState({active:!1,done:0,total:0,current:""}),[V,O]=j.useState({open:!1,awb:null}),[k,H]=j.useState([]),[X,G]=j.useState(""),[Z,J]=j.useState({}),[z,te]=j.useState({}),[me,fe]=j.useState({}),Me=Qr(),{user:we}=Ar(),{location:ae}=Vp(),Ce=Vn(we,Vo),ke=Vn(we,Ba),ue=["Manager","Admin","Dispatcher","Driver"].includes(we==null?void 0:we.role),je=["Admin","Manager","Dispatcher","Support","Recipient"].includes(String((we==null?void 0:we.role)||"").trim()),ge=async()=>{i(!0);try{const q=we.token,Oe=await Qc(q);t(Oe)}catch(q){console.error("Failed to fetch shipments",q)}finally{i(!1)}};j.useEffect(()=>{ge()},[]),j.useEffect(()=>{H(uc())},[]);const Se=(q,Oe="RON")=>{const Qe=Number(q);return Number.isFinite(Qe)?`${Qe.toFixed(2)} ${String(Oe||"RON").toUpperCase()}`:"--"},Be=q=>{const Oe=(q==null?void 0:q.raw_data)||{},Qe=(Oe==null?void 0:Oe.client)||(Oe==null?void 0:Oe.clientData)||{},Ye=(Oe==null?void 0:Oe.senderLocation)||{},Ze=(q==null?void 0:q.sender_shop_name)||(Qe==null?void 0:Qe.name)||(Qe==null?void 0:Qe.clientName)||(Ye==null?void 0:Ye.name)||(Ye==null?void 0:Ye.shopName)||"";return String(Ze||"").trim()},Pe=async(q,{refresh:Oe=!0}={})=>{const Qe=String(q||"").toUpperCase();if(Qe){J(Ye=>({...Ye,[Qe]:!0}));try{const Ye=we==null?void 0:we.token,Ze=await Bd(Ye,Qe,{refresh:Oe});t(dt=>(Array.isArray(dt)?dt:[]).map(_t=>String((_t==null?void 0:_t.awb)||"").toUpperCase()===Qe?{..._t,...Ze}:_t))}catch(Ye){console.warn("Failed to load shipment details",Ye),G(`Failed to load details for ${Qe}`),setTimeout(()=>G(""),2500)}finally{J(Ye=>({...Ye,[Qe]:!1}))}}},ze=async q=>{var Ze,dt,_t,qe;if(!Ce)return;const Oe=String((q==null?void 0:q.awb)||"").toUpperCase();if(!Oe)return;const Qe=(q==null?void 0:q.locality)||((dt=(Ze=q==null?void 0:q.raw_data)==null?void 0:Ze.recipientLocation)==null?void 0:dt.locality)||((qe=(_t=q==null?void 0:q.raw_data)==null?void 0:_t.recipientLocation)==null?void 0:qe.localityName)||"",Ye=Qe?{locality:Qe}:{};te(Lt=>({...Lt,[Oe]:!0}));try{const Lt=we==null?void 0:we.token;await bh(Lt,{awb:Oe,event_id:"2",timestamp:new Date().toISOString(),payload:Ye}),t(kn=>(Array.isArray(kn)?kn:[]).map(Tt=>String((Tt==null?void 0:Tt.awb)||"").toUpperCase()===Oe?{...Tt,status:"Delivered"}:Tt)),G(`Marked ${Oe} as Delivered`),setTimeout(()=>G(""),2500),Pe(Oe,{refresh:!0})}catch{try{await Zp(Oe,"2",Ye),G(`Queued Delivered for ${Oe}`),setTimeout(()=>G(""),2500)}catch{G(`Failed to mark Delivered for ${Oe}`),setTimeout(()=>G(""),2500)}}finally{te(Lt=>({...Lt,[Oe]:!1}))}},$=async q=>{var Qe,Ye;if(!je)return;const Oe=String(q||"").trim().toUpperCase();if(!(!Oe||!(we!=null&&we.token))){fe(Ze=>({...Ze||{},[Oe]:!0})),G("");try{const Ze=await zp(we.token,{awb:Oe,duration_sec:1800}),dt=Ze==null?void 0:Ze.id;dt?Me(`/tracking/${encodeURIComponent(String(dt))}`):(G("Tracking request created."),setTimeout(()=>G(""),2500))}catch(Ze){const dt=((Ye=(Qe=Ze==null?void 0:Ze.response)==null?void 0:Qe.data)==null?void 0:Ye.detail)||(Ze==null?void 0:Ze.message)||"Failed to request tracking";G(String(dt)),setTimeout(()=>G(""),3e3)}finally{fe(Ze=>({...Ze||{},[Oe]:!1}))}}},re=ae?{lat:ae.latitude,lon:ae.longitude}:null;j.useEffect(()=>{D.current=T},[T]);const Ie=async q=>{var _t;const Oe=String((q==null?void 0:q.awb)||"").toUpperCase(),Qe=cc(q);let Ye=Number(q==null?void 0:q.latitude),Ze=Number(q==null?void 0:q.longitude);if(y("map"),b(null),!it(Ye)||!it(Ze)){const qe=(_t=D.current)==null?void 0:_t[Oe];qe&&(!qe.q||qe.q===Qe)&&it(qe.lat)&&it(qe.lon)&&(Ye=Number(qe.lat),Ze=Number(qe.lon))}if(!it(Ye)||!it(Ze)){const qe=Vd(Qe);qe&&it(qe.lat)&&it(qe.lon)&&(Ye=Number(qe.lat),Ze=Number(qe.lon),Oe&&I(Lt=>({...Lt,[Oe]:{lat:Ye,lon:Ze,ts:Date.now(),source:"cache",q:Qe}})))}if(!it(Ye)||!it(Ze)){const qe=await i1(Qe);qe&&it(qe.lat)&&it(qe.lon)&&(Ye=Number(qe.lat),Ze=Number(qe.lon),Oe&&I(Lt=>({...Lt,[Oe]:{lat:Ye,lon:Ze,ts:Date.now(),source:"geocode",q:Qe}})))}const dt=Ud();if(dt&&it(dt.lat)&&it(dt.lon)&&it(Ye)&&it(Ze)){const qe=await Yk({lat:dt.lat,lon:dt.lon},{lat:Ye,lon:Ze});b(qe)}else b(null)},Xe=q=>{if(ue){try{l1({date:new Date().toISOString().slice(0,10),shipments:[],driver_id:(we==null?void 0:we.driver_id)||null})}catch{}H(uc()),O({open:!0,awb:String(q||"").toUpperCase()})}},Et=async q=>{var Ye,Ze;const Oe=V.awb;if(!Oe)return;if(a1(q,Oe,{scopeDate:!0})){const dt=uc().find(_t=>_t.id===q);if(G(`Assigned ${Oe} to ${(dt==null?void 0:dt.name)||"route"}${dt!=null&&dt.vehicle_plate?` (${dt.vehicle_plate})`:""}`),setTimeout(()=>G(""),2500),ke){const _t=String((dt==null?void 0:dt.driver_id)||"").trim();if(!_t)G("Route has no driver assigned; allocation not sent."),setTimeout(()=>G(""),3e3);else try{await Fp(we==null?void 0:we.token,Oe,_t),G(`Allocated ${Oe} to ${_t} and notified recipient.`),setTimeout(()=>G(""),3e3)}catch(qe){console.warn("Allocation API failed",qe);const Lt=(Ze=(Ye=qe==null?void 0:qe.response)==null?void 0:Ye.data)==null?void 0:Ze.detail;G(Lt?`Allocation failed: ${Lt}`:"Allocated locally only (API failed)."),setTimeout(()=>G(""),3e3)}}}O({open:!1,awb:null})},Vt=()=>{const q=V.awb;if(!q)return;let Oe="";try{Oe=localStorage.getItem("arynik_last_vehicle_plate_v1")||""}catch{}const Qe=lC({name:`Route ${new Date().toLocaleDateString()}`,driver_id:(we==null?void 0:we.driver_id)||null,driver_name:(we==null?void 0:we.name)||null,helper_name:(we==null?void 0:we.helper_name)||null,vehicle_plate:String(Oe||"").trim().toUpperCase()||null,date:new Date().toISOString().slice(0,10)});a1(Qe.id,q,{scopeDate:!0}),O({open:!1,awb:null}),G(`Created route and assigned ${q}`),setTimeout(()=>G(""),2500),Me(`/routes/${Qe.id}`)},nt=e.filter(q=>{var Oe,Qe;return((Oe=q.awb)==null?void 0:Oe.toLowerCase().includes(a.toLowerCase()))||q.recipient_name&&((Qe=q.recipient_name)==null?void 0:Qe.toLowerCase().includes(a.toLowerCase()))}),en=j.useMemo(()=>nt.slice(0,CM),[nt]),ut=j.useMemo(()=>en.map(q=>String((q==null?void 0:q.awb)||"").toUpperCase()).join("|"),[en]);j.useEffect(()=>{if(v!=="map"||!en||en.length===0)return;let q=!1;return(async()=>{const Oe=en.length,Qe=D.current||{},Ye={},Ze=[];let dt=0;for(const Tt of en){if(q)return;const st=String((Tt==null?void 0:Tt.awb)||"").toUpperCase();if(!st){dt+=1;continue}const _e=cc(Tt);if(it(Tt==null?void 0:Tt.latitude)&&it(Tt==null?void 0:Tt.longitude)){Ye[st]={lat:Number(Tt.latitude),lon:Number(Tt.longitude),ts:Date.now(),source:"shipment",q:_e},dt+=1;continue}const wt=Qe[st];if(wt&&(!wt.q||wt.q===_e)&&it(wt.lat)&&it(wt.lon)){wt.q||(Ye[st]={...wt,q:_e}),dt+=1;continue}const ht=Vd(_e);if(ht){it(ht.lat)&&it(ht.lon)&&(Ye[st]={lat:Number(ht.lat),lon:Number(ht.lon),ts:Number(ht.ts||Date.now()),source:"cache",q:_e}),dt+=1;continue}Ze.push({awb:st,query:_e})}if(q)return;if(Object.keys(Ye).length>0&&I(Tt=>({...Tt,...Ye})),Ze.length===0){U({active:!1,done:Oe,total:Oe,current:""});return}U({active:!0,done:dt,total:Oe,current:""});let _t={},qe=0,Lt=Date.now();const kn=()=>{if(q||Object.keys(_t).length===0)return;const Tt=_t;_t={},qe=0,Lt=Date.now(),I(st=>({...st,...Tt}))};for(const Tt of Ze){if(q)return;const{awb:st,query:_e}=Tt;U({active:!0,done:dt,total:Oe,current:st});const wt=await i1(_e);wt&&it(wt.lat)&&it(wt.lon)&&st&&(_t[st]={lat:Number(wt.lat),lon:Number(wt.lon),ts:Date.now(),source:"geocode",q:_e},qe+=1),dt+=1;const ht=Date.now()-Lt;(qe>=5||ht>300)&&kn()}kn(),!q&&U({active:!1,done:dt,total:Oe,current:""})})(),()=>{q=!0}},[v,ut]);const Dn=j.useMemo(()=>{if(v!=="map")return nt;const q=T||{};return nt.map(Oe=>{const Qe=String((Oe==null?void 0:Oe.awb)||"").toUpperCase(),Ye=q[Qe],Ze=cc(Oe);return Ye&&(!Ye.q||Ye.q===Ze)&&it(Ye.lat)&&it(Ye.lon)?{...Oe,latitude:Number(Ye.lat),longitude:Number(Ye.lon)}:Oe})},[v,nt,T]),In=20,[rr,xt]=j.useState(1);j.useEffect(()=>{xt(1)},[a,v]);const Nt=Math.ceil(nt.length/In),yt=v==="list"?nt.slice((rr-1)*In,rr*In):nt,$r=q=>q==="Delivered"?"from-emerald-500 to-emerald-600":q==="In Transit"?"from-blue-500 to-blue-600":"from-amber-500 to-amber-600",Ue=q=>q==="Delivered"?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":q==="In Transit"?"bg-blue-500/20 text-blue-400 border-blue-500/30":"bg-amber-500/20 text-amber-400 border-amber-500/30";return m.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-20 right-0 w-72 h-72 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"sticky top-0 z-40 glass-strong backdrop-blur-xl border-b border-white/10 pb-2 shadow-sm",children:[m.jsxs("div",{className:"p-4 flex items-center gap-4",children:[m.jsx("button",{onClick:()=>Me(-1),className:"p-2 -ml-2 rounded-xl glass-light text-slate-300 hover:text-white transition-colors border border-white/10",children:m.jsx(go,{})}),m.jsx("h1",{className:"flex-1 font-black text-xl text-gradient tracking-tight",children:"Shipments"}),m.jsxs("div",{className:"flex glass-strong p-1 rounded-xl border border-white/10",children:[m.jsx("button",{onClick:()=>y("list"),className:`p-2 rounded-lg transition-all ${v==="list"?"bg-gradient-to-r from-violet-600 to-purple-600 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:m.jsx(M_,{size:20})}),m.jsx("button",{onClick:()=>y("map"),className:`p-2 rounded-lg transition-all ${v==="map"?"bg-gradient-to-r from-violet-600 to-purple-600 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:m.jsx(L_,{size:20})})]}),m.jsx("button",{onClick:ge,className:`p-2 rounded-xl glass-light hover:bg-violet-500/20 text-violet-400 transition-all border border-white/10 ${n?"animate-spin":""}`,children:m.jsx(Qi,{size:20})})]}),m.jsx("div",{className:"px-4 pb-2",children:m.jsxs("div",{className:"relative group",children:[m.jsx(nl,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-violet-400 transition-colors z-10",size:18}),m.jsx("input",{type:"text",placeholder:"Search AWB, Client...",className:"w-full pl-12 pr-4 py-3.5 glass-strong rounded-2xl outline-none focus:ring-2 focus:ring-violet-500/30 border border-white/10 text-sm font-medium text-white placeholder-slate-500 transition-all",value:a,onChange:q=>c(q.target.value)})]})})]}),m.jsx("div",{className:"flex-1 p-4 space-y-3 pb-32 relative z-10",children:m.jsxs(ws,{mode:"wait",children:[X&&m.jsx(tt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"glass-strong p-4 rounded-2xl border border-emerald-500/20 text-emerald-300 text-xs font-bold",children:X}),n&&e.length===0?m.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-violet-500/20 blur-xl rounded-full animate-pulse"}),m.jsx(Qn,{className:"animate-spin relative z-10 text-violet-400",size:48})]}),m.jsx("p",{className:"mt-6 font-bold text-xs uppercase tracking-widest text-slate-500",children:"Syncing Data..."})]}):nt.length===0?m.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(As,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No shipments found"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Try adjusting your search"})]}):v==="map"?m.jsxs(tt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"h-[70vh] w-full rounded-3xl overflow-hidden border-iridescent shadow-2xl relative",children:[m.jsx(Kp,{shipments:Dn,currentLocation:re,originLocation:Ud(),routeGeometry:S}),P.active&&m.jsxs("div",{className:"absolute top-4 left-4 glass-strong rounded-2xl border border-white/10 px-4 py-3 text-white text-xs font-bold shadow-lg",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Qn,{className:"animate-spin text-violet-300",size:14}),m.jsx("span",{className:"uppercase tracking-widest text-[10px] text-slate-300",children:"Geocoding"})]}),m.jsxs("div",{className:"mt-1 text-[10px] text-slate-400 font-black uppercase tracking-wider",children:[P.done,"/",P.total," ",P.current?`(${P.current})`:""]}),m.jsx("div",{className:"mt-2 h-1.5 w-48 bg-white/10 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-gradient-to-r from-violet-500 to-purple-500",style:{width:`${Math.min(100,Math.round(P.done/Math.max(1,P.total)*100))}%`}})}),m.jsx("div",{className:"mt-2 text-[9px] text-slate-500 font-bold",children:"Tip: search a city/awb first to reduce requests."})]})]}):m.jsxs("div",{className:"space-y-3",children:[yt.map((q,Oe)=>{var Qe,Ye,Ze,dt,_t,qe,Lt,kn,Tt,st,_e,wt,ht,jt,Jr,Di,wi,bt;return m.jsxs(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:Oe*.05},className:`glass-strong rounded-3xl overflow-hidden transition-all duration-300 border border-white/10 ${f===Oe?"ring-2 ring-violet-500/30 shadow-glow-sm":""}`,children:[m.jsxs("div",{onClick:()=>{const Zt=f===Oe?null:Oe;g(Zt),Zt!==null&&Pe(q.awb,{refresh:!1})},className:"p-5 flex items-center gap-4 cursor-pointer relative",children:[m.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shadow-sm bg-gradient-to-br ${$r(q.status)}`,children:m.jsx(As,{size:24,strokeWidth:2,className:"text-white"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[m.jsx("h3",{className:"font-mono text-[10px] font-black uppercase tracking-widest text-slate-500",children:q.awb}),m.jsxs("div",{className:"flex items-center gap-2",children:[(()=>{const Zt=bM(q.awb);return Zt?m.jsx("span",{className:"text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border bg-emerald-500/15 text-emerald-300 border-emerald-500/20",children:Pc(Zt)}):null})(),m.jsx("span",{className:`text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border ${Ue(q.status)}`,children:q.status||"Active"})]})]}),m.jsx("p",{className:"text-sm font-bold text-white truncate leading-tight mb-2",children:q.recipient_name}),m.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400",children:[m.jsx(tl,{size:11,strokeWidth:2.5}),m.jsx("p",{className:"text-[10px] font-medium truncate",children:q.delivery_address||q.locality||"No Address"})]})]}),m.jsx(lo,{className:`text-slate-500 transition-transform duration-300 ${f===Oe?"rotate-90 text-violet-400":""}`,size:20})]}),m.jsx(ws,{children:f===Oe&&m.jsx(tt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},children:m.jsxs("div",{className:"p-5 space-y-4 bg-black/20 border-t border-white/5",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"glass-light p-4 rounded-2xl flex items-center gap-3 border border-white/10",children:[m.jsx("div",{className:"p-2 bg-violet-500/20 rounded-xl",children:m.jsx(Ld,{size:16,className:"text-violet-400"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-0.5",children:"Contact"}),m.jsx("p",{className:"text-xs font-bold text-white truncate",children:q.recipient_phone||"--"})]})]}),m.jsxs("div",{className:"glass-light p-4 rounded-2xl flex items-center gap-3 border border-white/10",children:[m.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl",children:m.jsx(ua,{size:16,className:"text-emerald-400"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-0.5",children:"Recipient"}),m.jsx("p",{className:"text-xs font-bold text-white truncate",children:q.recipient_name})]})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Packages"}),m.jsx("p",{className:"text-sm font-black text-white",children:Number.isFinite(Number(q.number_of_parcels))?Number(q.number_of_parcels):((Qe=q==null?void 0:q.raw_data)==null?void 0:Qe.numberOfDistinctBarcodes)||((Ye=q==null?void 0:q.raw_data)==null?void 0:Ye.numberOfParcels)||1})]}),m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Payment"}),m.jsx("p",{className:"text-sm font-black text-white",children:Se(q.payment_amount??q.shipping_cost??q.estimated_shipping_cost,q.currency||((Ze=q==null?void 0:q.raw_data)==null?void 0:Ze.currency)||"RON")}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold mt-1 truncate",children:q.shipping_cost?`Cost: ${Se(q.shipping_cost,q.currency||"RON")}`:q.estimated_shipping_cost?`Est: ${Se(q.estimated_shipping_cost,q.currency||"RON")}`:"Not loaded"})]}),m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"COD"}),m.jsx("p",{className:"text-sm font-black text-white",children:Se(q.cod_amount,q.currency||"RON")})]}),m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Declared"}),m.jsx("p",{className:"text-sm font-black text-white",children:Se(q.declared_value,q.currency||"RON")})]}),m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10 col-span-2",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-1",children:"Content"}),m.jsx("p",{className:"text-xs font-bold text-white truncate",children:q.content_description||((dt=q==null?void 0:q.raw_data)==null?void 0:dt.contentDescription)||((_t=q==null?void 0:q.raw_data)==null?void 0:_t.contents)||((qe=q==null?void 0:q.raw_data)==null?void 0:qe.content)||((Lt=q==null?void 0:q.raw_data)==null?void 0:Lt.packageContent)||((kn=q==null?void 0:q.raw_data)==null?void 0:kn.shipmentContent)||((Tt=q==null?void 0:q.raw_data)==null?void 0:Tt.goodsDescription)||((_e=(st=q==null?void 0:q.raw_data)==null?void 0:st.additionalServices)==null?void 0:_e.contentDescription)||((ht=(wt=q==null?void 0:q.raw_data)==null?void 0:wt.additionalServices)==null?void 0:ht.contents)||((Jr=(jt=q==null?void 0:q.raw_data)==null?void 0:jt.additionalServices)==null?void 0:Jr.content)||((wi=(Di=q==null?void 0:q.raw_data)==null?void 0:Di.productCategory)==null?void 0:wi.name)||(typeof((bt=q==null?void 0:q.raw_data)==null?void 0:bt.productCategory)=="string"?q.raw_data.productCategory:"")||"--"}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold mt-1 truncate",children:[q.dimensions?`Dims: ${q.dimensions}`:"",q.weight?`  W: ${Number(q.weight).toFixed(2)} kg`:"",q.volumetric_weight?`  Vol: ${Number(q.volumetric_weight).toFixed(2)} kg`:""]}),m.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:[q.shipment_reference?`Ref: ${q.shipment_reference}`:"",q.client_order_id?`  Order: ${q.client_order_id}`:""]}),m.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:[Be(q)?`Client: ${Be(q)}`:"",q.source_channel?`${Be(q)?"  ":""}Channel: ${q.source_channel}`:""]})]})]}),Array.isArray(q.tracking_history)&&q.tracking_history.length>0&&m.jsxs("div",{className:"glass-light p-4 rounded-2xl border border-white/10",children:[m.jsx("p",{className:"text-[9px] uppercase font-bold text-slate-500 tracking-wide mb-2",children:"History"}),m.jsx("div",{className:"space-y-2",children:q.tracking_history.slice(0,4).map((Zt,Ns)=>m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsx("p",{className:"text-[11px] font-bold text-slate-200 truncate",children:(Zt==null?void 0:Zt.eventDescription)||(Zt==null?void 0:Zt.statusDescription)||"Update"}),m.jsx("p",{className:"text-[10px] font-bold text-slate-500 whitespace-nowrap",children:Zt!=null&&Zt.eventDate?new Date(Zt.eventDate).toLocaleString():""})]},Ns))})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("button",{onClick:()=>Pe(q.awb,{refresh:!0}),className:`w-full btn-premium py-3 bg-gradient-to-r from-slate-700 to-slate-800 hover:from-slate-600 hover:to-slate-700 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm ${Z[String((q==null?void 0:q.awb)||"").toUpperCase()]?"opacity-70 cursor-not-allowed":""}`,disabled:Z[String((q==null?void 0:q.awb)||"").toUpperCase()],title:"Fetch full details + history from Postis",children:[m.jsx(Qi,{size:16,className:Z[String((q==null?void 0:q.awb)||"").toUpperCase()]?"animate-spin":""}),"Details"]}),Ce?m.jsxs("button",{onClick:()=>ze(q),className:`w-full btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm ${z[String((q==null?void 0:q.awb)||"").toUpperCase()]?"opacity-70 cursor-not-allowed":""}`,disabled:z[String((q==null?void 0:q.awb)||"").toUpperCase()]||String((q==null?void 0:q.status)||"").toLowerCase()==="delivered",title:"Mark as Delivered",children:[m.jsx(gh,{size:16}),"Delivered"]}):m.jsx("div",{className:"w-full glass-light rounded-xl border border-white/10 flex items-center justify-center text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Read-only"})]}),m.jsxs("button",{onClick:()=>Ie(q),className:"w-full btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm",children:[m.jsx(P_,{size:16}),"View on Map"]}),je&&String((q==null?void 0:q.driver_id)||"").trim()?m.jsxs("button",{onClick:()=>$(q.awb),disabled:!!me[String((q==null?void 0:q.awb)||"").toUpperCase()],className:`w-full btn-premium py-3 bg-gradient-to-r from-sky-600 to-indigo-700 hover:from-sky-500 hover:to-indigo-600 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm ${me[String((q==null?void 0:q.awb)||"").toUpperCase()]?"opacity-70 cursor-not-allowed":""}`,title:"Request driver live location",children:[me[String((q==null?void 0:q.awb)||"").toUpperCase()]?m.jsx(Qn,{size:16,className:"animate-spin"}):m.jsx(tl,{size:16}),"Track Driver"]}):null,ue?m.jsxs("button",{onClick:()=>Xe(q.awb),className:"w-full btn-premium py-3 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-sm flex items-center justify-center gap-2 text-sm",children:[m.jsx(co,{size:16}),ke?"Allocate to Truck":"Assign to Route"]}):null]})})})]},q.awb||Oe)}),Nt>1&&m.jsxs("div",{className:"flex items-center justify-between pt-4 glass-strong rounded-2xl p-4 border border-white/10",children:[m.jsx("button",{onClick:()=>xt(q=>Math.max(1,q-1)),disabled:rr===1,className:"p-2 rounded-xl hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-white",children:m.jsx(go,{size:20})}),m.jsxs("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:["Page ",rr," of ",Nt]}),m.jsx("button",{onClick:()=>xt(q=>Math.min(Nt,q+1)),disabled:rr===Nt,className:"p-2 rounded-xl hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-white",children:m.jsx(lo,{size:20})})]})]})]})}),m.jsx(ws,{children:V.open&&m.jsx(tt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-end justify-center bg-black/60 backdrop-blur-sm p-4",onClick:()=>O({open:!1,awb:null}),children:m.jsxs(tt.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},exit:{y:30,opacity:0},className:"w-full max-w-md glass-strong rounded-3xl border-iridescent p-5 space-y-4",onClick:q=>q.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Assign AWB"}),m.jsx("p",{className:"text-sm font-bold text-white font-mono mt-1",children:V.awb})]}),m.jsx("button",{onClick:Vt,className:"px-4 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-300 text-[10px] font-black uppercase tracking-widest active:scale-95 transition-all",children:"Create Route"})]}),m.jsx("div",{className:"space-y-2 max-h-[45vh] overflow-y-auto",children:k.length===0?m.jsx("p",{className:"text-xs text-slate-500",children:"No routes yet. Tap Create Route."}):k.map(q=>m.jsxs("button",{onClick:()=>Et(q.id),className:"w-full p-4 rounded-2xl border border-white/10 hover:border-emerald-500/30 transition-all text-left glass-light flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-sm font-bold text-white truncate",children:Pc(q)}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1",children:[q.date,"  ",Array.isArray(q.awbs)?q.awbs.length:0," stops",q.vehicle_plate?`  ${q.vehicle_plate}`:""]})]}),m.jsx("span",{className:"text-[10px] font-black text-emerald-300 uppercase tracking-wide",children:"Select"})]},q.id))})]})})})]})}function AM(){const[e,t]=j.useState(new Date),[n,i]=j.useState({}),[a,c]=j.useState(!0),f=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),g=new Date(e.getFullYear(),e.getMonth(),1).getDay(),v=()=>t(new Date(e.getFullYear(),e.getMonth()-1,1)),y=()=>t(new Date(e.getFullYear(),e.getMonth()+1,1)),S=e.toLocaleString("default",{month:"long"}),b=e.getFullYear();j.useEffect(()=>{(async()=>{c(!0);try{const U=localStorage.getItem("token"),V=new Date(e.getFullYear(),e.getMonth(),1).toISOString(),O=new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59).toISOString(),H=(await Bp(U,{start_date:V,end_date:O,limit:2e3})).reduce((X,G)=>{const Z=new Date(G.timestamp).getDate();return X[Z]||(X[Z]=[]),X[Z].push(G),X},{});i(H)}catch(U){console.error("Failed to fetch monthly deliveries",U)}finally{c(!1)}})()},[e]);const T=[];for(let P=0;P<g;P+=1)T.push(m.jsx("div",{className:"h-24"},`empty-${P}`));for(let P=1;P<=f;P+=1){const U=n[P]||[],V=U.length>0,O=P===new Date().getDate()&&e.getMonth()===new Date().getMonth()&&e.getFullYear()===new Date().getFullYear();T.push(m.jsxs("div",{className:`h-24 border-t border-white/5 p-2 relative flex flex-col items-center justify-center gap-1 transition-all duration-300 hover:bg-white/5 cursor-pointer group ${O?"bg-violet-500/10 border-violet-500/30":""}`,children:[m.jsx("span",{className:`text-xs font-black absolute top-2 right-2 transition-all ${O?"text-violet-400":"text-slate-500 group-hover:text-violet-300"}`,children:P}),V&&m.jsxs("div",{className:"flex flex-col items-center animate-scale-in",children:[m.jsx("div",{className:"p-2 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl text-white shadow-glow-sm",children:m.jsx(As,{size:16,strokeWidth:2.5})}),m.jsxs("span",{className:"text-[9px] font-black text-emerald-400 uppercase mt-1.5 tracking-wide",children:[U.length," AWB"]})]})]},P))}const I=Object.values(n).flat().length,D=I>0?(I/new Date().getDate()).toFixed(1):0;return m.jsxs("div",{className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-xl font-black text-gradient tracking-tight",children:"Delivery Calendar"}),m.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"Track your monthly performance"})]}),m.jsx("div",{className:"w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10",children:m.jsx(T_,{size:20,className:"text-violet-400"})})]}),m.jsxs("div",{className:"flex-1 p-4 pb-32 space-y-6 relative z-10",children:[m.jsxs("div",{className:"glass-strong rounded-[32px] shadow-2xl border-iridescent overflow-hidden animate-scale-in",children:[m.jsxs("div",{className:"p-6 flex items-center justify-between bg-gradient-to-r from-violet-600 via-purple-600 to-violet-700 text-white relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 shimmer opacity-20"}),m.jsx("button",{onClick:v,className:"p-2.5 hover:bg-white/20 rounded-xl transition-all active:scale-95 relative z-10 magnetic",children:m.jsx(bI,{size:20,strokeWidth:2.5})}),m.jsxs("h2",{className:"text-lg font-black uppercase tracking-widest relative z-10",children:[S," ",b]}),m.jsx("button",{onClick:y,className:"p-2.5 hover:bg-white/20 rounded-xl transition-all active:scale-95 relative z-10 magnetic",children:m.jsx(lo,{size:20,strokeWidth:2.5})})]}),m.jsxs("div",{className:"grid grid-cols-7 text-center py-4 bg-black/20 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:[m.jsx("div",{children:"Sun"}),m.jsx("div",{children:"Mon"}),m.jsx("div",{children:"Tue"}),m.jsx("div",{children:"Wed"}),m.jsx("div",{children:"Thu"}),m.jsx("div",{children:"Fri"}),m.jsx("div",{children:"Sat"})]}),m.jsxs("div",{className:"grid grid-cols-7 relative min-h-[400px]",children:[a&&m.jsx("div",{className:"absolute inset-0 glass-strong z-10 flex items-center justify-center backdrop-blur-sm",children:m.jsxs("div",{className:"text-center",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-violet-500/20 blur-xl rounded-full animate-pulse"}),m.jsx(Qn,{className:"animate-spin relative z-10 text-violet-400",size:48})]}),m.jsx("p",{className:"mt-6 font-bold text-xs uppercase tracking-widest text-slate-500",children:"Loading..."})]})}),T]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Monthly Insights"}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"glass-strong p-5 rounded-2xl border-iridescent animate-scale-in",style:{animationDelay:"0.1s"},children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("div",{className:"p-2 bg-violet-500/20 rounded-lg",children:m.jsx(As,{size:16,className:"text-violet-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Total"})]}),m.jsx("p",{className:"text-3xl font-black text-gradient-purple",children:I}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium mt-1",children:"Deliveries"})]}),m.jsxs("div",{className:"glass-strong p-5 rounded-2xl border-iridescent animate-scale-in",style:{animationDelay:"0.2s"},children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:m.jsx(Dd,{size:16,className:"text-emerald-400"})}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Average"})]}),m.jsx("p",{className:"text-3xl font-black text-gradient-blue",children:D}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium mt-1",children:"Per Day"})]})]}),m.jsxs("div",{className:"glass-strong p-5 rounded-2xl border-iridescent flex items-center gap-4 animate-scale-in",style:{animationDelay:"0.3s"},children:[m.jsx("div",{className:"p-4 bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl shadow-glow-sm",children:m.jsx(F_,{size:24,className:"text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:"text-sm font-black text-white",children:"Active Month"}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-medium uppercase tracking-wide mt-1",children:[I," shipments processed in ",S]})]})]})]})]})]})}const My=e=>{try{return String(e||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim().toLowerCase()}catch{return String(e||"").trim().toLowerCase()}};function EM(){const e=Qr(),{user:t}=Ar(),[n,i]=j.useState([]),[a,c]=j.useState(""),[f,g]=j.useState(new Date().toISOString().slice(0,10)),[v,y]=j.useState(()=>{try{return localStorage.getItem("arynik_last_vehicle_plate_v1")||""}catch{return""}}),[S,b]=j.useState([]),[T,I]=j.useState(!1),[D,P]=j.useState(""),U=()=>i(uc()),V=()=>b(ky(f));j.useEffect(()=>{U()},[]),j.useEffect(()=>{try{const G=ky(f);(!G||G.length<ol.length)&&l1({date:f,shipments:[],driver_id:(t==null?void 0:t.driver_id)||null})}catch{}U(),V()},[f]);const O=()=>{const Z=String(a||"").trim()||`Route ${new Date().toLocaleDateString()}`,J=String(v||"").trim().toUpperCase(),z=lC({name:Z,driver_id:(t==null?void 0:t.driver_id)||null,driver_name:(t==null?void 0:t.name)||null,helper_name:(t==null?void 0:t.helper_name)||null,vehicle_plate:J||null,date:f});if(c(""),J)try{localStorage.setItem("arynik_last_vehicle_plate_v1",J)}catch{}U(),e(`/routes/${z.id}`)},k=async()=>{I(!0),P("");try{const G=t==null?void 0:t.token,Z=await Qc(G),J=l1({date:f,shipments:Z,driver_id:(t==null?void 0:t.driver_id)||null});P(`Created ${J.created_routes} routes  Allocated ${J.allocated_awbs} AWBs  Moldova deliverables: ${J.deliverable_in_moldova}`+(J.missing_county?`  Missing county: ${J.missing_county}`:""))}catch(G){console.warn("Daily route generation failed",G),P("Failed to generate daily routes (check API / shipment sync).")}finally{I(!1),U(),V()}},H=G=>{window.confirm("Delete this route?")&&(vM(G),U())},X=j.useMemo(()=>{const G=new Map;return(Array.isArray(S)?S:[]).forEach(Z=>{const J=My((Z==null?void 0:Z.county)||(Z==null?void 0:Z.name));J&&G.set(J,Z)}),G},[S]);return m.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-violet-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-xl font-black text-gradient tracking-tight",children:"Routes"}),m.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"Create routes and allocate AWBs"})]}),m.jsx("div",{className:"w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10",children:m.jsx(co,{size:20,className:"text-emerald-400"})})]}),m.jsxs("div",{className:"flex-1 p-4 pb-32 space-y-6 relative z-10",children:[m.jsxs("div",{className:"glass-strong p-5 rounded-3xl border-iridescent space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Daily Routes (Moldova)"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1 truncate",children:"Bacau, Iasi, Neamt, Galati, Botosani, Suceava, Vaslui"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"date",value:f,onChange:G=>g(G.target.value),className:"px-3 py-2 bg-slate-900/50 border border-slate-700/50 rounded-2xl text-white focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-xs font-bold"}),m.jsxs("button",{onClick:k,disabled:T,className:`px-4 py-2 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 text-[10px] font-black uppercase tracking-widest active:scale-95 transition-all flex items-center gap-2 ${T?"opacity-60 cursor-not-allowed":""}`,title:"Create the 7 county routes and auto-allocate deliverable AWBs",children:[m.jsx(Qi,{size:14,className:T?"animate-spin":""}),"Generate"]})]})]}),D&&m.jsx("div",{className:"glass-light p-4 rounded-2xl border border-emerald-500/20 text-emerald-200 text-xs font-bold",children:D}),m.jsx("div",{className:"grid grid-cols-2 gap-3",children:ol.map(G=>{const Z=X.get(My(G.name)),J=Array.isArray(Z==null?void 0:Z.awbs)?Z.awbs.length:0,z=Z?cC(Z):"";return m.jsxs("button",{onClick:()=>Z&&e(`/routes/${Z.id}`),disabled:!Z,className:`p-4 rounded-3xl border transition-all text-left flex items-center justify-between gap-3 ${Z?"glass-strong border-white/10 hover:border-emerald-500/30":"bg-slate-900/30 border-slate-800/50 opacity-60 cursor-not-allowed"}`,title:Z?"Open route":"Generate routes first",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-white font-black truncate",children:G.name}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1",children:[f,"  ",J," stops"]}),z&&m.jsx("p",{className:"text-[10px] text-emerald-200 font-black uppercase tracking-wide mt-1 truncate",children:z})]}),m.jsx("div",{className:`w-10 h-10 rounded-2xl flex items-center justify-center border ${Z?"bg-emerald-500/15 border-emerald-500/20 text-emerald-300":"bg-slate-800/30 border-white/5 text-slate-500"}`,children:m.jsx(Bx,{size:18})})]},G.code)})})]}),m.jsxs("div",{className:"glass-strong p-5 rounded-3xl border-iridescent space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"New Route"}),m.jsxs("span",{className:"text-[10px] font-bold text-slate-500",children:["Driver: ",m.jsx("span",{className:"text-slate-300 font-mono",children:(t==null?void 0:t.name)||(t==null?void 0:t.driver_id)||"N/A"})]})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[m.jsx("input",{value:a,onChange:G=>c(G.target.value),placeholder:"Route label (optional)",className:"col-span-2 px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-2xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium"}),m.jsx("input",{type:"date",value:f,onChange:G=>g(G.target.value),className:"px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-2xl text-white focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium"}),m.jsx("input",{value:v,onChange:G=>y(G.target.value),placeholder:"Vehicle plate (ex: BC75ARI)",className:"col-span-3 px-4 py-3.5 bg-slate-900/50 border border-slate-700/50 rounded-2xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 text-sm font-medium font-mono tracking-wider"})]}),m.jsxs("button",{onClick:O,className:"w-full btn-premium py-4 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white rounded-2xl font-bold shadow-lg hover:shadow-glow-md transition-all flex items-center justify-center gap-2",children:[m.jsx(lc,{size:18}),"Create Route"]})]}),n.length===0?m.jsxs("div",{className:"text-center py-16 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(co,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No routes yet"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Create your first route above"})]}):m.jsxs("div",{className:"space-y-3",children:[m.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Your Routes"}),n.map(G=>m.jsx("div",{className:"glass-strong p-5 rounded-3xl border border-white/10 hover:border-emerald-500/30 transition-all group",children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-emerald-600 to-emerald-700 flex items-center justify-center shadow-glow-sm",children:m.jsx(co,{size:18,className:"text-white"})}),m.jsx("div",{className:"flex-1 min-w-0",children:m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-white font-black truncate",children:Pc(G)}),String((G==null?void 0:G.county)||(G==null?void 0:G.name)||"").trim()&&String((G==null?void 0:G.county)||(G==null?void 0:G.name)||"").trim()!==Pc(G)&&m.jsx("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-wide mt-1 truncate",children:String((G==null?void 0:G.county)||(G==null?void 0:G.name)||"").trim()}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1",children:[G.date||"No date","  ",Array.isArray(G.awbs)?G.awbs.length:0," stops",G.vehicle_plate?`  ${G.vehicle_plate}`:""]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>H(G.id),className:"p-2 rounded-xl glass-light border border-white/10 text-rose-400 hover:bg-rose-500/10 active:scale-95 transition-all",title:"Delete route",children:m.jsx(Pd,{size:18})}),m.jsx("button",{onClick:()=>e(`/routes/${G.id}`),className:"p-2 rounded-xl glass-light border border-white/10 text-emerald-400 hover:bg-emerald-500/10 active:scale-95 transition-all",title:"Open route",children:m.jsx(Bx,{size:18})})]})]})})]})},G.id))]})]})]})}const uC="arynik_helpers_v1",NM=e=>{try{return localStorage.getItem(e)}catch{return null}},TM=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},em=e=>{const t=String(e||"").trim();return t?t.replace(/\s+/g," "):""},Hd=e=>em(e).toLowerCase(),c1=()=>{const e=NM(uC);if(!e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t.map(em).filter(Boolean).filter((n,i,a)=>a.findIndex(c=>Hd(c)===Hd(n))===i).sort((n,i)=>n.localeCompare(i,void 0,{sensitivity:"base"})):[]}catch{return[]}},IM=e=>{const t=em(e);if(!t)return c1();const n=c1();if(n.some(c=>Hd(c)===Hd(t)))return n;const a=[...n,t].sort((c,f)=>c.localeCompare(f,void 0,{sensitivity:"base"}));return TM(uC,JSON.stringify(a)),a},Df=(e,t)=>{const n=y=>y*Math.PI/180,a=n(t.lat-e.lat),c=n(t.lon-e.lon),f=n(e.lat),g=n(t.lat),v=Math.sin(a/2)**2+Math.cos(f)*Math.cos(g)*Math.sin(c/2)**2;return 2*6371*Math.asin(Math.sqrt(v))},kM=(e,t,n)=>{const i=Array.isArray(e)?e.slice():[],a=String(t||"").trim().toUpperCase(),c=String(n||"").trim().toUpperCase();if(!a||!c)return i;const f=i.findIndex(S=>String(S||"").toUpperCase()===a),g=i.findIndex(S=>String(S||"").toUpperCase()===c);if(f===-1||g===-1||f===g)return i;const[v]=i.splice(f,1),y=f<g?Math.max(0,g-1):g;return i.splice(y,0,v),i},MM=({open:e,title:t,children:n,onClose:i})=>m.jsx(ws,{children:e&&m.jsx(tt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[70] flex items-end justify-center bg-black/70 backdrop-blur-sm p-4",onClick:i,children:m.jsxs(tt.div,{initial:{y:24,opacity:0},animate:{y:0,opacity:1},exit:{y:24,opacity:0},className:"w-full max-w-md glass-strong rounded-3xl border-iridescent p-5 space-y-4",onClick:a=>a.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsx("div",{className:"min-w-0",children:m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:t})}),m.jsx("button",{type:"button",onClick:i,className:"p-2 rounded-2xl glass-light border border-white/10 text-slate-300 hover:text-white active:scale-95 transition-all","aria-label":"Close",children:m.jsx(Zc,{size:18})})]}),n]})})});function RM(){const{routeId:e}=$w(),t=Qr(),{user:n}=Ar(),i=Vn(n,Ba),a=j.useMemo(()=>Vn(n,uo),[n]),c=j.useMemo(()=>Vn(n,Mp),[n]),{location:f}=Vp(),[g,v]=j.useState(null),[y,S]=j.useState([]),[b,T]=j.useState(!0),[I,D]=j.useState(""),[P,U]=j.useState(""),[V,O]=j.useState("list"),[k,H]=j.useState(""),[X,G]=j.useState(""),[Z,J]=j.useState(""),[z,te]=j.useState([]),[me,fe]=j.useState(!1),[Me,we]=j.useState(()=>c1()),[ae,Ce]=j.useState(!1),[ke,ue]=j.useState(""),[je,ge]=j.useState(""),[Se,Be]=j.useState({}),[Pe,ze]=j.useState({active:!1,done:0,total:0,current:""}),[$,re]=j.useState(null),[Ie,Xe]=j.useState({distance_km:null,duration_min:null}),[Et,Vt]=j.useState(null),[nt,en]=j.useState({active:!1,dragging:"",over:""}),ut=j.useRef({active:!1,dragging:"",over:"",pointer_id:null,last_over:""}),Dn=j.useRef(null),In=j.useRef(null),rr=f?{lat:f.latitude,lon:f.longitude}:null,xt=Ud();j.useEffect(()=>{In.current=g},[g]);const Nt=(ne,pe="RON")=>{const xe=Number(ne);return Number.isFinite(xe)?`${xe.toFixed(2)} ${String(pe||"RON").toUpperCase()}`:"--"};j.useEffect(()=>{const ne=Jp(e);v(ne)},[e]),j.useEffect(()=>{H(String((g==null?void 0:g.vehicle_plate)||"").toUpperCase()),G(String((g==null?void 0:g.driver_name)||"").trim()),J(String((g==null?void 0:g.helper_name)||"").trim())},[g==null?void 0:g.vehicle_plate,g==null?void 0:g.driver_name,g==null?void 0:g.helper_name,g==null?void 0:g.id]),j.useEffect(()=>{if(!a)return;let ne=!1;return(async()=>{fe(!0);try{const pe=n==null?void 0:n.token,xe=await jp(pe);ne||te(Array.isArray(xe)?xe:[])}catch(pe){console.warn("Failed to load users list",pe),ne||te([])}finally{ne||fe(!1)}})(),()=>{ne=!0}},[a,n==null?void 0:n.token]);const yt=j.useMemo(()=>{const ne=new Map;return(Array.isArray(z)?z:[]).forEach(pe=>{const xe=String((pe==null?void 0:pe.driver_id)||"").trim().toUpperCase();xe&&ne.set(xe,pe)}),ne},[z]),$r=j.useMemo(()=>(Array.isArray(z)?z:[]).filter(ne=>String((ne==null?void 0:ne.role)||"").trim().toLowerCase()==="driver"&&(ne==null?void 0:ne.active)!==!1).slice().sort((ne,pe)=>String((ne==null?void 0:ne.driver_id)||"").localeCompare(String((pe==null?void 0:pe.driver_id)||""))),[z]),Ue=j.useMemo(()=>{const ne=new Set,pe=[],xe=Te=>{const $e=String(Te||"").trim().replace(/\s+/g," ");if(!$e)return;const mt=$e.toLowerCase();ne.has(mt)||(ne.add(mt),pe.push($e))};return(Array.isArray(Me)?Me:[]).forEach(xe),(Array.isArray(z)?z:[]).forEach(Te=>xe(Te==null?void 0:Te.helper_name)),xe(Z),pe.sort((Te,$e)=>Te.localeCompare($e,void 0,{sensitivity:"base"}))},[Me,z,Z]),q=()=>{if(!g)return;const ne=String(k||"").trim().toUpperCase(),pe=Zs(g.id,{vehicle_plate:ne||null});if(pe&&v(pe),ne)try{localStorage.setItem("arynik_last_vehicle_plate_v1",ne)}catch{}},Oe=()=>{if(!g)return;const ne=String(X||"").trim(),pe=Zs(g.id,{driver_name:ne||null});pe&&v(pe)},Qe=()=>{if(!g)return;const ne=String(Z||"").trim(),pe=Zs(g.id,{helper_name:ne||null});pe&&v(pe)},Ye=ne=>{if(!g)return;const pe=String(ne||"").trim();J(pe);const xe=Zs(g.id,{helper_name:pe||null});xe&&v(xe)},Ze=ne=>{if(!g)return;const pe=String(ne||"").trim().toUpperCase(),xe=pe?yt.get(pe):null,Te={driver_id:pe||null,driver_name:((xe==null?void 0:xe.name)||"").trim()||null};!g.vehicle_plate&&(xe!=null&&xe.truck_plate)&&(Te.vehicle_plate=String(xe.truck_plate).trim().toUpperCase()),!g.helper_name&&(xe!=null&&xe.helper_name)&&(Te.helper_name=String(xe.helper_name).trim());const $e=Zs(g.id,Te);$e&&v($e)},dt=()=>{const ne=String(ke||"").trim();if(!ne){ge("Helper name is required.");return}const pe=IM(ne);we(pe),Ce(!1),ue(""),ge(""),Ye(ne)};j.useEffect(()=>{if(!g||yt.size===0)return;const ne=String((g==null?void 0:g.driver_id)||"").trim().toUpperCase();if(!ne)return;const pe=yt.get(ne);if(!pe)return;const xe={},Te=String((pe==null?void 0:pe.name)||"").trim(),$e=String((pe==null?void 0:pe.helper_name)||"").trim(),mt=String((pe==null?void 0:pe.truck_plate)||"").trim().toUpperCase();if(Te&&!String((g==null?void 0:g.driver_name)||"").trim()&&(xe.driver_name=Te),$e&&!String((g==null?void 0:g.helper_name)||"").trim()&&(xe.helper_name=$e),mt&&!String((g==null?void 0:g.vehicle_plate)||"").trim()&&(xe.vehicle_plate=mt),Object.keys(xe).length===0)return;const Rt=Zs(g.id,xe);Rt&&v(Rt)},[g==null?void 0:g.id,g==null?void 0:g.driver_id,yt]);const _t=async()=>{T(!0);try{const ne=n==null?void 0:n.token,pe=await Qc(ne);S(Array.isArray(pe)?pe:[])}catch(ne){console.warn("Failed to load shipments",ne),S([])}finally{T(!1)}};j.useEffect(()=>{_t()},[]);const qe=j.useMemo(()=>{const ne=new Map;return y.forEach(pe=>{pe!=null&&pe.awb&&ne.set(String(pe.awb).toUpperCase(),pe)}),ne},[y]),Lt=Array.isArray(g==null?void 0:g.awbs)?g.awbs:[],kn=j.useRef(Lt);j.useEffect(()=>{kn.current=Lt,ut.current.active&&(ut.current={active:!1,dragging:"",over:"",pointer_id:null,last_over:""},en({active:!1,dragging:"",over:""}),Vt(null),Dn.current=null)},[Lt.join("|")]);const Tt=Et!==null?Et:Lt,st=j.useMemo(()=>Tt.map(ne=>{const pe=qe.get(String(ne).toUpperCase());return pe||{awb:ne,status:"Unknown",recipient_name:"Unknown",delivery_address:"",locality:""}}),[Tt,qe]),_e=j.useMemo(()=>st.map(ne=>{const pe=String((ne==null?void 0:ne.awb)||"").toUpperCase(),xe=cc(ne),Te=Se[pe],$e=Te&&(!Te.q||Te.q===xe)&&it(Te.lat)&&it(Te.lon),mt=it(ne==null?void 0:ne.latitude)?Number(ne.latitude):$e?Number(Te.lat):null,Rt=it(ne==null?void 0:ne.longitude)?Number(ne.longitude):$e?Number(Te.lon):null;return{...ne,latitude:Number.isFinite(mt)?mt:null,longitude:Number.isFinite(Rt)?Rt:null}}),[st,Se]),wt=j.useMemo(()=>{const ne=String(I||"").trim().toLowerCase();if(!ne)return[];const pe=new Set(Tt.map(xe=>String(xe).toUpperCase()));return y.filter(xe=>{const Te=String((xe==null?void 0:xe.awb)||"").toLowerCase(),$e=String((xe==null?void 0:xe.recipient_name)||"").toLowerCase();return(Te.includes(ne)||$e.includes(ne))&&!pe.has(String((xe==null?void 0:xe.awb)||"").toUpperCase())}).slice(0,30)},[I,y,Tt]),ht=async ne=>{if(!g)return;const pe=a1(g.id,ne,{scopeDate:!0});if(v(pe),U(""),D(""),pe&&i){const xe=String((pe==null?void 0:pe.driver_id)||"").trim();if(!xe)return;try{await Fp(n==null?void 0:n.token,ne,xe)}catch(Te){console.warn("Allocation API failed",Te)}}},jt=ne=>{if(!g)return;const pe=_M(g.id,ne);v(pe)};j.useEffect(()=>{Dn.current=Et},[Et]);const Jr=(ne,pe)=>{var $e;if(!g)return;const xe=String(ne||"").trim().toUpperCase();if(!xe||ut.current.active)return;if(pe){try{pe.preventDefault()}catch{}try{pe.stopPropagation()}catch{}}const Te=Array.isArray(Tt)?Tt.slice():[];Vt(Te),Dn.current=Te,ut.current={active:!0,dragging:xe,over:xe,pointer_id:(pe==null?void 0:pe.pointerId)??null,last_over:xe},en({active:!0,dragging:xe,over:xe});try{($e=pe==null?void 0:pe.currentTarget)!=null&&$e.setPointerCapture&&Number.isFinite(Number(pe.pointerId))&&pe.currentTarget.setPointerCapture(pe.pointerId)}catch{}},Di=()=>{if(!ut.current.active)return;const ne=Dn.current,pe=kn.current,xe=In.current;if(ut.current={active:!1,dragging:"",over:"",pointer_id:null,last_over:""},en({active:!1,dragging:"",over:""}),!xe||!xe.id){Vt(null),Dn.current=null;return}if(!Array.isArray(ne)||!Array.isArray(pe)||ne.join("|")===pe.join("|")){Vt(null),Dn.current=null;return}const Te=Iy(xe.id,ne);Te&&v(Te)};j.useEffect(()=>{if(!nt.active)return;const ne=xe=>{const Te=ut.current;if(!Te.active||Te.pointer_id!==null&&xe.pointerId!==Te.pointer_id)return;const $e=document.elementFromPoint(xe.clientX,xe.clientY),mt=$e&&$e.closest?$e.closest("[data-stop-awb]"):null,Rt=mt?String(mt.getAttribute("data-stop-awb")||"").trim().toUpperCase():"";Rt&&Rt!==Te.dragging&&Rt!==Te.last_over&&(Te.last_over=Rt,Te.over=Rt,en(Gt=>Gt.over===Rt?Gt:{...Gt,over:Rt}),Vt(Gt=>{const Pt=Array.isArray(Gt)?Gt:kn.current||[],Yt=kM(Pt,Te.dragging,Rt);return Dn.current=Yt,Yt}))},pe=()=>Di();return window.addEventListener("pointermove",ne),window.addEventListener("pointerup",pe),window.addEventListener("pointercancel",pe),()=>{window.removeEventListener("pointermove",ne),window.removeEventListener("pointerup",pe),window.removeEventListener("pointercancel",pe)}},[nt.active]),j.useEffect(()=>{Et!==null&&Array.isArray(Et)&&Et.join("|")===Lt.join("|")&&(Vt(null),Dn.current=null)},[Lt.join("|")]);const wi=async()=>{if(!st||st.length===0)return;const ne=st.length,pe=Se||{},xe={},Te=[];let $e=0;for(const Yt of st){const Ct=String((Yt==null?void 0:Yt.awb)||"").toUpperCase();if(!Ct){$e+=1;continue}const Fe=cc(Yt);if(it(Yt==null?void 0:Yt.latitude)&&it(Yt==null?void 0:Yt.longitude)){xe[Ct]={lat:Number(Yt.latitude),lon:Number(Yt.longitude),ts:Date.now(),source:"shipment",q:Fe},$e+=1;continue}const Xt=pe[Ct];if(Xt&&(!Xt.q||Xt.q===Fe)&&it(Xt.lat)&&it(Xt.lon)){Xt.q||(xe[Ct]={...Xt,q:Fe}),$e+=1;continue}const Re=Vd(Fe);if(Re){it(Re.lat)&&it(Re.lon)&&(xe[Ct]={lat:Number(Re.lat),lon:Number(Re.lon),ts:Number(Re.ts||Date.now()),source:"cache",q:Fe}),$e+=1;continue}Te.push({awb:Ct,query:Fe})}if(Object.keys(xe).length>0&&Be(Yt=>({...Yt,...xe})),Te.length===0){ze({active:!1,done:ne,total:ne,current:""});return}ze({active:!0,done:$e,total:ne,current:""});let mt={},Rt=0,Gt=Date.now();const Pt=()=>{if(Object.keys(mt).length===0)return;const Yt=mt;mt={},Rt=0,Gt=Date.now(),Be(Ct=>({...Ct,...Yt}))};for(const Yt of Te){const{awb:Ct,query:Fe}=Yt;ze({active:!0,done:$e,total:ne,current:Ct});const Xt=await i1(Fe);Xt&&it(Xt.lat)&&it(Xt.lon)&&(mt[Ct]={lat:Number(Xt.lat),lon:Number(Xt.lon),ts:Date.now(),source:"geocode",q:Fe},Rt+=1),$e+=1;const Re=Date.now()-Gt;(Rt>=3||Re>300)&&Pt()}Pt(),ze({active:!1,done:$e,total:ne,current:""})},bt=async ne=>{const pe=Array.isArray(ne)?ne:[],xe=[];if(xt&&it(xt.lat)&&it(xt.lon)&&xe.push({lat:Number(xt.lat),lon:Number(xt.lon)}),pe.forEach(Gt=>{it(Gt==null?void 0:Gt.latitude)&&it(Gt==null?void 0:Gt.longitude)&&xe.push({lat:Number(Gt.latitude),lon:Number(Gt.longitude)})}),xe.length<2){re(null),Xe({distance_km:null,duration_min:null});return}const Te=await Xk(xe);Te!=null&&Te.geometry?re(Te.geometry):re(null);const $e=Number((Te==null?void 0:Te.distance_m)||0),mt=Number((Te==null?void 0:Te.duration_s)||0);if($e>0){Xe({distance_km:Math.round($e/1e3*10)/10,duration_min:mt>0?Math.round(mt/60):null});return}let Rt=0;for(let Gt=0;Gt<xe.length-1;Gt+=1)Rt+=Df(xe[Gt],xe[Gt+1]);Xe({distance_km:Math.round(Rt*10)/10,duration_min:null})};j.useEffect(()=>{V==="map"&&(async()=>await wi())()},[V,Lt.join("|")]),j.useEffect(()=>{V==="map"&&(Pe.active||nt.active||bt(_e))},[V,Pe.active,nt.active,JSON.stringify(_e.map(ne=>[ne.awb,ne.latitude,ne.longitude]))]);const Zt=()=>{if(!g)return;const ne=_e.map(Pt=>({awb:String((Pt==null?void 0:Pt.awb)||"").toUpperCase(),lat:Number(Pt==null?void 0:Pt.latitude),lon:Number(Pt==null?void 0:Pt.longitude)})).filter(Pt=>Pt.awb&&it(Pt.lat)&&it(Pt.lon));if(ne.length<2)return;const pe=xt&&it(xt.lat)&&it(xt.lon)?{lat:Number(xt.lat),lon:Number(xt.lon)}:{lat:ne[0].lat,lon:ne[0].lon},xe=[...ne],Te=[];let $e=pe;for(;xe.length;){xe.sort((Yt,Ct)=>Df($e,Yt)-Df($e,Ct));const Pt=xe.shift();Te.push(Pt),$e=Pt}const mt=Te.map(Pt=>Pt.awb),Rt=Lt.filter(Pt=>!mt.includes(String(Pt).toUpperCase())),Gt=Iy(g.id,[...mt,...Rt]);v(Gt)},Ns=()=>{const ne=_e.filter(mt=>it(mt==null?void 0:mt.latitude)&&it(mt==null?void 0:mt.longitude)).map(mt=>`${Number(mt.latitude)},${Number(mt.longitude)}`);if(ne.length===0)return;const pe=xt&&it(xt.lat)&&it(xt.lon)?`${Number(xt.lat)},${Number(xt.lon)}`:ne[0],xe=ne[ne.length-1],Te=ne.slice(0,-1).join("|"),$e=new URL("https://www.google.com/maps/dir/");$e.searchParams.set("api","1"),$e.searchParams.set("origin",pe),$e.searchParams.set("destination",xe),Te&&$e.searchParams.set("waypoints",Te),window.open($e.toString(),"_blank","noopener,noreferrer")};return g?m.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-violet-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"sticky top-0 z-40 glass-strong backdrop-blur-xl border-b border-white/10 pb-2 shadow-sm",children:[m.jsxs("div",{className:"p-4 flex items-center gap-4",children:[m.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-xl glass-light text-slate-300 hover:text-white transition-colors border border-white/10",children:m.jsx(go,{})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h1",{className:"font-black text-xl text-gradient tracking-tight truncate",children:Pc(g)}),m.jsxs("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wide mt-1",children:[g.date,"  ",Lt.length," stops",g.county?`  ${g.county}`:g.name?`  ${g.name}`:""]})]}),m.jsxs("div",{className:"flex glass-strong p-1 rounded-xl border border-white/10",children:[m.jsx("button",{onClick:()=>O("list"),className:`p-2 rounded-lg transition-all ${V==="list"?"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:m.jsx(M_,{size:20})}),m.jsx("button",{onClick:()=>O("map"),className:`p-2 rounded-lg transition-all ${V==="map"?"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white shadow-glow-sm":"text-slate-400 hover:text-white"}`,children:m.jsx(L_,{size:20})})]})]}),m.jsxs("div",{className:"px-4 pb-2 space-y-3",children:[m.jsxs("div",{className:"glass-strong rounded-2xl border border-white/10 p-4 space-y-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center",children:m.jsx(kp,{size:18,className:"text-emerald-300"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[9px] uppercase font-black text-slate-500 tracking-[0.2em]",children:"Truck & Crew"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold mt-1 truncate",children:"Route title = plate + driver (+ helper)"})]}),me&&m.jsx("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide",children:"Loading..."})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("div",{className:"glass-light rounded-2xl border border-white/10 p-3",children:[m.jsx("p",{className:"text-[9px] uppercase font-black text-slate-500 tracking-[0.2em] mb-1",children:"Plate"}),m.jsx("input",{value:k,onChange:ne=>H(ne.target.value.toUpperCase()),onBlur:q,placeholder:"BC75ARI",className:"w-full bg-transparent outline-none text-white font-mono text-sm tracking-wider placeholder-slate-600"})]}),m.jsxs("div",{className:"glass-light rounded-2xl border border-white/10 p-3",children:[m.jsx("p",{className:"text-[9px] uppercase font-black text-slate-500 tracking-[0.2em] mb-1",children:"Driver"}),a?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("select",{value:String((g==null?void 0:g.driver_id)||"").trim().toUpperCase(),onChange:ne=>Ze(ne.target.value),className:"w-full bg-transparent outline-none text-white text-xs font-bold",children:[m.jsx("option",{value:"",children:"Unassigned"}),(()=>{const ne=String((g==null?void 0:g.driver_id)||"").trim().toUpperCase(),pe=ne&&$r.some(xe=>String((xe==null?void 0:xe.driver_id)||"").trim().toUpperCase()===ne);return ne&&!pe?m.jsx("option",{value:ne,children:ne}):null})(),$r.map(ne=>m.jsxs("option",{value:String(ne.driver_id||"").trim().toUpperCase(),children:[String(ne.driver_id||"").trim().toUpperCase(),"  ",String(ne.name||"").trim()||"Unnamed"]},ne.driver_id))]}),c&&m.jsx("button",{type:"button",onClick:()=>t(`/users?create=1&role=Driver&returnTo=${encodeURIComponent(`/routes/${e}`)}`),className:"p-2 rounded-xl glass-strong border border-white/10 text-emerald-300 hover:bg-emerald-500/10 active:scale-95 transition-all",title:"Add driver","aria-label":"Add driver",children:m.jsx(lc,{size:16})})]}):m.jsx("input",{value:X,onChange:ne=>G(ne.target.value),onBlur:Oe,placeholder:g!=null&&g.driver_id?`Driver name (for ${g.driver_id})`:"Driver name",className:"w-full bg-transparent outline-none text-white text-sm font-bold placeholder-slate-600"})]}),m.jsxs("div",{className:"glass-light rounded-2xl border border-white/10 p-3 col-span-2",children:[m.jsx("p",{className:"text-[9px] uppercase font-black text-slate-500 tracking-[0.2em] mb-1",children:"Helper"}),a?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("select",{value:String(Z||"").trim(),onChange:ne=>Ye(ne.target.value),className:"w-full bg-transparent outline-none text-white text-xs font-bold",children:[m.jsx("option",{value:"",children:"Unassigned"}),(()=>{const ne=String(Z||"").trim(),pe=ne&&Ue.some(xe=>String(xe||"").trim().toLowerCase()===ne.toLowerCase());return ne&&!pe?m.jsx("option",{value:ne,children:ne}):null})(),Ue.map(ne=>m.jsx("option",{value:ne,children:ne},String(ne).toLowerCase()))]}),c&&m.jsx("button",{type:"button",onClick:()=>{Ce(!0),ue(""),ge("")},className:"p-2 rounded-xl glass-strong border border-white/10 text-emerald-300 hover:bg-emerald-500/10 active:scale-95 transition-all",title:"Add helper","aria-label":"Add helper",children:m.jsx(lc,{size:16})})]}):m.jsx("input",{value:Z,onChange:ne=>J(ne.target.value),onBlur:Qe,placeholder:"Helper name (optional)",className:"w-full bg-transparent outline-none text-white text-sm font-bold placeholder-slate-600"})]})]})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[m.jsx("input",{value:P,onChange:ne=>U(ne.target.value),placeholder:"Add AWB...",className:"col-span-2 w-full px-4 py-3.5 glass-strong rounded-2xl outline-none focus:ring-2 focus:ring-emerald-500/30 border border-white/10 text-sm font-medium text-white placeholder-slate-500 transition-all"}),m.jsxs("button",{onClick:()=>ht(P),className:"btn-premium py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white rounded-2xl font-bold shadow-lg hover:shadow-glow-md transition-all flex items-center justify-center gap-2",children:[m.jsx(lc,{size:18}),"Add"]})]}),m.jsxs("div",{className:"relative group",children:[m.jsx(nl,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-emerald-400 transition-colors z-10",size:18}),m.jsx("input",{type:"text",placeholder:"Search shipments to add...",className:"w-full pl-12 pr-4 py-3.5 glass-strong rounded-2xl outline-none focus:ring-2 focus:ring-emerald-500/30 border border-white/10 text-sm font-medium text-white placeholder-slate-500 transition-all",value:I,onChange:ne=>D(ne.target.value)})]}),I&&wt.length>0&&m.jsx("div",{className:"glass-strong rounded-2xl border border-white/10 overflow-hidden",children:wt.map(ne=>m.jsxs("button",{onClick:()=>ht(ne.awb),className:"w-full p-4 flex items-center gap-3 hover:bg-white/5 transition-all text-left border-b border-white/5 last:border-b-0",children:[m.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center",children:m.jsx(co,{size:16,className:"text-emerald-400"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[10px] font-mono font-black text-slate-500 uppercase tracking-widest truncate",children:ne.awb}),m.jsx("p",{className:"text-sm font-bold text-white truncate",children:ne.recipient_name||"Unknown"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate",children:ne.delivery_address||ne.locality||""})]}),m.jsx("span",{className:"text-[10px] font-black text-emerald-400 uppercase tracking-wide",children:"Add"})]},ne.awb))})]})]}),m.jsx("div",{className:"flex-1 p-4 space-y-3 pb-32 relative z-10",children:V==="map"?m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"glass-strong rounded-2xl border border-white/10 p-4 flex items-center justify-between gap-2",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Route Map"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate",children:Pe.active?`Geocoding ${Pe.done}/${Pe.total} (${Pe.current})`:'Tap "Optimize" for a quick route order'}),m.jsxs("p",{className:"text-[10px] text-slate-400 font-bold mt-1",children:[Ie.distance_km?`~${Ie.distance_km} km`:"Distance: N/A",Ie.duration_min?`  ~${Ie.duration_min} min`:""]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:wi,className:`p-2 rounded-xl glass-light border border-white/10 text-emerald-400 hover:bg-emerald-500/10 active:scale-95 transition-all ${Pe.active?"opacity-60 cursor-not-allowed":""}`,disabled:Pe.active,title:"Geocode stops",children:m.jsx(Qi,{size:18,className:Pe.active?"animate-spin":""})}),m.jsx("button",{onClick:Zt,className:"p-2 rounded-xl glass-light border border-white/10 text-amber-400 hover:bg-amber-500/10 active:scale-95 transition-all",title:"Optimize order",children:m.jsx(BI,{size:18})}),m.jsx("button",{onClick:Ns,className:"p-2 rounded-xl glass-light border border-white/10 text-slate-200 hover:bg-white/10 active:scale-95 transition-all",title:"Open in Google Maps",children:m.jsx(SI,{size:18})})]})]}),m.jsx("div",{className:"h-[70vh] w-full rounded-3xl overflow-hidden border-iridescent shadow-2xl",children:m.jsx(Kp,{shipments:_e,currentLocation:rr,originLocation:xt,routeGeometry:$,showStopNumbers:!0})}),m.jsxs("div",{className:"glass-strong rounded-2xl border border-white/10 p-4",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Stops"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate",children:"Drag the handle to reorder stops. Numbers on the map update automatically."})]}),nt.active&&m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-amber-300",children:"Reordering"})]}),m.jsx("div",{className:"mt-3 space-y-2 max-h-[32vh] overflow-y-auto",children:st.map((ne,pe)=>{const xe=String((ne==null?void 0:ne.awb)||"").toUpperCase(),Te=nt.active&&nt.dragging===xe,$e=nt.active&&nt.over===xe;return m.jsxs("div",{"data-stop-awb":xe,className:`glass-light rounded-2xl border p-3 flex items-center gap-3 ${$e?"border-emerald-500/40":"border-white/10"} ${Te?"opacity-70":""}`,children:[m.jsx("button",{type:"button",className:"p-2 rounded-xl glass-strong border border-white/10 text-slate-200 active:scale-95 transition-all cursor-grab touch-none",onPointerDown:mt=>Jr(xe,mt),title:"Drag to reorder","aria-label":"Drag to reorder",children:m.jsx(EI,{size:18})}),m.jsx("div",{className:"w-9 h-9 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center text-emerald-300 font-black",children:pe+1}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[10px] font-mono font-black text-slate-500 uppercase tracking-widest truncate",children:xe}),m.jsx("p",{className:"text-sm font-bold text-white truncate mt-1",children:ne.recipient_name||"Unknown"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate mt-1",children:ne.delivery_address||ne.locality||""})]}),m.jsx("button",{onClick:()=>jt(xe),className:"p-2 rounded-xl glass-light border border-white/10 text-rose-400 hover:bg-rose-500/10 active:scale-95 transition-all",title:"Remove from route",children:m.jsx(Pd,{size:18})})]},xe||pe)})})]})]}):m.jsx(ws,{mode:"wait",children:st.length===0?m.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(co,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No stops yet"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Add an AWB above to allocate it to this route"})]}):m.jsx("div",{className:"space-y-3",children:st.map((ne,pe)=>{var xe,Te;return m.jsx(tt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:pe*.02},className:"glass-strong p-5 rounded-3xl border border-white/10",children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 flex items-center justify-center text-emerald-400 font-black",children:pe+1}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-[10px] font-mono font-black text-slate-500 uppercase tracking-widest truncate",children:ne.awb}),m.jsx("p",{className:"text-sm font-bold text-white truncate mt-1",children:ne.recipient_name||"Unknown"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate mt-1",children:ne.delivery_address||ne.locality||""}),m.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:[Number.isFinite(Number(ne==null?void 0:ne.number_of_parcels))?Number(ne.number_of_parcels):((xe=ne==null?void 0:ne.raw_data)==null?void 0:xe.numberOfDistinctBarcodes)||((Te=ne==null?void 0:ne.raw_data)==null?void 0:Te.numberOfParcels)||1," ","pkg  ",Nt(ne.payment_amount??ne.shipping_cost??ne.estimated_shipping_cost,ne.currency||"RON")]})]}),m.jsx("button",{onClick:()=>jt(ne.awb),className:"p-2 rounded-xl glass-light border border-white/10 text-rose-400 hover:bg-rose-500/10 active:scale-95 transition-all",title:"Remove from route",children:m.jsx(Pd,{size:18})})]})},`${ne.awb}-${pe}`)})})})}),m.jsx(MM,{open:ae,title:"Add Helper",onClose:()=>Ce(!1),children:m.jsxs("div",{className:"space-y-3",children:[m.jsx("input",{value:ke,onChange:ne=>{ue(ne.target.value),ge("")},placeholder:"Helper name (ex: Andrei Popescu)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"}),je&&m.jsx("div",{className:"text-xs font-bold text-rose-200",children:je}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{type:"button",onClick:()=>Ce(!1),className:"flex-1 px-4 py-3 rounded-2xl glass-light border border-white/10 text-slate-200 text-xs font-black uppercase tracking-widest hover:bg-white/10 active:scale-[0.99] transition-all",children:"Cancel"}),m.jsx("button",{type:"button",onClick:dt,className:"flex-1 px-4 py-3 rounded-2xl bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white text-xs font-black uppercase tracking-widest active:scale-[0.99] transition-all",children:"Add"})]})]})})]}):m.jsx("div",{className:"min-h-screen flex items-center justify-center text-slate-400",children:"Route not found."})}const Ul=(e,t)=>{const n=Number(e)||0,i=Number(t)||0;return i?Math.round(n/i*100):0},Vl=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString()},wr=(e,t)=>String(e||"").toLowerCase().includes(t),An=({label:e,value:t,tone:n="slate"})=>{const i={slate:"bg-slate-500/15 text-slate-300 border-white/10",emerald:"bg-emerald-500/15 text-emerald-300 border-emerald-400/20",rose:"bg-rose-500/15 text-rose-300 border-rose-400/20",violet:"bg-violet-500/15 text-violet-300 border-violet-400/20",amber:"bg-amber-500/15 text-amber-200 border-amber-400/20"};return m.jsxs("div",{className:`px-3 py-2 rounded-2xl border ${i[n]||i.slate}`,children:[m.jsx("div",{className:"text-[9px] font-black uppercase tracking-widest opacity-80",children:e}),m.jsx("div",{className:"text-sm font-black mt-0.5",children:t})]})},Ou=({active:e,icon:t,label:n,onClick:i})=>m.jsxs("button",{type:"button",onClick:i,className:`flex-1 p-3 rounded-2xl border transition-all flex items-center justify-center gap-2 ${e?"bg-gradient-to-br from-violet-600/30 to-purple-600/10 border-violet-400/30 text-white":"bg-slate-900/30 border-white/10 text-slate-300 hover:bg-white/5"}`,children:[m.jsx(t,{size:16,className:e?"text-violet-200":"text-slate-400"}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:n})]});function OM(){const{user:e}=Ar(),t=(e==null?void 0:e.token)||localStorage.getItem("token"),n=j.useMemo(()=>["Admin","Manager","Dispatcher","Support","Finance"].includes(e==null?void 0:e.role),[e==null?void 0:e.role]),[i,a]=j.useState(n?"all":"self"),[c,f]=j.useState("trucks"),[g,v]=j.useState(""),[y,S]=j.useState(null),[b,T]=j.useState(!0),[I,D]=j.useState("");j.useEffect(()=>{n||a("self")},[n]);const P=async()=>{var z,te;T(!0),D("");try{const me=await _b(t,{scope:i});S(me)}catch(me){const fe=((te=(z=me==null?void 0:me.response)==null?void 0:z.data)==null?void 0:te.detail)||(me==null?void 0:me.message)||"Failed to load analytics";D(String(fe))}finally{T(!1)}};j.useEffect(()=>{P()},[t,i]);const U=j.useMemo(()=>String(g||"").trim().toLowerCase(),[g]),V=j.useMemo(()=>{const z=Array.isArray(y==null?void 0:y.trucks)?y.trucks:[];return U?z.filter(te=>wr(te==null?void 0:te.truck_plate,U)||wr(te==null?void 0:te.truck_phone,U)||Array.isArray(te==null?void 0:te.drivers)&&te.drivers.some(me=>wr(me==null?void 0:me.name,U)||wr(me==null?void 0:me.driver_id,U))):z},[y==null?void 0:y.trucks,U]),O=j.useMemo(()=>{const z=Array.isArray(y==null?void 0:y.drivers)?y.drivers:[];return U?z.filter(te=>wr(te==null?void 0:te.name,U)||wr(te==null?void 0:te.driver_id,U)||wr(te==null?void 0:te.truck_plate,U)||wr(te==null?void 0:te.truck_phone,U)||wr(te==null?void 0:te.role,U)):z},[y==null?void 0:y.drivers,U]),k=j.useMemo(()=>{const z=Array.isArray(y==null?void 0:y.awbs)?y.awbs:[];return U?z.filter(te=>wr(te==null?void 0:te.awb,U)||wr(te==null?void 0:te.status,U)||wr(te==null?void 0:te.driver_id,U)):z},[y==null?void 0:y.awbs,U]),H=j.useMemo(()=>{const z=Array.isArray(y==null?void 0:y.events)?y.events:[];return U?z.filter(te=>wr(te==null?void 0:te.event_id,U)||wr(te==null?void 0:te.label,U)||wr(te==null?void 0:te.description,U)):z},[y==null?void 0:y.events,U]),X=(y==null?void 0:y.totals)||{},G=Number(X==null?void 0:X.updates_total)||0,Z=Number(X==null?void 0:X.updates_success)||0,J=Number(X==null?void 0:X.shipments_total)||0;return m.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,y:-20},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-glow-md",children:m.jsx(N_,{size:20,className:"text-white"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-lg font-black text-white leading-none",children:"Statistics"}),m.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mt-1",children:y!=null&&y.generated_at?`Updated ${Vl(y.generated_at)}`:"Mobile analytics"})]})]}),m.jsx("button",{type:"button",onClick:P,className:"w-11 h-11 rounded-2xl glass-light border border-white/10 flex items-center justify-center hover:bg-white/5 transition-all","aria-label":"Refresh analytics",children:m.jsx(Qi,{size:18,className:b?"animate-spin text-slate-300":"text-slate-300"})})]}),m.jsxs("div",{className:"mt-5 flex items-center gap-3",children:[m.jsx(An,{label:"Shipments",value:J,tone:"violet"}),m.jsx(An,{label:"Updates",value:G,tone:"slate"}),m.jsx(An,{label:"Success",value:`${Ul(Z,G)}%`,tone:"emerald"})]}),m.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[m.jsx("div",{className:"flex-1",children:m.jsxs("div",{className:"relative",children:[m.jsx(nl,{size:16,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500"}),m.jsx("input",{value:g,onChange:z=>v(z.target.value),placeholder:"Search truck, driver, AWB, ESCH...",className:"w-full pl-11 pr-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-500 focus:outline-none focus:border-violet-500/40 focus:ring-2 focus:ring-violet-500/20 transition-all text-sm font-medium"})]})}),n?m.jsxs("div",{className:"p-1 rounded-2xl bg-slate-900/40 border border-white/10 flex",children:[m.jsx("button",{type:"button",onClick:()=>a("self"),className:`px-3 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${i==="self"?"bg-white/10 text-white":"text-slate-400 hover:text-slate-200"}`,children:"My"}),m.jsx("button",{type:"button",onClick:()=>a("all"),className:`px-3 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${i==="all"?"bg-white/10 text-white":"text-slate-400 hover:text-slate-200"}`,children:"All"})]}):null]}),m.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[m.jsx(Ou,{active:c==="trucks",icon:kp,label:"Trucks",onClick:()=>f("trucks")}),m.jsx(Ou,{active:c==="drivers",icon:ua,label:"Drivers",onClick:()=>f("drivers")}),m.jsx(Ou,{active:c==="awbs",icon:As,label:"AWB",onClick:()=>f("awbs")}),m.jsx(Ou,{active:c==="events",icon:A_,label:"ESCH",onClick:()=>f("events")})]})]}),m.jsx("main",{className:"flex-1 p-6 pb-32 relative z-10",children:m.jsx(ws,{mode:"wait",children:b?m.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"glass-strong rounded-3xl border-iridescent p-8 flex items-center justify-center gap-3",children:[m.jsx(Qn,{className:"animate-spin text-violet-300",size:20}),m.jsx("span",{className:"text-sm font-black text-white uppercase tracking-wider",children:"Loading analytics"})]},"loading"):I?m.jsx(tt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"bg-rose-500/10 border border-rose-500/30 text-rose-300 px-6 py-5 rounded-3xl font-bold",children:I},"error"):m.jsxs(tt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4",children:[c==="trucks"?m.jsx(m.Fragment,{children:V.length===0?m.jsx("div",{className:"text-slate-400 font-bold text-sm",children:"No trucks found."}):V.map(z=>{const te=Number(z==null?void 0:z.updates_total)||0,me=Number(z==null?void 0:z.updates_success)||0,fe=(z==null?void 0:z.shipments_by_bucket)||{};return m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-5",children:[m.jsxs("div",{className:"flex items-start justify-between gap-4",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Truck"}),m.jsx("div",{className:"text-xl font-black text-white truncate mt-1",children:(z==null?void 0:z.truck_plate)||"Unassigned"}),m.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["Phone: ",(z==null?void 0:z.truck_phone)||"--","  Drivers: ",Array.isArray(z==null?void 0:z.drivers)?z.drivers.length:0]})]}),m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("div",{className:"p-3 rounded-2xl bg-emerald-500/10 border border-emerald-400/20",children:m.jsx(gh,{size:18,className:"text-emerald-300"})})})]}),m.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[m.jsx(An,{label:"Shipments",value:(z==null?void 0:z.shipments_total)||0,tone:"violet"}),m.jsx(An,{label:"Delivered",value:(fe==null?void 0:fe.delivered)||0,tone:"emerald"}),m.jsx(An,{label:"Active",value:(fe==null?void 0:fe.active)||0,tone:"amber"})]}),m.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-3",children:[m.jsx(An,{label:"Updates",value:te,tone:"slate"}),m.jsx(An,{label:"Success",value:`${Ul(me,te)}%`,tone:"emerald"}),m.jsx(An,{label:"Last",value:z!=null&&z.last_update?Vl(z.last_update):"--",tone:"slate"})]})]},(z==null?void 0:z.truck_plate)||"unassigned")})}):null,c==="drivers"?m.jsx(m.Fragment,{children:O.length===0?m.jsx("div",{className:"text-slate-400 font-bold text-sm",children:"No drivers found."}):O.map(z=>{const te=Number(z==null?void 0:z.updates_total)||0,me=Number(z==null?void 0:z.updates_success)||0,fe=(z==null?void 0:z.shipments_by_bucket)||{};return m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-5",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Driver"}),m.jsx("div",{className:"text-xl font-black text-white truncate mt-1",children:(z==null?void 0:z.name)||(z==null?void 0:z.username)||(z==null?void 0:z.driver_id)}),m.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["ID: ",z==null?void 0:z.driver_id,"  ",(z==null?void 0:z.role)||"Role","  Truck: ",(z==null?void 0:z.truck_plate)||"--"]})]})}),m.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[m.jsx(An,{label:"Shipments",value:(z==null?void 0:z.shipments_total)||0,tone:"violet"}),m.jsx(An,{label:"Delivered",value:(fe==null?void 0:fe.delivered)||0,tone:"emerald"}),m.jsx(An,{label:"Active",value:(fe==null?void 0:fe.active)||0,tone:"amber"})]}),m.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-3",children:[m.jsx(An,{label:"Updates",value:te,tone:"slate"}),m.jsx(An,{label:"Success",value:`${Ul(me,te)}%`,tone:"emerald"}),m.jsx(An,{label:"Last",value:z!=null&&z.last_update?Vl(z.last_update):"--",tone:"slate"})]}),m.jsxs("div",{className:"mt-3 text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["Last login: ",z!=null&&z.last_login?Vl(z.last_login):"--","  Truck phone: ",(z==null?void 0:z.truck_phone)||"--"]})]},z==null?void 0:z.driver_id)})}):null,c==="awbs"?m.jsx(m.Fragment,{children:k.length===0?m.jsx("div",{className:"text-slate-400 font-bold text-sm",children:"No AWBs found."}):k.map(z=>{const te=Number(z==null?void 0:z.updates_total)||0,me=Number(z==null?void 0:z.updates_success)||0;return m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-5",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"AWB"}),m.jsx("div",{className:"text-lg font-black text-white truncate mt-1",children:z==null?void 0:z.awb}),m.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:["Status: ",(z==null?void 0:z.status)||"--","  Driver: ",(z==null?void 0:z.driver_id)||"--"]})]})}),m.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[m.jsx(An,{label:"Updates",value:te,tone:"slate"}),m.jsx(An,{label:"Success",value:`${Ul(me,te)}%`,tone:"emerald"}),m.jsx(An,{label:"Last",value:z!=null&&z.last_update?Vl(z.last_update):"--",tone:"slate"})]}),m.jsxs("div",{className:"mt-3 text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["ESCH: ",(z==null?void 0:z.last_event_id)||"--","  Outcome: ",(z==null?void 0:z.last_outcome)||"--"]})]},z==null?void 0:z.awb)})}):null,c==="events"?m.jsx(m.Fragment,{children:H.length===0?m.jsx("div",{className:"text-slate-400 font-bold text-sm",children:"No ESCH events found."}):H.map(z=>{const te=Number(z==null?void 0:z.total)||0,me=Number(z==null?void 0:z.success)||0;return m.jsxs("div",{className:"glass-strong rounded-3xl border-iridescent p-5",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{className:"min-w-0",children:[m.jsx("div",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"ESCH"}),m.jsxs("div",{className:"text-lg font-black text-white truncate mt-1",children:[z==null?void 0:z.event_id," ",z!=null&&z.label?` ${z.label}`:""]}),z!=null&&z.description?m.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1",children:z.description}):null]})}),m.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[m.jsx(An,{label:"Total",value:te,tone:"slate"}),m.jsx(An,{label:"Success",value:`${Ul(me,te)}%`,tone:"emerald"}),m.jsx(An,{label:"Failed",value:Number(z==null?void 0:z.failed)||0,tone:"rose"})]})]},z==null?void 0:z.event_id)})}):null]},c)})})]})}function LM(){const{user:e}=Ar(),t=(e==null?void 0:e.token)||localStorage.getItem("token"),[n,i]=j.useState([]),[a,c]=j.useState(!0),[f,g]=j.useState(null),[v,y]=j.useState(""),S=j.useMemo(()=>Array.isArray(n)?n.filter(I=>!(I!=null&&I.read_at)).length:0,[n]),b=async()=>{var I,D;c(!0),y("");try{const P=await Eb(t,{limit:100,unread_only:!1});i(Array.isArray(P)?P:[])}catch(P){y(String(((D=(I=P==null?void 0:P.response)==null?void 0:I.data)==null?void 0:D.detail)||(P==null?void 0:P.message)||"Failed to load notifications")),i([])}finally{c(!1)}};j.useEffect(()=>{b()},[]);const T=async I=>{var P,U;const D=I;if(D){g(D);try{const V=await Nb(t,D);i(O=>Array.isArray(O)?O.map(k=>String(k==null?void 0:k.id)===String(D)?V:k):O)}catch(V){y(String(((U=(P=V==null?void 0:V.response)==null?void 0:P.data)==null?void 0:U.detail)||(V==null?void 0:V.message)||"Failed to mark read"))}finally{g(null)}}};return m.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsxs("h1",{className:"text-xl font-black text-gradient tracking-tight flex items-center gap-2",children:[m.jsx(Lc,{size:18,className:"text-violet-300"}),"Notifications"]}),m.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1 truncate",children:[S," unread"]})]}),m.jsx("button",{type:"button",onClick:b,className:`w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10 text-slate-200 hover:bg-white/5 active:scale-95 transition-all ${a?"opacity-60 cursor-not-allowed":""}`,disabled:a,"aria-label":"Refresh",children:m.jsx(Qi,{size:18,className:a?"animate-spin":""})})]}),m.jsxs("main",{className:"flex-1 p-4 pb-32 space-y-3 relative z-10",children:[v?m.jsx("div",{className:"glass-strong p-4 rounded-2xl border border-rose-500/30 text-rose-300 text-sm font-bold",children:v}):null,a?m.jsxs("div",{className:"glass-strong p-6 rounded-3xl border border-white/10 flex items-center gap-3 text-slate-300",children:[m.jsx(Qn,{className:"animate-spin",size:18}),m.jsx("span",{className:"text-sm font-bold",children:"Loading..."})]}):null,!a&&(!n||n.length===0)?m.jsxs("div",{className:"text-center py-16 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(Lc,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No notifications yet"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Allocation updates will appear here"})]}):null,!a&&Array.isArray(n)?n.map(I=>{const D=!(I!=null&&I.read_at);return m.jsx("div",{className:`glass-strong p-5 rounded-3xl border transition-all ${D?"border-emerald-500/30":"border-white/10 opacity-90"}`,children:m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-sm font-black text-white truncate",children:I.title||"Notification"}),m.jsx("p",{className:"text-xs text-slate-300 font-medium mt-1 break-words",children:I.body||""}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mt-2",children:[I.created_at?new Date(I.created_at).toLocaleString():"",I.awb?`  ${String(I.awb).toUpperCase()}`:""]})]}),D?m.jsx("button",{type:"button",onClick:()=>T(I.id),disabled:String(f)===String(I.id),className:`p-2 rounded-2xl bg-emerald-500/15 border border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95 transition-all ${String(f)===String(I.id)?"opacity-60 cursor-not-allowed":""}`,title:"Mark as read",children:m.jsx(I_,{size:18})}):null]})},I.id)}):null]})]})}const dc="Driver",Lu=()=>({driver_id:"",name:"",username:"",password:"",role:dc,active:!0,truck_plate:"",phone_number:"",helper_name:""}),jf=e=>String(e||"").trim()||dc,Ry=({open:e,title:t,children:n,onClose:i})=>m.jsx(ws,{children:e&&m.jsx(tt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-end justify-center bg-black/70 backdrop-blur-sm p-4",onClick:i,children:m.jsxs(tt.div,{initial:{y:24,opacity:0},animate:{y:0,opacity:1},exit:{y:24,opacity:0},className:"w-full max-w-md glass-strong rounded-3xl border-iridescent p-5 space-y-4",onClick:a=>a.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsx("div",{className:"min-w-0",children:m.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:t})}),m.jsx("button",{type:"button",onClick:i,className:"p-2 rounded-2xl glass-light border border-white/10 text-slate-300 hover:text-white active:scale-95 transition-all","aria-label":"Close",children:m.jsx(Zc,{size:18})})]}),n]})})});function PM(){const e=Qr(),t=bo(),{user:n}=Ar(),i=(n==null?void 0:n.token)||localStorage.getItem("token"),a=j.useMemo(()=>Vn(n,Mp),[n]),c=j.useMemo(()=>["Admin","Manager","Dispatcher","Support"].includes(String((n==null?void 0:n.role)||"").trim()),[n==null?void 0:n.role]),f=j.useRef(!1),g=j.useMemo(()=>{const $=new URLSearchParams(t.search),re=String($.get("returnTo")||"").trim();return re.startsWith("/")?re:""},[t.search]),[v,y]=j.useState(!0),[S,b]=j.useState(!1),[T,I]=j.useState(""),[D,P]=j.useState(""),[U,V]=j.useState(""),[O,k]=j.useState([]),[H,X]=j.useState([]),[G,Z]=j.useState(""),[J,z]=j.useState(!1),[te,me]=j.useState(Lu),[fe,Me]=j.useState(!1),[we,ae]=j.useState(null),[Ce,ke]=j.useState({name:"",username:"",password:"",role:dc,active:!0,truck_plate:"",phone_number:"",helper_name:""}),ue=async()=>{var $,re;y(!0),I("");try{const[Ie,Xe]=await Promise.all([bb(i).catch(()=>null),jp(i)]),Et=Array.isArray(Ie)?Ie:[];k(Et),X(Array.isArray(Xe)?Xe:[])}catch(Ie){const Xe=((re=($=Ie==null?void 0:Ie.response)==null?void 0:$.data)==null?void 0:re.detail)||(Ie==null?void 0:Ie.message)||"Failed to load users";I(String(Xe))}finally{y(!1)}};j.useEffect(()=>{ue()},[]),j.useEffect(()=>{if(f.current)return;const $=new URLSearchParams(t.search);if(!["1","true","yes","on"].includes(String($.get("create")||"").toLowerCase())){f.current=!0;return}if(!a){f.current=!0;return}const Ie=String($.get("role")||"").trim();me(Xe=>({...Lu(),role:Ie||Xe.role||dc})),z(!0),f.current=!0},[t.search,a]);const je=j.useMemo(()=>O.length>0?O.map($=>$==null?void 0:$.role).filter(Boolean):[dc,"Admin","Manager","Dispatcher","Warehouse","Support","Finance","Viewer","Recipient"],[O]),ge=j.useMemo(()=>{const $=String(G||"").trim().toLowerCase(),re=Array.isArray(H)?H:[];return $?re.filter(Ie=>String((Ie==null?void 0:Ie.driver_id)||"").toLowerCase().includes($)||String((Ie==null?void 0:Ie.username)||"").toLowerCase().includes($)||String((Ie==null?void 0:Ie.name)||"").toLowerCase().includes($)||String((Ie==null?void 0:Ie.role)||"").toLowerCase().includes($)):re},[H,G]),Se=$=>{$&&(ae($),ke({name:String(($==null?void 0:$.name)||""),username:String(($==null?void 0:$.username)||""),password:"",role:jf($==null?void 0:$.role),active:!!($!=null&&$.active),truck_plate:String(($==null?void 0:$.truck_plate)||""),phone_number:String(($==null?void 0:$.phone_number)||""),helper_name:String(($==null?void 0:$.helper_name)||"")}),Me(!0))},Be=async()=>{var $,re;b(!0),I(""),P("");try{const Ie={driver_id:String(te.driver_id||"").trim(),name:String(te.name||"").trim(),username:String(te.username||"").trim(),password:String(te.password||""),role:jf(te.role),active:!!te.active,truck_plate:String(te.truck_plate||"").trim(),phone_number:String(te.phone_number||"").trim(),helper_name:String(te.helper_name||"").trim()};if(!Ie.driver_id||!Ie.username||!Ie.name||!Ie.password){I("driver_id, name, username and password are required.");return}await Cb(i,Ie),P("Account created."),z(!1),me(Lu()),await ue()}catch(Ie){const Xe=((re=($=Ie==null?void 0:Ie.response)==null?void 0:$.data)==null?void 0:re.detail)||(Ie==null?void 0:Ie.message)||"Failed to create user";I(String(Xe))}finally{b(!1)}},Pe=async()=>{var $,re;if(we!=null&&we.driver_id){b(!0),I(""),P("");try{const Ie={name:String(Ce.name||"").trim(),username:String(Ce.username||"").trim(),role:jf(Ce.role),active:!!Ce.active,truck_plate:String(Ce.truck_plate||"").trim(),phone_number:String(Ce.phone_number||"").trim(),helper_name:String(Ce.helper_name||"").trim()},Xe=String(Ce.password||"").trim();Xe&&(Ie.password=Xe),await Sb(i,we.driver_id,Ie),P("Account updated."),Me(!1),ae(null),await ue()}catch(Ie){const Xe=((re=($=Ie==null?void 0:Ie.response)==null?void 0:$.data)==null?void 0:re.detail)||(Ie==null?void 0:Ie.message)||"Failed to update user";I(String(Xe))}finally{b(!1)}}},ze=async $=>{var Ie,Xe;if(!c)return;const re=String(($==null?void 0:$.driver_id)||"").trim().toUpperCase();if(!(!re||!i)){V(re),I(""),P("");try{const Et=await zp(i,{driver_id:re,duration_sec:1800}),Vt=Et==null?void 0:Et.id;if(Vt){e(`/tracking/${encodeURIComponent(String(Vt))}`);return}P("Tracking request created.")}catch(Et){const Vt=((Xe=(Ie=Et==null?void 0:Et.response)==null?void 0:Ie.data)==null?void 0:Xe.detail)||(Et==null?void 0:Et.message)||"Failed to request tracking";I(String(Vt))}finally{V("")}}};return m.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("div",{className:"sticky top-0 z-40 glass-strong backdrop-blur-xl border-b border-white/10 pb-2 shadow-sm",children:[m.jsxs("div",{className:"p-4 flex items-center gap-4",children:[m.jsx("button",{onClick:()=>e(g||-1),className:"p-2 -ml-2 rounded-xl glass-light text-slate-300 hover:text-white transition-colors border border-white/10","aria-label":"Back",children:m.jsx(go,{})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h1",{className:"font-black text-xl text-gradient tracking-tight truncate",children:"Users"}),m.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1 truncate",children:a?"Create and manage accounts":"Read-only access"})]}),m.jsx("button",{onClick:ue,className:`p-2 rounded-xl glass-light hover:bg-violet-500/20 text-violet-400 transition-all border border-white/10 ${v?"animate-spin":""}`,title:"Refresh",children:m.jsx(Qi,{size:20})}),m.jsx("button",{onClick:()=>{z(!0),me(Lu())},disabled:!a,className:`p-2 rounded-xl glass-light border border-white/10 transition-all ${a?"text-emerald-300 hover:bg-emerald-500/10 active:scale-95":"text-slate-600 cursor-not-allowed opacity-60"}`,title:a?"Create account":"Not allowed","aria-label":"Create account",children:m.jsx(lc,{size:20})})]}),m.jsx("div",{className:"px-4 pb-3",children:m.jsxs("div",{className:"relative group",children:[m.jsx(nl,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-violet-400 transition-colors z-10",size:18}),m.jsx("input",{type:"text",placeholder:"Search driver_id, username, name, role...",className:"w-full pl-12 pr-4 py-3.5 glass-strong rounded-2xl outline-none focus:ring-2 focus:ring-violet-500/30 border border-white/10 text-sm font-medium text-white placeholder-slate-500 transition-all",value:G,onChange:$=>Z($.target.value)})]})})]}),m.jsxs("div",{className:"flex-1 p-4 pb-32 relative z-10 space-y-3",children:[T&&m.jsxs("div",{className:"glass-strong rounded-2xl border border-rose-500/20 p-4 text-rose-200 text-xs font-bold flex items-center gap-3",children:[m.jsx(DI,{size:16,className:"text-rose-300"}),m.jsx("span",{className:"flex-1",children:T})]}),D&&m.jsxs("div",{className:"glass-strong rounded-2xl border border-emerald-500/20 p-4 text-emerald-200 text-xs font-bold flex items-center gap-3",children:[m.jsx(gh,{size:16,className:"text-emerald-300"}),m.jsx("span",{className:"flex-1",children:D})]}),v?m.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-violet-500/20 blur-xl rounded-full animate-pulse"}),m.jsx(Qn,{className:"animate-spin relative z-10 text-violet-400",size:48})]}),m.jsx("p",{className:"mt-6 font-bold text-xs uppercase tracking-widest text-slate-500",children:"Loading users..."})]}):ge.length===0?m.jsxs("div",{className:"text-center py-20 text-slate-400",children:[m.jsx("div",{className:"w-20 h-20 glass-strong rounded-3xl flex items-center justify-center mx-auto mb-6 border-iridescent",children:m.jsx(Y0,{className:"text-slate-500",size:36})}),m.jsx("p",{className:"font-bold text-slate-300 text-lg",children:"No users"}),m.jsx("p",{className:"text-sm mt-2 text-slate-500",children:"Try changing your search"})]}):m.jsx("div",{className:"space-y-3",children:ge.map($=>m.jsx("div",{className:"glass-strong p-5 rounded-3xl border border-white/10 hover:border-violet-500/25 transition-all",children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-2xl bg-violet-500/15 border border-violet-500/20 flex items-center justify-center",children:m.jsx(Y0,{size:20,className:"text-violet-300"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center justify-between gap-2",children:[m.jsx("p",{className:"text-sm font-black text-white truncate",children:($==null?void 0:$.name)||($==null?void 0:$.username)||($==null?void 0:$.driver_id)}),m.jsx("span",{className:`text-[9px] font-black uppercase px-2.5 py-1 rounded-full tracking-wide border ${$!=null&&$.active?"bg-emerald-500/15 text-emerald-300 border-emerald-500/20":"bg-rose-500/15 text-rose-200 border-rose-500/20"}`,children:$!=null&&$.active?"Active":"Inactive"})]}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide mt-1 truncate",children:[m.jsx("span",{className:"font-mono text-slate-300",children:$==null?void 0:$.driver_id}),"  ",m.jsx("span",{className:"font-mono",children:$==null?void 0:$.username}),"  ",($==null?void 0:$.role)||""]}),($==null?void 0:$.last_login)&&m.jsxs("p",{className:"text-[10px] text-slate-600 font-bold mt-1 truncate",children:["Last login: ",new Date($.last_login).toLocaleString()]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[c&&String(($==null?void 0:$.role)||"")!=="Recipient"?m.jsxs("button",{type:"button",onClick:()=>ze($),disabled:String(U)===String(String(($==null?void 0:$.driver_id)||"").trim().toUpperCase()),className:`px-3 py-2 rounded-2xl border text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2 ${String(U)===String(String(($==null?void 0:$.driver_id)||"").trim().toUpperCase())?"bg-emerald-500/10 border-emerald-500/20 text-emerald-200 opacity-70 cursor-not-allowed":"bg-emerald-500/15 border-emerald-500/20 text-emerald-200 hover:bg-emerald-500/20 active:scale-95"}`,title:"Request live location",children:[String(U)===String(String(($==null?void 0:$.driver_id)||"").trim().toUpperCase())?m.jsx(Qn,{size:14,className:"animate-spin"}):m.jsx(tl,{size:14}),"Track"]}):null,m.jsx("button",{type:"button",onClick:()=>Se($),disabled:!a,className:`px-4 py-2 rounded-2xl border text-[10px] font-black uppercase tracking-widest transition-all ${a?"bg-white/5 border-white/10 text-slate-200 hover:bg-white/10 active:scale-95":"bg-slate-900/30 border-white/5 text-slate-600 cursor-not-allowed opacity-60"}`,title:a?"Edit":"Not allowed",children:"Edit"})]})]})},($==null?void 0:$.driver_id)||($==null?void 0:$.id)))})]}),m.jsx(Ry,{open:J,title:"Create Account",onClose:()=>{S||z(!1)},children:m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsx("input",{value:te.driver_id,onChange:$=>me(re=>({...re,driver_id:$.target.value})),placeholder:"driver_id (ex: D004)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30 font-mono"}),m.jsx("input",{value:te.username,onChange:$=>me(re=>({...re,username:$.target.value})),placeholder:"username",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"})]}),m.jsx("input",{value:te.name,onChange:$=>me(re=>({...re,name:$.target.value})),placeholder:"Full name",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"}),m.jsx("input",{value:te.password,onChange:$=>me(re=>({...re,password:$.target.value})),placeholder:"Temporary password",type:"password",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsx("select",{value:te.role,onChange:$=>me(re=>({...re,role:$.target.value})),className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white outline-none focus:ring-2 focus:ring-emerald-500/30",children:je.map($=>m.jsx("option",{value:$,children:$},$))}),m.jsxs("label",{className:"flex items-center gap-2 px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white select-none",children:[m.jsx("input",{type:"checkbox",checked:te.active,onChange:$=>me(re=>({...re,active:$.target.checked}))}),m.jsx("span",{className:"text-xs font-bold",children:"Active"})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsx("input",{value:te.truck_plate,onChange:$=>me(re=>({...re,truck_plate:$.target.value})),placeholder:"Truck plate (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30 font-mono"}),m.jsx("input",{value:te.phone_number,onChange:$=>me(re=>({...re,phone_number:$.target.value})),placeholder:"Truck phone (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"})]}),m.jsx("input",{value:te.helper_name,onChange:$=>me(re=>({...re,helper_name:$.target.value})),placeholder:"Default helper name (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-emerald-500/30"}),m.jsxs("button",{type:"button",onClick:Be,disabled:!a||S,className:`w-full btn-premium py-4 rounded-2xl font-black uppercase tracking-widest flex items-center justify-center gap-2 shadow-lg transition-all ${!a||S?"bg-slate-800/40 text-slate-500 cursor-not-allowed opacity-70":"bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white active:scale-[0.99]"}`,children:[S?m.jsx(Qn,{className:"animate-spin",size:18}):m.jsx(zx,{size:18}),"Create"]})]})}),m.jsx(Ry,{open:fe,title:`Edit Account  ${(we==null?void 0:we.driver_id)||""}`,onClose:()=>{S||Me(!1)},children:m.jsxs("div",{className:"space-y-3",children:[m.jsx("input",{value:Ce.name,onChange:$=>ke(re=>({...re,name:$.target.value})),placeholder:"Full name",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"}),m.jsx("input",{value:Ce.username,onChange:$=>ke(re=>({...re,username:$.target.value})),placeholder:"username",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"}),m.jsx("input",{value:Ce.password,onChange:$=>ke(re=>({...re,password:$.target.value})),placeholder:"New password (optional)",type:"password",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsx("select",{value:Ce.role,onChange:$=>ke(re=>({...re,role:$.target.value})),className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white outline-none focus:ring-2 focus:ring-violet-500/30",children:je.map($=>m.jsx("option",{value:$,children:$},$))}),m.jsxs("label",{className:"flex items-center gap-2 px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white select-none",children:[m.jsx("input",{type:"checkbox",checked:Ce.active,onChange:$=>ke(re=>({...re,active:$.target.checked}))}),m.jsx("span",{className:"text-xs font-bold",children:"Active"})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsx("input",{value:Ce.truck_plate,onChange:$=>ke(re=>({...re,truck_plate:$.target.value})),placeholder:"Truck plate (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30 font-mono"}),m.jsx("input",{value:Ce.phone_number,onChange:$=>ke(re=>({...re,phone_number:$.target.value})),placeholder:"Truck phone (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"})]}),m.jsx("input",{value:Ce.helper_name,onChange:$=>ke(re=>({...re,helper_name:$.target.value})),placeholder:"Default helper name (optional)",className:"w-full px-4 py-3 bg-slate-900/40 border border-white/10 rounded-2xl text-white placeholder-slate-600 outline-none focus:ring-2 focus:ring-violet-500/30"}),m.jsxs("button",{type:"button",onClick:Pe,disabled:!a||S,className:`w-full btn-premium py-4 rounded-2xl font-black uppercase tracking-widest flex items-center justify-center gap-2 shadow-lg transition-all ${!a||S?"bg-slate-800/40 text-slate-500 cursor-not-allowed opacity-70":"bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white active:scale-[0.99]"}`,children:[S?m.jsx(Qn,{className:"animate-spin",size:18}):m.jsx(zx,{size:18}),"Save Changes"]})]})})]})}const Pu=e=>{try{return new Date(e).toLocaleString()}catch{return""}};function DM(){const e=Qr(),{requestId:t}=$w(),{user:n}=Ar(),i=(n==null?void 0:n.token)||localStorage.getItem("token"),[a,c]=j.useState(null),[f,g]=j.useState(null),[v,y]=j.useState(!0),[S,b]=j.useState(!1),[T,I]=j.useState(""),[D,P]=j.useState(""),U=j.useMemo(()=>{const H=String((n==null?void 0:n.driver_id)||"").trim();return!H||!(a!=null&&a.id)?!1:H===String((a==null?void 0:a.created_by_user_id)||"").trim()||H===String((a==null?void 0:a.target_driver_id)||"").trim()},[n==null?void 0:n.driver_id,a==null?void 0:a.id,a==null?void 0:a.created_by_user_id,a==null?void 0:a.target_driver_id]),V=async({withDetails:H=!0}={})=>{var X,G,Z,J;if(i){I("");try{let z=a;if(H){const te=await Mb(i,t);c(te),z=te}try{const te=await Rb(i,t);g(te),P("")}catch(te){const me=String(((G=(X=te==null?void 0:te.response)==null?void 0:X.data)==null?void 0:G.detail)||(te==null?void 0:te.message)||"");g(null);const fe=String((z==null?void 0:z.status)||"").trim();fe==="Pending"?P("Waiting for driver to accept..."):fe==="Denied"?P("Driver denied the request."):fe==="Stopped"?P("Tracking was stopped."):fe==="Accepted"&&me.toLowerCase().includes("no location")?P("Waiting for first GPS update..."):P(me||"No location yet")}}catch(z){I(String(((J=(Z=z==null?void 0:z.response)==null?void 0:Z.data)==null?void 0:J.detail)||(z==null?void 0:z.message)||"Failed to load tracking")),c(null),g(null)}finally{y(!1)}}};j.useEffect(()=>{y(!0),V({withDetails:!0})},[t,i]),j.useEffect(()=>{if(!i)return;const H=setInterval(()=>V({withDetails:!1}),5e3),X=setInterval(()=>V({withDetails:!0}),2e4);return()=>{clearInterval(H),clearInterval(X)}},[t,i]);const O=async()=>{var H,X;if(!(!U||!(a!=null&&a.id)||!i)){b(!0),I("");try{const G=await Up(i,a.id);c(G||a)}catch(G){I(String(((X=(H=G==null?void 0:G.response)==null?void 0:H.data)==null?void 0:X.detail)||(G==null?void 0:G.message)||"Failed to stop tracking"))}finally{b(!1)}}},k=f?{lat:Number(f.latitude),lon:Number(f.longitude)}:null;return m.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex flex-col relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-10 right-0 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}}),m.jsxs("header",{className:"px-6 py-5 flex justify-between items-center sticky top-0 z-30 glass-strong rounded-b-[32px] mx-2 mt-2 shadow-lg border-iridescent animate-slide-down",children:[m.jsxs("div",{className:"min-w-0 flex items-center gap-3",children:[m.jsx("button",{type:"button",onClick:()=>e(-1),className:"w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10 text-slate-200 hover:bg-white/5 active:scale-95 transition-all","aria-label":"Back",children:m.jsx(go,{size:18})}),m.jsxs("div",{className:"min-w-0",children:[m.jsxs("h1",{className:"text-xl font-black text-gradient tracking-tight flex items-center gap-2",children:[m.jsx(tl,{size:18,className:"text-emerald-300"}),"Live Tracking"]}),m.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1 truncate",children:["Request #",t]})]})]}),m.jsx("button",{type:"button",onClick:()=>V({withDetails:!0}),className:`w-12 h-12 rounded-2xl glass-light flex items-center justify-center border border-white/10 text-slate-200 hover:bg-white/5 active:scale-95 transition-all ${v?"opacity-60 cursor-not-allowed":""}`,disabled:v,"aria-label":"Refresh",children:m.jsx(Qi,{size:18,className:v?"animate-spin":""})})]}),m.jsxs("main",{className:"flex-1 p-4 pb-32 space-y-3 relative z-10",children:[T?m.jsx("div",{className:"glass-strong p-4 rounded-2xl border border-rose-500/30 text-rose-300 text-sm font-bold",children:T}):null,v?m.jsxs("div",{className:"glass-strong p-6 rounded-3xl border border-white/10 flex items-center gap-3 text-slate-300",children:[m.jsx(Qn,{className:"animate-spin",size:18}),m.jsx("span",{className:"text-sm font-bold",children:"Loading..."})]}):null,a?m.jsxs("div",{className:"glass-strong p-5 rounded-3xl border border-white/10 space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"text-xs text-slate-500 font-black uppercase tracking-widest",children:"Status"}),m.jsx("p",{className:"text-sm font-black text-white truncate",children:String(a.status||"")})]}),U&&String(a.status||"")==="Accepted"?m.jsxs("button",{type:"button",onClick:O,disabled:S,className:`px-4 py-2 rounded-2xl text-[10px] font-black uppercase tracking-widest border transition-all ${S?"opacity-60 cursor-not-allowed bg-slate-900/40 border-white/10 text-slate-400":"bg-rose-500/15 border-rose-500/20 text-rose-200 hover:bg-rose-500/20 active:scale-95"}`,title:"Stop tracking",children:[S?m.jsx(Qn,{size:14,className:"animate-spin inline-block mr-1 -mt-0.5"}):m.jsx(j_,{size:14,className:"inline-block mr-1 -mt-0.5"}),"Stop"]}):null]}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["Created: ",a.created_at?Pu(a.created_at):"--",a.awb?`  AWB ${String(a.awb).toUpperCase()}`:""]}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["Driver: ",a.target_driver_name?String(a.target_driver_name).trim():String(a.target_driver_id||"--"),a.target_truck_plate?`  Truck ${String(a.target_truck_plate).toUpperCase()}`:"",a.target_truck_phone?`  Phone ${a.target_truck_phone}`:""]}),m.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["Expires: ",a.expires_at?Pu(a.expires_at):"--",a.last_location_at?`  Last update ${Pu(a.last_location_at)}`:""]})]}):null,m.jsxs("div",{className:"glass-strong p-4 rounded-3xl border border-white/10",children:[m.jsx(Kp,{shipments:[],routeGeometry:null,currentLocation:k,originLocation:null,showStopNumbers:!1,currentLocationLabel:"Truck location"}),m.jsx("div",{className:"mt-3 text-xs text-slate-300 font-bold",children:f!=null&&f.timestamp?`Last GPS: ${Pu(f.timestamp)}`:D||"Waiting for driver location..."})]})]})]})}const Wi=({children:e,allowedRoles:t,allowedPermissions:n})=>{const{user:i,loading:a}=Ar();return a?m.jsx("div",{children:"Loading..."}):i?t&&!t.includes(i.role)?m.jsx(Xu,{to:"/",replace:!0}):n&&!HI(i,n)?m.jsx(Xu,{to:"/",replace:!0}):e:m.jsx(Xu,{to:"/login",replace:!0})};function jM(){return m.jsx($A,{children:m.jsx(BM,{})})}const BM=()=>{const e=bo();return m.jsx(ws,{mode:"wait",children:m.jsxs(ZA,{location:e,children:[m.jsx(Jn,{path:"/login",element:m.jsx(kk,{})}),m.jsx(Jn,{path:"/signup",element:m.jsx(Mk,{})}),m.jsxs(Jn,{element:m.jsx(Wi,{children:m.jsx(P5,{})}),children:[m.jsx(Jn,{path:"/",element:m.jsx(by,{})}),m.jsx(Jn,{path:"/home",element:m.jsx(by,{})}),m.jsx(Jn,{path:"/history",element:m.jsx(Wi,{allowedPermissions:[hi],children:m.jsx(Rk,{})})}),m.jsx(Jn,{path:"/shipments",element:m.jsx(Wi,{allowedPermissions:[Tr],children:m.jsx(SM,{})})}),m.jsx(Jn,{path:"/routes",element:m.jsx(Wi,{allowedRoles:["Manager","Admin","Dispatcher","Driver"],children:m.jsx(EM,{})})}),m.jsx(Jn,{path:"/routes/:routeId",element:m.jsx(Wi,{allowedRoles:["Manager","Admin","Dispatcher","Driver"],children:m.jsx(RM,{})})}),m.jsx(Jn,{path:"/users",element:m.jsx(Wi,{allowedPermissions:[uo],children:m.jsx(PM,{})})}),m.jsx(Jn,{path:"/notifications",element:m.jsx(Wi,{allowedPermissions:[di],children:m.jsx(LM,{})})}),m.jsx(Jn,{path:"/tracking/:requestId",element:m.jsx(Wi,{children:m.jsx(DM,{})})}),m.jsx(Jn,{path:"/settings",element:m.jsx(Dk,{})}),m.jsx(Jn,{path:"/calendar",element:m.jsx(Wi,{allowedPermissions:[Tr],children:m.jsx(AM,{})})}),m.jsx(Jn,{path:"/analytics",element:m.jsx(Wi,{allowedPermissions:[Ti],children:m.jsx(OM,{})})})]}),m.jsx(Jn,{path:"*",element:m.jsx(Xu,{to:"/",replace:!0})})]},e.pathname)})};Bf.createRoot(document.getElementById("root")).render(m.jsx($o.StrictMode,{children:m.jsx(k5,{children:m.jsx(jM,{})})}));
